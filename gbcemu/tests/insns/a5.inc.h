    TEST(gbcemu, opcode_a5) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // A5 0000
        gbc.setState(0xd75a, 0x1283, 0xa3c0, 0xf445, 0x1804, 0x8559, 0x0, 0x1);
        gbc.writeMem(0xd75a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x1283);
        EXPECT(gbc.pc(), 0xd75b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd75a), 0xa5);
        // A5 0001
        gbc.setState(0x152d, 0xffe, 0xd0e0, 0xe5fb, 0x9340, 0x40, 0x1, 0x0);
        gbc.writeMem(0x152d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xffe);
        EXPECT(gbc.pc(), 0x152e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0002
        gbc.setState(0x22ea, 0x5398, 0x8aa0, 0xebbe, 0xa258, 0xe2cb, 0x0, 0x1);
        gbc.writeMem(0x22ea, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x5398);
        EXPECT(gbc.pc(), 0x22eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0003
        gbc.setState(0x1ded, 0x31c, 0x4960, 0x7a73, 0xd202, 0xd558, 0x0, 0x1);
        gbc.writeMem(0x1ded, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x31c);
        EXPECT(gbc.pc(), 0x1dee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0004
        gbc.setState(0x36e6, 0x1c14, 0x36e0, 0x54d9, 0xc9f3, 0xab3d, 0x0, 0x0);
        gbc.writeMem(0x36e6, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x1c14);
        EXPECT(gbc.pc(), 0x36e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0005
        gbc.setState(0x149b, 0xe5d, 0xba60, 0x334b, 0xc7c9, 0x6fac, 0x0, 0x0);
        gbc.writeMem(0x149b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xe5d);
        EXPECT(gbc.pc(), 0x149c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0006
        gbc.setState(0x6f56, 0x5b23, 0xe6d0, 0x516f, 0x691a, 0x5b58, 0x1, 0x0);
        gbc.writeMem(0x6f56, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x5b23);
        EXPECT(gbc.pc(), 0x6f57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0007
        gbc.setState(0x8825, 0x9a15, 0x4b90, 0x9628, 0xf1a1, 0xb12b, 0x1, 0x1);
        gbc.writeMem(0x8825, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x9a15);
        EXPECT(gbc.pc(), 0x8826);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8825), 0xa5);
        // A5 0008
        gbc.setState(0x7857, 0x3ab4, 0x11b0, 0xcd53, 0x14f9, 0x6d3c, 0x1, 0x0);
        gbc.writeMem(0x7857, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x3ab4);
        EXPECT(gbc.pc(), 0x7858);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 000A
        gbc.setState(0xc442, 0x8a14, 0xb830, 0xde78, 0x6c0d, 0x6669, 0x0, 0x1);
        gbc.writeMem(0xc442, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x8a14);
        EXPECT(gbc.pc(), 0xc443);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc442), 0xa5);
        // A5 000B
        gbc.setState(0xa844, 0x476d, 0x51a0, 0x25d2, 0x36aa, 0x55cb, 0x1, 0x1);
        gbc.writeMem(0xa844, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x476d);
        EXPECT(gbc.pc(), 0xa845);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa844), 0xa5);
        // A5 000C
        gbc.setState(0x745, 0xbea8, 0x6300, 0xae93, 0x4232, 0x7411, 0x0, 0x1);
        gbc.writeMem(0x745, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xbea8);
        EXPECT(gbc.pc(), 0x746);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 000D
        gbc.setState(0x73b5, 0x8383, 0xc810, 0xfbdc, 0xb41a, 0x397b, 0x0, 0x0);
        gbc.writeMem(0x73b5, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x8383);
        EXPECT(gbc.pc(), 0x73b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 000E
        gbc.setState(0xde26, 0x7e18, 0x2c50, 0xbda3, 0x7aa, 0xc74a, 0x0, 0x0);
        gbc.writeMem(0xde26, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x7e18);
        EXPECT(gbc.pc(), 0xde27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde26), 0xa5);
        // A5 000F
        gbc.setState(0xcd4b, 0x1ae0, 0xc310, 0xcb4c, 0x1d5d, 0x5c8, 0x1, 0x1);
        gbc.writeMem(0xcd4b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x1ae0);
        EXPECT(gbc.pc(), 0xcd4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd4b), 0xa5);
        // A5 0010
        gbc.setState(0x78ab, 0xc128, 0xce30, 0xba49, 0xa23d, 0xa1e4, 0x0, 0x1);
        gbc.writeMem(0x78ab, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xc128);
        EXPECT(gbc.pc(), 0x78ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0011
        gbc.setState(0xe2fb, 0x3350, 0xcdb0, 0xff52, 0xd044, 0x5f7, 0x1, 0x0);
        gbc.writeMem(0xe2fb, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x3350);
        EXPECT(gbc.pc(), 0xe2fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2fb), 0xa5);
        // A5 0012
        gbc.setState(0xe62e, 0xe31c, 0x9e90, 0xfb72, 0x7efd, 0xafb2, 0x1, 0x1);
        gbc.writeMem(0xe62e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xe31c);
        EXPECT(gbc.pc(), 0xe62f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe62e), 0xa5);
        // A5 0013
        gbc.setState(0x437d, 0x384c, 0xa160, 0xe03d, 0xb1b2, 0xdbf0, 0x1, 0x0);
        gbc.writeMem(0x437d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x384c);
        EXPECT(gbc.pc(), 0x437e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0014
        gbc.setState(0x7d1e, 0xed4, 0x4de0, 0x7322, 0x8a0c, 0x365f, 0x0, 0x1);
        gbc.writeMem(0x7d1e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xed4);
        EXPECT(gbc.pc(), 0x7d1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0015
        gbc.setState(0x13d2, 0x8e7f, 0x3580, 0x6b70, 0x9ea2, 0xe715, 0x0, 0x1);
        gbc.writeMem(0x13d2, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x8e7f);
        EXPECT(gbc.pc(), 0x13d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0016
        gbc.setState(0x5d3b, 0x47c, 0x2990, 0x44db, 0x7f9b, 0xfffb, 0x0, 0x1);
        gbc.writeMem(0x5d3b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x47c);
        EXPECT(gbc.pc(), 0x5d3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0017
        gbc.setState(0xcae4, 0x8c44, 0xb410, 0xa264, 0x8463, 0xc68, 0x1, 0x0);
        gbc.writeMem(0xcae4, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x8c44);
        EXPECT(gbc.pc(), 0xcae5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcae4), 0xa5);
        // A5 0018
        gbc.setState(0x7ad3, 0x86ed, 0x1c40, 0x9c1e, 0x88b6, 0x20a2, 0x0, 0x0);
        gbc.writeMem(0x7ad3, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x86ed);
        EXPECT(gbc.pc(), 0x7ad4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0019
        gbc.setState(0xbc18, 0x7d84, 0x7320, 0xf22d, 0x78b1, 0x8702, 0x0, 0x0);
        gbc.writeMem(0xbc18, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x7d84);
        EXPECT(gbc.pc(), 0xbc19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc18), 0xa5);
        // A5 001A
        gbc.setState(0x418, 0xc33c, 0x7070, 0x712a, 0x81c7, 0x965f, 0x0, 0x0);
        gbc.writeMem(0x418, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xc33c);
        EXPECT(gbc.pc(), 0x419);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 001B
        gbc.setState(0x15c9, 0x5d3b, 0xdee0, 0xcc83, 0xccfb, 0x6b2a, 0x0, 0x1);
        gbc.writeMem(0x15c9, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x5d3b);
        EXPECT(gbc.pc(), 0x15ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 001C
        gbc.setState(0xa982, 0x17ca, 0xbfb0, 0xd0cc, 0x9b19, 0xd670, 0x0, 0x1);
        gbc.writeMem(0xa982, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x17ca);
        EXPECT(gbc.pc(), 0xa983);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa982), 0xa5);
        // A5 001D
        gbc.setState(0x721a, 0xf4f5, 0x68e0, 0x9225, 0xeb72, 0xedec, 0x1, 0x1);
        gbc.writeMem(0x721a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xf4f5);
        EXPECT(gbc.pc(), 0x721b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 001E
        gbc.setState(0x6ff8, 0x8cc3, 0x2b90, 0x3947, 0x1705, 0xa790, 0x1, 0x0);
        gbc.writeMem(0x6ff8, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x8cc3);
        EXPECT(gbc.pc(), 0x6ff9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 001F
        gbc.setState(0xca38, 0x195a, 0xde20, 0x7935, 0x58eb, 0xcf79, 0x0, 0x1);
        gbc.writeMem(0xca38, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x195a);
        EXPECT(gbc.pc(), 0xca39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca38), 0xa5);
        // A5 0020
        gbc.setState(0x8fbf, 0x7b98, 0x82c0, 0x6019, 0xd916, 0xcddf, 0x0, 0x0);
        gbc.writeMem(0x8fbf, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x7b98);
        EXPECT(gbc.pc(), 0x8fc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fbf), 0xa5);
        // A5 0021
        gbc.setState(0x2afb, 0x5c3, 0x54e0, 0x9c65, 0x846f, 0x865, 0x1, 0x1);
        gbc.writeMem(0x2afb, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x5c3);
        EXPECT(gbc.pc(), 0x2afc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0022
        gbc.setState(0x9d37, 0x9514, 0xc030, 0x3434, 0x74e5, 0xace7, 0x1, 0x1);
        gbc.writeMem(0x9d37, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x9514);
        EXPECT(gbc.pc(), 0x9d38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d37), 0xa5);
        // A5 0023
        gbc.setState(0xe12d, 0x9775, 0x5ca0, 0xa398, 0xf641, 0x2948, 0x1, 0x1);
        gbc.writeMem(0xe12d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x9775);
        EXPECT(gbc.pc(), 0xe12e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe12d), 0xa5);
        // A5 0024
        gbc.setState(0x20b5, 0x14a1, 0x6f0, 0x28e0, 0xf666, 0xabbd, 0x1, 0x0);
        gbc.writeMem(0x20b5, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x14a1);
        EXPECT(gbc.pc(), 0x20b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0025
        gbc.setState(0xc3cd, 0xc206, 0xe5d0, 0xf5a7, 0xe8ca, 0x4497, 0x0, 0x1);
        gbc.writeMem(0xc3cd, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xc206);
        EXPECT(gbc.pc(), 0xc3ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3cd), 0xa5);
        // A5 0026
        gbc.setState(0x4b34, 0x6c48, 0xa6b0, 0xbf20, 0x11ef, 0x41e9, 0x1, 0x1);
        gbc.writeMem(0x4b34, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x6c48);
        EXPECT(gbc.pc(), 0x4b35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0027
        gbc.setState(0x39ae, 0xcc00, 0xa600, 0xc0aa, 0x2d70, 0x55d7, 0x1, 0x1);
        gbc.writeMem(0x39ae, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xcc00);
        EXPECT(gbc.pc(), 0x39af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0028
        gbc.setState(0xafcb, 0xb482, 0x2de0, 0x332d, 0x9d57, 0x50b0, 0x0, 0x1);
        gbc.writeMem(0xafcb, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xb482);
        EXPECT(gbc.pc(), 0xafcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafcb), 0xa5);
        // A5 0029
        gbc.setState(0xc323, 0x5cea, 0x1d10, 0xe762, 0xc6c2, 0x30c, 0x0, 0x0);
        gbc.writeMem(0xc323, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x5cea);
        EXPECT(gbc.pc(), 0xc324);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc323), 0xa5);
        // A5 002A
        gbc.setState(0xde42, 0xe12c, 0x9db0, 0xc402, 0xb320, 0xf6bc, 0x0, 0x1);
        gbc.writeMem(0xde42, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xe12c);
        EXPECT(gbc.pc(), 0xde43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde42), 0xa5);
        // A5 002C
        gbc.setState(0xbee, 0xa4f9, 0xb680, 0x8ba1, 0x9140, 0x8b3e, 0x1, 0x0);
        gbc.writeMem(0xbee, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xa4f9);
        EXPECT(gbc.pc(), 0xbef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 002D
        gbc.setState(0x751a, 0xb17a, 0x26b0, 0x2a28, 0x2b1e, 0x8389, 0x1, 0x0);
        gbc.writeMem(0x751a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xb17a);
        EXPECT(gbc.pc(), 0x751b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 002E
        gbc.setState(0xab97, 0xe33e, 0x1550, 0x5eb8, 0x570a, 0x6188, 0x0, 0x1);
        gbc.writeMem(0xab97, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xe33e);
        EXPECT(gbc.pc(), 0xab98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab97), 0xa5);
        // A5 002F
        gbc.setState(0xb3d1, 0x58f3, 0x49b0, 0xd38d, 0x63ba, 0x5a08, 0x0, 0x0);
        gbc.writeMem(0xb3d1, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x58f3);
        EXPECT(gbc.pc(), 0xb3d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3d1), 0xa5);
        // A5 0030
        gbc.setState(0x848b, 0x9e31, 0x8880, 0xef48, 0x2e17, 0xe1b3, 0x1, 0x1);
        gbc.writeMem(0x848b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x9e31);
        EXPECT(gbc.pc(), 0x848c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x848b), 0xa5);
        // A5 0032
        gbc.setState(0xb33, 0x1ca7, 0x1980, 0xa8de, 0x8bf2, 0xc9d8, 0x1, 0x0);
        gbc.writeMem(0xb33, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x1ca7);
        EXPECT(gbc.pc(), 0xb34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0033
        gbc.setState(0x7b89, 0x5db5, 0x7930, 0x2fd6, 0xe2a5, 0x35a4, 0x0, 0x0);
        gbc.writeMem(0x7b89, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x5db5);
        EXPECT(gbc.pc(), 0x7b8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0034
        gbc.setState(0x25ff, 0xc276, 0xa530, 0x6638, 0x454d, 0xfa32, 0x1, 0x1);
        gbc.writeMem(0x25ff, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xc276);
        EXPECT(gbc.pc(), 0x2600);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0035
        gbc.setState(0x1b43, 0x7613, 0xa7f0, 0xacc0, 0xed0, 0x81d9, 0x1, 0x1);
        gbc.writeMem(0x1b43, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x7613);
        EXPECT(gbc.pc(), 0x1b44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0036
        gbc.setState(0x2d29, 0xe67e, 0xf800, 0x1e74, 0xbb58, 0x4c9b, 0x1, 0x0);
        gbc.writeMem(0x2d29, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xe67e);
        EXPECT(gbc.pc(), 0x2d2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0037
        gbc.setState(0x2aa4, 0x722, 0xcea0, 0x821f, 0x760e, 0x4841, 0x0, 0x0);
        gbc.writeMem(0x2aa4, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x722);
        EXPECT(gbc.pc(), 0x2aa5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0038
        gbc.setState(0x64df, 0x1db2, 0x3650, 0x3f37, 0xeab, 0xbe6c, 0x0, 0x0);
        gbc.writeMem(0x64df, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x1db2);
        EXPECT(gbc.pc(), 0x64e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0039
        gbc.setState(0x92cb, 0x38fc, 0xb50, 0x367, 0xa900, 0xf7af, 0x1, 0x1);
        gbc.writeMem(0x92cb, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x38fc);
        EXPECT(gbc.pc(), 0x92cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92cb), 0xa5);
        // A5 003A
        gbc.setState(0x5e19, 0x8905, 0x1b30, 0x7d8c, 0x7e1, 0x47c0, 0x1, 0x0);
        gbc.writeMem(0x5e19, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x8905);
        EXPECT(gbc.pc(), 0x5e1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 003B
        gbc.setState(0x95ab, 0x96c4, 0x37e0, 0x6487, 0xa9d3, 0x9fa6, 0x0, 0x1);
        gbc.writeMem(0x95ab, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x96c4);
        EXPECT(gbc.pc(), 0x95ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95ab), 0xa5);
        // A5 003C
        gbc.setState(0xa8d6, 0x60fb, 0x9df0, 0x12c4, 0x789d, 0x9230, 0x1, 0x0);
        gbc.writeMem(0xa8d6, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x60fb);
        EXPECT(gbc.pc(), 0xa8d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8d6), 0xa5);
        // A5 003D
        gbc.setState(0xa2ea, 0xe66d, 0xd400, 0x5ee6, 0xda5, 0x7cf3, 0x1, 0x0);
        gbc.writeMem(0xa2ea, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xe66d);
        EXPECT(gbc.pc(), 0xa2eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2ea), 0xa5);
        // A5 003E
        gbc.setState(0x6dc4, 0x1108, 0x7e20, 0xf8eb, 0xcda9, 0x42c1, 0x0, 0x1);
        gbc.writeMem(0x6dc4, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x1108);
        EXPECT(gbc.pc(), 0x6dc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 003F
        gbc.setState(0x7646, 0xfdd0, 0x5510, 0x470c, 0x98ed, 0xc119, 0x1, 0x0);
        gbc.writeMem(0x7646, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xfdd0);
        EXPECT(gbc.pc(), 0x7647);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0040
        gbc.setState(0xc3ba, 0x3981, 0xea00, 0xbd4, 0x76f4, 0x9115, 0x0, 0x0);
        gbc.writeMem(0xc3ba, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x3981);
        EXPECT(gbc.pc(), 0xc3bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3ba), 0xa5);
        // A5 0041
        gbc.setState(0x8133, 0x94f, 0xf250, 0x60b9, 0x67a3, 0x8107, 0x1, 0x1);
        gbc.writeMem(0x8133, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x94f);
        EXPECT(gbc.pc(), 0x8134);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8133), 0xa5);
        // A5 0042
        gbc.setState(0xb2dd, 0x7f06, 0xf1f0, 0xb787, 0xdb19, 0x27ca, 0x0, 0x0);
        gbc.writeMem(0xb2dd, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x7f06);
        EXPECT(gbc.pc(), 0xb2de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2dd), 0xa5);
        // A5 0043
        gbc.setState(0x2ea, 0x71b5, 0x5020, 0xe3d9, 0xbd2c, 0x9a43, 0x1, 0x1);
        gbc.writeMem(0x2ea, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x71b5);
        EXPECT(gbc.pc(), 0x2eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0044
        gbc.setState(0xb09, 0x375b, 0x38f0, 0x662f, 0xb565, 0x80f, 0x1, 0x1);
        gbc.writeMem(0xb09, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x375b);
        EXPECT(gbc.pc(), 0xb0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0045
        gbc.setState(0x7068, 0xbde9, 0xda10, 0x4a3c, 0x1805, 0x15cc, 0x1, 0x1);
        gbc.writeMem(0x7068, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xbde9);
        EXPECT(gbc.pc(), 0x7069);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0046
        gbc.setState(0x72b5, 0x96c0, 0xe050, 0x2969, 0x9a03, 0x522, 0x1, 0x0);
        gbc.writeMem(0x72b5, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x96c0);
        EXPECT(gbc.pc(), 0x72b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0047
        gbc.setState(0xe249, 0x3a33, 0x6d20, 0x8d67, 0xd74, 0xaa4f, 0x0, 0x0);
        gbc.writeMem(0xe249, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x3a33);
        EXPECT(gbc.pc(), 0xe24a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe249), 0xa5);
        // A5 0049
        gbc.setState(0x3f85, 0x62a3, 0x4a10, 0x4511, 0x8e17, 0x33b3, 0x0, 0x1);
        gbc.writeMem(0x3f85, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x62a3);
        EXPECT(gbc.pc(), 0x3f86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 004A
        gbc.setState(0xd1a5, 0x8dfe, 0x1d00, 0x87ec, 0x527a, 0x5a86, 0x1, 0x1);
        gbc.writeMem(0xd1a5, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x8dfe);
        EXPECT(gbc.pc(), 0xd1a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1a5), 0xa5);
        // A5 004B
        gbc.setState(0xc2c6, 0xaead, 0xf3a0, 0x586f, 0x4d51, 0x19a5, 0x1, 0x0);
        gbc.writeMem(0xc2c6, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xaead);
        EXPECT(gbc.pc(), 0xc2c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2c6), 0xa5);
        // A5 004C
        gbc.setState(0x575, 0x333, 0xb490, 0xf3c, 0x387a, 0x21ed, 0x0, 0x1);
        gbc.writeMem(0x575, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x333);
        EXPECT(gbc.pc(), 0x576);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 004D
        gbc.setState(0x34d9, 0xccaa, 0xa250, 0x72b, 0x1935, 0x545b, 0x1, 0x1);
        gbc.writeMem(0x34d9, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xccaa);
        EXPECT(gbc.pc(), 0x34da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0050
        gbc.setState(0x2624, 0x6ead, 0xb1a0, 0x5f9e, 0xf201, 0x8179, 0x0, 0x1);
        gbc.writeMem(0x2624, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x6ead);
        EXPECT(gbc.pc(), 0x2625);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0051
        gbc.setState(0xecc8, 0xa4fe, 0x4b90, 0x68a1, 0x1732, 0x8911, 0x0, 0x0);
        gbc.writeMem(0xecc8, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xa4fe);
        EXPECT(gbc.pc(), 0xecc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecc8), 0xa5);
        // A5 0052
        gbc.setState(0xb0f3, 0x6ca0, 0x8110, 0x66a1, 0x97ef, 0x6844, 0x0, 0x0);
        gbc.writeMem(0xb0f3, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x6ca0);
        EXPECT(gbc.pc(), 0xb0f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0f3), 0xa5);
        // A5 0053
        gbc.setState(0xb567, 0xf51c, 0x3300, 0x6556, 0x6cd8, 0x1838, 0x0, 0x1);
        gbc.writeMem(0xb567, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xf51c);
        EXPECT(gbc.pc(), 0xb568);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb567), 0xa5);
        // A5 0054
        gbc.setState(0xcb7c, 0x9e9c, 0x2a90, 0x951e, 0x1740, 0x606b, 0x0, 0x0);
        gbc.writeMem(0xcb7c, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x9e9c);
        EXPECT(gbc.pc(), 0xcb7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb7c), 0xa5);
        // A5 0055
        gbc.setState(0xd4bd, 0xe3a4, 0x12f0, 0xf8d1, 0xd14c, 0x533e, 0x0, 0x1);
        gbc.writeMem(0xd4bd, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xe3a4);
        EXPECT(gbc.pc(), 0xd4be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4bd), 0xa5);
        // A5 0056
        gbc.setState(0x6b98, 0xf823, 0xf820, 0x54aa, 0x3d70, 0xa86e, 0x1, 0x1);
        gbc.writeMem(0x6b98, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xf823);
        EXPECT(gbc.pc(), 0x6b99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0057
        gbc.setState(0xbb9f, 0xf234, 0x92b0, 0x741c, 0x2dfc, 0x853b, 0x0, 0x0);
        gbc.writeMem(0xbb9f, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xf234);
        EXPECT(gbc.pc(), 0xbba0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb9f), 0xa5);
        // A5 0058
        gbc.setState(0x5dd1, 0x4ccd, 0x3f30, 0x684d, 0x7705, 0x449d, 0x1, 0x0);
        gbc.writeMem(0x5dd1, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x4ccd);
        EXPECT(gbc.pc(), 0x5dd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0059
        gbc.setState(0xb536, 0xe6d0, 0x1580, 0x6563, 0x25c9, 0x2ec1, 0x1, 0x1);
        gbc.writeMem(0xb536, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xe6d0);
        EXPECT(gbc.pc(), 0xb537);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb536), 0xa5);
        // A5 005B
        gbc.setState(0x5a5, 0x95c0, 0x1760, 0x45f7, 0x9981, 0x3aa2, 0x0, 0x1);
        gbc.writeMem(0x5a5, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x95c0);
        EXPECT(gbc.pc(), 0x5a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 005C
        gbc.setState(0xd6c4, 0x70ab, 0x7830, 0x122b, 0xcf43, 0xb9eb, 0x0, 0x0);
        gbc.writeMem(0xd6c4, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x70ab);
        EXPECT(gbc.pc(), 0xd6c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6c4), 0xa5);
        // A5 005D
        gbc.setState(0x6bc7, 0x1ef4, 0xe790, 0x8bfa, 0xac68, 0x902, 0x0, 0x1);
        gbc.writeMem(0x6bc7, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x1ef4);
        EXPECT(gbc.pc(), 0x6bc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 005E
        gbc.setState(0x1299, 0x5c19, 0xd1d0, 0x932f, 0x36fc, 0x4b55, 0x0, 0x1);
        gbc.writeMem(0x1299, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x5c19);
        EXPECT(gbc.pc(), 0x129a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 005F
        gbc.setState(0x4192, 0x1afa, 0x4390, 0xe36d, 0xcb1c, 0x47e7, 0x0, 0x1);
        gbc.writeMem(0x4192, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x1afa);
        EXPECT(gbc.pc(), 0x4193);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0060
        gbc.setState(0xd1c8, 0x9e48, 0x8770, 0x28bf, 0xa64, 0x3494, 0x1, 0x1);
        gbc.writeMem(0xd1c8, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x9e48);
        EXPECT(gbc.pc(), 0xd1c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1c8), 0xa5);
        // A5 0062
        gbc.setState(0xd6f, 0xeafb, 0xd250, 0x9a69, 0x7c28, 0x4c3b, 0x0, 0x1);
        gbc.writeMem(0xd6f, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xeafb);
        EXPECT(gbc.pc(), 0xd70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0063
        gbc.setState(0xb531, 0xa315, 0x23f0, 0xb637, 0xe912, 0xc851, 0x1, 0x0);
        gbc.writeMem(0xb531, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xa315);
        EXPECT(gbc.pc(), 0xb532);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb531), 0xa5);
        // A5 0065
        gbc.setState(0x84dd, 0x311a, 0xc270, 0x8c7, 0x8bca, 0x4bc3, 0x0, 0x1);
        gbc.writeMem(0x84dd, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x311a);
        EXPECT(gbc.pc(), 0x84de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84dd), 0xa5);
        // A5 0066
        gbc.setState(0x8d54, 0xafb, 0x87d0, 0x8768, 0x53ed, 0x53bf, 0x1, 0x1);
        gbc.writeMem(0x8d54, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xafb);
        EXPECT(gbc.pc(), 0x8d55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d54), 0xa5);
        // A5 0067
        gbc.setState(0xbfe7, 0xb25b, 0x55d0, 0xe695, 0x4839, 0x2fe4, 0x0, 0x1);
        gbc.writeMem(0xbfe7, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xb25b);
        EXPECT(gbc.pc(), 0xbfe8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfe7), 0xa5);
        // A5 0068
        gbc.setState(0x9ed8, 0xe24e, 0x2dd0, 0xbf5f, 0x217d, 0xbee3, 0x1, 0x0);
        gbc.writeMem(0x9ed8, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xe24e);
        EXPECT(gbc.pc(), 0x9ed9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ed8), 0xa5);
        // A5 0069
        gbc.setState(0x3a59, 0xfc7f, 0xc7d0, 0xa85b, 0x4c13, 0x8840, 0x0, 0x0);
        gbc.writeMem(0x3a59, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xfc7f);
        EXPECT(gbc.pc(), 0x3a5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 006A
        gbc.setState(0x73b9, 0x513e, 0x3380, 0x9023, 0xc31b, 0xb35a, 0x1, 0x1);
        gbc.writeMem(0x73b9, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x513e);
        EXPECT(gbc.pc(), 0x73ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 006B
        gbc.setState(0x5a6d, 0xe8fa, 0x1ee0, 0xc437, 0x846, 0x25a4, 0x0, 0x1);
        gbc.writeMem(0x5a6d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xe8fa);
        EXPECT(gbc.pc(), 0x5a6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 006C
        gbc.setState(0x9d04, 0x626a, 0x87c0, 0xdae2, 0xc457, 0xb1b, 0x1, 0x0);
        gbc.writeMem(0x9d04, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x626a);
        EXPECT(gbc.pc(), 0x9d05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d04), 0xa5);
        // A5 006D
        gbc.setState(0x3cfa, 0x5930, 0x22f0, 0xd517, 0x4e4a, 0x56f, 0x1, 0x0);
        gbc.writeMem(0x3cfa, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x5930);
        EXPECT(gbc.pc(), 0x3cfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 006E
        gbc.setState(0xb35, 0xa691, 0x8860, 0x2475, 0x4d08, 0x4e8c, 0x1, 0x0);
        gbc.writeMem(0xb35, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xa691);
        EXPECT(gbc.pc(), 0xb36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 006F
        gbc.setState(0x97aa, 0x5089, 0x8300, 0x1781, 0x1ff7, 0xd69d, 0x0, 0x0);
        gbc.writeMem(0x97aa, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x5089);
        EXPECT(gbc.pc(), 0x97ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97aa), 0xa5);
        // A5 0070
        gbc.setState(0x8934, 0x62fb, 0x8120, 0x6d42, 0x935, 0x3d57, 0x1, 0x1);
        gbc.writeMem(0x8934, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x62fb);
        EXPECT(gbc.pc(), 0x8935);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8934), 0xa5);
        // A5 0071
        gbc.setState(0x7c0e, 0xa6fc, 0xbbd0, 0xe992, 0x5da5, 0xe4d4, 0x1, 0x1);
        gbc.writeMem(0x7c0e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xa6fc);
        EXPECT(gbc.pc(), 0x7c0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0072
        gbc.setState(0x9635, 0x3e35, 0xff0, 0x1a8, 0x20, 0xa949, 0x0, 0x1);
        gbc.writeMem(0x9635, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x3e35);
        EXPECT(gbc.pc(), 0x9636);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9635), 0xa5);
        // A5 0073
        gbc.setState(0x7c6e, 0xa135, 0x180, 0x66eb, 0x8a29, 0x76a2, 0x0, 0x1);
        gbc.writeMem(0x7c6e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xa135);
        EXPECT(gbc.pc(), 0x7c6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0074
        gbc.setState(0xc2fd, 0xa3a9, 0x9280, 0x90bf, 0x19c7, 0x110e, 0x1, 0x0);
        gbc.writeMem(0xc2fd, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xa3a9);
        EXPECT(gbc.pc(), 0xc2fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2fd), 0xa5);
        // A5 0075
        gbc.setState(0x107d, 0x71b, 0x7520, 0x24cf, 0x3ffa, 0x84dc, 0x1, 0x1);
        gbc.writeMem(0x107d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x71b);
        EXPECT(gbc.pc(), 0x107e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0076
        gbc.setState(0x64e, 0x8b71, 0xe430, 0xe450, 0xe63b, 0xa0da, 0x0, 0x0);
        gbc.writeMem(0x64e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x8b71);
        EXPECT(gbc.pc(), 0x64f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0077
        gbc.setState(0x345b, 0xeeb4, 0x5af0, 0xe190, 0x4283, 0xea8, 0x1, 0x1);
        gbc.writeMem(0x345b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xeeb4);
        EXPECT(gbc.pc(), 0x345c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0078
        gbc.setState(0x97aa, 0x5b32, 0x8090, 0xce81, 0x222b, 0xfb44, 0x0, 0x1);
        gbc.writeMem(0x97aa, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x5b32);
        EXPECT(gbc.pc(), 0x97ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97aa), 0xa5);
        // A5 0079
        gbc.setState(0xec5e, 0xabac, 0x75f0, 0xf60b, 0x46e7, 0xad2f, 0x0, 0x0);
        gbc.writeMem(0xec5e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xabac);
        EXPECT(gbc.pc(), 0xec5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec5e), 0xa5);
        // A5 007A
        gbc.setState(0xbce0, 0xbad8, 0xa80, 0x3142, 0x1bf2, 0x592d, 0x0, 0x1);
        gbc.writeMem(0xbce0, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xbad8);
        EXPECT(gbc.pc(), 0xbce1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbce0), 0xa5);
        // A5 007B
        gbc.setState(0x7544, 0xfc8, 0x1fa0, 0x827b, 0x598f, 0x4e90, 0x0, 0x1);
        gbc.writeMem(0x7544, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xfc8);
        EXPECT(gbc.pc(), 0x7545);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 007C
        gbc.setState(0x38a, 0x18e5, 0xdff0, 0x9fa3, 0xee33, 0xdf8, 0x1, 0x1);
        gbc.writeMem(0x38a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x18e5);
        EXPECT(gbc.pc(), 0x38b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 007D
        gbc.setState(0x1ca1, 0xe71e, 0x7a0, 0x3fc, 0xc4b5, 0x25e6, 0x1, 0x0);
        gbc.writeMem(0x1ca1, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xe71e);
        EXPECT(gbc.pc(), 0x1ca2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 007E
        gbc.setState(0x6d0e, 0x5c76, 0x2e20, 0xc8a8, 0xad4c, 0xfd6c, 0x0, 0x0);
        gbc.writeMem(0x6d0e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x5c76);
        EXPECT(gbc.pc(), 0x6d0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 007F
        gbc.setState(0xacfa, 0x1d11, 0xe350, 0x4129, 0xf06c, 0x8ab4, 0x1, 0x0);
        gbc.writeMem(0xacfa, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x1d11);
        EXPECT(gbc.pc(), 0xacfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacfa), 0xa5);
        // A5 0080
        gbc.setState(0xcf32, 0x5305, 0x20f0, 0x8146, 0x2376, 0xbb57, 0x0, 0x0);
        gbc.writeMem(0xcf32, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x5305);
        EXPECT(gbc.pc(), 0xcf33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf32), 0xa5);
        // A5 0081
        gbc.setState(0x72c7, 0xcb8a, 0x7f00, 0x618e, 0x3b27, 0x62f1, 0x1, 0x0);
        gbc.writeMem(0x72c7, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xcb8a);
        EXPECT(gbc.pc(), 0x72c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0082
        gbc.setState(0xe5fe, 0x6cbd, 0xcc20, 0x424f, 0xbbd4, 0xf2ed, 0x1, 0x1);
        gbc.writeMem(0xe5fe, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x6cbd);
        EXPECT(gbc.pc(), 0xe5ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5fe), 0xa5);
        // A5 0083
        gbc.setState(0x19f1, 0xb3cd, 0xf210, 0xe01c, 0xa018, 0x2869, 0x1, 0x1);
        gbc.writeMem(0x19f1, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xb3cd);
        EXPECT(gbc.pc(), 0x19f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0084
        gbc.setState(0x2376, 0x165, 0x3ab0, 0xd394, 0x1b64, 0xd33f, 0x1, 0x1);
        gbc.writeMem(0x2376, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x165);
        EXPECT(gbc.pc(), 0x2377);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0085
        gbc.setState(0xac2a, 0x89b7, 0xd8e0, 0x46b3, 0x4c92, 0xe60e, 0x1, 0x0);
        gbc.writeMem(0xac2a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x89b7);
        EXPECT(gbc.pc(), 0xac2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac2a), 0xa5);
        // A5 0087
        gbc.setState(0x60f5, 0x33d1, 0x3cb0, 0x8448, 0xfc79, 0x9811, 0x0, 0x0);
        gbc.writeMem(0x60f5, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x33d1);
        EXPECT(gbc.pc(), 0x60f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0088
        gbc.setState(0xc5e3, 0x8d3, 0x1500, 0xc2dc, 0xc162, 0x95c, 0x1, 0x0);
        gbc.writeMem(0xc5e3, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x8d3);
        EXPECT(gbc.pc(), 0xc5e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5e3), 0xa5);
        // A5 0089
        gbc.setState(0xdfba, 0x79bc, 0xc1e0, 0x2896, 0xb5c7, 0x2332, 0x1, 0x1);
        gbc.writeMem(0xdfba, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x79bc);
        EXPECT(gbc.pc(), 0xdfbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfba), 0xa5);
        // A5 008A
        gbc.setState(0xdf05, 0xfdbe, 0x5f0, 0xe3fa, 0x35d5, 0x3179, 0x0, 0x0);
        gbc.writeMem(0xdf05, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xfdbe);
        EXPECT(gbc.pc(), 0xdf06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf05), 0xa5);
        // A5 008B
        gbc.setState(0x4245, 0x6a86, 0x2ba0, 0xb8a4, 0x7c75, 0xcce3, 0x0, 0x0);
        gbc.writeMem(0x4245, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x6a86);
        EXPECT(gbc.pc(), 0x4246);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 008C
        gbc.setState(0xc2dc, 0x7401, 0xec50, 0x6748, 0xd34d, 0xe9b3, 0x1, 0x0);
        gbc.writeMem(0xc2dc, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x7401);
        EXPECT(gbc.pc(), 0xc2dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2dc), 0xa5);
        // A5 008D
        gbc.setState(0xa5da, 0x74a5, 0x4d00, 0xd2d2, 0x5a5, 0xbbfe, 0x1, 0x0);
        gbc.writeMem(0xa5da, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x74a5);
        EXPECT(gbc.pc(), 0xa5db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5da), 0xa5);
        // A5 008E
        gbc.setState(0xba59, 0x381a, 0x7950, 0x54bb, 0x8248, 0x29cb, 0x0, 0x1);
        gbc.writeMem(0xba59, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x381a);
        EXPECT(gbc.pc(), 0xba5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba59), 0xa5);
        // A5 008F
        gbc.setState(0x50b6, 0x6164, 0x8420, 0xf1e9, 0x7a9b, 0xbf50, 0x0, 0x1);
        gbc.writeMem(0x50b6, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x6164);
        EXPECT(gbc.pc(), 0x50b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0090
        gbc.setState(0xd0e9, 0x19f8, 0x8740, 0x5be7, 0xcde9, 0xe787, 0x0, 0x1);
        gbc.writeMem(0xd0e9, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x19f8);
        EXPECT(gbc.pc(), 0xd0ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0e9), 0xa5);
        // A5 0091
        gbc.setState(0x7fc3, 0xaa43, 0x1c30, 0xe02e, 0x3469, 0x1b00, 0x1, 0x1);
        gbc.writeMem(0x7fc3, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xaa43);
        EXPECT(gbc.pc(), 0x7fc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0092
        gbc.setState(0x8150, 0x9775, 0xb210, 0xfb4c, 0x89c0, 0x7fd3, 0x1, 0x1);
        gbc.writeMem(0x8150, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x9775);
        EXPECT(gbc.pc(), 0x8151);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8150), 0xa5);
        // A5 0093
        gbc.setState(0x3610, 0x11d0, 0xaa40, 0x7151, 0x2e5d, 0x4af0, 0x1, 0x0);
        gbc.writeMem(0x3610, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x11d0);
        EXPECT(gbc.pc(), 0x3611);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0094
        gbc.setState(0xb951, 0xbc62, 0x92f0, 0x642, 0xed45, 0x601, 0x0, 0x1);
        gbc.writeMem(0xb951, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xbc62);
        EXPECT(gbc.pc(), 0xb952);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb951), 0xa5);
        // A5 0095
        gbc.setState(0x7bc3, 0x4e2, 0xc40, 0x491b, 0x740f, 0xe5e9, 0x0, 0x1);
        gbc.writeMem(0x7bc3, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x4e2);
        EXPECT(gbc.pc(), 0x7bc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0096
        gbc.setState(0x2b31, 0xd27a, 0x8dc0, 0xea9a, 0xeff6, 0xf4ae, 0x1, 0x1);
        gbc.writeMem(0x2b31, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xd27a);
        EXPECT(gbc.pc(), 0x2b32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0097
        gbc.setState(0x1356, 0x941c, 0xf4c0, 0xf82b, 0x797b, 0xceb8, 0x0, 0x0);
        gbc.writeMem(0x1356, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x941c);
        EXPECT(gbc.pc(), 0x1357);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0098
        gbc.setState(0xdac7, 0xc58d, 0x8a60, 0x3d74, 0x4b56, 0x9a65, 0x0, 0x0);
        gbc.writeMem(0xdac7, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xc58d);
        EXPECT(gbc.pc(), 0xdac8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdac7), 0xa5);
        // A5 0099
        gbc.setState(0x4be6, 0x85a8, 0x4970, 0x7e99, 0xed1c, 0xf5c1, 0x1, 0x0);
        gbc.writeMem(0x4be6, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x85a8);
        EXPECT(gbc.pc(), 0x4be7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 009B
        gbc.setState(0x8d87, 0xa80a, 0xbd50, 0x1207, 0x6e32, 0x3412, 0x0, 0x0);
        gbc.writeMem(0x8d87, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xa80a);
        EXPECT(gbc.pc(), 0x8d88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d87), 0xa5);
        // A5 009C
        gbc.setState(0x2158, 0x4ba4, 0x78e0, 0x9c48, 0x2696, 0x6076, 0x1, 0x1);
        gbc.writeMem(0x2158, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x4ba4);
        EXPECT(gbc.pc(), 0x2159);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 009D
        gbc.setState(0x38e7, 0x1230, 0x2400, 0x8a58, 0xe985, 0x45af, 0x0, 0x0);
        gbc.writeMem(0x38e7, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x1230);
        EXPECT(gbc.pc(), 0x38e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 009E
        gbc.setState(0xa5e1, 0x12ef, 0x9df0, 0x4c74, 0xcaed, 0x8e8e, 0x1, 0x1);
        gbc.writeMem(0xa5e1, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x12ef);
        EXPECT(gbc.pc(), 0xa5e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5e1), 0xa5);
        // A5 009F
        gbc.setState(0x4e36, 0x3dbe, 0x7ad0, 0xd61f, 0xd23f, 0x391d, 0x1, 0x1);
        gbc.writeMem(0x4e36, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x3dbe);
        EXPECT(gbc.pc(), 0x4e37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00A0
        gbc.setState(0xa6d, 0xf911, 0x9f80, 0x9675, 0xcbd5, 0x3195, 0x1, 0x1);
        gbc.writeMem(0xa6d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xf911);
        EXPECT(gbc.pc(), 0xa6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00A1
        gbc.setState(0x220e, 0xf157, 0x77d0, 0x3d7d, 0x7045, 0x3f78, 0x0, 0x0);
        gbc.writeMem(0x220e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xf157);
        EXPECT(gbc.pc(), 0x220f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00A2
        gbc.setState(0x3456, 0x106e, 0xcbd0, 0xdd47, 0xb2fd, 0xbec8, 0x0, 0x0);
        gbc.writeMem(0x3456, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x106e);
        EXPECT(gbc.pc(), 0x3457);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00A4
        gbc.setState(0x7a80, 0x826e, 0xc750, 0xb6bd, 0xf5dc, 0xc9c2, 0x0, 0x0);
        gbc.writeMem(0x7a80, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x826e);
        EXPECT(gbc.pc(), 0x7a81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00A5
        gbc.setState(0xa040, 0x1ea0, 0xcef0, 0x1812, 0xedcf, 0x600f, 0x0, 0x0);
        gbc.writeMem(0xa040, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x1ea0);
        EXPECT(gbc.pc(), 0xa041);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa040), 0xa5);
        // A5 00A6
        gbc.setState(0x78e9, 0xde49, 0x50f0, 0x488b, 0x746a, 0x4b8b, 0x1, 0x1);
        gbc.writeMem(0x78e9, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xde49);
        EXPECT(gbc.pc(), 0x78ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00A9
        gbc.setState(0x4758, 0xc14d, 0xbcd0, 0x25ca, 0xeec7, 0xa87, 0x0, 0x1);
        gbc.writeMem(0x4758, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xc14d);
        EXPECT(gbc.pc(), 0x4759);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00AA
        gbc.setState(0xaba6, 0x3c00, 0x9af0, 0xd4bf, 0x444, 0xb2bc, 0x0, 0x1);
        gbc.writeMem(0xaba6, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x3c00);
        EXPECT(gbc.pc(), 0xaba7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaba6), 0xa5);
        // A5 00AB
        gbc.setState(0x6bbd, 0xe8f7, 0x7720, 0x678c, 0x5fab, 0x3de1, 0x1, 0x1);
        gbc.writeMem(0x6bbd, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xe8f7);
        EXPECT(gbc.pc(), 0x6bbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00AC
        gbc.setState(0xc297, 0x6e5a, 0x3b50, 0x1977, 0x6be6, 0x3c24, 0x1, 0x0);
        gbc.writeMem(0xc297, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x6e5a);
        EXPECT(gbc.pc(), 0xc298);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc297), 0xa5);
        // A5 00AD
        gbc.setState(0xab74, 0x776e, 0x750, 0x37b2, 0x4b0, 0xe523, 0x0, 0x1);
        gbc.writeMem(0xab74, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x776e);
        EXPECT(gbc.pc(), 0xab75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab74), 0xa5);
        // A5 00AF
        gbc.setState(0xbc25, 0x4d51, 0x8250, 0xd661, 0x4ee5, 0xf139, 0x0, 0x1);
        gbc.writeMem(0xbc25, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x4d51);
        EXPECT(gbc.pc(), 0xbc26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc25), 0xa5);
        // A5 00B0
        gbc.setState(0x394c, 0x18ed, 0x8470, 0x5c9b, 0x8cb, 0xc645, 0x1, 0x0);
        gbc.writeMem(0x394c, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x18ed);
        EXPECT(gbc.pc(), 0x394d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00B1
        gbc.setState(0x2384, 0x601f, 0x9010, 0x4199, 0xa730, 0xa6da, 0x1, 0x1);
        gbc.writeMem(0x2384, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x601f);
        EXPECT(gbc.pc(), 0x2385);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00B2
        gbc.setState(0x2d66, 0x435c, 0x6650, 0xf52b, 0x2b3a, 0xb5ad, 0x1, 0x1);
        gbc.writeMem(0x2d66, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x435c);
        EXPECT(gbc.pc(), 0x2d67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00B3
        gbc.setState(0x66b5, 0x4296, 0x1e10, 0x8903, 0x44f9, 0xdb53, 0x1, 0x1);
        gbc.writeMem(0x66b5, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x4296);
        EXPECT(gbc.pc(), 0x66b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00B4
        gbc.setState(0x42b, 0x57c, 0xbb0, 0xee60, 0xc4ab, 0x62f1, 0x1, 0x1);
        gbc.writeMem(0x42b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x57c);
        EXPECT(gbc.pc(), 0x42c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00B5
        gbc.setState(0x3040, 0x3229, 0xa0e0, 0x7e3f, 0x5249, 0xb692, 0x1, 0x1);
        gbc.writeMem(0x3040, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x3229);
        EXPECT(gbc.pc(), 0x3041);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00B6
        gbc.setState(0xb5ef, 0xacb4, 0xaac0, 0x3749, 0xd5ea, 0x8068, 0x1, 0x1);
        gbc.writeMem(0xb5ef, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xacb4);
        EXPECT(gbc.pc(), 0xb5f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5ef), 0xa5);
        // A5 00B7
        gbc.setState(0x5881, 0x2e35, 0x9180, 0x95e5, 0x8b4d, 0x29e0, 0x1, 0x1);
        gbc.writeMem(0x5881, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x2e35);
        EXPECT(gbc.pc(), 0x5882);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00B8
        gbc.setState(0xec95, 0xaa17, 0x4480, 0x229a, 0x72d9, 0x1053, 0x0, 0x0);
        gbc.writeMem(0xec95, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xaa17);
        EXPECT(gbc.pc(), 0xec96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec95), 0xa5);
        // A5 00B9
        gbc.setState(0xad1b, 0x6511, 0xc770, 0x943, 0x9697, 0xd767, 0x0, 0x0);
        gbc.writeMem(0xad1b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x6511);
        EXPECT(gbc.pc(), 0xad1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad1b), 0xa5);
        // A5 00BA
        gbc.setState(0x7275, 0x80e8, 0xe200, 0xb6, 0x559d, 0xc989, 0x1, 0x1);
        gbc.writeMem(0x7275, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x80e8);
        EXPECT(gbc.pc(), 0x7276);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00BB
        gbc.setState(0xa231, 0x7139, 0xc5b0, 0x7625, 0x3fb, 0x2014, 0x0, 0x1);
        gbc.writeMem(0xa231, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x7139);
        EXPECT(gbc.pc(), 0xa232);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa231), 0xa5);
        // A5 00BC
        gbc.setState(0x961d, 0xf3ae, 0x45e0, 0xa9d3, 0x4d9d, 0xcb3, 0x0, 0x0);
        gbc.writeMem(0x961d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xf3ae);
        EXPECT(gbc.pc(), 0x961e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x961d), 0xa5);
        // A5 00BD
        gbc.setState(0x34fa, 0xf291, 0x5ab0, 0xf119, 0x4d25, 0x6f1d, 0x0, 0x0);
        gbc.writeMem(0x34fa, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xf291);
        EXPECT(gbc.pc(), 0x34fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00BE
        gbc.setState(0xc6ef, 0x5b42, 0x5370, 0xaa37, 0x3658, 0x602, 0x0, 0x1);
        gbc.writeMem(0xc6ef, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x5b42);
        EXPECT(gbc.pc(), 0xc6f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6ef), 0xa5);
        // A5 00BF
        gbc.setState(0x4cda, 0x5b50, 0x80d0, 0x2e99, 0xa08b, 0x7be7, 0x0, 0x1);
        gbc.writeMem(0x4cda, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x5b50);
        EXPECT(gbc.pc(), 0x4cdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00C0
        gbc.setState(0xc46e, 0x788d, 0x20d0, 0x4cc2, 0xf1cd, 0x74e9, 0x0, 0x1);
        gbc.writeMem(0xc46e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x788d);
        EXPECT(gbc.pc(), 0xc46f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc46e), 0xa5);
        // A5 00C1
        gbc.setState(0x9ce9, 0x28dc, 0x4d70, 0x40f4, 0x8718, 0x62af, 0x0, 0x1);
        gbc.writeMem(0x9ce9, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x28dc);
        EXPECT(gbc.pc(), 0x9cea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ce9), 0xa5);
        // A5 00C2
        gbc.setState(0xabdc, 0xe597, 0x6f90, 0xaadf, 0x2ab, 0x1248, 0x0, 0x0);
        gbc.writeMem(0xabdc, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xe597);
        EXPECT(gbc.pc(), 0xabdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabdc), 0xa5);
        // A5 00C3
        gbc.setState(0x5c8, 0x1314, 0x2d50, 0xcc0a, 0x76bf, 0xc76, 0x0, 0x0);
        gbc.writeMem(0x5c8, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x1314);
        EXPECT(gbc.pc(), 0x5c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00C4
        gbc.setState(0xaf76, 0x2382, 0xce40, 0xa533, 0xcb29, 0xa94c, 0x0, 0x0);
        gbc.writeMem(0xaf76, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x2382);
        EXPECT(gbc.pc(), 0xaf77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf76), 0xa5);
        // A5 00C5
        gbc.setState(0xa276, 0x3d27, 0xf770, 0x34a8, 0xf2f2, 0xafe1, 0x0, 0x0);
        gbc.writeMem(0xa276, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x3d27);
        EXPECT(gbc.pc(), 0xa277);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa276), 0xa5);
        // A5 00C6
        gbc.setState(0x4ce3, 0xbc61, 0x850, 0x7ee1, 0xb850, 0xfa83, 0x0, 0x1);
        gbc.writeMem(0x4ce3, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xbc61);
        EXPECT(gbc.pc(), 0x4ce4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00C7
        gbc.setState(0xb05, 0xde19, 0x8250, 0x9205, 0xdcd, 0x6a7f, 0x1, 0x0);
        gbc.writeMem(0xb05, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xde19);
        EXPECT(gbc.pc(), 0xb06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00C8
        gbc.setState(0x67f9, 0x548f, 0x5a60, 0xe579, 0x3b1b, 0xb76d, 0x1, 0x1);
        gbc.writeMem(0x67f9, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x548f);
        EXPECT(gbc.pc(), 0x67fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00C9
        gbc.setState(0xc03c, 0x9c94, 0x9c80, 0x34c0, 0x9623, 0xb1a1, 0x0, 0x1);
        gbc.writeMem(0xc03c, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x9c94);
        EXPECT(gbc.pc(), 0xc03d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc03c), 0xa5);
        // A5 00CA
        gbc.setState(0x2326, 0x9b9a, 0x3bb0, 0x3b37, 0xb3f0, 0xc590, 0x1, 0x1);
        gbc.writeMem(0x2326, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x9b9a);
        EXPECT(gbc.pc(), 0x2327);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00CB
        gbc.setState(0xe445, 0x4660, 0xc1c0, 0xf84a, 0x6db9, 0xd62f, 0x0, 0x1);
        gbc.writeMem(0xe445, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x4660);
        EXPECT(gbc.pc(), 0xe446);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe445), 0xa5);
        // A5 00CC
        gbc.setState(0x2e01, 0x1dce, 0x41f0, 0x21d8, 0x27d7, 0x2152, 0x1, 0x1);
        gbc.writeMem(0x2e01, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x1dce);
        EXPECT(gbc.pc(), 0x2e02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00CD
        gbc.setState(0x96c, 0x8311, 0xe590, 0x3648, 0x299, 0x401, 0x1, 0x0);
        gbc.writeMem(0x96c, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x8311);
        EXPECT(gbc.pc(), 0x96d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00CF
        gbc.setState(0x8646, 0x34cc, 0xa920, 0xa057, 0xda42, 0xbeed, 0x0, 0x0);
        gbc.writeMem(0x8646, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x34cc);
        EXPECT(gbc.pc(), 0x8647);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8646), 0xa5);
        // A5 00D0
        gbc.setState(0x8fe, 0xf2c5, 0xe6d0, 0x97d4, 0x8ac7, 0xde3, 0x1, 0x1);
        gbc.writeMem(0x8fe, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xf2c5);
        EXPECT(gbc.pc(), 0x8ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00D1
        gbc.setState(0x5972, 0x807c, 0x61f0, 0x8b1, 0xc80c, 0x6e62, 0x0, 0x0);
        gbc.writeMem(0x5972, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x807c);
        EXPECT(gbc.pc(), 0x5973);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00D2
        gbc.setState(0xa7bf, 0x211e, 0x5700, 0x2f5c, 0xdc65, 0xfffd, 0x1, 0x0);
        gbc.writeMem(0xa7bf, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x211e);
        EXPECT(gbc.pc(), 0xa7c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7bf), 0xa5);
        // A5 00D3
        gbc.setState(0x7728, 0x182c, 0x9f20, 0x54a9, 0x3ec1, 0xd54b, 0x0, 0x0);
        gbc.writeMem(0x7728, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x182c);
        EXPECT(gbc.pc(), 0x7729);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00D4
        gbc.setState(0x9003, 0xdc16, 0x5fa0, 0xedc5, 0xb591, 0x758a, 0x1, 0x0);
        gbc.writeMem(0x9003, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xdc16);
        EXPECT(gbc.pc(), 0x9004);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9003), 0xa5);
        // A5 00D5
        gbc.setState(0xe980, 0xd32e, 0x2950, 0x1fba, 0xbadd, 0xc1ea, 0x1, 0x0);
        gbc.writeMem(0xe980, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xd32e);
        EXPECT(gbc.pc(), 0xe981);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe980), 0xa5);
        // A5 00D6
        gbc.setState(0x6e91, 0xe053, 0xe980, 0xdd5f, 0x6ad0, 0x4da9, 0x0, 0x0);
        gbc.writeMem(0x6e91, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xe053);
        EXPECT(gbc.pc(), 0x6e92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00D7
        gbc.setState(0x5c09, 0xd4ee, 0x36c0, 0x48ce, 0xcb27, 0x6924, 0x0, 0x1);
        gbc.writeMem(0x5c09, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xd4ee);
        EXPECT(gbc.pc(), 0x5c0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00D8
        gbc.setState(0xca96, 0x5c02, 0x57a0, 0xdfe5, 0x5d0b, 0xd7c6, 0x1, 0x1);
        gbc.writeMem(0xca96, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x5c02);
        EXPECT(gbc.pc(), 0xca97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca96), 0xa5);
        // A5 00D9
        gbc.setState(0x37eb, 0x47f3, 0x3830, 0xb8f7, 0x1320, 0xd823, 0x0, 0x1);
        gbc.writeMem(0x37eb, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x47f3);
        EXPECT(gbc.pc(), 0x37ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00DA
        gbc.setState(0x7d98, 0x72ac, 0x81b0, 0x5c6c, 0x48df, 0x3946, 0x0, 0x0);
        gbc.writeMem(0x7d98, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x72ac);
        EXPECT(gbc.pc(), 0x7d99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00DB
        gbc.setState(0xd315, 0xe1a, 0x1330, 0xc994, 0xc86e, 0x8f3d, 0x1, 0x0);
        gbc.writeMem(0xd315, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xe1a);
        EXPECT(gbc.pc(), 0xd316);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd315), 0xa5);
        // A5 00DC
        gbc.setState(0x310c, 0xe8ba, 0x2b00, 0x809e, 0x6780, 0x9eb3, 0x0, 0x1);
        gbc.writeMem(0x310c, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xe8ba);
        EXPECT(gbc.pc(), 0x310d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00DD
        gbc.setState(0x24e6, 0x51c7, 0x1de0, 0xba9b, 0x1907, 0x439c, 0x1, 0x0);
        gbc.writeMem(0x24e6, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x51c7);
        EXPECT(gbc.pc(), 0x24e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00DE
        gbc.setState(0xc8d7, 0x7ec6, 0xacd0, 0xd52c, 0x999c, 0x2adf, 0x1, 0x1);
        gbc.writeMem(0xc8d7, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x7ec6);
        EXPECT(gbc.pc(), 0xc8d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8d7), 0xa5);
        // A5 00DF
        gbc.setState(0x664b, 0xccbf, 0x7080, 0x1679, 0x2c9c, 0x40fd, 0x0, 0x1);
        gbc.writeMem(0x664b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xccbf);
        EXPECT(gbc.pc(), 0x664c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00E0
        gbc.setState(0x6f02, 0x2320, 0x5f60, 0x6408, 0x6646, 0x1303, 0x1, 0x1);
        gbc.writeMem(0x6f02, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x2320);
        EXPECT(gbc.pc(), 0x6f03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00E1
        gbc.setState(0xb982, 0xd556, 0xb620, 0x3277, 0x696c, 0x6894, 0x1, 0x0);
        gbc.writeMem(0xb982, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xd556);
        EXPECT(gbc.pc(), 0xb983);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb982), 0xa5);
        // A5 00E2
        gbc.setState(0x65df, 0x295f, 0x6b00, 0x32ec, 0xa648, 0x232d, 0x0, 0x0);
        gbc.writeMem(0x65df, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x295f);
        EXPECT(gbc.pc(), 0x65e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00E3
        gbc.setState(0xe793, 0x8b89, 0x9140, 0x2e8b, 0xe07, 0xe4e8, 0x0, 0x0);
        gbc.writeMem(0xe793, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x8b89);
        EXPECT(gbc.pc(), 0xe794);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe793), 0xa5);
        // A5 00E4
        gbc.setState(0x919d, 0x7456, 0xb490, 0xa628, 0xd3b1, 0x2df9, 0x0, 0x1);
        gbc.writeMem(0x919d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x7456);
        EXPECT(gbc.pc(), 0x919e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x919d), 0xa5);
        // A5 00E6
        gbc.setState(0xe0fe, 0x7abc, 0x2390, 0x1976, 0x12f4, 0xcf05, 0x1, 0x1);
        gbc.writeMem(0xe0fe, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x7abc);
        EXPECT(gbc.pc(), 0xe0ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0fe), 0xa5);
        // A5 00E7
        gbc.setState(0xcf39, 0x5b0a, 0x3ce0, 0xfeaa, 0x3433, 0x8be9, 0x0, 0x1);
        gbc.writeMem(0xcf39, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x5b0a);
        EXPECT(gbc.pc(), 0xcf3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf39), 0xa5);
        // A5 00E8
        gbc.setState(0xb19d, 0x4232, 0xf0f0, 0xe789, 0x9aa4, 0x5430, 0x0, 0x1);
        gbc.writeMem(0xb19d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x4232);
        EXPECT(gbc.pc(), 0xb19e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb19d), 0xa5);
        // A5 00E9
        gbc.setState(0x8664, 0xcf45, 0x2290, 0xad8, 0x4fb5, 0x1f62, 0x1, 0x1);
        gbc.writeMem(0x8664, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xcf45);
        EXPECT(gbc.pc(), 0x8665);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8664), 0xa5);
        // A5 00EA
        gbc.setState(0x8335, 0xe6c1, 0xbba0, 0xc4c1, 0xd59b, 0xe6a5, 0x1, 0x0);
        gbc.writeMem(0x8335, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xe6c1);
        EXPECT(gbc.pc(), 0x8336);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8335), 0xa5);
        // A5 00EB
        gbc.setState(0xb6e5, 0x3b5b, 0xaaa0, 0x90d6, 0x90a5, 0x6b02, 0x0, 0x0);
        gbc.writeMem(0xb6e5, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x3b5b);
        EXPECT(gbc.pc(), 0xb6e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6e5), 0xa5);
        // A5 00EC
        gbc.setState(0xc5b8, 0xad01, 0x7df0, 0xb8ad, 0x8a9c, 0x4bd4, 0x1, 0x0);
        gbc.writeMem(0xc5b8, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xad01);
        EXPECT(gbc.pc(), 0xc5b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5b8), 0xa5);
        // A5 00ED
        gbc.setState(0xd0d9, 0xa0e0, 0xa3b0, 0xfd18, 0x1918, 0xc748, 0x1, 0x1);
        gbc.writeMem(0xd0d9, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xa0e0);
        EXPECT(gbc.pc(), 0xd0da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0d9), 0xa5);
        // A5 00EE
        gbc.setState(0xc27, 0x6838, 0x1770, 0x299, 0xc9cc, 0xfe97, 0x0, 0x1);
        gbc.writeMem(0xc27, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x6838);
        EXPECT(gbc.pc(), 0xc28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00EF
        gbc.setState(0x1c61, 0x19d8, 0x7480, 0x45e0, 0x6865, 0x5bd1, 0x0, 0x0);
        gbc.writeMem(0x1c61, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x19d8);
        EXPECT(gbc.pc(), 0x1c62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00F0
        gbc.setState(0xb798, 0x5dab, 0x7420, 0x3fd7, 0xc716, 0x2f7b, 0x1, 0x1);
        gbc.writeMem(0xb798, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x5dab);
        EXPECT(gbc.pc(), 0xb799);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb798), 0xa5);
        // A5 00F1
        gbc.setState(0x863a, 0x334c, 0xc500, 0x3c57, 0x5b45, 0xd1aa, 0x0, 0x0);
        gbc.writeMem(0x863a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x334c);
        EXPECT(gbc.pc(), 0x863b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x863a), 0xa5);
        // A5 00F2
        gbc.setState(0xb047, 0x2c6, 0x3da0, 0x9e15, 0xddb4, 0xce77, 0x1, 0x0);
        gbc.writeMem(0xb047, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x2c6);
        EXPECT(gbc.pc(), 0xb048);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb047), 0xa5);
        // A5 00F3
        gbc.setState(0xba3, 0xb21, 0x7b20, 0x748d, 0x6d97, 0xf2ba, 0x0, 0x0);
        gbc.writeMem(0xba3, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xb21);
        EXPECT(gbc.pc(), 0xba4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00F4
        gbc.setState(0xc3b5, 0xe310, 0x4a10, 0x5d98, 0xdefd, 0xf766, 0x1, 0x0);
        gbc.writeMem(0xc3b5, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xe310);
        EXPECT(gbc.pc(), 0xc3b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3b5), 0xa5);
        // A5 00F5
        gbc.setState(0xaa0a, 0x382f, 0x8c80, 0xafc5, 0x9bbf, 0xc901, 0x0, 0x0);
        gbc.writeMem(0xaa0a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x382f);
        EXPECT(gbc.pc(), 0xaa0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa0a), 0xa5);
        // A5 00F6
        gbc.setState(0xb5fa, 0xe956, 0xe860, 0x3a7c, 0xd88, 0xe210, 0x0, 0x1);
        gbc.writeMem(0xb5fa, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xe956);
        EXPECT(gbc.pc(), 0xb5fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5fa), 0xa5);
        // A5 00F7
        gbc.setState(0x87bd, 0xa19, 0xa5b0, 0x4f32, 0xfd9f, 0xbeb3, 0x1, 0x1);
        gbc.writeMem(0x87bd, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xa19);
        EXPECT(gbc.pc(), 0x87be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87bd), 0xa5);
        // A5 00F8
        gbc.setState(0x3b1d, 0xe150, 0x2190, 0xf3eb, 0x33a8, 0x2d74, 0x0, 0x1);
        gbc.writeMem(0x3b1d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xe150);
        EXPECT(gbc.pc(), 0x3b1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00F9
        gbc.setState(0x61ed, 0xa7ea, 0x92b0, 0x92ac, 0x6c77, 0x30e7, 0x0, 0x0);
        gbc.writeMem(0x61ed, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xa7ea);
        EXPECT(gbc.pc(), 0x61ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00FA
        gbc.setState(0xc8c8, 0x9f70, 0xcbe0, 0x4588, 0x215c, 0x875, 0x0, 0x0);
        gbc.writeMem(0xc8c8, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x9f70);
        EXPECT(gbc.pc(), 0xc8c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8c8), 0xa5);
        // A5 00FB
        gbc.setState(0xd4f5, 0xc9de, 0x1060, 0x479f, 0x56c6, 0x403d, 0x1, 0x0);
        gbc.writeMem(0xd4f5, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xc9de);
        EXPECT(gbc.pc(), 0xd4f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4f5), 0xa5);
        // A5 00FC
        gbc.setState(0xb847, 0x1aeb, 0x77e0, 0xa433, 0x8870, 0xb4ed, 0x1, 0x1);
        gbc.writeMem(0xb847, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x1aeb);
        EXPECT(gbc.pc(), 0xb848);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb847), 0xa5);
        // A5 00FD
        gbc.setState(0x9839, 0xbab3, 0xf8e0, 0x7f04, 0xe569, 0xdb74, 0x0, 0x1);
        gbc.writeMem(0x9839, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xbab3);
        EXPECT(gbc.pc(), 0x983a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9839), 0xa5);
        // A5 00FE
        gbc.setState(0x16eb, 0xa035, 0xb4d0, 0xd202, 0x23ba, 0xcc77, 0x1, 0x1);
        gbc.writeMem(0x16eb, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xa035);
        EXPECT(gbc.pc(), 0x16ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 00FF
        gbc.setState(0xe35f, 0x2953, 0x79b0, 0x3b90, 0x4eb0, 0xcbde, 0x0, 0x0);
        gbc.writeMem(0xe35f, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x2953);
        EXPECT(gbc.pc(), 0xe360);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe35f), 0xa5);
        // A5 0100
        gbc.setState(0x991f, 0xf279, 0x6ae0, 0xf976, 0x82a4, 0xe89e, 0x1, 0x1);
        gbc.writeMem(0x991f, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xf279);
        EXPECT(gbc.pc(), 0x9920);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x991f), 0xa5);
        // A5 0102
        gbc.setState(0x3387, 0xa9b5, 0xf220, 0x4fe, 0x2d61, 0x21e7, 0x1, 0x0);
        gbc.writeMem(0x3387, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xa9b5);
        EXPECT(gbc.pc(), 0x3388);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0103
        gbc.setState(0xc306, 0xb585, 0xdf50, 0x1941, 0x8b96, 0xb326, 0x0, 0x0);
        gbc.writeMem(0xc306, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xb585);
        EXPECT(gbc.pc(), 0xc307);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc306), 0xa5);
        // A5 0104
        gbc.setState(0xe8d1, 0xd35f, 0xce0, 0xcd37, 0xdaef, 0xe2b1, 0x0, 0x1);
        gbc.writeMem(0xe8d1, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xd35f);
        EXPECT(gbc.pc(), 0xe8d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8d1), 0xa5);
        // A5 0105
        gbc.setState(0x2ef4, 0x2b06, 0xd3e0, 0x8c77, 0x2c03, 0xfd06, 0x0, 0x1);
        gbc.writeMem(0x2ef4, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x2b06);
        EXPECT(gbc.pc(), 0x2ef5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 010A
        gbc.setState(0xe80, 0x53e9, 0x5510, 0xce7a, 0x2476, 0xd582, 0x1, 0x1);
        gbc.writeMem(0xe80, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x53e9);
        EXPECT(gbc.pc(), 0xe81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 010B
        gbc.setState(0xcc20, 0x809d, 0x27a0, 0xb605, 0x4b37, 0xecd, 0x0, 0x1);
        gbc.writeMem(0xcc20, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x809d);
        EXPECT(gbc.pc(), 0xcc21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc20), 0xa5);
        // A5 010C
        gbc.setState(0x7e84, 0x4625, 0xba90, 0xbb56, 0x84d8, 0x1f99, 0x1, 0x0);
        gbc.writeMem(0x7e84, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x4625);
        EXPECT(gbc.pc(), 0x7e85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 010D
        gbc.setState(0xe34e, 0xaf96, 0x4170, 0x1bd0, 0xec75, 0xd383, 0x1, 0x0);
        gbc.writeMem(0xe34e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xaf96);
        EXPECT(gbc.pc(), 0xe34f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe34e), 0xa5);
        // A5 010E
        gbc.setState(0xce5e, 0x4cb, 0x5d80, 0xaf6a, 0x4ad4, 0xae16, 0x0, 0x1);
        gbc.writeMem(0xce5e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x4cb);
        EXPECT(gbc.pc(), 0xce5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce5e), 0xa5);
        // A5 010F
        gbc.setState(0x2f2a, 0xe5eb, 0xec80, 0xfb63, 0x35b7, 0xec74, 0x1, 0x1);
        gbc.writeMem(0x2f2a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xe5eb);
        EXPECT(gbc.pc(), 0x2f2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0110
        gbc.setState(0x8e7, 0xe876, 0xcd0, 0x40, 0xe94c, 0xdb2a, 0x0, 0x0);
        gbc.writeMem(0x8e7, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xe876);
        EXPECT(gbc.pc(), 0x8e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0111
        gbc.setState(0x5248, 0x35ea, 0x33b0, 0x4f62, 0xc823, 0x2bc8, 0x1, 0x0);
        gbc.writeMem(0x5248, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x35ea);
        EXPECT(gbc.pc(), 0x5249);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0112
        gbc.setState(0x3b60, 0x403a, 0x17d0, 0x8ca8, 0xe700, 0xa97c, 0x0, 0x1);
        gbc.writeMem(0x3b60, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x403a);
        EXPECT(gbc.pc(), 0x3b61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0113
        gbc.setState(0xafbe, 0x8b00, 0x78c0, 0xbe0f, 0xc69b, 0xa10d, 0x1, 0x0);
        gbc.writeMem(0xafbe, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x8b00);
        EXPECT(gbc.pc(), 0xafbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafbe), 0xa5);
        // A5 0114
        gbc.setState(0xc560, 0x79bf, 0x37c0, 0xc81e, 0x31ee, 0x642c, 0x0, 0x1);
        gbc.writeMem(0xc560, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x79bf);
        EXPECT(gbc.pc(), 0xc561);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc560), 0xa5);
        // A5 0115
        gbc.setState(0x5f70, 0xcd01, 0xc7a0, 0x5bf2, 0x8cf7, 0x432a, 0x1, 0x1);
        gbc.writeMem(0x5f70, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xcd01);
        EXPECT(gbc.pc(), 0x5f71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0116
        gbc.setState(0xef9a, 0x36bc, 0x3830, 0x7c43, 0xbe91, 0x5a73, 0x0, 0x0);
        gbc.writeMem(0xef9a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x36bc);
        EXPECT(gbc.pc(), 0xef9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef9a), 0xa5);
        // A5 0117
        gbc.setState(0xbfaa, 0xe83c, 0x4880, 0x6b4f, 0xb735, 0x7c24, 0x1, 0x0);
        gbc.writeMem(0xbfaa, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xe83c);
        EXPECT(gbc.pc(), 0xbfab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfaa), 0xa5);
        // A5 0118
        gbc.setState(0x824e, 0xb780, 0x1130, 0x797d, 0x3856, 0x97ee, 0x0, 0x0);
        gbc.writeMem(0x824e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xb780);
        EXPECT(gbc.pc(), 0x824f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x824e), 0xa5);
        // A5 0119
        gbc.setState(0xcaf7, 0x8927, 0x3a90, 0xb14, 0x226b, 0x617a, 0x0, 0x0);
        gbc.writeMem(0xcaf7, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x8927);
        EXPECT(gbc.pc(), 0xcaf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcaf7), 0xa5);
        // A5 011A
        gbc.setState(0x2fbd, 0x7155, 0xd940, 0xdd19, 0xa111, 0x4db8, 0x0, 0x1);
        gbc.writeMem(0x2fbd, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x7155);
        EXPECT(gbc.pc(), 0x2fbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 011B
        gbc.setState(0xe5b5, 0x753d, 0x3330, 0xab19, 0x4cd4, 0x81bc, 0x0, 0x1);
        gbc.writeMem(0xe5b5, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x753d);
        EXPECT(gbc.pc(), 0xe5b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5b5), 0xa5);
        // A5 011C
        gbc.setState(0x8fcc, 0xde3, 0x2ad0, 0x3d1a, 0x3f71, 0x4af2, 0x1, 0x1);
        gbc.writeMem(0x8fcc, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xde3);
        EXPECT(gbc.pc(), 0x8fcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fcc), 0xa5);
        // A5 011D
        gbc.setState(0xc160, 0xafa5, 0x6ac0, 0xcfd6, 0xc7a0, 0xd7bc, 0x0, 0x1);
        gbc.writeMem(0xc160, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xafa5);
        EXPECT(gbc.pc(), 0xc161);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc160), 0xa5);
        // A5 011E
        gbc.setState(0x2926, 0x3106, 0xb260, 0xf614, 0x6445, 0x4e2d, 0x0, 0x0);
        gbc.writeMem(0x2926, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x3106);
        EXPECT(gbc.pc(), 0x2927);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 011F
        gbc.setState(0x222, 0x8d1f, 0x35f0, 0x6b2b, 0x20f0, 0x1c47, 0x1, 0x1);
        gbc.writeMem(0x222, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x8d1f);
        EXPECT(gbc.pc(), 0x223);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0120
        gbc.setState(0x60b9, 0xc82e, 0x7490, 0x751f, 0x69be, 0xffca, 0x1, 0x0);
        gbc.writeMem(0x60b9, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xc82e);
        EXPECT(gbc.pc(), 0x60ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0122
        gbc.setState(0x6afa, 0xdaae, 0xd130, 0x70be, 0x8964, 0x10e9, 0x1, 0x0);
        gbc.writeMem(0x6afa, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xdaae);
        EXPECT(gbc.pc(), 0x6afb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0123
        gbc.setState(0x1d93, 0x400c, 0x1ea0, 0x37a6, 0xa347, 0xee21, 0x0, 0x1);
        gbc.writeMem(0x1d93, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x400c);
        EXPECT(gbc.pc(), 0x1d94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0124
        gbc.setState(0xdaa1, 0x5f43, 0x4b20, 0xf334, 0x7a65, 0xfac5, 0x1, 0x0);
        gbc.writeMem(0xdaa1, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x5f43);
        EXPECT(gbc.pc(), 0xdaa2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdaa1), 0xa5);
        // A5 0125
        gbc.setState(0x201c, 0x55de, 0x1190, 0xf144, 0xffb6, 0x76db, 0x1, 0x1);
        gbc.writeMem(0x201c, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x55de);
        EXPECT(gbc.pc(), 0x201d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0126
        gbc.setState(0x1a94, 0xa1a, 0x6fe0, 0x3bc6, 0x73f9, 0x8733, 0x1, 0x0);
        gbc.writeMem(0x1a94, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xa1a);
        EXPECT(gbc.pc(), 0x1a95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0127
        gbc.setState(0x9ac1, 0xc40e, 0xf3d0, 0x698f, 0x7efa, 0x6303, 0x1, 0x1);
        gbc.writeMem(0x9ac1, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xc40e);
        EXPECT(gbc.pc(), 0x9ac2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ac1), 0xa5);
        // A5 0129
        gbc.setState(0x452a, 0x6e8b, 0x79f0, 0x4fb8, 0x5a02, 0x730c, 0x0, 0x0);
        gbc.writeMem(0x452a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x6e8b);
        EXPECT(gbc.pc(), 0x452b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 012A
        gbc.setState(0x17e3, 0x4f, 0x3480, 0x2e52, 0xc14b, 0xdfb8, 0x0, 0x0);
        gbc.writeMem(0x17e3, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x4f);
        EXPECT(gbc.pc(), 0x17e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 012B
        gbc.setState(0x2ea8, 0xdf51, 0x3210, 0x97d2, 0x12f4, 0xadb6, 0x1, 0x0);
        gbc.writeMem(0x2ea8, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xdf51);
        EXPECT(gbc.pc(), 0x2ea9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 012C
        gbc.setState(0xbd03, 0x767a, 0xd910, 0xf3a6, 0x74fa, 0xae18, 0x0, 0x1);
        gbc.writeMem(0xbd03, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x767a);
        EXPECT(gbc.pc(), 0xbd04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd03), 0xa5);
        // A5 012D
        gbc.setState(0x1a5a, 0xeb00, 0xeff0, 0xeedb, 0xa020, 0x7564, 0x1, 0x1);
        gbc.writeMem(0x1a5a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xeb00);
        EXPECT(gbc.pc(), 0x1a5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 012E
        gbc.setState(0x152a, 0x4e64, 0x3a0, 0x4b28, 0x5d61, 0x118d, 0x1, 0x0);
        gbc.writeMem(0x152a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x4e64);
        EXPECT(gbc.pc(), 0x152b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 012F
        gbc.setState(0xcb20, 0x3cb2, 0x730, 0x5b7c, 0xd5aa, 0x3554, 0x0, 0x0);
        gbc.writeMem(0xcb20, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x3cb2);
        EXPECT(gbc.pc(), 0xcb21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb20), 0xa5);
        // A5 0130
        gbc.setState(0xce8b, 0x647a, 0x4f60, 0x7c39, 0xe9, 0xd16d, 0x1, 0x1);
        gbc.writeMem(0xce8b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x647a);
        EXPECT(gbc.pc(), 0xce8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce8b), 0xa5);
        // A5 0131
        gbc.setState(0x9e52, 0x752c, 0x9980, 0xec74, 0x65d6, 0x6e6f, 0x1, 0x0);
        gbc.writeMem(0x9e52, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x752c);
        EXPECT(gbc.pc(), 0x9e53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e52), 0xa5);
        // A5 0132
        gbc.setState(0x34a7, 0xb045, 0xb220, 0xc929, 0xee91, 0x83ff, 0x0, 0x0);
        gbc.writeMem(0x34a7, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xb045);
        EXPECT(gbc.pc(), 0x34a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0133
        gbc.setState(0xb36e, 0xe5f6, 0x6390, 0xd8b4, 0xe3c, 0x9987, 0x0, 0x0);
        gbc.writeMem(0xb36e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xe5f6);
        EXPECT(gbc.pc(), 0xb36f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb36e), 0xa5);
        // A5 0134
        gbc.setState(0x2e91, 0xe4d6, 0x1f20, 0xd42, 0xf6ef, 0xff0c, 0x0, 0x0);
        gbc.writeMem(0x2e91, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xe4d6);
        EXPECT(gbc.pc(), 0x2e92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0135
        gbc.setState(0xacd0, 0x949f, 0xc700, 0x9089, 0xdb8a, 0xecae, 0x1, 0x0);
        gbc.writeMem(0xacd0, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x949f);
        EXPECT(gbc.pc(), 0xacd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacd0), 0xa5);
        // A5 0136
        gbc.setState(0xe4a8, 0xe5f2, 0xea60, 0xbbc, 0xc49b, 0x223f, 0x1, 0x0);
        gbc.writeMem(0xe4a8, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xe5f2);
        EXPECT(gbc.pc(), 0xe4a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4a8), 0xa5);
        // A5 0137
        gbc.setState(0x3e, 0xc057, 0x3ae0, 0x6edf, 0x89ac, 0xd94f, 0x0, 0x1);
        gbc.writeMem(0x3e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xc057);
        EXPECT(gbc.pc(), 0x3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0138
        gbc.setState(0x941, 0xc952, 0x3b00, 0xf82a, 0xd3a2, 0x202a, 0x1, 0x0);
        gbc.writeMem(0x941, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xc952);
        EXPECT(gbc.pc(), 0x942);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0139
        gbc.setState(0xe376, 0x60cd, 0xded0, 0xf19e, 0xcaed, 0x4114, 0x0, 0x1);
        gbc.writeMem(0xe376, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x60cd);
        EXPECT(gbc.pc(), 0xe377);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe376), 0xa5);
        // A5 013A
        gbc.setState(0x38cb, 0xd06a, 0x52f0, 0xabb1, 0xa99b, 0x4cd9, 0x0, 0x0);
        gbc.writeMem(0x38cb, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xd06a);
        EXPECT(gbc.pc(), 0x38cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 013B
        gbc.setState(0xa5e8, 0x227d, 0x3bb0, 0xc01d, 0x6ee3, 0x4521, 0x0, 0x1);
        gbc.writeMem(0xa5e8, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x227d);
        EXPECT(gbc.pc(), 0xa5e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5e8), 0xa5);
        // A5 013C
        gbc.setState(0xe10d, 0x102e, 0x1790, 0xbafd, 0x3805, 0xdab9, 0x0, 0x1);
        gbc.writeMem(0xe10d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x102e);
        EXPECT(gbc.pc(), 0xe10e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe10d), 0xa5);
        // A5 013D
        gbc.setState(0x7764, 0x49c7, 0xe410, 0x7a11, 0x871, 0x5c36, 0x1, 0x1);
        gbc.writeMem(0x7764, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x49c7);
        EXPECT(gbc.pc(), 0x7765);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 013E
        gbc.setState(0xd54a, 0xb1f1, 0x89e0, 0xa809, 0xc33c, 0x9cca, 0x1, 0x1);
        gbc.writeMem(0xd54a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xb1f1);
        EXPECT(gbc.pc(), 0xd54b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd54a), 0xa5);
        // A5 0140
        gbc.setState(0x2213, 0xb177, 0x7a10, 0x93a3, 0x7cb7, 0xf6bc, 0x1, 0x1);
        gbc.writeMem(0x2213, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xb177);
        EXPECT(gbc.pc(), 0x2214);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0141
        gbc.setState(0x6f64, 0xf4c, 0xb180, 0x61c5, 0x822e, 0x893, 0x0, 0x0);
        gbc.writeMem(0x6f64, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xf4c);
        EXPECT(gbc.pc(), 0x6f65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0142
        gbc.setState(0xcba1, 0x3da6, 0xace0, 0xcf27, 0xec60, 0x8d96, 0x1, 0x0);
        gbc.writeMem(0xcba1, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x3da6);
        EXPECT(gbc.pc(), 0xcba2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcba1), 0xa5);
        // A5 0143
        gbc.setState(0xaa3, 0x5a81, 0xea80, 0x7055, 0x6e30, 0xe41a, 0x1, 0x0);
        gbc.writeMem(0xaa3, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x5a81);
        EXPECT(gbc.pc(), 0xaa4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0144
        gbc.setState(0x63e8, 0x644e, 0x6610, 0x76bb, 0xd98e, 0xe0b1, 0x1, 0x0);
        gbc.writeMem(0x63e8, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x644e);
        EXPECT(gbc.pc(), 0x63e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0145
        gbc.setState(0x84ff, 0xbb58, 0xe060, 0xaf27, 0x3b8b, 0x2919, 0x0, 0x1);
        gbc.writeMem(0x84ff, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xbb58);
        EXPECT(gbc.pc(), 0x8500);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84ff), 0xa5);
        // A5 0146
        gbc.setState(0xd92e, 0x347f, 0x40d0, 0x1b64, 0xaff2, 0xd379, 0x0, 0x1);
        gbc.writeMem(0xd92e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x347f);
        EXPECT(gbc.pc(), 0xd92f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd92e), 0xa5);
        // A5 0147
        gbc.setState(0xc3b5, 0x90d9, 0xa6b0, 0xb573, 0xcdcd, 0x2cd2, 0x1, 0x1);
        gbc.writeMem(0xc3b5, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x90d9);
        EXPECT(gbc.pc(), 0xc3b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3b5), 0xa5);
        // A5 0148
        gbc.setState(0xdf8a, 0xd095, 0x2360, 0x2092, 0xb71e, 0x113, 0x1, 0x0);
        gbc.writeMem(0xdf8a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xd095);
        EXPECT(gbc.pc(), 0xdf8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf8a), 0xa5);
        // A5 0149
        gbc.setState(0x89f9, 0x3fb5, 0xfa60, 0x6ca2, 0xe15f, 0x4613, 0x0, 0x1);
        gbc.writeMem(0x89f9, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x3fb5);
        EXPECT(gbc.pc(), 0x89fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89f9), 0xa5);
        // A5 014A
        gbc.setState(0xbef9, 0x3094, 0x3970, 0x86b9, 0x3a9e, 0x26b4, 0x1, 0x0);
        gbc.writeMem(0xbef9, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x3094);
        EXPECT(gbc.pc(), 0xbefa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbef9), 0xa5);
        // A5 014B
        gbc.setState(0x1bc4, 0xed5, 0xa380, 0x6f32, 0xff5a, 0x5855, 0x0, 0x1);
        gbc.writeMem(0x1bc4, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xed5);
        EXPECT(gbc.pc(), 0x1bc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 014C
        gbc.setState(0xeb40, 0xff47, 0xdbf0, 0x3a6f, 0x2991, 0x1bbc, 0x1, 0x0);
        gbc.writeMem(0xeb40, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xff47);
        EXPECT(gbc.pc(), 0xeb41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb40), 0xa5);
        // A5 014D
        gbc.setState(0xca69, 0x12b8, 0x8830, 0x3b11, 0x82a1, 0xf7c, 0x0, 0x1);
        gbc.writeMem(0xca69, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x12b8);
        EXPECT(gbc.pc(), 0xca6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca69), 0xa5);
        // A5 014E
        gbc.setState(0x2d8f, 0xedcb, 0xe1d0, 0x31da, 0x8bea, 0xcad7, 0x0, 0x1);
        gbc.writeMem(0x2d8f, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xedcb);
        EXPECT(gbc.pc(), 0x2d90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 014F
        gbc.setState(0x3cd3, 0x136b, 0x80, 0x77c8, 0x5142, 0xaacb, 0x0, 0x0);
        gbc.writeMem(0x3cd3, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x136b);
        EXPECT(gbc.pc(), 0x3cd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0150
        gbc.setState(0x8c66, 0xc42b, 0x840, 0xfb85, 0x63d2, 0xc05, 0x1, 0x1);
        gbc.writeMem(0x8c66, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xc42b);
        EXPECT(gbc.pc(), 0x8c67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c66), 0xa5);
        // A5 0151
        gbc.setState(0x7c7, 0xc3dd, 0xdf30, 0x7db9, 0xfc77, 0xed49, 0x1, 0x0);
        gbc.writeMem(0x7c7, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xc3dd);
        EXPECT(gbc.pc(), 0x7c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0152
        gbc.setState(0x776b, 0xbc59, 0x3e70, 0xa3ae, 0xc97, 0xa7d8, 0x1, 0x1);
        gbc.writeMem(0x776b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xbc59);
        EXPECT(gbc.pc(), 0x776c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0153
        gbc.setState(0xb30e, 0x9bd0, 0xc380, 0xda18, 0x10ff, 0x54ee, 0x0, 0x0);
        gbc.writeMem(0xb30e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x9bd0);
        EXPECT(gbc.pc(), 0xb30f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb30e), 0xa5);
        // A5 0154
        gbc.setState(0x3408, 0x33fb, 0x4190, 0x61d1, 0x25f8, 0xba87, 0x1, 0x0);
        gbc.writeMem(0x3408, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x33fb);
        EXPECT(gbc.pc(), 0x3409);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0155
        gbc.setState(0xd9de, 0x6939, 0x7dc0, 0xa376, 0xcf90, 0x924, 0x1, 0x1);
        gbc.writeMem(0xd9de, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x6939);
        EXPECT(gbc.pc(), 0xd9df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9de), 0xa5);
        // A5 0156
        gbc.setState(0x2e33, 0x5f1a, 0xf4b0, 0x14be, 0xb174, 0x2db6, 0x0, 0x1);
        gbc.writeMem(0x2e33, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x5f1a);
        EXPECT(gbc.pc(), 0x2e34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0157
        gbc.setState(0x2375, 0x579, 0x8140, 0xf1a7, 0xd1d5, 0xfe54, 0x0, 0x1);
        gbc.writeMem(0x2375, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x579);
        EXPECT(gbc.pc(), 0x2376);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0158
        gbc.setState(0xb772, 0x5e20, 0x2630, 0x15e5, 0x8032, 0x62e, 0x1, 0x0);
        gbc.writeMem(0xb772, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x5e20);
        EXPECT(gbc.pc(), 0xb773);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb772), 0xa5);
        // A5 0159
        gbc.setState(0x8fa9, 0xd4c2, 0xa150, 0x86cb, 0x44ec, 0x2bc4, 0x0, 0x0);
        gbc.writeMem(0x8fa9, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xd4c2);
        EXPECT(gbc.pc(), 0x8faa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fa9), 0xa5);
        // A5 015A
        gbc.setState(0x2a87, 0xfae5, 0x1680, 0x5f68, 0xa9fd, 0xc3d2, 0x0, 0x1);
        gbc.writeMem(0x2a87, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xfae5);
        EXPECT(gbc.pc(), 0x2a88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 015B
        gbc.setState(0x9efb, 0x41a1, 0xe5b0, 0xe382, 0x12aa, 0x9eca, 0x1, 0x0);
        gbc.writeMem(0x9efb, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x41a1);
        EXPECT(gbc.pc(), 0x9efc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9efb), 0xa5);
        // A5 015C
        gbc.setState(0x230e, 0x1f69, 0x9f70, 0x4546, 0xad03, 0x803a, 0x1, 0x0);
        gbc.writeMem(0x230e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x1f69);
        EXPECT(gbc.pc(), 0x230f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 015D
        gbc.setState(0xc694, 0x2e03, 0x5dc0, 0x921e, 0x3e3d, 0x5601, 0x1, 0x1);
        gbc.writeMem(0xc694, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x2e03);
        EXPECT(gbc.pc(), 0xc695);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc694), 0xa5);
        // A5 015E
        gbc.setState(0x185, 0x6d7c, 0x2650, 0xccaf, 0xfe9f, 0x34a3, 0x0, 0x1);
        gbc.writeMem(0x185, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x6d7c);
        EXPECT(gbc.pc(), 0x186);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 015F
        gbc.setState(0x6df9, 0x64d, 0xc810, 0x23b2, 0x3797, 0xfff8, 0x1, 0x1);
        gbc.writeMem(0x6df9, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x64d);
        EXPECT(gbc.pc(), 0x6dfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0160
        gbc.setState(0x3a5a, 0x50af, 0xd900, 0x79a, 0xf9b4, 0x87be, 0x0, 0x0);
        gbc.writeMem(0x3a5a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x50af);
        EXPECT(gbc.pc(), 0x3a5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0161
        gbc.setState(0xe7b5, 0xa873, 0xbe30, 0x7804, 0xccce, 0xe288, 0x1, 0x0);
        gbc.writeMem(0xe7b5, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xa873);
        EXPECT(gbc.pc(), 0xe7b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7b5), 0xa5);
        // A5 0162
        gbc.setState(0xce35, 0xef8, 0x2ee0, 0x27ba, 0xf04d, 0xb02, 0x1, 0x0);
        gbc.writeMem(0xce35, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xef8);
        EXPECT(gbc.pc(), 0xce36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce35), 0xa5);
        // A5 0163
        gbc.setState(0xa975, 0x864f, 0x5200, 0xacf4, 0x2037, 0x9386, 0x0, 0x1);
        gbc.writeMem(0xa975, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x864f);
        EXPECT(gbc.pc(), 0xa976);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa975), 0xa5);
        // A5 0164
        gbc.setState(0x28af, 0xd48d, 0x8400, 0xd1b8, 0xe048, 0x7ddd, 0x1, 0x1);
        gbc.writeMem(0x28af, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xd48d);
        EXPECT(gbc.pc(), 0x28b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0165
        gbc.setState(0xab36, 0x33e, 0x5740, 0x9ad8, 0x3d2, 0x4d03, 0x1, 0x0);
        gbc.writeMem(0xab36, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x33e);
        EXPECT(gbc.pc(), 0xab37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab36), 0xa5);
        // A5 0166
        gbc.setState(0x3eff, 0xb7d3, 0xf0b0, 0x5515, 0x2edf, 0x8a69, 0x0, 0x0);
        gbc.writeMem(0x3eff, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xb7d3);
        EXPECT(gbc.pc(), 0x3f00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0167
        gbc.setState(0x3805, 0x4ff7, 0x8f00, 0x113b, 0xc329, 0x4423, 0x1, 0x1);
        gbc.writeMem(0x3805, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x4ff7);
        EXPECT(gbc.pc(), 0x3806);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0168
        gbc.setState(0x2812, 0xb15c, 0xec30, 0x369a, 0xb1c1, 0x29f1, 0x1, 0x1);
        gbc.writeMem(0x2812, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xb15c);
        EXPECT(gbc.pc(), 0x2813);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0169
        gbc.setState(0x77df, 0x5085, 0xa150, 0xd880, 0xf550, 0xe1fc, 0x0, 0x1);
        gbc.writeMem(0x77df, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x5085);
        EXPECT(gbc.pc(), 0x77e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 016A
        gbc.setState(0xb09e, 0xa705, 0x2bc0, 0xc8ff, 0xc2c4, 0x1a93, 0x0, 0x1);
        gbc.writeMem(0xb09e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xa705);
        EXPECT(gbc.pc(), 0xb09f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb09e), 0xa5);
        // A5 016B
        gbc.setState(0x31be, 0x4bf, 0x7860, 0xc9c1, 0x349f, 0x6d97, 0x1, 0x0);
        gbc.writeMem(0x31be, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x4bf);
        EXPECT(gbc.pc(), 0x31bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 016C
        gbc.setState(0x5699, 0x8a54, 0x1280, 0x90c4, 0xc13c, 0xe6a2, 0x1, 0x1);
        gbc.writeMem(0x5699, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x8a54);
        EXPECT(gbc.pc(), 0x569a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 016D
        gbc.setState(0x792a, 0x6871, 0xe090, 0x3956, 0x76c7, 0xc70e, 0x1, 0x1);
        gbc.writeMem(0x792a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x6871);
        EXPECT(gbc.pc(), 0x792b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 016E
        gbc.setState(0xc0b, 0x36cc, 0x5a0, 0xaecc, 0x3129, 0x4232, 0x1, 0x0);
        gbc.writeMem(0xc0b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x36cc);
        EXPECT(gbc.pc(), 0xc0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 016F
        gbc.setState(0xcc69, 0x8c3, 0x8b90, 0x1bae, 0xd816, 0xfed6, 0x1, 0x1);
        gbc.writeMem(0xcc69, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x8c3);
        EXPECT(gbc.pc(), 0xcc6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc69), 0xa5);
        // A5 0170
        gbc.setState(0xb2af, 0xa3d7, 0x7370, 0xcce7, 0x28dd, 0x3b41, 0x1, 0x0);
        gbc.writeMem(0xb2af, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xa3d7);
        EXPECT(gbc.pc(), 0xb2b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2af), 0xa5);
        // A5 0171
        gbc.setState(0xb7ce, 0x9f8, 0x4510, 0xbd21, 0x67bb, 0xf439, 0x1, 0x0);
        gbc.writeMem(0xb7ce, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x9f8);
        EXPECT(gbc.pc(), 0xb7cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7ce), 0xa5);
        // A5 0172
        gbc.setState(0x70d2, 0xad9c, 0x15f0, 0xef9a, 0xe0eb, 0x6543, 0x0, 0x0);
        gbc.writeMem(0x70d2, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xad9c);
        EXPECT(gbc.pc(), 0x70d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0173
        gbc.setState(0x66ed, 0x6bd4, 0xb9e0, 0x23cb, 0xd98a, 0x317, 0x1, 0x1);
        gbc.writeMem(0x66ed, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x6bd4);
        EXPECT(gbc.pc(), 0x66ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0174
        gbc.setState(0x1f30, 0xeea5, 0x60d0, 0xbc61, 0x6a5c, 0x54f3, 0x0, 0x1);
        gbc.writeMem(0x1f30, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xeea5);
        EXPECT(gbc.pc(), 0x1f31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0175
        gbc.setState(0x57c5, 0x8f24, 0xc850, 0x45fd, 0xf29f, 0xfa15, 0x0, 0x0);
        gbc.writeMem(0x57c5, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x8f24);
        EXPECT(gbc.pc(), 0x57c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0176
        gbc.setState(0xb2eb, 0x9454, 0x77c0, 0x1e0b, 0xdafb, 0xd0b9, 0x1, 0x0);
        gbc.writeMem(0xb2eb, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x9454);
        EXPECT(gbc.pc(), 0xb2ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2eb), 0xa5);
        // A5 0177
        gbc.setState(0xa763, 0xd2d3, 0x900, 0x39a2, 0x2db6, 0xe35d, 0x0, 0x1);
        gbc.writeMem(0xa763, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xd2d3);
        EXPECT(gbc.pc(), 0xa764);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa763), 0xa5);
        // A5 0179
        gbc.setState(0x5453, 0x21d, 0x25d0, 0xc34f, 0x27aa, 0xbabc, 0x0, 0x0);
        gbc.writeMem(0x5453, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x21d);
        EXPECT(gbc.pc(), 0x5454);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 017A
        gbc.setState(0x6fbd, 0x5d27, 0x8fc0, 0xce40, 0x3707, 0x9a4c, 0x1, 0x0);
        gbc.writeMem(0x6fbd, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x5d27);
        EXPECT(gbc.pc(), 0x6fbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 017B
        gbc.setState(0x633c, 0xd225, 0x7a20, 0x77bd, 0x6a8e, 0x91c7, 0x1, 0x1);
        gbc.writeMem(0x633c, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xd225);
        EXPECT(gbc.pc(), 0x633d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 017C
        gbc.setState(0x4e78, 0xe0bf, 0x58a0, 0xe14f, 0x85c2, 0x7676, 0x1, 0x1);
        gbc.writeMem(0x4e78, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xe0bf);
        EXPECT(gbc.pc(), 0x4e79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 017D
        gbc.setState(0x7823, 0xe87b, 0xe6b0, 0x1d5b, 0x4b01, 0x87e5, 0x1, 0x0);
        gbc.writeMem(0x7823, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xe87b);
        EXPECT(gbc.pc(), 0x7824);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 017E
        gbc.setState(0x5591, 0x22c0, 0x8e70, 0xf89, 0x66e5, 0x2fb8, 0x1, 0x1);
        gbc.writeMem(0x5591, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x22c0);
        EXPECT(gbc.pc(), 0x5592);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 017F
        gbc.setState(0x12e8, 0x753c, 0xd6d0, 0xc9bd, 0xc2a4, 0x6d05, 0x0, 0x1);
        gbc.writeMem(0x12e8, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x753c);
        EXPECT(gbc.pc(), 0x12e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0180
        gbc.setState(0x91c7, 0x3371, 0xbe20, 0xc9ca, 0x7ee6, 0x4290, 0x0, 0x0);
        gbc.writeMem(0x91c7, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x3371);
        EXPECT(gbc.pc(), 0x91c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91c7), 0xa5);
        // A5 0181
        gbc.setState(0x8253, 0xc18f, 0xbc40, 0xccef, 0x593f, 0x25f9, 0x0, 0x0);
        gbc.writeMem(0x8253, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xc18f);
        EXPECT(gbc.pc(), 0x8254);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8253), 0xa5);
        // A5 0182
        gbc.setState(0x3b2b, 0x222, 0xa380, 0x7f7e, 0xa4f2, 0xb120, 0x0, 0x0);
        gbc.writeMem(0x3b2b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x222);
        EXPECT(gbc.pc(), 0x3b2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0183
        gbc.setState(0xd82c, 0x258f, 0x1230, 0x7f1f, 0x44cd, 0x794b, 0x1, 0x0);
        gbc.writeMem(0xd82c, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x258f);
        EXPECT(gbc.pc(), 0xd82d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd82c), 0xa5);
        // A5 0184
        gbc.setState(0x2fa6, 0x5d21, 0x340, 0x12, 0xa173, 0xa7d7, 0x1, 0x0);
        gbc.writeMem(0x2fa6, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x5d21);
        EXPECT(gbc.pc(), 0x2fa7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0185
        gbc.setState(0xe288, 0x8f30, 0x9e90, 0x3cb1, 0x61ae, 0x1b51, 0x1, 0x1);
        gbc.writeMem(0xe288, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x8f30);
        EXPECT(gbc.pc(), 0xe289);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe288), 0xa5);
        // A5 0187
        gbc.setState(0x319b, 0x272e, 0x3ed0, 0xfc9, 0x321, 0xfec3, 0x0, 0x0);
        gbc.writeMem(0x319b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x272e);
        EXPECT(gbc.pc(), 0x319c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0188
        gbc.setState(0x7a85, 0x2894, 0x22e0, 0xad27, 0xcad0, 0xf41d, 0x1, 0x0);
        gbc.writeMem(0x7a85, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x2894);
        EXPECT(gbc.pc(), 0x7a86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0189
        gbc.setState(0xc573, 0x8a9b, 0xb7a0, 0xf3d, 0x1b09, 0x9531, 0x0, 0x0);
        gbc.writeMem(0xc573, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x8a9b);
        EXPECT(gbc.pc(), 0xc574);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc573), 0xa5);
        // A5 018A
        gbc.setState(0xbf31, 0x2ad9, 0x6550, 0xa6dc, 0x761, 0x1f86, 0x1, 0x0);
        gbc.writeMem(0xbf31, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x2ad9);
        EXPECT(gbc.pc(), 0xbf32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf31), 0xa5);
        // A5 018B
        gbc.setState(0xb9cb, 0x369f, 0xa950, 0xa9d2, 0xa37b, 0xb41d, 0x1, 0x1);
        gbc.writeMem(0xb9cb, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x369f);
        EXPECT(gbc.pc(), 0xb9cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9cb), 0xa5);
        // A5 018C
        gbc.setState(0xa810, 0x7a35, 0x5fc0, 0x6cc3, 0x9dba, 0xfc6d, 0x1, 0x1);
        gbc.writeMem(0xa810, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x7a35);
        EXPECT(gbc.pc(), 0xa811);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa810), 0xa5);
        // A5 018D
        gbc.setState(0xad4, 0x6d1c, 0x85b0, 0x6b15, 0x41e9, 0xfff5, 0x0, 0x1);
        gbc.writeMem(0xad4, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x6d1c);
        EXPECT(gbc.pc(), 0xad5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 018E
        gbc.setState(0x8e39, 0x14ab, 0x9ee0, 0x717f, 0x2ad8, 0x6676, 0x1, 0x1);
        gbc.writeMem(0x8e39, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x14ab);
        EXPECT(gbc.pc(), 0x8e3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e39), 0xa5);
        // A5 018F
        gbc.setState(0xd1db, 0x22e0, 0x8fe0, 0xce06, 0x202d, 0x3807, 0x0, 0x1);
        gbc.writeMem(0xd1db, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x22e0);
        EXPECT(gbc.pc(), 0xd1dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1db), 0xa5);
        // A5 0191
        gbc.setState(0x4db8, 0x4da8, 0x7330, 0x9dcd, 0xa8f5, 0x5080, 0x0, 0x1);
        gbc.writeMem(0x4db8, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x4da8);
        EXPECT(gbc.pc(), 0x4db9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0192
        gbc.setState(0x8db9, 0x2086, 0x1af0, 0xe47b, 0x4874, 0x765d, 0x0, 0x1);
        gbc.writeMem(0x8db9, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x2086);
        EXPECT(gbc.pc(), 0x8dba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8db9), 0xa5);
        // A5 0193
        gbc.setState(0x7c6a, 0xfb0d, 0xaa70, 0xb618, 0xc881, 0x994a, 0x0, 0x0);
        gbc.writeMem(0x7c6a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xfb0d);
        EXPECT(gbc.pc(), 0x7c6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0194
        gbc.setState(0x95e5, 0x6169, 0xec10, 0xd459, 0x4652, 0x34ea, 0x1, 0x0);
        gbc.writeMem(0x95e5, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x6169);
        EXPECT(gbc.pc(), 0x95e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95e5), 0xa5);
        // A5 0195
        gbc.setState(0xe582, 0x6c2d, 0x4860, 0x8761, 0x13f, 0x769f, 0x0, 0x1);
        gbc.writeMem(0xe582, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x6c2d);
        EXPECT(gbc.pc(), 0xe583);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe582), 0xa5);
        // A5 0196
        gbc.setState(0x459d, 0xd104, 0xe850, 0xf6bc, 0x6721, 0x434d, 0x1, 0x0);
        gbc.writeMem(0x459d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xd104);
        EXPECT(gbc.pc(), 0x459e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0197
        gbc.setState(0x1a26, 0xb635, 0xf2b0, 0x4d74, 0xfe8e, 0x95bf, 0x0, 0x1);
        gbc.writeMem(0x1a26, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xb635);
        EXPECT(gbc.pc(), 0x1a27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0198
        gbc.setState(0xb6ea, 0xfdf8, 0x7ae0, 0x7a08, 0xe756, 0x5bb0, 0x1, 0x0);
        gbc.writeMem(0xb6ea, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xfdf8);
        EXPECT(gbc.pc(), 0xb6eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6ea), 0xa5);
        // A5 0199
        gbc.setState(0x9306, 0x7899, 0x5430, 0x315a, 0xfaf, 0xa4b6, 0x0, 0x0);
        gbc.writeMem(0x9306, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x7899);
        EXPECT(gbc.pc(), 0x9307);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9306), 0xa5);
        // A5 019A
        gbc.setState(0x7f15, 0xb8ed, 0x2ee0, 0x537e, 0x9963, 0xe856, 0x0, 0x0);
        gbc.writeMem(0x7f15, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xb8ed);
        EXPECT(gbc.pc(), 0x7f16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 019B
        gbc.setState(0xe23c, 0x39d3, 0x4cb0, 0x4a46, 0x4d54, 0xf080, 0x0, 0x1);
        gbc.writeMem(0xe23c, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x39d3);
        EXPECT(gbc.pc(), 0xe23d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe23c), 0xa5);
        // A5 019C
        gbc.setState(0x62ec, 0xfdf9, 0x3a90, 0x6bcd, 0xf2c9, 0xa414, 0x0, 0x0);
        gbc.writeMem(0x62ec, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xfdf9);
        EXPECT(gbc.pc(), 0x62ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 019D
        gbc.setState(0xdba, 0x6381, 0xc960, 0xd885, 0x8720, 0x41f, 0x0, 0x0);
        gbc.writeMem(0xdba, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x6381);
        EXPECT(gbc.pc(), 0xdbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 019E
        gbc.setState(0xb255, 0xfc58, 0x2b0, 0x5ab0, 0x96e, 0x17b0, 0x0, 0x1);
        gbc.writeMem(0xb255, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xfc58);
        EXPECT(gbc.pc(), 0xb256);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb255), 0xa5);
        // A5 019F
        gbc.setState(0xd364, 0x5337, 0x1af0, 0x2525, 0x6a7, 0xe6b2, 0x1, 0x0);
        gbc.writeMem(0xd364, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x5337);
        EXPECT(gbc.pc(), 0xd365);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd364), 0xa5);
        // A5 01A1
        gbc.setState(0x692f, 0xe5a, 0x6e20, 0xbd16, 0x9908, 0xaeee, 0x1, 0x0);
        gbc.writeMem(0x692f, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xe5a);
        EXPECT(gbc.pc(), 0x6930);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01A2
        gbc.setState(0x137c, 0x7ffe, 0x6930, 0x31a0, 0xed18, 0x9d75, 0x0, 0x0);
        gbc.writeMem(0x137c, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x7ffe);
        EXPECT(gbc.pc(), 0x137d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01A3
        gbc.setState(0x10b8, 0x1310, 0x1400, 0x9c46, 0xb554, 0xec7c, 0x1, 0x1);
        gbc.writeMem(0x10b8, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x1310);
        EXPECT(gbc.pc(), 0x10b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01A4
        gbc.setState(0x1c49, 0x7b56, 0xcf80, 0x8443, 0xbee1, 0x14a3, 0x1, 0x1);
        gbc.writeMem(0x1c49, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x7b56);
        EXPECT(gbc.pc(), 0x1c4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01A5
        gbc.setState(0x352d, 0xc418, 0x3d30, 0x2390, 0x7303, 0x185d, 0x0, 0x1);
        gbc.writeMem(0x352d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xc418);
        EXPECT(gbc.pc(), 0x352e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01A6
        gbc.setState(0x6841, 0x7c60, 0xae20, 0x340a, 0x44e3, 0x3b14, 0x1, 0x1);
        gbc.writeMem(0x6841, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x7c60);
        EXPECT(gbc.pc(), 0x6842);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01A7
        gbc.setState(0x87ca, 0xfbf, 0x4aa0, 0xd585, 0x4fb4, 0xb6ff, 0x1, 0x0);
        gbc.writeMem(0x87ca, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xfbf);
        EXPECT(gbc.pc(), 0x87cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87ca), 0xa5);
        // A5 01A8
        gbc.setState(0x39e2, 0xbc6b, 0xbf00, 0xcd0b, 0xc589, 0x6e16, 0x0, 0x1);
        gbc.writeMem(0x39e2, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xbc6b);
        EXPECT(gbc.pc(), 0x39e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01A9
        gbc.setState(0x4b0f, 0xea97, 0xadd0, 0xe52f, 0xb86, 0x64cd, 0x1, 0x0);
        gbc.writeMem(0x4b0f, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xea97);
        EXPECT(gbc.pc(), 0x4b10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01AA
        gbc.setState(0x7781, 0xb77b, 0x6100, 0xf5d2, 0xad15, 0xe025, 0x0, 0x1);
        gbc.writeMem(0x7781, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xb77b);
        EXPECT(gbc.pc(), 0x7782);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01AB
        gbc.setState(0x95d5, 0x37cf, 0x8400, 0xcc2e, 0x3eda, 0x470e, 0x1, 0x0);
        gbc.writeMem(0x95d5, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x37cf);
        EXPECT(gbc.pc(), 0x95d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95d5), 0xa5);
        // A5 01AC
        gbc.setState(0xe755, 0x6b7c, 0x9820, 0x5c96, 0x915e, 0xdb12, 0x0, 0x1);
        gbc.writeMem(0xe755, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x6b7c);
        EXPECT(gbc.pc(), 0xe756);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe755), 0xa5);
        // A5 01AD
        gbc.setState(0x6f2e, 0x589e, 0x6fa0, 0x555d, 0x3e91, 0xc7a5, 0x0, 0x1);
        gbc.writeMem(0x6f2e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x589e);
        EXPECT(gbc.pc(), 0x6f2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01AE
        gbc.setState(0x2a6d, 0x9151, 0x6440, 0x9def, 0xc675, 0xb015, 0x1, 0x0);
        gbc.writeMem(0x2a6d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x9151);
        EXPECT(gbc.pc(), 0x2a6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01AF
        gbc.setState(0x6944, 0x6317, 0x3bb0, 0x6d93, 0x34d5, 0x866e, 0x1, 0x1);
        gbc.writeMem(0x6944, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x6317);
        EXPECT(gbc.pc(), 0x6945);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01B0
        gbc.setState(0x7e33, 0x3f10, 0x1540, 0x9cc9, 0x790a, 0x1e28, 0x0, 0x1);
        gbc.writeMem(0x7e33, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x3f10);
        EXPECT(gbc.pc(), 0x7e34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01B1
        gbc.setState(0xcb47, 0xafd2, 0xcb80, 0xf071, 0x9de7, 0x16a8, 0x0, 0x0);
        gbc.writeMem(0xcb47, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xafd2);
        EXPECT(gbc.pc(), 0xcb48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb47), 0xa5);
        // A5 01B2
        gbc.setState(0x9e84, 0x4722, 0x69e0, 0x4e56, 0x7498, 0x52f2, 0x1, 0x1);
        gbc.writeMem(0x9e84, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x4722);
        EXPECT(gbc.pc(), 0x9e85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e84), 0xa5);
        // A5 01B3
        gbc.setState(0x27c, 0x11e1, 0xad20, 0x8ea0, 0x3eb1, 0x99b0, 0x1, 0x0);
        gbc.writeMem(0x27c, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x11e1);
        EXPECT(gbc.pc(), 0x27d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01B5
        gbc.setState(0xa15c, 0x9604, 0xb310, 0x6242, 0x8939, 0x616f, 0x1, 0x0);
        gbc.writeMem(0xa15c, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x9604);
        EXPECT(gbc.pc(), 0xa15d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa15c), 0xa5);
        // A5 01B6
        gbc.setState(0x5a1e, 0x6253, 0xee70, 0x79aa, 0xb5ad, 0xbf00, 0x0, 0x0);
        gbc.writeMem(0x5a1e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x6253);
        EXPECT(gbc.pc(), 0x5a1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01B8
        gbc.setState(0xb3f4, 0xbfff, 0xd4f0, 0x5a5b, 0x8104, 0x6b75, 0x0, 0x0);
        gbc.writeMem(0xb3f4, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xbfff);
        EXPECT(gbc.pc(), 0xb3f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3f4), 0xa5);
        // A5 01B9
        gbc.setState(0x3656, 0x4801, 0x67d0, 0x9ded, 0x7fb0, 0xd46, 0x1, 0x1);
        gbc.writeMem(0x3656, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x4801);
        EXPECT(gbc.pc(), 0x3657);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01BB
        gbc.setState(0x5f54, 0x448, 0xeb00, 0x9e25, 0x54d7, 0x433b, 0x1, 0x1);
        gbc.writeMem(0x5f54, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x448);
        EXPECT(gbc.pc(), 0x5f55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01BC
        gbc.setState(0x2014, 0xa6fa, 0x1d40, 0x5bcf, 0x1f6f, 0x5d71, 0x0, 0x0);
        gbc.writeMem(0x2014, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xa6fa);
        EXPECT(gbc.pc(), 0x2015);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01BD
        gbc.setState(0x4d54, 0xaf38, 0xb4b0, 0xd561, 0xf327, 0xecf1, 0x1, 0x1);
        gbc.writeMem(0x4d54, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xaf38);
        EXPECT(gbc.pc(), 0x4d55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01BE
        gbc.setState(0x400b, 0x459d, 0xdad0, 0x958, 0x15a4, 0x70b, 0x1, 0x0);
        gbc.writeMem(0x400b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x459d);
        EXPECT(gbc.pc(), 0x400c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01BF
        gbc.setState(0xb5c8, 0xaeb4, 0x43a0, 0x8aba, 0x2888, 0xdc9, 0x0, 0x0);
        gbc.writeMem(0xb5c8, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xaeb4);
        EXPECT(gbc.pc(), 0xb5c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5c8), 0xa5);
        // A5 01C0
        gbc.setState(0xddd7, 0xe4f1, 0x1fc0, 0x2322, 0x42a8, 0xd72e, 0x0, 0x0);
        gbc.writeMem(0xddd7, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xe4f1);
        EXPECT(gbc.pc(), 0xddd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddd7), 0xa5);
        // A5 01C1
        gbc.setState(0x8a21, 0x2961, 0xb830, 0xe0d9, 0xc22b, 0xe143, 0x0, 0x0);
        gbc.writeMem(0x8a21, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x2961);
        EXPECT(gbc.pc(), 0x8a22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a21), 0xa5);
        // A5 01C2
        gbc.setState(0x53d, 0x1cb8, 0xd500, 0xfb4c, 0xecbc, 0xfd3b, 0x1, 0x1);
        gbc.writeMem(0x53d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x1cb8);
        EXPECT(gbc.pc(), 0x53e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01C3
        gbc.setState(0x6866, 0x4289, 0xa870, 0x7607, 0xfbae, 0x50b1, 0x0, 0x0);
        gbc.writeMem(0x6866, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x4289);
        EXPECT(gbc.pc(), 0x6867);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01C4
        gbc.setState(0x9839, 0xdc1c, 0x96d0, 0xc832, 0x2b47, 0xce02, 0x1, 0x0);
        gbc.writeMem(0x9839, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xdc1c);
        EXPECT(gbc.pc(), 0x983a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9839), 0xa5);
        // A5 01C5
        gbc.setState(0xa186, 0x974b, 0xbef0, 0x145b, 0x72db, 0x35fe, 0x0, 0x1);
        gbc.writeMem(0xa186, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x974b);
        EXPECT(gbc.pc(), 0xa187);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa186), 0xa5);
        // A5 01C6
        gbc.setState(0x827b, 0xca27, 0x24c0, 0x25a6, 0xfb8c, 0x210c, 0x0, 0x1);
        gbc.writeMem(0x827b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xca27);
        EXPECT(gbc.pc(), 0x827c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x827b), 0xa5);
        // A5 01C7
        gbc.setState(0x5402, 0x619b, 0x8580, 0xd05, 0x48e5, 0x856e, 0x1, 0x1);
        gbc.writeMem(0x5402, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x619b);
        EXPECT(gbc.pc(), 0x5403);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01C8
        gbc.setState(0xe60b, 0xbd00, 0xd4a0, 0x1ceb, 0xdb59, 0x702d, 0x0, 0x0);
        gbc.writeMem(0xe60b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xbd00);
        EXPECT(gbc.pc(), 0xe60c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe60b), 0xa5);
        // A5 01CA
        gbc.setState(0xa21a, 0x8428, 0x5940, 0x83f, 0x80db, 0xf500, 0x1, 0x0);
        gbc.writeMem(0xa21a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x8428);
        EXPECT(gbc.pc(), 0xa21b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa21a), 0xa5);
        // A5 01CB
        gbc.setState(0x13ac, 0x427d, 0x18d0, 0xa05c, 0xff41, 0xea26, 0x1, 0x0);
        gbc.writeMem(0x13ac, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x427d);
        EXPECT(gbc.pc(), 0x13ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01CC
        gbc.setState(0xce4e, 0x2475, 0x1b90, 0x373c, 0x3098, 0x27b, 0x0, 0x0);
        gbc.writeMem(0xce4e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x2475);
        EXPECT(gbc.pc(), 0xce4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce4e), 0xa5);
        // A5 01CD
        gbc.setState(0x9b4, 0xddc3, 0x7600, 0xdac1, 0xc527, 0xc22c, 0x1, 0x0);
        gbc.writeMem(0x9b4, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xddc3);
        EXPECT(gbc.pc(), 0x9b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01CE
        gbc.setState(0x8d8d, 0x16c3, 0xc610, 0x4ec3, 0xb04b, 0xd4a, 0x0, 0x1);
        gbc.writeMem(0x8d8d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x16c3);
        EXPECT(gbc.pc(), 0x8d8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d8d), 0xa5);
        // A5 01CF
        gbc.setState(0xb150, 0x8cab, 0x1ee0, 0x5dc3, 0x5b46, 0x40cb, 0x1, 0x1);
        gbc.writeMem(0xb150, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x8cab);
        EXPECT(gbc.pc(), 0xb151);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb150), 0xa5);
        // A5 01D0
        gbc.setState(0xe57c, 0x4e4e, 0xbdd0, 0xf155, 0x5ef3, 0x7e70, 0x0, 0x0);
        gbc.writeMem(0xe57c, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x4e4e);
        EXPECT(gbc.pc(), 0xe57d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe57c), 0xa5);
        // A5 01D1
        gbc.setState(0x8b3d, 0x4c2, 0x12f0, 0x210c, 0x2316, 0x9855, 0x1, 0x1);
        gbc.writeMem(0x8b3d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x4c2);
        EXPECT(gbc.pc(), 0x8b3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b3d), 0xa5);
        // A5 01D2
        gbc.setState(0xbc3a, 0x8385, 0xd950, 0x5f35, 0xfeee, 0xb872, 0x1, 0x1);
        gbc.writeMem(0xbc3a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x8385);
        EXPECT(gbc.pc(), 0xbc3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc3a), 0xa5);
        // A5 01D3
        gbc.setState(0xb514, 0x16a6, 0x40d0, 0xad73, 0x2453, 0x851c, 0x0, 0x1);
        gbc.writeMem(0xb514, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x16a6);
        EXPECT(gbc.pc(), 0xb515);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb514), 0xa5);
        // A5 01D4
        gbc.setState(0xad15, 0x45cc, 0xab70, 0x4f12, 0x2628, 0x2715, 0x1, 0x0);
        gbc.writeMem(0xad15, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x45cc);
        EXPECT(gbc.pc(), 0xad16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad15), 0xa5);
        // A5 01D5
        gbc.setState(0x1b04, 0x3f2a, 0x1690, 0x5ac8, 0x822f, 0x3b3b, 0x1, 0x0);
        gbc.writeMem(0x1b04, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x3f2a);
        EXPECT(gbc.pc(), 0x1b05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01D6
        gbc.setState(0x784e, 0x7ff3, 0x9d20, 0xebee, 0x86e7, 0xed67, 0x0, 0x1);
        gbc.writeMem(0x784e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x7ff3);
        EXPECT(gbc.pc(), 0x784f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01D7
        gbc.setState(0x5ce7, 0xa17b, 0x13b0, 0x983e, 0x9d23, 0xe5ab, 0x0, 0x0);
        gbc.writeMem(0x5ce7, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xa17b);
        EXPECT(gbc.pc(), 0x5ce8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01D8
        gbc.setState(0x4641, 0x849b, 0x1400, 0xe25c, 0x7835, 0xf60e, 0x0, 0x0);
        gbc.writeMem(0x4641, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x849b);
        EXPECT(gbc.pc(), 0x4642);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01D9
        gbc.setState(0x8f23, 0x9577, 0x7cb0, 0x584, 0x4a64, 0xf254, 0x0, 0x0);
        gbc.writeMem(0x8f23, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x9577);
        EXPECT(gbc.pc(), 0x8f24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f23), 0xa5);
        // A5 01DA
        gbc.setState(0x3b9, 0x5842, 0x24a0, 0x1cd6, 0x6762, 0xfd8c, 0x1, 0x0);
        gbc.writeMem(0x3b9, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x5842);
        EXPECT(gbc.pc(), 0x3ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01DB
        gbc.setState(0x15ee, 0xd329, 0xb790, 0x2ae8, 0xe582, 0x7d3d, 0x1, 0x1);
        gbc.writeMem(0x15ee, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xd329);
        EXPECT(gbc.pc(), 0x15ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01DC
        gbc.setState(0xc2b, 0x9fcf, 0xa400, 0xeb3b, 0xa5e0, 0x4943, 0x0, 0x0);
        gbc.writeMem(0xc2b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x9fcf);
        EXPECT(gbc.pc(), 0xc2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01DD
        gbc.setState(0x3d0b, 0xb836, 0x7580, 0x7c00, 0xe482, 0x803d, 0x1, 0x1);
        gbc.writeMem(0x3d0b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xb836);
        EXPECT(gbc.pc(), 0x3d0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01DE
        gbc.setState(0x12f8, 0x6a8d, 0x6d0, 0x84d1, 0x25b7, 0x3507, 0x0, 0x1);
        gbc.writeMem(0x12f8, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x6a8d);
        EXPECT(gbc.pc(), 0x12f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01E0
        gbc.setState(0xc088, 0xbf25, 0x6c0, 0x8ba3, 0x6e21, 0xce2b, 0x1, 0x1);
        gbc.writeMem(0xc088, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xbf25);
        EXPECT(gbc.pc(), 0xc089);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc088), 0xa5);
        // A5 01E1
        gbc.setState(0x3753, 0xce92, 0xa490, 0xdbc1, 0xa287, 0x6d23, 0x0, 0x1);
        gbc.writeMem(0x3753, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xce92);
        EXPECT(gbc.pc(), 0x3754);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01E2
        gbc.setState(0x12f9, 0xec41, 0x13c0, 0x34b8, 0x619b, 0xbc8e, 0x1, 0x0);
        gbc.writeMem(0x12f9, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xec41);
        EXPECT(gbc.pc(), 0x12fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01E3
        gbc.setState(0x51d9, 0xfb78, 0x6890, 0xddcb, 0xea72, 0x7f4b, 0x0, 0x0);
        gbc.writeMem(0x51d9, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xfb78);
        EXPECT(gbc.pc(), 0x51da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01E4
        gbc.setState(0xcab4, 0x29b, 0x6480, 0x503f, 0xd68f, 0x111e, 0x1, 0x0);
        gbc.writeMem(0xcab4, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x29b);
        EXPECT(gbc.pc(), 0xcab5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcab4), 0xa5);
        // A5 01E5
        gbc.setState(0x949, 0x97cb, 0x4e50, 0xd970, 0xc26c, 0xb4ca, 0x0, 0x0);
        gbc.writeMem(0x949, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x97cb);
        EXPECT(gbc.pc(), 0x94a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01E6
        gbc.setState(0x2250, 0x46d1, 0x5f10, 0x9ad, 0xed56, 0x7095, 0x1, 0x1);
        gbc.writeMem(0x2250, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x46d1);
        EXPECT(gbc.pc(), 0x2251);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01E7
        gbc.setState(0x938, 0x6fd8, 0x2c90, 0xc1d2, 0x3737, 0x6f68, 0x1, 0x0);
        gbc.writeMem(0x938, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x6fd8);
        EXPECT(gbc.pc(), 0x939);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01E8
        gbc.setState(0xc5ad, 0xa0a2, 0x6480, 0xa8c9, 0x9227, 0x5dfd, 0x1, 0x0);
        gbc.writeMem(0xc5ad, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xa0a2);
        EXPECT(gbc.pc(), 0xc5ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5ad), 0xa5);
        // A5 01E9
        gbc.setState(0xe90, 0x5424, 0xcba0, 0x7fc0, 0xae6d, 0x5c63, 0x0, 0x0);
        gbc.writeMem(0xe90, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x5424);
        EXPECT(gbc.pc(), 0xe91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01EA
        gbc.setState(0x625e, 0xf9a8, 0x2650, 0xe63b, 0x4665, 0x7211, 0x0, 0x1);
        gbc.writeMem(0x625e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xf9a8);
        EXPECT(gbc.pc(), 0x625f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01EB
        gbc.setState(0xeb7e, 0x9051, 0x2fb0, 0x1b42, 0xeb73, 0xa384, 0x1, 0x0);
        gbc.writeMem(0xeb7e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x9051);
        EXPECT(gbc.pc(), 0xeb7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb7e), 0xa5);
        // A5 01EC
        gbc.setState(0x3bc8, 0x6a09, 0xb140, 0x2c80, 0x6c62, 0xb70c, 0x1, 0x0);
        gbc.writeMem(0x3bc8, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x6a09);
        EXPECT(gbc.pc(), 0x3bc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01ED
        gbc.setState(0x6806, 0xef2, 0x9850, 0xab34, 0x3f7, 0x3a9b, 0x1, 0x0);
        gbc.writeMem(0x6806, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xef2);
        EXPECT(gbc.pc(), 0x6807);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01EE
        gbc.setState(0x753b, 0x24dc, 0xeab0, 0xc03e, 0xb23c, 0x5737, 0x1, 0x0);
        gbc.writeMem(0x753b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x24dc);
        EXPECT(gbc.pc(), 0x753c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01EF
        gbc.setState(0x424e, 0x54b0, 0xb530, 0x5ddb, 0x8891, 0x524, 0x0, 0x1);
        gbc.writeMem(0x424e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x54b0);
        EXPECT(gbc.pc(), 0x424f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01F0
        gbc.setState(0x59a3, 0xe437, 0xdc70, 0xc4fa, 0xba74, 0x915e, 0x1, 0x1);
        gbc.writeMem(0x59a3, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xe437);
        EXPECT(gbc.pc(), 0x59a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01F1
        gbc.setState(0xd37e, 0x504d, 0x6650, 0xade9, 0x6c2a, 0x68a1, 0x0, 0x1);
        gbc.writeMem(0xd37e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x504d);
        EXPECT(gbc.pc(), 0xd37f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd37e), 0xa5);
        // A5 01F3
        gbc.setState(0x5515, 0x689a, 0x4ba0, 0x33b6, 0x9c5f, 0x5944, 0x1, 0x1);
        gbc.writeMem(0x5515, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x689a);
        EXPECT(gbc.pc(), 0x5516);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01F4
        gbc.setState(0x41da, 0x365b, 0xdd50, 0x4f43, 0x8884, 0xd70a, 0x1, 0x1);
        gbc.writeMem(0x41da, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x365b);
        EXPECT(gbc.pc(), 0x41db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01F5
        gbc.setState(0x5436, 0x9d8c, 0xf610, 0xb2cc, 0x88a1, 0x4233, 0x1, 0x0);
        gbc.writeMem(0x5436, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x9d8c);
        EXPECT(gbc.pc(), 0x5437);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01F6
        gbc.setState(0x9bd3, 0x83d1, 0xce80, 0x9834, 0x4bc1, 0xb233, 0x1, 0x0);
        gbc.writeMem(0x9bd3, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x83d1);
        EXPECT(gbc.pc(), 0x9bd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bd3), 0xa5);
        // A5 01F7
        gbc.setState(0xbba4, 0x846b, 0x1430, 0x251b, 0x730d, 0x64bc, 0x1, 0x1);
        gbc.writeMem(0xbba4, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x846b);
        EXPECT(gbc.pc(), 0xbba5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbba4), 0xa5);
        // A5 01F8
        gbc.setState(0x1e0a, 0xe4b7, 0xf570, 0xb621, 0xa736, 0xb2b8, 0x0, 0x1);
        gbc.writeMem(0x1e0a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xe4b7);
        EXPECT(gbc.pc(), 0x1e0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01F9
        gbc.setState(0x41ab, 0x6a40, 0xfd50, 0x830f, 0x453f, 0x53b6, 0x0, 0x0);
        gbc.writeMem(0x41ab, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x6a40);
        EXPECT(gbc.pc(), 0x41ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01FA
        gbc.setState(0xebd6, 0xe4f2, 0x48c0, 0x10a5, 0x7b43, 0xbd61, 0x0, 0x0);
        gbc.writeMem(0xebd6, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xe4f2);
        EXPECT(gbc.pc(), 0xebd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebd6), 0xa5);
        // A5 01FB
        gbc.setState(0x97fc, 0xa81d, 0xfe70, 0x5d63, 0x696b, 0x1536, 0x0, 0x1);
        gbc.writeMem(0x97fc, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xa81d);
        EXPECT(gbc.pc(), 0x97fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97fc), 0xa5);
        // A5 01FC
        gbc.setState(0x193a, 0x5502, 0x5280, 0xadd6, 0x2499, 0xbf8, 0x0, 0x0);
        gbc.writeMem(0x193a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x5502);
        EXPECT(gbc.pc(), 0x193b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01FD
        gbc.setState(0xb503, 0x6172, 0x6e40, 0x5c25, 0xfaf6, 0x8076, 0x0, 0x1);
        gbc.writeMem(0xb503, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x6172);
        EXPECT(gbc.pc(), 0xb504);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb503), 0xa5);
        // A5 01FE
        gbc.setState(0x4d26, 0x927d, 0xb7a0, 0xca31, 0x1238, 0x7aa5, 0x1, 0x1);
        gbc.writeMem(0x4d26, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x927d);
        EXPECT(gbc.pc(), 0x4d27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 01FF
        gbc.setState(0x4284, 0xc77b, 0x72b0, 0x7b9e, 0xd9d3, 0x39eb, 0x0, 0x0);
        gbc.writeMem(0x4284, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xc77b);
        EXPECT(gbc.pc(), 0x4285);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0200
        gbc.setState(0xa4ac, 0x1751, 0x1800, 0xd268, 0xa8ba, 0x5fb7, 0x0, 0x1);
        gbc.writeMem(0xa4ac, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x1751);
        EXPECT(gbc.pc(), 0xa4ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4ac), 0xa5);
        // A5 0201
        gbc.setState(0x3975, 0xc002, 0xa370, 0xf02d, 0x3595, 0x1020, 0x0, 0x0);
        gbc.writeMem(0x3975, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xc002);
        EXPECT(gbc.pc(), 0x3976);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0202
        gbc.setState(0xe4bd, 0x42b9, 0xdbe0, 0xb143, 0x1fc6, 0x59d6, 0x0, 0x1);
        gbc.writeMem(0xe4bd, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x42b9);
        EXPECT(gbc.pc(), 0xe4be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4bd), 0xa5);
        // A5 0203
        gbc.setState(0x9ab8, 0x5bd0, 0x90, 0xc604, 0x9885, 0xa84d, 0x0, 0x1);
        gbc.writeMem(0x9ab8, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x5bd0);
        EXPECT(gbc.pc(), 0x9ab9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ab8), 0xa5);
        // A5 0204
        gbc.setState(0xb13d, 0xda47, 0x9dc0, 0x6df5, 0xa204, 0x7833, 0x0, 0x1);
        gbc.writeMem(0xb13d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xda47);
        EXPECT(gbc.pc(), 0xb13e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb13d), 0xa5);
        // A5 0205
        gbc.setState(0xbb9d, 0xcd9, 0xac10, 0xcecf, 0xfb64, 0xfca2, 0x1, 0x0);
        gbc.writeMem(0xbb9d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xcd9);
        EXPECT(gbc.pc(), 0xbb9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb9d), 0xa5);
        // A5 0206
        gbc.setState(0x31ac, 0xf02, 0xc820, 0xf665, 0xb5ef, 0x24fe, 0x0, 0x0);
        gbc.writeMem(0x31ac, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xf02);
        EXPECT(gbc.pc(), 0x31ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0207
        gbc.setState(0xcdbb, 0x7be5, 0x600, 0xc5c1, 0x31fc, 0xcc89, 0x1, 0x0);
        gbc.writeMem(0xcdbb, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x7be5);
        EXPECT(gbc.pc(), 0xcdbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdbb), 0xa5);
        // A5 0208
        gbc.setState(0x1364, 0xe435, 0xaf60, 0xf092, 0x1f28, 0xe36e, 0x0, 0x0);
        gbc.writeMem(0x1364, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xe435);
        EXPECT(gbc.pc(), 0x1365);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0209
        gbc.setState(0x6cc5, 0x8778, 0xda40, 0x9833, 0x73a, 0x93d3, 0x1, 0x1);
        gbc.writeMem(0x6cc5, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x8778);
        EXPECT(gbc.pc(), 0x6cc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 020A
        gbc.setState(0xefed, 0x5848, 0x4c20, 0x654e, 0xdc5a, 0x2117, 0x0, 0x0);
        gbc.writeMem(0xefed, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x5848);
        EXPECT(gbc.pc(), 0xefee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefed), 0xa5);
        // A5 020B
        gbc.setState(0x557, 0x1459, 0x7c20, 0x68b0, 0x9aa7, 0x5534, 0x1, 0x0);
        gbc.writeMem(0x557, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x1459);
        EXPECT(gbc.pc(), 0x558);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 020C
        gbc.setState(0xc895, 0x593e, 0x1250, 0x4556, 0xdab0, 0x58fc, 0x1, 0x1);
        gbc.writeMem(0xc895, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x593e);
        EXPECT(gbc.pc(), 0xc896);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc895), 0xa5);
        // A5 020D
        gbc.setState(0x494d, 0xf6f, 0xc40, 0x8b05, 0x3172, 0xa362, 0x1, 0x1);
        gbc.writeMem(0x494d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xf6f);
        EXPECT(gbc.pc(), 0x494e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 020E
        gbc.setState(0x9717, 0xe1b3, 0x55f0, 0xc840, 0x1e4e, 0x327c, 0x0, 0x1);
        gbc.writeMem(0x9717, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xe1b3);
        EXPECT(gbc.pc(), 0x9718);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9717), 0xa5);
        // A5 020F
        gbc.setState(0xdf49, 0x8a9d, 0xa290, 0x581f, 0xfe1b, 0x7d2f, 0x1, 0x1);
        gbc.writeMem(0xdf49, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x8a9d);
        EXPECT(gbc.pc(), 0xdf4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf49), 0xa5);
        // A5 0210
        gbc.setState(0x3269, 0xd50f, 0xb7d0, 0xacef, 0x7ede, 0x4940, 0x0, 0x1);
        gbc.writeMem(0x3269, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xd50f);
        EXPECT(gbc.pc(), 0x326a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0211
        gbc.setState(0x2d8a, 0x8bc0, 0x13b0, 0xd74d, 0x8678, 0x9d61, 0x0, 0x0);
        gbc.writeMem(0x2d8a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x8bc0);
        EXPECT(gbc.pc(), 0x2d8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0212
        gbc.setState(0x3f43, 0x4885, 0xbdb0, 0x8903, 0x575b, 0x3da8, 0x0, 0x1);
        gbc.writeMem(0x3f43, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x4885);
        EXPECT(gbc.pc(), 0x3f44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0213
        gbc.setState(0x14ec, 0x2421, 0xca60, 0xedb6, 0x5183, 0xea44, 0x0, 0x0);
        gbc.writeMem(0x14ec, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x2421);
        EXPECT(gbc.pc(), 0x14ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0214
        gbc.setState(0xe44d, 0x2551, 0x89e0, 0x6855, 0xab86, 0x5084, 0x1, 0x0);
        gbc.writeMem(0xe44d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x2551);
        EXPECT(gbc.pc(), 0xe44e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe44d), 0xa5);
        // A5 0215
        gbc.setState(0x8de9, 0xf192, 0xaf10, 0x2a3d, 0x63ac, 0x78d7, 0x1, 0x0);
        gbc.writeMem(0x8de9, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xf192);
        EXPECT(gbc.pc(), 0x8dea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8de9), 0xa5);
        // A5 0216
        gbc.setState(0x8f77, 0xa1fe, 0xd920, 0x1887, 0xb734, 0xdac7, 0x1, 0x1);
        gbc.writeMem(0x8f77, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xa1fe);
        EXPECT(gbc.pc(), 0x8f78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f77), 0xa5);
        // A5 0217
        gbc.setState(0x40af, 0xae44, 0xb40, 0x9bfa, 0xb927, 0x70f9, 0x1, 0x0);
        gbc.writeMem(0x40af, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xae44);
        EXPECT(gbc.pc(), 0x40b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0218
        gbc.setState(0xd8c8, 0x6555, 0xcf50, 0x85f6, 0xbdb3, 0x37ef, 0x0, 0x1);
        gbc.writeMem(0xd8c8, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x6555);
        EXPECT(gbc.pc(), 0xd8c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8c8), 0xa5);
        // A5 0219
        gbc.setState(0xc0c1, 0x4d2f, 0xf0c0, 0x6a97, 0x29a9, 0x9e36, 0x0, 0x1);
        gbc.writeMem(0xc0c1, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x4d2f);
        EXPECT(gbc.pc(), 0xc0c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0c1), 0xa5);
        // A5 021A
        gbc.setState(0xb591, 0xdd86, 0xe70, 0x89f9, 0xecbc, 0xa2, 0x1, 0x0);
        gbc.writeMem(0xb591, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xdd86);
        EXPECT(gbc.pc(), 0xb592);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb591), 0xa5);
        // A5 021B
        gbc.setState(0x9a3, 0xc5ca, 0x61a0, 0xa2a2, 0xa676, 0x377d, 0x0, 0x1);
        gbc.writeMem(0x9a3, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xc5ca);
        EXPECT(gbc.pc(), 0x9a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 021C
        gbc.setState(0x188f, 0x94ae, 0xc9c0, 0xe0c1, 0xa8cd, 0xc58c, 0x0, 0x1);
        gbc.writeMem(0x188f, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x94ae);
        EXPECT(gbc.pc(), 0x1890);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 021D
        gbc.setState(0xeb95, 0x3a4e, 0xbd70, 0xd710, 0xfa29, 0x26ed, 0x1, 0x1);
        gbc.writeMem(0xeb95, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x3a4e);
        EXPECT(gbc.pc(), 0xeb96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb95), 0xa5);
        // A5 021E
        gbc.setState(0xbd32, 0xba84, 0x4a00, 0xf7a1, 0xe073, 0xd42f, 0x1, 0x1);
        gbc.writeMem(0xbd32, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xba84);
        EXPECT(gbc.pc(), 0xbd33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd32), 0xa5);
        // A5 0220
        gbc.setState(0xbf22, 0xca2c, 0x8fc0, 0x1776, 0x530a, 0xcc6a, 0x0, 0x0);
        gbc.writeMem(0xbf22, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xca2c);
        EXPECT(gbc.pc(), 0xbf23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf22), 0xa5);
        // A5 0221
        gbc.setState(0xc420, 0xdd64, 0x3a10, 0xd5be, 0xf66d, 0xcf62, 0x0, 0x1);
        gbc.writeMem(0xc420, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xdd64);
        EXPECT(gbc.pc(), 0xc421);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc420), 0xa5);
        // A5 0222
        gbc.setState(0x5fb4, 0x4152, 0x1910, 0xe8d9, 0xab8f, 0x9f73, 0x1, 0x1);
        gbc.writeMem(0x5fb4, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x4152);
        EXPECT(gbc.pc(), 0x5fb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0223
        gbc.setState(0x48e8, 0x5100, 0x1840, 0xfb05, 0x8a1e, 0x204d, 0x1, 0x0);
        gbc.writeMem(0x48e8, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x5100);
        EXPECT(gbc.pc(), 0x48e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0224
        gbc.setState(0x183e, 0x269e, 0x1260, 0xa625, 0xf99c, 0xceb3, 0x0, 0x0);
        gbc.writeMem(0x183e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x269e);
        EXPECT(gbc.pc(), 0x183f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0225
        gbc.setState(0xaead, 0xc5f, 0x910, 0x37e0, 0x4b1c, 0xfb82, 0x1, 0x0);
        gbc.writeMem(0xaead, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xc5f);
        EXPECT(gbc.pc(), 0xaeae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaead), 0xa5);
        // A5 0226
        gbc.setState(0xc281, 0x2844, 0x7f50, 0x3fe7, 0x8d20, 0xb0ce, 0x0, 0x0);
        gbc.writeMem(0xc281, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x2844);
        EXPECT(gbc.pc(), 0xc282);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc281), 0xa5);
        // A5 0227
        gbc.setState(0xe9a0, 0x3335, 0x38c0, 0x7e, 0x2b32, 0xcf5, 0x1, 0x1);
        gbc.writeMem(0xe9a0, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x3335);
        EXPECT(gbc.pc(), 0xe9a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9a0), 0xa5);
        // A5 0228
        gbc.setState(0x9c38, 0xa24a, 0x12d0, 0x4047, 0xe89, 0x9531, 0x1, 0x1);
        gbc.writeMem(0x9c38, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xa24a);
        EXPECT(gbc.pc(), 0x9c39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c38), 0xa5);
        // A5 0229
        gbc.setState(0xb3c8, 0xb206, 0x9740, 0x691e, 0xf364, 0x5b9e, 0x1, 0x1);
        gbc.writeMem(0xb3c8, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xb206);
        EXPECT(gbc.pc(), 0xb3c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3c8), 0xa5);
        // A5 022A
        gbc.setState(0xc88b, 0x7e9f, 0x9ad0, 0x9715, 0x4cb8, 0x5937, 0x1, 0x1);
        gbc.writeMem(0xc88b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x7e9f);
        EXPECT(gbc.pc(), 0xc88c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc88b), 0xa5);
        // A5 022B
        gbc.setState(0x1be2, 0xd113, 0xd910, 0x35f8, 0x2bdd, 0x94ce, 0x0, 0x0);
        gbc.writeMem(0x1be2, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xd113);
        EXPECT(gbc.pc(), 0x1be3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 022C
        gbc.setState(0x9702, 0xed8d, 0xe030, 0xa8b3, 0x83a8, 0x6b39, 0x0, 0x1);
        gbc.writeMem(0x9702, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xed8d);
        EXPECT(gbc.pc(), 0x9703);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9702), 0xa5);
        // A5 022D
        gbc.setState(0x891, 0x9722, 0x6e50, 0xaa05, 0xd4da, 0xbbb8, 0x1, 0x1);
        gbc.writeMem(0x891, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x9722);
        EXPECT(gbc.pc(), 0x892);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 022E
        gbc.setState(0x76b3, 0xd68f, 0xbd00, 0x9a63, 0x16d3, 0xc46a, 0x1, 0x1);
        gbc.writeMem(0x76b3, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xd68f);
        EXPECT(gbc.pc(), 0x76b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 022F
        gbc.setState(0x1eca, 0x7820, 0x8fd0, 0xc058, 0x7167, 0x62c6, 0x1, 0x0);
        gbc.writeMem(0x1eca, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x7820);
        EXPECT(gbc.pc(), 0x1ecb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0230
        gbc.setState(0xd717, 0xc430, 0x8400, 0x86af, 0xbc15, 0xa5fe, 0x0, 0x1);
        gbc.writeMem(0xd717, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xc430);
        EXPECT(gbc.pc(), 0xd718);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd717), 0xa5);
        // A5 0231
        gbc.setState(0x81f1, 0x7a78, 0x6470, 0xf832, 0x3c18, 0x1ec0, 0x0, 0x1);
        gbc.writeMem(0x81f1, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x7a78);
        EXPECT(gbc.pc(), 0x81f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81f1), 0xa5);
        // A5 0232
        gbc.setState(0x21aa, 0xd400, 0xc0b0, 0xb493, 0x79ec, 0x9ffc, 0x0, 0x1);
        gbc.writeMem(0x21aa, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xd400);
        EXPECT(gbc.pc(), 0x21ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0233
        gbc.setState(0x6f5b, 0xe05a, 0xbc40, 0xeafd, 0x4eb6, 0xed04, 0x1, 0x0);
        gbc.writeMem(0x6f5b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xe05a);
        EXPECT(gbc.pc(), 0x6f5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0234
        gbc.setState(0x42ee, 0x1954, 0xdf30, 0x1708, 0xab9f, 0x2a5a, 0x1, 0x1);
        gbc.writeMem(0x42ee, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x1954);
        EXPECT(gbc.pc(), 0x42ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0235
        gbc.setState(0x4a2, 0x5d01, 0x7e80, 0xe703, 0x5335, 0xfc37, 0x1, 0x0);
        gbc.writeMem(0x4a2, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x5d01);
        EXPECT(gbc.pc(), 0x4a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0236
        gbc.setState(0x4643, 0x7999, 0xabb0, 0xfa05, 0xd13c, 0x431d, 0x0, 0x1);
        gbc.writeMem(0x4643, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x7999);
        EXPECT(gbc.pc(), 0x4644);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0237
        gbc.setState(0x3536, 0x922c, 0xcf00, 0x81e1, 0x9600, 0x97e7, 0x0, 0x0);
        gbc.writeMem(0x3536, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x922c);
        EXPECT(gbc.pc(), 0x3537);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0238
        gbc.setState(0xeb4a, 0xe9cc, 0x550, 0x9870, 0xe93c, 0x1a22, 0x1, 0x1);
        gbc.writeMem(0xeb4a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xe9cc);
        EXPECT(gbc.pc(), 0xeb4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb4a), 0xa5);
        // A5 0239
        gbc.setState(0xa713, 0xed9b, 0x8560, 0x813b, 0xf1e8, 0xd41d, 0x1, 0x1);
        gbc.writeMem(0xa713, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xed9b);
        EXPECT(gbc.pc(), 0xa714);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa713), 0xa5);
        // A5 023A
        gbc.setState(0x12bb, 0xf40a, 0xe960, 0x3bb8, 0x683c, 0x554a, 0x0, 0x1);
        gbc.writeMem(0x12bb, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xf40a);
        EXPECT(gbc.pc(), 0x12bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 023C
        gbc.setState(0x3de, 0x9e36, 0xc680, 0x1345, 0xc251, 0x2043, 0x0, 0x1);
        gbc.writeMem(0x3de, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x9e36);
        EXPECT(gbc.pc(), 0x3df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 023D
        gbc.setState(0x547f, 0x8a2a, 0xbea0, 0xa1c5, 0x28ee, 0x44f7, 0x1, 0x1);
        gbc.writeMem(0x547f, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x8a2a);
        EXPECT(gbc.pc(), 0x5480);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 023E
        gbc.setState(0x32f7, 0x33a5, 0x8f40, 0x130a, 0xd55a, 0xeefb, 0x0, 0x0);
        gbc.writeMem(0x32f7, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x33a5);
        EXPECT(gbc.pc(), 0x32f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 023F
        gbc.setState(0xdc37, 0x1017, 0x9020, 0xe560, 0xd421, 0x3202, 0x0, 0x1);
        gbc.writeMem(0xdc37, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x1017);
        EXPECT(gbc.pc(), 0xdc38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc37), 0xa5);
        // A5 0240
        gbc.setState(0x5357, 0x58a0, 0x54d0, 0x8306, 0xac44, 0xbe9f, 0x1, 0x0);
        gbc.writeMem(0x5357, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x58a0);
        EXPECT(gbc.pc(), 0x5358);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0241
        gbc.setState(0xd1b3, 0x96b3, 0xa450, 0xd62e, 0x5884, 0x7e52, 0x1, 0x0);
        gbc.writeMem(0xd1b3, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x96b3);
        EXPECT(gbc.pc(), 0xd1b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1b3), 0xa5);
        // A5 0242
        gbc.setState(0xee03, 0xd291, 0x62b0, 0x35a9, 0xe175, 0xe883, 0x0, 0x0);
        gbc.writeMem(0xee03, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xd291);
        EXPECT(gbc.pc(), 0xee04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee03), 0xa5);
        // A5 0243
        gbc.setState(0x715d, 0xa4e4, 0xca20, 0xef4f, 0x56d4, 0xe5aa, 0x1, 0x0);
        gbc.writeMem(0x715d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xa4e4);
        EXPECT(gbc.pc(), 0x715e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0244
        gbc.setState(0xd79a, 0x1f9d, 0x9570, 0x958c, 0xe5be, 0x203c, 0x0, 0x1);
        gbc.writeMem(0xd79a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x1f9d);
        EXPECT(gbc.pc(), 0xd79b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd79a), 0xa5);
        // A5 0245
        gbc.setState(0x5933, 0x7435, 0x3910, 0x1e6c, 0xfdf5, 0x6529, 0x1, 0x0);
        gbc.writeMem(0x5933, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x7435);
        EXPECT(gbc.pc(), 0x5934);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0246
        gbc.setState(0xc9b5, 0x1572, 0x54c0, 0x14c0, 0xec2c, 0xdb79, 0x1, 0x0);
        gbc.writeMem(0xc9b5, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x1572);
        EXPECT(gbc.pc(), 0xc9b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9b5), 0xa5);
        // A5 0247
        gbc.setState(0xc7fa, 0x72c4, 0x72e0, 0xddb1, 0x25ef, 0x7689, 0x1, 0x1);
        gbc.writeMem(0xc7fa, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x72c4);
        EXPECT(gbc.pc(), 0xc7fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7fa), 0xa5);
        // A5 0248
        gbc.setState(0x6fdd, 0xbe0d, 0xda40, 0x305, 0xd0a6, 0x6a39, 0x0, 0x0);
        gbc.writeMem(0x6fdd, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xbe0d);
        EXPECT(gbc.pc(), 0x6fde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0249
        gbc.setState(0x874, 0x14dc, 0x6f30, 0xe33d, 0x8f28, 0xf726, 0x0, 0x0);
        gbc.writeMem(0x874, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x14dc);
        EXPECT(gbc.pc(), 0x875);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 024A
        gbc.setState(0xc1d7, 0x3df, 0x660, 0x70d3, 0x9f83, 0xe058, 0x0, 0x0);
        gbc.writeMem(0xc1d7, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x3df);
        EXPECT(gbc.pc(), 0xc1d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1d7), 0xa5);
        // A5 024B
        gbc.setState(0xa92d, 0xfe6e, 0x1fa0, 0x67a3, 0xd239, 0xc7e6, 0x1, 0x0);
        gbc.writeMem(0xa92d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xfe6e);
        EXPECT(gbc.pc(), 0xa92e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa92d), 0xa5);
        // A5 024C
        gbc.setState(0x8b13, 0xdcd2, 0xa790, 0xaa55, 0x5f3c, 0x5095, 0x0, 0x1);
        gbc.writeMem(0x8b13, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xdcd2);
        EXPECT(gbc.pc(), 0x8b14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b13), 0xa5);
        // A5 024D
        gbc.setState(0x36e9, 0x2ef6, 0x2470, 0x3911, 0x407, 0x4153, 0x0, 0x1);
        gbc.writeMem(0x36e9, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x2ef6);
        EXPECT(gbc.pc(), 0x36ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 024E
        gbc.setState(0x356b, 0x64d2, 0xa850, 0xe64f, 0x47cb, 0x232a, 0x0, 0x1);
        gbc.writeMem(0x356b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x64d2);
        EXPECT(gbc.pc(), 0x356c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 024F
        gbc.setState(0xd587, 0xca43, 0x5650, 0x889f, 0x7b4, 0x2010, 0x0, 0x0);
        gbc.writeMem(0xd587, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xca43);
        EXPECT(gbc.pc(), 0xd588);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd587), 0xa5);
        // A5 0250
        gbc.setState(0x276f, 0x4ccf, 0x1800, 0xe906, 0x2824, 0xecd1, 0x0, 0x0);
        gbc.writeMem(0x276f, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x4ccf);
        EXPECT(gbc.pc(), 0x2770);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0251
        gbc.setState(0x4562, 0x39bd, 0x9570, 0x66c9, 0x14f1, 0xa19, 0x1, 0x1);
        gbc.writeMem(0x4562, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x39bd);
        EXPECT(gbc.pc(), 0x4563);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0252
        gbc.setState(0xcb25, 0x702, 0xf780, 0x23cc, 0x510b, 0xa12a, 0x1, 0x1);
        gbc.writeMem(0xcb25, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x702);
        EXPECT(gbc.pc(), 0xcb26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb25), 0xa5);
        // A5 0253
        gbc.setState(0xa91a, 0xc78d, 0x9280, 0x9f22, 0x1ac4, 0xf38a, 0x0, 0x0);
        gbc.writeMem(0xa91a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xc78d);
        EXPECT(gbc.pc(), 0xa91b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa91a), 0xa5);
        // A5 0254
        gbc.setState(0x1283, 0x256f, 0x4f30, 0xd472, 0x95d0, 0xe56f, 0x1, 0x1);
        gbc.writeMem(0x1283, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x256f);
        EXPECT(gbc.pc(), 0x1284);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0255
        gbc.setState(0x7c7, 0x84af, 0x4e0, 0x461e, 0xe13c, 0x2558, 0x0, 0x0);
        gbc.writeMem(0x7c7, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x84af);
        EXPECT(gbc.pc(), 0x7c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0256
        gbc.setState(0x4eb0, 0x3205, 0x12b0, 0xf9d9, 0xd936, 0xdfa5, 0x1, 0x1);
        gbc.writeMem(0x4eb0, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x3205);
        EXPECT(gbc.pc(), 0x4eb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0257
        gbc.setState(0xa6f9, 0xa3ea, 0x12b0, 0x32db, 0xeb91, 0x2dfa, 0x0, 0x1);
        gbc.writeMem(0xa6f9, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xa3ea);
        EXPECT(gbc.pc(), 0xa6fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6f9), 0xa5);
        // A5 0258
        gbc.setState(0xa33b, 0xf56b, 0xb6c0, 0x24f9, 0xdfdf, 0x2fea, 0x0, 0x0);
        gbc.writeMem(0xa33b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xf56b);
        EXPECT(gbc.pc(), 0xa33c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa33b), 0xa5);
        // A5 0259
        gbc.setState(0x3c66, 0xec71, 0x98d0, 0x9738, 0x47e9, 0x3739, 0x0, 0x0);
        gbc.writeMem(0x3c66, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xec71);
        EXPECT(gbc.pc(), 0x3c67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 025A
        gbc.setState(0xc066, 0x4e2e, 0xecf0, 0xf7f2, 0xbe6, 0xedbd, 0x0, 0x0);
        gbc.writeMem(0xc066, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x4e2e);
        EXPECT(gbc.pc(), 0xc067);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc066), 0xa5);
        // A5 025B
        gbc.setState(0xa16f, 0x72a5, 0x6090, 0xc1b8, 0x1c36, 0xc607, 0x1, 0x1);
        gbc.writeMem(0xa16f, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x72a5);
        EXPECT(gbc.pc(), 0xa170);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa16f), 0xa5);
        // A5 025C
        gbc.setState(0x2c10, 0x77ef, 0x9bc0, 0xc384, 0xcef1, 0x193f, 0x0, 0x0);
        gbc.writeMem(0x2c10, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x77ef);
        EXPECT(gbc.pc(), 0x2c11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 025D
        gbc.setState(0x80b3, 0xdf6a, 0xfa80, 0xd6ea, 0xe778, 0x5f5c, 0x1, 0x0);
        gbc.writeMem(0x80b3, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xdf6a);
        EXPECT(gbc.pc(), 0x80b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80b3), 0xa5);
        // A5 025E
        gbc.setState(0xd4a, 0xf62f, 0x6040, 0x47d8, 0x8134, 0xc518, 0x0, 0x1);
        gbc.writeMem(0xd4a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xf62f);
        EXPECT(gbc.pc(), 0xd4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 025F
        gbc.setState(0x46fc, 0x9a1c, 0xea60, 0x6688, 0xf98b, 0x90c5, 0x1, 0x0);
        gbc.writeMem(0x46fc, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x9a1c);
        EXPECT(gbc.pc(), 0x46fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0260
        gbc.setState(0x69b6, 0xc819, 0xff60, 0x2402, 0x818, 0xcecf, 0x1, 0x1);
        gbc.writeMem(0x69b6, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xc819);
        EXPECT(gbc.pc(), 0x69b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0261
        gbc.setState(0xe9d1, 0xff38, 0xbd70, 0xf283, 0x93f2, 0xc077, 0x0, 0x1);
        gbc.writeMem(0xe9d1, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xff38);
        EXPECT(gbc.pc(), 0xe9d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9d1), 0xa5);
        // A5 0262
        gbc.setState(0x97bb, 0x551e, 0x2aa0, 0xd9f2, 0xe39e, 0xbe5c, 0x1, 0x1);
        gbc.writeMem(0x97bb, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x551e);
        EXPECT(gbc.pc(), 0x97bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97bb), 0xa5);
        // A5 0263
        gbc.setState(0xd56b, 0x3551, 0x1320, 0xabc1, 0xc9a8, 0x3599, 0x0, 0x1);
        gbc.writeMem(0xd56b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x3551);
        EXPECT(gbc.pc(), 0xd56c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd56b), 0xa5);
        // A5 0264
        gbc.setState(0xa7c8, 0x2a2c, 0xe5a0, 0xb74d, 0x2fa1, 0x69c8, 0x1, 0x1);
        gbc.writeMem(0xa7c8, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x2a2c);
        EXPECT(gbc.pc(), 0xa7c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7c8), 0xa5);
        // A5 0265
        gbc.setState(0xa04c, 0xdf3c, 0x3c60, 0xdc0d, 0x7247, 0x68d4, 0x0, 0x1);
        gbc.writeMem(0xa04c, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xdf3c);
        EXPECT(gbc.pc(), 0xa04d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa04c), 0xa5);
        // A5 0266
        gbc.setState(0xb416, 0x6407, 0x5e00, 0xee00, 0x3784, 0xf6d8, 0x1, 0x0);
        gbc.writeMem(0xb416, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x6407);
        EXPECT(gbc.pc(), 0xb417);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb416), 0xa5);
        // A5 0267
        gbc.setState(0x1e43, 0x7988, 0x8940, 0x6871, 0x87bd, 0xa25e, 0x1, 0x0);
        gbc.writeMem(0x1e43, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x7988);
        EXPECT(gbc.pc(), 0x1e44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0268
        gbc.setState(0xd646, 0x70ed, 0x1900, 0x6b9d, 0xb07d, 0x983f, 0x0, 0x0);
        gbc.writeMem(0xd646, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x70ed);
        EXPECT(gbc.pc(), 0xd647);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd646), 0xa5);
        // A5 0269
        gbc.setState(0x5bb6, 0x333e, 0xb2d0, 0x27, 0xa519, 0x272c, 0x0, 0x1);
        gbc.writeMem(0x5bb6, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x333e);
        EXPECT(gbc.pc(), 0x5bb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 026A
        gbc.setState(0xe661, 0x726b, 0xf0d0, 0x2750, 0x2b39, 0x95f2, 0x0, 0x1);
        gbc.writeMem(0xe661, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x726b);
        EXPECT(gbc.pc(), 0xe662);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe661), 0xa5);
        // A5 026B
        gbc.setState(0x4fab, 0xe27f, 0xb7f0, 0x2539, 0x9fc1, 0x567d, 0x0, 0x0);
        gbc.writeMem(0x4fab, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xe27f);
        EXPECT(gbc.pc(), 0x4fac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 026C
        gbc.setState(0x9a4b, 0xc4f1, 0x2fc0, 0x32f2, 0x181e, 0x931a, 0x0, 0x1);
        gbc.writeMem(0x9a4b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xc4f1);
        EXPECT(gbc.pc(), 0x9a4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a4b), 0xa5);
        // A5 026D
        gbc.setState(0x66da, 0xf845, 0x1bc0, 0x595, 0xbb0d, 0x95f0, 0x1, 0x0);
        gbc.writeMem(0x66da, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xf845);
        EXPECT(gbc.pc(), 0x66db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 026E
        gbc.setState(0xab81, 0x1e64, 0x9350, 0xa9c8, 0x7819, 0x56e1, 0x1, 0x1);
        gbc.writeMem(0xab81, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x1e64);
        EXPECT(gbc.pc(), 0xab82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab81), 0xa5);
        // A5 026F
        gbc.setState(0x969, 0x1fc8, 0xfce0, 0x8637, 0x43a9, 0x521b, 0x0, 0x0);
        gbc.writeMem(0x969, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x1fc8);
        EXPECT(gbc.pc(), 0x96a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0270
        gbc.setState(0x4de2, 0xdf18, 0x2d40, 0xc85c, 0xd26f, 0xa0af, 0x0, 0x0);
        gbc.writeMem(0x4de2, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xdf18);
        EXPECT(gbc.pc(), 0x4de3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0271
        gbc.setState(0xd8b, 0xe432, 0xdc00, 0x8360, 0xb058, 0x14ef, 0x1, 0x0);
        gbc.writeMem(0xd8b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xe432);
        EXPECT(gbc.pc(), 0xd8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0273
        gbc.setState(0xbb9d, 0x9487, 0x8b30, 0xdecd, 0x99ba, 0x99f9, 0x0, 0x1);
        gbc.writeMem(0xbb9d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x9487);
        EXPECT(gbc.pc(), 0xbb9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb9d), 0xa5);
        // A5 0274
        gbc.setState(0x7964, 0x94f9, 0x4540, 0xa8f8, 0x448b, 0x594, 0x1, 0x1);
        gbc.writeMem(0x7964, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x94f9);
        EXPECT(gbc.pc(), 0x7965);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0275
        gbc.setState(0xa739, 0x38a, 0x8b80, 0x259a, 0x15ff, 0x82e2, 0x1, 0x1);
        gbc.writeMem(0xa739, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x38a);
        EXPECT(gbc.pc(), 0xa73a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa739), 0xa5);
        // A5 0276
        gbc.setState(0xbf92, 0xc92e, 0x1ca0, 0xd8d2, 0x8051, 0x450e, 0x0, 0x0);
        gbc.writeMem(0xbf92, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xc92e);
        EXPECT(gbc.pc(), 0xbf93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf92), 0xa5);
        // A5 0277
        gbc.setState(0x2623, 0xa160, 0x3240, 0x481a, 0xeae, 0x6f0b, 0x1, 0x1);
        gbc.writeMem(0x2623, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xa160);
        EXPECT(gbc.pc(), 0x2624);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0278
        gbc.setState(0xe49, 0x67c0, 0x9400, 0x5730, 0xdaad, 0xa89a, 0x0, 0x1);
        gbc.writeMem(0xe49, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x67c0);
        EXPECT(gbc.pc(), 0xe4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0279
        gbc.setState(0xef80, 0x6aa4, 0x9050, 0x9a2b, 0x25e9, 0xdcb, 0x0, 0x1);
        gbc.writeMem(0xef80, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x6aa4);
        EXPECT(gbc.pc(), 0xef81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef80), 0xa5);
        // A5 027A
        gbc.setState(0x90e0, 0xf13d, 0x6a50, 0xf80c, 0x5f41, 0xc580, 0x0, 0x0);
        gbc.writeMem(0x90e0, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xf13d);
        EXPECT(gbc.pc(), 0x90e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90e0), 0xa5);
        // A5 027B
        gbc.setState(0xe137, 0xa482, 0x8bb0, 0x5706, 0xf77c, 0x84d, 0x1, 0x1);
        gbc.writeMem(0xe137, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xa482);
        EXPECT(gbc.pc(), 0xe138);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe137), 0xa5);
        // A5 027C
        gbc.setState(0xbe7, 0xe913, 0xd2d0, 0x6da4, 0xca6d, 0xeeed, 0x0, 0x1);
        gbc.writeMem(0xbe7, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xe913);
        EXPECT(gbc.pc(), 0xbe8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 027D
        gbc.setState(0x312b, 0x773, 0x97a0, 0x6f54, 0xf087, 0x74de, 0x0, 0x1);
        gbc.writeMem(0x312b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x773);
        EXPECT(gbc.pc(), 0x312c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 027E
        gbc.setState(0x5d94, 0xa346, 0xb3c0, 0xce7b, 0xdd23, 0x5c07, 0x0, 0x0);
        gbc.writeMem(0x5d94, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xa346);
        EXPECT(gbc.pc(), 0x5d95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 027F
        gbc.setState(0x667, 0xa0ea, 0xf260, 0xc1f8, 0xbd51, 0x8c, 0x1, 0x0);
        gbc.writeMem(0x667, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xa0ea);
        EXPECT(gbc.pc(), 0x668);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0280
        gbc.setState(0x1184, 0x898a, 0x5de0, 0xf05f, 0xc3f0, 0x21de, 0x1, 0x0);
        gbc.writeMem(0x1184, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x898a);
        EXPECT(gbc.pc(), 0x1185);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0281
        gbc.setState(0x44, 0x2a62, 0xd530, 0xf465, 0xa61e, 0x9423, 0x0, 0x0);
        gbc.writeMem(0x44, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x2a62);
        EXPECT(gbc.pc(), 0x45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0282
        gbc.setState(0xdc1d, 0xf2c, 0x5a00, 0x1f0, 0xd03, 0x9fd6, 0x0, 0x0);
        gbc.writeMem(0xdc1d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xf2c);
        EXPECT(gbc.pc(), 0xdc1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc1d), 0xa5);
        // A5 0283
        gbc.setState(0x8213, 0x4620, 0x3a80, 0x4f52, 0x6fd5, 0x7c29, 0x1, 0x0);
        gbc.writeMem(0x8213, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x4620);
        EXPECT(gbc.pc(), 0x8214);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8213), 0xa5);
        // A5 0284
        gbc.setState(0xebca, 0xc90c, 0x1b50, 0x33de, 0x8247, 0xc81f, 0x1, 0x1);
        gbc.writeMem(0xebca, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xc90c);
        EXPECT(gbc.pc(), 0xebcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebca), 0xa5);
        // A5 0285
        gbc.setState(0x317c, 0x56ce, 0x4850, 0x5b34, 0x58e0, 0x5bdd, 0x0, 0x0);
        gbc.writeMem(0x317c, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x56ce);
        EXPECT(gbc.pc(), 0x317d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0286
        gbc.setState(0x34db, 0xe644, 0xc350, 0x6314, 0x997a, 0x9793, 0x1, 0x1);
        gbc.writeMem(0x34db, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xe644);
        EXPECT(gbc.pc(), 0x34dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0287
        gbc.setState(0xdd0f, 0x8f37, 0x38a0, 0xcd9d, 0x851c, 0xcc0d, 0x0, 0x0);
        gbc.writeMem(0xdd0f, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x8f37);
        EXPECT(gbc.pc(), 0xdd10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd0f), 0xa5);
        // A5 0288
        gbc.setState(0x1f1c, 0x6164, 0x3490, 0x45c0, 0xb4d1, 0xe86, 0x0, 0x1);
        gbc.writeMem(0x1f1c, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x6164);
        EXPECT(gbc.pc(), 0x1f1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0289
        gbc.setState(0xb948, 0xf203, 0x5000, 0x33a, 0x6f44, 0xfbe5, 0x0, 0x1);
        gbc.writeMem(0xb948, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xf203);
        EXPECT(gbc.pc(), 0xb949);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb948), 0xa5);
        // A5 028A
        gbc.setState(0xefa, 0xcc9, 0x36a0, 0x6e3f, 0x4f8b, 0xb83e, 0x1, 0x0);
        gbc.writeMem(0xefa, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xcc9);
        EXPECT(gbc.pc(), 0xefb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 028B
        gbc.setState(0x3be, 0xac25, 0xf070, 0x2ec7, 0xcbd8, 0x72ed, 0x1, 0x0);
        gbc.writeMem(0x3be, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xac25);
        EXPECT(gbc.pc(), 0x3bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 028C
        gbc.setState(0x384d, 0x4212, 0x26d0, 0x44d5, 0x7178, 0x7dc2, 0x1, 0x1);
        gbc.writeMem(0x384d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x4212);
        EXPECT(gbc.pc(), 0x384e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 028D
        gbc.setState(0xc46f, 0x4f5e, 0x20d0, 0x618d, 0x119, 0x7945, 0x0, 0x0);
        gbc.writeMem(0xc46f, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x4f5e);
        EXPECT(gbc.pc(), 0xc470);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc46f), 0xa5);
        // A5 028E
        gbc.setState(0xc58c, 0x7f6, 0xf10, 0x4257, 0x2881, 0x9294, 0x0, 0x0);
        gbc.writeMem(0xc58c, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x7f6);
        EXPECT(gbc.pc(), 0xc58d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc58c), 0xa5);
        // A5 028F
        gbc.setState(0x8382, 0x57d3, 0xc8e0, 0x6825, 0x5771, 0xfe5f, 0x0, 0x0);
        gbc.writeMem(0x8382, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x57d3);
        EXPECT(gbc.pc(), 0x8383);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8382), 0xa5);
        // A5 0290
        gbc.setState(0xc756, 0xfc56, 0xa5e0, 0xa27, 0xdb56, 0x4320, 0x1, 0x0);
        gbc.writeMem(0xc756, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xfc56);
        EXPECT(gbc.pc(), 0xc757);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc756), 0xa5);
        // A5 0291
        gbc.setState(0xed9e, 0x28c, 0x6ee0, 0xd58c, 0xdf73, 0xf728, 0x1, 0x1);
        gbc.writeMem(0xed9e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x28c);
        EXPECT(gbc.pc(), 0xed9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed9e), 0xa5);
        // A5 0292
        gbc.setState(0x82a2, 0xcb22, 0x9060, 0xcd5, 0x4134, 0x90fe, 0x0, 0x1);
        gbc.writeMem(0x82a2, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xcb22);
        EXPECT(gbc.pc(), 0x82a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82a2), 0xa5);
        // A5 0293
        gbc.setState(0x1917, 0xc957, 0x68e0, 0xe00c, 0x48e6, 0x18df, 0x0, 0x0);
        gbc.writeMem(0x1917, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xc957);
        EXPECT(gbc.pc(), 0x1918);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0294
        gbc.setState(0x502e, 0x48d0, 0xfac0, 0x6ce7, 0xddba, 0xbe3c, 0x1, 0x1);
        gbc.writeMem(0x502e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x48d0);
        EXPECT(gbc.pc(), 0x502f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0295
        gbc.setState(0xb04a, 0x6221, 0x6c60, 0x345, 0x162d, 0x438f, 0x0, 0x1);
        gbc.writeMem(0xb04a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x6221);
        EXPECT(gbc.pc(), 0xb04b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb04a), 0xa5);
        // A5 0297
        gbc.setState(0xad29, 0xdd44, 0x45d0, 0xbb7a, 0xd3db, 0x858f, 0x0, 0x1);
        gbc.writeMem(0xad29, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xdd44);
        EXPECT(gbc.pc(), 0xad2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad29), 0xa5);
        // A5 0298
        gbc.setState(0x398f, 0x2c68, 0x24f0, 0xd70d, 0x6e78, 0xa22d, 0x1, 0x1);
        gbc.writeMem(0x398f, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x2c68);
        EXPECT(gbc.pc(), 0x3990);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 029A
        gbc.setState(0x7d7d, 0xfa88, 0x9c50, 0xdc46, 0xf23c, 0x45cc, 0x0, 0x0);
        gbc.writeMem(0x7d7d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xfa88);
        EXPECT(gbc.pc(), 0x7d7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 029B
        gbc.setState(0xe84d, 0x2ad5, 0x1890, 0x99a9, 0xec04, 0x182f, 0x0, 0x0);
        gbc.writeMem(0xe84d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x2ad5);
        EXPECT(gbc.pc(), 0xe84e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe84d), 0xa5);
        // A5 029C
        gbc.setState(0x9341, 0xf6fd, 0x10a0, 0xceb0, 0x118, 0x7af1, 0x1, 0x1);
        gbc.writeMem(0x9341, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xf6fd);
        EXPECT(gbc.pc(), 0x9342);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9341), 0xa5);
        // A5 029D
        gbc.setState(0x1026, 0xce8f, 0x3900, 0x57ba, 0xcd17, 0x87ff, 0x1, 0x0);
        gbc.writeMem(0x1026, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xce8f);
        EXPECT(gbc.pc(), 0x1027);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 029E
        gbc.setState(0x4559, 0x18ea, 0x7a40, 0x8034, 0x42af, 0x501d, 0x1, 0x1);
        gbc.writeMem(0x4559, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x18ea);
        EXPECT(gbc.pc(), 0x455a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 029F
        gbc.setState(0xdcb0, 0xd7e, 0x3bc0, 0x1b63, 0xadc, 0xc110, 0x1, 0x1);
        gbc.writeMem(0xdcb0, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xd7e);
        EXPECT(gbc.pc(), 0xdcb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcb0), 0xa5);
        // A5 02A0
        gbc.setState(0xec22, 0x1903, 0x3830, 0x43d6, 0xf603, 0x1f5f, 0x0, 0x1);
        gbc.writeMem(0xec22, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x1903);
        EXPECT(gbc.pc(), 0xec23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec22), 0xa5);
        // A5 02A1
        gbc.setState(0x723e, 0xced9, 0x6930, 0xa856, 0xa16d, 0xcec7, 0x0, 0x0);
        gbc.writeMem(0x723e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xced9);
        EXPECT(gbc.pc(), 0x723f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02A2
        gbc.setState(0xcc54, 0x96e5, 0x1b0, 0x5866, 0x5597, 0x9b3d, 0x0, 0x1);
        gbc.writeMem(0xcc54, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x96e5);
        EXPECT(gbc.pc(), 0xcc55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc54), 0xa5);
        // A5 02A3
        gbc.setState(0x2fed, 0xdfe6, 0xfe00, 0x931f, 0xaaa5, 0xb0dc, 0x0, 0x1);
        gbc.writeMem(0x2fed, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xdfe6);
        EXPECT(gbc.pc(), 0x2fee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02A4
        gbc.setState(0x6eec, 0xd72b, 0x33f0, 0xc302, 0xe0b0, 0xd84, 0x1, 0x1);
        gbc.writeMem(0x6eec, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xd72b);
        EXPECT(gbc.pc(), 0x6eed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02A5
        gbc.setState(0x7db4, 0xc60d, 0xdca0, 0x28f6, 0x1937, 0xe4da, 0x0, 0x0);
        gbc.writeMem(0x7db4, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xc60d);
        EXPECT(gbc.pc(), 0x7db5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02A6
        gbc.setState(0x2182, 0xce2, 0xb9a0, 0x3d70, 0x8079, 0x2062, 0x0, 0x0);
        gbc.writeMem(0x2182, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xce2);
        EXPECT(gbc.pc(), 0x2183);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02A7
        gbc.setState(0x7701, 0x15fd, 0xeac0, 0xe185, 0x2527, 0xd148, 0x1, 0x0);
        gbc.writeMem(0x7701, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x15fd);
        EXPECT(gbc.pc(), 0x7702);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02A8
        gbc.setState(0xd4bf, 0xb714, 0x71c0, 0xdb5b, 0xd06b, 0x6aab, 0x0, 0x1);
        gbc.writeMem(0xd4bf, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xb714);
        EXPECT(gbc.pc(), 0xd4c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4bf), 0xa5);
        // A5 02A9
        gbc.setState(0x75f, 0xf09b, 0x4570, 0x1a92, 0xeac6, 0xe5b0, 0x0, 0x0);
        gbc.writeMem(0x75f, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xf09b);
        EXPECT(gbc.pc(), 0x760);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02AA
        gbc.setState(0xba7a, 0xd2ba, 0xe510, 0x9487, 0xc3b6, 0x175f, 0x1, 0x0);
        gbc.writeMem(0xba7a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xd2ba);
        EXPECT(gbc.pc(), 0xba7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba7a), 0xa5);
        // A5 02AB
        gbc.setState(0x45ae, 0xf2b4, 0x7340, 0x1160, 0x79, 0x19bd, 0x1, 0x1);
        gbc.writeMem(0x45ae, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xf2b4);
        EXPECT(gbc.pc(), 0x45af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02AC
        gbc.setState(0x6d52, 0x5e23, 0xcf90, 0x1188, 0xb662, 0x9b8f, 0x0, 0x0);
        gbc.writeMem(0x6d52, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x5e23);
        EXPECT(gbc.pc(), 0x6d53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02AD
        gbc.setState(0x2d06, 0xd423, 0x4f80, 0xc1ce, 0xeb54, 0xe0e, 0x1, 0x1);
        gbc.writeMem(0x2d06, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xd423);
        EXPECT(gbc.pc(), 0x2d07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02AF
        gbc.setState(0x3300, 0x1b45, 0x9dc0, 0x12c6, 0x7fed, 0x225f, 0x0, 0x0);
        gbc.writeMem(0x3300, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x1b45);
        EXPECT(gbc.pc(), 0x3301);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02B0
        gbc.setState(0x41c6, 0x584, 0x25c0, 0x2258, 0x2b39, 0xb08b, 0x1, 0x0);
        gbc.writeMem(0x41c6, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x584);
        EXPECT(gbc.pc(), 0x41c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02B1
        gbc.setState(0x3c20, 0xda6a, 0xccb0, 0x926f, 0x6a87, 0x88, 0x0, 0x1);
        gbc.writeMem(0x3c20, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xda6a);
        EXPECT(gbc.pc(), 0x3c21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02B2
        gbc.setState(0x6972, 0x3e9e, 0x5f50, 0xfe43, 0xe3fc, 0xad98, 0x1, 0x0);
        gbc.writeMem(0x6972, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x3e9e);
        EXPECT(gbc.pc(), 0x6973);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02B3
        gbc.setState(0xe216, 0xd26e, 0x77e0, 0x9cb0, 0xb708, 0xe666, 0x0, 0x0);
        gbc.writeMem(0xe216, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xd26e);
        EXPECT(gbc.pc(), 0xe217);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe216), 0xa5);
        // A5 02B4
        gbc.setState(0x2825, 0x830, 0x5ac0, 0x9869, 0x168d, 0x4a2f, 0x1, 0x1);
        gbc.writeMem(0x2825, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x830);
        EXPECT(gbc.pc(), 0x2826);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02B5
        gbc.setState(0x1683, 0x2fe1, 0x5870, 0xf310, 0x74fe, 0x28ca, 0x1, 0x0);
        gbc.writeMem(0x1683, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x2fe1);
        EXPECT(gbc.pc(), 0x1684);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02B6
        gbc.setState(0x821a, 0x2556, 0xef10, 0xc22a, 0xb328, 0xbcce, 0x0, 0x0);
        gbc.writeMem(0x821a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x2556);
        EXPECT(gbc.pc(), 0x821b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x821a), 0xa5);
        // A5 02B7
        gbc.setState(0x9c6d, 0xda29, 0xf080, 0x9509, 0x830e, 0x6242, 0x1, 0x0);
        gbc.writeMem(0x9c6d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xda29);
        EXPECT(gbc.pc(), 0x9c6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c6d), 0xa5);
        // A5 02B8
        gbc.setState(0xb325, 0xc647, 0x9d0, 0x404d, 0xaa8c, 0xc9b5, 0x1, 0x1);
        gbc.writeMem(0xb325, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xc647);
        EXPECT(gbc.pc(), 0xb326);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb325), 0xa5);
        // A5 02B9
        gbc.setState(0xe487, 0x4f26, 0x1000, 0xbbbb, 0xe313, 0x8474, 0x0, 0x0);
        gbc.writeMem(0xe487, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x4f26);
        EXPECT(gbc.pc(), 0xe488);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe487), 0xa5);
        // A5 02BB
        gbc.setState(0x678a, 0x5e4d, 0x57f0, 0xe1f9, 0x7880, 0xf109, 0x0, 0x0);
        gbc.writeMem(0x678a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x5e4d);
        EXPECT(gbc.pc(), 0x678b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02BC
        gbc.setState(0xd04f, 0x6a9a, 0xb860, 0xf259, 0xffd7, 0x410e, 0x1, 0x0);
        gbc.writeMem(0xd04f, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x6a9a);
        EXPECT(gbc.pc(), 0xd050);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd04f), 0xa5);
        // A5 02BD
        gbc.setState(0x6a69, 0x531c, 0xd1a0, 0xab5c, 0xeb9f, 0x458c, 0x1, 0x0);
        gbc.writeMem(0x6a69, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x531c);
        EXPECT(gbc.pc(), 0x6a6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02BE
        gbc.setState(0x61e7, 0x667d, 0x67a0, 0x6b5b, 0x448a, 0xfa65, 0x1, 0x1);
        gbc.writeMem(0x61e7, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x667d);
        EXPECT(gbc.pc(), 0x61e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02C0
        gbc.setState(0x950d, 0xe415, 0xb1d0, 0xd5d2, 0x6969, 0x8fd8, 0x0, 0x0);
        gbc.writeMem(0x950d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xe415);
        EXPECT(gbc.pc(), 0x950e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x950d), 0xa5);
        // A5 02C1
        gbc.setState(0x93c2, 0x114a, 0xe190, 0x3b43, 0x6f12, 0x75c, 0x0, 0x0);
        gbc.writeMem(0x93c2, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x114a);
        EXPECT(gbc.pc(), 0x93c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93c2), 0xa5);
        // A5 02C2
        gbc.setState(0x248b, 0x883d, 0x79e0, 0x1076, 0x20c2, 0x40bc, 0x1, 0x1);
        gbc.writeMem(0x248b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x883d);
        EXPECT(gbc.pc(), 0x248c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02C3
        gbc.setState(0x38a7, 0x652, 0xcf60, 0x55d8, 0xa46d, 0xf2f3, 0x1, 0x0);
        gbc.writeMem(0x38a7, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x652);
        EXPECT(gbc.pc(), 0x38a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02C4
        gbc.setState(0x5736, 0x4fda, 0x2b20, 0x46ca, 0x57d6, 0xd578, 0x1, 0x1);
        gbc.writeMem(0x5736, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x4fda);
        EXPECT(gbc.pc(), 0x5737);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02C5
        gbc.setState(0x32d3, 0xef75, 0x1ad0, 0x904f, 0x74ce, 0x1ca1, 0x1, 0x0);
        gbc.writeMem(0x32d3, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xef75);
        EXPECT(gbc.pc(), 0x32d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02C6
        gbc.setState(0x61, 0x595, 0x34a0, 0xc13e, 0x60b7, 0x8a19, 0x1, 0x0);
        gbc.writeMem(0x61, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x595);
        EXPECT(gbc.pc(), 0x62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02C7
        gbc.setState(0xb58d, 0xfa32, 0x3830, 0xce5d, 0x94a, 0xca20, 0x1, 0x0);
        gbc.writeMem(0xb58d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xfa32);
        EXPECT(gbc.pc(), 0xb58e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb58d), 0xa5);
        // A5 02C8
        gbc.setState(0xd533, 0xb5a8, 0x3e30, 0x7d08, 0x6a98, 0x5d00, 0x0, 0x1);
        gbc.writeMem(0xd533, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xb5a8);
        EXPECT(gbc.pc(), 0xd534);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd533), 0xa5);
        // A5 02C9
        gbc.setState(0xe20f, 0xed98, 0x68d0, 0xd8c6, 0xa7a, 0x25d1, 0x0, 0x1);
        gbc.writeMem(0xe20f, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xed98);
        EXPECT(gbc.pc(), 0xe210);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe20f), 0xa5);
        // A5 02CA
        gbc.setState(0xc4b6, 0x98dc, 0x93e0, 0x79b8, 0xb619, 0xfc48, 0x0, 0x1);
        gbc.writeMem(0xc4b6, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x98dc);
        EXPECT(gbc.pc(), 0xc4b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4b6), 0xa5);
        // A5 02CB
        gbc.setState(0xe3be, 0xb5d7, 0x4a0, 0x6011, 0x5c4b, 0x4187, 0x0, 0x1);
        gbc.writeMem(0xe3be, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xb5d7);
        EXPECT(gbc.pc(), 0xe3bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3be), 0xa5);
        // A5 02CC
        gbc.setState(0x8648, 0xdfad, 0x5ef0, 0xe41a, 0xf85c, 0x7951, 0x0, 0x1);
        gbc.writeMem(0x8648, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xdfad);
        EXPECT(gbc.pc(), 0x8649);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8648), 0xa5);
        // A5 02CD
        gbc.setState(0x4b7d, 0x95b4, 0x1ce0, 0x4c15, 0xe69b, 0x6296, 0x0, 0x1);
        gbc.writeMem(0x4b7d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x95b4);
        EXPECT(gbc.pc(), 0x4b7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02CE
        gbc.setState(0xb70e, 0x7a13, 0x9460, 0x3742, 0x5fc8, 0x2552, 0x1, 0x0);
        gbc.writeMem(0xb70e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x7a13);
        EXPECT(gbc.pc(), 0xb70f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb70e), 0xa5);
        // A5 02CF
        gbc.setState(0x4256, 0xf9dd, 0x8030, 0xfd96, 0xb354, 0x3423, 0x0, 0x1);
        gbc.writeMem(0x4256, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xf9dd);
        EXPECT(gbc.pc(), 0x4257);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02D0
        gbc.setState(0x7348, 0x3ca, 0x8ba0, 0x5c74, 0x9a35, 0x4130, 0x0, 0x0);
        gbc.writeMem(0x7348, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x3ca);
        EXPECT(gbc.pc(), 0x7349);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02D1
        gbc.setState(0x3686, 0x5565, 0xcf60, 0x10d4, 0xe7f9, 0xd71a, 0x0, 0x0);
        gbc.writeMem(0x3686, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x5565);
        EXPECT(gbc.pc(), 0x3687);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02D2
        gbc.setState(0x7b43, 0x68af, 0xea70, 0x3a6e, 0x30db, 0xf31d, 0x0, 0x0);
        gbc.writeMem(0x7b43, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x68af);
        EXPECT(gbc.pc(), 0x7b44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02D3
        gbc.setState(0x8275, 0x61bf, 0xc670, 0x8b99, 0xd310, 0xf43, 0x1, 0x1);
        gbc.writeMem(0x8275, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x61bf);
        EXPECT(gbc.pc(), 0x8276);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8275), 0xa5);
        // A5 02D4
        gbc.setState(0xb7f9, 0x73a9, 0x3720, 0xed0f, 0x37e1, 0x5315, 0x0, 0x0);
        gbc.writeMem(0xb7f9, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x73a9);
        EXPECT(gbc.pc(), 0xb7fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7f9), 0xa5);
        // A5 02D5
        gbc.setState(0xd692, 0xc85e, 0xa450, 0xe4dd, 0xc1e4, 0xade, 0x1, 0x0);
        gbc.writeMem(0xd692, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xc85e);
        EXPECT(gbc.pc(), 0xd693);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd692), 0xa5);
        // A5 02D6
        gbc.setState(0x725c, 0x96ac, 0x10d0, 0x65b9, 0x78d, 0x1ee9, 0x0, 0x0);
        gbc.writeMem(0x725c, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x96ac);
        EXPECT(gbc.pc(), 0x725d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02D7
        gbc.setState(0xe5d3, 0x5f14, 0x7330, 0x711, 0x8978, 0x2876, 0x0, 0x0);
        gbc.writeMem(0xe5d3, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x5f14);
        EXPECT(gbc.pc(), 0xe5d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5d3), 0xa5);
        // A5 02D8
        gbc.setState(0x9c91, 0x46ee, 0xd9c0, 0x9783, 0x3932, 0xbe7b, 0x0, 0x0);
        gbc.writeMem(0x9c91, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x46ee);
        EXPECT(gbc.pc(), 0x9c92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c91), 0xa5);
        // A5 02D9
        gbc.setState(0xde4d, 0x7f1c, 0x3040, 0xf199, 0x1a8, 0xc823, 0x1, 0x0);
        gbc.writeMem(0xde4d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x7f1c);
        EXPECT(gbc.pc(), 0xde4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde4d), 0xa5);
        // A5 02DA
        gbc.setState(0x70ff, 0x20d2, 0xfc00, 0xe69b, 0x9c21, 0x491d, 0x1, 0x0);
        gbc.writeMem(0x70ff, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x20d2);
        EXPECT(gbc.pc(), 0x7100);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02DB
        gbc.setState(0xef94, 0xc1fd, 0xa60, 0x9dd5, 0x9d85, 0x2868, 0x0, 0x0);
        gbc.writeMem(0xef94, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xc1fd);
        EXPECT(gbc.pc(), 0xef95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef94), 0xa5);
        // A5 02DC
        gbc.setState(0x25b2, 0x5c3c, 0x5fa0, 0x1daa, 0xee98, 0xe412, 0x0, 0x0);
        gbc.writeMem(0x25b2, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x5c3c);
        EXPECT(gbc.pc(), 0x25b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02DD
        gbc.setState(0x15ae, 0x1ea1, 0x5d90, 0x9693, 0x62be, 0xe043, 0x1, 0x0);
        gbc.writeMem(0x15ae, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x1ea1);
        EXPECT(gbc.pc(), 0x15af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02DE
        gbc.setState(0x1cf4, 0x7451, 0xad90, 0x25b6, 0xa37a, 0x5975, 0x1, 0x0);
        gbc.writeMem(0x1cf4, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x7451);
        EXPECT(gbc.pc(), 0x1cf5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02DF
        gbc.setState(0xcc0e, 0xae1, 0x9870, 0x1305, 0xfaa, 0x354b, 0x0, 0x0);
        gbc.writeMem(0xcc0e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xae1);
        EXPECT(gbc.pc(), 0xcc0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc0e), 0xa5);
        // A5 02E1
        gbc.setState(0x1f84, 0x3ad9, 0xc030, 0x6b5a, 0xbf26, 0x5777, 0x1, 0x0);
        gbc.writeMem(0x1f84, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x3ad9);
        EXPECT(gbc.pc(), 0x1f85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02E2
        gbc.setState(0xcb4f, 0x30bf, 0x5880, 0x345a, 0xc3c5, 0x8fe2, 0x1, 0x1);
        gbc.writeMem(0xcb4f, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x30bf);
        EXPECT(gbc.pc(), 0xcb50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb4f), 0xa5);
        // A5 02E3
        gbc.setState(0x5ed7, 0xa6cd, 0x9910, 0x54ae, 0xb3e6, 0xdf84, 0x0, 0x1);
        gbc.writeMem(0x5ed7, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xa6cd);
        EXPECT(gbc.pc(), 0x5ed8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02E4
        gbc.setState(0x457e, 0x473b, 0x1600, 0x8db2, 0x6f22, 0xe50c, 0x1, 0x1);
        gbc.writeMem(0x457e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x473b);
        EXPECT(gbc.pc(), 0x457f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02E6
        gbc.setState(0xbd07, 0x4d90, 0xfe90, 0xb52b, 0x485f, 0x70e6, 0x1, 0x1);
        gbc.writeMem(0xbd07, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x4d90);
        EXPECT(gbc.pc(), 0xbd08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd07), 0xa5);
        // A5 02E7
        gbc.setState(0x730b, 0xb0ee, 0xff50, 0x9d71, 0x640e, 0x2d8a, 0x0, 0x0);
        gbc.writeMem(0x730b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xb0ee);
        EXPECT(gbc.pc(), 0x730c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02E8
        gbc.setState(0x3aeb, 0xd1c, 0x19a0, 0xbd6a, 0x3aae, 0xdc6c, 0x0, 0x0);
        gbc.writeMem(0x3aeb, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xd1c);
        EXPECT(gbc.pc(), 0x3aec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02E9
        gbc.setState(0xae4f, 0x215c, 0x5be0, 0x2ced, 0x3dcb, 0x8ce9, 0x1, 0x1);
        gbc.writeMem(0xae4f, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x215c);
        EXPECT(gbc.pc(), 0xae50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae4f), 0xa5);
        // A5 02EA
        gbc.setState(0x7752, 0x7432, 0x5980, 0xc524, 0xdad2, 0xefc0, 0x0, 0x1);
        gbc.writeMem(0x7752, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x7432);
        EXPECT(gbc.pc(), 0x7753);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02EB
        gbc.setState(0xeb11, 0x903c, 0xe770, 0xbc27, 0xbee3, 0x4c73, 0x1, 0x0);
        gbc.writeMem(0xeb11, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x903c);
        EXPECT(gbc.pc(), 0xeb12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb11), 0xa5);
        // A5 02EC
        gbc.setState(0xa0f8, 0x63c8, 0x5c0, 0x6d89, 0x855e, 0x773f, 0x0, 0x1);
        gbc.writeMem(0xa0f8, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x63c8);
        EXPECT(gbc.pc(), 0xa0f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0f8), 0xa5);
        // A5 02ED
        gbc.setState(0x9252, 0x98ce, 0xd3b0, 0x696b, 0x4a31, 0xc46d, 0x1, 0x1);
        gbc.writeMem(0x9252, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x98ce);
        EXPECT(gbc.pc(), 0x9253);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9252), 0xa5);
        // A5 02EE
        gbc.setState(0xda59, 0x7baf, 0xc160, 0xa36e, 0x7fcb, 0x24b7, 0x1, 0x1);
        gbc.writeMem(0xda59, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x7baf);
        EXPECT(gbc.pc(), 0xda5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda59), 0xa5);
        // A5 02EF
        gbc.setState(0x6e79, 0x6b9, 0x4d90, 0x1ba5, 0xe58f, 0x130, 0x0, 0x1);
        gbc.writeMem(0x6e79, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x6b9);
        EXPECT(gbc.pc(), 0x6e7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02F1
        gbc.setState(0xbe42, 0x10ab, 0x3d0, 0x9312, 0xc616, 0xcb88, 0x0, 0x1);
        gbc.writeMem(0xbe42, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x10ab);
        EXPECT(gbc.pc(), 0xbe43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe42), 0xa5);
        // A5 02F2
        gbc.setState(0xccd2, 0xa4f7, 0x4e60, 0x332a, 0xa6ef, 0xc5bd, 0x0, 0x1);
        gbc.writeMem(0xccd2, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xa4f7);
        EXPECT(gbc.pc(), 0xccd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccd2), 0xa5);
        // A5 02F4
        gbc.setState(0x627d, 0x7546, 0xf0d0, 0xe8b9, 0x13b3, 0xfcc0, 0x0, 0x0);
        gbc.writeMem(0x627d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x7546);
        EXPECT(gbc.pc(), 0x627e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02F5
        gbc.setState(0xce95, 0x5c8f, 0xbef0, 0xc8af, 0x7aca, 0x98be, 0x1, 0x1);
        gbc.writeMem(0xce95, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x5c8f);
        EXPECT(gbc.pc(), 0xce96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce95), 0xa5);
        // A5 02F6
        gbc.setState(0x92cd, 0xcefe, 0xc5b0, 0x7559, 0x79e6, 0xb8fc, 0x0, 0x0);
        gbc.writeMem(0x92cd, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xcefe);
        EXPECT(gbc.pc(), 0x92ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92cd), 0xa5);
        // A5 02F7
        gbc.setState(0x1ed0, 0xdc99, 0xc1b0, 0xa26b, 0x9742, 0xcfe6, 0x0, 0x1);
        gbc.writeMem(0x1ed0, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xdc99);
        EXPECT(gbc.pc(), 0x1ed1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02F8
        gbc.setState(0xe20d, 0x5394, 0xa0c0, 0x6b36, 0xb592, 0xa2c7, 0x0, 0x0);
        gbc.writeMem(0xe20d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x5394);
        EXPECT(gbc.pc(), 0xe20e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe20d), 0xa5);
        // A5 02F9
        gbc.setState(0xa92e, 0x488c, 0x8290, 0xdb3b, 0xc494, 0x4b37, 0x0, 0x1);
        gbc.writeMem(0xa92e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x488c);
        EXPECT(gbc.pc(), 0xa92f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa92e), 0xa5);
        // A5 02FA
        gbc.setState(0x72b2, 0xcbcf, 0x7720, 0xf053, 0xd001, 0xd3d8, 0x0, 0x1);
        gbc.writeMem(0x72b2, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xcbcf);
        EXPECT(gbc.pc(), 0x72b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 02FC
        gbc.setState(0xd669, 0x4a78, 0x48f0, 0x9e02, 0x9850, 0x404d, 0x1, 0x1);
        gbc.writeMem(0xd669, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x4a78);
        EXPECT(gbc.pc(), 0xd66a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd669), 0xa5);
        // A5 02FD
        gbc.setState(0x9f8e, 0x28e2, 0x1f60, 0x7cf4, 0x49e, 0x6, 0x1, 0x0);
        gbc.writeMem(0x9f8e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x28e2);
        EXPECT(gbc.pc(), 0x9f8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f8e), 0xa5);
        // A5 02FF
        gbc.setState(0xaf86, 0x3b98, 0x4c60, 0x48f0, 0x9ccd, 0x46ac, 0x1, 0x0);
        gbc.writeMem(0xaf86, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x3b98);
        EXPECT(gbc.pc(), 0xaf87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf86), 0xa5);
        // A5 0300
        gbc.setState(0x643f, 0x2eb0, 0x1c40, 0xaeee, 0x876c, 0x4229, 0x0, 0x0);
        gbc.writeMem(0x643f, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x2eb0);
        EXPECT(gbc.pc(), 0x6440);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0301
        gbc.setState(0xcb8e, 0x498d, 0xd380, 0xb4d9, 0x404, 0x7f08, 0x0, 0x0);
        gbc.writeMem(0xcb8e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x498d);
        EXPECT(gbc.pc(), 0xcb8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb8e), 0xa5);
        // A5 0302
        gbc.setState(0x57ba, 0x8b5a, 0x6590, 0x3f95, 0x1d08, 0x3653, 0x1, 0x0);
        gbc.writeMem(0x57ba, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x8b5a);
        EXPECT(gbc.pc(), 0x57bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0303
        gbc.setState(0x9a14, 0xbd3, 0xc0b0, 0x232f, 0x9e60, 0x663e, 0x0, 0x1);
        gbc.writeMem(0x9a14, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xbd3);
        EXPECT(gbc.pc(), 0x9a15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a14), 0xa5);
        // A5 0304
        gbc.setState(0x1d92, 0xb37f, 0x6c00, 0x5bb0, 0xb6be, 0xe237, 0x1, 0x1);
        gbc.writeMem(0x1d92, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xb37f);
        EXPECT(gbc.pc(), 0x1d93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0305
        gbc.setState(0x2e92, 0x484, 0x1540, 0x91b4, 0x534e, 0x57, 0x1, 0x1);
        gbc.writeMem(0x2e92, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x484);
        EXPECT(gbc.pc(), 0x2e93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0306
        gbc.setState(0xcab6, 0x9906, 0x1900, 0xc960, 0x5d05, 0x281f, 0x1, 0x0);
        gbc.writeMem(0xcab6, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x9906);
        EXPECT(gbc.pc(), 0xcab7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcab6), 0xa5);
        // A5 0307
        gbc.setState(0xbb76, 0xf513, 0x95c0, 0x5fb, 0x69e0, 0x2b77, 0x1, 0x1);
        gbc.writeMem(0xbb76, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xf513);
        EXPECT(gbc.pc(), 0xbb77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb76), 0xa5);
        // A5 0308
        gbc.setState(0x4ff8, 0xeb82, 0xf8b0, 0x1a47, 0xb50f, 0xb355, 0x0, 0x1);
        gbc.writeMem(0x4ff8, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xeb82);
        EXPECT(gbc.pc(), 0x4ff9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0309
        gbc.setState(0x891e, 0xe281, 0x47d0, 0xc981, 0x1463, 0xa1a3, 0x1, 0x1);
        gbc.writeMem(0x891e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xe281);
        EXPECT(gbc.pc(), 0x891f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x891e), 0xa5);
        // A5 030C
        gbc.setState(0x45c8, 0x9dba, 0xc980, 0x4331, 0xabb4, 0x6624, 0x1, 0x0);
        gbc.writeMem(0x45c8, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x9dba);
        EXPECT(gbc.pc(), 0x45c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 030D
        gbc.setState(0x5e0f, 0x72a, 0x4a90, 0xe6e6, 0xcc48, 0xe017, 0x1, 0x1);
        gbc.writeMem(0x5e0f, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x72a);
        EXPECT(gbc.pc(), 0x5e10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 030E
        gbc.setState(0xa454, 0xb0d2, 0x4fe0, 0x80d0, 0x549d, 0xdf1e, 0x1, 0x1);
        gbc.writeMem(0xa454, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xb0d2);
        EXPECT(gbc.pc(), 0xa455);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa454), 0xa5);
        // A5 030F
        gbc.setState(0x86e1, 0x281, 0x2210, 0xdd27, 0x15d, 0x9619, 0x0, 0x0);
        gbc.writeMem(0x86e1, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x281);
        EXPECT(gbc.pc(), 0x86e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86e1), 0xa5);
        // A5 0310
        gbc.setState(0xb34f, 0x1bbf, 0xf00, 0x28b8, 0x37b2, 0xa724, 0x1, 0x1);
        gbc.writeMem(0xb34f, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x1bbf);
        EXPECT(gbc.pc(), 0xb350);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb34f), 0xa5);
        // A5 0312
        gbc.setState(0xc70a, 0x359f, 0x5500, 0x81d9, 0xef1e, 0x698d, 0x0, 0x0);
        gbc.writeMem(0xc70a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x359f);
        EXPECT(gbc.pc(), 0xc70b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc70a), 0xa5);
        // A5 0313
        gbc.setState(0xbbcc, 0xc032, 0x3020, 0xb4a3, 0x4f87, 0x939b, 0x0, 0x1);
        gbc.writeMem(0xbbcc, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xc032);
        EXPECT(gbc.pc(), 0xbbcd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbcc), 0xa5);
        // A5 0314
        gbc.setState(0xde6a, 0x5ee9, 0x2260, 0xf388, 0xe2e3, 0xc8ef, 0x0, 0x0);
        gbc.writeMem(0xde6a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x5ee9);
        EXPECT(gbc.pc(), 0xde6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde6a), 0xa5);
        // A5 0315
        gbc.setState(0x721e, 0x56e, 0xfca0, 0xdf8, 0x6a3a, 0x71d2, 0x1, 0x0);
        gbc.writeMem(0x721e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x56e);
        EXPECT(gbc.pc(), 0x721f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0316
        gbc.setState(0x33fb, 0x4248, 0x47a0, 0x4565, 0x5c0d, 0xa4a0, 0x1, 0x0);
        gbc.writeMem(0x33fb, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x4248);
        EXPECT(gbc.pc(), 0x33fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0318
        gbc.setState(0x40ab, 0x3c, 0x48d0, 0x3916, 0xf3fc, 0xe93a, 0x0, 0x0);
        gbc.writeMem(0x40ab, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x3c);
        EXPECT(gbc.pc(), 0x40ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0319
        gbc.setState(0xd30, 0x7b11, 0xcc90, 0x5950, 0x5f06, 0xc791, 0x0, 0x0);
        gbc.writeMem(0xd30, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x7b11);
        EXPECT(gbc.pc(), 0xd31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 031A
        gbc.setState(0x29e2, 0x924c, 0x2550, 0x598e, 0xde1e, 0xba6e, 0x1, 0x0);
        gbc.writeMem(0x29e2, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x924c);
        EXPECT(gbc.pc(), 0x29e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 031B
        gbc.setState(0xa4dd, 0xd244, 0x4320, 0x3ac2, 0x827e, 0x6512, 0x0, 0x1);
        gbc.writeMem(0xa4dd, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xd244);
        EXPECT(gbc.pc(), 0xa4de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4dd), 0xa5);
        // A5 031C
        gbc.setState(0x7b61, 0xddcb, 0xb3a0, 0xfc5, 0x19f8, 0x48d4, 0x0, 0x1);
        gbc.writeMem(0x7b61, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xddcb);
        EXPECT(gbc.pc(), 0x7b62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 031D
        gbc.setState(0x67e6, 0x3961, 0xe7b0, 0x2513, 0xd04b, 0x6e27, 0x1, 0x1);
        gbc.writeMem(0x67e6, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x3961);
        EXPECT(gbc.pc(), 0x67e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 031E
        gbc.setState(0x25e8, 0xf39, 0xdbd0, 0x2df7, 0xce57, 0x2764, 0x1, 0x0);
        gbc.writeMem(0x25e8, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xf39);
        EXPECT(gbc.pc(), 0x25e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 031F
        gbc.setState(0x5466, 0x4530, 0x9530, 0x32fe, 0x43c9, 0x6e62, 0x0, 0x0);
        gbc.writeMem(0x5466, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x4530);
        EXPECT(gbc.pc(), 0x5467);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0320
        gbc.setState(0xb7c0, 0xec9, 0x2750, 0x87d6, 0x406f, 0x950e, 0x0, 0x1);
        gbc.writeMem(0xb7c0, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xec9);
        EXPECT(gbc.pc(), 0xb7c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7c0), 0xa5);
        // A5 0321
        gbc.setState(0xeea0, 0x8028, 0xc6c0, 0xd31f, 0x2d7b, 0x9526, 0x0, 0x1);
        gbc.writeMem(0xeea0, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x8028);
        EXPECT(gbc.pc(), 0xeea1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeea0), 0xa5);
        // A5 0322
        gbc.setState(0x9bbd, 0x98b5, 0xd570, 0x2c5c, 0x8cbe, 0xb234, 0x1, 0x1);
        gbc.writeMem(0x9bbd, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x98b5);
        EXPECT(gbc.pc(), 0x9bbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bbd), 0xa5);
        // A5 0323
        gbc.setState(0x70ed, 0x27c8, 0x5310, 0x1691, 0x6e6b, 0xd684, 0x1, 0x1);
        gbc.writeMem(0x70ed, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x27c8);
        EXPECT(gbc.pc(), 0x70ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0325
        gbc.setState(0x2feb, 0x2cd, 0xd310, 0xeb75, 0x9715, 0xf96d, 0x1, 0x0);
        gbc.writeMem(0x2feb, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x2cd);
        EXPECT(gbc.pc(), 0x2fec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0326
        gbc.setState(0xa3c4, 0x2807, 0x6dc0, 0xcfa1, 0x970d, 0x8790, 0x0, 0x1);
        gbc.writeMem(0xa3c4, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x2807);
        EXPECT(gbc.pc(), 0xa3c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3c4), 0xa5);
        // A5 0327
        gbc.setState(0x4121, 0x53b7, 0xd10, 0x862c, 0x452e, 0xbcee, 0x0, 0x1);
        gbc.writeMem(0x4121, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x53b7);
        EXPECT(gbc.pc(), 0x4122);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0328
        gbc.setState(0x9573, 0x946a, 0xf0e0, 0x310c, 0xb29d, 0x18e8, 0x0, 0x1);
        gbc.writeMem(0x9573, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x946a);
        EXPECT(gbc.pc(), 0x9574);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9573), 0xa5);
        // A5 0329
        gbc.setState(0x8bd3, 0x9f3a, 0x94d0, 0xfd48, 0x85fe, 0x9ad1, 0x0, 0x1);
        gbc.writeMem(0x8bd3, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x9f3a);
        EXPECT(gbc.pc(), 0x8bd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bd3), 0xa5);
        // A5 032A
        gbc.setState(0xdc10, 0xe69a, 0xf850, 0x6f69, 0xd22f, 0xd4d6, 0x1, 0x0);
        gbc.writeMem(0xdc10, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xe69a);
        EXPECT(gbc.pc(), 0xdc11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc10), 0xa5);
        // A5 032B
        gbc.setState(0x8ed8, 0x63a3, 0x3e50, 0x416c, 0xf47a, 0xb6c9, 0x1, 0x1);
        gbc.writeMem(0x8ed8, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x63a3);
        EXPECT(gbc.pc(), 0x8ed9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ed8), 0xa5);
        // A5 032C
        gbc.setState(0x25ac, 0x6ac3, 0xc3f0, 0xfbfd, 0x58ac, 0xf750, 0x1, 0x0);
        gbc.writeMem(0x25ac, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x6ac3);
        EXPECT(gbc.pc(), 0x25ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 032D
        gbc.setState(0x8e65, 0x2c50, 0xeba0, 0x1224, 0x310b, 0xebf9, 0x0, 0x0);
        gbc.writeMem(0x8e65, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x2c50);
        EXPECT(gbc.pc(), 0x8e66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e65), 0xa5);
        // A5 032F
        gbc.setState(0x5b18, 0x6cfb, 0xe690, 0xb6c8, 0x4a2d, 0x8413, 0x0, 0x0);
        gbc.writeMem(0x5b18, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x6cfb);
        EXPECT(gbc.pc(), 0x5b19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0330
        gbc.setState(0x16fc, 0xe23e, 0xb240, 0xa7ef, 0x4d53, 0xbbf2, 0x1, 0x0);
        gbc.writeMem(0x16fc, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xe23e);
        EXPECT(gbc.pc(), 0x16fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0331
        gbc.setState(0xef39, 0x3f8b, 0xc5c0, 0xa2b5, 0x79fb, 0xe233, 0x0, 0x0);
        gbc.writeMem(0xef39, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x3f8b);
        EXPECT(gbc.pc(), 0xef3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef39), 0xa5);
        // A5 0332
        gbc.setState(0xd6c6, 0xae81, 0xa580, 0xf396, 0x6027, 0xa227, 0x0, 0x0);
        gbc.writeMem(0xd6c6, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xae81);
        EXPECT(gbc.pc(), 0xd6c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6c6), 0xa5);
        // A5 0333
        gbc.setState(0x53c8, 0x674d, 0x5780, 0xf310, 0xc9c3, 0xb24d, 0x1, 0x1);
        gbc.writeMem(0x53c8, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x674d);
        EXPECT(gbc.pc(), 0x53c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0334
        gbc.setState(0x699, 0x878b, 0xdce0, 0xc453, 0xbd6a, 0x4ade, 0x0, 0x0);
        gbc.writeMem(0x699, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x878b);
        EXPECT(gbc.pc(), 0x69a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0335
        gbc.setState(0x31b2, 0xf0b0, 0x3320, 0x8a27, 0xafa9, 0x7e19, 0x0, 0x0);
        gbc.writeMem(0x31b2, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xf0b0);
        EXPECT(gbc.pc(), 0x31b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0336
        gbc.setState(0x42bf, 0x1e4d, 0x6f0, 0x9238, 0x71b4, 0x2322, 0x0, 0x1);
        gbc.writeMem(0x42bf, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x1e4d);
        EXPECT(gbc.pc(), 0x42c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0337
        gbc.setState(0x9d9d, 0x890, 0xee30, 0x901a, 0xc317, 0x1f3b, 0x0, 0x1);
        gbc.writeMem(0x9d9d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x890);
        EXPECT(gbc.pc(), 0x9d9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d9d), 0xa5);
        // A5 0338
        gbc.setState(0x78e7, 0x869b, 0x9c10, 0xb9f0, 0x4eed, 0x9b1d, 0x0, 0x1);
        gbc.writeMem(0x78e7, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x869b);
        EXPECT(gbc.pc(), 0x78e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0339
        gbc.setState(0xd567, 0x8721, 0xb50, 0xe3aa, 0x9abd, 0x9ab9, 0x0, 0x0);
        gbc.writeMem(0xd567, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x8721);
        EXPECT(gbc.pc(), 0xd568);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd567), 0xa5);
        // A5 033A
        gbc.setState(0x5fd0, 0xea53, 0x4750, 0x79a0, 0x4027, 0x54a3, 0x0, 0x0);
        gbc.writeMem(0x5fd0, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xea53);
        EXPECT(gbc.pc(), 0x5fd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 033B
        gbc.setState(0xc297, 0xb8da, 0x9650, 0xaf5c, 0x4943, 0x4cbe, 0x0, 0x0);
        gbc.writeMem(0xc297, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xb8da);
        EXPECT(gbc.pc(), 0xc298);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc297), 0xa5);
        // A5 033C
        gbc.setState(0xa963, 0x673, 0xe1e0, 0x8280, 0x7875, 0x23cf, 0x0, 0x0);
        gbc.writeMem(0xa963, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x673);
        EXPECT(gbc.pc(), 0xa964);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa963), 0xa5);
        // A5 033D
        gbc.setState(0xaff6, 0x39ed, 0x9ae0, 0x3672, 0x6e66, 0x5cfb, 0x0, 0x0);
        gbc.writeMem(0xaff6, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x39ed);
        EXPECT(gbc.pc(), 0xaff7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaff6), 0xa5);
        // A5 033E
        gbc.setState(0xb518, 0x973, 0xd360, 0xa14f, 0x5138, 0x53fe, 0x1, 0x1);
        gbc.writeMem(0xb518, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x973);
        EXPECT(gbc.pc(), 0xb519);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb518), 0xa5);
        // A5 033F
        gbc.setState(0x894f, 0x6b66, 0xfd70, 0xa2f, 0x8cad, 0xe672, 0x0, 0x1);
        gbc.writeMem(0x894f, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x6b66);
        EXPECT(gbc.pc(), 0x8950);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x894f), 0xa5);
        // A5 0340
        gbc.setState(0x7e0e, 0x95f3, 0x2770, 0xcc69, 0xe438, 0x15af, 0x1, 0x0);
        gbc.writeMem(0x7e0e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x95f3);
        EXPECT(gbc.pc(), 0x7e0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0341
        gbc.setState(0x1e77, 0xf486, 0x50b0, 0x28eb, 0xa6cd, 0x4fb5, 0x0, 0x1);
        gbc.writeMem(0x1e77, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xf486);
        EXPECT(gbc.pc(), 0x1e78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0342
        gbc.setState(0x78c5, 0x5a8b, 0x7d00, 0xa784, 0x24f9, 0x541d, 0x1, 0x0);
        gbc.writeMem(0x78c5, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x5a8b);
        EXPECT(gbc.pc(), 0x78c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0343
        gbc.setState(0x807f, 0x6c2, 0x9660, 0xdcc1, 0xc1cc, 0xa21d, 0x1, 0x0);
        gbc.writeMem(0x807f, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x6c2);
        EXPECT(gbc.pc(), 0x8080);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x807f), 0xa5);
        // A5 0344
        gbc.setState(0x3c26, 0x80ba, 0x8540, 0xce42, 0xb7ed, 0xdf89, 0x1, 0x0);
        gbc.writeMem(0x3c26, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x80ba);
        EXPECT(gbc.pc(), 0x3c27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0345
        gbc.setState(0xc6c4, 0xacdf, 0x8df0, 0xbe11, 0x60bb, 0xb4db, 0x1, 0x0);
        gbc.writeMem(0xc6c4, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xacdf);
        EXPECT(gbc.pc(), 0xc6c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6c4), 0xa5);
        // A5 0346
        gbc.setState(0xb1a4, 0xf21e, 0xc200, 0x882f, 0xb258, 0x5fd1, 0x1, 0x0);
        gbc.writeMem(0xb1a4, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xf21e);
        EXPECT(gbc.pc(), 0xb1a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1a4), 0xa5);
        // A5 0347
        gbc.setState(0x86f4, 0x2560, 0x83a0, 0x851a, 0x8123, 0xf7cb, 0x0, 0x0);
        gbc.writeMem(0x86f4, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x2560);
        EXPECT(gbc.pc(), 0x86f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86f4), 0xa5);
        // A5 0349
        gbc.setState(0x3c9f, 0x5cf3, 0x2d50, 0x713f, 0xb099, 0x10b6, 0x1, 0x0);
        gbc.writeMem(0x3c9f, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x5cf3);
        EXPECT(gbc.pc(), 0x3ca0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 034A
        gbc.setState(0x7713, 0x3285, 0x3c0, 0xad34, 0x70a0, 0xf3c, 0x1, 0x1);
        gbc.writeMem(0x7713, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x3285);
        EXPECT(gbc.pc(), 0x7714);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 034B
        gbc.setState(0xde50, 0x4b57, 0x8cb0, 0xe655, 0x9cf5, 0x139f, 0x1, 0x1);
        gbc.writeMem(0xde50, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x4b57);
        EXPECT(gbc.pc(), 0xde51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde50), 0xa5);
        // A5 034C
        gbc.setState(0x1274, 0x244c, 0x9910, 0xdb2c, 0xf4cf, 0xc18c, 0x0, 0x1);
        gbc.writeMem(0x1274, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x244c);
        EXPECT(gbc.pc(), 0x1275);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 034D
        gbc.setState(0xaccb, 0x4e28, 0xd1d0, 0xf7a3, 0x6eb1, 0x361f, 0x0, 0x0);
        gbc.writeMem(0xaccb, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x4e28);
        EXPECT(gbc.pc(), 0xaccc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaccb), 0xa5);
        // A5 034E
        gbc.setState(0xce51, 0xabc5, 0x2130, 0x8130, 0xa6dd, 0x79c9, 0x0, 0x1);
        gbc.writeMem(0xce51, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xabc5);
        EXPECT(gbc.pc(), 0xce52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce51), 0xa5);
        // A5 034F
        gbc.setState(0xd7aa, 0x1c79, 0x8400, 0xcbcf, 0xef8, 0x11b4, 0x0, 0x0);
        gbc.writeMem(0xd7aa, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x1c79);
        EXPECT(gbc.pc(), 0xd7ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7aa), 0xa5);
        // A5 0351
        gbc.setState(0xceed, 0xd79, 0x9040, 0x451, 0x2491, 0xb2df, 0x1, 0x1);
        gbc.writeMem(0xceed, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xd79);
        EXPECT(gbc.pc(), 0xceee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xceed), 0xa5);
        // A5 0352
        gbc.setState(0x7fd0, 0x2669, 0x800, 0x6dad, 0x4eea, 0x359b, 0x0, 0x0);
        gbc.writeMem(0x7fd0, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x2669);
        EXPECT(gbc.pc(), 0x7fd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0353
        gbc.setState(0x170, 0x84e6, 0x9e20, 0x72f7, 0x314b, 0x254, 0x1, 0x0);
        gbc.writeMem(0x170, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x84e6);
        EXPECT(gbc.pc(), 0x171);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0354
        gbc.setState(0xdd6f, 0x7aea, 0x9bd0, 0xe0ab, 0x6e8f, 0x136b, 0x0, 0x1);
        gbc.writeMem(0xdd6f, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x7aea);
        EXPECT(gbc.pc(), 0xdd70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd6f), 0xa5);
        // A5 0355
        gbc.setState(0x5441, 0x9139, 0x6c90, 0x8f51, 0xf054, 0x7b1b, 0x1, 0x1);
        gbc.writeMem(0x5441, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x9139);
        EXPECT(gbc.pc(), 0x5442);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0357
        gbc.setState(0x6dd3, 0xed56, 0x1e20, 0x8036, 0x3cc4, 0x21d9, 0x0, 0x0);
        gbc.writeMem(0x6dd3, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xed56);
        EXPECT(gbc.pc(), 0x6dd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0358
        gbc.setState(0xc62d, 0xe08d, 0xef60, 0xb20f, 0xc7b7, 0x969e, 0x1, 0x1);
        gbc.writeMem(0xc62d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xe08d);
        EXPECT(gbc.pc(), 0xc62e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc62d), 0xa5);
        // A5 0359
        gbc.setState(0xe567, 0xc529, 0x1c80, 0xc105, 0xdc8e, 0x3272, 0x1, 0x1);
        gbc.writeMem(0xe567, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xc529);
        EXPECT(gbc.pc(), 0xe568);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe567), 0xa5);
        // A5 035A
        gbc.setState(0x70b6, 0xc89c, 0x9a80, 0xf04, 0x3e3f, 0xeb73, 0x1, 0x0);
        gbc.writeMem(0x70b6, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xc89c);
        EXPECT(gbc.pc(), 0x70b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 035B
        gbc.setState(0x1aaa, 0xbfcf, 0xc570, 0x6731, 0x66d9, 0x9bff, 0x0, 0x0);
        gbc.writeMem(0x1aaa, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xbfcf);
        EXPECT(gbc.pc(), 0x1aab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 035C
        gbc.setState(0x55dd, 0xcd2, 0x7c90, 0x953d, 0x65cc, 0x2086, 0x0, 0x1);
        gbc.writeMem(0x55dd, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xcd2);
        EXPECT(gbc.pc(), 0x55de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 035D
        gbc.setState(0xd4e8, 0x856b, 0x44c0, 0xac41, 0x7c34, 0xed7, 0x1, 0x1);
        gbc.writeMem(0xd4e8, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x856b);
        EXPECT(gbc.pc(), 0xd4e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4e8), 0xa5);
        // A5 035E
        gbc.setState(0xc70c, 0x522a, 0x9790, 0x1c97, 0x4e28, 0xa723, 0x0, 0x1);
        gbc.writeMem(0xc70c, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x522a);
        EXPECT(gbc.pc(), 0xc70d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc70c), 0xa5);
        // A5 035F
        gbc.setState(0x7c36, 0x2e8f, 0xc9b0, 0x2f0c, 0x519b, 0xd4da, 0x1, 0x0);
        gbc.writeMem(0x7c36, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x2e8f);
        EXPECT(gbc.pc(), 0x7c37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0360
        gbc.setState(0xb76b, 0xaca, 0xdf30, 0x9692, 0x4ac3, 0x7f03, 0x0, 0x1);
        gbc.writeMem(0xb76b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xaca);
        EXPECT(gbc.pc(), 0xb76c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb76b), 0xa5);
        // A5 0361
        gbc.setState(0x76c7, 0xf240, 0x9130, 0x91d, 0x5d97, 0x3796, 0x0, 0x0);
        gbc.writeMem(0x76c7, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xf240);
        EXPECT(gbc.pc(), 0x76c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0362
        gbc.setState(0x87b1, 0xe413, 0x5a70, 0x7832, 0x335d, 0x83f3, 0x0, 0x1);
        gbc.writeMem(0x87b1, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xe413);
        EXPECT(gbc.pc(), 0x87b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87b1), 0xa5);
        // A5 0363
        gbc.setState(0xb817, 0x86ea, 0x3b20, 0xb112, 0x6ec0, 0xc295, 0x0, 0x0);
        gbc.writeMem(0xb817, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x86ea);
        EXPECT(gbc.pc(), 0xb818);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb817), 0xa5);
        // A5 0364
        gbc.setState(0x888d, 0xec10, 0x3bd0, 0x36e7, 0x4d78, 0xd559, 0x1, 0x1);
        gbc.writeMem(0x888d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xec10);
        EXPECT(gbc.pc(), 0x888e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x888d), 0xa5);
        // A5 0365
        gbc.setState(0x3b62, 0x4d2a, 0x1340, 0xd4c7, 0xb278, 0xdb0a, 0x1, 0x0);
        gbc.writeMem(0x3b62, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x4d2a);
        EXPECT(gbc.pc(), 0x3b63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0366
        gbc.setState(0x16dd, 0x6699, 0x690, 0x9e8d, 0x1557, 0xcc6e, 0x0, 0x1);
        gbc.writeMem(0x16dd, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x6699);
        EXPECT(gbc.pc(), 0x16de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0367
        gbc.setState(0x1fc7, 0x81ef, 0xa640, 0x2b7e, 0x6ff0, 0xc0d7, 0x1, 0x1);
        gbc.writeMem(0x1fc7, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x81ef);
        EXPECT(gbc.pc(), 0x1fc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0368
        gbc.setState(0x9fa6, 0x48c0, 0xe6e0, 0x25e2, 0xbb4b, 0xe25d, 0x1, 0x0);
        gbc.writeMem(0x9fa6, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x48c0);
        EXPECT(gbc.pc(), 0x9fa7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fa6), 0xa5);
        // A5 036A
        gbc.setState(0x5bcb, 0x4a2f, 0xb890, 0xd0d0, 0xa3b6, 0xd476, 0x0, 0x0);
        gbc.writeMem(0x5bcb, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x4a2f);
        EXPECT(gbc.pc(), 0x5bcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 036B
        gbc.setState(0x1564, 0xeffd, 0x4390, 0xb731, 0x5771, 0x51b0, 0x0, 0x1);
        gbc.writeMem(0x1564, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xeffd);
        EXPECT(gbc.pc(), 0x1565);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 036C
        gbc.setState(0x1e22, 0x699b, 0x8990, 0x51c6, 0xee3b, 0x5d14, 0x0, 0x1);
        gbc.writeMem(0x1e22, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x699b);
        EXPECT(gbc.pc(), 0x1e23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 036D
        gbc.setState(0x1297, 0xde0d, 0xa8d0, 0x7286, 0x8361, 0xbdea, 0x0, 0x1);
        gbc.writeMem(0x1297, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xde0d);
        EXPECT(gbc.pc(), 0x1298);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 036E
        gbc.setState(0x2965, 0xc9ff, 0x5320, 0xd4e3, 0x18d7, 0xeb67, 0x0, 0x0);
        gbc.writeMem(0x2965, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xc9ff);
        EXPECT(gbc.pc(), 0x2966);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 036F
        gbc.setState(0x6fcc, 0xcc7e, 0xa650, 0x9931, 0x5bb0, 0x1e7c, 0x0, 0x0);
        gbc.writeMem(0x6fcc, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xcc7e);
        EXPECT(gbc.pc(), 0x6fcd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0370
        gbc.setState(0xd3d9, 0x2034, 0x9e10, 0x3a, 0x44a6, 0x6466, 0x0, 0x1);
        gbc.writeMem(0xd3d9, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x2034);
        EXPECT(gbc.pc(), 0xd3da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3d9), 0xa5);
        // A5 0371
        gbc.setState(0xef13, 0x3f3, 0xf20, 0x7c1c, 0x20f8, 0xb24d, 0x1, 0x0);
        gbc.writeMem(0xef13, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x3f3);
        EXPECT(gbc.pc(), 0xef14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef13), 0xa5);
        // A5 0372
        gbc.setState(0x5c13, 0xa96b, 0x8110, 0x585, 0x5843, 0xb49b, 0x0, 0x0);
        gbc.writeMem(0x5c13, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xa96b);
        EXPECT(gbc.pc(), 0x5c14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0373
        gbc.setState(0x9fb0, 0xb893, 0x1a30, 0xbc06, 0xb87f, 0xfd34, 0x1, 0x0);
        gbc.writeMem(0x9fb0, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xb893);
        EXPECT(gbc.pc(), 0x9fb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fb0), 0xa5);
        // A5 0374
        gbc.setState(0xb790, 0x2a65, 0x4910, 0x259a, 0x7996, 0x7d1, 0x0, 0x1);
        gbc.writeMem(0xb790, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x2a65);
        EXPECT(gbc.pc(), 0xb791);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb790), 0xa5);
        // A5 0375
        gbc.setState(0xd74a, 0x2667, 0x7fd0, 0x8c52, 0xdb7b, 0x5cfa, 0x1, 0x1);
        gbc.writeMem(0xd74a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x2667);
        EXPECT(gbc.pc(), 0xd74b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd74a), 0xa5);
        // A5 0376
        gbc.setState(0xbea5, 0xafff, 0xd5b0, 0xba4e, 0xfeec, 0xa4c9, 0x1, 0x1);
        gbc.writeMem(0xbea5, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xafff);
        EXPECT(gbc.pc(), 0xbea6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbea5), 0xa5);
        // A5 0377
        gbc.setState(0xa538, 0xb548, 0x8be0, 0x4e4c, 0xb545, 0xa584, 0x0, 0x1);
        gbc.writeMem(0xa538, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xb548);
        EXPECT(gbc.pc(), 0xa539);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa538), 0xa5);
        // A5 0378
        gbc.setState(0x3d48, 0x1caa, 0x10c0, 0x2b37, 0xbd2d, 0xe343, 0x1, 0x0);
        gbc.writeMem(0x3d48, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x1caa);
        EXPECT(gbc.pc(), 0x3d49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0379
        gbc.setState(0x4bba, 0x36e1, 0xa860, 0x462d, 0xd6a4, 0xd8ba, 0x0, 0x0);
        gbc.writeMem(0x4bba, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x36e1);
        EXPECT(gbc.pc(), 0x4bbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 037A
        gbc.setState(0x81c0, 0x4e23, 0x6ce0, 0xab3a, 0xe079, 0x8c30, 0x1, 0x0);
        gbc.writeMem(0x81c0, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x4e23);
        EXPECT(gbc.pc(), 0x81c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81c0), 0xa5);
        // A5 037B
        gbc.setState(0x63e5, 0xede9, 0xcd20, 0xf19, 0x3b3d, 0x7389, 0x1, 0x1);
        gbc.writeMem(0x63e5, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xede9);
        EXPECT(gbc.pc(), 0x63e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 037C
        gbc.setState(0xcfe, 0x95b4, 0xcf80, 0xe5d9, 0xd3d5, 0x6771, 0x1, 0x0);
        gbc.writeMem(0xcfe, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x95b4);
        EXPECT(gbc.pc(), 0xcff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 037D
        gbc.setState(0x6b1f, 0x2ef1, 0xb2d0, 0x4a92, 0x382d, 0x913c, 0x0, 0x0);
        gbc.writeMem(0x6b1f, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x2ef1);
        EXPECT(gbc.pc(), 0x6b20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 037E
        gbc.setState(0xd9df, 0x1be9, 0xda30, 0x150f, 0x1c13, 0x118f, 0x1, 0x1);
        gbc.writeMem(0xd9df, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x1be9);
        EXPECT(gbc.pc(), 0xd9e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9df), 0xa5);
        // A5 037F
        gbc.setState(0xdcf2, 0x246c, 0x6b40, 0x3cd9, 0xbd3d, 0xf840, 0x0, 0x0);
        gbc.writeMem(0xdcf2, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x246c);
        EXPECT(gbc.pc(), 0xdcf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcf2), 0xa5);
        // A5 0380
        gbc.setState(0xe70, 0x8e76, 0x9bc0, 0x532e, 0xa31a, 0xbedc, 0x0, 0x1);
        gbc.writeMem(0xe70, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x8e76);
        EXPECT(gbc.pc(), 0xe71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0381
        gbc.setState(0x3b00, 0xb39e, 0xe610, 0xd585, 0x21b1, 0x268d, 0x0, 0x0);
        gbc.writeMem(0x3b00, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xb39e);
        EXPECT(gbc.pc(), 0x3b01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0382
        gbc.setState(0x8938, 0x7f5e, 0x3830, 0x1c53, 0x6a10, 0xe4da, 0x0, 0x0);
        gbc.writeMem(0x8938, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x7f5e);
        EXPECT(gbc.pc(), 0x8939);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8938), 0xa5);
        // A5 0383
        gbc.setState(0xce11, 0x2f8d, 0xa750, 0xa3a6, 0xe81e, 0xac0f, 0x1, 0x1);
        gbc.writeMem(0xce11, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x2f8d);
        EXPECT(gbc.pc(), 0xce12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce11), 0xa5);
        // A5 0384
        gbc.setState(0x14b, 0x2e59, 0xf6b0, 0x502a, 0x4690, 0x8b4e, 0x1, 0x0);
        gbc.writeMem(0x14b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x2e59);
        EXPECT(gbc.pc(), 0x14c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0385
        gbc.setState(0x1d0, 0x471, 0xc630, 0x1199, 0xe35c, 0x2def, 0x0, 0x0);
        gbc.writeMem(0x1d0, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x471);
        EXPECT(gbc.pc(), 0x1d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0386
        gbc.setState(0x47f, 0xd0c3, 0x36f0, 0x44c9, 0x41b1, 0x89a6, 0x1, 0x1);
        gbc.writeMem(0x47f, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xd0c3);
        EXPECT(gbc.pc(), 0x480);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0387
        gbc.setState(0xd4c, 0xc8d5, 0x9ff0, 0xe088, 0x4772, 0xc2d, 0x0, 0x0);
        gbc.writeMem(0xd4c, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xc8d5);
        EXPECT(gbc.pc(), 0xd4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0388
        gbc.setState(0xc2ad, 0x328f, 0x9fe0, 0xa543, 0x9ddd, 0x35de, 0x0, 0x0);
        gbc.writeMem(0xc2ad, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x328f);
        EXPECT(gbc.pc(), 0xc2ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2ad), 0xa5);
        // A5 0389
        gbc.setState(0x2a75, 0x72fc, 0x6de0, 0x3234, 0x4c6b, 0xdfca, 0x0, 0x0);
        gbc.writeMem(0x2a75, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x72fc);
        EXPECT(gbc.pc(), 0x2a76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 038A
        gbc.setState(0xb9d, 0xd339, 0xdaf0, 0xb576, 0x16b5, 0xb06a, 0x0, 0x0);
        gbc.writeMem(0xb9d, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xd339);
        EXPECT(gbc.pc(), 0xb9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 038B
        gbc.setState(0xb7e4, 0x5bc4, 0xb730, 0xcb21, 0xd3a8, 0xc5dc, 0x0, 0x1);
        gbc.writeMem(0xb7e4, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x5bc4);
        EXPECT(gbc.pc(), 0xb7e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7e4), 0xa5);
        // A5 038C
        gbc.setState(0xbe82, 0xdcb1, 0x3730, 0x3b9a, 0x223a, 0x1123, 0x1, 0x0);
        gbc.writeMem(0xbe82, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xdcb1);
        EXPECT(gbc.pc(), 0xbe83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe82), 0xa5);
        // A5 038D
        gbc.setState(0x35b4, 0x7ce, 0xf790, 0xdd1a, 0x74cd, 0x8384, 0x0, 0x0);
        gbc.writeMem(0x35b4, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x7ce);
        EXPECT(gbc.pc(), 0x35b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 038E
        gbc.setState(0xe294, 0xdd49, 0x30b0, 0x9467, 0x13cb, 0x3759, 0x0, 0x1);
        gbc.writeMem(0xe294, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xdd49);
        EXPECT(gbc.pc(), 0xe295);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe294), 0xa5);
        // A5 038F
        gbc.setState(0xb515, 0xfb71, 0xd030, 0x7d2a, 0x20f5, 0x91ba, 0x0, 0x0);
        gbc.writeMem(0xb515, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xfb71);
        EXPECT(gbc.pc(), 0xb516);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb515), 0xa5);
        // A5 0390
        gbc.setState(0x1979, 0x8d5d, 0xb040, 0xbb7b, 0x4986, 0xfa20, 0x1, 0x0);
        gbc.writeMem(0x1979, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x8d5d);
        EXPECT(gbc.pc(), 0x197a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0392
        gbc.setState(0xb8ab, 0xd90f, 0xce70, 0xf972, 0x13f1, 0xbe51, 0x1, 0x1);
        gbc.writeMem(0xb8ab, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xd90f);
        EXPECT(gbc.pc(), 0xb8ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8ab), 0xa5);
        // A5 0393
        gbc.setState(0x5ef5, 0x17c6, 0x5b30, 0x25e7, 0x2a15, 0xf53f, 0x1, 0x1);
        gbc.writeMem(0x5ef5, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x17c6);
        EXPECT(gbc.pc(), 0x5ef6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0394
        gbc.setState(0xc6c3, 0x8dba, 0xe020, 0xe7cf, 0x35c8, 0x67d, 0x1, 0x1);
        gbc.writeMem(0xc6c3, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x8dba);
        EXPECT(gbc.pc(), 0xc6c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6c3), 0xa5);
        // A5 0395
        gbc.setState(0xd77e, 0xfc1a, 0xbe0, 0x5b66, 0x137e, 0x7969, 0x0, 0x1);
        gbc.writeMem(0xd77e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xfc1a);
        EXPECT(gbc.pc(), 0xd77f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd77e), 0xa5);
        // A5 0396
        gbc.setState(0xcafb, 0x3156, 0x3140, 0x7d57, 0xbde4, 0x4c35, 0x1, 0x1);
        gbc.writeMem(0xcafb, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x3156);
        EXPECT(gbc.pc(), 0xcafc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcafb), 0xa5);
        // A5 0397
        gbc.setState(0x5ff5, 0xbd7f, 0xb5b0, 0xf93f, 0xb7bd, 0x8102, 0x1, 0x0);
        gbc.writeMem(0x5ff5, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xbd7f);
        EXPECT(gbc.pc(), 0x5ff6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0398
        gbc.setState(0x665c, 0x3873, 0x2180, 0x4d4d, 0x2670, 0x768e, 0x1, 0x1);
        gbc.writeMem(0x665c, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x3873);
        EXPECT(gbc.pc(), 0x665d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 0399
        gbc.setState(0x7c66, 0x7096, 0xef90, 0xa77b, 0xad51, 0xae31, 0x0, 0x0);
        gbc.writeMem(0x7c66, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x7096);
        EXPECT(gbc.pc(), 0x7c67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 039A
        gbc.setState(0xa603, 0x4a0c, 0xd370, 0x4343, 0xc5c8, 0x6a4d, 0x0, 0x1);
        gbc.writeMem(0xa603, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x4a0c);
        EXPECT(gbc.pc(), 0xa604);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa603), 0xa5);
        // A5 039B
        gbc.setState(0x9cf1, 0x5db4, 0x38a0, 0x9ec8, 0xf0e6, 0xd160, 0x1, 0x0);
        gbc.writeMem(0x9cf1, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x5db4);
        EXPECT(gbc.pc(), 0x9cf2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cf1), 0xa5);
        // A5 039E
        gbc.setState(0xcf18, 0x4031, 0x5210, 0x7617, 0x1b0a, 0x7775, 0x1, 0x1);
        gbc.writeMem(0xcf18, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x4031);
        EXPECT(gbc.pc(), 0xcf19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf18), 0xa5);
        // A5 039F
        gbc.setState(0x827b, 0xfdc4, 0x37e0, 0xbb3f, 0x1342, 0xf290, 0x1, 0x1);
        gbc.writeMem(0x827b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xfdc4);
        EXPECT(gbc.pc(), 0x827c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x827b), 0xa5);
        // A5 03A0
        gbc.setState(0x44dc, 0x5ff7, 0x5f40, 0xc72, 0x8c85, 0x1691, 0x0, 0x1);
        gbc.writeMem(0x44dc, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x5ff7);
        EXPECT(gbc.pc(), 0x44dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03A1
        gbc.setState(0x43eb, 0x3103, 0xbb40, 0x3022, 0x5297, 0xdfa2, 0x0, 0x1);
        gbc.writeMem(0x43eb, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x3103);
        EXPECT(gbc.pc(), 0x43ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03A3
        gbc.setState(0x232b, 0x9aec, 0x6880, 0xd60, 0xa2d4, 0x6987, 0x0, 0x0);
        gbc.writeMem(0x232b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x9aec);
        EXPECT(gbc.pc(), 0x232c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03A4
        gbc.setState(0xb98f, 0x4e9b, 0x8cc0, 0x8bd3, 0xbf27, 0xf7fd, 0x1, 0x0);
        gbc.writeMem(0xb98f, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x4e9b);
        EXPECT(gbc.pc(), 0xb990);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb98f), 0xa5);
        // A5 03A5
        gbc.setState(0x4e57, 0xb4a1, 0x3170, 0x3e1f, 0xe7b9, 0xb69e, 0x0, 0x1);
        gbc.writeMem(0x4e57, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xb4a1);
        EXPECT(gbc.pc(), 0x4e58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03A6
        gbc.setState(0x8d1b, 0x1c33, 0x7dd0, 0xcf1f, 0xba87, 0x46a7, 0x0, 0x1);
        gbc.writeMem(0x8d1b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x1c33);
        EXPECT(gbc.pc(), 0x8d1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d1b), 0xa5);
        // A5 03A7
        gbc.setState(0x549b, 0x5b30, 0xfad0, 0x8a25, 0x6cff, 0x4021, 0x0, 0x1);
        gbc.writeMem(0x549b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x5b30);
        EXPECT(gbc.pc(), 0x549c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03A8
        gbc.setState(0x6925, 0x7bb5, 0xf350, 0xf4e0, 0xb4cb, 0x19c7, 0x1, 0x0);
        gbc.writeMem(0x6925, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x7bb5);
        EXPECT(gbc.pc(), 0x6926);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03A9
        gbc.setState(0x5d6e, 0x8911, 0xb520, 0x94eb, 0x7f40, 0xb11d, 0x1, 0x0);
        gbc.writeMem(0x5d6e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x8911);
        EXPECT(gbc.pc(), 0x5d6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03AA
        gbc.setState(0x41af, 0x389, 0xcd90, 0x9bf, 0x28e9, 0x8875, 0x0, 0x0);
        gbc.writeMem(0x41af, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x389);
        EXPECT(gbc.pc(), 0x41b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03AB
        gbc.setState(0xd963, 0x5843, 0xc990, 0xd9d1, 0x7ef7, 0xe811, 0x1, 0x1);
        gbc.writeMem(0xd963, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x5843);
        EXPECT(gbc.pc(), 0xd964);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd963), 0xa5);
        // A5 03AC
        gbc.setState(0xce84, 0x456d, 0x71d0, 0x6b85, 0x1d41, 0x1435, 0x0, 0x1);
        gbc.writeMem(0xce84, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x456d);
        EXPECT(gbc.pc(), 0xce85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce84), 0xa5);
        // A5 03AD
        gbc.setState(0x1584, 0xb0e1, 0xa930, 0x585d, 0xe6dc, 0xd231, 0x1, 0x0);
        gbc.writeMem(0x1584, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xb0e1);
        EXPECT(gbc.pc(), 0x1585);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03AE
        gbc.setState(0x620, 0x91f4, 0xd730, 0x491b, 0x2771, 0xa761, 0x1, 0x0);
        gbc.writeMem(0x620, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x91f4);
        EXPECT(gbc.pc(), 0x621);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03B0
        gbc.setState(0xdbb2, 0xe2c8, 0x3000, 0xd007, 0x8cf0, 0x2e17, 0x1, 0x0);
        gbc.writeMem(0xdbb2, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xe2c8);
        EXPECT(gbc.pc(), 0xdbb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbb2), 0xa5);
        // A5 03B1
        gbc.setState(0xe8cd, 0x39e5, 0x6ba0, 0xf789, 0x2127, 0x82b1, 0x0, 0x1);
        gbc.writeMem(0xe8cd, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x39e5);
        EXPECT(gbc.pc(), 0xe8ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8cd), 0xa5);
        // A5 03B2
        gbc.setState(0xe178, 0x745c, 0xcc20, 0xf393, 0x532c, 0xd3f3, 0x1, 0x0);
        gbc.writeMem(0xe178, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x745c);
        EXPECT(gbc.pc(), 0xe179);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe178), 0xa5);
        // A5 03B3
        gbc.setState(0x765, 0x5d61, 0xdcd0, 0xdd04, 0x1381, 0x3b10, 0x0, 0x0);
        gbc.writeMem(0x765, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x5d61);
        EXPECT(gbc.pc(), 0x766);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03B4
        gbc.setState(0x48f1, 0xa3c8, 0xb6f0, 0xbe7c, 0xe88c, 0x84e0, 0x1, 0x1);
        gbc.writeMem(0x48f1, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xa3c8);
        EXPECT(gbc.pc(), 0x48f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03B5
        gbc.setState(0xe677, 0x105, 0x3430, 0xa080, 0x691, 0x390a, 0x0, 0x1);
        gbc.writeMem(0xe677, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x105);
        EXPECT(gbc.pc(), 0xe678);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe677), 0xa5);
        // A5 03B6
        gbc.setState(0x945c, 0x4c9f, 0x71f0, 0x5421, 0xc379, 0xa198, 0x0, 0x0);
        gbc.writeMem(0x945c, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x4c9f);
        EXPECT(gbc.pc(), 0x945d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x945c), 0xa5);
        // A5 03B7
        gbc.setState(0xde02, 0x2431, 0x5c90, 0xfd5d, 0x8da9, 0x92de, 0x0, 0x0);
        gbc.writeMem(0xde02, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x2431);
        EXPECT(gbc.pc(), 0xde03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde02), 0xa5);
        // A5 03B8
        gbc.setState(0x3619, 0x6810, 0xa950, 0xaa7d, 0xd6f9, 0xf2fc, 0x1, 0x0);
        gbc.writeMem(0x3619, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x6810);
        EXPECT(gbc.pc(), 0x361a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03BA
        gbc.setState(0x649c, 0xe5f0, 0xbed0, 0xef65, 0x41d8, 0x7c5f, 0x0, 0x1);
        gbc.writeMem(0x649c, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xe5f0);
        EXPECT(gbc.pc(), 0x649d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03BB
        gbc.setState(0xce1, 0x2549, 0x2d90, 0x7abb, 0x6799, 0xa58d, 0x0, 0x1);
        gbc.writeMem(0xce1, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x2549);
        EXPECT(gbc.pc(), 0xce2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03BC
        gbc.setState(0x922e, 0x7378, 0xfc60, 0xaa7f, 0xc1a5, 0xa404, 0x1, 0x1);
        gbc.writeMem(0x922e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x7378);
        EXPECT(gbc.pc(), 0x922f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x922e), 0xa5);
        // A5 03BE
        gbc.setState(0x767e, 0xef2c, 0x6300, 0x5f0b, 0x556e, 0xb862, 0x1, 0x0);
        gbc.writeMem(0x767e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xef2c);
        EXPECT(gbc.pc(), 0x767f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03BF
        gbc.setState(0xa885, 0xb454, 0xf4c0, 0x59ae, 0xdb9a, 0xe8c4, 0x1, 0x1);
        gbc.writeMem(0xa885, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xb454);
        EXPECT(gbc.pc(), 0xa886);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa885), 0xa5);
        // A5 03C0
        gbc.setState(0x4766, 0x74ab, 0x2b70, 0xe0a4, 0xc1c9, 0x88e3, 0x1, 0x1);
        gbc.writeMem(0x4766, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x74ab);
        EXPECT(gbc.pc(), 0x4767);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03C1
        gbc.setState(0x798f, 0x800d, 0x39c0, 0x53e7, 0xdb36, 0x8fd8, 0x0, 0x1);
        gbc.writeMem(0x798f, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x800d);
        EXPECT(gbc.pc(), 0x7990);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03C2
        gbc.setState(0x4567, 0xdeec, 0x72b0, 0x3b83, 0x6125, 0x8f81, 0x0, 0x0);
        gbc.writeMem(0x4567, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xdeec);
        EXPECT(gbc.pc(), 0x4568);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03C3
        gbc.setState(0xedc9, 0x4e45, 0x39d0, 0xba8c, 0x1abb, 0xa45e, 0x0, 0x0);
        gbc.writeMem(0xedc9, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x4e45);
        EXPECT(gbc.pc(), 0xedca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedc9), 0xa5);
        // A5 03C4
        gbc.setState(0x9ac6, 0xcbd, 0x5b30, 0xb39a, 0xac8, 0xe152, 0x0, 0x1);
        gbc.writeMem(0x9ac6, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xcbd);
        EXPECT(gbc.pc(), 0x9ac7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ac6), 0xa5);
        // A5 03C5
        gbc.setState(0x406a, 0x32eb, 0x61d0, 0x5256, 0x8d55, 0xb1e5, 0x0, 0x0);
        gbc.writeMem(0x406a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x32eb);
        EXPECT(gbc.pc(), 0x406b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03C7
        gbc.setState(0xed75, 0x1d47, 0x5ea0, 0xf3e7, 0xf8dc, 0xb453, 0x1, 0x1);
        gbc.writeMem(0xed75, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x1d47);
        EXPECT(gbc.pc(), 0xed76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed75), 0xa5);
        // A5 03C8
        gbc.setState(0x5022, 0xb501, 0xc390, 0x97e7, 0xdec6, 0xe423, 0x1, 0x1);
        gbc.writeMem(0x5022, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xb501);
        EXPECT(gbc.pc(), 0x5023);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03C9
        gbc.setState(0x5ed0, 0x622f, 0x47d0, 0x55f7, 0x95d2, 0x3534, 0x0, 0x0);
        gbc.writeMem(0x5ed0, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x622f);
        EXPECT(gbc.pc(), 0x5ed1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03CA
        gbc.setState(0x37d5, 0xe50d, 0xfa20, 0xed17, 0x7356, 0x144a, 0x0, 0x0);
        gbc.writeMem(0x37d5, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xe50d);
        EXPECT(gbc.pc(), 0x37d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03CB
        gbc.setState(0x9fab, 0x675d, 0xc0e0, 0xa7a, 0x7f26, 0xc85d, 0x1, 0x1);
        gbc.writeMem(0x9fab, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x675d);
        EXPECT(gbc.pc(), 0x9fac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fab), 0xa5);
        // A5 03CC
        gbc.setState(0x2dab, 0xb7c5, 0xbcf0, 0xb0b7, 0xcdba, 0x47bb, 0x1, 0x0);
        gbc.writeMem(0x2dab, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xb7c5);
        EXPECT(gbc.pc(), 0x2dac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03CD
        gbc.setState(0x5d70, 0x7931, 0xeb50, 0xd600, 0x8e97, 0x5684, 0x0, 0x1);
        gbc.writeMem(0x5d70, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x7931);
        EXPECT(gbc.pc(), 0x5d71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03CE
        gbc.setState(0x6eeb, 0xc875, 0x4e50, 0x5b16, 0x11b8, 0x3209, 0x1, 0x0);
        gbc.writeMem(0x6eeb, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xc875);
        EXPECT(gbc.pc(), 0x6eec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03CF
        gbc.setState(0x4c76, 0xf431, 0xa990, 0xdf6e, 0x3bc4, 0xdd86, 0x1, 0x1);
        gbc.writeMem(0x4c76, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xf431);
        EXPECT(gbc.pc(), 0x4c77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03D0
        gbc.setState(0x7c5e, 0xc8b7, 0x1910, 0xd6af, 0xfe9c, 0x9aa7, 0x0, 0x0);
        gbc.writeMem(0x7c5e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xc8b7);
        EXPECT(gbc.pc(), 0x7c5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03D1
        gbc.setState(0x2a64, 0x1aec, 0x5f60, 0xa1bd, 0xaf53, 0xa4a0, 0x0, 0x0);
        gbc.writeMem(0x2a64, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x1aec);
        EXPECT(gbc.pc(), 0x2a65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03D2
        gbc.setState(0x818a, 0xc828, 0x9410, 0xfff8, 0xef32, 0xf6c, 0x0, 0x0);
        gbc.writeMem(0x818a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xc828);
        EXPECT(gbc.pc(), 0x818b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x818a), 0xa5);
        // A5 03D4
        gbc.setState(0xb7eb, 0x7315, 0x2640, 0x8f6c, 0xe249, 0xcb8, 0x0, 0x1);
        gbc.writeMem(0xb7eb, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x7315);
        EXPECT(gbc.pc(), 0xb7ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7eb), 0xa5);
        // A5 03D5
        gbc.setState(0x128a, 0x734e, 0x1b10, 0xbf1, 0x1940, 0x8a40, 0x1, 0x1);
        gbc.writeMem(0x128a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x734e);
        EXPECT(gbc.pc(), 0x128b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03D6
        gbc.setState(0x80b8, 0x65e, 0xfc50, 0xf67, 0x2b68, 0xab47, 0x0, 0x0);
        gbc.writeMem(0x80b8, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x65e);
        EXPECT(gbc.pc(), 0x80b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80b8), 0xa5);
        // A5 03D7
        gbc.setState(0xac48, 0x4a03, 0x12e0, 0xadee, 0x916c, 0xb80, 0x0, 0x0);
        gbc.writeMem(0xac48, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x4a03);
        EXPECT(gbc.pc(), 0xac49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac48), 0xa5);
        // A5 03D8
        gbc.setState(0xdf8b, 0x13ec, 0xfda0, 0x86bf, 0xf3c3, 0xf8c4, 0x1, 0x1);
        gbc.writeMem(0xdf8b, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x13ec);
        EXPECT(gbc.pc(), 0xdf8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf8b), 0xa5);
        // A5 03D9
        gbc.setState(0x6438, 0xaa92, 0x52b0, 0xa685, 0x467a, 0xbc36, 0x0, 0x1);
        gbc.writeMem(0x6438, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xaa92);
        EXPECT(gbc.pc(), 0x6439);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03DA
        gbc.setState(0x27ab, 0xc244, 0x7bb0, 0xa0ec, 0x770, 0x68ae, 0x1, 0x1);
        gbc.writeMem(0x27ab, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xc244);
        EXPECT(gbc.pc(), 0x27ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03DB
        gbc.setState(0x5771, 0x6054, 0x5c60, 0x43d, 0x3be2, 0x2d2c, 0x0, 0x1);
        gbc.writeMem(0x5771, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x6054);
        EXPECT(gbc.pc(), 0x5772);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03DE
        gbc.setState(0x6b34, 0x5341, 0x2100, 0xfe2a, 0x9d9d, 0x9475, 0x1, 0x1);
        gbc.writeMem(0x6b34, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x5341);
        EXPECT(gbc.pc(), 0x6b35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03DF
        gbc.setState(0x89dd, 0xab8f, 0xc640, 0x1c2a, 0x8a28, 0xd9b3, 0x1, 0x1);
        gbc.writeMem(0x89dd, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xab8f);
        EXPECT(gbc.pc(), 0x89de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89dd), 0xa5);
        // A5 03E0
        gbc.setState(0x4fb0, 0x1338, 0xb460, 0x887, 0x5bbe, 0xfeed, 0x1, 0x1);
        gbc.writeMem(0x4fb0, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x1338);
        EXPECT(gbc.pc(), 0x4fb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03E1
        gbc.setState(0xe00e, 0x57f2, 0x60f0, 0x8351, 0x95a0, 0xb9d0, 0x1, 0x1);
        gbc.writeMem(0xe00e, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x57f2);
        EXPECT(gbc.pc(), 0xe00f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe00e), 0xa5);
        // A5 03E2
        gbc.setState(0xa867, 0x8966, 0x26d0, 0x541d, 0xc72b, 0x3c21, 0x1, 0x0);
        gbc.writeMem(0xa867, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x8966);
        EXPECT(gbc.pc(), 0xa868);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa867), 0xa5);
        // A5 03E3
        gbc.setState(0x8ab6, 0x4a3d, 0x2d30, 0x8ad5, 0xf294, 0x7310, 0x1, 0x1);
        gbc.writeMem(0x8ab6, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x4a3d);
        EXPECT(gbc.pc(), 0x8ab7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ab6), 0xa5);
        // A5 03E4
        gbc.setState(0x33cd, 0xba5, 0xb870, 0x1c42, 0x9148, 0x7a68, 0x1, 0x0);
        gbc.writeMem(0x33cd, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xba5);
        EXPECT(gbc.pc(), 0x33ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03E5
        gbc.setState(0xdbd3, 0x656a, 0x49d0, 0x144e, 0xed2a, 0x718d, 0x0, 0x1);
        gbc.writeMem(0xdbd3, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x656a);
        EXPECT(gbc.pc(), 0xdbd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbd3), 0xa5);
        // A5 03E6
        gbc.setState(0x43e2, 0x1d94, 0x9080, 0xde42, 0x9fbb, 0xe720, 0x0, 0x1);
        gbc.writeMem(0x43e2, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x1d94);
        EXPECT(gbc.pc(), 0x43e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A5 03E7
        gbc.setState(0x403c, 0x596a, 0x2010, 0x45d2, 0x5581, 0xbd28, 0x1, 0x1);
        gbc.writeMem(0x403c, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x596a);
        EXPECT(gbc.pc(), 0x403d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
    }
