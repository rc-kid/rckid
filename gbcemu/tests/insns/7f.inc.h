    TEST(gbcemu, opcode_7f) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // 7F 0000
        gbc.setState(0x7057, 0xe8a1, 0x7b60, 0x8056, 0x4b0a, 0x2816, 0x1, 0x1);
        gbc.writeMem(0x7057, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xe8a1);
        EXPECT(gbc.pc(), 0x7058);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0001
        gbc.setState(0x16bb, 0x41f5, 0x3030, 0x6702, 0xb94f, 0x8193, 0x0, 0x0);
        gbc.writeMem(0x16bb, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x41f5);
        EXPECT(gbc.pc(), 0x16bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0002
        gbc.setState(0xef7c, 0x8b02, 0x3680, 0x402e, 0x9b7e, 0x9d90, 0x1, 0x1);
        gbc.writeMem(0xef7c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x8b02);
        EXPECT(gbc.pc(), 0xef7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef7c), 0x7f);
        // 7F 0003
        gbc.setState(0x19df, 0x6cb5, 0x1800, 0x8e42, 0x88d7, 0x691d, 0x0, 0x0);
        gbc.writeMem(0x19df, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x6cb5);
        EXPECT(gbc.pc(), 0x19e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0005
        gbc.setState(0xe338, 0x2ff0, 0xa500, 0xeb09, 0x21a3, 0xe3a9, 0x0, 0x1);
        gbc.writeMem(0xe338, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x2ff0);
        EXPECT(gbc.pc(), 0xe339);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe338), 0x7f);
        // 7F 0007
        gbc.setState(0xa77, 0x4901, 0xf4a0, 0x727b, 0x502c, 0x7886, 0x1, 0x0);
        gbc.writeMem(0xa77, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x4901);
        EXPECT(gbc.pc(), 0xa78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0008
        gbc.setState(0x27c1, 0xa63e, 0xe1c0, 0x2f00, 0x4a49, 0x37f1, 0x0, 0x1);
        gbc.writeMem(0x27c1, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xa63e);
        EXPECT(gbc.pc(), 0x27c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0009
        gbc.setState(0x33bd, 0x4f23, 0x80c0, 0x14ac, 0x7026, 0xe880, 0x0, 0x0);
        gbc.writeMem(0x33bd, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x4f23);
        EXPECT(gbc.pc(), 0x33be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 000A
        gbc.setState(0xa915, 0x6f3d, 0xde60, 0x74c4, 0x9dca, 0x59e8, 0x1, 0x0);
        gbc.writeMem(0xa915, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x6f3d);
        EXPECT(gbc.pc(), 0xa916);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa915), 0x7f);
        // 7F 000B
        gbc.setState(0xadab, 0x85c8, 0xace0, 0x6272, 0x853d, 0x54c8, 0x1, 0x1);
        gbc.writeMem(0xadab, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x85c8);
        EXPECT(gbc.pc(), 0xadac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadab), 0x7f);
        // 7F 000D
        gbc.setState(0xe99d, 0x8d0c, 0x5d10, 0xa418, 0xf9f0, 0xf56, 0x1, 0x0);
        gbc.writeMem(0xe99d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x8d0c);
        EXPECT(gbc.pc(), 0xe99e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe99d), 0x7f);
        // 7F 000E
        gbc.setState(0x717a, 0xfa5c, 0x3980, 0xeee7, 0xebe6, 0x81ed, 0x0, 0x1);
        gbc.writeMem(0x717a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xfa5c);
        EXPECT(gbc.pc(), 0x717b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 000F
        gbc.setState(0xc7fd, 0x3610, 0x7990, 0x828a, 0xb736, 0xf1ac, 0x1, 0x1);
        gbc.writeMem(0xc7fd, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x3610);
        EXPECT(gbc.pc(), 0xc7fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7fd), 0x7f);
        // 7F 0010
        gbc.setState(0xadec, 0xcd26, 0x5ff0, 0x3fd0, 0xd35c, 0x7064, 0x1, 0x0);
        gbc.writeMem(0xadec, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xcd26);
        EXPECT(gbc.pc(), 0xaded);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadec), 0x7f);
        // 7F 0011
        gbc.setState(0xc486, 0xdf18, 0x560, 0x5434, 0xa0d, 0x7ff8, 0x0, 0x1);
        gbc.writeMem(0xc486, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xdf18);
        EXPECT(gbc.pc(), 0xc487);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc486), 0x7f);
        // 7F 0012
        gbc.setState(0xd762, 0x9cdf, 0x33e0, 0xdc2c, 0xb019, 0xeed2, 0x1, 0x0);
        gbc.writeMem(0xd762, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x9cdf);
        EXPECT(gbc.pc(), 0xd763);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd762), 0x7f);
        // 7F 0013
        gbc.setState(0xd99c, 0x9545, 0x8620, 0xd4c0, 0xef92, 0x7701, 0x0, 0x1);
        gbc.writeMem(0xd99c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x9545);
        EXPECT(gbc.pc(), 0xd99d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd99c), 0x7f);
        // 7F 0015
        gbc.setState(0x4217, 0x15ba, 0xa160, 0xcbbf, 0x5fe4, 0x7e6c, 0x1, 0x0);
        gbc.writeMem(0x4217, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x15ba);
        EXPECT(gbc.pc(), 0x4218);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0016
        gbc.setState(0x9353, 0xd30e, 0xb830, 0x3f28, 0xb637, 0x9f22, 0x0, 0x1);
        gbc.writeMem(0x9353, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xd30e);
        EXPECT(gbc.pc(), 0x9354);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9353), 0x7f);
        // 7F 0017
        gbc.setState(0x658b, 0x6c3a, 0x2270, 0xa84a, 0x66c0, 0x2f95, 0x0, 0x1);
        gbc.writeMem(0x658b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x6c3a);
        EXPECT(gbc.pc(), 0x658c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0018
        gbc.setState(0x99a5, 0x3c8c, 0x93a0, 0x3b5d, 0xf4be, 0xbe22, 0x0, 0x1);
        gbc.writeMem(0x99a5, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x3c8c);
        EXPECT(gbc.pc(), 0x99a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99a5), 0x7f);
        // 7F 0019
        gbc.setState(0xe0c2, 0x25dd, 0xae70, 0xd046, 0xe222, 0x34ad, 0x1, 0x1);
        gbc.writeMem(0xe0c2, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x25dd);
        EXPECT(gbc.pc(), 0xe0c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0c2), 0x7f);
        // 7F 001A
        gbc.setState(0x5843, 0x1c86, 0x7900, 0xc1a7, 0x4bec, 0x2667, 0x1, 0x1);
        gbc.writeMem(0x5843, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x1c86);
        EXPECT(gbc.pc(), 0x5844);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 001B
        gbc.setState(0xbd9b, 0xf782, 0x5d00, 0x2fac, 0xcbf5, 0xe665, 0x1, 0x1);
        gbc.writeMem(0xbd9b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xf782);
        EXPECT(gbc.pc(), 0xbd9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd9b), 0x7f);
        // 7F 001C
        gbc.setState(0xdb09, 0x6959, 0xe6d0, 0x9b67, 0x9da1, 0x1003, 0x0, 0x0);
        gbc.writeMem(0xdb09, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x6959);
        EXPECT(gbc.pc(), 0xdb0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb09), 0x7f);
        // 7F 001D
        gbc.setState(0xc425, 0x9090, 0x7f0, 0xd67, 0x21bd, 0xd59a, 0x0, 0x1);
        gbc.writeMem(0xc425, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x9090);
        EXPECT(gbc.pc(), 0xc426);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc425), 0x7f);
        // 7F 001E
        gbc.setState(0xdd42, 0x1e85, 0x970, 0xac33, 0xc180, 0xacf3, 0x0, 0x1);
        gbc.writeMem(0xdd42, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x1e85);
        EXPECT(gbc.pc(), 0xdd43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd42), 0x7f);
        // 7F 001F
        gbc.setState(0x5289, 0x41d8, 0x5a60, 0xad32, 0x2e81, 0x32b8, 0x0, 0x0);
        gbc.writeMem(0x5289, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x41d8);
        EXPECT(gbc.pc(), 0x528a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0020
        gbc.setState(0x22b1, 0x42f, 0x9390, 0xb4d8, 0x5ed2, 0x79fd, 0x1, 0x0);
        gbc.writeMem(0x22b1, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x42f);
        EXPECT(gbc.pc(), 0x22b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0021
        gbc.setState(0x37a6, 0xcc35, 0x8a0, 0xb281, 0x6199, 0xac76, 0x1, 0x1);
        gbc.writeMem(0x37a6, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xcc35);
        EXPECT(gbc.pc(), 0x37a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0022
        gbc.setState(0x3cac, 0x2a6e, 0x7280, 0x3f40, 0x8a55, 0x9fc3, 0x1, 0x1);
        gbc.writeMem(0x3cac, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x2a6e);
        EXPECT(gbc.pc(), 0x3cad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0023
        gbc.setState(0x71eb, 0x5904, 0x3150, 0x95aa, 0xfd97, 0x1e59, 0x0, 0x0);
        gbc.writeMem(0x71eb, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x5904);
        EXPECT(gbc.pc(), 0x71ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0024
        gbc.setState(0x147e, 0xb7b9, 0x9ea0, 0xcbbe, 0x4e24, 0xc106, 0x0, 0x1);
        gbc.writeMem(0x147e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xb7b9);
        EXPECT(gbc.pc(), 0x147f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0026
        gbc.setState(0xaf5, 0x3e26, 0xe380, 0x812c, 0x8daf, 0xc3e6, 0x1, 0x0);
        gbc.writeMem(0xaf5, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x3e26);
        EXPECT(gbc.pc(), 0xaf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0027
        gbc.setState(0x1885, 0x8d6b, 0x9530, 0xe4df, 0xbf95, 0xee37, 0x0, 0x0);
        gbc.writeMem(0x1885, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x8d6b);
        EXPECT(gbc.pc(), 0x1886);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0028
        gbc.setState(0x321e, 0x7663, 0xf620, 0xd84a, 0x728c, 0x9444, 0x1, 0x1);
        gbc.writeMem(0x321e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x7663);
        EXPECT(gbc.pc(), 0x321f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0029
        gbc.setState(0x6922, 0x17e6, 0xa2e0, 0xc16b, 0x3cad, 0xb93c, 0x1, 0x1);
        gbc.writeMem(0x6922, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x17e6);
        EXPECT(gbc.pc(), 0x6923);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 002A
        gbc.setState(0x4445, 0xceed, 0x1240, 0x7d36, 0xc6be, 0xa696, 0x1, 0x1);
        gbc.writeMem(0x4445, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xceed);
        EXPECT(gbc.pc(), 0x4446);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 002B
        gbc.setState(0xdb80, 0x21b1, 0x7300, 0x5408, 0xdbc7, 0x4cb5, 0x0, 0x1);
        gbc.writeMem(0xdb80, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x21b1);
        EXPECT(gbc.pc(), 0xdb81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb80), 0x7f);
        // 7F 002C
        gbc.setState(0x45cf, 0x968e, 0x2e40, 0xe786, 0xde09, 0x9dd5, 0x0, 0x1);
        gbc.writeMem(0x45cf, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x968e);
        EXPECT(gbc.pc(), 0x45d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 002D
        gbc.setState(0x7515, 0x43ea, 0xb8b0, 0x7ffe, 0xc883, 0x9753, 0x1, 0x0);
        gbc.writeMem(0x7515, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x43ea);
        EXPECT(gbc.pc(), 0x7516);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 002E
        gbc.setState(0xe7db, 0xf741, 0x7810, 0xaffc, 0xffd6, 0x3860, 0x1, 0x1);
        gbc.writeMem(0xe7db, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xf741);
        EXPECT(gbc.pc(), 0xe7dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7db), 0x7f);
        // 7F 0030
        gbc.setState(0x80f3, 0x6c7c, 0xb320, 0xf41e, 0x5e97, 0x8943, 0x1, 0x0);
        gbc.writeMem(0x80f3, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x6c7c);
        EXPECT(gbc.pc(), 0x80f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80f3), 0x7f);
        // 7F 0032
        gbc.setState(0x6b6b, 0x86dc, 0xecd0, 0x39d4, 0x3648, 0x105f, 0x1, 0x1);
        gbc.writeMem(0x6b6b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x86dc);
        EXPECT(gbc.pc(), 0x6b6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0033
        gbc.setState(0xb209, 0xacc3, 0x5aa0, 0x94a, 0x31b9, 0xae11, 0x0, 0x0);
        gbc.writeMem(0xb209, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xacc3);
        EXPECT(gbc.pc(), 0xb20a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb209), 0x7f);
        // 7F 0034
        gbc.setState(0x10f0, 0x3070, 0xa2f0, 0x258f, 0x2b3c, 0xdfda, 0x1, 0x0);
        gbc.writeMem(0x10f0, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x3070);
        EXPECT(gbc.pc(), 0x10f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0035
        gbc.setState(0x6c9a, 0x7c65, 0x3130, 0xcd88, 0x138, 0x9bb0, 0x1, 0x0);
        gbc.writeMem(0x6c9a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x7c65);
        EXPECT(gbc.pc(), 0x6c9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0036
        gbc.setState(0x3823, 0xd316, 0x7330, 0xf8a0, 0x93ce, 0x7b3a, 0x1, 0x0);
        gbc.writeMem(0x3823, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xd316);
        EXPECT(gbc.pc(), 0x3824);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0037
        gbc.setState(0xbbf1, 0x9003, 0x29e0, 0xd429, 0x3039, 0x3a57, 0x1, 0x0);
        gbc.writeMem(0xbbf1, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x9003);
        EXPECT(gbc.pc(), 0xbbf2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbf1), 0x7f);
        // 7F 0038
        gbc.setState(0xc445, 0x353, 0x30a0, 0x431, 0xac7d, 0xb700, 0x1, 0x0);
        gbc.writeMem(0xc445, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x353);
        EXPECT(gbc.pc(), 0xc446);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc445), 0x7f);
        // 7F 0039
        gbc.setState(0x4ec4, 0x1e58, 0x5c0, 0x9446, 0xb986, 0x92b5, 0x1, 0x0);
        gbc.writeMem(0x4ec4, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x1e58);
        EXPECT(gbc.pc(), 0x4ec5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 003A
        gbc.setState(0x2422, 0x3701, 0xe7b0, 0x9187, 0xf559, 0xcffd, 0x1, 0x1);
        gbc.writeMem(0x2422, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x3701);
        EXPECT(gbc.pc(), 0x2423);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 003B
        gbc.setState(0xe37, 0x73c7, 0x86b0, 0x61ee, 0x701f, 0xe829, 0x1, 0x1);
        gbc.writeMem(0xe37, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x73c7);
        EXPECT(gbc.pc(), 0xe38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 003C
        gbc.setState(0x46fc, 0x58f4, 0x1940, 0x8b73, 0x60c9, 0xee07, 0x1, 0x1);
        gbc.writeMem(0x46fc, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x58f4);
        EXPECT(gbc.pc(), 0x46fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 003D
        gbc.setState(0x8131, 0xd86, 0x4630, 0x8e5f, 0x82ff, 0x1807, 0x0, 0x0);
        gbc.writeMem(0x8131, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xd86);
        EXPECT(gbc.pc(), 0x8132);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8131), 0x7f);
        // 7F 003E
        gbc.setState(0x6b3d, 0xd155, 0x19c0, 0x75d8, 0x8ad9, 0x3fab, 0x0, 0x0);
        gbc.writeMem(0x6b3d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xd155);
        EXPECT(gbc.pc(), 0x6b3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 003F
        gbc.setState(0x7955, 0x2f24, 0x42b0, 0x1c28, 0x862a, 0x59cf, 0x1, 0x0);
        gbc.writeMem(0x7955, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x2f24);
        EXPECT(gbc.pc(), 0x7956);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0040
        gbc.setState(0x268, 0xea7d, 0x2f60, 0xd9d6, 0x6fc8, 0x209a, 0x0, 0x1);
        gbc.writeMem(0x268, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xea7d);
        EXPECT(gbc.pc(), 0x269);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0041
        gbc.setState(0x38f7, 0xae27, 0xba30, 0x4564, 0xcf64, 0x3913, 0x1, 0x1);
        gbc.writeMem(0x38f7, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xae27);
        EXPECT(gbc.pc(), 0x38f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0042
        gbc.setState(0xde92, 0x9fdb, 0x9a90, 0x22f5, 0xadb5, 0x7850, 0x0, 0x1);
        gbc.writeMem(0xde92, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x9fdb);
        EXPECT(gbc.pc(), 0xde93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde92), 0x7f);
        // 7F 0043
        gbc.setState(0x31d7, 0x31df, 0x9c40, 0xd4a1, 0xae79, 0x80dc, 0x0, 0x1);
        gbc.writeMem(0x31d7, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x31df);
        EXPECT(gbc.pc(), 0x31d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0044
        gbc.setState(0xd553, 0x1fc0, 0xfd70, 0x19d4, 0x749c, 0xfe8a, 0x1, 0x1);
        gbc.writeMem(0xd553, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x1fc0);
        EXPECT(gbc.pc(), 0xd554);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd553), 0x7f);
        // 7F 0045
        gbc.setState(0x1b4, 0xadd6, 0x7d00, 0xf13f, 0xda38, 0x6c4, 0x0, 0x1);
        gbc.writeMem(0x1b4, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xadd6);
        EXPECT(gbc.pc(), 0x1b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0046
        gbc.setState(0xd057, 0xd27, 0xe6e0, 0x5f28, 0xa14b, 0x2966, 0x0, 0x0);
        gbc.writeMem(0xd057, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xd27);
        EXPECT(gbc.pc(), 0xd058);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd057), 0x7f);
        // 7F 0047
        gbc.setState(0x767, 0xdeb6, 0xc7d0, 0x9aef, 0x149e, 0xbc46, 0x0, 0x0);
        gbc.writeMem(0x767, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xdeb6);
        EXPECT(gbc.pc(), 0x768);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0048
        gbc.setState(0x60e5, 0xbe4e, 0xfed0, 0x8f81, 0x7efb, 0x55db, 0x0, 0x1);
        gbc.writeMem(0x60e5, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xbe4e);
        EXPECT(gbc.pc(), 0x60e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0049
        gbc.setState(0x1ddc, 0x74a8, 0x56e0, 0xadc0, 0xb13f, 0xbfd, 0x1, 0x0);
        gbc.writeMem(0x1ddc, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x74a8);
        EXPECT(gbc.pc(), 0x1ddd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 004A
        gbc.setState(0xcc9d, 0xf08c, 0x51b0, 0xdb5e, 0x7429, 0xafb6, 0x1, 0x0);
        gbc.writeMem(0xcc9d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xf08c);
        EXPECT(gbc.pc(), 0xcc9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc9d), 0x7f);
        // 7F 004B
        gbc.setState(0xb2c5, 0x60e5, 0xa0e0, 0xefd4, 0x5505, 0x8b06, 0x0, 0x0);
        gbc.writeMem(0xb2c5, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x60e5);
        EXPECT(gbc.pc(), 0xb2c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2c5), 0x7f);
        // 7F 004C
        gbc.setState(0x16db, 0x459a, 0xeff0, 0x347b, 0xa4e9, 0x12b, 0x1, 0x1);
        gbc.writeMem(0x16db, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x459a);
        EXPECT(gbc.pc(), 0x16dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 004D
        gbc.setState(0xe4b7, 0xd439, 0x95e0, 0xa7ff, 0x49cf, 0xdef5, 0x1, 0x1);
        gbc.writeMem(0xe4b7, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xd439);
        EXPECT(gbc.pc(), 0xe4b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4b7), 0x7f);
        // 7F 004E
        gbc.setState(0x106d, 0xe65f, 0x82b0, 0x9806, 0x3e42, 0xb61d, 0x1, 0x0);
        gbc.writeMem(0x106d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xe65f);
        EXPECT(gbc.pc(), 0x106e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 004F
        gbc.setState(0xb6c9, 0xc9f, 0x58c0, 0x280a, 0xdd97, 0xbd14, 0x0, 0x0);
        gbc.writeMem(0xb6c9, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xc9f);
        EXPECT(gbc.pc(), 0xb6ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6c9), 0x7f);
        // 7F 0050
        gbc.setState(0x90e5, 0xbc80, 0x4f50, 0x7719, 0xc68a, 0x3ec3, 0x1, 0x0);
        gbc.writeMem(0x90e5, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xbc80);
        EXPECT(gbc.pc(), 0x90e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90e5), 0x7f);
        // 7F 0051
        gbc.setState(0x9df2, 0xe7a0, 0x90f0, 0x9bdb, 0xa903, 0x886c, 0x0, 0x0);
        gbc.writeMem(0x9df2, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xe7a0);
        EXPECT(gbc.pc(), 0x9df3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9df2), 0x7f);
        // 7F 0052
        gbc.setState(0xb9b9, 0x4733, 0x4610, 0x3384, 0xbdd4, 0xe746, 0x1, 0x0);
        gbc.writeMem(0xb9b9, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x4733);
        EXPECT(gbc.pc(), 0xb9ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9b9), 0x7f);
        // 7F 0054
        gbc.setState(0x72ae, 0x4b28, 0x7700, 0xf35a, 0x5c03, 0x2a54, 0x1, 0x1);
        gbc.writeMem(0x72ae, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x4b28);
        EXPECT(gbc.pc(), 0x72af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0055
        gbc.setState(0xeaf8, 0xbf37, 0xdd30, 0x522e, 0xff0d, 0x36a2, 0x0, 0x0);
        gbc.writeMem(0xeaf8, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xbf37);
        EXPECT(gbc.pc(), 0xeaf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeaf8), 0x7f);
        // 7F 0056
        gbc.setState(0x588b, 0x57cd, 0x9470, 0x7f86, 0x741e, 0xec38, 0x0, 0x1);
        gbc.writeMem(0x588b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x57cd);
        EXPECT(gbc.pc(), 0x588c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0057
        gbc.setState(0x1bdb, 0x1e55, 0xec0, 0xd690, 0x1e2d, 0xce2d, 0x1, 0x0);
        gbc.writeMem(0x1bdb, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x1e55);
        EXPECT(gbc.pc(), 0x1bdc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0058
        gbc.setState(0x9bea, 0xd7a1, 0x9d90, 0x93bd, 0x43ad, 0xe1c2, 0x1, 0x1);
        gbc.writeMem(0x9bea, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xd7a1);
        EXPECT(gbc.pc(), 0x9beb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bea), 0x7f);
        // 7F 0059
        gbc.setState(0x576b, 0xe99a, 0x4250, 0x6dd0, 0x4835, 0x3ec4, 0x1, 0x1);
        gbc.writeMem(0x576b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xe99a);
        EXPECT(gbc.pc(), 0x576c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 005A
        gbc.setState(0xa3af, 0x3560, 0x69f0, 0x56ab, 0x2772, 0xaeda, 0x1, 0x1);
        gbc.writeMem(0xa3af, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x3560);
        EXPECT(gbc.pc(), 0xa3b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3af), 0x7f);
        // 7F 005B
        gbc.setState(0x5202, 0xb37d, 0xe030, 0x9210, 0x6aa2, 0x6e9c, 0x0, 0x1);
        gbc.writeMem(0x5202, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xb37d);
        EXPECT(gbc.pc(), 0x5203);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 005C
        gbc.setState(0x8394, 0xfcbb, 0xadd0, 0x8550, 0x4b96, 0xf762, 0x1, 0x0);
        gbc.writeMem(0x8394, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xfcbb);
        EXPECT(gbc.pc(), 0x8395);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8394), 0x7f);
        // 7F 005D
        gbc.setState(0xa93b, 0xf604, 0x5c50, 0x9675, 0x99c, 0x53fa, 0x1, 0x0);
        gbc.writeMem(0xa93b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xf604);
        EXPECT(gbc.pc(), 0xa93c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa93b), 0x7f);
        // 7F 005E
        gbc.setState(0x78bb, 0xd1c5, 0x4a90, 0x9b23, 0xaebb, 0x9746, 0x0, 0x0);
        gbc.writeMem(0x78bb, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xd1c5);
        EXPECT(gbc.pc(), 0x78bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 005F
        gbc.setState(0x98f9, 0xaa79, 0x9950, 0xa02e, 0x339a, 0xce44, 0x0, 0x0);
        gbc.writeMem(0x98f9, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xaa79);
        EXPECT(gbc.pc(), 0x98fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98f9), 0x7f);
        // 7F 0060
        gbc.setState(0x565c, 0x525d, 0xa5c0, 0x57b6, 0x2df1, 0x794c, 0x1, 0x0);
        gbc.writeMem(0x565c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x525d);
        EXPECT(gbc.pc(), 0x565d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0061
        gbc.setState(0x428c, 0x2b14, 0xede0, 0x460, 0xa76c, 0x4a32, 0x0, 0x0);
        gbc.writeMem(0x428c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x2b14);
        EXPECT(gbc.pc(), 0x428d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0062
        gbc.setState(0xa95c, 0x341d, 0x81b0, 0xaf9a, 0x877e, 0xce00, 0x0, 0x1);
        gbc.writeMem(0xa95c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x341d);
        EXPECT(gbc.pc(), 0xa95d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa95c), 0x7f);
        // 7F 0063
        gbc.setState(0xcadf, 0x5d38, 0x5720, 0x9ac5, 0x4cab, 0x1fa0, 0x1, 0x1);
        gbc.writeMem(0xcadf, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x5d38);
        EXPECT(gbc.pc(), 0xcae0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcadf), 0x7f);
        // 7F 0064
        gbc.setState(0xa1c6, 0x8165, 0xd120, 0x916f, 0xd485, 0x8da3, 0x1, 0x0);
        gbc.writeMem(0xa1c6, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x8165);
        EXPECT(gbc.pc(), 0xa1c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1c6), 0x7f);
        // 7F 0065
        gbc.setState(0x5eaf, 0xa665, 0x17c0, 0xd784, 0x2295, 0x39fa, 0x1, 0x0);
        gbc.writeMem(0x5eaf, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xa665);
        EXPECT(gbc.pc(), 0x5eb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0066
        gbc.setState(0x7165, 0xae04, 0x6830, 0x6231, 0x7904, 0x7700, 0x1, 0x1);
        gbc.writeMem(0x7165, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xae04);
        EXPECT(gbc.pc(), 0x7166);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0067
        gbc.setState(0x83fd, 0xfaf6, 0x4d70, 0xdbcb, 0xce6c, 0x3fae, 0x0, 0x1);
        gbc.writeMem(0x83fd, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xfaf6);
        EXPECT(gbc.pc(), 0x83fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83fd), 0x7f);
        // 7F 0068
        gbc.setState(0x3b58, 0x1650, 0xa330, 0x185f, 0x7725, 0x7846, 0x0, 0x0);
        gbc.writeMem(0x3b58, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x1650);
        EXPECT(gbc.pc(), 0x3b59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0069
        gbc.setState(0xdd9b, 0x2b59, 0xe850, 0x7ea7, 0x6c46, 0x7521, 0x0, 0x0);
        gbc.writeMem(0xdd9b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x2b59);
        EXPECT(gbc.pc(), 0xdd9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd9b), 0x7f);
        // 7F 006A
        gbc.setState(0x7699, 0x21bc, 0xf2d0, 0x34f0, 0x32d9, 0xf8d9, 0x1, 0x1);
        gbc.writeMem(0x7699, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x21bc);
        EXPECT(gbc.pc(), 0x769a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 006B
        gbc.setState(0x832a, 0x428f, 0xa870, 0xea0e, 0xc1f7, 0xd7b2, 0x1, 0x0);
        gbc.writeMem(0x832a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x428f);
        EXPECT(gbc.pc(), 0x832b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x832a), 0x7f);
        // 7F 006C
        gbc.setState(0xbd50, 0xa627, 0x5e90, 0x7fb6, 0xf37f, 0x8396, 0x0, 0x0);
        gbc.writeMem(0xbd50, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xa627);
        EXPECT(gbc.pc(), 0xbd51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd50), 0x7f);
        // 7F 006D
        gbc.setState(0x3990, 0xdc17, 0x88c0, 0x768c, 0xcc2e, 0x4e42, 0x0, 0x1);
        gbc.writeMem(0x3990, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xdc17);
        EXPECT(gbc.pc(), 0x3991);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 006E
        gbc.setState(0xe2cf, 0xce58, 0x6600, 0x93ee, 0x9247, 0x58e7, 0x0, 0x0);
        gbc.writeMem(0xe2cf, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xce58);
        EXPECT(gbc.pc(), 0xe2d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2cf), 0x7f);
        // 7F 006F
        gbc.setState(0x1755, 0xc418, 0x2f80, 0x154d, 0x320d, 0x67d8, 0x0, 0x1);
        gbc.writeMem(0x1755, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xc418);
        EXPECT(gbc.pc(), 0x1756);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0070
        gbc.setState(0x7978, 0x4baa, 0x2bb0, 0xd27a, 0x30af, 0xe908, 0x0, 0x1);
        gbc.writeMem(0x7978, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x4baa);
        EXPECT(gbc.pc(), 0x7979);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0071
        gbc.setState(0x41d9, 0xc8ee, 0xea50, 0x78c9, 0xa4f, 0x1155, 0x0, 0x0);
        gbc.writeMem(0x41d9, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xc8ee);
        EXPECT(gbc.pc(), 0x41da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0072
        gbc.setState(0xe036, 0x2570, 0xab00, 0xcb84, 0x2138, 0xe179, 0x1, 0x1);
        gbc.writeMem(0xe036, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x2570);
        EXPECT(gbc.pc(), 0xe037);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe036), 0x7f);
        // 7F 0073
        gbc.setState(0xcecf, 0xb7db, 0x9d00, 0x3b84, 0x6d27, 0x6ed2, 0x0, 0x1);
        gbc.writeMem(0xcecf, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xb7db);
        EXPECT(gbc.pc(), 0xced0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcecf), 0x7f);
        // 7F 0074
        gbc.setState(0xef0e, 0xd842, 0x7910, 0xbea7, 0x9c54, 0xdee6, 0x1, 0x1);
        gbc.writeMem(0xef0e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xd842);
        EXPECT(gbc.pc(), 0xef0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef0e), 0x7f);
        // 7F 0076
        gbc.setState(0x4d39, 0xc6b7, 0x8860, 0xdcc4, 0xd4a, 0xc625, 0x0, 0x0);
        gbc.writeMem(0x4d39, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xc6b7);
        EXPECT(gbc.pc(), 0x4d3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0077
        gbc.setState(0xdfd1, 0x1b5a, 0x8f0, 0x809, 0xa9b1, 0x8248, 0x0, 0x0);
        gbc.writeMem(0xdfd1, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x1b5a);
        EXPECT(gbc.pc(), 0xdfd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfd1), 0x7f);
        // 7F 0078
        gbc.setState(0x8c1c, 0xe9b2, 0xd450, 0x343d, 0x4210, 0xffcb, 0x0, 0x1);
        gbc.writeMem(0x8c1c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xe9b2);
        EXPECT(gbc.pc(), 0x8c1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c1c), 0x7f);
        // 7F 0079
        gbc.setState(0xb46, 0xb06a, 0xfb20, 0x2a51, 0x7092, 0xdae, 0x1, 0x1);
        gbc.writeMem(0xb46, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xb06a);
        EXPECT(gbc.pc(), 0xb47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 007C
        gbc.setState(0x696a, 0x4f18, 0xa450, 0xb8a2, 0xe518, 0x1b30, 0x1, 0x1);
        gbc.writeMem(0x696a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x4f18);
        EXPECT(gbc.pc(), 0x696b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 007E
        gbc.setState(0xc398, 0x8999, 0xa610, 0xb80d, 0xb927, 0x5880, 0x1, 0x1);
        gbc.writeMem(0xc398, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x8999);
        EXPECT(gbc.pc(), 0xc399);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc398), 0x7f);
        // 7F 007F
        gbc.setState(0x32d9, 0x1cbf, 0xb5d0, 0x2c69, 0xa766, 0x7d4d, 0x1, 0x0);
        gbc.writeMem(0x32d9, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x1cbf);
        EXPECT(gbc.pc(), 0x32da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0080
        gbc.setState(0xeb76, 0x74ee, 0x7d50, 0x2af3, 0x4c68, 0xb1fc, 0x0, 0x1);
        gbc.writeMem(0xeb76, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x74ee);
        EXPECT(gbc.pc(), 0xeb77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb76), 0x7f);
        // 7F 0081
        gbc.setState(0xd2d4, 0x9362, 0x3490, 0xa04c, 0xaaca, 0x78ce, 0x1, 0x0);
        gbc.writeMem(0xd2d4, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x9362);
        EXPECT(gbc.pc(), 0xd2d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2d4), 0x7f);
        // 7F 0082
        gbc.setState(0xcb60, 0x8305, 0x39f0, 0x3ed4, 0xfe02, 0x71f6, 0x0, 0x1);
        gbc.writeMem(0xcb60, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x8305);
        EXPECT(gbc.pc(), 0xcb61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb60), 0x7f);
        // 7F 0083
        gbc.setState(0x72eb, 0xff6e, 0x2470, 0x9c1, 0x4a, 0x9864, 0x0, 0x1);
        gbc.writeMem(0x72eb, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xff6e);
        EXPECT(gbc.pc(), 0x72ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0084
        gbc.setState(0x669a, 0xc00d, 0xd820, 0xc6c6, 0x4967, 0x3f00, 0x0, 0x1);
        gbc.writeMem(0x669a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xc00d);
        EXPECT(gbc.pc(), 0x669b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0085
        gbc.setState(0xec8d, 0x3cde, 0xdf30, 0xea45, 0xd849, 0x3485, 0x0, 0x1);
        gbc.writeMem(0xec8d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x3cde);
        EXPECT(gbc.pc(), 0xec8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec8d), 0x7f);
        // 7F 0086
        gbc.setState(0xb79e, 0x6afe, 0x11a0, 0x59a5, 0x4f89, 0xb34e, 0x0, 0x1);
        gbc.writeMem(0xb79e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x6afe);
        EXPECT(gbc.pc(), 0xb79f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb79e), 0x7f);
        // 7F 0087
        gbc.setState(0x979f, 0x99ed, 0x1530, 0xb2c3, 0xfc87, 0xd416, 0x0, 0x1);
        gbc.writeMem(0x979f, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x99ed);
        EXPECT(gbc.pc(), 0x97a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x979f), 0x7f);
        // 7F 0088
        gbc.setState(0x1492, 0x615, 0x10b0, 0x5ef4, 0xa611, 0x5405, 0x0, 0x1);
        gbc.writeMem(0x1492, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x615);
        EXPECT(gbc.pc(), 0x1493);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0089
        gbc.setState(0x4256, 0x4ed2, 0x2f70, 0x80f7, 0xeb00, 0x1211, 0x0, 0x1);
        gbc.writeMem(0x4256, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x4ed2);
        EXPECT(gbc.pc(), 0x4257);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 008A
        gbc.setState(0x2757, 0xcaae, 0x7060, 0xa35f, 0x55cc, 0xc600, 0x0, 0x1);
        gbc.writeMem(0x2757, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xcaae);
        EXPECT(gbc.pc(), 0x2758);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 008B
        gbc.setState(0x11b4, 0x9e25, 0xc650, 0x8fb0, 0xc70a, 0x1bf3, 0x0, 0x0);
        gbc.writeMem(0x11b4, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x9e25);
        EXPECT(gbc.pc(), 0x11b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 008C
        gbc.setState(0x9df1, 0x218a, 0x6420, 0x950c, 0xca1f, 0x939b, 0x1, 0x1);
        gbc.writeMem(0x9df1, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x218a);
        EXPECT(gbc.pc(), 0x9df2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9df1), 0x7f);
        // 7F 008D
        gbc.setState(0x7656, 0x23c6, 0x1e80, 0xd042, 0x1511, 0xe586, 0x1, 0x0);
        gbc.writeMem(0x7656, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x23c6);
        EXPECT(gbc.pc(), 0x7657);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 008E
        gbc.setState(0xba69, 0x922, 0x8050, 0x8e14, 0x7aec, 0xdfca, 0x0, 0x0);
        gbc.writeMem(0xba69, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x922);
        EXPECT(gbc.pc(), 0xba6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba69), 0x7f);
        // 7F 0091
        gbc.setState(0xc04c, 0xc891, 0xf940, 0x2dd0, 0x107c, 0xbbba, 0x0, 0x1);
        gbc.writeMem(0xc04c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xc891);
        EXPECT(gbc.pc(), 0xc04d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc04c), 0x7f);
        // 7F 0092
        gbc.setState(0x1b85, 0xbd9, 0x3b90, 0xe9fb, 0x81a9, 0xfcfa, 0x1, 0x0);
        gbc.writeMem(0x1b85, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xbd9);
        EXPECT(gbc.pc(), 0x1b86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0093
        gbc.setState(0x7691, 0x9a5f, 0xd650, 0xff11, 0x4998, 0xd2a3, 0x0, 0x0);
        gbc.writeMem(0x7691, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x9a5f);
        EXPECT(gbc.pc(), 0x7692);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0094
        gbc.setState(0x46ed, 0x55cf, 0xbf30, 0x8f5d, 0x1b55, 0xfba1, 0x0, 0x1);
        gbc.writeMem(0x46ed, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x55cf);
        EXPECT(gbc.pc(), 0x46ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0095
        gbc.setState(0xea3c, 0x47f2, 0x6fb0, 0x95a3, 0x2d00, 0xe95a, 0x1, 0x1);
        gbc.writeMem(0xea3c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x47f2);
        EXPECT(gbc.pc(), 0xea3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea3c), 0x7f);
        // 7F 0096
        gbc.setState(0x7129, 0xeefe, 0x9ea0, 0x9e32, 0x473f, 0x973a, 0x0, 0x0);
        gbc.writeMem(0x7129, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xeefe);
        EXPECT(gbc.pc(), 0x712a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0097
        gbc.setState(0xde60, 0x7a21, 0x4dd0, 0x6546, 0x20ed, 0x3c7d, 0x0, 0x1);
        gbc.writeMem(0xde60, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x7a21);
        EXPECT(gbc.pc(), 0xde61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde60), 0x7f);
        // 7F 0098
        gbc.setState(0x683c, 0x4bec, 0xbc30, 0x5ecb, 0x6e56, 0xb785, 0x0, 0x1);
        gbc.writeMem(0x683c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x4bec);
        EXPECT(gbc.pc(), 0x683d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0099
        gbc.setState(0x8bb4, 0xc100, 0xd7c0, 0x6d4d, 0x2fa0, 0x9870, 0x1, 0x0);
        gbc.writeMem(0x8bb4, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xc100);
        EXPECT(gbc.pc(), 0x8bb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bb4), 0x7f);
        // 7F 009A
        gbc.setState(0x321c, 0xff9d, 0xac00, 0xfaeb, 0x8256, 0x786b, 0x0, 0x1);
        gbc.writeMem(0x321c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xff9d);
        EXPECT(gbc.pc(), 0x321d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 009B
        gbc.setState(0x8b96, 0xb2e, 0x2d10, 0x5a0e, 0x3eed, 0xe423, 0x0, 0x0);
        gbc.writeMem(0x8b96, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xb2e);
        EXPECT(gbc.pc(), 0x8b97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b96), 0x7f);
        // 7F 009C
        gbc.setState(0xc494, 0x32a, 0xf300, 0x222e, 0x1e39, 0xddd0, 0x1, 0x0);
        gbc.writeMem(0xc494, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x32a);
        EXPECT(gbc.pc(), 0xc495);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc494), 0x7f);
        // 7F 009D
        gbc.setState(0xd351, 0x400c, 0x4a80, 0x6448, 0x2df7, 0x9d50, 0x1, 0x1);
        gbc.writeMem(0xd351, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x400c);
        EXPECT(gbc.pc(), 0xd352);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd351), 0x7f);
        // 7F 009E
        gbc.setState(0xde0, 0x32b8, 0x9510, 0xf43d, 0x2300, 0x9bd0, 0x0, 0x0);
        gbc.writeMem(0xde0, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x32b8);
        EXPECT(gbc.pc(), 0xde1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 009F
        gbc.setState(0x33f8, 0x668e, 0x3a0, 0x5067, 0x9c04, 0x4c63, 0x1, 0x1);
        gbc.writeMem(0x33f8, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x668e);
        EXPECT(gbc.pc(), 0x33f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 00A0
        gbc.setState(0xd62e, 0x2a91, 0xff10, 0x3296, 0xdf0b, 0x9f6d, 0x0, 0x0);
        gbc.writeMem(0xd62e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x2a91);
        EXPECT(gbc.pc(), 0xd62f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd62e), 0x7f);
        // 7F 00A1
        gbc.setState(0xab18, 0x3861, 0x3980, 0x496c, 0xb910, 0x3428, 0x1, 0x0);
        gbc.writeMem(0xab18, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x3861);
        EXPECT(gbc.pc(), 0xab19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab18), 0x7f);
        // 7F 00A2
        gbc.setState(0x68be, 0xe43d, 0xaac0, 0xa76d, 0x49e7, 0xdae4, 0x1, 0x1);
        gbc.writeMem(0x68be, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xe43d);
        EXPECT(gbc.pc(), 0x68bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 00A3
        gbc.setState(0x5c33, 0xfcfa, 0x6840, 0xbc15, 0xb431, 0x9046, 0x0, 0x1);
        gbc.writeMem(0x5c33, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xfcfa);
        EXPECT(gbc.pc(), 0x5c34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 00A4
        gbc.setState(0xb56e, 0xf292, 0x2c70, 0x64bf, 0x81bd, 0xc8be, 0x0, 0x1);
        gbc.writeMem(0xb56e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xf292);
        EXPECT(gbc.pc(), 0xb56f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb56e), 0x7f);
        // 7F 00A5
        gbc.setState(0xddc5, 0xee70, 0x3180, 0xa2f8, 0x6f44, 0x9013, 0x1, 0x0);
        gbc.writeMem(0xddc5, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xee70);
        EXPECT(gbc.pc(), 0xddc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddc5), 0x7f);
        // 7F 00A6
        gbc.setState(0x3ffd, 0x812a, 0xf620, 0x43d3, 0x38c8, 0xeacd, 0x1, 0x1);
        gbc.writeMem(0x3ffd, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x812a);
        EXPECT(gbc.pc(), 0x3ffe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 00A7
        gbc.setState(0xdfba, 0x62e3, 0x7c80, 0x4829, 0x322c, 0xdace, 0x0, 0x1);
        gbc.writeMem(0xdfba, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x62e3);
        EXPECT(gbc.pc(), 0xdfbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfba), 0x7f);
        // 7F 00A8
        gbc.setState(0x9d69, 0xa1fa, 0xdea0, 0xd0a7, 0x45f5, 0xb75d, 0x1, 0x0);
        gbc.writeMem(0x9d69, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xa1fa);
        EXPECT(gbc.pc(), 0x9d6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d69), 0x7f);
        // 7F 00A9
        gbc.setState(0xda60, 0xa77c, 0x24d0, 0x3523, 0x26, 0x4c4c, 0x0, 0x1);
        gbc.writeMem(0xda60, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xa77c);
        EXPECT(gbc.pc(), 0xda61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda60), 0x7f);
        // 7F 00AA
        gbc.setState(0x7dc8, 0x481e, 0x1d40, 0xe474, 0xd4ce, 0x8014, 0x0, 0x0);
        gbc.writeMem(0x7dc8, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x481e);
        EXPECT(gbc.pc(), 0x7dc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 00AB
        gbc.setState(0x311a, 0x6775, 0x74a0, 0x8, 0x2d6a, 0x4a3d, 0x1, 0x1);
        gbc.writeMem(0x311a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x6775);
        EXPECT(gbc.pc(), 0x311b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 00AC
        gbc.setState(0xd1bf, 0xac3f, 0x5ec0, 0x997e, 0xd2cc, 0x2cfb, 0x0, 0x1);
        gbc.writeMem(0xd1bf, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xac3f);
        EXPECT(gbc.pc(), 0xd1c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1bf), 0x7f);
        // 7F 00AD
        gbc.setState(0x38f4, 0x8cb, 0x3e80, 0x1ef7, 0x96df, 0x9df9, 0x0, 0x1);
        gbc.writeMem(0x38f4, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x8cb);
        EXPECT(gbc.pc(), 0x38f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 00AE
        gbc.setState(0x6d7d, 0x4a4c, 0x22a0, 0x684e, 0x8c4f, 0x783e, 0x1, 0x1);
        gbc.writeMem(0x6d7d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x4a4c);
        EXPECT(gbc.pc(), 0x6d7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 00AF
        gbc.setState(0x94ab, 0x8b85, 0xf980, 0x20e6, 0x42f6, 0x40fe, 0x1, 0x0);
        gbc.writeMem(0x94ab, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x8b85);
        EXPECT(gbc.pc(), 0x94ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94ab), 0x7f);
        // 7F 00B0
        gbc.setState(0xdd40, 0x482f, 0x31a0, 0x363f, 0xeaba, 0x753c, 0x0, 0x0);
        gbc.writeMem(0xdd40, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x482f);
        EXPECT(gbc.pc(), 0xdd41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd40), 0x7f);
        // 7F 00B1
        gbc.setState(0xb973, 0xa789, 0x28e0, 0xdf61, 0x5bee, 0xae71, 0x0, 0x1);
        gbc.writeMem(0xb973, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xa789);
        EXPECT(gbc.pc(), 0xb974);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb973), 0x7f);
        // 7F 00B2
        gbc.setState(0x1c9a, 0x2f20, 0x2490, 0xf0d8, 0x3059, 0x6bc4, 0x1, 0x1);
        gbc.writeMem(0x1c9a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x2f20);
        EXPECT(gbc.pc(), 0x1c9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 00B3
        gbc.setState(0x60b, 0x4153, 0x6c0, 0xbc9e, 0xfa8b, 0xb4f7, 0x0, 0x1);
        gbc.writeMem(0x60b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x4153);
        EXPECT(gbc.pc(), 0x60c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 00B5
        gbc.setState(0x8c56, 0xf9c, 0x32f0, 0x5133, 0x644b, 0xe3a2, 0x1, 0x1);
        gbc.writeMem(0x8c56, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xf9c);
        EXPECT(gbc.pc(), 0x8c57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c56), 0x7f);
        // 7F 00B7
        gbc.setState(0x89bd, 0xcc7b, 0xa2c0, 0x5c76, 0x2ccc, 0x3a7e, 0x0, 0x1);
        gbc.writeMem(0x89bd, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xcc7b);
        EXPECT(gbc.pc(), 0x89be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89bd), 0x7f);
        // 7F 00B8
        gbc.setState(0x1709, 0xf2c6, 0x560, 0xd758, 0x472, 0x29fb, 0x0, 0x1);
        gbc.writeMem(0x1709, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xf2c6);
        EXPECT(gbc.pc(), 0x170a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 00B9
        gbc.setState(0x14db, 0xfeca, 0xb9a0, 0x971b, 0x2c25, 0xa22, 0x0, 0x1);
        gbc.writeMem(0x14db, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xfeca);
        EXPECT(gbc.pc(), 0x14dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 00BA
        gbc.setState(0xd76d, 0x1054, 0x4700, 0x9122, 0x252a, 0x819, 0x1, 0x0);
        gbc.writeMem(0xd76d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x1054);
        EXPECT(gbc.pc(), 0xd76e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd76d), 0x7f);
        // 7F 00BB
        gbc.setState(0xcd67, 0xf66c, 0xb840, 0xae42, 0x1068, 0x659a, 0x0, 0x0);
        gbc.writeMem(0xcd67, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xf66c);
        EXPECT(gbc.pc(), 0xcd68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd67), 0x7f);
        // 7F 00BC
        gbc.setState(0xed3b, 0x262f, 0xcdb0, 0x6424, 0x60f0, 0x65f9, 0x0, 0x1);
        gbc.writeMem(0xed3b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x262f);
        EXPECT(gbc.pc(), 0xed3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed3b), 0x7f);
        // 7F 00BD
        gbc.setState(0x733c, 0x1a0c, 0x3ce0, 0x47a5, 0x4fa0, 0x3204, 0x0, 0x1);
        gbc.writeMem(0x733c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x1a0c);
        EXPECT(gbc.pc(), 0x733d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 00BE
        gbc.setState(0x8374, 0xa0be, 0xc320, 0xdf59, 0x2347, 0x8e65, 0x0, 0x0);
        gbc.writeMem(0x8374, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xa0be);
        EXPECT(gbc.pc(), 0x8375);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8374), 0x7f);
        // 7F 00BF
        gbc.setState(0x6f53, 0xe119, 0x31e0, 0xc03, 0x799b, 0x1515, 0x1, 0x1);
        gbc.writeMem(0x6f53, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xe119);
        EXPECT(gbc.pc(), 0x6f54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 00C0
        gbc.setState(0x32b0, 0xc2b1, 0xf6b0, 0xaf97, 0x78d7, 0xc52f, 0x1, 0x1);
        gbc.writeMem(0x32b0, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xc2b1);
        EXPECT(gbc.pc(), 0x32b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 00C1
        gbc.setState(0xb270, 0x69d, 0xea50, 0xb446, 0x44d0, 0x6a86, 0x1, 0x0);
        gbc.writeMem(0xb270, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x69d);
        EXPECT(gbc.pc(), 0xb271);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb270), 0x7f);
        // 7F 00C2
        gbc.setState(0xb190, 0xf597, 0x4070, 0x5e7e, 0x8ecf, 0x22d, 0x1, 0x1);
        gbc.writeMem(0xb190, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xf597);
        EXPECT(gbc.pc(), 0xb191);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb190), 0x7f);
        // 7F 00C3
        gbc.setState(0x5fc3, 0xedc4, 0x5c50, 0xf67f, 0x94bd, 0xd51e, 0x0, 0x0);
        gbc.writeMem(0x5fc3, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xedc4);
        EXPECT(gbc.pc(), 0x5fc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 00C4
        gbc.setState(0xd2f3, 0x6c82, 0x3c60, 0xd1be, 0xed5f, 0xf47c, 0x0, 0x1);
        gbc.writeMem(0xd2f3, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x6c82);
        EXPECT(gbc.pc(), 0xd2f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2f3), 0x7f);
        // 7F 00C5
        gbc.setState(0x7e67, 0x64b7, 0xc10, 0x9e39, 0x140d, 0x5130, 0x0, 0x0);
        gbc.writeMem(0x7e67, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x64b7);
        EXPECT(gbc.pc(), 0x7e68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 00C6
        gbc.setState(0x6902, 0x6d7d, 0x6600, 0x83af, 0x64fc, 0xf701, 0x1, 0x0);
        gbc.writeMem(0x6902, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x6d7d);
        EXPECT(gbc.pc(), 0x6903);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 00C7
        gbc.setState(0xc52f, 0xeac6, 0x4eb0, 0x5f9c, 0x1e18, 0xc200, 0x0, 0x1);
        gbc.writeMem(0xc52f, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xeac6);
        EXPECT(gbc.pc(), 0xc530);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc52f), 0x7f);
        // 7F 00C8
        gbc.setState(0x3f4d, 0x66e0, 0x45a0, 0xd03e, 0xa37a, 0xd3f6, 0x1, 0x1);
        gbc.writeMem(0x3f4d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x66e0);
        EXPECT(gbc.pc(), 0x3f4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 00C9
        gbc.setState(0xe96e, 0xa06a, 0x4ca0, 0x6c51, 0x538c, 0xf43, 0x1, 0x1);
        gbc.writeMem(0xe96e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xa06a);
        EXPECT(gbc.pc(), 0xe96f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe96e), 0x7f);
        // 7F 00CA
        gbc.setState(0x9416, 0xe961, 0x2650, 0x82d4, 0x36de, 0x7dce, 0x1, 0x0);
        gbc.writeMem(0x9416, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xe961);
        EXPECT(gbc.pc(), 0x9417);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9416), 0x7f);
        // 7F 00CB
        gbc.setState(0x5763, 0xe9b, 0x740, 0xa592, 0xbf92, 0xb0f6, 0x0, 0x0);
        gbc.writeMem(0x5763, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xe9b);
        EXPECT(gbc.pc(), 0x5764);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 00CC
        gbc.setState(0x5678, 0x3f88, 0x8040, 0x55b0, 0x70de, 0xa1d6, 0x1, 0x1);
        gbc.writeMem(0x5678, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x3f88);
        EXPECT(gbc.pc(), 0x5679);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 00CD
        gbc.setState(0xbb6c, 0xce76, 0xa9e0, 0x619e, 0x7dc3, 0x88e1, 0x1, 0x1);
        gbc.writeMem(0xbb6c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xce76);
        EXPECT(gbc.pc(), 0xbb6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb6c), 0x7f);
        // 7F 00CE
        gbc.setState(0xdd9e, 0x49f2, 0x1a50, 0x2ef7, 0x4248, 0x6dd2, 0x1, 0x1);
        gbc.writeMem(0xdd9e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x49f2);
        EXPECT(gbc.pc(), 0xdd9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd9e), 0x7f);
        // 7F 00CF
        gbc.setState(0x3026, 0x2116, 0x7f60, 0xf6f4, 0xe2f7, 0xacdf, 0x0, 0x1);
        gbc.writeMem(0x3026, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x2116);
        EXPECT(gbc.pc(), 0x3027);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 00D0
        gbc.setState(0xd6cb, 0xe226, 0x3c80, 0xf990, 0xe6eb, 0x25d3, 0x0, 0x0);
        gbc.writeMem(0xd6cb, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xe226);
        EXPECT(gbc.pc(), 0xd6cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6cb), 0x7f);
        // 7F 00D1
        gbc.setState(0x68a3, 0xa892, 0x5ae0, 0xb761, 0x977f, 0xdc19, 0x1, 0x0);
        gbc.writeMem(0x68a3, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xa892);
        EXPECT(gbc.pc(), 0x68a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 00D2
        gbc.setState(0xe0de, 0x1a39, 0xbc60, 0x6ccc, 0xa0d5, 0x73b8, 0x1, 0x0);
        gbc.writeMem(0xe0de, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x1a39);
        EXPECT(gbc.pc(), 0xe0df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0de), 0x7f);
        // 7F 00D3
        gbc.setState(0xa928, 0x80ee, 0xd550, 0xcb3a, 0x5261, 0x20ac, 0x1, 0x1);
        gbc.writeMem(0xa928, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x80ee);
        EXPECT(gbc.pc(), 0xa929);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa928), 0x7f);
        // 7F 00D4
        gbc.setState(0xc591, 0x899f, 0x6c00, 0xf53c, 0x703d, 0xbb7, 0x1, 0x1);
        gbc.writeMem(0xc591, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x899f);
        EXPECT(gbc.pc(), 0xc592);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc591), 0x7f);
        // 7F 00D5
        gbc.setState(0x60b7, 0xcb03, 0x80b0, 0xeae8, 0x3c49, 0x3538, 0x0, 0x0);
        gbc.writeMem(0x60b7, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xcb03);
        EXPECT(gbc.pc(), 0x60b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 00D6
        gbc.setState(0x8711, 0x34e3, 0xcc90, 0xe046, 0x72a, 0xea11, 0x1, 0x1);
        gbc.writeMem(0x8711, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x34e3);
        EXPECT(gbc.pc(), 0x8712);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8711), 0x7f);
        // 7F 00D7
        gbc.setState(0xa175, 0xe424, 0x3720, 0x84cf, 0xa90b, 0xea21, 0x0, 0x0);
        gbc.writeMem(0xa175, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xe424);
        EXPECT(gbc.pc(), 0xa176);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa175), 0x7f);
        // 7F 00D8
        gbc.setState(0x6683, 0x7185, 0xbc0, 0x80a9, 0x465a, 0xb420, 0x1, 0x1);
        gbc.writeMem(0x6683, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x7185);
        EXPECT(gbc.pc(), 0x6684);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 00D9
        gbc.setState(0xec5d, 0xe973, 0x9730, 0xf992, 0xc586, 0x5b1e, 0x1, 0x1);
        gbc.writeMem(0xec5d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xe973);
        EXPECT(gbc.pc(), 0xec5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec5d), 0x7f);
        // 7F 00DA
        gbc.setState(0xaa9c, 0xa5f6, 0xfd70, 0xfbb7, 0x7e52, 0xcdba, 0x1, 0x0);
        gbc.writeMem(0xaa9c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xa5f6);
        EXPECT(gbc.pc(), 0xaa9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa9c), 0x7f);
        // 7F 00DB
        gbc.setState(0x1a74, 0x5d7b, 0x9f60, 0xcf60, 0xd6c, 0xa520, 0x1, 0x1);
        gbc.writeMem(0x1a74, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x5d7b);
        EXPECT(gbc.pc(), 0x1a75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 00DC
        gbc.setState(0xddc3, 0x5d8d, 0x4080, 0x50c6, 0xf2d2, 0x77ee, 0x1, 0x0);
        gbc.writeMem(0xddc3, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x5d8d);
        EXPECT(gbc.pc(), 0xddc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddc3), 0x7f);
        // 7F 00DD
        gbc.setState(0x4267, 0xb558, 0x7d20, 0xf738, 0x6731, 0xf659, 0x1, 0x0);
        gbc.writeMem(0x4267, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xb558);
        EXPECT(gbc.pc(), 0x4268);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 00DE
        gbc.setState(0x3411, 0xfe6e, 0xbb50, 0x4109, 0x5fe7, 0xca96, 0x1, 0x0);
        gbc.writeMem(0x3411, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xfe6e);
        EXPECT(gbc.pc(), 0x3412);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 00DF
        gbc.setState(0x18d5, 0x60eb, 0x5b10, 0xc855, 0x5b1e, 0x3a68, 0x1, 0x1);
        gbc.writeMem(0x18d5, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x60eb);
        EXPECT(gbc.pc(), 0x18d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 00E0
        gbc.setState(0x335e, 0xe114, 0xefd0, 0xf922, 0x708, 0xe89b, 0x0, 0x0);
        gbc.writeMem(0x335e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xe114);
        EXPECT(gbc.pc(), 0x335f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 00E1
        gbc.setState(0x4166, 0x3837, 0x5af0, 0x49eb, 0xc5ed, 0x36c0, 0x0, 0x0);
        gbc.writeMem(0x4166, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x3837);
        EXPECT(gbc.pc(), 0x4167);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 00E2
        gbc.setState(0xa7b6, 0x1780, 0x3e60, 0x7375, 0x96d4, 0x5625, 0x0, 0x0);
        gbc.writeMem(0xa7b6, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x1780);
        EXPECT(gbc.pc(), 0xa7b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7b6), 0x7f);
        // 7F 00E3
        gbc.setState(0x89f9, 0x9763, 0xd830, 0xc5a0, 0x88e8, 0x11f0, 0x0, 0x0);
        gbc.writeMem(0x89f9, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x9763);
        EXPECT(gbc.pc(), 0x89fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89f9), 0x7f);
        // 7F 00E4
        gbc.setState(0x2ebd, 0x26c8, 0x2c50, 0x20ba, 0x18e4, 0x96c, 0x0, 0x1);
        gbc.writeMem(0x2ebd, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x26c8);
        EXPECT(gbc.pc(), 0x2ebe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 00E5
        gbc.setState(0x830d, 0x178c, 0x3230, 0x7f7, 0xc570, 0xa266, 0x1, 0x1);
        gbc.writeMem(0x830d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x178c);
        EXPECT(gbc.pc(), 0x830e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x830d), 0x7f);
        // 7F 00E6
        gbc.setState(0xe4b5, 0x3a5f, 0x82a0, 0x13c6, 0x59b1, 0x53af, 0x0, 0x1);
        gbc.writeMem(0xe4b5, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x3a5f);
        EXPECT(gbc.pc(), 0xe4b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4b5), 0x7f);
        // 7F 00E7
        gbc.setState(0x17ef, 0x3f82, 0x2170, 0x866a, 0xe286, 0xe4e9, 0x1, 0x1);
        gbc.writeMem(0x17ef, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x3f82);
        EXPECT(gbc.pc(), 0x17f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 00E8
        gbc.setState(0x8e95, 0x35ba, 0xb920, 0xff14, 0xa96c, 0x541f, 0x0, 0x1);
        gbc.writeMem(0x8e95, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x35ba);
        EXPECT(gbc.pc(), 0x8e96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e95), 0x7f);
        // 7F 00E9
        gbc.setState(0xc15a, 0xfd0e, 0xe3f0, 0xe330, 0x377a, 0x1277, 0x1, 0x0);
        gbc.writeMem(0xc15a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xfd0e);
        EXPECT(gbc.pc(), 0xc15b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc15a), 0x7f);
        // 7F 00EA
        gbc.setState(0xab09, 0xefc7, 0xeb80, 0xe15d, 0x693d, 0xec3, 0x1, 0x0);
        gbc.writeMem(0xab09, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xefc7);
        EXPECT(gbc.pc(), 0xab0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab09), 0x7f);
        // 7F 00EB
        gbc.setState(0x6235, 0x8fa9, 0xbfe0, 0xafed, 0x29ca, 0xefe0, 0x1, 0x1);
        gbc.writeMem(0x6235, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x8fa9);
        EXPECT(gbc.pc(), 0x6236);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 00EC
        gbc.setState(0xbfb8, 0xe3a1, 0x3bb0, 0xa76a, 0xdf55, 0x847e, 0x0, 0x0);
        gbc.writeMem(0xbfb8, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xe3a1);
        EXPECT(gbc.pc(), 0xbfb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfb8), 0x7f);
        // 7F 00ED
        gbc.setState(0xebe5, 0x753d, 0xdc00, 0xe0bc, 0x4e86, 0xeb94, 0x0, 0x0);
        gbc.writeMem(0xebe5, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x753d);
        EXPECT(gbc.pc(), 0xebe6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebe5), 0x7f);
        // 7F 00EF
        gbc.setState(0x2e99, 0x847d, 0x33b0, 0x6676, 0x6f46, 0x74c5, 0x0, 0x1);
        gbc.writeMem(0x2e99, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x847d);
        EXPECT(gbc.pc(), 0x2e9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 00F0
        gbc.setState(0x20d0, 0x4059, 0x2040, 0x97ff, 0xc126, 0xbb6c, 0x0, 0x0);
        gbc.writeMem(0x20d0, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x4059);
        EXPECT(gbc.pc(), 0x20d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 00F1
        gbc.setState(0xa487, 0x93aa, 0x88a0, 0xc8e2, 0x9138, 0x1138, 0x0, 0x0);
        gbc.writeMem(0xa487, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x93aa);
        EXPECT(gbc.pc(), 0xa488);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa487), 0x7f);
        // 7F 00F3
        gbc.setState(0xd0b7, 0xb82, 0xcfb0, 0x92a3, 0xb03b, 0x85b8, 0x1, 0x1);
        gbc.writeMem(0xd0b7, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xb82);
        EXPECT(gbc.pc(), 0xd0b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0b7), 0x7f);
        // 7F 00F4
        gbc.setState(0x5325, 0xdaad, 0xe350, 0xd16f, 0xf901, 0xaa6b, 0x1, 0x1);
        gbc.writeMem(0x5325, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xdaad);
        EXPECT(gbc.pc(), 0x5326);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 00F5
        gbc.setState(0x4c0c, 0xd376, 0xc9a0, 0x7fc, 0x12d, 0xc2c7, 0x1, 0x0);
        gbc.writeMem(0x4c0c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xd376);
        EXPECT(gbc.pc(), 0x4c0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 00F6
        gbc.setState(0x9c3b, 0xdfc9, 0x2f00, 0xbad9, 0x4e6f, 0xe01f, 0x1, 0x0);
        gbc.writeMem(0x9c3b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xdfc9);
        EXPECT(gbc.pc(), 0x9c3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c3b), 0x7f);
        // 7F 00F7
        gbc.setState(0xdc65, 0x7104, 0xcab0, 0x760e, 0x73b0, 0x7a59, 0x1, 0x1);
        gbc.writeMem(0xdc65, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x7104);
        EXPECT(gbc.pc(), 0xdc66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc65), 0x7f);
        // 7F 00F8
        gbc.setState(0x86a2, 0x387, 0xe990, 0xd73e, 0x13d3, 0x9faf, 0x1, 0x0);
        gbc.writeMem(0x86a2, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x387);
        EXPECT(gbc.pc(), 0x86a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86a2), 0x7f);
        // 7F 00F9
        gbc.setState(0xd829, 0x5982, 0x5650, 0x421e, 0x8e4b, 0x118c, 0x1, 0x0);
        gbc.writeMem(0xd829, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x5982);
        EXPECT(gbc.pc(), 0xd82a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd829), 0x7f);
        // 7F 00FA
        gbc.setState(0x3300, 0x6da3, 0xdd0, 0x440f, 0x5d7a, 0xac54, 0x0, 0x0);
        gbc.writeMem(0x3300, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x6da3);
        EXPECT(gbc.pc(), 0x3301);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 00FB
        gbc.setState(0x196e, 0xac89, 0x9cf0, 0xa016, 0x9721, 0x6332, 0x1, 0x0);
        gbc.writeMem(0x196e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xac89);
        EXPECT(gbc.pc(), 0x196f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 00FC
        gbc.setState(0x32ef, 0x4fb9, 0xe570, 0xb374, 0xf6bb, 0xa641, 0x1, 0x0);
        gbc.writeMem(0x32ef, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x4fb9);
        EXPECT(gbc.pc(), 0x32f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 00FD
        gbc.setState(0xf0a, 0xd561, 0x1720, 0x8cb4, 0xba80, 0xac18, 0x0, 0x0);
        gbc.writeMem(0xf0a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xd561);
        EXPECT(gbc.pc(), 0xf0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 00FE
        gbc.setState(0x19dc, 0x5a28, 0xf1b0, 0xf47d, 0x272d, 0x1c21, 0x1, 0x1);
        gbc.writeMem(0x19dc, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x5a28);
        EXPECT(gbc.pc(), 0x19dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0100
        gbc.setState(0xb19b, 0x8af8, 0x6c00, 0x40dc, 0x9f87, 0xc0a5, 0x0, 0x0);
        gbc.writeMem(0xb19b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x8af8);
        EXPECT(gbc.pc(), 0xb19c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb19b), 0x7f);
        // 7F 0102
        gbc.setState(0xaf6d, 0x26d, 0xeeb0, 0x7b84, 0xb887, 0x8dd9, 0x1, 0x0);
        gbc.writeMem(0xaf6d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x26d);
        EXPECT(gbc.pc(), 0xaf6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf6d), 0x7f);
        // 7F 0104
        gbc.setState(0x3fea, 0xff7e, 0xc1c0, 0x8336, 0x3636, 0x7782, 0x0, 0x1);
        gbc.writeMem(0x3fea, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xff7e);
        EXPECT(gbc.pc(), 0x3feb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0105
        gbc.setState(0xd4fe, 0x6c03, 0xe170, 0x749d, 0xd1d9, 0x8ea7, 0x1, 0x0);
        gbc.writeMem(0xd4fe, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x6c03);
        EXPECT(gbc.pc(), 0xd4ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4fe), 0x7f);
        // 7F 0106
        gbc.setState(0x2e72, 0x9bba, 0x17d0, 0x7048, 0xde2e, 0xdf07, 0x1, 0x1);
        gbc.writeMem(0x2e72, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x9bba);
        EXPECT(gbc.pc(), 0x2e73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0107
        gbc.setState(0x430, 0x4a7c, 0xa430, 0x83e, 0x854c, 0x2cad, 0x0, 0x0);
        gbc.writeMem(0x430, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x4a7c);
        EXPECT(gbc.pc(), 0x431);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0108
        gbc.setState(0xbc1b, 0xe333, 0x52b0, 0xa48c, 0xa45d, 0xe247, 0x0, 0x1);
        gbc.writeMem(0xbc1b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xe333);
        EXPECT(gbc.pc(), 0xbc1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc1b), 0x7f);
        // 7F 0109
        gbc.setState(0x5a10, 0x510e, 0xb510, 0xa176, 0x1a6d, 0x3d48, 0x0, 0x0);
        gbc.writeMem(0x5a10, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x510e);
        EXPECT(gbc.pc(), 0x5a11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 010A
        gbc.setState(0x4223, 0x84d4, 0x5d00, 0xd206, 0x5762, 0xcf6e, 0x1, 0x0);
        gbc.writeMem(0x4223, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x84d4);
        EXPECT(gbc.pc(), 0x4224);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 010C
        gbc.setState(0xa02d, 0x2af5, 0x1b80, 0x32c, 0x76a9, 0xfc92, 0x1, 0x1);
        gbc.writeMem(0xa02d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x2af5);
        EXPECT(gbc.pc(), 0xa02e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa02d), 0x7f);
        // 7F 010D
        gbc.setState(0xc896, 0x957e, 0xcbf0, 0x9660, 0x2bb1, 0xbe41, 0x0, 0x0);
        gbc.writeMem(0xc896, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x957e);
        EXPECT(gbc.pc(), 0xc897);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc896), 0x7f);
        // 7F 010E
        gbc.setState(0x9d85, 0xf4ff, 0x4ee0, 0x8c9b, 0xc6f1, 0x4938, 0x0, 0x0);
        gbc.writeMem(0x9d85, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xf4ff);
        EXPECT(gbc.pc(), 0x9d86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d85), 0x7f);
        // 7F 010F
        gbc.setState(0xc5eb, 0x51a8, 0x5d90, 0xbf72, 0xcf0c, 0xce47, 0x0, 0x1);
        gbc.writeMem(0xc5eb, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x51a8);
        EXPECT(gbc.pc(), 0xc5ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5eb), 0x7f);
        // 7F 0110
        gbc.setState(0x64c6, 0xe162, 0x45b0, 0x6f78, 0x3292, 0xa39b, 0x1, 0x1);
        gbc.writeMem(0x64c6, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xe162);
        EXPECT(gbc.pc(), 0x64c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0111
        gbc.setState(0xaad5, 0xc596, 0xd6d0, 0xa038, 0x91, 0x7325, 0x0, 0x1);
        gbc.writeMem(0xaad5, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xc596);
        EXPECT(gbc.pc(), 0xaad6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaad5), 0x7f);
        // 7F 0112
        gbc.setState(0x511f, 0x849a, 0x5f60, 0x8a3e, 0x483b, 0x88bf, 0x1, 0x0);
        gbc.writeMem(0x511f, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x849a);
        EXPECT(gbc.pc(), 0x5120);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0113
        gbc.setState(0xa386, 0xec6d, 0xf540, 0xfb56, 0xbbf8, 0x267a, 0x1, 0x1);
        gbc.writeMem(0xa386, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xec6d);
        EXPECT(gbc.pc(), 0xa387);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa386), 0x7f);
        // 7F 0115
        gbc.setState(0xebdc, 0x5564, 0x5c50, 0xd0e, 0xb37a, 0x20c7, 0x1, 0x0);
        gbc.writeMem(0xebdc, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x5564);
        EXPECT(gbc.pc(), 0xebdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebdc), 0x7f);
        // 7F 0116
        gbc.setState(0xc9e, 0xa48d, 0x1360, 0x1899, 0xf646, 0x460e, 0x0, 0x1);
        gbc.writeMem(0xc9e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xa48d);
        EXPECT(gbc.pc(), 0xc9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0117
        gbc.setState(0x6797, 0xd308, 0xa3a0, 0x1137, 0x5e41, 0x27bd, 0x0, 0x1);
        gbc.writeMem(0x6797, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xd308);
        EXPECT(gbc.pc(), 0x6798);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0118
        gbc.setState(0x34bf, 0xb57c, 0xf590, 0x1efe, 0xbb82, 0x93bc, 0x1, 0x1);
        gbc.writeMem(0x34bf, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xb57c);
        EXPECT(gbc.pc(), 0x34c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0119
        gbc.setState(0xc8b, 0xd718, 0xc630, 0x8fc1, 0x4061, 0xfa50, 0x0, 0x1);
        gbc.writeMem(0xc8b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xd718);
        EXPECT(gbc.pc(), 0xc8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 011A
        gbc.setState(0x1a53, 0xdc8d, 0xa4c0, 0xb242, 0xdff2, 0x4a8c, 0x1, 0x0);
        gbc.writeMem(0x1a53, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xdc8d);
        EXPECT(gbc.pc(), 0x1a54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 011B
        gbc.setState(0xbd9e, 0x3ef8, 0x1410, 0x24e2, 0x90a2, 0xef06, 0x0, 0x0);
        gbc.writeMem(0xbd9e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x3ef8);
        EXPECT(gbc.pc(), 0xbd9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd9e), 0x7f);
        // 7F 011D
        gbc.setState(0x8e65, 0x92cc, 0x9190, 0x2acd, 0x7be5, 0x463c, 0x0, 0x1);
        gbc.writeMem(0x8e65, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x92cc);
        EXPECT(gbc.pc(), 0x8e66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e65), 0x7f);
        // 7F 011E
        gbc.setState(0x44ab, 0xbb65, 0x5820, 0xd17, 0x7f7d, 0x546f, 0x0, 0x1);
        gbc.writeMem(0x44ab, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xbb65);
        EXPECT(gbc.pc(), 0x44ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 011F
        gbc.setState(0xa68b, 0xb355, 0x8de0, 0x7441, 0xbc26, 0x8e82, 0x1, 0x1);
        gbc.writeMem(0xa68b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xb355);
        EXPECT(gbc.pc(), 0xa68c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa68b), 0x7f);
        // 7F 0120
        gbc.setState(0x3fba, 0x9a5c, 0xbfd0, 0x88e4, 0x9e19, 0x1c7c, 0x1, 0x1);
        gbc.writeMem(0x3fba, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x9a5c);
        EXPECT(gbc.pc(), 0x3fbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0121
        gbc.setState(0x950c, 0xed15, 0x2580, 0xf9b6, 0x9ccb, 0x1907, 0x0, 0x1);
        gbc.writeMem(0x950c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xed15);
        EXPECT(gbc.pc(), 0x950d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x950c), 0x7f);
        // 7F 0122
        gbc.setState(0xd67e, 0x6cd1, 0x82c0, 0xe545, 0xd3eb, 0xed79, 0x1, 0x0);
        gbc.writeMem(0xd67e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x6cd1);
        EXPECT(gbc.pc(), 0xd67f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd67e), 0x7f);
        // 7F 0123
        gbc.setState(0x638f, 0xa564, 0x4b50, 0xd1ea, 0x4043, 0x37c9, 0x1, 0x1);
        gbc.writeMem(0x638f, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xa564);
        EXPECT(gbc.pc(), 0x6390);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0124
        gbc.setState(0x640d, 0xe503, 0x2b70, 0x3295, 0xde75, 0x6d3f, 0x1, 0x0);
        gbc.writeMem(0x640d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xe503);
        EXPECT(gbc.pc(), 0x640e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0125
        gbc.setState(0x75e6, 0x4156, 0xd870, 0x77ad, 0x39e4, 0xf514, 0x1, 0x1);
        gbc.writeMem(0x75e6, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x4156);
        EXPECT(gbc.pc(), 0x75e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0127
        gbc.setState(0xc9a5, 0xaf73, 0x28d0, 0x3db, 0x70f6, 0x6e03, 0x0, 0x1);
        gbc.writeMem(0xc9a5, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xaf73);
        EXPECT(gbc.pc(), 0xc9a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9a5), 0x7f);
        // 7F 0128
        gbc.setState(0xd96c, 0x4a6d, 0x3490, 0x9823, 0x1187, 0xc4c4, 0x0, 0x1);
        gbc.writeMem(0xd96c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x4a6d);
        EXPECT(gbc.pc(), 0xd96d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd96c), 0x7f);
        // 7F 0129
        gbc.setState(0x6793, 0xaf65, 0x6d60, 0xe522, 0xf1b8, 0xf790, 0x1, 0x1);
        gbc.writeMem(0x6793, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xaf65);
        EXPECT(gbc.pc(), 0x6794);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 012A
        gbc.setState(0xaff0, 0x45b6, 0x58d0, 0xbc54, 0x5b80, 0xa882, 0x1, 0x0);
        gbc.writeMem(0xaff0, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x45b6);
        EXPECT(gbc.pc(), 0xaff1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaff0), 0x7f);
        // 7F 012B
        gbc.setState(0x9337, 0xb711, 0x1cc0, 0xda83, 0x4e9c, 0xbbbc, 0x1, 0x0);
        gbc.writeMem(0x9337, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xb711);
        EXPECT(gbc.pc(), 0x9338);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9337), 0x7f);
        // 7F 012C
        gbc.setState(0x590c, 0x1e85, 0x8b50, 0x7a7c, 0xd576, 0xb485, 0x1, 0x0);
        gbc.writeMem(0x590c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x1e85);
        EXPECT(gbc.pc(), 0x590d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 012D
        gbc.setState(0x3f5, 0x51ac, 0xc6d0, 0x245c, 0xeddc, 0x9f31, 0x1, 0x0);
        gbc.writeMem(0x3f5, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x51ac);
        EXPECT(gbc.pc(), 0x3f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 012F
        gbc.setState(0x467b, 0xdab0, 0xa950, 0xd726, 0x60cb, 0x9ce5, 0x0, 0x1);
        gbc.writeMem(0x467b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xdab0);
        EXPECT(gbc.pc(), 0x467c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0130
        gbc.setState(0x4e00, 0x8c1b, 0xe200, 0x5cea, 0x7418, 0xc3db, 0x0, 0x0);
        gbc.writeMem(0x4e00, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x8c1b);
        EXPECT(gbc.pc(), 0x4e01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0131
        gbc.setState(0xb5d4, 0xaffa, 0xaed0, 0x7a24, 0x344c, 0x5bcc, 0x1, 0x1);
        gbc.writeMem(0xb5d4, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xaffa);
        EXPECT(gbc.pc(), 0xb5d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5d4), 0x7f);
        // 7F 0132
        gbc.setState(0x6f90, 0x2764, 0x2da0, 0x7569, 0xfd62, 0xec62, 0x0, 0x1);
        gbc.writeMem(0x6f90, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x2764);
        EXPECT(gbc.pc(), 0x6f91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0133
        gbc.setState(0xcfd3, 0x4d13, 0x960, 0xc105, 0x9a22, 0xf559, 0x1, 0x0);
        gbc.writeMem(0xcfd3, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x4d13);
        EXPECT(gbc.pc(), 0xcfd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfd3), 0x7f);
        // 7F 0134
        gbc.setState(0x1f43, 0xe2b5, 0x20c0, 0x1901, 0x573c, 0x643c, 0x0, 0x1);
        gbc.writeMem(0x1f43, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xe2b5);
        EXPECT(gbc.pc(), 0x1f44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0135
        gbc.setState(0x662a, 0x1f0b, 0xc0d0, 0x2afd, 0x71f4, 0x9aa7, 0x1, 0x1);
        gbc.writeMem(0x662a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x1f0b);
        EXPECT(gbc.pc(), 0x662b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0136
        gbc.setState(0x1c27, 0xa984, 0xebc0, 0x9057, 0xeef6, 0xc0b1, 0x1, 0x0);
        gbc.writeMem(0x1c27, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xa984);
        EXPECT(gbc.pc(), 0x1c28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0137
        gbc.setState(0x179b, 0x3f60, 0x22d0, 0xde79, 0xff16, 0x2bf5, 0x0, 0x1);
        gbc.writeMem(0x179b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x3f60);
        EXPECT(gbc.pc(), 0x179c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0138
        gbc.setState(0x95a3, 0xa327, 0x3810, 0x2dff, 0x7ae0, 0x55d8, 0x1, 0x0);
        gbc.writeMem(0x95a3, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xa327);
        EXPECT(gbc.pc(), 0x95a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95a3), 0x7f);
        // 7F 0139
        gbc.setState(0xb2ae, 0xbec3, 0xe2f0, 0x61ea, 0xca48, 0x9028, 0x0, 0x1);
        gbc.writeMem(0xb2ae, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xbec3);
        EXPECT(gbc.pc(), 0xb2af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2ae), 0x7f);
        // 7F 013A
        gbc.setState(0xb993, 0x45dc, 0x6980, 0x920a, 0xa1f, 0x8a43, 0x0, 0x0);
        gbc.writeMem(0xb993, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x45dc);
        EXPECT(gbc.pc(), 0xb994);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb993), 0x7f);
        // 7F 013B
        gbc.setState(0x1c28, 0x3e0b, 0x8950, 0x14e7, 0xd0fc, 0x6fe9, 0x0, 0x0);
        gbc.writeMem(0x1c28, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x3e0b);
        EXPECT(gbc.pc(), 0x1c29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 013C
        gbc.setState(0xc4ca, 0x3854, 0x3c50, 0xc1a4, 0xacd2, 0xb5c, 0x1, 0x0);
        gbc.writeMem(0xc4ca, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x3854);
        EXPECT(gbc.pc(), 0xc4cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4ca), 0x7f);
        // 7F 013D
        gbc.setState(0xb0dc, 0x73d0, 0x90c0, 0xb56c, 0x30be, 0x34e6, 0x1, 0x1);
        gbc.writeMem(0xb0dc, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x73d0);
        EXPECT(gbc.pc(), 0xb0dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0dc), 0x7f);
        // 7F 013E
        gbc.setState(0x72b3, 0x9c10, 0x4ef0, 0x292a, 0xb814, 0xa856, 0x1, 0x0);
        gbc.writeMem(0x72b3, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x9c10);
        EXPECT(gbc.pc(), 0x72b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 013F
        gbc.setState(0xbe3, 0x385, 0xdf30, 0x79a0, 0x6fdb, 0x6703, 0x0, 0x1);
        gbc.writeMem(0xbe3, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x385);
        EXPECT(gbc.pc(), 0xbe4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0140
        gbc.setState(0x2398, 0xcc79, 0x2640, 0x4159, 0x898e, 0xe73a, 0x1, 0x1);
        gbc.writeMem(0x2398, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xcc79);
        EXPECT(gbc.pc(), 0x2399);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0141
        gbc.setState(0xdc57, 0x33bd, 0x91e0, 0xa047, 0x66b7, 0xd12, 0x1, 0x0);
        gbc.writeMem(0xdc57, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x33bd);
        EXPECT(gbc.pc(), 0xdc58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc57), 0x7f);
        // 7F 0142
        gbc.setState(0x76f7, 0x4fe3, 0x30e0, 0xe98d, 0x2075, 0x2d09, 0x1, 0x1);
        gbc.writeMem(0x76f7, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x4fe3);
        EXPECT(gbc.pc(), 0x76f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0143
        gbc.setState(0xcec5, 0xdf5b, 0x4390, 0xaf7b, 0x45a6, 0x35c2, 0x1, 0x1);
        gbc.writeMem(0xcec5, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xdf5b);
        EXPECT(gbc.pc(), 0xcec6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcec5), 0x7f);
        // 7F 0144
        gbc.setState(0x251b, 0x493c, 0x2930, 0x364c, 0x7290, 0x7976, 0x1, 0x0);
        gbc.writeMem(0x251b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x493c);
        EXPECT(gbc.pc(), 0x251c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0145
        gbc.setState(0x9bd2, 0x1fc4, 0xf5b0, 0xe6e2, 0x473d, 0xb11e, 0x1, 0x1);
        gbc.writeMem(0x9bd2, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x1fc4);
        EXPECT(gbc.pc(), 0x9bd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bd2), 0x7f);
        // 7F 0146
        gbc.setState(0xa0b8, 0x2019, 0xbe70, 0xecf1, 0x556d, 0x4edb, 0x0, 0x1);
        gbc.writeMem(0xa0b8, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x2019);
        EXPECT(gbc.pc(), 0xa0b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0b8), 0x7f);
        // 7F 0148
        gbc.setState(0xd68c, 0xd2f5, 0xc340, 0x27c0, 0x7666, 0x8b43, 0x1, 0x1);
        gbc.writeMem(0xd68c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xd2f5);
        EXPECT(gbc.pc(), 0xd68d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd68c), 0x7f);
        // 7F 0149
        gbc.setState(0x2592, 0x7998, 0xe130, 0xcdb7, 0x681b, 0xeb0d, 0x0, 0x1);
        gbc.writeMem(0x2592, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x7998);
        EXPECT(gbc.pc(), 0x2593);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 014A
        gbc.setState(0xb2e1, 0x442c, 0x95a0, 0xe9c7, 0xe846, 0x9554, 0x0, 0x0);
        gbc.writeMem(0xb2e1, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x442c);
        EXPECT(gbc.pc(), 0xb2e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2e1), 0x7f);
        // 7F 014B
        gbc.setState(0xbddf, 0x347c, 0x46d0, 0xd039, 0x7e10, 0xec61, 0x0, 0x1);
        gbc.writeMem(0xbddf, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x347c);
        EXPECT(gbc.pc(), 0xbde0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbddf), 0x7f);
        // 7F 014C
        gbc.setState(0x66e8, 0x5b38, 0xe9a0, 0xd478, 0x3abd, 0xae77, 0x1, 0x1);
        gbc.writeMem(0x66e8, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x5b38);
        EXPECT(gbc.pc(), 0x66e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 014D
        gbc.setState(0x43fb, 0x3afd, 0x8810, 0x6fc4, 0xebbb, 0x749a, 0x1, 0x0);
        gbc.writeMem(0x43fb, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x3afd);
        EXPECT(gbc.pc(), 0x43fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 014E
        gbc.setState(0x77f9, 0x3d89, 0x7040, 0xf736, 0xef79, 0x1fcf, 0x0, 0x0);
        gbc.writeMem(0x77f9, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x3d89);
        EXPECT(gbc.pc(), 0x77fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 014F
        gbc.setState(0x5d75, 0x1150, 0xcab0, 0xa067, 0xe208, 0x56d3, 0x0, 0x0);
        gbc.writeMem(0x5d75, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x1150);
        EXPECT(gbc.pc(), 0x5d76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0150
        gbc.setState(0x21df, 0x275a, 0xc490, 0x6fa9, 0xa79, 0x3601, 0x0, 0x0);
        gbc.writeMem(0x21df, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x275a);
        EXPECT(gbc.pc(), 0x21e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0151
        gbc.setState(0xec5e, 0xf62a, 0xfa30, 0x5981, 0xed24, 0xaf00, 0x1, 0x0);
        gbc.writeMem(0xec5e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xf62a);
        EXPECT(gbc.pc(), 0xec5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec5e), 0x7f);
        // 7F 0152
        gbc.setState(0xdde3, 0xe124, 0x19c0, 0x59d7, 0x348d, 0x307b, 0x1, 0x0);
        gbc.writeMem(0xdde3, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xe124);
        EXPECT(gbc.pc(), 0xdde4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdde3), 0x7f);
        // 7F 0153
        gbc.setState(0xa3a0, 0xe861, 0x82b0, 0x8be, 0x1d5f, 0xd5e3, 0x0, 0x0);
        gbc.writeMem(0xa3a0, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xe861);
        EXPECT(gbc.pc(), 0xa3a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3a0), 0x7f);
        // 7F 0154
        gbc.setState(0xb255, 0xc45a, 0xc120, 0xabc6, 0xb084, 0x4baa, 0x1, 0x1);
        gbc.writeMem(0xb255, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xc45a);
        EXPECT(gbc.pc(), 0xb256);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb255), 0x7f);
        // 7F 0155
        gbc.setState(0xb0cc, 0x2fde, 0x7c70, 0xf4b2, 0xbf59, 0xf82e, 0x1, 0x0);
        gbc.writeMem(0xb0cc, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x2fde);
        EXPECT(gbc.pc(), 0xb0cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0cc), 0x7f);
        // 7F 0156
        gbc.setState(0xcafb, 0x666c, 0x7ef0, 0xd29d, 0xd772, 0x6040, 0x1, 0x0);
        gbc.writeMem(0xcafb, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x666c);
        EXPECT(gbc.pc(), 0xcafc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcafb), 0x7f);
        // 7F 0157
        gbc.setState(0xcab0, 0xca27, 0x17b0, 0x992d, 0x84dc, 0x61d4, 0x1, 0x1);
        gbc.writeMem(0xcab0, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xca27);
        EXPECT(gbc.pc(), 0xcab1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcab0), 0x7f);
        // 7F 0158
        gbc.setState(0x89a7, 0xeb13, 0x13d0, 0xeb37, 0x7600, 0x1e11, 0x1, 0x1);
        gbc.writeMem(0x89a7, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xeb13);
        EXPECT(gbc.pc(), 0x89a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89a7), 0x7f);
        // 7F 0159
        gbc.setState(0x1005, 0x43eb, 0xca40, 0x62b0, 0xccdb, 0x621b, 0x1, 0x1);
        gbc.writeMem(0x1005, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x43eb);
        EXPECT(gbc.pc(), 0x1006);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 015A
        gbc.setState(0x3512, 0xb61f, 0x3d0, 0x5e54, 0xe2a6, 0xcac8, 0x0, 0x0);
        gbc.writeMem(0x3512, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xb61f);
        EXPECT(gbc.pc(), 0x3513);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 015B
        gbc.setState(0x5b3f, 0x5117, 0x3cc0, 0x2e02, 0xaada, 0x87d0, 0x0, 0x1);
        gbc.writeMem(0x5b3f, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x5117);
        EXPECT(gbc.pc(), 0x5b40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 015C
        gbc.setState(0xb47d, 0xe0f0, 0xb4e0, 0x84b, 0x8e6c, 0xd3e3, 0x1, 0x1);
        gbc.writeMem(0xb47d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xe0f0);
        EXPECT(gbc.pc(), 0xb47e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb47d), 0x7f);
        // 7F 015D
        gbc.setState(0xc3a9, 0xfe3e, 0x350, 0x6de8, 0xa7db, 0xfb69, 0x0, 0x1);
        gbc.writeMem(0xc3a9, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xfe3e);
        EXPECT(gbc.pc(), 0xc3aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3a9), 0x7f);
        // 7F 015E
        gbc.setState(0xac55, 0xa406, 0x7430, 0x7d0b, 0x460a, 0x58d2, 0x1, 0x0);
        gbc.writeMem(0xac55, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xa406);
        EXPECT(gbc.pc(), 0xac56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac55), 0x7f);
        // 7F 015F
        gbc.setState(0x7072, 0xefef, 0x20d0, 0x68b2, 0xc9e3, 0x699f, 0x1, 0x0);
        gbc.writeMem(0x7072, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xefef);
        EXPECT(gbc.pc(), 0x7073);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0160
        gbc.setState(0xbe9a, 0x16b7, 0xfcb0, 0x993f, 0x5f1c, 0x785c, 0x0, 0x1);
        gbc.writeMem(0xbe9a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x16b7);
        EXPECT(gbc.pc(), 0xbe9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe9a), 0x7f);
        // 7F 0161
        gbc.setState(0x5010, 0x3df9, 0xcd80, 0xee4b, 0x6173, 0x4d75, 0x1, 0x0);
        gbc.writeMem(0x5010, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x3df9);
        EXPECT(gbc.pc(), 0x5011);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0162
        gbc.setState(0xdc19, 0xf552, 0x5ac0, 0x8f0b, 0x8d4f, 0xe79e, 0x0, 0x0);
        gbc.writeMem(0xdc19, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xf552);
        EXPECT(gbc.pc(), 0xdc1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc19), 0x7f);
        // 7F 0163
        gbc.setState(0x6ba7, 0x9c34, 0x5440, 0x3378, 0x4351, 0xf6aa, 0x1, 0x0);
        gbc.writeMem(0x6ba7, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x9c34);
        EXPECT(gbc.pc(), 0x6ba8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0164
        gbc.setState(0x5266, 0xda0c, 0x20, 0x2908, 0x569, 0xe254, 0x0, 0x1);
        gbc.writeMem(0x5266, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xda0c);
        EXPECT(gbc.pc(), 0x5267);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0165
        gbc.setState(0x52ea, 0xeb99, 0x7d50, 0x2378, 0xbf31, 0xad17, 0x1, 0x1);
        gbc.writeMem(0x52ea, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xeb99);
        EXPECT(gbc.pc(), 0x52eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0166
        gbc.setState(0xcb94, 0xbea8, 0xe40, 0xaa52, 0x634f, 0x7e32, 0x0, 0x0);
        gbc.writeMem(0xcb94, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xbea8);
        EXPECT(gbc.pc(), 0xcb95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb94), 0x7f);
        // 7F 0167
        gbc.setState(0x1778, 0x5b2e, 0x7ff0, 0x6622, 0xed68, 0x15f2, 0x1, 0x1);
        gbc.writeMem(0x1778, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x5b2e);
        EXPECT(gbc.pc(), 0x1779);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0168
        gbc.setState(0x6923, 0xd9d0, 0x3740, 0xb78, 0x9985, 0xb503, 0x0, 0x1);
        gbc.writeMem(0x6923, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xd9d0);
        EXPECT(gbc.pc(), 0x6924);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 016A
        gbc.setState(0x18fe, 0x9485, 0x8f50, 0x4312, 0x9d19, 0xe24f, 0x1, 0x0);
        gbc.writeMem(0x18fe, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x9485);
        EXPECT(gbc.pc(), 0x18ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 016B
        gbc.setState(0xcb10, 0x6ea1, 0x4960, 0x21c2, 0xf94e, 0x4f34, 0x0, 0x0);
        gbc.writeMem(0xcb10, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x6ea1);
        EXPECT(gbc.pc(), 0xcb11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb10), 0x7f);
        // 7F 016C
        gbc.setState(0xe489, 0x9394, 0x9d20, 0x4917, 0x8759, 0x9040, 0x1, 0x0);
        gbc.writeMem(0xe489, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x9394);
        EXPECT(gbc.pc(), 0xe48a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe489), 0x7f);
        // 7F 016D
        gbc.setState(0xabe7, 0x2fe6, 0x1230, 0xa663, 0x59e5, 0x2448, 0x0, 0x1);
        gbc.writeMem(0xabe7, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x2fe6);
        EXPECT(gbc.pc(), 0xabe8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabe7), 0x7f);
        // 7F 016E
        gbc.setState(0x977f, 0x620e, 0x68e0, 0xfc71, 0xf2e5, 0xf21c, 0x1, 0x0);
        gbc.writeMem(0x977f, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x620e);
        EXPECT(gbc.pc(), 0x9780);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x977f), 0x7f);
        // 7F 016F
        gbc.setState(0xb381, 0x48dd, 0xe120, 0x3a67, 0x4bcf, 0xdb14, 0x1, 0x0);
        gbc.writeMem(0xb381, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x48dd);
        EXPECT(gbc.pc(), 0xb382);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb381), 0x7f);
        // 7F 0170
        gbc.setState(0xeebf, 0x87a, 0xdc00, 0xbcde, 0xa4c4, 0xa428, 0x0, 0x0);
        gbc.writeMem(0xeebf, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x87a);
        EXPECT(gbc.pc(), 0xeec0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeebf), 0x7f);
        // 7F 0171
        gbc.setState(0x93fd, 0xef72, 0xa7b0, 0x5120, 0x4dab, 0x2c32, 0x1, 0x1);
        gbc.writeMem(0x93fd, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xef72);
        EXPECT(gbc.pc(), 0x93fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93fd), 0x7f);
        // 7F 0172
        gbc.setState(0xa7d0, 0x6ad7, 0x4110, 0x1665, 0x3fc2, 0x26f5, 0x1, 0x0);
        gbc.writeMem(0xa7d0, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x6ad7);
        EXPECT(gbc.pc(), 0xa7d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7d0), 0x7f);
        // 7F 0173
        gbc.setState(0x38f1, 0x312f, 0x4da0, 0xd5df, 0x6ada, 0xd096, 0x0, 0x1);
        gbc.writeMem(0x38f1, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x312f);
        EXPECT(gbc.pc(), 0x38f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0174
        gbc.setState(0x808b, 0x8f41, 0x1150, 0x26d4, 0xcc67, 0xd701, 0x1, 0x1);
        gbc.writeMem(0x808b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x8f41);
        EXPECT(gbc.pc(), 0x808c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x808b), 0x7f);
        // 7F 0175
        gbc.setState(0xd88c, 0xfbf, 0x5e10, 0x9912, 0x49b3, 0xae71, 0x1, 0x1);
        gbc.writeMem(0xd88c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xfbf);
        EXPECT(gbc.pc(), 0xd88d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd88c), 0x7f);
        // 7F 0176
        gbc.setState(0x6a4e, 0x9aec, 0x76e0, 0x76a, 0x29b7, 0xf234, 0x0, 0x0);
        gbc.writeMem(0x6a4e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x9aec);
        EXPECT(gbc.pc(), 0x6a4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0177
        gbc.setState(0x576d, 0x8874, 0xe450, 0x5896, 0xc3ff, 0xec9b, 0x0, 0x0);
        gbc.writeMem(0x576d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x8874);
        EXPECT(gbc.pc(), 0x576e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0178
        gbc.setState(0x7f9c, 0x3dcd, 0xb940, 0xbdab, 0x1ded, 0xa6ef, 0x1, 0x0);
        gbc.writeMem(0x7f9c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x3dcd);
        EXPECT(gbc.pc(), 0x7f9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0179
        gbc.setState(0x3420, 0x316a, 0x2310, 0x1d08, 0x2d5d, 0xe6eb, 0x0, 0x0);
        gbc.writeMem(0x3420, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x316a);
        EXPECT(gbc.pc(), 0x3421);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 017A
        gbc.setState(0x1a0d, 0x1db9, 0x82c0, 0xd429, 0x6bb6, 0xb0f8, 0x0, 0x0);
        gbc.writeMem(0x1a0d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x1db9);
        EXPECT(gbc.pc(), 0x1a0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 017B
        gbc.setState(0x1805, 0x1cfd, 0x86b0, 0x94d2, 0x802c, 0xbfc6, 0x1, 0x1);
        gbc.writeMem(0x1805, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x1cfd);
        EXPECT(gbc.pc(), 0x1806);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 017C
        gbc.setState(0x8050, 0x55bf, 0x0, 0x1f87, 0xdf75, 0xbc33, 0x1, 0x0);
        gbc.writeMem(0x8050, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x55bf);
        EXPECT(gbc.pc(), 0x8051);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8050), 0x7f);
        // 7F 017D
        gbc.setState(0x9973, 0x304b, 0x4d50, 0xb0c0, 0x8c2, 0xdce2, 0x0, 0x0);
        gbc.writeMem(0x9973, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x304b);
        EXPECT(gbc.pc(), 0x9974);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9973), 0x7f);
        // 7F 017E
        gbc.setState(0xc688, 0x5e65, 0x4700, 0x6b32, 0x3a7d, 0x2506, 0x0, 0x1);
        gbc.writeMem(0xc688, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x5e65);
        EXPECT(gbc.pc(), 0xc689);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc688), 0x7f);
        // 7F 017F
        gbc.setState(0x8781, 0x6a3f, 0x1680, 0xc19c, 0x9faf, 0x6dfd, 0x0, 0x1);
        gbc.writeMem(0x8781, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x6a3f);
        EXPECT(gbc.pc(), 0x8782);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8781), 0x7f);
        // 7F 0180
        gbc.setState(0xd53a, 0xde54, 0x62a0, 0x991a, 0xcdfe, 0xf72d, 0x1, 0x1);
        gbc.writeMem(0xd53a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xde54);
        EXPECT(gbc.pc(), 0xd53b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd53a), 0x7f);
        // 7F 0181
        gbc.setState(0xb89d, 0xa871, 0xaa80, 0xd61e, 0xb663, 0x62a0, 0x1, 0x1);
        gbc.writeMem(0xb89d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xa871);
        EXPECT(gbc.pc(), 0xb89e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb89d), 0x7f);
        // 7F 0182
        gbc.setState(0xabed, 0x7338, 0xfa90, 0xad61, 0xb85e, 0x795f, 0x0, 0x0);
        gbc.writeMem(0xabed, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x7338);
        EXPECT(gbc.pc(), 0xabee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabed), 0x7f);
        // 7F 0183
        gbc.setState(0x5323, 0x48d7, 0x5db0, 0x8a80, 0x6b94, 0x981b, 0x0, 0x0);
        gbc.writeMem(0x5323, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x48d7);
        EXPECT(gbc.pc(), 0x5324);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0184
        gbc.setState(0x320d, 0xc9d6, 0x1290, 0x62d3, 0x4f09, 0x594a, 0x0, 0x0);
        gbc.writeMem(0x320d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xc9d6);
        EXPECT(gbc.pc(), 0x320e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0185
        gbc.setState(0x4b4d, 0x7eb0, 0x7ec0, 0x381f, 0x3a35, 0x5a7a, 0x1, 0x1);
        gbc.writeMem(0x4b4d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x7eb0);
        EXPECT(gbc.pc(), 0x4b4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0186
        gbc.setState(0x1b9e, 0xe5c2, 0x2330, 0x6807, 0x8109, 0x8fb3, 0x1, 0x1);
        gbc.writeMem(0x1b9e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xe5c2);
        EXPECT(gbc.pc(), 0x1b9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0187
        gbc.setState(0xad64, 0xb8be, 0xcd0, 0x5b5b, 0x3d04, 0xd51b, 0x1, 0x1);
        gbc.writeMem(0xad64, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xb8be);
        EXPECT(gbc.pc(), 0xad65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad64), 0x7f);
        // 7F 0188
        gbc.setState(0x668f, 0x92da, 0xc990, 0xd235, 0xe192, 0xf642, 0x1, 0x0);
        gbc.writeMem(0x668f, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x92da);
        EXPECT(gbc.pc(), 0x6690);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0189
        gbc.setState(0x8761, 0x1f5f, 0x79f0, 0xd93, 0xbbb1, 0x6dcc, 0x0, 0x0);
        gbc.writeMem(0x8761, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x1f5f);
        EXPECT(gbc.pc(), 0x8762);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8761), 0x7f);
        // 7F 018A
        gbc.setState(0xd675, 0xb137, 0x8150, 0xb80a, 0xbcfa, 0x149d, 0x0, 0x1);
        gbc.writeMem(0xd675, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xb137);
        EXPECT(gbc.pc(), 0xd676);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd675), 0x7f);
        // 7F 018B
        gbc.setState(0x2b4, 0x8544, 0x67e0, 0x3262, 0x15e7, 0x3752, 0x0, 0x0);
        gbc.writeMem(0x2b4, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x8544);
        EXPECT(gbc.pc(), 0x2b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 018C
        gbc.setState(0x160, 0x3137, 0x2e50, 0x854a, 0x1a3e, 0xfc7f, 0x0, 0x0);
        gbc.writeMem(0x160, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x3137);
        EXPECT(gbc.pc(), 0x161);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 018D
        gbc.setState(0x561b, 0x91b2, 0xa400, 0x20f4, 0xed2, 0x8659, 0x0, 0x1);
        gbc.writeMem(0x561b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x91b2);
        EXPECT(gbc.pc(), 0x561c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 018E
        gbc.setState(0x6fad, 0xaab7, 0x1160, 0xe3b1, 0x4e39, 0x4d6c, 0x1, 0x0);
        gbc.writeMem(0x6fad, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xaab7);
        EXPECT(gbc.pc(), 0x6fae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 018F
        gbc.setState(0x20c8, 0x2e50, 0xf000, 0xb04, 0x6afd, 0x9ae9, 0x0, 0x0);
        gbc.writeMem(0x20c8, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x2e50);
        EXPECT(gbc.pc(), 0x20c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0190
        gbc.setState(0xc05e, 0x8a69, 0x290, 0x5f62, 0xfb47, 0x81a4, 0x0, 0x0);
        gbc.writeMem(0xc05e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x8a69);
        EXPECT(gbc.pc(), 0xc05f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc05e), 0x7f);
        // 7F 0191
        gbc.setState(0xe387, 0xa024, 0xf0c0, 0xd334, 0x9317, 0xc814, 0x1, 0x1);
        gbc.writeMem(0xe387, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xa024);
        EXPECT(gbc.pc(), 0xe388);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe387), 0x7f);
        // 7F 0192
        gbc.setState(0xc76b, 0x9ebe, 0x3f60, 0xc598, 0x4d34, 0x6885, 0x1, 0x0);
        gbc.writeMem(0xc76b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x9ebe);
        EXPECT(gbc.pc(), 0xc76c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc76b), 0x7f);
        // 7F 0193
        gbc.setState(0xac5f, 0xee92, 0x4da0, 0xe37e, 0xa17c, 0x9db5, 0x1, 0x1);
        gbc.writeMem(0xac5f, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xee92);
        EXPECT(gbc.pc(), 0xac60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac5f), 0x7f);
        // 7F 0194
        gbc.setState(0x4fde, 0x8d5, 0x8fa0, 0xb2f, 0x460, 0x2abb, 0x0, 0x0);
        gbc.writeMem(0x4fde, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x8d5);
        EXPECT(gbc.pc(), 0x4fdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0195
        gbc.setState(0x4c6f, 0xcffe, 0x1000, 0x8bf6, 0x720a, 0x10bb, 0x1, 0x0);
        gbc.writeMem(0x4c6f, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xcffe);
        EXPECT(gbc.pc(), 0x4c70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0196
        gbc.setState(0x81bc, 0x7fdb, 0xcc00, 0x276e, 0x595a, 0xccc3, 0x0, 0x0);
        gbc.writeMem(0x81bc, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x7fdb);
        EXPECT(gbc.pc(), 0x81bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81bc), 0x7f);
        // 7F 0197
        gbc.setState(0x51a4, 0x1b86, 0x7b80, 0xd484, 0x9cc0, 0x57b9, 0x0, 0x1);
        gbc.writeMem(0x51a4, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x1b86);
        EXPECT(gbc.pc(), 0x51a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0198
        gbc.setState(0xd305, 0x7c46, 0x5850, 0xe9e9, 0xbded, 0xd861, 0x1, 0x0);
        gbc.writeMem(0xd305, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x7c46);
        EXPECT(gbc.pc(), 0xd306);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd305), 0x7f);
        // 7F 0199
        gbc.setState(0xcb27, 0x8c7f, 0xf740, 0xfb29, 0x537c, 0x54e9, 0x1, 0x0);
        gbc.writeMem(0xcb27, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x8c7f);
        EXPECT(gbc.pc(), 0xcb28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb27), 0x7f);
        // 7F 019A
        gbc.setState(0xc558, 0x909c, 0xd820, 0xa7b4, 0x2c3, 0x6c85, 0x0, 0x0);
        gbc.writeMem(0xc558, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x909c);
        EXPECT(gbc.pc(), 0xc559);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc558), 0x7f);
        // 7F 019B
        gbc.setState(0x3638, 0x98f6, 0xe690, 0xbfbc, 0xf306, 0x223f, 0x1, 0x0);
        gbc.writeMem(0x3638, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x98f6);
        EXPECT(gbc.pc(), 0x3639);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 019C
        gbc.setState(0xd9e, 0xdfbe, 0x8e20, 0xaa6a, 0x58e7, 0xadb4, 0x1, 0x0);
        gbc.writeMem(0xd9e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xdfbe);
        EXPECT(gbc.pc(), 0xd9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 019D
        gbc.setState(0xb327, 0x617e, 0xb070, 0x8c30, 0x934c, 0x249f, 0x1, 0x1);
        gbc.writeMem(0xb327, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x617e);
        EXPECT(gbc.pc(), 0xb328);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb327), 0x7f);
        // 7F 019E
        gbc.setState(0x28a1, 0x3857, 0xfe30, 0xf13f, 0xb98b, 0xb16d, 0x0, 0x1);
        gbc.writeMem(0x28a1, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x3857);
        EXPECT(gbc.pc(), 0x28a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 019F
        gbc.setState(0xa9fd, 0x500f, 0x28a0, 0xd906, 0xea22, 0x18f2, 0x1, 0x1);
        gbc.writeMem(0xa9fd, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x500f);
        EXPECT(gbc.pc(), 0xa9fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9fd), 0x7f);
        // 7F 01A0
        gbc.setState(0xbf01, 0xcb44, 0xb720, 0x345, 0xbfea, 0x6696, 0x1, 0x1);
        gbc.writeMem(0xbf01, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xcb44);
        EXPECT(gbc.pc(), 0xbf02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf01), 0x7f);
        // 7F 01A1
        gbc.setState(0xb34f, 0xb5d8, 0x8cb0, 0xfe6f, 0xb3a, 0xc1fa, 0x1, 0x1);
        gbc.writeMem(0xb34f, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xb5d8);
        EXPECT(gbc.pc(), 0xb350);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb34f), 0x7f);
        // 7F 01A2
        gbc.setState(0x164, 0xcea1, 0xa410, 0x2c09, 0x3498, 0x814a, 0x1, 0x0);
        gbc.writeMem(0x164, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xcea1);
        EXPECT(gbc.pc(), 0x165);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 01A3
        gbc.setState(0xa353, 0x3219, 0x8230, 0x5993, 0xdf9c, 0xdaf7, 0x1, 0x1);
        gbc.writeMem(0xa353, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x3219);
        EXPECT(gbc.pc(), 0xa354);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa353), 0x7f);
        // 7F 01A4
        gbc.setState(0xc01a, 0xbf33, 0x2440, 0xd58a, 0x3155, 0x27f2, 0x1, 0x0);
        gbc.writeMem(0xc01a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xbf33);
        EXPECT(gbc.pc(), 0xc01b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc01a), 0x7f);
        // 7F 01A5
        gbc.setState(0xed4a, 0x1c0a, 0xf10, 0x2b8d, 0xf0de, 0xdf6a, 0x0, 0x0);
        gbc.writeMem(0xed4a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x1c0a);
        EXPECT(gbc.pc(), 0xed4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed4a), 0x7f);
        // 7F 01A6
        gbc.setState(0x327d, 0xeca0, 0xe9f0, 0xa191, 0xebdd, 0x7cfb, 0x1, 0x1);
        gbc.writeMem(0x327d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xeca0);
        EXPECT(gbc.pc(), 0x327e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 01A7
        gbc.setState(0xca9d, 0x27a0, 0xf3d0, 0x899e, 0x2486, 0x3373, 0x1, 0x0);
        gbc.writeMem(0xca9d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x27a0);
        EXPECT(gbc.pc(), 0xca9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca9d), 0x7f);
        // 7F 01A8
        gbc.setState(0x5c5f, 0x861b, 0x4960, 0x2055, 0x4064, 0xb480, 0x1, 0x1);
        gbc.writeMem(0x5c5f, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x861b);
        EXPECT(gbc.pc(), 0x5c60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 01AA
        gbc.setState(0xb976, 0xdf6a, 0x600, 0xabea, 0xadf5, 0xd3e1, 0x1, 0x1);
        gbc.writeMem(0xb976, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xdf6a);
        EXPECT(gbc.pc(), 0xb977);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb976), 0x7f);
        // 7F 01AB
        gbc.setState(0xa25d, 0x8437, 0x6a0, 0x97a8, 0x34e9, 0xa495, 0x1, 0x0);
        gbc.writeMem(0xa25d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x8437);
        EXPECT(gbc.pc(), 0xa25e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa25d), 0x7f);
        // 7F 01AD
        gbc.setState(0x5c36, 0xbe83, 0xa870, 0xb411, 0x8ffa, 0x96d, 0x0, 0x0);
        gbc.writeMem(0x5c36, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xbe83);
        EXPECT(gbc.pc(), 0x5c37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 01AE
        gbc.setState(0xe429, 0x1780, 0xb190, 0xa41c, 0x2fb0, 0xcc0a, 0x0, 0x1);
        gbc.writeMem(0xe429, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x1780);
        EXPECT(gbc.pc(), 0xe42a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe429), 0x7f);
        // 7F 01AF
        gbc.setState(0xef70, 0xaefb, 0x6a70, 0xe1c4, 0x856a, 0x8873, 0x1, 0x0);
        gbc.writeMem(0xef70, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xaefb);
        EXPECT(gbc.pc(), 0xef71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef70), 0x7f);
        // 7F 01B0
        gbc.setState(0xdc2, 0xde69, 0x9980, 0x4f2d, 0x9f2a, 0x85bd, 0x1, 0x1);
        gbc.writeMem(0xdc2, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xde69);
        EXPECT(gbc.pc(), 0xdc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 01B1
        gbc.setState(0x212a, 0x8d50, 0x2780, 0xca23, 0xde32, 0x290, 0x1, 0x0);
        gbc.writeMem(0x212a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x8d50);
        EXPECT(gbc.pc(), 0x212b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 01B2
        gbc.setState(0xa68b, 0x2f7c, 0xb170, 0x2b6b, 0x5dc6, 0x75c0, 0x0, 0x0);
        gbc.writeMem(0xa68b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x2f7c);
        EXPECT(gbc.pc(), 0xa68c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa68b), 0x7f);
        // 7F 01B3
        gbc.setState(0x7de, 0x5656, 0xa710, 0x174d, 0xa722, 0xa560, 0x0, 0x0);
        gbc.writeMem(0x7de, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x5656);
        EXPECT(gbc.pc(), 0x7df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 01B4
        gbc.setState(0x61ed, 0xc73a, 0x5f10, 0x2210, 0xc4e5, 0xc876, 0x1, 0x0);
        gbc.writeMem(0x61ed, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xc73a);
        EXPECT(gbc.pc(), 0x61ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 01B5
        gbc.setState(0x2d55, 0x2315, 0xa700, 0x9ce9, 0xddb9, 0xa96, 0x1, 0x0);
        gbc.writeMem(0x2d55, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x2315);
        EXPECT(gbc.pc(), 0x2d56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 01B6
        gbc.setState(0xdaa, 0x9c82, 0x9070, 0x1697, 0xfe7f, 0xa4af, 0x1, 0x0);
        gbc.writeMem(0xdaa, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x9c82);
        EXPECT(gbc.pc(), 0xdab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 01B7
        gbc.setState(0x387d, 0x5993, 0xa500, 0x3126, 0x274b, 0x2aad, 0x0, 0x0);
        gbc.writeMem(0x387d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x5993);
        EXPECT(gbc.pc(), 0x387e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 01B8
        gbc.setState(0x4a6c, 0x10c0, 0xe100, 0xe6cc, 0x6d56, 0x1631, 0x1, 0x0);
        gbc.writeMem(0x4a6c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x10c0);
        EXPECT(gbc.pc(), 0x4a6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 01B9
        gbc.setState(0xbd04, 0x57f, 0x38d0, 0x617, 0x3b13, 0xa3fb, 0x1, 0x1);
        gbc.writeMem(0xbd04, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x57f);
        EXPECT(gbc.pc(), 0xbd05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd04), 0x7f);
        // 7F 01BA
        gbc.setState(0x8129, 0xe63a, 0x6f50, 0xfce4, 0xf3f5, 0x4c47, 0x1, 0x1);
        gbc.writeMem(0x8129, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xe63a);
        EXPECT(gbc.pc(), 0x812a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8129), 0x7f);
        // 7F 01BB
        gbc.setState(0xd6e7, 0x463e, 0x13e0, 0x1a7f, 0x6f48, 0x8eaa, 0x0, 0x1);
        gbc.writeMem(0xd6e7, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x463e);
        EXPECT(gbc.pc(), 0xd6e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6e7), 0x7f);
        // 7F 01BC
        gbc.setState(0x9b93, 0x7e9c, 0x45e0, 0xb578, 0x173e, 0x20af, 0x0, 0x0);
        gbc.writeMem(0x9b93, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x7e9c);
        EXPECT(gbc.pc(), 0x9b94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b93), 0x7f);
        // 7F 01BD
        gbc.setState(0x73e2, 0x96af, 0xaa50, 0x1fbc, 0xb320, 0x1141, 0x1, 0x1);
        gbc.writeMem(0x73e2, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x96af);
        EXPECT(gbc.pc(), 0x73e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 01BE
        gbc.setState(0x49fd, 0x78c5, 0x75e0, 0xe8cc, 0x38aa, 0x971e, 0x1, 0x1);
        gbc.writeMem(0x49fd, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x78c5);
        EXPECT(gbc.pc(), 0x49fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 01BF
        gbc.setState(0x94b9, 0x6bc7, 0x8ea0, 0xbe23, 0x6037, 0x472, 0x1, 0x1);
        gbc.writeMem(0x94b9, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x6bc7);
        EXPECT(gbc.pc(), 0x94ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94b9), 0x7f);
        // 7F 01C0
        gbc.setState(0xad04, 0x4645, 0xf070, 0x9ff0, 0x878c, 0xb05b, 0x1, 0x1);
        gbc.writeMem(0xad04, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x4645);
        EXPECT(gbc.pc(), 0xad05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad04), 0x7f);
        // 7F 01C1
        gbc.setState(0x899d, 0x9ee0, 0x8450, 0xd5ec, 0xee25, 0xd64f, 0x1, 0x1);
        gbc.writeMem(0x899d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x9ee0);
        EXPECT(gbc.pc(), 0x899e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x899d), 0x7f);
        // 7F 01C2
        gbc.setState(0x4690, 0xf71e, 0xd9f0, 0xaa11, 0x6361, 0x2eea, 0x1, 0x0);
        gbc.writeMem(0x4690, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xf71e);
        EXPECT(gbc.pc(), 0x4691);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 01C3
        gbc.setState(0x136, 0xe97e, 0x3be0, 0x5461, 0xe5e3, 0xeae, 0x1, 0x1);
        gbc.writeMem(0x136, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xe97e);
        EXPECT(gbc.pc(), 0x137);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 01C4
        gbc.setState(0xe0db, 0x8c8b, 0x9120, 0x5da6, 0x147b, 0x940a, 0x0, 0x1);
        gbc.writeMem(0xe0db, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x8c8b);
        EXPECT(gbc.pc(), 0xe0dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0db), 0x7f);
        // 7F 01C5
        gbc.setState(0x9731, 0x57dc, 0xce10, 0x1b9a, 0x1928, 0xab0e, 0x0, 0x0);
        gbc.writeMem(0x9731, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x57dc);
        EXPECT(gbc.pc(), 0x9732);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9731), 0x7f);
        // 7F 01C6
        gbc.setState(0x8212, 0xb6dd, 0xdcf0, 0x2406, 0xe3ab, 0x4d8a, 0x1, 0x0);
        gbc.writeMem(0x8212, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xb6dd);
        EXPECT(gbc.pc(), 0x8213);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8212), 0x7f);
        // 7F 01C7
        gbc.setState(0x81c9, 0xd45f, 0x1790, 0x53d5, 0x6b0c, 0x1bb5, 0x1, 0x1);
        gbc.writeMem(0x81c9, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xd45f);
        EXPECT(gbc.pc(), 0x81ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81c9), 0x7f);
        // 7F 01C8
        gbc.setState(0xe38a, 0x2d73, 0xb6b0, 0xac04, 0xc885, 0xf574, 0x0, 0x0);
        gbc.writeMem(0xe38a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x2d73);
        EXPECT(gbc.pc(), 0xe38b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe38a), 0x7f);
        // 7F 01C9
        gbc.setState(0x23c7, 0x3f08, 0x8680, 0xe2c7, 0x19a0, 0x8a47, 0x0, 0x0);
        gbc.writeMem(0x23c7, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x3f08);
        EXPECT(gbc.pc(), 0x23c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 01CA
        gbc.setState(0x307d, 0xa91e, 0x660, 0xfc01, 0x246a, 0xf582, 0x1, 0x0);
        gbc.writeMem(0x307d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xa91e);
        EXPECT(gbc.pc(), 0x307e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 01CB
        gbc.setState(0x84bb, 0x8a5b, 0x29a0, 0x6d0b, 0xd9a5, 0x7e17, 0x1, 0x0);
        gbc.writeMem(0x84bb, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x8a5b);
        EXPECT(gbc.pc(), 0x84bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84bb), 0x7f);
        // 7F 01CC
        gbc.setState(0x6d27, 0x4d60, 0x4400, 0xde68, 0x3af4, 0x2b20, 0x1, 0x1);
        gbc.writeMem(0x6d27, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x4d60);
        EXPECT(gbc.pc(), 0x6d28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 01CD
        gbc.setState(0x6853, 0xa495, 0x3fd0, 0xf9af, 0x8443, 0xcd08, 0x0, 0x0);
        gbc.writeMem(0x6853, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xa495);
        EXPECT(gbc.pc(), 0x6854);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 01CE
        gbc.setState(0xb882, 0x7fc0, 0x5690, 0xc5ff, 0xb2a2, 0x6385, 0x0, 0x1);
        gbc.writeMem(0xb882, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x7fc0);
        EXPECT(gbc.pc(), 0xb883);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb882), 0x7f);
        // 7F 01CF
        gbc.setState(0x723a, 0x1beb, 0x7c70, 0x9c86, 0xfdeb, 0x2547, 0x1, 0x1);
        gbc.writeMem(0x723a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x1beb);
        EXPECT(gbc.pc(), 0x723b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 01D0
        gbc.setState(0x4890, 0xbca1, 0xcb0, 0xe9c5, 0x7493, 0x5e8d, 0x1, 0x0);
        gbc.writeMem(0x4890, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xbca1);
        EXPECT(gbc.pc(), 0x4891);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 01D1
        gbc.setState(0xbf18, 0x76fd, 0xf640, 0x23d, 0x59b4, 0xd4ed, 0x0, 0x0);
        gbc.writeMem(0xbf18, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x76fd);
        EXPECT(gbc.pc(), 0xbf19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf18), 0x7f);
        // 7F 01D2
        gbc.setState(0x9672, 0x2569, 0x98b0, 0xeab7, 0xfbf4, 0xdfb9, 0x1, 0x0);
        gbc.writeMem(0x9672, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x2569);
        EXPECT(gbc.pc(), 0x9673);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9672), 0x7f);
        // 7F 01D3
        gbc.setState(0x7692, 0x638f, 0x7c90, 0x1e65, 0x1672, 0xebce, 0x1, 0x1);
        gbc.writeMem(0x7692, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x638f);
        EXPECT(gbc.pc(), 0x7693);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 01D4
        gbc.setState(0xcf80, 0xf01, 0xab60, 0x2cdb, 0x4137, 0xd281, 0x1, 0x1);
        gbc.writeMem(0xcf80, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xf01);
        EXPECT(gbc.pc(), 0xcf81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf80), 0x7f);
        // 7F 01D5
        gbc.setState(0x4974, 0x9af1, 0xac80, 0xb140, 0xf26, 0xf7f8, 0x1, 0x1);
        gbc.writeMem(0x4974, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x9af1);
        EXPECT(gbc.pc(), 0x4975);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 01D6
        gbc.setState(0x82af, 0x4005, 0x5ed0, 0x56cf, 0x5245, 0x48f0, 0x0, 0x1);
        gbc.writeMem(0x82af, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x4005);
        EXPECT(gbc.pc(), 0x82b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82af), 0x7f);
        // 7F 01D7
        gbc.setState(0x454c, 0x210e, 0x17c0, 0x1eff, 0x7277, 0xca55, 0x0, 0x1);
        gbc.writeMem(0x454c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x210e);
        EXPECT(gbc.pc(), 0x454d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 01D8
        gbc.setState(0x85f4, 0x7ff7, 0x1560, 0xf26b, 0x381b, 0xcbf2, 0x1, 0x0);
        gbc.writeMem(0x85f4, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x7ff7);
        EXPECT(gbc.pc(), 0x85f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85f4), 0x7f);
        // 7F 01D9
        gbc.setState(0x4f36, 0xe996, 0x1f00, 0xedb6, 0x1173, 0x26b7, 0x0, 0x1);
        gbc.writeMem(0x4f36, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xe996);
        EXPECT(gbc.pc(), 0x4f37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 01DA
        gbc.setState(0x4565, 0x762d, 0x47a0, 0x372e, 0x8790, 0xe80f, 0x1, 0x1);
        gbc.writeMem(0x4565, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x762d);
        EXPECT(gbc.pc(), 0x4566);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 01DB
        gbc.setState(0xcfb, 0x2c66, 0x1640, 0xffc6, 0xdcaa, 0x43cd, 0x0, 0x0);
        gbc.writeMem(0xcfb, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x2c66);
        EXPECT(gbc.pc(), 0xcfc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 01DC
        gbc.setState(0x1c86, 0x11c6, 0xdfa0, 0xb408, 0xaa57, 0x4da4, 0x1, 0x1);
        gbc.writeMem(0x1c86, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x11c6);
        EXPECT(gbc.pc(), 0x1c87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 01DD
        gbc.setState(0xb055, 0xd8a4, 0x24f0, 0xbe6e, 0x868d, 0x4a18, 0x1, 0x0);
        gbc.writeMem(0xb055, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xd8a4);
        EXPECT(gbc.pc(), 0xb056);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb055), 0x7f);
        // 7F 01DE
        gbc.setState(0x387d, 0xe237, 0x5b80, 0xcfb3, 0x9684, 0xc245, 0x0, 0x1);
        gbc.writeMem(0x387d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xe237);
        EXPECT(gbc.pc(), 0x387e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 01E0
        gbc.setState(0x514d, 0x10a8, 0x3660, 0x4e25, 0xc29, 0xc87d, 0x0, 0x0);
        gbc.writeMem(0x514d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x10a8);
        EXPECT(gbc.pc(), 0x514e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 01E1
        gbc.setState(0x764f, 0xc185, 0xba40, 0x6b69, 0x33f0, 0x45b3, 0x1, 0x0);
        gbc.writeMem(0x764f, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xc185);
        EXPECT(gbc.pc(), 0x7650);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 01E2
        gbc.setState(0xe384, 0x5fe1, 0x4160, 0xd3f0, 0x9e5e, 0x6ea1, 0x1, 0x1);
        gbc.writeMem(0xe384, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x5fe1);
        EXPECT(gbc.pc(), 0xe385);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe384), 0x7f);
        // 7F 01E3
        gbc.setState(0xcbb, 0xbc02, 0xb7f0, 0x9f5e, 0xff60, 0x48f0, 0x1, 0x0);
        gbc.writeMem(0xcbb, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xbc02);
        EXPECT(gbc.pc(), 0xcbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 01E4
        gbc.setState(0x4724, 0x19aa, 0x1940, 0xb2ef, 0x170f, 0xe9e4, 0x1, 0x0);
        gbc.writeMem(0x4724, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x19aa);
        EXPECT(gbc.pc(), 0x4725);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 01E5
        gbc.setState(0x5f69, 0xb375, 0xcf0, 0x600f, 0x70ed, 0xc912, 0x1, 0x1);
        gbc.writeMem(0x5f69, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xb375);
        EXPECT(gbc.pc(), 0x5f6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 01E6
        gbc.setState(0xbb79, 0x66f5, 0x3aa0, 0xd864, 0x74b0, 0xea06, 0x1, 0x0);
        gbc.writeMem(0xbb79, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x66f5);
        EXPECT(gbc.pc(), 0xbb7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb79), 0x7f);
        // 7F 01E7
        gbc.setState(0xbd7f, 0x326, 0xd800, 0xf79f, 0x4705, 0xdbe6, 0x1, 0x0);
        gbc.writeMem(0xbd7f, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x326);
        EXPECT(gbc.pc(), 0xbd80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd7f), 0x7f);
        // 7F 01E8
        gbc.setState(0xc76e, 0xb2ad, 0x4fb0, 0x8889, 0x8d53, 0x693a, 0x0, 0x1);
        gbc.writeMem(0xc76e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xb2ad);
        EXPECT(gbc.pc(), 0xc76f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc76e), 0x7f);
        // 7F 01E9
        gbc.setState(0xaf88, 0x82d0, 0x8f20, 0x7887, 0x3f80, 0x3c2d, 0x0, 0x1);
        gbc.writeMem(0xaf88, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x82d0);
        EXPECT(gbc.pc(), 0xaf89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf88), 0x7f);
        // 7F 01EA
        gbc.setState(0x95b2, 0x48d1, 0xc850, 0xb2bd, 0x85b5, 0xfcb, 0x1, 0x0);
        gbc.writeMem(0x95b2, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x48d1);
        EXPECT(gbc.pc(), 0x95b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95b2), 0x7f);
        // 7F 01EB
        gbc.setState(0x9cc4, 0x439, 0x56d0, 0x6d34, 0x14b6, 0x71ce, 0x1, 0x0);
        gbc.writeMem(0x9cc4, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x439);
        EXPECT(gbc.pc(), 0x9cc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cc4), 0x7f);
        // 7F 01EC
        gbc.setState(0x2688, 0xd094, 0xdfa0, 0x9950, 0x56df, 0x3368, 0x1, 0x1);
        gbc.writeMem(0x2688, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xd094);
        EXPECT(gbc.pc(), 0x2689);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 01ED
        gbc.setState(0x8e55, 0xeb8f, 0xf390, 0xae83, 0xf927, 0x8a21, 0x1, 0x1);
        gbc.writeMem(0x8e55, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xeb8f);
        EXPECT(gbc.pc(), 0x8e56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e55), 0x7f);
        // 7F 01EE
        gbc.setState(0x97a0, 0x82eb, 0xe8d0, 0x60ac, 0x1ace, 0x53d5, 0x0, 0x1);
        gbc.writeMem(0x97a0, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x82eb);
        EXPECT(gbc.pc(), 0x97a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97a0), 0x7f);
        // 7F 01EF
        gbc.setState(0x9238, 0xb8fa, 0x8550, 0x88f, 0x8120, 0x7a5, 0x0, 0x1);
        gbc.writeMem(0x9238, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xb8fa);
        EXPECT(gbc.pc(), 0x9239);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9238), 0x7f);
        // 7F 01F0
        gbc.setState(0xb028, 0x5787, 0xc840, 0xc4df, 0x9c7b, 0x90, 0x0, 0x0);
        gbc.writeMem(0xb028, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x5787);
        EXPECT(gbc.pc(), 0xb029);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb028), 0x7f);
        // 7F 01F1
        gbc.setState(0x8126, 0x4975, 0xaae0, 0x9f66, 0x928a, 0x5a0e, 0x1, 0x0);
        gbc.writeMem(0x8126, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x4975);
        EXPECT(gbc.pc(), 0x8127);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8126), 0x7f);
        // 7F 01F2
        gbc.setState(0xb59b, 0x797f, 0xa30, 0x102f, 0xc9fe, 0x9fce, 0x1, 0x0);
        gbc.writeMem(0xb59b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x797f);
        EXPECT(gbc.pc(), 0xb59c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb59b), 0x7f);
        // 7F 01F3
        gbc.setState(0x2b8e, 0xab93, 0x9580, 0x29df, 0xa89e, 0xa828, 0x1, 0x1);
        gbc.writeMem(0x2b8e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xab93);
        EXPECT(gbc.pc(), 0x2b8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 01F4
        gbc.setState(0x13a3, 0xb569, 0x85f0, 0xa7e5, 0xb2a8, 0x66a, 0x1, 0x0);
        gbc.writeMem(0x13a3, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xb569);
        EXPECT(gbc.pc(), 0x13a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 01F5
        gbc.setState(0x1048, 0xe9c0, 0x8c50, 0x3952, 0xc012, 0xe328, 0x0, 0x1);
        gbc.writeMem(0x1048, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xe9c0);
        EXPECT(gbc.pc(), 0x1049);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 01F6
        gbc.setState(0x342d, 0xaa12, 0xbcd0, 0x5da4, 0x7785, 0x36f2, 0x0, 0x0);
        gbc.writeMem(0x342d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xaa12);
        EXPECT(gbc.pc(), 0x342e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 01F7
        gbc.setState(0x3e48, 0xa660, 0xa670, 0x2db9, 0x632a, 0x3b1b, 0x0, 0x0);
        gbc.writeMem(0x3e48, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xa660);
        EXPECT(gbc.pc(), 0x3e49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 01F8
        gbc.setState(0xcc63, 0xd2, 0xab40, 0x487e, 0x84a8, 0x408d, 0x0, 0x1);
        gbc.writeMem(0xcc63, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xd2);
        EXPECT(gbc.pc(), 0xcc64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc63), 0x7f);
        // 7F 01F9
        gbc.setState(0x72e0, 0xcac6, 0x5940, 0x33b0, 0x259f, 0x8ce8, 0x1, 0x0);
        gbc.writeMem(0x72e0, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xcac6);
        EXPECT(gbc.pc(), 0x72e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 01FB
        gbc.setState(0x86c5, 0xa2a, 0xcdf0, 0x1c16, 0x5aac, 0xd875, 0x1, 0x0);
        gbc.writeMem(0x86c5, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xa2a);
        EXPECT(gbc.pc(), 0x86c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86c5), 0x7f);
        // 7F 01FC
        gbc.setState(0x1639, 0x4e11, 0x7d70, 0xcbef, 0x7626, 0x857, 0x0, 0x1);
        gbc.writeMem(0x1639, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x4e11);
        EXPECT(gbc.pc(), 0x163a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 01FD
        gbc.setState(0xa13a, 0x95e8, 0x3790, 0x1690, 0xbc56, 0x140c, 0x1, 0x0);
        gbc.writeMem(0xa13a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x95e8);
        EXPECT(gbc.pc(), 0xa13b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa13a), 0x7f);
        // 7F 01FE
        gbc.setState(0x425b, 0xb3c8, 0xf6b0, 0x8c84, 0xbe9b, 0x9e08, 0x0, 0x1);
        gbc.writeMem(0x425b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xb3c8);
        EXPECT(gbc.pc(), 0x425c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 01FF
        gbc.setState(0xa1ec, 0xf5e0, 0xa640, 0x7ded, 0xb5f4, 0x2bf4, 0x1, 0x0);
        gbc.writeMem(0xa1ec, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xf5e0);
        EXPECT(gbc.pc(), 0xa1ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1ec), 0x7f);
        // 7F 0200
        gbc.setState(0x8ba4, 0xc87f, 0x62c0, 0x9054, 0x4504, 0xcfbe, 0x0, 0x0);
        gbc.writeMem(0x8ba4, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xc87f);
        EXPECT(gbc.pc(), 0x8ba5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ba4), 0x7f);
        // 7F 0201
        gbc.setState(0xc56b, 0x2e84, 0x5a60, 0x11c5, 0x44eb, 0x26d0, 0x0, 0x0);
        gbc.writeMem(0xc56b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x2e84);
        EXPECT(gbc.pc(), 0xc56c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc56b), 0x7f);
        // 7F 0202
        gbc.setState(0x8b5d, 0x577d, 0x4240, 0x1a7e, 0x2554, 0xed3a, 0x1, 0x1);
        gbc.writeMem(0x8b5d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x577d);
        EXPECT(gbc.pc(), 0x8b5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b5d), 0x7f);
        // 7F 0203
        gbc.setState(0x7112, 0xe2eb, 0x8290, 0x5fbb, 0x6cb4, 0x512e, 0x0, 0x1);
        gbc.writeMem(0x7112, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xe2eb);
        EXPECT(gbc.pc(), 0x7113);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0204
        gbc.setState(0xb94c, 0xdd3d, 0x9620, 0xc4a, 0xa09f, 0x7066, 0x1, 0x1);
        gbc.writeMem(0xb94c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xdd3d);
        EXPECT(gbc.pc(), 0xb94d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb94c), 0x7f);
        // 7F 0205
        gbc.setState(0x7291, 0x3d6e, 0xb4f0, 0xc378, 0xb174, 0x2af1, 0x1, 0x0);
        gbc.writeMem(0x7291, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x3d6e);
        EXPECT(gbc.pc(), 0x7292);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0206
        gbc.setState(0xb399, 0xaba3, 0xb740, 0xf0a0, 0x3959, 0x88ce, 0x0, 0x0);
        gbc.writeMem(0xb399, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xaba3);
        EXPECT(gbc.pc(), 0xb39a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb399), 0x7f);
        // 7F 0207
        gbc.setState(0x9ee5, 0x8d95, 0x680, 0x6b50, 0x49a3, 0x5a4f, 0x0, 0x1);
        gbc.writeMem(0x9ee5, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x8d95);
        EXPECT(gbc.pc(), 0x9ee6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ee5), 0x7f);
        // 7F 0208
        gbc.setState(0x681d, 0x76a0, 0xcb00, 0x3ede, 0xdda, 0xc303, 0x1, 0x1);
        gbc.writeMem(0x681d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x76a0);
        EXPECT(gbc.pc(), 0x681e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0209
        gbc.setState(0x45a1, 0x2378, 0x7bf0, 0x6ec1, 0xb368, 0x40a7, 0x0, 0x1);
        gbc.writeMem(0x45a1, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x2378);
        EXPECT(gbc.pc(), 0x45a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 020A
        gbc.setState(0xd8c0, 0xf4e6, 0x3e00, 0x6e4e, 0xedb2, 0x35bd, 0x1, 0x0);
        gbc.writeMem(0xd8c0, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xf4e6);
        EXPECT(gbc.pc(), 0xd8c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8c0), 0x7f);
        // 7F 020B
        gbc.setState(0xd66f, 0x4f17, 0x4aa0, 0x5e8f, 0x987a, 0x9f44, 0x0, 0x0);
        gbc.writeMem(0xd66f, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x4f17);
        EXPECT(gbc.pc(), 0xd670);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd66f), 0x7f);
        // 7F 020C
        gbc.setState(0xb208, 0x360a, 0x5680, 0x7624, 0x1780, 0xfd02, 0x0, 0x1);
        gbc.writeMem(0xb208, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x360a);
        EXPECT(gbc.pc(), 0xb209);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb208), 0x7f);
        // 7F 020D
        gbc.setState(0xa05d, 0xa75, 0x6a30, 0x67ea, 0xa3be, 0xf241, 0x0, 0x1);
        gbc.writeMem(0xa05d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xa75);
        EXPECT(gbc.pc(), 0xa05e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa05d), 0x7f);
        // 7F 020E
        gbc.setState(0x22ac, 0xf024, 0x7e60, 0xc132, 0x57b6, 0x3769, 0x1, 0x1);
        gbc.writeMem(0x22ac, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xf024);
        EXPECT(gbc.pc(), 0x22ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 020F
        gbc.setState(0xdd3d, 0xd3fe, 0x3440, 0x4671, 0xe8c0, 0xe593, 0x1, 0x0);
        gbc.writeMem(0xdd3d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xd3fe);
        EXPECT(gbc.pc(), 0xdd3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd3d), 0x7f);
        // 7F 0210
        gbc.setState(0xe3ec, 0x7246, 0xa810, 0x9b75, 0xf52f, 0xcb30, 0x1, 0x1);
        gbc.writeMem(0xe3ec, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x7246);
        EXPECT(gbc.pc(), 0xe3ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3ec), 0x7f);
        // 7F 0211
        gbc.setState(0xc2ab, 0x9507, 0x6740, 0xa7e5, 0x3d1a, 0xc8e0, 0x0, 0x0);
        gbc.writeMem(0xc2ab, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x9507);
        EXPECT(gbc.pc(), 0xc2ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2ab), 0x7f);
        // 7F 0212
        gbc.setState(0x7fe9, 0x6ab, 0x56e0, 0xbc4e, 0x7886, 0x9450, 0x1, 0x1);
        gbc.writeMem(0x7fe9, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x6ab);
        EXPECT(gbc.pc(), 0x7fea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0213
        gbc.setState(0xd021, 0xa96, 0x24e0, 0x20c3, 0x89d9, 0x2d1e, 0x1, 0x1);
        gbc.writeMem(0xd021, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xa96);
        EXPECT(gbc.pc(), 0xd022);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd021), 0x7f);
        // 7F 0214
        gbc.setState(0xce73, 0x9401, 0x8f60, 0xf213, 0x60fb, 0xc5b4, 0x1, 0x1);
        gbc.writeMem(0xce73, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x9401);
        EXPECT(gbc.pc(), 0xce74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce73), 0x7f);
        // 7F 0215
        gbc.setState(0xed76, 0x777d, 0xbde0, 0xf8c5, 0xace7, 0xdee5, 0x0, 0x1);
        gbc.writeMem(0xed76, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x777d);
        EXPECT(gbc.pc(), 0xed77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed76), 0x7f);
        // 7F 0216
        gbc.setState(0x4947, 0x249f, 0xf690, 0x3b6d, 0x5fad, 0x8552, 0x1, 0x1);
        gbc.writeMem(0x4947, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x249f);
        EXPECT(gbc.pc(), 0x4948);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0217
        gbc.setState(0xadb5, 0x4aab, 0x6600, 0xa2f0, 0x292f, 0xfda0, 0x1, 0x0);
        gbc.writeMem(0xadb5, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x4aab);
        EXPECT(gbc.pc(), 0xadb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadb5), 0x7f);
        // 7F 0218
        gbc.setState(0xc2f7, 0x6e2, 0x8280, 0xffc6, 0xa2e2, 0x8021, 0x1, 0x0);
        gbc.writeMem(0xc2f7, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x6e2);
        EXPECT(gbc.pc(), 0xc2f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2f7), 0x7f);
        // 7F 0219
        gbc.setState(0x89c1, 0x19ad, 0xcb50, 0x496e, 0xd175, 0x32cb, 0x0, 0x0);
        gbc.writeMem(0x89c1, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x19ad);
        EXPECT(gbc.pc(), 0x89c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89c1), 0x7f);
        // 7F 021A
        gbc.setState(0x12a3, 0xe164, 0xbb0, 0x8549, 0x13f5, 0xd83e, 0x0, 0x0);
        gbc.writeMem(0x12a3, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xe164);
        EXPECT(gbc.pc(), 0x12a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 021B
        gbc.setState(0x4dc0, 0x1c29, 0x2ef0, 0x2f26, 0xdbb5, 0xf552, 0x0, 0x1);
        gbc.writeMem(0x4dc0, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x1c29);
        EXPECT(gbc.pc(), 0x4dc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 021C
        gbc.setState(0x4d6f, 0x586b, 0xf570, 0xf1ca, 0x20e4, 0xe9e1, 0x0, 0x0);
        gbc.writeMem(0x4d6f, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x586b);
        EXPECT(gbc.pc(), 0x4d70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 021D
        gbc.setState(0xe6ea, 0xe4c0, 0x7f80, 0x1e9, 0x10e4, 0x46e4, 0x1, 0x0);
        gbc.writeMem(0xe6ea, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xe4c0);
        EXPECT(gbc.pc(), 0xe6eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6ea), 0x7f);
        // 7F 021E
        gbc.setState(0x642e, 0xf01b, 0xc600, 0x8d46, 0xde32, 0x73f, 0x0, 0x1);
        gbc.writeMem(0x642e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xf01b);
        EXPECT(gbc.pc(), 0x642f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 021F
        gbc.setState(0xe974, 0x2e21, 0xb680, 0x35d9, 0x9302, 0x55eb, 0x1, 0x1);
        gbc.writeMem(0xe974, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x2e21);
        EXPECT(gbc.pc(), 0xe975);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe974), 0x7f);
        // 7F 0220
        gbc.setState(0x1a87, 0xb94f, 0x1130, 0x7b33, 0x8a2e, 0x8297, 0x1, 0x0);
        gbc.writeMem(0x1a87, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xb94f);
        EXPECT(gbc.pc(), 0x1a88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0221
        gbc.setState(0x8a5c, 0xbc64, 0x67c0, 0x6ff5, 0x16d3, 0x3ce9, 0x0, 0x1);
        gbc.writeMem(0x8a5c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xbc64);
        EXPECT(gbc.pc(), 0x8a5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a5c), 0x7f);
        // 7F 0222
        gbc.setState(0x625, 0xb3fa, 0x6930, 0x1005, 0x4d83, 0x7950, 0x0, 0x1);
        gbc.writeMem(0x625, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xb3fa);
        EXPECT(gbc.pc(), 0x626);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0223
        gbc.setState(0xa266, 0x790, 0x6930, 0xc1e9, 0xe2ab, 0xaebc, 0x1, 0x0);
        gbc.writeMem(0xa266, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x790);
        EXPECT(gbc.pc(), 0xa267);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa266), 0x7f);
        // 7F 0224
        gbc.setState(0xb3d7, 0x57f1, 0x42b0, 0xa9be, 0xf8ce, 0x3dd0, 0x0, 0x0);
        gbc.writeMem(0xb3d7, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x57f1);
        EXPECT(gbc.pc(), 0xb3d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3d7), 0x7f);
        // 7F 0225
        gbc.setState(0x7bf6, 0xdc13, 0xd350, 0x1ddc, 0x2965, 0xa9cc, 0x0, 0x0);
        gbc.writeMem(0x7bf6, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xdc13);
        EXPECT(gbc.pc(), 0x7bf7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0226
        gbc.setState(0x2d15, 0x322b, 0x9fe0, 0x7b9b, 0x70b8, 0x40f8, 0x0, 0x1);
        gbc.writeMem(0x2d15, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x322b);
        EXPECT(gbc.pc(), 0x2d16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0227
        gbc.setState(0x86f4, 0x8240, 0xd9c0, 0x4a84, 0x5e9b, 0x21, 0x0, 0x0);
        gbc.writeMem(0x86f4, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x8240);
        EXPECT(gbc.pc(), 0x86f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86f4), 0x7f);
        // 7F 0228
        gbc.setState(0xac3e, 0x7f83, 0xead0, 0xaf9a, 0x68ad, 0xd5c5, 0x1, 0x0);
        gbc.writeMem(0xac3e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x7f83);
        EXPECT(gbc.pc(), 0xac3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac3e), 0x7f);
        // 7F 022A
        gbc.setState(0x5f98, 0x972d, 0x20d0, 0xe01c, 0xf1cb, 0xa68b, 0x1, 0x1);
        gbc.writeMem(0x5f98, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x972d);
        EXPECT(gbc.pc(), 0x5f99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 022B
        gbc.setState(0x1eac, 0x70ca, 0x5ad0, 0x2eb8, 0x2d6e, 0x30d3, 0x1, 0x0);
        gbc.writeMem(0x1eac, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x70ca);
        EXPECT(gbc.pc(), 0x1ead);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 022C
        gbc.setState(0x951b, 0xca67, 0x770, 0xf307, 0x217, 0x841d, 0x1, 0x0);
        gbc.writeMem(0x951b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xca67);
        EXPECT(gbc.pc(), 0x951c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x951b), 0x7f);
        // 7F 022D
        gbc.setState(0xcaee, 0xeaf1, 0x23b0, 0x3395, 0x6833, 0xfbbb, 0x1, 0x0);
        gbc.writeMem(0xcaee, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xeaf1);
        EXPECT(gbc.pc(), 0xcaef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcaee), 0x7f);
        // 7F 022E
        gbc.setState(0x4f67, 0x8a37, 0x9700, 0x614d, 0x56c6, 0xfc08, 0x0, 0x1);
        gbc.writeMem(0x4f67, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x8a37);
        EXPECT(gbc.pc(), 0x4f68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 022F
        gbc.setState(0x6df5, 0xcd4b, 0x4230, 0x23a1, 0x319b, 0xf7dd, 0x0, 0x0);
        gbc.writeMem(0x6df5, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xcd4b);
        EXPECT(gbc.pc(), 0x6df6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0231
        gbc.setState(0x584f, 0x5225, 0x34d0, 0x15f7, 0x811c, 0x5691, 0x1, 0x1);
        gbc.writeMem(0x584f, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x5225);
        EXPECT(gbc.pc(), 0x5850);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0232
        gbc.setState(0xc8fb, 0xc165, 0x3a50, 0x4dd3, 0xfb2, 0x3975, 0x0, 0x1);
        gbc.writeMem(0xc8fb, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xc165);
        EXPECT(gbc.pc(), 0xc8fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8fb), 0x7f);
        // 7F 0233
        gbc.setState(0x4c47, 0x6348, 0x9c40, 0xace3, 0xa194, 0x268, 0x1, 0x1);
        gbc.writeMem(0x4c47, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x6348);
        EXPECT(gbc.pc(), 0x4c48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0234
        gbc.setState(0xabb3, 0xfdfc, 0x5f20, 0xedad, 0xd318, 0x3d29, 0x0, 0x1);
        gbc.writeMem(0xabb3, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xfdfc);
        EXPECT(gbc.pc(), 0xabb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabb3), 0x7f);
        // 7F 0235
        gbc.setState(0x137c, 0x79b1, 0xdb0, 0x2907, 0xf22e, 0xfaee, 0x1, 0x0);
        gbc.writeMem(0x137c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x79b1);
        EXPECT(gbc.pc(), 0x137d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0236
        gbc.setState(0xe3b0, 0x1399, 0xa570, 0x1654, 0x4a6d, 0xd109, 0x1, 0x0);
        gbc.writeMem(0xe3b0, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x1399);
        EXPECT(gbc.pc(), 0xe3b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3b0), 0x7f);
        // 7F 0237
        gbc.setState(0x54b9, 0xd084, 0x73f0, 0x49a6, 0x319d, 0x41da, 0x0, 0x0);
        gbc.writeMem(0x54b9, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xd084);
        EXPECT(gbc.pc(), 0x54ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0238
        gbc.setState(0x8f07, 0x4685, 0x79b0, 0xc907, 0xf2a0, 0x3332, 0x0, 0x0);
        gbc.writeMem(0x8f07, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x4685);
        EXPECT(gbc.pc(), 0x8f08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f07), 0x7f);
        // 7F 0239
        gbc.setState(0xe624, 0x2ba6, 0xc8e0, 0x4e7b, 0x9645, 0x4cc0, 0x0, 0x1);
        gbc.writeMem(0xe624, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x2ba6);
        EXPECT(gbc.pc(), 0xe625);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe624), 0x7f);
        // 7F 023A
        gbc.setState(0x3ca4, 0x1908, 0x6ab0, 0x81be, 0x29e1, 0x9443, 0x0, 0x1);
        gbc.writeMem(0x3ca4, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x1908);
        EXPECT(gbc.pc(), 0x3ca5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 023B
        gbc.setState(0x4481, 0x60d7, 0xb380, 0x3b69, 0xb75, 0x1d3c, 0x0, 0x1);
        gbc.writeMem(0x4481, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x60d7);
        EXPECT(gbc.pc(), 0x4482);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 023C
        gbc.setState(0x7a54, 0x306d, 0xd960, 0x4774, 0x6a68, 0xe4bf, 0x1, 0x0);
        gbc.writeMem(0x7a54, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x306d);
        EXPECT(gbc.pc(), 0x7a55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 023D
        gbc.setState(0x22fb, 0x9595, 0x83d0, 0xa016, 0xee06, 0xf9ef, 0x0, 0x1);
        gbc.writeMem(0x22fb, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x9595);
        EXPECT(gbc.pc(), 0x22fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 023E
        gbc.setState(0x5bc9, 0x94d, 0xa0d0, 0x25fa, 0x7f7a, 0x2874, 0x0, 0x1);
        gbc.writeMem(0x5bc9, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x94d);
        EXPECT(gbc.pc(), 0x5bca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 023F
        gbc.setState(0x3483, 0x8611, 0x3d10, 0xf545, 0xa2f2, 0x9713, 0x1, 0x1);
        gbc.writeMem(0x3483, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x8611);
        EXPECT(gbc.pc(), 0x3484);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0240
        gbc.setState(0x552, 0xaab2, 0x900, 0x25cc, 0xcb63, 0xdb04, 0x0, 0x1);
        gbc.writeMem(0x552, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xaab2);
        EXPECT(gbc.pc(), 0x553);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0241
        gbc.setState(0xaea0, 0x1af7, 0x1d60, 0xd149, 0x7fbb, 0xc1c7, 0x1, 0x1);
        gbc.writeMem(0xaea0, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x1af7);
        EXPECT(gbc.pc(), 0xaea1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaea0), 0x7f);
        // 7F 0242
        gbc.setState(0x185, 0x79db, 0xc7d0, 0xe68a, 0x73c6, 0x4af5, 0x1, 0x0);
        gbc.writeMem(0x185, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x79db);
        EXPECT(gbc.pc(), 0x186);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0243
        gbc.setState(0x21c5, 0xa94b, 0x6750, 0x4282, 0x54a1, 0x9b6b, 0x1, 0x0);
        gbc.writeMem(0x21c5, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xa94b);
        EXPECT(gbc.pc(), 0x21c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0244
        gbc.setState(0x8fe2, 0x3be7, 0x4df0, 0x1be5, 0x8183, 0x1d0e, 0x1, 0x0);
        gbc.writeMem(0x8fe2, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x3be7);
        EXPECT(gbc.pc(), 0x8fe3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fe2), 0x7f);
        // 7F 0245
        gbc.setState(0x1626, 0xdbfc, 0x6b0, 0x1872, 0xbbd2, 0xd29e, 0x0, 0x0);
        gbc.writeMem(0x1626, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xdbfc);
        EXPECT(gbc.pc(), 0x1627);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0247
        gbc.setState(0x7456, 0x7bc4, 0x230, 0x9276, 0x502c, 0x29c0, 0x1, 0x1);
        gbc.writeMem(0x7456, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x7bc4);
        EXPECT(gbc.pc(), 0x7457);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0248
        gbc.setState(0xb724, 0xf2e2, 0x26f0, 0x39e, 0x3f5f, 0x91a1, 0x0, 0x1);
        gbc.writeMem(0xb724, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xf2e2);
        EXPECT(gbc.pc(), 0xb725);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb724), 0x7f);
        // 7F 0249
        gbc.setState(0x965c, 0x2b07, 0x9d0, 0x248a, 0xde16, 0xe6b9, 0x1, 0x1);
        gbc.writeMem(0x965c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x2b07);
        EXPECT(gbc.pc(), 0x965d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x965c), 0x7f);
        // 7F 024B
        gbc.setState(0x3391, 0x932b, 0x4e20, 0xebc3, 0xf18b, 0x4a03, 0x1, 0x1);
        gbc.writeMem(0x3391, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x932b);
        EXPECT(gbc.pc(), 0x3392);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 024C
        gbc.setState(0x3d3f, 0x5c63, 0x4770, 0xec01, 0x17c8, 0x8baa, 0x0, 0x1);
        gbc.writeMem(0x3d3f, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x5c63);
        EXPECT(gbc.pc(), 0x3d40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 024D
        gbc.setState(0x6e43, 0x8f4a, 0xc500, 0xb68f, 0x5b24, 0xdd0b, 0x1, 0x0);
        gbc.writeMem(0x6e43, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x8f4a);
        EXPECT(gbc.pc(), 0x6e44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 024E
        gbc.setState(0x91c2, 0x6e7d, 0x4340, 0x8914, 0x1ebb, 0x6cae, 0x1, 0x1);
        gbc.writeMem(0x91c2, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x6e7d);
        EXPECT(gbc.pc(), 0x91c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91c2), 0x7f);
        // 7F 024F
        gbc.setState(0x7e96, 0xbb61, 0xd880, 0x91a, 0xa4a3, 0xd08e, 0x1, 0x0);
        gbc.writeMem(0x7e96, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xbb61);
        EXPECT(gbc.pc(), 0x7e97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0250
        gbc.setState(0xff6, 0x3feb, 0xe6d0, 0x3aa, 0x5784, 0x19e5, 0x0, 0x1);
        gbc.writeMem(0xff6, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x3feb);
        EXPECT(gbc.pc(), 0xff7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0251
        gbc.setState(0xe285, 0x139d, 0x8fa0, 0xd2b6, 0x72b8, 0xf8c0, 0x0, 0x0);
        gbc.writeMem(0xe285, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x139d);
        EXPECT(gbc.pc(), 0xe286);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe285), 0x7f);
        // 7F 0252
        gbc.setState(0x98c4, 0xa6ae, 0x8e60, 0xaa8b, 0x9cd2, 0xd691, 0x0, 0x0);
        gbc.writeMem(0x98c4, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xa6ae);
        EXPECT(gbc.pc(), 0x98c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98c4), 0x7f);
        // 7F 0253
        gbc.setState(0xce93, 0x6470, 0x2ed0, 0xf77c, 0x95db, 0x2527, 0x1, 0x0);
        gbc.writeMem(0xce93, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x6470);
        EXPECT(gbc.pc(), 0xce94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce93), 0x7f);
        // 7F 0254
        gbc.setState(0x63fd, 0x961c, 0xb090, 0xac16, 0x47cf, 0x1c54, 0x0, 0x1);
        gbc.writeMem(0x63fd, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x961c);
        EXPECT(gbc.pc(), 0x63fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0255
        gbc.setState(0xd7b9, 0x2337, 0x74d0, 0xe2b3, 0xb15d, 0x64a1, 0x0, 0x1);
        gbc.writeMem(0xd7b9, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x2337);
        EXPECT(gbc.pc(), 0xd7ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7b9), 0x7f);
        // 7F 0256
        gbc.setState(0xe27b, 0xc56, 0x7ee0, 0xa383, 0xcf9d, 0x3ae0, 0x0, 0x0);
        gbc.writeMem(0xe27b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xc56);
        EXPECT(gbc.pc(), 0xe27c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe27b), 0x7f);
        // 7F 0257
        gbc.setState(0xcc47, 0xf65b, 0x68b0, 0x398e, 0xefce, 0x408e, 0x0, 0x1);
        gbc.writeMem(0xcc47, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xf65b);
        EXPECT(gbc.pc(), 0xcc48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc47), 0x7f);
        // 7F 0258
        gbc.setState(0x8ad2, 0x8c59, 0xe810, 0xd59, 0x9ef7, 0x1df1, 0x0, 0x1);
        gbc.writeMem(0x8ad2, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x8c59);
        EXPECT(gbc.pc(), 0x8ad3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ad2), 0x7f);
        // 7F 0259
        gbc.setState(0x7db3, 0xaa02, 0xe3d0, 0xc85d, 0xd3ac, 0x446f, 0x1, 0x1);
        gbc.writeMem(0x7db3, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xaa02);
        EXPECT(gbc.pc(), 0x7db4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 025A
        gbc.setState(0x9b, 0x8e9b, 0xac00, 0x6616, 0xcca3, 0x86e6, 0x1, 0x0);
        gbc.writeMem(0x9b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x8e9b);
        EXPECT(gbc.pc(), 0x9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 025B
        gbc.setState(0x14ae, 0x38e4, 0x12d0, 0x7783, 0x954c, 0xcdbc, 0x0, 0x0);
        gbc.writeMem(0x14ae, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x38e4);
        EXPECT(gbc.pc(), 0x14af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 025C
        gbc.setState(0x3fb0, 0xe157, 0x6a80, 0xd8aa, 0x38e3, 0xd60b, 0x0, 0x0);
        gbc.writeMem(0x3fb0, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xe157);
        EXPECT(gbc.pc(), 0x3fb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 025D
        gbc.setState(0x329, 0x2b65, 0x9d20, 0x5655, 0x92b8, 0x8789, 0x1, 0x1);
        gbc.writeMem(0x329, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x2b65);
        EXPECT(gbc.pc(), 0x32a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0260
        gbc.setState(0x9fee, 0x16e0, 0x3030, 0x450c, 0xe8ed, 0xa6b1, 0x0, 0x1);
        gbc.writeMem(0x9fee, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x16e0);
        EXPECT(gbc.pc(), 0x9fef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fee), 0x7f);
        // 7F 0261
        gbc.setState(0x229, 0xfe5a, 0x8240, 0x12d3, 0x1462, 0xa32b, 0x0, 0x1);
        gbc.writeMem(0x229, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xfe5a);
        EXPECT(gbc.pc(), 0x22a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0262
        gbc.setState(0x5b0c, 0x33ec, 0x24a0, 0xc968, 0xd35c, 0xba36, 0x0, 0x0);
        gbc.writeMem(0x5b0c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x33ec);
        EXPECT(gbc.pc(), 0x5b0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0263
        gbc.setState(0x7690, 0x2014, 0x8a10, 0x4845, 0xc65e, 0x8ef2, 0x1, 0x0);
        gbc.writeMem(0x7690, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x2014);
        EXPECT(gbc.pc(), 0x7691);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0264
        gbc.setState(0xd501, 0xe81, 0x6e00, 0xbe70, 0x8bd3, 0x29c8, 0x1, 0x1);
        gbc.writeMem(0xd501, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xe81);
        EXPECT(gbc.pc(), 0xd502);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd501), 0x7f);
        // 7F 0265
        gbc.setState(0xcaaf, 0x7093, 0x7420, 0x614e, 0x7e38, 0x8b96, 0x1, 0x1);
        gbc.writeMem(0xcaaf, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x7093);
        EXPECT(gbc.pc(), 0xcab0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcaaf), 0x7f);
        // 7F 0266
        gbc.setState(0x9642, 0x48d3, 0x8910, 0xa4b8, 0xe011, 0x7572, 0x0, 0x0);
        gbc.writeMem(0x9642, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x48d3);
        EXPECT(gbc.pc(), 0x9643);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9642), 0x7f);
        // 7F 0267
        gbc.setState(0x7fe0, 0xdc8d, 0x85c0, 0xc4ee, 0x54a0, 0xa46b, 0x0, 0x1);
        gbc.writeMem(0x7fe0, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xdc8d);
        EXPECT(gbc.pc(), 0x7fe1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0268
        gbc.setState(0x60f8, 0x18aa, 0xedf0, 0xd478, 0xd1f0, 0x9b, 0x0, 0x0);
        gbc.writeMem(0x60f8, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x18aa);
        EXPECT(gbc.pc(), 0x60f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0269
        gbc.setState(0x961e, 0xa633, 0x4b30, 0x496, 0x4c6e, 0xde7d, 0x0, 0x0);
        gbc.writeMem(0x961e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xa633);
        EXPECT(gbc.pc(), 0x961f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x961e), 0x7f);
        // 7F 026A
        gbc.setState(0xb5a9, 0x2136, 0xdf0, 0xc9e0, 0x66a3, 0x5a72, 0x1, 0x1);
        gbc.writeMem(0xb5a9, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x2136);
        EXPECT(gbc.pc(), 0xb5aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5a9), 0x7f);
        // 7F 026B
        gbc.setState(0x3be9, 0xe14d, 0x7690, 0x7dfe, 0xe7f3, 0xfc20, 0x1, 0x1);
        gbc.writeMem(0x3be9, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xe14d);
        EXPECT(gbc.pc(), 0x3bea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 026C
        gbc.setState(0x9b69, 0xc8c6, 0xd390, 0x558b, 0x74a0, 0x5879, 0x1, 0x1);
        gbc.writeMem(0x9b69, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xc8c6);
        EXPECT(gbc.pc(), 0x9b6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b69), 0x7f);
        // 7F 026D
        gbc.setState(0x399b, 0xab2e, 0x820, 0xe3d9, 0x30a6, 0x4d76, 0x1, 0x0);
        gbc.writeMem(0x399b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xab2e);
        EXPECT(gbc.pc(), 0x399c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 026E
        gbc.setState(0x917b, 0x1e5b, 0xb9a0, 0x9732, 0xab33, 0xf111, 0x1, 0x1);
        gbc.writeMem(0x917b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x1e5b);
        EXPECT(gbc.pc(), 0x917c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x917b), 0x7f);
        // 7F 026F
        gbc.setState(0x497f, 0xdf20, 0xeff0, 0x4a52, 0xf44d, 0xe1dd, 0x1, 0x0);
        gbc.writeMem(0x497f, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xdf20);
        EXPECT(gbc.pc(), 0x4980);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0270
        gbc.setState(0xdd22, 0xf480, 0x2a60, 0xec92, 0xa59a, 0xcb5d, 0x0, 0x1);
        gbc.writeMem(0xdd22, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xf480);
        EXPECT(gbc.pc(), 0xdd23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd22), 0x7f);
        // 7F 0271
        gbc.setState(0x7a81, 0xb9f9, 0x10b0, 0x781a, 0x10c0, 0xf0b5, 0x1, 0x0);
        gbc.writeMem(0x7a81, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xb9f9);
        EXPECT(gbc.pc(), 0x7a82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0272
        gbc.setState(0x8fb8, 0x197f, 0xb4e0, 0xd151, 0x93ff, 0xe5ab, 0x0, 0x1);
        gbc.writeMem(0x8fb8, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x197f);
        EXPECT(gbc.pc(), 0x8fb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fb8), 0x7f);
        // 7F 0273
        gbc.setState(0x92bb, 0xca24, 0x3440, 0xc9c2, 0x9d47, 0xdb2a, 0x1, 0x1);
        gbc.writeMem(0x92bb, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xca24);
        EXPECT(gbc.pc(), 0x92bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92bb), 0x7f);
        // 7F 0274
        gbc.setState(0x2ea4, 0xe3a3, 0xc360, 0x428e, 0xc406, 0x88e7, 0x1, 0x0);
        gbc.writeMem(0x2ea4, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xe3a3);
        EXPECT(gbc.pc(), 0x2ea5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0275
        gbc.setState(0x5d01, 0x8603, 0x93d0, 0xe63f, 0xe134, 0x9847, 0x0, 0x0);
        gbc.writeMem(0x5d01, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x8603);
        EXPECT(gbc.pc(), 0x5d02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0276
        gbc.setState(0xdfe8, 0xa4fd, 0x5210, 0x9f07, 0x910f, 0x304f, 0x0, 0x0);
        gbc.writeMem(0xdfe8, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xa4fd);
        EXPECT(gbc.pc(), 0xdfe9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfe8), 0x7f);
        // 7F 0277
        gbc.setState(0x4ab2, 0xac91, 0x3d80, 0x8a6a, 0x20f7, 0x4576, 0x1, 0x1);
        gbc.writeMem(0x4ab2, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xac91);
        EXPECT(gbc.pc(), 0x4ab3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0278
        gbc.setState(0x3c28, 0x509, 0x2d00, 0xe663, 0x7c0, 0x48c8, 0x1, 0x1);
        gbc.writeMem(0x3c28, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x509);
        EXPECT(gbc.pc(), 0x3c29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 027A
        gbc.setState(0x7358, 0x385c, 0x8d70, 0xb027, 0x18de, 0xd34b, 0x1, 0x0);
        gbc.writeMem(0x7358, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x385c);
        EXPECT(gbc.pc(), 0x7359);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 027B
        gbc.setState(0xb382, 0xc5a7, 0x1570, 0x6ea5, 0xe2f1, 0xe59b, 0x0, 0x1);
        gbc.writeMem(0xb382, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xc5a7);
        EXPECT(gbc.pc(), 0xb383);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb382), 0x7f);
        // 7F 027C
        gbc.setState(0xb3db, 0xa871, 0x7e0, 0x659b, 0x5bd2, 0x2d8f, 0x1, 0x1);
        gbc.writeMem(0xb3db, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xa871);
        EXPECT(gbc.pc(), 0xb3dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3db), 0x7f);
        // 7F 027D
        gbc.setState(0xaecd, 0x54b5, 0x1bf0, 0x420d, 0x1576, 0x9a0, 0x0, 0x1);
        gbc.writeMem(0xaecd, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x54b5);
        EXPECT(gbc.pc(), 0xaece);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaecd), 0x7f);
        // 7F 027E
        gbc.setState(0x2369, 0x36bc, 0x4c0, 0x73d2, 0xcb0d, 0x98f9, 0x1, 0x0);
        gbc.writeMem(0x2369, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x36bc);
        EXPECT(gbc.pc(), 0x236a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 027F
        gbc.setState(0xb93c, 0x325d, 0xd2c0, 0xb660, 0xc79c, 0x5e2c, 0x1, 0x1);
        gbc.writeMem(0xb93c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x325d);
        EXPECT(gbc.pc(), 0xb93d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb93c), 0x7f);
        // 7F 0280
        gbc.setState(0x6149, 0xef6a, 0xf6e0, 0x9982, 0x6dc1, 0x64f2, 0x0, 0x0);
        gbc.writeMem(0x6149, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xef6a);
        EXPECT(gbc.pc(), 0x614a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0281
        gbc.setState(0x5d1e, 0xf09, 0xc690, 0xd5a9, 0x2fa7, 0x12f2, 0x0, 0x0);
        gbc.writeMem(0x5d1e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xf09);
        EXPECT(gbc.pc(), 0x5d1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0282
        gbc.setState(0x9537, 0x28ea, 0xbbc0, 0x1895, 0xef6d, 0xf6fc, 0x1, 0x1);
        gbc.writeMem(0x9537, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x28ea);
        EXPECT(gbc.pc(), 0x9538);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9537), 0x7f);
        // 7F 0283
        gbc.setState(0x24fc, 0xf63f, 0xe050, 0xe031, 0xbbfa, 0x57cd, 0x1, 0x1);
        gbc.writeMem(0x24fc, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xf63f);
        EXPECT(gbc.pc(), 0x24fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0284
        gbc.setState(0x560d, 0x7081, 0x7580, 0x1cdd, 0x68ca, 0xe96f, 0x0, 0x0);
        gbc.writeMem(0x560d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x7081);
        EXPECT(gbc.pc(), 0x560e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0286
        gbc.setState(0x3f50, 0x3b13, 0x3cf0, 0xeb87, 0xb6bd, 0x16d4, 0x1, 0x1);
        gbc.writeMem(0x3f50, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x3b13);
        EXPECT(gbc.pc(), 0x3f51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0287
        gbc.setState(0x5d78, 0x7e6f, 0xfe20, 0xd2ee, 0xbca0, 0x9c2f, 0x0, 0x0);
        gbc.writeMem(0x5d78, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x7e6f);
        EXPECT(gbc.pc(), 0x5d79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0288
        gbc.setState(0xc71d, 0x1a05, 0x72e0, 0x7bff, 0xddd9, 0xd94e, 0x1, 0x0);
        gbc.writeMem(0xc71d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x1a05);
        EXPECT(gbc.pc(), 0xc71e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc71d), 0x7f);
        // 7F 0289
        gbc.setState(0x9fc5, 0xfa9c, 0xa460, 0x5878, 0xddeb, 0x7684, 0x1, 0x1);
        gbc.writeMem(0x9fc5, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xfa9c);
        EXPECT(gbc.pc(), 0x9fc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fc5), 0x7f);
        // 7F 028A
        gbc.setState(0xa379, 0xd2d1, 0x2ec0, 0x6e6, 0x2089, 0x53cc, 0x1, 0x1);
        gbc.writeMem(0xa379, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xd2d1);
        EXPECT(gbc.pc(), 0xa37a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa379), 0x7f);
        // 7F 028B
        gbc.setState(0xc624, 0xf76d, 0xe4d0, 0xb737, 0xee16, 0x808b, 0x1, 0x1);
        gbc.writeMem(0xc624, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xf76d);
        EXPECT(gbc.pc(), 0xc625);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc624), 0x7f);
        // 7F 028C
        gbc.setState(0xe7e1, 0xe00, 0x8a70, 0x52ff, 0x5d59, 0xf821, 0x0, 0x0);
        gbc.writeMem(0xe7e1, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xe00);
        EXPECT(gbc.pc(), 0xe7e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7e1), 0x7f);
        // 7F 028D
        gbc.setState(0xbf9e, 0xd4e6, 0x7c80, 0x1c38, 0x4cbf, 0x7ab, 0x1, 0x0);
        gbc.writeMem(0xbf9e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xd4e6);
        EXPECT(gbc.pc(), 0xbf9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf9e), 0x7f);
        // 7F 028E
        gbc.setState(0x5995, 0x9d4d, 0x2b0, 0x2d82, 0x2362, 0xfd05, 0x1, 0x1);
        gbc.writeMem(0x5995, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x9d4d);
        EXPECT(gbc.pc(), 0x5996);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 028F
        gbc.setState(0xedaf, 0x1186, 0xa820, 0x6a0, 0x6c97, 0xca49, 0x1, 0x0);
        gbc.writeMem(0xedaf, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x1186);
        EXPECT(gbc.pc(), 0xedb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedaf), 0x7f);
        // 7F 0290
        gbc.setState(0xeb61, 0xa40e, 0x6c60, 0xe6cc, 0x4bc, 0xe64c, 0x1, 0x0);
        gbc.writeMem(0xeb61, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xa40e);
        EXPECT(gbc.pc(), 0xeb62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb61), 0x7f);
        // 7F 0291
        gbc.setState(0x54f1, 0xcd1d, 0x40c0, 0xb2d4, 0x2ef0, 0xeff3, 0x1, 0x1);
        gbc.writeMem(0x54f1, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xcd1d);
        EXPECT(gbc.pc(), 0x54f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0292
        gbc.setState(0x9206, 0xa7f4, 0x2760, 0x3663, 0xbde4, 0x7d6a, 0x0, 0x0);
        gbc.writeMem(0x9206, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xa7f4);
        EXPECT(gbc.pc(), 0x9207);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9206), 0x7f);
        // 7F 0293
        gbc.setState(0x4155, 0x45eb, 0xf940, 0x5529, 0x2497, 0x5bba, 0x1, 0x1);
        gbc.writeMem(0x4155, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x45eb);
        EXPECT(gbc.pc(), 0x4156);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0294
        gbc.setState(0x7ce, 0xfb14, 0xbb30, 0xdac5, 0xb70, 0x236, 0x1, 0x1);
        gbc.writeMem(0x7ce, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xfb14);
        EXPECT(gbc.pc(), 0x7cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0295
        gbc.setState(0x5041, 0x257d, 0x4df0, 0x440, 0x303b, 0xa86e, 0x1, 0x1);
        gbc.writeMem(0x5041, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x257d);
        EXPECT(gbc.pc(), 0x5042);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0296
        gbc.setState(0x4d80, 0xf95b, 0x8bc0, 0x7061, 0xa3d0, 0x1a53, 0x1, 0x0);
        gbc.writeMem(0x4d80, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xf95b);
        EXPECT(gbc.pc(), 0x4d81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0297
        gbc.setState(0xe1fb, 0x6299, 0xa420, 0x1457, 0xb42d, 0x991d, 0x1, 0x0);
        gbc.writeMem(0xe1fb, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x6299);
        EXPECT(gbc.pc(), 0xe1fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1fb), 0x7f);
        // 7F 0298
        gbc.setState(0x59dc, 0x2e23, 0x1a80, 0x31d7, 0x147b, 0x3b40, 0x1, 0x1);
        gbc.writeMem(0x59dc, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x2e23);
        EXPECT(gbc.pc(), 0x59dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0299
        gbc.setState(0x4c9d, 0x9e40, 0x2920, 0x6605, 0x2cb2, 0xe7be, 0x0, 0x0);
        gbc.writeMem(0x4c9d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x9e40);
        EXPECT(gbc.pc(), 0x4c9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 029A
        gbc.setState(0x73a3, 0xad68, 0xd930, 0x7e51, 0x1436, 0x2da2, 0x1, 0x1);
        gbc.writeMem(0x73a3, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xad68);
        EXPECT(gbc.pc(), 0x73a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 029B
        gbc.setState(0x608b, 0xd691, 0x9dc0, 0x6609, 0x3c7e, 0x3f91, 0x1, 0x0);
        gbc.writeMem(0x608b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xd691);
        EXPECT(gbc.pc(), 0x608c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 029C
        gbc.setState(0x12f3, 0xcd54, 0x60, 0xfacd, 0x1a64, 0x1e76, 0x1, 0x1);
        gbc.writeMem(0x12f3, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xcd54);
        EXPECT(gbc.pc(), 0x12f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 029D
        gbc.setState(0x8fc1, 0x8a53, 0x4380, 0x9403, 0x9363, 0xd33a, 0x1, 0x1);
        gbc.writeMem(0x8fc1, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x8a53);
        EXPECT(gbc.pc(), 0x8fc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fc1), 0x7f);
        // 7F 029E
        gbc.setState(0x425c, 0x7d22, 0x56b0, 0xc1d7, 0xb6b8, 0xaf66, 0x0, 0x1);
        gbc.writeMem(0x425c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x7d22);
        EXPECT(gbc.pc(), 0x425d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 029F
        gbc.setState(0x29eb, 0x5f54, 0x2dc0, 0x90e1, 0xc99, 0x32ff, 0x1, 0x1);
        gbc.writeMem(0x29eb, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x5f54);
        EXPECT(gbc.pc(), 0x29ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 02A0
        gbc.setState(0xbd09, 0xf3a7, 0x6ad0, 0xd1b0, 0xe8d8, 0xc3f1, 0x0, 0x1);
        gbc.writeMem(0xbd09, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xf3a7);
        EXPECT(gbc.pc(), 0xbd0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd09), 0x7f);
        // 7F 02A1
        gbc.setState(0xe5e5, 0xf621, 0x6de0, 0x9152, 0x618a, 0x4202, 0x1, 0x1);
        gbc.writeMem(0xe5e5, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xf621);
        EXPECT(gbc.pc(), 0xe5e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5e5), 0x7f);
        // 7F 02A2
        gbc.setState(0x9c3d, 0xd2b9, 0xd670, 0x5a92, 0xb90e, 0x5ffc, 0x1, 0x0);
        gbc.writeMem(0x9c3d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xd2b9);
        EXPECT(gbc.pc(), 0x9c3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c3d), 0x7f);
        // 7F 02A3
        gbc.setState(0x798b, 0xb9fc, 0x9680, 0x5222, 0x6fc9, 0xfe22, 0x0, 0x0);
        gbc.writeMem(0x798b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xb9fc);
        EXPECT(gbc.pc(), 0x798c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 02A4
        gbc.setState(0x17b2, 0x8f00, 0x2710, 0xe17f, 0xae52, 0x5198, 0x1, 0x0);
        gbc.writeMem(0x17b2, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x8f00);
        EXPECT(gbc.pc(), 0x17b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 02A5
        gbc.setState(0xbde, 0x8c1c, 0xfe00, 0xd40, 0x65cc, 0xb902, 0x0, 0x0);
        gbc.writeMem(0xbde, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x8c1c);
        EXPECT(gbc.pc(), 0xbdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 02A6
        gbc.setState(0xe7a8, 0x7833, 0x8ca0, 0x69b9, 0xb153, 0xa96c, 0x1, 0x1);
        gbc.writeMem(0xe7a8, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x7833);
        EXPECT(gbc.pc(), 0xe7a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7a8), 0x7f);
        // 7F 02A7
        gbc.setState(0x552d, 0x47ad, 0xc660, 0x3b12, 0x4222, 0xc634, 0x0, 0x1);
        gbc.writeMem(0x552d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x47ad);
        EXPECT(gbc.pc(), 0x552e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 02A8
        gbc.setState(0x38d3, 0x8784, 0xa20, 0x965, 0x712f, 0x3500, 0x1, 0x1);
        gbc.writeMem(0x38d3, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x8784);
        EXPECT(gbc.pc(), 0x38d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 02A9
        gbc.setState(0xe798, 0x9d28, 0xe1c0, 0xe713, 0xfcc9, 0xa0a, 0x0, 0x1);
        gbc.writeMem(0xe798, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x9d28);
        EXPECT(gbc.pc(), 0xe799);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe798), 0x7f);
        // 7F 02AB
        gbc.setState(0x1966, 0xe020, 0x8030, 0x52df, 0xc558, 0x1f25, 0x0, 0x1);
        gbc.writeMem(0x1966, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xe020);
        EXPECT(gbc.pc(), 0x1967);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 02AC
        gbc.setState(0x9578, 0xd0e5, 0xad60, 0x5a6d, 0x710, 0x1ed7, 0x1, 0x1);
        gbc.writeMem(0x9578, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xd0e5);
        EXPECT(gbc.pc(), 0x9579);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9578), 0x7f);
        // 7F 02AE
        gbc.setState(0x2618, 0x18d4, 0x9190, 0xa1fe, 0xb278, 0xddd4, 0x0, 0x1);
        gbc.writeMem(0x2618, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x18d4);
        EXPECT(gbc.pc(), 0x2619);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 02B0
        gbc.setState(0xe4f8, 0xd4dd, 0x8c90, 0x91ac, 0x26d0, 0x8151, 0x0, 0x0);
        gbc.writeMem(0xe4f8, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xd4dd);
        EXPECT(gbc.pc(), 0xe4f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4f8), 0x7f);
        // 7F 02B1
        gbc.setState(0x1870, 0x1996, 0x280, 0xa40f, 0x23ba, 0x6297, 0x1, 0x1);
        gbc.writeMem(0x1870, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x1996);
        EXPECT(gbc.pc(), 0x1871);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 02B2
        gbc.setState(0x7edc, 0xeb64, 0xe90, 0xf54f, 0x903, 0x7b13, 0x1, 0x1);
        gbc.writeMem(0x7edc, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xeb64);
        EXPECT(gbc.pc(), 0x7edd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 02B3
        gbc.setState(0x1e49, 0x8e67, 0xde50, 0xdebd, 0xb3f8, 0xdbe8, 0x1, 0x1);
        gbc.writeMem(0x1e49, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x8e67);
        EXPECT(gbc.pc(), 0x1e4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 02B4
        gbc.setState(0x6850, 0x8461, 0x4f50, 0x1db5, 0x97d8, 0x99cf, 0x0, 0x0);
        gbc.writeMem(0x6850, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x8461);
        EXPECT(gbc.pc(), 0x6851);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 02B5
        gbc.setState(0x9fae, 0x3050, 0x30d0, 0x6f96, 0x2e9a, 0xafa5, 0x1, 0x1);
        gbc.writeMem(0x9fae, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x3050);
        EXPECT(gbc.pc(), 0x9faf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fae), 0x7f);
        // 7F 02B6
        gbc.setState(0x8383, 0xdb9b, 0x7240, 0x9781, 0x9942, 0x73c2, 0x0, 0x1);
        gbc.writeMem(0x8383, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xdb9b);
        EXPECT(gbc.pc(), 0x8384);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8383), 0x7f);
        // 7F 02B7
        gbc.setState(0x3cef, 0x98cc, 0x7740, 0xb776, 0xdc3c, 0xb06c, 0x1, 0x1);
        gbc.writeMem(0x3cef, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x98cc);
        EXPECT(gbc.pc(), 0x3cf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 02B8
        gbc.setState(0x95e, 0x2cab, 0x710, 0x5d08, 0x19d, 0x75ab, 0x1, 0x1);
        gbc.writeMem(0x95e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x2cab);
        EXPECT(gbc.pc(), 0x95f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 02B9
        gbc.setState(0x3b0d, 0x645f, 0x300, 0xc9cb, 0xe0f0, 0xa68f, 0x1, 0x0);
        gbc.writeMem(0x3b0d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x645f);
        EXPECT(gbc.pc(), 0x3b0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 02BA
        gbc.setState(0xcb41, 0xf0cc, 0x4e70, 0x69d, 0x21ef, 0x1730, 0x1, 0x0);
        gbc.writeMem(0xcb41, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xf0cc);
        EXPECT(gbc.pc(), 0xcb42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb41), 0x7f);
        // 7F 02BB
        gbc.setState(0x87a2, 0x6184, 0x5880, 0xfa60, 0xd1f2, 0x76fa, 0x0, 0x0);
        gbc.writeMem(0x87a2, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x6184);
        EXPECT(gbc.pc(), 0x87a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87a2), 0x7f);
        // 7F 02BC
        gbc.setState(0xe8c9, 0xa5a6, 0x9d90, 0x64b7, 0x281f, 0xc607, 0x0, 0x0);
        gbc.writeMem(0xe8c9, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xa5a6);
        EXPECT(gbc.pc(), 0xe8ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8c9), 0x7f);
        // 7F 02BD
        gbc.setState(0x89bd, 0xfa1f, 0xea40, 0xfad, 0x4716, 0x5ca7, 0x0, 0x1);
        gbc.writeMem(0x89bd, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xfa1f);
        EXPECT(gbc.pc(), 0x89be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89bd), 0x7f);
        // 7F 02BF
        gbc.setState(0x998a, 0x9b3e, 0xc3b0, 0x20a2, 0x6c7c, 0x4218, 0x0, 0x1);
        gbc.writeMem(0x998a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x9b3e);
        EXPECT(gbc.pc(), 0x998b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x998a), 0x7f);
        // 7F 02C0
        gbc.setState(0x789c, 0x17f3, 0x51b0, 0x1dcf, 0x268, 0xb789, 0x1, 0x1);
        gbc.writeMem(0x789c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x17f3);
        EXPECT(gbc.pc(), 0x789d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 02C1
        gbc.setState(0x7e00, 0x40b0, 0x7610, 0xe76e, 0x883a, 0xfd82, 0x0, 0x1);
        gbc.writeMem(0x7e00, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x40b0);
        EXPECT(gbc.pc(), 0x7e01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 02C2
        gbc.setState(0x61fc, 0xfa31, 0x59b0, 0xb4bd, 0xdb6f, 0x155d, 0x0, 0x1);
        gbc.writeMem(0x61fc, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xfa31);
        EXPECT(gbc.pc(), 0x61fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 02C3
        gbc.setState(0x6496, 0x2634, 0x7510, 0xd827, 0x25eb, 0xc41d, 0x0, 0x1);
        gbc.writeMem(0x6496, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x2634);
        EXPECT(gbc.pc(), 0x6497);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 02C4
        gbc.setState(0xd703, 0xd35b, 0xfd80, 0x2f06, 0x3648, 0xc982, 0x1, 0x0);
        gbc.writeMem(0xd703, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xd35b);
        EXPECT(gbc.pc(), 0xd704);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd703), 0x7f);
        // 7F 02C6
        gbc.setState(0xdc06, 0x1ddf, 0xcdc0, 0xe3a4, 0x29c1, 0x34cf, 0x0, 0x1);
        gbc.writeMem(0xdc06, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x1ddf);
        EXPECT(gbc.pc(), 0xdc07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc06), 0x7f);
        // 7F 02C7
        gbc.setState(0x359b, 0xbfc9, 0xa540, 0xbac5, 0x52da, 0x6dc, 0x0, 0x0);
        gbc.writeMem(0x359b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xbfc9);
        EXPECT(gbc.pc(), 0x359c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 02C8
        gbc.setState(0xc6e3, 0x36cd, 0x8db0, 0xacc7, 0xf031, 0x862c, 0x0, 0x1);
        gbc.writeMem(0xc6e3, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x36cd);
        EXPECT(gbc.pc(), 0xc6e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6e3), 0x7f);
        // 7F 02C9
        gbc.setState(0xe4f1, 0x7053, 0x3f60, 0xd2fb, 0x1ffa, 0x6d67, 0x0, 0x1);
        gbc.writeMem(0xe4f1, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x7053);
        EXPECT(gbc.pc(), 0xe4f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4f1), 0x7f);
        // 7F 02CA
        gbc.setState(0x8dbb, 0xdbc2, 0xf010, 0xa6f8, 0x7f3, 0xbf13, 0x1, 0x0);
        gbc.writeMem(0x8dbb, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xdbc2);
        EXPECT(gbc.pc(), 0x8dbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dbb), 0x7f);
        // 7F 02CB
        gbc.setState(0x55e8, 0x3cf0, 0xa490, 0x9237, 0xebb, 0x1928, 0x0, 0x1);
        gbc.writeMem(0x55e8, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x3cf0);
        EXPECT(gbc.pc(), 0x55e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 02CC
        gbc.setState(0x84f3, 0x36c0, 0xa760, 0xd75d, 0x64cd, 0x4dcf, 0x1, 0x1);
        gbc.writeMem(0x84f3, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x36c0);
        EXPECT(gbc.pc(), 0x84f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84f3), 0x7f);
        // 7F 02CD
        gbc.setState(0xcabb, 0xdb24, 0xf800, 0xa7ff, 0x20c6, 0xf4d9, 0x0, 0x0);
        gbc.writeMem(0xcabb, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xdb24);
        EXPECT(gbc.pc(), 0xcabc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcabb), 0x7f);
        // 7F 02CE
        gbc.setState(0xe7e4, 0x6ec5, 0x3ae0, 0xb387, 0xe0e3, 0x9aef, 0x0, 0x1);
        gbc.writeMem(0xe7e4, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x6ec5);
        EXPECT(gbc.pc(), 0xe7e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7e4), 0x7f);
        // 7F 02CF
        gbc.setState(0xc884, 0x6fae, 0xd4b0, 0xb2d8, 0x70bf, 0x34f7, 0x1, 0x0);
        gbc.writeMem(0xc884, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x6fae);
        EXPECT(gbc.pc(), 0xc885);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc884), 0x7f);
        // 7F 02D0
        gbc.setState(0xcd9d, 0xa20, 0x7690, 0xafb, 0xb70d, 0x32b8, 0x1, 0x1);
        gbc.writeMem(0xcd9d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xa20);
        EXPECT(gbc.pc(), 0xcd9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd9d), 0x7f);
        // 7F 02D1
        gbc.setState(0x36e0, 0xe19a, 0xd900, 0x1a8c, 0xd919, 0x79d1, 0x1, 0x0);
        gbc.writeMem(0x36e0, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xe19a);
        EXPECT(gbc.pc(), 0x36e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 02D2
        gbc.setState(0x71c3, 0x6d7, 0x5ce0, 0x2bc7, 0x68ab, 0x9cce, 0x0, 0x1);
        gbc.writeMem(0x71c3, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x6d7);
        EXPECT(gbc.pc(), 0x71c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 02D3
        gbc.setState(0x9dba, 0x402e, 0x5b30, 0x7b4b, 0x467a, 0x629a, 0x1, 0x0);
        gbc.writeMem(0x9dba, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x402e);
        EXPECT(gbc.pc(), 0x9dbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dba), 0x7f);
        // 7F 02D4
        gbc.setState(0x7800, 0x1782, 0x8de0, 0x3961, 0x238a, 0xf2a0, 0x0, 0x0);
        gbc.writeMem(0x7800, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x1782);
        EXPECT(gbc.pc(), 0x7801);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 02D5
        gbc.setState(0x64b3, 0x3d23, 0x23f0, 0x878f, 0xf7e4, 0x9fc, 0x1, 0x0);
        gbc.writeMem(0x64b3, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x3d23);
        EXPECT(gbc.pc(), 0x64b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 02D6
        gbc.setState(0x1eb2, 0x4087, 0x48c0, 0xcd7a, 0x2fc9, 0x78c2, 0x1, 0x0);
        gbc.writeMem(0x1eb2, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x4087);
        EXPECT(gbc.pc(), 0x1eb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 02D7
        gbc.setState(0x49f0, 0x87d6, 0x5250, 0x5088, 0xbb11, 0xd4bc, 0x1, 0x0);
        gbc.writeMem(0x49f0, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x87d6);
        EXPECT(gbc.pc(), 0x49f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 02D8
        gbc.setState(0xec61, 0x45ac, 0x4770, 0x2796, 0xf106, 0x8ade, 0x0, 0x1);
        gbc.writeMem(0xec61, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x45ac);
        EXPECT(gbc.pc(), 0xec62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec61), 0x7f);
        // 7F 02D9
        gbc.setState(0x5357, 0x571d, 0xab00, 0xd9e1, 0x1d09, 0x5e0f, 0x0, 0x1);
        gbc.writeMem(0x5357, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x571d);
        EXPECT(gbc.pc(), 0x5358);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 02DB
        gbc.setState(0x178d, 0xda9e, 0x770, 0x568e, 0x5f07, 0xdaf0, 0x1, 0x1);
        gbc.writeMem(0x178d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xda9e);
        EXPECT(gbc.pc(), 0x178e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 02DC
        gbc.setState(0x6828, 0xb3a, 0x9a80, 0x683f, 0xafe, 0x6cac, 0x1, 0x0);
        gbc.writeMem(0x6828, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xb3a);
        EXPECT(gbc.pc(), 0x6829);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 02DE
        gbc.setState(0xc591, 0x4bdf, 0x20e0, 0x2edd, 0xc234, 0x6c4f, 0x1, 0x1);
        gbc.writeMem(0xc591, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x4bdf);
        EXPECT(gbc.pc(), 0xc592);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc591), 0x7f);
        // 7F 02DF
        gbc.setState(0xd6eb, 0x84a7, 0xbdb0, 0xc156, 0xee9b, 0x22ee, 0x1, 0x1);
        gbc.writeMem(0xd6eb, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x84a7);
        EXPECT(gbc.pc(), 0xd6ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6eb), 0x7f);
        // 7F 02E0
        gbc.setState(0x19af, 0x6aed, 0x7c90, 0xb9cc, 0xc4d, 0xcd02, 0x0, 0x0);
        gbc.writeMem(0x19af, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x6aed);
        EXPECT(gbc.pc(), 0x19b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 02E1
        gbc.setState(0x26ff, 0x3e99, 0xafe0, 0x45e, 0x1047, 0xa5e8, 0x1, 0x0);
        gbc.writeMem(0x26ff, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x3e99);
        EXPECT(gbc.pc(), 0x2700);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 02E2
        gbc.setState(0x1844, 0x93e5, 0xe070, 0xe764, 0x4783, 0x81a4, 0x0, 0x1);
        gbc.writeMem(0x1844, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x93e5);
        EXPECT(gbc.pc(), 0x1845);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 02E3
        gbc.setState(0xbb24, 0xe1fe, 0xe560, 0x2fc, 0x8083, 0x13f, 0x0, 0x1);
        gbc.writeMem(0xbb24, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xe1fe);
        EXPECT(gbc.pc(), 0xbb25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb24), 0x7f);
        // 7F 02E4
        gbc.setState(0xbb8f, 0x5e38, 0x60b0, 0x8958, 0xc555, 0xff1e, 0x1, 0x1);
        gbc.writeMem(0xbb8f, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x5e38);
        EXPECT(gbc.pc(), 0xbb90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb8f), 0x7f);
        // 7F 02E5
        gbc.setState(0x9e75, 0x9371, 0xfcc0, 0xf515, 0x6012, 0x3791, 0x1, 0x0);
        gbc.writeMem(0x9e75, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x9371);
        EXPECT(gbc.pc(), 0x9e76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e75), 0x7f);
        // 7F 02E6
        gbc.setState(0x97de, 0xbb46, 0x4f10, 0xbc83, 0x2705, 0x1495, 0x1, 0x0);
        gbc.writeMem(0x97de, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xbb46);
        EXPECT(gbc.pc(), 0x97df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97de), 0x7f);
        // 7F 02E7
        gbc.setState(0x964d, 0x7b6d, 0x1790, 0xab05, 0x7bda, 0xffb5, 0x1, 0x1);
        gbc.writeMem(0x964d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x7b6d);
        EXPECT(gbc.pc(), 0x964e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x964d), 0x7f);
        // 7F 02E8
        gbc.setState(0x20f1, 0x27e2, 0xe0a0, 0x94b2, 0xbbe9, 0x5006, 0x0, 0x1);
        gbc.writeMem(0x20f1, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x27e2);
        EXPECT(gbc.pc(), 0x20f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 02E9
        gbc.setState(0xd115, 0xefd7, 0x9b10, 0xef98, 0x7aba, 0x94f7, 0x1, 0x0);
        gbc.writeMem(0xd115, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xefd7);
        EXPECT(gbc.pc(), 0xd116);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd115), 0x7f);
        // 7F 02EA
        gbc.setState(0xbd66, 0x49ea, 0x5da0, 0xcce1, 0x367b, 0x6538, 0x1, 0x1);
        gbc.writeMem(0xbd66, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x49ea);
        EXPECT(gbc.pc(), 0xbd67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd66), 0x7f);
        // 7F 02EC
        gbc.setState(0x9fa, 0x66b9, 0xf330, 0xfab9, 0xaad1, 0x9677, 0x1, 0x1);
        gbc.writeMem(0x9fa, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x66b9);
        EXPECT(gbc.pc(), 0x9fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 02ED
        gbc.setState(0x87a5, 0x7fa2, 0x410, 0xfbcb, 0xbd37, 0x4051, 0x0, 0x1);
        gbc.writeMem(0x87a5, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x7fa2);
        EXPECT(gbc.pc(), 0x87a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87a5), 0x7f);
        // 7F 02EE
        gbc.setState(0x4a67, 0xf062, 0x4e60, 0x2e02, 0xe20f, 0x260e, 0x0, 0x1);
        gbc.writeMem(0x4a67, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xf062);
        EXPECT(gbc.pc(), 0x4a68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 02EF
        gbc.setState(0x93e6, 0xe84a, 0x5b80, 0xebb3, 0x5cbb, 0xa039, 0x1, 0x1);
        gbc.writeMem(0x93e6, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xe84a);
        EXPECT(gbc.pc(), 0x93e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93e6), 0x7f);
        // 7F 02F0
        gbc.setState(0x8a2, 0x7b1, 0x5d20, 0xc451, 0xbc22, 0xcd9b, 0x0, 0x1);
        gbc.writeMem(0x8a2, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x7b1);
        EXPECT(gbc.pc(), 0x8a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 02F1
        gbc.setState(0x7744, 0x159c, 0x6f30, 0x1b47, 0xc78a, 0x438c, 0x1, 0x1);
        gbc.writeMem(0x7744, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x159c);
        EXPECT(gbc.pc(), 0x7745);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 02F2
        gbc.setState(0xa6aa, 0x6637, 0xe750, 0x8f35, 0xae44, 0x8619, 0x1, 0x1);
        gbc.writeMem(0xa6aa, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x6637);
        EXPECT(gbc.pc(), 0xa6ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6aa), 0x7f);
        // 7F 02F4
        gbc.setState(0xbd6e, 0x7184, 0x4720, 0x7c09, 0x1322, 0x638c, 0x0, 0x1);
        gbc.writeMem(0xbd6e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x7184);
        EXPECT(gbc.pc(), 0xbd6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd6e), 0x7f);
        // 7F 02F5
        gbc.setState(0x6cd, 0x248d, 0x52a0, 0x589c, 0xc60f, 0x6fc5, 0x1, 0x1);
        gbc.writeMem(0x6cd, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x248d);
        EXPECT(gbc.pc(), 0x6ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 02F6
        gbc.setState(0xa7c1, 0xf438, 0xbba0, 0xcff6, 0x8126, 0xfb56, 0x0, 0x0);
        gbc.writeMem(0xa7c1, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xf438);
        EXPECT(gbc.pc(), 0xa7c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7c1), 0x7f);
        // 7F 02F7
        gbc.setState(0x9610, 0x9390, 0x770, 0xb2de, 0xa7cd, 0x7097, 0x1, 0x0);
        gbc.writeMem(0x9610, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x9390);
        EXPECT(gbc.pc(), 0x9611);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9610), 0x7f);
        // 7F 02F9
        gbc.setState(0x6e44, 0x885f, 0xfe20, 0x2ee9, 0x1f47, 0x9aa9, 0x0, 0x1);
        gbc.writeMem(0x6e44, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x885f);
        EXPECT(gbc.pc(), 0x6e45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 02FA
        gbc.setState(0xd1c8, 0x53fa, 0x8220, 0x8865, 0x35ef, 0x9d38, 0x0, 0x1);
        gbc.writeMem(0xd1c8, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x53fa);
        EXPECT(gbc.pc(), 0xd1c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1c8), 0x7f);
        // 7F 02FB
        gbc.setState(0xfd, 0x7033, 0x6660, 0xe302, 0xaaa9, 0xe28f, 0x1, 0x0);
        gbc.writeMem(0xfd, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x7033);
        EXPECT(gbc.pc(), 0xfe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 02FC
        gbc.setState(0x6a3e, 0xdc04, 0x6810, 0xc7f2, 0x97e6, 0xa1f4, 0x1, 0x0);
        gbc.writeMem(0x6a3e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xdc04);
        EXPECT(gbc.pc(), 0x6a3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 02FD
        gbc.setState(0x2a1, 0x63b8, 0xbb0, 0xf44f, 0xae62, 0x825a, 0x1, 0x0);
        gbc.writeMem(0x2a1, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x63b8);
        EXPECT(gbc.pc(), 0x2a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 02FE
        gbc.setState(0x24bd, 0xada8, 0x8f30, 0x876f, 0x632c, 0xd5fc, 0x0, 0x0);
        gbc.writeMem(0x24bd, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xada8);
        EXPECT(gbc.pc(), 0x24be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 02FF
        gbc.setState(0x6548, 0x4d7e, 0x8760, 0x2dc6, 0x2836, 0xeba0, 0x0, 0x0);
        gbc.writeMem(0x6548, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x4d7e);
        EXPECT(gbc.pc(), 0x6549);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0300
        gbc.setState(0xad21, 0xbafe, 0x5770, 0xae80, 0xa1d1, 0x47d9, 0x0, 0x1);
        gbc.writeMem(0xad21, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xbafe);
        EXPECT(gbc.pc(), 0xad22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad21), 0x7f);
        // 7F 0301
        gbc.setState(0x7ea4, 0xa193, 0x50e0, 0xaba7, 0xf215, 0x2c4c, 0x1, 0x0);
        gbc.writeMem(0x7ea4, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xa193);
        EXPECT(gbc.pc(), 0x7ea5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0302
        gbc.setState(0xc40, 0x7c9e, 0x3270, 0x224b, 0xa1ed, 0xdfcd, 0x0, 0x1);
        gbc.writeMem(0xc40, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x7c9e);
        EXPECT(gbc.pc(), 0xc41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0303
        gbc.setState(0xa2b4, 0xe978, 0x5080, 0x702b, 0xbb7b, 0x4e83, 0x1, 0x0);
        gbc.writeMem(0xa2b4, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xe978);
        EXPECT(gbc.pc(), 0xa2b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2b4), 0x7f);
        // 7F 0304
        gbc.setState(0x229e, 0x8b0a, 0xbdc0, 0xf227, 0xd02e, 0x10bd, 0x1, 0x0);
        gbc.writeMem(0x229e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x8b0a);
        EXPECT(gbc.pc(), 0x229f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0305
        gbc.setState(0xbbc1, 0xa6ea, 0x24b0, 0x7fe7, 0xc55f, 0x84aa, 0x0, 0x1);
        gbc.writeMem(0xbbc1, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xa6ea);
        EXPECT(gbc.pc(), 0xbbc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbc1), 0x7f);
        // 7F 0306
        gbc.setState(0xa4c4, 0xd95f, 0xb360, 0x6315, 0x4056, 0xf6af, 0x0, 0x1);
        gbc.writeMem(0xa4c4, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xd95f);
        EXPECT(gbc.pc(), 0xa4c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4c4), 0x7f);
        // 7F 0307
        gbc.setState(0x2f4e, 0x1968, 0x57c0, 0x49a0, 0x4ee, 0xd30b, 0x0, 0x1);
        gbc.writeMem(0x2f4e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x1968);
        EXPECT(gbc.pc(), 0x2f4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0308
        gbc.setState(0xbaab, 0x55da, 0x630, 0xf93a, 0x2f90, 0x7060, 0x1, 0x0);
        gbc.writeMem(0xbaab, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x55da);
        EXPECT(gbc.pc(), 0xbaac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbaab), 0x7f);
        // 7F 0309
        gbc.setState(0x5f1e, 0x897, 0x92e0, 0x6a88, 0xf886, 0x1b19, 0x1, 0x1);
        gbc.writeMem(0x5f1e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x897);
        EXPECT(gbc.pc(), 0x5f1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 030A
        gbc.setState(0xce4a, 0xd2d6, 0x290, 0x105b, 0xc8ee, 0x1005, 0x0, 0x0);
        gbc.writeMem(0xce4a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xd2d6);
        EXPECT(gbc.pc(), 0xce4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce4a), 0x7f);
        // 7F 030B
        gbc.setState(0xb494, 0x861c, 0xc070, 0x5a0a, 0xd02f, 0xc39e, 0x1, 0x0);
        gbc.writeMem(0xb494, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x861c);
        EXPECT(gbc.pc(), 0xb495);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb494), 0x7f);
        // 7F 030C
        gbc.setState(0x5561, 0xd050, 0x2d80, 0x60fb, 0xbe8f, 0x482e, 0x1, 0x1);
        gbc.writeMem(0x5561, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xd050);
        EXPECT(gbc.pc(), 0x5562);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 030D
        gbc.setState(0xb37e, 0x6b4c, 0x70a0, 0xf89, 0x4b0f, 0x151d, 0x0, 0x1);
        gbc.writeMem(0xb37e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x6b4c);
        EXPECT(gbc.pc(), 0xb37f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb37e), 0x7f);
        // 7F 030E
        gbc.setState(0x7907, 0x1741, 0x8590, 0x1cc2, 0x94f, 0xeea, 0x1, 0x1);
        gbc.writeMem(0x7907, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x1741);
        EXPECT(gbc.pc(), 0x7908);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 030F
        gbc.setState(0x6426, 0x513b, 0x35b0, 0x6462, 0x28f2, 0x3cfc, 0x1, 0x1);
        gbc.writeMem(0x6426, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x513b);
        EXPECT(gbc.pc(), 0x6427);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0310
        gbc.setState(0x1f4d, 0x5cf4, 0x92c0, 0xf390, 0xcdcc, 0xdd9, 0x1, 0x1);
        gbc.writeMem(0x1f4d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x5cf4);
        EXPECT(gbc.pc(), 0x1f4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0311
        gbc.setState(0x85bb, 0xac8b, 0x78f0, 0xedac, 0xa4f, 0xb613, 0x0, 0x1);
        gbc.writeMem(0x85bb, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xac8b);
        EXPECT(gbc.pc(), 0x85bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85bb), 0x7f);
        // 7F 0312
        gbc.setState(0x68c9, 0x7385, 0xe200, 0xe944, 0x42a4, 0x9195, 0x0, 0x1);
        gbc.writeMem(0x68c9, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x7385);
        EXPECT(gbc.pc(), 0x68ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0313
        gbc.setState(0x5878, 0x8c4d, 0x21d0, 0x7bd1, 0x78f0, 0xa2b5, 0x1, 0x0);
        gbc.writeMem(0x5878, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x8c4d);
        EXPECT(gbc.pc(), 0x5879);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0315
        gbc.setState(0x676d, 0xab71, 0x88e0, 0x3db2, 0x2e8d, 0x4e24, 0x1, 0x1);
        gbc.writeMem(0x676d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xab71);
        EXPECT(gbc.pc(), 0x676e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0316
        gbc.setState(0xc924, 0x5ff7, 0x9b80, 0x43a9, 0x9cdc, 0x8761, 0x1, 0x1);
        gbc.writeMem(0xc924, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x5ff7);
        EXPECT(gbc.pc(), 0xc925);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc924), 0x7f);
        // 7F 0317
        gbc.setState(0xa89b, 0xf5a7, 0x6400, 0xf232, 0x3dc4, 0xa1ce, 0x1, 0x1);
        gbc.writeMem(0xa89b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xf5a7);
        EXPECT(gbc.pc(), 0xa89c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa89b), 0x7f);
        // 7F 0318
        gbc.setState(0x367a, 0x4d34, 0xdb80, 0x891e, 0xed46, 0x450c, 0x1, 0x0);
        gbc.writeMem(0x367a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x4d34);
        EXPECT(gbc.pc(), 0x367b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0319
        gbc.setState(0xadb3, 0x121c, 0xfec0, 0x2cb4, 0xe41c, 0x5431, 0x1, 0x1);
        gbc.writeMem(0xadb3, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x121c);
        EXPECT(gbc.pc(), 0xadb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadb3), 0x7f);
        // 7F 031A
        gbc.setState(0x7746, 0x5fc3, 0x3460, 0x2584, 0x990b, 0xc168, 0x0, 0x1);
        gbc.writeMem(0x7746, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x5fc3);
        EXPECT(gbc.pc(), 0x7747);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 031B
        gbc.setState(0x59d2, 0xfa6f, 0xf8f0, 0x8dc7, 0xcb68, 0xe4cb, 0x1, 0x0);
        gbc.writeMem(0x59d2, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xfa6f);
        EXPECT(gbc.pc(), 0x59d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 031C
        gbc.setState(0x447d, 0xd481, 0xbad0, 0xd005, 0xb323, 0x1096, 0x1, 0x0);
        gbc.writeMem(0x447d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xd481);
        EXPECT(gbc.pc(), 0x447e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 031D
        gbc.setState(0x7667, 0x1e66, 0xe8b0, 0x48ed, 0x8929, 0x8bea, 0x1, 0x0);
        gbc.writeMem(0x7667, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x1e66);
        EXPECT(gbc.pc(), 0x7668);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 031E
        gbc.setState(0xd85f, 0x929b, 0x8680, 0x8c96, 0xa613, 0xd83d, 0x0, 0x1);
        gbc.writeMem(0xd85f, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x929b);
        EXPECT(gbc.pc(), 0xd860);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd85f), 0x7f);
        // 7F 031F
        gbc.setState(0x92e6, 0x8157, 0x40, 0x6dc5, 0xc04c, 0x2020, 0x0, 0x1);
        gbc.writeMem(0x92e6, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x8157);
        EXPECT(gbc.pc(), 0x92e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92e6), 0x7f);
        // 7F 0320
        gbc.setState(0x5c4d, 0x541b, 0x7990, 0x94f1, 0x5879, 0x6cbe, 0x1, 0x1);
        gbc.writeMem(0x5c4d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x541b);
        EXPECT(gbc.pc(), 0x5c4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0321
        gbc.setState(0xd847, 0x9e9d, 0x4240, 0xc910, 0x25ee, 0xc744, 0x1, 0x0);
        gbc.writeMem(0xd847, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x9e9d);
        EXPECT(gbc.pc(), 0xd848);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd847), 0x7f);
        // 7F 0322
        gbc.setState(0x77e6, 0xdce6, 0xc2c0, 0xe372, 0xece4, 0xca47, 0x1, 0x0);
        gbc.writeMem(0x77e6, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xdce6);
        EXPECT(gbc.pc(), 0x77e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0323
        gbc.setState(0x6800, 0x3ff6, 0xbb50, 0x7e98, 0x7f52, 0xbf36, 0x0, 0x0);
        gbc.writeMem(0x6800, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x3ff6);
        EXPECT(gbc.pc(), 0x6801);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0325
        gbc.setState(0x8c63, 0xd793, 0x4fa0, 0xf223, 0xcc73, 0xfec0, 0x0, 0x0);
        gbc.writeMem(0x8c63, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xd793);
        EXPECT(gbc.pc(), 0x8c64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c63), 0x7f);
        // 7F 0326
        gbc.setState(0xa6f7, 0xe2af, 0x1790, 0xedd6, 0x4826, 0x5280, 0x1, 0x0);
        gbc.writeMem(0xa6f7, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xe2af);
        EXPECT(gbc.pc(), 0xa6f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6f7), 0x7f);
        // 7F 0327
        gbc.setState(0x919b, 0xa64c, 0x8ee0, 0xe15d, 0x819d, 0xd0b6, 0x1, 0x1);
        gbc.writeMem(0x919b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xa64c);
        EXPECT(gbc.pc(), 0x919c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x919b), 0x7f);
        // 7F 0328
        gbc.setState(0x2590, 0x2eb8, 0xb600, 0x511, 0xcb18, 0xaa07, 0x1, 0x0);
        gbc.writeMem(0x2590, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x2eb8);
        EXPECT(gbc.pc(), 0x2591);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0329
        gbc.setState(0xd9b7, 0x9dc, 0xc600, 0xd6cf, 0x3f0f, 0xf28b, 0x0, 0x0);
        gbc.writeMem(0xd9b7, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x9dc);
        EXPECT(gbc.pc(), 0xd9b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9b7), 0x7f);
        // 7F 032A
        gbc.setState(0x2d06, 0x5c54, 0x6b40, 0xfa33, 0x9d66, 0x271c, 0x1, 0x0);
        gbc.writeMem(0x2d06, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x5c54);
        EXPECT(gbc.pc(), 0x2d07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 032B
        gbc.setState(0x79ab, 0xeb6e, 0xbee0, 0x6886, 0x538b, 0x5a89, 0x0, 0x0);
        gbc.writeMem(0x79ab, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xeb6e);
        EXPECT(gbc.pc(), 0x79ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 032C
        gbc.setState(0x6e55, 0xbf8b, 0x13a0, 0xa738, 0xf57d, 0x4fb8, 0x0, 0x1);
        gbc.writeMem(0x6e55, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xbf8b);
        EXPECT(gbc.pc(), 0x6e56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 032D
        gbc.setState(0x85d1, 0xff54, 0xf6d0, 0x6a8b, 0xee08, 0x5915, 0x0, 0x0);
        gbc.writeMem(0x85d1, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xff54);
        EXPECT(gbc.pc(), 0x85d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85d1), 0x7f);
        // 7F 032E
        gbc.setState(0x1506, 0x55e1, 0xc9f0, 0xd122, 0x1acf, 0xd759, 0x1, 0x0);
        gbc.writeMem(0x1506, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x55e1);
        EXPECT(gbc.pc(), 0x1507);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 032F
        gbc.setState(0xcbdd, 0xd289, 0xeda0, 0x4cd5, 0xc26f, 0xfcb, 0x0, 0x0);
        gbc.writeMem(0xcbdd, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xd289);
        EXPECT(gbc.pc(), 0xcbde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbdd), 0x7f);
        // 7F 0330
        gbc.setState(0xb1e5, 0x19e6, 0xbe0, 0x41d9, 0xf4e8, 0xfd5e, 0x1, 0x0);
        gbc.writeMem(0xb1e5, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x19e6);
        EXPECT(gbc.pc(), 0xb1e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1e5), 0x7f);
        // 7F 0331
        gbc.setState(0xb47, 0x9f77, 0x9150, 0x8c85, 0xc0c7, 0x10ee, 0x1, 0x1);
        gbc.writeMem(0xb47, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x9f77);
        EXPECT(gbc.pc(), 0xb48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0333
        gbc.setState(0xb5dc, 0x5d54, 0xea0, 0x8426, 0xbb9d, 0x1243, 0x0, 0x0);
        gbc.writeMem(0xb5dc, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x5d54);
        EXPECT(gbc.pc(), 0xb5dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5dc), 0x7f);
        // 7F 0334
        gbc.setState(0x37e0, 0x3583, 0xb890, 0xbaf2, 0x7e94, 0x9117, 0x0, 0x1);
        gbc.writeMem(0x37e0, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x3583);
        EXPECT(gbc.pc(), 0x37e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0335
        gbc.setState(0xd386, 0x8b8f, 0x7080, 0xb889, 0x79fb, 0x3e98, 0x1, 0x0);
        gbc.writeMem(0xd386, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x8b8f);
        EXPECT(gbc.pc(), 0xd387);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd386), 0x7f);
        // 7F 0336
        gbc.setState(0xe722, 0x47b6, 0xb380, 0x508f, 0x443d, 0xec63, 0x1, 0x0);
        gbc.writeMem(0xe722, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x47b6);
        EXPECT(gbc.pc(), 0xe723);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe722), 0x7f);
        // 7F 0337
        gbc.setState(0x8a7c, 0xef2c, 0x7ca0, 0xf638, 0x34a3, 0x11a2, 0x0, 0x1);
        gbc.writeMem(0x8a7c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xef2c);
        EXPECT(gbc.pc(), 0x8a7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a7c), 0x7f);
        // 7F 0338
        gbc.setState(0xc78c, 0x3933, 0xff50, 0x2130, 0xed8d, 0xf1f3, 0x0, 0x0);
        gbc.writeMem(0xc78c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x3933);
        EXPECT(gbc.pc(), 0xc78d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc78c), 0x7f);
        // 7F 0339
        gbc.setState(0xdf43, 0xe6dd, 0x9e30, 0x6bef, 0x9ebc, 0x9d96, 0x0, 0x0);
        gbc.writeMem(0xdf43, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xe6dd);
        EXPECT(gbc.pc(), 0xdf44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf43), 0x7f);
        // 7F 033A
        gbc.setState(0xed4b, 0x12b1, 0x210, 0x568a, 0x7ecf, 0xb99, 0x1, 0x0);
        gbc.writeMem(0xed4b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x12b1);
        EXPECT(gbc.pc(), 0xed4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed4b), 0x7f);
        // 7F 033B
        gbc.setState(0xead, 0x9457, 0x14f0, 0x3adc, 0x40f4, 0x182e, 0x0, 0x1);
        gbc.writeMem(0xead, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x9457);
        EXPECT(gbc.pc(), 0xeae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 033D
        gbc.setState(0xece9, 0xeaae, 0xd520, 0x9648, 0x815, 0x7238, 0x1, 0x1);
        gbc.writeMem(0xece9, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xeaae);
        EXPECT(gbc.pc(), 0xecea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xece9), 0x7f);
        // 7F 033E
        gbc.setState(0xcd1d, 0xb398, 0xd490, 0x155e, 0x6443, 0xf784, 0x0, 0x0);
        gbc.writeMem(0xcd1d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xb398);
        EXPECT(gbc.pc(), 0xcd1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd1d), 0x7f);
        // 7F 033F
        gbc.setState(0x5716, 0x497b, 0x30c0, 0xacec, 0x165e, 0x444d, 0x1, 0x1);
        gbc.writeMem(0x5716, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x497b);
        EXPECT(gbc.pc(), 0x5717);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0340
        gbc.setState(0xd496, 0x8609, 0x8b0, 0xc0a2, 0x8af4, 0xeed5, 0x1, 0x1);
        gbc.writeMem(0xd496, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x8609);
        EXPECT(gbc.pc(), 0xd497);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd496), 0x7f);
        // 7F 0341
        gbc.setState(0xaf9, 0x4429, 0x9b40, 0x593c, 0xc3f8, 0x1ff3, 0x1, 0x0);
        gbc.writeMem(0xaf9, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x4429);
        EXPECT(gbc.pc(), 0xafa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0342
        gbc.setState(0x56fc, 0x52cd, 0x1040, 0x866e, 0x4857, 0xd8f2, 0x1, 0x0);
        gbc.writeMem(0x56fc, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x52cd);
        EXPECT(gbc.pc(), 0x56fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0343
        gbc.setState(0x1ffc, 0x3be0, 0xcc90, 0xc18, 0x5630, 0xfbd0, 0x1, 0x1);
        gbc.writeMem(0x1ffc, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x3be0);
        EXPECT(gbc.pc(), 0x1ffd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0344
        gbc.setState(0xe6f1, 0x4d7e, 0x8410, 0xe817, 0xefc0, 0xb0af, 0x0, 0x0);
        gbc.writeMem(0xe6f1, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x4d7e);
        EXPECT(gbc.pc(), 0xe6f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6f1), 0x7f);
        // 7F 0345
        gbc.setState(0x8e3e, 0x8758, 0xf910, 0x6aff, 0xf3a6, 0x177a, 0x0, 0x0);
        gbc.writeMem(0x8e3e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x8758);
        EXPECT(gbc.pc(), 0x8e3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e3e), 0x7f);
        // 7F 0347
        gbc.setState(0xa919, 0x8294, 0x7e90, 0x3fdd, 0x7f83, 0xbcd3, 0x0, 0x1);
        gbc.writeMem(0xa919, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x8294);
        EXPECT(gbc.pc(), 0xa91a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa919), 0x7f);
        // 7F 0348
        gbc.setState(0xe895, 0x45d3, 0x1ab0, 0xa093, 0x49a2, 0x83fe, 0x1, 0x0);
        gbc.writeMem(0xe895, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x45d3);
        EXPECT(gbc.pc(), 0xe896);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe895), 0x7f);
        // 7F 0349
        gbc.setState(0x6d17, 0xfb44, 0xdd0, 0xc4c2, 0x4fb, 0x2093, 0x0, 0x0);
        gbc.writeMem(0x6d17, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xfb44);
        EXPECT(gbc.pc(), 0x6d18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 034B
        gbc.setState(0x1481, 0x3949, 0xde00, 0xaf38, 0x8e86, 0x268, 0x0, 0x0);
        gbc.writeMem(0x1481, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x3949);
        EXPECT(gbc.pc(), 0x1482);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 034C
        gbc.setState(0x9f43, 0xe6b2, 0x8210, 0xa151, 0xcf1f, 0x6976, 0x0, 0x1);
        gbc.writeMem(0x9f43, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xe6b2);
        EXPECT(gbc.pc(), 0x9f44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f43), 0x7f);
        // 7F 034D
        gbc.setState(0x551e, 0x194b, 0x4d70, 0xf575, 0x6a44, 0xd625, 0x1, 0x0);
        gbc.writeMem(0x551e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x194b);
        EXPECT(gbc.pc(), 0x551f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 034E
        gbc.setState(0x73e5, 0x6faa, 0x26e0, 0x588e, 0xa99e, 0x6a0d, 0x1, 0x1);
        gbc.writeMem(0x73e5, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x6faa);
        EXPECT(gbc.pc(), 0x73e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 034F
        gbc.setState(0xca7b, 0x435d, 0x3230, 0xe01c, 0xb68, 0xd8d1, 0x0, 0x0);
        gbc.writeMem(0xca7b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x435d);
        EXPECT(gbc.pc(), 0xca7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca7b), 0x7f);
        // 7F 0350
        gbc.setState(0x302a, 0x8db4, 0x9a0, 0x4c3d, 0xa8b0, 0x122c, 0x1, 0x0);
        gbc.writeMem(0x302a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x8db4);
        EXPECT(gbc.pc(), 0x302b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0351
        gbc.setState(0xe64d, 0x1c7b, 0xc890, 0xbb2c, 0xf67, 0x8963, 0x1, 0x0);
        gbc.writeMem(0xe64d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x1c7b);
        EXPECT(gbc.pc(), 0xe64e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe64d), 0x7f);
        // 7F 0352
        gbc.setState(0x9a27, 0x118e, 0x3900, 0xbe53, 0xfb39, 0xef2c, 0x0, 0x0);
        gbc.writeMem(0x9a27, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x118e);
        EXPECT(gbc.pc(), 0x9a28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a27), 0x7f);
        // 7F 0353
        gbc.setState(0xba3c, 0xc8b8, 0x4d90, 0xf527, 0xb324, 0x463, 0x0, 0x0);
        gbc.writeMem(0xba3c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xc8b8);
        EXPECT(gbc.pc(), 0xba3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba3c), 0x7f);
        // 7F 0354
        gbc.setState(0x3c99, 0xcaa9, 0x1660, 0x8759, 0x7e9e, 0xb2ba, 0x1, 0x1);
        gbc.writeMem(0x3c99, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xcaa9);
        EXPECT(gbc.pc(), 0x3c9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0355
        gbc.setState(0x971b, 0x1fc4, 0x1780, 0x2608, 0x48b9, 0x9503, 0x0, 0x0);
        gbc.writeMem(0x971b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x1fc4);
        EXPECT(gbc.pc(), 0x971c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x971b), 0x7f);
        // 7F 0356
        gbc.setState(0xa328, 0xc639, 0x46e0, 0xd260, 0x28be, 0xd613, 0x0, 0x1);
        gbc.writeMem(0xa328, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xc639);
        EXPECT(gbc.pc(), 0xa329);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa328), 0x7f);
        // 7F 0357
        gbc.setState(0x75d, 0xfaa4, 0x20d0, 0xaf, 0xb74e, 0xe512, 0x1, 0x0);
        gbc.writeMem(0x75d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xfaa4);
        EXPECT(gbc.pc(), 0x75e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0358
        gbc.setState(0xabc1, 0x3b49, 0x7ce0, 0xf612, 0xdb0f, 0x42ef, 0x1, 0x0);
        gbc.writeMem(0xabc1, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x3b49);
        EXPECT(gbc.pc(), 0xabc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabc1), 0x7f);
        // 7F 0359
        gbc.setState(0xdb79, 0x1576, 0xeaf0, 0xdd2a, 0x9eb2, 0x921, 0x1, 0x1);
        gbc.writeMem(0xdb79, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x1576);
        EXPECT(gbc.pc(), 0xdb7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb79), 0x7f);
        // 7F 035A
        gbc.setState(0x9f65, 0xc588, 0x15a0, 0x8925, 0xe445, 0x2f4f, 0x0, 0x0);
        gbc.writeMem(0x9f65, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xc588);
        EXPECT(gbc.pc(), 0x9f66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f65), 0x7f);
        // 7F 035B
        gbc.setState(0x7a95, 0xf026, 0x5af0, 0xd854, 0x181f, 0x9e29, 0x1, 0x0);
        gbc.writeMem(0x7a95, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xf026);
        EXPECT(gbc.pc(), 0x7a96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 035C
        gbc.setState(0xdf68, 0xc3da, 0x5880, 0x8658, 0x3bb3, 0xd04c, 0x1, 0x1);
        gbc.writeMem(0xdf68, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xc3da);
        EXPECT(gbc.pc(), 0xdf69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf68), 0x7f);
        // 7F 035D
        gbc.setState(0xb52a, 0x2795, 0xed0, 0x8f0e, 0x9698, 0x5cc3, 0x1, 0x1);
        gbc.writeMem(0xb52a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x2795);
        EXPECT(gbc.pc(), 0xb52b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb52a), 0x7f);
        // 7F 035E
        gbc.setState(0xd7ab, 0x83ba, 0xf0a0, 0xb54e, 0xcab7, 0xeb65, 0x1, 0x0);
        gbc.writeMem(0xd7ab, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x83ba);
        EXPECT(gbc.pc(), 0xd7ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7ab), 0x7f);
        // 7F 035F
        gbc.setState(0xa7ba, 0x40eb, 0x260, 0x257b, 0xd4b9, 0x497e, 0x0, 0x1);
        gbc.writeMem(0xa7ba, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x40eb);
        EXPECT(gbc.pc(), 0xa7bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7ba), 0x7f);
        // 7F 0360
        gbc.setState(0x954, 0xd7e7, 0xaca0, 0x124d, 0x2499, 0xd359, 0x1, 0x0);
        gbc.writeMem(0x954, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xd7e7);
        EXPECT(gbc.pc(), 0x955);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0361
        gbc.setState(0x11c8, 0x716c, 0xbec0, 0xc950, 0x1ff2, 0x263c, 0x0, 0x0);
        gbc.writeMem(0x11c8, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x716c);
        EXPECT(gbc.pc(), 0x11c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0362
        gbc.setState(0xc6a3, 0x1c52, 0x120, 0x7328, 0xdb00, 0x325e, 0x1, 0x1);
        gbc.writeMem(0xc6a3, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x1c52);
        EXPECT(gbc.pc(), 0xc6a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6a3), 0x7f);
        // 7F 0363
        gbc.setState(0x5a12, 0x49fd, 0x1460, 0x6a13, 0x494d, 0x435, 0x0, 0x0);
        gbc.writeMem(0x5a12, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x49fd);
        EXPECT(gbc.pc(), 0x5a13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0364
        gbc.setState(0xa34b, 0x677d, 0xd170, 0x2dc7, 0xb32d, 0xbb4, 0x0, 0x1);
        gbc.writeMem(0xa34b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x677d);
        EXPECT(gbc.pc(), 0xa34c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa34b), 0x7f);
        // 7F 0365
        gbc.setState(0x7e98, 0xd253, 0x9410, 0x9c77, 0xa55, 0x78c8, 0x1, 0x1);
        gbc.writeMem(0x7e98, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xd253);
        EXPECT(gbc.pc(), 0x7e99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0366
        gbc.setState(0x93be, 0x229a, 0xd400, 0xac7e, 0x5ef5, 0x9b6b, 0x1, 0x1);
        gbc.writeMem(0x93be, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x229a);
        EXPECT(gbc.pc(), 0x93bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93be), 0x7f);
        // 7F 0367
        gbc.setState(0x717b, 0xce4d, 0x6950, 0x496, 0x6eb, 0x7469, 0x1, 0x1);
        gbc.writeMem(0x717b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xce4d);
        EXPECT(gbc.pc(), 0x717c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0368
        gbc.setState(0x5d93, 0x962, 0x78f0, 0x3161, 0x35f9, 0xa94b, 0x0, 0x0);
        gbc.writeMem(0x5d93, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x962);
        EXPECT(gbc.pc(), 0x5d94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0369
        gbc.setState(0x8cc7, 0x3510, 0xe80, 0x9d5d, 0xa197, 0x83be, 0x0, 0x0);
        gbc.writeMem(0x8cc7, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x3510);
        EXPECT(gbc.pc(), 0x8cc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cc7), 0x7f);
        // 7F 036A
        gbc.setState(0x663b, 0x4541, 0xa9e0, 0xf18d, 0xe355, 0x1122, 0x0, 0x0);
        gbc.writeMem(0x663b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x4541);
        EXPECT(gbc.pc(), 0x663c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 036B
        gbc.setState(0xb1f2, 0x9ef6, 0x3f10, 0x1a2f, 0x3139, 0xe408, 0x1, 0x0);
        gbc.writeMem(0xb1f2, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x9ef6);
        EXPECT(gbc.pc(), 0xb1f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1f2), 0x7f);
        // 7F 036C
        gbc.setState(0x7bbd, 0xc05b, 0xefd0, 0xfbb2, 0x90ca, 0xeaac, 0x1, 0x1);
        gbc.writeMem(0x7bbd, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xc05b);
        EXPECT(gbc.pc(), 0x7bbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 036E
        gbc.setState(0xcb2d, 0x8fb2, 0x1f20, 0xa8e2, 0x6ba3, 0x7e79, 0x1, 0x0);
        gbc.writeMem(0xcb2d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x8fb2);
        EXPECT(gbc.pc(), 0xcb2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb2d), 0x7f);
        // 7F 036F
        gbc.setState(0xcd72, 0x314d, 0xc670, 0xb65f, 0x40a3, 0x3502, 0x0, 0x1);
        gbc.writeMem(0xcd72, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x314d);
        EXPECT(gbc.pc(), 0xcd73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd72), 0x7f);
        // 7F 0370
        gbc.setState(0xb092, 0xf73f, 0xafc0, 0xf94c, 0xdc3b, 0x75b9, 0x1, 0x0);
        gbc.writeMem(0xb092, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xf73f);
        EXPECT(gbc.pc(), 0xb093);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb092), 0x7f);
        // 7F 0371
        gbc.setState(0xa9ef, 0xac2, 0xabb0, 0xc573, 0x7041, 0xdc55, 0x1, 0x1);
        gbc.writeMem(0xa9ef, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xac2);
        EXPECT(gbc.pc(), 0xa9f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9ef), 0x7f);
        // 7F 0372
        gbc.setState(0x2976, 0x3e66, 0xdb50, 0xcd4f, 0xf37f, 0x7e5f, 0x0, 0x1);
        gbc.writeMem(0x2976, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x3e66);
        EXPECT(gbc.pc(), 0x2977);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0374
        gbc.setState(0xc46f, 0xcbc2, 0x7c0, 0x1ab4, 0xc2bc, 0x798, 0x1, 0x0);
        gbc.writeMem(0xc46f, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xcbc2);
        EXPECT(gbc.pc(), 0xc470);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc46f), 0x7f);
        // 7F 0375
        gbc.setState(0x43a6, 0xcf6c, 0xcbf0, 0x6988, 0xdde5, 0x420, 0x0, 0x1);
        gbc.writeMem(0x43a6, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xcf6c);
        EXPECT(gbc.pc(), 0x43a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0376
        gbc.setState(0xa1b4, 0xcc7d, 0x2d70, 0x4d54, 0xc4dd, 0xe995, 0x0, 0x0);
        gbc.writeMem(0xa1b4, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xcc7d);
        EXPECT(gbc.pc(), 0xa1b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1b4), 0x7f);
        // 7F 0377
        gbc.setState(0x45eb, 0x6f9b, 0x66f0, 0x3e7a, 0x9f9f, 0x792, 0x1, 0x1);
        gbc.writeMem(0x45eb, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x6f9b);
        EXPECT(gbc.pc(), 0x45ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0378
        gbc.setState(0xb29d, 0x218a, 0x5b00, 0x4cac, 0xd079, 0x77a8, 0x1, 0x1);
        gbc.writeMem(0xb29d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x218a);
        EXPECT(gbc.pc(), 0xb29e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb29d), 0x7f);
        // 7F 0379
        gbc.setState(0x8aa1, 0xc875, 0x8e60, 0xf539, 0x1a4d, 0x99a, 0x1, 0x1);
        gbc.writeMem(0x8aa1, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xc875);
        EXPECT(gbc.pc(), 0x8aa2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8aa1), 0x7f);
        // 7F 037A
        gbc.setState(0x9f0c, 0xd53f, 0xcac0, 0x9379, 0x1a49, 0x80b0, 0x0, 0x0);
        gbc.writeMem(0x9f0c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xd53f);
        EXPECT(gbc.pc(), 0x9f0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f0c), 0x7f);
        // 7F 037B
        gbc.setState(0x8723, 0x697b, 0x3910, 0x9cab, 0x7404, 0xa857, 0x0, 0x1);
        gbc.writeMem(0x8723, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x697b);
        EXPECT(gbc.pc(), 0x8724);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8723), 0x7f);
        // 7F 037C
        gbc.setState(0x9b87, 0x9aaa, 0xdc30, 0x49c7, 0x8fde, 0x91b9, 0x0, 0x1);
        gbc.writeMem(0x9b87, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x9aaa);
        EXPECT(gbc.pc(), 0x9b88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b87), 0x7f);
        // 7F 037D
        gbc.setState(0xd7f0, 0x2d8, 0xea70, 0x4e5c, 0x1df1, 0xcd53, 0x1, 0x0);
        gbc.writeMem(0xd7f0, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x2d8);
        EXPECT(gbc.pc(), 0xd7f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7f0), 0x7f);
        // 7F 037E
        gbc.setState(0xe91a, 0x647, 0x91b0, 0x3bb4, 0x340c, 0xa182, 0x0, 0x1);
        gbc.writeMem(0xe91a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x647);
        EXPECT(gbc.pc(), 0xe91b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe91a), 0x7f);
        // 7F 037F
        gbc.setState(0xe549, 0x1e90, 0xae70, 0x415d, 0x2957, 0x32c5, 0x1, 0x0);
        gbc.writeMem(0xe549, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x1e90);
        EXPECT(gbc.pc(), 0xe54a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe549), 0x7f);
        // 7F 0380
        gbc.setState(0x2706, 0x4503, 0x3ef0, 0x997c, 0x7dbc, 0x3e4a, 0x1, 0x1);
        gbc.writeMem(0x2706, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x4503);
        EXPECT(gbc.pc(), 0x2707);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0381
        gbc.setState(0x3a13, 0xe1b0, 0xaef0, 0xbde, 0xa53a, 0xb24e, 0x1, 0x1);
        gbc.writeMem(0x3a13, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xe1b0);
        EXPECT(gbc.pc(), 0x3a14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0382
        gbc.setState(0x6551, 0x2844, 0xd110, 0x4b0b, 0xc36, 0x7a94, 0x0, 0x0);
        gbc.writeMem(0x6551, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x2844);
        EXPECT(gbc.pc(), 0x6552);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0383
        gbc.setState(0x99ad, 0x119b, 0x5670, 0x7407, 0x96ca, 0x497e, 0x0, 0x0);
        gbc.writeMem(0x99ad, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x119b);
        EXPECT(gbc.pc(), 0x99ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99ad), 0x7f);
        // 7F 0384
        gbc.setState(0x2845, 0x8ae8, 0xcda0, 0x5d6a, 0x65f8, 0xd629, 0x0, 0x1);
        gbc.writeMem(0x2845, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x8ae8);
        EXPECT(gbc.pc(), 0x2846);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0385
        gbc.setState(0x1d23, 0x671b, 0x92e0, 0x2b68, 0x570d, 0x808d, 0x1, 0x0);
        gbc.writeMem(0x1d23, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x671b);
        EXPECT(gbc.pc(), 0x1d24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0386
        gbc.setState(0x14e2, 0x67f3, 0x43d0, 0xff73, 0xa598, 0x5195, 0x0, 0x1);
        gbc.writeMem(0x14e2, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x67f3);
        EXPECT(gbc.pc(), 0x14e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 0387
        gbc.setState(0xc178, 0xb020, 0x9570, 0x26f5, 0x2a4f, 0x8727, 0x0, 0x1);
        gbc.writeMem(0xc178, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xb020);
        EXPECT(gbc.pc(), 0xc179);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc178), 0x7f);
        // 7F 0388
        gbc.setState(0xa0b2, 0xa017, 0x8e50, 0xe092, 0x7216, 0xe976, 0x1, 0x0);
        gbc.writeMem(0xa0b2, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xa017);
        EXPECT(gbc.pc(), 0xa0b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0b2), 0x7f);
        // 7F 0389
        gbc.setState(0xe0b6, 0x3eb4, 0xd640, 0x7d55, 0x6a6, 0x49c7, 0x1, 0x0);
        gbc.writeMem(0xe0b6, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x3eb4);
        EXPECT(gbc.pc(), 0xe0b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0b6), 0x7f);
        // 7F 038A
        gbc.setState(0xd741, 0xdfad, 0xb1d0, 0x83dc, 0x75db, 0xa42a, 0x1, 0x1);
        gbc.writeMem(0xd741, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xdfad);
        EXPECT(gbc.pc(), 0xd742);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd741), 0x7f);
        // 7F 038B
        gbc.setState(0x3794, 0xad41, 0xb480, 0xc7e0, 0xac85, 0x3b7b, 0x0, 0x1);
        gbc.writeMem(0x3794, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xad41);
        EXPECT(gbc.pc(), 0x3795);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 038C
        gbc.setState(0x3b4b, 0xb9ee, 0x4590, 0xd317, 0xf1f5, 0x40f4, 0x0, 0x1);
        gbc.writeMem(0x3b4b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xb9ee);
        EXPECT(gbc.pc(), 0x3b4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 038D
        gbc.setState(0xcfbf, 0x173f, 0x5650, 0xa67e, 0x414c, 0xfb13, 0x1, 0x1);
        gbc.writeMem(0xcfbf, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x173f);
        EXPECT(gbc.pc(), 0xcfc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfbf), 0x7f);
        // 7F 038E
        gbc.setState(0x2644, 0x1c65, 0x3d10, 0x9c47, 0x3b52, 0x7b11, 0x0, 0x1);
        gbc.writeMem(0x2644, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x1c65);
        EXPECT(gbc.pc(), 0x2645);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 038F
        gbc.setState(0xac11, 0xa91a, 0xa1f0, 0x2ce3, 0x8a59, 0x74cb, 0x1, 0x0);
        gbc.writeMem(0xac11, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xa91a);
        EXPECT(gbc.pc(), 0xac12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac11), 0x7f);
        // 7F 0390
        gbc.setState(0x3be4, 0xaa07, 0xb860, 0x76ac, 0xded8, 0xcea1, 0x0, 0x0);
        gbc.writeMem(0x3be4, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xaa07);
        EXPECT(gbc.pc(), 0x3be5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0391
        gbc.setState(0x55da, 0xac74, 0xaee0, 0x543f, 0xb200, 0x97e1, 0x1, 0x0);
        gbc.writeMem(0x55da, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xac74);
        EXPECT(gbc.pc(), 0x55db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 0392
        gbc.setState(0x985a, 0xfb45, 0x98b0, 0xcdd3, 0x9f7a, 0x6467, 0x1, 0x0);
        gbc.writeMem(0x985a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xfb45);
        EXPECT(gbc.pc(), 0x985b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x985a), 0x7f);
        // 7F 0393
        gbc.setState(0x340b, 0xaa13, 0xfa00, 0xb7a7, 0x748b, 0x7552, 0x0, 0x1);
        gbc.writeMem(0x340b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xaa13);
        EXPECT(gbc.pc(), 0x340c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 0394
        gbc.setState(0x9f99, 0x6fff, 0x24e0, 0xd1d0, 0x9d2b, 0x478f, 0x1, 0x0);
        gbc.writeMem(0x9f99, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x6fff);
        EXPECT(gbc.pc(), 0x9f9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f99), 0x7f);
        // 7F 0395
        gbc.setState(0x3c45, 0x6b0, 0x41f0, 0x429, 0x1013, 0x61a1, 0x1, 0x1);
        gbc.writeMem(0x3c45, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x6b0);
        EXPECT(gbc.pc(), 0x3c46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 0396
        gbc.setState(0xcc16, 0x1411, 0xe9a0, 0xc60e, 0x23b8, 0x5301, 0x1, 0x0);
        gbc.writeMem(0xcc16, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x1411);
        EXPECT(gbc.pc(), 0xcc17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc16), 0x7f);
        // 7F 0397
        gbc.setState(0xaea4, 0x4a77, 0x6b50, 0x4e3, 0xc06f, 0x32b0, 0x0, 0x0);
        gbc.writeMem(0xaea4, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x4a77);
        EXPECT(gbc.pc(), 0xaea5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaea4), 0x7f);
        // 7F 0398
        gbc.setState(0xd036, 0x26f9, 0xdd0, 0x3da0, 0xc25d, 0xc9c5, 0x0, 0x0);
        gbc.writeMem(0xd036, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x26f9);
        EXPECT(gbc.pc(), 0xd037);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd036), 0x7f);
        // 7F 0399
        gbc.setState(0x37a1, 0x448, 0x5190, 0x87f9, 0x5fe3, 0x3b34, 0x1, 0x0);
        gbc.writeMem(0x37a1, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x448);
        EXPECT(gbc.pc(), 0x37a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 039A
        gbc.setState(0x77cf, 0x370a, 0x2ff0, 0x43f4, 0x8c80, 0x718a, 0x0, 0x1);
        gbc.writeMem(0x77cf, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x370a);
        EXPECT(gbc.pc(), 0x77d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 039B
        gbc.setState(0x3435, 0x703a, 0xcba0, 0xfddf, 0x6509, 0x652d, 0x0, 0x1);
        gbc.writeMem(0x3435, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x703a);
        EXPECT(gbc.pc(), 0x3436);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 039C
        gbc.setState(0x8192, 0x9926, 0x31e0, 0x580c, 0x72d0, 0x7b56, 0x0, 0x1);
        gbc.writeMem(0x8192, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x9926);
        EXPECT(gbc.pc(), 0x8193);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8192), 0x7f);
        // 7F 039D
        gbc.setState(0x10b4, 0x18e5, 0xb430, 0xb8ee, 0xda07, 0x17e5, 0x0, 0x1);
        gbc.writeMem(0x10b4, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x18e5);
        EXPECT(gbc.pc(), 0x10b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 039E
        gbc.setState(0x8b21, 0xbd0f, 0x3ec0, 0x5007, 0x7ef8, 0xa254, 0x0, 0x0);
        gbc.writeMem(0x8b21, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xbd0f);
        EXPECT(gbc.pc(), 0x8b22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b21), 0x7f);
        // 7F 039F
        gbc.setState(0x9d27, 0xf129, 0x8140, 0xcb04, 0x5763, 0x4cb1, 0x0, 0x0);
        gbc.writeMem(0x9d27, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xf129);
        EXPECT(gbc.pc(), 0x9d28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d27), 0x7f);
        // 7F 03A0
        gbc.setState(0x9da5, 0x7780, 0x6fa0, 0x7468, 0xe95b, 0x7c6c, 0x1, 0x0);
        gbc.writeMem(0x9da5, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x7780);
        EXPECT(gbc.pc(), 0x9da6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9da5), 0x7f);
        // 7F 03A1
        gbc.setState(0xdb85, 0x39ae, 0x5760, 0xf800, 0x7b0f, 0x3d53, 0x1, 0x0);
        gbc.writeMem(0xdb85, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x39ae);
        EXPECT(gbc.pc(), 0xdb86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb85), 0x7f);
        // 7F 03A2
        gbc.setState(0x2d0d, 0x6bb, 0x6de0, 0xda2c, 0x7a94, 0xc249, 0x1, 0x1);
        gbc.writeMem(0x2d0d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x6bb);
        EXPECT(gbc.pc(), 0x2d0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 03A3
        gbc.setState(0xc737, 0x32f8, 0x5850, 0xc483, 0xbd55, 0xa753, 0x1, 0x0);
        gbc.writeMem(0xc737, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x32f8);
        EXPECT(gbc.pc(), 0xc738);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc737), 0x7f);
        // 7F 03A4
        gbc.setState(0x73b5, 0x49b4, 0x18d0, 0x3f17, 0x18ea, 0x4fd1, 0x0, 0x0);
        gbc.writeMem(0x73b5, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x49b4);
        EXPECT(gbc.pc(), 0x73b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 03A5
        gbc.setState(0xb2bd, 0xd3ce, 0xa3b0, 0x70ac, 0x3415, 0x7e79, 0x0, 0x1);
        gbc.writeMem(0xb2bd, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xd3ce);
        EXPECT(gbc.pc(), 0xb2be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2bd), 0x7f);
        // 7F 03A6
        gbc.setState(0x8bfc, 0xc9c2, 0xdcf0, 0x2457, 0x9e50, 0x77b0, 0x0, 0x1);
        gbc.writeMem(0x8bfc, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xc9c2);
        EXPECT(gbc.pc(), 0x8bfd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bfc), 0x7f);
        // 7F 03A7
        gbc.setState(0xcb74, 0xf4f6, 0x2870, 0x2128, 0xb5bd, 0xb830, 0x1, 0x1);
        gbc.writeMem(0xcb74, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xf4f6);
        EXPECT(gbc.pc(), 0xcb75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb74), 0x7f);
        // 7F 03A8
        gbc.setState(0xaa11, 0xd0ab, 0x4860, 0x5b13, 0x826e, 0x3700, 0x1, 0x1);
        gbc.writeMem(0xaa11, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xd0ab);
        EXPECT(gbc.pc(), 0xaa12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa11), 0x7f);
        // 7F 03A9
        gbc.setState(0x1a11, 0x3a79, 0xb870, 0x7de7, 0xebc2, 0x3a21, 0x0, 0x1);
        gbc.writeMem(0x1a11, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x3a79);
        EXPECT(gbc.pc(), 0x1a12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 03AA
        gbc.setState(0xc06, 0xd840, 0x7b30, 0x2c1d, 0xa097, 0x1bf6, 0x0, 0x0);
        gbc.writeMem(0xc06, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xd840);
        EXPECT(gbc.pc(), 0xc07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 03AB
        gbc.setState(0x11d6, 0x5918, 0xba60, 0xaaeb, 0xaac5, 0x956c, 0x1, 0x1);
        gbc.writeMem(0x11d6, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x5918);
        EXPECT(gbc.pc(), 0x11d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 03AD
        gbc.setState(0x51c1, 0x3e9e, 0x9e70, 0xac05, 0xa17a, 0x20a4, 0x1, 0x0);
        gbc.writeMem(0x51c1, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x3e9e);
        EXPECT(gbc.pc(), 0x51c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 03AF
        gbc.setState(0xee7a, 0xae77, 0xee10, 0xd9a2, 0x1fc2, 0xce28, 0x1, 0x0);
        gbc.writeMem(0xee7a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xae77);
        EXPECT(gbc.pc(), 0xee7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee7a), 0x7f);
        // 7F 03B1
        gbc.setState(0x68a6, 0xde7c, 0x1f90, 0x2562, 0x26f, 0x3ed, 0x1, 0x1);
        gbc.writeMem(0x68a6, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xde7c);
        EXPECT(gbc.pc(), 0x68a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 03B2
        gbc.setState(0x21f3, 0xc6bc, 0x8cc0, 0x3983, 0xd62, 0x1b11, 0x1, 0x1);
        gbc.writeMem(0x21f3, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xc6bc);
        EXPECT(gbc.pc(), 0x21f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 03B3
        gbc.setState(0x630a, 0x6ca, 0x9cd0, 0x4cf4, 0xe35c, 0xd59, 0x1, 0x0);
        gbc.writeMem(0x630a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x6ca);
        EXPECT(gbc.pc(), 0x630b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 03B5
        gbc.setState(0x23c5, 0x148, 0xe070, 0x434f, 0xc31e, 0xb297, 0x0, 0x1);
        gbc.writeMem(0x23c5, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x148);
        EXPECT(gbc.pc(), 0x23c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 03B6
        gbc.setState(0x618c, 0x1690, 0x3a60, 0x3fd8, 0xb40b, 0x7988, 0x0, 0x1);
        gbc.writeMem(0x618c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x1690);
        EXPECT(gbc.pc(), 0x618d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 03B7
        gbc.setState(0xd93d, 0x6cbc, 0x7e10, 0xdac8, 0x7b3d, 0xe01b, 0x0, 0x1);
        gbc.writeMem(0xd93d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x6cbc);
        EXPECT(gbc.pc(), 0xd93e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd93d), 0x7f);
        // 7F 03B9
        gbc.setState(0xe11c, 0xdf46, 0x3750, 0x6015, 0x5ece, 0x88c4, 0x0, 0x1);
        gbc.writeMem(0xe11c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xdf46);
        EXPECT(gbc.pc(), 0xe11d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe11c), 0x7f);
        // 7F 03BA
        gbc.setState(0xe54b, 0x666c, 0xcf30, 0x7f56, 0xa5de, 0x8c69, 0x1, 0x0);
        gbc.writeMem(0xe54b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x666c);
        EXPECT(gbc.pc(), 0xe54c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe54b), 0x7f);
        // 7F 03BB
        gbc.setState(0xe548, 0xd77b, 0x1640, 0x2142, 0x39d6, 0x83c9, 0x0, 0x1);
        gbc.writeMem(0xe548, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xd77b);
        EXPECT(gbc.pc(), 0xe549);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe548), 0x7f);
        // 7F 03BC
        gbc.setState(0x6d69, 0x1a3f, 0xfea0, 0x4331, 0x92e9, 0xeee6, 0x0, 0x0);
        gbc.writeMem(0x6d69, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x1a3f);
        EXPECT(gbc.pc(), 0x6d6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 03BE
        gbc.setState(0x815a, 0xec0d, 0xb8a0, 0xe473, 0x67, 0xdd10, 0x1, 0x0);
        gbc.writeMem(0x815a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xec0d);
        EXPECT(gbc.pc(), 0x815b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x815a), 0x7f);
        // 7F 03BF
        gbc.setState(0x6ddf, 0x4c96, 0x14c0, 0x7c9d, 0xf7e5, 0xab96, 0x1, 0x1);
        gbc.writeMem(0x6ddf, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x4c96);
        EXPECT(gbc.pc(), 0x6de0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 03C0
        gbc.setState(0x4baa, 0x1547, 0x35a0, 0x63a, 0x580b, 0xd1b6, 0x1, 0x0);
        gbc.writeMem(0x4baa, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x1547);
        EXPECT(gbc.pc(), 0x4bab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 03C1
        gbc.setState(0x43f6, 0x491e, 0xf630, 0x3e03, 0xee0b, 0xce11, 0x1, 0x1);
        gbc.writeMem(0x43f6, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x491e);
        EXPECT(gbc.pc(), 0x43f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 03C2
        gbc.setState(0xe529, 0x99c6, 0x6010, 0xc957, 0x7be1, 0x6038, 0x1, 0x1);
        gbc.writeMem(0xe529, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x99c6);
        EXPECT(gbc.pc(), 0xe52a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe529), 0x7f);
        // 7F 03C3
        gbc.setState(0x757a, 0xb8f7, 0xe950, 0xd061, 0x1e54, 0xc9e0, 0x1, 0x0);
        gbc.writeMem(0x757a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xb8f7);
        EXPECT(gbc.pc(), 0x757b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 03C4
        gbc.setState(0x4b75, 0x99b5, 0x6230, 0x1d25, 0xdb87, 0x914, 0x1, 0x1);
        gbc.writeMem(0x4b75, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x99b5);
        EXPECT(gbc.pc(), 0x4b76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 03C5
        gbc.setState(0x9607, 0x9db, 0xbe70, 0x6bd2, 0x3116, 0xd757, 0x0, 0x0);
        gbc.writeMem(0x9607, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x9db);
        EXPECT(gbc.pc(), 0x9608);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9607), 0x7f);
        // 7F 03C6
        gbc.setState(0x6e50, 0x6fbd, 0x800, 0xf40, 0x6dce, 0x9c1a, 0x0, 0x1);
        gbc.writeMem(0x6e50, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x6fbd);
        EXPECT(gbc.pc(), 0x6e51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 03C7
        gbc.setState(0xa94b, 0x3169, 0xc3a0, 0xdafe, 0x96a8, 0xefcd, 0x1, 0x1);
        gbc.writeMem(0xa94b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x3169);
        EXPECT(gbc.pc(), 0xa94c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa94b), 0x7f);
        // 7F 03C8
        gbc.setState(0x506c, 0x7f6d, 0xfae0, 0x9a31, 0xc727, 0x4001, 0x0, 0x1);
        gbc.writeMem(0x506c, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x7f6d);
        EXPECT(gbc.pc(), 0x506d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 03C9
        gbc.setState(0x5a0f, 0x9f3c, 0xafc0, 0x5fe0, 0x6aa5, 0x5dae, 0x1, 0x1);
        gbc.writeMem(0x5a0f, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x9f3c);
        EXPECT(gbc.pc(), 0x5a10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 03CA
        gbc.setState(0x4f47, 0x348e, 0xde30, 0xabdd, 0x82a7, 0x8b91, 0x0, 0x1);
        gbc.writeMem(0x4f47, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x348e);
        EXPECT(gbc.pc(), 0x4f48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 03CB
        gbc.setState(0xcf18, 0x49b9, 0x4db0, 0x2625, 0xabf3, 0x1696, 0x1, 0x0);
        gbc.writeMem(0xcf18, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x49b9);
        EXPECT(gbc.pc(), 0xcf19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf18), 0x7f);
        // 7F 03CC
        gbc.setState(0x9042, 0x89ca, 0xef30, 0xf66f, 0x4375, 0x6b9a, 0x0, 0x0);
        gbc.writeMem(0x9042, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x89ca);
        EXPECT(gbc.pc(), 0x9043);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9042), 0x7f);
        // 7F 03CD
        gbc.setState(0x41a2, 0xa8a0, 0x1490, 0x784f, 0xf958, 0xfe4f, 0x0, 0x1);
        gbc.writeMem(0x41a2, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xa8a0);
        EXPECT(gbc.pc(), 0x41a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 03CE
        gbc.setState(0x726b, 0xdaf9, 0x9800, 0xa4ef, 0x5c35, 0x91a4, 0x1, 0x1);
        gbc.writeMem(0x726b, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xdaf9);
        EXPECT(gbc.pc(), 0x726c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 03CF
        gbc.setState(0x6775, 0x58cd, 0x7180, 0x4ca0, 0xeca, 0xc261, 0x1, 0x0);
        gbc.writeMem(0x6775, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x58cd);
        EXPECT(gbc.pc(), 0x6776);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 03D0
        gbc.setState(0x520f, 0x2edd, 0x7b30, 0xd47c, 0xca0d, 0x7164, 0x0, 0x0);
        gbc.writeMem(0x520f, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x2edd);
        EXPECT(gbc.pc(), 0x5210);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 03D1
        gbc.setState(0xc73e, 0x330e, 0xfe00, 0x12d1, 0x6c36, 0xfa9b, 0x0, 0x1);
        gbc.writeMem(0xc73e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x330e);
        EXPECT(gbc.pc(), 0xc73f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc73e), 0x7f);
        // 7F 03D2
        gbc.setState(0x20b1, 0x61e4, 0x2860, 0x1e13, 0xb183, 0x5ece, 0x1, 0x1);
        gbc.writeMem(0x20b1, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x61e4);
        EXPECT(gbc.pc(), 0x20b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 03D6
        gbc.setState(0x30f5, 0x551e, 0xfe60, 0x648, 0x5b74, 0xc5c8, 0x0, 0x0);
        gbc.writeMem(0x30f5, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x551e);
        EXPECT(gbc.pc(), 0x30f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 03D7
        gbc.setState(0x1e8e, 0xb178, 0xaec0, 0x259a, 0xff3d, 0x7494, 0x0, 0x0);
        gbc.writeMem(0x1e8e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xb178);
        EXPECT(gbc.pc(), 0x1e8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 03D9
        gbc.setState(0x9d9e, 0x6783, 0xfa0, 0xe12f, 0x7ff8, 0x6d0a, 0x1, 0x0);
        gbc.writeMem(0x9d9e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x6783);
        EXPECT(gbc.pc(), 0x9d9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d9e), 0x7f);
        // 7F 03DA
        gbc.setState(0xdb4d, 0x895e, 0x84f0, 0x3225, 0xad26, 0x61ee, 0x0, 0x0);
        gbc.writeMem(0xdb4d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x895e);
        EXPECT(gbc.pc(), 0xdb4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb4d), 0x7f);
        // 7F 03DB
        gbc.setState(0x166f, 0x6bf, 0x6220, 0x5738, 0x7c69, 0x77b1, 0x1, 0x0);
        gbc.writeMem(0x166f, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x6bf);
        EXPECT(gbc.pc(), 0x1670);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 03DC
        gbc.setState(0x52fd, 0x52ff, 0x4ff0, 0x4dce, 0x959, 0xb2e8, 0x1, 0x1);
        gbc.writeMem(0x52fd, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x52ff);
        EXPECT(gbc.pc(), 0x52fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 7F 03DD
        gbc.setState(0x3a4, 0x67f7, 0xab50, 0xa192, 0x70a5, 0xe5a7, 0x0, 0x0);
        gbc.writeMem(0x3a4, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x67f7);
        EXPECT(gbc.pc(), 0x3a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 03DE
        gbc.setState(0x49a0, 0x7a63, 0x5c10, 0x94ac, 0x317b, 0xbfb1, 0x0, 0x1);
        gbc.writeMem(0x49a0, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x7a63);
        EXPECT(gbc.pc(), 0x49a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 03DF
        gbc.setState(0x31f, 0x6961, 0xd860, 0x319a, 0x6b6f, 0xdea6, 0x0, 0x0);
        gbc.writeMem(0x31f, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x6961);
        EXPECT(gbc.pc(), 0x320);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 03E1
        gbc.setState(0x7d5a, 0x9d02, 0xe50, 0xb887, 0xb9cc, 0xae4f, 0x0, 0x1);
        gbc.writeMem(0x7d5a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x9d02);
        EXPECT(gbc.pc(), 0x7d5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 7F 03E2
        gbc.setState(0x1558, 0xaec2, 0x1f00, 0x791a, 0x165c, 0x8aba, 0x0, 0x0);
        gbc.writeMem(0x1558, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xaec2);
        EXPECT(gbc.pc(), 0x1559);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 03E3
        gbc.setState(0xcc9a, 0xf214, 0xf6d0, 0xccb0, 0x1476, 0x6a87, 0x1, 0x1);
        gbc.writeMem(0xcc9a, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xf214);
        EXPECT(gbc.pc(), 0xcc9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc9a), 0x7f);
        // 7F 03E4
        gbc.setState(0x9aa, 0x172f, 0x3320, 0x572a, 0x9c80, 0x4b10, 0x0, 0x1);
        gbc.writeMem(0x9aa, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x172f);
        EXPECT(gbc.pc(), 0x9ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 7F 03E5
        gbc.setState(0xd9cf, 0x1824, 0x3540, 0xcf0f, 0xcc63, 0x9394, 0x0, 0x1);
        gbc.writeMem(0xd9cf, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x1824);
        EXPECT(gbc.pc(), 0xd9d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9cf), 0x7f);
        // 7F 03E6
        gbc.setState(0x3e7f, 0x35dc, 0x340, 0x77d3, 0xcb14, 0x70d5, 0x0, 0x1);
        gbc.writeMem(0x3e7f, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x35dc);
        EXPECT(gbc.pc(), 0x3e80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 7F 03E7
        gbc.setState(0x8297, 0xd7cd, 0x7400, 0xfd0e, 0xe033, 0x2a0, 0x1, 0x1);
        gbc.writeMem(0x8297, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xd7cd);
        EXPECT(gbc.pc(), 0x8298);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8297), 0x7f);
    }
