#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_b3)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_b3) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // B3 0000
        gbc.setState(0x4dde, 0x29ac, 0x9be0, 0xee7d, 0xe011, 0xbd87, 0x0, 0x1);
        gbc.writeMem(0x4dde, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x29ac);
        EXPECT(gbc.pc(), 0x4ddf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0001
        gbc.setState(0xcd5a, 0xfdaf, 0x16b0, 0x3938, 0x2630, 0x6373, 0x1, 0x0);
        gbc.writeMem(0xcd5a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xfdaf);
        EXPECT(gbc.pc(), 0xcd5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd5a), 0xb3);
        // B3 0002
        gbc.setState(0xab39, 0xa386, 0x3d50, 0x2933, 0xe5d3, 0xd42b, 0x1, 0x0);
        gbc.writeMem(0xab39, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xa386);
        EXPECT(gbc.pc(), 0xab3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab39), 0xb3);
        // B3 0003
        gbc.setState(0x22eb, 0xab94, 0x5b0, 0x3d48, 0xed6c, 0xbf89, 0x1, 0x1);
        gbc.writeMem(0x22eb, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xab94);
        EXPECT(gbc.pc(), 0x22ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0004
        gbc.setState(0xbe42, 0x2aa2, 0x5bb0, 0xc15d, 0x12f4, 0x9e37, 0x1, 0x1);
        gbc.writeMem(0xbe42, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x2aa2);
        EXPECT(gbc.pc(), 0xbe43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe42), 0xb3);
        // B3 0005
        gbc.setState(0xcf02, 0xf75f, 0x18d0, 0x3ec2, 0x1d18, 0xa311, 0x0, 0x0);
        gbc.writeMem(0xcf02, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xf75f);
        EXPECT(gbc.pc(), 0xcf03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf02), 0xb3);
        // B3 0006
        gbc.setState(0x7981, 0x2657, 0x1950, 0xc6bc, 0x95ae, 0xfab5, 0x0, 0x0);
        gbc.writeMem(0x7981, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x2657);
        EXPECT(gbc.pc(), 0x7982);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0007
        gbc.setState(0x22df, 0x66c3, 0x7ec0, 0x9742, 0xafd6, 0xaa9e, 0x1, 0x0);
        gbc.writeMem(0x22df, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x66c3);
        EXPECT(gbc.pc(), 0x22e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0008
        gbc.setState(0x1ff, 0xf008, 0xd4e0, 0xfa24, 0xa593, 0x2f99, 0x1, 0x0);
        gbc.writeMem(0x1ff, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xf008);
        EXPECT(gbc.pc(), 0x200);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0009
        gbc.setState(0xad16, 0x1053, 0xd320, 0x4ecc, 0x255c, 0x49bb, 0x1, 0x0);
        gbc.writeMem(0xad16, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x1053);
        EXPECT(gbc.pc(), 0xad17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad16), 0xb3);
        // B3 000A
        gbc.setState(0x56a4, 0xa9b1, 0xfa00, 0x94b3, 0x406e, 0x2190, 0x0, 0x0);
        gbc.writeMem(0x56a4, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xa9b1);
        EXPECT(gbc.pc(), 0x56a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 000B
        gbc.setState(0x95f4, 0x83e1, 0x2d40, 0xb00e, 0xf03a, 0x976e, 0x0, 0x1);
        gbc.writeMem(0x95f4, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x83e1);
        EXPECT(gbc.pc(), 0x95f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95f4), 0xb3);
        // B3 000C
        gbc.setState(0xd95, 0x6d76, 0x4b90, 0xcdd8, 0x332e, 0x835d, 0x1, 0x0);
        gbc.writeMem(0xd95, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x6d76);
        EXPECT(gbc.pc(), 0xd96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 000D
        gbc.setState(0x9044, 0x30fc, 0x2b0, 0xb49f, 0x9a16, 0x7bdf, 0x1, 0x1);
        gbc.writeMem(0x9044, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x30fc);
        EXPECT(gbc.pc(), 0x9045);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9044), 0xb3);
        // B3 000E
        gbc.setState(0x6b6, 0x4129, 0x6de0, 0x18f0, 0x6489, 0x36b9, 0x0, 0x0);
        gbc.writeMem(0x6b6, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x4129);
        EXPECT(gbc.pc(), 0x6b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 000F
        gbc.setState(0x9115, 0x220, 0x2740, 0x6dd6, 0x932, 0x6f5, 0x0, 0x1);
        gbc.writeMem(0x9115, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x220);
        EXPECT(gbc.pc(), 0x9116);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9115), 0xb3);
        // B3 0010
        gbc.setState(0x72bb, 0x3363, 0x34c0, 0xe638, 0xfa76, 0x25d0, 0x1, 0x0);
        gbc.writeMem(0x72bb, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x3363);
        EXPECT(gbc.pc(), 0x72bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0012
        gbc.setState(0xec88, 0x2e0a, 0xcd20, 0xeb9d, 0x6984, 0x6d46, 0x1, 0x0);
        gbc.writeMem(0xec88, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x2e0a);
        EXPECT(gbc.pc(), 0xec89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec88), 0xb3);
        // B3 0013
        gbc.setState(0x46a0, 0xa51b, 0x9560, 0x6e25, 0xa03e, 0xc8e, 0x1, 0x0);
        gbc.writeMem(0x46a0, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xa51b);
        EXPECT(gbc.pc(), 0x46a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0014
        gbc.setState(0x4693, 0x3cec, 0x8460, 0x43a5, 0x5aa6, 0xa8d8, 0x1, 0x0);
        gbc.writeMem(0x4693, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x3cec);
        EXPECT(gbc.pc(), 0x4694);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0015
        gbc.setState(0x9aeb, 0xf83b, 0x61e0, 0xa4e4, 0x2da4, 0x7f12, 0x1, 0x1);
        gbc.writeMem(0x9aeb, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xf83b);
        EXPECT(gbc.pc(), 0x9aec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9aeb), 0xb3);
        // B3 0016
        gbc.setState(0x94e1, 0xed64, 0xc200, 0x4314, 0xf369, 0x2299, 0x0, 0x0);
        gbc.writeMem(0x94e1, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xed64);
        EXPECT(gbc.pc(), 0x94e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94e1), 0xb3);
        // B3 0017
        gbc.setState(0xe060, 0xd230, 0x3ba0, 0x7972, 0xc143, 0xb52c, 0x1, 0x0);
        gbc.writeMem(0xe060, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xd230);
        EXPECT(gbc.pc(), 0xe061);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe060), 0xb3);
        // B3 0018
        gbc.setState(0x7b32, 0x20ca, 0xb210, 0xe30f, 0x49f0, 0x71a4, 0x1, 0x1);
        gbc.writeMem(0x7b32, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x20ca);
        EXPECT(gbc.pc(), 0x7b33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0019
        gbc.setState(0xab38, 0x6ac9, 0x910, 0x89bd, 0x6dda, 0xe5cb, 0x1, 0x0);
        gbc.writeMem(0xab38, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x6ac9);
        EXPECT(gbc.pc(), 0xab39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab38), 0xb3);
        // B3 001B
        gbc.setState(0x80b2, 0xd7cd, 0x29c0, 0xba0d, 0xae53, 0x58a5, 0x0, 0x1);
        gbc.writeMem(0x80b2, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xd7cd);
        EXPECT(gbc.pc(), 0x80b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80b2), 0xb3);
        // B3 001C
        gbc.setState(0x3dbb, 0xc71f, 0xc450, 0xd70a, 0xb51c, 0xb274, 0x0, 0x0);
        gbc.writeMem(0x3dbb, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xc71f);
        EXPECT(gbc.pc(), 0x3dbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 001D
        gbc.setState(0x7039, 0x7643, 0xe060, 0x1600, 0x1889, 0x13c2, 0x1, 0x1);
        gbc.writeMem(0x7039, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x7643);
        EXPECT(gbc.pc(), 0x703a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 001E
        gbc.setState(0x53a9, 0x38f0, 0x4150, 0x4bbc, 0x1fb1, 0xff00, 0x1, 0x0);
        gbc.writeMem(0x53a9, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x38f0);
        EXPECT(gbc.pc(), 0x53aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 001F
        gbc.setState(0x93c1, 0x728, 0xd600, 0xa083, 0x9a90, 0x4847, 0x1, 0x0);
        gbc.writeMem(0x93c1, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x728);
        EXPECT(gbc.pc(), 0x93c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93c1), 0xb3);
        // B3 0020
        gbc.setState(0x9ecc, 0xf5f7, 0x8fb0, 0x3606, 0x2c77, 0xce92, 0x1, 0x1);
        gbc.writeMem(0x9ecc, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xf5f7);
        EXPECT(gbc.pc(), 0x9ecd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ecc), 0xb3);
        // B3 0021
        gbc.setState(0x70b7, 0x3c5e, 0x7b50, 0x1625, 0xa8a3, 0xeb7f, 0x0, 0x0);
        gbc.writeMem(0x70b7, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x3c5e);
        EXPECT(gbc.pc(), 0x70b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0022
        gbc.setState(0x2cce, 0xd968, 0x19e0, 0xddd7, 0x1f58, 0x184c, 0x1, 0x0);
        gbc.writeMem(0x2cce, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xd968);
        EXPECT(gbc.pc(), 0x2ccf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0023
        gbc.setState(0x48e8, 0x6c4d, 0x9240, 0xd810, 0x4343, 0x2064, 0x0, 0x1);
        gbc.writeMem(0x48e8, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x6c4d);
        EXPECT(gbc.pc(), 0x48e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0024
        gbc.setState(0x2079, 0xed68, 0x3b40, 0x2a9b, 0x3731, 0x95c8, 0x0, 0x1);
        gbc.writeMem(0x2079, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xed68);
        EXPECT(gbc.pc(), 0x207a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0025
        gbc.setState(0x340, 0xd97e, 0x2e60, 0x1388, 0x66f9, 0xe437, 0x0, 0x1);
        gbc.writeMem(0x340, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xd97e);
        EXPECT(gbc.pc(), 0x341);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0026
        gbc.setState(0x3764, 0x2c38, 0xfff0, 0x3d1, 0xb602, 0x32a7, 0x0, 0x1);
        gbc.writeMem(0x3764, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x2c38);
        EXPECT(gbc.pc(), 0x3765);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0027
        gbc.setState(0x8c9b, 0xfbdb, 0xac80, 0xa7f4, 0xdd5e, 0x7521, 0x1, 0x1);
        gbc.writeMem(0x8c9b, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xfbdb);
        EXPECT(gbc.pc(), 0x8c9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c9b), 0xb3);
        // B3 0028
        gbc.setState(0x8bbc, 0x31ff, 0xb180, 0x141, 0x2703, 0xe83d, 0x0, 0x1);
        gbc.writeMem(0x8bbc, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x31ff);
        EXPECT(gbc.pc(), 0x8bbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bbc), 0xb3);
        // B3 0029
        gbc.setState(0xc65f, 0x8d9c, 0xdca0, 0x7b58, 0xb5ce, 0x8a3, 0x0, 0x1);
        gbc.writeMem(0xc65f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x8d9c);
        EXPECT(gbc.pc(), 0xc660);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc65f), 0xb3);
        // B3 002A
        gbc.setState(0x2e39, 0xfee5, 0x1350, 0x85f3, 0x6a1b, 0x2415, 0x1, 0x0);
        gbc.writeMem(0x2e39, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xfee5);
        EXPECT(gbc.pc(), 0x2e3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 002B
        gbc.setState(0x75a5, 0x1472, 0x49b0, 0xccb1, 0x6248, 0x5ce8, 0x0, 0x1);
        gbc.writeMem(0x75a5, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x1472);
        EXPECT(gbc.pc(), 0x75a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 002C
        gbc.setState(0xaf41, 0x4e7c, 0xbc50, 0x26c1, 0x2b00, 0x722a, 0x0, 0x1);
        gbc.writeMem(0xaf41, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x4e7c);
        EXPECT(gbc.pc(), 0xaf42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf41), 0xb3);
        // B3 002D
        gbc.setState(0x609f, 0x2a47, 0xf580, 0xa9a4, 0x4b52, 0x9d0f, 0x0, 0x0);
        gbc.writeMem(0x609f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x2a47);
        EXPECT(gbc.pc(), 0x60a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 002E
        gbc.setState(0x5971, 0xd657, 0xabf0, 0x2e03, 0x38b, 0x6417, 0x0, 0x0);
        gbc.writeMem(0x5971, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xd657);
        EXPECT(gbc.pc(), 0x5972);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 002F
        gbc.setState(0xc970, 0x5733, 0xa140, 0xe43a, 0xf4b8, 0x8b69, 0x1, 0x1);
        gbc.writeMem(0xc970, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x5733);
        EXPECT(gbc.pc(), 0xc971);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc970), 0xb3);
        // B3 0030
        gbc.setState(0x3446, 0xc4e1, 0xa180, 0x4950, 0x4c92, 0x2366, 0x0, 0x0);
        gbc.writeMem(0x3446, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xc4e1);
        EXPECT(gbc.pc(), 0x3447);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0031
        gbc.setState(0x7616, 0x6239, 0xf4c0, 0x11a5, 0x8bfe, 0xb5c9, 0x0, 0x0);
        gbc.writeMem(0x7616, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x6239);
        EXPECT(gbc.pc(), 0x7617);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0032
        gbc.setState(0x9391, 0x814, 0x9590, 0xa23c, 0x2371, 0x4559, 0x1, 0x0);
        gbc.writeMem(0x9391, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x814);
        EXPECT(gbc.pc(), 0x9392);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9391), 0xb3);
        // B3 0033
        gbc.setState(0x355e, 0x6caf, 0xc30, 0xf327, 0xe86d, 0x59f2, 0x0, 0x1);
        gbc.writeMem(0x355e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x6caf);
        EXPECT(gbc.pc(), 0x355f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0034
        gbc.setState(0x93fe, 0x1fc9, 0x710, 0xa123, 0x8e6a, 0x7d40, 0x1, 0x1);
        gbc.writeMem(0x93fe, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x1fc9);
        EXPECT(gbc.pc(), 0x93ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93fe), 0xb3);
        // B3 0035
        gbc.setState(0xa49, 0x22f0, 0x1b60, 0x28f3, 0x20ad, 0x7f24, 0x1, 0x0);
        gbc.writeMem(0xa49, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x22f0);
        EXPECT(gbc.pc(), 0xa4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0036
        gbc.setState(0x762d, 0x7f49, 0x460, 0xc1fc, 0x2522, 0x12bf, 0x0, 0x0);
        gbc.writeMem(0x762d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x7f49);
        EXPECT(gbc.pc(), 0x762e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0037
        gbc.setState(0x329, 0xe584, 0xc8a0, 0xad8e, 0xe9a3, 0xd1c6, 0x0, 0x1);
        gbc.writeMem(0x329, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xe584);
        EXPECT(gbc.pc(), 0x32a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0038
        gbc.setState(0x32df, 0x1c4c, 0x3f70, 0x2ce3, 0x671b, 0xe57f, 0x0, 0x0);
        gbc.writeMem(0x32df, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x1c4c);
        EXPECT(gbc.pc(), 0x32e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0039
        gbc.setState(0xaacc, 0x27d9, 0x2850, 0x7e29, 0x480b, 0xaa85, 0x1, 0x1);
        gbc.writeMem(0xaacc, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x27d9);
        EXPECT(gbc.pc(), 0xaacd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaacc), 0xb3);
        // B3 003A
        gbc.setState(0xc177, 0xddf4, 0xedf0, 0x87c5, 0xf5b1, 0xda53, 0x1, 0x0);
        gbc.writeMem(0xc177, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xddf4);
        EXPECT(gbc.pc(), 0xc178);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc177), 0xb3);
        // B3 003B
        gbc.setState(0xcb32, 0x589a, 0x6830, 0xb3e8, 0xf424, 0xde64, 0x0, 0x1);
        gbc.writeMem(0xcb32, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x589a);
        EXPECT(gbc.pc(), 0xcb33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb32), 0xb3);
        // B3 003C
        gbc.setState(0xefba, 0x6c2, 0x74d0, 0xbf7a, 0x47ec, 0x8646, 0x1, 0x1);
        gbc.writeMem(0xefba, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x6c2);
        EXPECT(gbc.pc(), 0xefbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefba), 0xb3);
        // B3 003D
        gbc.setState(0xdfce, 0x772b, 0x8100, 0x951d, 0xe772, 0xb3a2, 0x0, 0x0);
        gbc.writeMem(0xdfce, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x772b);
        EXPECT(gbc.pc(), 0xdfcf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfce), 0xb3);
        // B3 003E
        gbc.setState(0x39a1, 0x93e1, 0x54f0, 0x223, 0xacbf, 0xbcac, 0x0, 0x0);
        gbc.writeMem(0x39a1, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x93e1);
        EXPECT(gbc.pc(), 0x39a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 003F
        gbc.setState(0xac3e, 0xf70c, 0x4630, 0x5fde, 0x772, 0x2ac2, 0x1, 0x1);
        gbc.writeMem(0xac3e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xf70c);
        EXPECT(gbc.pc(), 0xac3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac3e), 0xb3);
        // B3 0040
        gbc.setState(0x4c9, 0xba69, 0xe760, 0x3b71, 0x8dc5, 0x8b08, 0x1, 0x1);
        gbc.writeMem(0x4c9, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xba69);
        EXPECT(gbc.pc(), 0x4ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0041
        gbc.setState(0xcf43, 0xb86c, 0xba20, 0x17a0, 0xad8c, 0x6844, 0x0, 0x1);
        gbc.writeMem(0xcf43, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xb86c);
        EXPECT(gbc.pc(), 0xcf44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf43), 0xb3);
        // B3 0042
        gbc.setState(0x7544, 0x8792, 0x62d0, 0x2158, 0x5189, 0x46a, 0x0, 0x1);
        gbc.writeMem(0x7544, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x8792);
        EXPECT(gbc.pc(), 0x7545);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0043
        gbc.setState(0x791b, 0xdbb5, 0x6ce0, 0x412e, 0x78d7, 0xa81a, 0x0, 0x1);
        gbc.writeMem(0x791b, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xdbb5);
        EXPECT(gbc.pc(), 0x791c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0044
        gbc.setState(0xe746, 0x9ea8, 0x3430, 0x283f, 0x29ef, 0xb671, 0x0, 0x0);
        gbc.writeMem(0xe746, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x9ea8);
        EXPECT(gbc.pc(), 0xe747);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe746), 0xb3);
        // B3 0045
        gbc.setState(0xe11c, 0x24f2, 0x4a20, 0x27c7, 0xe2b7, 0xa783, 0x0, 0x1);
        gbc.writeMem(0xe11c, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x24f2);
        EXPECT(gbc.pc(), 0xe11d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe11c), 0xb3);
        // B3 0046
        gbc.setState(0x41d2, 0x4832, 0x3420, 0xc537, 0xbb8f, 0xc4fb, 0x0, 0x1);
        gbc.writeMem(0x41d2, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x4832);
        EXPECT(gbc.pc(), 0x41d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0047
        gbc.setState(0xefa8, 0xd21e, 0x3100, 0x3123, 0x9cf, 0x93cc, 0x0, 0x1);
        gbc.writeMem(0xefa8, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xd21e);
        EXPECT(gbc.pc(), 0xefa9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefa8), 0xb3);
        // B3 0048
        gbc.setState(0xcf51, 0x7833, 0x56e0, 0xbbd0, 0xc43, 0x2c83, 0x1, 0x1);
        gbc.writeMem(0xcf51, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x7833);
        EXPECT(gbc.pc(), 0xcf52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf51), 0xb3);
        // B3 0049
        gbc.setState(0xe79f, 0x1d89, 0xc0e0, 0x46b7, 0x5942, 0xa5c6, 0x0, 0x1);
        gbc.writeMem(0xe79f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x1d89);
        EXPECT(gbc.pc(), 0xe7a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe79f), 0xb3);
        // B3 004A
        gbc.setState(0x6d5, 0xff2a, 0x51a0, 0xa8bf, 0xfe37, 0x3cfa, 0x1, 0x1);
        gbc.writeMem(0x6d5, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xff2a);
        EXPECT(gbc.pc(), 0x6d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 004B
        gbc.setState(0x1bb4, 0x2dfc, 0xf310, 0x940d, 0xe358, 0x714b, 0x1, 0x1);
        gbc.writeMem(0x1bb4, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x2dfc);
        EXPECT(gbc.pc(), 0x1bb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 004D
        gbc.setState(0x49f3, 0xec03, 0x8060, 0x4354, 0xfeb0, 0x703d, 0x0, 0x0);
        gbc.writeMem(0x49f3, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xec03);
        EXPECT(gbc.pc(), 0x49f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 004F
        gbc.setState(0xd23a, 0xa75f, 0x99b0, 0x1163, 0x7b72, 0xb591, 0x0, 0x1);
        gbc.writeMem(0xd23a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xa75f);
        EXPECT(gbc.pc(), 0xd23b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd23a), 0xb3);
        // B3 0050
        gbc.setState(0x6054, 0x86c9, 0xa8e0, 0x84d2, 0xcf5e, 0x96a2, 0x0, 0x1);
        gbc.writeMem(0x6054, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x86c9);
        EXPECT(gbc.pc(), 0x6055);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0051
        gbc.setState(0x26eb, 0x9265, 0x9fd0, 0x5c9d, 0x693d, 0x289b, 0x0, 0x1);
        gbc.writeMem(0x26eb, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x9265);
        EXPECT(gbc.pc(), 0x26ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0052
        gbc.setState(0xa415, 0xe448, 0xf90, 0x6c41, 0x2699, 0x4e3a, 0x0, 0x0);
        gbc.writeMem(0xa415, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xe448);
        EXPECT(gbc.pc(), 0xa416);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa415), 0xb3);
        // B3 0053
        gbc.setState(0x8826, 0x6117, 0x1a20, 0x64dd, 0x89b6, 0x123a, 0x0, 0x0);
        gbc.writeMem(0x8826, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x6117);
        EXPECT(gbc.pc(), 0x8827);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8826), 0xb3);
        // B3 0054
        gbc.setState(0x3034, 0xef97, 0x1290, 0x12f1, 0x4b7d, 0xdc14, 0x0, 0x1);
        gbc.writeMem(0x3034, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xef97);
        EXPECT(gbc.pc(), 0x3035);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0055
        gbc.setState(0xe9dd, 0x5216, 0x4870, 0x7e4e, 0xa3f4, 0x1fec, 0x1, 0x1);
        gbc.writeMem(0xe9dd, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x5216);
        EXPECT(gbc.pc(), 0xe9de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9dd), 0xb3);
        // B3 0056
        gbc.setState(0x78b6, 0x2d59, 0xda50, 0xc42a, 0x47b, 0x2e74, 0x1, 0x0);
        gbc.writeMem(0x78b6, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x2d59);
        EXPECT(gbc.pc(), 0x78b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0057
        gbc.setState(0x346b, 0x422a, 0xe460, 0x21d0, 0xedcf, 0xe6a2, 0x0, 0x0);
        gbc.writeMem(0x346b, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x422a);
        EXPECT(gbc.pc(), 0x346c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0058
        gbc.setState(0x3f2e, 0x34ce, 0xf8d0, 0x68e6, 0xd728, 0xf8af, 0x0, 0x1);
        gbc.writeMem(0x3f2e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x34ce);
        EXPECT(gbc.pc(), 0x3f2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0059
        gbc.setState(0xe379, 0xb872, 0x5960, 0x4643, 0xbf93, 0x19f4, 0x0, 0x1);
        gbc.writeMem(0xe379, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xb872);
        EXPECT(gbc.pc(), 0xe37a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe379), 0xb3);
        // B3 005A
        gbc.setState(0x923a, 0x25d2, 0x4040, 0x6e60, 0x810e, 0xcbac, 0x1, 0x0);
        gbc.writeMem(0x923a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x25d2);
        EXPECT(gbc.pc(), 0x923b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x923a), 0xb3);
        // B3 005B
        gbc.setState(0x2dfd, 0xd8af, 0x6020, 0xd3bc, 0x3fbc, 0x7d38, 0x0, 0x0);
        gbc.writeMem(0x2dfd, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xd8af);
        EXPECT(gbc.pc(), 0x2dfe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 005C
        gbc.setState(0x1832, 0x3558, 0xdb0, 0xd4ef, 0xbc60, 0xb8bb, 0x1, 0x0);
        gbc.writeMem(0x1832, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x3558);
        EXPECT(gbc.pc(), 0x1833);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 005D
        gbc.setState(0xaa31, 0xf57a, 0x5e90, 0x54f0, 0xb61c, 0x4b62, 0x0, 0x0);
        gbc.writeMem(0xaa31, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xf57a);
        EXPECT(gbc.pc(), 0xaa32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa31), 0xb3);
        // B3 005E
        gbc.setState(0x1806, 0x3eff, 0x48d0, 0x334b, 0x2271, 0xf656, 0x1, 0x0);
        gbc.writeMem(0x1806, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x3eff);
        EXPECT(gbc.pc(), 0x1807);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 005F
        gbc.setState(0x5bcb, 0xb9e4, 0x8b10, 0x7cb4, 0x2887, 0x7fab, 0x1, 0x1);
        gbc.writeMem(0x5bcb, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xb9e4);
        EXPECT(gbc.pc(), 0x5bcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0060
        gbc.setState(0x245e, 0x5db1, 0x4860, 0x83ab, 0x8ec4, 0xaed1, 0x1, 0x1);
        gbc.writeMem(0x245e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x5db1);
        EXPECT(gbc.pc(), 0x245f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0061
        gbc.setState(0xc8cd, 0x92e4, 0xf940, 0x9433, 0xf3bb, 0xf243, 0x0, 0x1);
        gbc.writeMem(0xc8cd, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x92e4);
        EXPECT(gbc.pc(), 0xc8ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8cd), 0xb3);
        // B3 0062
        gbc.setState(0x45b5, 0xf939, 0xce00, 0x665b, 0x6deb, 0x4af, 0x1, 0x1);
        gbc.writeMem(0x45b5, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xf939);
        EXPECT(gbc.pc(), 0x45b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0063
        gbc.setState(0x8ac9, 0x6609, 0xb1f0, 0x9185, 0x79db, 0xe87b, 0x1, 0x0);
        gbc.writeMem(0x8ac9, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x6609);
        EXPECT(gbc.pc(), 0x8aca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ac9), 0xb3);
        // B3 0064
        gbc.setState(0xd80f, 0x8372, 0xf7b0, 0xee52, 0x545, 0xc6ac, 0x0, 0x0);
        gbc.writeMem(0xd80f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x8372);
        EXPECT(gbc.pc(), 0xd810);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd80f), 0xb3);
        // B3 0065
        gbc.setState(0x6405, 0x5e9e, 0x1680, 0x14d9, 0x1a10, 0x4d2a, 0x0, 0x0);
        gbc.writeMem(0x6405, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x5e9e);
        EXPECT(gbc.pc(), 0x6406);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0066
        gbc.setState(0x2256, 0x1bae, 0xedd0, 0x1274, 0x9350, 0x52be, 0x0, 0x1);
        gbc.writeMem(0x2256, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x1bae);
        EXPECT(gbc.pc(), 0x2257);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0067
        gbc.setState(0xd9f2, 0x114e, 0xf080, 0x4e71, 0x987e, 0xfc8d, 0x1, 0x1);
        gbc.writeMem(0xd9f2, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x114e);
        EXPECT(gbc.pc(), 0xd9f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9f2), 0xb3);
        // B3 0068
        gbc.setState(0xa047, 0xc09, 0x2000, 0x7b59, 0xe956, 0x5ebf, 0x1, 0x0);
        gbc.writeMem(0xa047, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xc09);
        EXPECT(gbc.pc(), 0xa048);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa047), 0xb3);
        // B3 0069
        gbc.setState(0x4ab, 0x2d0b, 0x9f60, 0x8c8c, 0xa21a, 0xca1d, 0x0, 0x1);
        gbc.writeMem(0x4ab, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x2d0b);
        EXPECT(gbc.pc(), 0x4ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 006A
        gbc.setState(0x22b, 0xe75c, 0xf610, 0xe5ba, 0x76ad, 0x9300, 0x1, 0x1);
        gbc.writeMem(0x22b, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xe75c);
        EXPECT(gbc.pc(), 0x22c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 006C
        gbc.setState(0x9541, 0x98dc, 0x59b0, 0xeba6, 0x7c13, 0x64e, 0x0, 0x1);
        gbc.writeMem(0x9541, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x98dc);
        EXPECT(gbc.pc(), 0x9542);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9541), 0xb3);
        // B3 006D
        gbc.setState(0x9feb, 0xf09c, 0xca40, 0x92ec, 0x611f, 0x8524, 0x1, 0x0);
        gbc.writeMem(0x9feb, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xf09c);
        EXPECT(gbc.pc(), 0x9fec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9feb), 0xb3);
        // B3 006E
        gbc.setState(0x91c2, 0x2be7, 0x2350, 0x2ff3, 0x9e10, 0xd2b6, 0x0, 0x0);
        gbc.writeMem(0x91c2, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x2be7);
        EXPECT(gbc.pc(), 0x91c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91c2), 0xb3);
        // B3 006F
        gbc.setState(0x8742, 0x8365, 0xb750, 0xe56f, 0x6409, 0x58b3, 0x1, 0x0);
        gbc.writeMem(0x8742, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x8365);
        EXPECT(gbc.pc(), 0x8743);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8742), 0xb3);
        // B3 0070
        gbc.setState(0xb5a6, 0x8855, 0x12f0, 0x2e95, 0xe10d, 0x8848, 0x1, 0x1);
        gbc.writeMem(0xb5a6, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x8855);
        EXPECT(gbc.pc(), 0xb5a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5a6), 0xb3);
        // B3 0071
        gbc.setState(0x3a64, 0xd0d8, 0x55b0, 0xd0fd, 0xc0ec, 0xab23, 0x0, 0x1);
        gbc.writeMem(0x3a64, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xd0d8);
        EXPECT(gbc.pc(), 0x3a65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0072
        gbc.setState(0xb2d, 0x951f, 0x69d0, 0xcd30, 0x85ad, 0x4a2e, 0x1, 0x1);
        gbc.writeMem(0xb2d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x951f);
        EXPECT(gbc.pc(), 0xb2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0073
        gbc.setState(0x59c0, 0xf70c, 0xc3f0, 0x36da, 0xdace, 0xb5c, 0x0, 0x0);
        gbc.writeMem(0x59c0, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xf70c);
        EXPECT(gbc.pc(), 0x59c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0074
        gbc.setState(0x26a, 0x2a2e, 0x88e0, 0xd2cd, 0x435f, 0x4fa4, 0x1, 0x0);
        gbc.writeMem(0x26a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x2a2e);
        EXPECT(gbc.pc(), 0x26b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0075
        gbc.setState(0xbbc0, 0xcafc, 0x3390, 0xf95, 0xbe99, 0x68fc, 0x1, 0x0);
        gbc.writeMem(0xbbc0, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xcafc);
        EXPECT(gbc.pc(), 0xbbc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbc0), 0xb3);
        // B3 0076
        gbc.setState(0x6e78, 0x97bc, 0xd160, 0x81f3, 0xbc63, 0x5531, 0x0, 0x1);
        gbc.writeMem(0x6e78, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x97bc);
        EXPECT(gbc.pc(), 0x6e79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0077
        gbc.setState(0x7746, 0x8e13, 0x250, 0x6236, 0x7fac, 0x382, 0x0, 0x0);
        gbc.writeMem(0x7746, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x8e13);
        EXPECT(gbc.pc(), 0x7747);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0078
        gbc.setState(0xd51d, 0x25ae, 0xe730, 0xded3, 0x57f2, 0xc386, 0x1, 0x1);
        gbc.writeMem(0xd51d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x25ae);
        EXPECT(gbc.pc(), 0xd51e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd51d), 0xb3);
        // B3 007A
        gbc.setState(0x618c, 0x97b7, 0x6f00, 0xcb93, 0xf2db, 0x249a, 0x0, 0x1);
        gbc.writeMem(0x618c, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x97b7);
        EXPECT(gbc.pc(), 0x618d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 007B
        gbc.setState(0x8b86, 0x442c, 0x38c0, 0x7ed4, 0x9a8a, 0x59d3, 0x1, 0x0);
        gbc.writeMem(0x8b86, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x442c);
        EXPECT(gbc.pc(), 0x8b87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b86), 0xb3);
        // B3 007C
        gbc.setState(0xe33f, 0xa5d2, 0x6800, 0x25e7, 0x3eca, 0x685, 0x0, 0x1);
        gbc.writeMem(0xe33f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xa5d2);
        EXPECT(gbc.pc(), 0xe340);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe33f), 0xb3);
        // B3 007D
        gbc.setState(0x3ec2, 0xcb8f, 0xd520, 0xd688, 0xa240, 0x68e9, 0x1, 0x1);
        gbc.writeMem(0x3ec2, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xcb8f);
        EXPECT(gbc.pc(), 0x3ec3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 007E
        gbc.setState(0x2519, 0x2061, 0xb4f0, 0xe524, 0x33af, 0xec10, 0x0, 0x0);
        gbc.writeMem(0x2519, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x2061);
        EXPECT(gbc.pc(), 0x251a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 007F
        gbc.setState(0x96c5, 0x9736, 0x25b0, 0xb748, 0xe9ef, 0x78eb, 0x1, 0x0);
        gbc.writeMem(0x96c5, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x9736);
        EXPECT(gbc.pc(), 0x96c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96c5), 0xb3);
        // B3 0080
        gbc.setState(0x34db, 0x92d5, 0xd0c0, 0x4f11, 0xf09a, 0x95ec, 0x1, 0x1);
        gbc.writeMem(0x34db, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x92d5);
        EXPECT(gbc.pc(), 0x34dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0081
        gbc.setState(0xab23, 0x85b6, 0xf680, 0x1d44, 0x1274, 0xaf2e, 0x0, 0x0);
        gbc.writeMem(0xab23, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x85b6);
        EXPECT(gbc.pc(), 0xab24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab23), 0xb3);
        // B3 0082
        gbc.setState(0xbe69, 0x5d8, 0xbfa0, 0xab80, 0x8e18, 0xf744, 0x0, 0x1);
        gbc.writeMem(0xbe69, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x5d8);
        EXPECT(gbc.pc(), 0xbe6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe69), 0xb3);
        // B3 0083
        gbc.setState(0xec7d, 0x465a, 0xca50, 0xef19, 0xe1e5, 0x393b, 0x0, 0x1);
        gbc.writeMem(0xec7d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x465a);
        EXPECT(gbc.pc(), 0xec7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec7d), 0xb3);
        // B3 0084
        gbc.setState(0x1882, 0x3e7, 0x88f0, 0x7321, 0xf302, 0x8272, 0x1, 0x1);
        gbc.writeMem(0x1882, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x3e7);
        EXPECT(gbc.pc(), 0x1883);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0085
        gbc.setState(0x6f74, 0xcc5d, 0x27c0, 0x9b37, 0xe76e, 0x45cd, 0x1, 0x0);
        gbc.writeMem(0x6f74, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xcc5d);
        EXPECT(gbc.pc(), 0x6f75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0086
        gbc.setState(0xc560, 0x6efa, 0xf900, 0x10c7, 0x795f, 0xd55b, 0x0, 0x0);
        gbc.writeMem(0xc560, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x6efa);
        EXPECT(gbc.pc(), 0xc561);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc560), 0xb3);
        // B3 0087
        gbc.setState(0x4e04, 0xbf81, 0xa5c0, 0xf083, 0xc73, 0xd370, 0x1, 0x1);
        gbc.writeMem(0x4e04, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xbf81);
        EXPECT(gbc.pc(), 0x4e05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0088
        gbc.setState(0xe7, 0x1b, 0x8f20, 0x28db, 0x219a, 0x58fc, 0x1, 0x0);
        gbc.writeMem(0xe7, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x1b);
        EXPECT(gbc.pc(), 0xe8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0089
        gbc.setState(0x6159, 0xdac0, 0x79f0, 0x4de3, 0xf74c, 0xafdf, 0x1, 0x0);
        gbc.writeMem(0x6159, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xdac0);
        EXPECT(gbc.pc(), 0x615a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 008A
        gbc.setState(0x1b4f, 0x13c2, 0xf050, 0x2253, 0x1b19, 0x2560, 0x1, 0x0);
        gbc.writeMem(0x1b4f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x13c2);
        EXPECT(gbc.pc(), 0x1b50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 008B
        gbc.setState(0x5fae, 0xdd8e, 0x49e0, 0x6472, 0xb40b, 0x3bd3, 0x0, 0x1);
        gbc.writeMem(0x5fae, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xdd8e);
        EXPECT(gbc.pc(), 0x5faf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 008C
        gbc.setState(0x9ff7, 0x7ee7, 0x6cf0, 0x4ce2, 0x5091, 0xbea0, 0x1, 0x0);
        gbc.writeMem(0x9ff7, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x7ee7);
        EXPECT(gbc.pc(), 0x9ff8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ff7), 0xb3);
        // B3 008D
        gbc.setState(0x1d17, 0x8321, 0x6dc0, 0xde35, 0xf2ac, 0xf3b9, 0x0, 0x1);
        gbc.writeMem(0x1d17, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x8321);
        EXPECT(gbc.pc(), 0x1d18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 008E
        gbc.setState(0xa1f0, 0x1ce2, 0xd6c0, 0x3543, 0xbc60, 0x4762, 0x0, 0x1);
        gbc.writeMem(0xa1f0, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x1ce2);
        EXPECT(gbc.pc(), 0xa1f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1f0), 0xb3);
        // B3 0090
        gbc.setState(0x27ed, 0x7380, 0x9a30, 0x700f, 0x73ea, 0x911f, 0x1, 0x0);
        gbc.writeMem(0x27ed, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x7380);
        EXPECT(gbc.pc(), 0x27ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0091
        gbc.setState(0xbb09, 0x57d0, 0xb100, 0xd937, 0x18f9, 0xb284, 0x0, 0x0);
        gbc.writeMem(0xbb09, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x57d0);
        EXPECT(gbc.pc(), 0xbb0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb09), 0xb3);
        // B3 0092
        gbc.setState(0x5f93, 0x98db, 0x5520, 0x3567, 0x2dd6, 0xb21f, 0x1, 0x1);
        gbc.writeMem(0x5f93, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x98db);
        EXPECT(gbc.pc(), 0x5f94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0093
        gbc.setState(0x3db, 0x7c4f, 0xf360, 0xbd45, 0xb128, 0xe48f, 0x0, 0x1);
        gbc.writeMem(0x3db, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x7c4f);
        EXPECT(gbc.pc(), 0x3dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0094
        gbc.setState(0xd443, 0x395, 0xa030, 0xf495, 0x5b4a, 0x2df2, 0x0, 0x1);
        gbc.writeMem(0xd443, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x395);
        EXPECT(gbc.pc(), 0xd444);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd443), 0xb3);
        // B3 0095
        gbc.setState(0xde31, 0x9d72, 0xa800, 0x7181, 0x3949, 0x6aea, 0x0, 0x0);
        gbc.writeMem(0xde31, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x9d72);
        EXPECT(gbc.pc(), 0xde32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde31), 0xb3);
        // B3 0096
        gbc.setState(0xa703, 0x406e, 0xbc80, 0xc649, 0x90e8, 0xebc2, 0x0, 0x0);
        gbc.writeMem(0xa703, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x406e);
        EXPECT(gbc.pc(), 0xa704);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa703), 0xb3);
        // B3 0097
        gbc.setState(0x2bc7, 0x9770, 0x5090, 0x2e63, 0x174c, 0xa2c3, 0x1, 0x0);
        gbc.writeMem(0x2bc7, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x9770);
        EXPECT(gbc.pc(), 0x2bc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0098
        gbc.setState(0x31c7, 0x56b2, 0x71e0, 0x8af5, 0xadb2, 0xebae, 0x1, 0x0);
        gbc.writeMem(0x31c7, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x56b2);
        EXPECT(gbc.pc(), 0x31c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0099
        gbc.setState(0x2bb0, 0xedb7, 0x7560, 0x3b90, 0xcad5, 0x6f25, 0x1, 0x0);
        gbc.writeMem(0x2bb0, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xedb7);
        EXPECT(gbc.pc(), 0x2bb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 009A
        gbc.setState(0x7177, 0xfc64, 0x11e0, 0x7cc, 0xd406, 0xb3d3, 0x0, 0x1);
        gbc.writeMem(0x7177, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xfc64);
        EXPECT(gbc.pc(), 0x7178);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 009B
        gbc.setState(0x5f26, 0x3eee, 0x6170, 0x6ee5, 0xd007, 0xd7de, 0x0, 0x1);
        gbc.writeMem(0x5f26, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x3eee);
        EXPECT(gbc.pc(), 0x5f27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 009D
        gbc.setState(0xddae, 0x22f4, 0xdbd0, 0x1c58, 0x9e19, 0xfb88, 0x0, 0x1);
        gbc.writeMem(0xddae, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x22f4);
        EXPECT(gbc.pc(), 0xddaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddae), 0xb3);
        // B3 009E
        gbc.setState(0xbb2f, 0xa3b3, 0x16a0, 0xe96b, 0x2ab9, 0x5395, 0x1, 0x0);
        gbc.writeMem(0xbb2f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xa3b3);
        EXPECT(gbc.pc(), 0xbb30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb2f), 0xb3);
        // B3 009F
        gbc.setState(0xe292, 0x565b, 0x9b60, 0x928f, 0xbe4e, 0xd561, 0x1, 0x1);
        gbc.writeMem(0xe292, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x565b);
        EXPECT(gbc.pc(), 0xe293);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe292), 0xb3);
        // B3 00A0
        gbc.setState(0xac16, 0xaf51, 0xdcd0, 0x417e, 0xdc68, 0x8f29, 0x1, 0x0);
        gbc.writeMem(0xac16, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xaf51);
        EXPECT(gbc.pc(), 0xac17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac16), 0xb3);
        // B3 00A1
        gbc.setState(0xc7b1, 0x96dd, 0xa0c0, 0xa7ce, 0x3ae5, 0x2e2c, 0x1, 0x1);
        gbc.writeMem(0xc7b1, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x96dd);
        EXPECT(gbc.pc(), 0xc7b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7b1), 0xb3);
        // B3 00A2
        gbc.setState(0xa09, 0xcf13, 0x9cd0, 0x2a74, 0x2e86, 0xf486, 0x1, 0x1);
        gbc.writeMem(0xa09, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xcf13);
        EXPECT(gbc.pc(), 0xa0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00A3
        gbc.setState(0x95d8, 0x2cc7, 0x3b20, 0xe0f7, 0x79eb, 0x6285, 0x1, 0x0);
        gbc.writeMem(0x95d8, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x2cc7);
        EXPECT(gbc.pc(), 0x95d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95d8), 0xb3);
        // B3 00A4
        gbc.setState(0xcd66, 0x86d8, 0x3910, 0xe28f, 0xfa96, 0xb4b6, 0x1, 0x1);
        gbc.writeMem(0xcd66, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x86d8);
        EXPECT(gbc.pc(), 0xcd67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd66), 0xb3);
        // B3 00A5
        gbc.setState(0x5884, 0xe4cf, 0xad70, 0x7425, 0x10cf, 0xc3c1, 0x0, 0x0);
        gbc.writeMem(0x5884, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xe4cf);
        EXPECT(gbc.pc(), 0x5885);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00A6
        gbc.setState(0x2bdb, 0xf345, 0xaa00, 0x38ee, 0x4dfa, 0x667b, 0x1, 0x1);
        gbc.writeMem(0x2bdb, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xf345);
        EXPECT(gbc.pc(), 0x2bdc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00A7
        gbc.setState(0x69, 0xc2a3, 0xd810, 0x7912, 0x315a, 0x50fb, 0x1, 0x0);
        gbc.writeMem(0x69, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xc2a3);
        EXPECT(gbc.pc(), 0x6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00A8
        gbc.setState(0xb354, 0xebf8, 0x8880, 0xfa8b, 0x19e0, 0xd748, 0x1, 0x1);
        gbc.writeMem(0xb354, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xebf8);
        EXPECT(gbc.pc(), 0xb355);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb354), 0xb3);
        // B3 00A9
        gbc.setState(0xb7ea, 0x740a, 0xe3e0, 0x9551, 0x635f, 0x4f24, 0x1, 0x0);
        gbc.writeMem(0xb7ea, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x740a);
        EXPECT(gbc.pc(), 0xb7eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7ea), 0xb3);
        // B3 00AA
        gbc.setState(0x7ef2, 0x5598, 0xb3d0, 0x6dfe, 0xf928, 0x8c, 0x1, 0x0);
        gbc.writeMem(0x7ef2, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x5598);
        EXPECT(gbc.pc(), 0x7ef3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00AC
        gbc.setState(0x4dda, 0x397c, 0x7a60, 0x66db, 0x32bd, 0x92e1, 0x1, 0x0);
        gbc.writeMem(0x4dda, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x397c);
        EXPECT(gbc.pc(), 0x4ddb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00AD
        gbc.setState(0xdb58, 0x4086, 0x5b30, 0x563a, 0x84ff, 0x519, 0x1, 0x1);
        gbc.writeMem(0xdb58, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x4086);
        EXPECT(gbc.pc(), 0xdb59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb58), 0xb3);
        // B3 00AE
        gbc.setState(0x734e, 0x8be8, 0x5bc0, 0xae78, 0x9222, 0x596b, 0x1, 0x0);
        gbc.writeMem(0x734e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x8be8);
        EXPECT(gbc.pc(), 0x734f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00AF
        gbc.setState(0xbcf2, 0x2683, 0xf9e0, 0x8eae, 0xcc2d, 0xe771, 0x1, 0x1);
        gbc.writeMem(0xbcf2, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x2683);
        EXPECT(gbc.pc(), 0xbcf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcf2), 0xb3);
        // B3 00B0
        gbc.setState(0x3399, 0x9518, 0xe290, 0x7e7c, 0xb71b, 0x84e8, 0x0, 0x0);
        gbc.writeMem(0x3399, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x9518);
        EXPECT(gbc.pc(), 0x339a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00B1
        gbc.setState(0x8e72, 0x5843, 0xc4b0, 0x278, 0x5f17, 0x7826, 0x0, 0x1);
        gbc.writeMem(0x8e72, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x5843);
        EXPECT(gbc.pc(), 0x8e73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e72), 0xb3);
        // B3 00B2
        gbc.setState(0xe8b8, 0x5b0e, 0xcf80, 0x49ed, 0x2315, 0x671d, 0x1, 0x1);
        gbc.writeMem(0xe8b8, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x5b0e);
        EXPECT(gbc.pc(), 0xe8b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8b8), 0xb3);
        // B3 00B3
        gbc.setState(0xcfc6, 0x818e, 0xad90, 0x2133, 0xfadb, 0x9115, 0x1, 0x0);
        gbc.writeMem(0xcfc6, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x818e);
        EXPECT(gbc.pc(), 0xcfc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfc6), 0xb3);
        // B3 00B4
        gbc.setState(0x4bd7, 0x247a, 0xd2a0, 0x4e29, 0x3f44, 0x11aa, 0x1, 0x0);
        gbc.writeMem(0x4bd7, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x247a);
        EXPECT(gbc.pc(), 0x4bd8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00B5
        gbc.setState(0x28bd, 0xb4bb, 0xf850, 0x75ad, 0xaa07, 0x3d42, 0x0, 0x0);
        gbc.writeMem(0x28bd, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xb4bb);
        EXPECT(gbc.pc(), 0x28be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00B6
        gbc.setState(0x2bb2, 0x72f4, 0x8f30, 0x98e8, 0x30a6, 0xbd25, 0x1, 0x1);
        gbc.writeMem(0x2bb2, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x72f4);
        EXPECT(gbc.pc(), 0x2bb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00B7
        gbc.setState(0x9b61, 0x6947, 0x3220, 0x2d59, 0x6c21, 0x370e, 0x0, 0x0);
        gbc.writeMem(0x9b61, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x6947);
        EXPECT(gbc.pc(), 0x9b62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b61), 0xb3);
        // B3 00B8
        gbc.setState(0x9b93, 0x8193, 0xba50, 0x67af, 0xa106, 0x3ba0, 0x1, 0x1);
        gbc.writeMem(0x9b93, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x8193);
        EXPECT(gbc.pc(), 0x9b94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b93), 0xb3);
        // B3 00B9
        gbc.setState(0x72af, 0xbe89, 0xd800, 0x430e, 0xfd47, 0x749b, 0x1, 0x1);
        gbc.writeMem(0x72af, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xbe89);
        EXPECT(gbc.pc(), 0x72b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00BA
        gbc.setState(0x7442, 0x4d4e, 0x3d0, 0xda82, 0x180b, 0x48bf, 0x0, 0x0);
        gbc.writeMem(0x7442, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x4d4e);
        EXPECT(gbc.pc(), 0x7443);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00BB
        gbc.setState(0x370b, 0x82f, 0xecd0, 0xdbaa, 0x859b, 0xff4a, 0x0, 0x1);
        gbc.writeMem(0x370b, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x82f);
        EXPECT(gbc.pc(), 0x370c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00BC
        gbc.setState(0xabe9, 0x4062, 0xda70, 0xaa59, 0x9522, 0xe91b, 0x1, 0x0);
        gbc.writeMem(0xabe9, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x4062);
        EXPECT(gbc.pc(), 0xabea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabe9), 0xb3);
        // B3 00BD
        gbc.setState(0xca8e, 0xdf2b, 0xe6e0, 0xe967, 0x930a, 0xfa73, 0x1, 0x1);
        gbc.writeMem(0xca8e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xdf2b);
        EXPECT(gbc.pc(), 0xca8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca8e), 0xb3);
        // B3 00BE
        gbc.setState(0x584c, 0x5c42, 0xcc70, 0xa9b1, 0xb804, 0x97b4, 0x1, 0x1);
        gbc.writeMem(0x584c, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x5c42);
        EXPECT(gbc.pc(), 0x584d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00BF
        gbc.setState(0x73c3, 0x3220, 0x42c0, 0x77b9, 0x1a83, 0xaa5, 0x0, 0x0);
        gbc.writeMem(0x73c3, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x3220);
        EXPECT(gbc.pc(), 0x73c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00C0
        gbc.setState(0x4039, 0x7341, 0x12c0, 0x15be, 0xc6ef, 0x3b11, 0x1, 0x0);
        gbc.writeMem(0x4039, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x7341);
        EXPECT(gbc.pc(), 0x403a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00C1
        gbc.setState(0x769b, 0xde85, 0xa110, 0x2c1d, 0xb6bf, 0xaacc, 0x0, 0x1);
        gbc.writeMem(0x769b, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xde85);
        EXPECT(gbc.pc(), 0x769c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00C2
        gbc.setState(0xb564, 0x8263, 0x1c70, 0x331c, 0x591, 0xb7ec, 0x1, 0x0);
        gbc.writeMem(0xb564, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x8263);
        EXPECT(gbc.pc(), 0xb565);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb564), 0xb3);
        // B3 00C3
        gbc.setState(0xa08b, 0x8ffd, 0x4ca0, 0x8189, 0xa8a2, 0x9d04, 0x1, 0x0);
        gbc.writeMem(0xa08b, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x8ffd);
        EXPECT(gbc.pc(), 0xa08c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa08b), 0xb3);
        // B3 00C4
        gbc.setState(0xb085, 0xc989, 0xd4d0, 0x21dd, 0x4d22, 0xa974, 0x1, 0x0);
        gbc.writeMem(0xb085, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xc989);
        EXPECT(gbc.pc(), 0xb086);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb085), 0xb3);
        // B3 00C5
        gbc.setState(0x5e4d, 0xeb4a, 0xe620, 0xb777, 0xcb39, 0xf61c, 0x0, 0x0);
        gbc.writeMem(0x5e4d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xeb4a);
        EXPECT(gbc.pc(), 0x5e4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00C6
        gbc.setState(0x93b1, 0xe3ea, 0x2f20, 0x3e84, 0x8e6c, 0x75f8, 0x1, 0x1);
        gbc.writeMem(0x93b1, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xe3ea);
        EXPECT(gbc.pc(), 0x93b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93b1), 0xb3);
        // B3 00C7
        gbc.setState(0x14cc, 0x41a7, 0x4790, 0x7f21, 0x31c6, 0xb835, 0x0, 0x1);
        gbc.writeMem(0x14cc, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x41a7);
        EXPECT(gbc.pc(), 0x14cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00C8
        gbc.setState(0x310d, 0x7db6, 0x61f0, 0xa4f, 0x4fd0, 0x6a2a, 0x0, 0x1);
        gbc.writeMem(0x310d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x7db6);
        EXPECT(gbc.pc(), 0x310e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00C9
        gbc.setState(0x38b1, 0x58e0, 0x60a0, 0x2345, 0x628b, 0xaab0, 0x0, 0x0);
        gbc.writeMem(0x38b1, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x58e0);
        EXPECT(gbc.pc(), 0x38b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00CB
        gbc.setState(0x119, 0x561, 0xfda0, 0xd051, 0xc1ee, 0xba87, 0x1, 0x0);
        gbc.writeMem(0x119, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x561);
        EXPECT(gbc.pc(), 0x11a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00CD
        gbc.setState(0x40cc, 0xce3b, 0x4670, 0xaeb4, 0xb989, 0x32dd, 0x1, 0x1);
        gbc.writeMem(0x40cc, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xce3b);
        EXPECT(gbc.pc(), 0x40cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00CE
        gbc.setState(0x308d, 0xdf87, 0xf6f0, 0xbdd0, 0x83e4, 0x69bd, 0x0, 0x0);
        gbc.writeMem(0x308d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xdf87);
        EXPECT(gbc.pc(), 0x308e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00CF
        gbc.setState(0xbfed, 0x541c, 0xe0, 0x7450, 0xccc4, 0xeeec, 0x0, 0x0);
        gbc.writeMem(0xbfed, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x541c);
        EXPECT(gbc.pc(), 0xbfee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfed), 0xb3);
        // B3 00D0
        gbc.setState(0x2b07, 0xec80, 0xd9c0, 0x808f, 0x781f, 0x55b0, 0x0, 0x1);
        gbc.writeMem(0x2b07, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xec80);
        EXPECT(gbc.pc(), 0x2b08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00D1
        gbc.setState(0xecb8, 0x7029, 0x9a10, 0x683c, 0xfb8d, 0xd7bc, 0x1, 0x1);
        gbc.writeMem(0xecb8, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x7029);
        EXPECT(gbc.pc(), 0xecb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecb8), 0xb3);
        // B3 00D2
        gbc.setState(0x7e70, 0xb20d, 0xe930, 0x731b, 0xb737, 0x276b, 0x0, 0x0);
        gbc.writeMem(0x7e70, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xb20d);
        EXPECT(gbc.pc(), 0x7e71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00D3
        gbc.setState(0x5461, 0x9df8, 0xa330, 0x88f1, 0x7a90, 0x8e87, 0x0, 0x0);
        gbc.writeMem(0x5461, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x9df8);
        EXPECT(gbc.pc(), 0x5462);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00D4
        gbc.setState(0xc3c1, 0x3327, 0x42a0, 0xe67a, 0x992e, 0xe0f8, 0x0, 0x1);
        gbc.writeMem(0xc3c1, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x3327);
        EXPECT(gbc.pc(), 0xc3c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3c1), 0xb3);
        // B3 00D5
        gbc.setState(0x33be, 0x676e, 0x9ae0, 0x193, 0xfcb6, 0x50a5, 0x1, 0x0);
        gbc.writeMem(0x33be, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x676e);
        EXPECT(gbc.pc(), 0x33bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00D6
        gbc.setState(0x3256, 0x1261, 0xd810, 0xc36d, 0x24f2, 0xfb81, 0x1, 0x1);
        gbc.writeMem(0x3256, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x1261);
        EXPECT(gbc.pc(), 0x3257);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00D7
        gbc.setState(0x2a1, 0xa892, 0x3d70, 0xb89b, 0xdad4, 0x2e5f, 0x1, 0x0);
        gbc.writeMem(0x2a1, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xa892);
        EXPECT(gbc.pc(), 0x2a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00D8
        gbc.setState(0xa1d2, 0xabee, 0x4550, 0x10ad, 0x4b67, 0x9636, 0x1, 0x1);
        gbc.writeMem(0xa1d2, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xabee);
        EXPECT(gbc.pc(), 0xa1d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1d2), 0xb3);
        // B3 00D9
        gbc.setState(0xda42, 0x5c5a, 0xe520, 0x9f98, 0xf4cc, 0x5b2, 0x0, 0x1);
        gbc.writeMem(0xda42, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x5c5a);
        EXPECT(gbc.pc(), 0xda43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda42), 0xb3);
        // B3 00DA
        gbc.setState(0xd87e, 0x549a, 0x23f0, 0x2cce, 0x886a, 0xd8ee, 0x1, 0x1);
        gbc.writeMem(0xd87e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x549a);
        EXPECT(gbc.pc(), 0xd87f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd87e), 0xb3);
        // B3 00DB
        gbc.setState(0xbf69, 0x4af7, 0xde00, 0x6d4, 0x21f, 0xb047, 0x0, 0x0);
        gbc.writeMem(0xbf69, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x4af7);
        EXPECT(gbc.pc(), 0xbf6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf69), 0xb3);
        // B3 00DC
        gbc.setState(0xc9a2, 0xc3c1, 0xbba0, 0xd600, 0x6aa3, 0x2207, 0x1, 0x1);
        gbc.writeMem(0xc9a2, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xc3c1);
        EXPECT(gbc.pc(), 0xc9a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9a2), 0xb3);
        // B3 00DD
        gbc.setState(0xbf78, 0xd85e, 0x7b80, 0x2203, 0xf156, 0x54b6, 0x0, 0x1);
        gbc.writeMem(0xbf78, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xd85e);
        EXPECT(gbc.pc(), 0xbf79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf78), 0xb3);
        // B3 00DE
        gbc.setState(0x4594, 0x193e, 0x8830, 0x6fc0, 0x953b, 0x4484, 0x1, 0x0);
        gbc.writeMem(0x4594, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x193e);
        EXPECT(gbc.pc(), 0x4595);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00DF
        gbc.setState(0x3d6d, 0xc2ab, 0xd700, 0xcdd5, 0x956a, 0xb9ba, 0x0, 0x1);
        gbc.writeMem(0x3d6d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xc2ab);
        EXPECT(gbc.pc(), 0x3d6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00E0
        gbc.setState(0xb079, 0x1e73, 0x45c0, 0xc462, 0x36ee, 0xce89, 0x1, 0x1);
        gbc.writeMem(0xb079, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x1e73);
        EXPECT(gbc.pc(), 0xb07a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb079), 0xb3);
        // B3 00E1
        gbc.setState(0xd3bc, 0x6dd8, 0x9fe0, 0xd4e1, 0xc0b, 0xce94, 0x1, 0x1);
        gbc.writeMem(0xd3bc, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x6dd8);
        EXPECT(gbc.pc(), 0xd3bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3bc), 0xb3);
        // B3 00E2
        gbc.setState(0x16a7, 0x5288, 0xf640, 0x612, 0x39ff, 0x2594, 0x0, 0x1);
        gbc.writeMem(0x16a7, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x5288);
        EXPECT(gbc.pc(), 0x16a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00E3
        gbc.setState(0xe752, 0x8037, 0xdc70, 0x949b, 0xe889, 0x2352, 0x0, 0x1);
        gbc.writeMem(0xe752, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x8037);
        EXPECT(gbc.pc(), 0xe753);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe752), 0xb3);
        // B3 00E4
        gbc.setState(0x3adc, 0x1c9d, 0x9050, 0x51aa, 0xdcd2, 0x772, 0x0, 0x0);
        gbc.writeMem(0x3adc, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x1c9d);
        EXPECT(gbc.pc(), 0x3add);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00E5
        gbc.setState(0xb638, 0xa125, 0x3cf0, 0xe8c1, 0xbac, 0xc90d, 0x1, 0x1);
        gbc.writeMem(0xb638, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xa125);
        EXPECT(gbc.pc(), 0xb639);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb638), 0xb3);
        // B3 00E6
        gbc.setState(0xe7f, 0x12e5, 0x1000, 0x5600, 0x7d4d, 0x5448, 0x1, 0x0);
        gbc.writeMem(0xe7f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x12e5);
        EXPECT(gbc.pc(), 0xe80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00E7
        gbc.setState(0x5a0d, 0x9aa4, 0x44b0, 0x9c7e, 0x56c4, 0x26a6, 0x0, 0x1);
        gbc.writeMem(0x5a0d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x9aa4);
        EXPECT(gbc.pc(), 0x5a0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00E8
        gbc.setState(0xcbf2, 0xd245, 0xd5a0, 0xccae, 0xdb58, 0x8eb1, 0x0, 0x1);
        gbc.writeMem(0xcbf2, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xd245);
        EXPECT(gbc.pc(), 0xcbf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbf2), 0xb3);
        // B3 00EA
        gbc.setState(0xe1, 0xee59, 0xad50, 0x110d, 0x2147, 0x103, 0x1, 0x0);
        gbc.writeMem(0xe1, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xee59);
        EXPECT(gbc.pc(), 0xe2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00EB
        gbc.setState(0x2cac, 0xd7fe, 0x2a0, 0xc56b, 0x263b, 0xda1e, 0x1, 0x1);
        gbc.writeMem(0x2cac, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xd7fe);
        EXPECT(gbc.pc(), 0x2cad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00ED
        gbc.setState(0xd568, 0x35ec, 0xedd0, 0xdc0f, 0xc368, 0xc5bc, 0x1, 0x0);
        gbc.writeMem(0xd568, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x35ec);
        EXPECT(gbc.pc(), 0xd569);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd568), 0xb3);
        // B3 00EF
        gbc.setState(0x4080, 0x73c3, 0xf520, 0x134a, 0x928b, 0xe160, 0x1, 0x0);
        gbc.writeMem(0x4080, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x73c3);
        EXPECT(gbc.pc(), 0x4081);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00F1
        gbc.setState(0x9942, 0xcfce, 0xb950, 0x741c, 0xb854, 0x6b28, 0x0, 0x0);
        gbc.writeMem(0x9942, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xcfce);
        EXPECT(gbc.pc(), 0x9943);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9942), 0xb3);
        // B3 00F2
        gbc.setState(0x41ca, 0x3387, 0x6ac0, 0xbaaa, 0xdd3a, 0xadb0, 0x1, 0x1);
        gbc.writeMem(0x41ca, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x3387);
        EXPECT(gbc.pc(), 0x41cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00F3
        gbc.setState(0x7f2b, 0xdb07, 0x8190, 0xac07, 0x9d1f, 0xd662, 0x1, 0x1);
        gbc.writeMem(0x7f2b, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xdb07);
        EXPECT(gbc.pc(), 0x7f2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 00F4
        gbc.setState(0xe9c2, 0xdc57, 0x4b20, 0xae2a, 0x2855, 0xdd2a, 0x1, 0x0);
        gbc.writeMem(0xe9c2, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xdc57);
        EXPECT(gbc.pc(), 0xe9c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9c2), 0xb3);
        // B3 00F5
        gbc.setState(0xab58, 0x4349, 0x7860, 0x1ff6, 0x1625, 0x2187, 0x1, 0x0);
        gbc.writeMem(0xab58, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x4349);
        EXPECT(gbc.pc(), 0xab59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab58), 0xb3);
        // B3 00F6
        gbc.setState(0xcf10, 0x9572, 0x7490, 0x6eee, 0xa1b8, 0x32fe, 0x1, 0x0);
        gbc.writeMem(0xcf10, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x9572);
        EXPECT(gbc.pc(), 0xcf11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf10), 0xb3);
        // B3 00F7
        gbc.setState(0x8534, 0xc67e, 0x8540, 0xe3f, 0xba18, 0x4468, 0x1, 0x1);
        gbc.writeMem(0x8534, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xc67e);
        EXPECT(gbc.pc(), 0x8535);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8534), 0xb3);
        // B3 00F8
        gbc.setState(0xe7e8, 0xe7bd, 0xba90, 0x3da6, 0xb9fa, 0x217c, 0x1, 0x0);
        gbc.writeMem(0xe7e8, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xe7bd);
        EXPECT(gbc.pc(), 0xe7e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7e8), 0xb3);
        // B3 00F9
        gbc.setState(0xb742, 0x42d1, 0xabb0, 0x19ec, 0x797e, 0x6c4a, 0x1, 0x1);
        gbc.writeMem(0xb742, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x42d1);
        EXPECT(gbc.pc(), 0xb743);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb742), 0xb3);
        // B3 00FA
        gbc.setState(0xc28e, 0xd525, 0x8780, 0x250b, 0x1a51, 0x4aa3, 0x0, 0x1);
        gbc.writeMem(0xc28e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xd525);
        EXPECT(gbc.pc(), 0xc28f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc28e), 0xb3);
        // B3 00FC
        gbc.setState(0x8dcf, 0x2f24, 0x7340, 0x7d2e, 0x2330, 0xb99, 0x1, 0x1);
        gbc.writeMem(0x8dcf, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x2f24);
        EXPECT(gbc.pc(), 0x8dd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dcf), 0xb3);
        // B3 00FD
        gbc.setState(0xd1c1, 0x1949, 0x4f70, 0xc14a, 0x2f79, 0xc1b8, 0x0, 0x0);
        gbc.writeMem(0xd1c1, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x1949);
        EXPECT(gbc.pc(), 0xd1c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1c1), 0xb3);
        // B3 00FE
        gbc.setState(0xd384, 0x48be, 0x35e0, 0x526b, 0x3169, 0x7449, 0x0, 0x1);
        gbc.writeMem(0xd384, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x48be);
        EXPECT(gbc.pc(), 0xd385);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd384), 0xb3);
        // B3 00FF
        gbc.setState(0x2fd2, 0x6c1e, 0xddd0, 0x4a5d, 0x1f8d, 0x5a5f, 0x1, 0x1);
        gbc.writeMem(0x2fd2, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x6c1e);
        EXPECT(gbc.pc(), 0x2fd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0100
        gbc.setState(0x89bc, 0x8569, 0xc920, 0xe03b, 0xe38e, 0xf5bb, 0x0, 0x1);
        gbc.writeMem(0x89bc, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x8569);
        EXPECT(gbc.pc(), 0x89bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89bc), 0xb3);
        // B3 0101
        gbc.setState(0x4e8c, 0xdb71, 0x3ca0, 0x771a, 0x5ba0, 0x16b, 0x1, 0x1);
        gbc.writeMem(0x4e8c, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xdb71);
        EXPECT(gbc.pc(), 0x4e8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0102
        gbc.setState(0xeec9, 0xb929, 0xab60, 0xea77, 0xecd2, 0xdebf, 0x0, 0x1);
        gbc.writeMem(0xeec9, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xb929);
        EXPECT(gbc.pc(), 0xeeca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeec9), 0xb3);
        // B3 0103
        gbc.setState(0x64a3, 0x2afc, 0xcf0, 0x15e5, 0x1a, 0x55af, 0x0, 0x1);
        gbc.writeMem(0x64a3, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x2afc);
        EXPECT(gbc.pc(), 0x64a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0104
        gbc.setState(0x7eea, 0xb94d, 0x77b0, 0x54b1, 0xc854, 0x4fe, 0x0, 0x1);
        gbc.writeMem(0x7eea, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xb94d);
        EXPECT(gbc.pc(), 0x7eeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0105
        gbc.setState(0x97c0, 0xa6b3, 0x3250, 0x2d74, 0xf399, 0x13c1, 0x0, 0x0);
        gbc.writeMem(0x97c0, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xa6b3);
        EXPECT(gbc.pc(), 0x97c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97c0), 0xb3);
        // B3 0106
        gbc.setState(0x351d, 0xe8fc, 0x4ad0, 0xfa03, 0x743c, 0xeceb, 0x1, 0x0);
        gbc.writeMem(0x351d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xe8fc);
        EXPECT(gbc.pc(), 0x351e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0107
        gbc.setState(0xd25, 0x7946, 0xfdf0, 0xde24, 0x2311, 0xa916, 0x1, 0x1);
        gbc.writeMem(0xd25, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x7946);
        EXPECT(gbc.pc(), 0xd26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0108
        gbc.setState(0x338a, 0x7dbf, 0xda10, 0x6d7c, 0xe20d, 0xe0b2, 0x0, 0x0);
        gbc.writeMem(0x338a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x7dbf);
        EXPECT(gbc.pc(), 0x338b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0109
        gbc.setState(0xe317, 0xe75, 0xbe00, 0x2762, 0x2a7f, 0x688, 0x1, 0x1);
        gbc.writeMem(0xe317, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xe75);
        EXPECT(gbc.pc(), 0xe318);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe317), 0xb3);
        // B3 010A
        gbc.setState(0xdf19, 0xcebc, 0xea50, 0x762b, 0x4359, 0xd4b1, 0x0, 0x1);
        gbc.writeMem(0xdf19, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xcebc);
        EXPECT(gbc.pc(), 0xdf1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf19), 0xb3);
        // B3 010B
        gbc.setState(0xa215, 0xffa3, 0x4450, 0x7c21, 0x1e58, 0x58a0, 0x1, 0x1);
        gbc.writeMem(0xa215, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xffa3);
        EXPECT(gbc.pc(), 0xa216);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa215), 0xb3);
        // B3 010C
        gbc.setState(0xbdcd, 0x21c8, 0x4030, 0x424e, 0x4d21, 0x26d5, 0x1, 0x0);
        gbc.writeMem(0xbdcd, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x21c8);
        EXPECT(gbc.pc(), 0xbdce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdcd), 0xb3);
        // B3 010D
        gbc.setState(0xb576, 0x97f8, 0x12d0, 0xc241, 0x109e, 0x76f2, 0x1, 0x0);
        gbc.writeMem(0xb576, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x97f8);
        EXPECT(gbc.pc(), 0xb577);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb576), 0xb3);
        // B3 010E
        gbc.setState(0x58d7, 0x823f, 0xe350, 0x4bf7, 0xf812, 0xe362, 0x1, 0x0);
        gbc.writeMem(0x58d7, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x823f);
        EXPECT(gbc.pc(), 0x58d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 010F
        gbc.setState(0x508d, 0x84e5, 0x8240, 0x9581, 0xa34e, 0x74ab, 0x0, 0x1);
        gbc.writeMem(0x508d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x84e5);
        EXPECT(gbc.pc(), 0x508e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0110
        gbc.setState(0x3aee, 0x47ae, 0xb4c0, 0x14f0, 0xbd4c, 0x7a7, 0x1, 0x1);
        gbc.writeMem(0x3aee, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x47ae);
        EXPECT(gbc.pc(), 0x3aef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0111
        gbc.setState(0x62e9, 0xf697, 0x45e0, 0xbd50, 0x40a, 0x24b9, 0x0, 0x0);
        gbc.writeMem(0x62e9, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xf697);
        EXPECT(gbc.pc(), 0x62ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0112
        gbc.setState(0x3fa9, 0x4fa6, 0x50b0, 0xc335, 0xd9b6, 0x71ae, 0x1, 0x0);
        gbc.writeMem(0x3fa9, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x4fa6);
        EXPECT(gbc.pc(), 0x3faa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0113
        gbc.setState(0xbc2f, 0x75ef, 0x570, 0x3114, 0x26e6, 0xeb74, 0x0, 0x1);
        gbc.writeMem(0xbc2f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x75ef);
        EXPECT(gbc.pc(), 0xbc30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc2f), 0xb3);
        // B3 0114
        gbc.setState(0x339e, 0x799, 0x9600, 0x4f95, 0x4612, 0xbeae, 0x1, 0x1);
        gbc.writeMem(0x339e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x799);
        EXPECT(gbc.pc(), 0x339f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0115
        gbc.setState(0x5559, 0xd233, 0xb0c0, 0x4496, 0xc06d, 0x60e4, 0x0, 0x1);
        gbc.writeMem(0x5559, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xd233);
        EXPECT(gbc.pc(), 0x555a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0116
        gbc.setState(0xabcf, 0x3ccc, 0xd240, 0xb2, 0xe373, 0x18b1, 0x0, 0x0);
        gbc.writeMem(0xabcf, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x3ccc);
        EXPECT(gbc.pc(), 0xabd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabcf), 0xb3);
        // B3 0117
        gbc.setState(0xde6c, 0xad71, 0x4e0, 0xea50, 0x9edd, 0x80da, 0x1, 0x0);
        gbc.writeMem(0xde6c, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xad71);
        EXPECT(gbc.pc(), 0xde6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde6c), 0xb3);
        // B3 0118
        gbc.setState(0xb140, 0x217a, 0xcc60, 0xfc5f, 0xf9b8, 0x61d6, 0x1, 0x1);
        gbc.writeMem(0xb140, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x217a);
        EXPECT(gbc.pc(), 0xb141);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb140), 0xb3);
        // B3 0119
        gbc.setState(0x1c11, 0x2f66, 0x19e0, 0x9940, 0xf12b, 0x91ca, 0x0, 0x1);
        gbc.writeMem(0x1c11, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x2f66);
        EXPECT(gbc.pc(), 0x1c12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 011A
        gbc.setState(0x9955, 0x385f, 0xba70, 0x117b, 0x183a, 0x7a8d, 0x1, 0x0);
        gbc.writeMem(0x9955, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x385f);
        EXPECT(gbc.pc(), 0x9956);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9955), 0xb3);
        // B3 011B
        gbc.setState(0xb47d, 0xdd07, 0x5a70, 0x8c8e, 0x9548, 0x6882, 0x0, 0x0);
        gbc.writeMem(0xb47d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xdd07);
        EXPECT(gbc.pc(), 0xb47e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb47d), 0xb3);
        // B3 011C
        gbc.setState(0x2d75, 0x8b2d, 0xe570, 0x8323, 0x2beb, 0x1d8b, 0x0, 0x1);
        gbc.writeMem(0x2d75, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x8b2d);
        EXPECT(gbc.pc(), 0x2d76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 011D
        gbc.setState(0xa709, 0xa581, 0xf4a0, 0x36a8, 0xacdc, 0xa577, 0x1, 0x0);
        gbc.writeMem(0xa709, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xa581);
        EXPECT(gbc.pc(), 0xa70a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa709), 0xb3);
        // B3 011E
        gbc.setState(0x1d91, 0x7e2b, 0x8670, 0x4235, 0x5938, 0x7756, 0x1, 0x1);
        gbc.writeMem(0x1d91, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x7e2b);
        EXPECT(gbc.pc(), 0x1d92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 011F
        gbc.setState(0x3d6a, 0x7faf, 0xf70, 0xf0c3, 0x12a4, 0x3be8, 0x0, 0x0);
        gbc.writeMem(0x3d6a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x7faf);
        EXPECT(gbc.pc(), 0x3d6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0120
        gbc.setState(0xc57d, 0x82ba, 0xc330, 0xc26f, 0x69c2, 0x79eb, 0x0, 0x1);
        gbc.writeMem(0xc57d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x82ba);
        EXPECT(gbc.pc(), 0xc57e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc57d), 0xb3);
        // B3 0122
        gbc.setState(0xcc2f, 0x3aae, 0x5da0, 0xbb17, 0x410f, 0x2a2b, 0x0, 0x1);
        gbc.writeMem(0xcc2f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x3aae);
        EXPECT(gbc.pc(), 0xcc30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc2f), 0xb3);
        // B3 0123
        gbc.setState(0xe40f, 0x13a5, 0x2ac0, 0xbae7, 0xd4b2, 0xa0d2, 0x1, 0x1);
        gbc.writeMem(0xe40f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x13a5);
        EXPECT(gbc.pc(), 0xe410);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe40f), 0xb3);
        // B3 0124
        gbc.setState(0x7d8e, 0xe584, 0x6c80, 0xbc1d, 0xdfc9, 0x451d, 0x0, 0x0);
        gbc.writeMem(0x7d8e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xe584);
        EXPECT(gbc.pc(), 0x7d8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0125
        gbc.setState(0xa828, 0xb1b6, 0x8a10, 0xc741, 0x824a, 0x1bc1, 0x0, 0x0);
        gbc.writeMem(0xa828, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xb1b6);
        EXPECT(gbc.pc(), 0xa829);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa828), 0xb3);
        // B3 0126
        gbc.setState(0x7fff, 0x3f9d, 0x4d00, 0x630a, 0x23a3, 0x612c, 0x1, 0x1);
        gbc.writeMem(0x7fff, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x3f9d);
        EXPECT(gbc.pc(), 0x8000);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0127
        gbc.setState(0x40c3, 0x5449, 0xd760, 0xf30c, 0x8885, 0x2801, 0x1, 0x1);
        gbc.writeMem(0x40c3, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x5449);
        EXPECT(gbc.pc(), 0x40c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0128
        gbc.setState(0x6a44, 0xceed, 0x4ae0, 0xff0, 0xbc6e, 0xfc17, 0x1, 0x0);
        gbc.writeMem(0x6a44, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xceed);
        EXPECT(gbc.pc(), 0x6a45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0129
        gbc.setState(0x4ea8, 0x2e75, 0xc690, 0xc202, 0x1992, 0xd8a6, 0x0, 0x0);
        gbc.writeMem(0x4ea8, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x2e75);
        EXPECT(gbc.pc(), 0x4ea9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 012A
        gbc.setState(0x4cb7, 0x35c3, 0xe8d0, 0x518c, 0xbc21, 0xe47f, 0x0, 0x0);
        gbc.writeMem(0x4cb7, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x35c3);
        EXPECT(gbc.pc(), 0x4cb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 012B
        gbc.setState(0x8784, 0x1f23, 0x7960, 0xd545, 0xb56f, 0xad23, 0x1, 0x1);
        gbc.writeMem(0x8784, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x1f23);
        EXPECT(gbc.pc(), 0x8785);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8784), 0xb3);
        // B3 012C
        gbc.setState(0x3e, 0xa246, 0x89f0, 0xd23, 0x94d, 0x4444, 0x1, 0x0);
        gbc.writeMem(0x3e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xa246);
        EXPECT(gbc.pc(), 0x3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 012D
        gbc.setState(0x61fd, 0xba6f, 0x7cc0, 0x16a7, 0x299, 0xed07, 0x1, 0x1);
        gbc.writeMem(0x61fd, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xba6f);
        EXPECT(gbc.pc(), 0x61fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 012E
        gbc.setState(0xdd89, 0xb764, 0x3d20, 0x5124, 0x3233, 0x8f74, 0x1, 0x1);
        gbc.writeMem(0xdd89, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xb764);
        EXPECT(gbc.pc(), 0xdd8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd89), 0xb3);
        // B3 012F
        gbc.setState(0x78e0, 0xf42d, 0x4660, 0xc9eb, 0x65ca, 0xff57, 0x1, 0x0);
        gbc.writeMem(0x78e0, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xf42d);
        EXPECT(gbc.pc(), 0x78e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0130
        gbc.setState(0xb704, 0x87c3, 0x3510, 0xd8a5, 0x152a, 0xe615, 0x1, 0x1);
        gbc.writeMem(0xb704, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x87c3);
        EXPECT(gbc.pc(), 0xb705);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb704), 0xb3);
        // B3 0131
        gbc.setState(0xe721, 0x8a5, 0x2630, 0xa7e2, 0x1c3d, 0xa80d, 0x1, 0x0);
        gbc.writeMem(0xe721, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x8a5);
        EXPECT(gbc.pc(), 0xe722);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe721), 0xb3);
        // B3 0132
        gbc.setState(0x3bb2, 0xad42, 0xf7f0, 0xdbb4, 0xd5a9, 0x2f7, 0x1, 0x0);
        gbc.writeMem(0x3bb2, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xad42);
        EXPECT(gbc.pc(), 0x3bb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0134
        gbc.setState(0x425e, 0x2948, 0x5380, 0xe341, 0x24d5, 0xfe6c, 0x0, 0x1);
        gbc.writeMem(0x425e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x2948);
        EXPECT(gbc.pc(), 0x425f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0135
        gbc.setState(0x3f0c, 0x2c1d, 0x65b0, 0xed9d, 0x92a8, 0xa994, 0x1, 0x1);
        gbc.writeMem(0x3f0c, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x2c1d);
        EXPECT(gbc.pc(), 0x3f0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0136
        gbc.setState(0x64db, 0x2d7c, 0x1850, 0x88b3, 0x58eb, 0x2a10, 0x1, 0x1);
        gbc.writeMem(0x64db, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x2d7c);
        EXPECT(gbc.pc(), 0x64dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0137
        gbc.setState(0x19a7, 0x94ae, 0xd7f0, 0x4037, 0x9554, 0xd57d, 0x1, 0x0);
        gbc.writeMem(0x19a7, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x94ae);
        EXPECT(gbc.pc(), 0x19a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0138
        gbc.setState(0x2e85, 0x3210, 0xbd10, 0x370f, 0x3c7f, 0xe5, 0x0, 0x0);
        gbc.writeMem(0x2e85, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x3210);
        EXPECT(gbc.pc(), 0x2e86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0139
        gbc.setState(0xc7de, 0xc753, 0x9d80, 0x32bc, 0x624a, 0xf198, 0x1, 0x1);
        gbc.writeMem(0xc7de, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xc753);
        EXPECT(gbc.pc(), 0xc7df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7de), 0xb3);
        // B3 013A
        gbc.setState(0x9f5f, 0xe4d4, 0x4490, 0xe6ab, 0x577a, 0xdecf, 0x1, 0x1);
        gbc.writeMem(0x9f5f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xe4d4);
        EXPECT(gbc.pc(), 0x9f60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f5f), 0xb3);
        // B3 013B
        gbc.setState(0xab11, 0xd26f, 0xe950, 0x37f8, 0x93bb, 0x1f40, 0x0, 0x0);
        gbc.writeMem(0xab11, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xd26f);
        EXPECT(gbc.pc(), 0xab12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab11), 0xb3);
        // B3 013C
        gbc.setState(0xecf2, 0x7bfe, 0x3600, 0xcf54, 0x39ee, 0x765, 0x0, 0x0);
        gbc.writeMem(0xecf2, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x7bfe);
        EXPECT(gbc.pc(), 0xecf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecf2), 0xb3);
        // B3 013D
        gbc.setState(0xd7fd, 0x735d, 0x3b90, 0xd964, 0x9c9, 0xa383, 0x0, 0x0);
        gbc.writeMem(0xd7fd, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x735d);
        EXPECT(gbc.pc(), 0xd7fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7fd), 0xb3);
        // B3 013E
        gbc.setState(0x8055, 0x9a88, 0xe660, 0x4de2, 0x91e4, 0x934e, 0x0, 0x1);
        gbc.writeMem(0x8055, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x9a88);
        EXPECT(gbc.pc(), 0x8056);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8055), 0xb3);
        // B3 013F
        gbc.setState(0x9dd9, 0xc657, 0xdc00, 0x2c6, 0xa938, 0xc7cf, 0x1, 0x0);
        gbc.writeMem(0x9dd9, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xc657);
        EXPECT(gbc.pc(), 0x9dda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dd9), 0xb3);
        // B3 0140
        gbc.setState(0xbfa8, 0xa908, 0xc920, 0x8a98, 0x9810, 0xa5f9, 0x0, 0x0);
        gbc.writeMem(0xbfa8, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xa908);
        EXPECT(gbc.pc(), 0xbfa9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfa8), 0xb3);
        // B3 0141
        gbc.setState(0x24a6, 0xd77d, 0xe490, 0xf3ee, 0x4554, 0x8b22, 0x0, 0x1);
        gbc.writeMem(0x24a6, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xd77d);
        EXPECT(gbc.pc(), 0x24a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0142
        gbc.setState(0xc13e, 0xcc0f, 0xecf0, 0x9768, 0x4295, 0x256e, 0x0, 0x0);
        gbc.writeMem(0xc13e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xcc0f);
        EXPECT(gbc.pc(), 0xc13f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc13e), 0xb3);
        // B3 0143
        gbc.setState(0x175f, 0x6ce9, 0x1060, 0x9f1b, 0x12f4, 0x3a3a, 0x1, 0x0);
        gbc.writeMem(0x175f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x6ce9);
        EXPECT(gbc.pc(), 0x1760);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0144
        gbc.setState(0x2340, 0x3bf9, 0x79b0, 0x3526, 0xc85a, 0x5318, 0x1, 0x1);
        gbc.writeMem(0x2340, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x3bf9);
        EXPECT(gbc.pc(), 0x2341);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0145
        gbc.setState(0x98ae, 0xe803, 0xdab0, 0x2487, 0x169e, 0x427b, 0x1, 0x1);
        gbc.writeMem(0x98ae, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xe803);
        EXPECT(gbc.pc(), 0x98af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98ae), 0xb3);
        // B3 0146
        gbc.setState(0xa152, 0xa1cb, 0x32a0, 0x8c72, 0xd3c5, 0xa678, 0x1, 0x1);
        gbc.writeMem(0xa152, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xa1cb);
        EXPECT(gbc.pc(), 0xa153);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa152), 0xb3);
        // B3 0147
        gbc.setState(0xa957, 0x2d27, 0x8740, 0x1537, 0x1d0, 0x406e, 0x1, 0x0);
        gbc.writeMem(0xa957, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x2d27);
        EXPECT(gbc.pc(), 0xa958);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa957), 0xb3);
        // B3 0148
        gbc.setState(0x9030, 0xd29e, 0x7170, 0xfa28, 0x1a1, 0x139, 0x0, 0x0);
        gbc.writeMem(0x9030, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xd29e);
        EXPECT(gbc.pc(), 0x9031);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9030), 0xb3);
        // B3 0149
        gbc.setState(0x5aa1, 0x7b15, 0x1db0, 0x76c5, 0xcc9b, 0xa6ee, 0x0, 0x0);
        gbc.writeMem(0x5aa1, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x7b15);
        EXPECT(gbc.pc(), 0x5aa2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 014A
        gbc.setState(0x306e, 0x3529, 0x1090, 0x8b96, 0x97e, 0x1d5e, 0x0, 0x1);
        gbc.writeMem(0x306e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x3529);
        EXPECT(gbc.pc(), 0x306f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 014B
        gbc.setState(0x391f, 0x81d4, 0xb0c0, 0x361c, 0x2338, 0x155d, 0x1, 0x1);
        gbc.writeMem(0x391f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x81d4);
        EXPECT(gbc.pc(), 0x3920);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 014C
        gbc.setState(0x1faf, 0xc33e, 0x8ed0, 0x56bf, 0x8623, 0x830e, 0x1, 0x0);
        gbc.writeMem(0x1faf, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xc33e);
        EXPECT(gbc.pc(), 0x1fb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 014D
        gbc.setState(0x4ed6, 0x3120, 0x3ce0, 0x34c7, 0x6ce3, 0x45c6, 0x1, 0x1);
        gbc.writeMem(0x4ed6, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x3120);
        EXPECT(gbc.pc(), 0x4ed7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 014F
        gbc.setState(0x656c, 0x6948, 0x75c0, 0x618c, 0xb16, 0x92ac, 0x1, 0x1);
        gbc.writeMem(0x656c, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x6948);
        EXPECT(gbc.pc(), 0x656d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0150
        gbc.setState(0xcafe, 0x3df3, 0x2740, 0x356f, 0x8ae9, 0xe3e, 0x1, 0x1);
        gbc.writeMem(0xcafe, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x3df3);
        EXPECT(gbc.pc(), 0xcaff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcafe), 0xb3);
        // B3 0151
        gbc.setState(0x504b, 0x27ce, 0xa140, 0xfdeb, 0xbfc2, 0xc7e7, 0x1, 0x1);
        gbc.writeMem(0x504b, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x27ce);
        EXPECT(gbc.pc(), 0x504c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0152
        gbc.setState(0xe102, 0xf523, 0x33a0, 0x6d0d, 0x2319, 0x3f5f, 0x0, 0x1);
        gbc.writeMem(0xe102, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xf523);
        EXPECT(gbc.pc(), 0xe103);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe102), 0xb3);
        // B3 0153
        gbc.setState(0x1d5, 0xccee, 0xfd60, 0x490f, 0x884c, 0x3dfd, 0x1, 0x0);
        gbc.writeMem(0x1d5, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xccee);
        EXPECT(gbc.pc(), 0x1d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0154
        gbc.setState(0xa7e0, 0x9e60, 0x5aa0, 0x8d31, 0x3b5c, 0x1da, 0x0, 0x0);
        gbc.writeMem(0xa7e0, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x9e60);
        EXPECT(gbc.pc(), 0xa7e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7e0), 0xb3);
        // B3 0155
        gbc.setState(0x1d7a, 0x3b1d, 0x9d0, 0xc780, 0x1ac0, 0x82a9, 0x1, 0x1);
        gbc.writeMem(0x1d7a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x3b1d);
        EXPECT(gbc.pc(), 0x1d7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0156
        gbc.setState(0x56eb, 0x3dd5, 0xd3f0, 0x1635, 0x5cdf, 0x6865, 0x1, 0x0);
        gbc.writeMem(0x56eb, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x3dd5);
        EXPECT(gbc.pc(), 0x56ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0157
        gbc.setState(0x4fc8, 0x784b, 0x77b0, 0xee71, 0x515b, 0x9880, 0x1, 0x0);
        gbc.writeMem(0x4fc8, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x784b);
        EXPECT(gbc.pc(), 0x4fc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0158
        gbc.setState(0x5d41, 0xf3a4, 0x800, 0x592d, 0xb400, 0x67cc, 0x1, 0x0);
        gbc.writeMem(0x5d41, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xf3a4);
        EXPECT(gbc.pc(), 0x5d42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0159
        gbc.setState(0x6a9, 0x3062, 0x7980, 0xec82, 0xdb4, 0xd0ac, 0x0, 0x0);
        gbc.writeMem(0x6a9, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x3062);
        EXPECT(gbc.pc(), 0x6aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 015A
        gbc.setState(0x4a31, 0x889c, 0x5a40, 0x7468, 0xf45a, 0x4f5d, 0x0, 0x0);
        gbc.writeMem(0x4a31, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x889c);
        EXPECT(gbc.pc(), 0x4a32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 015B
        gbc.setState(0x289a, 0xdc71, 0x8870, 0x2431, 0x64cf, 0xac5c, 0x1, 0x1);
        gbc.writeMem(0x289a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xdc71);
        EXPECT(gbc.pc(), 0x289b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 015C
        gbc.setState(0x29c1, 0xe0c8, 0xe710, 0xd6ce, 0x7119, 0xe913, 0x0, 0x0);
        gbc.writeMem(0x29c1, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xe0c8);
        EXPECT(gbc.pc(), 0x29c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 015D
        gbc.setState(0x4a8e, 0x5317, 0xd230, 0x516f, 0x2576, 0xd2c0, 0x1, 0x0);
        gbc.writeMem(0x4a8e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x5317);
        EXPECT(gbc.pc(), 0x4a8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 015E
        gbc.setState(0x1d90, 0x51bc, 0xa7e0, 0xbb6e, 0xf5b4, 0x8864, 0x1, 0x0);
        gbc.writeMem(0x1d90, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x51bc);
        EXPECT(gbc.pc(), 0x1d91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 015F
        gbc.setState(0xe413, 0xdf61, 0x8e30, 0x6ea5, 0xf12e, 0x4498, 0x0, 0x1);
        gbc.writeMem(0xe413, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xdf61);
        EXPECT(gbc.pc(), 0xe414);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe413), 0xb3);
        // B3 0160
        gbc.setState(0x4a26, 0xe238, 0xc700, 0xc8b, 0xfbb8, 0x87e5, 0x1, 0x1);
        gbc.writeMem(0x4a26, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xe238);
        EXPECT(gbc.pc(), 0x4a27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0162
        gbc.setState(0x79ce, 0x75cb, 0x740, 0x1b8f, 0xac02, 0xb9ef, 0x0, 0x0);
        gbc.writeMem(0x79ce, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x75cb);
        EXPECT(gbc.pc(), 0x79cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0164
        gbc.setState(0xba42, 0x8e0b, 0xa10, 0x88e8, 0x19e8, 0xc0d5, 0x0, 0x1);
        gbc.writeMem(0xba42, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x8e0b);
        EXPECT(gbc.pc(), 0xba43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba42), 0xb3);
        // B3 0165
        gbc.setState(0xd43d, 0x882, 0x14c0, 0xffbd, 0x1a2e, 0x860e, 0x1, 0x0);
        gbc.writeMem(0xd43d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x882);
        EXPECT(gbc.pc(), 0xd43e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd43d), 0xb3);
        // B3 0166
        gbc.setState(0xb34d, 0x33e1, 0x9680, 0xcd2d, 0x136d, 0xf620, 0x0, 0x1);
        gbc.writeMem(0xb34d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x33e1);
        EXPECT(gbc.pc(), 0xb34e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb34d), 0xb3);
        // B3 0167
        gbc.setState(0x1a4e, 0xf7bd, 0xadf0, 0xbc4f, 0x5180, 0xf055, 0x1, 0x0);
        gbc.writeMem(0x1a4e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xf7bd);
        EXPECT(gbc.pc(), 0x1a4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0168
        gbc.setState(0xe393, 0x8bdc, 0xefd0, 0xc855, 0x7e82, 0x843, 0x0, 0x0);
        gbc.writeMem(0xe393, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x8bdc);
        EXPECT(gbc.pc(), 0xe394);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe393), 0xb3);
        // B3 0169
        gbc.setState(0x92a8, 0x2321, 0xfa10, 0x934b, 0x5a0d, 0xf74f, 0x0, 0x0);
        gbc.writeMem(0x92a8, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x2321);
        EXPECT(gbc.pc(), 0x92a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92a8), 0xb3);
        // B3 016A
        gbc.setState(0xd6ce, 0xec6c, 0x3a80, 0xf883, 0x28ba, 0x40c9, 0x1, 0x0);
        gbc.writeMem(0xd6ce, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xec6c);
        EXPECT(gbc.pc(), 0xd6cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6ce), 0xb3);
        // B3 016B
        gbc.setState(0x3726, 0xcfbd, 0xe1c0, 0x4a5e, 0x1372, 0x3dc3, 0x1, 0x0);
        gbc.writeMem(0x3726, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xcfbd);
        EXPECT(gbc.pc(), 0x3727);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 016C
        gbc.setState(0xcb0e, 0x7846, 0x5f30, 0x1245, 0x3792, 0xde2d, 0x1, 0x1);
        gbc.writeMem(0xcb0e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x7846);
        EXPECT(gbc.pc(), 0xcb0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb0e), 0xb3);
        // B3 016D
        gbc.setState(0x2baf, 0xe73f, 0xecf0, 0x8933, 0x4cad, 0x55b5, 0x1, 0x0);
        gbc.writeMem(0x2baf, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xe73f);
        EXPECT(gbc.pc(), 0x2bb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 016E
        gbc.setState(0xd27, 0x8488, 0x3be0, 0xaa10, 0xff9, 0x3afe, 0x1, 0x0);
        gbc.writeMem(0xd27, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x8488);
        EXPECT(gbc.pc(), 0xd28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 016F
        gbc.setState(0xe3a8, 0x4004, 0x87d0, 0x5c3f, 0xcbd3, 0x5ffb, 0x0, 0x0);
        gbc.writeMem(0xe3a8, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x4004);
        EXPECT(gbc.pc(), 0xe3a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3a8), 0xb3);
        // B3 0170
        gbc.setState(0xe508, 0x8c34, 0x9200, 0x704e, 0xc1aa, 0x5447, 0x1, 0x0);
        gbc.writeMem(0xe508, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x8c34);
        EXPECT(gbc.pc(), 0xe509);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe508), 0xb3);
        // B3 0171
        gbc.setState(0x877d, 0x6eb9, 0x2060, 0x3ef5, 0x799b, 0x2abc, 0x0, 0x1);
        gbc.writeMem(0x877d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x6eb9);
        EXPECT(gbc.pc(), 0x877e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x877d), 0xb3);
        // B3 0173
        gbc.setState(0x3127, 0xa56d, 0x4120, 0xfb9e, 0x9a0c, 0x47af, 0x0, 0x0);
        gbc.writeMem(0x3127, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xa56d);
        EXPECT(gbc.pc(), 0x3128);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0174
        gbc.setState(0xd800, 0xdb3a, 0x9940, 0x5d9f, 0xa1cc, 0x4580, 0x0, 0x0);
        gbc.writeMem(0xd800, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xdb3a);
        EXPECT(gbc.pc(), 0xd801);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd800), 0xb3);
        // B3 0175
        gbc.setState(0xcaf0, 0x9aa9, 0x10d0, 0xe3ab, 0x6469, 0x7358, 0x1, 0x1);
        gbc.writeMem(0xcaf0, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x9aa9);
        EXPECT(gbc.pc(), 0xcaf1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcaf0), 0xb3);
        // B3 0176
        gbc.setState(0x53c, 0x9831, 0x1e10, 0xaaf4, 0xbed4, 0x2854, 0x1, 0x0);
        gbc.writeMem(0x53c, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x9831);
        EXPECT(gbc.pc(), 0x53d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0177
        gbc.setState(0xb53e, 0xa41e, 0x52d0, 0x18c4, 0x72c6, 0x3631, 0x0, 0x0);
        gbc.writeMem(0xb53e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xa41e);
        EXPECT(gbc.pc(), 0xb53f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb53e), 0xb3);
        // B3 0178
        gbc.setState(0x9e9, 0x3469, 0xa30, 0xa64c, 0x4e56, 0xb27e, 0x1, 0x0);
        gbc.writeMem(0x9e9, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x3469);
        EXPECT(gbc.pc(), 0x9ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0179
        gbc.setState(0x2f20, 0xe674, 0x8c90, 0x2979, 0xe532, 0xb386, 0x1, 0x0);
        gbc.writeMem(0x2f20, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xe674);
        EXPECT(gbc.pc(), 0x2f21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 017A
        gbc.setState(0x12e8, 0xf3e4, 0x3450, 0xe75, 0x124d, 0x559a, 0x1, 0x0);
        gbc.writeMem(0x12e8, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xf3e4);
        EXPECT(gbc.pc(), 0x12e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 017B
        gbc.setState(0x8449, 0x3e81, 0x3e90, 0x22c7, 0x66f1, 0xe4d6, 0x0, 0x1);
        gbc.writeMem(0x8449, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x3e81);
        EXPECT(gbc.pc(), 0x844a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8449), 0xb3);
        // B3 017C
        gbc.setState(0x98b6, 0x8754, 0x79e0, 0xaf0e, 0x1165, 0xc2cd, 0x0, 0x1);
        gbc.writeMem(0x98b6, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x8754);
        EXPECT(gbc.pc(), 0x98b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98b6), 0xb3);
        // B3 017D
        gbc.setState(0xb0ac, 0x4160, 0x3dd0, 0x617d, 0x742b, 0xd6a8, 0x1, 0x1);
        gbc.writeMem(0xb0ac, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x4160);
        EXPECT(gbc.pc(), 0xb0ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0ac), 0xb3);
        // B3 017E
        gbc.setState(0xab4a, 0x89ad, 0x8f30, 0xf29a, 0xd5e1, 0x3966, 0x0, 0x1);
        gbc.writeMem(0xab4a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x89ad);
        EXPECT(gbc.pc(), 0xab4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab4a), 0xb3);
        // B3 017F
        gbc.setState(0x409a, 0xed75, 0xbda0, 0x462f, 0xbe04, 0xb17a, 0x1, 0x1);
        gbc.writeMem(0x409a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xed75);
        EXPECT(gbc.pc(), 0x409b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0180
        gbc.setState(0x1a0a, 0x2163, 0x5ba0, 0xa884, 0x3cf, 0x40a0, 0x0, 0x0);
        gbc.writeMem(0x1a0a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x2163);
        EXPECT(gbc.pc(), 0x1a0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0181
        gbc.setState(0xa57b, 0xfa94, 0x7b30, 0x4213, 0x621d, 0x76e2, 0x0, 0x0);
        gbc.writeMem(0xa57b, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xfa94);
        EXPECT(gbc.pc(), 0xa57c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa57b), 0xb3);
        // B3 0182
        gbc.setState(0xe4de, 0x244f, 0x3800, 0x8753, 0xa5ea, 0x1896, 0x0, 0x0);
        gbc.writeMem(0xe4de, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x244f);
        EXPECT(gbc.pc(), 0xe4df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4de), 0xb3);
        // B3 0183
        gbc.setState(0x20ec, 0xbb09, 0xe570, 0x7017, 0x4fc9, 0xba61, 0x0, 0x0);
        gbc.writeMem(0x20ec, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xbb09);
        EXPECT(gbc.pc(), 0x20ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0184
        gbc.setState(0xd66b, 0x7dd2, 0x760, 0x3973, 0xf176, 0xafa7, 0x1, 0x0);
        gbc.writeMem(0xd66b, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x7dd2);
        EXPECT(gbc.pc(), 0xd66c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd66b), 0xb3);
        // B3 0185
        gbc.setState(0x263d, 0x8d51, 0x62a0, 0x9082, 0x66df, 0xc0cd, 0x1, 0x1);
        gbc.writeMem(0x263d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x8d51);
        EXPECT(gbc.pc(), 0x263e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0187
        gbc.setState(0xab9d, 0x5f68, 0xe7e0, 0xccd3, 0xdc23, 0x704c, 0x1, 0x1);
        gbc.writeMem(0xab9d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x5f68);
        EXPECT(gbc.pc(), 0xab9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab9d), 0xb3);
        // B3 0188
        gbc.setState(0x9e3a, 0xd173, 0x9b50, 0xf49c, 0x68ee, 0xc5aa, 0x1, 0x1);
        gbc.writeMem(0x9e3a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xd173);
        EXPECT(gbc.pc(), 0x9e3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e3a), 0xb3);
        // B3 0189
        gbc.setState(0xe1e6, 0xe0ac, 0xc360, 0x1324, 0xc4d2, 0x6e26, 0x0, 0x1);
        gbc.writeMem(0xe1e6, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xe0ac);
        EXPECT(gbc.pc(), 0xe1e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1e6), 0xb3);
        // B3 018A
        gbc.setState(0x9cfa, 0x8f2e, 0x3530, 0x5dc4, 0x6666, 0xbff5, 0x0, 0x1);
        gbc.writeMem(0x9cfa, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x8f2e);
        EXPECT(gbc.pc(), 0x9cfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cfa), 0xb3);
        // B3 018B
        gbc.setState(0xe60c, 0xbb51, 0x1500, 0xad87, 0x7df4, 0x5e01, 0x1, 0x0);
        gbc.writeMem(0xe60c, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xbb51);
        EXPECT(gbc.pc(), 0xe60d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe60c), 0xb3);
        // B3 018C
        gbc.setState(0x4314, 0x36eb, 0x2ac0, 0x58ec, 0xfdae, 0x9086, 0x1, 0x0);
        gbc.writeMem(0x4314, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x36eb);
        EXPECT(gbc.pc(), 0x4315);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 018D
        gbc.setState(0xbb37, 0xe03c, 0x3fa0, 0xba80, 0x36b, 0x3a40, 0x1, 0x0);
        gbc.writeMem(0xbb37, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xe03c);
        EXPECT(gbc.pc(), 0xbb38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb37), 0xb3);
        // B3 018E
        gbc.setState(0x54a0, 0x1c93, 0xbae0, 0x7b8f, 0xefb7, 0x673, 0x0, 0x0);
        gbc.writeMem(0x54a0, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x1c93);
        EXPECT(gbc.pc(), 0x54a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 018F
        gbc.setState(0xa9e7, 0xb916, 0x8d10, 0xdc8a, 0xa35f, 0x1835, 0x0, 0x1);
        gbc.writeMem(0xa9e7, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xb916);
        EXPECT(gbc.pc(), 0xa9e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9e7), 0xb3);
        // B3 0190
        gbc.setState(0x9bf8, 0x91e5, 0xf7d0, 0x8015, 0x453b, 0xf479, 0x1, 0x1);
        gbc.writeMem(0x9bf8, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x91e5);
        EXPECT(gbc.pc(), 0x9bf9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bf8), 0xb3);
        // B3 0191
        gbc.setState(0x1d77, 0xf4da, 0x4120, 0x2b04, 0x7013, 0xee81, 0x1, 0x1);
        gbc.writeMem(0x1d77, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xf4da);
        EXPECT(gbc.pc(), 0x1d78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0192
        gbc.setState(0x2ead, 0xc181, 0xe010, 0xeb5e, 0x19d6, 0xb463, 0x1, 0x0);
        gbc.writeMem(0x2ead, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xc181);
        EXPECT(gbc.pc(), 0x2eae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0193
        gbc.setState(0x7b75, 0x38c, 0x18d0, 0xea9c, 0xd90f, 0x3904, 0x1, 0x1);
        gbc.writeMem(0x7b75, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x38c);
        EXPECT(gbc.pc(), 0x7b76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0194
        gbc.setState(0xdad3, 0x2258, 0x190, 0x684a, 0xacdc, 0x2830, 0x1, 0x1);
        gbc.writeMem(0xdad3, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x2258);
        EXPECT(gbc.pc(), 0xdad4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdad3), 0xb3);
        // B3 0195
        gbc.setState(0xc31d, 0xa359, 0x5600, 0xea57, 0x4ec7, 0xe618, 0x1, 0x1);
        gbc.writeMem(0xc31d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xa359);
        EXPECT(gbc.pc(), 0xc31e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc31d), 0xb3);
        // B3 0196
        gbc.setState(0x32db, 0x5b00, 0x5070, 0x9ce, 0x3778, 0x2345, 0x0, 0x0);
        gbc.writeMem(0x32db, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x5b00);
        EXPECT(gbc.pc(), 0x32dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0197
        gbc.setState(0x874f, 0x4460, 0xc2d0, 0x2c3b, 0x1816, 0xcadf, 0x1, 0x0);
        gbc.writeMem(0x874f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x4460);
        EXPECT(gbc.pc(), 0x8750);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x874f), 0xb3);
        // B3 0199
        gbc.setState(0x1bda, 0xcb6e, 0x3e40, 0xa674, 0xccb7, 0x1e37, 0x0, 0x0);
        gbc.writeMem(0x1bda, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xcb6e);
        EXPECT(gbc.pc(), 0x1bdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 019A
        gbc.setState(0xc025, 0xc364, 0x28e0, 0x41fc, 0x43ad, 0x42c9, 0x0, 0x1);
        gbc.writeMem(0xc025, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xc364);
        EXPECT(gbc.pc(), 0xc026);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc025), 0xb3);
        // B3 019B
        gbc.setState(0x6a9c, 0x8f81, 0xda30, 0xb01a, 0x474d, 0xf905, 0x1, 0x0);
        gbc.writeMem(0x6a9c, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x8f81);
        EXPECT(gbc.pc(), 0x6a9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 019C
        gbc.setState(0xd451, 0x3d13, 0xcbe0, 0x9603, 0x6265, 0x1698, 0x0, 0x1);
        gbc.writeMem(0xd451, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x3d13);
        EXPECT(gbc.pc(), 0xd452);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd451), 0xb3);
        // B3 019D
        gbc.setState(0xc3e5, 0x5441, 0x9290, 0x34dd, 0x3da0, 0x738a, 0x0, 0x0);
        gbc.writeMem(0xc3e5, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x5441);
        EXPECT(gbc.pc(), 0xc3e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3e5), 0xb3);
        // B3 019E
        gbc.setState(0x4879, 0x34d3, 0xee0, 0x2d69, 0x7551, 0xcc7e, 0x0, 0x0);
        gbc.writeMem(0x4879, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x34d3);
        EXPECT(gbc.pc(), 0x487a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 019F
        gbc.setState(0xaafa, 0x2922, 0x7fa0, 0x6d24, 0x1ddc, 0x6e96, 0x1, 0x0);
        gbc.writeMem(0xaafa, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x2922);
        EXPECT(gbc.pc(), 0xaafb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaafa), 0xb3);
        // B3 01A0
        gbc.setState(0xd7dd, 0x205a, 0xcb30, 0xd8ce, 0x3e7a, 0xbac, 0x1, 0x0);
        gbc.writeMem(0xd7dd, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x205a);
        EXPECT(gbc.pc(), 0xd7de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7dd), 0xb3);
        // B3 01A1
        gbc.setState(0x1e2, 0x767f, 0xef60, 0xe6a4, 0x6910, 0x9bff, 0x1, 0x0);
        gbc.writeMem(0x1e2, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x767f);
        EXPECT(gbc.pc(), 0x1e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01A2
        gbc.setState(0xcd5e, 0xaa5b, 0xda10, 0xef17, 0x95c9, 0xec5a, 0x1, 0x0);
        gbc.writeMem(0xcd5e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xaa5b);
        EXPECT(gbc.pc(), 0xcd5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd5e), 0xb3);
        // B3 01A3
        gbc.setState(0x6aaf, 0x5895, 0x2ee0, 0x2578, 0x8b10, 0x109a, 0x0, 0x0);
        gbc.writeMem(0x6aaf, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x5895);
        EXPECT(gbc.pc(), 0x6ab0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01A4
        gbc.setState(0xb7a5, 0x509c, 0x1030, 0x36e3, 0xf13d, 0xdaa4, 0x1, 0x1);
        gbc.writeMem(0xb7a5, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x509c);
        EXPECT(gbc.pc(), 0xb7a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7a5), 0xb3);
        // B3 01A5
        gbc.setState(0x1dfc, 0x89cb, 0xc150, 0xa995, 0xc19e, 0xa3f, 0x0, 0x0);
        gbc.writeMem(0x1dfc, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x89cb);
        EXPECT(gbc.pc(), 0x1dfd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01A6
        gbc.setState(0xecb3, 0xd251, 0xad30, 0x94cf, 0x25f4, 0xf6b4, 0x0, 0x1);
        gbc.writeMem(0xecb3, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xd251);
        EXPECT(gbc.pc(), 0xecb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecb3), 0xb3);
        // B3 01A8
        gbc.setState(0x7e5a, 0x9b56, 0x7ec0, 0x6623, 0xe7dd, 0xafb2, 0x1, 0x1);
        gbc.writeMem(0x7e5a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x9b56);
        EXPECT(gbc.pc(), 0x7e5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01A9
        gbc.setState(0xb33, 0x5232, 0x8640, 0xbbfa, 0xcfd2, 0x7f23, 0x0, 0x1);
        gbc.writeMem(0xb33, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x5232);
        EXPECT(gbc.pc(), 0xb34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01AA
        gbc.setState(0xe45, 0xa92e, 0x1590, 0x9dcd, 0x5d42, 0x639e, 0x1, 0x1);
        gbc.writeMem(0xe45, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xa92e);
        EXPECT(gbc.pc(), 0xe46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01AB
        gbc.setState(0x2c57, 0xd9fa, 0x3a20, 0xae1e, 0x645e, 0xe125, 0x0, 0x1);
        gbc.writeMem(0x2c57, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xd9fa);
        EXPECT(gbc.pc(), 0x2c58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01AC
        gbc.setState(0xb6a3, 0xefab, 0xc450, 0x838f, 0xbcb6, 0x46c8, 0x1, 0x0);
        gbc.writeMem(0xb6a3, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xefab);
        EXPECT(gbc.pc(), 0xb6a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6a3), 0xb3);
        // B3 01AD
        gbc.setState(0xd718, 0x3f45, 0x4870, 0x9af7, 0xa70, 0xf8e, 0x0, 0x0);
        gbc.writeMem(0xd718, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x3f45);
        EXPECT(gbc.pc(), 0xd719);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd718), 0xb3);
        // B3 01AE
        gbc.setState(0xbe0c, 0xc232, 0xf4c0, 0xde62, 0x158b, 0x5b1f, 0x1, 0x0);
        gbc.writeMem(0xbe0c, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xc232);
        EXPECT(gbc.pc(), 0xbe0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe0c), 0xb3);
        // B3 01AF
        gbc.setState(0x10ef, 0xe2dc, 0x9860, 0xb528, 0x57fe, 0xebc4, 0x0, 0x0);
        gbc.writeMem(0x10ef, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xe2dc);
        EXPECT(gbc.pc(), 0x10f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01B0
        gbc.setState(0xe31c, 0x42a8, 0x4d70, 0x5bf2, 0x8115, 0xcb8a, 0x0, 0x1);
        gbc.writeMem(0xe31c, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x42a8);
        EXPECT(gbc.pc(), 0xe31d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe31c), 0xb3);
        // B3 01B1
        gbc.setState(0x82, 0x191a, 0xa6d0, 0x7216, 0xf791, 0x5615, 0x1, 0x0);
        gbc.writeMem(0x82, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x191a);
        EXPECT(gbc.pc(), 0x83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01B2
        gbc.setState(0x9953, 0x12e5, 0x7e30, 0xd8d8, 0x4b3c, 0xf7bf, 0x1, 0x1);
        gbc.writeMem(0x9953, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x12e5);
        EXPECT(gbc.pc(), 0x9954);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9953), 0xb3);
        // B3 01B3
        gbc.setState(0xe5ae, 0x48f2, 0x1180, 0xddfb, 0x62af, 0xc61, 0x1, 0x1);
        gbc.writeMem(0xe5ae, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x48f2);
        EXPECT(gbc.pc(), 0xe5af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5ae), 0xb3);
        // B3 01B4
        gbc.setState(0x75eb, 0x346b, 0x8a10, 0xa298, 0xe846, 0xdf75, 0x1, 0x1);
        gbc.writeMem(0x75eb, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x346b);
        EXPECT(gbc.pc(), 0x75ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01B5
        gbc.setState(0xd64, 0x84f4, 0x35d0, 0x179f, 0x83ff, 0xc859, 0x1, 0x1);
        gbc.writeMem(0xd64, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x84f4);
        EXPECT(gbc.pc(), 0xd65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01B6
        gbc.setState(0x719b, 0xac27, 0x2580, 0xd71b, 0x6fb7, 0x6d5c, 0x1, 0x0);
        gbc.writeMem(0x719b, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xac27);
        EXPECT(gbc.pc(), 0x719c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01B7
        gbc.setState(0x1131, 0x3085, 0xee10, 0xf408, 0x457f, 0x42c1, 0x1, 0x0);
        gbc.writeMem(0x1131, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x3085);
        EXPECT(gbc.pc(), 0x1132);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01B8
        gbc.setState(0xc6c7, 0x2957, 0xdf20, 0x312c, 0x2c79, 0x775f, 0x1, 0x1);
        gbc.writeMem(0xc6c7, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x2957);
        EXPECT(gbc.pc(), 0xc6c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6c7), 0xb3);
        // B3 01B9
        gbc.setState(0x6614, 0x9ccd, 0x73e0, 0xb3c3, 0x8308, 0xe022, 0x0, 0x0);
        gbc.writeMem(0x6614, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x9ccd);
        EXPECT(gbc.pc(), 0x6615);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01BA
        gbc.setState(0x19c, 0xa9b1, 0x27c0, 0x3474, 0xf8a5, 0xb5ac, 0x1, 0x1);
        gbc.writeMem(0x19c, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xa9b1);
        EXPECT(gbc.pc(), 0x19d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01BB
        gbc.setState(0x2a4a, 0x9769, 0xbc10, 0xf81a, 0x68b0, 0xc18d, 0x1, 0x1);
        gbc.writeMem(0x2a4a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x9769);
        EXPECT(gbc.pc(), 0x2a4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01BC
        gbc.setState(0x60ee, 0xb0c2, 0x6a20, 0x79f7, 0x8d9c, 0x6308, 0x1, 0x0);
        gbc.writeMem(0x60ee, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xb0c2);
        EXPECT(gbc.pc(), 0x60ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01BD
        gbc.setState(0x1cd5, 0x6689, 0x180, 0xa188, 0xba83, 0x3136, 0x0, 0x1);
        gbc.writeMem(0x1cd5, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x6689);
        EXPECT(gbc.pc(), 0x1cd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01BE
        gbc.setState(0x55a, 0x8df5, 0x6560, 0x4920, 0xe443, 0xe3a6, 0x1, 0x1);
        gbc.writeMem(0x55a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x8df5);
        EXPECT(gbc.pc(), 0x55b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01BF
        gbc.setState(0x22e9, 0x873a, 0x8040, 0x8ba8, 0xa09e, 0x3380, 0x0, 0x0);
        gbc.writeMem(0x22e9, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x873a);
        EXPECT(gbc.pc(), 0x22ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01C0
        gbc.setState(0x50b7, 0xbcaf, 0xd210, 0x4a3, 0x4971, 0x5c94, 0x1, 0x1);
        gbc.writeMem(0x50b7, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xbcaf);
        EXPECT(gbc.pc(), 0x50b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01C1
        gbc.setState(0x5d81, 0xc22b, 0x48b0, 0x9cff, 0x9863, 0x2ea8, 0x0, 0x0);
        gbc.writeMem(0x5d81, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xc22b);
        EXPECT(gbc.pc(), 0x5d82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01C2
        gbc.setState(0x17fd, 0xe998, 0x6810, 0x1cdd, 0x6ddf, 0x6e5b, 0x0, 0x1);
        gbc.writeMem(0x17fd, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xe998);
        EXPECT(gbc.pc(), 0x17fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01C3
        gbc.setState(0x372, 0x30de, 0xca50, 0xb919, 0xd2ec, 0x6985, 0x0, 0x1);
        gbc.writeMem(0x372, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x30de);
        EXPECT(gbc.pc(), 0x373);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01C4
        gbc.setState(0x2a03, 0x3da8, 0x94a0, 0x330e, 0x7dc5, 0x532d, 0x0, 0x0);
        gbc.writeMem(0x2a03, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x3da8);
        EXPECT(gbc.pc(), 0x2a04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01C5
        gbc.setState(0x184c, 0x8c8e, 0xeff0, 0x7712, 0xef8a, 0xfae4, 0x1, 0x0);
        gbc.writeMem(0x184c, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x8c8e);
        EXPECT(gbc.pc(), 0x184d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01C6
        gbc.setState(0xddd, 0xc6d8, 0xd4f0, 0x645d, 0x8514, 0xc2e0, 0x1, 0x0);
        gbc.writeMem(0xddd, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xc6d8);
        EXPECT(gbc.pc(), 0xdde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01C7
        gbc.setState(0xe291, 0x7c6c, 0x1200, 0xf5a8, 0x31c3, 0xe431, 0x1, 0x1);
        gbc.writeMem(0xe291, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x7c6c);
        EXPECT(gbc.pc(), 0xe292);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe291), 0xb3);
        // B3 01C9
        gbc.setState(0x695b, 0xb926, 0xa810, 0x46ff, 0x292d, 0x8fb6, 0x0, 0x0);
        gbc.writeMem(0x695b, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xb926);
        EXPECT(gbc.pc(), 0x695c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01CA
        gbc.setState(0xbca4, 0x9e1f, 0x30a0, 0xa096, 0xbe27, 0xba7a, 0x1, 0x0);
        gbc.writeMem(0xbca4, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x9e1f);
        EXPECT(gbc.pc(), 0xbca5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbca4), 0xb3);
        // B3 01CB
        gbc.setState(0x4fde, 0x5584, 0xd480, 0x39f3, 0xa4d1, 0xa6bd, 0x1, 0x1);
        gbc.writeMem(0x4fde, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x5584);
        EXPECT(gbc.pc(), 0x4fdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01CC
        gbc.setState(0x5e67, 0x85a9, 0x4fa0, 0xaf09, 0x413a, 0xb789, 0x1, 0x0);
        gbc.writeMem(0x5e67, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x85a9);
        EXPECT(gbc.pc(), 0x5e68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01CD
        gbc.setState(0x7e17, 0x6a01, 0xb1a0, 0xf984, 0x4d2d, 0x4ebd, 0x1, 0x0);
        gbc.writeMem(0x7e17, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x6a01);
        EXPECT(gbc.pc(), 0x7e18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01CE
        gbc.setState(0xe150, 0xca23, 0x30, 0xb846, 0x2009, 0xcbad, 0x0, 0x0);
        gbc.writeMem(0xe150, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xca23);
        EXPECT(gbc.pc(), 0xe151);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe150), 0xb3);
        // B3 01CF
        gbc.setState(0x25d0, 0xf6cd, 0xd370, 0x3453, 0x6bd, 0xcd95, 0x1, 0x1);
        gbc.writeMem(0x25d0, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xf6cd);
        EXPECT(gbc.pc(), 0x25d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01D0
        gbc.setState(0x20b3, 0x360e, 0xb710, 0x55f9, 0x5836, 0x4255, 0x0, 0x0);
        gbc.writeMem(0x20b3, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x360e);
        EXPECT(gbc.pc(), 0x20b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01D3
        gbc.setState(0x30a5, 0x24a0, 0x5410, 0x7dca, 0x47f1, 0xdef4, 0x1, 0x1);
        gbc.writeMem(0x30a5, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x24a0);
        EXPECT(gbc.pc(), 0x30a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01D4
        gbc.setState(0x9696, 0xc07, 0x2160, 0x4d9, 0x93f, 0xf2f7, 0x0, 0x1);
        gbc.writeMem(0x9696, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xc07);
        EXPECT(gbc.pc(), 0x9697);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9696), 0xb3);
        // B3 01D5
        gbc.setState(0xc4d2, 0xe88c, 0xc0f0, 0x7d55, 0x6091, 0xb8e5, 0x0, 0x1);
        gbc.writeMem(0xc4d2, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xe88c);
        EXPECT(gbc.pc(), 0xc4d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4d2), 0xb3);
        // B3 01D6
        gbc.setState(0x190d, 0xa09e, 0x2ff0, 0x2b3b, 0xdd91, 0x93d1, 0x0, 0x0);
        gbc.writeMem(0x190d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xa09e);
        EXPECT(gbc.pc(), 0x190e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01D7
        gbc.setState(0xce31, 0xdde5, 0xda30, 0xcbf6, 0xcf4e, 0x44f2, 0x1, 0x1);
        gbc.writeMem(0xce31, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xdde5);
        EXPECT(gbc.pc(), 0xce32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce31), 0xb3);
        // B3 01D8
        gbc.setState(0xbf22, 0xf641, 0x88d0, 0xea7f, 0xff1c, 0x46fe, 0x0, 0x0);
        gbc.writeMem(0xbf22, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xf641);
        EXPECT(gbc.pc(), 0xbf23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf22), 0xb3);
        // B3 01D9
        gbc.setState(0xd7c5, 0x1321, 0x8120, 0x676e, 0xe1c0, 0xe84b, 0x1, 0x0);
        gbc.writeMem(0xd7c5, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x1321);
        EXPECT(gbc.pc(), 0xd7c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7c5), 0xb3);
        // B3 01DA
        gbc.setState(0x2907, 0x17e8, 0xd600, 0x851c, 0x34ee, 0x8ad2, 0x1, 0x1);
        gbc.writeMem(0x2907, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x17e8);
        EXPECT(gbc.pc(), 0x2908);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01DB
        gbc.setState(0x93f, 0x1964, 0x1bd0, 0xb4a1, 0xec5a, 0xa9bf, 0x0, 0x0);
        gbc.writeMem(0x93f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x1964);
        EXPECT(gbc.pc(), 0x940);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01DC
        gbc.setState(0x71ec, 0xd016, 0xf8a0, 0xe51f, 0x6e02, 0x6aef, 0x1, 0x1);
        gbc.writeMem(0x71ec, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xd016);
        EXPECT(gbc.pc(), 0x71ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01DD
        gbc.setState(0x595, 0xd08e, 0x9780, 0x5fef, 0x9bfc, 0xdb76, 0x1, 0x1);
        gbc.writeMem(0x595, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xd08e);
        EXPECT(gbc.pc(), 0x596);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01DE
        gbc.setState(0x4ff, 0xe715, 0xd590, 0x18d, 0x845, 0xb5f4, 0x1, 0x0);
        gbc.writeMem(0x4ff, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xe715);
        EXPECT(gbc.pc(), 0x500);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01DF
        gbc.setState(0x840d, 0xbd67, 0x470, 0x8e62, 0x62db, 0x8476, 0x1, 0x0);
        gbc.writeMem(0x840d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xbd67);
        EXPECT(gbc.pc(), 0x840e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x840d), 0xb3);
        // B3 01E0
        gbc.setState(0x6221, 0xec23, 0xcb90, 0x9363, 0xa3e7, 0x2fb2, 0x1, 0x0);
        gbc.writeMem(0x6221, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xec23);
        EXPECT(gbc.pc(), 0x6222);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01E1
        gbc.setState(0x9a4c, 0xfb9, 0xfba0, 0x1d64, 0xd137, 0xa0df, 0x1, 0x1);
        gbc.writeMem(0x9a4c, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xfb9);
        EXPECT(gbc.pc(), 0x9a4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a4c), 0xb3);
        // B3 01E2
        gbc.setState(0x7f0f, 0x5fee, 0x5800, 0xea4c, 0xcf04, 0x771a, 0x1, 0x1);
        gbc.writeMem(0x7f0f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x5fee);
        EXPECT(gbc.pc(), 0x7f10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01E3
        gbc.setState(0xa8b5, 0xf126, 0xfd70, 0x1feb, 0x5675, 0x316, 0x0, 0x1);
        gbc.writeMem(0xa8b5, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xf126);
        EXPECT(gbc.pc(), 0xa8b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8b5), 0xb3);
        // B3 01E4
        gbc.setState(0x8939, 0xf4c, 0x9f30, 0x7e9a, 0x190, 0xfe56, 0x1, 0x1);
        gbc.writeMem(0x8939, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xf4c);
        EXPECT(gbc.pc(), 0x893a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8939), 0xb3);
        // B3 01E5
        gbc.setState(0x2358, 0x4f4, 0x22b0, 0x9a60, 0x8cd3, 0xf6de, 0x0, 0x0);
        gbc.writeMem(0x2358, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x4f4);
        EXPECT(gbc.pc(), 0x2359);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01E6
        gbc.setState(0x69a5, 0x3a26, 0x6b80, 0xd68d, 0xbbe8, 0x7e8d, 0x0, 0x0);
        gbc.writeMem(0x69a5, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x3a26);
        EXPECT(gbc.pc(), 0x69a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01E7
        gbc.setState(0xd61d, 0x374b, 0x6580, 0x1426, 0x17a, 0xa05b, 0x1, 0x0);
        gbc.writeMem(0xd61d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x374b);
        EXPECT(gbc.pc(), 0xd61e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd61d), 0xb3);
        // B3 01E8
        gbc.setState(0x9653, 0x688, 0xff90, 0x55ad, 0x8e79, 0xfb2c, 0x0, 0x0);
        gbc.writeMem(0x9653, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x688);
        EXPECT(gbc.pc(), 0x9654);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9653), 0xb3);
        // B3 01E9
        gbc.setState(0xb504, 0x3755, 0x7830, 0x1611, 0xd1dc, 0xabfb, 0x1, 0x1);
        gbc.writeMem(0xb504, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x3755);
        EXPECT(gbc.pc(), 0xb505);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb504), 0xb3);
        // B3 01EA
        gbc.setState(0x84b, 0x4a38, 0xc90, 0x1, 0x74dc, 0x1b2e, 0x1, 0x0);
        gbc.writeMem(0x84b, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x4a38);
        EXPECT(gbc.pc(), 0x84c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01EB
        gbc.setState(0xa8da, 0xda51, 0x8a30, 0x8a28, 0x601c, 0x934a, 0x0, 0x1);
        gbc.writeMem(0xa8da, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xda51);
        EXPECT(gbc.pc(), 0xa8db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8da), 0xb3);
        // B3 01EC
        gbc.setState(0x5a85, 0xaa63, 0x39d0, 0x3d60, 0x4fba, 0xdba8, 0x0, 0x0);
        gbc.writeMem(0x5a85, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xaa63);
        EXPECT(gbc.pc(), 0x5a86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01ED
        gbc.setState(0x3d69, 0xc01f, 0x6c20, 0xf8eb, 0x2902, 0xf6b8, 0x1, 0x1);
        gbc.writeMem(0x3d69, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xc01f);
        EXPECT(gbc.pc(), 0x3d6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01EF
        gbc.setState(0x3b18, 0x2bce, 0x15e0, 0x84c4, 0x9a65, 0x6a8, 0x1, 0x1);
        gbc.writeMem(0x3b18, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x2bce);
        EXPECT(gbc.pc(), 0x3b19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01F0
        gbc.setState(0x2ca9, 0x6e3b, 0x9780, 0x1cb1, 0x94ad, 0x2c09, 0x1, 0x1);
        gbc.writeMem(0x2ca9, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x6e3b);
        EXPECT(gbc.pc(), 0x2caa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01F1
        gbc.setState(0x186e, 0x1d2, 0x69b0, 0xb57b, 0xbfe0, 0xd9aa, 0x1, 0x1);
        gbc.writeMem(0x186e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x1d2);
        EXPECT(gbc.pc(), 0x186f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01F2
        gbc.setState(0x8df1, 0xa8af, 0xa480, 0x79e6, 0x69a, 0x5702, 0x0, 0x0);
        gbc.writeMem(0x8df1, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xa8af);
        EXPECT(gbc.pc(), 0x8df2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8df1), 0xb3);
        // B3 01F3
        gbc.setState(0x7e0e, 0x674b, 0xfa70, 0x4951, 0xcd25, 0x4d84, 0x0, 0x0);
        gbc.writeMem(0x7e0e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x674b);
        EXPECT(gbc.pc(), 0x7e0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01F4
        gbc.setState(0x72c9, 0xaff6, 0xfea0, 0x4cea, 0xd1dc, 0xaa0f, 0x0, 0x0);
        gbc.writeMem(0x72c9, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xaff6);
        EXPECT(gbc.pc(), 0x72ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01F5
        gbc.setState(0xbc6f, 0x79a6, 0x9e10, 0xde3c, 0x7d78, 0x695c, 0x1, 0x1);
        gbc.writeMem(0xbc6f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x79a6);
        EXPECT(gbc.pc(), 0xbc70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc6f), 0xb3);
        // B3 01F7
        gbc.setState(0x831e, 0xe705, 0xb580, 0x913a, 0x4268, 0xa7f7, 0x0, 0x1);
        gbc.writeMem(0x831e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xe705);
        EXPECT(gbc.pc(), 0x831f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x831e), 0xb3);
        // B3 01F9
        gbc.setState(0x1472, 0x936f, 0xc3b0, 0x3299, 0xc0fb, 0x5312, 0x0, 0x0);
        gbc.writeMem(0x1472, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x936f);
        EXPECT(gbc.pc(), 0x1473);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01FA
        gbc.setState(0x826b, 0x1b7b, 0xeb50, 0x2c0, 0x59c7, 0xe037, 0x0, 0x0);
        gbc.writeMem(0x826b, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x1b7b);
        EXPECT(gbc.pc(), 0x826c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x826b), 0xb3);
        // B3 01FB
        gbc.setState(0x5f57, 0x1dd6, 0x76a0, 0x1999, 0xcd54, 0xec8d, 0x0, 0x0);
        gbc.writeMem(0x5f57, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x1dd6);
        EXPECT(gbc.pc(), 0x5f58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01FD
        gbc.setState(0x8dcd, 0x8452, 0xb2e0, 0xa011, 0x75fa, 0x2bfa, 0x1, 0x0);
        gbc.writeMem(0x8dcd, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x8452);
        EXPECT(gbc.pc(), 0x8dce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dcd), 0xb3);
        // B3 01FE
        gbc.setState(0x67d, 0x42c, 0x3a40, 0xa5c3, 0x4d9d, 0x5c59, 0x0, 0x0);
        gbc.writeMem(0x67d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x42c);
        EXPECT(gbc.pc(), 0x67e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 01FF
        gbc.setState(0x3d7e, 0x58da, 0x89c0, 0x6e19, 0x6479, 0xbdd8, 0x1, 0x1);
        gbc.writeMem(0x3d7e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x58da);
        EXPECT(gbc.pc(), 0x3d7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0200
        gbc.setState(0xb65c, 0xe10d, 0x7ac0, 0x4086, 0xbedd, 0xf03d, 0x0, 0x0);
        gbc.writeMem(0xb65c, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xe10d);
        EXPECT(gbc.pc(), 0xb65d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb65c), 0xb3);
        // B3 0201
        gbc.setState(0x8f62, 0xe722, 0xd1b0, 0xb12a, 0xd67e, 0x78cb, 0x1, 0x1);
        gbc.writeMem(0x8f62, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xe722);
        EXPECT(gbc.pc(), 0x8f63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f62), 0xb3);
        // B3 0202
        gbc.setState(0x827d, 0xb6a0, 0x6b90, 0x2cd7, 0xe55f, 0xafa, 0x0, 0x0);
        gbc.writeMem(0x827d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xb6a0);
        EXPECT(gbc.pc(), 0x827e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x827d), 0xb3);
        // B3 0203
        gbc.setState(0xd75a, 0x18a0, 0x5f10, 0x49e0, 0x2db5, 0xfdfa, 0x0, 0x1);
        gbc.writeMem(0xd75a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x18a0);
        EXPECT(gbc.pc(), 0xd75b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd75a), 0xb3);
        // B3 0204
        gbc.setState(0xea3, 0xd5d7, 0xa090, 0xd11f, 0xf16d, 0x4bc5, 0x1, 0x1);
        gbc.writeMem(0xea3, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xd5d7);
        EXPECT(gbc.pc(), 0xea4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0205
        gbc.setState(0xd1b0, 0xb3c1, 0x2b50, 0xbfc3, 0x96b7, 0xe053, 0x0, 0x0);
        gbc.writeMem(0xd1b0, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xb3c1);
        EXPECT(gbc.pc(), 0xd1b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1b0), 0xb3);
        // B3 0206
        gbc.setState(0x4a3f, 0x5404, 0xd8a0, 0x128c, 0xe76e, 0xf859, 0x0, 0x0);
        gbc.writeMem(0x4a3f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x5404);
        EXPECT(gbc.pc(), 0x4a40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0207
        gbc.setState(0x83b0, 0xb85, 0x3fe0, 0x595a, 0x991c, 0xab14, 0x0, 0x0);
        gbc.writeMem(0x83b0, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xb85);
        EXPECT(gbc.pc(), 0x83b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83b0), 0xb3);
        // B3 0208
        gbc.setState(0xa66, 0x442b, 0xf3c0, 0xc61a, 0x4467, 0x42f8, 0x1, 0x1);
        gbc.writeMem(0xa66, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x442b);
        EXPECT(gbc.pc(), 0xa67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0209
        gbc.setState(0xd698, 0xcada, 0xc570, 0x6aaf, 0x802a, 0xe8a, 0x0, 0x1);
        gbc.writeMem(0xd698, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xcada);
        EXPECT(gbc.pc(), 0xd699);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd698), 0xb3);
        // B3 020A
        gbc.setState(0xdaee, 0x2659, 0x5d40, 0xe992, 0x3334, 0x77ea, 0x1, 0x1);
        gbc.writeMem(0xdaee, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x2659);
        EXPECT(gbc.pc(), 0xdaef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdaee), 0xb3);
        // B3 020B
        gbc.setState(0xe3d5, 0x80ac, 0xd280, 0x7eee, 0x79e3, 0xfde2, 0x1, 0x0);
        gbc.writeMem(0xe3d5, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x80ac);
        EXPECT(gbc.pc(), 0xe3d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3d5), 0xb3);
        // B3 020C
        gbc.setState(0x3c7d, 0x8322, 0x8d70, 0xe6a5, 0xe8c, 0x585d, 0x0, 0x0);
        gbc.writeMem(0x3c7d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x8322);
        EXPECT(gbc.pc(), 0x3c7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 020D
        gbc.setState(0x52a4, 0xe65d, 0x2170, 0xcbba, 0xc924, 0xd7bb, 0x0, 0x0);
        gbc.writeMem(0x52a4, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xe65d);
        EXPECT(gbc.pc(), 0x52a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 020E
        gbc.setState(0xf9, 0xf80, 0x7df0, 0xb14d, 0x7653, 0xd578, 0x0, 0x1);
        gbc.writeMem(0xf9, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xf80);
        EXPECT(gbc.pc(), 0xfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 020F
        gbc.setState(0x1323, 0x25a3, 0x8900, 0x1073, 0x7de8, 0x28ac, 0x1, 0x0);
        gbc.writeMem(0x1323, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x25a3);
        EXPECT(gbc.pc(), 0x1324);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0210
        gbc.setState(0x397, 0xfc6a, 0x23d0, 0x1261, 0xa073, 0x25c3, 0x0, 0x0);
        gbc.writeMem(0x397, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xfc6a);
        EXPECT(gbc.pc(), 0x398);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0212
        gbc.setState(0x863d, 0x44d7, 0x3140, 0x9fb8, 0xe268, 0xe3dd, 0x1, 0x0);
        gbc.writeMem(0x863d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x44d7);
        EXPECT(gbc.pc(), 0x863e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x863d), 0xb3);
        // B3 0213
        gbc.setState(0x42f9, 0xf18b, 0xe520, 0x75c1, 0x49b, 0x3c7f, 0x1, 0x0);
        gbc.writeMem(0x42f9, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xf18b);
        EXPECT(gbc.pc(), 0x42fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0214
        gbc.setState(0xd784, 0x9417, 0xeb10, 0x48a, 0x974b, 0x7f05, 0x1, 0x0);
        gbc.writeMem(0xd784, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x9417);
        EXPECT(gbc.pc(), 0xd785);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd784), 0xb3);
        // B3 0215
        gbc.setState(0x306a, 0x8298, 0x30a0, 0xa2a6, 0xd69e, 0xb761, 0x1, 0x1);
        gbc.writeMem(0x306a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x8298);
        EXPECT(gbc.pc(), 0x306b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0216
        gbc.setState(0xeaff, 0x5d8f, 0x8890, 0x653, 0xbffd, 0x9c6d, 0x1, 0x1);
        gbc.writeMem(0xeaff, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x5d8f);
        EXPECT(gbc.pc(), 0xeb00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaff), 0xb3);
        // B3 0217
        gbc.setState(0xcb61, 0xc84f, 0xcf00, 0xb864, 0x9619, 0x8979, 0x1, 0x0);
        gbc.writeMem(0xcb61, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xc84f);
        EXPECT(gbc.pc(), 0xcb62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb61), 0xb3);
        // B3 0218
        gbc.setState(0xe903, 0x35bc, 0xdbd0, 0x7b9, 0x1cfc, 0x5489, 0x0, 0x0);
        gbc.writeMem(0xe903, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x35bc);
        EXPECT(gbc.pc(), 0xe904);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe903), 0xb3);
        // B3 0219
        gbc.setState(0x70f4, 0xf6f2, 0xbce0, 0x890a, 0xe5a5, 0xb17c, 0x0, 0x0);
        gbc.writeMem(0x70f4, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xf6f2);
        EXPECT(gbc.pc(), 0x70f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 021A
        gbc.setState(0x99d5, 0x96ac, 0x4c30, 0xdf7e, 0xeda2, 0x9aed, 0x1, 0x1);
        gbc.writeMem(0x99d5, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x96ac);
        EXPECT(gbc.pc(), 0x99d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99d5), 0xb3);
        // B3 021B
        gbc.setState(0xd0, 0x6b9e, 0xbde0, 0xeef7, 0x7ca0, 0xb1c5, 0x1, 0x1);
        gbc.writeMem(0xd0, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x6b9e);
        EXPECT(gbc.pc(), 0xd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 021C
        gbc.setState(0x8050, 0x6049, 0x2db0, 0x2f48, 0x5bfd, 0x8eb6, 0x1, 0x1);
        gbc.writeMem(0x8050, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x6049);
        EXPECT(gbc.pc(), 0x8051);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8050), 0xb3);
        // B3 021D
        gbc.setState(0xe560, 0x3bfc, 0x4f40, 0x8f0a, 0xcbe1, 0x7056, 0x1, 0x1);
        gbc.writeMem(0xe560, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x3bfc);
        EXPECT(gbc.pc(), 0xe561);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe560), 0xb3);
        // B3 021F
        gbc.setState(0x749b, 0xbd2c, 0xa180, 0x9210, 0x1326, 0xb6d6, 0x0, 0x0);
        gbc.writeMem(0x749b, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xbd2c);
        EXPECT(gbc.pc(), 0x749c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0220
        gbc.setState(0x4f65, 0xa3a3, 0x1ac0, 0x3109, 0x6608, 0x2f32, 0x0, 0x1);
        gbc.writeMem(0x4f65, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xa3a3);
        EXPECT(gbc.pc(), 0x4f66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0221
        gbc.setState(0x6a0, 0x767, 0x7300, 0x5d9f, 0x8cf8, 0xd095, 0x1, 0x0);
        gbc.writeMem(0x6a0, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x767);
        EXPECT(gbc.pc(), 0x6a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0222
        gbc.setState(0x1bfc, 0xbd9d, 0x91a0, 0x7db7, 0x9f15, 0xd6e7, 0x1, 0x0);
        gbc.writeMem(0x1bfc, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xbd9d);
        EXPECT(gbc.pc(), 0x1bfd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0223
        gbc.setState(0x6b2, 0xda10, 0x4630, 0x7f26, 0x53f0, 0xc92f, 0x1, 0x1);
        gbc.writeMem(0x6b2, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xda10);
        EXPECT(gbc.pc(), 0x6b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0224
        gbc.setState(0xc1b9, 0x69ce, 0xdc30, 0x7b2b, 0xb554, 0x63cf, 0x0, 0x0);
        gbc.writeMem(0xc1b9, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x69ce);
        EXPECT(gbc.pc(), 0xc1ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1b9), 0xb3);
        // B3 0225
        gbc.setState(0x2f08, 0xd77e, 0x1900, 0x97, 0x6e3d, 0x513c, 0x1, 0x0);
        gbc.writeMem(0x2f08, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xd77e);
        EXPECT(gbc.pc(), 0x2f09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0226
        gbc.setState(0x930d, 0xbf0f, 0xefe0, 0xec18, 0x8925, 0x8c19, 0x1, 0x1);
        gbc.writeMem(0x930d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xbf0f);
        EXPECT(gbc.pc(), 0x930e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x930d), 0xb3);
        // B3 0227
        gbc.setState(0x27ef, 0x7606, 0x8ef0, 0x5e7d, 0x32ff, 0x4f32, 0x0, 0x0);
        gbc.writeMem(0x27ef, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x7606);
        EXPECT(gbc.pc(), 0x27f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0228
        gbc.setState(0xdea, 0x2f19, 0x830, 0x4d25, 0xbce9, 0xa9d5, 0x0, 0x1);
        gbc.writeMem(0xdea, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x2f19);
        EXPECT(gbc.pc(), 0xdeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0229
        gbc.setState(0x1c1f, 0xd70a, 0x4a10, 0xf6e, 0x947c, 0xc684, 0x1, 0x0);
        gbc.writeMem(0x1c1f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xd70a);
        EXPECT(gbc.pc(), 0x1c20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 022A
        gbc.setState(0x5879, 0xeacc, 0x9c30, 0x5b0e, 0xaab1, 0xcdf2, 0x1, 0x0);
        gbc.writeMem(0x5879, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xeacc);
        EXPECT(gbc.pc(), 0x587a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 022B
        gbc.setState(0x5f6f, 0x2871, 0xe830, 0x477f, 0x6f78, 0x94bb, 0x0, 0x0);
        gbc.writeMem(0x5f6f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x2871);
        EXPECT(gbc.pc(), 0x5f70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 022C
        gbc.setState(0xcdf6, 0x9157, 0x8240, 0xdd5, 0x436e, 0xb1c9, 0x0, 0x0);
        gbc.writeMem(0xcdf6, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x9157);
        EXPECT(gbc.pc(), 0xcdf7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdf6), 0xb3);
        // B3 022D
        gbc.setState(0xa592, 0x2c6f, 0xe90, 0x57e3, 0x2500, 0xdbbc, 0x1, 0x0);
        gbc.writeMem(0xa592, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x2c6f);
        EXPECT(gbc.pc(), 0xa593);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa592), 0xb3);
        // B3 022E
        gbc.setState(0xe5d9, 0x846b, 0xa8a0, 0x5f1b, 0x1bc4, 0x81e6, 0x0, 0x1);
        gbc.writeMem(0xe5d9, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x846b);
        EXPECT(gbc.pc(), 0xe5da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5d9), 0xb3);
        // B3 022F
        gbc.setState(0x6dac, 0xb070, 0x8970, 0xf51d, 0x1768, 0xbcb9, 0x1, 0x0);
        gbc.writeMem(0x6dac, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xb070);
        EXPECT(gbc.pc(), 0x6dad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0230
        gbc.setState(0x7272, 0x1f46, 0x8c70, 0xdfac, 0x6f94, 0xdf21, 0x1, 0x1);
        gbc.writeMem(0x7272, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x1f46);
        EXPECT(gbc.pc(), 0x7273);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0231
        gbc.setState(0x9261, 0x258c, 0x9340, 0xb6f8, 0xdf96, 0x7687, 0x0, 0x0);
        gbc.writeMem(0x9261, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x258c);
        EXPECT(gbc.pc(), 0x9262);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9261), 0xb3);
        // B3 0232
        gbc.setState(0x56fc, 0x5e44, 0x2a40, 0x71a0, 0x69d3, 0x5423, 0x1, 0x0);
        gbc.writeMem(0x56fc, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x5e44);
        EXPECT(gbc.pc(), 0x56fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0233
        gbc.setState(0x667a, 0xc817, 0x1aa0, 0x1acd, 0x4559, 0x7b78, 0x1, 0x1);
        gbc.writeMem(0x667a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xc817);
        EXPECT(gbc.pc(), 0x667b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0234
        gbc.setState(0x7e4e, 0xb8ab, 0xf590, 0x23bd, 0x1955, 0x58a8, 0x1, 0x0);
        gbc.writeMem(0x7e4e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xb8ab);
        EXPECT(gbc.pc(), 0x7e4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0235
        gbc.setState(0x8a45, 0x2c38, 0x2850, 0xc83e, 0xbcd4, 0x2f77, 0x0, 0x0);
        gbc.writeMem(0x8a45, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x2c38);
        EXPECT(gbc.pc(), 0x8a46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a45), 0xb3);
        // B3 0237
        gbc.setState(0x8ddf, 0xfdd8, 0xaea0, 0x527b, 0xe90b, 0x3aff, 0x0, 0x1);
        gbc.writeMem(0x8ddf, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xfdd8);
        EXPECT(gbc.pc(), 0x8de0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ddf), 0xb3);
        // B3 0238
        gbc.setState(0xbd50, 0xb18e, 0xd510, 0x3f42, 0x2461, 0x6a08, 0x1, 0x0);
        gbc.writeMem(0xbd50, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xb18e);
        EXPECT(gbc.pc(), 0xbd51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd50), 0xb3);
        // B3 0239
        gbc.setState(0x14c5, 0xe5c7, 0xdce0, 0x8eef, 0x4c71, 0xdebc, 0x1, 0x1);
        gbc.writeMem(0x14c5, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xe5c7);
        EXPECT(gbc.pc(), 0x14c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 023A
        gbc.setState(0x652e, 0x59fa, 0x4470, 0x5495, 0x59ec, 0x1cc4, 0x0, 0x1);
        gbc.writeMem(0x652e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x59fa);
        EXPECT(gbc.pc(), 0x652f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 023B
        gbc.setState(0x2b94, 0x4a66, 0x1180, 0xe74f, 0x76e0, 0x919, 0x0, 0x0);
        gbc.writeMem(0x2b94, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x4a66);
        EXPECT(gbc.pc(), 0x2b95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 023C
        gbc.setState(0x1779, 0xd75a, 0x5a40, 0xae56, 0x9cb2, 0xf21, 0x1, 0x0);
        gbc.writeMem(0x1779, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xd75a);
        EXPECT(gbc.pc(), 0x177a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 023D
        gbc.setState(0xafb1, 0x707b, 0x5530, 0x3798, 0xb45c, 0xf215, 0x1, 0x0);
        gbc.writeMem(0xafb1, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x707b);
        EXPECT(gbc.pc(), 0xafb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafb1), 0xb3);
        // B3 023E
        gbc.setState(0x9bc7, 0x3d7e, 0x4130, 0x922b, 0x6f51, 0x7712, 0x1, 0x0);
        gbc.writeMem(0x9bc7, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x3d7e);
        EXPECT(gbc.pc(), 0x9bc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bc7), 0xb3);
        // B3 023F
        gbc.setState(0x5725, 0xcb96, 0xfe80, 0x4a43, 0x1a64, 0x13f9, 0x0, 0x1);
        gbc.writeMem(0x5725, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xcb96);
        EXPECT(gbc.pc(), 0x5726);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0240
        gbc.setState(0x7a4e, 0xb75, 0xe0, 0xe8ef, 0x3df3, 0x50c8, 0x1, 0x1);
        gbc.writeMem(0x7a4e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xb75);
        EXPECT(gbc.pc(), 0x7a4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0241
        gbc.setState(0x351d, 0xda4c, 0xc890, 0xd4b6, 0xca34, 0xaf3b, 0x0, 0x1);
        gbc.writeMem(0x351d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xda4c);
        EXPECT(gbc.pc(), 0x351e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0242
        gbc.setState(0x560c, 0x82b2, 0x1dd0, 0x7746, 0xc575, 0xd15c, 0x0, 0x0);
        gbc.writeMem(0x560c, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x82b2);
        EXPECT(gbc.pc(), 0x560d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0243
        gbc.setState(0xdb54, 0x4012, 0x72b0, 0xecd4, 0xa24b, 0x8e1d, 0x0, 0x0);
        gbc.writeMem(0xdb54, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x4012);
        EXPECT(gbc.pc(), 0xdb55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb54), 0xb3);
        // B3 0244
        gbc.setState(0x6b3b, 0x6436, 0xea70, 0x1105, 0xa62f, 0xa561, 0x0, 0x0);
        gbc.writeMem(0x6b3b, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x6436);
        EXPECT(gbc.pc(), 0x6b3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0245
        gbc.setState(0xcd5, 0xeed1, 0xed50, 0x430f, 0x4110, 0xbb6e, 0x0, 0x0);
        gbc.writeMem(0xcd5, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xeed1);
        EXPECT(gbc.pc(), 0xcd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0246
        gbc.setState(0x6309, 0xc105, 0xb4a0, 0xff8e, 0xf574, 0x976e, 0x1, 0x1);
        gbc.writeMem(0x6309, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xc105);
        EXPECT(gbc.pc(), 0x630a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0247
        gbc.setState(0x217f, 0xbb18, 0x6410, 0x7bc7, 0xd04a, 0xfd34, 0x1, 0x0);
        gbc.writeMem(0x217f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xbb18);
        EXPECT(gbc.pc(), 0x2180);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0248
        gbc.setState(0x4520, 0xae54, 0xd7e0, 0xa348, 0x5b56, 0xa273, 0x1, 0x0);
        gbc.writeMem(0x4520, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xae54);
        EXPECT(gbc.pc(), 0x4521);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0249
        gbc.setState(0x254, 0x8278, 0x700, 0xc614, 0x5df2, 0xa97a, 0x1, 0x0);
        gbc.writeMem(0x254, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x8278);
        EXPECT(gbc.pc(), 0x255);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 024A
        gbc.setState(0x3fd0, 0x61f6, 0xc980, 0x4920, 0xd6a9, 0x4008, 0x1, 0x1);
        gbc.writeMem(0x3fd0, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x61f6);
        EXPECT(gbc.pc(), 0x3fd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 024B
        gbc.setState(0x1e5e, 0xdb42, 0x780, 0x5ed5, 0x68fd, 0xb85d, 0x1, 0x1);
        gbc.writeMem(0x1e5e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xdb42);
        EXPECT(gbc.pc(), 0x1e5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 024C
        gbc.setState(0xa89b, 0xff8b, 0xa8c0, 0x6999, 0x2aca, 0xeb42, 0x0, 0x1);
        gbc.writeMem(0xa89b, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xff8b);
        EXPECT(gbc.pc(), 0xa89c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa89b), 0xb3);
        // B3 024D
        gbc.setState(0xe9cf, 0xe82f, 0xd800, 0xe06, 0x37d3, 0x9946, 0x1, 0x0);
        gbc.writeMem(0xe9cf, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xe82f);
        EXPECT(gbc.pc(), 0xe9d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9cf), 0xb3);
        // B3 024E
        gbc.setState(0x4412, 0xe2a0, 0x2750, 0xb2f8, 0x37ab, 0x7160, 0x0, 0x1);
        gbc.writeMem(0x4412, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xe2a0);
        EXPECT(gbc.pc(), 0x4413);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 024F
        gbc.setState(0x879, 0x3833, 0xa190, 0x531a, 0xd516, 0xb2fc, 0x1, 0x1);
        gbc.writeMem(0x879, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x3833);
        EXPECT(gbc.pc(), 0x87a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0250
        gbc.setState(0x594c, 0x6ae3, 0xa8e0, 0xb286, 0xedd3, 0xd415, 0x0, 0x0);
        gbc.writeMem(0x594c, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x6ae3);
        EXPECT(gbc.pc(), 0x594d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0251
        gbc.setState(0x70a8, 0x21de, 0x3210, 0xb49, 0x3c2b, 0x7582, 0x0, 0x0);
        gbc.writeMem(0x70a8, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x21de);
        EXPECT(gbc.pc(), 0x70a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0252
        gbc.setState(0x9000, 0x1ec5, 0xd610, 0xc546, 0xd1e6, 0xb8d6, 0x0, 0x1);
        gbc.writeMem(0x9000, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x1ec5);
        EXPECT(gbc.pc(), 0x9001);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9000), 0xb3);
        // B3 0253
        gbc.setState(0xec89, 0xf064, 0x1220, 0x2fc4, 0xd308, 0xf782, 0x1, 0x0);
        gbc.writeMem(0xec89, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xf064);
        EXPECT(gbc.pc(), 0xec8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec89), 0xb3);
        // B3 0254
        gbc.setState(0x4bf7, 0xcb12, 0xdb70, 0xd64e, 0xdcfd, 0x1484, 0x1, 0x0);
        gbc.writeMem(0x4bf7, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xcb12);
        EXPECT(gbc.pc(), 0x4bf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0255
        gbc.setState(0xb02, 0x3a45, 0xfcc0, 0x6f20, 0x127e, 0xdf60, 0x0, 0x1);
        gbc.writeMem(0xb02, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x3a45);
        EXPECT(gbc.pc(), 0xb03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0256
        gbc.setState(0x122, 0xaf3a, 0x89c0, 0x5a83, 0x505b, 0x1f54, 0x1, 0x1);
        gbc.writeMem(0x122, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xaf3a);
        EXPECT(gbc.pc(), 0x123);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0257
        gbc.setState(0xd71e, 0x5c8e, 0xe060, 0x34ee, 0xd5b8, 0xa579, 0x1, 0x1);
        gbc.writeMem(0xd71e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x5c8e);
        EXPECT(gbc.pc(), 0xd71f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd71e), 0xb3);
        // B3 0258
        gbc.setState(0x3689, 0x97bc, 0x9550, 0xf5f0, 0xacd, 0x82cf, 0x0, 0x0);
        gbc.writeMem(0x3689, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x97bc);
        EXPECT(gbc.pc(), 0x368a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0259
        gbc.setState(0xcfa2, 0x9bf5, 0xb1f0, 0x60a9, 0xc3bd, 0x1312, 0x1, 0x1);
        gbc.writeMem(0xcfa2, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x9bf5);
        EXPECT(gbc.pc(), 0xcfa3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfa2), 0xb3);
        // B3 025A
        gbc.setState(0xb836, 0x5d00, 0x2a00, 0x727d, 0xf00d, 0x5aed, 0x0, 0x0);
        gbc.writeMem(0xb836, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x5d00);
        EXPECT(gbc.pc(), 0xb837);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb836), 0xb3);
        // B3 025B
        gbc.setState(0x6078, 0x16ab, 0x7dd0, 0x39e2, 0x2b8c, 0x25fb, 0x0, 0x1);
        gbc.writeMem(0x6078, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x16ab);
        EXPECT(gbc.pc(), 0x6079);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 025C
        gbc.setState(0xb3de, 0x8777, 0xab90, 0x7587, 0x7eac, 0x6770, 0x0, 0x0);
        gbc.writeMem(0xb3de, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x8777);
        EXPECT(gbc.pc(), 0xb3df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3de), 0xb3);
        // B3 025D
        gbc.setState(0x4f18, 0xf560, 0x7ca0, 0xaedd, 0x8e77, 0x77dc, 0x1, 0x0);
        gbc.writeMem(0x4f18, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xf560);
        EXPECT(gbc.pc(), 0x4f19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 025E
        gbc.setState(0x6b5f, 0x9f63, 0x9e60, 0x204d, 0x3757, 0x3dbe, 0x0, 0x1);
        gbc.writeMem(0x6b5f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x9f63);
        EXPECT(gbc.pc(), 0x6b60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 025F
        gbc.setState(0x5ce7, 0x6ac3, 0xce40, 0x53ae, 0xf1fd, 0xf934, 0x0, 0x0);
        gbc.writeMem(0x5ce7, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x6ac3);
        EXPECT(gbc.pc(), 0x5ce8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0260
        gbc.setState(0x1c94, 0x3636, 0xd470, 0x94bb, 0x215c, 0xfaa6, 0x1, 0x0);
        gbc.writeMem(0x1c94, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x3636);
        EXPECT(gbc.pc(), 0x1c95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0261
        gbc.setState(0xeca6, 0x270c, 0x3ac0, 0x16a6, 0x40c5, 0x3b6a, 0x0, 0x1);
        gbc.writeMem(0xeca6, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x270c);
        EXPECT(gbc.pc(), 0xeca7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeca6), 0xb3);
        // B3 0262
        gbc.setState(0xada5, 0x6f02, 0x3e70, 0x7df5, 0xfbba, 0x71c2, 0x0, 0x1);
        gbc.writeMem(0xada5, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x6f02);
        EXPECT(gbc.pc(), 0xada6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xada5), 0xb3);
        // B3 0263
        gbc.setState(0x7f44, 0xcc3e, 0x6900, 0x261d, 0xa841, 0xecc1, 0x1, 0x1);
        gbc.writeMem(0x7f44, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xcc3e);
        EXPECT(gbc.pc(), 0x7f45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0264
        gbc.setState(0x3929, 0xfc1a, 0xb740, 0x6029, 0xf0ee, 0x6deb, 0x1, 0x1);
        gbc.writeMem(0x3929, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xfc1a);
        EXPECT(gbc.pc(), 0x392a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0265
        gbc.setState(0xd35, 0xa300, 0x3e50, 0x4ba1, 0x4d0b, 0xbef7, 0x1, 0x0);
        gbc.writeMem(0xd35, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xa300);
        EXPECT(gbc.pc(), 0xd36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0266
        gbc.setState(0xa751, 0xeaaf, 0x67e0, 0x34b3, 0xdc48, 0xdf85, 0x0, 0x1);
        gbc.writeMem(0xa751, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xeaaf);
        EXPECT(gbc.pc(), 0xa752);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa751), 0xb3);
        // B3 0267
        gbc.setState(0xb3d1, 0x344f, 0x19f0, 0xefb1, 0xc81, 0x38fc, 0x1, 0x1);
        gbc.writeMem(0xb3d1, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x344f);
        EXPECT(gbc.pc(), 0xb3d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3d1), 0xb3);
        // B3 0268
        gbc.setState(0xa03e, 0x10b8, 0xf860, 0xd75c, 0x8392, 0x3620, 0x0, 0x1);
        gbc.writeMem(0xa03e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x10b8);
        EXPECT(gbc.pc(), 0xa03f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa03e), 0xb3);
        // B3 0269
        gbc.setState(0x9f74, 0xa8fc, 0x7da0, 0x683, 0x5a1, 0x9532, 0x0, 0x1);
        gbc.writeMem(0x9f74, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xa8fc);
        EXPECT(gbc.pc(), 0x9f75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f74), 0xb3);
        // B3 026A
        gbc.setState(0x9d57, 0xb55a, 0x50e0, 0x4ddf, 0xd183, 0x6925, 0x1, 0x0);
        gbc.writeMem(0x9d57, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xb55a);
        EXPECT(gbc.pc(), 0x9d58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d57), 0xb3);
        // B3 026B
        gbc.setState(0xc2e7, 0x3f21, 0x6130, 0x7aa0, 0xa220, 0xa558, 0x1, 0x1);
        gbc.writeMem(0xc2e7, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x3f21);
        EXPECT(gbc.pc(), 0xc2e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2e7), 0xb3);
        // B3 026D
        gbc.setState(0x90f3, 0xf242, 0x2e00, 0x7095, 0xbef7, 0x69aa, 0x1, 0x0);
        gbc.writeMem(0x90f3, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xf242);
        EXPECT(gbc.pc(), 0x90f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90f3), 0xb3);
        // B3 026E
        gbc.setState(0x56ad, 0xa5d0, 0xe250, 0x9fd6, 0xa75d, 0xa473, 0x1, 0x0);
        gbc.writeMem(0x56ad, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xa5d0);
        EXPECT(gbc.pc(), 0x56ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 026F
        gbc.setState(0xb009, 0x3af3, 0x26e0, 0xd0fe, 0x698d, 0xd336, 0x0, 0x0);
        gbc.writeMem(0xb009, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x3af3);
        EXPECT(gbc.pc(), 0xb00a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb009), 0xb3);
        // B3 0270
        gbc.setState(0xc2b5, 0xb071, 0xa3e0, 0x1768, 0x244a, 0x4e77, 0x1, 0x1);
        gbc.writeMem(0xc2b5, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xb071);
        EXPECT(gbc.pc(), 0xc2b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2b5), 0xb3);
        // B3 0272
        gbc.setState(0x5a55, 0x8147, 0xe8d0, 0xab98, 0x7ff1, 0x330a, 0x1, 0x1);
        gbc.writeMem(0x5a55, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x8147);
        EXPECT(gbc.pc(), 0x5a56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0273
        gbc.setState(0x2dc7, 0xea0c, 0xda50, 0x6f51, 0xeabd, 0xff59, 0x0, 0x0);
        gbc.writeMem(0x2dc7, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xea0c);
        EXPECT(gbc.pc(), 0x2dc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0274
        gbc.setState(0xdece, 0xb5d8, 0x35f0, 0x2800, 0xd72a, 0xa9f2, 0x1, 0x0);
        gbc.writeMem(0xdece, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xb5d8);
        EXPECT(gbc.pc(), 0xdecf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdece), 0xb3);
        // B3 0275
        gbc.setState(0x696d, 0x6e3b, 0x4c80, 0x4144, 0xb0ca, 0xdefe, 0x0, 0x1);
        gbc.writeMem(0x696d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x6e3b);
        EXPECT(gbc.pc(), 0x696e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0276
        gbc.setState(0xc0ec, 0x34c6, 0xd460, 0x1628, 0x1bbd, 0xbe21, 0x1, 0x1);
        gbc.writeMem(0xc0ec, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x34c6);
        EXPECT(gbc.pc(), 0xc0ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0ec), 0xb3);
        // B3 0278
        gbc.setState(0x6db4, 0x1873, 0x3c20, 0xf722, 0x7ae, 0x2863, 0x1, 0x0);
        gbc.writeMem(0x6db4, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x1873);
        EXPECT(gbc.pc(), 0x6db5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0279
        gbc.setState(0x11ee, 0xe7f8, 0x91e0, 0x7f7e, 0x99a4, 0x6808, 0x0, 0x1);
        gbc.writeMem(0x11ee, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xe7f8);
        EXPECT(gbc.pc(), 0x11ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 027A
        gbc.setState(0x34aa, 0xa160, 0x4ca0, 0x121d, 0xdeb2, 0x4005, 0x0, 0x1);
        gbc.writeMem(0x34aa, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xa160);
        EXPECT(gbc.pc(), 0x34ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 027C
        gbc.setState(0x5ca3, 0x966e, 0x9690, 0xbc97, 0xd77e, 0x4b71, 0x0, 0x0);
        gbc.writeMem(0x5ca3, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x966e);
        EXPECT(gbc.pc(), 0x5ca4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 027D
        gbc.setState(0x784b, 0xd946, 0x2dc0, 0xa9e9, 0x3660, 0x828c, 0x1, 0x0);
        gbc.writeMem(0x784b, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xd946);
        EXPECT(gbc.pc(), 0x784c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 027E
        gbc.setState(0x26e8, 0x7b9c, 0x6dd0, 0xd0b4, 0x51c4, 0x61c7, 0x1, 0x1);
        gbc.writeMem(0x26e8, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x7b9c);
        EXPECT(gbc.pc(), 0x26e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 027F
        gbc.setState(0xeb5a, 0x585b, 0xa070, 0x6703, 0x7493, 0xd417, 0x0, 0x0);
        gbc.writeMem(0xeb5a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x585b);
        EXPECT(gbc.pc(), 0xeb5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb5a), 0xb3);
        // B3 0280
        gbc.setState(0x46b9, 0x6e6d, 0xe40, 0x3b2d, 0x14fa, 0x92cb, 0x1, 0x0);
        gbc.writeMem(0x46b9, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x6e6d);
        EXPECT(gbc.pc(), 0x46ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0281
        gbc.setState(0x3c87, 0x747f, 0x4f80, 0xb5a9, 0xba81, 0xf7db, 0x0, 0x1);
        gbc.writeMem(0x3c87, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x747f);
        EXPECT(gbc.pc(), 0x3c88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0282
        gbc.setState(0x4919, 0x6359, 0x6910, 0xb06b, 0xd9df, 0xc2bd, 0x0, 0x0);
        gbc.writeMem(0x4919, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x6359);
        EXPECT(gbc.pc(), 0x491a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0283
        gbc.setState(0x5e62, 0xa967, 0xddf0, 0xdd49, 0x8fe1, 0xa4a1, 0x0, 0x0);
        gbc.writeMem(0x5e62, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xa967);
        EXPECT(gbc.pc(), 0x5e63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0284
        gbc.setState(0x3313, 0xa992, 0x26e0, 0xffdd, 0x3711, 0x6fb4, 0x1, 0x1);
        gbc.writeMem(0x3313, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xa992);
        EXPECT(gbc.pc(), 0x3314);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0285
        gbc.setState(0xc8d8, 0x86f2, 0xb970, 0x7bca, 0xbc48, 0x1cbb, 0x0, 0x0);
        gbc.writeMem(0xc8d8, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x86f2);
        EXPECT(gbc.pc(), 0xc8d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8d8), 0xb3);
        // B3 0286
        gbc.setState(0xe17d, 0x6346, 0xa6f0, 0x3291, 0xdc64, 0x9212, 0x1, 0x1);
        gbc.writeMem(0xe17d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x6346);
        EXPECT(gbc.pc(), 0xe17e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe17d), 0xb3);
        // B3 0287
        gbc.setState(0xcc66, 0x5af9, 0xc8f0, 0xbc50, 0x324d, 0x6aa6, 0x1, 0x1);
        gbc.writeMem(0xcc66, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x5af9);
        EXPECT(gbc.pc(), 0xcc67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc66), 0xb3);
        // B3 0288
        gbc.setState(0xdcc2, 0xbf, 0x79c0, 0x4ae3, 0x64f2, 0x9410, 0x1, 0x0);
        gbc.writeMem(0xdcc2, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xbf);
        EXPECT(gbc.pc(), 0xdcc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcc2), 0xb3);
        // B3 0289
        gbc.setState(0x8b10, 0x2f24, 0x9690, 0xbb2a, 0xd86c, 0x575b, 0x1, 0x1);
        gbc.writeMem(0x8b10, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x2f24);
        EXPECT(gbc.pc(), 0x8b11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b10), 0xb3);
        // B3 028A
        gbc.setState(0xc749, 0x15ba, 0xd270, 0x1a6b, 0x63e7, 0x9dcb, 0x1, 0x1);
        gbc.writeMem(0xc749, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x15ba);
        EXPECT(gbc.pc(), 0xc74a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc749), 0xb3);
        // B3 028B
        gbc.setState(0x8606, 0xe13a, 0xc640, 0x36e4, 0xf321, 0x2450, 0x1, 0x0);
        gbc.writeMem(0x8606, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xe13a);
        EXPECT(gbc.pc(), 0x8607);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8606), 0xb3);
        // B3 028C
        gbc.setState(0x1e10, 0xcc71, 0xc620, 0x4604, 0xb8c9, 0x90ae, 0x1, 0x1);
        gbc.writeMem(0x1e10, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xcc71);
        EXPECT(gbc.pc(), 0x1e11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 028D
        gbc.setState(0x243c, 0x36dd, 0x9f0, 0x2b6a, 0x1e87, 0x4f90, 0x0, 0x0);
        gbc.writeMem(0x243c, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x36dd);
        EXPECT(gbc.pc(), 0x243d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 028E
        gbc.setState(0x356e, 0xde77, 0xe6c0, 0x1845, 0x6c16, 0x6569, 0x1, 0x1);
        gbc.writeMem(0x356e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xde77);
        EXPECT(gbc.pc(), 0x356f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 028F
        gbc.setState(0x3dff, 0x3643, 0xf320, 0x5d53, 0xd637, 0x6b41, 0x0, 0x0);
        gbc.writeMem(0x3dff, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x3643);
        EXPECT(gbc.pc(), 0x3e00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0290
        gbc.setState(0x92ce, 0xade8, 0xa110, 0xe4b0, 0x7c7, 0xa28c, 0x1, 0x0);
        gbc.writeMem(0x92ce, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xade8);
        EXPECT(gbc.pc(), 0x92cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92ce), 0xb3);
        // B3 0291
        gbc.setState(0x74a9, 0x3223, 0x7840, 0x76d2, 0xa274, 0xe2bf, 0x0, 0x1);
        gbc.writeMem(0x74a9, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x3223);
        EXPECT(gbc.pc(), 0x74aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0292
        gbc.setState(0x45f5, 0xc798, 0xee30, 0xdc2b, 0x6541, 0x9490, 0x1, 0x0);
        gbc.writeMem(0x45f5, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xc798);
        EXPECT(gbc.pc(), 0x45f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0293
        gbc.setState(0xb11e, 0x8a71, 0xf550, 0xc639, 0x5855, 0x32b9, 0x1, 0x0);
        gbc.writeMem(0xb11e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x8a71);
        EXPECT(gbc.pc(), 0xb11f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb11e), 0xb3);
        // B3 0294
        gbc.setState(0x4124, 0xd1fe, 0x88d0, 0xe59f, 0x2a55, 0xd602, 0x0, 0x1);
        gbc.writeMem(0x4124, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xd1fe);
        EXPECT(gbc.pc(), 0x4125);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0295
        gbc.setState(0x5554, 0xb2dc, 0xb030, 0xe3e9, 0x3274, 0x63c9, 0x0, 0x1);
        gbc.writeMem(0x5554, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xb2dc);
        EXPECT(gbc.pc(), 0x5555);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0296
        gbc.setState(0x8545, 0xe967, 0xfdd0, 0x1501, 0xc34f, 0xe6ca, 0x0, 0x1);
        gbc.writeMem(0x8545, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xe967);
        EXPECT(gbc.pc(), 0x8546);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8545), 0xb3);
        // B3 0297
        gbc.setState(0xdc7e, 0x601e, 0x19a0, 0x4772, 0x16c2, 0x3cdf, 0x0, 0x0);
        gbc.writeMem(0xdc7e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x601e);
        EXPECT(gbc.pc(), 0xdc7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc7e), 0xb3);
        // B3 0298
        gbc.setState(0xda40, 0xd6b6, 0x7560, 0xb72c, 0xdb34, 0x25b0, 0x0, 0x1);
        gbc.writeMem(0xda40, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xd6b6);
        EXPECT(gbc.pc(), 0xda41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda40), 0xb3);
        // B3 029A
        gbc.setState(0x50cb, 0xf07c, 0xd980, 0x696, 0xa0e4, 0x7058, 0x0, 0x0);
        gbc.writeMem(0x50cb, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xf07c);
        EXPECT(gbc.pc(), 0x50cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 029B
        gbc.setState(0x39e5, 0xaf49, 0xf450, 0x44e3, 0xe7c4, 0x4b39, 0x0, 0x1);
        gbc.writeMem(0x39e5, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xaf49);
        EXPECT(gbc.pc(), 0x39e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 029C
        gbc.setState(0xe5f6, 0xed78, 0xe850, 0x44e1, 0xc86d, 0xf7d3, 0x0, 0x0);
        gbc.writeMem(0xe5f6, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xed78);
        EXPECT(gbc.pc(), 0xe5f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5f6), 0xb3);
        // B3 029D
        gbc.setState(0x714, 0xcf6f, 0x8120, 0x2211, 0x3791, 0x8013, 0x1, 0x1);
        gbc.writeMem(0x714, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xcf6f);
        EXPECT(gbc.pc(), 0x715);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 029E
        gbc.setState(0xd77, 0x2e05, 0xdb0, 0x61e6, 0xdd85, 0xe699, 0x1, 0x1);
        gbc.writeMem(0xd77, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x2e05);
        EXPECT(gbc.pc(), 0xd78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 029F
        gbc.setState(0x30c0, 0x71d, 0x8300, 0x1a23, 0x2567, 0x6b7b, 0x1, 0x0);
        gbc.writeMem(0x30c0, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x71d);
        EXPECT(gbc.pc(), 0x30c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02A0
        gbc.setState(0x3473, 0x2e30, 0x5b20, 0x527d, 0xaaa1, 0x9a77, 0x0, 0x1);
        gbc.writeMem(0x3473, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x2e30);
        EXPECT(gbc.pc(), 0x3474);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02A1
        gbc.setState(0x59c9, 0xba05, 0x19b0, 0xee20, 0x3e19, 0x662, 0x1, 0x1);
        gbc.writeMem(0x59c9, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xba05);
        EXPECT(gbc.pc(), 0x59ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02A2
        gbc.setState(0x345e, 0x30d6, 0x1230, 0xe906, 0x6062, 0x4cac, 0x1, 0x0);
        gbc.writeMem(0x345e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x30d6);
        EXPECT(gbc.pc(), 0x345f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02A3
        gbc.setState(0x9d88, 0x3eac, 0x8950, 0xf436, 0x1cf7, 0x529f, 0x0, 0x1);
        gbc.writeMem(0x9d88, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x3eac);
        EXPECT(gbc.pc(), 0x9d89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d88), 0xb3);
        // B3 02A4
        gbc.setState(0x6d74, 0x8dab, 0xb960, 0x3e0a, 0xa597, 0xb1e1, 0x0, 0x1);
        gbc.writeMem(0x6d74, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x8dab);
        EXPECT(gbc.pc(), 0x6d75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02A5
        gbc.setState(0x44d2, 0x9c53, 0xd720, 0x2bdb, 0xebfd, 0xa397, 0x0, 0x1);
        gbc.writeMem(0x44d2, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x9c53);
        EXPECT(gbc.pc(), 0x44d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02A6
        gbc.setState(0x91c9, 0xd8df, 0xec50, 0x533d, 0x3284, 0x99a7, 0x1, 0x1);
        gbc.writeMem(0x91c9, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xd8df);
        EXPECT(gbc.pc(), 0x91ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91c9), 0xb3);
        // B3 02A7
        gbc.setState(0xa540, 0xb280, 0xdfd0, 0xcd05, 0xabd2, 0xb11b, 0x0, 0x1);
        gbc.writeMem(0xa540, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xb280);
        EXPECT(gbc.pc(), 0xa541);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa540), 0xb3);
        // B3 02A8
        gbc.setState(0xe99a, 0xe6be, 0x6ee0, 0x60ae, 0x2f11, 0x3d1e, 0x0, 0x1);
        gbc.writeMem(0xe99a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xe6be);
        EXPECT(gbc.pc(), 0xe99b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe99a), 0xb3);
        // B3 02A9
        gbc.setState(0xdf11, 0xae05, 0x7f70, 0x4ed7, 0xf085, 0xfa9b, 0x0, 0x0);
        gbc.writeMem(0xdf11, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xae05);
        EXPECT(gbc.pc(), 0xdf12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf11), 0xb3);
        // B3 02AA
        gbc.setState(0xe70a, 0xd315, 0x75a0, 0x3434, 0x966b, 0x4bb9, 0x0, 0x1);
        gbc.writeMem(0xe70a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xd315);
        EXPECT(gbc.pc(), 0xe70b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe70a), 0xb3);
        // B3 02AB
        gbc.setState(0x7748, 0x8943, 0xab20, 0xf246, 0x7db0, 0xecde, 0x1, 0x0);
        gbc.writeMem(0x7748, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x8943);
        EXPECT(gbc.pc(), 0x7749);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02AC
        gbc.setState(0x6df, 0x8c5b, 0xa340, 0x2a46, 0x2ec9, 0x6439, 0x0, 0x1);
        gbc.writeMem(0x6df, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x8c5b);
        EXPECT(gbc.pc(), 0x6e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02AD
        gbc.setState(0xaf85, 0x3ed9, 0xa710, 0x427f, 0xd058, 0xefab, 0x0, 0x0);
        gbc.writeMem(0xaf85, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x3ed9);
        EXPECT(gbc.pc(), 0xaf86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf85), 0xb3);
        // B3 02AE
        gbc.setState(0x7024, 0x56c4, 0x2440, 0xc33c, 0xef8, 0x87be, 0x0, 0x1);
        gbc.writeMem(0x7024, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x56c4);
        EXPECT(gbc.pc(), 0x7025);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02AF
        gbc.setState(0xb033, 0x82ef, 0x4890, 0x6857, 0x6ca5, 0x168c, 0x0, 0x1);
        gbc.writeMem(0xb033, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x82ef);
        EXPECT(gbc.pc(), 0xb034);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb033), 0xb3);
        // B3 02B0
        gbc.setState(0xe3c1, 0x82d2, 0xc6f0, 0x8b78, 0xdafc, 0xb566, 0x0, 0x0);
        gbc.writeMem(0xe3c1, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x82d2);
        EXPECT(gbc.pc(), 0xe3c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3c1), 0xb3);
        // B3 02B1
        gbc.setState(0xaff2, 0x402f, 0xa390, 0x8712, 0xb266, 0xc560, 0x0, 0x0);
        gbc.writeMem(0xaff2, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x402f);
        EXPECT(gbc.pc(), 0xaff3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaff2), 0xb3);
        // B3 02B2
        gbc.setState(0x25c9, 0xe764, 0xd630, 0x5e3c, 0x8ed0, 0x181e, 0x1, 0x0);
        gbc.writeMem(0x25c9, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xe764);
        EXPECT(gbc.pc(), 0x25ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02B3
        gbc.setState(0x50e7, 0x43ee, 0x2560, 0x919a, 0xaeae, 0xbda6, 0x0, 0x1);
        gbc.writeMem(0x50e7, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x43ee);
        EXPECT(gbc.pc(), 0x50e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02B4
        gbc.setState(0x9aa8, 0xc8a0, 0xfe70, 0xa251, 0x4438, 0x4c8d, 0x1, 0x1);
        gbc.writeMem(0x9aa8, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xc8a0);
        EXPECT(gbc.pc(), 0x9aa9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9aa8), 0xb3);
        // B3 02B5
        gbc.setState(0x2c4a, 0x3e26, 0x2690, 0x50b3, 0x42e0, 0x6f6e, 0x0, 0x0);
        gbc.writeMem(0x2c4a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x3e26);
        EXPECT(gbc.pc(), 0x2c4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02B6
        gbc.setState(0x76de, 0xb1a0, 0x3cf0, 0xb3a1, 0x9149, 0x1541, 0x1, 0x1);
        gbc.writeMem(0x76de, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xb1a0);
        EXPECT(gbc.pc(), 0x76df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02B7
        gbc.setState(0x518c, 0x9e8f, 0x3f80, 0x3c9d, 0x532b, 0x59cd, 0x1, 0x1);
        gbc.writeMem(0x518c, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x9e8f);
        EXPECT(gbc.pc(), 0x518d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02B8
        gbc.setState(0x6db4, 0x272d, 0x7af0, 0xa124, 0x68a9, 0x41f0, 0x0, 0x1);
        gbc.writeMem(0x6db4, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x272d);
        EXPECT(gbc.pc(), 0x6db5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02B9
        gbc.setState(0xa473, 0x7b20, 0x1660, 0xf135, 0xeaf2, 0x9b63, 0x0, 0x0);
        gbc.writeMem(0xa473, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x7b20);
        EXPECT(gbc.pc(), 0xa474);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa473), 0xb3);
        // B3 02BA
        gbc.setState(0x4514, 0x81c6, 0xa1a0, 0x7776, 0x646e, 0xa21e, 0x1, 0x0);
        gbc.writeMem(0x4514, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x81c6);
        EXPECT(gbc.pc(), 0x4515);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02BB
        gbc.setState(0x8657, 0xc54d, 0x6730, 0x7726, 0x2649, 0xbcc1, 0x1, 0x0);
        gbc.writeMem(0x8657, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xc54d);
        EXPECT(gbc.pc(), 0x8658);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8657), 0xb3);
        // B3 02BC
        gbc.setState(0x441b, 0xabd6, 0x9960, 0xf301, 0xc4af, 0xb1e2, 0x0, 0x0);
        gbc.writeMem(0x441b, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xabd6);
        EXPECT(gbc.pc(), 0x441c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02BD
        gbc.setState(0xc701, 0xed9e, 0x2d0, 0xe16a, 0xc696, 0xa0b6, 0x1, 0x0);
        gbc.writeMem(0xc701, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xed9e);
        EXPECT(gbc.pc(), 0xc702);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc701), 0xb3);
        // B3 02BE
        gbc.setState(0xb024, 0x72c3, 0xea00, 0xd47c, 0x69ca, 0x61be, 0x0, 0x1);
        gbc.writeMem(0xb024, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x72c3);
        EXPECT(gbc.pc(), 0xb025);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb024), 0xb3);
        // B3 02BF
        gbc.setState(0x1cd7, 0x6769, 0x5d90, 0xd9e3, 0xa65a, 0xd32, 0x1, 0x1);
        gbc.writeMem(0x1cd7, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x6769);
        EXPECT(gbc.pc(), 0x1cd8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02C0
        gbc.setState(0x8719, 0xd69c, 0x6620, 0xb9dc, 0x8275, 0xe39b, 0x0, 0x0);
        gbc.writeMem(0x8719, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xd69c);
        EXPECT(gbc.pc(), 0x871a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8719), 0xb3);
        // B3 02C2
        gbc.setState(0xce12, 0xbea6, 0x2990, 0x464e, 0xf00a, 0x9aaa, 0x1, 0x0);
        gbc.writeMem(0xce12, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xbea6);
        EXPECT(gbc.pc(), 0xce13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce12), 0xb3);
        // B3 02C3
        gbc.setState(0xdca8, 0xe62b, 0x6aa0, 0x6598, 0x272c, 0x2c1a, 0x1, 0x1);
        gbc.writeMem(0xdca8, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xe62b);
        EXPECT(gbc.pc(), 0xdca9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdca8), 0xb3);
        // B3 02C4
        gbc.setState(0xc644, 0x735e, 0x86a0, 0x837c, 0x167c, 0x5f8f, 0x0, 0x0);
        gbc.writeMem(0xc644, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x735e);
        EXPECT(gbc.pc(), 0xc645);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc644), 0xb3);
        // B3 02C5
        gbc.setState(0x8aee, 0x8977, 0x9e30, 0x9cf9, 0x8023, 0x4003, 0x0, 0x0);
        gbc.writeMem(0x8aee, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x8977);
        EXPECT(gbc.pc(), 0x8aef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8aee), 0xb3);
        // B3 02C6
        gbc.setState(0xa0c9, 0x92bf, 0x5ac0, 0xfb42, 0x15c, 0x7c65, 0x0, 0x0);
        gbc.writeMem(0xa0c9, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x92bf);
        EXPECT(gbc.pc(), 0xa0ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0c9), 0xb3);
        // B3 02C7
        gbc.setState(0xd718, 0xcbf3, 0x4990, 0xf794, 0x718e, 0x99c, 0x0, 0x1);
        gbc.writeMem(0xd718, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xcbf3);
        EXPECT(gbc.pc(), 0xd719);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd718), 0xb3);
        // B3 02C8
        gbc.setState(0xac6, 0x2b27, 0x46e0, 0xc370, 0x8939, 0x4e62, 0x1, 0x1);
        gbc.writeMem(0xac6, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x2b27);
        EXPECT(gbc.pc(), 0xac7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02C9
        gbc.setState(0x80d, 0xe13f, 0xc4d0, 0x60d3, 0xa579, 0x7c29, 0x1, 0x0);
        gbc.writeMem(0x80d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xe13f);
        EXPECT(gbc.pc(), 0x80e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02CB
        gbc.setState(0x60ec, 0x8d26, 0xfba0, 0x413e, 0xc67d, 0xb584, 0x0, 0x0);
        gbc.writeMem(0x60ec, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x8d26);
        EXPECT(gbc.pc(), 0x60ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02CC
        gbc.setState(0xc194, 0xb761, 0x4270, 0x99ce, 0x9155, 0xb79c, 0x0, 0x0);
        gbc.writeMem(0xc194, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xb761);
        EXPECT(gbc.pc(), 0xc195);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc194), 0xb3);
        // B3 02CD
        gbc.setState(0x1c1a, 0x24f1, 0x54b0, 0xd3c, 0x185e, 0xcb43, 0x1, 0x0);
        gbc.writeMem(0x1c1a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x24f1);
        EXPECT(gbc.pc(), 0x1c1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02CE
        gbc.setState(0xbc0f, 0xada6, 0xaa20, 0x59fe, 0x148e, 0x32e3, 0x0, 0x1);
        gbc.writeMem(0xbc0f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xada6);
        EXPECT(gbc.pc(), 0xbc10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc0f), 0xb3);
        // B3 02CF
        gbc.setState(0x99a2, 0x9822, 0x2c50, 0x8361, 0x37d2, 0xf1c5, 0x0, 0x1);
        gbc.writeMem(0x99a2, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x9822);
        EXPECT(gbc.pc(), 0x99a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99a2), 0xb3);
        // B3 02D0
        gbc.setState(0xd5c9, 0xac9a, 0x3230, 0x897, 0x6be7, 0x9232, 0x0, 0x1);
        gbc.writeMem(0xd5c9, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xac9a);
        EXPECT(gbc.pc(), 0xd5ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5c9), 0xb3);
        // B3 02D1
        gbc.setState(0x154e, 0x1969, 0xa8f0, 0x1770, 0xc313, 0x2b55, 0x0, 0x0);
        gbc.writeMem(0x154e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x1969);
        EXPECT(gbc.pc(), 0x154f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02D2
        gbc.setState(0xd0b2, 0x7371, 0x6410, 0xd03d, 0x5565, 0xa407, 0x1, 0x0);
        gbc.writeMem(0xd0b2, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x7371);
        EXPECT(gbc.pc(), 0xd0b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0b2), 0xb3);
        // B3 02D3
        gbc.setState(0x4ce5, 0xc6ec, 0x9680, 0xce0b, 0xc953, 0xadb8, 0x1, 0x0);
        gbc.writeMem(0x4ce5, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xc6ec);
        EXPECT(gbc.pc(), 0x4ce6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02D4
        gbc.setState(0x5f3d, 0x297d, 0xcfd0, 0xb600, 0x54c6, 0xa345, 0x0, 0x1);
        gbc.writeMem(0x5f3d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x297d);
        EXPECT(gbc.pc(), 0x5f3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02D5
        gbc.setState(0xbeb7, 0x218a, 0xd60, 0x6588, 0xd545, 0xc0c1, 0x0, 0x0);
        gbc.writeMem(0xbeb7, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x218a);
        EXPECT(gbc.pc(), 0xbeb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbeb7), 0xb3);
        // B3 02D6
        gbc.setState(0x62cf, 0x181d, 0x3880, 0x3c20, 0xf18f, 0xbb40, 0x1, 0x1);
        gbc.writeMem(0x62cf, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x181d);
        EXPECT(gbc.pc(), 0x62d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02D7
        gbc.setState(0x4897, 0xee62, 0xeb40, 0x486d, 0xf044, 0x3775, 0x0, 0x1);
        gbc.writeMem(0x4897, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xee62);
        EXPECT(gbc.pc(), 0x4898);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02D8
        gbc.setState(0x5f89, 0x976b, 0x580, 0x4232, 0xe062, 0x9c04, 0x0, 0x0);
        gbc.writeMem(0x5f89, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x976b);
        EXPECT(gbc.pc(), 0x5f8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02D9
        gbc.setState(0xc4d, 0xa917, 0x5690, 0x8b37, 0x5ef3, 0xe278, 0x1, 0x1);
        gbc.writeMem(0xc4d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xa917);
        EXPECT(gbc.pc(), 0xc4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02DA
        gbc.setState(0x3685, 0xcc2, 0x1c50, 0xa2aa, 0xfd2c, 0xd3ba, 0x1, 0x1);
        gbc.writeMem(0x3685, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xcc2);
        EXPECT(gbc.pc(), 0x3686);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02DB
        gbc.setState(0x7303, 0x9427, 0xeca0, 0xa809, 0x53c3, 0x321c, 0x1, 0x0);
        gbc.writeMem(0x7303, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x9427);
        EXPECT(gbc.pc(), 0x7304);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02DC
        gbc.setState(0x469f, 0xaac3, 0xdda0, 0x84cd, 0xb322, 0xd760, 0x0, 0x1);
        gbc.writeMem(0x469f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xaac3);
        EXPECT(gbc.pc(), 0x46a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02DD
        gbc.setState(0xda75, 0x881a, 0xf6c0, 0xc822, 0xa498, 0x5d70, 0x1, 0x1);
        gbc.writeMem(0xda75, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x881a);
        EXPECT(gbc.pc(), 0xda76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda75), 0xb3);
        // B3 02DE
        gbc.setState(0xacd0, 0x72c4, 0x7040, 0x3597, 0x7fc3, 0xb1c7, 0x0, 0x1);
        gbc.writeMem(0xacd0, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x72c4);
        EXPECT(gbc.pc(), 0xacd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacd0), 0xb3);
        // B3 02DF
        gbc.setState(0x9064, 0x54a0, 0x3810, 0x5a47, 0xcef0, 0xdb63, 0x1, 0x1);
        gbc.writeMem(0x9064, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x54a0);
        EXPECT(gbc.pc(), 0x9065);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9064), 0xb3);
        // B3 02E0
        gbc.setState(0x98c0, 0x2550, 0xfcc0, 0x3b4f, 0x4cab, 0xe4b0, 0x0, 0x0);
        gbc.writeMem(0x98c0, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x2550);
        EXPECT(gbc.pc(), 0x98c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98c0), 0xb3);
        // B3 02E1
        gbc.setState(0x6f52, 0x2ed1, 0x7480, 0x35ba, 0x3e15, 0x69ba, 0x0, 0x0);
        gbc.writeMem(0x6f52, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x2ed1);
        EXPECT(gbc.pc(), 0x6f53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02E2
        gbc.setState(0xca86, 0x6bf5, 0x980, 0x9293, 0x1e24, 0x9e99, 0x0, 0x0);
        gbc.writeMem(0xca86, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x6bf5);
        EXPECT(gbc.pc(), 0xca87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca86), 0xb3);
        // B3 02E3
        gbc.setState(0x1a9e, 0xc4d5, 0x1ce0, 0xa625, 0x5439, 0x3def, 0x0, 0x0);
        gbc.writeMem(0x1a9e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xc4d5);
        EXPECT(gbc.pc(), 0x1a9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02E4
        gbc.setState(0x4140, 0x9928, 0x9260, 0x3c90, 0x4ae9, 0xf97b, 0x0, 0x1);
        gbc.writeMem(0x4140, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x9928);
        EXPECT(gbc.pc(), 0x4141);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02E5
        gbc.setState(0x1919, 0x44eb, 0x1570, 0xe99f, 0xb97e, 0x97c6, 0x1, 0x1);
        gbc.writeMem(0x1919, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x44eb);
        EXPECT(gbc.pc(), 0x191a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02E6
        gbc.setState(0x2e41, 0x9e92, 0x3bc0, 0xd63b, 0x4409, 0x73b0, 0x1, 0x1);
        gbc.writeMem(0x2e41, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x9e92);
        EXPECT(gbc.pc(), 0x2e42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02E7
        gbc.setState(0xa77d, 0xb981, 0xece0, 0x8f68, 0xc8, 0x641, 0x0, 0x1);
        gbc.writeMem(0xa77d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xb981);
        EXPECT(gbc.pc(), 0xa77e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa77d), 0xb3);
        // B3 02E8
        gbc.setState(0x826d, 0x61ed, 0xb900, 0x1481, 0xe22d, 0x1007, 0x0, 0x0);
        gbc.writeMem(0x826d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x61ed);
        EXPECT(gbc.pc(), 0x826e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x826d), 0xb3);
        // B3 02E9
        gbc.setState(0x94b, 0x23ae, 0xe3a0, 0xd275, 0x262a, 0xa03b, 0x0, 0x0);
        gbc.writeMem(0x94b, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x23ae);
        EXPECT(gbc.pc(), 0x94c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02EA
        gbc.setState(0x5ff8, 0xe74, 0xde80, 0xf155, 0x62fc, 0x66d3, 0x1, 0x0);
        gbc.writeMem(0x5ff8, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xe74);
        EXPECT(gbc.pc(), 0x5ff9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02EB
        gbc.setState(0xd888, 0xba2b, 0x8de0, 0x58d5, 0xccef, 0x6fd0, 0x0, 0x1);
        gbc.writeMem(0xd888, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xba2b);
        EXPECT(gbc.pc(), 0xd889);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd888), 0xb3);
        // B3 02EC
        gbc.setState(0x4e3d, 0x790f, 0x5280, 0xfc11, 0xc78e, 0xaf11, 0x0, 0x0);
        gbc.writeMem(0x4e3d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x790f);
        EXPECT(gbc.pc(), 0x4e3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02ED
        gbc.setState(0x1e1c, 0xbfc6, 0x80d0, 0x444c, 0x6fa8, 0x29f9, 0x0, 0x0);
        gbc.writeMem(0x1e1c, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xbfc6);
        EXPECT(gbc.pc(), 0x1e1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02EE
        gbc.setState(0x8a2a, 0x86a2, 0x8eb0, 0xc023, 0xf593, 0xf6a2, 0x0, 0x0);
        gbc.writeMem(0x8a2a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x86a2);
        EXPECT(gbc.pc(), 0x8a2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a2a), 0xb3);
        // B3 02EF
        gbc.setState(0x97ba, 0xea0, 0xaad0, 0xa2e5, 0xd7ff, 0x3a3c, 0x1, 0x0);
        gbc.writeMem(0x97ba, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xea0);
        EXPECT(gbc.pc(), 0x97bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97ba), 0xb3);
        // B3 02F0
        gbc.setState(0x12a6, 0xe728, 0x3860, 0xf9b8, 0x9be0, 0x1438, 0x1, 0x0);
        gbc.writeMem(0x12a6, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xe728);
        EXPECT(gbc.pc(), 0x12a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02F1
        gbc.setState(0x274a, 0x5a39, 0x90b0, 0x6c81, 0x84e5, 0x1619, 0x1, 0x0);
        gbc.writeMem(0x274a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x5a39);
        EXPECT(gbc.pc(), 0x274b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02F2
        gbc.setState(0x8ca7, 0xa353, 0xdab0, 0x333b, 0xd146, 0x6b97, 0x0, 0x1);
        gbc.writeMem(0x8ca7, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xa353);
        EXPECT(gbc.pc(), 0x8ca8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ca7), 0xb3);
        // B3 02F3
        gbc.setState(0xb64f, 0x144c, 0xbd30, 0x1be, 0x7bf4, 0xb3e7, 0x0, 0x1);
        gbc.writeMem(0xb64f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x144c);
        EXPECT(gbc.pc(), 0xb650);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb64f), 0xb3);
        // B3 02F4
        gbc.setState(0x3074, 0x2d3d, 0x3d40, 0xd014, 0x9e11, 0xe089, 0x1, 0x0);
        gbc.writeMem(0x3074, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x2d3d);
        EXPECT(gbc.pc(), 0x3075);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02F5
        gbc.setState(0x96e1, 0x4aa3, 0x98a0, 0x5809, 0x71d1, 0x84fc, 0x0, 0x0);
        gbc.writeMem(0x96e1, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x4aa3);
        EXPECT(gbc.pc(), 0x96e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96e1), 0xb3);
        // B3 02F6
        gbc.setState(0x3693, 0x6343, 0xa450, 0xc6ed, 0x4fdf, 0x4bc6, 0x0, 0x0);
        gbc.writeMem(0x3693, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x6343);
        EXPECT(gbc.pc(), 0x3694);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02F7
        gbc.setState(0x4f9e, 0x9021, 0x2280, 0x473f, 0xc5b7, 0xdd9b, 0x1, 0x0);
        gbc.writeMem(0x4f9e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x9021);
        EXPECT(gbc.pc(), 0x4f9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02F8
        gbc.setState(0x386, 0xb25e, 0x9810, 0x8b52, 0xeedf, 0x8de4, 0x0, 0x1);
        gbc.writeMem(0x386, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xb25e);
        EXPECT(gbc.pc(), 0x387);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02F9
        gbc.setState(0xd335, 0x8a8c, 0xe70, 0x2e40, 0x7bc0, 0xa12e, 0x1, 0x0);
        gbc.writeMem(0xd335, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x8a8c);
        EXPECT(gbc.pc(), 0xd336);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd335), 0xb3);
        // B3 02FA
        gbc.setState(0x6463, 0x1809, 0x8370, 0x23d5, 0xe7d4, 0xee96, 0x1, 0x1);
        gbc.writeMem(0x6463, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x1809);
        EXPECT(gbc.pc(), 0x6464);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02FB
        gbc.setState(0x6db2, 0xf0fe, 0x2080, 0x898f, 0x62e4, 0x7a92, 0x1, 0x0);
        gbc.writeMem(0x6db2, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xf0fe);
        EXPECT(gbc.pc(), 0x6db3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02FC
        gbc.setState(0x7186, 0x41e9, 0x8340, 0x9bd3, 0x5c7b, 0x94e9, 0x1, 0x0);
        gbc.writeMem(0x7186, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x41e9);
        EXPECT(gbc.pc(), 0x7187);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02FD
        gbc.setState(0x61dc, 0x4375, 0xe9a0, 0x8fa, 0xac72, 0x221e, 0x1, 0x1);
        gbc.writeMem(0x61dc, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x4375);
        EXPECT(gbc.pc(), 0x61dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02FE
        gbc.setState(0x55c, 0x59b6, 0x980, 0x750c, 0xb5d4, 0x6458, 0x0, 0x1);
        gbc.writeMem(0x55c, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x59b6);
        EXPECT(gbc.pc(), 0x55d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 02FF
        gbc.setState(0x60ec, 0xaaec, 0xfa60, 0xadf7, 0x8291, 0xa601, 0x1, 0x1);
        gbc.writeMem(0x60ec, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xaaec);
        EXPECT(gbc.pc(), 0x60ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0300
        gbc.setState(0x3fdf, 0x9093, 0xcf30, 0xc86d, 0x9e85, 0xfad1, 0x1, 0x0);
        gbc.writeMem(0x3fdf, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x9093);
        EXPECT(gbc.pc(), 0x3fe0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0301
        gbc.setState(0xe287, 0x23cb, 0xe740, 0xd6c3, 0x4d0e, 0x4a58, 0x0, 0x1);
        gbc.writeMem(0xe287, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x23cb);
        EXPECT(gbc.pc(), 0xe288);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe287), 0xb3);
        // B3 0302
        gbc.setState(0x5dcd, 0x7fb, 0xcd30, 0xab19, 0xf999, 0x5144, 0x1, 0x1);
        gbc.writeMem(0x5dcd, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x7fb);
        EXPECT(gbc.pc(), 0x5dce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0303
        gbc.setState(0xc5d0, 0x6c36, 0x9a20, 0x234a, 0xe732, 0xd7f8, 0x1, 0x1);
        gbc.writeMem(0xc5d0, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x6c36);
        EXPECT(gbc.pc(), 0xc5d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5d0), 0xb3);
        // B3 0304
        gbc.setState(0x2e89, 0x3d29, 0x5320, 0xae7b, 0xce5d, 0x8823, 0x1, 0x1);
        gbc.writeMem(0x2e89, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x3d29);
        EXPECT(gbc.pc(), 0x2e8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0305
        gbc.setState(0xb397, 0x5c94, 0xa880, 0x9478, 0xd59, 0xdc9b, 0x1, 0x0);
        gbc.writeMem(0xb397, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x5c94);
        EXPECT(gbc.pc(), 0xb398);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb397), 0xb3);
        // B3 0306
        gbc.setState(0xae98, 0xd087, 0x30b0, 0xe9b3, 0x23da, 0x1f22, 0x0, 0x1);
        gbc.writeMem(0xae98, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xd087);
        EXPECT(gbc.pc(), 0xae99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae98), 0xb3);
        // B3 0308
        gbc.setState(0x1d9f, 0x5137, 0x3f00, 0x5fa4, 0x8ce, 0xcff2, 0x1, 0x1);
        gbc.writeMem(0x1d9f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x5137);
        EXPECT(gbc.pc(), 0x1da0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0309
        gbc.setState(0x7b75, 0x95a, 0x6260, 0xdf16, 0x6ea1, 0xa620, 0x1, 0x0);
        gbc.writeMem(0x7b75, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x95a);
        EXPECT(gbc.pc(), 0x7b76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 030A
        gbc.setState(0xcbb, 0xf2e0, 0xdbf0, 0x4880, 0x602a, 0x54be, 0x1, 0x0);
        gbc.writeMem(0xcbb, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xf2e0);
        EXPECT(gbc.pc(), 0xcbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 030B
        gbc.setState(0xe2fd, 0xbe70, 0xcf40, 0x365e, 0xe99f, 0x279e, 0x0, 0x0);
        gbc.writeMem(0xe2fd, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xbe70);
        EXPECT(gbc.pc(), 0xe2fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2fd), 0xb3);
        // B3 030C
        gbc.setState(0xa646, 0x966c, 0x8ac0, 0xb31b, 0x746d, 0x83d4, 0x1, 0x0);
        gbc.writeMem(0xa646, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x966c);
        EXPECT(gbc.pc(), 0xa647);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa646), 0xb3);
        // B3 030D
        gbc.setState(0x3eae, 0x63c9, 0x18c0, 0xb3f9, 0xfc85, 0x25c2, 0x0, 0x1);
        gbc.writeMem(0x3eae, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x63c9);
        EXPECT(gbc.pc(), 0x3eaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 030E
        gbc.setState(0x487f, 0xbfec, 0x2ae0, 0x39e4, 0x44e5, 0x91c8, 0x1, 0x1);
        gbc.writeMem(0x487f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xbfec);
        EXPECT(gbc.pc(), 0x4880);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 030F
        gbc.setState(0x9c5, 0x85e3, 0x92b0, 0x48f7, 0x55d2, 0xcd8c, 0x1, 0x1);
        gbc.writeMem(0x9c5, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x85e3);
        EXPECT(gbc.pc(), 0x9c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0310
        gbc.setState(0xaee0, 0xe452, 0x4870, 0x6627, 0xdaee, 0xce65, 0x0, 0x1);
        gbc.writeMem(0xaee0, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xe452);
        EXPECT(gbc.pc(), 0xaee1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaee0), 0xb3);
        // B3 0311
        gbc.setState(0x5b5b, 0x6d5e, 0x9b30, 0x9ff, 0xfb56, 0x1d68, 0x1, 0x0);
        gbc.writeMem(0x5b5b, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x6d5e);
        EXPECT(gbc.pc(), 0x5b5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0312
        gbc.setState(0xbda9, 0x363b, 0x9e10, 0xb697, 0x4015, 0x5ff7, 0x1, 0x1);
        gbc.writeMem(0xbda9, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x363b);
        EXPECT(gbc.pc(), 0xbdaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbda9), 0xb3);
        // B3 0313
        gbc.setState(0x9201, 0x6674, 0x3db0, 0x5e32, 0xb0c7, 0xdfbf, 0x1, 0x1);
        gbc.writeMem(0x9201, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x6674);
        EXPECT(gbc.pc(), 0x9202);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9201), 0xb3);
        // B3 0314
        gbc.setState(0x522, 0xbce8, 0x93e0, 0xe6ef, 0x50d4, 0x8dc6, 0x1, 0x1);
        gbc.writeMem(0x522, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xbce8);
        EXPECT(gbc.pc(), 0x523);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0315
        gbc.setState(0x564d, 0x56b4, 0x3890, 0x832b, 0x2d83, 0x852, 0x0, 0x1);
        gbc.writeMem(0x564d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x56b4);
        EXPECT(gbc.pc(), 0x564e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0316
        gbc.setState(0x7a14, 0x9ef2, 0x7770, 0x9f15, 0xfc02, 0x6678, 0x0, 0x0);
        gbc.writeMem(0x7a14, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x9ef2);
        EXPECT(gbc.pc(), 0x7a15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0317
        gbc.setState(0x1927, 0x2254, 0x3000, 0x9b7f, 0x38d2, 0x4767, 0x0, 0x1);
        gbc.writeMem(0x1927, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x2254);
        EXPECT(gbc.pc(), 0x1928);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0318
        gbc.setState(0x4bb6, 0x44c9, 0x9780, 0x59e1, 0x1594, 0xefac, 0x0, 0x1);
        gbc.writeMem(0x4bb6, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x44c9);
        EXPECT(gbc.pc(), 0x4bb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0319
        gbc.setState(0xa16f, 0x8876, 0x1390, 0x24d6, 0x418c, 0xe8aa, 0x0, 0x1);
        gbc.writeMem(0xa16f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x8876);
        EXPECT(gbc.pc(), 0xa170);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa16f), 0xb3);
        // B3 031A
        gbc.setState(0x2e0e, 0xb6c, 0xd8c0, 0xf255, 0x7b, 0x1220, 0x1, 0x1);
        gbc.writeMem(0x2e0e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xb6c);
        EXPECT(gbc.pc(), 0x2e0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 031B
        gbc.setState(0x5482, 0x9f46, 0xcb50, 0xc07e, 0x4fe8, 0x55fa, 0x0, 0x1);
        gbc.writeMem(0x5482, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x9f46);
        EXPECT(gbc.pc(), 0x5483);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 031C
        gbc.setState(0x62a, 0x4e6f, 0x51e0, 0xbc45, 0xe9da, 0x5b0e, 0x1, 0x1);
        gbc.writeMem(0x62a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x4e6f);
        EXPECT(gbc.pc(), 0x62b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 031D
        gbc.setState(0xa39c, 0xfc90, 0x2b40, 0x7f19, 0xe53d, 0xaa9c, 0x0, 0x1);
        gbc.writeMem(0xa39c, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xfc90);
        EXPECT(gbc.pc(), 0xa39d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa39c), 0xb3);
        // B3 031E
        gbc.setState(0xe07a, 0x5dfa, 0x27a0, 0xcb31, 0xc09c, 0x7f13, 0x1, 0x0);
        gbc.writeMem(0xe07a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x5dfa);
        EXPECT(gbc.pc(), 0xe07b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe07a), 0xb3);
        // B3 031F
        gbc.setState(0x8b37, 0xa733, 0xd840, 0x47de, 0xcf0a, 0xdad2, 0x0, 0x1);
        gbc.writeMem(0x8b37, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xa733);
        EXPECT(gbc.pc(), 0x8b38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b37), 0xb3);
        // B3 0320
        gbc.setState(0x1e4b, 0x2d06, 0xe740, 0x8cfe, 0x62a7, 0x91fb, 0x0, 0x0);
        gbc.writeMem(0x1e4b, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x2d06);
        EXPECT(gbc.pc(), 0x1e4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0321
        gbc.setState(0x5eb3, 0x8382, 0x3820, 0x2920, 0x9a70, 0x9794, 0x1, 0x0);
        gbc.writeMem(0x5eb3, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x8382);
        EXPECT(gbc.pc(), 0x5eb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0322
        gbc.setState(0x8712, 0xe88, 0x9fc0, 0x46a8, 0x96d8, 0xe031, 0x1, 0x1);
        gbc.writeMem(0x8712, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xe88);
        EXPECT(gbc.pc(), 0x8713);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8712), 0xb3);
        // B3 0324
        gbc.setState(0xc57a, 0xe2f2, 0xbee0, 0xe2c3, 0x23a1, 0x8bff, 0x1, 0x1);
        gbc.writeMem(0xc57a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xe2f2);
        EXPECT(gbc.pc(), 0xc57b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc57a), 0xb3);
        // B3 0325
        gbc.setState(0xce1f, 0xf2f1, 0x1250, 0x75cd, 0x41a4, 0x7fd7, 0x1, 0x0);
        gbc.writeMem(0xce1f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xf2f1);
        EXPECT(gbc.pc(), 0xce20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce1f), 0xb3);
        // B3 0326
        gbc.setState(0xb59d, 0xaca9, 0xd560, 0x1eca, 0x3499, 0x90e5, 0x0, 0x0);
        gbc.writeMem(0xb59d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xaca9);
        EXPECT(gbc.pc(), 0xb59e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb59d), 0xb3);
        // B3 0328
        gbc.setState(0x7466, 0x71c3, 0x5230, 0xbabe, 0xf91, 0xd867, 0x1, 0x1);
        gbc.writeMem(0x7466, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x71c3);
        EXPECT(gbc.pc(), 0x7467);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 032B
        gbc.setState(0x6a11, 0xe9cf, 0x2f20, 0xd438, 0x1707, 0x8da3, 0x0, 0x1);
        gbc.writeMem(0x6a11, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xe9cf);
        EXPECT(gbc.pc(), 0x6a12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 032C
        gbc.setState(0xc1cf, 0x79a6, 0xc960, 0x6500, 0xcb06, 0x6db2, 0x0, 0x1);
        gbc.writeMem(0xc1cf, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x79a6);
        EXPECT(gbc.pc(), 0xc1d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1cf), 0xb3);
        // B3 032E
        gbc.setState(0x18a9, 0xcc8a, 0x700, 0xa181, 0x8a41, 0xe88d, 0x0, 0x1);
        gbc.writeMem(0x18a9, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xcc8a);
        EXPECT(gbc.pc(), 0x18aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 032F
        gbc.setState(0x480d, 0x8028, 0x7720, 0xef41, 0xaabb, 0x99a7, 0x0, 0x0);
        gbc.writeMem(0x480d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x8028);
        EXPECT(gbc.pc(), 0x480e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0330
        gbc.setState(0xb03e, 0x3455, 0x7bf0, 0x62f5, 0x6299, 0x9d91, 0x1, 0x1);
        gbc.writeMem(0xb03e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x3455);
        EXPECT(gbc.pc(), 0xb03f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb03e), 0xb3);
        // B3 0331
        gbc.setState(0x153e, 0xff1e, 0xb060, 0xf380, 0x2b3c, 0x1438, 0x1, 0x0);
        gbc.writeMem(0x153e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xff1e);
        EXPECT(gbc.pc(), 0x153f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0332
        gbc.setState(0x682b, 0x7b6a, 0x1430, 0x6b89, 0xbc50, 0x3d67, 0x0, 0x0);
        gbc.writeMem(0x682b, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x7b6a);
        EXPECT(gbc.pc(), 0x682c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0333
        gbc.setState(0xacd4, 0xe47e, 0x1880, 0x1f25, 0xbad5, 0x1c55, 0x0, 0x0);
        gbc.writeMem(0xacd4, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xe47e);
        EXPECT(gbc.pc(), 0xacd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacd4), 0xb3);
        // B3 0334
        gbc.setState(0xc950, 0x6c0c, 0x1c70, 0xacc4, 0xe60c, 0xec74, 0x1, 0x0);
        gbc.writeMem(0xc950, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x6c0c);
        EXPECT(gbc.pc(), 0xc951);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc950), 0xb3);
        // B3 0335
        gbc.setState(0xee6a, 0x54e4, 0x7350, 0x5209, 0x2983, 0xdad6, 0x0, 0x1);
        gbc.writeMem(0xee6a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x54e4);
        EXPECT(gbc.pc(), 0xee6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee6a), 0xb3);
        // B3 0336
        gbc.setState(0x12b8, 0x8795, 0x46a0, 0x434a, 0x6684, 0xd65d, 0x1, 0x1);
        gbc.writeMem(0x12b8, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x8795);
        EXPECT(gbc.pc(), 0x12b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0337
        gbc.setState(0x7365, 0x8c48, 0xe980, 0xaf5, 0xcdf9, 0x7add, 0x0, 0x1);
        gbc.writeMem(0x7365, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x8c48);
        EXPECT(gbc.pc(), 0x7366);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0339
        gbc.setState(0x4869, 0x1d61, 0x42b0, 0x135c, 0x616e, 0x3fac, 0x1, 0x1);
        gbc.writeMem(0x4869, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x1d61);
        EXPECT(gbc.pc(), 0x486a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 033A
        gbc.setState(0xbba6, 0xe9d8, 0x4b50, 0x1cd0, 0x551e, 0xce84, 0x1, 0x0);
        gbc.writeMem(0xbba6, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xe9d8);
        EXPECT(gbc.pc(), 0xbba7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbba6), 0xb3);
        // B3 033B
        gbc.setState(0x89f0, 0x6a1a, 0xc540, 0xc57a, 0x493, 0xc266, 0x0, 0x1);
        gbc.writeMem(0x89f0, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x6a1a);
        EXPECT(gbc.pc(), 0x89f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89f0), 0xb3);
        // B3 033C
        gbc.setState(0x4f26, 0x87f5, 0x1680, 0x9184, 0x1510, 0xea86, 0x0, 0x1);
        gbc.writeMem(0x4f26, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x87f5);
        EXPECT(gbc.pc(), 0x4f27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 033D
        gbc.setState(0x921d, 0xe279, 0x8f30, 0x1203, 0x8e91, 0x29e9, 0x0, 0x1);
        gbc.writeMem(0x921d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xe279);
        EXPECT(gbc.pc(), 0x921e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x921d), 0xb3);
        // B3 033E
        gbc.setState(0x3266, 0x751, 0x900, 0x89b4, 0x983d, 0x9291, 0x0, 0x1);
        gbc.writeMem(0x3266, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x751);
        EXPECT(gbc.pc(), 0x3267);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 033F
        gbc.setState(0x64c0, 0xb66a, 0xb2b0, 0x76b1, 0xf6ed, 0x1d39, 0x1, 0x1);
        gbc.writeMem(0x64c0, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xb66a);
        EXPECT(gbc.pc(), 0x64c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0340
        gbc.setState(0x587e, 0x13ed, 0x80c0, 0x7aad, 0x5c77, 0x3424, 0x1, 0x1);
        gbc.writeMem(0x587e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x13ed);
        EXPECT(gbc.pc(), 0x587f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0341
        gbc.setState(0x2bac, 0xf7b, 0x1b50, 0x9ad4, 0x190e, 0xa841, 0x1, 0x1);
        gbc.writeMem(0x2bac, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xf7b);
        EXPECT(gbc.pc(), 0x2bad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0343
        gbc.setState(0xcfc8, 0x7219, 0x3ee0, 0xf800, 0x4557, 0xe1b6, 0x1, 0x0);
        gbc.writeMem(0xcfc8, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x7219);
        EXPECT(gbc.pc(), 0xcfc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfc8), 0xb3);
        // B3 0344
        gbc.setState(0x48f4, 0xad4e, 0x3c50, 0x6873, 0x3909, 0xe36e, 0x1, 0x0);
        gbc.writeMem(0x48f4, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xad4e);
        EXPECT(gbc.pc(), 0x48f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0345
        gbc.setState(0x29a8, 0x6e7a, 0x4d10, 0xd18b, 0xc1f6, 0x22, 0x0, 0x0);
        gbc.writeMem(0x29a8, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x6e7a);
        EXPECT(gbc.pc(), 0x29a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0346
        gbc.setState(0x903d, 0x8983, 0xb630, 0x45df, 0xdba3, 0xbe2, 0x1, 0x0);
        gbc.writeMem(0x903d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x8983);
        EXPECT(gbc.pc(), 0x903e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x903d), 0xb3);
        // B3 0347
        gbc.setState(0x995c, 0x6179, 0xeb90, 0x3310, 0x4a9e, 0xb905, 0x0, 0x0);
        gbc.writeMem(0x995c, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x6179);
        EXPECT(gbc.pc(), 0x995d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x995c), 0xb3);
        // B3 0348
        gbc.setState(0x6854, 0xba73, 0x9af0, 0x2d83, 0x8f54, 0xe9ce, 0x0, 0x0);
        gbc.writeMem(0x6854, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xba73);
        EXPECT(gbc.pc(), 0x6855);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0349
        gbc.setState(0xd42f, 0x2e3a, 0x5fb0, 0x4d7, 0x1080, 0x8611, 0x1, 0x1);
        gbc.writeMem(0xd42f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x2e3a);
        EXPECT(gbc.pc(), 0xd430);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd42f), 0xb3);
        // B3 034A
        gbc.setState(0xd8de, 0x4abd, 0x91f0, 0x376f, 0x59cf, 0xeda4, 0x1, 0x1);
        gbc.writeMem(0xd8de, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x4abd);
        EXPECT(gbc.pc(), 0xd8df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8de), 0xb3);
        // B3 034B
        gbc.setState(0xad2a, 0xcdd7, 0x1070, 0x3d0b, 0x30bd, 0xd376, 0x1, 0x0);
        gbc.writeMem(0xad2a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xcdd7);
        EXPECT(gbc.pc(), 0xad2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad2a), 0xb3);
        // B3 034C
        gbc.setState(0x7b95, 0x27a6, 0x5660, 0x2609, 0xfad8, 0x14d0, 0x1, 0x1);
        gbc.writeMem(0x7b95, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x27a6);
        EXPECT(gbc.pc(), 0x7b96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 034D
        gbc.setState(0xe6ca, 0x9c21, 0x3170, 0x3349, 0x4fa8, 0xcc61, 0x0, 0x0);
        gbc.writeMem(0xe6ca, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x9c21);
        EXPECT(gbc.pc(), 0xe6cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6ca), 0xb3);
        // B3 034E
        gbc.setState(0x2f3, 0x11f, 0xb440, 0xda8c, 0x94d1, 0xdd15, 0x1, 0x0);
        gbc.writeMem(0x2f3, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x11f);
        EXPECT(gbc.pc(), 0x2f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 034F
        gbc.setState(0xd4ff, 0xe4bc, 0x3400, 0x3c83, 0x2209, 0x5ba9, 0x1, 0x1);
        gbc.writeMem(0xd4ff, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xe4bc);
        EXPECT(gbc.pc(), 0xd500);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4ff), 0xb3);
        // B3 0350
        gbc.setState(0x1397, 0x31b0, 0xe2e0, 0x7da2, 0x1ea6, 0x87bd, 0x1, 0x1);
        gbc.writeMem(0x1397, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x31b0);
        EXPECT(gbc.pc(), 0x1398);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0351
        gbc.setState(0x1192, 0x20bd, 0xafd0, 0xc266, 0x7e34, 0x2b9a, 0x1, 0x1);
        gbc.writeMem(0x1192, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x20bd);
        EXPECT(gbc.pc(), 0x1193);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0352
        gbc.setState(0x29a3, 0xd4aa, 0xc7b0, 0x3fa0, 0x5de2, 0xb8bc, 0x1, 0x0);
        gbc.writeMem(0x29a3, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xd4aa);
        EXPECT(gbc.pc(), 0x29a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0353
        gbc.setState(0x25ed, 0x47ab, 0xe3f0, 0x3330, 0x41c1, 0xb1f4, 0x1, 0x1);
        gbc.writeMem(0x25ed, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x47ab);
        EXPECT(gbc.pc(), 0x25ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0354
        gbc.setState(0x1354, 0x70f2, 0x7860, 0xee0e, 0xe129, 0xf2b9, 0x0, 0x0);
        gbc.writeMem(0x1354, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x70f2);
        EXPECT(gbc.pc(), 0x1355);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0355
        gbc.setState(0x9954, 0xbe31, 0xe8b0, 0x8a09, 0xed66, 0xfe0a, 0x0, 0x1);
        gbc.writeMem(0x9954, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xbe31);
        EXPECT(gbc.pc(), 0x9955);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9954), 0xb3);
        // B3 0356
        gbc.setState(0xc543, 0x8d69, 0xcab0, 0x3c70, 0x124e, 0x64ff, 0x1, 0x1);
        gbc.writeMem(0xc543, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x8d69);
        EXPECT(gbc.pc(), 0xc544);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc543), 0xb3);
        // B3 0357
        gbc.setState(0xbaa9, 0x1a6b, 0x4c00, 0xc8d3, 0xd52a, 0xdc75, 0x1, 0x1);
        gbc.writeMem(0xbaa9, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x1a6b);
        EXPECT(gbc.pc(), 0xbaaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbaa9), 0xb3);
        // B3 0358
        gbc.setState(0x58e4, 0x3c34, 0x4040, 0x4ad8, 0x2fce, 0x9b79, 0x1, 0x1);
        gbc.writeMem(0x58e4, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x3c34);
        EXPECT(gbc.pc(), 0x58e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0359
        gbc.setState(0xd4c, 0x66e1, 0x75f0, 0x4454, 0xbd3c, 0x8f2c, 0x1, 0x0);
        gbc.writeMem(0xd4c, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x66e1);
        EXPECT(gbc.pc(), 0xd4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 035A
        gbc.setState(0x8548, 0x533e, 0xff30, 0x3ee8, 0x7c48, 0x450b, 0x0, 0x1);
        gbc.writeMem(0x8548, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x533e);
        EXPECT(gbc.pc(), 0x8549);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8548), 0xb3);
        // B3 035B
        gbc.setState(0x638b, 0xd435, 0x4070, 0xf2cb, 0xf337, 0x1e19, 0x0, 0x0);
        gbc.writeMem(0x638b, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xd435);
        EXPECT(gbc.pc(), 0x638c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 035C
        gbc.setState(0xc878, 0xc8c3, 0xdcc0, 0x2f09, 0xdf24, 0xd50f, 0x0, 0x1);
        gbc.writeMem(0xc878, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xc8c3);
        EXPECT(gbc.pc(), 0xc879);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc878), 0xb3);
        // B3 035D
        gbc.setState(0x20de, 0x244f, 0x3670, 0x6743, 0xf56f, 0x845f, 0x1, 0x0);
        gbc.writeMem(0x20de, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x244f);
        EXPECT(gbc.pc(), 0x20df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 035E
        gbc.setState(0xb556, 0x5b5c, 0x9830, 0xb32f, 0x618a, 0x7eb9, 0x1, 0x1);
        gbc.writeMem(0xb556, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x5b5c);
        EXPECT(gbc.pc(), 0xb557);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb556), 0xb3);
        // B3 035F
        gbc.setState(0x2ee5, 0x77e9, 0xd6d0, 0x8dd0, 0xe241, 0xc18d, 0x1, 0x1);
        gbc.writeMem(0x2ee5, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x77e9);
        EXPECT(gbc.pc(), 0x2ee6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0360
        gbc.setState(0xa51b, 0xdca9, 0x26f0, 0xbf6a, 0xe1d2, 0x864c, 0x1, 0x0);
        gbc.writeMem(0xa51b, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xdca9);
        EXPECT(gbc.pc(), 0xa51c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa51b), 0xb3);
        // B3 0361
        gbc.setState(0x5f88, 0xc958, 0x5020, 0x3566, 0xb5ab, 0xf78, 0x0, 0x0);
        gbc.writeMem(0x5f88, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xc958);
        EXPECT(gbc.pc(), 0x5f89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0362
        gbc.setState(0xdc9d, 0xd1e4, 0x3e00, 0x1a8b, 0xc80f, 0x58e0, 0x1, 0x1);
        gbc.writeMem(0xdc9d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xd1e4);
        EXPECT(gbc.pc(), 0xdc9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc9d), 0xb3);
        // B3 0363
        gbc.setState(0x61a8, 0xd49e, 0xf010, 0x471d, 0x7cdc, 0x6caf, 0x0, 0x0);
        gbc.writeMem(0x61a8, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xd49e);
        EXPECT(gbc.pc(), 0x61a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0364
        gbc.setState(0x1295, 0xb7c9, 0xa710, 0xbf81, 0x2950, 0x3694, 0x1, 0x1);
        gbc.writeMem(0x1295, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xb7c9);
        EXPECT(gbc.pc(), 0x1296);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0365
        gbc.setState(0xb4c1, 0x1377, 0x3360, 0x156, 0x26bf, 0x3cef, 0x1, 0x0);
        gbc.writeMem(0xb4c1, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x1377);
        EXPECT(gbc.pc(), 0xb4c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4c1), 0xb3);
        // B3 0366
        gbc.setState(0xadef, 0x8e1a, 0x7870, 0x4948, 0x1f10, 0xadf3, 0x0, 0x0);
        gbc.writeMem(0xadef, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x8e1a);
        EXPECT(gbc.pc(), 0xadf0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadef), 0xb3);
        // B3 0367
        gbc.setState(0xcbe9, 0xc343, 0x7200, 0xa960, 0xa7da, 0xe141, 0x1, 0x0);
        gbc.writeMem(0xcbe9, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xc343);
        EXPECT(gbc.pc(), 0xcbea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbe9), 0xb3);
        // B3 0368
        gbc.setState(0xa696, 0xd984, 0x7310, 0xaee0, 0xcbcd, 0xc044, 0x0, 0x1);
        gbc.writeMem(0xa696, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xd984);
        EXPECT(gbc.pc(), 0xa697);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa696), 0xb3);
        // B3 0369
        gbc.setState(0xbddb, 0xdb4a, 0xd120, 0x787a, 0x52d8, 0xae1c, 0x1, 0x0);
        gbc.writeMem(0xbddb, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xdb4a);
        EXPECT(gbc.pc(), 0xbddc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbddb), 0xb3);
        // B3 036A
        gbc.setState(0x9aee, 0x47d2, 0x9c10, 0xdb42, 0x3068, 0xfa2d, 0x0, 0x1);
        gbc.writeMem(0x9aee, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x47d2);
        EXPECT(gbc.pc(), 0x9aef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9aee), 0xb3);
        // B3 036B
        gbc.setState(0x581, 0x3b71, 0x6190, 0xce72, 0x52e4, 0xba7e, 0x0, 0x0);
        gbc.writeMem(0x581, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x3b71);
        EXPECT(gbc.pc(), 0x582);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 036C
        gbc.setState(0xc6fb, 0x165c, 0xf800, 0xbe20, 0xa8e0, 0xc480, 0x1, 0x1);
        gbc.writeMem(0xc6fb, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x165c);
        EXPECT(gbc.pc(), 0xc6fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6fb), 0xb3);
        // B3 036D
        gbc.setState(0x6a7, 0x11ff, 0x8f60, 0xa9cc, 0xab6b, 0x58c1, 0x0, 0x0);
        gbc.writeMem(0x6a7, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x11ff);
        EXPECT(gbc.pc(), 0x6a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 036E
        gbc.setState(0x9a63, 0x721e, 0xc2c0, 0xf0b3, 0xa27a, 0xf404, 0x1, 0x0);
        gbc.writeMem(0x9a63, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x721e);
        EXPECT(gbc.pc(), 0x9a64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a63), 0xb3);
        // B3 036F
        gbc.setState(0x4c82, 0x4cc2, 0x6bc0, 0xd472, 0x970, 0x2230, 0x1, 0x1);
        gbc.writeMem(0x4c82, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x4cc2);
        EXPECT(gbc.pc(), 0x4c83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0370
        gbc.setState(0x333f, 0x984b, 0xaaf0, 0xa411, 0x6bc8, 0x4b58, 0x1, 0x0);
        gbc.writeMem(0x333f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x984b);
        EXPECT(gbc.pc(), 0x3340);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0371
        gbc.setState(0x9d7f, 0x6a3c, 0x8930, 0x5167, 0x901a, 0x4e90, 0x0, 0x1);
        gbc.writeMem(0x9d7f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x6a3c);
        EXPECT(gbc.pc(), 0x9d80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d7f), 0xb3);
        // B3 0372
        gbc.setState(0x811d, 0x447d, 0x46e0, 0x8eb2, 0x2272, 0x1c1a, 0x1, 0x0);
        gbc.writeMem(0x811d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x447d);
        EXPECT(gbc.pc(), 0x811e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x811d), 0xb3);
        // B3 0373
        gbc.setState(0x440b, 0xf547, 0x48a0, 0xd8ea, 0x535c, 0x51b5, 0x1, 0x0);
        gbc.writeMem(0x440b, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xf547);
        EXPECT(gbc.pc(), 0x440c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0374
        gbc.setState(0x4bb6, 0x23f2, 0xafd0, 0xff0c, 0x3e5b, 0x771f, 0x0, 0x0);
        gbc.writeMem(0x4bb6, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x23f2);
        EXPECT(gbc.pc(), 0x4bb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0375
        gbc.setState(0xcdbe, 0xaa78, 0x5970, 0x579e, 0x1b10, 0x2a0c, 0x0, 0x1);
        gbc.writeMem(0xcdbe, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xaa78);
        EXPECT(gbc.pc(), 0xcdbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdbe), 0xb3);
        // B3 0376
        gbc.setState(0x7766, 0xe6e8, 0x20e0, 0x1d61, 0x1173, 0xadc0, 0x0, 0x1);
        gbc.writeMem(0x7766, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xe6e8);
        EXPECT(gbc.pc(), 0x7767);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0377
        gbc.setState(0x6267, 0xb613, 0x60e0, 0xc61e, 0x7708, 0xbaa, 0x1, 0x0);
        gbc.writeMem(0x6267, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xb613);
        EXPECT(gbc.pc(), 0x6268);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0378
        gbc.setState(0x2eaa, 0x8022, 0xdc50, 0x4277, 0xd443, 0xc84c, 0x1, 0x1);
        gbc.writeMem(0x2eaa, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x8022);
        EXPECT(gbc.pc(), 0x2eab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0379
        gbc.setState(0xc65d, 0x9987, 0x2810, 0xbf99, 0x105a, 0x2d84, 0x0, 0x0);
        gbc.writeMem(0xc65d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x9987);
        EXPECT(gbc.pc(), 0xc65e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc65d), 0xb3);
        // B3 037A
        gbc.setState(0x24e2, 0x3c66, 0x65c0, 0xb10a, 0xeea4, 0x2c62, 0x1, 0x0);
        gbc.writeMem(0x24e2, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x3c66);
        EXPECT(gbc.pc(), 0x24e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 037C
        gbc.setState(0xe2f, 0x9364, 0x6870, 0xe150, 0x8bc9, 0xe61c, 0x0, 0x0);
        gbc.writeMem(0xe2f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x9364);
        EXPECT(gbc.pc(), 0xe30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 037D
        gbc.setState(0xaf40, 0x26b, 0xdd00, 0x547e, 0xff9c, 0xd39b, 0x0, 0x0);
        gbc.writeMem(0xaf40, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x26b);
        EXPECT(gbc.pc(), 0xaf41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf40), 0xb3);
        // B3 037E
        gbc.setState(0x2610, 0xf9b4, 0xfe50, 0x5f75, 0x640, 0xc0cc, 0x1, 0x1);
        gbc.writeMem(0x2610, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xf9b4);
        EXPECT(gbc.pc(), 0x2611);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 037F
        gbc.setState(0x942a, 0x244, 0x7330, 0x8666, 0xb96, 0x9af6, 0x1, 0x0);
        gbc.writeMem(0x942a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x244);
        EXPECT(gbc.pc(), 0x942b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x942a), 0xb3);
        // B3 0380
        gbc.setState(0xd2e, 0xe762, 0xfb20, 0x68ef, 0xd57a, 0x561b, 0x1, 0x1);
        gbc.writeMem(0xd2e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xe762);
        EXPECT(gbc.pc(), 0xd2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0381
        gbc.setState(0x6dd2, 0x9f76, 0x8ae0, 0x4557, 0x7577, 0xa222, 0x1, 0x0);
        gbc.writeMem(0x6dd2, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x9f76);
        EXPECT(gbc.pc(), 0x6dd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0382
        gbc.setState(0x5aab, 0x6b3d, 0xb090, 0x4279, 0x1bb1, 0x5ea6, 0x1, 0x0);
        gbc.writeMem(0x5aab, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x6b3d);
        EXPECT(gbc.pc(), 0x5aac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0383
        gbc.setState(0x11b7, 0x9913, 0x83b0, 0x6b4d, 0xf03d, 0xb999, 0x1, 0x0);
        gbc.writeMem(0x11b7, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x9913);
        EXPECT(gbc.pc(), 0x11b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0384
        gbc.setState(0x45d1, 0x7d4a, 0xfbf0, 0xafd0, 0x3e07, 0x23f1, 0x0, 0x1);
        gbc.writeMem(0x45d1, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x7d4a);
        EXPECT(gbc.pc(), 0x45d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0385
        gbc.setState(0xbb2e, 0xe9d6, 0x2140, 0xcb9a, 0x5ed8, 0xc145, 0x0, 0x0);
        gbc.writeMem(0xbb2e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xe9d6);
        EXPECT(gbc.pc(), 0xbb2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb2e), 0xb3);
        // B3 0386
        gbc.setState(0x1a7f, 0x456b, 0x710, 0x6327, 0x85e3, 0xc9ff, 0x0, 0x1);
        gbc.writeMem(0x1a7f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x456b);
        EXPECT(gbc.pc(), 0x1a80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0387
        gbc.setState(0x1eb8, 0xb6f8, 0x5440, 0xc257, 0x101c, 0x5211, 0x1, 0x0);
        gbc.writeMem(0x1eb8, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xb6f8);
        EXPECT(gbc.pc(), 0x1eb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0389
        gbc.setState(0x7327, 0x43b9, 0x5e30, 0x1ae1, 0xbf54, 0x47c3, 0x1, 0x0);
        gbc.writeMem(0x7327, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x43b9);
        EXPECT(gbc.pc(), 0x7328);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 038A
        gbc.setState(0xe345, 0x1c95, 0x7200, 0xd894, 0x5cc9, 0x72dd, 0x1, 0x0);
        gbc.writeMem(0xe345, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x1c95);
        EXPECT(gbc.pc(), 0xe346);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe345), 0xb3);
        // B3 038B
        gbc.setState(0xacda, 0x8b44, 0xbda0, 0x4239, 0x8419, 0xe083, 0x0, 0x1);
        gbc.writeMem(0xacda, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x8b44);
        EXPECT(gbc.pc(), 0xacdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacda), 0xb3);
        // B3 038C
        gbc.setState(0x3a10, 0x52a1, 0x3a50, 0x8c36, 0x96d3, 0x36d2, 0x1, 0x1);
        gbc.writeMem(0x3a10, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x52a1);
        EXPECT(gbc.pc(), 0x3a11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 038D
        gbc.setState(0xd325, 0x4795, 0xf0a0, 0xdf2d, 0xf98a, 0x6fd5, 0x1, 0x0);
        gbc.writeMem(0xd325, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x4795);
        EXPECT(gbc.pc(), 0xd326);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd325), 0xb3);
        // B3 038E
        gbc.setState(0x6636, 0xab98, 0xbaa0, 0x9972, 0xad7d, 0x403b, 0x1, 0x1);
        gbc.writeMem(0x6636, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xab98);
        EXPECT(gbc.pc(), 0x6637);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 038F
        gbc.setState(0x7fdc, 0x7872, 0xdfa0, 0x1f25, 0x60f7, 0x51db, 0x0, 0x0);
        gbc.writeMem(0x7fdc, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x7872);
        EXPECT(gbc.pc(), 0x7fdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0390
        gbc.setState(0x6e71, 0xafd6, 0x7bd0, 0x6fe4, 0x9142, 0xb05, 0x0, 0x1);
        gbc.writeMem(0x6e71, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xafd6);
        EXPECT(gbc.pc(), 0x6e72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0391
        gbc.setState(0x7787, 0x72dd, 0x3330, 0x37ea, 0x4665, 0xb5f, 0x1, 0x1);
        gbc.writeMem(0x7787, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x72dd);
        EXPECT(gbc.pc(), 0x7788);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0392
        gbc.setState(0x66d4, 0x381a, 0x7940, 0x999d, 0xde62, 0x612d, 0x1, 0x1);
        gbc.writeMem(0x66d4, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x381a);
        EXPECT(gbc.pc(), 0x66d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0393
        gbc.setState(0x2806, 0x4f76, 0x16a0, 0xe42d, 0xee1f, 0x484b, 0x1, 0x1);
        gbc.writeMem(0x2806, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x4f76);
        EXPECT(gbc.pc(), 0x2807);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0394
        gbc.setState(0x91bd, 0xe778, 0xd480, 0xa218, 0xe068, 0x31c2, 0x1, 0x1);
        gbc.writeMem(0x91bd, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xe778);
        EXPECT(gbc.pc(), 0x91be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91bd), 0xb3);
        // B3 0395
        gbc.setState(0x24dc, 0x938c, 0x6810, 0xe593, 0xcea0, 0xa69f, 0x0, 0x1);
        gbc.writeMem(0x24dc, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x938c);
        EXPECT(gbc.pc(), 0x24dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0396
        gbc.setState(0x2477, 0xc18c, 0x9260, 0x29c5, 0xe517, 0x4094, 0x1, 0x0);
        gbc.writeMem(0x2477, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xc18c);
        EXPECT(gbc.pc(), 0x2478);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0397
        gbc.setState(0xe7ae, 0x810, 0x73a0, 0xf56c, 0x12ee, 0x1418, 0x0, 0x1);
        gbc.writeMem(0xe7ae, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x810);
        EXPECT(gbc.pc(), 0xe7af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7ae), 0xb3);
        // B3 0398
        gbc.setState(0x7c6b, 0xedeb, 0xcc30, 0xd387, 0x5928, 0xef15, 0x0, 0x0);
        gbc.writeMem(0x7c6b, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xedeb);
        EXPECT(gbc.pc(), 0x7c6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 0399
        gbc.setState(0xae01, 0xfd9a, 0x9500, 0xf5f6, 0xe13a, 0xa5cb, 0x1, 0x0);
        gbc.writeMem(0xae01, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xfd9a);
        EXPECT(gbc.pc(), 0xae02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae01), 0xb3);
        // B3 039A
        gbc.setState(0x9f81, 0x7b79, 0x47f0, 0xdbb1, 0x2edb, 0x4be2, 0x1, 0x1);
        gbc.writeMem(0x9f81, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x7b79);
        EXPECT(gbc.pc(), 0x9f82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f81), 0xb3);
        // B3 039B
        gbc.setState(0xafe4, 0x6cbc, 0x8660, 0x4c1, 0xd4aa, 0x555c, 0x1, 0x0);
        gbc.writeMem(0xafe4, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x6cbc);
        EXPECT(gbc.pc(), 0xafe5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafe4), 0xb3);
        // B3 039C
        gbc.setState(0x2fde, 0xfa80, 0xd0a0, 0x613d, 0xb390, 0x5e2b, 0x1, 0x1);
        gbc.writeMem(0x2fde, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xfa80);
        EXPECT(gbc.pc(), 0x2fdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 039D
        gbc.setState(0x4a7, 0x1e95, 0x40, 0xe92, 0xd400, 0x2d1c, 0x1, 0x1);
        gbc.writeMem(0x4a7, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x1e95);
        EXPECT(gbc.pc(), 0x4a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 039E
        gbc.setState(0x93cb, 0x7cb0, 0xcd60, 0xba69, 0x5834, 0xec2f, 0x1, 0x1);
        gbc.writeMem(0x93cb, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x7cb0);
        EXPECT(gbc.pc(), 0x93cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93cb), 0xb3);
        // B3 03A0
        gbc.setState(0x2337, 0xe633, 0x4c20, 0xb656, 0x6e3e, 0x5d63, 0x1, 0x0);
        gbc.writeMem(0x2337, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xe633);
        EXPECT(gbc.pc(), 0x2338);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03A1
        gbc.setState(0x96c8, 0x7ed4, 0xa420, 0x5874, 0x5c79, 0x252e, 0x1, 0x1);
        gbc.writeMem(0x96c8, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x7ed4);
        EXPECT(gbc.pc(), 0x96c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96c8), 0xb3);
        // B3 03A2
        gbc.setState(0x8ada, 0x6958, 0xb200, 0xf11a, 0xb2c0, 0x7562, 0x1, 0x0);
        gbc.writeMem(0x8ada, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x6958);
        EXPECT(gbc.pc(), 0x8adb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ada), 0xb3);
        // B3 03A3
        gbc.setState(0xbcca, 0x9e31, 0x57f0, 0x4350, 0x92d8, 0xe456, 0x1, 0x0);
        gbc.writeMem(0xbcca, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x9e31);
        EXPECT(gbc.pc(), 0xbccb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcca), 0xb3);
        // B3 03A4
        gbc.setState(0xd66e, 0x2b35, 0xd120, 0x6c33, 0x474f, 0x6a8a, 0x0, 0x1);
        gbc.writeMem(0xd66e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x2b35);
        EXPECT(gbc.pc(), 0xd66f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd66e), 0xb3);
        // B3 03A5
        gbc.setState(0xbaf4, 0xf90f, 0xb1c0, 0x27dd, 0xd48c, 0x5a8c, 0x0, 0x0);
        gbc.writeMem(0xbaf4, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xf90f);
        EXPECT(gbc.pc(), 0xbaf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbaf4), 0xb3);
        // B3 03A6
        gbc.setState(0x86ef, 0x83c2, 0xac30, 0x8081, 0x57a, 0x34ca, 0x1, 0x1);
        gbc.writeMem(0x86ef, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x83c2);
        EXPECT(gbc.pc(), 0x86f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86ef), 0xb3);
        // B3 03A7
        gbc.setState(0xafbe, 0x2444, 0xe6c0, 0xebe4, 0xb464, 0xc86, 0x0, 0x1);
        gbc.writeMem(0xafbe, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x2444);
        EXPECT(gbc.pc(), 0xafbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafbe), 0xb3);
        // B3 03A8
        gbc.setState(0x46e5, 0x6e75, 0xa0a0, 0x637f, 0xec38, 0x2a27, 0x0, 0x1);
        gbc.writeMem(0x46e5, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x6e75);
        EXPECT(gbc.pc(), 0x46e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03AA
        gbc.setState(0x6735, 0x3397, 0xbaa0, 0xbf32, 0x8d0, 0x2d58, 0x0, 0x0);
        gbc.writeMem(0x6735, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x3397);
        EXPECT(gbc.pc(), 0x6736);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03AB
        gbc.setState(0x99c2, 0xe190, 0x20d0, 0x3e2f, 0x8ee1, 0x703c, 0x1, 0x1);
        gbc.writeMem(0x99c2, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xe190);
        EXPECT(gbc.pc(), 0x99c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99c2), 0xb3);
        // B3 03AC
        gbc.setState(0x430a, 0x54af, 0x4280, 0x439d, 0x7f58, 0xed8f, 0x0, 0x0);
        gbc.writeMem(0x430a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x54af);
        EXPECT(gbc.pc(), 0x430b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03AD
        gbc.setState(0xa16, 0x97cc, 0xc5d0, 0x9095, 0xc6f7, 0xdd7a, 0x0, 0x1);
        gbc.writeMem(0xa16, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x97cc);
        EXPECT(gbc.pc(), 0xa17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03AE
        gbc.setState(0x39c2, 0xca4, 0x9fd0, 0xbd5a, 0x92c8, 0x7ec0, 0x0, 0x1);
        gbc.writeMem(0x39c2, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xca4);
        EXPECT(gbc.pc(), 0x39c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03AF
        gbc.setState(0x91dc, 0xfb0b, 0x8a70, 0xd332, 0x2c04, 0x3a50, 0x0, 0x1);
        gbc.writeMem(0x91dc, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xfb0b);
        EXPECT(gbc.pc(), 0x91dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91dc), 0xb3);
        // B3 03B0
        gbc.setState(0xbff4, 0xd6a9, 0x4350, 0xa531, 0x779c, 0x1723, 0x1, 0x0);
        gbc.writeMem(0xbff4, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xd6a9);
        EXPECT(gbc.pc(), 0xbff5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbff4), 0xb3);
        // B3 03B1
        gbc.setState(0x881a, 0x5ec0, 0xa70, 0xd6b8, 0x1a5f, 0x4a29, 0x0, 0x0);
        gbc.writeMem(0x881a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x5ec0);
        EXPECT(gbc.pc(), 0x881b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x881a), 0xb3);
        // B3 03B2
        gbc.setState(0x3679, 0x4afd, 0x1a30, 0x4a8e, 0x7788, 0xa3b8, 0x0, 0x1);
        gbc.writeMem(0x3679, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x4afd);
        EXPECT(gbc.pc(), 0x367a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03B3
        gbc.setState(0x95ec, 0x64fc, 0xb680, 0xa5c3, 0xab6a, 0xac20, 0x1, 0x0);
        gbc.writeMem(0x95ec, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x64fc);
        EXPECT(gbc.pc(), 0x95ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95ec), 0xb3);
        // B3 03B4
        gbc.setState(0xa957, 0x277c, 0xe560, 0x725c, 0x67dd, 0xecad, 0x1, 0x0);
        gbc.writeMem(0xa957, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x277c);
        EXPECT(gbc.pc(), 0xa958);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa957), 0xb3);
        // B3 03B5
        gbc.setState(0x7861, 0x3047, 0xe190, 0x9a99, 0x1f73, 0xc4ab, 0x1, 0x0);
        gbc.writeMem(0x7861, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x3047);
        EXPECT(gbc.pc(), 0x7862);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03B6
        gbc.setState(0xc087, 0xd540, 0xc010, 0xf4c0, 0xa1ce, 0x7705, 0x0, 0x1);
        gbc.writeMem(0xc087, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xd540);
        EXPECT(gbc.pc(), 0xc088);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc087), 0xb3);
        // B3 03B7
        gbc.setState(0x2f24, 0xd185, 0xd410, 0x97f, 0xb9da, 0x9a8d, 0x0, 0x1);
        gbc.writeMem(0x2f24, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xd185);
        EXPECT(gbc.pc(), 0x2f25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03B8
        gbc.setState(0xd461, 0x218d, 0x33c0, 0x2134, 0xa1db, 0xbeb, 0x0, 0x1);
        gbc.writeMem(0xd461, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x218d);
        EXPECT(gbc.pc(), 0xd462);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd461), 0xb3);
        // B3 03B9
        gbc.setState(0x8e81, 0x1637, 0x7b40, 0xdd08, 0x6e34, 0x6680, 0x1, 0x1);
        gbc.writeMem(0x8e81, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x1637);
        EXPECT(gbc.pc(), 0x8e82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e81), 0xb3);
        // B3 03BA
        gbc.setState(0x526c, 0x7bfd, 0x9da0, 0x6fea, 0x6c5d, 0x154, 0x1, 0x1);
        gbc.writeMem(0x526c, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x7bfd);
        EXPECT(gbc.pc(), 0x526d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03BB
        gbc.setState(0x191a, 0xcae8, 0x8390, 0xc255, 0x1b44, 0xc18f, 0x1, 0x1);
        gbc.writeMem(0x191a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xcae8);
        EXPECT(gbc.pc(), 0x191b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03BC
        gbc.setState(0xdbff, 0xd059, 0x63e0, 0xe7a7, 0x36a5, 0x6d99, 0x1, 0x0);
        gbc.writeMem(0xdbff, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xd059);
        EXPECT(gbc.pc(), 0xdc00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbff), 0xb3);
        // B3 03BD
        gbc.setState(0x1b2d, 0xe92e, 0x2750, 0xdd6, 0xa16a, 0x1a07, 0x1, 0x0);
        gbc.writeMem(0x1b2d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xe92e);
        EXPECT(gbc.pc(), 0x1b2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03BF
        gbc.setState(0x163a, 0xc624, 0x9a30, 0xffdf, 0x4634, 0x13ae, 0x1, 0x0);
        gbc.writeMem(0x163a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xc624);
        EXPECT(gbc.pc(), 0x163b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03C0
        gbc.setState(0x74ac, 0x7533, 0x4c70, 0x9c4e, 0x5e9e, 0xa60e, 0x0, 0x0);
        gbc.writeMem(0x74ac, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x7533);
        EXPECT(gbc.pc(), 0x74ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03C1
        gbc.setState(0xa540, 0x7e76, 0xae70, 0xde55, 0x9058, 0x5633, 0x1, 0x0);
        gbc.writeMem(0xa540, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x7e76);
        EXPECT(gbc.pc(), 0xa541);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa540), 0xb3);
        // B3 03C2
        gbc.setState(0x660f, 0xe0e5, 0xf190, 0xd655, 0x3a28, 0x8e81, 0x0, 0x0);
        gbc.writeMem(0x660f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xe0e5);
        EXPECT(gbc.pc(), 0x6610);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03C3
        gbc.setState(0x9347, 0xd2b5, 0xce40, 0x2474, 0xed66, 0xfe0c, 0x1, 0x1);
        gbc.writeMem(0x9347, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xd2b5);
        EXPECT(gbc.pc(), 0x9348);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9347), 0xb3);
        // B3 03C4
        gbc.setState(0x94b1, 0xd312, 0x5c30, 0x5486, 0xc394, 0x5c62, 0x1, 0x1);
        gbc.writeMem(0x94b1, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xd312);
        EXPECT(gbc.pc(), 0x94b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94b1), 0xb3);
        // B3 03C5
        gbc.setState(0x14c7, 0x5b12, 0x4630, 0xc82f, 0x5360, 0x4511, 0x0, 0x0);
        gbc.writeMem(0x14c7, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x5b12);
        EXPECT(gbc.pc(), 0x14c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03C6
        gbc.setState(0xb1d7, 0x62f1, 0x31b0, 0x558b, 0xe396, 0xbff6, 0x1, 0x0);
        gbc.writeMem(0xb1d7, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x62f1);
        EXPECT(gbc.pc(), 0xb1d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1d7), 0xb3);
        // B3 03C7
        gbc.setState(0x5286, 0x9e2b, 0xa480, 0xaf33, 0xcb6e, 0x141, 0x0, 0x1);
        gbc.writeMem(0x5286, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x9e2b);
        EXPECT(gbc.pc(), 0x5287);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03C8
        gbc.setState(0xd092, 0x2b0d, 0x4460, 0xf207, 0x3b67, 0x4e54, 0x1, 0x0);
        gbc.writeMem(0xd092, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x2b0d);
        EXPECT(gbc.pc(), 0xd093);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd092), 0xb3);
        // B3 03C9
        gbc.setState(0x772f, 0x8e83, 0x6e10, 0x686f, 0xa840, 0x2d3b, 0x0, 0x0);
        gbc.writeMem(0x772f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x8e83);
        EXPECT(gbc.pc(), 0x7730);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03CA
        gbc.setState(0x2a1a, 0xe1ec, 0x6b50, 0x7270, 0xbedc, 0x7cad, 0x1, 0x1);
        gbc.writeMem(0x2a1a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xe1ec);
        EXPECT(gbc.pc(), 0x2a1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03CB
        gbc.setState(0xabff, 0xebc9, 0xaec0, 0x99c9, 0x4868, 0x5730, 0x1, 0x0);
        gbc.writeMem(0xabff, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xebc9);
        EXPECT(gbc.pc(), 0xac00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabff), 0xb3);
        // B3 03CC
        gbc.setState(0x2dea, 0x113, 0x5d70, 0xbdc5, 0xe2a3, 0x51db, 0x0, 0x0);
        gbc.writeMem(0x2dea, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x113);
        EXPECT(gbc.pc(), 0x2deb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03CD
        gbc.setState(0x2b54, 0x2411, 0x4690, 0x7c5a, 0x7a97, 0xc178, 0x1, 0x0);
        gbc.writeMem(0x2b54, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x2411);
        EXPECT(gbc.pc(), 0x2b55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03CE
        gbc.setState(0xb930, 0x6c2a, 0x2b0, 0xf2bf, 0x5e86, 0x6a36, 0x1, 0x0);
        gbc.writeMem(0xb930, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x6c2a);
        EXPECT(gbc.pc(), 0xb931);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb930), 0xb3);
        // B3 03CF
        gbc.setState(0xce2c, 0x9647, 0x1060, 0x7d98, 0x61c7, 0x7d79, 0x1, 0x0);
        gbc.writeMem(0xce2c, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x9647);
        EXPECT(gbc.pc(), 0xce2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce2c), 0xb3);
        // B3 03D0
        gbc.setState(0x4ddb, 0x91c5, 0xa530, 0xec83, 0x248d, 0xd17a, 0x0, 0x0);
        gbc.writeMem(0x4ddb, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x91c5);
        EXPECT(gbc.pc(), 0x4ddc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03D1
        gbc.setState(0xd21e, 0xbe64, 0xce40, 0x6263, 0xa6ad, 0xa3ac, 0x1, 0x0);
        gbc.writeMem(0xd21e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xbe64);
        EXPECT(gbc.pc(), 0xd21f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd21e), 0xb3);
        // B3 03D2
        gbc.setState(0x2902, 0xd4f8, 0x8b50, 0xb1c6, 0xfff6, 0xd166, 0x1, 0x1);
        gbc.writeMem(0x2902, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xd4f8);
        EXPECT(gbc.pc(), 0x2903);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03D3
        gbc.setState(0xda97, 0xaa26, 0x33d0, 0xfa67, 0x4134, 0x4185, 0x1, 0x0);
        gbc.writeMem(0xda97, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xaa26);
        EXPECT(gbc.pc(), 0xda98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda97), 0xb3);
        // B3 03D4
        gbc.setState(0x34a0, 0x18fb, 0xc510, 0x1f40, 0xbebf, 0xcce9, 0x1, 0x0);
        gbc.writeMem(0x34a0, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x18fb);
        EXPECT(gbc.pc(), 0x34a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03D5
        gbc.setState(0xc63a, 0x7a0e, 0x7880, 0x5382, 0x21e0, 0xe5ee, 0x1, 0x0);
        gbc.writeMem(0xc63a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x7a0e);
        EXPECT(gbc.pc(), 0xc63b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc63a), 0xb3);
        // B3 03D7
        gbc.setState(0xeaa2, 0x9ebb, 0x28e0, 0x29ee, 0xc47, 0x3f47, 0x1, 0x0);
        gbc.writeMem(0xeaa2, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x9ebb);
        EXPECT(gbc.pc(), 0xeaa3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaa2), 0xb3);
        // B3 03D8
        gbc.setState(0x2338, 0xdc8b, 0x6f50, 0xe9c7, 0x3b62, 0x7103, 0x1, 0x1);
        gbc.writeMem(0x2338, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xdc8b);
        EXPECT(gbc.pc(), 0x2339);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03D9
        gbc.setState(0x4541, 0xf658, 0xc9e0, 0x923a, 0x3c8f, 0x8aa9, 0x1, 0x0);
        gbc.writeMem(0x4541, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xf658);
        EXPECT(gbc.pc(), 0x4542);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03DA
        gbc.setState(0x914e, 0xab, 0xb430, 0xf90a, 0x9b68, 0xe411, 0x0, 0x0);
        gbc.writeMem(0x914e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xab);
        EXPECT(gbc.pc(), 0x914f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x914e), 0xb3);
        // B3 03DB
        gbc.setState(0xaf80, 0x69ab, 0x6390, 0x2ba4, 0x3a77, 0x8870, 0x0, 0x0);
        gbc.writeMem(0xaf80, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x69ab);
        EXPECT(gbc.pc(), 0xaf81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf80), 0xb3);
        // B3 03DC
        gbc.setState(0x3ffe, 0x7a30, 0xb040, 0xb770, 0x4773, 0xc774, 0x1, 0x0);
        gbc.writeMem(0x3ffe, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x7a30);
        EXPECT(gbc.pc(), 0x3fff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03DE
        gbc.setState(0x5c4a, 0x9287, 0x7910, 0x5f64, 0xd090, 0xf270, 0x0, 0x1);
        gbc.writeMem(0x5c4a, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x9287);
        EXPECT(gbc.pc(), 0x5c4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03DF
        gbc.setState(0xd01e, 0xb5db, 0xa7c0, 0x8217, 0x731c, 0x7053, 0x1, 0x1);
        gbc.writeMem(0xd01e, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xb5db);
        EXPECT(gbc.pc(), 0xd01f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd01e), 0xb3);
        // B3 03E0
        gbc.setState(0x6e98, 0x5207, 0xde00, 0xf25a, 0x62e7, 0x2796, 0x0, 0x1);
        gbc.writeMem(0x6e98, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x5207);
        EXPECT(gbc.pc(), 0x6e99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03E1
        gbc.setState(0xa2c8, 0x6fea, 0xad00, 0x1702, 0xe6e5, 0xde5, 0x1, 0x0);
        gbc.writeMem(0xa2c8, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x6fea);
        EXPECT(gbc.pc(), 0xa2c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2c8), 0xb3);
        // B3 03E2
        gbc.setState(0xa83c, 0x7709, 0x7380, 0xbf94, 0x3401, 0xb52, 0x1, 0x0);
        gbc.writeMem(0xa83c, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x7709);
        EXPECT(gbc.pc(), 0xa83d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa83c), 0xb3);
        // B3 03E3
        gbc.setState(0x8a92, 0x77d4, 0x12c0, 0x2033, 0x8e65, 0x27dc, 0x0, 0x1);
        gbc.writeMem(0x8a92, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x77d4);
        EXPECT(gbc.pc(), 0x8a93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a92), 0xb3);
        // B3 03E4
        gbc.setState(0x100f, 0x8c34, 0x4a20, 0x94d, 0xd026, 0x163a, 0x1, 0x1);
        gbc.writeMem(0x100f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x8c34);
        EXPECT(gbc.pc(), 0x1010);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03E5
        gbc.setState(0x3b73, 0x4f55, 0xb810, 0x645b, 0xcc83, 0xa8c2, 0x1, 0x0);
        gbc.writeMem(0x3b73, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x4f55);
        EXPECT(gbc.pc(), 0x3b74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B3 03E6
        gbc.setState(0x6251, 0x79f6, 0x3170, 0xe819, 0xf56c, 0x16f7, 0x1, 0x0);
        gbc.writeMem(0x6251, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x79f6);
        EXPECT(gbc.pc(), 0x6252);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
    }
}
#endif
