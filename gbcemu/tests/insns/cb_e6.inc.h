    TEST(gbcemu, opcode_cb_e6) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB E6 0000
        gbc.setState(0x59ff, 0x6b36, 0x3330, 0x4094, 0xe285, 0x31a2, 0x1, 0x0);
        gbc.writeMem(0x31a2, { 0x75 });
        gbc.writeMem(0x59ff, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x6b36);
        EXPECT(gbc.pc(), 0x5a01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 0001
        gbc.setState(0x48f2, 0x6475, 0x7420, 0x90fd, 0x583f, 0x408a, 0x1, 0x1);
        gbc.writeMem(0x408a, { 0x5f });
        gbc.writeMem(0x48f2, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x6475);
        EXPECT(gbc.pc(), 0x48f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E6 0003
        gbc.setState(0xec9f, 0x4ad4, 0x2e70, 0x72d2, 0x62e6, 0x8d90, 0x1, 0x1);
        gbc.writeMem(0x8d90, { 0xd7 });
        gbc.writeMem(0xec9f, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x4ad4);
        EXPECT(gbc.pc(), 0xeca1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d90), 0xd7);
        EXPECT(gbc.readMem(0xec9f), 0xcb);
        EXPECT(gbc.readMem(0xeca0), 0xe6);
        // CB E6 0004
        gbc.setState(0xb009, 0x5773, 0x9200, 0xa508, 0x6aae, 0xf25d, 0x1, 0x0);
        gbc.writeMem(0xb009, { 0xcb, 0xe6 });
        gbc.writeMem(0xf25d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x5773);
        EXPECT(gbc.pc(), 0xb00b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb009), 0xcb);
        EXPECT(gbc.readMem(0xb00a), 0xe6);
        EXPECT(gbc.readMem(0xf25d), 0xb7);
        // CB E6 0005
        gbc.setState(0xee8e, 0x1eb6, 0x5680, 0xfcac, 0xc484, 0x1417, 0x1, 0x0);
        gbc.writeMem(0x1417, { 0xd1 });
        gbc.writeMem(0xee8e, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x1eb6);
        EXPECT(gbc.pc(), 0xee90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee8e), 0xcb);
        EXPECT(gbc.readMem(0xee8f), 0xe6);
        // CB E6 0006
        gbc.setState(0x431b, 0xfced, 0xa180, 0x5b1a, 0xf9d, 0x821, 0x1, 0x0);
        gbc.writeMem(0x821, { 0xb2 });
        gbc.writeMem(0x431b, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xfced);
        EXPECT(gbc.pc(), 0x431d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E6 0007
        gbc.setState(0xbb10, 0xca9b, 0x24a0, 0x6890, 0xfd5, 0x8a6c, 0x0, 0x1);
        gbc.writeMem(0x8a6c, { 0x64 });
        gbc.writeMem(0xbb10, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xca9b);
        EXPECT(gbc.pc(), 0xbb12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a6c), 0x74);
        EXPECT(gbc.readMem(0xbb10), 0xcb);
        EXPECT(gbc.readMem(0xbb11), 0xe6);
        // CB E6 0009
        gbc.setState(0x708b, 0x96c4, 0xc5f0, 0xc509, 0x7add, 0x897f, 0x1, 0x0);
        gbc.writeMem(0x708b, { 0xcb, 0xe6 });
        gbc.writeMem(0x897f, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x96c4);
        EXPECT(gbc.pc(), 0x708d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x897f), 0x96);
        // CB E6 000A
        gbc.setState(0x8995, 0xda95, 0x4a00, 0x2f36, 0x1ba4, 0xd301, 0x0, 0x0);
        gbc.writeMem(0x8995, { 0xcb, 0xe6 });
        gbc.writeMem(0xd301, { 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xda95);
        EXPECT(gbc.pc(), 0x8997);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8995), 0xcb);
        EXPECT(gbc.readMem(0x8996), 0xe6);
        EXPECT(gbc.readMem(0xd301), 0x56);
        // CB E6 000B
        gbc.setState(0x67f4, 0xe4a9, 0xfbb0, 0xc1e3, 0x3f06, 0xd61c, 0x0, 0x1);
        gbc.writeMem(0x67f4, { 0xcb, 0xe6 });
        gbc.writeMem(0xd61c, { 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xe4a9);
        EXPECT(gbc.pc(), 0x67f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd61c), 0xff);
        // CB E6 000C
        gbc.setState(0xe3bd, 0x8f48, 0x1080, 0x3956, 0xe3eb, 0xc83e, 0x1, 0x1);
        gbc.writeMem(0xc83e, { 0xc8 });
        gbc.writeMem(0xe3bd, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x8f48);
        EXPECT(gbc.pc(), 0xe3bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc83e), 0xd8);
        EXPECT(gbc.readMem(0xe3bd), 0xcb);
        EXPECT(gbc.readMem(0xe3be), 0xe6);
        // CB E6 000D
        gbc.setState(0x6bf1, 0x3e52, 0xdd90, 0xffe4, 0xd69c, 0x9105, 0x0, 0x0);
        gbc.writeMem(0x6bf1, { 0xcb, 0xe6 });
        gbc.writeMem(0x9105, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x3e52);
        EXPECT(gbc.pc(), 0x6bf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9105), 0xd7);
        // CB E6 000F
        gbc.setState(0xd164, 0x8c7c, 0xe240, 0x137, 0x5574, 0xe1b8, 0x1, 0x1);
        gbc.writeMem(0xd164, { 0xcb, 0xe6 });
        gbc.writeMem(0xe1b8, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x8c7c);
        EXPECT(gbc.pc(), 0xd166);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd164), 0xcb);
        EXPECT(gbc.readMem(0xd165), 0xe6);
        EXPECT(gbc.readMem(0xe1b8), 0x9b);
        // CB E6 0011
        gbc.setState(0xb8ba, 0x5edd, 0x9630, 0x3ac5, 0x9f, 0xa5cf, 0x1, 0x0);
        gbc.writeMem(0xa5cf, { 0xff });
        gbc.writeMem(0xb8ba, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x5edd);
        EXPECT(gbc.pc(), 0xb8bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5cf), 0xff);
        EXPECT(gbc.readMem(0xb8ba), 0xcb);
        EXPECT(gbc.readMem(0xb8bb), 0xe6);
        // CB E6 0012
        gbc.setState(0x43a2, 0x9f0b, 0x73b0, 0x511b, 0xda8b, 0xaf84, 0x1, 0x0);
        gbc.writeMem(0x43a2, { 0xcb, 0xe6 });
        gbc.writeMem(0xaf84, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x9f0b);
        EXPECT(gbc.pc(), 0x43a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf84), 0xf9);
        // CB E6 0014
        gbc.setState(0x93ef, 0x46b4, 0x5fe0, 0x5f07, 0x6a99, 0xeb8e, 0x1, 0x1);
        gbc.writeMem(0x93ef, { 0xcb, 0xe6 });
        gbc.writeMem(0xeb8e, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x46b4);
        EXPECT(gbc.pc(), 0x93f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93ef), 0xcb);
        EXPECT(gbc.readMem(0x93f0), 0xe6);
        EXPECT(gbc.readMem(0xeb8e), 0x30);
        // CB E6 0015
        gbc.setState(0x5228, 0xf8ef, 0x6a50, 0x36d9, 0x50c4, 0x7d80, 0x0, 0x0);
        gbc.writeMem(0x5228, { 0xcb, 0xe6 });
        gbc.writeMem(0x7d80, { 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xf8ef);
        EXPECT(gbc.pc(), 0x522a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E6 0016
        gbc.setState(0x3d5d, 0x9432, 0xc480, 0x265b, 0x5bf1, 0xd7e6, 0x0, 0x1);
        gbc.writeMem(0x3d5d, { 0xcb, 0xe6 });
        gbc.writeMem(0xd7e6, { 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x9432);
        EXPECT(gbc.pc(), 0x3d5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7e6), 0xde);
        // CB E6 001A
        gbc.setState(0x626e, 0x51d5, 0x5f10, 0x9f33, 0x50c7, 0xb754, 0x0, 0x0);
        gbc.writeMem(0x626e, { 0xcb, 0xe6 });
        gbc.writeMem(0xb754, { 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x51d5);
        EXPECT(gbc.pc(), 0x6270);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb754), 0x7e);
        // CB E6 001B
        gbc.setState(0x7562, 0xf5b5, 0x9bf0, 0x1683, 0x3aee, 0x6e91, 0x0, 0x1);
        gbc.writeMem(0x6e91, { 0x36 });
        gbc.writeMem(0x7562, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xf5b5);
        EXPECT(gbc.pc(), 0x7564);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 001D
        gbc.setState(0x3f00, 0x36de, 0xda10, 0x492d, 0x63f9, 0xa047, 0x1, 0x1);
        gbc.writeMem(0x3f00, { 0xcb, 0xe6 });
        gbc.writeMem(0xa047, { 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x36de);
        EXPECT(gbc.pc(), 0x3f02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa047), 0x92);
        // CB E6 0020
        gbc.setState(0x40a5, 0x7779, 0x1290, 0xad9, 0x262f, 0xe23d, 0x1, 0x1);
        gbc.writeMem(0x40a5, { 0xcb, 0xe6 });
        gbc.writeMem(0xe23d, { 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x7779);
        EXPECT(gbc.pc(), 0x40a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe23d), 0x16);
        // CB E6 0021
        gbc.setState(0xcd88, 0xf57c, 0x57c0, 0x8caa, 0x13b8, 0x57e5, 0x0, 0x1);
        gbc.writeMem(0x57e5, { 0xfc });
        gbc.writeMem(0xcd88, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xf57c);
        EXPECT(gbc.pc(), 0xcd8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd88), 0xcb);
        EXPECT(gbc.readMem(0xcd89), 0xe6);
        // CB E6 0023
        gbc.setState(0x246, 0x513, 0xaa40, 0x38b7, 0xb884, 0x7f50, 0x1, 0x0);
        gbc.writeMem(0x246, { 0xcb, 0xe6 });
        gbc.writeMem(0x7f50, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x513);
        EXPECT(gbc.pc(), 0x248);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E6 0024
        gbc.setState(0x9317, 0x1d67, 0x7010, 0x9521, 0x510f, 0xaea0, 0x1, 0x0);
        gbc.writeMem(0x9317, { 0xcb, 0xe6 });
        gbc.writeMem(0xaea0, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x1d67);
        EXPECT(gbc.pc(), 0x9319);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9317), 0xcb);
        EXPECT(gbc.readMem(0x9318), 0xe6);
        EXPECT(gbc.readMem(0xaea0), 0x79);
        // CB E6 0025
        gbc.setState(0x3674, 0x7eda, 0xb620, 0x9929, 0xd41d, 0xb797, 0x1, 0x1);
        gbc.writeMem(0x3674, { 0xcb, 0xe6 });
        gbc.writeMem(0xb797, { 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x7eda);
        EXPECT(gbc.pc(), 0x3676);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb797), 0x1d);
        // CB E6 0028
        gbc.setState(0x6b57, 0x12d3, 0xc090, 0x6dd1, 0x9369, 0x7227, 0x1, 0x1);
        gbc.writeMem(0x6b57, { 0xcb, 0xe6 });
        gbc.writeMem(0x7227, { 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x12d3);
        EXPECT(gbc.pc(), 0x6b59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E6 0029
        gbc.setState(0x4594, 0x151b, 0x2a70, 0x90ee, 0x8c57, 0x752b, 0x0, 0x0);
        gbc.writeMem(0x4594, { 0xcb, 0xe6 });
        gbc.writeMem(0x752b, { 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x151b);
        EXPECT(gbc.pc(), 0x4596);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 002A
        gbc.setState(0x91b1, 0x1ed4, 0x5c80, 0x75c6, 0x5d63, 0x157c, 0x0, 0x0);
        gbc.writeMem(0x157c, { 0xd2 });
        gbc.writeMem(0x91b1, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x1ed4);
        EXPECT(gbc.pc(), 0x91b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91b1), 0xcb);
        EXPECT(gbc.readMem(0x91b2), 0xe6);
        // CB E6 002B
        gbc.setState(0xcfe5, 0x6e28, 0xb4c0, 0x3595, 0x42b8, 0xc370, 0x0, 0x1);
        gbc.writeMem(0xc370, { 0xa7 });
        gbc.writeMem(0xcfe5, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x6e28);
        EXPECT(gbc.pc(), 0xcfe7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc370), 0xb7);
        EXPECT(gbc.readMem(0xcfe5), 0xcb);
        EXPECT(gbc.readMem(0xcfe6), 0xe6);
        // CB E6 002D
        gbc.setState(0x17a6, 0x77fb, 0x50a0, 0xbb3a, 0xdd2d, 0xad9e, 0x1, 0x1);
        gbc.writeMem(0x17a6, { 0xcb, 0xe6 });
        gbc.writeMem(0xad9e, { 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x77fb);
        EXPECT(gbc.pc(), 0x17a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad9e), 0xd7);
        // CB E6 002E
        gbc.setState(0xeaa1, 0xa1d7, 0xc1a0, 0xfcda, 0x33d8, 0xd05, 0x0, 0x0);
        gbc.writeMem(0xd05, { 0xb1 });
        gbc.writeMem(0xeaa1, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xa1d7);
        EXPECT(gbc.pc(), 0xeaa3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaa1), 0xcb);
        EXPECT(gbc.readMem(0xeaa2), 0xe6);
        // CB E6 0030
        gbc.setState(0x606a, 0xec76, 0x2530, 0x3a7d, 0x626d, 0x8e48, 0x1, 0x1);
        gbc.writeMem(0x606a, { 0xcb, 0xe6 });
        gbc.writeMem(0x8e48, { 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xec76);
        EXPECT(gbc.pc(), 0x606c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e48), 0x3a);
        // CB E6 0031
        gbc.setState(0x41b4, 0xa2ad, 0x7030, 0xf914, 0xb79b, 0x9e8e, 0x0, 0x0);
        gbc.writeMem(0x41b4, { 0xcb, 0xe6 });
        gbc.writeMem(0x9e8e, { 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xa2ad);
        EXPECT(gbc.pc(), 0x41b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e8e), 0xfd);
        // CB E6 0032
        gbc.setState(0x9f21, 0x4225, 0x17b0, 0xf8b1, 0x22ba, 0xb4a6, 0x1, 0x0);
        gbc.writeMem(0x9f21, { 0xcb, 0xe6 });
        gbc.writeMem(0xb4a6, { 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x4225);
        EXPECT(gbc.pc(), 0x9f23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f21), 0xcb);
        EXPECT(gbc.readMem(0x9f22), 0xe6);
        EXPECT(gbc.readMem(0xb4a6), 0xf0);
        // CB E6 0033
        gbc.setState(0x918d, 0x5ac7, 0x37d0, 0x3ed3, 0xd611, 0xa12e, 0x1, 0x1);
        gbc.writeMem(0x918d, { 0xcb, 0xe6 });
        gbc.writeMem(0xa12e, { 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x5ac7);
        EXPECT(gbc.pc(), 0x918f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x918d), 0xcb);
        EXPECT(gbc.readMem(0x918e), 0xe6);
        EXPECT(gbc.readMem(0xa12e), 0xde);
        // CB E6 0034
        gbc.setState(0xeba8, 0x3d1b, 0x1e90, 0xd2ff, 0x971a, 0xdbf, 0x1, 0x0);
        gbc.writeMem(0xdbf, { 0x3b });
        gbc.writeMem(0xeba8, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x3d1b);
        EXPECT(gbc.pc(), 0xebaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeba8), 0xcb);
        EXPECT(gbc.readMem(0xeba9), 0xe6);
        // CB E6 0036
        gbc.setState(0x344, 0x86c5, 0xe7c0, 0xe9d7, 0x627f, 0xf2b6, 0x0, 0x1);
        gbc.writeMem(0x344, { 0xcb, 0xe6 });
        gbc.writeMem(0xf2b6, { 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x86c5);
        EXPECT(gbc.pc(), 0x346);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf2b6), 0xd1);
        // CB E6 0039
        gbc.setState(0x65d0, 0x43f, 0x5b70, 0x12b1, 0xdf9e, 0x5ddc, 0x1, 0x0);
        gbc.writeMem(0x5ddc, { 0xf0 });
        gbc.writeMem(0x65d0, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x43f);
        EXPECT(gbc.pc(), 0x65d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 003A
        gbc.setState(0x4b7b, 0x2be2, 0xe630, 0x592c, 0xf335, 0xb3c7, 0x1, 0x1);
        gbc.writeMem(0x4b7b, { 0xcb, 0xe6 });
        gbc.writeMem(0xb3c7, { 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x2be2);
        EXPECT(gbc.pc(), 0x4b7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3c7), 0x9a);
        // CB E6 003B
        gbc.setState(0x1f8d, 0x6a98, 0xd4c0, 0x4a7d, 0xcd6a, 0x7cc1, 0x0, 0x0);
        gbc.writeMem(0x1f8d, { 0xcb, 0xe6 });
        gbc.writeMem(0x7cc1, { 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x6a98);
        EXPECT(gbc.pc(), 0x1f8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E6 003C
        gbc.setState(0x8043, 0xe8ea, 0xbd40, 0xb2b7, 0xe167, 0xe7fb, 0x0, 0x0);
        gbc.writeMem(0x8043, { 0xcb, 0xe6 });
        gbc.writeMem(0xe7fb, { 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xe8ea);
        EXPECT(gbc.pc(), 0x8045);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8043), 0xcb);
        EXPECT(gbc.readMem(0x8044), 0xe6);
        EXPECT(gbc.readMem(0xe7fb), 0x5b);
        // CB E6 003F
        gbc.setState(0xe03a, 0xaf1, 0x2e0, 0x4c78, 0xf9e2, 0x88c0, 0x0, 0x0);
        gbc.writeMem(0x88c0, { 0x8c });
        gbc.writeMem(0xe03a, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xaf1);
        EXPECT(gbc.pc(), 0xe03c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88c0), 0x9c);
        EXPECT(gbc.readMem(0xe03a), 0xcb);
        EXPECT(gbc.readMem(0xe03b), 0xe6);
        // CB E6 0040
        gbc.setState(0xa1cc, 0xd0eb, 0x7250, 0x804a, 0x3801, 0xcdc6, 0x1, 0x1);
        gbc.writeMem(0xa1cc, { 0xcb, 0xe6 });
        gbc.writeMem(0xcdc6, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xd0eb);
        EXPECT(gbc.pc(), 0xa1ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1cc), 0xcb);
        EXPECT(gbc.readMem(0xa1cd), 0xe6);
        EXPECT(gbc.readMem(0xcdc6), 0x5c);
        // CB E6 0041
        gbc.setState(0xa5a6, 0x7527, 0xa6f0, 0xf473, 0xfd67, 0x8a99, 0x0, 0x1);
        gbc.writeMem(0x8a99, { 0xf7 });
        gbc.writeMem(0xa5a6, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x7527);
        EXPECT(gbc.pc(), 0xa5a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a99), 0xf7);
        EXPECT(gbc.readMem(0xa5a6), 0xcb);
        EXPECT(gbc.readMem(0xa5a7), 0xe6);
        // CB E6 0042
        gbc.setState(0xe65d, 0xab50, 0x1360, 0x9b6, 0xd5b7, 0xf065, 0x1, 0x0);
        gbc.writeMem(0xe65d, { 0xcb, 0xe6 });
        gbc.writeMem(0xf065, { 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xab50);
        EXPECT(gbc.pc(), 0xe65f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe65d), 0xcb);
        EXPECT(gbc.readMem(0xe65e), 0xe6);
        EXPECT(gbc.readMem(0xf065), 0x99);
        // CB E6 0043
        gbc.setState(0xe507, 0xa3a, 0x4b70, 0xbdd9, 0x8183, 0x4f1f, 0x0, 0x1);
        gbc.writeMem(0x4f1f, { 0x94 });
        gbc.writeMem(0xe507, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xa3a);
        EXPECT(gbc.pc(), 0xe509);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe507), 0xcb);
        EXPECT(gbc.readMem(0xe508), 0xe6);
        // CB E6 0044
        gbc.setState(0x39a7, 0xa65b, 0x4f10, 0x531e, 0xab72, 0xae6b, 0x1, 0x0);
        gbc.writeMem(0x39a7, { 0xcb, 0xe6 });
        gbc.writeMem(0xae6b, { 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xa65b);
        EXPECT(gbc.pc(), 0x39a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae6b), 0x7b);
        // CB E6 0045
        gbc.setState(0xc7b, 0x8a1, 0xccf0, 0xe747, 0x9dce, 0xeb00, 0x0, 0x1);
        gbc.writeMem(0xc7b, { 0xcb, 0xe6 });
        gbc.writeMem(0xeb00, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x8a1);
        EXPECT(gbc.pc(), 0xc7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb00), 0xb8);
        // CB E6 0046
        gbc.setState(0x32d, 0x3e89, 0x7fd0, 0x40a2, 0x8c9a, 0xd1db, 0x1, 0x1);
        gbc.writeMem(0x32d, { 0xcb, 0xe6 });
        gbc.writeMem(0xd1db, { 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x3e89);
        EXPECT(gbc.pc(), 0x32f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1db), 0xbf);
        // CB E6 0047
        gbc.setState(0x3774, 0x7979, 0x98c0, 0xfc42, 0x59d4, 0x57bd, 0x1, 0x1);
        gbc.writeMem(0x3774, { 0xcb, 0xe6 });
        gbc.writeMem(0x57bd, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x7979);
        EXPECT(gbc.pc(), 0x3776);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E6 0048
        gbc.setState(0x83fd, 0x6dc8, 0xf950, 0x5941, 0x6dae, 0x7422, 0x0, 0x0);
        gbc.writeMem(0x7422, { 0xbd });
        gbc.writeMem(0x83fd, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x6dc8);
        EXPECT(gbc.pc(), 0x83ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83fd), 0xcb);
        EXPECT(gbc.readMem(0x83fe), 0xe6);
        // CB E6 0049
        gbc.setState(0xb65d, 0x666a, 0x6ac0, 0x76b2, 0xd84d, 0x3814, 0x1, 0x1);
        gbc.writeMem(0x3814, { 0xba });
        gbc.writeMem(0xb65d, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x666a);
        EXPECT(gbc.pc(), 0xb65f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb65d), 0xcb);
        EXPECT(gbc.readMem(0xb65e), 0xe6);
        // CB E6 004A
        gbc.setState(0x2072, 0x11ea, 0xd970, 0x80e2, 0x7a80, 0x9b90, 0x1, 0x0);
        gbc.writeMem(0x2072, { 0xcb, 0xe6 });
        gbc.writeMem(0x9b90, { 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x11ea);
        EXPECT(gbc.pc(), 0x2074);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b90), 0xb8);
        // CB E6 004D
        gbc.setState(0x634b, 0x2d46, 0xc2c0, 0x7ec3, 0x3894, 0x7f3d, 0x0, 0x1);
        gbc.writeMem(0x634b, { 0xcb, 0xe6 });
        gbc.writeMem(0x7f3d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x2d46);
        EXPECT(gbc.pc(), 0x634d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E6 004E
        gbc.setState(0x209b, 0x26d5, 0x91c0, 0x8e08, 0x6697, 0x8c3f, 0x0, 0x0);
        gbc.writeMem(0x209b, { 0xcb, 0xe6 });
        gbc.writeMem(0x8c3f, { 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x26d5);
        EXPECT(gbc.pc(), 0x209d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c3f), 0xfe);
        // CB E6 004F
        gbc.setState(0xe18f, 0x23de, 0x40d0, 0x1adf, 0xa6fb, 0xe292, 0x1, 0x1);
        gbc.writeMem(0xe18f, { 0xcb, 0xe6 });
        gbc.writeMem(0xe292, { 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x23de);
        EXPECT(gbc.pc(), 0xe191);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe18f), 0xcb);
        EXPECT(gbc.readMem(0xe190), 0xe6);
        EXPECT(gbc.readMem(0xe292), 0x91);
        // CB E6 0050
        gbc.setState(0x3307, 0xcd9e, 0x54a0, 0xf28a, 0xa709, 0x58dc, 0x1, 0x1);
        gbc.writeMem(0x3307, { 0xcb, 0xe6 });
        gbc.writeMem(0x58dc, { 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xcd9e);
        EXPECT(gbc.pc(), 0x3309);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E6 0051
        gbc.setState(0xc09f, 0x99b5, 0xc1d0, 0x7f2b, 0xac15, 0xe2c1, 0x1, 0x1);
        gbc.writeMem(0xc09f, { 0xcb, 0xe6 });
        gbc.writeMem(0xe2c1, { 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x99b5);
        EXPECT(gbc.pc(), 0xc0a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc09f), 0xcb);
        EXPECT(gbc.readMem(0xc0a0), 0xe6);
        EXPECT(gbc.readMem(0xe2c1), 0xf7);
        // CB E6 0052
        gbc.setState(0xa5c5, 0xd033, 0x6910, 0xaf29, 0xd3f, 0xd9eb, 0x0, 0x1);
        gbc.writeMem(0xa5c5, { 0xcb, 0xe6 });
        gbc.writeMem(0xd9eb, { 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xd033);
        EXPECT(gbc.pc(), 0xa5c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5c5), 0xcb);
        EXPECT(gbc.readMem(0xa5c6), 0xe6);
        EXPECT(gbc.readMem(0xd9eb), 0x72);
        // CB E6 0053
        gbc.setState(0x3d07, 0xf050, 0x85f0, 0x6cee, 0xe02, 0x43bf, 0x1, 0x1);
        gbc.writeMem(0x3d07, { 0xcb, 0xe6 });
        gbc.writeMem(0x43bf, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xf050);
        EXPECT(gbc.pc(), 0x3d09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 0054
        gbc.setState(0xd8cb, 0x8535, 0x2700, 0x461, 0x9f7a, 0x99f8, 0x0, 0x1);
        gbc.writeMem(0x99f8, { 0x4d });
        gbc.writeMem(0xd8cb, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x8535);
        EXPECT(gbc.pc(), 0xd8cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99f8), 0x5d);
        EXPECT(gbc.readMem(0xd8cb), 0xcb);
        EXPECT(gbc.readMem(0xd8cc), 0xe6);
        // CB E6 0059
        gbc.setState(0x11c6, 0x349e, 0x8f10, 0x4339, 0x25da, 0xa4a2, 0x0, 0x1);
        gbc.writeMem(0x11c6, { 0xcb, 0xe6 });
        gbc.writeMem(0xa4a2, { 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x349e);
        EXPECT(gbc.pc(), 0x11c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4a2), 0x72);
        // CB E6 005A
        gbc.setState(0x1f2c, 0xb09c, 0x3b80, 0x1f47, 0x7eae, 0xb1db, 0x0, 0x1);
        gbc.writeMem(0x1f2c, { 0xcb, 0xe6 });
        gbc.writeMem(0xb1db, { 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xb09c);
        EXPECT(gbc.pc(), 0x1f2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1db), 0xb0);
        // CB E6 005B
        gbc.setState(0xed41, 0xdef8, 0x1750, 0x2a63, 0xc8cd, 0x5779, 0x1, 0x0);
        gbc.writeMem(0x5779, { 0x59 });
        gbc.writeMem(0xed41, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xdef8);
        EXPECT(gbc.pc(), 0xed43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed41), 0xcb);
        EXPECT(gbc.readMem(0xed42), 0xe6);
        // CB E6 0061
        gbc.setState(0xdef9, 0xe9f5, 0xaf70, 0xfbf4, 0xdd5b, 0xa4ea, 0x0, 0x0);
        gbc.writeMem(0xa4ea, { 0x94 });
        gbc.writeMem(0xdef9, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xe9f5);
        EXPECT(gbc.pc(), 0xdefb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4ea), 0x94);
        EXPECT(gbc.readMem(0xdef9), 0xcb);
        EXPECT(gbc.readMem(0xdefa), 0xe6);
        // CB E6 0062
        gbc.setState(0x6048, 0xb2f3, 0x90a0, 0x2734, 0xf8dd, 0xb88, 0x1, 0x0);
        gbc.writeMem(0xb88, { 0xf1 });
        gbc.writeMem(0x6048, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xb2f3);
        EXPECT(gbc.pc(), 0x604a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E6 0063
        gbc.setState(0x806, 0xe73e, 0x5e40, 0x4f63, 0xea9d, 0xa4cf, 0x0, 0x0);
        gbc.writeMem(0x806, { 0xcb, 0xe6 });
        gbc.writeMem(0xa4cf, { 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xe73e);
        EXPECT(gbc.pc(), 0x808);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4cf), 0x90);
        // CB E6 0064
        gbc.setState(0xe76e, 0xce58, 0xefd0, 0x7849, 0x90b2, 0x9882, 0x1, 0x1);
        gbc.writeMem(0x9882, { 0xe });
        gbc.writeMem(0xe76e, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xce58);
        EXPECT(gbc.pc(), 0xe770);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9882), 0x1e);
        EXPECT(gbc.readMem(0xe76e), 0xcb);
        EXPECT(gbc.readMem(0xe76f), 0xe6);
        // CB E6 0065
        gbc.setState(0x74ad, 0x5e90, 0xf7c0, 0x5263, 0x104d, 0xab02, 0x1, 0x0);
        gbc.writeMem(0x74ad, { 0xcb, 0xe6 });
        gbc.writeMem(0xab02, { 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x5e90);
        EXPECT(gbc.pc(), 0x74af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab02), 0x3a);
        // CB E6 0066
        gbc.setState(0x1340, 0xbcb9, 0x1190, 0xc5ab, 0xe7a6, 0xec4f, 0x1, 0x1);
        gbc.writeMem(0x1340, { 0xcb, 0xe6 });
        gbc.writeMem(0xec4f, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xbcb9);
        EXPECT(gbc.pc(), 0x1342);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec4f), 0x5a);
        // CB E6 0067
        gbc.setState(0x209e, 0x87fd, 0xa9a0, 0x563f, 0xb39a, 0x96ed, 0x0, 0x0);
        gbc.writeMem(0x209e, { 0xcb, 0xe6 });
        gbc.writeMem(0x96ed, { 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x87fd);
        EXPECT(gbc.pc(), 0x20a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96ed), 0x95);
        // CB E6 0069
        gbc.setState(0x6d65, 0x3712, 0x6c30, 0x40f, 0x4f60, 0xae56, 0x0, 0x0);
        gbc.writeMem(0x6d65, { 0xcb, 0xe6 });
        gbc.writeMem(0xae56, { 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x3712);
        EXPECT(gbc.pc(), 0x6d67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae56), 0x78);
        // CB E6 006A
        gbc.setState(0xe16a, 0x7162, 0x30, 0x4b62, 0xf3f6, 0xae1c, 0x1, 0x0);
        gbc.writeMem(0xae1c, { 0x5f });
        gbc.writeMem(0xe16a, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x7162);
        EXPECT(gbc.pc(), 0xe16c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae1c), 0x5f);
        EXPECT(gbc.readMem(0xe16a), 0xcb);
        EXPECT(gbc.readMem(0xe16b), 0xe6);
        // CB E6 006B
        gbc.setState(0x110c, 0xa878, 0xad80, 0x635e, 0xb7df, 0xc83b, 0x1, 0x0);
        gbc.writeMem(0x110c, { 0xcb, 0xe6 });
        gbc.writeMem(0xc83b, { 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xa878);
        EXPECT(gbc.pc(), 0x110e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc83b), 0x9c);
        // CB E6 006C
        gbc.setState(0x8251, 0x9c11, 0x1170, 0x19f3, 0xbb5d, 0xe99a, 0x1, 0x0);
        gbc.writeMem(0x8251, { 0xcb, 0xe6 });
        gbc.writeMem(0xe99a, { 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x9c11);
        EXPECT(gbc.pc(), 0x8253);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8251), 0xcb);
        EXPECT(gbc.readMem(0x8252), 0xe6);
        EXPECT(gbc.readMem(0xe99a), 0x74);
        // CB E6 006D
        gbc.setState(0xa34d, 0xe9e3, 0x2900, 0x2eb, 0x5f12, 0xafcf, 0x0, 0x0);
        gbc.writeMem(0xa34d, { 0xcb, 0xe6 });
        gbc.writeMem(0xafcf, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xe9e3);
        EXPECT(gbc.pc(), 0xa34f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa34d), 0xcb);
        EXPECT(gbc.readMem(0xa34e), 0xe6);
        EXPECT(gbc.readMem(0xafcf), 0x10);
        // CB E6 006E
        gbc.setState(0x7fa9, 0x4000, 0xe060, 0x59a0, 0x15b6, 0xed2e, 0x0, 0x0);
        gbc.writeMem(0x7fa9, { 0xcb, 0xe6 });
        gbc.writeMem(0xed2e, { 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x4000);
        EXPECT(gbc.pc(), 0x7fab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed2e), 0x70);
        // CB E6 006F
        gbc.setState(0x5f54, 0xdad, 0x9ab0, 0x39de, 0xe8d2, 0x8beb, 0x1, 0x0);
        gbc.writeMem(0x5f54, { 0xcb, 0xe6 });
        gbc.writeMem(0x8beb, { 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xdad);
        EXPECT(gbc.pc(), 0x5f56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8beb), 0xb8);
        // CB E6 0070
        gbc.setState(0x42ee, 0x4000, 0x38d0, 0x36ef, 0xb5b8, 0x886a, 0x0, 0x0);
        gbc.writeMem(0x42ee, { 0xcb, 0xe6 });
        gbc.writeMem(0x886a, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x4000);
        EXPECT(gbc.pc(), 0x42f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x886a), 0xf9);
        // CB E6 0071
        gbc.setState(0xb35, 0x59c1, 0x2590, 0x4e4c, 0x20af, 0x7b6b, 0x0, 0x0);
        gbc.writeMem(0xb35, { 0xcb, 0xe6 });
        gbc.writeMem(0x7b6b, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x59c1);
        EXPECT(gbc.pc(), 0xb37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E6 0072
        gbc.setState(0x2fa5, 0x6d1b, 0xb4b0, 0xa0d2, 0x494d, 0xa0e4, 0x1, 0x1);
        gbc.writeMem(0x2fa5, { 0xcb, 0xe6 });
        gbc.writeMem(0xa0e4, { 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x6d1b);
        EXPECT(gbc.pc(), 0x2fa7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0e4), 0x13);
        // CB E6 0073
        gbc.setState(0xec30, 0xd368, 0x3390, 0xb72d, 0x23db, 0xf03, 0x0, 0x1);
        gbc.writeMem(0xf03, { 0x39 });
        gbc.writeMem(0xec30, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xd368);
        EXPECT(gbc.pc(), 0xec32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec30), 0xcb);
        EXPECT(gbc.readMem(0xec31), 0xe6);
        // CB E6 0074
        gbc.setState(0xd133, 0x9e16, 0x7ae0, 0x3b38, 0x85c, 0xe990, 0x1, 0x1);
        gbc.writeMem(0xd133, { 0xcb, 0xe6 });
        gbc.writeMem(0xe990, { 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x9e16);
        EXPECT(gbc.pc(), 0xd135);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd133), 0xcb);
        EXPECT(gbc.readMem(0xd134), 0xe6);
        EXPECT(gbc.readMem(0xe990), 0xdc);
        // CB E6 0075
        gbc.setState(0xe931, 0xcd4f, 0xdd40, 0x1c4d, 0xcffe, 0x325e, 0x1, 0x0);
        gbc.writeMem(0x325e, { 0x7c });
        gbc.writeMem(0xe931, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xcd4f);
        EXPECT(gbc.pc(), 0xe933);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe931), 0xcb);
        EXPECT(gbc.readMem(0xe932), 0xe6);
        // CB E6 0077
        gbc.setState(0x9b1c, 0xc9fc, 0xb8d0, 0x1d8d, 0x5f3e, 0xe5c9, 0x0, 0x0);
        gbc.writeMem(0x9b1c, { 0xcb, 0xe6 });
        gbc.writeMem(0xe5c9, { 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xc9fc);
        EXPECT(gbc.pc(), 0x9b1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b1c), 0xcb);
        EXPECT(gbc.readMem(0x9b1d), 0xe6);
        EXPECT(gbc.readMem(0xe5c9), 0x97);
        // CB E6 0079
        gbc.setState(0xb506, 0xaeaf, 0xff90, 0xb572, 0xae48, 0xda1c, 0x1, 0x0);
        gbc.writeMem(0xb506, { 0xcb, 0xe6 });
        gbc.writeMem(0xda1c, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xaeaf);
        EXPECT(gbc.pc(), 0xb508);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb506), 0xcb);
        EXPECT(gbc.readMem(0xb507), 0xe6);
        EXPECT(gbc.readMem(0xda1c), 0xdf);
        // CB E6 007A
        gbc.setState(0x23d6, 0x1e1b, 0xda80, 0xd599, 0xc864, 0xf463, 0x1, 0x1);
        gbc.writeMem(0x23d6, { 0xcb, 0xe6 });
        gbc.writeMem(0xf463, { 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x1e1b);
        EXPECT(gbc.pc(), 0x23d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf463), 0x1f);
        // CB E6 007B
        gbc.setState(0x94fa, 0xb7d, 0xd460, 0x47b1, 0x961b, 0xd1f4, 0x0, 0x0);
        gbc.writeMem(0x94fa, { 0xcb, 0xe6 });
        gbc.writeMem(0xd1f4, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xb7d);
        EXPECT(gbc.pc(), 0x94fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94fa), 0xcb);
        EXPECT(gbc.readMem(0x94fb), 0xe6);
        EXPECT(gbc.readMem(0xd1f4), 0xf4);
        // CB E6 007C
        gbc.setState(0x266a, 0x1abe, 0x7850, 0xbd68, 0x578b, 0xf275, 0x0, 0x0);
        gbc.writeMem(0x266a, { 0xcb, 0xe6 });
        gbc.writeMem(0xf275, { 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x1abe);
        EXPECT(gbc.pc(), 0x266c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf275), 0xde);
        // CB E6 007D
        gbc.setState(0x9466, 0x9c94, 0xfd20, 0xfa3d, 0x500a, 0x9373, 0x0, 0x1);
        gbc.writeMem(0x9373, { 0xc0 });
        gbc.writeMem(0x9466, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x9c94);
        EXPECT(gbc.pc(), 0x9468);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9373), 0xd0);
        EXPECT(gbc.readMem(0x9466), 0xcb);
        EXPECT(gbc.readMem(0x9467), 0xe6);
        // CB E6 007F
        gbc.setState(0xe5e3, 0xb46e, 0x8bb0, 0x3db2, 0xfe87, 0x55b4, 0x0, 0x1);
        gbc.writeMem(0x55b4, { 0x31 });
        gbc.writeMem(0xe5e3, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xb46e);
        EXPECT(gbc.pc(), 0xe5e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5e3), 0xcb);
        EXPECT(gbc.readMem(0xe5e4), 0xe6);
        // CB E6 0080
        gbc.setState(0xe2c4, 0xd780, 0x2870, 0x6a8f, 0x613e, 0x1282, 0x0, 0x1);
        gbc.writeMem(0x1282, { 0xdb });
        gbc.writeMem(0xe2c4, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xd780);
        EXPECT(gbc.pc(), 0xe2c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2c4), 0xcb);
        EXPECT(gbc.readMem(0xe2c5), 0xe6);
        // CB E6 0082
        gbc.setState(0xddd7, 0xf7cb, 0x3d60, 0xc472, 0xf782, 0xd325, 0x1, 0x0);
        gbc.writeMem(0xd325, { 0x16 });
        gbc.writeMem(0xddd7, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xf7cb);
        EXPECT(gbc.pc(), 0xddd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd325), 0x16);
        EXPECT(gbc.readMem(0xddd7), 0xcb);
        EXPECT(gbc.readMem(0xddd8), 0xe6);
        // CB E6 0083
        gbc.setState(0x4ee, 0x315f, 0xdf10, 0xd6e7, 0x3ac4, 0x9204, 0x1, 0x0);
        gbc.writeMem(0x4ee, { 0xcb, 0xe6 });
        gbc.writeMem(0x9204, { 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x315f);
        EXPECT(gbc.pc(), 0x4f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9204), 0x14);
        // CB E6 0086
        gbc.setState(0x2482, 0xcb79, 0xf4d0, 0xd7be, 0xacfb, 0x9660, 0x1, 0x0);
        gbc.writeMem(0x2482, { 0xcb, 0xe6 });
        gbc.writeMem(0x9660, { 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xcb79);
        EXPECT(gbc.pc(), 0x2484);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9660), 0xda);
        // CB E6 0087
        gbc.setState(0xad26, 0x6418, 0x2c0, 0x3f22, 0x3396, 0x5d46, 0x1, 0x0);
        gbc.writeMem(0x5d46, { 0x5d });
        gbc.writeMem(0xad26, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x6418);
        EXPECT(gbc.pc(), 0xad28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad26), 0xcb);
        EXPECT(gbc.readMem(0xad27), 0xe6);
        // CB E6 0088
        gbc.setState(0x5e8b, 0xa8de, 0x25f0, 0xc4bd, 0x5303, 0x4afb, 0x1, 0x1);
        gbc.writeMem(0x4afb, { 0x5d });
        gbc.writeMem(0x5e8b, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xa8de);
        EXPECT(gbc.pc(), 0x5e8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 0089
        gbc.setState(0xb23c, 0xe5ff, 0x26f0, 0x1cc7, 0x4001, 0x264f, 0x1, 0x0);
        gbc.writeMem(0x264f, { 0x57 });
        gbc.writeMem(0xb23c, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xe5ff);
        EXPECT(gbc.pc(), 0xb23e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb23c), 0xcb);
        EXPECT(gbc.readMem(0xb23d), 0xe6);
        // CB E6 008E
        gbc.setState(0x9bb3, 0x569, 0xe7e0, 0x17fb, 0x9ce3, 0xa078, 0x1, 0x0);
        gbc.writeMem(0x9bb3, { 0xcb, 0xe6 });
        gbc.writeMem(0xa078, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x569);
        EXPECT(gbc.pc(), 0x9bb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bb3), 0xcb);
        EXPECT(gbc.readMem(0x9bb4), 0xe6);
        EXPECT(gbc.readMem(0xa078), 0x57);
        // CB E6 008F
        gbc.setState(0x8432, 0xeb63, 0x4290, 0x9b50, 0x68e, 0xb7fa, 0x1, 0x0);
        gbc.writeMem(0x8432, { 0xcb, 0xe6 });
        gbc.writeMem(0xb7fa, { 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xeb63);
        EXPECT(gbc.pc(), 0x8434);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8432), 0xcb);
        EXPECT(gbc.readMem(0x8433), 0xe6);
        EXPECT(gbc.readMem(0xb7fa), 0x1a);
        // CB E6 0090
        gbc.setState(0x5f8e, 0x795c, 0xbfc0, 0xc28d, 0x445e, 0xcbe0, 0x1, 0x0);
        gbc.writeMem(0x5f8e, { 0xcb, 0xe6 });
        gbc.writeMem(0xcbe0, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x795c);
        EXPECT(gbc.pc(), 0x5f90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbe0), 0xb3);
        // CB E6 0091
        gbc.setState(0x95eb, 0x501, 0x1fe0, 0x40f9, 0x74cd, 0x191, 0x1, 0x1);
        gbc.writeMem(0x191, { 0xb4 });
        gbc.writeMem(0x95eb, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x501);
        EXPECT(gbc.pc(), 0x95ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95eb), 0xcb);
        EXPECT(gbc.readMem(0x95ec), 0xe6);
        // CB E6 0092
        gbc.setState(0x74cb, 0x32de, 0x6ec0, 0xd02b, 0xed3c, 0xc40a, 0x0, 0x1);
        gbc.writeMem(0x74cb, { 0xcb, 0xe6 });
        gbc.writeMem(0xc40a, { 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x32de);
        EXPECT(gbc.pc(), 0x74cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc40a), 0xf1);
        // CB E6 0094
        gbc.setState(0xe871, 0x1c, 0x5400, 0x5299, 0x65bd, 0x50d4, 0x1, 0x0);
        gbc.writeMem(0x50d4, { 0x39 });
        gbc.writeMem(0xe871, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x1c);
        EXPECT(gbc.pc(), 0xe873);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe871), 0xcb);
        EXPECT(gbc.readMem(0xe872), 0xe6);
        // CB E6 0095
        gbc.setState(0x1dca, 0x5238, 0x2950, 0x543d, 0x175, 0xdd64, 0x1, 0x1);
        gbc.writeMem(0x1dca, { 0xcb, 0xe6 });
        gbc.writeMem(0xdd64, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x5238);
        EXPECT(gbc.pc(), 0x1dcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd64), 0x5c);
        // CB E6 0096
        gbc.setState(0xe94e, 0x47d1, 0x9ce0, 0xbc2c, 0xd548, 0xe4d8, 0x0, 0x0);
        gbc.writeMem(0xe4d8, { 0xa });
        gbc.writeMem(0xe94e, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x47d1);
        EXPECT(gbc.pc(), 0xe950);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4d8), 0x1a);
        EXPECT(gbc.readMem(0xe94e), 0xcb);
        EXPECT(gbc.readMem(0xe94f), 0xe6);
        // CB E6 009A
        gbc.setState(0xd25, 0xd7c9, 0x2610, 0x32b0, 0x2e26, 0xac17, 0x1, 0x0);
        gbc.writeMem(0xd25, { 0xcb, 0xe6 });
        gbc.writeMem(0xac17, { 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xd7c9);
        EXPECT(gbc.pc(), 0xd27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac17), 0x9e);
        // CB E6 009B
        gbc.setState(0x2b0e, 0xfb1d, 0xe520, 0x6559, 0xa9be, 0xb0bf, 0x0, 0x1);
        gbc.writeMem(0x2b0e, { 0xcb, 0xe6 });
        gbc.writeMem(0xb0bf, { 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xfb1d);
        EXPECT(gbc.pc(), 0x2b10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0bf), 0x3c);
        // CB E6 009C
        gbc.setState(0x8e1a, 0x884b, 0xc100, 0x6b09, 0x5611, 0x829c, 0x1, 0x0);
        gbc.writeMem(0x829c, { 0x78 });
        gbc.writeMem(0x8e1a, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x884b);
        EXPECT(gbc.pc(), 0x8e1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x829c), 0x78);
        EXPECT(gbc.readMem(0x8e1a), 0xcb);
        EXPECT(gbc.readMem(0x8e1b), 0xe6);
        // CB E6 009D
        gbc.setState(0xd1d9, 0x76f9, 0x3d90, 0x7dde, 0xbfb0, 0xf31, 0x1, 0x1);
        gbc.writeMem(0xf31, { 0x3f });
        gbc.writeMem(0xd1d9, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x76f9);
        EXPECT(gbc.pc(), 0xd1db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1d9), 0xcb);
        EXPECT(gbc.readMem(0xd1da), 0xe6);
        // CB E6 009E
        gbc.setState(0xe65, 0xa927, 0xc8f0, 0xde28, 0x9338, 0xbce3, 0x1, 0x1);
        gbc.writeMem(0xe65, { 0xcb, 0xe6 });
        gbc.writeMem(0xbce3, { 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xa927);
        EXPECT(gbc.pc(), 0xe67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbce3), 0x18);
        // CB E6 009F
        gbc.setState(0x84d8, 0xae6c, 0xf360, 0x50e, 0xff02, 0x6ddc, 0x1, 0x0);
        gbc.writeMem(0x6ddc, { 0x1b });
        gbc.writeMem(0x84d8, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xae6c);
        EXPECT(gbc.pc(), 0x84da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84d8), 0xcb);
        EXPECT(gbc.readMem(0x84d9), 0xe6);
        // CB E6 00A1
        gbc.setState(0xed0d, 0x63e4, 0x9f50, 0x3b26, 0x51f7, 0xfcd8, 0x0, 0x1);
        gbc.writeMem(0xed0d, { 0xcb, 0xe6 });
        gbc.writeMem(0xfcd8, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x63e4);
        EXPECT(gbc.pc(), 0xed0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed0d), 0xcb);
        EXPECT(gbc.readMem(0xed0e), 0xe6);
        EXPECT(gbc.readMem(0xfcd8), 0x19);
        // CB E6 00A2
        gbc.setState(0x719f, 0xcfbb, 0xb3d0, 0x81b4, 0x25f8, 0xf83d, 0x1, 0x0);
        gbc.writeMem(0x719f, { 0xcb, 0xe6 });
        gbc.writeMem(0xf83d, { 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xcfbb);
        EXPECT(gbc.pc(), 0x71a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf83d), 0xbc);
        // CB E6 00A3
        gbc.setState(0x7deb, 0xc318, 0xa2d0, 0x5c02, 0x49c2, 0xf97f, 0x0, 0x1);
        gbc.writeMem(0x7deb, { 0xcb, 0xe6 });
        gbc.writeMem(0xf97f, { 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xc318);
        EXPECT(gbc.pc(), 0x7ded);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf97f), 0x91);
        // CB E6 00A4
        gbc.setState(0xda40, 0x8a0c, 0x7900, 0x9ecc, 0x1d3c, 0xca36, 0x1, 0x1);
        gbc.writeMem(0xca36, { 0xba });
        gbc.writeMem(0xda40, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x8a0c);
        EXPECT(gbc.pc(), 0xda42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca36), 0xba);
        EXPECT(gbc.readMem(0xda40), 0xcb);
        EXPECT(gbc.readMem(0xda41), 0xe6);
        // CB E6 00A5
        gbc.setState(0xe433, 0xa36e, 0xc260, 0xc042, 0xf60d, 0x1255, 0x0, 0x0);
        gbc.writeMem(0x1255, { 0xf2 });
        gbc.writeMem(0xe433, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xa36e);
        EXPECT(gbc.pc(), 0xe435);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe433), 0xcb);
        EXPECT(gbc.readMem(0xe434), 0xe6);
        // CB E6 00A7
        gbc.setState(0xa395, 0xf20c, 0x34f0, 0xfcbf, 0xdeee, 0x6c7c, 0x0, 0x0);
        gbc.writeMem(0x6c7c, { 0xbd });
        gbc.writeMem(0xa395, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xf20c);
        EXPECT(gbc.pc(), 0xa397);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa395), 0xcb);
        EXPECT(gbc.readMem(0xa396), 0xe6);
        // CB E6 00A8
        gbc.setState(0x70ad, 0x98e0, 0x9dc0, 0x3789, 0xda2b, 0x2468, 0x1, 0x1);
        gbc.writeMem(0x2468, { 0xba });
        gbc.writeMem(0x70ad, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x98e0);
        EXPECT(gbc.pc(), 0x70af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E6 00A9
        gbc.setState(0x3e5b, 0xf3d6, 0xe380, 0x25d6, 0xca62, 0xd8cf, 0x0, 0x1);
        gbc.writeMem(0x3e5b, { 0xcb, 0xe6 });
        gbc.writeMem(0xd8cf, { 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xf3d6);
        EXPECT(gbc.pc(), 0x3e5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8cf), 0xf1);
        // CB E6 00AA
        gbc.setState(0x4a0f, 0x69a4, 0xcfc0, 0x101a, 0x505e, 0xda06, 0x1, 0x0);
        gbc.writeMem(0x4a0f, { 0xcb, 0xe6 });
        gbc.writeMem(0xda06, { 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x69a4);
        EXPECT(gbc.pc(), 0x4a11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda06), 0x36);
        // CB E6 00AB
        gbc.setState(0xdcae, 0x5744, 0x5700, 0xd89c, 0xfd7c, 0x8736, 0x1, 0x0);
        gbc.writeMem(0x8736, { 0xe });
        gbc.writeMem(0xdcae, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x5744);
        EXPECT(gbc.pc(), 0xdcb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8736), 0x1e);
        EXPECT(gbc.readMem(0xdcae), 0xcb);
        EXPECT(gbc.readMem(0xdcaf), 0xe6);
        // CB E6 00AC
        gbc.setState(0xaed5, 0x6e99, 0xb570, 0x4745, 0x979b, 0x77c, 0x1, 0x1);
        gbc.writeMem(0x77c, { 0x1c });
        gbc.writeMem(0xaed5, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x6e99);
        EXPECT(gbc.pc(), 0xaed7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaed5), 0xcb);
        EXPECT(gbc.readMem(0xaed6), 0xe6);
        // CB E6 00AD
        gbc.setState(0x9747, 0x1c9e, 0x49a0, 0xe057, 0x57b2, 0x96ad, 0x1, 0x0);
        gbc.writeMem(0x96ad, { 0xa4 });
        gbc.writeMem(0x9747, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x1c9e);
        EXPECT(gbc.pc(), 0x9749);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96ad), 0xb4);
        EXPECT(gbc.readMem(0x9747), 0xcb);
        EXPECT(gbc.readMem(0x9748), 0xe6);
        // CB E6 00AE
        gbc.setState(0xe767, 0xb4df, 0xb4a0, 0xfd9c, 0xcae3, 0xd1e4, 0x0, 0x0);
        gbc.writeMem(0xd1e4, { 0xa6 });
        gbc.writeMem(0xe767, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xb4df);
        EXPECT(gbc.pc(), 0xe769);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1e4), 0xb6);
        EXPECT(gbc.readMem(0xe767), 0xcb);
        EXPECT(gbc.readMem(0xe768), 0xe6);
        // CB E6 00AF
        gbc.setState(0xc852, 0xef24, 0x8360, 0xce54, 0x8663, 0x5305, 0x0, 0x0);
        gbc.writeMem(0x5305, { 0x51 });
        gbc.writeMem(0xc852, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xef24);
        EXPECT(gbc.pc(), 0xc854);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc852), 0xcb);
        EXPECT(gbc.readMem(0xc853), 0xe6);
        // CB E6 00B1
        gbc.setState(0xcac4, 0x50e9, 0x2920, 0x657e, 0x3159, 0xc18a, 0x0, 0x1);
        gbc.writeMem(0xc18a, { 0xf2 });
        gbc.writeMem(0xcac4, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x50e9);
        EXPECT(gbc.pc(), 0xcac6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc18a), 0xf2);
        EXPECT(gbc.readMem(0xcac4), 0xcb);
        EXPECT(gbc.readMem(0xcac5), 0xe6);
        // CB E6 00B2
        gbc.setState(0x51b6, 0xca2a, 0x8cd0, 0xa523, 0x9493, 0xd8a8, 0x0, 0x0);
        gbc.writeMem(0x51b6, { 0xcb, 0xe6 });
        gbc.writeMem(0xd8a8, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xca2a);
        EXPECT(gbc.pc(), 0x51b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8a8), 0xb3);
        // CB E6 00B4
        gbc.setState(0xb7bc, 0x49fd, 0x69f0, 0xbe9c, 0xcd90, 0x8838, 0x1, 0x0);
        gbc.writeMem(0x8838, { 0xba });
        gbc.writeMem(0xb7bc, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x49fd);
        EXPECT(gbc.pc(), 0xb7be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8838), 0xba);
        EXPECT(gbc.readMem(0xb7bc), 0xcb);
        EXPECT(gbc.readMem(0xb7bd), 0xe6);
        // CB E6 00B5
        gbc.setState(0x20a7, 0x2567, 0xacb0, 0xbde6, 0xbee0, 0xc3cc, 0x1, 0x1);
        gbc.writeMem(0x20a7, { 0xcb, 0xe6 });
        gbc.writeMem(0xc3cc, { 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x2567);
        EXPECT(gbc.pc(), 0x20a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3cc), 0x72);
        // CB E6 00B6
        gbc.setState(0x73a1, 0xd108, 0x8310, 0x5494, 0x6cc6, 0x8bfa, 0x1, 0x0);
        gbc.writeMem(0x73a1, { 0xcb, 0xe6 });
        gbc.writeMem(0x8bfa, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xd108);
        EXPECT(gbc.pc(), 0x73a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bfa), 0x33);
        // CB E6 00B7
        gbc.setState(0x2562, 0x29a9, 0x8ef0, 0x25c2, 0x9696, 0x83ba, 0x0, 0x0);
        gbc.writeMem(0x2562, { 0xcb, 0xe6 });
        gbc.writeMem(0x83ba, { 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x29a9);
        EXPECT(gbc.pc(), 0x2564);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83ba), 0x1a);
        // CB E6 00B8
        gbc.setState(0x450f, 0xa03d, 0x2450, 0x3ee5, 0x12b, 0x821b, 0x1, 0x1);
        gbc.writeMem(0x450f, { 0xcb, 0xe6 });
        gbc.writeMem(0x821b, { 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xa03d);
        EXPECT(gbc.pc(), 0x4511);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x821b), 0xbc);
        // CB E6 00B9
        gbc.setState(0xc767, 0xd40c, 0x3190, 0xb3aa, 0xe5c0, 0xf43b, 0x1, 0x1);
        gbc.writeMem(0xc767, { 0xcb, 0xe6 });
        gbc.writeMem(0xf43b, { 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xd40c);
        EXPECT(gbc.pc(), 0xc769);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc767), 0xcb);
        EXPECT(gbc.readMem(0xc768), 0xe6);
        EXPECT(gbc.readMem(0xf43b), 0xbc);
        // CB E6 00BA
        gbc.setState(0xe6ee, 0x55fd, 0xf330, 0x3b8d, 0x3181, 0xb749, 0x0, 0x1);
        gbc.writeMem(0xb749, { 0x89 });
        gbc.writeMem(0xe6ee, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x55fd);
        EXPECT(gbc.pc(), 0xe6f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb749), 0x99);
        EXPECT(gbc.readMem(0xe6ee), 0xcb);
        EXPECT(gbc.readMem(0xe6ef), 0xe6);
        // CB E6 00BB
        gbc.setState(0x5d19, 0x3ae3, 0x7780, 0x7442, 0xf8c, 0xba6e, 0x0, 0x0);
        gbc.writeMem(0x5d19, { 0xcb, 0xe6 });
        gbc.writeMem(0xba6e, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x3ae3);
        EXPECT(gbc.pc(), 0x5d1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba6e), 0xfb);
        // CB E6 00BC
        gbc.setState(0xd765, 0xb905, 0xec40, 0x879, 0x806, 0xca7c, 0x0, 0x0);
        gbc.writeMem(0xca7c, { 0xca });
        gbc.writeMem(0xd765, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xb905);
        EXPECT(gbc.pc(), 0xd767);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca7c), 0xda);
        EXPECT(gbc.readMem(0xd765), 0xcb);
        EXPECT(gbc.readMem(0xd766), 0xe6);
        // CB E6 00C0
        gbc.setState(0x3431, 0x724e, 0xbd20, 0xff58, 0x50ef, 0x4e15, 0x0, 0x1);
        gbc.writeMem(0x3431, { 0xcb, 0xe6 });
        gbc.writeMem(0x4e15, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x724e);
        EXPECT(gbc.pc(), 0x3433);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E6 00C1
        gbc.setState(0x6e9a, 0xd05e, 0x7020, 0xff6a, 0xa3e, 0xe092, 0x0, 0x0);
        gbc.writeMem(0x6e9a, { 0xcb, 0xe6 });
        gbc.writeMem(0xe092, { 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xd05e);
        EXPECT(gbc.pc(), 0x6e9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe092), 0x51);
        // CB E6 00C2
        gbc.setState(0x319d, 0x680b, 0x4d90, 0x3fdf, 0xbc2f, 0x8680, 0x1, 0x0);
        gbc.writeMem(0x319d, { 0xcb, 0xe6 });
        gbc.writeMem(0x8680, { 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x680b);
        EXPECT(gbc.pc(), 0x319f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8680), 0xf7);
        // CB E6 00C3
        gbc.setState(0x111b, 0x5f95, 0x27d0, 0x15a5, 0x74c6, 0x5492, 0x0, 0x1);
        gbc.writeMem(0x111b, { 0xcb, 0xe6 });
        gbc.writeMem(0x5492, { 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x5f95);
        EXPECT(gbc.pc(), 0x111d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E6 00C4
        gbc.setState(0x57e3, 0xd061, 0x6d0, 0x6746, 0x6edb, 0xb57c, 0x1, 0x0);
        gbc.writeMem(0x57e3, { 0xcb, 0xe6 });
        gbc.writeMem(0xb57c, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xd061);
        EXPECT(gbc.pc(), 0x57e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb57c), 0xb6);
        // CB E6 00C5
        gbc.setState(0x1674, 0x622f, 0xd9a0, 0xee5, 0x4c66, 0x9900, 0x1, 0x0);
        gbc.writeMem(0x1674, { 0xcb, 0xe6 });
        gbc.writeMem(0x9900, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x622f);
        EXPECT(gbc.pc(), 0x1676);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9900), 0xff);
        // CB E6 00C8
        gbc.setState(0x255, 0x4cd3, 0x240, 0x5e5d, 0x403e, 0x8c56, 0x1, 0x0);
        gbc.writeMem(0x255, { 0xcb, 0xe6 });
        gbc.writeMem(0x8c56, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x4cd3);
        EXPECT(gbc.pc(), 0x257);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c56), 0xdf);
        // CB E6 00CA
        gbc.setState(0xdfb8, 0x7a8d, 0xfe90, 0x7a9e, 0xb9f3, 0x9a47, 0x1, 0x1);
        gbc.writeMem(0x9a47, { 0xb1 });
        gbc.writeMem(0xdfb8, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x7a8d);
        EXPECT(gbc.pc(), 0xdfba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a47), 0xb1);
        EXPECT(gbc.readMem(0xdfb8), 0xcb);
        EXPECT(gbc.readMem(0xdfb9), 0xe6);
        // CB E6 00CC
        gbc.setState(0xa23e, 0x6ff2, 0x1480, 0xdc0a, 0xcef6, 0x45d2, 0x0, 0x0);
        gbc.writeMem(0x45d2, { 0x54 });
        gbc.writeMem(0xa23e, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x6ff2);
        EXPECT(gbc.pc(), 0xa240);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa23e), 0xcb);
        EXPECT(gbc.readMem(0xa23f), 0xe6);
        // CB E6 00CD
        gbc.setState(0xc50b, 0xc850, 0x2dd0, 0x66d2, 0x4ecd, 0x613e, 0x0, 0x0);
        gbc.writeMem(0x613e, { 0x71 });
        gbc.writeMem(0xc50b, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xc850);
        EXPECT(gbc.pc(), 0xc50d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc50b), 0xcb);
        EXPECT(gbc.readMem(0xc50c), 0xe6);
        // CB E6 00CE
        gbc.setState(0x7a81, 0x2f36, 0x95a0, 0x3f44, 0x7d8e, 0xab4b, 0x0, 0x0);
        gbc.writeMem(0x7a81, { 0xcb, 0xe6 });
        gbc.writeMem(0xab4b, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x2f36);
        EXPECT(gbc.pc(), 0x7a83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab4b), 0x77);
        // CB E6 00CF
        gbc.setState(0xb693, 0x7647, 0xd2e0, 0x8af, 0xd07a, 0x2ae1, 0x1, 0x0);
        gbc.writeMem(0x2ae1, { 0x95 });
        gbc.writeMem(0xb693, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x7647);
        EXPECT(gbc.pc(), 0xb695);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb693), 0xcb);
        EXPECT(gbc.readMem(0xb694), 0xe6);
        // CB E6 00D0
        gbc.setState(0x8c17, 0xb39a, 0x9080, 0x2ddd, 0xcda2, 0x23f9, 0x0, 0x0);
        gbc.writeMem(0x23f9, { 0x9b });
        gbc.writeMem(0x8c17, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xb39a);
        EXPECT(gbc.pc(), 0x8c19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c17), 0xcb);
        EXPECT(gbc.readMem(0x8c18), 0xe6);
        // CB E6 00D1
        gbc.setState(0x2ec7, 0x9987, 0xd8b0, 0xc476, 0x8b2d, 0x8a0d, 0x0, 0x0);
        gbc.writeMem(0x2ec7, { 0xcb, 0xe6 });
        gbc.writeMem(0x8a0d, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x9987);
        EXPECT(gbc.pc(), 0x2ec9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a0d), 0xb1);
        // CB E6 00D2
        gbc.setState(0xa5d3, 0x4c6b, 0xf390, 0x12b1, 0x9892, 0x6b04, 0x1, 0x0);
        gbc.writeMem(0x6b04, { 0xbe });
        gbc.writeMem(0xa5d3, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x4c6b);
        EXPECT(gbc.pc(), 0xa5d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5d3), 0xcb);
        EXPECT(gbc.readMem(0xa5d4), 0xe6);
        // CB E6 00D3
        gbc.setState(0x6a76, 0x6837, 0xb590, 0xe0db, 0x4f57, 0xe404, 0x1, 0x1);
        gbc.writeMem(0x6a76, { 0xcb, 0xe6 });
        gbc.writeMem(0xe404, { 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x6837);
        EXPECT(gbc.pc(), 0x6a78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe404), 0x9d);
        // CB E6 00D4
        gbc.setState(0x1d09, 0x9334, 0xf950, 0xc920, 0x301d, 0xe080, 0x1, 0x0);
        gbc.writeMem(0x1d09, { 0xcb, 0xe6 });
        gbc.writeMem(0xe080, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x9334);
        EXPECT(gbc.pc(), 0x1d0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe080), 0x5e);
        // CB E6 00D5
        gbc.setState(0x7739, 0xc9f4, 0x8330, 0x7e5b, 0x7cc8, 0x8600, 0x0, 0x0);
        gbc.writeMem(0x7739, { 0xcb, 0xe6 });
        gbc.writeMem(0x8600, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xc9f4);
        EXPECT(gbc.pc(), 0x773b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8600), 0xb3);
        // CB E6 00D6
        gbc.setState(0xd67e, 0x974d, 0x230, 0xf3c6, 0xe534, 0x1a09, 0x0, 0x0);
        gbc.writeMem(0x1a09, { 0x35 });
        gbc.writeMem(0xd67e, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x974d);
        EXPECT(gbc.pc(), 0xd680);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd67e), 0xcb);
        EXPECT(gbc.readMem(0xd67f), 0xe6);
        // CB E6 00D7
        gbc.setState(0x4e49, 0x3aad, 0x1c0, 0xa9b9, 0x6207, 0x1e59, 0x1, 0x1);
        gbc.writeMem(0x1e59, { 0x5f });
        gbc.writeMem(0x4e49, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x3aad);
        EXPECT(gbc.pc(), 0x4e4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E6 00D8
        gbc.setState(0x813e, 0xddf0, 0x9210, 0x2e4f, 0x7efa, 0xfbf0, 0x1, 0x1);
        gbc.writeMem(0x813e, { 0xcb, 0xe6 });
        gbc.writeMem(0xfbf0, { 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xddf0);
        EXPECT(gbc.pc(), 0x8140);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x813e), 0xcb);
        EXPECT(gbc.readMem(0x813f), 0xe6);
        EXPECT(gbc.readMem(0xfbf0), 0x74);
        // CB E6 00D9
        gbc.setState(0x10be, 0x2174, 0x85e0, 0x35fd, 0x3e32, 0xce16, 0x0, 0x0);
        gbc.writeMem(0x10be, { 0xcb, 0xe6 });
        gbc.writeMem(0xce16, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x2174);
        EXPECT(gbc.pc(), 0x10c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce16), 0xb9);
        // CB E6 00DA
        gbc.setState(0x98e1, 0xc908, 0x9a50, 0x60d1, 0x8cff, 0xa637, 0x0, 0x0);
        gbc.writeMem(0x98e1, { 0xcb, 0xe6 });
        gbc.writeMem(0xa637, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xc908);
        EXPECT(gbc.pc(), 0x98e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98e1), 0xcb);
        EXPECT(gbc.readMem(0x98e2), 0xe6);
        EXPECT(gbc.readMem(0xa637), 0x12);
        // CB E6 00DC
        gbc.setState(0x7d77, 0xf6b4, 0x73c0, 0x3ddc, 0xfd3b, 0xbd71, 0x1, 0x1);
        gbc.writeMem(0x7d77, { 0xcb, 0xe6 });
        gbc.writeMem(0xbd71, { 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xf6b4);
        EXPECT(gbc.pc(), 0x7d79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd71), 0xf7);
        // CB E6 00DD
        gbc.setState(0xac6e, 0x19f9, 0xa6f0, 0xc1e2, 0x90c1, 0x9254, 0x0, 0x1);
        gbc.writeMem(0x9254, { 0xb8 });
        gbc.writeMem(0xac6e, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x19f9);
        EXPECT(gbc.pc(), 0xac70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9254), 0xb8);
        EXPECT(gbc.readMem(0xac6e), 0xcb);
        EXPECT(gbc.readMem(0xac6f), 0xe6);
        // CB E6 00DE
        gbc.setState(0xb5b6, 0x4ee4, 0xe540, 0x4e0f, 0xb6b6, 0x810d, 0x0, 0x1);
        gbc.writeMem(0x810d, { 0x52 });
        gbc.writeMem(0xb5b6, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x4ee4);
        EXPECT(gbc.pc(), 0xb5b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x810d), 0x52);
        EXPECT(gbc.readMem(0xb5b6), 0xcb);
        EXPECT(gbc.readMem(0xb5b7), 0xe6);
        // CB E6 00DF
        gbc.setState(0x3e1a, 0xced6, 0x6ef0, 0xbe2d, 0x79f4, 0xd789, 0x1, 0x0);
        gbc.writeMem(0x3e1a, { 0xcb, 0xe6 });
        gbc.writeMem(0xd789, { 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xced6);
        EXPECT(gbc.pc(), 0x3e1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd789), 0xf1);
        // CB E6 00E0
        gbc.setState(0x5f07, 0x25e0, 0x2cd0, 0x8571, 0x72a7, 0xb0d, 0x0, 0x1);
        gbc.writeMem(0xb0d, { 0x12 });
        gbc.writeMem(0x5f07, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x25e0);
        EXPECT(gbc.pc(), 0x5f09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E6 00E2
        gbc.setState(0x38cb, 0x5e49, 0x7be0, 0x460d, 0x123c, 0x3ef2, 0x1, 0x1);
        gbc.writeMem(0x38cb, { 0xcb, 0xe6 });
        gbc.writeMem(0x3ef2, { 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x5e49);
        EXPECT(gbc.pc(), 0x38cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E6 00E3
        gbc.setState(0xe152, 0x836d, 0xdf80, 0x80c7, 0x8f7, 0xefa1, 0x1, 0x0);
        gbc.writeMem(0xe152, { 0xcb, 0xe6 });
        gbc.writeMem(0xefa1, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x836d);
        EXPECT(gbc.pc(), 0xe154);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe152), 0xcb);
        EXPECT(gbc.readMem(0xe153), 0xe6);
        EXPECT(gbc.readMem(0xefa1), 0x33);
        // CB E6 00E5
        gbc.setState(0xa0a9, 0x7c1a, 0xd5c0, 0xdd3f, 0xced, 0xb891, 0x0, 0x1);
        gbc.writeMem(0xa0a9, { 0xcb, 0xe6 });
        gbc.writeMem(0xb891, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x7c1a);
        EXPECT(gbc.pc(), 0xa0ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0a9), 0xcb);
        EXPECT(gbc.readMem(0xa0aa), 0xe6);
        EXPECT(gbc.readMem(0xb891), 0x76);
        // CB E6 00E6
        gbc.setState(0x7977, 0x3069, 0x7c50, 0xf6d0, 0x347, 0xd498, 0x0, 0x0);
        gbc.writeMem(0x7977, { 0xcb, 0xe6 });
        gbc.writeMem(0xd498, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x3069);
        EXPECT(gbc.pc(), 0x7979);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd498), 0xb9);
        // CB E6 00E7
        gbc.setState(0x4dd8, 0x7a83, 0xf3c0, 0x2804, 0xed99, 0xa4d4, 0x0, 0x1);
        gbc.writeMem(0x4dd8, { 0xcb, 0xe6 });
        gbc.writeMem(0xa4d4, { 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x7a83);
        EXPECT(gbc.pc(), 0x4dda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4d4), 0x50);
        // CB E6 00EA
        gbc.setState(0x6d52, 0x8798, 0xadf0, 0x57df, 0x911c, 0xfbee, 0x0, 0x0);
        gbc.writeMem(0x6d52, { 0xcb, 0xe6 });
        gbc.writeMem(0xfbee, { 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x8798);
        EXPECT(gbc.pc(), 0x6d54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfbee), 0x1d);
        // CB E6 00EE
        gbc.setState(0x48e, 0xb171, 0xfff0, 0x7677, 0xb4ba, 0xb240, 0x0, 0x0);
        gbc.writeMem(0x48e, { 0xcb, 0xe6 });
        gbc.writeMem(0xb240, { 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xb171);
        EXPECT(gbc.pc(), 0x490);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb240), 0xd9);
        // CB E6 00EF
        gbc.setState(0xb580, 0xc756, 0xadd0, 0x8344, 0x2170, 0xaef4, 0x1, 0x0);
        gbc.writeMem(0xaef4, { 0xde });
        gbc.writeMem(0xb580, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xc756);
        EXPECT(gbc.pc(), 0xb582);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaef4), 0xde);
        EXPECT(gbc.readMem(0xb580), 0xcb);
        EXPECT(gbc.readMem(0xb581), 0xe6);
        // CB E6 00F0
        gbc.setState(0xe2b5, 0x1b7c, 0x3e80, 0xf9b8, 0x77bc, 0x3bbb, 0x0, 0x1);
        gbc.writeMem(0x3bbb, { 0xd7 });
        gbc.writeMem(0xe2b5, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x1b7c);
        EXPECT(gbc.pc(), 0xe2b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2b5), 0xcb);
        EXPECT(gbc.readMem(0xe2b6), 0xe6);
        // CB E6 00F1
        gbc.setState(0xd5f7, 0xd665, 0xcd0, 0xcbca, 0xa9b4, 0xc565, 0x1, 0x1);
        gbc.writeMem(0xc565, { 0x29 });
        gbc.writeMem(0xd5f7, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xd665);
        EXPECT(gbc.pc(), 0xd5f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc565), 0x39);
        EXPECT(gbc.readMem(0xd5f7), 0xcb);
        EXPECT(gbc.readMem(0xd5f8), 0xe6);
        // CB E6 00F3
        gbc.setState(0x887d, 0x12e2, 0x50b0, 0x6105, 0x3c1c, 0x1e13, 0x1, 0x1);
        gbc.writeMem(0x1e13, { 0x54 });
        gbc.writeMem(0x887d, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x12e2);
        EXPECT(gbc.pc(), 0x887f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x887d), 0xcb);
        EXPECT(gbc.readMem(0x887e), 0xe6);
        // CB E6 00F4
        gbc.setState(0x64ab, 0x1881, 0x4910, 0x8ca4, 0x88d5, 0xd5e1, 0x0, 0x1);
        gbc.writeMem(0x64ab, { 0xcb, 0xe6 });
        gbc.writeMem(0xd5e1, { 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x1881);
        EXPECT(gbc.pc(), 0x64ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5e1), 0x9e);
        // CB E6 00F6
        gbc.setState(0xb28e, 0x49df, 0xfd80, 0xe538, 0x8339, 0x71f5, 0x1, 0x0);
        gbc.writeMem(0x71f5, { 0x39 });
        gbc.writeMem(0xb28e, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x49df);
        EXPECT(gbc.pc(), 0xb290);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb28e), 0xcb);
        EXPECT(gbc.readMem(0xb28f), 0xe6);
        // CB E6 00F7
        gbc.setState(0x3380, 0x2c60, 0x4fe0, 0xf414, 0x8a5f, 0xb262, 0x1, 0x0);
        gbc.writeMem(0x3380, { 0xcb, 0xe6 });
        gbc.writeMem(0xb262, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x2c60);
        EXPECT(gbc.pc(), 0x3382);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb262), 0x10);
        // CB E6 00F8
        gbc.setState(0xec2e, 0xceb8, 0x5e40, 0xa0c3, 0xe5ab, 0x8483, 0x0, 0x1);
        gbc.writeMem(0x8483, { 0x7f });
        gbc.writeMem(0xec2e, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xceb8);
        EXPECT(gbc.pc(), 0xec30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8483), 0x7f);
        EXPECT(gbc.readMem(0xec2e), 0xcb);
        EXPECT(gbc.readMem(0xec2f), 0xe6);
        // CB E6 00F9
        gbc.setState(0x2897, 0x1495, 0xbd90, 0x649a, 0x6cd5, 0x26ec, 0x0, 0x0);
        gbc.writeMem(0x26ec, { 0xf1 });
        gbc.writeMem(0x2897, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x1495);
        EXPECT(gbc.pc(), 0x2899);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E6 00FA
        gbc.setState(0xc91f, 0x7f21, 0x1cd0, 0x6fc7, 0xb2eb, 0x461f, 0x1, 0x0);
        gbc.writeMem(0x461f, { 0xd7 });
        gbc.writeMem(0xc91f, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x7f21);
        EXPECT(gbc.pc(), 0xc921);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc91f), 0xcb);
        EXPECT(gbc.readMem(0xc920), 0xe6);
        // CB E6 00FF
        gbc.setState(0x57ae, 0x520e, 0x9a80, 0x5d1c, 0x80cc, 0x848b, 0x0, 0x1);
        gbc.writeMem(0x57ae, { 0xcb, 0xe6 });
        gbc.writeMem(0x848b, { 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x520e);
        EXPECT(gbc.pc(), 0x57b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x848b), 0xf3);
        // CB E6 0101
        gbc.setState(0xa2e3, 0xa277, 0x6bb0, 0xbd12, 0xbada, 0xe14f, 0x0, 0x1);
        gbc.writeMem(0xa2e3, { 0xcb, 0xe6 });
        gbc.writeMem(0xe14f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xa277);
        EXPECT(gbc.pc(), 0xa2e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2e3), 0xcb);
        EXPECT(gbc.readMem(0xa2e4), 0xe6);
        EXPECT(gbc.readMem(0xe14f), 0xb7);
        // CB E6 0102
        gbc.setState(0x5007, 0xa34c, 0xca50, 0x292e, 0x3424, 0x5086, 0x1, 0x1);
        gbc.writeMem(0x5007, { 0xcb, 0xe6 });
        gbc.writeMem(0x5086, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xa34c);
        EXPECT(gbc.pc(), 0x5009);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E6 0103
        gbc.setState(0xd47b, 0x3ab0, 0x250, 0x6f56, 0x64c6, 0xfba8, 0x0, 0x1);
        gbc.writeMem(0xd47b, { 0xcb, 0xe6 });
        gbc.writeMem(0xfba8, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x3ab0);
        EXPECT(gbc.pc(), 0xd47d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd47b), 0xcb);
        EXPECT(gbc.readMem(0xd47c), 0xe6);
        EXPECT(gbc.readMem(0xfba8), 0x34);
        // CB E6 0104
        gbc.setState(0x7867, 0xe79a, 0x4480, 0xb929, 0xe21, 0x981e, 0x0, 0x0);
        gbc.writeMem(0x7867, { 0xcb, 0xe6 });
        gbc.writeMem(0x981e, { 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xe79a);
        EXPECT(gbc.pc(), 0x7869);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x981e), 0x56);
        // CB E6 0105
        gbc.setState(0x2551, 0x5ba9, 0xc330, 0x5320, 0x1fd7, 0x3a31, 0x1, 0x1);
        gbc.writeMem(0x2551, { 0xcb, 0xe6 });
        gbc.writeMem(0x3a31, { 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x5ba9);
        EXPECT(gbc.pc(), 0x2553);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 0106
        gbc.setState(0x6faf, 0xa01d, 0x8b30, 0x9f4a, 0xbeac, 0xf530, 0x0, 0x0);
        gbc.writeMem(0x6faf, { 0xcb, 0xe6 });
        gbc.writeMem(0xf530, { 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xa01d);
        EXPECT(gbc.pc(), 0x6fb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf530), 0x7d);
        // CB E6 0107
        gbc.setState(0x791d, 0xcb58, 0x52b0, 0x92d0, 0x4107, 0x1014, 0x1, 0x0);
        gbc.writeMem(0x1014, { 0x1f });
        gbc.writeMem(0x791d, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xcb58);
        EXPECT(gbc.pc(), 0x791f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 0109
        gbc.setState(0xa65, 0xfc05, 0x6f70, 0xbf52, 0xf057, 0xb448, 0x0, 0x1);
        gbc.writeMem(0xa65, { 0xcb, 0xe6 });
        gbc.writeMem(0xb448, { 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xfc05);
        EXPECT(gbc.pc(), 0xa67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb448), 0xfb);
        // CB E6 010B
        gbc.setState(0x741c, 0x8edc, 0xfa40, 0xa856, 0x6eae, 0xe04b, 0x1, 0x1);
        gbc.writeMem(0x741c, { 0xcb, 0xe6 });
        gbc.writeMem(0xe04b, { 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x8edc);
        EXPECT(gbc.pc(), 0x741e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe04b), 0x1e);
        // CB E6 010E
        gbc.setState(0xda2c, 0x5876, 0xa750, 0xf0bc, 0xd244, 0x5f37, 0x1, 0x0);
        gbc.writeMem(0x5f37, { 0x36 });
        gbc.writeMem(0xda2c, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x5876);
        EXPECT(gbc.pc(), 0xda2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda2c), 0xcb);
        EXPECT(gbc.readMem(0xda2d), 0xe6);
        // CB E6 0110
        gbc.setState(0x2a0f, 0x37f2, 0x6e0, 0x715d, 0x262a, 0x645e, 0x0, 0x1);
        gbc.writeMem(0x2a0f, { 0xcb, 0xe6 });
        gbc.writeMem(0x645e, { 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x37f2);
        EXPECT(gbc.pc(), 0x2a11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E6 0111
        gbc.setState(0x3e7e, 0xafab, 0xf8d0, 0x564e, 0x85ea, 0x9907, 0x0, 0x0);
        gbc.writeMem(0x3e7e, { 0xcb, 0xe6 });
        gbc.writeMem(0x9907, { 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xafab);
        EXPECT(gbc.pc(), 0x3e80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9907), 0x38);
        // CB E6 0112
        gbc.setState(0x31ca, 0xd72c, 0xf9f0, 0xbfb5, 0x5f60, 0x6e11, 0x1, 0x1);
        gbc.writeMem(0x31ca, { 0xcb, 0xe6 });
        gbc.writeMem(0x6e11, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xd72c);
        EXPECT(gbc.pc(), 0x31cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 0114
        gbc.setState(0x64b7, 0xe56, 0x8e20, 0x5dd9, 0xc4f2, 0xfa79, 0x1, 0x0);
        gbc.writeMem(0x64b7, { 0xcb, 0xe6 });
        gbc.writeMem(0xfa79, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xe56);
        EXPECT(gbc.pc(), 0x64b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfa79), 0x94);
        // CB E6 0115
        gbc.setState(0x5420, 0x55f0, 0x3110, 0xbc89, 0x693c, 0xd98f, 0x1, 0x0);
        gbc.writeMem(0x5420, { 0xcb, 0xe6 });
        gbc.writeMem(0xd98f, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x55f0);
        EXPECT(gbc.pc(), 0x5422);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd98f), 0xbb);
        // CB E6 0118
        gbc.setState(0x9888, 0x1497, 0xb320, 0x9c3e, 0xaa5e, 0xf202, 0x1, 0x0);
        gbc.writeMem(0x9888, { 0xcb, 0xe6 });
        gbc.writeMem(0xf202, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x1497);
        EXPECT(gbc.pc(), 0x988a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9888), 0xcb);
        EXPECT(gbc.readMem(0x9889), 0xe6);
        EXPECT(gbc.readMem(0xf202), 0xbd);
        // CB E6 0119
        gbc.setState(0xa296, 0x4369, 0xf750, 0x18a4, 0x93d7, 0xe370, 0x1, 0x1);
        gbc.writeMem(0xa296, { 0xcb, 0xe6 });
        gbc.writeMem(0xe370, { 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x4369);
        EXPECT(gbc.pc(), 0xa298);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa296), 0xcb);
        EXPECT(gbc.readMem(0xa297), 0xe6);
        EXPECT(gbc.readMem(0xe370), 0xdc);
        // CB E6 011A
        gbc.setState(0x9c12, 0x45dd, 0x9040, 0xcc84, 0xd917, 0xc4a9, 0x0, 0x1);
        gbc.writeMem(0x9c12, { 0xcb, 0xe6 });
        gbc.writeMem(0xc4a9, { 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x45dd);
        EXPECT(gbc.pc(), 0x9c14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c12), 0xcb);
        EXPECT(gbc.readMem(0x9c13), 0xe6);
        EXPECT(gbc.readMem(0xc4a9), 0x7d);
        // CB E6 011B
        gbc.setState(0x6086, 0x98b0, 0xa860, 0x5b35, 0x15fb, 0xf032, 0x0, 0x1);
        gbc.writeMem(0x6086, { 0xcb, 0xe6 });
        gbc.writeMem(0xf032, { 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x98b0);
        EXPECT(gbc.pc(), 0x6088);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf032), 0xf8);
        // CB E6 011D
        gbc.setState(0x75a6, 0x6710, 0x7d0, 0x1e61, 0x5bce, 0xae19, 0x1, 0x1);
        gbc.writeMem(0x75a6, { 0xcb, 0xe6 });
        gbc.writeMem(0xae19, { 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x6710);
        EXPECT(gbc.pc(), 0x75a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae19), 0xbf);
        // CB E6 011E
        gbc.setState(0x44c3, 0xa069, 0x3050, 0x8bdf, 0x143a, 0xa31d, 0x0, 0x1);
        gbc.writeMem(0x44c3, { 0xcb, 0xe6 });
        gbc.writeMem(0xa31d, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xa069);
        EXPECT(gbc.pc(), 0x44c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa31d), 0x7f);
        // CB E6 0120
        gbc.setState(0x8853, 0x86c1, 0x1820, 0x8fdd, 0xbce4, 0x184a, 0x0, 0x0);
        gbc.writeMem(0x184a, { 0xb8 });
        gbc.writeMem(0x8853, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x86c1);
        EXPECT(gbc.pc(), 0x8855);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8853), 0xcb);
        EXPECT(gbc.readMem(0x8854), 0xe6);
        // CB E6 0121
        gbc.setState(0x4cfa, 0xd3f2, 0x79f0, 0x5fa8, 0x7bd2, 0x4ae2, 0x1, 0x0);
        gbc.writeMem(0x4ae2, { 0xfb });
        gbc.writeMem(0x4cfa, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xd3f2);
        EXPECT(gbc.pc(), 0x4cfc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 0123
        gbc.setState(0x8042, 0xe020, 0x18c0, 0x30c, 0x5ac, 0x9209, 0x0, 0x0);
        gbc.writeMem(0x8042, { 0xcb, 0xe6 });
        gbc.writeMem(0x9209, { 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xe020);
        EXPECT(gbc.pc(), 0x8044);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8042), 0xcb);
        EXPECT(gbc.readMem(0x8043), 0xe6);
        EXPECT(gbc.readMem(0x9209), 0x7c);
        // CB E6 0125
        gbc.setState(0xc2b6, 0xa944, 0xb020, 0xe6f, 0xe3fa, 0xcd1c, 0x0, 0x1);
        gbc.writeMem(0xc2b6, { 0xcb, 0xe6 });
        gbc.writeMem(0xcd1c, { 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xa944);
        EXPECT(gbc.pc(), 0xc2b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2b6), 0xcb);
        EXPECT(gbc.readMem(0xc2b7), 0xe6);
        EXPECT(gbc.readMem(0xcd1c), 0xfc);
        // CB E6 0126
        gbc.setState(0x390f, 0x10ec, 0x9b20, 0xd178, 0x991c, 0x9fd, 0x1, 0x1);
        gbc.writeMem(0x9fd, { 0x1d });
        gbc.writeMem(0x390f, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x10ec);
        EXPECT(gbc.pc(), 0x3911);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E6 0127
        gbc.setState(0x66ed, 0x7209, 0x4a0, 0x3b6, 0xb683, 0xc70a, 0x0, 0x0);
        gbc.writeMem(0x66ed, { 0xcb, 0xe6 });
        gbc.writeMem(0xc70a, { 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x7209);
        EXPECT(gbc.pc(), 0x66ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc70a), 0x17);
        // CB E6 0128
        gbc.setState(0x1489, 0x9717, 0xf470, 0xdb12, 0x6afd, 0x8839, 0x0, 0x0);
        gbc.writeMem(0x1489, { 0xcb, 0xe6 });
        gbc.writeMem(0x8839, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x9717);
        EXPECT(gbc.pc(), 0x148b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8839), 0xfa);
        // CB E6 0129
        gbc.setState(0x16a4, 0x9c7a, 0x8be0, 0x9b74, 0x2375, 0x5b03, 0x1, 0x0);
        gbc.writeMem(0x16a4, { 0xcb, 0xe6 });
        gbc.writeMem(0x5b03, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x9c7a);
        EXPECT(gbc.pc(), 0x16a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E6 012A
        gbc.setState(0xafd9, 0x6f2b, 0xe1b0, 0x5603, 0xe71, 0xbd9, 0x1, 0x1);
        gbc.writeMem(0xbd9, { 0xf3 });
        gbc.writeMem(0xafd9, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x6f2b);
        EXPECT(gbc.pc(), 0xafdb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafd9), 0xcb);
        EXPECT(gbc.readMem(0xafda), 0xe6);
        // CB E6 012B
        gbc.setState(0x7979, 0x51c0, 0x97f0, 0x1e9e, 0x42cf, 0x44dc, 0x0, 0x1);
        gbc.writeMem(0x44dc, { 0x76 });
        gbc.writeMem(0x7979, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x51c0);
        EXPECT(gbc.pc(), 0x797b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 012D
        gbc.setState(0xb256, 0xb157, 0x1e90, 0x292b, 0x4a, 0x8e87, 0x1, 0x0);
        gbc.writeMem(0x8e87, { 0x27 });
        gbc.writeMem(0xb256, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xb157);
        EXPECT(gbc.pc(), 0xb258);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e87), 0x37);
        EXPECT(gbc.readMem(0xb256), 0xcb);
        EXPECT(gbc.readMem(0xb257), 0xe6);
        // CB E6 012E
        gbc.setState(0xaa58, 0xa85, 0xe560, 0x2b7d, 0x300c, 0xde7d, 0x1, 0x1);
        gbc.writeMem(0xaa58, { 0xcb, 0xe6 });
        gbc.writeMem(0xde7d, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xa85);
        EXPECT(gbc.pc(), 0xaa5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa58), 0xcb);
        EXPECT(gbc.readMem(0xaa59), 0xe6);
        EXPECT(gbc.readMem(0xde7d), 0xb3);
        // CB E6 012F
        gbc.setState(0xb43a, 0x117, 0x8bb0, 0xc459, 0xf832, 0xd956, 0x1, 0x1);
        gbc.writeMem(0xb43a, { 0xcb, 0xe6 });
        gbc.writeMem(0xd956, { 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x117);
        EXPECT(gbc.pc(), 0xb43c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb43a), 0xcb);
        EXPECT(gbc.readMem(0xb43b), 0xe6);
        EXPECT(gbc.readMem(0xd956), 0xdc);
        // CB E6 0131
        gbc.setState(0xc281, 0xe21, 0xa990, 0xa0b, 0xfbef, 0x1b3f, 0x1, 0x0);
        gbc.writeMem(0x1b3f, { 0x7d });
        gbc.writeMem(0xc281, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xe21);
        EXPECT(gbc.pc(), 0xc283);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc281), 0xcb);
        EXPECT(gbc.readMem(0xc282), 0xe6);
        // CB E6 0133
        gbc.setState(0xe834, 0xd804, 0x62d0, 0x48a1, 0x6b53, 0x2a65, 0x1, 0x1);
        gbc.writeMem(0x2a65, { 0x3d });
        gbc.writeMem(0xe834, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xd804);
        EXPECT(gbc.pc(), 0xe836);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe834), 0xcb);
        EXPECT(gbc.readMem(0xe835), 0xe6);
        // CB E6 0134
        gbc.setState(0xa6f7, 0x23cb, 0x9a00, 0x7eeb, 0x50ce, 0xcb7b, 0x0, 0x0);
        gbc.writeMem(0xa6f7, { 0xcb, 0xe6 });
        gbc.writeMem(0xcb7b, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x23cb);
        EXPECT(gbc.pc(), 0xa6f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6f7), 0xcb);
        EXPECT(gbc.readMem(0xa6f8), 0xe6);
        EXPECT(gbc.readMem(0xcb7b), 0x59);
        // CB E6 0135
        gbc.setState(0x644c, 0x168, 0x7120, 0xb089, 0x7beb, 0xc9e4, 0x1, 0x1);
        gbc.writeMem(0x644c, { 0xcb, 0xe6 });
        gbc.writeMem(0xc9e4, { 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x168);
        EXPECT(gbc.pc(), 0x644e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9e4), 0xd2);
        // CB E6 0136
        gbc.setState(0xa77e, 0x3d8e, 0xf7b0, 0xfbcf, 0x6ee7, 0x9f24, 0x1, 0x0);
        gbc.writeMem(0x9f24, { 0x2c });
        gbc.writeMem(0xa77e, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x3d8e);
        EXPECT(gbc.pc(), 0xa780);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f24), 0x3c);
        EXPECT(gbc.readMem(0xa77e), 0xcb);
        EXPECT(gbc.readMem(0xa77f), 0xe6);
        // CB E6 0137
        gbc.setState(0xa191, 0x198e, 0x7c00, 0x3af5, 0xbb05, 0xeada, 0x1, 0x1);
        gbc.writeMem(0xa191, { 0xcb, 0xe6 });
        gbc.writeMem(0xeada, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x198e);
        EXPECT(gbc.pc(), 0xa193);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa191), 0xcb);
        EXPECT(gbc.readMem(0xa192), 0xe6);
        EXPECT(gbc.readMem(0xeada), 0x1d);
        // CB E6 0139
        gbc.setState(0x8bb3, 0xc1af, 0x8110, 0xdb7d, 0x4458, 0xfae1, 0x0, 0x0);
        gbc.writeMem(0x8bb3, { 0xcb, 0xe6 });
        gbc.writeMem(0xfae1, { 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xc1af);
        EXPECT(gbc.pc(), 0x8bb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bb3), 0xcb);
        EXPECT(gbc.readMem(0x8bb4), 0xe6);
        EXPECT(gbc.readMem(0xfae1), 0x90);
        // CB E6 013A
        gbc.setState(0xae2a, 0xd6ee, 0x6c20, 0x4bcd, 0xab03, 0xe8f5, 0x0, 0x0);
        gbc.writeMem(0xae2a, { 0xcb, 0xe6 });
        gbc.writeMem(0xe8f5, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xd6ee);
        EXPECT(gbc.pc(), 0xae2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae2a), 0xcb);
        EXPECT(gbc.readMem(0xae2b), 0xe6);
        EXPECT(gbc.readMem(0xe8f5), 0xb6);
        // CB E6 013C
        gbc.setState(0xdd2e, 0xb2b6, 0x7310, 0xc027, 0x5276, 0xd6ad, 0x0, 0x0);
        gbc.writeMem(0xd6ad, { 0x97 });
        gbc.writeMem(0xdd2e, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xb2b6);
        EXPECT(gbc.pc(), 0xdd30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6ad), 0x97);
        EXPECT(gbc.readMem(0xdd2e), 0xcb);
        EXPECT(gbc.readMem(0xdd2f), 0xe6);
        // CB E6 013D
        gbc.setState(0x1471, 0xf599, 0x4820, 0x4eb4, 0x770c, 0x9ce, 0x0, 0x0);
        gbc.writeMem(0x9ce, { 0x3d });
        gbc.writeMem(0x1471, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xf599);
        EXPECT(gbc.pc(), 0x1473);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E6 013E
        gbc.setState(0xb624, 0xbee3, 0x4280, 0xd91, 0x4102, 0x946b, 0x1, 0x0);
        gbc.writeMem(0x946b, { 0x26 });
        gbc.writeMem(0xb624, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xbee3);
        EXPECT(gbc.pc(), 0xb626);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x946b), 0x36);
        EXPECT(gbc.readMem(0xb624), 0xcb);
        EXPECT(gbc.readMem(0xb625), 0xe6);
        // CB E6 0141
        gbc.setState(0x2b8f, 0x38c6, 0x14b0, 0xde9a, 0xd0c6, 0x140c, 0x0, 0x0);
        gbc.writeMem(0x140c, { 0x58 });
        gbc.writeMem(0x2b8f, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x38c6);
        EXPECT(gbc.pc(), 0x2b91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 0142
        gbc.setState(0xca, 0xba31, 0xe300, 0x1d17, 0xb7ca, 0x5f57, 0x0, 0x1);
        gbc.writeMem(0xca, { 0xcb, 0xe6 });
        gbc.writeMem(0x5f57, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xba31);
        EXPECT(gbc.pc(), 0xcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E6 0144
        gbc.setState(0xe95d, 0x83ec, 0x7390, 0x8e5f, 0xb454, 0x8ed8, 0x1, 0x0);
        gbc.writeMem(0x8ed8, { 0xf });
        gbc.writeMem(0xe95d, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x83ec);
        EXPECT(gbc.pc(), 0xe95f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ed8), 0x1f);
        EXPECT(gbc.readMem(0xe95d), 0xcb);
        EXPECT(gbc.readMem(0xe95e), 0xe6);
        // CB E6 0145
        gbc.setState(0xc547, 0x6e8, 0xd9e0, 0x5238, 0xb47d, 0xef1d, 0x1, 0x1);
        gbc.writeMem(0xc547, { 0xcb, 0xe6 });
        gbc.writeMem(0xef1d, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x6e8);
        EXPECT(gbc.pc(), 0xc549);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc547), 0xcb);
        EXPECT(gbc.readMem(0xc548), 0xe6);
        EXPECT(gbc.readMem(0xef1d), 0xd7);
        // CB E6 0146
        gbc.setState(0xfc8, 0x8842, 0x2c30, 0x2aab, 0x13fa, 0xd8f5, 0x1, 0x0);
        gbc.writeMem(0xfc8, { 0xcb, 0xe6 });
        gbc.writeMem(0xd8f5, { 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x8842);
        EXPECT(gbc.pc(), 0xfca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8f5), 0x7d);
        // CB E6 0147
        gbc.setState(0x3690, 0x4364, 0xea20, 0xee9a, 0x3054, 0xb7a0, 0x1, 0x1);
        gbc.writeMem(0x3690, { 0xcb, 0xe6 });
        gbc.writeMem(0xb7a0, { 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x4364);
        EXPECT(gbc.pc(), 0x3692);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7a0), 0x75);
        // CB E6 0148
        gbc.setState(0x15a5, 0xa2a8, 0x2680, 0x5b93, 0x6bf4, 0xc1a6, 0x0, 0x0);
        gbc.writeMem(0x15a5, { 0xcb, 0xe6 });
        gbc.writeMem(0xc1a6, { 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xa2a8);
        EXPECT(gbc.pc(), 0x15a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1a6), 0xd4);
        // CB E6 0149
        gbc.setState(0x4eed, 0xeb60, 0x5380, 0x3bb, 0x3a83, 0xd82e, 0x0, 0x1);
        gbc.writeMem(0x4eed, { 0xcb, 0xe6 });
        gbc.writeMem(0xd82e, { 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xeb60);
        EXPECT(gbc.pc(), 0x4eef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd82e), 0xfa);
        // CB E6 014B
        gbc.setState(0xd9e9, 0x8fac, 0x6cf0, 0xa53a, 0xc573, 0x63fa, 0x0, 0x1);
        gbc.writeMem(0x63fa, { 0x96 });
        gbc.writeMem(0xd9e9, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x8fac);
        EXPECT(gbc.pc(), 0xd9eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9e9), 0xcb);
        EXPECT(gbc.readMem(0xd9ea), 0xe6);
        // CB E6 014C
        gbc.setState(0xc38c, 0xebed, 0xc390, 0x8eea, 0xb5db, 0x4da2, 0x1, 0x0);
        gbc.writeMem(0x4da2, { 0xf2 });
        gbc.writeMem(0xc38c, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xebed);
        EXPECT(gbc.pc(), 0xc38e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc38c), 0xcb);
        EXPECT(gbc.readMem(0xc38d), 0xe6);
        // CB E6 014D
        gbc.setState(0x730c, 0xb36d, 0x2350, 0x8373, 0xcf5d, 0x924b, 0x0, 0x1);
        gbc.writeMem(0x730c, { 0xcb, 0xe6 });
        gbc.writeMem(0x924b, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xb36d);
        EXPECT(gbc.pc(), 0x730e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x924b), 0x9f);
        // CB E6 014E
        gbc.setState(0x14d4, 0xd576, 0x8f70, 0x22fb, 0x4a80, 0x1c0e, 0x1, 0x1);
        gbc.writeMem(0x14d4, { 0xcb, 0xe6 });
        gbc.writeMem(0x1c0e, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xd576);
        EXPECT(gbc.pc(), 0x14d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 014F
        gbc.setState(0x54bd, 0x1a07, 0xd890, 0xc1da, 0xc280, 0x3500, 0x0, 0x1);
        gbc.writeMem(0x3500, { 0x33 });
        gbc.writeMem(0x54bd, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x1a07);
        EXPECT(gbc.pc(), 0x54bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E6 0151
        gbc.setState(0x282b, 0xeaa2, 0x3740, 0xf54a, 0x69a0, 0xb952, 0x0, 0x1);
        gbc.writeMem(0x282b, { 0xcb, 0xe6 });
        gbc.writeMem(0xb952, { 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xeaa2);
        EXPECT(gbc.pc(), 0x282d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb952), 0x7c);
        // CB E6 0152
        gbc.setState(0x89d8, 0x22da, 0xa9e0, 0x3255, 0x355f, 0xa9dc, 0x0, 0x1);
        gbc.writeMem(0x89d8, { 0xcb, 0xe6 });
        gbc.writeMem(0xa9dc, { 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x22da);
        EXPECT(gbc.pc(), 0x89da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89d8), 0xcb);
        EXPECT(gbc.readMem(0x89d9), 0xe6);
        EXPECT(gbc.readMem(0xa9dc), 0x14);
        // CB E6 0153
        gbc.setState(0x7d58, 0x9bf5, 0xcd20, 0x57ef, 0xe24b, 0xca85, 0x1, 0x0);
        gbc.writeMem(0x7d58, { 0xcb, 0xe6 });
        gbc.writeMem(0xca85, { 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x9bf5);
        EXPECT(gbc.pc(), 0x7d5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca85), 0x9a);
        // CB E6 0154
        gbc.setState(0xacd0, 0x6457, 0x2310, 0x9c40, 0x2510, 0x63b0, 0x0, 0x0);
        gbc.writeMem(0x63b0, { 0xf6 });
        gbc.writeMem(0xacd0, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x6457);
        EXPECT(gbc.pc(), 0xacd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacd0), 0xcb);
        EXPECT(gbc.readMem(0xacd1), 0xe6);
        // CB E6 0155
        gbc.setState(0x1877, 0xdc1c, 0xccf0, 0x3fe3, 0x1e0, 0x1bc9, 0x1, 0x0);
        gbc.writeMem(0x1877, { 0xcb, 0xe6 });
        gbc.writeMem(0x1bc9, { 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xdc1c);
        EXPECT(gbc.pc(), 0x1879);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 0157
        gbc.setState(0x1f04, 0x7a30, 0xfd0, 0xfdbb, 0x5aa0, 0x2bff, 0x1, 0x0);
        gbc.writeMem(0x1f04, { 0xcb, 0xe6 });
        gbc.writeMem(0x2bff, { 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x7a30);
        EXPECT(gbc.pc(), 0x1f06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E6 0158
        gbc.setState(0x5c43, 0x4cd8, 0x57e0, 0x5047, 0xc572, 0xd5c1, 0x0, 0x0);
        gbc.writeMem(0x5c43, { 0xcb, 0xe6 });
        gbc.writeMem(0xd5c1, { 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x4cd8);
        EXPECT(gbc.pc(), 0x5c45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5c1), 0x91);
        // CB E6 0159
        gbc.setState(0xda65, 0x67ab, 0x8b00, 0x3b58, 0xab94, 0xcd2d, 0x1, 0x1);
        gbc.writeMem(0xcd2d, { 0x6c });
        gbc.writeMem(0xda65, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x67ab);
        EXPECT(gbc.pc(), 0xda67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd2d), 0x7c);
        EXPECT(gbc.readMem(0xda65), 0xcb);
        EXPECT(gbc.readMem(0xda66), 0xe6);
        // CB E6 015A
        gbc.setState(0x3fbc, 0x7bfe, 0xd270, 0xc63, 0xd2e6, 0x708f, 0x1, 0x0);
        gbc.writeMem(0x3fbc, { 0xcb, 0xe6 });
        gbc.writeMem(0x708f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x7bfe);
        EXPECT(gbc.pc(), 0x3fbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 015E
        gbc.setState(0xe9a, 0x476b, 0xd470, 0x170, 0xef17, 0x7980, 0x0, 0x0);
        gbc.writeMem(0xe9a, { 0xcb, 0xe6 });
        gbc.writeMem(0x7980, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x476b);
        EXPECT(gbc.pc(), 0xe9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 015F
        gbc.setState(0xe1b2, 0xd749, 0xfcc0, 0xb0c9, 0xa96c, 0xc96e, 0x1, 0x0);
        gbc.writeMem(0xc96e, { 0x6b });
        gbc.writeMem(0xe1b2, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xd749);
        EXPECT(gbc.pc(), 0xe1b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc96e), 0x7b);
        EXPECT(gbc.readMem(0xe1b2), 0xcb);
        EXPECT(gbc.readMem(0xe1b3), 0xe6);
        // CB E6 0161
        gbc.setState(0x6ab8, 0x3589, 0x23a0, 0x3133, 0xfdc7, 0xe2b9, 0x0, 0x1);
        gbc.writeMem(0x6ab8, { 0xcb, 0xe6 });
        gbc.writeMem(0xe2b9, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x3589);
        EXPECT(gbc.pc(), 0x6aba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2b9), 0xf0);
        // CB E6 0163
        gbc.setState(0xb7d7, 0xc864, 0x1760, 0xb357, 0x9f43, 0xd3f0, 0x1, 0x1);
        gbc.writeMem(0xb7d7, { 0xcb, 0xe6 });
        gbc.writeMem(0xd3f0, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xc864);
        EXPECT(gbc.pc(), 0xb7d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7d7), 0xcb);
        EXPECT(gbc.readMem(0xb7d8), 0xe6);
        EXPECT(gbc.readMem(0xd3f0), 0x57);
        // CB E6 0165
        gbc.setState(0x4b4c, 0xdc9f, 0x9710, 0x43f7, 0x3be4, 0xe7de, 0x0, 0x0);
        gbc.writeMem(0x4b4c, { 0xcb, 0xe6 });
        gbc.writeMem(0xe7de, { 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xdc9f);
        EXPECT(gbc.pc(), 0x4b4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7de), 0x5c);
        // CB E6 0166
        gbc.setState(0x2d95, 0x95a, 0x2140, 0xfa24, 0x8cc9, 0x5167, 0x1, 0x1);
        gbc.writeMem(0x2d95, { 0xcb, 0xe6 });
        gbc.writeMem(0x5167, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x95a);
        EXPECT(gbc.pc(), 0x2d97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E6 0167
        gbc.setState(0x91cc, 0xa336, 0xc60, 0xbe3e, 0x9d3f, 0xec87, 0x1, 0x1);
        gbc.writeMem(0x91cc, { 0xcb, 0xe6 });
        gbc.writeMem(0xec87, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xa336);
        EXPECT(gbc.pc(), 0x91ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91cc), 0xcb);
        EXPECT(gbc.readMem(0x91cd), 0xe6);
        EXPECT(gbc.readMem(0xec87), 0xb7);
        // CB E6 0168
        gbc.setState(0xb17, 0xa7ae, 0x26f0, 0x3253, 0x2c18, 0xfff7, 0x1, 0x1);
        gbc.writeMem(0xb17, { 0xcb, 0xe6 });
        gbc.writeMem(0xfff7, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xa7ae);
        EXPECT(gbc.pc(), 0xb19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfff7), 0x3a);
        // CB E6 016A
        gbc.setState(0xbaf7, 0xb93a, 0x31e0, 0xb187, 0x1d21, 0xf79c, 0x1, 0x1);
        gbc.writeMem(0xbaf7, { 0xcb, 0xe6 });
        gbc.writeMem(0xf79c, { 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xb93a);
        EXPECT(gbc.pc(), 0xbaf9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbaf7), 0xcb);
        EXPECT(gbc.readMem(0xbaf8), 0xe6);
        EXPECT(gbc.readMem(0xf79c), 0x99);
        // CB E6 016B
        gbc.setState(0x1a0a, 0x27c8, 0xc00, 0x2015, 0xd531, 0x14b9, 0x1, 0x1);
        gbc.writeMem(0x14b9, { 0x99 });
        gbc.writeMem(0x1a0a, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x27c8);
        EXPECT(gbc.pc(), 0x1a0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E6 016C
        gbc.setState(0x4b8d, 0xe1cb, 0xd7c0, 0xefaa, 0xad78, 0x8825, 0x0, 0x1);
        gbc.writeMem(0x4b8d, { 0xcb, 0xe6 });
        gbc.writeMem(0x8825, { 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xe1cb);
        EXPECT(gbc.pc(), 0x4b8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8825), 0x1e);
        // CB E6 016D
        gbc.setState(0x5fca, 0x1c5, 0xc150, 0xe26d, 0xcf4b, 0x76b6, 0x0, 0x1);
        gbc.writeMem(0x5fca, { 0xcb, 0xe6 });
        gbc.writeMem(0x76b6, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x1c5);
        EXPECT(gbc.pc(), 0x5fcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E6 016E
        gbc.setState(0x5813, 0xc180, 0x40f0, 0xa681, 0x343f, 0xc781, 0x0, 0x0);
        gbc.writeMem(0x5813, { 0xcb, 0xe6 });
        gbc.writeMem(0xc781, { 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xc180);
        EXPECT(gbc.pc(), 0x5815);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc781), 0x36);
        // CB E6 016F
        gbc.setState(0x3b92, 0xb021, 0x7ad0, 0xcd33, 0xc85a, 0x51e2, 0x1, 0x0);
        gbc.writeMem(0x3b92, { 0xcb, 0xe6 });
        gbc.writeMem(0x51e2, { 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xb021);
        EXPECT(gbc.pc(), 0x3b94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E6 0170
        gbc.setState(0x89c1, 0x76d2, 0x5410, 0x7042, 0xd6fa, 0x9bc0, 0x0, 0x1);
        gbc.writeMem(0x89c1, { 0xcb, 0xe6 });
        gbc.writeMem(0x9bc0, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x76d2);
        EXPECT(gbc.pc(), 0x89c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89c1), 0xcb);
        EXPECT(gbc.readMem(0x89c2), 0xe6);
        EXPECT(gbc.readMem(0x9bc0), 0x5a);
        // CB E6 0171
        gbc.setState(0x1b7f, 0xddc0, 0xab70, 0xb20d, 0xc866, 0x9c42, 0x1, 0x0);
        gbc.writeMem(0x1b7f, { 0xcb, 0xe6 });
        gbc.writeMem(0x9c42, { 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xddc0);
        EXPECT(gbc.pc(), 0x1b81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c42), 0x99);
        // CB E6 0175
        gbc.setState(0x89a0, 0xdcb5, 0xe5e0, 0xa0bb, 0xabb, 0xfd55, 0x0, 0x1);
        gbc.writeMem(0x89a0, { 0xcb, 0xe6 });
        gbc.writeMem(0xfd55, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xdcb5);
        EXPECT(gbc.pc(), 0x89a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89a0), 0xcb);
        EXPECT(gbc.readMem(0x89a1), 0xe6);
        EXPECT(gbc.readMem(0xfd55), 0xd7);
        // CB E6 0176
        gbc.setState(0xdb6f, 0x5ed2, 0x1860, 0x66d4, 0x7896, 0x834d, 0x1, 0x1);
        gbc.writeMem(0x834d, { 0x7c });
        gbc.writeMem(0xdb6f, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x5ed2);
        EXPECT(gbc.pc(), 0xdb71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x834d), 0x7c);
        EXPECT(gbc.readMem(0xdb6f), 0xcb);
        EXPECT(gbc.readMem(0xdb70), 0xe6);
        // CB E6 0177
        gbc.setState(0x3dc8, 0xc626, 0x260, 0xf23b, 0xb8fb, 0x70da, 0x1, 0x0);
        gbc.writeMem(0x3dc8, { 0xcb, 0xe6 });
        gbc.writeMem(0x70da, { 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xc626);
        EXPECT(gbc.pc(), 0x3dca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E6 0178
        gbc.setState(0x1d8, 0xc580, 0x1630, 0xa8e4, 0xdf1, 0x6e62, 0x0, 0x1);
        gbc.writeMem(0x1d8, { 0xcb, 0xe6 });
        gbc.writeMem(0x6e62, { 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xc580);
        EXPECT(gbc.pc(), 0x1da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 017B
        gbc.setState(0x9978, 0x85f7, 0x2120, 0xce2c, 0x4b9, 0x1bf1, 0x1, 0x1);
        gbc.writeMem(0x1bf1, { 0xb8 });
        gbc.writeMem(0x9978, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x85f7);
        EXPECT(gbc.pc(), 0x997a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9978), 0xcb);
        EXPECT(gbc.readMem(0x9979), 0xe6);
        // CB E6 017C
        gbc.setState(0x9727, 0x3ff5, 0x3260, 0x2783, 0x3fe9, 0xa432, 0x0, 0x0);
        gbc.writeMem(0x9727, { 0xcb, 0xe6 });
        gbc.writeMem(0xa432, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x3ff5);
        EXPECT(gbc.pc(), 0x9729);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9727), 0xcb);
        EXPECT(gbc.readMem(0x9728), 0xe6);
        EXPECT(gbc.readMem(0xa432), 0xf4);
        // CB E6 017D
        gbc.setState(0x1249, 0x4178, 0xa870, 0xe524, 0x69ce, 0x1a43, 0x0, 0x1);
        gbc.writeMem(0x1249, { 0xcb, 0xe6 });
        gbc.writeMem(0x1a43, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x4178);
        EXPECT(gbc.pc(), 0x124b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 0181
        gbc.setState(0x2bcf, 0x8ed7, 0xe3c0, 0x7a4d, 0x4169, 0xd085, 0x0, 0x0);
        gbc.writeMem(0x2bcf, { 0xcb, 0xe6 });
        gbc.writeMem(0xd085, { 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x8ed7);
        EXPECT(gbc.pc(), 0x2bd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd085), 0x36);
        // CB E6 0182
        gbc.setState(0xb0eb, 0x5c0c, 0xffd0, 0x7fd4, 0x1471, 0xd13f, 0x0, 0x0);
        gbc.writeMem(0xb0eb, { 0xcb, 0xe6 });
        gbc.writeMem(0xd13f, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x5c0c);
        EXPECT(gbc.pc(), 0xb0ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0eb), 0xcb);
        EXPECT(gbc.readMem(0xb0ec), 0xe6);
        EXPECT(gbc.readMem(0xd13f), 0x9d);
        // CB E6 0183
        gbc.setState(0x6b66, 0x634e, 0xfb40, 0x184b, 0xc870, 0xfff0, 0x0, 0x0);
        gbc.writeMem(0x6b66, { 0xcb, 0xe6 });
        gbc.writeMem(0xfff0, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x634e);
        EXPECT(gbc.pc(), 0x6b68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfff0), 0xd0);
        // CB E6 0184
        gbc.setState(0x5658, 0x29a3, 0x2690, 0xed4e, 0x3121, 0xc5ab, 0x1, 0x1);
        gbc.writeMem(0x5658, { 0xcb, 0xe6 });
        gbc.writeMem(0xc5ab, { 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x29a3);
        EXPECT(gbc.pc(), 0x565a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5ab), 0xd6);
        // CB E6 0185
        gbc.setState(0x9e98, 0x5541, 0xcb60, 0xf31a, 0xc678, 0x13ce, 0x1, 0x1);
        gbc.writeMem(0x13ce, { 0xf6 });
        gbc.writeMem(0x9e98, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x5541);
        EXPECT(gbc.pc(), 0x9e9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e98), 0xcb);
        EXPECT(gbc.readMem(0x9e99), 0xe6);
        // CB E6 0186
        gbc.setState(0x87ea, 0xf45c, 0x81a0, 0x3154, 0x6ee6, 0xde29, 0x0, 0x1);
        gbc.writeMem(0x87ea, { 0xcb, 0xe6 });
        gbc.writeMem(0xde29, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xf45c);
        EXPECT(gbc.pc(), 0x87ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87ea), 0xcb);
        EXPECT(gbc.readMem(0x87eb), 0xe6);
        EXPECT(gbc.readMem(0xde29), 0x79);
        // CB E6 0187
        gbc.setState(0x8319, 0x5e6a, 0x9680, 0x1ac, 0x441, 0x8250, 0x1, 0x1);
        gbc.writeMem(0x8250, { 0x39 });
        gbc.writeMem(0x8319, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x5e6a);
        EXPECT(gbc.pc(), 0x831b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8250), 0x39);
        EXPECT(gbc.readMem(0x8319), 0xcb);
        EXPECT(gbc.readMem(0x831a), 0xe6);
        // CB E6 0188
        gbc.setState(0xc5f5, 0xad33, 0x2f10, 0xf3e5, 0xec42, 0x9756, 0x1, 0x0);
        gbc.writeMem(0x9756, { 0xf5 });
        gbc.writeMem(0xc5f5, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xad33);
        EXPECT(gbc.pc(), 0xc5f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9756), 0xf5);
        EXPECT(gbc.readMem(0xc5f5), 0xcb);
        EXPECT(gbc.readMem(0xc5f6), 0xe6);
        // CB E6 0189
        gbc.setState(0x92c0, 0x536f, 0xcc0, 0x3982, 0x2168, 0xc58b, 0x0, 0x0);
        gbc.writeMem(0x92c0, { 0xcb, 0xe6 });
        gbc.writeMem(0xc58b, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x536f);
        EXPECT(gbc.pc(), 0x92c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92c0), 0xcb);
        EXPECT(gbc.readMem(0x92c1), 0xe6);
        EXPECT(gbc.readMem(0xc58b), 0x54);
        // CB E6 018A
        gbc.setState(0x646c, 0x7ac3, 0xc630, 0xb919, 0x88, 0x502a, 0x0, 0x0);
        gbc.writeMem(0x502a, { 0x96 });
        gbc.writeMem(0x646c, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x7ac3);
        EXPECT(gbc.pc(), 0x646e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 018B
        gbc.setState(0xe5c2, 0x62b1, 0xbcb0, 0x4e0d, 0xfcc, 0x9633, 0x0, 0x1);
        gbc.writeMem(0x9633, { 0x69 });
        gbc.writeMem(0xe5c2, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x62b1);
        EXPECT(gbc.pc(), 0xe5c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9633), 0x79);
        EXPECT(gbc.readMem(0xe5c2), 0xcb);
        EXPECT(gbc.readMem(0xe5c3), 0xe6);
        // CB E6 018C
        gbc.setState(0x5d2c, 0x97cd, 0xe7b0, 0x4ebe, 0x185c, 0xfc0f, 0x1, 0x0);
        gbc.writeMem(0x5d2c, { 0xcb, 0xe6 });
        gbc.writeMem(0xfc0f, { 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x97cd);
        EXPECT(gbc.pc(), 0x5d2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfc0f), 0x34);
        // CB E6 018D
        gbc.setState(0x6967, 0x8089, 0x9500, 0xc26b, 0xbb7f, 0xd0c1, 0x0, 0x1);
        gbc.writeMem(0x6967, { 0xcb, 0xe6 });
        gbc.writeMem(0xd0c1, { 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x8089);
        EXPECT(gbc.pc(), 0x6969);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0c1), 0x98);
        // CB E6 0190
        gbc.setState(0x40b9, 0x4745, 0x1fc0, 0x939e, 0x72ab, 0x8321, 0x1, 0x0);
        gbc.writeMem(0x40b9, { 0xcb, 0xe6 });
        gbc.writeMem(0x8321, { 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x4745);
        EXPECT(gbc.pc(), 0x40bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8321), 0x16);
        // CB E6 0191
        gbc.setState(0x5f68, 0x599, 0xb220, 0xda40, 0x8a58, 0xcbff, 0x0, 0x0);
        gbc.writeMem(0x5f68, { 0xcb, 0xe6 });
        gbc.writeMem(0xcbff, { 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x599);
        EXPECT(gbc.pc(), 0x5f6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbff), 0x75);
        // CB E6 0192
        gbc.setState(0x3cb5, 0x650f, 0x5730, 0xa39f, 0x958e, 0xb208, 0x1, 0x0);
        gbc.writeMem(0x3cb5, { 0xcb, 0xe6 });
        gbc.writeMem(0xb208, { 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x650f);
        EXPECT(gbc.pc(), 0x3cb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb208), 0x71);
        // CB E6 0193
        gbc.setState(0x3fb3, 0x706e, 0x3810, 0xc908, 0x3f79, 0xbca4, 0x0, 0x0);
        gbc.writeMem(0x3fb3, { 0xcb, 0xe6 });
        gbc.writeMem(0xbca4, { 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x706e);
        EXPECT(gbc.pc(), 0x3fb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbca4), 0x71);
        // CB E6 0194
        gbc.setState(0x257f, 0xefca, 0xae10, 0x3fdc, 0xf569, 0x817e, 0x0, 0x0);
        gbc.writeMem(0x257f, { 0xcb, 0xe6 });
        gbc.writeMem(0x817e, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xefca);
        EXPECT(gbc.pc(), 0x2581);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x817e), 0xd9);
        // CB E6 0195
        gbc.setState(0xb7b4, 0x6746, 0x1cd0, 0xc9b0, 0x8bc5, 0xfba4, 0x1, 0x0);
        gbc.writeMem(0xb7b4, { 0xcb, 0xe6 });
        gbc.writeMem(0xfba4, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x6746);
        EXPECT(gbc.pc(), 0xb7b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7b4), 0xcb);
        EXPECT(gbc.readMem(0xb7b5), 0xe6);
        EXPECT(gbc.readMem(0xfba4), 0xf9);
        // CB E6 0196
        gbc.setState(0xc5cb, 0x64f9, 0x8db0, 0xd69, 0xc4e7, 0xd911, 0x1, 0x1);
        gbc.writeMem(0xc5cb, { 0xcb, 0xe6 });
        gbc.writeMem(0xd911, { 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x64f9);
        EXPECT(gbc.pc(), 0xc5cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5cb), 0xcb);
        EXPECT(gbc.readMem(0xc5cc), 0xe6);
        EXPECT(gbc.readMem(0xd911), 0x1f);
        // CB E6 0197
        gbc.setState(0x4638, 0xe851, 0x3f10, 0xcc26, 0x3e27, 0xf9a7, 0x0, 0x0);
        gbc.writeMem(0x4638, { 0xcb, 0xe6 });
        gbc.writeMem(0xf9a7, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xe851);
        EXPECT(gbc.pc(), 0x463a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf9a7), 0xd9);
        // CB E6 019A
        gbc.setState(0x7867, 0x7872, 0xde10, 0x4005, 0x66a1, 0xdcd5, 0x1, 0x0);
        gbc.writeMem(0x7867, { 0xcb, 0xe6 });
        gbc.writeMem(0xdcd5, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x7872);
        EXPECT(gbc.pc(), 0x7869);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcd5), 0x37);
        // CB E6 019B
        gbc.setState(0xc927, 0xac52, 0xf790, 0xa432, 0x48dc, 0x8eed, 0x0, 0x1);
        gbc.writeMem(0x8eed, { 0x38 });
        gbc.writeMem(0xc927, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xac52);
        EXPECT(gbc.pc(), 0xc929);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8eed), 0x38);
        EXPECT(gbc.readMem(0xc927), 0xcb);
        EXPECT(gbc.readMem(0xc928), 0xe6);
        // CB E6 019C
        gbc.setState(0x757, 0xd424, 0x1b80, 0x1207, 0xff30, 0xbea7, 0x0, 0x1);
        gbc.writeMem(0x757, { 0xcb, 0xe6 });
        gbc.writeMem(0xbea7, { 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xd424);
        EXPECT(gbc.pc(), 0x759);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbea7), 0xf6);
        // CB E6 019D
        gbc.setState(0x8a8c, 0x6077, 0x1ac0, 0x677a, 0x325f, 0xfd4e, 0x0, 0x1);
        gbc.writeMem(0x8a8c, { 0xcb, 0xe6 });
        gbc.writeMem(0xfd4e, { 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x6077);
        EXPECT(gbc.pc(), 0x8a8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a8c), 0xcb);
        EXPECT(gbc.readMem(0x8a8d), 0xe6);
        EXPECT(gbc.readMem(0xfd4e), 0x75);
        // CB E6 019F
        gbc.setState(0x7578, 0xb36, 0xab30, 0x8e68, 0xc1d5, 0xa386, 0x0, 0x0);
        gbc.writeMem(0x7578, { 0xcb, 0xe6 });
        gbc.writeMem(0xa386, { 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xb36);
        EXPECT(gbc.pc(), 0x757a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa386), 0x9c);
        // CB E6 01A0
        gbc.setState(0xb167, 0x9457, 0x6410, 0xbd2, 0xdf68, 0xf3d7, 0x1, 0x1);
        gbc.writeMem(0xb167, { 0xcb, 0xe6 });
        gbc.writeMem(0xf3d7, { 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x9457);
        EXPECT(gbc.pc(), 0xb169);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb167), 0xcb);
        EXPECT(gbc.readMem(0xb168), 0xe6);
        EXPECT(gbc.readMem(0xf3d7), 0xda);
        // CB E6 01A1
        gbc.setState(0xd302, 0x51a7, 0x7ce0, 0xb7e8, 0x6a37, 0xe2d5, 0x0, 0x1);
        gbc.writeMem(0xd302, { 0xcb, 0xe6 });
        gbc.writeMem(0xe2d5, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x51a7);
        EXPECT(gbc.pc(), 0xd304);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd302), 0xcb);
        EXPECT(gbc.readMem(0xd303), 0xe6);
        EXPECT(gbc.readMem(0xe2d5), 0x95);
        // CB E6 01A2
        gbc.setState(0x5fbf, 0x747c, 0x2ff0, 0x38c8, 0x3aa3, 0x843b, 0x1, 0x1);
        gbc.writeMem(0x5fbf, { 0xcb, 0xe6 });
        gbc.writeMem(0x843b, { 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x747c);
        EXPECT(gbc.pc(), 0x5fc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x843b), 0xf8);
        // CB E6 01A3
        gbc.setState(0x73a, 0xe77f, 0x7e20, 0x9c31, 0x172, 0x2764, 0x0, 0x1);
        gbc.writeMem(0x73a, { 0xcb, 0xe6 });
        gbc.writeMem(0x2764, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xe77f);
        EXPECT(gbc.pc(), 0x73c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E6 01A4
        gbc.setState(0xb319, 0x4186, 0xec0, 0x1e24, 0x53a7, 0xa64e, 0x1, 0x0);
        gbc.writeMem(0xa64e, { 0x1a });
        gbc.writeMem(0xb319, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x4186);
        EXPECT(gbc.pc(), 0xb31b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa64e), 0x1a);
        EXPECT(gbc.readMem(0xb319), 0xcb);
        EXPECT(gbc.readMem(0xb31a), 0xe6);
        // CB E6 01A5
        gbc.setState(0x248e, 0x4d4, 0x6cd0, 0xcc41, 0xe646, 0xfc3a, 0x1, 0x0);
        gbc.writeMem(0x248e, { 0xcb, 0xe6 });
        gbc.writeMem(0xfc3a, { 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x4d4);
        EXPECT(gbc.pc(), 0x2490);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfc3a), 0x52);
        // CB E6 01A6
        gbc.setState(0xa93, 0x4145, 0x7690, 0x27d0, 0x897b, 0xfd46, 0x0, 0x0);
        gbc.writeMem(0xa93, { 0xcb, 0xe6 });
        gbc.writeMem(0xfd46, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x4145);
        EXPECT(gbc.pc(), 0xa95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfd46), 0xfa);
        // CB E6 01A7
        gbc.setState(0xa092, 0x9fcc, 0x2d50, 0xf91, 0x34d, 0xfc46, 0x1, 0x1);
        gbc.writeMem(0xa092, { 0xcb, 0xe6 });
        gbc.writeMem(0xfc46, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x9fcc);
        EXPECT(gbc.pc(), 0xa094);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa092), 0xcb);
        EXPECT(gbc.readMem(0xa093), 0xe6);
        EXPECT(gbc.readMem(0xfc46), 0xd7);
        // CB E6 01A8
        gbc.setState(0x8afe, 0x4ae5, 0x8150, 0xaad5, 0xcc29, 0x1b47, 0x1, 0x1);
        gbc.writeMem(0x1b47, { 0x16 });
        gbc.writeMem(0x8afe, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x4ae5);
        EXPECT(gbc.pc(), 0x8b00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8afe), 0xcb);
        EXPECT(gbc.readMem(0x8aff), 0xe6);
        // CB E6 01A9
        gbc.setState(0x616, 0x9104, 0xa100, 0x2fdf, 0xd598, 0xd307, 0x1, 0x0);
        gbc.writeMem(0x616, { 0xcb, 0xe6 });
        gbc.writeMem(0xd307, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x9104);
        EXPECT(gbc.pc(), 0x618);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd307), 0x5c);
        // CB E6 01AA
        gbc.setState(0x9fb1, 0x2cbd, 0x5f80, 0x1f8b, 0xc041, 0x55be, 0x1, 0x1);
        gbc.writeMem(0x55be, { 0x11 });
        gbc.writeMem(0x9fb1, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x2cbd);
        EXPECT(gbc.pc(), 0x9fb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fb1), 0xcb);
        EXPECT(gbc.readMem(0x9fb2), 0xe6);
        // CB E6 01AB
        gbc.setState(0x3b9, 0xe4bb, 0xe550, 0x4073, 0xbaef, 0x8cb2, 0x1, 0x0);
        gbc.writeMem(0x3b9, { 0xcb, 0xe6 });
        gbc.writeMem(0x8cb2, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xe4bb);
        EXPECT(gbc.pc(), 0x3bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cb2), 0xb7);
        // CB E6 01AC
        gbc.setState(0xe631, 0x46fc, 0x9ec0, 0xd36b, 0x7c86, 0x8a4f, 0x0, 0x0);
        gbc.writeMem(0x8a4f, { 0x9e });
        gbc.writeMem(0xe631, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x46fc);
        EXPECT(gbc.pc(), 0xe633);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a4f), 0x9e);
        EXPECT(gbc.readMem(0xe631), 0xcb);
        EXPECT(gbc.readMem(0xe632), 0xe6);
        // CB E6 01AD
        gbc.setState(0x3168, 0x2acc, 0x8fb0, 0x1ca1, 0xf44e, 0x8977, 0x0, 0x0);
        gbc.writeMem(0x3168, { 0xcb, 0xe6 });
        gbc.writeMem(0x8977, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x2acc);
        EXPECT(gbc.pc(), 0x316a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8977), 0x57);
        // CB E6 01AE
        gbc.setState(0xaf99, 0xf6ce, 0x90d0, 0x7f98, 0xa853, 0xa17d, 0x1, 0x1);
        gbc.writeMem(0xa17d, { 0x62 });
        gbc.writeMem(0xaf99, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xf6ce);
        EXPECT(gbc.pc(), 0xaf9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa17d), 0x72);
        EXPECT(gbc.readMem(0xaf99), 0xcb);
        EXPECT(gbc.readMem(0xaf9a), 0xe6);
        // CB E6 01B1
        gbc.setState(0x3b36, 0x1a5, 0x27e0, 0x5b2, 0x53a0, 0xb293, 0x1, 0x0);
        gbc.writeMem(0x3b36, { 0xcb, 0xe6 });
        gbc.writeMem(0xb293, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x1a5);
        EXPECT(gbc.pc(), 0x3b38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb293), 0x94);
        // CB E6 01B4
        gbc.setState(0xddfc, 0x7b5e, 0x28a0, 0xe3b8, 0x2a01, 0xbf69, 0x0, 0x0);
        gbc.writeMem(0xbf69, { 0x75 });
        gbc.writeMem(0xddfc, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x7b5e);
        EXPECT(gbc.pc(), 0xddfe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf69), 0x75);
        EXPECT(gbc.readMem(0xddfc), 0xcb);
        EXPECT(gbc.readMem(0xddfd), 0xe6);
        // CB E6 01B5
        gbc.setState(0xbaaa, 0x4b31, 0xd7d0, 0x6754, 0xd547, 0xbdb8, 0x1, 0x1);
        gbc.writeMem(0xbaaa, { 0xcb, 0xe6 });
        gbc.writeMem(0xbdb8, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x4b31);
        EXPECT(gbc.pc(), 0xbaac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbaaa), 0xcb);
        EXPECT(gbc.readMem(0xbaab), 0xe6);
        EXPECT(gbc.readMem(0xbdb8), 0x33);
        // CB E6 01B6
        gbc.setState(0xc322, 0x713d, 0x870, 0x7c55, 0xa551, 0x3f2e, 0x0, 0x1);
        gbc.writeMem(0x3f2e, { 0x79 });
        gbc.writeMem(0xc322, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x713d);
        EXPECT(gbc.pc(), 0xc324);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc322), 0xcb);
        EXPECT(gbc.readMem(0xc323), 0xe6);
        // CB E6 01B7
        gbc.setState(0x7fe, 0x2b83, 0xfec0, 0x5de, 0x29e1, 0xfdc8, 0x1, 0x0);
        gbc.writeMem(0x7fe, { 0xcb, 0xe6 });
        gbc.writeMem(0xfdc8, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x2b83);
        EXPECT(gbc.pc(), 0x800);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfdc8), 0x19);
        // CB E6 01B8
        gbc.setState(0xe606, 0xac84, 0x31c0, 0xd8c2, 0x8f07, 0x7778, 0x1, 0x1);
        gbc.writeMem(0x7778, { 0xd1 });
        gbc.writeMem(0xe606, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xac84);
        EXPECT(gbc.pc(), 0xe608);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe606), 0xcb);
        EXPECT(gbc.readMem(0xe607), 0xe6);
        // CB E6 01B9
        gbc.setState(0x5996, 0x56cd, 0xbf90, 0x8c17, 0xc187, 0xa5d7, 0x0, 0x0);
        gbc.writeMem(0x5996, { 0xcb, 0xe6 });
        gbc.writeMem(0xa5d7, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x56cd);
        EXPECT(gbc.pc(), 0x5998);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5d7), 0x9c);
        // CB E6 01BA
        gbc.setState(0x4722, 0x5e38, 0x8d60, 0x156c, 0xe9a6, 0x680f, 0x0, 0x0);
        gbc.writeMem(0x4722, { 0xcb, 0xe6 });
        gbc.writeMem(0x680f, { 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x5e38);
        EXPECT(gbc.pc(), 0x4724);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E6 01BB
        gbc.setState(0x270a, 0xd50c, 0x6be0, 0xbcf8, 0x1950, 0xc14a, 0x0, 0x1);
        gbc.writeMem(0x270a, { 0xcb, 0xe6 });
        gbc.writeMem(0xc14a, { 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xd50c);
        EXPECT(gbc.pc(), 0x270c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc14a), 0xd1);
        // CB E6 01BC
        gbc.setState(0xc21f, 0xb784, 0xa3d0, 0x710b, 0x18ee, 0x9c1d, 0x0, 0x0);
        gbc.writeMem(0x9c1d, { 0x73 });
        gbc.writeMem(0xc21f, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xb784);
        EXPECT(gbc.pc(), 0xc221);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c1d), 0x73);
        EXPECT(gbc.readMem(0xc21f), 0xcb);
        EXPECT(gbc.readMem(0xc220), 0xe6);
        // CB E6 01BE
        gbc.setState(0x38d5, 0xfe31, 0x8370, 0xee11, 0x4032, 0x3106, 0x1, 0x0);
        gbc.writeMem(0x3106, { 0x12 });
        gbc.writeMem(0x38d5, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xfe31);
        EXPECT(gbc.pc(), 0x38d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 01BF
        gbc.setState(0x6f4d, 0xb7b4, 0x4200, 0x1ae3, 0xe2d6, 0x88d0, 0x0, 0x1);
        gbc.writeMem(0x6f4d, { 0xcb, 0xe6 });
        gbc.writeMem(0x88d0, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xb7b4);
        EXPECT(gbc.pc(), 0x6f4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88d0), 0x94);
        // CB E6 01C0
        gbc.setState(0xb1dd, 0x6a85, 0xb6b0, 0xebca, 0x6c80, 0x1be5, 0x1, 0x1);
        gbc.writeMem(0x1be5, { 0xda });
        gbc.writeMem(0xb1dd, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x6a85);
        EXPECT(gbc.pc(), 0xb1df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1dd), 0xcb);
        EXPECT(gbc.readMem(0xb1de), 0xe6);
        // CB E6 01C1
        gbc.setState(0x9aed, 0x502d, 0x9f10, 0x3db2, 0xbd41, 0x9bd9, 0x1, 0x1);
        gbc.writeMem(0x9aed, { 0xcb, 0xe6 });
        gbc.writeMem(0x9bd9, { 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x502d);
        EXPECT(gbc.pc(), 0x9aef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9aed), 0xcb);
        EXPECT(gbc.readMem(0x9aee), 0xe6);
        EXPECT(gbc.readMem(0x9bd9), 0xda);
        // CB E6 01C2
        gbc.setState(0xa6a8, 0x599e, 0x320, 0x5799, 0xbd29, 0x93e0, 0x0, 0x0);
        gbc.writeMem(0x93e0, { 0x6c });
        gbc.writeMem(0xa6a8, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x599e);
        EXPECT(gbc.pc(), 0xa6aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93e0), 0x7c);
        EXPECT(gbc.readMem(0xa6a8), 0xcb);
        EXPECT(gbc.readMem(0xa6a9), 0xe6);
        // CB E6 01C3
        gbc.setState(0xd327, 0x3716, 0x8b60, 0xc771, 0x11d9, 0x3f2d, 0x0, 0x0);
        gbc.writeMem(0x3f2d, { 0x32 });
        gbc.writeMem(0xd327, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x3716);
        EXPECT(gbc.pc(), 0xd329);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd327), 0xcb);
        EXPECT(gbc.readMem(0xd328), 0xe6);
        // CB E6 01C5
        gbc.setState(0x7814, 0xa62, 0x48d0, 0xd565, 0xc85a, 0xabe1, 0x0, 0x0);
        gbc.writeMem(0x7814, { 0xcb, 0xe6 });
        gbc.writeMem(0xabe1, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xa62);
        EXPECT(gbc.pc(), 0x7816);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabe1), 0x5d);
        // CB E6 01C7
        gbc.setState(0x83a0, 0x73c1, 0x50f0, 0xe1e9, 0x9390, 0x8f1c, 0x1, 0x1);
        gbc.writeMem(0x83a0, { 0xcb, 0xe6 });
        gbc.writeMem(0x8f1c, { 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x73c1);
        EXPECT(gbc.pc(), 0x83a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83a0), 0xcb);
        EXPECT(gbc.readMem(0x83a1), 0xe6);
        EXPECT(gbc.readMem(0x8f1c), 0xfd);
        // CB E6 01C8
        gbc.setState(0x69d1, 0xf5ce, 0x9df0, 0x1360, 0x84f4, 0x8d02, 0x0, 0x1);
        gbc.writeMem(0x69d1, { 0xcb, 0xe6 });
        gbc.writeMem(0x8d02, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xf5ce);
        EXPECT(gbc.pc(), 0x69d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d02), 0xba);
        // CB E6 01C9
        gbc.setState(0xd5f4, 0x528b, 0x8ae0, 0x3b4a, 0xece, 0xaf5, 0x0, 0x1);
        gbc.writeMem(0xaf5, { 0xb4 });
        gbc.writeMem(0xd5f4, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x528b);
        EXPECT(gbc.pc(), 0xd5f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5f4), 0xcb);
        EXPECT(gbc.readMem(0xd5f5), 0xe6);
        // CB E6 01CB
        gbc.setState(0x3a83, 0xdf88, 0x3c0, 0x3f39, 0x9e78, 0x8e13, 0x1, 0x0);
        gbc.writeMem(0x3a83, { 0xcb, 0xe6 });
        gbc.writeMem(0x8e13, { 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xdf88);
        EXPECT(gbc.pc(), 0x3a85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e13), 0x38);
        // CB E6 01CD
        gbc.setState(0x9e60, 0x92f4, 0xf0b0, 0xec94, 0xa2c5, 0x1828, 0x1, 0x1);
        gbc.writeMem(0x1828, { 0x5e });
        gbc.writeMem(0x9e60, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x92f4);
        EXPECT(gbc.pc(), 0x9e62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e60), 0xcb);
        EXPECT(gbc.readMem(0x9e61), 0xe6);
        // CB E6 01CE
        gbc.setState(0x3dd9, 0xe2e1, 0xed10, 0x8848, 0x4281, 0x6177, 0x0, 0x1);
        gbc.writeMem(0x3dd9, { 0xcb, 0xe6 });
        gbc.writeMem(0x6177, { 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xe2e1);
        EXPECT(gbc.pc(), 0x3ddb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E6 01CF
        gbc.setState(0x83c3, 0x8e87, 0x980, 0x59d2, 0x372d, 0x747f, 0x0, 0x0);
        gbc.writeMem(0x747f, { 0x14 });
        gbc.writeMem(0x83c3, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x8e87);
        EXPECT(gbc.pc(), 0x83c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83c3), 0xcb);
        EXPECT(gbc.readMem(0x83c4), 0xe6);
        // CB E6 01D0
        gbc.setState(0x5e96, 0x95b8, 0x9b70, 0xc384, 0xbf02, 0x864e, 0x1, 0x1);
        gbc.writeMem(0x5e96, { 0xcb, 0xe6 });
        gbc.writeMem(0x864e, { 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x95b8);
        EXPECT(gbc.pc(), 0x5e98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x864e), 0xb6);
        // CB E6 01D2
        gbc.setState(0x51e7, 0x9618, 0x7a30, 0x63dc, 0x7c6c, 0xface, 0x0, 0x1);
        gbc.writeMem(0x51e7, { 0xcb, 0xe6 });
        gbc.writeMem(0xface, { 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x9618);
        EXPECT(gbc.pc(), 0x51e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xface), 0xf4);
        // CB E6 01D4
        gbc.setState(0x5afe, 0x2ecf, 0x69d0, 0x661, 0x7be7, 0xf7e7, 0x0, 0x1);
        gbc.writeMem(0x5afe, { 0xcb, 0xe6 });
        gbc.writeMem(0xf7e7, { 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x2ecf);
        EXPECT(gbc.pc(), 0x5b00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf7e7), 0x3e);
        // CB E6 01D6
        gbc.setState(0x9392, 0x6c0a, 0x1d70, 0xecdc, 0xe784, 0x6760, 0x0, 0x0);
        gbc.writeMem(0x6760, { 0x75 });
        gbc.writeMem(0x9392, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x6c0a);
        EXPECT(gbc.pc(), 0x9394);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9392), 0xcb);
        EXPECT(gbc.readMem(0x9393), 0xe6);
        // CB E6 01D7
        gbc.setState(0x5595, 0x7b65, 0xd290, 0x54d8, 0x2ee8, 0x96ee, 0x0, 0x1);
        gbc.writeMem(0x5595, { 0xcb, 0xe6 });
        gbc.writeMem(0x96ee, { 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x7b65);
        EXPECT(gbc.pc(), 0x5597);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96ee), 0x72);
        // CB E6 01D8
        gbc.setState(0x411d, 0xc8b2, 0xd6b0, 0x79ed, 0x4507, 0x9f5, 0x0, 0x0);
        gbc.writeMem(0x9f5, { 0x15 });
        gbc.writeMem(0x411d, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xc8b2);
        EXPECT(gbc.pc(), 0x411f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 01D9
        gbc.setState(0x6c57, 0x3d97, 0xfa10, 0x16c, 0xe89f, 0xb3e7, 0x0, 0x0);
        gbc.writeMem(0x6c57, { 0xcb, 0xe6 });
        gbc.writeMem(0xb3e7, { 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x3d97);
        EXPECT(gbc.pc(), 0x6c59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3e7), 0xf0);
        // CB E6 01DB
        gbc.setState(0xd726, 0xeb7d, 0xbbb0, 0xfb48, 0xb77f, 0x7455, 0x0, 0x1);
        gbc.writeMem(0x7455, { 0x19 });
        gbc.writeMem(0xd726, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xeb7d);
        EXPECT(gbc.pc(), 0xd728);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd726), 0xcb);
        EXPECT(gbc.readMem(0xd727), 0xe6);
        // CB E6 01DC
        gbc.setState(0xdc2e, 0x48c0, 0x4070, 0x987a, 0x782a, 0xc012, 0x1, 0x1);
        gbc.writeMem(0xc012, { 0xe5 });
        gbc.writeMem(0xdc2e, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x48c0);
        EXPECT(gbc.pc(), 0xdc30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc012), 0xf5);
        EXPECT(gbc.readMem(0xdc2e), 0xcb);
        EXPECT(gbc.readMem(0xdc2f), 0xe6);
        // CB E6 01DE
        gbc.setState(0xbb92, 0xc827, 0x15a0, 0xaee8, 0xf71e, 0xa6df, 0x1, 0x0);
        gbc.writeMem(0xa6df, { 0xc7 });
        gbc.writeMem(0xbb92, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xc827);
        EXPECT(gbc.pc(), 0xbb94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6df), 0xd7);
        EXPECT(gbc.readMem(0xbb92), 0xcb);
        EXPECT(gbc.readMem(0xbb93), 0xe6);
        // CB E6 01DF
        gbc.setState(0x6e5, 0xbea3, 0x2ba0, 0xc912, 0x866e, 0x9a31, 0x0, 0x1);
        gbc.writeMem(0x6e5, { 0xcb, 0xe6 });
        gbc.writeMem(0x9a31, { 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xbea3);
        EXPECT(gbc.pc(), 0x6e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a31), 0xfe);
        // CB E6 01E0
        gbc.setState(0x13b3, 0xac5, 0x35f0, 0xf353, 0xdf18, 0x9d6c, 0x0, 0x0);
        gbc.writeMem(0x13b3, { 0xcb, 0xe6 });
        gbc.writeMem(0x9d6c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xac5);
        EXPECT(gbc.pc(), 0x13b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d6c), 0x9b);
        // CB E6 01E1
        gbc.setState(0x509, 0x9572, 0x3650, 0x7c14, 0x51af, 0x895b, 0x1, 0x1);
        gbc.writeMem(0x509, { 0xcb, 0xe6 });
        gbc.writeMem(0x895b, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x9572);
        EXPECT(gbc.pc(), 0x50b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x895b), 0x12);
        // CB E6 01E3
        gbc.setState(0xa4e7, 0xc864, 0x3d00, 0x41b9, 0x2ccb, 0xddc5, 0x1, 0x0);
        gbc.writeMem(0xa4e7, { 0xcb, 0xe6 });
        gbc.writeMem(0xddc5, { 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xc864);
        EXPECT(gbc.pc(), 0xa4e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4e7), 0xcb);
        EXPECT(gbc.readMem(0xa4e8), 0xe6);
        EXPECT(gbc.readMem(0xddc5), 0x3b);
        // CB E6 01E4
        gbc.setState(0x8cff, 0x45d9, 0x500, 0x327b, 0xee92, 0x8d78, 0x0, 0x0);
        gbc.writeMem(0x8cff, { 0xcb, 0xe6 });
        gbc.writeMem(0x8d78, { 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x45d9);
        EXPECT(gbc.pc(), 0x8d01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cff), 0xcb);
        EXPECT(gbc.readMem(0x8d00), 0xe6);
        EXPECT(gbc.readMem(0x8d78), 0x78);
        // CB E6 01E5
        gbc.setState(0x2543, 0xad9a, 0x2290, 0xb287, 0x3067, 0xdfcd, 0x1, 0x0);
        gbc.writeMem(0x2543, { 0xcb, 0xe6 });
        gbc.writeMem(0xdfcd, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xad9a);
        EXPECT(gbc.pc(), 0x2545);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfcd), 0xf4);
        // CB E6 01E6
        gbc.setState(0xbf1b, 0xcab, 0x1e60, 0x7903, 0x25b1, 0xfca0, 0x1, 0x0);
        gbc.writeMem(0xbf1b, { 0xcb, 0xe6 });
        gbc.writeMem(0xfca0, { 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xcab);
        EXPECT(gbc.pc(), 0xbf1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf1b), 0xcb);
        EXPECT(gbc.readMem(0xbf1c), 0xe6);
        EXPECT(gbc.readMem(0xfca0), 0xfe);
        // CB E6 01E7
        gbc.setState(0x4ac2, 0xae0f, 0x7e80, 0xa9d6, 0xaf7b, 0x7c89, 0x0, 0x0);
        gbc.writeMem(0x4ac2, { 0xcb, 0xe6 });
        gbc.writeMem(0x7c89, { 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xae0f);
        EXPECT(gbc.pc(), 0x4ac4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E6 01E8
        gbc.setState(0xc92, 0x9289, 0xb10, 0x141a, 0xa9d2, 0x5993, 0x0, 0x0);
        gbc.writeMem(0xc92, { 0xcb, 0xe6 });
        gbc.writeMem(0x5993, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x9289);
        EXPECT(gbc.pc(), 0xc94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E6 01E9
        gbc.setState(0x348, 0xce00, 0xf310, 0x651, 0x98f2, 0xccec, 0x0, 0x1);
        gbc.writeMem(0x348, { 0xcb, 0xe6 });
        gbc.writeMem(0xccec, { 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xce00);
        EXPECT(gbc.pc(), 0x34a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccec), 0x5b);
        // CB E6 01EA
        gbc.setState(0x91c0, 0x9ee1, 0xe8f0, 0xbab7, 0xc119, 0xf4f0, 0x1, 0x1);
        gbc.writeMem(0x91c0, { 0xcb, 0xe6 });
        gbc.writeMem(0xf4f0, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x9ee1);
        EXPECT(gbc.pc(), 0x91c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91c0), 0xcb);
        EXPECT(gbc.readMem(0x91c1), 0xe6);
        EXPECT(gbc.readMem(0xf4f0), 0xb4);
        // CB E6 01EC
        gbc.setState(0x83dd, 0xddc3, 0xed30, 0xd105, 0x5297, 0x1c10, 0x1, 0x0);
        gbc.writeMem(0x1c10, { 0xf5 });
        gbc.writeMem(0x83dd, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xddc3);
        EXPECT(gbc.pc(), 0x83df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83dd), 0xcb);
        EXPECT(gbc.readMem(0x83de), 0xe6);
        // CB E6 01EF
        gbc.setState(0xd9e9, 0x18f5, 0xdcc0, 0xdb24, 0x26e2, 0xf627, 0x0, 0x1);
        gbc.writeMem(0xd9e9, { 0xcb, 0xe6 });
        gbc.writeMem(0xf627, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x18f5);
        EXPECT(gbc.pc(), 0xd9eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9e9), 0xcb);
        EXPECT(gbc.readMem(0xd9ea), 0xe6);
        EXPECT(gbc.readMem(0xf627), 0xb9);
        // CB E6 01F1
        gbc.setState(0xaaef, 0x6831, 0x7150, 0xbf55, 0x67a4, 0xd009, 0x0, 0x0);
        gbc.writeMem(0xaaef, { 0xcb, 0xe6 });
        gbc.writeMem(0xd009, { 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x6831);
        EXPECT(gbc.pc(), 0xaaf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaaef), 0xcb);
        EXPECT(gbc.readMem(0xaaf0), 0xe6);
        EXPECT(gbc.readMem(0xd009), 0x1d);
        // CB E6 01F2
        gbc.setState(0x5d97, 0xeb48, 0x3240, 0x9c10, 0xc201, 0xc8eb, 0x1, 0x1);
        gbc.writeMem(0x5d97, { 0xcb, 0xe6 });
        gbc.writeMem(0xc8eb, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xeb48);
        EXPECT(gbc.pc(), 0x5d99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8eb), 0x73);
        // CB E6 01F3
        gbc.setState(0xbc06, 0xae69, 0x9180, 0x593a, 0x9614, 0x35ed, 0x0, 0x0);
        gbc.writeMem(0x35ed, { 0x95 });
        gbc.writeMem(0xbc06, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xae69);
        EXPECT(gbc.pc(), 0xbc08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc06), 0xcb);
        EXPECT(gbc.readMem(0xbc07), 0xe6);
        // CB E6 01F4
        gbc.setState(0x930a, 0xfd85, 0xa350, 0x2d89, 0xedd6, 0xb2db, 0x1, 0x1);
        gbc.writeMem(0x930a, { 0xcb, 0xe6 });
        gbc.writeMem(0xb2db, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xfd85);
        EXPECT(gbc.pc(), 0x930c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x930a), 0xcb);
        EXPECT(gbc.readMem(0x930b), 0xe6);
        EXPECT(gbc.readMem(0xb2db), 0xbb);
        // CB E6 01F5
        gbc.setState(0xf66, 0x248c, 0xfa20, 0x4280, 0x6ce2, 0xc178, 0x0, 0x0);
        gbc.writeMem(0xf66, { 0xcb, 0xe6 });
        gbc.writeMem(0xc178, { 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x248c);
        EXPECT(gbc.pc(), 0xf68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc178), 0x1a);
        // CB E6 01F6
        gbc.setState(0x2d73, 0xbb9, 0xa830, 0x2ba0, 0xe8e6, 0xc77, 0x0, 0x1);
        gbc.writeMem(0xc77, { 0x75 });
        gbc.writeMem(0x2d73, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xbb9);
        EXPECT(gbc.pc(), 0x2d75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 01F8
        gbc.setState(0xe9cb, 0xb7c1, 0x6480, 0xbd1a, 0x4c59, 0x697f, 0x0, 0x1);
        gbc.writeMem(0x697f, { 0x5b });
        gbc.writeMem(0xe9cb, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xb7c1);
        EXPECT(gbc.pc(), 0xe9cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9cb), 0xcb);
        EXPECT(gbc.readMem(0xe9cc), 0xe6);
        // CB E6 01F9
        gbc.setState(0x8952, 0x9cbc, 0xad60, 0xdb78, 0xf892, 0x7ffd, 0x0, 0x0);
        gbc.writeMem(0x7ffd, { 0x74 });
        gbc.writeMem(0x8952, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x9cbc);
        EXPECT(gbc.pc(), 0x8954);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8952), 0xcb);
        EXPECT(gbc.readMem(0x8953), 0xe6);
        // CB E6 01FB
        gbc.setState(0xa23, 0x72f2, 0x6b90, 0xe89c, 0x6d87, 0xa97f, 0x1, 0x1);
        gbc.writeMem(0xa23, { 0xcb, 0xe6 });
        gbc.writeMem(0xa97f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x72f2);
        EXPECT(gbc.pc(), 0xa25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa97f), 0x5d);
        // CB E6 01FC
        gbc.setState(0x301a, 0x2c27, 0x5d40, 0x965c, 0x2410, 0xe410, 0x1, 0x0);
        gbc.writeMem(0x301a, { 0xcb, 0xe6 });
        gbc.writeMem(0xe410, { 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x2c27);
        EXPECT(gbc.pc(), 0x301c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe410), 0x55);
        // CB E6 01FD
        gbc.setState(0xcd54, 0xd0bb, 0x20b0, 0x63cb, 0x266f, 0x875e, 0x0, 0x1);
        gbc.writeMem(0x875e, { 0xbd });
        gbc.writeMem(0xcd54, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xd0bb);
        EXPECT(gbc.pc(), 0xcd56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x875e), 0xbd);
        EXPECT(gbc.readMem(0xcd54), 0xcb);
        EXPECT(gbc.readMem(0xcd55), 0xe6);
        // CB E6 01FE
        gbc.setState(0x8613, 0x2d76, 0xbce0, 0xae7c, 0x4b91, 0xad28, 0x1, 0x0);
        gbc.writeMem(0x8613, { 0xcb, 0xe6 });
        gbc.writeMem(0xad28, { 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x2d76);
        EXPECT(gbc.pc(), 0x8615);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8613), 0xcb);
        EXPECT(gbc.readMem(0x8614), 0xe6);
        EXPECT(gbc.readMem(0xad28), 0xbf);
        // CB E6 01FF
        gbc.setState(0x7682, 0x15e4, 0xdb90, 0xb0be, 0xf7d9, 0x864f, 0x1, 0x0);
        gbc.writeMem(0x7682, { 0xcb, 0xe6 });
        gbc.writeMem(0x864f, { 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x15e4);
        EXPECT(gbc.pc(), 0x7684);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x864f), 0x1f);
        // CB E6 0200
        gbc.setState(0x7b62, 0x3127, 0x45a0, 0x39e6, 0xe0ad, 0xf700, 0x0, 0x1);
        gbc.writeMem(0x7b62, { 0xcb, 0xe6 });
        gbc.writeMem(0xf700, { 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x3127);
        EXPECT(gbc.pc(), 0x7b64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf700), 0x71);
        // CB E6 0201
        gbc.setState(0x357b, 0x344c, 0x7a0, 0x73ed, 0xb8a6, 0x61f7, 0x0, 0x0);
        gbc.writeMem(0x357b, { 0xcb, 0xe6 });
        gbc.writeMem(0x61f7, { 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x344c);
        EXPECT(gbc.pc(), 0x357d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E6 0202
        gbc.setState(0x43d, 0x72ee, 0x1db0, 0x153b, 0x82bc, 0x9e62, 0x1, 0x0);
        gbc.writeMem(0x43d, { 0xcb, 0xe6 });
        gbc.writeMem(0x9e62, { 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x72ee);
        EXPECT(gbc.pc(), 0x43f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e62), 0xf0);
        // CB E6 0204
        gbc.setState(0x74fb, 0xe353, 0xab50, 0xd4c0, 0x1f69, 0xf528, 0x0, 0x0);
        gbc.writeMem(0x74fb, { 0xcb, 0xe6 });
        gbc.writeMem(0xf528, { 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xe353);
        EXPECT(gbc.pc(), 0x74fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf528), 0x7d);
        // CB E6 0205
        gbc.setState(0x7add, 0xd8ea, 0x7220, 0x2171, 0xb010, 0xd781, 0x1, 0x0);
        gbc.writeMem(0x7add, { 0xcb, 0xe6 });
        gbc.writeMem(0xd781, { 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xd8ea);
        EXPECT(gbc.pc(), 0x7adf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd781), 0x79);
        // CB E6 0206
        gbc.setState(0x18f9, 0x8b61, 0x3860, 0xdbc2, 0x89d0, 0x250d, 0x0, 0x0);
        gbc.writeMem(0x18f9, { 0xcb, 0xe6 });
        gbc.writeMem(0x250d, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x8b61);
        EXPECT(gbc.pc(), 0x18fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E6 0207
        gbc.setState(0xd3c, 0xfc7b, 0x9540, 0xdb9e, 0xdf6, 0xd853, 0x0, 0x0);
        gbc.writeMem(0xd3c, { 0xcb, 0xe6 });
        gbc.writeMem(0xd853, { 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xfc7b);
        EXPECT(gbc.pc(), 0xd3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd853), 0x7f);
        // CB E6 0208
        gbc.setState(0x77fd, 0x41b9, 0xf720, 0x7e77, 0x2643, 0xcca1, 0x0, 0x0);
        gbc.writeMem(0x77fd, { 0xcb, 0xe6 });
        gbc.writeMem(0xcca1, { 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x41b9);
        EXPECT(gbc.pc(), 0x77ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcca1), 0xd0);
        // CB E6 0209
        gbc.setState(0x58a9, 0x87bf, 0x1550, 0x4366, 0x9560, 0x4398, 0x0, 0x0);
        gbc.writeMem(0x4398, { 0x71 });
        gbc.writeMem(0x58a9, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x87bf);
        EXPECT(gbc.pc(), 0x58ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E6 020B
        gbc.setState(0x39a8, 0x9294, 0x4790, 0xc4ef, 0x9555, 0xd9b2, 0x0, 0x1);
        gbc.writeMem(0x39a8, { 0xcb, 0xe6 });
        gbc.writeMem(0xd9b2, { 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x9294);
        EXPECT(gbc.pc(), 0x39aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9b2), 0x51);
        // CB E6 020C
        gbc.setState(0x3b76, 0x6b16, 0xdf0, 0xc4fe, 0x5450, 0x828b, 0x1, 0x0);
        gbc.writeMem(0x3b76, { 0xcb, 0xe6 });
        gbc.writeMem(0x828b, { 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x6b16);
        EXPECT(gbc.pc(), 0x3b78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x828b), 0xbc);
        // CB E6 020D
        gbc.setState(0x460c, 0x128d, 0x3eb0, 0x5c80, 0x738b, 0x8280, 0x0, 0x0);
        gbc.writeMem(0x460c, { 0xcb, 0xe6 });
        gbc.writeMem(0x8280, { 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x128d);
        EXPECT(gbc.pc(), 0x460e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8280), 0x13);
        // CB E6 0210
        gbc.setState(0x5dd3, 0x5f7, 0x8830, 0xbdf8, 0x8146, 0x95f6, 0x0, 0x1);
        gbc.writeMem(0x5dd3, { 0xcb, 0xe6 });
        gbc.writeMem(0x95f6, { 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x5f7);
        EXPECT(gbc.pc(), 0x5dd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95f6), 0x92);
        // CB E6 0212
        gbc.setState(0x201, 0xc65, 0x4ce0, 0xc972, 0xeec7, 0x979d, 0x1, 0x1);
        gbc.writeMem(0x201, { 0xcb, 0xe6 });
        gbc.writeMem(0x979d, { 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xc65);
        EXPECT(gbc.pc(), 0x203);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x979d), 0x3c);
        // CB E6 0213
        gbc.setState(0xe5d9, 0x4c54, 0x1cd0, 0x26b, 0x59bb, 0xb2a6, 0x0, 0x1);
        gbc.writeMem(0xb2a6, { 0x62 });
        gbc.writeMem(0xe5d9, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x4c54);
        EXPECT(gbc.pc(), 0xe5db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2a6), 0x72);
        EXPECT(gbc.readMem(0xe5d9), 0xcb);
        EXPECT(gbc.readMem(0xe5da), 0xe6);
        // CB E6 0216
        gbc.setState(0x5895, 0x9cb7, 0xdff0, 0x856d, 0xc814, 0xf97e, 0x1, 0x1);
        gbc.writeMem(0x5895, { 0xcb, 0xe6 });
        gbc.writeMem(0xf97e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x9cb7);
        EXPECT(gbc.pc(), 0x5897);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf97e), 0xb4);
        // CB E6 0217
        gbc.setState(0xb7b8, 0x81d5, 0xfc70, 0x9d65, 0x38a9, 0xea21, 0x0, 0x1);
        gbc.writeMem(0xb7b8, { 0xcb, 0xe6 });
        gbc.writeMem(0xea21, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x81d5);
        EXPECT(gbc.pc(), 0xb7ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7b8), 0xcb);
        EXPECT(gbc.readMem(0xb7b9), 0xe6);
        EXPECT(gbc.readMem(0xea21), 0x57);
        // CB E6 0219
        gbc.setState(0x15f7, 0x94a9, 0xb410, 0xd62e, 0x5663, 0xfe20, 0x0, 0x0);
        gbc.writeMem(0x15f7, { 0xcb, 0xe6 });
        gbc.writeMem(0xfe20, { 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x94a9);
        EXPECT(gbc.pc(), 0x15f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfe20), 0xba);
        // CB E6 021A
        gbc.setState(0x9d7b, 0x7bd0, 0x9b30, 0x48bc, 0xcbdc, 0x851e, 0x0, 0x0);
        gbc.writeMem(0x851e, { 0x66 });
        gbc.writeMem(0x9d7b, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x7bd0);
        EXPECT(gbc.pc(), 0x9d7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x851e), 0x76);
        EXPECT(gbc.readMem(0x9d7b), 0xcb);
        EXPECT(gbc.readMem(0x9d7c), 0xe6);
        // CB E6 021B
        gbc.setState(0xabd9, 0xe927, 0xed70, 0x2a97, 0xffac, 0x8dcc, 0x0, 0x1);
        gbc.writeMem(0x8dcc, { 0x4 });
        gbc.writeMem(0xabd9, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xe927);
        EXPECT(gbc.pc(), 0xabdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dcc), 0x14);
        EXPECT(gbc.readMem(0xabd9), 0xcb);
        EXPECT(gbc.readMem(0xabda), 0xe6);
        // CB E6 021C
        gbc.setState(0x518c, 0xd178, 0xb020, 0xb2f9, 0xf120, 0x80af, 0x0, 0x0);
        gbc.writeMem(0x518c, { 0xcb, 0xe6 });
        gbc.writeMem(0x80af, { 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xd178);
        EXPECT(gbc.pc(), 0x518e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80af), 0x1e);
        // CB E6 021D
        gbc.setState(0xe079, 0xbaa7, 0xc5e0, 0x5846, 0xe9d3, 0xd324, 0x1, 0x0);
        gbc.writeMem(0xd324, { 0xec });
        gbc.writeMem(0xe079, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xbaa7);
        EXPECT(gbc.pc(), 0xe07b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd324), 0xfc);
        EXPECT(gbc.readMem(0xe079), 0xcb);
        EXPECT(gbc.readMem(0xe07a), 0xe6);
        // CB E6 021E
        gbc.setState(0x9c66, 0xbf25, 0xcb10, 0x703b, 0x1a8a, 0x8248, 0x0, 0x0);
        gbc.writeMem(0x8248, { 0x4e });
        gbc.writeMem(0x9c66, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xbf25);
        EXPECT(gbc.pc(), 0x9c68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8248), 0x5e);
        EXPECT(gbc.readMem(0x9c66), 0xcb);
        EXPECT(gbc.readMem(0x9c67), 0xe6);
        // CB E6 021F
        gbc.setState(0x3426, 0x8c70, 0xd950, 0xbf70, 0xba23, 0x4468, 0x0, 0x1);
        gbc.writeMem(0x3426, { 0xcb, 0xe6 });
        gbc.writeMem(0x4468, { 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x8c70);
        EXPECT(gbc.pc(), 0x3428);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E6 0220
        gbc.setState(0x3032, 0xcd34, 0x7080, 0xa82c, 0x3d72, 0x9c32, 0x1, 0x0);
        gbc.writeMem(0x3032, { 0xcb, 0xe6 });
        gbc.writeMem(0x9c32, { 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xcd34);
        EXPECT(gbc.pc(), 0x3034);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c32), 0x18);
        // CB E6 0221
        gbc.setState(0x5ec6, 0x6d0e, 0xa1e0, 0xa6cb, 0x47e0, 0xfb53, 0x1, 0x0);
        gbc.writeMem(0x5ec6, { 0xcb, 0xe6 });
        gbc.writeMem(0xfb53, { 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x6d0e);
        EXPECT(gbc.pc(), 0x5ec8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfb53), 0xf3);
        // CB E6 0222
        gbc.setState(0xbc8a, 0x85cc, 0xf4c0, 0x9340, 0x216a, 0xe7e4, 0x1, 0x1);
        gbc.writeMem(0xbc8a, { 0xcb, 0xe6 });
        gbc.writeMem(0xe7e4, { 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x85cc);
        EXPECT(gbc.pc(), 0xbc8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc8a), 0xcb);
        EXPECT(gbc.readMem(0xbc8b), 0xe6);
        EXPECT(gbc.readMem(0xe7e4), 0xf6);
        // CB E6 0224
        gbc.setState(0xdc06, 0x4749, 0xe2e0, 0x1238, 0x5555, 0x85a7, 0x1, 0x0);
        gbc.writeMem(0x85a7, { 0xcf });
        gbc.writeMem(0xdc06, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x4749);
        EXPECT(gbc.pc(), 0xdc08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85a7), 0xdf);
        EXPECT(gbc.readMem(0xdc06), 0xcb);
        EXPECT(gbc.readMem(0xdc07), 0xe6);
        // CB E6 0225
        gbc.setState(0xb6b5, 0x2f4f, 0x28a0, 0x9856, 0xb0d1, 0x876e, 0x0, 0x0);
        gbc.writeMem(0x876e, { 0x24 });
        gbc.writeMem(0xb6b5, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x2f4f);
        EXPECT(gbc.pc(), 0xb6b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x876e), 0x34);
        EXPECT(gbc.readMem(0xb6b5), 0xcb);
        EXPECT(gbc.readMem(0xb6b6), 0xe6);
        // CB E6 0226
        gbc.setState(0xa9a1, 0xc400, 0xb330, 0xd1a5, 0xcbcd, 0x1736, 0x1, 0x0);
        gbc.writeMem(0x1736, { 0xdb });
        gbc.writeMem(0xa9a1, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xc400);
        EXPECT(gbc.pc(), 0xa9a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9a1), 0xcb);
        EXPECT(gbc.readMem(0xa9a2), 0xe6);
        // CB E6 0227
        gbc.setState(0x171a, 0xa372, 0xae40, 0xc76e, 0xeb43, 0x7a72, 0x0, 0x1);
        gbc.writeMem(0x171a, { 0xcb, 0xe6 });
        gbc.writeMem(0x7a72, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xa372);
        EXPECT(gbc.pc(), 0x171c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E6 0228
        gbc.setState(0x69f1, 0x66ef, 0x99c0, 0x2ec1, 0x1e3c, 0x7d3f, 0x1, 0x0);
        gbc.writeMem(0x69f1, { 0xcb, 0xe6 });
        gbc.writeMem(0x7d3f, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x66ef);
        EXPECT(gbc.pc(), 0x69f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E6 0229
        gbc.setState(0x1f50, 0x68ac, 0x7760, 0x4c73, 0xf30d, 0xaa62, 0x1, 0x0);
        gbc.writeMem(0x1f50, { 0xcb, 0xe6 });
        gbc.writeMem(0xaa62, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x68ac);
        EXPECT(gbc.pc(), 0x1f52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa62), 0x73);
        // CB E6 022A
        gbc.setState(0x425c, 0x8566, 0x52a0, 0xc25c, 0x61ba, 0xe0ad, 0x0, 0x0);
        gbc.writeMem(0x425c, { 0xcb, 0xe6 });
        gbc.writeMem(0xe0ad, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x8566);
        EXPECT(gbc.pc(), 0x425e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0ad), 0x5c);
        // CB E6 022C
        gbc.setState(0x151e, 0xdb0f, 0x29d0, 0xef8, 0xa1f4, 0x162a, 0x0, 0x0);
        gbc.writeMem(0x151e, { 0xcb, 0xe6 });
        gbc.writeMem(0x162a, { 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xdb0f);
        EXPECT(gbc.pc(), 0x1520);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E6 022D
        gbc.setState(0x747f, 0x7059, 0xbe50, 0x835b, 0x2a4b, 0xcc8a, 0x1, 0x0);
        gbc.writeMem(0x747f, { 0xcb, 0xe6 });
        gbc.writeMem(0xcc8a, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x7059);
        EXPECT(gbc.pc(), 0x7481);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc8a), 0x3a);
        // CB E6 022E
        gbc.setState(0x7119, 0xbe7b, 0xb860, 0xe147, 0x31b3, 0x34ff, 0x0, 0x0);
        gbc.writeMem(0x34ff, { 0xda });
        gbc.writeMem(0x7119, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xbe7b);
        EXPECT(gbc.pc(), 0x711b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E6 0230
        gbc.setState(0x304e, 0x3e54, 0xb610, 0xe21c, 0x1015, 0xe8e9, 0x0, 0x0);
        gbc.writeMem(0x304e, { 0xcb, 0xe6 });
        gbc.writeMem(0xe8e9, { 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x3e54);
        EXPECT(gbc.pc(), 0x3050);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8e9), 0x56);
        // CB E6 0231
        gbc.setState(0xd52, 0x1ece, 0xf680, 0xf36, 0x4620, 0x9c7e, 0x1, 0x0);
        gbc.writeMem(0xd52, { 0xcb, 0xe6 });
        gbc.writeMem(0x9c7e, { 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x1ece);
        EXPECT(gbc.pc(), 0xd54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c7e), 0x3e);
        // CB E6 0233
        gbc.setState(0xb1cd, 0x63fe, 0x2e90, 0x569d, 0x8a4d, 0x9338, 0x1, 0x0);
        gbc.writeMem(0x9338, { 0x16 });
        gbc.writeMem(0xb1cd, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x63fe);
        EXPECT(gbc.pc(), 0xb1cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9338), 0x16);
        EXPECT(gbc.readMem(0xb1cd), 0xcb);
        EXPECT(gbc.readMem(0xb1ce), 0xe6);
        // CB E6 0234
        gbc.setState(0x2761, 0xa926, 0x3bf0, 0x19f6, 0xb805, 0x7e95, 0x0, 0x1);
        gbc.writeMem(0x2761, { 0xcb, 0xe6 });
        gbc.writeMem(0x7e95, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xa926);
        EXPECT(gbc.pc(), 0x2763);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 0235
        gbc.setState(0xc00a, 0x323c, 0x3760, 0xc424, 0x6b00, 0xc9a7, 0x0, 0x1);
        gbc.writeMem(0xc00a, { 0xcb, 0xe6 });
        gbc.writeMem(0xc9a7, { 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x323c);
        EXPECT(gbc.pc(), 0xc00c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc00a), 0xcb);
        EXPECT(gbc.readMem(0xc00b), 0xe6);
        EXPECT(gbc.readMem(0xc9a7), 0xbc);
        // CB E6 0236
        gbc.setState(0x9c7c, 0xb358, 0x1490, 0xfeb0, 0x39c3, 0x9057, 0x0, 0x1);
        gbc.writeMem(0x9057, { 0x79 });
        gbc.writeMem(0x9c7c, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xb358);
        EXPECT(gbc.pc(), 0x9c7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9057), 0x79);
        EXPECT(gbc.readMem(0x9c7c), 0xcb);
        EXPECT(gbc.readMem(0x9c7d), 0xe6);
        // CB E6 0237
        gbc.setState(0x7af9, 0x3442, 0xe590, 0x55e4, 0x561d, 0xcf05, 0x1, 0x1);
        gbc.writeMem(0x7af9, { 0xcb, 0xe6 });
        gbc.writeMem(0xcf05, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x3442);
        EXPECT(gbc.pc(), 0x7afb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf05), 0xf9);
        // CB E6 0238
        gbc.setState(0x49fd, 0xe385, 0xd5c0, 0x3c09, 0x1bfe, 0xc71d, 0x1, 0x0);
        gbc.writeMem(0x49fd, { 0xcb, 0xe6 });
        gbc.writeMem(0xc71d, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xe385);
        EXPECT(gbc.pc(), 0x49ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc71d), 0x54);
        // CB E6 023A
        gbc.setState(0xc21a, 0x365c, 0x5ff0, 0x5b67, 0x4611, 0x9652, 0x0, 0x1);
        gbc.writeMem(0x9652, { 0x59 });
        gbc.writeMem(0xc21a, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x365c);
        EXPECT(gbc.pc(), 0xc21c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9652), 0x59);
        EXPECT(gbc.readMem(0xc21a), 0xcb);
        EXPECT(gbc.readMem(0xc21b), 0xe6);
        // CB E6 023B
        gbc.setState(0x916a, 0xca20, 0xbd50, 0xe2bb, 0xb69d, 0x1aea, 0x0, 0x0);
        gbc.writeMem(0x1aea, { 0x1e });
        gbc.writeMem(0x916a, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xca20);
        EXPECT(gbc.pc(), 0x916c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x916a), 0xcb);
        EXPECT(gbc.readMem(0x916b), 0xe6);
        // CB E6 023C
        gbc.setState(0x214e, 0x20c4, 0x49b0, 0x356d, 0x44e1, 0xc535, 0x0, 0x1);
        gbc.writeMem(0x214e, { 0xcb, 0xe6 });
        gbc.writeMem(0xc535, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x20c4);
        EXPECT(gbc.pc(), 0x2150);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc535), 0xb3);
        // CB E6 023E
        gbc.setState(0x231, 0x8874, 0xa2b0, 0x8722, 0x2431, 0x1ad3, 0x0, 0x1);
        gbc.writeMem(0x231, { 0xcb, 0xe6 });
        gbc.writeMem(0x1ad3, { 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x8874);
        EXPECT(gbc.pc(), 0x233);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 0240
        gbc.setState(0xe0b2, 0xb999, 0x7b30, 0xd43c, 0x83e6, 0x3fd9, 0x0, 0x1);
        gbc.writeMem(0x3fd9, { 0xb9 });
        gbc.writeMem(0xe0b2, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xb999);
        EXPECT(gbc.pc(), 0xe0b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0b2), 0xcb);
        EXPECT(gbc.readMem(0xe0b3), 0xe6);
        // CB E6 0241
        gbc.setState(0x994, 0x1ade, 0x7f40, 0x90d6, 0x69b4, 0x6317, 0x1, 0x1);
        gbc.writeMem(0x994, { 0xcb, 0xe6 });
        gbc.writeMem(0x6317, { 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x1ade);
        EXPECT(gbc.pc(), 0x996);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E6 0243
        gbc.setState(0x4421, 0x8d18, 0xf8d0, 0x84c9, 0xd017, 0x60bf, 0x0, 0x0);
        gbc.writeMem(0x4421, { 0xcb, 0xe6 });
        gbc.writeMem(0x60bf, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x8d18);
        EXPECT(gbc.pc(), 0x4423);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E6 0244
        gbc.setState(0xa2be, 0xf10c, 0x1b20, 0xb442, 0x75d8, 0xeff8, 0x0, 0x0);
        gbc.writeMem(0xa2be, { 0xcb, 0xe6 });
        gbc.writeMem(0xeff8, { 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xf10c);
        EXPECT(gbc.pc(), 0xa2c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2be), 0xcb);
        EXPECT(gbc.readMem(0xa2bf), 0xe6);
        EXPECT(gbc.readMem(0xeff8), 0x3d);
        // CB E6 0245
        gbc.setState(0xcae8, 0xa798, 0xa930, 0x131f, 0x33c5, 0x4719, 0x1, 0x0);
        gbc.writeMem(0x4719, { 0xbb });
        gbc.writeMem(0xcae8, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xa798);
        EXPECT(gbc.pc(), 0xcaea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcae8), 0xcb);
        EXPECT(gbc.readMem(0xcae9), 0xe6);
        // CB E6 0246
        gbc.setState(0xe9a0, 0xabd3, 0xca70, 0x42a8, 0x3027, 0x3ec, 0x0, 0x1);
        gbc.writeMem(0x3ec, { 0x52 });
        gbc.writeMem(0xe9a0, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xabd3);
        EXPECT(gbc.pc(), 0xe9a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9a0), 0xcb);
        EXPECT(gbc.readMem(0xe9a1), 0xe6);
        // CB E6 0249
        gbc.setState(0x62b1, 0x4a27, 0x2ca0, 0xf4c7, 0xf3f9, 0x4da5, 0x1, 0x1);
        gbc.writeMem(0x4da5, { 0x55 });
        gbc.writeMem(0x62b1, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x4a27);
        EXPECT(gbc.pc(), 0x62b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E6 024A
        gbc.setState(0xefc4, 0x4aca, 0x9140, 0x5dd1, 0xbfa3, 0x566f, 0x1, 0x1);
        gbc.writeMem(0x566f, { 0xf8 });
        gbc.writeMem(0xefc4, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x4aca);
        EXPECT(gbc.pc(), 0xefc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefc4), 0xcb);
        EXPECT(gbc.readMem(0xefc5), 0xe6);
        // CB E6 024B
        gbc.setState(0xe988, 0xc3ba, 0xac60, 0x43d8, 0x756a, 0xb874, 0x0, 0x1);
        gbc.writeMem(0xb874, { 0x28 });
        gbc.writeMem(0xe988, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xc3ba);
        EXPECT(gbc.pc(), 0xe98a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb874), 0x38);
        EXPECT(gbc.readMem(0xe988), 0xcb);
        EXPECT(gbc.readMem(0xe989), 0xe6);
        // CB E6 024C
        gbc.setState(0xad34, 0x8a48, 0x7ec0, 0xfbd9, 0x9eb0, 0xc631, 0x1, 0x0);
        gbc.writeMem(0xad34, { 0xcb, 0xe6 });
        gbc.writeMem(0xc631, { 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x8a48);
        EXPECT(gbc.pc(), 0xad36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad34), 0xcb);
        EXPECT(gbc.readMem(0xad35), 0xe6);
        EXPECT(gbc.readMem(0xc631), 0x74);
        // CB E6 024F
        gbc.setState(0xe7f3, 0x6fa9, 0x22f0, 0xf08f, 0xc845, 0xb8db, 0x0, 0x0);
        gbc.writeMem(0xb8db, { 0xef });
        gbc.writeMem(0xe7f3, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x6fa9);
        EXPECT(gbc.pc(), 0xe7f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8db), 0xff);
        EXPECT(gbc.readMem(0xe7f3), 0xcb);
        EXPECT(gbc.readMem(0xe7f4), 0xe6);
        // CB E6 0250
        gbc.setState(0x22e, 0xddac, 0x11e0, 0x98ab, 0xbb6, 0x6123, 0x0, 0x1);
        gbc.writeMem(0x22e, { 0xcb, 0xe6 });
        gbc.writeMem(0x6123, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xddac);
        EXPECT(gbc.pc(), 0x230);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E6 0251
        gbc.setState(0x6f4e, 0xef7, 0x5310, 0xc834, 0x30c2, 0x940b, 0x0, 0x0);
        gbc.writeMem(0x6f4e, { 0xcb, 0xe6 });
        gbc.writeMem(0x940b, { 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xef7);
        EXPECT(gbc.pc(), 0x6f50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x940b), 0x77);
        // CB E6 0252
        gbc.setState(0x7a9a, 0x589a, 0x3ce0, 0xbb90, 0x856c, 0xdab3, 0x1, 0x1);
        gbc.writeMem(0x7a9a, { 0xcb, 0xe6 });
        gbc.writeMem(0xdab3, { 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x589a);
        EXPECT(gbc.pc(), 0x7a9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdab3), 0xf2);
        // CB E6 0253
        gbc.setState(0x9f1, 0x2ca2, 0xd3a0, 0xe6fc, 0x35df, 0xce36, 0x0, 0x1);
        gbc.writeMem(0x9f1, { 0xcb, 0xe6 });
        gbc.writeMem(0xce36, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x2ca2);
        EXPECT(gbc.pc(), 0x9f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce36), 0xd6);
        // CB E6 0254
        gbc.setState(0x2eea, 0xd4f2, 0x8170, 0x4a95, 0x528e, 0x9205, 0x1, 0x0);
        gbc.writeMem(0x2eea, { 0xcb, 0xe6 });
        gbc.writeMem(0x9205, { 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xd4f2);
        EXPECT(gbc.pc(), 0x2eec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9205), 0x7e);
        // CB E6 0255
        gbc.setState(0xc50d, 0x4663, 0xad0, 0xe767, 0xf01f, 0xf2c7, 0x1, 0x1);
        gbc.writeMem(0xc50d, { 0xcb, 0xe6 });
        gbc.writeMem(0xf2c7, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x4663);
        EXPECT(gbc.pc(), 0xc50f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc50d), 0xcb);
        EXPECT(gbc.readMem(0xc50e), 0xe6);
        EXPECT(gbc.readMem(0xf2c7), 0x10);
        // CB E6 0256
        gbc.setState(0x8a4b, 0x410d, 0xaf10, 0xcb34, 0x8006, 0x4d3f, 0x0, 0x0);
        gbc.writeMem(0x4d3f, { 0x9c });
        gbc.writeMem(0x8a4b, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x410d);
        EXPECT(gbc.pc(), 0x8a4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a4b), 0xcb);
        EXPECT(gbc.readMem(0x8a4c), 0xe6);
        // CB E6 0258
        gbc.setState(0xcfc0, 0x1bab, 0xa1c0, 0xf379, 0x9048, 0x73ea, 0x0, 0x0);
        gbc.writeMem(0x73ea, { 0xfc });
        gbc.writeMem(0xcfc0, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x1bab);
        EXPECT(gbc.pc(), 0xcfc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfc0), 0xcb);
        EXPECT(gbc.readMem(0xcfc1), 0xe6);
        // CB E6 0259
        gbc.setState(0x4434, 0x4f9c, 0xb8a0, 0x9b43, 0xa29b, 0x68b4, 0x0, 0x1);
        gbc.writeMem(0x4434, { 0xcb, 0xe6 });
        gbc.writeMem(0x68b4, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x4f9c);
        EXPECT(gbc.pc(), 0x4436);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E6 025A
        gbc.setState(0x9bf0, 0x40ee, 0x73a0, 0xd8c8, 0x4a31, 0xa723, 0x1, 0x0);
        gbc.writeMem(0x9bf0, { 0xcb, 0xe6 });
        gbc.writeMem(0xa723, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x40ee);
        EXPECT(gbc.pc(), 0x9bf2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bf0), 0xcb);
        EXPECT(gbc.readMem(0x9bf1), 0xe6);
        EXPECT(gbc.readMem(0xa723), 0xb2);
        // CB E6 025B
        gbc.setState(0x1e3e, 0x4bf8, 0xf540, 0x828c, 0xa15b, 0xe434, 0x1, 0x1);
        gbc.writeMem(0x1e3e, { 0xcb, 0xe6 });
        gbc.writeMem(0xe434, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x4bf8);
        EXPECT(gbc.pc(), 0x1e40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe434), 0x1b);
        // CB E6 025C
        gbc.setState(0x61da, 0x4102, 0xeec0, 0xc63c, 0xd40f, 0xfe81, 0x0, 0x1);
        gbc.writeMem(0x61da, { 0xcb, 0xe6 });
        gbc.writeMem(0xfe81, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x4102);
        EXPECT(gbc.pc(), 0x61dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfe81), 0x96);
        // CB E6 025D
        gbc.setState(0xc6ec, 0x13fc, 0xcfa0, 0x9704, 0xd445, 0x5f68, 0x1, 0x0);
        gbc.writeMem(0x5f68, { 0xd1 });
        gbc.writeMem(0xc6ec, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x13fc);
        EXPECT(gbc.pc(), 0xc6ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6ec), 0xcb);
        EXPECT(gbc.readMem(0xc6ed), 0xe6);
        // CB E6 025E
        gbc.setState(0xcbff, 0xd195, 0x2e00, 0x1d44, 0x4006, 0xe67b, 0x0, 0x0);
        gbc.writeMem(0xcbff, { 0xcb, 0xe6 });
        gbc.writeMem(0xe67b, { 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xd195);
        EXPECT(gbc.pc(), 0xcc01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbff), 0xcb);
        EXPECT(gbc.readMem(0xcc00), 0xe6);
        EXPECT(gbc.readMem(0xe67b), 0xd4);
        // CB E6 025F
        gbc.setState(0xe0a1, 0x36e8, 0xb10, 0x5880, 0xce1d, 0x6de0, 0x1, 0x1);
        gbc.writeMem(0x6de0, { 0x94 });
        gbc.writeMem(0xe0a1, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x36e8);
        EXPECT(gbc.pc(), 0xe0a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0a1), 0xcb);
        EXPECT(gbc.readMem(0xe0a2), 0xe6);
        // CB E6 0262
        gbc.setState(0x1c89, 0x1c04, 0x5ec0, 0x55f, 0x4971, 0x4bb3, 0x0, 0x1);
        gbc.writeMem(0x1c89, { 0xcb, 0xe6 });
        gbc.writeMem(0x4bb3, { 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x1c04);
        EXPECT(gbc.pc(), 0x1c8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E6 0264
        gbc.setState(0x4941, 0x17a, 0xfce0, 0x344, 0xcbb9, 0x8de2, 0x0, 0x1);
        gbc.writeMem(0x4941, { 0xcb, 0xe6 });
        gbc.writeMem(0x8de2, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x17a);
        EXPECT(gbc.pc(), 0x4943);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8de2), 0x3a);
        // CB E6 0265
        gbc.setState(0xb9ef, 0x7966, 0xc240, 0xb7bb, 0xdb3, 0x175d, 0x1, 0x0);
        gbc.writeMem(0x175d, { 0xf1 });
        gbc.writeMem(0xb9ef, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x7966);
        EXPECT(gbc.pc(), 0xb9f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9ef), 0xcb);
        EXPECT(gbc.readMem(0xb9f0), 0xe6);
        // CB E6 0266
        gbc.setState(0x992b, 0xa09e, 0xcec0, 0x8e19, 0xa7ba, 0xb4e9, 0x0, 0x1);
        gbc.writeMem(0x992b, { 0xcb, 0xe6 });
        gbc.writeMem(0xb4e9, { 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xa09e);
        EXPECT(gbc.pc(), 0x992d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x992b), 0xcb);
        EXPECT(gbc.readMem(0x992c), 0xe6);
        EXPECT(gbc.readMem(0xb4e9), 0x99);
        // CB E6 026A
        gbc.setState(0xe0ba, 0x670f, 0x62c0, 0xbf62, 0x44f3, 0x9fd0, 0x1, 0x1);
        gbc.writeMem(0x9fd0, { 0xfe });
        gbc.writeMem(0xe0ba, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x670f);
        EXPECT(gbc.pc(), 0xe0bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fd0), 0xfe);
        EXPECT(gbc.readMem(0xe0ba), 0xcb);
        EXPECT(gbc.readMem(0xe0bb), 0xe6);
        // CB E6 026B
        gbc.setState(0xbb38, 0xcab2, 0x1ee0, 0xe407, 0x9769, 0x523a, 0x0, 0x1);
        gbc.writeMem(0x523a, { 0xde });
        gbc.writeMem(0xbb38, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xcab2);
        EXPECT(gbc.pc(), 0xbb3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb38), 0xcb);
        EXPECT(gbc.readMem(0xbb39), 0xe6);
        // CB E6 026D
        gbc.setState(0x80f5, 0xb244, 0x9940, 0xf69, 0x8293, 0x9caf, 0x1, 0x0);
        gbc.writeMem(0x80f5, { 0xcb, 0xe6 });
        gbc.writeMem(0x9caf, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xb244);
        EXPECT(gbc.pc(), 0x80f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80f5), 0xcb);
        EXPECT(gbc.readMem(0x80f6), 0xe6);
        EXPECT(gbc.readMem(0x9caf), 0xb3);
        // CB E6 026E
        gbc.setState(0xd22d, 0xa7b9, 0x27b0, 0x4a30, 0xfb41, 0x732e, 0x0, 0x1);
        gbc.writeMem(0x732e, { 0xd2 });
        gbc.writeMem(0xd22d, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xa7b9);
        EXPECT(gbc.pc(), 0xd22f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd22d), 0xcb);
        EXPECT(gbc.readMem(0xd22e), 0xe6);
        // CB E6 026F
        gbc.setState(0xade7, 0xadb7, 0x79a0, 0x2b78, 0x1a5d, 0xbab9, 0x0, 0x0);
        gbc.writeMem(0xade7, { 0xcb, 0xe6 });
        gbc.writeMem(0xbab9, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xadb7);
        EXPECT(gbc.pc(), 0xade9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xade7), 0xcb);
        EXPECT(gbc.readMem(0xade8), 0xe6);
        EXPECT(gbc.readMem(0xbab9), 0x54);
        // CB E6 0271
        gbc.setState(0x5ed, 0x3e0b, 0xd620, 0xc2f5, 0x688, 0xdccf, 0x0, 0x1);
        gbc.writeMem(0x5ed, { 0xcb, 0xe6 });
        gbc.writeMem(0xdccf, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x3e0b);
        EXPECT(gbc.pc(), 0x5ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdccf), 0x5a);
        // CB E6 0272
        gbc.setState(0x544c, 0x6d04, 0x93e0, 0x2b32, 0x8139, 0xfdf3, 0x0, 0x0);
        gbc.writeMem(0x544c, { 0xcb, 0xe6 });
        gbc.writeMem(0xfdf3, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x6d04);
        EXPECT(gbc.pc(), 0x544e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfdf3), 0xb6);
        // CB E6 0273
        gbc.setState(0x69d6, 0x42fb, 0x4630, 0x1579, 0x6ea2, 0xa76d, 0x0, 0x1);
        gbc.writeMem(0x69d6, { 0xcb, 0xe6 });
        gbc.writeMem(0xa76d, { 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x42fb);
        EXPECT(gbc.pc(), 0x69d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa76d), 0x3c);
        // CB E6 0274
        gbc.setState(0x6799, 0x2f81, 0x62e0, 0xd059, 0xdd62, 0xafd3, 0x1, 0x1);
        gbc.writeMem(0x6799, { 0xcb, 0xe6 });
        gbc.writeMem(0xafd3, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x2f81);
        EXPECT(gbc.pc(), 0x679b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafd3), 0xb2);
        // CB E6 0276
        gbc.setState(0x7866, 0x3a7d, 0x1c70, 0xcd7c, 0xbc7e, 0x22a1, 0x0, 0x0);
        gbc.writeMem(0x22a1, { 0x74 });
        gbc.writeMem(0x7866, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x3a7d);
        EXPECT(gbc.pc(), 0x7868);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 0277
        gbc.setState(0x3c4, 0x7c06, 0x3da0, 0xf0ae, 0xfdc, 0x46e2, 0x1, 0x1);
        gbc.writeMem(0x3c4, { 0xcb, 0xe6 });
        gbc.writeMem(0x46e2, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x7c06);
        EXPECT(gbc.pc(), 0x3c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E6 0279
        gbc.setState(0x8d45, 0xa562, 0xc400, 0xc03d, 0x348c, 0x4bfc, 0x0, 0x1);
        gbc.writeMem(0x4bfc, { 0xb5 });
        gbc.writeMem(0x8d45, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xa562);
        EXPECT(gbc.pc(), 0x8d47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d45), 0xcb);
        EXPECT(gbc.readMem(0x8d46), 0xe6);
        // CB E6 027A
        gbc.setState(0x8e76, 0x1126, 0x7d60, 0xa9cb, 0xf9e1, 0x871c, 0x1, 0x1);
        gbc.writeMem(0x871c, { 0x69 });
        gbc.writeMem(0x8e76, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x1126);
        EXPECT(gbc.pc(), 0x8e78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x871c), 0x79);
        EXPECT(gbc.readMem(0x8e76), 0xcb);
        EXPECT(gbc.readMem(0x8e77), 0xe6);
        // CB E6 027B
        gbc.setState(0x8ebb, 0xf0b7, 0xe9c0, 0x6c92, 0x42ea, 0xf69b, 0x0, 0x1);
        gbc.writeMem(0x8ebb, { 0xcb, 0xe6 });
        gbc.writeMem(0xf69b, { 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xf0b7);
        EXPECT(gbc.pc(), 0x8ebd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ebb), 0xcb);
        EXPECT(gbc.readMem(0x8ebc), 0xe6);
        EXPECT(gbc.readMem(0xf69b), 0x31);
        // CB E6 027C
        gbc.setState(0x1197, 0xf5e7, 0x3f70, 0x343e, 0x8966, 0xf4fe, 0x0, 0x1);
        gbc.writeMem(0x1197, { 0xcb, 0xe6 });
        gbc.writeMem(0xf4fe, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xf5e7);
        EXPECT(gbc.pc(), 0x1199);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf4fe), 0x30);
        // CB E6 027D
        gbc.setState(0x69ee, 0x9566, 0x2a30, 0xb2a, 0x306a, 0xd417, 0x0, 0x1);
        gbc.writeMem(0x69ee, { 0xcb, 0xe6 });
        gbc.writeMem(0xd417, { 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x9566);
        EXPECT(gbc.pc(), 0x69f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd417), 0x1a);
        // CB E6 027E
        gbc.setState(0xb007, 0x2bf4, 0x2f40, 0xc9d8, 0x20c6, 0x8073, 0x0, 0x0);
        gbc.writeMem(0x8073, { 0x5c });
        gbc.writeMem(0xb007, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x2bf4);
        EXPECT(gbc.pc(), 0xb009);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8073), 0x5c);
        EXPECT(gbc.readMem(0xb007), 0xcb);
        EXPECT(gbc.readMem(0xb008), 0xe6);
        // CB E6 027F
        gbc.setState(0x7ca, 0xa993, 0x8890, 0x35da, 0x21be, 0xe6a5, 0x0, 0x1);
        gbc.writeMem(0x7ca, { 0xcb, 0xe6 });
        gbc.writeMem(0xe6a5, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xa993);
        EXPECT(gbc.pc(), 0x7cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6a5), 0xff);
        // CB E6 0281
        gbc.setState(0xdafe, 0x2f86, 0xa7b0, 0x17f2, 0x9ee2, 0x9dda, 0x0, 0x0);
        gbc.writeMem(0x9dda, { 0x1c });
        gbc.writeMem(0xdafe, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x2f86);
        EXPECT(gbc.pc(), 0xdb00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dda), 0x1c);
        EXPECT(gbc.readMem(0xdafe), 0xcb);
        EXPECT(gbc.readMem(0xdaff), 0xe6);
        // CB E6 0282
        gbc.setState(0x21b5, 0xcb21, 0x7190, 0x3b65, 0xe385, 0x6f4f, 0x0, 0x1);
        gbc.writeMem(0x21b5, { 0xcb, 0xe6 });
        gbc.writeMem(0x6f4f, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xcb21);
        EXPECT(gbc.pc(), 0x21b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E6 0283
        gbc.setState(0x66b3, 0x4468, 0x8d0, 0xbbcd, 0x3d68, 0x8832, 0x0, 0x1);
        gbc.writeMem(0x66b3, { 0xcb, 0xe6 });
        gbc.writeMem(0x8832, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x4468);
        EXPECT(gbc.pc(), 0x66b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8832), 0x5a);
        // CB E6 0284
        gbc.setState(0xe57e, 0x5bcf, 0x24b0, 0xd3c3, 0xc39e, 0xf707, 0x0, 0x0);
        gbc.writeMem(0xe57e, { 0xcb, 0xe6 });
        gbc.writeMem(0xf707, { 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x5bcf);
        EXPECT(gbc.pc(), 0xe580);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe57e), 0xcb);
        EXPECT(gbc.readMem(0xe57f), 0xe6);
        EXPECT(gbc.readMem(0xf707), 0xd5);
        // CB E6 0285
        gbc.setState(0x32c2, 0x2768, 0xc40, 0x9c14, 0x8517, 0x6bb9, 0x0, 0x1);
        gbc.writeMem(0x32c2, { 0xcb, 0xe6 });
        gbc.writeMem(0x6bb9, { 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x2768);
        EXPECT(gbc.pc(), 0x32c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E6 0286
        gbc.setState(0x8f6d, 0x30bc, 0x6090, 0x2ecb, 0xb5db, 0x15c0, 0x1, 0x1);
        gbc.writeMem(0x15c0, { 0xf8 });
        gbc.writeMem(0x8f6d, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x30bc);
        EXPECT(gbc.pc(), 0x8f6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f6d), 0xcb);
        EXPECT(gbc.readMem(0x8f6e), 0xe6);
        // CB E6 0287
        gbc.setState(0x1394, 0x32f9, 0x8bb0, 0x8db4, 0x5777, 0xc042, 0x0, 0x0);
        gbc.writeMem(0x1394, { 0xcb, 0xe6 });
        gbc.writeMem(0xc042, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x32f9);
        EXPECT(gbc.pc(), 0x1396);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc042), 0xb7);
        // CB E6 0289
        gbc.setState(0xa74f, 0x8bcc, 0x12c0, 0xdd2f, 0x931f, 0xf3c8, 0x0, 0x1);
        gbc.writeMem(0xa74f, { 0xcb, 0xe6 });
        gbc.writeMem(0xf3c8, { 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x8bcc);
        EXPECT(gbc.pc(), 0xa751);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa74f), 0xcb);
        EXPECT(gbc.readMem(0xa750), 0xe6);
        EXPECT(gbc.readMem(0xf3c8), 0x7c);
        // CB E6 028B
        gbc.setState(0xb939, 0x31f1, 0x2890, 0xd924, 0x679f, 0x27cd, 0x0, 0x0);
        gbc.writeMem(0x27cd, { 0xf0 });
        gbc.writeMem(0xb939, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x31f1);
        EXPECT(gbc.pc(), 0xb93b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb939), 0xcb);
        EXPECT(gbc.readMem(0xb93a), 0xe6);
        // CB E6 028C
        gbc.setState(0x71e7, 0x2f42, 0x6ac0, 0xe627, 0xa01d, 0x17a3, 0x1, 0x0);
        gbc.writeMem(0x17a3, { 0x73 });
        gbc.writeMem(0x71e7, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x2f42);
        EXPECT(gbc.pc(), 0x71e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E6 028E
        gbc.setState(0x4e4b, 0xc327, 0xecc0, 0x3ecd, 0x4405, 0x58ec, 0x1, 0x1);
        gbc.writeMem(0x4e4b, { 0xcb, 0xe6 });
        gbc.writeMem(0x58ec, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xc327);
        EXPECT(gbc.pc(), 0x4e4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E6 028F
        gbc.setState(0x9ce3, 0x577c, 0xe150, 0x3ca1, 0xd8fa, 0x4b09, 0x1, 0x1);
        gbc.writeMem(0x4b09, { 0xfd });
        gbc.writeMem(0x9ce3, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x577c);
        EXPECT(gbc.pc(), 0x9ce5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ce3), 0xcb);
        EXPECT(gbc.readMem(0x9ce4), 0xe6);
        // CB E6 0290
        gbc.setState(0x3324, 0x2435, 0x1db0, 0xb4e, 0xa386, 0x46fe, 0x1, 0x1);
        gbc.writeMem(0x3324, { 0xcb, 0xe6 });
        gbc.writeMem(0x46fe, { 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x2435);
        EXPECT(gbc.pc(), 0x3326);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 0291
        gbc.setState(0x8edc, 0x24a3, 0xe180, 0xc8ca, 0x44ee, 0xd7e9, 0x0, 0x1);
        gbc.writeMem(0x8edc, { 0xcb, 0xe6 });
        gbc.writeMem(0xd7e9, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x24a3);
        EXPECT(gbc.pc(), 0x8ede);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8edc), 0xcb);
        EXPECT(gbc.readMem(0x8edd), 0xe6);
        EXPECT(gbc.readMem(0xd7e9), 0x9d);
        // CB E6 0292
        gbc.setState(0x1957, 0xa6dc, 0x4990, 0x821d, 0x9323, 0xaf07, 0x1, 0x0);
        gbc.writeMem(0x1957, { 0xcb, 0xe6 });
        gbc.writeMem(0xaf07, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xa6dc);
        EXPECT(gbc.pc(), 0x1959);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf07), 0x5e);
        // CB E6 0293
        gbc.setState(0x5976, 0x4559, 0x6d90, 0x9bab, 0x333b, 0x11de, 0x0, 0x1);
        gbc.writeMem(0x11de, { 0xb0 });
        gbc.writeMem(0x5976, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x4559);
        EXPECT(gbc.pc(), 0x5978);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E6 0295
        gbc.setState(0xecee, 0xe320, 0xab0, 0x2d92, 0x3fbe, 0x436e, 0x0, 0x1);
        gbc.writeMem(0x436e, { 0xbf });
        gbc.writeMem(0xecee, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xe320);
        EXPECT(gbc.pc(), 0xecf0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecee), 0xcb);
        EXPECT(gbc.readMem(0xecef), 0xe6);
        // CB E6 0296
        gbc.setState(0xd86d, 0x97dc, 0x6b10, 0xca9f, 0xe2b9, 0x84bb, 0x1, 0x0);
        gbc.writeMem(0x84bb, { 0x87 });
        gbc.writeMem(0xd86d, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x97dc);
        EXPECT(gbc.pc(), 0xd86f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84bb), 0x97);
        EXPECT(gbc.readMem(0xd86d), 0xcb);
        EXPECT(gbc.readMem(0xd86e), 0xe6);
        // CB E6 0298
        gbc.setState(0xb2c3, 0x1fb0, 0xc2b0, 0xf363, 0x6cc, 0x7457, 0x0, 0x0);
        gbc.writeMem(0x7457, { 0x31 });
        gbc.writeMem(0xb2c3, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x1fb0);
        EXPECT(gbc.pc(), 0xb2c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2c3), 0xcb);
        EXPECT(gbc.readMem(0xb2c4), 0xe6);
        // CB E6 029A
        gbc.setState(0x5e89, 0x1e2d, 0xa340, 0xb35f, 0x88b2, 0x2f77, 0x1, 0x0);
        gbc.writeMem(0x2f77, { 0x39 });
        gbc.writeMem(0x5e89, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x1e2d);
        EXPECT(gbc.pc(), 0x5e8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E6 029B
        gbc.setState(0x4218, 0x56ed, 0x2230, 0x7455, 0x3443, 0x3eb7, 0x1, 0x1);
        gbc.writeMem(0x3eb7, { 0xb2 });
        gbc.writeMem(0x4218, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x56ed);
        EXPECT(gbc.pc(), 0x421a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 029C
        gbc.setState(0x183a, 0x3567, 0x43c0, 0xb0b8, 0xca47, 0x3985, 0x1, 0x1);
        gbc.writeMem(0x183a, { 0xcb, 0xe6 });
        gbc.writeMem(0x3985, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x3567);
        EXPECT(gbc.pc(), 0x183c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E6 029D
        gbc.setState(0x2335, 0x955d, 0x2fa0, 0x3f47, 0x5510, 0x7a, 0x0, 0x1);
        gbc.writeMem(0x7a, { 0x5e });
        gbc.writeMem(0x2335, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x955d);
        EXPECT(gbc.pc(), 0x2337);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E6 029E
        gbc.setState(0x7ab, 0x6b63, 0x61b0, 0x5c88, 0xd490, 0xefb4, 0x1, 0x0);
        gbc.writeMem(0x7ab, { 0xcb, 0xe6 });
        gbc.writeMem(0xefb4, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x6b63);
        EXPECT(gbc.pc(), 0x7ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefb4), 0xba);
        // CB E6 029F
        gbc.setState(0x3162, 0x5dcb, 0x1e20, 0x387f, 0xe8f9, 0xaa77, 0x1, 0x0);
        gbc.writeMem(0x3162, { 0xcb, 0xe6 });
        gbc.writeMem(0xaa77, { 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x5dcb);
        EXPECT(gbc.pc(), 0x3164);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa77), 0x70);
        // CB E6 02A1
        gbc.setState(0x38ef, 0x9ac6, 0xcaa0, 0x6c0d, 0x4f6e, 0x256c, 0x0, 0x1);
        gbc.writeMem(0x256c, { 0x3a });
        gbc.writeMem(0x38ef, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x9ac6);
        EXPECT(gbc.pc(), 0x38f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E6 02A4
        gbc.setState(0x711e, 0x2cbb, 0x93d0, 0x4a49, 0x24b1, 0x2eb, 0x1, 0x1);
        gbc.writeMem(0x2eb, { 0xf5 });
        gbc.writeMem(0x711e, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x2cbb);
        EXPECT(gbc.pc(), 0x7120);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E6 02A7
        gbc.setState(0x3c81, 0x88d0, 0x22a0, 0x1553, 0xb274, 0xd7b5, 0x0, 0x1);
        gbc.writeMem(0x3c81, { 0xcb, 0xe6 });
        gbc.writeMem(0xd7b5, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x88d0);
        EXPECT(gbc.pc(), 0x3c83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7b5), 0x9d);
        // CB E6 02A9
        gbc.setState(0xa417, 0x149e, 0x88a0, 0xb7fe, 0x8c35, 0x869f, 0x1, 0x1);
        gbc.writeMem(0x869f, { 0x49 });
        gbc.writeMem(0xa417, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x149e);
        EXPECT(gbc.pc(), 0xa419);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x869f), 0x59);
        EXPECT(gbc.readMem(0xa417), 0xcb);
        EXPECT(gbc.readMem(0xa418), 0xe6);
        // CB E6 02AB
        gbc.setState(0x6cb8, 0xe07, 0x40e0, 0x80fb, 0xa1, 0x81b3, 0x0, 0x0);
        gbc.writeMem(0x6cb8, { 0xcb, 0xe6 });
        gbc.writeMem(0x81b3, { 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xe07);
        EXPECT(gbc.pc(), 0x6cba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81b3), 0x96);
        // CB E6 02AC
        gbc.setState(0xe0b6, 0x5c93, 0xeda0, 0x6cc, 0x364e, 0x2cb7, 0x0, 0x0);
        gbc.writeMem(0x2cb7, { 0x9f });
        gbc.writeMem(0xe0b6, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x5c93);
        EXPECT(gbc.pc(), 0xe0b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0b6), 0xcb);
        EXPECT(gbc.readMem(0xe0b7), 0xe6);
        // CB E6 02AE
        gbc.setState(0xe2d9, 0xcba6, 0x7d60, 0x5644, 0x75bc, 0xc108, 0x0, 0x0);
        gbc.writeMem(0xc108, { 0xda });
        gbc.writeMem(0xe2d9, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xcba6);
        EXPECT(gbc.pc(), 0xe2db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc108), 0xda);
        EXPECT(gbc.readMem(0xe2d9), 0xcb);
        EXPECT(gbc.readMem(0xe2da), 0xe6);
        // CB E6 02AF
        gbc.setState(0xeea5, 0x75d4, 0xdb70, 0xfb8f, 0xd019, 0xc248, 0x1, 0x1);
        gbc.writeMem(0xc248, { 0x4d });
        gbc.writeMem(0xeea5, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x75d4);
        EXPECT(gbc.pc(), 0xeea7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc248), 0x5d);
        EXPECT(gbc.readMem(0xeea5), 0xcb);
        EXPECT(gbc.readMem(0xeea6), 0xe6);
        // CB E6 02B0
        gbc.setState(0x5d8e, 0xbf69, 0xe170, 0x8a09, 0xe139, 0x8184, 0x0, 0x1);
        gbc.writeMem(0x5d8e, { 0xcb, 0xe6 });
        gbc.writeMem(0x8184, { 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xbf69);
        EXPECT(gbc.pc(), 0x5d90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8184), 0xbe);
        // CB E6 02B2
        gbc.setState(0x3863, 0x97be, 0x9500, 0x7826, 0xfbb2, 0x9e28, 0x0, 0x0);
        gbc.writeMem(0x3863, { 0xcb, 0xe6 });
        gbc.writeMem(0x9e28, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x97be);
        EXPECT(gbc.pc(), 0x3865);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e28), 0x94);
        // CB E6 02B3
        gbc.setState(0x5ac9, 0xa798, 0x12a0, 0xa2eb, 0x3190, 0xfddf, 0x0, 0x0);
        gbc.writeMem(0x5ac9, { 0xcb, 0xe6 });
        gbc.writeMem(0xfddf, { 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xa798);
        EXPECT(gbc.pc(), 0x5acb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfddf), 0x13);
        // CB E6 02B4
        gbc.setState(0xe3c0, 0x5cdb, 0xe4d0, 0xa58e, 0x5af, 0xbf27, 0x1, 0x1);
        gbc.writeMem(0xbf27, { 0xce });
        gbc.writeMem(0xe3c0, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x5cdb);
        EXPECT(gbc.pc(), 0xe3c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf27), 0xde);
        EXPECT(gbc.readMem(0xe3c0), 0xcb);
        EXPECT(gbc.readMem(0xe3c1), 0xe6);
        // CB E6 02B5
        gbc.setState(0x6ee4, 0xab9f, 0x9350, 0x74ea, 0x6be9, 0xd89f, 0x0, 0x0);
        gbc.writeMem(0x6ee4, { 0xcb, 0xe6 });
        gbc.writeMem(0xd89f, { 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xab9f);
        EXPECT(gbc.pc(), 0x6ee6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd89f), 0x70);
        // CB E6 02B6
        gbc.setState(0x5c1b, 0x50dd, 0x1460, 0xba53, 0x1f98, 0x863c, 0x1, 0x1);
        gbc.writeMem(0x5c1b, { 0xcb, 0xe6 });
        gbc.writeMem(0x863c, { 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x50dd);
        EXPECT(gbc.pc(), 0x5c1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x863c), 0x58);
        // CB E6 02B8
        gbc.setState(0x9671, 0xf46e, 0x9cc0, 0x3051, 0xd541, 0x60bf, 0x1, 0x1);
        gbc.writeMem(0x60bf, { 0x95 });
        gbc.writeMem(0x9671, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xf46e);
        EXPECT(gbc.pc(), 0x9673);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9671), 0xcb);
        EXPECT(gbc.readMem(0x9672), 0xe6);
        // CB E6 02B9
        gbc.setState(0x49b2, 0xd2d2, 0x4a90, 0x2ed7, 0xa92c, 0xf47e, 0x1, 0x0);
        gbc.writeMem(0x49b2, { 0xcb, 0xe6 });
        gbc.writeMem(0xf47e, { 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xd2d2);
        EXPECT(gbc.pc(), 0x49b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf47e), 0xbe);
        // CB E6 02BA
        gbc.setState(0x5041, 0x24d1, 0xad20, 0xb259, 0xd554, 0x4b9f, 0x1, 0x1);
        gbc.writeMem(0x4b9f, { 0x93 });
        gbc.writeMem(0x5041, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x24d1);
        EXPECT(gbc.pc(), 0x5043);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E6 02BB
        gbc.setState(0x769e, 0xb83b, 0x45b0, 0xd5de, 0x9b89, 0xb4f8, 0x1, 0x0);
        gbc.writeMem(0x769e, { 0xcb, 0xe6 });
        gbc.writeMem(0xb4f8, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xb83b);
        EXPECT(gbc.pc(), 0x76a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4f8), 0x57);
        // CB E6 02BC
        gbc.setState(0x8e80, 0x6244, 0x3130, 0x5cf8, 0x31d1, 0x5dc0, 0x0, 0x1);
        gbc.writeMem(0x5dc0, { 0x1f });
        gbc.writeMem(0x8e80, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x6244);
        EXPECT(gbc.pc(), 0x8e82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e80), 0xcb);
        EXPECT(gbc.readMem(0x8e81), 0xe6);
        // CB E6 02BD
        gbc.setState(0xde00, 0x83f0, 0x4ed0, 0x9241, 0x3628, 0xb440, 0x0, 0x1);
        gbc.writeMem(0xb440, { 0xf2 });
        gbc.writeMem(0xde00, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x83f0);
        EXPECT(gbc.pc(), 0xde02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb440), 0xf2);
        EXPECT(gbc.readMem(0xde00), 0xcb);
        EXPECT(gbc.readMem(0xde01), 0xe6);
        // CB E6 02C0
        gbc.setState(0x68ac, 0x2287, 0x420, 0x81a3, 0xc912, 0xaf25, 0x1, 0x0);
        gbc.writeMem(0x68ac, { 0xcb, 0xe6 });
        gbc.writeMem(0xaf25, { 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x2287);
        EXPECT(gbc.pc(), 0x68ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf25), 0x38);
        // CB E6 02C1
        gbc.setState(0xefd0, 0xffc9, 0x3370, 0x3e99, 0x9009, 0x40d4, 0x0, 0x1);
        gbc.writeMem(0x40d4, { 0xb7 });
        gbc.writeMem(0xefd0, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xffc9);
        EXPECT(gbc.pc(), 0xefd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefd0), 0xcb);
        EXPECT(gbc.readMem(0xefd1), 0xe6);
        // CB E6 02C4
        gbc.setState(0x1eb2, 0x58fd, 0x8470, 0x43e6, 0x567c, 0xf800, 0x0, 0x1);
        gbc.writeMem(0x1eb2, { 0xcb, 0xe6 });
        gbc.writeMem(0xf800, { 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x58fd);
        EXPECT(gbc.pc(), 0x1eb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf800), 0x72);
        // CB E6 02C6
        gbc.setState(0xba8, 0x1509, 0x9750, 0x1e3a, 0x5e11, 0xbf79, 0x0, 0x0);
        gbc.writeMem(0xba8, { 0xcb, 0xe6 });
        gbc.writeMem(0xbf79, { 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x1509);
        EXPECT(gbc.pc(), 0xbaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf79), 0xd7);
        // CB E6 02C8
        gbc.setState(0xc166, 0xc3e9, 0x2330, 0x342e, 0xed1a, 0x2cdb, 0x1, 0x0);
        gbc.writeMem(0x2cdb, { 0x10 });
        gbc.writeMem(0xc166, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xc3e9);
        EXPECT(gbc.pc(), 0xc168);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc166), 0xcb);
        EXPECT(gbc.readMem(0xc167), 0xe6);
        // CB E6 02CC
        gbc.setState(0xeaa0, 0x6859, 0x6c0, 0xba1d, 0x6c5b, 0x3666, 0x1, 0x1);
        gbc.writeMem(0x3666, { 0xde });
        gbc.writeMem(0xeaa0, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x6859);
        EXPECT(gbc.pc(), 0xeaa2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaa0), 0xcb);
        EXPECT(gbc.readMem(0xeaa1), 0xe6);
        // CB E6 02CD
        gbc.setState(0x885b, 0x58f6, 0x5970, 0x9ee3, 0xf918, 0xe04e, 0x1, 0x0);
        gbc.writeMem(0x885b, { 0xcb, 0xe6 });
        gbc.writeMem(0xe04e, { 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x58f6);
        EXPECT(gbc.pc(), 0x885d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x885b), 0xcb);
        EXPECT(gbc.readMem(0x885c), 0xe6);
        EXPECT(gbc.readMem(0xe04e), 0xf2);
        // CB E6 02CE
        gbc.setState(0x761a, 0xb704, 0x9e0, 0x5af4, 0x8847, 0xaa57, 0x0, 0x1);
        gbc.writeMem(0x761a, { 0xcb, 0xe6 });
        gbc.writeMem(0xaa57, { 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xb704);
        EXPECT(gbc.pc(), 0x761c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa57), 0x36);
        // CB E6 02CF
        gbc.setState(0xda8, 0x54cc, 0x1900, 0xbe57, 0x43f8, 0x8502, 0x0, 0x0);
        gbc.writeMem(0xda8, { 0xcb, 0xe6 });
        gbc.writeMem(0x8502, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x54cc);
        EXPECT(gbc.pc(), 0xdaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8502), 0xb8);
        // CB E6 02D1
        gbc.setState(0x4c78, 0x3bd4, 0xf510, 0xeaf5, 0xd8bc, 0x46b8, 0x1, 0x0);
        gbc.writeMem(0x46b8, { 0x9b });
        gbc.writeMem(0x4c78, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x3bd4);
        EXPECT(gbc.pc(), 0x4c7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E6 02D6
        gbc.setState(0x9800, 0xaab8, 0xbc70, 0x3ad7, 0xa34e, 0xfcf3, 0x0, 0x1);
        gbc.writeMem(0x9800, { 0xcb, 0xe6 });
        gbc.writeMem(0xfcf3, { 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xaab8);
        EXPECT(gbc.pc(), 0x9802);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9800), 0xcb);
        EXPECT(gbc.readMem(0x9801), 0xe6);
        EXPECT(gbc.readMem(0xfcf3), 0xd8);
        // CB E6 02D7
        gbc.setState(0x516d, 0x51fd, 0x8d40, 0xa4fa, 0x4314, 0xde04, 0x1, 0x1);
        gbc.writeMem(0x516d, { 0xcb, 0xe6 });
        gbc.writeMem(0xde04, { 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x51fd);
        EXPECT(gbc.pc(), 0x516f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde04), 0x1a);
        // CB E6 02D9
        gbc.setState(0x56c6, 0xa1a3, 0xc9b0, 0x5c89, 0x7e41, 0xeb95, 0x1, 0x0);
        gbc.writeMem(0x56c6, { 0xcb, 0xe6 });
        gbc.writeMem(0xeb95, { 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xa1a3);
        EXPECT(gbc.pc(), 0x56c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb95), 0xd2);
        // CB E6 02DB
        gbc.setState(0x61a9, 0xab11, 0xa520, 0x5b86, 0x2ba2, 0xa831, 0x0, 0x0);
        gbc.writeMem(0x61a9, { 0xcb, 0xe6 });
        gbc.writeMem(0xa831, { 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xab11);
        EXPECT(gbc.pc(), 0x61ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa831), 0xd8);
        // CB E6 02DC
        gbc.setState(0x6e1e, 0xd32b, 0x88e0, 0x9e5b, 0xebc0, 0xdc77, 0x1, 0x0);
        gbc.writeMem(0x6e1e, { 0xcb, 0xe6 });
        gbc.writeMem(0xdc77, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xd32b);
        EXPECT(gbc.pc(), 0x6e20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc77), 0x30);
        // CB E6 02DD
        gbc.setState(0xccf4, 0xf92d, 0xef90, 0x8d7e, 0x5096, 0xe766, 0x0, 0x0);
        gbc.writeMem(0xccf4, { 0xcb, 0xe6 });
        gbc.writeMem(0xe766, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xf92d);
        EXPECT(gbc.pc(), 0xccf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccf4), 0xcb);
        EXPECT(gbc.readMem(0xccf5), 0xe6);
        EXPECT(gbc.readMem(0xe766), 0x1f);
        // CB E6 02DE
        gbc.setState(0x270a, 0x51f3, 0x6350, 0x18e4, 0x9b6a, 0xdd89, 0x1, 0x0);
        gbc.writeMem(0x270a, { 0xcb, 0xe6 });
        gbc.writeMem(0xdd89, { 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x51f3);
        EXPECT(gbc.pc(), 0x270c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd89), 0x35);
        // CB E6 02E1
        gbc.setState(0xcd1a, 0x4b73, 0x7be0, 0xc8fc, 0xa4fe, 0x9e69, 0x1, 0x1);
        gbc.writeMem(0x9e69, { 0xf7 });
        gbc.writeMem(0xcd1a, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x4b73);
        EXPECT(gbc.pc(), 0xcd1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e69), 0xf7);
        EXPECT(gbc.readMem(0xcd1a), 0xcb);
        EXPECT(gbc.readMem(0xcd1b), 0xe6);
        // CB E6 02E2
        gbc.setState(0x95aa, 0xf925, 0xe0e0, 0x1db0, 0xd7e9, 0xf5fa, 0x0, 0x1);
        gbc.writeMem(0x95aa, { 0xcb, 0xe6 });
        gbc.writeMem(0xf5fa, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xf925);
        EXPECT(gbc.pc(), 0x95ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95aa), 0xcb);
        EXPECT(gbc.readMem(0x95ab), 0xe6);
        EXPECT(gbc.readMem(0xf5fa), 0x13);
        // CB E6 02E3
        gbc.setState(0x16ac, 0x60d9, 0xd9b0, 0xe74f, 0xa1fb, 0x2bc1, 0x0, 0x1);
        gbc.writeMem(0x16ac, { 0xcb, 0xe6 });
        gbc.writeMem(0x2bc1, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x60d9);
        EXPECT(gbc.pc(), 0x16ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 02E5
        gbc.setState(0x722f, 0xbb2f, 0xc380, 0x864a, 0x42c8, 0xd44, 0x0, 0x1);
        gbc.writeMem(0xd44, { 0x32 });
        gbc.writeMem(0x722f, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xbb2f);
        EXPECT(gbc.pc(), 0x7231);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E6 02E8
        gbc.setState(0x640c, 0x8288, 0xbc20, 0xf1cb, 0xeb43, 0xa1fc, 0x0, 0x0);
        gbc.writeMem(0x640c, { 0xcb, 0xe6 });
        gbc.writeMem(0xa1fc, { 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x8288);
        EXPECT(gbc.pc(), 0x640e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1fc), 0x14);
        // CB E6 02EA
        gbc.setState(0xcbdf, 0xef02, 0x3d20, 0xaf3a, 0x4e75, 0x9000, 0x0, 0x1);
        gbc.writeMem(0x9000, { 0x7 });
        gbc.writeMem(0xcbdf, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xef02);
        EXPECT(gbc.pc(), 0xcbe1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9000), 0x17);
        EXPECT(gbc.readMem(0xcbdf), 0xcb);
        EXPECT(gbc.readMem(0xcbe0), 0xe6);
        // CB E6 02EB
        gbc.setState(0xb12f, 0x533d, 0x4fb0, 0xace4, 0x43f0, 0xa5ab, 0x1, 0x1);
        gbc.writeMem(0xa5ab, { 0xa2 });
        gbc.writeMem(0xb12f, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x533d);
        EXPECT(gbc.pc(), 0xb131);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5ab), 0xb2);
        EXPECT(gbc.readMem(0xb12f), 0xcb);
        EXPECT(gbc.readMem(0xb130), 0xe6);
        // CB E6 02EC
        gbc.setState(0x56b1, 0x761b, 0x3fc0, 0x1b8f, 0xbd42, 0xcf3c, 0x0, 0x1);
        gbc.writeMem(0x56b1, { 0xcb, 0xe6 });
        gbc.writeMem(0xcf3c, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x761b);
        EXPECT(gbc.pc(), 0x56b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf3c), 0x32);
        // CB E6 02EE
        gbc.setState(0xcb59, 0x69f1, 0x26b0, 0xe89b, 0x22ef, 0xf208, 0x1, 0x0);
        gbc.writeMem(0xcb59, { 0xcb, 0xe6 });
        gbc.writeMem(0xf208, { 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x69f1);
        EXPECT(gbc.pc(), 0xcb5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb59), 0xcb);
        EXPECT(gbc.readMem(0xcb5a), 0xe6);
        EXPECT(gbc.readMem(0xf208), 0x16);
        // CB E6 02EF
        gbc.setState(0x2035, 0x9e0, 0x900, 0x8f57, 0xc6d4, 0x9b5b, 0x1, 0x1);
        gbc.writeMem(0x2035, { 0xcb, 0xe6 });
        gbc.writeMem(0x9b5b, { 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x9e0);
        EXPECT(gbc.pc(), 0x2037);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b5b), 0xd1);
        // CB E6 02F0
        gbc.setState(0xc8be, 0xeb83, 0xabd0, 0x6c9b, 0x4e31, 0xfd73, 0x1, 0x1);
        gbc.writeMem(0xc8be, { 0xcb, 0xe6 });
        gbc.writeMem(0xfd73, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xeb83);
        EXPECT(gbc.pc(), 0xc8c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8be), 0xcb);
        EXPECT(gbc.readMem(0xc8bf), 0xe6);
        EXPECT(gbc.readMem(0xfd73), 0xbd);
        // CB E6 02F1
        gbc.setState(0x6643, 0x76de, 0xb7c0, 0xe85a, 0x9bcd, 0x1648, 0x1, 0x0);
        gbc.writeMem(0x1648, { 0x72 });
        gbc.writeMem(0x6643, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x76de);
        EXPECT(gbc.pc(), 0x6645);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E6 02F3
        gbc.setState(0x34a4, 0x6dd2, 0xfdf0, 0x34ad, 0xcef3, 0x55df, 0x0, 0x0);
        gbc.writeMem(0x34a4, { 0xcb, 0xe6 });
        gbc.writeMem(0x55df, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x6dd2);
        EXPECT(gbc.pc(), 0x34a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 02F5
        gbc.setState(0x3c4a, 0xdca3, 0xe6e0, 0x567a, 0x417e, 0xf219, 0x0, 0x0);
        gbc.writeMem(0x3c4a, { 0xcb, 0xe6 });
        gbc.writeMem(0xf219, { 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xdca3);
        EXPECT(gbc.pc(), 0x3c4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf219), 0x98);
        // CB E6 02F6
        gbc.setState(0xbcb, 0x262, 0x8f0, 0x7d20, 0x33d4, 0xede5, 0x0, 0x0);
        gbc.writeMem(0xbcb, { 0xcb, 0xe6 });
        gbc.writeMem(0xede5, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x262);
        EXPECT(gbc.pc(), 0xbcd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xede5), 0x5d);
        // CB E6 02F7
        gbc.setState(0x3fe3, 0xc758, 0x2ee0, 0x156f, 0xb30c, 0xa996, 0x1, 0x0);
        gbc.writeMem(0x3fe3, { 0xcb, 0xe6 });
        gbc.writeMem(0xa996, { 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xc758);
        EXPECT(gbc.pc(), 0x3fe5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa996), 0x92);
        // CB E6 02F8
        gbc.setState(0xd038, 0x555c, 0xf260, 0x2212, 0xf477, 0xccf2, 0x0, 0x0);
        gbc.writeMem(0xccf2, { 0xec });
        gbc.writeMem(0xd038, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x555c);
        EXPECT(gbc.pc(), 0xd03a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccf2), 0xfc);
        EXPECT(gbc.readMem(0xd038), 0xcb);
        EXPECT(gbc.readMem(0xd039), 0xe6);
        // CB E6 02FB
        gbc.setState(0x9a7a, 0xc4a4, 0x79f0, 0x8de6, 0x77f5, 0xdaf7, 0x1, 0x0);
        gbc.writeMem(0x9a7a, { 0xcb, 0xe6 });
        gbc.writeMem(0xdaf7, { 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xc4a4);
        EXPECT(gbc.pc(), 0x9a7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a7a), 0xcb);
        EXPECT(gbc.readMem(0x9a7b), 0xe6);
        EXPECT(gbc.readMem(0xdaf7), 0xfd);
        // CB E6 02FC
        gbc.setState(0x8e3c, 0xe8f1, 0x5290, 0xd07, 0x95da, 0x3800, 0x0, 0x0);
        gbc.writeMem(0x3800, { 0x72 });
        gbc.writeMem(0x8e3c, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xe8f1);
        EXPECT(gbc.pc(), 0x8e3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e3c), 0xcb);
        EXPECT(gbc.readMem(0x8e3d), 0xe6);
        // CB E6 02FD
        gbc.setState(0xcaac, 0x8832, 0xdd10, 0xedad, 0xa9b5, 0x7f3, 0x1, 0x0);
        gbc.writeMem(0x7f3, { 0x9a });
        gbc.writeMem(0xcaac, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x8832);
        EXPECT(gbc.pc(), 0xcaae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcaac), 0xcb);
        EXPECT(gbc.readMem(0xcaad), 0xe6);
        // CB E6 02FE
        gbc.setState(0x1685, 0xc39a, 0xfac0, 0x8613, 0x709b, 0xfa7f, 0x0, 0x0);
        gbc.writeMem(0x1685, { 0xcb, 0xe6 });
        gbc.writeMem(0xfa7f, { 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xc39a);
        EXPECT(gbc.pc(), 0x1687);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfa7f), 0x14);
        // CB E6 02FF
        gbc.setState(0x4ce8, 0x448e, 0x8a20, 0x38d, 0x2ec0, 0xcafa, 0x0, 0x1);
        gbc.writeMem(0x4ce8, { 0xcb, 0xe6 });
        gbc.writeMem(0xcafa, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x448e);
        EXPECT(gbc.pc(), 0x4cea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcafa), 0x19);
        // CB E6 0300
        gbc.setState(0x1853, 0xd55b, 0x53f0, 0x540a, 0xb90c, 0xce2b, 0x1, 0x0);
        gbc.writeMem(0x1853, { 0xcb, 0xe6 });
        gbc.writeMem(0xce2b, { 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xd55b);
        EXPECT(gbc.pc(), 0x1855);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce2b), 0x3b);
        // CB E6 0301
        gbc.setState(0xdf80, 0xed72, 0xa2d0, 0x124a, 0x3eb4, 0xde3b, 0x0, 0x1);
        gbc.writeMem(0xde3b, { 0x4e });
        gbc.writeMem(0xdf80, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xed72);
        EXPECT(gbc.pc(), 0xdf82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde3b), 0x5e);
        EXPECT(gbc.readMem(0xdf80), 0xcb);
        EXPECT(gbc.readMem(0xdf81), 0xe6);
        // CB E6 0302
        gbc.setState(0xdd58, 0x54bc, 0xf660, 0x580d, 0xaf51, 0x82b9, 0x0, 0x1);
        gbc.writeMem(0x82b9, { 0xc9 });
        gbc.writeMem(0xdd58, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x54bc);
        EXPECT(gbc.pc(), 0xdd5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82b9), 0xd9);
        EXPECT(gbc.readMem(0xdd58), 0xcb);
        EXPECT(gbc.readMem(0xdd59), 0xe6);
        // CB E6 0304
        gbc.setState(0x47e4, 0xf0da, 0xe3c0, 0xfa52, 0x6223, 0xda47, 0x0, 0x0);
        gbc.writeMem(0x47e4, { 0xcb, 0xe6 });
        gbc.writeMem(0xda47, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xf0da);
        EXPECT(gbc.pc(), 0x47e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda47), 0xf9);
        // CB E6 0305
        gbc.setState(0xbfd1, 0x3f9d, 0x54d0, 0x73e5, 0x43cf, 0xa564, 0x0, 0x0);
        gbc.writeMem(0xa564, { 0x79 });
        gbc.writeMem(0xbfd1, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x3f9d);
        EXPECT(gbc.pc(), 0xbfd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa564), 0x79);
        EXPECT(gbc.readMem(0xbfd1), 0xcb);
        EXPECT(gbc.readMem(0xbfd2), 0xe6);
        // CB E6 0306
        gbc.setState(0x69fd, 0xf9ab, 0x6dd0, 0x13f3, 0x2c7, 0x588d, 0x1, 0x1);
        gbc.writeMem(0x588d, { 0x1e });
        gbc.writeMem(0x69fd, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xf9ab);
        EXPECT(gbc.pc(), 0x69ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E6 0307
        gbc.setState(0xc45a, 0x706b, 0x92b0, 0x9470, 0x184d, 0x2dd8, 0x1, 0x0);
        gbc.writeMem(0x2dd8, { 0x55 });
        gbc.writeMem(0xc45a, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x706b);
        EXPECT(gbc.pc(), 0xc45c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc45a), 0xcb);
        EXPECT(gbc.readMem(0xc45b), 0xe6);
        // CB E6 0308
        gbc.setState(0x391d, 0x959f, 0x62e0, 0x99ad, 0x2433, 0x50ef, 0x0, 0x1);
        gbc.writeMem(0x391d, { 0xcb, 0xe6 });
        gbc.writeMem(0x50ef, { 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x959f);
        EXPECT(gbc.pc(), 0x391f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E6 030A
        gbc.setState(0x837e, 0x7b14, 0xe9f0, 0x86aa, 0xb820, 0xcf4a, 0x0, 0x1);
        gbc.writeMem(0x837e, { 0xcb, 0xe6 });
        gbc.writeMem(0xcf4a, { 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x7b14);
        EXPECT(gbc.pc(), 0x8380);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x837e), 0xcb);
        EXPECT(gbc.readMem(0x837f), 0xe6);
        EXPECT(gbc.readMem(0xcf4a), 0x31);
        // CB E6 030B
        gbc.setState(0x182b, 0x8359, 0x6160, 0x3a91, 0x1e02, 0x81f0, 0x1, 0x0);
        gbc.writeMem(0x182b, { 0xcb, 0xe6 });
        gbc.writeMem(0x81f0, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x8359);
        EXPECT(gbc.pc(), 0x182d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81f0), 0x5c);
        // CB E6 0310
        gbc.setState(0xb89c, 0x2d11, 0xc290, 0x5bfb, 0x4436, 0xee9f, 0x1, 0x1);
        gbc.writeMem(0xb89c, { 0xcb, 0xe6 });
        gbc.writeMem(0xee9f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x2d11);
        EXPECT(gbc.pc(), 0xb89e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb89c), 0xcb);
        EXPECT(gbc.readMem(0xb89d), 0xe6);
        EXPECT(gbc.readMem(0xee9f), 0xb7);
        // CB E6 0311
        gbc.setState(0x30f3, 0x433e, 0xd6e0, 0x3133, 0x8b30, 0x7a7b, 0x1, 0x0);
        gbc.writeMem(0x30f3, { 0xcb, 0xe6 });
        gbc.writeMem(0x7a7b, { 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x433e);
        EXPECT(gbc.pc(), 0x30f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E6 0312
        gbc.setState(0x9168, 0xa064, 0x7630, 0x9a79, 0x5248, 0xc04b, 0x1, 0x1);
        gbc.writeMem(0x9168, { 0xcb, 0xe6 });
        gbc.writeMem(0xc04b, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xa064);
        EXPECT(gbc.pc(), 0x916a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9168), 0xcb);
        EXPECT(gbc.readMem(0x9169), 0xe6);
        EXPECT(gbc.readMem(0xc04b), 0x10);
        // CB E6 0315
        gbc.setState(0xa2cb, 0x7168, 0x1e60, 0xd2c6, 0xc807, 0x30a7, 0x0, 0x0);
        gbc.writeMem(0x30a7, { 0x70 });
        gbc.writeMem(0xa2cb, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x7168);
        EXPECT(gbc.pc(), 0xa2cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2cb), 0xcb);
        EXPECT(gbc.readMem(0xa2cc), 0xe6);
        // CB E6 0316
        gbc.setState(0x57d0, 0x1926, 0x4460, 0x608f, 0x65fd, 0xfa89, 0x1, 0x1);
        gbc.writeMem(0x57d0, { 0xcb, 0xe6 });
        gbc.writeMem(0xfa89, { 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x1926);
        EXPECT(gbc.pc(), 0x57d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfa89), 0x71);
        // CB E6 0318
        gbc.setState(0x9b59, 0x8de3, 0x9a90, 0x3c82, 0x5971, 0x6857, 0x1, 0x0);
        gbc.writeMem(0x6857, { 0xba });
        gbc.writeMem(0x9b59, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x8de3);
        EXPECT(gbc.pc(), 0x9b5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b59), 0xcb);
        EXPECT(gbc.readMem(0x9b5a), 0xe6);
        // CB E6 0319
        gbc.setState(0x20f0, 0x43c6, 0xf430, 0x9f4f, 0x72d5, 0x9d8f, 0x1, 0x0);
        gbc.writeMem(0x20f0, { 0xcb, 0xe6 });
        gbc.writeMem(0x9d8f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x43c6);
        EXPECT(gbc.pc(), 0x20f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d8f), 0x9b);
        // CB E6 031A
        gbc.setState(0xbfd9, 0x29f3, 0x4870, 0x2e22, 0x9bbb, 0xd97b, 0x1, 0x0);
        gbc.writeMem(0xbfd9, { 0xcb, 0xe6 });
        gbc.writeMem(0xd97b, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x29f3);
        EXPECT(gbc.pc(), 0xbfdb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfd9), 0xcb);
        EXPECT(gbc.readMem(0xbfda), 0xe6);
        EXPECT(gbc.readMem(0xd97b), 0xfc);
        // CB E6 031B
        gbc.setState(0x19c7, 0x95c0, 0xa350, 0xded6, 0x8531, 0xd2b5, 0x0, 0x1);
        gbc.writeMem(0x19c7, { 0xcb, 0xe6 });
        gbc.writeMem(0xd2b5, { 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x95c0);
        EXPECT(gbc.pc(), 0x19c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2b5), 0xfe);
        // CB E6 031C
        gbc.setState(0x2439, 0x4500, 0x250, 0x1ab5, 0xa452, 0xbc4a, 0x1, 0x1);
        gbc.writeMem(0x2439, { 0xcb, 0xe6 });
        gbc.writeMem(0xbc4a, { 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x4500);
        EXPECT(gbc.pc(), 0x243b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc4a), 0x7d);
        // CB E6 031D
        gbc.setState(0x698d, 0x7e0c, 0xb280, 0x94f1, 0x78ad, 0x2d09, 0x1, 0x1);
        gbc.writeMem(0x2d09, { 0xf9 });
        gbc.writeMem(0x698d, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x7e0c);
        EXPECT(gbc.pc(), 0x698f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E6 031E
        gbc.setState(0x8ecd, 0x2855, 0xf7d0, 0x56fa, 0x5f3d, 0x30ed, 0x1, 0x1);
        gbc.writeMem(0x30ed, { 0x9f });
        gbc.writeMem(0x8ecd, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x2855);
        EXPECT(gbc.pc(), 0x8ecf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ecd), 0xcb);
        EXPECT(gbc.readMem(0x8ece), 0xe6);
        // CB E6 0321
        gbc.setState(0xb292, 0x80ad, 0x3780, 0x7e3d, 0x46c3, 0xd324, 0x0, 0x1);
        gbc.writeMem(0xb292, { 0xcb, 0xe6 });
        gbc.writeMem(0xd324, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x80ad);
        EXPECT(gbc.pc(), 0xb294);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb292), 0xcb);
        EXPECT(gbc.readMem(0xb293), 0xe6);
        EXPECT(gbc.readMem(0xd324), 0xfc);
        // CB E6 0322
        gbc.setState(0x6ac6, 0x232c, 0x22c0, 0xe776, 0xacc, 0x73c2, 0x0, 0x0);
        gbc.writeMem(0x6ac6, { 0xcb, 0xe6 });
        gbc.writeMem(0x73c2, { 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x232c);
        EXPECT(gbc.pc(), 0x6ac8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E6 0325
        gbc.setState(0xdf55, 0x53b5, 0x7950, 0x38d0, 0xfe03, 0xf72b, 0x1, 0x1);
        gbc.writeMem(0xdf55, { 0xcb, 0xe6 });
        gbc.writeMem(0xf72b, { 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x53b5);
        EXPECT(gbc.pc(), 0xdf57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf55), 0xcb);
        EXPECT(gbc.readMem(0xdf56), 0xe6);
        EXPECT(gbc.readMem(0xf72b), 0x15);
        // CB E6 0326
        gbc.setState(0xe75, 0xaa0b, 0x2c00, 0x9370, 0x918b, 0x56b0, 0x1, 0x0);
        gbc.writeMem(0xe75, { 0xcb, 0xe6 });
        gbc.writeMem(0x56b0, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xaa0b);
        EXPECT(gbc.pc(), 0xe77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E6 0328
        gbc.setState(0x3da, 0x6eef, 0xd3b0, 0xad6a, 0x902d, 0xab0f, 0x1, 0x1);
        gbc.writeMem(0x3da, { 0xcb, 0xe6 });
        gbc.writeMem(0xab0f, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x6eef);
        EXPECT(gbc.pc(), 0x3dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab0f), 0x1f);
        // CB E6 0329
        gbc.setState(0x78b3, 0xc6c3, 0xb1f0, 0xc5ff, 0xab38, 0xcf1c, 0x1, 0x1);
        gbc.writeMem(0x78b3, { 0xcb, 0xe6 });
        gbc.writeMem(0xcf1c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xc6c3);
        EXPECT(gbc.pc(), 0x78b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf1c), 0x5c);
        // CB E6 032A
        gbc.setState(0xbbd0, 0xa1d6, 0x9680, 0x4e5a, 0x4fac, 0xe1a7, 0x1, 0x0);
        gbc.writeMem(0xbbd0, { 0xcb, 0xe6 });
        gbc.writeMem(0xe1a7, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xa1d6);
        EXPECT(gbc.pc(), 0xbbd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbd0), 0xcb);
        EXPECT(gbc.readMem(0xbbd1), 0xe6);
        EXPECT(gbc.readMem(0xe1a7), 0x73);
        // CB E6 032C
        gbc.setState(0x252b, 0x484a, 0xcda0, 0xb13b, 0xabce, 0xad9a, 0x1, 0x1);
        gbc.writeMem(0x252b, { 0xcb, 0xe6 });
        gbc.writeMem(0xad9a, { 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x484a);
        EXPECT(gbc.pc(), 0x252d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad9a), 0x70);
        // CB E6 032E
        gbc.setState(0xbdea, 0x29ee, 0xe520, 0xb540, 0x735e, 0x52ab, 0x1, 0x1);
        gbc.writeMem(0x52ab, { 0x11 });
        gbc.writeMem(0xbdea, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x29ee);
        EXPECT(gbc.pc(), 0xbdec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdea), 0xcb);
        EXPECT(gbc.readMem(0xbdeb), 0xe6);
        // CB E6 032F
        gbc.setState(0x9c02, 0x4356, 0xb110, 0xc59, 0xf005, 0x49b3, 0x1, 0x0);
        gbc.writeMem(0x49b3, { 0x5c });
        gbc.writeMem(0x9c02, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x4356);
        EXPECT(gbc.pc(), 0x9c04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c02), 0xcb);
        EXPECT(gbc.readMem(0x9c03), 0xe6);
        // CB E6 0331
        gbc.setState(0xe74e, 0xd031, 0x4f0, 0xa0f, 0xc262, 0x341d, 0x0, 0x1);
        gbc.writeMem(0x341d, { 0xb4 });
        gbc.writeMem(0xe74e, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xd031);
        EXPECT(gbc.pc(), 0xe750);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe74e), 0xcb);
        EXPECT(gbc.readMem(0xe74f), 0xe6);
        // CB E6 0332
        gbc.setState(0x3e4d, 0x8515, 0x87e0, 0x71ab, 0xe305, 0x8a44, 0x0, 0x1);
        gbc.writeMem(0x3e4d, { 0xcb, 0xe6 });
        gbc.writeMem(0x8a44, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x8515);
        EXPECT(gbc.pc(), 0x3e4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a44), 0x79);
        // CB E6 0339
        gbc.setState(0x70b6, 0x40e5, 0x64a0, 0xe946, 0x7915, 0x1bdb, 0x1, 0x1);
        gbc.writeMem(0x1bdb, { 0xd2 });
        gbc.writeMem(0x70b6, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x40e5);
        EXPECT(gbc.pc(), 0x70b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E6 033C
        gbc.setState(0x3b0d, 0xabc3, 0x1690, 0x4a08, 0x544c, 0xb2c5, 0x0, 0x1);
        gbc.writeMem(0x3b0d, { 0xcb, 0xe6 });
        gbc.writeMem(0xb2c5, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xabc3);
        EXPECT(gbc.pc(), 0x3b0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2c5), 0x96);
        // CB E6 033D
        gbc.setState(0x834c, 0x7ecb, 0x4840, 0xa3f2, 0x779, 0xa4ea, 0x0, 0x0);
        gbc.writeMem(0x834c, { 0xcb, 0xe6 });
        gbc.writeMem(0xa4ea, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x7ecb);
        EXPECT(gbc.pc(), 0x834e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x834c), 0xcb);
        EXPECT(gbc.readMem(0x834d), 0xe6);
        EXPECT(gbc.readMem(0xa4ea), 0x94);
        // CB E6 033E
        gbc.setState(0xb5c7, 0x43d3, 0x71c0, 0x5f73, 0x90b, 0xb52b, 0x0, 0x1);
        gbc.writeMem(0xb52b, { 0x69 });
        gbc.writeMem(0xb5c7, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x43d3);
        EXPECT(gbc.pc(), 0xb5c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb52b), 0x79);
        EXPECT(gbc.readMem(0xb5c7), 0xcb);
        EXPECT(gbc.readMem(0xb5c8), 0xe6);
        // CB E6 0341
        gbc.setState(0x7a74, 0x3df5, 0x1e20, 0x64de, 0xc288, 0xec97, 0x0, 0x0);
        gbc.writeMem(0x7a74, { 0xcb, 0xe6 });
        gbc.writeMem(0xec97, { 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x3df5);
        EXPECT(gbc.pc(), 0x7a76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec97), 0x77);
        // CB E6 0342
        gbc.setState(0x76a6, 0x5cf0, 0x1e20, 0x4233, 0x77a6, 0xa5a9, 0x0, 0x0);
        gbc.writeMem(0x76a6, { 0xcb, 0xe6 });
        gbc.writeMem(0xa5a9, { 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x5cf0);
        EXPECT(gbc.pc(), 0x76a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5a9), 0xd4);
        // CB E6 0343
        gbc.setState(0x6fec, 0xe1f3, 0xdad0, 0x57bc, 0x212, 0xaf1d, 0x1, 0x1);
        gbc.writeMem(0x6fec, { 0xcb, 0xe6 });
        gbc.writeMem(0xaf1d, { 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xe1f3);
        EXPECT(gbc.pc(), 0x6fee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf1d), 0x78);
        // CB E6 0344
        gbc.setState(0x60e6, 0x39f1, 0x7280, 0xab2, 0x3bc8, 0xdbad, 0x1, 0x0);
        gbc.writeMem(0x60e6, { 0xcb, 0xe6 });
        gbc.writeMem(0xdbad, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x39f1);
        EXPECT(gbc.pc(), 0x60e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbad), 0x32);
        // CB E6 0345
        gbc.setState(0x2301, 0x17db, 0x5580, 0x9736, 0xf08f, 0xa14e, 0x1, 0x0);
        gbc.writeMem(0x2301, { 0xcb, 0xe6 });
        gbc.writeMem(0xa14e, { 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x17db);
        EXPECT(gbc.pc(), 0x2303);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa14e), 0x53);
        // CB E6 0347
        gbc.setState(0x958b, 0xdfd2, 0x48c0, 0xc137, 0x59bf, 0xe664, 0x0, 0x1);
        gbc.writeMem(0x958b, { 0xcb, 0xe6 });
        gbc.writeMem(0xe664, { 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xdfd2);
        EXPECT(gbc.pc(), 0x958d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x958b), 0xcb);
        EXPECT(gbc.readMem(0x958c), 0xe6);
        EXPECT(gbc.readMem(0xe664), 0x74);
        // CB E6 0349
        gbc.setState(0x9f64, 0xb781, 0xc150, 0x2b61, 0x2a34, 0xb21a, 0x0, 0x0);
        gbc.writeMem(0x9f64, { 0xcb, 0xe6 });
        gbc.writeMem(0xb21a, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xb781);
        EXPECT(gbc.pc(), 0x9f66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f64), 0xcb);
        EXPECT(gbc.readMem(0x9f65), 0xe6);
        EXPECT(gbc.readMem(0xb21a), 0xf5);
        // CB E6 034F
        gbc.setState(0x75a3, 0x7980, 0xe40, 0xd361, 0x6726, 0xa7af, 0x0, 0x0);
        gbc.writeMem(0x75a3, { 0xcb, 0xe6 });
        gbc.writeMem(0xa7af, { 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x7980);
        EXPECT(gbc.pc(), 0x75a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7af), 0x7c);
        // CB E6 0350
        gbc.setState(0x4447, 0xf8a5, 0x8960, 0x5f29, 0xcf7, 0xfde7, 0x0, 0x1);
        gbc.writeMem(0x4447, { 0xcb, 0xe6 });
        gbc.writeMem(0xfde7, { 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xf8a5);
        EXPECT(gbc.pc(), 0x4449);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfde7), 0x79);
        // CB E6 0351
        gbc.setState(0xc65a, 0xedd5, 0x80c0, 0x6b15, 0x3fcc, 0xcf8e, 0x0, 0x0);
        gbc.writeMem(0xc65a, { 0xcb, 0xe6 });
        gbc.writeMem(0xcf8e, { 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xedd5);
        EXPECT(gbc.pc(), 0xc65c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc65a), 0xcb);
        EXPECT(gbc.readMem(0xc65b), 0xe6);
        EXPECT(gbc.readMem(0xcf8e), 0xf8);
        // CB E6 0352
        gbc.setState(0x4c7e, 0xf84e, 0x560, 0x295d, 0x2440, 0x3564, 0x1, 0x1);
        gbc.writeMem(0x3564, { 0x52 });
        gbc.writeMem(0x4c7e, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xf84e);
        EXPECT(gbc.pc(), 0x4c80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E6 0354
        gbc.setState(0xbce1, 0x8afe, 0xded0, 0x1087, 0xe67f, 0x9144, 0x1, 0x1);
        gbc.writeMem(0x9144, { 0xe });
        gbc.writeMem(0xbce1, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x8afe);
        EXPECT(gbc.pc(), 0xbce3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9144), 0x1e);
        EXPECT(gbc.readMem(0xbce1), 0xcb);
        EXPECT(gbc.readMem(0xbce2), 0xe6);
        // CB E6 0355
        gbc.setState(0xe3d1, 0xb079, 0x69e0, 0xa483, 0xc540, 0x3bb6, 0x1, 0x1);
        gbc.writeMem(0x3bb6, { 0xde });
        gbc.writeMem(0xe3d1, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xb079);
        EXPECT(gbc.pc(), 0xe3d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3d1), 0xcb);
        EXPECT(gbc.readMem(0xe3d2), 0xe6);
        // CB E6 0356
        gbc.setState(0x67ff, 0x5c19, 0x8460, 0x452e, 0x916e, 0x9f6c, 0x0, 0x0);
        gbc.writeMem(0x67ff, { 0xcb, 0xe6 });
        gbc.writeMem(0x9f6c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x5c19);
        EXPECT(gbc.pc(), 0x6801);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f6c), 0xb4);
        // CB E6 0357
        gbc.setState(0x4222, 0xb352, 0x1320, 0xa4c, 0x8815, 0x96f5, 0x0, 0x1);
        gbc.writeMem(0x4222, { 0xcb, 0xe6 });
        gbc.writeMem(0x96f5, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xb352);
        EXPECT(gbc.pc(), 0x4224);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96f5), 0xb4);
        // CB E6 035A
        gbc.setState(0x24a5, 0xbe81, 0x2990, 0x6df1, 0xbab6, 0x1c6c, 0x0, 0x0);
        gbc.writeMem(0x1c6c, { 0x9d });
        gbc.writeMem(0x24a5, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xbe81);
        EXPECT(gbc.pc(), 0x24a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E6 035B
        gbc.setState(0x9ace, 0x32db, 0xfdb0, 0x33d8, 0x63c1, 0x7a8, 0x0, 0x1);
        gbc.writeMem(0x7a8, { 0xd2 });
        gbc.writeMem(0x9ace, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x32db);
        EXPECT(gbc.pc(), 0x9ad0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ace), 0xcb);
        EXPECT(gbc.readMem(0x9acf), 0xe6);
        // CB E6 035C
        gbc.setState(0xcd2d, 0xb52c, 0xf360, 0xb26, 0xd263, 0xab45, 0x1, 0x0);
        gbc.writeMem(0xab45, { 0xa1 });
        gbc.writeMem(0xcd2d, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xb52c);
        EXPECT(gbc.pc(), 0xcd2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab45), 0xb1);
        EXPECT(gbc.readMem(0xcd2d), 0xcb);
        EXPECT(gbc.readMem(0xcd2e), 0xe6);
        // CB E6 035E
        gbc.setState(0x85f8, 0xbd97, 0x9e70, 0x577d, 0x3827, 0xbd51, 0x0, 0x1);
        gbc.writeMem(0x85f8, { 0xcb, 0xe6 });
        gbc.writeMem(0xbd51, { 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xbd97);
        EXPECT(gbc.pc(), 0x85fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85f8), 0xcb);
        EXPECT(gbc.readMem(0x85f9), 0xe6);
        EXPECT(gbc.readMem(0xbd51), 0xfb);
        // CB E6 0360
        gbc.setState(0x5d3d, 0xe5ef, 0x480, 0xfaa5, 0xff8a, 0xbe20, 0x1, 0x0);
        gbc.writeMem(0x5d3d, { 0xcb, 0xe6 });
        gbc.writeMem(0xbe20, { 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xe5ef);
        EXPECT(gbc.pc(), 0x5d3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe20), 0xbc);
        // CB E6 0362
        gbc.setState(0x6e93, 0xb6a1, 0x4c90, 0x55c5, 0x8e56, 0x9ac6, 0x1, 0x0);
        gbc.writeMem(0x6e93, { 0xcb, 0xe6 });
        gbc.writeMem(0x9ac6, { 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xb6a1);
        EXPECT(gbc.pc(), 0x6e95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ac6), 0x51);
        // CB E6 0363
        gbc.setState(0x9182, 0x5cd9, 0x8400, 0x7bde, 0x19bc, 0x8ea0, 0x1, 0x0);
        gbc.writeMem(0x8ea0, { 0x87 });
        gbc.writeMem(0x9182, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x5cd9);
        EXPECT(gbc.pc(), 0x9184);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ea0), 0x97);
        EXPECT(gbc.readMem(0x9182), 0xcb);
        EXPECT(gbc.readMem(0x9183), 0xe6);
        // CB E6 0364
        gbc.setState(0x373c, 0x1341, 0x54b0, 0x7d39, 0x1782, 0xbd2e, 0x0, 0x1);
        gbc.writeMem(0x373c, { 0xcb, 0xe6 });
        gbc.writeMem(0xbd2e, { 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x1341);
        EXPECT(gbc.pc(), 0x373e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd2e), 0x7a);
        // CB E6 0365
        gbc.setState(0x2cf1, 0x9ef4, 0x29d0, 0x1454, 0xf294, 0xd6b2, 0x1, 0x1);
        gbc.writeMem(0x2cf1, { 0xcb, 0xe6 });
        gbc.writeMem(0xd6b2, { 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x9ef4);
        EXPECT(gbc.pc(), 0x2cf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6b2), 0x9a);
        // CB E6 0366
        gbc.setState(0xc8d8, 0xcd88, 0x3aa0, 0x2eeb, 0x8f96, 0xa11, 0x0, 0x1);
        gbc.writeMem(0xa11, { 0x36 });
        gbc.writeMem(0xc8d8, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xcd88);
        EXPECT(gbc.pc(), 0xc8da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8d8), 0xcb);
        EXPECT(gbc.readMem(0xc8d9), 0xe6);
        // CB E6 0368
        gbc.setState(0x84e3, 0x3234, 0xffe0, 0xe648, 0x4473, 0x8004, 0x1, 0x1);
        gbc.writeMem(0x8004, { 0xba });
        gbc.writeMem(0x84e3, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x3234);
        EXPECT(gbc.pc(), 0x84e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8004), 0xba);
        EXPECT(gbc.readMem(0x84e3), 0xcb);
        EXPECT(gbc.readMem(0x84e4), 0xe6);
        // CB E6 0369
        gbc.setState(0xd8f6, 0xbeba, 0xbc00, 0x7336, 0x5fdb, 0xea69, 0x1, 0x1);
        gbc.writeMem(0xd8f6, { 0xcb, 0xe6 });
        gbc.writeMem(0xea69, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xbeba);
        EXPECT(gbc.pc(), 0xd8f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8f6), 0xcb);
        EXPECT(gbc.readMem(0xd8f7), 0xe6);
        EXPECT(gbc.readMem(0xea69), 0xf9);
        // CB E6 036A
        gbc.setState(0x4976, 0x8b94, 0x8aa0, 0x9cae, 0x3ae7, 0xab6e, 0x1, 0x1);
        gbc.writeMem(0x4976, { 0xcb, 0xe6 });
        gbc.writeMem(0xab6e, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x8b94);
        EXPECT(gbc.pc(), 0x4978);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab6e), 0xff);
        // CB E6 036B
        gbc.setState(0x7018, 0xe4e7, 0xcb70, 0x940, 0x6e9e, 0x5f9a, 0x0, 0x1);
        gbc.writeMem(0x5f9a, { 0x5a });
        gbc.writeMem(0x7018, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xe4e7);
        EXPECT(gbc.pc(), 0x701a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 036C
        gbc.setState(0x3e15, 0x1115, 0xbf80, 0xa00e, 0x38d, 0xfdf5, 0x1, 0x0);
        gbc.writeMem(0x3e15, { 0xcb, 0xe6 });
        gbc.writeMem(0xfdf5, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x1115);
        EXPECT(gbc.pc(), 0x3e17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfdf5), 0xf5);
        // CB E6 0371
        gbc.setState(0x68c4, 0xfdfd, 0xcfb0, 0xa6a6, 0x9ee7, 0x9ec, 0x1, 0x0);
        gbc.writeMem(0x9ec, { 0xb9 });
        gbc.writeMem(0x68c4, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xfdfd);
        EXPECT(gbc.pc(), 0x68c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 0372
        gbc.setState(0x2e12, 0x7674, 0x5140, 0xabab, 0xa529, 0x598c, 0x1, 0x1);
        gbc.writeMem(0x2e12, { 0xcb, 0xe6 });
        gbc.writeMem(0x598c, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x7674);
        EXPECT(gbc.pc(), 0x2e14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E6 0373
        gbc.setState(0xd649, 0x3f51, 0xc540, 0x12a4, 0x6a50, 0x6e50, 0x1, 0x0);
        gbc.writeMem(0x6e50, { 0xd4 });
        gbc.writeMem(0xd649, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x3f51);
        EXPECT(gbc.pc(), 0xd64b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd649), 0xcb);
        EXPECT(gbc.readMem(0xd64a), 0xe6);
        // CB E6 0376
        gbc.setState(0x4d2a, 0xa771, 0x1c10, 0xf612, 0x37d9, 0xdaa1, 0x0, 0x1);
        gbc.writeMem(0x4d2a, { 0xcb, 0xe6 });
        gbc.writeMem(0xdaa1, { 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xa771);
        EXPECT(gbc.pc(), 0x4d2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdaa1), 0x78);
        // CB E6 0378
        gbc.setState(0x6f48, 0xf4a, 0x7530, 0xcd7e, 0x1b67, 0xf69e, 0x1, 0x0);
        gbc.writeMem(0x6f48, { 0xcb, 0xe6 });
        gbc.writeMem(0xf69e, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xf4a);
        EXPECT(gbc.pc(), 0x6f4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf69e), 0xdb);
        // CB E6 0379
        gbc.setState(0xde8, 0x7b4d, 0x4ba0, 0x8fe7, 0x84ad, 0xbb87, 0x0, 0x1);
        gbc.writeMem(0xde8, { 0xcb, 0xe6 });
        gbc.writeMem(0xbb87, { 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x7b4d);
        EXPECT(gbc.pc(), 0xdea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb87), 0xf1);
        // CB E6 037A
        gbc.setState(0x3002, 0xe4e6, 0x5a20, 0x25b7, 0xd25b, 0xf78f, 0x0, 0x1);
        gbc.writeMem(0x3002, { 0xcb, 0xe6 });
        gbc.writeMem(0xf78f, { 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xe4e6);
        EXPECT(gbc.pc(), 0x3004);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf78f), 0xd5);
        // CB E6 037C
        gbc.setState(0x294c, 0x6c75, 0x9c0, 0x487a, 0xa02e, 0xf6f1, 0x1, 0x1);
        gbc.writeMem(0x294c, { 0xcb, 0xe6 });
        gbc.writeMem(0xf6f1, { 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x6c75);
        EXPECT(gbc.pc(), 0x294e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf6f1), 0x9b);
        // CB E6 037D
        gbc.setState(0x6584, 0x3d9d, 0xa8a0, 0xed4a, 0xdf11, 0xab35, 0x1, 0x0);
        gbc.writeMem(0x6584, { 0xcb, 0xe6 });
        gbc.writeMem(0xab35, { 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x3d9d);
        EXPECT(gbc.pc(), 0x6586);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab35), 0x30);
        // CB E6 037E
        gbc.setState(0x1b15, 0xe300, 0xc550, 0xd763, 0x42ff, 0x98c1, 0x0, 0x1);
        gbc.writeMem(0x1b15, { 0xcb, 0xe6 });
        gbc.writeMem(0x98c1, { 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xe300);
        EXPECT(gbc.pc(), 0x1b17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98c1), 0xbc);
        // CB E6 0380
        gbc.setState(0x5834, 0xc83f, 0xc910, 0x2b8f, 0x4ab3, 0xe5c6, 0x1, 0x0);
        gbc.writeMem(0x5834, { 0xcb, 0xe6 });
        gbc.writeMem(0xe5c6, { 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xc83f);
        EXPECT(gbc.pc(), 0x5836);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5c6), 0x35);
        // CB E6 0381
        gbc.setState(0x9679, 0x7e1d, 0x9b50, 0xa589, 0xc179, 0x37c9, 0x1, 0x0);
        gbc.writeMem(0x37c9, { 0xd8 });
        gbc.writeMem(0x9679, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x7e1d);
        EXPECT(gbc.pc(), 0x967b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9679), 0xcb);
        EXPECT(gbc.readMem(0x967a), 0xe6);
        // CB E6 0384
        gbc.setState(0x6f23, 0x5575, 0x9010, 0x4671, 0xc114, 0xcd1e, 0x0, 0x1);
        gbc.writeMem(0x6f23, { 0xcb, 0xe6 });
        gbc.writeMem(0xcd1e, { 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x5575);
        EXPECT(gbc.pc(), 0x6f25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd1e), 0xbe);
        // CB E6 0385
        gbc.setState(0xba48, 0xa387, 0x60b0, 0x4aa9, 0xf3c, 0xd7e7, 0x0, 0x0);
        gbc.writeMem(0xba48, { 0xcb, 0xe6 });
        gbc.writeMem(0xd7e7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xa387);
        EXPECT(gbc.pc(), 0xba4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba48), 0xcb);
        EXPECT(gbc.readMem(0xba49), 0xe6);
        EXPECT(gbc.readMem(0xd7e7), 0xf9);
        // CB E6 0386
        gbc.setState(0xd11a, 0xd2b0, 0x4f80, 0x734b, 0xa5b4, 0x9479, 0x1, 0x0);
        gbc.writeMem(0x9479, { 0x59 });
        gbc.writeMem(0xd11a, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xd2b0);
        EXPECT(gbc.pc(), 0xd11c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9479), 0x59);
        EXPECT(gbc.readMem(0xd11a), 0xcb);
        EXPECT(gbc.readMem(0xd11b), 0xe6);
        // CB E6 0387
        gbc.setState(0x8b29, 0xa2d6, 0xc130, 0x5ac, 0x7a83, 0xc1da, 0x0, 0x1);
        gbc.writeMem(0x8b29, { 0xcb, 0xe6 });
        gbc.writeMem(0xc1da, { 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xa2d6);
        EXPECT(gbc.pc(), 0x8b2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b29), 0xcb);
        EXPECT(gbc.readMem(0x8b2a), 0xe6);
        EXPECT(gbc.readMem(0xc1da), 0x7c);
        // CB E6 0389
        gbc.setState(0x1127, 0xe0c3, 0x5c30, 0x3206, 0xf650, 0x422d, 0x0, 0x1);
        gbc.writeMem(0x1127, { 0xcb, 0xe6 });
        gbc.writeMem(0x422d, { 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xe0c3);
        EXPECT(gbc.pc(), 0x1129);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 038B
        gbc.setState(0x5a52, 0x93d8, 0xbcf0, 0xbd7b, 0xb025, 0x7c98, 0x1, 0x0);
        gbc.writeMem(0x5a52, { 0xcb, 0xe6 });
        gbc.writeMem(0x7c98, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x93d8);
        EXPECT(gbc.pc(), 0x5a54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 038C
        gbc.setState(0x95f1, 0xa0b8, 0x9e10, 0x797f, 0xad93, 0xfebe, 0x0, 0x1);
        gbc.writeMem(0x95f1, { 0xcb, 0xe6 });
        gbc.writeMem(0xfebe, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xa0b8);
        EXPECT(gbc.pc(), 0x95f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95f1), 0xcb);
        EXPECT(gbc.readMem(0x95f2), 0xe6);
        EXPECT(gbc.readMem(0xfebe), 0xd0);
        // CB E6 038D
        gbc.setState(0xb16b, 0x2d3d, 0x8a70, 0xedfe, 0xa177, 0x4b63, 0x0, 0x1);
        gbc.writeMem(0x4b63, { 0x13 });
        gbc.writeMem(0xb16b, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x2d3d);
        EXPECT(gbc.pc(), 0xb16d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb16b), 0xcb);
        EXPECT(gbc.readMem(0xb16c), 0xe6);
        // CB E6 038F
        gbc.setState(0x3bbd, 0x17a9, 0x1e80, 0xd7ea, 0x4132, 0x19f0, 0x0, 0x0);
        gbc.writeMem(0x19f0, { 0xd4 });
        gbc.writeMem(0x3bbd, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x17a9);
        EXPECT(gbc.pc(), 0x3bbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E6 0390
        gbc.setState(0x8c75, 0xc4fc, 0xa9b0, 0x1719, 0xe6ab, 0x6ab, 0x0, 0x1);
        gbc.writeMem(0x6ab, { 0x93 });
        gbc.writeMem(0x8c75, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xc4fc);
        EXPECT(gbc.pc(), 0x8c77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c75), 0xcb);
        EXPECT(gbc.readMem(0x8c76), 0xe6);
        // CB E6 0393
        gbc.setState(0x578e, 0xa7a9, 0xda40, 0xed7f, 0x6b1b, 0xb611, 0x1, 0x1);
        gbc.writeMem(0x578e, { 0xcb, 0xe6 });
        gbc.writeMem(0xb611, { 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xa7a9);
        EXPECT(gbc.pc(), 0x5790);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb611), 0xf4);
        // CB E6 0394
        gbc.setState(0xd8e9, 0x8934, 0xa620, 0x60ec, 0x7074, 0xf128, 0x1, 0x1);
        gbc.writeMem(0xd8e9, { 0xcb, 0xe6 });
        gbc.writeMem(0xf128, { 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x8934);
        EXPECT(gbc.pc(), 0xd8eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8e9), 0xcb);
        EXPECT(gbc.readMem(0xd8ea), 0xe6);
        EXPECT(gbc.readMem(0xf128), 0xfe);
        // CB E6 0397
        gbc.setState(0x1907, 0x79e6, 0x2ec0, 0x12ac, 0x28c1, 0x3b12, 0x0, 0x0);
        gbc.writeMem(0x1907, { 0xcb, 0xe6 });
        gbc.writeMem(0x3b12, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x79e6);
        EXPECT(gbc.pc(), 0x1909);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E6 039A
        gbc.setState(0x3d2f, 0xbb85, 0x5b90, 0xb0d2, 0xffd7, 0xc3e2, 0x0, 0x1);
        gbc.writeMem(0x3d2f, { 0xcb, 0xe6 });
        gbc.writeMem(0xc3e2, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xbb85);
        EXPECT(gbc.pc(), 0x3d31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3e2), 0x59);
        // CB E6 039B
        gbc.setState(0x2d16, 0xb72b, 0x13b0, 0x196b, 0x6805, 0xf36e, 0x1, 0x0);
        gbc.writeMem(0x2d16, { 0xcb, 0xe6 });
        gbc.writeMem(0xf36e, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xb72b);
        EXPECT(gbc.pc(), 0x2d18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf36e), 0x5e);
        // CB E6 039C
        gbc.setState(0x8efe, 0x5e6d, 0xd9f0, 0xcbde, 0x3d5d, 0x5c0d, 0x1, 0x1);
        gbc.writeMem(0x5c0d, { 0xbd });
        gbc.writeMem(0x8efe, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x5e6d);
        EXPECT(gbc.pc(), 0x8f00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8efe), 0xcb);
        EXPECT(gbc.readMem(0x8eff), 0xe6);
        // CB E6 039E
        gbc.setState(0x5660, 0xe969, 0x80c0, 0x97c, 0x4c82, 0xd347, 0x0, 0x0);
        gbc.writeMem(0x5660, { 0xcb, 0xe6 });
        gbc.writeMem(0xd347, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xe969);
        EXPECT(gbc.pc(), 0x5662);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd347), 0xf3);
        // CB E6 03A1
        gbc.setState(0x5cb7, 0x63f5, 0xd7c0, 0xc015, 0x38e8, 0xb32a, 0x0, 0x1);
        gbc.writeMem(0x5cb7, { 0xcb, 0xe6 });
        gbc.writeMem(0xb32a, { 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x63f5);
        EXPECT(gbc.pc(), 0x5cb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb32a), 0xbc);
        // CB E6 03A3
        gbc.setState(0xd672, 0xcbd5, 0xd6c0, 0xc45d, 0x62d, 0xc472, 0x0, 0x0);
        gbc.writeMem(0xc472, { 0x36 });
        gbc.writeMem(0xd672, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xcbd5);
        EXPECT(gbc.pc(), 0xd674);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc472), 0x36);
        EXPECT(gbc.readMem(0xd672), 0xcb);
        EXPECT(gbc.readMem(0xd673), 0xe6);
        // CB E6 03A5
        gbc.setState(0xdc60, 0x4564, 0x6d70, 0x8e76, 0xe1bf, 0x50bd, 0x1, 0x1);
        gbc.writeMem(0x50bd, { 0xf4 });
        gbc.writeMem(0xdc60, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x4564);
        EXPECT(gbc.pc(), 0xdc62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc60), 0xcb);
        EXPECT(gbc.readMem(0xdc61), 0xe6);
        // CB E6 03A6
        gbc.setState(0xe28, 0xa669, 0xe510, 0xd1f4, 0xb879, 0x8e57, 0x0, 0x0);
        gbc.writeMem(0xe28, { 0xcb, 0xe6 });
        gbc.writeMem(0x8e57, { 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xa669);
        EXPECT(gbc.pc(), 0xe2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e57), 0x5b);
        // CB E6 03A8
        gbc.setState(0x2726, 0x7e5a, 0x60e0, 0x6dcb, 0x6ccd, 0xde03, 0x1, 0x1);
        gbc.writeMem(0x2726, { 0xcb, 0xe6 });
        gbc.writeMem(0xde03, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x7e5a);
        EXPECT(gbc.pc(), 0x2728);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde03), 0xf5);
        // CB E6 03A9
        gbc.setState(0x93b3, 0x13d4, 0x1430, 0xfe43, 0x9ec, 0xc5a6, 0x1, 0x0);
        gbc.writeMem(0x93b3, { 0xcb, 0xe6 });
        gbc.writeMem(0xc5a6, { 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x13d4);
        EXPECT(gbc.pc(), 0x93b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93b3), 0xcb);
        EXPECT(gbc.readMem(0x93b4), 0xe6);
        EXPECT(gbc.readMem(0xc5a6), 0xd4);
        // CB E6 03AA
        gbc.setState(0xef81, 0x1424, 0xe3d0, 0x9c56, 0x8dc5, 0xf0be, 0x0, 0x0);
        gbc.writeMem(0xef81, { 0xcb, 0xe6 });
        gbc.writeMem(0xf0be, { 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x1424);
        EXPECT(gbc.pc(), 0xef83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef81), 0xcb);
        EXPECT(gbc.readMem(0xef82), 0xe6);
        EXPECT(gbc.readMem(0xf0be), 0xf0);
        // CB E6 03AB
        gbc.setState(0xed49, 0xba88, 0x31f0, 0x369c, 0xe754, 0xb017, 0x1, 0x1);
        gbc.writeMem(0xb017, { 0x37 });
        gbc.writeMem(0xed49, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xba88);
        EXPECT(gbc.pc(), 0xed4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb017), 0x37);
        EXPECT(gbc.readMem(0xed49), 0xcb);
        EXPECT(gbc.readMem(0xed4a), 0xe6);
        // CB E6 03AD
        gbc.setState(0xa0cd, 0xa55c, 0x84b0, 0xbe6, 0xf08, 0xb404, 0x0, 0x0);
        gbc.writeMem(0xa0cd, { 0xcb, 0xe6 });
        gbc.writeMem(0xb404, { 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xa55c);
        EXPECT(gbc.pc(), 0xa0cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0cd), 0xcb);
        EXPECT(gbc.readMem(0xa0ce), 0xe6);
        EXPECT(gbc.readMem(0xb404), 0x5e);
        // CB E6 03AE
        gbc.setState(0xe79e, 0x3b22, 0xa200, 0xf9bc, 0xc608, 0xbf87, 0x1, 0x0);
        gbc.writeMem(0xbf87, { 0x86 });
        gbc.writeMem(0xe79e, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x3b22);
        EXPECT(gbc.pc(), 0xe7a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf87), 0x96);
        EXPECT(gbc.readMem(0xe79e), 0xcb);
        EXPECT(gbc.readMem(0xe79f), 0xe6);
        // CB E6 03AF
        gbc.setState(0x4f14, 0xb89c, 0xaa50, 0x55b7, 0x9911, 0x895d, 0x1, 0x1);
        gbc.writeMem(0x4f14, { 0xcb, 0xe6 });
        gbc.writeMem(0x895d, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xb89c);
        EXPECT(gbc.pc(), 0x4f16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x895d), 0x1b);
        // CB E6 03B1
        gbc.setState(0x8ade, 0xdcdd, 0x2a60, 0xb904, 0x4bc8, 0xe614, 0x1, 0x1);
        gbc.writeMem(0x8ade, { 0xcb, 0xe6 });
        gbc.writeMem(0xe614, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xdcdd);
        EXPECT(gbc.pc(), 0x8ae0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ade), 0xcb);
        EXPECT(gbc.readMem(0x8adf), 0xe6);
        EXPECT(gbc.readMem(0xe614), 0xdb);
        // CB E6 03B2
        gbc.setState(0xd58f, 0xd10b, 0x6e10, 0x8966, 0xd428, 0xf0f, 0x1, 0x0);
        gbc.writeMem(0xf0f, { 0xba });
        gbc.writeMem(0xd58f, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xd10b);
        EXPECT(gbc.pc(), 0xd591);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd58f), 0xcb);
        EXPECT(gbc.readMem(0xd590), 0xe6);
        // CB E6 03B5
        gbc.setState(0x278f, 0xdfdd, 0x9450, 0xa81f, 0x7cea, 0x7fc5, 0x1, 0x1);
        gbc.writeMem(0x278f, { 0xcb, 0xe6 });
        gbc.writeMem(0x7fc5, { 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xdfdd);
        EXPECT(gbc.pc(), 0x2791);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E6 03B7
        gbc.setState(0x1d26, 0x50a7, 0xf7b0, 0xbbf3, 0x726d, 0x3e99, 0x0, 0x0);
        gbc.writeMem(0x1d26, { 0xcb, 0xe6 });
        gbc.writeMem(0x3e99, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x50a7);
        EXPECT(gbc.pc(), 0x1d28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 03B8
        gbc.setState(0xd9, 0x814f, 0x3e90, 0x20dc, 0x200d, 0x2f58, 0x0, 0x1);
        gbc.writeMem(0xd9, { 0xcb, 0xe6 });
        gbc.writeMem(0x2f58, { 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x814f);
        EXPECT(gbc.pc(), 0xdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E6 03B9
        gbc.setState(0xe659, 0x4d39, 0x4ba0, 0x2959, 0xb8c6, 0x29c4, 0x1, 0x1);
        gbc.writeMem(0x29c4, { 0x97 });
        gbc.writeMem(0xe659, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x4d39);
        EXPECT(gbc.pc(), 0xe65b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe659), 0xcb);
        EXPECT(gbc.readMem(0xe65a), 0xe6);
        // CB E6 03BB
        gbc.setState(0x98b8, 0x2442, 0x4880, 0xa999, 0xad15, 0x8e8e, 0x0, 0x0);
        gbc.writeMem(0x8e8e, { 0x72 });
        gbc.writeMem(0x98b8, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x2442);
        EXPECT(gbc.pc(), 0x98ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e8e), 0x72);
        EXPECT(gbc.readMem(0x98b8), 0xcb);
        EXPECT(gbc.readMem(0x98b9), 0xe6);
        // CB E6 03BC
        gbc.setState(0xc9b4, 0x872b, 0xb440, 0xd2d, 0xffc4, 0xb1ac, 0x0, 0x1);
        gbc.writeMem(0xb1ac, { 0x88 });
        gbc.writeMem(0xc9b4, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x872b);
        EXPECT(gbc.pc(), 0xc9b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1ac), 0x98);
        EXPECT(gbc.readMem(0xc9b4), 0xcb);
        EXPECT(gbc.readMem(0xc9b5), 0xe6);
        // CB E6 03BD
        gbc.setState(0xa7d1, 0xc133, 0x29d0, 0xef70, 0x7b2f, 0x889, 0x0, 0x0);
        gbc.writeMem(0x889, { 0x36 });
        gbc.writeMem(0xa7d1, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xc133);
        EXPECT(gbc.pc(), 0xa7d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7d1), 0xcb);
        EXPECT(gbc.readMem(0xa7d2), 0xe6);
        // CB E6 03BE
        gbc.setState(0x1f75, 0x615d, 0xf3e0, 0x43b7, 0x2d5a, 0xd5de, 0x0, 0x1);
        gbc.writeMem(0x1f75, { 0xcb, 0xe6 });
        gbc.writeMem(0xd5de, { 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x615d);
        EXPECT(gbc.pc(), 0x1f77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5de), 0xde);
        // CB E6 03BF
        gbc.setState(0x1f02, 0xe580, 0xc990, 0xe752, 0x49a3, 0x9db1, 0x1, 0x1);
        gbc.writeMem(0x1f02, { 0xcb, 0xe6 });
        gbc.writeMem(0x9db1, { 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xe580);
        EXPECT(gbc.pc(), 0x1f04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9db1), 0xf2);
        // CB E6 03C0
        gbc.setState(0x6762, 0x531f, 0xd630, 0xb9a0, 0xd0b0, 0x8413, 0x1, 0x0);
        gbc.writeMem(0x6762, { 0xcb, 0xe6 });
        gbc.writeMem(0x8413, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x531f);
        EXPECT(gbc.pc(), 0x6764);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8413), 0xb7);
        // CB E6 03C1
        gbc.setState(0xc3ff, 0xda75, 0x50c0, 0xe070, 0x63db, 0x3f2, 0x0, 0x0);
        gbc.writeMem(0x3f2, { 0x77 });
        gbc.writeMem(0xc3ff, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xda75);
        EXPECT(gbc.pc(), 0xc401);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3ff), 0xcb);
        EXPECT(gbc.readMem(0xc400), 0xe6);
        // CB E6 03C2
        gbc.setState(0x15eb, 0x3800, 0x1b60, 0xb2ce, 0xf049, 0x1a17, 0x0, 0x1);
        gbc.writeMem(0x15eb, { 0xcb, 0xe6 });
        gbc.writeMem(0x1a17, { 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x3800);
        EXPECT(gbc.pc(), 0x15ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E6 03C3
        gbc.setState(0xc5c4, 0xcee7, 0xa8d0, 0x1481, 0x6580, 0xabed, 0x1, 0x1);
        gbc.writeMem(0xabed, { 0x4a });
        gbc.writeMem(0xc5c4, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xcee7);
        EXPECT(gbc.pc(), 0xc5c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabed), 0x5a);
        EXPECT(gbc.readMem(0xc5c4), 0xcb);
        EXPECT(gbc.readMem(0xc5c5), 0xe6);
        // CB E6 03C4
        gbc.setState(0xab65, 0x50b2, 0xd60, 0x968f, 0x198, 0x8757, 0x0, 0x0);
        gbc.writeMem(0x8757, { 0xc9 });
        gbc.writeMem(0xab65, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x50b2);
        EXPECT(gbc.pc(), 0xab67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8757), 0xd9);
        EXPECT(gbc.readMem(0xab65), 0xcb);
        EXPECT(gbc.readMem(0xab66), 0xe6);
        // CB E6 03C7
        gbc.setState(0x22c0, 0xf6b3, 0x1bf0, 0xc968, 0xcca5, 0x6157, 0x1, 0x1);
        gbc.writeMem(0x22c0, { 0xcb, 0xe6 });
        gbc.writeMem(0x6157, { 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xf6b3);
        EXPECT(gbc.pc(), 0x22c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 03C9
        gbc.setState(0x28a8, 0xaef5, 0xb140, 0xb0b3, 0xb1c, 0x3635, 0x0, 0x1);
        gbc.writeMem(0x28a8, { 0xcb, 0xe6 });
        gbc.writeMem(0x3635, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xaef5);
        EXPECT(gbc.pc(), 0x28aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E6 03CB
        gbc.setState(0x6f87, 0x649e, 0xd780, 0xfc13, 0x8dd6, 0xa091, 0x1, 0x1);
        gbc.writeMem(0x6f87, { 0xcb, 0xe6 });
        gbc.writeMem(0xa091, { 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x649e);
        EXPECT(gbc.pc(), 0x6f89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa091), 0xd4);
        // CB E6 03CC
        gbc.setState(0x198a, 0x4c5, 0x6940, 0x8c42, 0x1167, 0xd5cb, 0x0, 0x1);
        gbc.writeMem(0x198a, { 0xcb, 0xe6 });
        gbc.writeMem(0xd5cb, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x4c5);
        EXPECT(gbc.pc(), 0x198c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5cb), 0x9d);
        // CB E6 03D1
        gbc.setState(0xeca6, 0xb099, 0x750, 0x7039, 0xf4ba, 0xed8f, 0x0, 0x1);
        gbc.writeMem(0xeca6, { 0xcb, 0xe6 });
        gbc.writeMem(0xed8f, { 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xb099);
        EXPECT(gbc.pc(), 0xeca8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeca6), 0xcb);
        EXPECT(gbc.readMem(0xeca7), 0xe6);
        EXPECT(gbc.readMem(0xed8f), 0xb0);
        // CB E6 03D2
        gbc.setState(0x59e0, 0xc08f, 0xfe0, 0xef19, 0x5c26, 0x1ee4, 0x0, 0x0);
        gbc.writeMem(0x1ee4, { 0xde });
        gbc.writeMem(0x59e0, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xc08f);
        EXPECT(gbc.pc(), 0x59e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E6 03D3
        gbc.setState(0x77d2, 0xbdfa, 0xd990, 0x44ea, 0x0, 0xd55f, 0x1, 0x0);
        gbc.writeMem(0x77d2, { 0xcb, 0xe6 });
        gbc.writeMem(0xd55f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xbdfa);
        EXPECT(gbc.pc(), 0x77d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd55f), 0x5a);
        // CB E6 03D6
        gbc.setState(0x7540, 0x269d, 0x8190, 0x2868, 0x5e93, 0x3655, 0x1, 0x1);
        gbc.writeMem(0x3655, { 0x12 });
        gbc.writeMem(0x7540, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x269d);
        EXPECT(gbc.pc(), 0x7542);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E6 03D7
        gbc.setState(0x1455, 0xa35d, 0xaf80, 0x9247, 0xff06, 0xe0a1, 0x0, 0x1);
        gbc.writeMem(0x1455, { 0xcb, 0xe6 });
        gbc.writeMem(0xe0a1, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xa35d);
        EXPECT(gbc.pc(), 0x1457);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0a1), 0xd9);
        // CB E6 03DA
        gbc.setState(0x50bf, 0x660d, 0x2900, 0xa9c0, 0xf3c, 0x1278, 0x0, 0x1);
        gbc.writeMem(0x1278, { 0xfe });
        gbc.writeMem(0x50bf, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x660d);
        EXPECT(gbc.pc(), 0x50c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E6 03DB
        gbc.setState(0xdcd1, 0x18a9, 0x9300, 0x59b8, 0x5af8, 0xe9ed, 0x1, 0x1);
        gbc.writeMem(0xdcd1, { 0xcb, 0xe6 });
        gbc.writeMem(0xe9ed, { 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x18a9);
        EXPECT(gbc.pc(), 0xdcd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcd1), 0xcb);
        EXPECT(gbc.readMem(0xdcd2), 0xe6);
        EXPECT(gbc.readMem(0xe9ed), 0x9b);
        // CB E6 03DC
        gbc.setState(0x1254, 0xfd28, 0x9f0, 0x2367, 0x751, 0x6e52, 0x1, 0x0);
        gbc.writeMem(0x1254, { 0xcb, 0xe6 });
        gbc.writeMem(0x6e52, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xfd28);
        EXPECT(gbc.pc(), 0x1256);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E6 03DF
        gbc.setState(0x99a2, 0x9379, 0x5840, 0x5ffd, 0x4afc, 0xbde9, 0x0, 0x1);
        gbc.writeMem(0x99a2, { 0xcb, 0xe6 });
        gbc.writeMem(0xbde9, { 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x9379);
        EXPECT(gbc.pc(), 0x99a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99a2), 0xcb);
        EXPECT(gbc.readMem(0x99a3), 0xe6);
        EXPECT(gbc.readMem(0xbde9), 0xbc);
        // CB E6 03E0
        gbc.setState(0xd4b1, 0x23bb, 0xbd50, 0x4076, 0xdf89, 0xff47, 0x1, 0x1);
        gbc.writeMem(0xd4b1, { 0xcb, 0xe6 });
        gbc.writeMem(0xff47, { 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x23bb);
        EXPECT(gbc.pc(), 0xd4b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4b1), 0xcb);
        EXPECT(gbc.readMem(0xd4b2), 0xe6);
        EXPECT(gbc.readMem(0xff47), 0x98);
        // CB E6 03E1
        gbc.setState(0xd4a8, 0x952a, 0x7bf0, 0x5465, 0x9586, 0xb79d, 0x1, 0x1);
        gbc.writeMem(0xb79d, { 0xcf });
        gbc.writeMem(0xd4a8, { 0xcb, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x952a);
        EXPECT(gbc.pc(), 0xd4aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb79d), 0xdf);
        EXPECT(gbc.readMem(0xd4a8), 0xcb);
        EXPECT(gbc.readMem(0xd4a9), 0xe6);
        // CB E6 03E4
        gbc.setState(0x8c4f, 0xae87, 0x6420, 0x6291, 0xb2c5, 0xa9ea, 0x0, 0x0);
        gbc.writeMem(0x8c4f, { 0xcb, 0xe6 });
        gbc.writeMem(0xa9ea, { 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xae87);
        EXPECT(gbc.pc(), 0x8c51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c4f), 0xcb);
        EXPECT(gbc.readMem(0x8c50), 0xe6);
        EXPECT(gbc.readMem(0xa9ea), 0x56);
        // CB E6 03E5
        gbc.setState(0xc43c, 0xc2f6, 0x46a0, 0x5f2e, 0xb37b, 0xc4d1, 0x1, 0x1);
        gbc.writeMem(0xc43c, { 0xcb, 0xe6 });
        gbc.writeMem(0xc4d1, { 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xc2f6);
        EXPECT(gbc.pc(), 0xc43e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc43c), 0xcb);
        EXPECT(gbc.readMem(0xc43d), 0xe6);
        EXPECT(gbc.readMem(0xc4d1), 0x33);
        // CB E6 03E7
        gbc.setState(0xa120, 0x6c74, 0x4440, 0xbb7a, 0x93c3, 0xb471, 0x0, 0x1);
        gbc.writeMem(0xa120, { 0xcb, 0xe6 });
        gbc.writeMem(0xb471, { 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x6c74);
        EXPECT(gbc.pc(), 0xa122);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa120), 0xcb);
        EXPECT(gbc.readMem(0xa121), 0xe6);
        EXPECT(gbc.readMem(0xb471), 0x15);
    }
