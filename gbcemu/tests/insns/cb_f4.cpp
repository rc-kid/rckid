#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_cb_f4)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_cb_f4) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB F4 0000
        gbc.setState(0x835b, 0x28db, 0xda00, 0xa2d5, 0x8ffb, 0x6016, 0x0, 0x0);
        gbc.writeMem(0x835b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x28db);
        EXPECT(gbc.pc(), 0x835d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x835b), 0xcb);
        EXPECT(gbc.readMem(0x835c), 0xf4);
        // CB F4 0001
        gbc.setState(0xe1e6, 0x2c0, 0x4d10, 0x3f4e, 0xf066, 0xc674, 0x0, 0x0);
        gbc.writeMem(0xe1e6, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x2c0);
        EXPECT(gbc.pc(), 0xe1e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1e6), 0xcb);
        EXPECT(gbc.readMem(0xe1e7), 0xf4);
        // CB F4 0002
        gbc.setState(0xb9b0, 0xdf43, 0x3500, 0xc1a0, 0x7e2c, 0x39d6, 0x1, 0x0);
        gbc.writeMem(0xb9b0, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xdf43);
        EXPECT(gbc.pc(), 0xb9b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9b0), 0xcb);
        EXPECT(gbc.readMem(0xb9b1), 0xf4);
        // CB F4 0003
        gbc.setState(0x428a, 0xc297, 0xf540, 0xf969, 0x956e, 0xb96c, 0x1, 0x1);
        gbc.writeMem(0x428a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xc297);
        EXPECT(gbc.pc(), 0x428c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0004
        gbc.setState(0xdeda, 0x4746, 0x9160, 0x8c65, 0x4317, 0x7d76, 0x1, 0x1);
        gbc.writeMem(0xdeda, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x4746);
        EXPECT(gbc.pc(), 0xdedc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdeda), 0xcb);
        EXPECT(gbc.readMem(0xdedb), 0xf4);
        // CB F4 0005
        gbc.setState(0x1b5e, 0xeb79, 0x7050, 0x548f, 0xc2e3, 0x2501, 0x0, 0x0);
        gbc.writeMem(0x1b5e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xeb79);
        EXPECT(gbc.pc(), 0x1b60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0006
        gbc.setState(0x20dd, 0x8d7a, 0x18c0, 0xc91c, 0x70de, 0x37a8, 0x0, 0x0);
        gbc.writeMem(0x20dd, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x8d7a);
        EXPECT(gbc.pc(), 0x20df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0007
        gbc.setState(0x4edd, 0xc6b8, 0x3c60, 0x1461, 0x2449, 0x96e7, 0x0, 0x1);
        gbc.writeMem(0x4edd, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xc6b8);
        EXPECT(gbc.pc(), 0x4edf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0008
        gbc.setState(0x2f01, 0x4634, 0x1680, 0xd3b5, 0xb72e, 0x2a5a, 0x1, 0x1);
        gbc.writeMem(0x2f01, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x4634);
        EXPECT(gbc.pc(), 0x2f03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 000A
        gbc.setState(0x3cc6, 0x8a94, 0xdc10, 0xa228, 0x4795, 0xf928, 0x1, 0x1);
        gbc.writeMem(0x3cc6, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x8a94);
        EXPECT(gbc.pc(), 0x3cc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 000B
        gbc.setState(0x11e8, 0x17fc, 0x9a50, 0x865c, 0xe43b, 0x8ea6, 0x1, 0x0);
        gbc.writeMem(0x11e8, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x17fc);
        EXPECT(gbc.pc(), 0x11ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 000C
        gbc.setState(0x8c70, 0xaf27, 0x4170, 0xe3be, 0xcc73, 0xb4cb, 0x1, 0x1);
        gbc.writeMem(0x8c70, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xaf27);
        EXPECT(gbc.pc(), 0x8c72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c70), 0xcb);
        EXPECT(gbc.readMem(0x8c71), 0xf4);
        // CB F4 000D
        gbc.setState(0x5fc0, 0x3e48, 0x6c0, 0x61f6, 0x1d4b, 0x3fe9, 0x0, 0x1);
        gbc.writeMem(0x5fc0, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x3e48);
        EXPECT(gbc.pc(), 0x5fc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 000F
        gbc.setState(0xbb9e, 0xd1c0, 0x86e0, 0x208c, 0x7fb8, 0x8dec, 0x0, 0x1);
        gbc.writeMem(0xbb9e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xd1c0);
        EXPECT(gbc.pc(), 0xbba0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb9e), 0xcb);
        EXPECT(gbc.readMem(0xbb9f), 0xf4);
        // CB F4 0010
        gbc.setState(0xe81d, 0x44ad, 0x6bc0, 0x3210, 0x3dcd, 0xc135, 0x0, 0x1);
        gbc.writeMem(0xe81d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x44ad);
        EXPECT(gbc.pc(), 0xe81f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe81d), 0xcb);
        EXPECT(gbc.readMem(0xe81e), 0xf4);
        // CB F4 0012
        gbc.setState(0xa21f, 0xa378, 0x7a10, 0x4981, 0x882d, 0x4779, 0x1, 0x1);
        gbc.writeMem(0xa21f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xa378);
        EXPECT(gbc.pc(), 0xa221);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa21f), 0xcb);
        EXPECT(gbc.readMem(0xa220), 0xf4);
        // CB F4 0013
        gbc.setState(0x495b, 0x4f66, 0xf650, 0x42ac, 0x3dd9, 0x263d, 0x0, 0x1);
        gbc.writeMem(0x495b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x4f66);
        EXPECT(gbc.pc(), 0x495d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0015
        gbc.setState(0x35a9, 0xc278, 0xe370, 0x1b82, 0xdcd1, 0x243, 0x1, 0x1);
        gbc.writeMem(0x35a9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xc278);
        EXPECT(gbc.pc(), 0x35ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0016
        gbc.setState(0x99b1, 0x6382, 0x8d90, 0xe7cb, 0x224c, 0x3aa8, 0x0, 0x1);
        gbc.writeMem(0x99b1, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x6382);
        EXPECT(gbc.pc(), 0x99b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99b1), 0xcb);
        EXPECT(gbc.readMem(0x99b2), 0xf4);
        // CB F4 0017
        gbc.setState(0x80cd, 0xab92, 0xb400, 0xb4b2, 0x3cd, 0xfbc9, 0x1, 0x1);
        gbc.writeMem(0x80cd, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xab92);
        EXPECT(gbc.pc(), 0x80cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80cd), 0xcb);
        EXPECT(gbc.readMem(0x80ce), 0xf4);
        // CB F4 0018
        gbc.setState(0xc961, 0xacfd, 0x6f90, 0xb384, 0xff01, 0x4792, 0x1, 0x0);
        gbc.writeMem(0xc961, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xacfd);
        EXPECT(gbc.pc(), 0xc963);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc961), 0xcb);
        EXPECT(gbc.readMem(0xc962), 0xf4);
        // CB F4 0019
        gbc.setState(0x80ac, 0xa6b2, 0xf950, 0xb90, 0xc242, 0x6cba, 0x0, 0x0);
        gbc.writeMem(0x80ac, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xa6b2);
        EXPECT(gbc.pc(), 0x80ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80ac), 0xcb);
        EXPECT(gbc.readMem(0x80ad), 0xf4);
        // CB F4 001A
        gbc.setState(0x2591, 0x91a2, 0x2ff0, 0x3e13, 0xef77, 0x9ab8, 0x0, 0x0);
        gbc.writeMem(0x2591, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x91a2);
        EXPECT(gbc.pc(), 0x2593);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 001B
        gbc.setState(0x82b9, 0xfb0a, 0xc840, 0x4233, 0xe386, 0x1439, 0x0, 0x0);
        gbc.writeMem(0x82b9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xfb0a);
        EXPECT(gbc.pc(), 0x82bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82b9), 0xcb);
        EXPECT(gbc.readMem(0x82ba), 0xf4);
        // CB F4 001C
        gbc.setState(0x86dd, 0x1d2f, 0x400, 0x5758, 0x5f41, 0xdc66, 0x0, 0x0);
        gbc.writeMem(0x86dd, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x1d2f);
        EXPECT(gbc.pc(), 0x86df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86dd), 0xcb);
        EXPECT(gbc.readMem(0x86de), 0xf4);
        // CB F4 001D
        gbc.setState(0xe46c, 0xb57b, 0x9f40, 0x56b6, 0x5388, 0xdb4f, 0x0, 0x0);
        gbc.writeMem(0xe46c, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xb57b);
        EXPECT(gbc.pc(), 0xe46e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe46c), 0xcb);
        EXPECT(gbc.readMem(0xe46d), 0xf4);
        // CB F4 001E
        gbc.setState(0x72bd, 0xbc05, 0x4180, 0xd266, 0x2b31, 0x7615, 0x0, 0x1);
        gbc.writeMem(0x72bd, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xbc05);
        EXPECT(gbc.pc(), 0x72bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 001F
        gbc.setState(0x415d, 0x61b2, 0x7fc0, 0x5170, 0xc32d, 0x9dbc, 0x0, 0x0);
        gbc.writeMem(0x415d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x61b2);
        EXPECT(gbc.pc(), 0x415f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0020
        gbc.setState(0x555b, 0x31c6, 0x7b80, 0x8f39, 0xe6ff, 0xca66, 0x1, 0x1);
        gbc.writeMem(0x555b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x31c6);
        EXPECT(gbc.pc(), 0x555d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0021
        gbc.setState(0xacdc, 0x4976, 0xbdb0, 0xbebb, 0xc559, 0xc8bc, 0x1, 0x0);
        gbc.writeMem(0xacdc, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x4976);
        EXPECT(gbc.pc(), 0xacde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacdc), 0xcb);
        EXPECT(gbc.readMem(0xacdd), 0xf4);
        // CB F4 0022
        gbc.setState(0x6c29, 0xd24a, 0x6250, 0x7aa4, 0x7a78, 0xe4e, 0x0, 0x1);
        gbc.writeMem(0x6c29, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xd24a);
        EXPECT(gbc.pc(), 0x6c2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0023
        gbc.setState(0xb8b7, 0x2669, 0x86f0, 0xbbd0, 0x38f4, 0x78a6, 0x1, 0x0);
        gbc.writeMem(0xb8b7, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x2669);
        EXPECT(gbc.pc(), 0xb8b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8b7), 0xcb);
        EXPECT(gbc.readMem(0xb8b8), 0xf4);
        // CB F4 0024
        gbc.setState(0x199f, 0x25bb, 0x700, 0xb41d, 0x82f9, 0xbb2a, 0x0, 0x1);
        gbc.writeMem(0x199f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x25bb);
        EXPECT(gbc.pc(), 0x19a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0025
        gbc.setState(0xfe8, 0x338e, 0x2740, 0x4c7e, 0x859, 0xa605, 0x1, 0x1);
        gbc.writeMem(0xfe8, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x338e);
        EXPECT(gbc.pc(), 0xfea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0026
        gbc.setState(0x6dc, 0xa294, 0x25c0, 0x1f41, 0x8885, 0x14b0, 0x1, 0x1);
        gbc.writeMem(0x6dc, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xa294);
        EXPECT(gbc.pc(), 0x6de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0027
        gbc.setState(0x4c73, 0x85d9, 0x1110, 0x90af, 0x6d08, 0xa983, 0x1, 0x1);
        gbc.writeMem(0x4c73, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x85d9);
        EXPECT(gbc.pc(), 0x4c75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0028
        gbc.setState(0x44df, 0xd252, 0xfec0, 0x4d92, 0xec91, 0xe3d1, 0x0, 0x1);
        gbc.writeMem(0x44df, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xd252);
        EXPECT(gbc.pc(), 0x44e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0029
        gbc.setState(0xab56, 0x66e7, 0x2000, 0x8d5e, 0x62ea, 0x787f, 0x1, 0x1);
        gbc.writeMem(0xab56, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x66e7);
        EXPECT(gbc.pc(), 0xab58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab56), 0xcb);
        EXPECT(gbc.readMem(0xab57), 0xf4);
        // CB F4 002A
        gbc.setState(0xe531, 0x503f, 0xe9f0, 0x9aa5, 0xadcc, 0x4b50, 0x0, 0x0);
        gbc.writeMem(0xe531, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x503f);
        EXPECT(gbc.pc(), 0xe533);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe531), 0xcb);
        EXPECT(gbc.readMem(0xe532), 0xf4);
        // CB F4 002B
        gbc.setState(0xcb46, 0x9d91, 0xbcb0, 0x6665, 0x28e0, 0x2c0d, 0x1, 0x0);
        gbc.writeMem(0xcb46, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x9d91);
        EXPECT(gbc.pc(), 0xcb48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb46), 0xcb);
        EXPECT(gbc.readMem(0xcb47), 0xf4);
        // CB F4 002C
        gbc.setState(0x9ce5, 0xd59c, 0xdc40, 0xa8d1, 0xce72, 0x666c, 0x0, 0x1);
        gbc.writeMem(0x9ce5, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xd59c);
        EXPECT(gbc.pc(), 0x9ce7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ce5), 0xcb);
        EXPECT(gbc.readMem(0x9ce6), 0xf4);
        // CB F4 002D
        gbc.setState(0x5cb4, 0xdab5, 0xeeb0, 0x5c03, 0xbded, 0xc518, 0x1, 0x0);
        gbc.writeMem(0x5cb4, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xdab5);
        EXPECT(gbc.pc(), 0x5cb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 002E
        gbc.setState(0x98fc, 0x386f, 0xedf0, 0xc682, 0xad82, 0xac50, 0x1, 0x0);
        gbc.writeMem(0x98fc, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x386f);
        EXPECT(gbc.pc(), 0x98fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98fc), 0xcb);
        EXPECT(gbc.readMem(0x98fd), 0xf4);
        // CB F4 002F
        gbc.setState(0x4b52, 0xf771, 0x8410, 0xd050, 0x9cc9, 0xe24f, 0x0, 0x0);
        gbc.writeMem(0x4b52, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xf771);
        EXPECT(gbc.pc(), 0x4b54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0030
        gbc.setState(0x82fb, 0xcae, 0xf610, 0xca44, 0x5311, 0xce7f, 0x0, 0x0);
        gbc.writeMem(0x82fb, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xcae);
        EXPECT(gbc.pc(), 0x82fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82fb), 0xcb);
        EXPECT(gbc.readMem(0x82fc), 0xf4);
        // CB F4 0031
        gbc.setState(0xb247, 0x3317, 0x9b00, 0x721b, 0xcd16, 0xcfdd, 0x1, 0x1);
        gbc.writeMem(0xb247, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x3317);
        EXPECT(gbc.pc(), 0xb249);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb247), 0xcb);
        EXPECT(gbc.readMem(0xb248), 0xf4);
        // CB F4 0032
        gbc.setState(0x582e, 0x29e2, 0x260, 0x7606, 0xba1, 0x189b, 0x1, 0x0);
        gbc.writeMem(0x582e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x29e2);
        EXPECT(gbc.pc(), 0x5830);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0033
        gbc.setState(0xb3ad, 0xbb34, 0xbf80, 0x5b63, 0x93c, 0x348d, 0x1, 0x1);
        gbc.writeMem(0xb3ad, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xbb34);
        EXPECT(gbc.pc(), 0xb3af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3ad), 0xcb);
        EXPECT(gbc.readMem(0xb3ae), 0xf4);
        // CB F4 0034
        gbc.setState(0xaab0, 0x3740, 0xe160, 0x4bcd, 0x780c, 0x26df, 0x0, 0x1);
        gbc.writeMem(0xaab0, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x3740);
        EXPECT(gbc.pc(), 0xaab2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaab0), 0xcb);
        EXPECT(gbc.readMem(0xaab1), 0xf4);
        // CB F4 0035
        gbc.setState(0xc03b, 0xb831, 0x7120, 0x4ff7, 0xf4e0, 0xdc8c, 0x1, 0x0);
        gbc.writeMem(0xc03b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xb831);
        EXPECT(gbc.pc(), 0xc03d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc03b), 0xcb);
        EXPECT(gbc.readMem(0xc03c), 0xf4);
        // CB F4 0036
        gbc.setState(0x8b9a, 0xa67d, 0xa7a0, 0xa4da, 0xf008, 0x1078, 0x1, 0x1);
        gbc.writeMem(0x8b9a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xa67d);
        EXPECT(gbc.pc(), 0x8b9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b9a), 0xcb);
        EXPECT(gbc.readMem(0x8b9b), 0xf4);
        // CB F4 0037
        gbc.setState(0x3b43, 0x797d, 0x4540, 0x1008, 0xf46e, 0x2f6b, 0x0, 0x0);
        gbc.writeMem(0x3b43, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x797d);
        EXPECT(gbc.pc(), 0x3b45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0039
        gbc.setState(0x62e5, 0x8a7a, 0xaf40, 0x3ad0, 0xc68f, 0x42d1, 0x0, 0x0);
        gbc.writeMem(0x62e5, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x8a7a);
        EXPECT(gbc.pc(), 0x62e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 003A
        gbc.setState(0xa209, 0x9e06, 0x3450, 0x640a, 0xb730, 0x8972, 0x1, 0x0);
        gbc.writeMem(0xa209, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x9e06);
        EXPECT(gbc.pc(), 0xa20b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa209), 0xcb);
        EXPECT(gbc.readMem(0xa20a), 0xf4);
        // CB F4 003B
        gbc.setState(0x1766, 0x7527, 0xb470, 0x4a7c, 0x7d58, 0x820c, 0x1, 0x1);
        gbc.writeMem(0x1766, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x7527);
        EXPECT(gbc.pc(), 0x1768);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 003C
        gbc.setState(0xe251, 0xecf3, 0xf60, 0xdd9b, 0xe5a5, 0x4e80, 0x1, 0x1);
        gbc.writeMem(0xe251, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xecf3);
        EXPECT(gbc.pc(), 0xe253);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe251), 0xcb);
        EXPECT(gbc.readMem(0xe252), 0xf4);
        // CB F4 003D
        gbc.setState(0xbe7b, 0xea1c, 0x5900, 0xff36, 0xf807, 0xfce3, 0x0, 0x0);
        gbc.writeMem(0xbe7b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xea1c);
        EXPECT(gbc.pc(), 0xbe7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe7b), 0xcb);
        EXPECT(gbc.readMem(0xbe7c), 0xf4);
        // CB F4 003E
        gbc.setState(0x7a4d, 0x91bd, 0x4080, 0x8dd7, 0x8f1f, 0x2c83, 0x1, 0x1);
        gbc.writeMem(0x7a4d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x91bd);
        EXPECT(gbc.pc(), 0x7a4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 003F
        gbc.setState(0x7ffc, 0x78f6, 0xbb40, 0xb32f, 0xb9e9, 0x9144, 0x1, 0x1);
        gbc.writeMem(0x7ffc, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x78f6);
        EXPECT(gbc.pc(), 0x7ffe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0040
        gbc.setState(0xcb34, 0xc71b, 0x9f50, 0xa474, 0x523b, 0xadbb, 0x0, 0x1);
        gbc.writeMem(0xcb34, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xc71b);
        EXPECT(gbc.pc(), 0xcb36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb34), 0xcb);
        EXPECT(gbc.readMem(0xcb35), 0xf4);
        // CB F4 0041
        gbc.setState(0xb80f, 0xaf0d, 0x3590, 0x439, 0x27f4, 0xf4c9, 0x0, 0x1);
        gbc.writeMem(0xb80f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xaf0d);
        EXPECT(gbc.pc(), 0xb811);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb80f), 0xcb);
        EXPECT(gbc.readMem(0xb810), 0xf4);
        // CB F4 0042
        gbc.setState(0x2a06, 0xe4c5, 0x5da0, 0xde37, 0x8d5f, 0xdd2c, 0x0, 0x0);
        gbc.writeMem(0x2a06, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xe4c5);
        EXPECT(gbc.pc(), 0x2a08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0043
        gbc.setState(0x4888, 0x9d8d, 0xadf0, 0x9d28, 0xb623, 0xeb58, 0x0, 0x0);
        gbc.writeMem(0x4888, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x9d8d);
        EXPECT(gbc.pc(), 0x488a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0044
        gbc.setState(0xeb38, 0xd661, 0x5860, 0x9d8d, 0x4fdd, 0x7363, 0x1, 0x0);
        gbc.writeMem(0xeb38, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xd661);
        EXPECT(gbc.pc(), 0xeb3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb38), 0xcb);
        EXPECT(gbc.readMem(0xeb39), 0xf4);
        // CB F4 0045
        gbc.setState(0xc5be, 0xc45, 0x8b80, 0x6205, 0x6ce5, 0x924a, 0x1, 0x1);
        gbc.writeMem(0xc5be, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xc45);
        EXPECT(gbc.pc(), 0xc5c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5be), 0xcb);
        EXPECT(gbc.readMem(0xc5bf), 0xf4);
        // CB F4 0046
        gbc.setState(0xa78e, 0x2fe0, 0x12d0, 0x681b, 0x6d77, 0x2f7a, 0x0, 0x0);
        gbc.writeMem(0xa78e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x2fe0);
        EXPECT(gbc.pc(), 0xa790);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa78e), 0xcb);
        EXPECT(gbc.readMem(0xa78f), 0xf4);
        // CB F4 0047
        gbc.setState(0x1506, 0xad6f, 0xac00, 0x1bc4, 0xe8cb, 0x2d4e, 0x1, 0x1);
        gbc.writeMem(0x1506, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xad6f);
        EXPECT(gbc.pc(), 0x1508);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0048
        gbc.setState(0x20c8, 0x320e, 0x4620, 0xd05b, 0x67a6, 0x802e, 0x0, 0x1);
        gbc.writeMem(0x20c8, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x320e);
        EXPECT(gbc.pc(), 0x20ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0049
        gbc.setState(0xe40d, 0x81db, 0x7a40, 0x69af, 0x4b77, 0x25a9, 0x0, 0x1);
        gbc.writeMem(0xe40d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x81db);
        EXPECT(gbc.pc(), 0xe40f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe40d), 0xcb);
        EXPECT(gbc.readMem(0xe40e), 0xf4);
        // CB F4 004A
        gbc.setState(0x9e46, 0x8d6c, 0xe2b0, 0xa26f, 0xd54f, 0x649c, 0x1, 0x0);
        gbc.writeMem(0x9e46, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x8d6c);
        EXPECT(gbc.pc(), 0x9e48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e46), 0xcb);
        EXPECT(gbc.readMem(0x9e47), 0xf4);
        // CB F4 004B
        gbc.setState(0x53f2, 0xfb5, 0xbd30, 0xec5d, 0x6820, 0xafcd, 0x1, 0x0);
        gbc.writeMem(0x53f2, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xfb5);
        EXPECT(gbc.pc(), 0x53f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 004C
        gbc.setState(0xbd24, 0x8552, 0x8da0, 0xe25d, 0xfadc, 0x15da, 0x0, 0x1);
        gbc.writeMem(0xbd24, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x8552);
        EXPECT(gbc.pc(), 0xbd26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd24), 0xcb);
        EXPECT(gbc.readMem(0xbd25), 0xf4);
        // CB F4 004D
        gbc.setState(0xeb32, 0xdf98, 0x10b0, 0x8573, 0x51b3, 0x4df0, 0x0, 0x1);
        gbc.writeMem(0xeb32, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xdf98);
        EXPECT(gbc.pc(), 0xeb34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb32), 0xcb);
        EXPECT(gbc.readMem(0xeb33), 0xf4);
        // CB F4 004E
        gbc.setState(0x948a, 0x8c80, 0x6080, 0xcc04, 0x5471, 0xa91a, 0x1, 0x0);
        gbc.writeMem(0x948a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x8c80);
        EXPECT(gbc.pc(), 0x948c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x948a), 0xcb);
        EXPECT(gbc.readMem(0x948b), 0xf4);
        // CB F4 004F
        gbc.setState(0x52b9, 0x9e8f, 0xf140, 0xdecd, 0xe58e, 0xd9fe, 0x0, 0x0);
        gbc.writeMem(0x52b9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x9e8f);
        EXPECT(gbc.pc(), 0x52bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0050
        gbc.setState(0x2222, 0xb7ab, 0x35e0, 0x584e, 0x1345, 0x4cf7, 0x0, 0x1);
        gbc.writeMem(0x2222, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xb7ab);
        EXPECT(gbc.pc(), 0x2224);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0051
        gbc.setState(0xd55d, 0xa2b, 0x6880, 0x4756, 0x107b, 0x90dd, 0x0, 0x1);
        gbc.writeMem(0xd55d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xa2b);
        EXPECT(gbc.pc(), 0xd55f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd55d), 0xcb);
        EXPECT(gbc.readMem(0xd55e), 0xf4);
        // CB F4 0052
        gbc.setState(0x16a, 0x4e67, 0x9b0, 0x7598, 0xa6e2, 0x8b81, 0x1, 0x0);
        gbc.writeMem(0x16a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x4e67);
        EXPECT(gbc.pc(), 0x16c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0054
        gbc.setState(0xbb96, 0x6511, 0x2ec0, 0x3dfa, 0x4246, 0x123e, 0x1, 0x1);
        gbc.writeMem(0xbb96, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x6511);
        EXPECT(gbc.pc(), 0xbb98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb96), 0xcb);
        EXPECT(gbc.readMem(0xbb97), 0xf4);
        // CB F4 0055
        gbc.setState(0x74eb, 0x86c6, 0x8440, 0x9292, 0x78b, 0x4ca3, 0x1, 0x0);
        gbc.writeMem(0x74eb, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x86c6);
        EXPECT(gbc.pc(), 0x74ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0056
        gbc.setState(0xbbca, 0xee68, 0xd360, 0x940c, 0x9389, 0x1b3d, 0x0, 0x0);
        gbc.writeMem(0xbbca, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xee68);
        EXPECT(gbc.pc(), 0xbbcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbca), 0xcb);
        EXPECT(gbc.readMem(0xbbcb), 0xf4);
        // CB F4 0057
        gbc.setState(0x7d8a, 0x470e, 0x9170, 0xf38c, 0x2cda, 0xa926, 0x1, 0x0);
        gbc.writeMem(0x7d8a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x470e);
        EXPECT(gbc.pc(), 0x7d8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0058
        gbc.setState(0x11de, 0x3231, 0xf950, 0x1041, 0x3c76, 0xe583, 0x1, 0x0);
        gbc.writeMem(0x11de, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x3231);
        EXPECT(gbc.pc(), 0x11e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0059
        gbc.setState(0xbb21, 0xd50, 0x96c0, 0x63ca, 0x291d, 0xfd74, 0x0, 0x1);
        gbc.writeMem(0xbb21, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xd50);
        EXPECT(gbc.pc(), 0xbb23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb21), 0xcb);
        EXPECT(gbc.readMem(0xbb22), 0xf4);
        // CB F4 005A
        gbc.setState(0xc246, 0x788c, 0x8080, 0xcc0, 0x7c99, 0x9916, 0x0, 0x1);
        gbc.writeMem(0xc246, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x788c);
        EXPECT(gbc.pc(), 0xc248);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc246), 0xcb);
        EXPECT(gbc.readMem(0xc247), 0xf4);
        // CB F4 005B
        gbc.setState(0x1dbb, 0xa8d1, 0xbcc0, 0x5c46, 0x7cb9, 0xdd46, 0x1, 0x1);
        gbc.writeMem(0x1dbb, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xa8d1);
        EXPECT(gbc.pc(), 0x1dbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 005C
        gbc.setState(0x47cd, 0xf5e6, 0x9ec0, 0x178, 0x5959, 0x492c, 0x1, 0x0);
        gbc.writeMem(0x47cd, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xf5e6);
        EXPECT(gbc.pc(), 0x47cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 005D
        gbc.setState(0x258c, 0x4554, 0x9ea0, 0x342f, 0xc926, 0x6239, 0x0, 0x0);
        gbc.writeMem(0x258c, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x4554);
        EXPECT(gbc.pc(), 0x258e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 005E
        gbc.setState(0x18c0, 0xa2ce, 0x1db0, 0xe3e8, 0xc427, 0xdccb, 0x0, 0x0);
        gbc.writeMem(0x18c0, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xa2ce);
        EXPECT(gbc.pc(), 0x18c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 005F
        gbc.setState(0xba44, 0x8f5a, 0x9a0, 0x68d1, 0xe45a, 0xf218, 0x0, 0x1);
        gbc.writeMem(0xba44, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x8f5a);
        EXPECT(gbc.pc(), 0xba46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba44), 0xcb);
        EXPECT(gbc.readMem(0xba45), 0xf4);
        // CB F4 0060
        gbc.setState(0x4e2d, 0x2ebe, 0xda30, 0xeb9a, 0xadcc, 0x8237, 0x1, 0x1);
        gbc.writeMem(0x4e2d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x2ebe);
        EXPECT(gbc.pc(), 0x4e2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0061
        gbc.setState(0x45dc, 0x8d8b, 0xc600, 0xb51a, 0x7895, 0xc87b, 0x0, 0x1);
        gbc.writeMem(0x45dc, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x8d8b);
        EXPECT(gbc.pc(), 0x45de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0062
        gbc.setState(0x7fbe, 0xbd6, 0xa1c0, 0x2dcc, 0x2f34, 0x2729, 0x1, 0x1);
        gbc.writeMem(0x7fbe, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xbd6);
        EXPECT(gbc.pc(), 0x7fc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0063
        gbc.setState(0xb75d, 0xfa0a, 0xd90, 0x31, 0x14e5, 0x70a7, 0x0, 0x0);
        gbc.writeMem(0xb75d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xfa0a);
        EXPECT(gbc.pc(), 0xb75f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb75d), 0xcb);
        EXPECT(gbc.readMem(0xb75e), 0xf4);
        // CB F4 0064
        gbc.setState(0x63b2, 0x6d0a, 0x7c90, 0x3232, 0x830b, 0xc6ca, 0x0, 0x0);
        gbc.writeMem(0x63b2, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x6d0a);
        EXPECT(gbc.pc(), 0x63b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0065
        gbc.setState(0x46b6, 0x4e59, 0xe2c0, 0x5282, 0x8f2e, 0xefdf, 0x1, 0x0);
        gbc.writeMem(0x46b6, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x4e59);
        EXPECT(gbc.pc(), 0x46b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0066
        gbc.setState(0x9c14, 0xc647, 0xdb50, 0x73fa, 0x2683, 0xcc62, 0x1, 0x1);
        gbc.writeMem(0x9c14, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xc647);
        EXPECT(gbc.pc(), 0x9c16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c14), 0xcb);
        EXPECT(gbc.readMem(0x9c15), 0xf4);
        // CB F4 0067
        gbc.setState(0xab3b, 0x85fc, 0xd530, 0xa8fc, 0xd38d, 0xd18a, 0x0, 0x0);
        gbc.writeMem(0xab3b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x85fc);
        EXPECT(gbc.pc(), 0xab3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab3b), 0xcb);
        EXPECT(gbc.readMem(0xab3c), 0xf4);
        // CB F4 0068
        gbc.setState(0xd3de, 0x83c1, 0x8460, 0xd44f, 0x7b4e, 0x6203, 0x1, 0x0);
        gbc.writeMem(0xd3de, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x83c1);
        EXPECT(gbc.pc(), 0xd3e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3de), 0xcb);
        EXPECT(gbc.readMem(0xd3df), 0xf4);
        // CB F4 0069
        gbc.setState(0xd0f3, 0x3b2, 0xe7a0, 0x6eee, 0xd0ae, 0x47ec, 0x1, 0x0);
        gbc.writeMem(0xd0f3, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x3b2);
        EXPECT(gbc.pc(), 0xd0f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0f3), 0xcb);
        EXPECT(gbc.readMem(0xd0f4), 0xf4);
        // CB F4 006A
        gbc.setState(0x5dab, 0x84a6, 0x72d0, 0x85d, 0xc96f, 0x4971, 0x1, 0x0);
        gbc.writeMem(0x5dab, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x84a6);
        EXPECT(gbc.pc(), 0x5dad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 006C
        gbc.setState(0x6613, 0x7765, 0x1e30, 0xf1b0, 0x4abc, 0xab81, 0x0, 0x0);
        gbc.writeMem(0x6613, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x7765);
        EXPECT(gbc.pc(), 0x6615);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 006D
        gbc.setState(0x1fd3, 0x98a5, 0x5af0, 0xa93, 0x3d57, 0x50ab, 0x1, 0x0);
        gbc.writeMem(0x1fd3, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x98a5);
        EXPECT(gbc.pc(), 0x1fd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 006E
        gbc.setState(0x651, 0x7efa, 0xd350, 0xd9d9, 0xcb43, 0xf91c, 0x1, 0x1);
        gbc.writeMem(0x651, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x7efa);
        EXPECT(gbc.pc(), 0x653);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 006F
        gbc.setState(0x2938, 0x100c, 0x1980, 0xd476, 0xebd9, 0x6432, 0x0, 0x0);
        gbc.writeMem(0x2938, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x100c);
        EXPECT(gbc.pc(), 0x293a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0070
        gbc.setState(0xab6, 0x7143, 0x21d0, 0xb7e, 0x26f9, 0x53d6, 0x0, 0x0);
        gbc.writeMem(0xab6, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x7143);
        EXPECT(gbc.pc(), 0xab8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0071
        gbc.setState(0x3ece, 0x2e39, 0xfa60, 0xce64, 0x526b, 0x9bb2, 0x1, 0x1);
        gbc.writeMem(0x3ece, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x2e39);
        EXPECT(gbc.pc(), 0x3ed0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0072
        gbc.setState(0xac47, 0x1735, 0xd9d0, 0x8b67, 0x7d2, 0x7b9f, 0x1, 0x1);
        gbc.writeMem(0xac47, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x1735);
        EXPECT(gbc.pc(), 0xac49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac47), 0xcb);
        EXPECT(gbc.readMem(0xac48), 0xf4);
        // CB F4 0073
        gbc.setState(0xad5e, 0x9f05, 0x1290, 0xd618, 0x44a, 0xf0a7, 0x1, 0x0);
        gbc.writeMem(0xad5e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x9f05);
        EXPECT(gbc.pc(), 0xad60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad5e), 0xcb);
        EXPECT(gbc.readMem(0xad5f), 0xf4);
        // CB F4 0074
        gbc.setState(0x9214, 0x41fc, 0xd570, 0xf4b, 0xe923, 0xa383, 0x0, 0x1);
        gbc.writeMem(0x9214, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x41fc);
        EXPECT(gbc.pc(), 0x9216);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9214), 0xcb);
        EXPECT(gbc.readMem(0x9215), 0xf4);
        // CB F4 0075
        gbc.setState(0x166e, 0x5e3f, 0xc760, 0xd6d8, 0x6803, 0xbf12, 0x1, 0x0);
        gbc.writeMem(0x166e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x5e3f);
        EXPECT(gbc.pc(), 0x1670);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0076
        gbc.setState(0x9565, 0x720c, 0x6410, 0xc441, 0x842, 0xf166, 0x0, 0x1);
        gbc.writeMem(0x9565, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x720c);
        EXPECT(gbc.pc(), 0x9567);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9565), 0xcb);
        EXPECT(gbc.readMem(0x9566), 0xf4);
        // CB F4 0077
        gbc.setState(0x6d39, 0x6c6d, 0xa900, 0x32c6, 0xecef, 0xdf83, 0x0, 0x0);
        gbc.writeMem(0x6d39, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x6c6d);
        EXPECT(gbc.pc(), 0x6d3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0078
        gbc.setState(0x1fb5, 0x729b, 0x1bc0, 0x5007, 0x380c, 0xcc13, 0x1, 0x1);
        gbc.writeMem(0x1fb5, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x729b);
        EXPECT(gbc.pc(), 0x1fb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0079
        gbc.setState(0xbd9a, 0xa234, 0x5c00, 0x2d27, 0x2899, 0x6f4, 0x1, 0x1);
        gbc.writeMem(0xbd9a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xa234);
        EXPECT(gbc.pc(), 0xbd9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd9a), 0xcb);
        EXPECT(gbc.readMem(0xbd9b), 0xf4);
        // CB F4 007A
        gbc.setState(0xcce5, 0xab78, 0xfcf0, 0xe38c, 0x5ff4, 0xd8f3, 0x1, 0x1);
        gbc.writeMem(0xcce5, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xab78);
        EXPECT(gbc.pc(), 0xcce7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcce5), 0xcb);
        EXPECT(gbc.readMem(0xcce6), 0xf4);
        // CB F4 007B
        gbc.setState(0xd6ef, 0xc8b4, 0xd900, 0xfc25, 0x361, 0xec16, 0x0, 0x0);
        gbc.writeMem(0xd6ef, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xc8b4);
        EXPECT(gbc.pc(), 0xd6f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6ef), 0xcb);
        EXPECT(gbc.readMem(0xd6f0), 0xf4);
        // CB F4 007D
        gbc.setState(0x7001, 0x46ba, 0xc00, 0x3320, 0xff3a, 0x8905, 0x1, 0x1);
        gbc.writeMem(0x7001, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x46ba);
        EXPECT(gbc.pc(), 0x7003);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 007E
        gbc.setState(0x4583, 0x178e, 0x7c60, 0xc20d, 0x690e, 0xc4e0, 0x0, 0x1);
        gbc.writeMem(0x4583, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x178e);
        EXPECT(gbc.pc(), 0x4585);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 007F
        gbc.setState(0x2836, 0x46b0, 0x2930, 0x1ceb, 0x7291, 0xc256, 0x0, 0x1);
        gbc.writeMem(0x2836, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x46b0);
        EXPECT(gbc.pc(), 0x2838);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0080
        gbc.setState(0xdf23, 0xde4a, 0x20b0, 0xebec, 0xc634, 0x3020, 0x1, 0x0);
        gbc.writeMem(0xdf23, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xde4a);
        EXPECT(gbc.pc(), 0xdf25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf23), 0xcb);
        EXPECT(gbc.readMem(0xdf24), 0xf4);
        // CB F4 0081
        gbc.setState(0x61b2, 0xf08e, 0xdce0, 0x3a8d, 0xf3a6, 0xb0ff, 0x1, 0x1);
        gbc.writeMem(0x61b2, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xf08e);
        EXPECT(gbc.pc(), 0x61b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0082
        gbc.setState(0xbc4a, 0x9788, 0xa450, 0xb59e, 0x5317, 0xf1e9, 0x0, 0x0);
        gbc.writeMem(0xbc4a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x9788);
        EXPECT(gbc.pc(), 0xbc4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc4a), 0xcb);
        EXPECT(gbc.readMem(0xbc4b), 0xf4);
        // CB F4 0083
        gbc.setState(0x532, 0xa964, 0xe550, 0x2cf0, 0xe975, 0x7e11, 0x1, 0x0);
        gbc.writeMem(0x532, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xa964);
        EXPECT(gbc.pc(), 0x534);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0084
        gbc.setState(0x9d4a, 0xa22e, 0x67c0, 0xcd5f, 0xa139, 0xa67a, 0x1, 0x0);
        gbc.writeMem(0x9d4a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xa22e);
        EXPECT(gbc.pc(), 0x9d4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d4a), 0xcb);
        EXPECT(gbc.readMem(0x9d4b), 0xf4);
        // CB F4 0085
        gbc.setState(0xbe68, 0x5d59, 0xd470, 0x181b, 0xd88d, 0x8528, 0x1, 0x0);
        gbc.writeMem(0xbe68, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x5d59);
        EXPECT(gbc.pc(), 0xbe6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe68), 0xcb);
        EXPECT(gbc.readMem(0xbe69), 0xf4);
        // CB F4 0086
        gbc.setState(0xda69, 0xfa58, 0x4eb0, 0x51b6, 0xe682, 0x48a, 0x0, 0x0);
        gbc.writeMem(0xda69, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xfa58);
        EXPECT(gbc.pc(), 0xda6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda69), 0xcb);
        EXPECT(gbc.readMem(0xda6a), 0xf4);
        // CB F4 0087
        gbc.setState(0xec48, 0x6121, 0xb4a0, 0x16f8, 0xee1d, 0xa867, 0x1, 0x1);
        gbc.writeMem(0xec48, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x6121);
        EXPECT(gbc.pc(), 0xec4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec48), 0xcb);
        EXPECT(gbc.readMem(0xec49), 0xf4);
        // CB F4 0088
        gbc.setState(0xe9d6, 0xe571, 0x55c0, 0xa302, 0x4a37, 0x40f9, 0x1, 0x0);
        gbc.writeMem(0xe9d6, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xe571);
        EXPECT(gbc.pc(), 0xe9d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9d6), 0xcb);
        EXPECT(gbc.readMem(0xe9d7), 0xf4);
        // CB F4 0089
        gbc.setState(0x3476, 0xc274, 0x5bf0, 0x617b, 0x6ccb, 0x429c, 0x0, 0x1);
        gbc.writeMem(0x3476, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xc274);
        EXPECT(gbc.pc(), 0x3478);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 008A
        gbc.setState(0x88ee, 0x219f, 0x8ca0, 0x4583, 0xce93, 0x4af2, 0x0, 0x0);
        gbc.writeMem(0x88ee, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x219f);
        EXPECT(gbc.pc(), 0x88f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88ee), 0xcb);
        EXPECT(gbc.readMem(0x88ef), 0xf4);
        // CB F4 008B
        gbc.setState(0xdba7, 0xeca8, 0x7470, 0x6ed1, 0xc722, 0x1bd4, 0x0, 0x1);
        gbc.writeMem(0xdba7, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xeca8);
        EXPECT(gbc.pc(), 0xdba9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdba7), 0xcb);
        EXPECT(gbc.readMem(0xdba8), 0xf4);
        // CB F4 008C
        gbc.setState(0x5c45, 0x7160, 0xc9f0, 0xb799, 0xca24, 0x4975, 0x1, 0x0);
        gbc.writeMem(0x5c45, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x7160);
        EXPECT(gbc.pc(), 0x5c47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 008D
        gbc.setState(0x2a0e, 0x22a7, 0x7ed0, 0xa361, 0x4063, 0xb37c, 0x1, 0x0);
        gbc.writeMem(0x2a0e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x22a7);
        EXPECT(gbc.pc(), 0x2a10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 008E
        gbc.setState(0x4127, 0xaf62, 0x9500, 0x1503, 0xea1c, 0xb1ad, 0x1, 0x1);
        gbc.writeMem(0x4127, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xaf62);
        EXPECT(gbc.pc(), 0x4129);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 008F
        gbc.setState(0x12a5, 0xedb4, 0xa520, 0x6bd9, 0x835b, 0x44e4, 0x1, 0x0);
        gbc.writeMem(0x12a5, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xedb4);
        EXPECT(gbc.pc(), 0x12a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0090
        gbc.setState(0x78a6, 0xfda9, 0xbcb0, 0x7749, 0x4130, 0x52f4, 0x1, 0x0);
        gbc.writeMem(0x78a6, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xfda9);
        EXPECT(gbc.pc(), 0x78a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0091
        gbc.setState(0xb890, 0x220, 0x3e80, 0xac, 0xdfb1, 0x8994, 0x0, 0x0);
        gbc.writeMem(0xb890, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x220);
        EXPECT(gbc.pc(), 0xb892);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb890), 0xcb);
        EXPECT(gbc.readMem(0xb891), 0xf4);
        // CB F4 0092
        gbc.setState(0x3efb, 0x3ba2, 0x5de0, 0x2dce, 0x4f9f, 0xc20a, 0x1, 0x1);
        gbc.writeMem(0x3efb, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x3ba2);
        EXPECT(gbc.pc(), 0x3efd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0093
        gbc.setState(0xdd39, 0x1ff1, 0xc420, 0xc3, 0x9b52, 0xf6ec, 0x1, 0x1);
        gbc.writeMem(0xdd39, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x1ff1);
        EXPECT(gbc.pc(), 0xdd3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd39), 0xcb);
        EXPECT(gbc.readMem(0xdd3a), 0xf4);
        // CB F4 0094
        gbc.setState(0x4e0e, 0x209, 0x9310, 0x1e0e, 0x3583, 0xe3a, 0x0, 0x0);
        gbc.writeMem(0x4e0e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x209);
        EXPECT(gbc.pc(), 0x4e10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0095
        gbc.setState(0x45c3, 0xbbff, 0x52a0, 0x2fc3, 0xb4d5, 0xe0e6, 0x1, 0x1);
        gbc.writeMem(0x45c3, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xbbff);
        EXPECT(gbc.pc(), 0x45c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0096
        gbc.setState(0x44f6, 0xebe1, 0x71b0, 0x6fbd, 0x2f44, 0x1d78, 0x1, 0x1);
        gbc.writeMem(0x44f6, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xebe1);
        EXPECT(gbc.pc(), 0x44f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0098
        gbc.setState(0x8821, 0x9ad8, 0x79c0, 0x66e0, 0xee54, 0x52cf, 0x1, 0x0);
        gbc.writeMem(0x8821, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x9ad8);
        EXPECT(gbc.pc(), 0x8823);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8821), 0xcb);
        EXPECT(gbc.readMem(0x8822), 0xf4);
        // CB F4 0099
        gbc.setState(0xe47e, 0x3b4e, 0xaf20, 0xd596, 0x11fd, 0x4655, 0x1, 0x0);
        gbc.writeMem(0xe47e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x3b4e);
        EXPECT(gbc.pc(), 0xe480);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe47e), 0xcb);
        EXPECT(gbc.readMem(0xe47f), 0xf4);
        // CB F4 009A
        gbc.setState(0xc6f9, 0x1428, 0xc940, 0xa6cc, 0x55bb, 0xb1de, 0x0, 0x0);
        gbc.writeMem(0xc6f9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x1428);
        EXPECT(gbc.pc(), 0xc6fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6f9), 0xcb);
        EXPECT(gbc.readMem(0xc6fa), 0xf4);
        // CB F4 009B
        gbc.setState(0x526e, 0xab73, 0x870, 0x3475, 0x6c1e, 0x347c, 0x0, 0x1);
        gbc.writeMem(0x526e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xab73);
        EXPECT(gbc.pc(), 0x5270);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 009C
        gbc.setState(0x7d97, 0x4a55, 0xa420, 0xc861, 0x791c, 0xdf8a, 0x0, 0x1);
        gbc.writeMem(0x7d97, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x4a55);
        EXPECT(gbc.pc(), 0x7d99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 009D
        gbc.setState(0x34de, 0xa6de, 0x7c0, 0xbb92, 0x223, 0x3053, 0x0, 0x1);
        gbc.writeMem(0x34de, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xa6de);
        EXPECT(gbc.pc(), 0x34e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 009E
        gbc.setState(0x6248, 0x4e5, 0xb690, 0xd67a, 0xbe6a, 0x571e, 0x0, 0x1);
        gbc.writeMem(0x6248, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x4e5);
        EXPECT(gbc.pc(), 0x624a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 009F
        gbc.setState(0x6bdd, 0x545c, 0x48e0, 0x8568, 0x68fe, 0x6e36, 0x0, 0x1);
        gbc.writeMem(0x6bdd, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x545c);
        EXPECT(gbc.pc(), 0x6bdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00A0
        gbc.setState(0xd6f6, 0x6f08, 0x9790, 0xb4cf, 0xe5cf, 0x70b4, 0x0, 0x0);
        gbc.writeMem(0xd6f6, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x6f08);
        EXPECT(gbc.pc(), 0xd6f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6f6), 0xcb);
        EXPECT(gbc.readMem(0xd6f7), 0xf4);
        // CB F4 00A1
        gbc.setState(0x9561, 0x98c3, 0x1a00, 0x4d5d, 0xb386, 0xce9f, 0x1, 0x0);
        gbc.writeMem(0x9561, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x98c3);
        EXPECT(gbc.pc(), 0x9563);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9561), 0xcb);
        EXPECT(gbc.readMem(0x9562), 0xf4);
        // CB F4 00A3
        gbc.setState(0x6d43, 0x1b2, 0x8940, 0x7f6e, 0x2872, 0x3149, 0x0, 0x1);
        gbc.writeMem(0x6d43, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x1b2);
        EXPECT(gbc.pc(), 0x6d45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00A4
        gbc.setState(0x4703, 0xcec9, 0x3790, 0x8ed3, 0x20fd, 0x22dc, 0x1, 0x1);
        gbc.writeMem(0x4703, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xcec9);
        EXPECT(gbc.pc(), 0x4705);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 00A5
        gbc.setState(0x8da, 0xd21b, 0xcb20, 0xfb97, 0xcb85, 0x93f9, 0x1, 0x0);
        gbc.writeMem(0x8da, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xd21b);
        EXPECT(gbc.pc(), 0x8dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00A7
        gbc.setState(0x2382, 0xaa3, 0x7080, 0xc87f, 0x2820, 0x6830, 0x0, 0x1);
        gbc.writeMem(0x2382, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xaa3);
        EXPECT(gbc.pc(), 0x2384);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00A8
        gbc.setState(0x79dc, 0x3200, 0xfd80, 0x7df6, 0x5932, 0x3638, 0x1, 0x1);
        gbc.writeMem(0x79dc, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x3200);
        EXPECT(gbc.pc(), 0x79de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00A9
        gbc.setState(0xdd2e, 0xf2b9, 0xb520, 0xdabf, 0xa524, 0xfed2, 0x1, 0x1);
        gbc.writeMem(0xdd2e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xf2b9);
        EXPECT(gbc.pc(), 0xdd30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd2e), 0xcb);
        EXPECT(gbc.readMem(0xdd2f), 0xf4);
        // CB F4 00AA
        gbc.setState(0x904b, 0x5748, 0x3cd0, 0x893, 0x33c4, 0x1dd1, 0x1, 0x0);
        gbc.writeMem(0x904b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x5748);
        EXPECT(gbc.pc(), 0x904d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x904b), 0xcb);
        EXPECT(gbc.readMem(0x904c), 0xf4);
        // CB F4 00AC
        gbc.setState(0x8d52, 0xa218, 0x3c00, 0xaf22, 0x98c, 0x5d74, 0x0, 0x1);
        gbc.writeMem(0x8d52, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xa218);
        EXPECT(gbc.pc(), 0x8d54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d52), 0xcb);
        EXPECT(gbc.readMem(0x8d53), 0xf4);
        // CB F4 00AD
        gbc.setState(0x5648, 0xe778, 0x2800, 0xa218, 0xa3bd, 0x7a98, 0x0, 0x1);
        gbc.writeMem(0x5648, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xe778);
        EXPECT(gbc.pc(), 0x564a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00AE
        gbc.setState(0x1b8d, 0x9eb2, 0xb9a0, 0x517d, 0x2d82, 0x59f0, 0x0, 0x0);
        gbc.writeMem(0x1b8d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x9eb2);
        EXPECT(gbc.pc(), 0x1b8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00AF
        gbc.setState(0xb95f, 0x1cd4, 0x91d0, 0x64c5, 0xc28, 0x131e, 0x1, 0x1);
        gbc.writeMem(0xb95f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x1cd4);
        EXPECT(gbc.pc(), 0xb961);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb95f), 0xcb);
        EXPECT(gbc.readMem(0xb960), 0xf4);
        // CB F4 00B0
        gbc.setState(0x6cf9, 0x4096, 0x5a60, 0x184d, 0xd951, 0x166f, 0x1, 0x0);
        gbc.writeMem(0x6cf9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x4096);
        EXPECT(gbc.pc(), 0x6cfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00B1
        gbc.setState(0x64e2, 0x877c, 0x3120, 0xb6b2, 0xc886, 0x2ad0, 0x1, 0x0);
        gbc.writeMem(0x64e2, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x877c);
        EXPECT(gbc.pc(), 0x64e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00B2
        gbc.setState(0x12a4, 0x73a8, 0xda00, 0x1cc1, 0xcb1d, 0x94e6, 0x1, 0x1);
        gbc.writeMem(0x12a4, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x73a8);
        EXPECT(gbc.pc(), 0x12a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00B3
        gbc.setState(0x99f1, 0x377c, 0x72a0, 0xf7ed, 0x569c, 0x1b77, 0x0, 0x0);
        gbc.writeMem(0x99f1, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x377c);
        EXPECT(gbc.pc(), 0x99f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99f1), 0xcb);
        EXPECT(gbc.readMem(0x99f2), 0xf4);
        // CB F4 00B4
        gbc.setState(0xe4cf, 0x1379, 0x4a30, 0x2af2, 0x37fe, 0x72c9, 0x1, 0x1);
        gbc.writeMem(0xe4cf, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x1379);
        EXPECT(gbc.pc(), 0xe4d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4cf), 0xcb);
        EXPECT(gbc.readMem(0xe4d0), 0xf4);
        // CB F4 00B5
        gbc.setState(0xa50e, 0x92d5, 0x9b0, 0x3752, 0xc4bf, 0x55f2, 0x1, 0x1);
        gbc.writeMem(0xa50e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x92d5);
        EXPECT(gbc.pc(), 0xa510);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa50e), 0xcb);
        EXPECT(gbc.readMem(0xa50f), 0xf4);
        // CB F4 00B6
        gbc.setState(0x87d, 0xe0d6, 0xb340, 0x97c0, 0xa404, 0xbcdf, 0x1, 0x1);
        gbc.writeMem(0x87d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xe0d6);
        EXPECT(gbc.pc(), 0x87f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00B7
        gbc.setState(0x7ae6, 0x5384, 0xfc0, 0x161, 0x687, 0x5a65, 0x0, 0x1);
        gbc.writeMem(0x7ae6, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x5384);
        EXPECT(gbc.pc(), 0x7ae8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00B9
        gbc.setState(0x4b0a, 0xd937, 0x5df0, 0xa6a6, 0xdcb, 0x4251, 0x0, 0x0);
        gbc.writeMem(0x4b0a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xd937);
        EXPECT(gbc.pc(), 0x4b0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 00BA
        gbc.setState(0x6fa4, 0x5a70, 0x3cb0, 0x1e68, 0x1199, 0xb9d0, 0x0, 0x0);
        gbc.writeMem(0x6fa4, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x5a70);
        EXPECT(gbc.pc(), 0x6fa6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 00BB
        gbc.setState(0x2730, 0xb0f3, 0xa490, 0xf78d, 0x4456, 0x2520, 0x1, 0x1);
        gbc.writeMem(0x2730, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xb0f3);
        EXPECT(gbc.pc(), 0x2732);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 00BC
        gbc.setState(0x7cdc, 0x2b18, 0x5bc0, 0xf95d, 0x9702, 0x7dd6, 0x0, 0x1);
        gbc.writeMem(0x7cdc, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x2b18);
        EXPECT(gbc.pc(), 0x7cde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00BE
        gbc.setState(0x597b, 0x67c2, 0x2790, 0x4fba, 0x5790, 0xd873, 0x1, 0x0);
        gbc.writeMem(0x597b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x67c2);
        EXPECT(gbc.pc(), 0x597d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 00BF
        gbc.setState(0xed8a, 0xe0a5, 0xd000, 0x38da, 0x7d2b, 0xc598, 0x1, 0x1);
        gbc.writeMem(0xed8a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xe0a5);
        EXPECT(gbc.pc(), 0xed8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed8a), 0xcb);
        EXPECT(gbc.readMem(0xed8b), 0xf4);
        // CB F4 00C0
        gbc.setState(0x5f8e, 0x1177, 0x6780, 0xe12b, 0x49a8, 0xd38d, 0x1, 0x0);
        gbc.writeMem(0x5f8e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x1177);
        EXPECT(gbc.pc(), 0x5f90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00C1
        gbc.setState(0x3a4b, 0xb333, 0x3b50, 0x4655, 0x3d4f, 0x20d8, 0x1, 0x0);
        gbc.writeMem(0x3a4b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xb333);
        EXPECT(gbc.pc(), 0x3a4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 00C2
        gbc.setState(0x4e0d, 0x2c9a, 0xa800, 0xc6fc, 0xdf9d, 0x3d73, 0x0, 0x0);
        gbc.writeMem(0x4e0d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x2c9a);
        EXPECT(gbc.pc(), 0x4e0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00C3
        gbc.setState(0xea87, 0xfb18, 0xc5a0, 0x48a5, 0xb66c, 0xd46d, 0x1, 0x0);
        gbc.writeMem(0xea87, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xfb18);
        EXPECT(gbc.pc(), 0xea89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea87), 0xcb);
        EXPECT(gbc.readMem(0xea88), 0xf4);
        // CB F4 00C4
        gbc.setState(0x6a76, 0x2ef8, 0x4d00, 0x7a1, 0x9d2a, 0x7808, 0x0, 0x0);
        gbc.writeMem(0x6a76, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x2ef8);
        EXPECT(gbc.pc(), 0x6a78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00C5
        gbc.setState(0xd1f9, 0x144e, 0x9500, 0x72a, 0x9571, 0xd621, 0x0, 0x1);
        gbc.writeMem(0xd1f9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x144e);
        EXPECT(gbc.pc(), 0xd1fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1f9), 0xcb);
        EXPECT(gbc.readMem(0xd1fa), 0xf4);
        // CB F4 00C6
        gbc.setState(0xcfa8, 0xda82, 0x3120, 0x11a3, 0x8a51, 0x8e1, 0x0, 0x1);
        gbc.writeMem(0xcfa8, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xda82);
        EXPECT(gbc.pc(), 0xcfaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfa8), 0xcb);
        EXPECT(gbc.readMem(0xcfa9), 0xf4);
        // CB F4 00C7
        gbc.setState(0xb23b, 0x1207, 0xf340, 0x4154, 0x9880, 0x58da, 0x0, 0x0);
        gbc.writeMem(0xb23b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x1207);
        EXPECT(gbc.pc(), 0xb23d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb23b), 0xcb);
        EXPECT(gbc.readMem(0xb23c), 0xf4);
        // CB F4 00C8
        gbc.setState(0x2a1d, 0x1c51, 0x7a0, 0x3ef4, 0xb1e6, 0xbd40, 0x1, 0x1);
        gbc.writeMem(0x2a1d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x1c51);
        EXPECT(gbc.pc(), 0x2a1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00C9
        gbc.setState(0x1bf4, 0x4133, 0xb910, 0x5fe6, 0xc2c8, 0xc7b7, 0x1, 0x1);
        gbc.writeMem(0x1bf4, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x4133);
        EXPECT(gbc.pc(), 0x1bf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 00CA
        gbc.setState(0x18c0, 0xdde, 0x3970, 0x4f04, 0xaea0, 0x723c, 0x1, 0x1);
        gbc.writeMem(0x18c0, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xdde);
        EXPECT(gbc.pc(), 0x18c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 00CB
        gbc.setState(0xb32c, 0xd5c2, 0x7780, 0xba2d, 0x5a7a, 0x1356, 0x1, 0x0);
        gbc.writeMem(0xb32c, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xd5c2);
        EXPECT(gbc.pc(), 0xb32e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb32c), 0xcb);
        EXPECT(gbc.readMem(0xb32d), 0xf4);
        // CB F4 00CC
        gbc.setState(0x5fb5, 0x845f, 0x3aa0, 0xb0be, 0xadf0, 0x2e55, 0x1, 0x1);
        gbc.writeMem(0x5fb5, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x845f);
        EXPECT(gbc.pc(), 0x5fb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00CD
        gbc.setState(0x1188, 0xe3b0, 0x69c0, 0x3ca8, 0x9ef8, 0x8599, 0x0, 0x1);
        gbc.writeMem(0x1188, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xe3b0);
        EXPECT(gbc.pc(), 0x118a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00CE
        gbc.setState(0xe497, 0xadb3, 0xb150, 0x567, 0xe958, 0x2138, 0x1, 0x0);
        gbc.writeMem(0xe497, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xadb3);
        EXPECT(gbc.pc(), 0xe499);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe497), 0xcb);
        EXPECT(gbc.readMem(0xe498), 0xf4);
        // CB F4 00CF
        gbc.setState(0xc898, 0xd04d, 0x4a00, 0x34bb, 0x194, 0xdbda, 0x0, 0x0);
        gbc.writeMem(0xc898, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xd04d);
        EXPECT(gbc.pc(), 0xc89a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc898), 0xcb);
        EXPECT(gbc.readMem(0xc899), 0xf4);
        // CB F4 00D0
        gbc.setState(0x1a11, 0x3e4f, 0xa50, 0x7ad7, 0xf9c3, 0x45c3, 0x1, 0x0);
        gbc.writeMem(0x1a11, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x3e4f);
        EXPECT(gbc.pc(), 0x1a13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 00D1
        gbc.setState(0xecc7, 0xa0b9, 0x1e50, 0x4e06, 0xb8f8, 0xa452, 0x1, 0x0);
        gbc.writeMem(0xecc7, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xa0b9);
        EXPECT(gbc.pc(), 0xecc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecc7), 0xcb);
        EXPECT(gbc.readMem(0xecc8), 0xf4);
        // CB F4 00D2
        gbc.setState(0xd21e, 0x1281, 0x91b0, 0x1f1f, 0x551c, 0x5c8c, 0x0, 0x1);
        gbc.writeMem(0xd21e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x1281);
        EXPECT(gbc.pc(), 0xd220);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd21e), 0xcb);
        EXPECT(gbc.readMem(0xd21f), 0xf4);
        // CB F4 00D3
        gbc.setState(0x7ac9, 0x7e68, 0x9ba0, 0xca95, 0x737, 0x509d, 0x1, 0x1);
        gbc.writeMem(0x7ac9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x7e68);
        EXPECT(gbc.pc(), 0x7acb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00D4
        gbc.setState(0xa853, 0x5ee7, 0xf220, 0xd0ed, 0xf883, 0x5770, 0x1, 0x1);
        gbc.writeMem(0xa853, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x5ee7);
        EXPECT(gbc.pc(), 0xa855);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa853), 0xcb);
        EXPECT(gbc.readMem(0xa854), 0xf4);
        // CB F4 00D5
        gbc.setState(0xc2d3, 0x8e35, 0xa750, 0x210c, 0x4cf9, 0xf7eb, 0x0, 0x0);
        gbc.writeMem(0xc2d3, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x8e35);
        EXPECT(gbc.pc(), 0xc2d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2d3), 0xcb);
        EXPECT(gbc.readMem(0xc2d4), 0xf4);
        // CB F4 00D6
        gbc.setState(0xeb86, 0x63e2, 0x9f10, 0xa5cc, 0xf2e2, 0xb4bc, 0x0, 0x1);
        gbc.writeMem(0xeb86, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x63e2);
        EXPECT(gbc.pc(), 0xeb88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb86), 0xcb);
        EXPECT(gbc.readMem(0xeb87), 0xf4);
        // CB F4 00D7
        gbc.setState(0x30ec, 0xe491, 0x38d0, 0x7856, 0x60fe, 0x6be, 0x0, 0x0);
        gbc.writeMem(0x30ec, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xe491);
        EXPECT(gbc.pc(), 0x30ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 00D8
        gbc.setState(0xd986, 0x14ff, 0x17f0, 0xd97d, 0x4774, 0xebe9, 0x0, 0x1);
        gbc.writeMem(0xd986, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x14ff);
        EXPECT(gbc.pc(), 0xd988);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd986), 0xcb);
        EXPECT(gbc.readMem(0xd987), 0xf4);
        // CB F4 00D9
        gbc.setState(0xa6a2, 0xa09d, 0xc750, 0x8372, 0x153e, 0xfb1f, 0x0, 0x1);
        gbc.writeMem(0xa6a2, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xa09d);
        EXPECT(gbc.pc(), 0xa6a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6a2), 0xcb);
        EXPECT(gbc.readMem(0xa6a3), 0xf4);
        // CB F4 00DA
        gbc.setState(0x2ae2, 0x643d, 0x8000, 0xabd9, 0xfa7b, 0x2642, 0x1, 0x0);
        gbc.writeMem(0x2ae2, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x643d);
        EXPECT(gbc.pc(), 0x2ae4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00DB
        gbc.setState(0x1d2c, 0xe6c3, 0xe990, 0x2711, 0xf778, 0x5a87, 0x0, 0x0);
        gbc.writeMem(0x1d2c, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xe6c3);
        EXPECT(gbc.pc(), 0x1d2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 00DC
        gbc.setState(0x9f11, 0x4af4, 0xaab0, 0xe4d0, 0xaf55, 0x2273, 0x1, 0x1);
        gbc.writeMem(0x9f11, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x4af4);
        EXPECT(gbc.pc(), 0x9f13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f11), 0xcb);
        EXPECT(gbc.readMem(0x9f12), 0xf4);
        // CB F4 00DD
        gbc.setState(0x4ff6, 0x2fd, 0xf4b0, 0xc4a, 0x7494, 0x2513, 0x0, 0x1);
        gbc.writeMem(0x4ff6, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x2fd);
        EXPECT(gbc.pc(), 0x4ff8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 00DE
        gbc.setState(0x3fdc, 0x107, 0xe3b0, 0xb569, 0xa234, 0xf865, 0x1, 0x1);
        gbc.writeMem(0x3fdc, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x107);
        EXPECT(gbc.pc(), 0x3fde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 00DF
        gbc.setState(0xbe4b, 0x2d9c, 0x92c0, 0xd27f, 0x41a2, 0xc783, 0x1, 0x1);
        gbc.writeMem(0xbe4b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x2d9c);
        EXPECT(gbc.pc(), 0xbe4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe4b), 0xcb);
        EXPECT(gbc.readMem(0xbe4c), 0xf4);
        // CB F4 00E0
        gbc.setState(0x9e9f, 0x82c8, 0x98d0, 0x50da, 0xa37d, 0x7145, 0x0, 0x1);
        gbc.writeMem(0x9e9f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x82c8);
        EXPECT(gbc.pc(), 0x9ea1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e9f), 0xcb);
        EXPECT(gbc.readMem(0x9ea0), 0xf4);
        // CB F4 00E1
        gbc.setState(0x42c9, 0x15a8, 0x7370, 0x8152, 0x47eb, 0xdd54, 0x1, 0x1);
        gbc.writeMem(0x42c9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x15a8);
        EXPECT(gbc.pc(), 0x42cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 00E2
        gbc.setState(0xccfa, 0x763b, 0x3ea0, 0x6834, 0x8ed7, 0xb588, 0x1, 0x1);
        gbc.writeMem(0xccfa, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x763b);
        EXPECT(gbc.pc(), 0xccfc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccfa), 0xcb);
        EXPECT(gbc.readMem(0xccfb), 0xf4);
        // CB F4 00E3
        gbc.setState(0xbcd6, 0xe4a1, 0xbff0, 0x28ac, 0x65bb, 0x9e1, 0x0, 0x1);
        gbc.writeMem(0xbcd6, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xe4a1);
        EXPECT(gbc.pc(), 0xbcd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcd6), 0xcb);
        EXPECT(gbc.readMem(0xbcd7), 0xf4);
        // CB F4 00E4
        gbc.setState(0x6c5b, 0xe017, 0x3660, 0xcfed, 0xa4ee, 0xa445, 0x1, 0x1);
        gbc.writeMem(0x6c5b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xe017);
        EXPECT(gbc.pc(), 0x6c5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00E5
        gbc.setState(0x9b0, 0x1254, 0x4ae0, 0xb0b3, 0x6975, 0x9aea, 0x0, 0x1);
        gbc.writeMem(0x9b0, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x1254);
        EXPECT(gbc.pc(), 0x9b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00E6
        gbc.setState(0xa354, 0xdfba, 0x4810, 0x2315, 0xc671, 0x88c1, 0x1, 0x1);
        gbc.writeMem(0xa354, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xdfba);
        EXPECT(gbc.pc(), 0xa356);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa354), 0xcb);
        EXPECT(gbc.readMem(0xa355), 0xf4);
        // CB F4 00E7
        gbc.setState(0x238c, 0x869c, 0xfca0, 0x8a4d, 0x3ddb, 0x69aa, 0x0, 0x1);
        gbc.writeMem(0x238c, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x869c);
        EXPECT(gbc.pc(), 0x238e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00E8
        gbc.setState(0xb45, 0xcfe, 0x1370, 0xf867, 0x60ec, 0x78b9, 0x1, 0x1);
        gbc.writeMem(0xb45, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xcfe);
        EXPECT(gbc.pc(), 0xb47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 00E9
        gbc.setState(0x9518, 0x289b, 0x7af0, 0xd80c, 0x3e82, 0x28f6, 0x0, 0x0);
        gbc.writeMem(0x9518, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x289b);
        EXPECT(gbc.pc(), 0x951a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9518), 0xcb);
        EXPECT(gbc.readMem(0x9519), 0xf4);
        // CB F4 00EA
        gbc.setState(0x524c, 0x6f23, 0x13c0, 0x41f6, 0xe7d4, 0x4472, 0x0, 0x0);
        gbc.writeMem(0x524c, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x6f23);
        EXPECT(gbc.pc(), 0x524e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00EB
        gbc.setState(0xaadf, 0xaeb6, 0x27d0, 0x2e5, 0x8fc5, 0x897c, 0x0, 0x0);
        gbc.writeMem(0xaadf, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xaeb6);
        EXPECT(gbc.pc(), 0xaae1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaadf), 0xcb);
        EXPECT(gbc.readMem(0xaae0), 0xf4);
        // CB F4 00EC
        gbc.setState(0x1eef, 0xb578, 0x5500, 0x70b5, 0xde41, 0x338b, 0x1, 0x1);
        gbc.writeMem(0x1eef, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xb578);
        EXPECT(gbc.pc(), 0x1ef1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00ED
        gbc.setState(0x6c35, 0xdd69, 0x5260, 0xe8e6, 0x4b78, 0x1ea7, 0x1, 0x0);
        gbc.writeMem(0x6c35, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xdd69);
        EXPECT(gbc.pc(), 0x6c37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00EE
        gbc.setState(0x83a, 0xe07b, 0xdf80, 0x4004, 0xb4, 0x46b6, 0x0, 0x0);
        gbc.writeMem(0x83a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xe07b);
        EXPECT(gbc.pc(), 0x83c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00EF
        gbc.setState(0x4e3d, 0x12fd, 0x2760, 0x28d, 0xbdae, 0x3448, 0x0, 0x1);
        gbc.writeMem(0x4e3d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x12fd);
        EXPECT(gbc.pc(), 0x4e3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00F0
        gbc.setState(0x6f69, 0x9a98, 0xaa20, 0x21b9, 0x12c8, 0x1159, 0x0, 0x1);
        gbc.writeMem(0x6f69, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x9a98);
        EXPECT(gbc.pc(), 0x6f6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00F1
        gbc.setState(0x4900, 0x6cb9, 0xf510, 0xc7d4, 0x4426, 0xb65, 0x0, 0x1);
        gbc.writeMem(0x4900, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x6cb9);
        EXPECT(gbc.pc(), 0x4902);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 00F2
        gbc.setState(0x7413, 0xa28e, 0xa220, 0x9b73, 0x67a7, 0xb757, 0x1, 0x1);
        gbc.writeMem(0x7413, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xa28e);
        EXPECT(gbc.pc(), 0x7415);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00F3
        gbc.setState(0x8c46, 0x44ed, 0xde40, 0xaeb9, 0xa9e6, 0xb639, 0x1, 0x1);
        gbc.writeMem(0x8c46, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x44ed);
        EXPECT(gbc.pc(), 0x8c48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c46), 0xcb);
        EXPECT(gbc.readMem(0x8c47), 0xf4);
        // CB F4 00F4
        gbc.setState(0x6f39, 0xedbd, 0xb970, 0x66e9, 0x5325, 0x36da, 0x0, 0x1);
        gbc.writeMem(0x6f39, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xedbd);
        EXPECT(gbc.pc(), 0x6f3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 00F5
        gbc.setState(0x7570, 0xe122, 0x30b0, 0xca5d, 0x9b49, 0x10ce, 0x0, 0x0);
        gbc.writeMem(0x7570, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xe122);
        EXPECT(gbc.pc(), 0x7572);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 00F6
        gbc.setState(0x3812, 0xb33e, 0x2370, 0x3db5, 0x6125, 0xda82, 0x0, 0x1);
        gbc.writeMem(0x3812, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xb33e);
        EXPECT(gbc.pc(), 0x3814);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 00F7
        gbc.setState(0xa400, 0x81e7, 0x2d50, 0xbb69, 0xf519, 0x4f16, 0x0, 0x1);
        gbc.writeMem(0xa400, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x81e7);
        EXPECT(gbc.pc(), 0xa402);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa400), 0xcb);
        EXPECT(gbc.readMem(0xa401), 0xf4);
        // CB F4 00F8
        gbc.setState(0xb712, 0x11f, 0xd750, 0x2f61, 0x6f2f, 0x6cdb, 0x1, 0x0);
        gbc.writeMem(0xb712, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x11f);
        EXPECT(gbc.pc(), 0xb714);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb712), 0xcb);
        EXPECT(gbc.readMem(0xb713), 0xf4);
        // CB F4 00F9
        gbc.setState(0xd8e, 0x4a2d, 0xdd10, 0x30f2, 0x6481, 0x6d17, 0x0, 0x1);
        gbc.writeMem(0xd8e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x4a2d);
        EXPECT(gbc.pc(), 0xd90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 00FA
        gbc.setState(0x78dd, 0xd16b, 0x7d40, 0x9a6f, 0xf4f2, 0x5110, 0x0, 0x0);
        gbc.writeMem(0x78dd, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xd16b);
        EXPECT(gbc.pc(), 0x78df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 00FB
        gbc.setState(0x8210, 0x12f4, 0xf760, 0x3a47, 0xe3b0, 0xfad7, 0x1, 0x1);
        gbc.writeMem(0x8210, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x12f4);
        EXPECT(gbc.pc(), 0x8212);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8210), 0xcb);
        EXPECT(gbc.readMem(0x8211), 0xf4);
        // CB F4 00FC
        gbc.setState(0x88dc, 0x3112, 0x19c0, 0x6e34, 0x2a65, 0x430b, 0x1, 0x0);
        gbc.writeMem(0x88dc, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x3112);
        EXPECT(gbc.pc(), 0x88de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88dc), 0xcb);
        EXPECT(gbc.readMem(0x88dd), 0xf4);
        // CB F4 00FD
        gbc.setState(0xe28e, 0xd311, 0xfc00, 0xb8a0, 0xba5e, 0x7d34, 0x0, 0x1);
        gbc.writeMem(0xe28e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xd311);
        EXPECT(gbc.pc(), 0xe290);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe28e), 0xcb);
        EXPECT(gbc.readMem(0xe28f), 0xf4);
        // CB F4 00FE
        gbc.setState(0xad64, 0x934a, 0xaf70, 0x67f3, 0xa042, 0x6b74, 0x1, 0x0);
        gbc.writeMem(0xad64, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x934a);
        EXPECT(gbc.pc(), 0xad66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad64), 0xcb);
        EXPECT(gbc.readMem(0xad65), 0xf4);
        // CB F4 00FF
        gbc.setState(0x8c4e, 0xe2ad, 0xf170, 0x7397, 0xe495, 0x4a96, 0x0, 0x0);
        gbc.writeMem(0x8c4e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xe2ad);
        EXPECT(gbc.pc(), 0x8c50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c4e), 0xcb);
        EXPECT(gbc.readMem(0x8c4f), 0xf4);
        // CB F4 0100
        gbc.setState(0x6e15, 0x2e, 0xd0d0, 0x580, 0xd796, 0x3467, 0x1, 0x0);
        gbc.writeMem(0x6e15, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x2e);
        EXPECT(gbc.pc(), 0x6e17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0101
        gbc.setState(0xcade, 0x135, 0x7bc0, 0xdde0, 0x69ed, 0x86c0, 0x0, 0x1);
        gbc.writeMem(0xcade, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x135);
        EXPECT(gbc.pc(), 0xcae0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcade), 0xcb);
        EXPECT(gbc.readMem(0xcadf), 0xf4);
        // CB F4 0102
        gbc.setState(0x3365, 0x65f8, 0x7210, 0xcc97, 0xfa55, 0xf6c3, 0x0, 0x0);
        gbc.writeMem(0x3365, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x65f8);
        EXPECT(gbc.pc(), 0x3367);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0103
        gbc.setState(0x158e, 0x94cd, 0x11d0, 0xf265, 0x5da6, 0x6009, 0x1, 0x0);
        gbc.writeMem(0x158e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x94cd);
        EXPECT(gbc.pc(), 0x1590);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0104
        gbc.setState(0x4912, 0x5e5a, 0x99b0, 0xe1a3, 0x255, 0x274e, 0x1, 0x0);
        gbc.writeMem(0x4912, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x5e5a);
        EXPECT(gbc.pc(), 0x4914);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0105
        gbc.setState(0xeae5, 0xcfe5, 0x43a0, 0x4190, 0xb50e, 0xb9c, 0x0, 0x0);
        gbc.writeMem(0xeae5, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xcfe5);
        EXPECT(gbc.pc(), 0xeae7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeae5), 0xcb);
        EXPECT(gbc.readMem(0xeae6), 0xf4);
        // CB F4 0106
        gbc.setState(0xdd76, 0xc30c, 0x61e0, 0x8c6c, 0x8e9a, 0xb46c, 0x1, 0x1);
        gbc.writeMem(0xdd76, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xc30c);
        EXPECT(gbc.pc(), 0xdd78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd76), 0xcb);
        EXPECT(gbc.readMem(0xdd77), 0xf4);
        // CB F4 0107
        gbc.setState(0x1dcb, 0xdd3d, 0x2150, 0x712e, 0xd707, 0xc86b, 0x0, 0x1);
        gbc.writeMem(0x1dcb, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xdd3d);
        EXPECT(gbc.pc(), 0x1dcd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0108
        gbc.setState(0xa06b, 0xa2, 0x2130, 0x79b1, 0x7178, 0x48ab, 0x1, 0x1);
        gbc.writeMem(0xa06b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xa2);
        EXPECT(gbc.pc(), 0xa06d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa06b), 0xcb);
        EXPECT(gbc.readMem(0xa06c), 0xf4);
        // CB F4 0109
        gbc.setState(0x1991, 0xb123, 0x7890, 0xd098, 0xa3c5, 0x915c, 0x0, 0x1);
        gbc.writeMem(0x1991, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xb123);
        EXPECT(gbc.pc(), 0x1993);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 010A
        gbc.setState(0x971e, 0x73f6, 0xeb30, 0xe6a9, 0x531f, 0x7082, 0x1, 0x0);
        gbc.writeMem(0x971e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x73f6);
        EXPECT(gbc.pc(), 0x9720);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x971e), 0xcb);
        EXPECT(gbc.readMem(0x971f), 0xf4);
        // CB F4 010B
        gbc.setState(0x39cf, 0xebc4, 0x1a70, 0x53a1, 0x4268, 0x94b7, 0x1, 0x1);
        gbc.writeMem(0x39cf, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xebc4);
        EXPECT(gbc.pc(), 0x39d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 010C
        gbc.setState(0x6860, 0x2351, 0x90a0, 0x336e, 0xa29e, 0x9aaa, 0x0, 0x1);
        gbc.writeMem(0x6860, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x2351);
        EXPECT(gbc.pc(), 0x6862);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 010D
        gbc.setState(0x8352, 0x8ee, 0xc700, 0x2fe9, 0xecc3, 0xa2b2, 0x1, 0x1);
        gbc.writeMem(0x8352, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x8ee);
        EXPECT(gbc.pc(), 0x8354);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8352), 0xcb);
        EXPECT(gbc.readMem(0x8353), 0xf4);
        // CB F4 010E
        gbc.setState(0x1687, 0x83f2, 0x9c10, 0x4a92, 0x2e8a, 0x4a94, 0x0, 0x1);
        gbc.writeMem(0x1687, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x83f2);
        EXPECT(gbc.pc(), 0x1689);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0110
        gbc.setState(0xcd17, 0xe395, 0x5480, 0x37de, 0xc13d, 0x55a1, 0x0, 0x1);
        gbc.writeMem(0xcd17, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xe395);
        EXPECT(gbc.pc(), 0xcd19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd17), 0xcb);
        EXPECT(gbc.readMem(0xcd18), 0xf4);
        // CB F4 0111
        gbc.setState(0x7ed6, 0x1a01, 0xa50, 0x2f44, 0xdee0, 0xc5af, 0x0, 0x0);
        gbc.writeMem(0x7ed6, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x1a01);
        EXPECT(gbc.pc(), 0x7ed8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0112
        gbc.setState(0xcf54, 0x6277, 0xad30, 0x901b, 0x8265, 0x22e5, 0x1, 0x0);
        gbc.writeMem(0xcf54, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x6277);
        EXPECT(gbc.pc(), 0xcf56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf54), 0xcb);
        EXPECT(gbc.readMem(0xcf55), 0xf4);
        // CB F4 0113
        gbc.setState(0xc94d, 0x2222, 0x1560, 0x646e, 0x20e5, 0xa037, 0x1, 0x1);
        gbc.writeMem(0xc94d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x2222);
        EXPECT(gbc.pc(), 0xc94f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc94d), 0xcb);
        EXPECT(gbc.readMem(0xc94e), 0xf4);
        // CB F4 0114
        gbc.setState(0xde56, 0x6bb6, 0x2a60, 0xe519, 0x267a, 0xe257, 0x1, 0x0);
        gbc.writeMem(0xde56, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x6bb6);
        EXPECT(gbc.pc(), 0xde58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde56), 0xcb);
        EXPECT(gbc.readMem(0xde57), 0xf4);
        // CB F4 0115
        gbc.setState(0xc43, 0xf075, 0xdc40, 0xa42b, 0x666, 0x4ea2, 0x0, 0x0);
        gbc.writeMem(0xc43, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xf075);
        EXPECT(gbc.pc(), 0xc45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0116
        gbc.setState(0xbcbd, 0xdc75, 0xd9f0, 0x60eb, 0xa8ab, 0x9286, 0x0, 0x1);
        gbc.writeMem(0xbcbd, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xdc75);
        EXPECT(gbc.pc(), 0xbcbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcbd), 0xcb);
        EXPECT(gbc.readMem(0xbcbe), 0xf4);
        // CB F4 0118
        gbc.setState(0xb163, 0x4295, 0x64e0, 0x6f40, 0x3dc4, 0x2d60, 0x0, 0x1);
        gbc.writeMem(0xb163, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x4295);
        EXPECT(gbc.pc(), 0xb165);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb163), 0xcb);
        EXPECT(gbc.readMem(0xb164), 0xf4);
        // CB F4 0119
        gbc.setState(0x541b, 0x5637, 0xa5b0, 0xebde, 0xd2c3, 0x5817, 0x0, 0x1);
        gbc.writeMem(0x541b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x5637);
        EXPECT(gbc.pc(), 0x541d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 011A
        gbc.setState(0xb1a, 0x1150, 0x2a40, 0x9061, 0xc00c, 0x5f8b, 0x1, 0x1);
        gbc.writeMem(0xb1a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x1150);
        EXPECT(gbc.pc(), 0xb1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 011B
        gbc.setState(0x4bd, 0xe8a0, 0x450, 0x74a1, 0xcabe, 0x4a9b, 0x0, 0x1);
        gbc.writeMem(0x4bd, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xe8a0);
        EXPECT(gbc.pc(), 0x4bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 011C
        gbc.setState(0x8398, 0x3d10, 0x2100, 0xcf16, 0xda13, 0x4c75, 0x0, 0x1);
        gbc.writeMem(0x8398, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x3d10);
        EXPECT(gbc.pc(), 0x839a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8398), 0xcb);
        EXPECT(gbc.readMem(0x8399), 0xf4);
        // CB F4 011D
        gbc.setState(0x1e09, 0x2f70, 0xcdd0, 0xd784, 0x7654, 0x9a30, 0x0, 0x1);
        gbc.writeMem(0x1e09, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x2f70);
        EXPECT(gbc.pc(), 0x1e0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 011E
        gbc.setState(0x8dba, 0xb66d, 0x6360, 0x7622, 0xdc09, 0x2494, 0x1, 0x0);
        gbc.writeMem(0x8dba, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xb66d);
        EXPECT(gbc.pc(), 0x8dbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dba), 0xcb);
        EXPECT(gbc.readMem(0x8dbb), 0xf4);
        // CB F4 011F
        gbc.setState(0x6b46, 0x113, 0xcdd0, 0x95de, 0x87ac, 0xca3d, 0x1, 0x0);
        gbc.writeMem(0x6b46, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x113);
        EXPECT(gbc.pc(), 0x6b48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0120
        gbc.setState(0x14df, 0x4a81, 0x6bd0, 0x6a89, 0xe464, 0x178, 0x0, 0x1);
        gbc.writeMem(0x14df, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x4a81);
        EXPECT(gbc.pc(), 0x14e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0121
        gbc.setState(0x113b, 0xb3d2, 0x76c0, 0x3310, 0x372, 0xbf9c, 0x0, 0x0);
        gbc.writeMem(0x113b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xb3d2);
        EXPECT(gbc.pc(), 0x113d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0122
        gbc.setState(0xa3fc, 0xe06d, 0x7ec0, 0x9b53, 0x106c, 0x600, 0x1, 0x1);
        gbc.writeMem(0xa3fc, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xe06d);
        EXPECT(gbc.pc(), 0xa3fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3fc), 0xcb);
        EXPECT(gbc.readMem(0xa3fd), 0xf4);
        // CB F4 0123
        gbc.setState(0x210c, 0xa73, 0x7220, 0xcfae, 0x9a5d, 0x57da, 0x1, 0x1);
        gbc.writeMem(0x210c, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xa73);
        EXPECT(gbc.pc(), 0x210e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0124
        gbc.setState(0xd8a6, 0x13a5, 0xdb90, 0xba0b, 0x3a54, 0xe7dc, 0x0, 0x0);
        gbc.writeMem(0xd8a6, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x13a5);
        EXPECT(gbc.pc(), 0xd8a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8a6), 0xcb);
        EXPECT(gbc.readMem(0xd8a7), 0xf4);
        // CB F4 0125
        gbc.setState(0x1bfb, 0x32c2, 0xa240, 0xc7b7, 0x8f31, 0xfce6, 0x0, 0x0);
        gbc.writeMem(0x1bfb, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x32c2);
        EXPECT(gbc.pc(), 0x1bfd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0126
        gbc.setState(0x1b09, 0x9ef, 0x1d0, 0xd7b, 0x9088, 0xc237, 0x0, 0x1);
        gbc.writeMem(0x1b09, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x9ef);
        EXPECT(gbc.pc(), 0x1b0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0127
        gbc.setState(0xb6a5, 0x463e, 0x8790, 0x7b8d, 0xebcd, 0x339d, 0x1, 0x0);
        gbc.writeMem(0xb6a5, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x463e);
        EXPECT(gbc.pc(), 0xb6a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6a5), 0xcb);
        EXPECT(gbc.readMem(0xb6a6), 0xf4);
        // CB F4 0128
        gbc.setState(0xc075, 0xcf7b, 0x1630, 0x60db, 0x3d82, 0x4576, 0x0, 0x0);
        gbc.writeMem(0xc075, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xcf7b);
        EXPECT(gbc.pc(), 0xc077);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc075), 0xcb);
        EXPECT(gbc.readMem(0xc076), 0xf4);
        // CB F4 0129
        gbc.setState(0x3b5d, 0x3c31, 0xe350, 0x592b, 0xd261, 0xf201, 0x0, 0x1);
        gbc.writeMem(0x3b5d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x3c31);
        EXPECT(gbc.pc(), 0x3b5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 012A
        gbc.setState(0x9a2c, 0xd728, 0xef0, 0x4ade, 0x22fc, 0x545d, 0x0, 0x0);
        gbc.writeMem(0x9a2c, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xd728);
        EXPECT(gbc.pc(), 0x9a2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a2c), 0xcb);
        EXPECT(gbc.readMem(0x9a2d), 0xf4);
        // CB F4 012B
        gbc.setState(0xbc49, 0x7006, 0xd060, 0x16cb, 0x80b, 0xba18, 0x1, 0x1);
        gbc.writeMem(0xbc49, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x7006);
        EXPECT(gbc.pc(), 0xbc4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc49), 0xcb);
        EXPECT(gbc.readMem(0xbc4a), 0xf4);
        // CB F4 012C
        gbc.setState(0x5a, 0x23e4, 0x11d0, 0x57e7, 0x21ae, 0xeb26, 0x0, 0x1);
        gbc.writeMem(0x5a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x23e4);
        EXPECT(gbc.pc(), 0x5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 012D
        gbc.setState(0xe45c, 0x1ee0, 0x5810, 0xff50, 0x78d3, 0xdae9, 0x0, 0x0);
        gbc.writeMem(0xe45c, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x1ee0);
        EXPECT(gbc.pc(), 0xe45e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe45c), 0xcb);
        EXPECT(gbc.readMem(0xe45d), 0xf4);
        // CB F4 012E
        gbc.setState(0x76cf, 0x95f, 0xecc0, 0xedef, 0xc53, 0xc4c9, 0x1, 0x1);
        gbc.writeMem(0x76cf, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x95f);
        EXPECT(gbc.pc(), 0x76d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 012F
        gbc.setState(0xbb85, 0x43e6, 0x8330, 0x1810, 0xcf4f, 0x66d9, 0x0, 0x0);
        gbc.writeMem(0xbb85, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x43e6);
        EXPECT(gbc.pc(), 0xbb87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb85), 0xcb);
        EXPECT(gbc.readMem(0xbb86), 0xf4);
        // CB F4 0130
        gbc.setState(0xd1ca, 0xec03, 0xd8b0, 0x8a5a, 0x7ff7, 0x9e0, 0x1, 0x0);
        gbc.writeMem(0xd1ca, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xec03);
        EXPECT(gbc.pc(), 0xd1cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1ca), 0xcb);
        EXPECT(gbc.readMem(0xd1cb), 0xf4);
        // CB F4 0131
        gbc.setState(0x893e, 0xe77a, 0x1a90, 0x3c73, 0x524d, 0x269, 0x0, 0x1);
        gbc.writeMem(0x893e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xe77a);
        EXPECT(gbc.pc(), 0x8940);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x893e), 0xcb);
        EXPECT(gbc.readMem(0x893f), 0xf4);
        // CB F4 0132
        gbc.setState(0xef0b, 0xde69, 0xf6e0, 0x4400, 0x3556, 0xdcf1, 0x0, 0x1);
        gbc.writeMem(0xef0b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xde69);
        EXPECT(gbc.pc(), 0xef0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef0b), 0xcb);
        EXPECT(gbc.readMem(0xef0c), 0xf4);
        // CB F4 0133
        gbc.setState(0xa03b, 0x413a, 0x5cd0, 0x877d, 0x9673, 0x754f, 0x0, 0x0);
        gbc.writeMem(0xa03b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x413a);
        EXPECT(gbc.pc(), 0xa03d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa03b), 0xcb);
        EXPECT(gbc.readMem(0xa03c), 0xf4);
        // CB F4 0134
        gbc.setState(0x8f89, 0x783b, 0xcb0, 0xdc3a, 0x1be9, 0xc8bb, 0x0, 0x0);
        gbc.writeMem(0x8f89, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x783b);
        EXPECT(gbc.pc(), 0x8f8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f89), 0xcb);
        EXPECT(gbc.readMem(0x8f8a), 0xf4);
        // CB F4 0135
        gbc.setState(0xdf09, 0xb9fe, 0x2080, 0xaec9, 0xb0a7, 0x4a0f, 0x1, 0x0);
        gbc.writeMem(0xdf09, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xb9fe);
        EXPECT(gbc.pc(), 0xdf0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf09), 0xcb);
        EXPECT(gbc.readMem(0xdf0a), 0xf4);
        // CB F4 0136
        gbc.setState(0x67f, 0x161, 0x4360, 0x9709, 0x9e95, 0xd084, 0x1, 0x1);
        gbc.writeMem(0x67f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x161);
        EXPECT(gbc.pc(), 0x681);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0137
        gbc.setState(0x29c9, 0x2544, 0x81d0, 0x235b, 0xa016, 0x5019, 0x1, 0x1);
        gbc.writeMem(0x29c9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x2544);
        EXPECT(gbc.pc(), 0x29cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0139
        gbc.setState(0x1280, 0x2d48, 0xf840, 0x733a, 0x3cbb, 0x5f66, 0x1, 0x1);
        gbc.writeMem(0x1280, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x2d48);
        EXPECT(gbc.pc(), 0x1282);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 013A
        gbc.setState(0xab9e, 0x766d, 0xc010, 0x6e14, 0xb6d0, 0x5c0, 0x0, 0x1);
        gbc.writeMem(0xab9e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x766d);
        EXPECT(gbc.pc(), 0xaba0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab9e), 0xcb);
        EXPECT(gbc.readMem(0xab9f), 0xf4);
        // CB F4 013B
        gbc.setState(0x94aa, 0x3d24, 0x6190, 0xe550, 0xddf5, 0xa7cd, 0x0, 0x1);
        gbc.writeMem(0x94aa, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x3d24);
        EXPECT(gbc.pc(), 0x94ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94aa), 0xcb);
        EXPECT(gbc.readMem(0x94ab), 0xf4);
        // CB F4 013C
        gbc.setState(0x2ce5, 0x8981, 0xe410, 0xa42e, 0xaa2, 0xccca, 0x0, 0x1);
        gbc.writeMem(0x2ce5, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x8981);
        EXPECT(gbc.pc(), 0x2ce7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 013D
        gbc.setState(0x3119, 0x850b, 0x1dc0, 0x9590, 0x6bf5, 0x7f0c, 0x0, 0x0);
        gbc.writeMem(0x3119, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x850b);
        EXPECT(gbc.pc(), 0x311b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 013E
        gbc.setState(0x479b, 0x7fa1, 0x9830, 0x744e, 0xd660, 0x3687, 0x1, 0x1);
        gbc.writeMem(0x479b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x7fa1);
        EXPECT(gbc.pc(), 0x479d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 013F
        gbc.setState(0xa459, 0xe73e, 0xe380, 0x97d7, 0xeb, 0xdf66, 0x0, 0x0);
        gbc.writeMem(0xa459, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xe73e);
        EXPECT(gbc.pc(), 0xa45b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa459), 0xcb);
        EXPECT(gbc.readMem(0xa45a), 0xf4);
        // CB F4 0140
        gbc.setState(0x7445, 0x1a43, 0x49f0, 0x4237, 0xaff2, 0x861d, 0x0, 0x0);
        gbc.writeMem(0x7445, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x1a43);
        EXPECT(gbc.pc(), 0x7447);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0141
        gbc.setState(0x74b1, 0xda8d, 0xbcb0, 0x69e9, 0xca74, 0x508b, 0x1, 0x0);
        gbc.writeMem(0x74b1, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xda8d);
        EXPECT(gbc.pc(), 0x74b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0142
        gbc.setState(0x319e, 0xe7b9, 0xcf90, 0xaa4, 0x4ff6, 0x88a4, 0x1, 0x1);
        gbc.writeMem(0x319e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xe7b9);
        EXPECT(gbc.pc(), 0x31a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0143
        gbc.setState(0x1173, 0x5fa3, 0x8520, 0xf6f3, 0x65b, 0x700a, 0x1, 0x1);
        gbc.writeMem(0x1173, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x5fa3);
        EXPECT(gbc.pc(), 0x1175);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0144
        gbc.setState(0xbcc1, 0xf2e8, 0xcb70, 0x3f51, 0x34b2, 0x1946, 0x1, 0x0);
        gbc.writeMem(0xbcc1, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xf2e8);
        EXPECT(gbc.pc(), 0xbcc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcc1), 0xcb);
        EXPECT(gbc.readMem(0xbcc2), 0xf4);
        // CB F4 0145
        gbc.setState(0x48ca, 0x46e8, 0xd890, 0x5e8c, 0x6c81, 0x4909, 0x0, 0x1);
        gbc.writeMem(0x48ca, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x46e8);
        EXPECT(gbc.pc(), 0x48cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0146
        gbc.setState(0x4621, 0x320b, 0xe330, 0x51bf, 0x2084, 0xd413, 0x1, 0x1);
        gbc.writeMem(0x4621, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x320b);
        EXPECT(gbc.pc(), 0x4623);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0148
        gbc.setState(0x9bb4, 0x485d, 0x4670, 0x701d, 0x55d8, 0x780, 0x1, 0x1);
        gbc.writeMem(0x9bb4, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x485d);
        EXPECT(gbc.pc(), 0x9bb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bb4), 0xcb);
        EXPECT(gbc.readMem(0x9bb5), 0xf4);
        // CB F4 0149
        gbc.setState(0xd84c, 0x32f3, 0x7630, 0x3db9, 0x5028, 0x368, 0x0, 0x0);
        gbc.writeMem(0xd84c, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x32f3);
        EXPECT(gbc.pc(), 0xd84e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd84c), 0xcb);
        EXPECT(gbc.readMem(0xd84d), 0xf4);
        // CB F4 014A
        gbc.setState(0x1128, 0x2409, 0x7f70, 0x1f69, 0x7c19, 0xc92c, 0x0, 0x1);
        gbc.writeMem(0x1128, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x2409);
        EXPECT(gbc.pc(), 0x112a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 014B
        gbc.setState(0x6577, 0x6a01, 0xb030, 0x252d, 0xa0d9, 0x6e85, 0x1, 0x1);
        gbc.writeMem(0x6577, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x6a01);
        EXPECT(gbc.pc(), 0x6579);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 014C
        gbc.setState(0x4175, 0x2904, 0x2440, 0x8669, 0x9721, 0x272a, 0x1, 0x1);
        gbc.writeMem(0x4175, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x2904);
        EXPECT(gbc.pc(), 0x4177);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 014D
        gbc.setState(0x7754, 0x577a, 0x9a10, 0x9d4a, 0x57d9, 0xcb1, 0x0, 0x0);
        gbc.writeMem(0x7754, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x577a);
        EXPECT(gbc.pc(), 0x7756);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 014E
        gbc.setState(0x3f11, 0xae6d, 0x22c0, 0xf61c, 0x911d, 0x4a33, 0x0, 0x0);
        gbc.writeMem(0x3f11, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xae6d);
        EXPECT(gbc.pc(), 0x3f13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 014F
        gbc.setState(0x9fcd, 0xd33d, 0x4a00, 0x968d, 0x4e4, 0x2148, 0x0, 0x0);
        gbc.writeMem(0x9fcd, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xd33d);
        EXPECT(gbc.pc(), 0x9fcf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fcd), 0xcb);
        EXPECT(gbc.readMem(0x9fce), 0xf4);
        // CB F4 0150
        gbc.setState(0x4f98, 0x43f7, 0xb610, 0x3ecc, 0xf548, 0xcca2, 0x1, 0x0);
        gbc.writeMem(0x4f98, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x43f7);
        EXPECT(gbc.pc(), 0x4f9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0151
        gbc.setState(0xa36d, 0x8640, 0xc200, 0xcea6, 0x9dff, 0xa6ac, 0x1, 0x1);
        gbc.writeMem(0xa36d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x8640);
        EXPECT(gbc.pc(), 0xa36f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa36d), 0xcb);
        EXPECT(gbc.readMem(0xa36e), 0xf4);
        // CB F4 0152
        gbc.setState(0xd94a, 0x5eea, 0x1bd0, 0xf519, 0x2eac, 0xa351, 0x0, 0x1);
        gbc.writeMem(0xd94a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x5eea);
        EXPECT(gbc.pc(), 0xd94c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd94a), 0xcb);
        EXPECT(gbc.readMem(0xd94b), 0xf4);
        // CB F4 0154
        gbc.setState(0x184, 0x66ae, 0x7e40, 0xff0b, 0xaa99, 0x1d4b, 0x1, 0x0);
        gbc.writeMem(0x184, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x66ae);
        EXPECT(gbc.pc(), 0x186);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0155
        gbc.setState(0x4f, 0xe49b, 0x1670, 0x20ad, 0xd5c8, 0xde56, 0x1, 0x0);
        gbc.writeMem(0x4f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xe49b);
        EXPECT(gbc.pc(), 0x51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0156
        gbc.setState(0x2418, 0xa365, 0xe900, 0x3982, 0x191c, 0x8418, 0x0, 0x1);
        gbc.writeMem(0x2418, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xa365);
        EXPECT(gbc.pc(), 0x241a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0157
        gbc.setState(0x79f4, 0x6888, 0xde60, 0xe7be, 0x6de1, 0xce59, 0x1, 0x0);
        gbc.writeMem(0x79f4, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x6888);
        EXPECT(gbc.pc(), 0x79f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0158
        gbc.setState(0x6000, 0x83b6, 0x40f0, 0x52ef, 0x3495, 0xaa90, 0x0, 0x1);
        gbc.writeMem(0x6000, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x83b6);
        EXPECT(gbc.pc(), 0x6002);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0159
        gbc.setState(0xec07, 0x3f20, 0xa450, 0x3bfe, 0xdcf7, 0x413c, 0x0, 0x1);
        gbc.writeMem(0xec07, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x3f20);
        EXPECT(gbc.pc(), 0xec09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec07), 0xcb);
        EXPECT(gbc.readMem(0xec08), 0xf4);
        // CB F4 015A
        gbc.setState(0xae34, 0xc922, 0x9680, 0x7560, 0xd08e, 0x265a, 0x0, 0x1);
        gbc.writeMem(0xae34, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xc922);
        EXPECT(gbc.pc(), 0xae36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae34), 0xcb);
        EXPECT(gbc.readMem(0xae35), 0xf4);
        // CB F4 015C
        gbc.setState(0x443c, 0x8340, 0x1590, 0x3373, 0x18ab, 0x17b2, 0x1, 0x1);
        gbc.writeMem(0x443c, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x8340);
        EXPECT(gbc.pc(), 0x443e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 015D
        gbc.setState(0x510f, 0xbe62, 0x3ac0, 0x4c80, 0x131b, 0x2f28, 0x0, 0x1);
        gbc.writeMem(0x510f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xbe62);
        EXPECT(gbc.pc(), 0x5111);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 015E
        gbc.setState(0xc83e, 0xf298, 0x7d00, 0xda30, 0xf374, 0x6e10, 0x1, 0x0);
        gbc.writeMem(0xc83e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xf298);
        EXPECT(gbc.pc(), 0xc840);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc83e), 0xcb);
        EXPECT(gbc.readMem(0xc83f), 0xf4);
        // CB F4 015F
        gbc.setState(0x4356, 0x97c4, 0x76b0, 0x9acf, 0x960a, 0x9280, 0x0, 0x1);
        gbc.writeMem(0x4356, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x97c4);
        EXPECT(gbc.pc(), 0x4358);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0160
        gbc.setState(0x8d0, 0x9bc4, 0xb490, 0xe7cc, 0xe685, 0xa71a, 0x1, 0x1);
        gbc.writeMem(0x8d0, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x9bc4);
        EXPECT(gbc.pc(), 0x8d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0161
        gbc.setState(0x2b67, 0x39f4, 0xd940, 0xaf4f, 0x14fe, 0x5d9f, 0x1, 0x1);
        gbc.writeMem(0x2b67, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x39f4);
        EXPECT(gbc.pc(), 0x2b69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0162
        gbc.setState(0xe743, 0xda98, 0x22c0, 0x4e5d, 0xd77b, 0xdec1, 0x0, 0x1);
        gbc.writeMem(0xe743, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xda98);
        EXPECT(gbc.pc(), 0xe745);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe743), 0xcb);
        EXPECT(gbc.readMem(0xe744), 0xf4);
        // CB F4 0163
        gbc.setState(0xdbc9, 0x7f46, 0xdc50, 0x6230, 0x651, 0x6c11, 0x0, 0x1);
        gbc.writeMem(0xdbc9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x7f46);
        EXPECT(gbc.pc(), 0xdbcb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbc9), 0xcb);
        EXPECT(gbc.readMem(0xdbca), 0xf4);
        // CB F4 0164
        gbc.setState(0x4590, 0xb69f, 0x33c0, 0xc2c0, 0xaa09, 0xd1c4, 0x0, 0x1);
        gbc.writeMem(0x4590, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xb69f);
        EXPECT(gbc.pc(), 0x4592);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0165
        gbc.setState(0x363c, 0x80e8, 0x5370, 0x371e, 0x62e7, 0x18ff, 0x0, 0x0);
        gbc.writeMem(0x363c, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x80e8);
        EXPECT(gbc.pc(), 0x363e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0166
        gbc.setState(0x27b3, 0xde08, 0x8e70, 0x2c82, 0x9b2d, 0x5523, 0x0, 0x1);
        gbc.writeMem(0x27b3, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xde08);
        EXPECT(gbc.pc(), 0x27b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0167
        gbc.setState(0x468d, 0x53ce, 0x19e0, 0xab29, 0x90d2, 0x7e13, 0x0, 0x1);
        gbc.writeMem(0x468d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x53ce);
        EXPECT(gbc.pc(), 0x468f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0168
        gbc.setState(0x15f9, 0x71ec, 0xd0, 0x2dd6, 0xaa96, 0xeff8, 0x0, 0x0);
        gbc.writeMem(0x15f9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x71ec);
        EXPECT(gbc.pc(), 0x15fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0169
        gbc.setState(0x2b63, 0x787f, 0x940, 0xa981, 0x8ae1, 0x90dc, 0x0, 0x1);
        gbc.writeMem(0x2b63, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x787f);
        EXPECT(gbc.pc(), 0x2b65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 016A
        gbc.setState(0x80ed, 0xb6f5, 0x5cd0, 0xfbf9, 0xac84, 0x89e7, 0x0, 0x1);
        gbc.writeMem(0x80ed, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xb6f5);
        EXPECT(gbc.pc(), 0x80ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80ed), 0xcb);
        EXPECT(gbc.readMem(0x80ee), 0xf4);
        // CB F4 016B
        gbc.setState(0x91ce, 0x8b09, 0x8bc0, 0xb207, 0xb451, 0x70d, 0x1, 0x0);
        gbc.writeMem(0x91ce, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x8b09);
        EXPECT(gbc.pc(), 0x91d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91ce), 0xcb);
        EXPECT(gbc.readMem(0x91cf), 0xf4);
        // CB F4 016C
        gbc.setState(0xb999, 0x8cf1, 0x5700, 0xda68, 0xab8, 0x7d8a, 0x1, 0x1);
        gbc.writeMem(0xb999, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x8cf1);
        EXPECT(gbc.pc(), 0xb99b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb999), 0xcb);
        EXPECT(gbc.readMem(0xb99a), 0xf4);
        // CB F4 016D
        gbc.setState(0xedae, 0x214f, 0x3030, 0x4315, 0xb2a1, 0x31f, 0x0, 0x0);
        gbc.writeMem(0xedae, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x214f);
        EXPECT(gbc.pc(), 0xedb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedae), 0xcb);
        EXPECT(gbc.readMem(0xedaf), 0xf4);
        // CB F4 016E
        gbc.setState(0xc950, 0xad2c, 0x3bd0, 0xcd01, 0x518c, 0xe2c1, 0x0, 0x1);
        gbc.writeMem(0xc950, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xad2c);
        EXPECT(gbc.pc(), 0xc952);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc950), 0xcb);
        EXPECT(gbc.readMem(0xc951), 0xf4);
        // CB F4 016F
        gbc.setState(0x93c6, 0x159c, 0x3550, 0x8722, 0x52b1, 0x75a9, 0x0, 0x0);
        gbc.writeMem(0x93c6, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x159c);
        EXPECT(gbc.pc(), 0x93c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93c6), 0xcb);
        EXPECT(gbc.readMem(0x93c7), 0xf4);
        // CB F4 0170
        gbc.setState(0x76ff, 0x814f, 0x48c0, 0x8b4b, 0x3d65, 0x2e98, 0x0, 0x1);
        gbc.writeMem(0x76ff, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x814f);
        EXPECT(gbc.pc(), 0x7701);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0171
        gbc.setState(0x1a96, 0x63bf, 0xa570, 0xa337, 0xe008, 0x12b6, 0x1, 0x0);
        gbc.writeMem(0x1a96, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x63bf);
        EXPECT(gbc.pc(), 0x1a98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0173
        gbc.setState(0x56a6, 0x30d6, 0xfab0, 0xdcf3, 0xbd70, 0xbbb4, 0x1, 0x1);
        gbc.writeMem(0x56a6, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x30d6);
        EXPECT(gbc.pc(), 0x56a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0174
        gbc.setState(0x21fd, 0xf71b, 0x10f0, 0xf06e, 0x9079, 0x665f, 0x1, 0x1);
        gbc.writeMem(0x21fd, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xf71b);
        EXPECT(gbc.pc(), 0x21ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0175
        gbc.setState(0xda20, 0x356e, 0x5c10, 0x3f44, 0x742f, 0xe7f8, 0x1, 0x1);
        gbc.writeMem(0xda20, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x356e);
        EXPECT(gbc.pc(), 0xda22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda20), 0xcb);
        EXPECT(gbc.readMem(0xda21), 0xf4);
        // CB F4 0176
        gbc.setState(0x999, 0xc2b9, 0xa70, 0x22aa, 0x986, 0xc71e, 0x1, 0x1);
        gbc.writeMem(0x999, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xc2b9);
        EXPECT(gbc.pc(), 0x99b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0177
        gbc.setState(0x75bf, 0x132d, 0xccd0, 0xe1fd, 0x9212, 0x6dbb, 0x1, 0x1);
        gbc.writeMem(0x75bf, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x132d);
        EXPECT(gbc.pc(), 0x75c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0179
        gbc.setState(0xb9bb, 0x4412, 0x3580, 0x6260, 0x8fca, 0x262d, 0x1, 0x0);
        gbc.writeMem(0xb9bb, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x4412);
        EXPECT(gbc.pc(), 0xb9bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9bb), 0xcb);
        EXPECT(gbc.readMem(0xb9bc), 0xf4);
        // CB F4 017A
        gbc.setState(0x2714, 0xf9ff, 0xa250, 0x1ff3, 0xac, 0xa3c1, 0x0, 0x0);
        gbc.writeMem(0x2714, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xf9ff);
        EXPECT(gbc.pc(), 0x2716);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 017B
        gbc.setState(0x1245, 0x45fe, 0x5d00, 0x2096, 0x3530, 0x671c, 0x1, 0x1);
        gbc.writeMem(0x1245, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x45fe);
        EXPECT(gbc.pc(), 0x1247);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 017C
        gbc.setState(0x83d, 0xc70f, 0x4cb0, 0x6c8d, 0xfe29, 0x8c84, 0x1, 0x1);
        gbc.writeMem(0x83d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xc70f);
        EXPECT(gbc.pc(), 0x83f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 017D
        gbc.setState(0x9d2e, 0x38e1, 0x78c0, 0x2e90, 0x3074, 0x335a, 0x1, 0x0);
        gbc.writeMem(0x9d2e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x38e1);
        EXPECT(gbc.pc(), 0x9d30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d2e), 0xcb);
        EXPECT(gbc.readMem(0x9d2f), 0xf4);
        // CB F4 017E
        gbc.setState(0x4423, 0x7652, 0x5200, 0xc22f, 0x8fdf, 0xde2f, 0x1, 0x1);
        gbc.writeMem(0x4423, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x7652);
        EXPECT(gbc.pc(), 0x4425);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 017F
        gbc.setState(0xdea4, 0x47cf, 0x4c0, 0xdadb, 0x69f, 0x25ec, 0x1, 0x1);
        gbc.writeMem(0xdea4, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x47cf);
        EXPECT(gbc.pc(), 0xdea6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdea4), 0xcb);
        EXPECT(gbc.readMem(0xdea5), 0xf4);
        // CB F4 0180
        gbc.setState(0x9214, 0xb8e8, 0xb3e0, 0x86ba, 0x81fc, 0x3484, 0x1, 0x0);
        gbc.writeMem(0x9214, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xb8e8);
        EXPECT(gbc.pc(), 0x9216);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9214), 0xcb);
        EXPECT(gbc.readMem(0x9215), 0xf4);
        // CB F4 0182
        gbc.setState(0x23ec, 0xe5d5, 0xab0, 0x9a92, 0x9e23, 0x4925, 0x0, 0x1);
        gbc.writeMem(0x23ec, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xe5d5);
        EXPECT(gbc.pc(), 0x23ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0183
        gbc.setState(0xd6c8, 0xe0aa, 0x1370, 0xbc9a, 0x8a0c, 0xcc0b, 0x0, 0x1);
        gbc.writeMem(0xd6c8, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xe0aa);
        EXPECT(gbc.pc(), 0xd6ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6c8), 0xcb);
        EXPECT(gbc.readMem(0xd6c9), 0xf4);
        // CB F4 0184
        gbc.setState(0x22f4, 0x836a, 0x2a70, 0xf770, 0x7fdc, 0xc55d, 0x0, 0x1);
        gbc.writeMem(0x22f4, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x836a);
        EXPECT(gbc.pc(), 0x22f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0185
        gbc.setState(0x5f55, 0x1a92, 0x1540, 0xbfc8, 0x4e63, 0x4889, 0x1, 0x1);
        gbc.writeMem(0x5f55, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x1a92);
        EXPECT(gbc.pc(), 0x5f57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0186
        gbc.setState(0x78ea, 0x2834, 0xd810, 0x4566, 0xf749, 0x9ace, 0x0, 0x1);
        gbc.writeMem(0x78ea, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x2834);
        EXPECT(gbc.pc(), 0x78ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0187
        gbc.setState(0x4b9, 0x4d4c, 0x1d80, 0x79c3, 0x748e, 0x80b7, 0x0, 0x0);
        gbc.writeMem(0x4b9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x4d4c);
        EXPECT(gbc.pc(), 0x4bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0188
        gbc.setState(0xcf99, 0x159, 0x6840, 0x6f83, 0x49d3, 0xeb12, 0x0, 0x1);
        gbc.writeMem(0xcf99, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x159);
        EXPECT(gbc.pc(), 0xcf9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf99), 0xcb);
        EXPECT(gbc.readMem(0xcf9a), 0xf4);
        // CB F4 018A
        gbc.setState(0xd838, 0xfbee, 0x1b50, 0xedde, 0x7dc3, 0x3ee0, 0x0, 0x1);
        gbc.writeMem(0xd838, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xfbee);
        EXPECT(gbc.pc(), 0xd83a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd838), 0xcb);
        EXPECT(gbc.readMem(0xd839), 0xf4);
        // CB F4 018B
        gbc.setState(0xce0f, 0x2df7, 0xf6d0, 0x6215, 0xe6ba, 0xda45, 0x0, 0x0);
        gbc.writeMem(0xce0f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x2df7);
        EXPECT(gbc.pc(), 0xce11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce0f), 0xcb);
        EXPECT(gbc.readMem(0xce10), 0xf4);
        // CB F4 018C
        gbc.setState(0x86f3, 0x464d, 0x6d10, 0x18d7, 0xbeeb, 0xb373, 0x1, 0x1);
        gbc.writeMem(0x86f3, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x464d);
        EXPECT(gbc.pc(), 0x86f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86f3), 0xcb);
        EXPECT(gbc.readMem(0x86f4), 0xf4);
        // CB F4 018D
        gbc.setState(0xcfd3, 0x9dd4, 0xaf30, 0xdd19, 0x7eeb, 0x8fae, 0x0, 0x1);
        gbc.writeMem(0xcfd3, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x9dd4);
        EXPECT(gbc.pc(), 0xcfd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfd3), 0xcb);
        EXPECT(gbc.readMem(0xcfd4), 0xf4);
        // CB F4 018E
        gbc.setState(0xaa80, 0x6a72, 0x6070, 0x49a, 0x743e, 0xb10f, 0x0, 0x1);
        gbc.writeMem(0xaa80, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x6a72);
        EXPECT(gbc.pc(), 0xaa82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa80), 0xcb);
        EXPECT(gbc.readMem(0xaa81), 0xf4);
        // CB F4 0190
        gbc.setState(0x6f92, 0x8d46, 0xa10, 0x7176, 0xe438, 0xa9fa, 0x0, 0x0);
        gbc.writeMem(0x6f92, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x8d46);
        EXPECT(gbc.pc(), 0x6f94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0191
        gbc.setState(0xe77a, 0x650f, 0xfc60, 0xeea0, 0xc84, 0x3d91, 0x1, 0x0);
        gbc.writeMem(0xe77a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x650f);
        EXPECT(gbc.pc(), 0xe77c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe77a), 0xcb);
        EXPECT(gbc.readMem(0xe77b), 0xf4);
        // CB F4 0192
        gbc.setState(0x8448, 0x547b, 0xb930, 0x6078, 0x290b, 0xab96, 0x0, 0x1);
        gbc.writeMem(0x8448, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x547b);
        EXPECT(gbc.pc(), 0x844a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8448), 0xcb);
        EXPECT(gbc.readMem(0x8449), 0xf4);
        // CB F4 0193
        gbc.setState(0x19c, 0x702c, 0x22f0, 0xe656, 0x495d, 0x9f7a, 0x0, 0x1);
        gbc.writeMem(0x19c, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x702c);
        EXPECT(gbc.pc(), 0x19e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0194
        gbc.setState(0xa7bc, 0xed4f, 0xab00, 0x9042, 0xca11, 0x5851, 0x0, 0x0);
        gbc.writeMem(0xa7bc, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xed4f);
        EXPECT(gbc.pc(), 0xa7be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7bc), 0xcb);
        EXPECT(gbc.readMem(0xa7bd), 0xf4);
        // CB F4 0195
        gbc.setState(0x4f23, 0x119c, 0x77f0, 0xcebe, 0x3fb1, 0xce34, 0x1, 0x0);
        gbc.writeMem(0x4f23, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x119c);
        EXPECT(gbc.pc(), 0x4f25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0196
        gbc.setState(0x8e08, 0x521c, 0xdbc0, 0xbdd4, 0xb5b6, 0x43d8, 0x1, 0x1);
        gbc.writeMem(0x8e08, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x521c);
        EXPECT(gbc.pc(), 0x8e0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e08), 0xcb);
        EXPECT(gbc.readMem(0x8e09), 0xf4);
        // CB F4 0197
        gbc.setState(0x9f4b, 0xbe13, 0xe230, 0x1200, 0x614c, 0x74f8, 0x1, 0x0);
        gbc.writeMem(0x9f4b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xbe13);
        EXPECT(gbc.pc(), 0x9f4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f4b), 0xcb);
        EXPECT(gbc.readMem(0x9f4c), 0xf4);
        // CB F4 0198
        gbc.setState(0xe317, 0x96aa, 0xaaf0, 0xdb9c, 0x9f58, 0x594c, 0x1, 0x0);
        gbc.writeMem(0xe317, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x96aa);
        EXPECT(gbc.pc(), 0xe319);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe317), 0xcb);
        EXPECT(gbc.readMem(0xe318), 0xf4);
        // CB F4 0199
        gbc.setState(0xe8c6, 0xac43, 0x8530, 0xa467, 0xea19, 0xf196, 0x0, 0x1);
        gbc.writeMem(0xe8c6, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xac43);
        EXPECT(gbc.pc(), 0xe8c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8c6), 0xcb);
        EXPECT(gbc.readMem(0xe8c7), 0xf4);
        // CB F4 019A
        gbc.setState(0xca4b, 0x8473, 0x2280, 0x3c28, 0xddb4, 0x14e8, 0x1, 0x1);
        gbc.writeMem(0xca4b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x8473);
        EXPECT(gbc.pc(), 0xca4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca4b), 0xcb);
        EXPECT(gbc.readMem(0xca4c), 0xf4);
        // CB F4 019B
        gbc.setState(0x489c, 0xe2e4, 0x6c60, 0x3a3f, 0xe328, 0xa0a, 0x1, 0x1);
        gbc.writeMem(0x489c, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xe2e4);
        EXPECT(gbc.pc(), 0x489e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 019D
        gbc.setState(0xc5c9, 0x6f5b, 0xc380, 0xd404, 0x7383, 0xb24b, 0x0, 0x0);
        gbc.writeMem(0xc5c9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x6f5b);
        EXPECT(gbc.pc(), 0xc5cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5c9), 0xcb);
        EXPECT(gbc.readMem(0xc5ca), 0xf4);
        // CB F4 019E
        gbc.setState(0xc8b5, 0xe32c, 0xc620, 0x83f1, 0x579b, 0x3f11, 0x1, 0x1);
        gbc.writeMem(0xc8b5, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xe32c);
        EXPECT(gbc.pc(), 0xc8b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8b5), 0xcb);
        EXPECT(gbc.readMem(0xc8b6), 0xf4);
        // CB F4 019F
        gbc.setState(0x9ba6, 0xb0ae, 0x86a0, 0xeab5, 0x5c3f, 0xf44b, 0x1, 0x1);
        gbc.writeMem(0x9ba6, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xb0ae);
        EXPECT(gbc.pc(), 0x9ba8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ba6), 0xcb);
        EXPECT(gbc.readMem(0x9ba7), 0xf4);
        // CB F4 01A0
        gbc.setState(0x6f2f, 0x4eea, 0x66f0, 0x225f, 0xfc18, 0x572f, 0x0, 0x1);
        gbc.writeMem(0x6f2f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x4eea);
        EXPECT(gbc.pc(), 0x6f31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 01A1
        gbc.setState(0x3c77, 0x1e0b, 0xb800, 0x7803, 0x9d80, 0xc454, 0x0, 0x1);
        gbc.writeMem(0x3c77, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x1e0b);
        EXPECT(gbc.pc(), 0x3c79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 01A2
        gbc.setState(0xa095, 0x1045, 0x9d0, 0x28fc, 0x743a, 0x6269, 0x0, 0x1);
        gbc.writeMem(0xa095, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x1045);
        EXPECT(gbc.pc(), 0xa097);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa095), 0xcb);
        EXPECT(gbc.readMem(0xa096), 0xf4);
        // CB F4 01A4
        gbc.setState(0xaa03, 0x922a, 0x79f0, 0xd280, 0x63fb, 0xc885, 0x1, 0x0);
        gbc.writeMem(0xaa03, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x922a);
        EXPECT(gbc.pc(), 0xaa05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa03), 0xcb);
        EXPECT(gbc.readMem(0xaa04), 0xf4);
        // CB F4 01A6
        gbc.setState(0xb7ad, 0xcd7, 0x57f0, 0x4845, 0x5c06, 0x26a1, 0x1, 0x0);
        gbc.writeMem(0xb7ad, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xcd7);
        EXPECT(gbc.pc(), 0xb7af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7ad), 0xcb);
        EXPECT(gbc.readMem(0xb7ae), 0xf4);
        // CB F4 01A7
        gbc.setState(0x3e73, 0xfd4e, 0xe90, 0xe3ce, 0x2b7a, 0xf4b2, 0x1, 0x0);
        gbc.writeMem(0x3e73, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xfd4e);
        EXPECT(gbc.pc(), 0x3e75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 01A8
        gbc.setState(0x2f78, 0x9756, 0xaa60, 0x7d1c, 0x7c01, 0xa6e6, 0x1, 0x0);
        gbc.writeMem(0x2f78, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x9756);
        EXPECT(gbc.pc(), 0x2f7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 01A9
        gbc.setState(0xd669, 0x974f, 0x8f80, 0x73b7, 0x9d1b, 0x9e7f, 0x1, 0x0);
        gbc.writeMem(0xd669, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x974f);
        EXPECT(gbc.pc(), 0xd66b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd669), 0xcb);
        EXPECT(gbc.readMem(0xd66a), 0xf4);
        // CB F4 01AA
        gbc.setState(0x5028, 0xe8ca, 0xd0a0, 0xbfd4, 0x5df0, 0x4c20, 0x0, 0x0);
        gbc.writeMem(0x5028, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xe8ca);
        EXPECT(gbc.pc(), 0x502a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 01AB
        gbc.setState(0xbf0c, 0x518b, 0x8270, 0xce1, 0x5f8d, 0x693b, 0x1, 0x1);
        gbc.writeMem(0xbf0c, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x518b);
        EXPECT(gbc.pc(), 0xbf0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf0c), 0xcb);
        EXPECT(gbc.readMem(0xbf0d), 0xf4);
        // CB F4 01AC
        gbc.setState(0x8855, 0x56b3, 0x1a80, 0x49c9, 0xad2c, 0x6e5, 0x1, 0x1);
        gbc.writeMem(0x8855, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x56b3);
        EXPECT(gbc.pc(), 0x8857);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8855), 0xcb);
        EXPECT(gbc.readMem(0x8856), 0xf4);
        // CB F4 01AD
        gbc.setState(0x1aad, 0x49d7, 0x4290, 0xc63d, 0x3e54, 0xaf58, 0x0, 0x1);
        gbc.writeMem(0x1aad, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x49d7);
        EXPECT(gbc.pc(), 0x1aaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 01AE
        gbc.setState(0xfa9, 0x4417, 0xc6c0, 0x3af0, 0x9a9a, 0xc4bc, 0x0, 0x0);
        gbc.writeMem(0xfa9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x4417);
        EXPECT(gbc.pc(), 0xfab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 01AF
        gbc.setState(0xd883, 0x9c8e, 0x8470, 0x8bd2, 0xcb5c, 0xd679, 0x1, 0x1);
        gbc.writeMem(0xd883, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x9c8e);
        EXPECT(gbc.pc(), 0xd885);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd883), 0xcb);
        EXPECT(gbc.readMem(0xd884), 0xf4);
        // CB F4 01B0
        gbc.setState(0x17fe, 0x9bf3, 0x2b10, 0x6a1e, 0xd40, 0x5e42, 0x1, 0x0);
        gbc.writeMem(0x17fe, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x9bf3);
        EXPECT(gbc.pc(), 0x1800);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 01B1
        gbc.setState(0x104, 0x9ed2, 0x2450, 0xb891, 0x31ac, 0xa59c, 0x0, 0x1);
        gbc.writeMem(0x104, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x9ed2);
        EXPECT(gbc.pc(), 0x106);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 01B2
        gbc.setState(0x7070, 0x8ec7, 0x5a20, 0x61c3, 0x2588, 0xfb14, 0x1, 0x0);
        gbc.writeMem(0x7070, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x8ec7);
        EXPECT(gbc.pc(), 0x7072);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 01B3
        gbc.setState(0x1654, 0xfdab, 0x7350, 0x36c9, 0x6d7a, 0x7361, 0x1, 0x1);
        gbc.writeMem(0x1654, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xfdab);
        EXPECT(gbc.pc(), 0x1656);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 01B4
        gbc.setState(0x194d, 0xbc80, 0x7890, 0xd9c4, 0xe10, 0x34d8, 0x0, 0x0);
        gbc.writeMem(0x194d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xbc80);
        EXPECT(gbc.pc(), 0x194f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 01B5
        gbc.setState(0xd29f, 0xe87f, 0xd120, 0xd5e3, 0x71c0, 0x9342, 0x1, 0x0);
        gbc.writeMem(0xd29f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xe87f);
        EXPECT(gbc.pc(), 0xd2a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd29f), 0xcb);
        EXPECT(gbc.readMem(0xd2a0), 0xf4);
        // CB F4 01B6
        gbc.setState(0x6e7b, 0xc144, 0x9400, 0x7293, 0xda8e, 0x7efa, 0x1, 0x1);
        gbc.writeMem(0x6e7b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xc144);
        EXPECT(gbc.pc(), 0x6e7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 01B8
        gbc.setState(0x738e, 0xdb0c, 0x3390, 0x90d4, 0x4298, 0x20dc, 0x1, 0x0);
        gbc.writeMem(0x738e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xdb0c);
        EXPECT(gbc.pc(), 0x7390);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 01B9
        gbc.setState(0x2d99, 0xa255, 0x5c10, 0xf62a, 0x987e, 0x8243, 0x1, 0x1);
        gbc.writeMem(0x2d99, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xa255);
        EXPECT(gbc.pc(), 0x2d9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 01BA
        gbc.setState(0xc92d, 0x4bdb, 0x6ed0, 0xda4a, 0xcf76, 0x3948, 0x0, 0x0);
        gbc.writeMem(0xc92d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x4bdb);
        EXPECT(gbc.pc(), 0xc92f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc92d), 0xcb);
        EXPECT(gbc.readMem(0xc92e), 0xf4);
        // CB F4 01BB
        gbc.setState(0xaef4, 0x8351, 0x6a50, 0xee21, 0xff63, 0xae46, 0x1, 0x0);
        gbc.writeMem(0xaef4, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x8351);
        EXPECT(gbc.pc(), 0xaef6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaef4), 0xcb);
        EXPECT(gbc.readMem(0xaef5), 0xf4);
        // CB F4 01BC
        gbc.setState(0x509b, 0xb09b, 0xbda0, 0x3724, 0x31ad, 0x134d, 0x1, 0x0);
        gbc.writeMem(0x509b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xb09b);
        EXPECT(gbc.pc(), 0x509d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 01BD
        gbc.setState(0x773c, 0x1e22, 0x47c0, 0x16bf, 0x1560, 0x51a1, 0x0, 0x0);
        gbc.writeMem(0x773c, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x1e22);
        EXPECT(gbc.pc(), 0x773e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 01BE
        gbc.setState(0xdda8, 0x58b9, 0xdb80, 0x3675, 0xbf88, 0xddd6, 0x1, 0x0);
        gbc.writeMem(0xdda8, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x58b9);
        EXPECT(gbc.pc(), 0xddaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdda8), 0xcb);
        EXPECT(gbc.readMem(0xdda9), 0xf4);
        // CB F4 01BF
        gbc.setState(0xb790, 0xbdc1, 0xf950, 0x100f, 0xf181, 0xe99a, 0x1, 0x0);
        gbc.writeMem(0xb790, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xbdc1);
        EXPECT(gbc.pc(), 0xb792);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb790), 0xcb);
        EXPECT(gbc.readMem(0xb791), 0xf4);
        // CB F4 01C0
        gbc.setState(0x2f6d, 0x264d, 0x2280, 0xa978, 0x91a8, 0xb6e0, 0x0, 0x0);
        gbc.writeMem(0x2f6d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x264d);
        EXPECT(gbc.pc(), 0x2f6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 01C1
        gbc.setState(0xdf2d, 0x6494, 0x5db0, 0xe52e, 0x8892, 0x37e2, 0x0, 0x0);
        gbc.writeMem(0xdf2d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x6494);
        EXPECT(gbc.pc(), 0xdf2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf2d), 0xcb);
        EXPECT(gbc.readMem(0xdf2e), 0xf4);
        // CB F4 01C2
        gbc.setState(0x7e5, 0xce49, 0x3020, 0xe12e, 0x20b5, 0x3686, 0x0, 0x1);
        gbc.writeMem(0x7e5, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xce49);
        EXPECT(gbc.pc(), 0x7e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 01C4
        gbc.setState(0x4144, 0xdd7d, 0xc50, 0xca0c, 0x7dd3, 0x3151, 0x1, 0x1);
        gbc.writeMem(0x4144, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xdd7d);
        EXPECT(gbc.pc(), 0x4146);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 01C5
        gbc.setState(0x51fa, 0x9f5e, 0xe6d0, 0xff4a, 0x4c89, 0x88b1, 0x0, 0x1);
        gbc.writeMem(0x51fa, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x9f5e);
        EXPECT(gbc.pc(), 0x51fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 01C6
        gbc.setState(0x10a2, 0x9e59, 0xb3e0, 0xc6a5, 0x56a, 0x9509, 0x1, 0x1);
        gbc.writeMem(0x10a2, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x9e59);
        EXPECT(gbc.pc(), 0x10a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 01C7
        gbc.setState(0x3218, 0x1763, 0xbfb0, 0x2ab7, 0x3f0c, 0xd8a, 0x0, 0x0);
        gbc.writeMem(0x3218, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x1763);
        EXPECT(gbc.pc(), 0x321a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 01C8
        gbc.setState(0x5ecd, 0xeb86, 0x6cf0, 0xded1, 0x3b5, 0xb7e, 0x0, 0x1);
        gbc.writeMem(0x5ecd, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xeb86);
        EXPECT(gbc.pc(), 0x5ecf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 01C9
        gbc.setState(0x1ccc, 0x2b04, 0xb320, 0xb98f, 0xd45b, 0x81a9, 0x1, 0x1);
        gbc.writeMem(0x1ccc, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x2b04);
        EXPECT(gbc.pc(), 0x1cce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 01CA
        gbc.setState(0xa5cb, 0x5f54, 0x2b10, 0xf695, 0x4cf7, 0x9923, 0x0, 0x0);
        gbc.writeMem(0xa5cb, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x5f54);
        EXPECT(gbc.pc(), 0xa5cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5cb), 0xcb);
        EXPECT(gbc.readMem(0xa5cc), 0xf4);
        // CB F4 01CB
        gbc.setState(0xa0c1, 0x5f25, 0xfe10, 0x2fca, 0x764a, 0x80fd, 0x1, 0x0);
        gbc.writeMem(0xa0c1, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x5f25);
        EXPECT(gbc.pc(), 0xa0c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0c1), 0xcb);
        EXPECT(gbc.readMem(0xa0c2), 0xf4);
        // CB F4 01CC
        gbc.setState(0x52ab, 0xd710, 0xa880, 0xe6e3, 0x5f4c, 0x8f50, 0x1, 0x1);
        gbc.writeMem(0x52ab, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xd710);
        EXPECT(gbc.pc(), 0x52ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 01CD
        gbc.setState(0x5cc1, 0x19d4, 0x6580, 0xb043, 0xcee4, 0x92bd, 0x0, 0x1);
        gbc.writeMem(0x5cc1, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x19d4);
        EXPECT(gbc.pc(), 0x5cc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 01CE
        gbc.setState(0x842a, 0x3bc5, 0xd2e0, 0x8b9, 0xa450, 0x9cd5, 0x0, 0x1);
        gbc.writeMem(0x842a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x3bc5);
        EXPECT(gbc.pc(), 0x842c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x842a), 0xcb);
        EXPECT(gbc.readMem(0x842b), 0xf4);
        // CB F4 01CF
        gbc.setState(0x1e96, 0xf33, 0xd3f0, 0x9a1e, 0x6afb, 0x2356, 0x1, 0x1);
        gbc.writeMem(0x1e96, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xf33);
        EXPECT(gbc.pc(), 0x1e98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 01D0
        gbc.setState(0x6e1c, 0xd55, 0x17f0, 0xac49, 0x999e, 0x7450, 0x0, 0x0);
        gbc.writeMem(0x6e1c, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xd55);
        EXPECT(gbc.pc(), 0x6e1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 01D2
        gbc.setState(0x69d2, 0x4530, 0x4be0, 0x6257, 0x84f7, 0x3ec9, 0x1, 0x1);
        gbc.writeMem(0x69d2, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x4530);
        EXPECT(gbc.pc(), 0x69d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 01D3
        gbc.setState(0x2697, 0xece1, 0x4250, 0x697c, 0x131d, 0x3c0d, 0x1, 0x1);
        gbc.writeMem(0x2697, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xece1);
        EXPECT(gbc.pc(), 0x2699);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 01D4
        gbc.setState(0x65dd, 0xecee, 0x5ca0, 0xe6d, 0x7240, 0xd673, 0x1, 0x1);
        gbc.writeMem(0x65dd, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xecee);
        EXPECT(gbc.pc(), 0x65df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 01D5
        gbc.setState(0x1865, 0xa578, 0x8ec0, 0xfd14, 0x56ca, 0xad34, 0x1, 0x0);
        gbc.writeMem(0x1865, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xa578);
        EXPECT(gbc.pc(), 0x1867);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 01D6
        gbc.setState(0x4f9a, 0x6f59, 0x41a0, 0xfd4, 0x7d24, 0x3926, 0x1, 0x1);
        gbc.writeMem(0x4f9a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x6f59);
        EXPECT(gbc.pc(), 0x4f9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 01D7
        gbc.setState(0xcf5a, 0x36e, 0x8ee0, 0x96f4, 0xd3a6, 0x92e0, 0x1, 0x1);
        gbc.writeMem(0xcf5a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x36e);
        EXPECT(gbc.pc(), 0xcf5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf5a), 0xcb);
        EXPECT(gbc.readMem(0xcf5b), 0xf4);
        // CB F4 01D8
        gbc.setState(0xb994, 0xd536, 0x9be0, 0xad9d, 0xf330, 0xee95, 0x1, 0x1);
        gbc.writeMem(0xb994, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xd536);
        EXPECT(gbc.pc(), 0xb996);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb994), 0xcb);
        EXPECT(gbc.readMem(0xb995), 0xf4);
        // CB F4 01D9
        gbc.setState(0xa4d4, 0xdf2d, 0x6e0, 0x918f, 0x6d9f, 0x3e47, 0x0, 0x0);
        gbc.writeMem(0xa4d4, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xdf2d);
        EXPECT(gbc.pc(), 0xa4d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4d4), 0xcb);
        EXPECT(gbc.readMem(0xa4d5), 0xf4);
        // CB F4 01DA
        gbc.setState(0xca46, 0x1538, 0x21a0, 0x44a3, 0x7081, 0x364, 0x0, 0x1);
        gbc.writeMem(0xca46, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x1538);
        EXPECT(gbc.pc(), 0xca48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca46), 0xcb);
        EXPECT(gbc.readMem(0xca47), 0xf4);
        // CB F4 01DB
        gbc.setState(0x48ec, 0x859f, 0x290, 0x9e58, 0x955f, 0xf7f4, 0x1, 0x0);
        gbc.writeMem(0x48ec, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x859f);
        EXPECT(gbc.pc(), 0x48ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 01DC
        gbc.setState(0x860e, 0xfd11, 0xbf20, 0x4a40, 0x8afa, 0xb577, 0x1, 0x0);
        gbc.writeMem(0x860e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xfd11);
        EXPECT(gbc.pc(), 0x8610);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x860e), 0xcb);
        EXPECT(gbc.readMem(0x860f), 0xf4);
        // CB F4 01DD
        gbc.setState(0x724b, 0x3ec7, 0x2290, 0x4e63, 0xb466, 0xebd7, 0x0, 0x1);
        gbc.writeMem(0x724b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x3ec7);
        EXPECT(gbc.pc(), 0x724d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 01DE
        gbc.setState(0x8e8e, 0xf9ea, 0x9c60, 0x8c7c, 0xac7e, 0x900e, 0x1, 0x0);
        gbc.writeMem(0x8e8e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xf9ea);
        EXPECT(gbc.pc(), 0x8e90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e8e), 0xcb);
        EXPECT(gbc.readMem(0x8e8f), 0xf4);
        // CB F4 01DF
        gbc.setState(0xcacd, 0xc265, 0x210, 0xcacd, 0x1b54, 0x7a3f, 0x1, 0x0);
        gbc.writeMem(0xcacd, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xc265);
        EXPECT(gbc.pc(), 0xcacf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcacd), 0xcb);
        EXPECT(gbc.readMem(0xcace), 0xf4);
        // CB F4 01E0
        gbc.setState(0x9db8, 0xef6a, 0x1100, 0x8e43, 0xf6b8, 0xf70e, 0x1, 0x0);
        gbc.writeMem(0x9db8, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xef6a);
        EXPECT(gbc.pc(), 0x9dba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9db8), 0xcb);
        EXPECT(gbc.readMem(0x9db9), 0xf4);
        // CB F4 01E1
        gbc.setState(0x931c, 0x5dd9, 0xc8e0, 0x9836, 0xf02, 0x3252, 0x1, 0x1);
        gbc.writeMem(0x931c, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x5dd9);
        EXPECT(gbc.pc(), 0x931e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x931c), 0xcb);
        EXPECT(gbc.readMem(0x931d), 0xf4);
        // CB F4 01E2
        gbc.setState(0x45d, 0xb389, 0x6f20, 0x875, 0xeeff, 0x2ebe, 0x1, 0x0);
        gbc.writeMem(0x45d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xb389);
        EXPECT(gbc.pc(), 0x45f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 01E3
        gbc.setState(0x1a62, 0xe639, 0xeb70, 0xe163, 0xd663, 0xf9a0, 0x1, 0x1);
        gbc.writeMem(0x1a62, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xe639);
        EXPECT(gbc.pc(), 0x1a64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 01E4
        gbc.setState(0x2a3a, 0xc8bd, 0x1380, 0xb34b, 0x36fc, 0xd8a5, 0x0, 0x0);
        gbc.writeMem(0x2a3a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xc8bd);
        EXPECT(gbc.pc(), 0x2a3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 01E5
        gbc.setState(0x7843, 0x6a01, 0x6520, 0xe97a, 0xbe08, 0x727a, 0x0, 0x1);
        gbc.writeMem(0x7843, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x6a01);
        EXPECT(gbc.pc(), 0x7845);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 01E6
        gbc.setState(0x10c5, 0x14ad, 0x7d90, 0x5152, 0xb5cc, 0x7b29, 0x1, 0x1);
        gbc.writeMem(0x10c5, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x14ad);
        EXPECT(gbc.pc(), 0x10c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 01E9
        gbc.setState(0x3530, 0xf389, 0x7e10, 0xb53e, 0x473d, 0xc37c, 0x1, 0x1);
        gbc.writeMem(0x3530, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xf389);
        EXPECT(gbc.pc(), 0x3532);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 01EA
        gbc.setState(0xacc7, 0xceac, 0xcd90, 0xebb6, 0xe26e, 0x5719, 0x0, 0x1);
        gbc.writeMem(0xacc7, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xceac);
        EXPECT(gbc.pc(), 0xacc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacc7), 0xcb);
        EXPECT(gbc.readMem(0xacc8), 0xf4);
        // CB F4 01EB
        gbc.setState(0xb719, 0x31e1, 0x3200, 0x22cf, 0xe996, 0xf4f4, 0x1, 0x0);
        gbc.writeMem(0xb719, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x31e1);
        EXPECT(gbc.pc(), 0xb71b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb719), 0xcb);
        EXPECT(gbc.readMem(0xb71a), 0xf4);
        // CB F4 01EC
        gbc.setState(0x79d, 0x720c, 0x7740, 0x19ca, 0xf46f, 0x4c3a, 0x1, 0x1);
        gbc.writeMem(0x79d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x720c);
        EXPECT(gbc.pc(), 0x79f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 01ED
        gbc.setState(0xb47c, 0x6f74, 0xaf60, 0x6de5, 0xa6ef, 0x7739, 0x0, 0x1);
        gbc.writeMem(0xb47c, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x6f74);
        EXPECT(gbc.pc(), 0xb47e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb47c), 0xcb);
        EXPECT(gbc.readMem(0xb47d), 0xf4);
        // CB F4 01EE
        gbc.setState(0x193a, 0x48f6, 0x9f10, 0xacaa, 0x26ad, 0x3428, 0x0, 0x0);
        gbc.writeMem(0x193a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x48f6);
        EXPECT(gbc.pc(), 0x193c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 01EF
        gbc.setState(0x7040, 0xd314, 0xd460, 0x5e0e, 0xf5c8, 0xfcbc, 0x1, 0x0);
        gbc.writeMem(0x7040, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xd314);
        EXPECT(gbc.pc(), 0x7042);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 01F0
        gbc.setState(0x23fd, 0xb7ee, 0x12f0, 0x4ee5, 0xf91d, 0x78fb, 0x0, 0x1);
        gbc.writeMem(0x23fd, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xb7ee);
        EXPECT(gbc.pc(), 0x23ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 01F1
        gbc.setState(0xc974, 0x2a68, 0x7bd0, 0xa880, 0x481b, 0xd6f6, 0x1, 0x0);
        gbc.writeMem(0xc974, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x2a68);
        EXPECT(gbc.pc(), 0xc976);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc974), 0xcb);
        EXPECT(gbc.readMem(0xc975), 0xf4);
        // CB F4 01F2
        gbc.setState(0xb482, 0x3fb8, 0xc570, 0x2d7a, 0xe614, 0xeca3, 0x1, 0x0);
        gbc.writeMem(0xb482, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x3fb8);
        EXPECT(gbc.pc(), 0xb484);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb482), 0xcb);
        EXPECT(gbc.readMem(0xb483), 0xf4);
        // CB F4 01F3
        gbc.setState(0x6de9, 0xe70b, 0x7a60, 0xce4e, 0xcd06, 0x289e, 0x1, 0x1);
        gbc.writeMem(0x6de9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xe70b);
        EXPECT(gbc.pc(), 0x6deb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 01F4
        gbc.setState(0xdc7, 0x5127, 0xeed0, 0x7c6b, 0x561f, 0xc0ce, 0x0, 0x0);
        gbc.writeMem(0xdc7, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x5127);
        EXPECT(gbc.pc(), 0xdc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 01F5
        gbc.setState(0x5547, 0x9b92, 0xe8f0, 0xd452, 0x96a6, 0x1cfc, 0x0, 0x0);
        gbc.writeMem(0x5547, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x9b92);
        EXPECT(gbc.pc(), 0x5549);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 01F6
        gbc.setState(0xc1dc, 0xdbc3, 0x5830, 0xdaac, 0x2bc1, 0xaf0, 0x0, 0x1);
        gbc.writeMem(0xc1dc, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xdbc3);
        EXPECT(gbc.pc(), 0xc1de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1dc), 0xcb);
        EXPECT(gbc.readMem(0xc1dd), 0xf4);
        // CB F4 01F7
        gbc.setState(0x3d2a, 0x8768, 0xdfe0, 0x4bd3, 0x97dd, 0x1e5c, 0x0, 0x0);
        gbc.writeMem(0x3d2a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x8768);
        EXPECT(gbc.pc(), 0x3d2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 01F8
        gbc.setState(0x274b, 0x25f1, 0xada0, 0x36c6, 0x450b, 0x8ac5, 0x0, 0x0);
        gbc.writeMem(0x274b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x25f1);
        EXPECT(gbc.pc(), 0x274d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 01F9
        gbc.setState(0x58fd, 0x6b93, 0xf0, 0xeb34, 0xba4f, 0x7415, 0x1, 0x0);
        gbc.writeMem(0x58fd, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x6b93);
        EXPECT(gbc.pc(), 0x58ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 01FA
        gbc.setState(0x5a99, 0xcc40, 0x60e0, 0x87f1, 0x7104, 0x641b, 0x1, 0x0);
        gbc.writeMem(0x5a99, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xcc40);
        EXPECT(gbc.pc(), 0x5a9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 01FB
        gbc.setState(0x18ef, 0xb0af, 0x9fd0, 0xe536, 0x9bda, 0x9711, 0x1, 0x1);
        gbc.writeMem(0x18ef, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xb0af);
        EXPECT(gbc.pc(), 0x18f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 01FC
        gbc.setState(0x18f4, 0x7cc5, 0xec80, 0x7c2c, 0x1636, 0x2547, 0x0, 0x1);
        gbc.writeMem(0x18f4, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x7cc5);
        EXPECT(gbc.pc(), 0x18f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 01FE
        gbc.setState(0x117e, 0x6dc6, 0xb650, 0x596a, 0xd0ea, 0x3808, 0x1, 0x0);
        gbc.writeMem(0x117e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x6dc6);
        EXPECT(gbc.pc(), 0x1180);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 01FF
        gbc.setState(0xa28e, 0x343f, 0x79e0, 0xe748, 0x88e0, 0x9f81, 0x1, 0x1);
        gbc.writeMem(0xa28e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x343f);
        EXPECT(gbc.pc(), 0xa290);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa28e), 0xcb);
        EXPECT(gbc.readMem(0xa28f), 0xf4);
        // CB F4 0200
        gbc.setState(0xd441, 0x85e4, 0x29e0, 0x7b1f, 0xb0c8, 0xd9c8, 0x1, 0x1);
        gbc.writeMem(0xd441, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x85e4);
        EXPECT(gbc.pc(), 0xd443);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd441), 0xcb);
        EXPECT(gbc.readMem(0xd442), 0xf4);
        // CB F4 0201
        gbc.setState(0xdfde, 0x2edc, 0x50, 0x1461, 0x1c60, 0xd5ce, 0x0, 0x0);
        gbc.writeMem(0xdfde, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x2edc);
        EXPECT(gbc.pc(), 0xdfe0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfde), 0xcb);
        EXPECT(gbc.readMem(0xdfdf), 0xf4);
        // CB F4 0202
        gbc.setState(0x5766, 0x233a, 0x34e0, 0x6bc6, 0x44db, 0xb9d, 0x0, 0x0);
        gbc.writeMem(0x5766, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x233a);
        EXPECT(gbc.pc(), 0x5768);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0203
        gbc.setState(0x8ba2, 0xd429, 0xc8c0, 0x9704, 0x9943, 0x5bc2, 0x1, 0x1);
        gbc.writeMem(0x8ba2, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xd429);
        EXPECT(gbc.pc(), 0x8ba4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ba2), 0xcb);
        EXPECT(gbc.readMem(0x8ba3), 0xf4);
        // CB F4 0204
        gbc.setState(0x4fe3, 0xa093, 0x5de0, 0xefd0, 0xdf9, 0x1b81, 0x0, 0x1);
        gbc.writeMem(0x4fe3, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xa093);
        EXPECT(gbc.pc(), 0x4fe5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0205
        gbc.setState(0xcae3, 0x1516, 0x2530, 0x83e8, 0xe4fa, 0x5ee1, 0x1, 0x0);
        gbc.writeMem(0xcae3, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x1516);
        EXPECT(gbc.pc(), 0xcae5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcae3), 0xcb);
        EXPECT(gbc.readMem(0xcae4), 0xf4);
        // CB F4 0208
        gbc.setState(0xd8b, 0xd2b, 0x6940, 0xbc6a, 0x4d2b, 0x40b9, 0x0, 0x0);
        gbc.writeMem(0xd8b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xd2b);
        EXPECT(gbc.pc(), 0xd8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0209
        gbc.setState(0xb1d0, 0xada6, 0xa280, 0x6ff, 0x452a, 0xfe9f, 0x1, 0x1);
        gbc.writeMem(0xb1d0, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xada6);
        EXPECT(gbc.pc(), 0xb1d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1d0), 0xcb);
        EXPECT(gbc.readMem(0xb1d1), 0xf4);
        // CB F4 020A
        gbc.setState(0x87fc, 0xd9f1, 0x7040, 0x7c69, 0x8f1f, 0x1670, 0x1, 0x1);
        gbc.writeMem(0x87fc, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xd9f1);
        EXPECT(gbc.pc(), 0x87fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87fc), 0xcb);
        EXPECT(gbc.readMem(0x87fd), 0xf4);
        // CB F4 020B
        gbc.setState(0x6977, 0x2bb7, 0xe820, 0x4d52, 0x554b, 0xe204, 0x1, 0x0);
        gbc.writeMem(0x6977, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x2bb7);
        EXPECT(gbc.pc(), 0x6979);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 020C
        gbc.setState(0xd5d7, 0x37fd, 0x4e60, 0x5816, 0x3b16, 0xd00c, 0x1, 0x0);
        gbc.writeMem(0xd5d7, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x37fd);
        EXPECT(gbc.pc(), 0xd5d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5d7), 0xcb);
        EXPECT(gbc.readMem(0xd5d8), 0xf4);
        // CB F4 020D
        gbc.setState(0x82d3, 0xb9f8, 0x53c0, 0xa95f, 0x2509, 0x23cc, 0x1, 0x1);
        gbc.writeMem(0x82d3, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xb9f8);
        EXPECT(gbc.pc(), 0x82d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82d3), 0xcb);
        EXPECT(gbc.readMem(0x82d4), 0xf4);
        // CB F4 020E
        gbc.setState(0x7a2c, 0xc53, 0xbbb0, 0x8135, 0x42b1, 0xdde7, 0x0, 0x1);
        gbc.writeMem(0x7a2c, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xc53);
        EXPECT(gbc.pc(), 0x7a2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 020F
        gbc.setState(0x5679, 0xe869, 0x13a0, 0xf116, 0x4630, 0x7984, 0x1, 0x1);
        gbc.writeMem(0x5679, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xe869);
        EXPECT(gbc.pc(), 0x567b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0210
        gbc.setState(0xb8b6, 0xba4f, 0xa9f0, 0xec4d, 0xee39, 0x70, 0x1, 0x1);
        gbc.writeMem(0xb8b6, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xba4f);
        EXPECT(gbc.pc(), 0xb8b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8b6), 0xcb);
        EXPECT(gbc.readMem(0xb8b7), 0xf4);
        // CB F4 0211
        gbc.setState(0x608b, 0x3321, 0xa2b0, 0xe3af, 0xba8d, 0x8fbd, 0x1, 0x1);
        gbc.writeMem(0x608b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x3321);
        EXPECT(gbc.pc(), 0x608d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0213
        gbc.setState(0xb32d, 0x6dea, 0xa960, 0xdf2f, 0x28c6, 0x5b1e, 0x1, 0x0);
        gbc.writeMem(0xb32d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x6dea);
        EXPECT(gbc.pc(), 0xb32f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb32d), 0xcb);
        EXPECT(gbc.readMem(0xb32e), 0xf4);
        // CB F4 0214
        gbc.setState(0xbe3b, 0x7d79, 0xb920, 0xaaa4, 0x410c, 0xa686, 0x0, 0x1);
        gbc.writeMem(0xbe3b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x7d79);
        EXPECT(gbc.pc(), 0xbe3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe3b), 0xcb);
        EXPECT(gbc.readMem(0xbe3c), 0xf4);
        // CB F4 0215
        gbc.setState(0x3b7, 0xb3a2, 0x410, 0x30f, 0x3121, 0xa518, 0x0, 0x1);
        gbc.writeMem(0x3b7, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xb3a2);
        EXPECT(gbc.pc(), 0x3b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0216
        gbc.setState(0xaf83, 0x6c67, 0xbee0, 0x3d49, 0x7f4e, 0xf3a8, 0x0, 0x1);
        gbc.writeMem(0xaf83, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x6c67);
        EXPECT(gbc.pc(), 0xaf85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf83), 0xcb);
        EXPECT(gbc.readMem(0xaf84), 0xf4);
        // CB F4 0217
        gbc.setState(0xd02c, 0x259a, 0xc3e0, 0xb8d4, 0xdb3b, 0xd53, 0x0, 0x1);
        gbc.writeMem(0xd02c, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x259a);
        EXPECT(gbc.pc(), 0xd02e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd02c), 0xcb);
        EXPECT(gbc.readMem(0xd02d), 0xf4);
        // CB F4 0218
        gbc.setState(0x85bf, 0xf74f, 0x4c30, 0xf06a, 0x886b, 0x9137, 0x1, 0x0);
        gbc.writeMem(0x85bf, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xf74f);
        EXPECT(gbc.pc(), 0x85c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85bf), 0xcb);
        EXPECT(gbc.readMem(0x85c0), 0xf4);
        // CB F4 0219
        gbc.setState(0x7cb8, 0x1825, 0x2a40, 0x5010, 0x339d, 0x3a85, 0x0, 0x1);
        gbc.writeMem(0x7cb8, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x1825);
        EXPECT(gbc.pc(), 0x7cba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 021A
        gbc.setState(0xb79f, 0x67d3, 0xa910, 0x9746, 0xd3b, 0xe459, 0x0, 0x1);
        gbc.writeMem(0xb79f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x67d3);
        EXPECT(gbc.pc(), 0xb7a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb79f), 0xcb);
        EXPECT(gbc.readMem(0xb7a0), 0xf4);
        // CB F4 021B
        gbc.setState(0xefdb, 0x2a89, 0x8a60, 0xbdf3, 0x29b1, 0x4318, 0x0, 0x0);
        gbc.writeMem(0xefdb, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x2a89);
        EXPECT(gbc.pc(), 0xefdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefdb), 0xcb);
        EXPECT(gbc.readMem(0xefdc), 0xf4);
        // CB F4 021C
        gbc.setState(0x25bf, 0x7f9f, 0xbce0, 0x40d7, 0xb6da, 0xc00b, 0x0, 0x0);
        gbc.writeMem(0x25bf, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x7f9f);
        EXPECT(gbc.pc(), 0x25c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 021D
        gbc.setState(0x970e, 0xe751, 0xa100, 0x1a99, 0x6c78, 0x79d1, 0x1, 0x1);
        gbc.writeMem(0x970e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xe751);
        EXPECT(gbc.pc(), 0x9710);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x970e), 0xcb);
        EXPECT(gbc.readMem(0x970f), 0xf4);
        // CB F4 021E
        gbc.setState(0x9eac, 0xc7d, 0xb290, 0x7125, 0xcceb, 0xdf19, 0x0, 0x0);
        gbc.writeMem(0x9eac, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xc7d);
        EXPECT(gbc.pc(), 0x9eae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9eac), 0xcb);
        EXPECT(gbc.readMem(0x9ead), 0xf4);
        // CB F4 021F
        gbc.setState(0x4268, 0x4bd, 0x3c60, 0xe24a, 0x16f0, 0xc586, 0x1, 0x1);
        gbc.writeMem(0x4268, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x4bd);
        EXPECT(gbc.pc(), 0x426a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0220
        gbc.setState(0x9ac6, 0x39b1, 0x5f40, 0x2ea9, 0xf108, 0x782a, 0x0, 0x1);
        gbc.writeMem(0x9ac6, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x39b1);
        EXPECT(gbc.pc(), 0x9ac8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ac6), 0xcb);
        EXPECT(gbc.readMem(0x9ac7), 0xf4);
        // CB F4 0221
        gbc.setState(0x2207, 0x912a, 0x6f30, 0x6833, 0xeedf, 0x67f8, 0x0, 0x0);
        gbc.writeMem(0x2207, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x912a);
        EXPECT(gbc.pc(), 0x2209);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0222
        gbc.setState(0x3bc9, 0x592b, 0x84d0, 0x55e9, 0x4fb5, 0xa726, 0x1, 0x1);
        gbc.writeMem(0x3bc9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x592b);
        EXPECT(gbc.pc(), 0x3bcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0223
        gbc.setState(0x77bd, 0x65a5, 0x8a30, 0xefd8, 0xfb43, 0xfd96, 0x0, 0x0);
        gbc.writeMem(0x77bd, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x65a5);
        EXPECT(gbc.pc(), 0x77bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0224
        gbc.setState(0x9730, 0x3604, 0x72e0, 0x5aee, 0xd144, 0xeaf3, 0x0, 0x1);
        gbc.writeMem(0x9730, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x3604);
        EXPECT(gbc.pc(), 0x9732);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9730), 0xcb);
        EXPECT(gbc.readMem(0x9731), 0xf4);
        // CB F4 0225
        gbc.setState(0x5009, 0x9d54, 0x2920, 0xe6a4, 0x7eab, 0x38bc, 0x1, 0x1);
        gbc.writeMem(0x5009, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x9d54);
        EXPECT(gbc.pc(), 0x500b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0226
        gbc.setState(0xcb0, 0xe45c, 0x8150, 0x5a07, 0xa61b, 0x7ee, 0x1, 0x0);
        gbc.writeMem(0xcb0, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xe45c);
        EXPECT(gbc.pc(), 0xcb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0227
        gbc.setState(0xec72, 0x3677, 0x5330, 0xb3a8, 0x60b, 0xca3c, 0x1, 0x0);
        gbc.writeMem(0xec72, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x3677);
        EXPECT(gbc.pc(), 0xec74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec72), 0xcb);
        EXPECT(gbc.readMem(0xec73), 0xf4);
        // CB F4 0228
        gbc.setState(0x1490, 0x72af, 0x590, 0x8658, 0x5bc7, 0x5621, 0x0, 0x1);
        gbc.writeMem(0x1490, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x72af);
        EXPECT(gbc.pc(), 0x1492);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0229
        gbc.setState(0x969d, 0x740c, 0x9ed0, 0x73ca, 0x2158, 0xdacf, 0x1, 0x1);
        gbc.writeMem(0x969d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x740c);
        EXPECT(gbc.pc(), 0x969f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x969d), 0xcb);
        EXPECT(gbc.readMem(0x969e), 0xf4);
        // CB F4 022A
        gbc.setState(0x3c43, 0x63be, 0x35d0, 0xb1d0, 0x9f46, 0x5cb8, 0x1, 0x1);
        gbc.writeMem(0x3c43, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x63be);
        EXPECT(gbc.pc(), 0x3c45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 022B
        gbc.setState(0x8d6, 0x4583, 0xe330, 0xa65e, 0x7404, 0xebe6, 0x0, 0x0);
        gbc.writeMem(0x8d6, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x4583);
        EXPECT(gbc.pc(), 0x8d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 022C
        gbc.setState(0x988f, 0xed6f, 0x88e0, 0x5053, 0x95f8, 0x702d, 0x1, 0x1);
        gbc.writeMem(0x988f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xed6f);
        EXPECT(gbc.pc(), 0x9891);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x988f), 0xcb);
        EXPECT(gbc.readMem(0x9890), 0xf4);
        // CB F4 022D
        gbc.setState(0xba94, 0xd22d, 0x2ef0, 0x15d, 0x8a44, 0xe6a8, 0x0, 0x0);
        gbc.writeMem(0xba94, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xd22d);
        EXPECT(gbc.pc(), 0xba96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba94), 0xcb);
        EXPECT(gbc.readMem(0xba95), 0xf4);
        // CB F4 022E
        gbc.setState(0x1506, 0x146, 0x7d40, 0xeb86, 0xb6d5, 0x3ca4, 0x0, 0x1);
        gbc.writeMem(0x1506, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x146);
        EXPECT(gbc.pc(), 0x1508);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 022F
        gbc.setState(0x6ddd, 0xd774, 0xe5a0, 0x25d0, 0xa19b, 0x8125, 0x1, 0x0);
        gbc.writeMem(0x6ddd, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xd774);
        EXPECT(gbc.pc(), 0x6ddf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0230
        gbc.setState(0x5858, 0x2611, 0x9d90, 0x22fa, 0x34b5, 0x499c, 0x1, 0x0);
        gbc.writeMem(0x5858, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x2611);
        EXPECT(gbc.pc(), 0x585a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0231
        gbc.setState(0x8944, 0xe243, 0x7140, 0x9257, 0x9ebe, 0xbfc7, 0x1, 0x0);
        gbc.writeMem(0x8944, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xe243);
        EXPECT(gbc.pc(), 0x8946);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8944), 0xcb);
        EXPECT(gbc.readMem(0x8945), 0xf4);
        // CB F4 0232
        gbc.setState(0xb90e, 0x111, 0x1620, 0x1a08, 0x8320, 0xae38, 0x0, 0x1);
        gbc.writeMem(0xb90e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x111);
        EXPECT(gbc.pc(), 0xb910);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb90e), 0xcb);
        EXPECT(gbc.readMem(0xb90f), 0xf4);
        // CB F4 0233
        gbc.setState(0xcbd3, 0x8ec4, 0xe390, 0xb9f3, 0x6876, 0x1f73, 0x1, 0x1);
        gbc.writeMem(0xcbd3, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x8ec4);
        EXPECT(gbc.pc(), 0xcbd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbd3), 0xcb);
        EXPECT(gbc.readMem(0xcbd4), 0xf4);
        // CB F4 0234
        gbc.setState(0x2ccd, 0xeab3, 0xf5e0, 0x9226, 0xdcd7, 0xf0a1, 0x1, 0x0);
        gbc.writeMem(0x2ccd, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xeab3);
        EXPECT(gbc.pc(), 0x2ccf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0235
        gbc.setState(0xdfa9, 0x70c6, 0xcfd0, 0x9ca1, 0xf283, 0xc42f, 0x0, 0x0);
        gbc.writeMem(0xdfa9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x70c6);
        EXPECT(gbc.pc(), 0xdfab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfa9), 0xcb);
        EXPECT(gbc.readMem(0xdfaa), 0xf4);
        // CB F4 0236
        gbc.setState(0x34cd, 0x6c5a, 0xc7a0, 0x2256, 0xbf2e, 0xe2fd, 0x1, 0x0);
        gbc.writeMem(0x34cd, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x6c5a);
        EXPECT(gbc.pc(), 0x34cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0237
        gbc.setState(0x912b, 0x8c2a, 0x36c0, 0xa18e, 0x352f, 0xa2f8, 0x1, 0x1);
        gbc.writeMem(0x912b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x8c2a);
        EXPECT(gbc.pc(), 0x912d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x912b), 0xcb);
        EXPECT(gbc.readMem(0x912c), 0xf4);
        // CB F4 0238
        gbc.setState(0x655f, 0xe661, 0x4380, 0xa5e1, 0x4cf4, 0x5733, 0x0, 0x1);
        gbc.writeMem(0x655f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xe661);
        EXPECT(gbc.pc(), 0x6561);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0239
        gbc.setState(0xe2d9, 0xb256, 0xf7a0, 0xfda5, 0x581b, 0x7651, 0x1, 0x1);
        gbc.writeMem(0xe2d9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xb256);
        EXPECT(gbc.pc(), 0xe2db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2d9), 0xcb);
        EXPECT(gbc.readMem(0xe2da), 0xf4);
        // CB F4 023A
        gbc.setState(0x1854, 0x63e4, 0x3a70, 0x23f3, 0xa3e2, 0xe5d, 0x1, 0x0);
        gbc.writeMem(0x1854, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x63e4);
        EXPECT(gbc.pc(), 0x1856);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 023B
        gbc.setState(0xb060, 0xa7d8, 0x50e0, 0x5883, 0x8ad4, 0x5620, 0x0, 0x1);
        gbc.writeMem(0xb060, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xa7d8);
        EXPECT(gbc.pc(), 0xb062);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb060), 0xcb);
        EXPECT(gbc.readMem(0xb061), 0xf4);
        // CB F4 023C
        gbc.setState(0xd121, 0x50f3, 0x7580, 0x84de, 0x2556, 0xdd59, 0x1, 0x1);
        gbc.writeMem(0xd121, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x50f3);
        EXPECT(gbc.pc(), 0xd123);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd121), 0xcb);
        EXPECT(gbc.readMem(0xd122), 0xf4);
        // CB F4 023E
        gbc.setState(0x2231, 0x45e7, 0x6c00, 0x86f6, 0x526a, 0xc1a5, 0x0, 0x0);
        gbc.writeMem(0x2231, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x45e7);
        EXPECT(gbc.pc(), 0x2233);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 023F
        gbc.setState(0x4d5e, 0x48bb, 0x7f90, 0xe85a, 0x4ee2, 0x7aa9, 0x1, 0x1);
        gbc.writeMem(0x4d5e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x48bb);
        EXPECT(gbc.pc(), 0x4d60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0240
        gbc.setState(0x28e3, 0x7640, 0xfcb0, 0x77e5, 0x5609, 0xd604, 0x0, 0x1);
        gbc.writeMem(0x28e3, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x7640);
        EXPECT(gbc.pc(), 0x28e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0241
        gbc.setState(0x69e5, 0xc179, 0x7610, 0xe5e6, 0xbd50, 0x63f, 0x0, 0x1);
        gbc.writeMem(0x69e5, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xc179);
        EXPECT(gbc.pc(), 0x69e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0242
        gbc.setState(0xc884, 0x87a6, 0x1c00, 0x3125, 0xe08c, 0x93f2, 0x1, 0x1);
        gbc.writeMem(0xc884, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x87a6);
        EXPECT(gbc.pc(), 0xc886);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc884), 0xcb);
        EXPECT(gbc.readMem(0xc885), 0xf4);
        // CB F4 0243
        gbc.setState(0x18a5, 0xfb9e, 0x8650, 0x4b43, 0x57c9, 0xa4ce, 0x1, 0x1);
        gbc.writeMem(0x18a5, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xfb9e);
        EXPECT(gbc.pc(), 0x18a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0244
        gbc.setState(0x29dc, 0x7979, 0xfde0, 0x46b3, 0xc1ef, 0xad91, 0x0, 0x0);
        gbc.writeMem(0x29dc, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x7979);
        EXPECT(gbc.pc(), 0x29de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0245
        gbc.setState(0x4da1, 0x9d67, 0x6070, 0xd3dc, 0x5b4d, 0x193d, 0x0, 0x1);
        gbc.writeMem(0x4da1, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x9d67);
        EXPECT(gbc.pc(), 0x4da3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0246
        gbc.setState(0xeb8a, 0x185c, 0xcff0, 0x335a, 0x5b2a, 0x15ca, 0x0, 0x1);
        gbc.writeMem(0xeb8a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x185c);
        EXPECT(gbc.pc(), 0xeb8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb8a), 0xcb);
        EXPECT(gbc.readMem(0xeb8b), 0xf4);
        // CB F4 0247
        gbc.setState(0x3282, 0xb8b1, 0xa930, 0xa816, 0xe021, 0x8257, 0x0, 0x0);
        gbc.writeMem(0x3282, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xb8b1);
        EXPECT(gbc.pc(), 0x3284);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0249
        gbc.setState(0x5eee, 0x551c, 0x5490, 0xa508, 0xd5c7, 0x9f57, 0x0, 0x1);
        gbc.writeMem(0x5eee, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x551c);
        EXPECT(gbc.pc(), 0x5ef0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 024A
        gbc.setState(0xd5de, 0xa41b, 0x76f0, 0x22e5, 0x7d2c, 0x3dec, 0x1, 0x0);
        gbc.writeMem(0xd5de, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xa41b);
        EXPECT(gbc.pc(), 0xd5e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5de), 0xcb);
        EXPECT(gbc.readMem(0xd5df), 0xf4);
        // CB F4 024B
        gbc.setState(0xefda, 0x74a, 0x6db0, 0xa0a8, 0x6531, 0x95af, 0x0, 0x0);
        gbc.writeMem(0xefda, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x74a);
        EXPECT(gbc.pc(), 0xefdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefda), 0xcb);
        EXPECT(gbc.readMem(0xefdb), 0xf4);
        // CB F4 024C
        gbc.setState(0x2933, 0xeba, 0x2650, 0x81f, 0xb8f7, 0x7125, 0x1, 0x0);
        gbc.writeMem(0x2933, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xeba);
        EXPECT(gbc.pc(), 0x2935);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 024D
        gbc.setState(0xe724, 0x3381, 0x8350, 0xdc33, 0xc9a9, 0xc32f, 0x1, 0x1);
        gbc.writeMem(0xe724, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x3381);
        EXPECT(gbc.pc(), 0xe726);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe724), 0xcb);
        EXPECT(gbc.readMem(0xe725), 0xf4);
        // CB F4 024E
        gbc.setState(0x16fb, 0xe8dc, 0xbc50, 0x2b35, 0xb706, 0xfde4, 0x0, 0x0);
        gbc.writeMem(0x16fb, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xe8dc);
        EXPECT(gbc.pc(), 0x16fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 024F
        gbc.setState(0xcb96, 0xbee5, 0xa570, 0xe8d0, 0xbcab, 0xdd3, 0x0, 0x0);
        gbc.writeMem(0xcb96, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xbee5);
        EXPECT(gbc.pc(), 0xcb98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb96), 0xcb);
        EXPECT(gbc.readMem(0xcb97), 0xf4);
        // CB F4 0250
        gbc.setState(0x3452, 0x308e, 0xcde0, 0xd24d, 0x8a2f, 0xbc44, 0x0, 0x1);
        gbc.writeMem(0x3452, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x308e);
        EXPECT(gbc.pc(), 0x3454);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0251
        gbc.setState(0x1dd1, 0xd62e, 0xc100, 0xaffa, 0x3898, 0x2ff2, 0x1, 0x1);
        gbc.writeMem(0x1dd1, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xd62e);
        EXPECT(gbc.pc(), 0x1dd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0252
        gbc.setState(0xe160, 0x8634, 0x1390, 0xb9af, 0xaebc, 0x70d3, 0x0, 0x1);
        gbc.writeMem(0xe160, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x8634);
        EXPECT(gbc.pc(), 0xe162);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe160), 0xcb);
        EXPECT(gbc.readMem(0xe161), 0xf4);
        // CB F4 0253
        gbc.setState(0xc623, 0xcc38, 0x9910, 0xaaf8, 0x35aa, 0x7025, 0x1, 0x1);
        gbc.writeMem(0xc623, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xcc38);
        EXPECT(gbc.pc(), 0xc625);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc623), 0xcb);
        EXPECT(gbc.readMem(0xc624), 0xf4);
        // CB F4 0254
        gbc.setState(0xbfb4, 0x6eaf, 0x6130, 0xb172, 0xbcb, 0xefbb, 0x1, 0x0);
        gbc.writeMem(0xbfb4, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x6eaf);
        EXPECT(gbc.pc(), 0xbfb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfb4), 0xcb);
        EXPECT(gbc.readMem(0xbfb5), 0xf4);
        // CB F4 0255
        gbc.setState(0x469a, 0xdf8a, 0x6010, 0x9895, 0x71f7, 0x5e8e, 0x1, 0x1);
        gbc.writeMem(0x469a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xdf8a);
        EXPECT(gbc.pc(), 0x469c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0256
        gbc.setState(0xdb4, 0x5dd7, 0x1790, 0xb18f, 0xf11d, 0xcef9, 0x0, 0x1);
        gbc.writeMem(0xdb4, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x5dd7);
        EXPECT(gbc.pc(), 0xdb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0257
        gbc.setState(0xc71f, 0x3801, 0x28f0, 0xac7f, 0x1528, 0xfc52, 0x1, 0x1);
        gbc.writeMem(0xc71f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x3801);
        EXPECT(gbc.pc(), 0xc721);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc71f), 0xcb);
        EXPECT(gbc.readMem(0xc720), 0xf4);
        // CB F4 0258
        gbc.setState(0x9807, 0x817f, 0x45a0, 0x7703, 0xc96e, 0x1139, 0x0, 0x0);
        gbc.writeMem(0x9807, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x817f);
        EXPECT(gbc.pc(), 0x9809);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9807), 0xcb);
        EXPECT(gbc.readMem(0x9808), 0xf4);
        // CB F4 0259
        gbc.setState(0xaf7, 0xe259, 0xf340, 0x132c, 0xddea, 0xfbd0, 0x0, 0x0);
        gbc.writeMem(0xaf7, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xe259);
        EXPECT(gbc.pc(), 0xaf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 025A
        gbc.setState(0xdac5, 0xdd49, 0x3b0, 0xe79, 0x30ec, 0x3773, 0x1, 0x0);
        gbc.writeMem(0xdac5, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xdd49);
        EXPECT(gbc.pc(), 0xdac7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdac5), 0xcb);
        EXPECT(gbc.readMem(0xdac6), 0xf4);
        // CB F4 025B
        gbc.setState(0xb2ae, 0xbd2e, 0xe1a0, 0xe69a, 0xe890, 0xf53, 0x1, 0x1);
        gbc.writeMem(0xb2ae, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xbd2e);
        EXPECT(gbc.pc(), 0xb2b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2ae), 0xcb);
        EXPECT(gbc.readMem(0xb2af), 0xf4);
        // CB F4 025C
        gbc.setState(0x78ab, 0x592d, 0x21d0, 0x9390, 0xe9f6, 0x6309, 0x0, 0x0);
        gbc.writeMem(0x78ab, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x592d);
        EXPECT(gbc.pc(), 0x78ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 025D
        gbc.setState(0xb48d, 0x793a, 0x1190, 0x988d, 0xe779, 0x5a43, 0x1, 0x0);
        gbc.writeMem(0xb48d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x793a);
        EXPECT(gbc.pc(), 0xb48f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb48d), 0xcb);
        EXPECT(gbc.readMem(0xb48e), 0xf4);
        // CB F4 025E
        gbc.setState(0xcd28, 0x3ec7, 0x9960, 0xfb39, 0xc3ec, 0xb641, 0x1, 0x1);
        gbc.writeMem(0xcd28, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x3ec7);
        EXPECT(gbc.pc(), 0xcd2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd28), 0xcb);
        EXPECT(gbc.readMem(0xcd29), 0xf4);
        // CB F4 025F
        gbc.setState(0xcbf7, 0x6f12, 0x3be0, 0x9c9d, 0xe38e, 0x179c, 0x1, 0x1);
        gbc.writeMem(0xcbf7, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x6f12);
        EXPECT(gbc.pc(), 0xcbf9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbf7), 0xcb);
        EXPECT(gbc.readMem(0xcbf8), 0xf4);
        // CB F4 0261
        gbc.setState(0x7cf0, 0x41e8, 0xc560, 0x2599, 0x56d8, 0xccab, 0x1, 0x0);
        gbc.writeMem(0x7cf0, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x41e8);
        EXPECT(gbc.pc(), 0x7cf2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0262
        gbc.setState(0xf75, 0x11d3, 0x3a60, 0x472, 0xabab, 0xc855, 0x1, 0x0);
        gbc.writeMem(0xf75, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x11d3);
        EXPECT(gbc.pc(), 0xf77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0263
        gbc.setState(0x9486, 0x4b5b, 0x8660, 0x58b, 0x52d9, 0x6e5b, 0x1, 0x1);
        gbc.writeMem(0x9486, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x4b5b);
        EXPECT(gbc.pc(), 0x9488);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9486), 0xcb);
        EXPECT(gbc.readMem(0x9487), 0xf4);
        // CB F4 0264
        gbc.setState(0x4e78, 0x72, 0x5520, 0x74f0, 0x30fa, 0x301d, 0x0, 0x0);
        gbc.writeMem(0x4e78, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x72);
        EXPECT(gbc.pc(), 0x4e7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0265
        gbc.setState(0x53fb, 0xc669, 0x5820, 0xf9a2, 0x8d51, 0xba87, 0x0, 0x1);
        gbc.writeMem(0x53fb, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xc669);
        EXPECT(gbc.pc(), 0x53fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0266
        gbc.setState(0xeb9d, 0xf362, 0xaba0, 0x32c, 0x6c42, 0x3b7d, 0x0, 0x1);
        gbc.writeMem(0xeb9d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xf362);
        EXPECT(gbc.pc(), 0xeb9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb9d), 0xcb);
        EXPECT(gbc.readMem(0xeb9e), 0xf4);
        // CB F4 0267
        gbc.setState(0x5642, 0x1e5b, 0xba10, 0x6c3e, 0x826d, 0xb23d, 0x0, 0x1);
        gbc.writeMem(0x5642, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x1e5b);
        EXPECT(gbc.pc(), 0x5644);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0268
        gbc.setState(0x112a, 0x3302, 0xd130, 0xc83a, 0x4281, 0x92d, 0x0, 0x1);
        gbc.writeMem(0x112a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x3302);
        EXPECT(gbc.pc(), 0x112c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0269
        gbc.setState(0x763b, 0x910f, 0xb870, 0x9e39, 0x8f0a, 0x2cea, 0x1, 0x0);
        gbc.writeMem(0x763b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x910f);
        EXPECT(gbc.pc(), 0x763d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 026A
        gbc.setState(0x8d4a, 0xdb8f, 0xe70, 0x7e45, 0x8ac3, 0x92dc, 0x1, 0x1);
        gbc.writeMem(0x8d4a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xdb8f);
        EXPECT(gbc.pc(), 0x8d4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d4a), 0xcb);
        EXPECT(gbc.readMem(0x8d4b), 0xf4);
        // CB F4 026B
        gbc.setState(0x1ac1, 0x5d89, 0x16b0, 0x735b, 0x6402, 0xa604, 0x1, 0x0);
        gbc.writeMem(0x1ac1, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x5d89);
        EXPECT(gbc.pc(), 0x1ac3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 026C
        gbc.setState(0x9d2, 0x1574, 0x3c10, 0x859b, 0x8bbf, 0xe0eb, 0x1, 0x1);
        gbc.writeMem(0x9d2, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x1574);
        EXPECT(gbc.pc(), 0x9d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 026D
        gbc.setState(0xb240, 0xa3d4, 0x8da0, 0x6dff, 0x54a5, 0x1b5a, 0x0, 0x1);
        gbc.writeMem(0xb240, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xa3d4);
        EXPECT(gbc.pc(), 0xb242);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb240), 0xcb);
        EXPECT(gbc.readMem(0xb241), 0xf4);
        // CB F4 026E
        gbc.setState(0xdef2, 0xf685, 0xb30, 0xed41, 0x761f, 0x9033, 0x0, 0x1);
        gbc.writeMem(0xdef2, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xf685);
        EXPECT(gbc.pc(), 0xdef4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdef2), 0xcb);
        EXPECT(gbc.readMem(0xdef3), 0xf4);
        // CB F4 026F
        gbc.setState(0xac6b, 0x8bca, 0xbd30, 0x73f0, 0x2834, 0xeaf6, 0x0, 0x1);
        gbc.writeMem(0xac6b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x8bca);
        EXPECT(gbc.pc(), 0xac6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac6b), 0xcb);
        EXPECT(gbc.readMem(0xac6c), 0xf4);
        // CB F4 0270
        gbc.setState(0x854f, 0xf7e5, 0x1e00, 0xd848, 0xe0a7, 0xd6cc, 0x0, 0x1);
        gbc.writeMem(0x854f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xf7e5);
        EXPECT(gbc.pc(), 0x8551);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x854f), 0xcb);
        EXPECT(gbc.readMem(0x8550), 0xf4);
        // CB F4 0271
        gbc.setState(0x3f62, 0xf323, 0xab0, 0x2e0f, 0x59ca, 0xe344, 0x0, 0x1);
        gbc.writeMem(0x3f62, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xf323);
        EXPECT(gbc.pc(), 0x3f64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0272
        gbc.setState(0xb443, 0x8ec9, 0xc720, 0xf9cc, 0x3dd8, 0x44f7, 0x0, 0x0);
        gbc.writeMem(0xb443, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x8ec9);
        EXPECT(gbc.pc(), 0xb445);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb443), 0xcb);
        EXPECT(gbc.readMem(0xb444), 0xf4);
        // CB F4 0273
        gbc.setState(0xe588, 0x55c, 0x7cc0, 0x1aa5, 0xaebe, 0xc24e, 0x1, 0x0);
        gbc.writeMem(0xe588, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x55c);
        EXPECT(gbc.pc(), 0xe58a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe588), 0xcb);
        EXPECT(gbc.readMem(0xe589), 0xf4);
        // CB F4 0274
        gbc.setState(0x2cf8, 0xf7ba, 0x7900, 0x268b, 0x3423, 0xa830, 0x1, 0x0);
        gbc.writeMem(0x2cf8, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xf7ba);
        EXPECT(gbc.pc(), 0x2cfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0275
        gbc.setState(0xbc0, 0xbde4, 0xdcb0, 0x54eb, 0x6725, 0xc15e, 0x1, 0x0);
        gbc.writeMem(0xbc0, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xbde4);
        EXPECT(gbc.pc(), 0xbc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0276
        gbc.setState(0x56ae, 0x2ba3, 0x6300, 0x5fb4, 0xde59, 0xc295, 0x1, 0x0);
        gbc.writeMem(0x56ae, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x2ba3);
        EXPECT(gbc.pc(), 0x56b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0277
        gbc.setState(0x174b, 0x664a, 0xe840, 0xec45, 0x6d26, 0x3a51, 0x1, 0x0);
        gbc.writeMem(0x174b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x664a);
        EXPECT(gbc.pc(), 0x174d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0278
        gbc.setState(0xb65, 0xe72a, 0x40a0, 0x9780, 0x38a6, 0x1d26, 0x0, 0x0);
        gbc.writeMem(0xb65, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xe72a);
        EXPECT(gbc.pc(), 0xb67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0279
        gbc.setState(0x4b, 0x1b22, 0x2720, 0xc203, 0xe30c, 0x8825, 0x0, 0x1);
        gbc.writeMem(0x4b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x1b22);
        EXPECT(gbc.pc(), 0x4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 027A
        gbc.setState(0x205b, 0xe393, 0xf090, 0x5000, 0x1f41, 0x2572, 0x1, 0x0);
        gbc.writeMem(0x205b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xe393);
        EXPECT(gbc.pc(), 0x205d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 027B
        gbc.setState(0x7201, 0x9030, 0xe260, 0x1850, 0xc03d, 0x4482, 0x0, 0x0);
        gbc.writeMem(0x7201, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x9030);
        EXPECT(gbc.pc(), 0x7203);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 027C
        gbc.setState(0x5822, 0xcfda, 0x4a70, 0x9295, 0x273d, 0xa893, 0x1, 0x0);
        gbc.writeMem(0x5822, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xcfda);
        EXPECT(gbc.pc(), 0x5824);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 027D
        gbc.setState(0x3f3e, 0x5091, 0x8610, 0x6e47, 0xd6b3, 0xd9be, 0x0, 0x0);
        gbc.writeMem(0x3f3e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x5091);
        EXPECT(gbc.pc(), 0x3f40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 027E
        gbc.setState(0xe282, 0xa9ae, 0x9790, 0x6f7e, 0xd36e, 0x1f14, 0x0, 0x1);
        gbc.writeMem(0xe282, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xa9ae);
        EXPECT(gbc.pc(), 0xe284);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe282), 0xcb);
        EXPECT(gbc.readMem(0xe283), 0xf4);
        // CB F4 027F
        gbc.setState(0x232a, 0x8bec, 0xf300, 0xe9bd, 0xe921, 0xd75e, 0x0, 0x1);
        gbc.writeMem(0x232a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x8bec);
        EXPECT(gbc.pc(), 0x232c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0280
        gbc.setState(0xe2a2, 0x121e, 0xd640, 0x19e0, 0xf71a, 0xd6ed, 0x0, 0x0);
        gbc.writeMem(0xe2a2, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x121e);
        EXPECT(gbc.pc(), 0xe2a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2a2), 0xcb);
        EXPECT(gbc.readMem(0xe2a3), 0xf4);
        // CB F4 0281
        gbc.setState(0xa13b, 0xff05, 0xebc0, 0x54a5, 0x4963, 0x82b7, 0x1, 0x1);
        gbc.writeMem(0xa13b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xff05);
        EXPECT(gbc.pc(), 0xa13d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa13b), 0xcb);
        EXPECT(gbc.readMem(0xa13c), 0xf4);
        // CB F4 0282
        gbc.setState(0x6275, 0x47d2, 0x98d0, 0x6a54, 0x7704, 0x49ce, 0x1, 0x0);
        gbc.writeMem(0x6275, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x47d2);
        EXPECT(gbc.pc(), 0x6277);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0283
        gbc.setState(0x9dee, 0xadda, 0x780, 0xcf50, 0x5f1, 0xc6bc, 0x0, 0x0);
        gbc.writeMem(0x9dee, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xadda);
        EXPECT(gbc.pc(), 0x9df0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dee), 0xcb);
        EXPECT(gbc.readMem(0x9def), 0xf4);
        // CB F4 0284
        gbc.setState(0x9047, 0xa09e, 0x2110, 0xcb66, 0xbcf8, 0x2e01, 0x0, 0x0);
        gbc.writeMem(0x9047, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xa09e);
        EXPECT(gbc.pc(), 0x9049);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9047), 0xcb);
        EXPECT(gbc.readMem(0x9048), 0xf4);
        // CB F4 0285
        gbc.setState(0xa0b8, 0x529e, 0xdcb0, 0x5dc4, 0x9fc6, 0xf1af, 0x0, 0x1);
        gbc.writeMem(0xa0b8, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x529e);
        EXPECT(gbc.pc(), 0xa0ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0b8), 0xcb);
        EXPECT(gbc.readMem(0xa0b9), 0xf4);
        // CB F4 0286
        gbc.setState(0x31ec, 0x662c, 0x7b60, 0xaa12, 0xf61f, 0x921d, 0x0, 0x0);
        gbc.writeMem(0x31ec, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x662c);
        EXPECT(gbc.pc(), 0x31ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0287
        gbc.setState(0xdfb9, 0x656a, 0xcc70, 0xd344, 0xadf4, 0x72c, 0x1, 0x0);
        gbc.writeMem(0xdfb9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x656a);
        EXPECT(gbc.pc(), 0xdfbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfb9), 0xcb);
        EXPECT(gbc.readMem(0xdfba), 0xf4);
        // CB F4 0288
        gbc.setState(0x65f0, 0x5ce7, 0xb9d0, 0x30b5, 0x37ff, 0x6dca, 0x0, 0x0);
        gbc.writeMem(0x65f0, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x5ce7);
        EXPECT(gbc.pc(), 0x65f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0289
        gbc.setState(0x32fd, 0x3659, 0x52b0, 0xc271, 0x5658, 0x97a4, 0x1, 0x1);
        gbc.writeMem(0x32fd, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x3659);
        EXPECT(gbc.pc(), 0x32ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 028A
        gbc.setState(0xe500, 0x90db, 0xc690, 0x613d, 0xdaca, 0xc030, 0x1, 0x1);
        gbc.writeMem(0xe500, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x90db);
        EXPECT(gbc.pc(), 0xe502);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe500), 0xcb);
        EXPECT(gbc.readMem(0xe501), 0xf4);
        // CB F4 028B
        gbc.setState(0xdcfd, 0x1c0e, 0x2d20, 0xab91, 0x873a, 0x596a, 0x0, 0x0);
        gbc.writeMem(0xdcfd, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x1c0e);
        EXPECT(gbc.pc(), 0xdcff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcfd), 0xcb);
        EXPECT(gbc.readMem(0xdcfe), 0xf4);
        // CB F4 028C
        gbc.setState(0x9436, 0x3c90, 0x5b30, 0x7679, 0xd844, 0xa5c4, 0x0, 0x1);
        gbc.writeMem(0x9436, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x3c90);
        EXPECT(gbc.pc(), 0x9438);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9436), 0xcb);
        EXPECT(gbc.readMem(0x9437), 0xf4);
        // CB F4 028D
        gbc.setState(0x510a, 0xbf7e, 0xd0, 0x9871, 0x9e9a, 0xde7, 0x0, 0x1);
        gbc.writeMem(0x510a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xbf7e);
        EXPECT(gbc.pc(), 0x510c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 028E
        gbc.setState(0xc6b4, 0x40a1, 0x4db0, 0xcb78, 0x703, 0x2286, 0x0, 0x0);
        gbc.writeMem(0xc6b4, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x40a1);
        EXPECT(gbc.pc(), 0xc6b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6b4), 0xcb);
        EXPECT(gbc.readMem(0xc6b5), 0xf4);
        // CB F4 028F
        gbc.setState(0xa814, 0x996d, 0x8090, 0x5912, 0x2fbe, 0xcb85, 0x1, 0x0);
        gbc.writeMem(0xa814, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x996d);
        EXPECT(gbc.pc(), 0xa816);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa814), 0xcb);
        EXPECT(gbc.readMem(0xa815), 0xf4);
        // CB F4 0290
        gbc.setState(0x67dc, 0xc17b, 0x2e10, 0xd847, 0x5746, 0xa264, 0x1, 0x1);
        gbc.writeMem(0x67dc, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xc17b);
        EXPECT(gbc.pc(), 0x67de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0291
        gbc.setState(0xbe78, 0x1676, 0x8b30, 0xfac6, 0xe3dc, 0x7163, 0x1, 0x0);
        gbc.writeMem(0xbe78, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x1676);
        EXPECT(gbc.pc(), 0xbe7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe78), 0xcb);
        EXPECT(gbc.readMem(0xbe79), 0xf4);
        // CB F4 0293
        gbc.setState(0xada5, 0xb55c, 0x4c90, 0x4e3, 0x8379, 0xb392, 0x1, 0x1);
        gbc.writeMem(0xada5, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xb55c);
        EXPECT(gbc.pc(), 0xada7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xada5), 0xcb);
        EXPECT(gbc.readMem(0xada6), 0xf4);
        // CB F4 0294
        gbc.setState(0x66c9, 0x114e, 0x12a0, 0x5bdc, 0x2faa, 0x50b6, 0x1, 0x1);
        gbc.writeMem(0x66c9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x114e);
        EXPECT(gbc.pc(), 0x66cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0296
        gbc.setState(0x4d42, 0x63f1, 0x2a20, 0xfe2d, 0xbc9f, 0x5204, 0x0, 0x1);
        gbc.writeMem(0x4d42, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x63f1);
        EXPECT(gbc.pc(), 0x4d44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0297
        gbc.setState(0x3eb1, 0xf86, 0x6d50, 0x6a1f, 0xce01, 0x84d3, 0x0, 0x1);
        gbc.writeMem(0x3eb1, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xf86);
        EXPECT(gbc.pc(), 0x3eb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0298
        gbc.setState(0xd5a4, 0xa3f2, 0x4670, 0xd496, 0x8f20, 0x3010, 0x1, 0x0);
        gbc.writeMem(0xd5a4, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xa3f2);
        EXPECT(gbc.pc(), 0xd5a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5a4), 0xcb);
        EXPECT(gbc.readMem(0xd5a5), 0xf4);
        // CB F4 0299
        gbc.setState(0xced4, 0xf9ab, 0x3aa0, 0x1932, 0x199e, 0xae2b, 0x1, 0x1);
        gbc.writeMem(0xced4, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xf9ab);
        EXPECT(gbc.pc(), 0xced6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xced4), 0xcb);
        EXPECT(gbc.readMem(0xced5), 0xf4);
        // CB F4 029A
        gbc.setState(0x9a35, 0x7c8d, 0x2ca0, 0x7ba9, 0xc45e, 0xff1b, 0x0, 0x1);
        gbc.writeMem(0x9a35, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x7c8d);
        EXPECT(gbc.pc(), 0x9a37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a35), 0xcb);
        EXPECT(gbc.readMem(0x9a36), 0xf4);
        // CB F4 029B
        gbc.setState(0xec7b, 0xb998, 0x18b0, 0xe7ec, 0xeb5a, 0x6c84, 0x1, 0x1);
        gbc.writeMem(0xec7b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xb998);
        EXPECT(gbc.pc(), 0xec7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec7b), 0xcb);
        EXPECT(gbc.readMem(0xec7c), 0xf4);
        // CB F4 029C
        gbc.setState(0x39ee, 0x49a4, 0x6320, 0xdbf2, 0x1b3d, 0x3040, 0x1, 0x0);
        gbc.writeMem(0x39ee, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x49a4);
        EXPECT(gbc.pc(), 0x39f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 029E
        gbc.setState(0xe420, 0x177d, 0x3340, 0x5789, 0x64cc, 0xe57d, 0x1, 0x0);
        gbc.writeMem(0xe420, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x177d);
        EXPECT(gbc.pc(), 0xe422);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe420), 0xcb);
        EXPECT(gbc.readMem(0xe421), 0xf4);
        // CB F4 02A0
        gbc.setState(0x92d1, 0x10de, 0x76f0, 0xf135, 0x98df, 0x8bb2, 0x0, 0x0);
        gbc.writeMem(0x92d1, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x10de);
        EXPECT(gbc.pc(), 0x92d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92d1), 0xcb);
        EXPECT(gbc.readMem(0x92d2), 0xf4);
        // CB F4 02A1
        gbc.setState(0x9d37, 0x6734, 0x1940, 0x1d82, 0x62e2, 0xf3f1, 0x1, 0x1);
        gbc.writeMem(0x9d37, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x6734);
        EXPECT(gbc.pc(), 0x9d39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d37), 0xcb);
        EXPECT(gbc.readMem(0x9d38), 0xf4);
        // CB F4 02A2
        gbc.setState(0xb07f, 0x73ca, 0xc240, 0xfd0b, 0xde28, 0x654e, 0x1, 0x1);
        gbc.writeMem(0xb07f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x73ca);
        EXPECT(gbc.pc(), 0xb081);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb07f), 0xcb);
        EXPECT(gbc.readMem(0xb080), 0xf4);
        // CB F4 02A3
        gbc.setState(0x576f, 0xe949, 0x7480, 0x3a11, 0xda10, 0x13c0, 0x0, 0x1);
        gbc.writeMem(0x576f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xe949);
        EXPECT(gbc.pc(), 0x5771);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 02A4
        gbc.setState(0x7d1b, 0x1640, 0x330, 0x407b, 0xbc69, 0x2e09, 0x1, 0x1);
        gbc.writeMem(0x7d1b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x1640);
        EXPECT(gbc.pc(), 0x7d1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 02A5
        gbc.setState(0x2b26, 0xa0ed, 0xa1e0, 0x8143, 0xf893, 0x7c1e, 0x0, 0x0);
        gbc.writeMem(0x2b26, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xa0ed);
        EXPECT(gbc.pc(), 0x2b28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 02A6
        gbc.setState(0x94f5, 0xcd2b, 0x6a40, 0xcb7b, 0xfc03, 0x4034, 0x1, 0x1);
        gbc.writeMem(0x94f5, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xcd2b);
        EXPECT(gbc.pc(), 0x94f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94f5), 0xcb);
        EXPECT(gbc.readMem(0x94f6), 0xf4);
        // CB F4 02A8
        gbc.setState(0x118, 0x1e55, 0x96b0, 0x9c33, 0xfb74, 0xee17, 0x1, 0x1);
        gbc.writeMem(0x118, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x1e55);
        EXPECT(gbc.pc(), 0x11a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 02A9
        gbc.setState(0x4248, 0xd9f0, 0x7100, 0xc134, 0x95f8, 0xea68, 0x0, 0x1);
        gbc.writeMem(0x4248, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xd9f0);
        EXPECT(gbc.pc(), 0x424a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 02AA
        gbc.setState(0x3544, 0x8b1a, 0x7a0, 0xce2e, 0x8a67, 0x5cc9, 0x0, 0x0);
        gbc.writeMem(0x3544, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x8b1a);
        EXPECT(gbc.pc(), 0x3546);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 02AB
        gbc.setState(0xb58c, 0xd63d, 0xd020, 0xf806, 0x827b, 0xd24f, 0x0, 0x0);
        gbc.writeMem(0xb58c, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xd63d);
        EXPECT(gbc.pc(), 0xb58e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb58c), 0xcb);
        EXPECT(gbc.readMem(0xb58d), 0xf4);
        // CB F4 02AC
        gbc.setState(0x487b, 0xbdbe, 0x2800, 0xb0dd, 0x409f, 0x6e2a, 0x1, 0x1);
        gbc.writeMem(0x487b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xbdbe);
        EXPECT(gbc.pc(), 0x487d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 02AD
        gbc.setState(0x5096, 0xf7de, 0x290, 0x5337, 0x9876, 0x698b, 0x1, 0x0);
        gbc.writeMem(0x5096, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xf7de);
        EXPECT(gbc.pc(), 0x5098);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 02AE
        gbc.setState(0x726f, 0xef66, 0xa0c0, 0x333f, 0xc264, 0x445, 0x0, 0x1);
        gbc.writeMem(0x726f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xef66);
        EXPECT(gbc.pc(), 0x7271);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 02AF
        gbc.setState(0x4b7b, 0xd7f5, 0x5780, 0x526d, 0xa55a, 0x56e8, 0x1, 0x0);
        gbc.writeMem(0x4b7b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xd7f5);
        EXPECT(gbc.pc(), 0x4b7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 02B0
        gbc.setState(0x4c89, 0x9226, 0x1a00, 0xebbb, 0x69ac, 0xdeb2, 0x1, 0x0);
        gbc.writeMem(0x4c89, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x9226);
        EXPECT(gbc.pc(), 0x4c8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 02B1
        gbc.setState(0x4a3f, 0x80cd, 0x6940, 0x7526, 0xcd20, 0xf49f, 0x0, 0x1);
        gbc.writeMem(0x4a3f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x80cd);
        EXPECT(gbc.pc(), 0x4a41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 02B2
        gbc.setState(0x58bd, 0xa282, 0xd60, 0xaecd, 0x8ad1, 0x7de8, 0x0, 0x0);
        gbc.writeMem(0x58bd, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xa282);
        EXPECT(gbc.pc(), 0x58bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 02B3
        gbc.setState(0xb2cb, 0x5ed, 0xa540, 0xf758, 0xb3c6, 0xfa1a, 0x1, 0x1);
        gbc.writeMem(0xb2cb, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x5ed);
        EXPECT(gbc.pc(), 0xb2cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2cb), 0xcb);
        EXPECT(gbc.readMem(0xb2cc), 0xf4);
        // CB F4 02B5
        gbc.setState(0x8d35, 0x4ab1, 0x41a0, 0xd00a, 0x16b, 0x16d9, 0x0, 0x0);
        gbc.writeMem(0x8d35, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x4ab1);
        EXPECT(gbc.pc(), 0x8d37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d35), 0xcb);
        EXPECT(gbc.readMem(0x8d36), 0xf4);
        // CB F4 02B6
        gbc.setState(0x4ba4, 0x67a6, 0x9180, 0x840d, 0xdb24, 0x816f, 0x1, 0x0);
        gbc.writeMem(0x4ba4, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x67a6);
        EXPECT(gbc.pc(), 0x4ba6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 02B7
        gbc.setState(0x2050, 0xc938, 0x88c0, 0x6dab, 0x21dd, 0xae04, 0x1, 0x1);
        gbc.writeMem(0x2050, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xc938);
        EXPECT(gbc.pc(), 0x2052);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 02B8
        gbc.setState(0x36b5, 0xab80, 0x4e80, 0xc6f, 0xad59, 0x7d60, 0x0, 0x0);
        gbc.writeMem(0x36b5, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xab80);
        EXPECT(gbc.pc(), 0x36b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 02B9
        gbc.setState(0x7505, 0xb786, 0x7270, 0x36ea, 0xa6a0, 0xc18e, 0x1, 0x0);
        gbc.writeMem(0x7505, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xb786);
        EXPECT(gbc.pc(), 0x7507);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 02BA
        gbc.setState(0xbd6b, 0x4d7b, 0x8c0, 0x4548, 0x6749, 0xfad0, 0x1, 0x1);
        gbc.writeMem(0xbd6b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x4d7b);
        EXPECT(gbc.pc(), 0xbd6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd6b), 0xcb);
        EXPECT(gbc.readMem(0xbd6c), 0xf4);
        // CB F4 02BB
        gbc.setState(0xaf4d, 0xd9af, 0x78f0, 0xe3cc, 0xf6ea, 0xbdd, 0x0, 0x1);
        gbc.writeMem(0xaf4d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xd9af);
        EXPECT(gbc.pc(), 0xaf4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf4d), 0xcb);
        EXPECT(gbc.readMem(0xaf4e), 0xf4);
        // CB F4 02BC
        gbc.setState(0x94a4, 0xe2c0, 0x28b0, 0x9b81, 0x3a4a, 0x5d90, 0x1, 0x1);
        gbc.writeMem(0x94a4, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xe2c0);
        EXPECT(gbc.pc(), 0x94a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94a4), 0xcb);
        EXPECT(gbc.readMem(0x94a5), 0xf4);
        // CB F4 02BD
        gbc.setState(0x1366, 0x7a63, 0x3350, 0x75df, 0xef18, 0x5baa, 0x1, 0x0);
        gbc.writeMem(0x1366, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x7a63);
        EXPECT(gbc.pc(), 0x1368);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 02BE
        gbc.setState(0x120e, 0xa375, 0xed70, 0x6f8e, 0x6f69, 0xac0a, 0x0, 0x0);
        gbc.writeMem(0x120e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xa375);
        EXPECT(gbc.pc(), 0x1210);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 02BF
        gbc.setState(0xacd0, 0x73a7, 0x72d0, 0x540e, 0x4228, 0x8a25, 0x1, 0x1);
        gbc.writeMem(0xacd0, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x73a7);
        EXPECT(gbc.pc(), 0xacd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacd0), 0xcb);
        EXPECT(gbc.readMem(0xacd1), 0xf4);
        // CB F4 02C0
        gbc.setState(0x74ac, 0xe88e, 0xe660, 0x4bd8, 0x52b6, 0xd93b, 0x1, 0x1);
        gbc.writeMem(0x74ac, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xe88e);
        EXPECT(gbc.pc(), 0x74ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 02C1
        gbc.setState(0x3733, 0x1162, 0x8a0, 0x7c86, 0xac7a, 0xaaa8, 0x0, 0x1);
        gbc.writeMem(0x3733, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x1162);
        EXPECT(gbc.pc(), 0x3735);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 02C2
        gbc.setState(0x9976, 0xc8a7, 0xac70, 0xf44a, 0x63a0, 0x8d0f, 0x1, 0x1);
        gbc.writeMem(0x9976, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xc8a7);
        EXPECT(gbc.pc(), 0x9978);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9976), 0xcb);
        EXPECT(gbc.readMem(0x9977), 0xf4);
        // CB F4 02C3
        gbc.setState(0xca05, 0x9966, 0xc130, 0xcf1, 0x65ba, 0xaa16, 0x0, 0x0);
        gbc.writeMem(0xca05, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x9966);
        EXPECT(gbc.pc(), 0xca07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca05), 0xcb);
        EXPECT(gbc.readMem(0xca06), 0xf4);
        // CB F4 02C4
        gbc.setState(0xa783, 0x68f8, 0x57a0, 0x6cae, 0x7e3a, 0xed18, 0x0, 0x0);
        gbc.writeMem(0xa783, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x68f8);
        EXPECT(gbc.pc(), 0xa785);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa783), 0xcb);
        EXPECT(gbc.readMem(0xa784), 0xf4);
        // CB F4 02C5
        gbc.setState(0x6548, 0x706a, 0x2230, 0x5d2c, 0x3d7c, 0xf6c0, 0x0, 0x0);
        gbc.writeMem(0x6548, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x706a);
        EXPECT(gbc.pc(), 0x654a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 02C7
        gbc.setState(0x5564, 0x57df, 0x90b0, 0xe4f1, 0x1ca4, 0x72a5, 0x1, 0x0);
        gbc.writeMem(0x5564, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x57df);
        EXPECT(gbc.pc(), 0x5566);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 02C8
        gbc.setState(0x48e9, 0xbb30, 0xc4b0, 0xe0ea, 0x9ca3, 0x9c4e, 0x0, 0x1);
        gbc.writeMem(0x48e9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xbb30);
        EXPECT(gbc.pc(), 0x48eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 02C9
        gbc.setState(0x3169, 0x5433, 0xf530, 0x3795, 0x220, 0x253f, 0x1, 0x0);
        gbc.writeMem(0x3169, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x5433);
        EXPECT(gbc.pc(), 0x316b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 02CA
        gbc.setState(0x7870, 0x4a70, 0xa190, 0xc4e7, 0x968a, 0x5b79, 0x1, 0x0);
        gbc.writeMem(0x7870, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x4a70);
        EXPECT(gbc.pc(), 0x7872);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 02CC
        gbc.setState(0x528c, 0xf441, 0xc620, 0xd15c, 0xbd75, 0x8a3a, 0x0, 0x1);
        gbc.writeMem(0x528c, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xf441);
        EXPECT(gbc.pc(), 0x528e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 02CD
        gbc.setState(0x66a2, 0x61d2, 0x9410, 0x97f0, 0x4964, 0xb663, 0x0, 0x1);
        gbc.writeMem(0x66a2, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x61d2);
        EXPECT(gbc.pc(), 0x66a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 02CE
        gbc.setState(0x63b7, 0x30c1, 0xb980, 0x218d, 0xdb33, 0x6cce, 0x1, 0x1);
        gbc.writeMem(0x63b7, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x30c1);
        EXPECT(gbc.pc(), 0x63b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 02D0
        gbc.setState(0x3014, 0xddc9, 0x25e0, 0x8f6f, 0x9726, 0x3882, 0x1, 0x0);
        gbc.writeMem(0x3014, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xddc9);
        EXPECT(gbc.pc(), 0x3016);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 02D1
        gbc.setState(0xed68, 0x9a98, 0x23f0, 0x9b59, 0x6ecc, 0x5e32, 0x0, 0x1);
        gbc.writeMem(0xed68, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x9a98);
        EXPECT(gbc.pc(), 0xed6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed68), 0xcb);
        EXPECT(gbc.readMem(0xed69), 0xf4);
        // CB F4 02D2
        gbc.setState(0x15b, 0xe8fb, 0xca60, 0xbc2d, 0x2038, 0xce46, 0x0, 0x1);
        gbc.writeMem(0x15b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xe8fb);
        EXPECT(gbc.pc(), 0x15d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 02D3
        gbc.setState(0x22bf, 0xbe3d, 0xc720, 0xf6ef, 0x720c, 0x95a4, 0x0, 0x0);
        gbc.writeMem(0x22bf, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xbe3d);
        EXPECT(gbc.pc(), 0x22c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 02D5
        gbc.setState(0x63f, 0xaf89, 0xe7f0, 0x9156, 0x9cb9, 0x609e, 0x0, 0x0);
        gbc.writeMem(0x63f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xaf89);
        EXPECT(gbc.pc(), 0x641);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 02D6
        gbc.setState(0xe70e, 0xf2c3, 0x2640, 0xcf67, 0x90a2, 0x90b5, 0x1, 0x1);
        gbc.writeMem(0xe70e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xf2c3);
        EXPECT(gbc.pc(), 0xe710);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe70e), 0xcb);
        EXPECT(gbc.readMem(0xe70f), 0xf4);
        // CB F4 02D7
        gbc.setState(0x5165, 0x6c90, 0xf0f0, 0xe05a, 0x445d, 0xe1c1, 0x1, 0x1);
        gbc.writeMem(0x5165, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x6c90);
        EXPECT(gbc.pc(), 0x5167);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 02D8
        gbc.setState(0x5520, 0xd3ba, 0x4f30, 0xce4e, 0x60e1, 0x14a, 0x0, 0x0);
        gbc.writeMem(0x5520, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xd3ba);
        EXPECT(gbc.pc(), 0x5522);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 02D9
        gbc.setState(0x62b9, 0xb887, 0x4590, 0x193e, 0xb6cd, 0x164e, 0x1, 0x0);
        gbc.writeMem(0x62b9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xb887);
        EXPECT(gbc.pc(), 0x62bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 02DA
        gbc.setState(0xb213, 0x6fc1, 0xcb50, 0x812d, 0x1250, 0x1765, 0x1, 0x0);
        gbc.writeMem(0xb213, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x6fc1);
        EXPECT(gbc.pc(), 0xb215);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb213), 0xcb);
        EXPECT(gbc.readMem(0xb214), 0xf4);
        // CB F4 02DB
        gbc.setState(0x5956, 0xb690, 0x84c0, 0xb24e, 0xe56b, 0x5b56, 0x1, 0x0);
        gbc.writeMem(0x5956, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xb690);
        EXPECT(gbc.pc(), 0x5958);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 02DC
        gbc.setState(0x208b, 0xe347, 0x2880, 0x1bb5, 0x8c27, 0x3233, 0x1, 0x1);
        gbc.writeMem(0x208b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xe347);
        EXPECT(gbc.pc(), 0x208d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 02DD
        gbc.setState(0xee73, 0x7958, 0x5f20, 0x69c3, 0x61bf, 0x9f84, 0x1, 0x1);
        gbc.writeMem(0xee73, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x7958);
        EXPECT(gbc.pc(), 0xee75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee73), 0xcb);
        EXPECT(gbc.readMem(0xee74), 0xf4);
        // CB F4 02DE
        gbc.setState(0x5124, 0xb71f, 0xfc70, 0xcff1, 0x5962, 0xb7cf, 0x1, 0x0);
        gbc.writeMem(0x5124, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xb71f);
        EXPECT(gbc.pc(), 0x5126);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 02DF
        gbc.setState(0x7bf0, 0xbc70, 0x540, 0xe8b9, 0x8468, 0xa73e, 0x0, 0x0);
        gbc.writeMem(0x7bf0, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xbc70);
        EXPECT(gbc.pc(), 0x7bf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 02E0
        gbc.setState(0x57e0, 0xd9d2, 0x4310, 0x558d, 0xaf81, 0x688f, 0x0, 0x1);
        gbc.writeMem(0x57e0, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xd9d2);
        EXPECT(gbc.pc(), 0x57e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 02E1
        gbc.setState(0x777, 0x9a15, 0x7a70, 0x511, 0x2ba8, 0x3fe2, 0x0, 0x1);
        gbc.writeMem(0x777, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x9a15);
        EXPECT(gbc.pc(), 0x779);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 02E2
        gbc.setState(0x959e, 0x343c, 0xc2a0, 0xfc1a, 0xccd3, 0xeb20, 0x1, 0x1);
        gbc.writeMem(0x959e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x343c);
        EXPECT(gbc.pc(), 0x95a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x959e), 0xcb);
        EXPECT(gbc.readMem(0x959f), 0xf4);
        // CB F4 02E3
        gbc.setState(0xc000, 0x9343, 0x2060, 0xe63d, 0x7a6c, 0xf9c9, 0x0, 0x1);
        gbc.writeMem(0xc000, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x9343);
        EXPECT(gbc.pc(), 0xc002);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc000), 0xcb);
        EXPECT(gbc.readMem(0xc001), 0xf4);
        // CB F4 02E4
        gbc.setState(0x8304, 0x8732, 0x1d90, 0xbe64, 0xc9f4, 0x9f6b, 0x0, 0x0);
        gbc.writeMem(0x8304, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x8732);
        EXPECT(gbc.pc(), 0x8306);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8304), 0xcb);
        EXPECT(gbc.readMem(0x8305), 0xf4);
        // CB F4 02E5
        gbc.setState(0xbb65, 0xaf64, 0x6ec0, 0x46f5, 0xcf7a, 0xc056, 0x1, 0x1);
        gbc.writeMem(0xbb65, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xaf64);
        EXPECT(gbc.pc(), 0xbb67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb65), 0xcb);
        EXPECT(gbc.readMem(0xbb66), 0xf4);
        // CB F4 02E6
        gbc.setState(0x846, 0x5e4b, 0xf160, 0x687d, 0xe7a6, 0x860b, 0x0, 0x0);
        gbc.writeMem(0x846, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x5e4b);
        EXPECT(gbc.pc(), 0x848);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 02E7
        gbc.setState(0x90c9, 0x73d1, 0x1f60, 0xeefb, 0xe85f, 0x58ab, 0x0, 0x0);
        gbc.writeMem(0x90c9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x73d1);
        EXPECT(gbc.pc(), 0x90cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90c9), 0xcb);
        EXPECT(gbc.readMem(0x90ca), 0xf4);
        // CB F4 02E8
        gbc.setState(0x720d, 0x7186, 0x2a60, 0xcb3a, 0xe31d, 0x4e29, 0x0, 0x0);
        gbc.writeMem(0x720d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x7186);
        EXPECT(gbc.pc(), 0x720f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 02E9
        gbc.setState(0xe0c, 0xe90a, 0xc1b0, 0xc820, 0xf41f, 0x6fe9, 0x1, 0x1);
        gbc.writeMem(0xe0c, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xe90a);
        EXPECT(gbc.pc(), 0xe0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 02EA
        gbc.setState(0x2efd, 0xee8e, 0x38a0, 0x139b, 0x46b1, 0xeb8d, 0x0, 0x1);
        gbc.writeMem(0x2efd, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xee8e);
        EXPECT(gbc.pc(), 0x2eff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 02EB
        gbc.setState(0xe3c1, 0x4133, 0xa560, 0x488f, 0x8f5c, 0xb4e6, 0x1, 0x1);
        gbc.writeMem(0xe3c1, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x4133);
        EXPECT(gbc.pc(), 0xe3c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3c1), 0xcb);
        EXPECT(gbc.readMem(0xe3c2), 0xf4);
        // CB F4 02EC
        gbc.setState(0xbf2c, 0xf5a5, 0x78b0, 0x8fa5, 0x8d34, 0xc12d, 0x1, 0x1);
        gbc.writeMem(0xbf2c, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xf5a5);
        EXPECT(gbc.pc(), 0xbf2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf2c), 0xcb);
        EXPECT(gbc.readMem(0xbf2d), 0xf4);
        // CB F4 02ED
        gbc.setState(0x526e, 0x976d, 0x7c80, 0x9275, 0x3d96, 0x3497, 0x0, 0x0);
        gbc.writeMem(0x526e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x976d);
        EXPECT(gbc.pc(), 0x5270);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 02EE
        gbc.setState(0xe8a2, 0x5dfe, 0xcd50, 0x2c99, 0x3443, 0x5124, 0x1, 0x1);
        gbc.writeMem(0xe8a2, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x5dfe);
        EXPECT(gbc.pc(), 0xe8a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8a2), 0xcb);
        EXPECT(gbc.readMem(0xe8a3), 0xf4);
        // CB F4 02EF
        gbc.setState(0xd4c4, 0xaa2d, 0xa240, 0xb5e, 0x77df, 0x1653, 0x0, 0x0);
        gbc.writeMem(0xd4c4, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xaa2d);
        EXPECT(gbc.pc(), 0xd4c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4c4), 0xcb);
        EXPECT(gbc.readMem(0xd4c5), 0xf4);
        // CB F4 02F0
        gbc.setState(0xd17f, 0xd63d, 0xbe90, 0x16f5, 0x63a2, 0xbe94, 0x0, 0x0);
        gbc.writeMem(0xd17f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xd63d);
        EXPECT(gbc.pc(), 0xd181);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd17f), 0xcb);
        EXPECT(gbc.readMem(0xd180), 0xf4);
        // CB F4 02F2
        gbc.setState(0x3ef9, 0xdca4, 0x10d0, 0x7b76, 0x79ec, 0x99c7, 0x1, 0x0);
        gbc.writeMem(0x3ef9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xdca4);
        EXPECT(gbc.pc(), 0x3efb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 02F3
        gbc.setState(0xba96, 0x3ad, 0x3390, 0x37a, 0x69cf, 0xb739, 0x1, 0x0);
        gbc.writeMem(0xba96, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x3ad);
        EXPECT(gbc.pc(), 0xba98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba96), 0xcb);
        EXPECT(gbc.readMem(0xba97), 0xf4);
        // CB F4 02F4
        gbc.setState(0x644c, 0xc1bc, 0x3a00, 0xc581, 0xfcfc, 0x820c, 0x1, 0x1);
        gbc.writeMem(0x644c, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xc1bc);
        EXPECT(gbc.pc(), 0x644e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 02F5
        gbc.setState(0xf5a, 0xf1b5, 0xa4b0, 0x2da7, 0xfe3d, 0x7626, 0x0, 0x0);
        gbc.writeMem(0xf5a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xf1b5);
        EXPECT(gbc.pc(), 0xf5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 02F6
        gbc.setState(0xa7e1, 0xe551, 0x24d0, 0x3f01, 0xb68, 0x23c6, 0x1, 0x1);
        gbc.writeMem(0xa7e1, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xe551);
        EXPECT(gbc.pc(), 0xa7e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7e1), 0xcb);
        EXPECT(gbc.readMem(0xa7e2), 0xf4);
        // CB F4 02F7
        gbc.setState(0x9595, 0xe07c, 0xc660, 0xd706, 0xf4de, 0xe0a0, 0x0, 0x0);
        gbc.writeMem(0x9595, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xe07c);
        EXPECT(gbc.pc(), 0x9597);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9595), 0xcb);
        EXPECT(gbc.readMem(0x9596), 0xf4);
        // CB F4 02F8
        gbc.setState(0xb246, 0x9df6, 0xc6b0, 0x5779, 0xf67b, 0x5f32, 0x1, 0x1);
        gbc.writeMem(0xb246, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x9df6);
        EXPECT(gbc.pc(), 0xb248);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb246), 0xcb);
        EXPECT(gbc.readMem(0xb247), 0xf4);
        // CB F4 02F9
        gbc.setState(0x8d1f, 0x46a4, 0x3380, 0x9c2f, 0x1ae8, 0x69ae, 0x0, 0x1);
        gbc.writeMem(0x8d1f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x46a4);
        EXPECT(gbc.pc(), 0x8d21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d1f), 0xcb);
        EXPECT(gbc.readMem(0x8d20), 0xf4);
        // CB F4 02FA
        gbc.setState(0xda3, 0xc071, 0xe5f0, 0xc884, 0x1b25, 0xbd45, 0x0, 0x1);
        gbc.writeMem(0xda3, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xc071);
        EXPECT(gbc.pc(), 0xda5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 02FB
        gbc.setState(0xaf93, 0xf812, 0x9b0, 0x28d, 0x892f, 0xc950, 0x1, 0x1);
        gbc.writeMem(0xaf93, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xf812);
        EXPECT(gbc.pc(), 0xaf95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf93), 0xcb);
        EXPECT(gbc.readMem(0xaf94), 0xf4);
        // CB F4 02FC
        gbc.setState(0xb5d9, 0xdaf5, 0x8da0, 0x79d1, 0x8652, 0x598f, 0x0, 0x1);
        gbc.writeMem(0xb5d9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xdaf5);
        EXPECT(gbc.pc(), 0xb5db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5d9), 0xcb);
        EXPECT(gbc.readMem(0xb5da), 0xf4);
        // CB F4 02FD
        gbc.setState(0x6af, 0x59e1, 0x1e90, 0x7ea7, 0x1018, 0x2685, 0x1, 0x0);
        gbc.writeMem(0x6af, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x59e1);
        EXPECT(gbc.pc(), 0x6b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 02FE
        gbc.setState(0x2c5a, 0xb80c, 0xc1c0, 0xe431, 0x7c49, 0x288e, 0x1, 0x0);
        gbc.writeMem(0x2c5a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xb80c);
        EXPECT(gbc.pc(), 0x2c5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 02FF
        gbc.setState(0x9f57, 0x9117, 0xe810, 0xd899, 0x4008, 0xb934, 0x1, 0x1);
        gbc.writeMem(0x9f57, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x9117);
        EXPECT(gbc.pc(), 0x9f59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f57), 0xcb);
        EXPECT(gbc.readMem(0x9f58), 0xf4);
        // CB F4 0300
        gbc.setState(0xc4cc, 0xeb2b, 0xe7b0, 0xb2da, 0x9b0d, 0x8a97, 0x1, 0x0);
        gbc.writeMem(0xc4cc, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xeb2b);
        EXPECT(gbc.pc(), 0xc4ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4cc), 0xcb);
        EXPECT(gbc.readMem(0xc4cd), 0xf4);
        // CB F4 0301
        gbc.setState(0x53e8, 0xcace, 0xc1f0, 0xeab, 0xd89d, 0x594c, 0x0, 0x1);
        gbc.writeMem(0x53e8, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xcace);
        EXPECT(gbc.pc(), 0x53ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0302
        gbc.setState(0x2611, 0xb4da, 0x7c20, 0x7adb, 0xe496, 0x32f3, 0x0, 0x1);
        gbc.writeMem(0x2611, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xb4da);
        EXPECT(gbc.pc(), 0x2613);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0303
        gbc.setState(0x13a8, 0xb318, 0x5730, 0x719c, 0x4362, 0x1568, 0x1, 0x0);
        gbc.writeMem(0x13a8, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xb318);
        EXPECT(gbc.pc(), 0x13aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0304
        gbc.setState(0x9cd9, 0x3aa9, 0xbc30, 0xbd4e, 0x56a5, 0x7bd8, 0x1, 0x0);
        gbc.writeMem(0x9cd9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x3aa9);
        EXPECT(gbc.pc(), 0x9cdb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cd9), 0xcb);
        EXPECT(gbc.readMem(0x9cda), 0xf4);
        // CB F4 0305
        gbc.setState(0x9250, 0x662c, 0x6a0, 0x290d, 0x124b, 0x65e7, 0x0, 0x1);
        gbc.writeMem(0x9250, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x662c);
        EXPECT(gbc.pc(), 0x9252);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9250), 0xcb);
        EXPECT(gbc.readMem(0x9251), 0xf4);
        // CB F4 0306
        gbc.setState(0x71f2, 0x3492, 0x3aa0, 0x9b1a, 0xabfd, 0xfc64, 0x0, 0x0);
        gbc.writeMem(0x71f2, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x3492);
        EXPECT(gbc.pc(), 0x71f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0307
        gbc.setState(0x87d9, 0x7740, 0xb550, 0xea7f, 0x517b, 0x4289, 0x0, 0x0);
        gbc.writeMem(0x87d9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x7740);
        EXPECT(gbc.pc(), 0x87db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87d9), 0xcb);
        EXPECT(gbc.readMem(0x87da), 0xf4);
        // CB F4 0308
        gbc.setState(0x377c, 0x115e, 0xd670, 0x8d41, 0xace1, 0x84b9, 0x1, 0x0);
        gbc.writeMem(0x377c, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x115e);
        EXPECT(gbc.pc(), 0x377e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0309
        gbc.setState(0x9d78, 0xfe55, 0x57d0, 0x4cf5, 0xa9a2, 0xe40c, 0x1, 0x1);
        gbc.writeMem(0x9d78, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xfe55);
        EXPECT(gbc.pc(), 0x9d7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d78), 0xcb);
        EXPECT(gbc.readMem(0x9d79), 0xf4);
        // CB F4 030A
        gbc.setState(0x56af, 0xc9ab, 0xf580, 0xce43, 0x9fed, 0x18fe, 0x1, 0x1);
        gbc.writeMem(0x56af, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xc9ab);
        EXPECT(gbc.pc(), 0x56b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 030B
        gbc.setState(0x354d, 0xaa01, 0xeec0, 0x97ad, 0x1089, 0xe9b4, 0x1, 0x1);
        gbc.writeMem(0x354d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xaa01);
        EXPECT(gbc.pc(), 0x354f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 030C
        gbc.setState(0xd5bf, 0x8ccc, 0x5ba0, 0xb051, 0xb448, 0x4e53, 0x1, 0x1);
        gbc.writeMem(0xd5bf, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x8ccc);
        EXPECT(gbc.pc(), 0xd5c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5bf), 0xcb);
        EXPECT(gbc.readMem(0xd5c0), 0xf4);
        // CB F4 030D
        gbc.setState(0x851c, 0x2673, 0xdd30, 0x9157, 0xf349, 0x318e, 0x0, 0x0);
        gbc.writeMem(0x851c, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x2673);
        EXPECT(gbc.pc(), 0x851e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x851c), 0xcb);
        EXPECT(gbc.readMem(0x851d), 0xf4);
        // CB F4 030E
        gbc.setState(0x6f81, 0x30e4, 0x6400, 0x8bd8, 0x2bdf, 0xd3b7, 0x1, 0x0);
        gbc.writeMem(0x6f81, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x30e4);
        EXPECT(gbc.pc(), 0x6f83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 030F
        gbc.setState(0x3ae4, 0xd3e6, 0xeb20, 0x5c41, 0x733, 0x20f1, 0x0, 0x0);
        gbc.writeMem(0x3ae4, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xd3e6);
        EXPECT(gbc.pc(), 0x3ae6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0310
        gbc.setState(0x75fb, 0x2ffc, 0xbcf0, 0x2187, 0x5f53, 0xd059, 0x0, 0x1);
        gbc.writeMem(0x75fb, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x2ffc);
        EXPECT(gbc.pc(), 0x75fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0311
        gbc.setState(0x2186, 0x519d, 0xa750, 0x55d5, 0xd2e5, 0x96e1, 0x0, 0x0);
        gbc.writeMem(0x2186, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x519d);
        EXPECT(gbc.pc(), 0x2188);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0312
        gbc.setState(0xa3de, 0x1d99, 0xc500, 0xb84, 0x6af6, 0x6f76, 0x0, 0x0);
        gbc.writeMem(0xa3de, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x1d99);
        EXPECT(gbc.pc(), 0xa3e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3de), 0xcb);
        EXPECT(gbc.readMem(0xa3df), 0xf4);
        // CB F4 0313
        gbc.setState(0x951f, 0x5937, 0x27f0, 0x1a0d, 0xf41, 0x98e1, 0x1, 0x0);
        gbc.writeMem(0x951f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x5937);
        EXPECT(gbc.pc(), 0x9521);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x951f), 0xcb);
        EXPECT(gbc.readMem(0x9520), 0xf4);
        // CB F4 0314
        gbc.setState(0x8c2, 0x236, 0x5fe0, 0x5095, 0x7ff, 0x874c, 0x1, 0x0);
        gbc.writeMem(0x8c2, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x236);
        EXPECT(gbc.pc(), 0x8c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0315
        gbc.setState(0x8ca7, 0xd03f, 0xe5c0, 0x488e, 0xf75d, 0xaf91, 0x0, 0x0);
        gbc.writeMem(0x8ca7, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xd03f);
        EXPECT(gbc.pc(), 0x8ca9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ca7), 0xcb);
        EXPECT(gbc.readMem(0x8ca8), 0xf4);
        // CB F4 0316
        gbc.setState(0xd327, 0xda8e, 0xf4d0, 0x6678, 0x3e84, 0xd805, 0x1, 0x0);
        gbc.writeMem(0xd327, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xda8e);
        EXPECT(gbc.pc(), 0xd329);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd327), 0xcb);
        EXPECT(gbc.readMem(0xd328), 0xf4);
        // CB F4 0317
        gbc.setState(0xb3e1, 0x8b24, 0xd470, 0xced4, 0xed10, 0x2253, 0x1, 0x1);
        gbc.writeMem(0xb3e1, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x8b24);
        EXPECT(gbc.pc(), 0xb3e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3e1), 0xcb);
        EXPECT(gbc.readMem(0xb3e2), 0xf4);
        // CB F4 0318
        gbc.setState(0x2ec9, 0x7071, 0x7380, 0xec6e, 0x3028, 0xff65, 0x1, 0x1);
        gbc.writeMem(0x2ec9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x7071);
        EXPECT(gbc.pc(), 0x2ecb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0319
        gbc.setState(0x3f15, 0xc9a7, 0xa4d0, 0x6558, 0x790d, 0x7f5c, 0x1, 0x1);
        gbc.writeMem(0x3f15, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xc9a7);
        EXPECT(gbc.pc(), 0x3f17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 031A
        gbc.setState(0xb14b, 0x36b7, 0x4680, 0xfb41, 0x1932, 0x26d9, 0x1, 0x1);
        gbc.writeMem(0xb14b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x36b7);
        EXPECT(gbc.pc(), 0xb14d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb14b), 0xcb);
        EXPECT(gbc.readMem(0xb14c), 0xf4);
        // CB F4 031B
        gbc.setState(0xcdc9, 0xfb6c, 0x3bf0, 0x2df5, 0x2e83, 0xd7ff, 0x1, 0x0);
        gbc.writeMem(0xcdc9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xfb6c);
        EXPECT(gbc.pc(), 0xcdcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdc9), 0xcb);
        EXPECT(gbc.readMem(0xcdca), 0xf4);
        // CB F4 031D
        gbc.setState(0xef15, 0x806f, 0xb330, 0x3b68, 0xd523, 0x83e2, 0x1, 0x1);
        gbc.writeMem(0xef15, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x806f);
        EXPECT(gbc.pc(), 0xef17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef15), 0xcb);
        EXPECT(gbc.readMem(0xef16), 0xf4);
        // CB F4 031E
        gbc.setState(0x365d, 0x849c, 0x1080, 0x565f, 0xa833, 0x9696, 0x1, 0x1);
        gbc.writeMem(0x365d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x849c);
        EXPECT(gbc.pc(), 0x365f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 031F
        gbc.setState(0x5b50, 0x6957, 0x6360, 0xe8d9, 0x58f8, 0x5dbe, 0x0, 0x1);
        gbc.writeMem(0x5b50, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x6957);
        EXPECT(gbc.pc(), 0x5b52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0321
        gbc.setState(0xd77, 0xbfd7, 0x7d70, 0xf040, 0xf1d7, 0xc0f4, 0x1, 0x0);
        gbc.writeMem(0xd77, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xbfd7);
        EXPECT(gbc.pc(), 0xd79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0322
        gbc.setState(0x35b7, 0x6a57, 0xf1e0, 0xbc95, 0x910a, 0x2a6c, 0x0, 0x0);
        gbc.writeMem(0x35b7, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x6a57);
        EXPECT(gbc.pc(), 0x35b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0324
        gbc.setState(0x75f8, 0x6be9, 0xeea0, 0xbf9d, 0xde8e, 0xdd11, 0x1, 0x1);
        gbc.writeMem(0x75f8, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x6be9);
        EXPECT(gbc.pc(), 0x75fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0325
        gbc.setState(0x4820, 0x5fcc, 0x1fb0, 0x5f36, 0x279, 0x1440, 0x1, 0x0);
        gbc.writeMem(0x4820, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x5fcc);
        EXPECT(gbc.pc(), 0x4822);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0326
        gbc.setState(0xaf1f, 0x62c2, 0xbed0, 0x8ed2, 0x7dde, 0x799c, 0x0, 0x1);
        gbc.writeMem(0xaf1f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x62c2);
        EXPECT(gbc.pc(), 0xaf21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf1f), 0xcb);
        EXPECT(gbc.readMem(0xaf20), 0xf4);
        // CB F4 0328
        gbc.setState(0xbd06, 0x999d, 0xb6f0, 0xbd5e, 0xdadd, 0xa932, 0x0, 0x1);
        gbc.writeMem(0xbd06, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x999d);
        EXPECT(gbc.pc(), 0xbd08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd06), 0xcb);
        EXPECT(gbc.readMem(0xbd07), 0xf4);
        // CB F4 0329
        gbc.setState(0xe817, 0x8a6c, 0x31e0, 0x8ea7, 0xad1d, 0x6f82, 0x1, 0x1);
        gbc.writeMem(0xe817, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x8a6c);
        EXPECT(gbc.pc(), 0xe819);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe817), 0xcb);
        EXPECT(gbc.readMem(0xe818), 0xf4);
        // CB F4 032A
        gbc.setState(0x469e, 0x826f, 0x30c0, 0x317d, 0xa12b, 0x4615, 0x1, 0x1);
        gbc.writeMem(0x469e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x826f);
        EXPECT(gbc.pc(), 0x46a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 032B
        gbc.setState(0xc241, 0x7100, 0x3030, 0x8315, 0x5ecc, 0xef9, 0x1, 0x1);
        gbc.writeMem(0xc241, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x7100);
        EXPECT(gbc.pc(), 0xc243);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc241), 0xcb);
        EXPECT(gbc.readMem(0xc242), 0xf4);
        // CB F4 032C
        gbc.setState(0x94c1, 0xa9d5, 0xa240, 0x413, 0xf5be, 0xce84, 0x0, 0x0);
        gbc.writeMem(0x94c1, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xa9d5);
        EXPECT(gbc.pc(), 0x94c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94c1), 0xcb);
        EXPECT(gbc.readMem(0x94c2), 0xf4);
        // CB F4 032D
        gbc.setState(0xe158, 0x3c, 0x4750, 0xcda3, 0x8294, 0x3764, 0x1, 0x0);
        gbc.writeMem(0xe158, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x3c);
        EXPECT(gbc.pc(), 0xe15a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe158), 0xcb);
        EXPECT(gbc.readMem(0xe159), 0xf4);
        // CB F4 032E
        gbc.setState(0xaca6, 0x290a, 0x4890, 0x6f1a, 0x7a4c, 0xed88, 0x0, 0x0);
        gbc.writeMem(0xaca6, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x290a);
        EXPECT(gbc.pc(), 0xaca8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaca6), 0xcb);
        EXPECT(gbc.readMem(0xaca7), 0xf4);
        // CB F4 032F
        gbc.setState(0x97b0, 0x8a03, 0x4900, 0xdadd, 0x5496, 0xe43e, 0x0, 0x0);
        gbc.writeMem(0x97b0, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x8a03);
        EXPECT(gbc.pc(), 0x97b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97b0), 0xcb);
        EXPECT(gbc.readMem(0x97b1), 0xf4);
        // CB F4 0330
        gbc.setState(0xd2f8, 0x161, 0xbf90, 0xa8a9, 0x1b8c, 0xe8d5, 0x1, 0x1);
        gbc.writeMem(0xd2f8, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x161);
        EXPECT(gbc.pc(), 0xd2fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2f8), 0xcb);
        EXPECT(gbc.readMem(0xd2f9), 0xf4);
        // CB F4 0331
        gbc.setState(0xbcae, 0xc2c, 0x6ff0, 0xa79f, 0x54fb, 0xbc85, 0x0, 0x1);
        gbc.writeMem(0xbcae, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xc2c);
        EXPECT(gbc.pc(), 0xbcb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcae), 0xcb);
        EXPECT(gbc.readMem(0xbcaf), 0xf4);
        // CB F4 0333
        gbc.setState(0xe04f, 0x2ae8, 0x9e30, 0xbe67, 0xb3c9, 0x954e, 0x0, 0x1);
        gbc.writeMem(0xe04f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x2ae8);
        EXPECT(gbc.pc(), 0xe051);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe04f), 0xcb);
        EXPECT(gbc.readMem(0xe050), 0xf4);
        // CB F4 0334
        gbc.setState(0xebe9, 0x6033, 0x3dd0, 0xd7bc, 0x2f5e, 0x837e, 0x0, 0x0);
        gbc.writeMem(0xebe9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x6033);
        EXPECT(gbc.pc(), 0xebeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebe9), 0xcb);
        EXPECT(gbc.readMem(0xebea), 0xf4);
        // CB F4 0335
        gbc.setState(0xa2e8, 0xfef3, 0x7eb0, 0xcecf, 0xc47b, 0x44f7, 0x1, 0x0);
        gbc.writeMem(0xa2e8, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xfef3);
        EXPECT(gbc.pc(), 0xa2ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2e8), 0xcb);
        EXPECT(gbc.readMem(0xa2e9), 0xf4);
        // CB F4 0336
        gbc.setState(0x3793, 0x99db, 0x4f70, 0x7e6f, 0xc498, 0x725d, 0x0, 0x1);
        gbc.writeMem(0x3793, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x99db);
        EXPECT(gbc.pc(), 0x3795);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0337
        gbc.setState(0xba3d, 0x75b6, 0xfb0, 0x5a5e, 0xd892, 0x2364, 0x0, 0x1);
        gbc.writeMem(0xba3d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x75b6);
        EXPECT(gbc.pc(), 0xba3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba3d), 0xcb);
        EXPECT(gbc.readMem(0xba3e), 0xf4);
        // CB F4 0338
        gbc.setState(0x5f39, 0xd8ae, 0xecc0, 0xf49f, 0x863b, 0x67cc, 0x0, 0x1);
        gbc.writeMem(0x5f39, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xd8ae);
        EXPECT(gbc.pc(), 0x5f3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0339
        gbc.setState(0x418b, 0x53e6, 0x5490, 0xf509, 0xa1fc, 0x88d9, 0x1, 0x1);
        gbc.writeMem(0x418b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x53e6);
        EXPECT(gbc.pc(), 0x418d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 033A
        gbc.setState(0xd10a, 0xbf70, 0x1980, 0x7465, 0xfde2, 0x1032, 0x1, 0x0);
        gbc.writeMem(0xd10a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xbf70);
        EXPECT(gbc.pc(), 0xd10c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd10a), 0xcb);
        EXPECT(gbc.readMem(0xd10b), 0xf4);
        // CB F4 033B
        gbc.setState(0xd422, 0x7316, 0x400, 0x613d, 0x7cf7, 0x4f53, 0x1, 0x0);
        gbc.writeMem(0xd422, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x7316);
        EXPECT(gbc.pc(), 0xd424);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd422), 0xcb);
        EXPECT(gbc.readMem(0xd423), 0xf4);
        // CB F4 033C
        gbc.setState(0x21ed, 0x1721, 0x9b70, 0x641a, 0xfbbc, 0xc9ff, 0x0, 0x1);
        gbc.writeMem(0x21ed, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x1721);
        EXPECT(gbc.pc(), 0x21ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 033D
        gbc.setState(0xe246, 0x58f6, 0xe4a0, 0x41df, 0x6cb, 0x96ad, 0x0, 0x1);
        gbc.writeMem(0xe246, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x58f6);
        EXPECT(gbc.pc(), 0xe248);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe246), 0xcb);
        EXPECT(gbc.readMem(0xe247), 0xf4);
        // CB F4 033E
        gbc.setState(0xb245, 0x93bf, 0x74c0, 0x676a, 0xcadd, 0xbb29, 0x0, 0x1);
        gbc.writeMem(0xb245, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x93bf);
        EXPECT(gbc.pc(), 0xb247);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb245), 0xcb);
        EXPECT(gbc.readMem(0xb246), 0xf4);
        // CB F4 033F
        gbc.setState(0xc63b, 0xa9a9, 0xfe70, 0x146a, 0xa702, 0x3787, 0x1, 0x0);
        gbc.writeMem(0xc63b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xa9a9);
        EXPECT(gbc.pc(), 0xc63d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc63b), 0xcb);
        EXPECT(gbc.readMem(0xc63c), 0xf4);
        // CB F4 0340
        gbc.setState(0x2936, 0x1f4d, 0x1730, 0xbc61, 0xe891, 0xdac7, 0x0, 0x1);
        gbc.writeMem(0x2936, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x1f4d);
        EXPECT(gbc.pc(), 0x2938);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0341
        gbc.setState(0xc258, 0xff4, 0x8fd0, 0x300c, 0x2b7d, 0x1f0e, 0x1, 0x0);
        gbc.writeMem(0xc258, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xff4);
        EXPECT(gbc.pc(), 0xc25a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc258), 0xcb);
        EXPECT(gbc.readMem(0xc259), 0xf4);
        // CB F4 0342
        gbc.setState(0x7114, 0x85d0, 0x4e60, 0x4d3a, 0xd167, 0xd427, 0x1, 0x0);
        gbc.writeMem(0x7114, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x85d0);
        EXPECT(gbc.pc(), 0x7116);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0343
        gbc.setState(0x1f67, 0x4ac8, 0xd5a0, 0x704, 0x24a6, 0xdf2d, 0x1, 0x1);
        gbc.writeMem(0x1f67, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x4ac8);
        EXPECT(gbc.pc(), 0x1f69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0344
        gbc.setState(0xe7e0, 0x93fd, 0x5250, 0xe0ce, 0x682d, 0xf846, 0x0, 0x0);
        gbc.writeMem(0xe7e0, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x93fd);
        EXPECT(gbc.pc(), 0xe7e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7e0), 0xcb);
        EXPECT(gbc.readMem(0xe7e1), 0xf4);
        // CB F4 0345
        gbc.setState(0x99cd, 0x984b, 0x89d0, 0x380d, 0x4210, 0x6c02, 0x0, 0x0);
        gbc.writeMem(0x99cd, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x984b);
        EXPECT(gbc.pc(), 0x99cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99cd), 0xcb);
        EXPECT(gbc.readMem(0x99ce), 0xf4);
        // CB F4 0346
        gbc.setState(0xcfa3, 0x842c, 0x9a10, 0x6726, 0x64c4, 0x415, 0x1, 0x1);
        gbc.writeMem(0xcfa3, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x842c);
        EXPECT(gbc.pc(), 0xcfa5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfa3), 0xcb);
        EXPECT(gbc.readMem(0xcfa4), 0xf4);
        // CB F4 0347
        gbc.setState(0xd98d, 0x5e2b, 0xcfd0, 0xcc1f, 0xbc15, 0x9f8b, 0x1, 0x0);
        gbc.writeMem(0xd98d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x5e2b);
        EXPECT(gbc.pc(), 0xd98f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd98d), 0xcb);
        EXPECT(gbc.readMem(0xd98e), 0xf4);
        // CB F4 0348
        gbc.setState(0x85a1, 0xd330, 0xca0, 0xf53e, 0xadfc, 0x9318, 0x1, 0x0);
        gbc.writeMem(0x85a1, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xd330);
        EXPECT(gbc.pc(), 0x85a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85a1), 0xcb);
        EXPECT(gbc.readMem(0x85a2), 0xf4);
        // CB F4 0349
        gbc.setState(0x85ab, 0x6124, 0x6690, 0x9f91, 0x4500, 0xb1ab, 0x0, 0x0);
        gbc.writeMem(0x85ab, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x6124);
        EXPECT(gbc.pc(), 0x85ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85ab), 0xcb);
        EXPECT(gbc.readMem(0x85ac), 0xf4);
        // CB F4 034A
        gbc.setState(0xd118, 0xf4d2, 0xf630, 0x7e1d, 0x17a0, 0xd956, 0x0, 0x0);
        gbc.writeMem(0xd118, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xf4d2);
        EXPECT(gbc.pc(), 0xd11a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd118), 0xcb);
        EXPECT(gbc.readMem(0xd119), 0xf4);
        // CB F4 034B
        gbc.setState(0x4165, 0x4950, 0x1d60, 0x45af, 0xc3f8, 0x4247, 0x1, 0x0);
        gbc.writeMem(0x4165, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x4950);
        EXPECT(gbc.pc(), 0x4167);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 034C
        gbc.setState(0x9cc5, 0x20b0, 0xcd70, 0xe07d, 0x24fa, 0x807f, 0x0, 0x0);
        gbc.writeMem(0x9cc5, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x20b0);
        EXPECT(gbc.pc(), 0x9cc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cc5), 0xcb);
        EXPECT(gbc.readMem(0x9cc6), 0xf4);
        // CB F4 034D
        gbc.setState(0xba29, 0x8bdf, 0x6fe0, 0x1b28, 0xf36a, 0x52e0, 0x1, 0x1);
        gbc.writeMem(0xba29, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x8bdf);
        EXPECT(gbc.pc(), 0xba2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba29), 0xcb);
        EXPECT(gbc.readMem(0xba2a), 0xf4);
        // CB F4 034E
        gbc.setState(0x5926, 0x7ca9, 0xd3f0, 0x7a0b, 0x3eea, 0xd076, 0x1, 0x1);
        gbc.writeMem(0x5926, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x7ca9);
        EXPECT(gbc.pc(), 0x5928);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 034F
        gbc.setState(0x668e, 0x1127, 0x3710, 0xac9e, 0xca0d, 0xddb8, 0x0, 0x0);
        gbc.writeMem(0x668e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x1127);
        EXPECT(gbc.pc(), 0x6690);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0351
        gbc.setState(0xf60, 0xaa4f, 0x59f0, 0xf81d, 0x533e, 0x8d1, 0x0, 0x0);
        gbc.writeMem(0xf60, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xaa4f);
        EXPECT(gbc.pc(), 0xf62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0352
        gbc.setState(0xaa1e, 0xd0a7, 0xd0, 0x55af, 0x3d2a, 0xbbd3, 0x1, 0x1);
        gbc.writeMem(0xaa1e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xd0a7);
        EXPECT(gbc.pc(), 0xaa20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa1e), 0xcb);
        EXPECT(gbc.readMem(0xaa1f), 0xf4);
        // CB F4 0353
        gbc.setState(0x200a, 0xafec, 0x2f20, 0x3bbf, 0x46d8, 0x3cdc, 0x1, 0x0);
        gbc.writeMem(0x200a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xafec);
        EXPECT(gbc.pc(), 0x200c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0354
        gbc.setState(0x7c07, 0x5e5e, 0xf9f0, 0x5d9d, 0x4bb1, 0xb16b, 0x0, 0x1);
        gbc.writeMem(0x7c07, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x5e5e);
        EXPECT(gbc.pc(), 0x7c09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0355
        gbc.setState(0x9a4a, 0xc245, 0xa7f0, 0xcfe1, 0x4f1, 0x1422, 0x1, 0x1);
        gbc.writeMem(0x9a4a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xc245);
        EXPECT(gbc.pc(), 0x9a4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a4a), 0xcb);
        EXPECT(gbc.readMem(0x9a4b), 0xf4);
        // CB F4 0357
        gbc.setState(0x83ba, 0xab37, 0xc180, 0x52ec, 0xb60f, 0x3575, 0x0, 0x1);
        gbc.writeMem(0x83ba, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xab37);
        EXPECT(gbc.pc(), 0x83bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83ba), 0xcb);
        EXPECT(gbc.readMem(0x83bb), 0xf4);
        // CB F4 0358
        gbc.setState(0x4650, 0x908f, 0xe020, 0xe2d4, 0xfaae, 0x31e4, 0x1, 0x0);
        gbc.writeMem(0x4650, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x908f);
        EXPECT(gbc.pc(), 0x4652);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0359
        gbc.setState(0xd8dc, 0x1018, 0x7b70, 0x7e9d, 0x4fe5, 0x9d74, 0x0, 0x0);
        gbc.writeMem(0xd8dc, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x1018);
        EXPECT(gbc.pc(), 0xd8de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8dc), 0xcb);
        EXPECT(gbc.readMem(0xd8dd), 0xf4);
        // CB F4 035B
        gbc.setState(0x1de6, 0xf96f, 0xcce0, 0x5497, 0xa067, 0xb7, 0x0, 0x1);
        gbc.writeMem(0x1de6, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xf96f);
        EXPECT(gbc.pc(), 0x1de8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 035D
        gbc.setState(0xa8d2, 0x5326, 0x53a0, 0xe933, 0x6972, 0xd16, 0x1, 0x1);
        gbc.writeMem(0xa8d2, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x5326);
        EXPECT(gbc.pc(), 0xa8d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8d2), 0xcb);
        EXPECT(gbc.readMem(0xa8d3), 0xf4);
        // CB F4 035E
        gbc.setState(0x774b, 0xf179, 0xa70, 0x20fa, 0xb84, 0x4b06, 0x1, 0x1);
        gbc.writeMem(0x774b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xf179);
        EXPECT(gbc.pc(), 0x774d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 035F
        gbc.setState(0x8dcb, 0xfb26, 0xc280, 0x49fb, 0x58a5, 0xbbd2, 0x1, 0x0);
        gbc.writeMem(0x8dcb, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xfb26);
        EXPECT(gbc.pc(), 0x8dcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dcb), 0xcb);
        EXPECT(gbc.readMem(0x8dcc), 0xf4);
        // CB F4 0360
        gbc.setState(0x57b2, 0xe7de, 0x88f0, 0x721, 0x7429, 0x71fe, 0x0, 0x1);
        gbc.writeMem(0x57b2, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xe7de);
        EXPECT(gbc.pc(), 0x57b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0361
        gbc.setState(0xa25e, 0xc12d, 0xd8a0, 0x29fe, 0xaa13, 0x4688, 0x1, 0x0);
        gbc.writeMem(0xa25e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xc12d);
        EXPECT(gbc.pc(), 0xa260);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa25e), 0xcb);
        EXPECT(gbc.readMem(0xa25f), 0xf4);
        // CB F4 0362
        gbc.setState(0xb6, 0xfed9, 0xcda0, 0xdb44, 0x4ea9, 0x39c3, 0x0, 0x0);
        gbc.writeMem(0xb6, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xfed9);
        EXPECT(gbc.pc(), 0xb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0363
        gbc.setState(0xc058, 0x2be2, 0xed90, 0x39f9, 0x9750, 0x9802, 0x1, 0x1);
        gbc.writeMem(0xc058, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x2be2);
        EXPECT(gbc.pc(), 0xc05a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc058), 0xcb);
        EXPECT(gbc.readMem(0xc059), 0xf4);
        // CB F4 0364
        gbc.setState(0xc376, 0xdb1e, 0x6d80, 0x86d, 0xd9e2, 0x1703, 0x1, 0x0);
        gbc.writeMem(0xc376, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xdb1e);
        EXPECT(gbc.pc(), 0xc378);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc376), 0xcb);
        EXPECT(gbc.readMem(0xc377), 0xf4);
        // CB F4 0365
        gbc.setState(0xe4c, 0xea20, 0x9680, 0x508a, 0x8d59, 0x6f83, 0x1, 0x0);
        gbc.writeMem(0xe4c, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xea20);
        EXPECT(gbc.pc(), 0xe4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0367
        gbc.setState(0x4247, 0x4f2a, 0x7f90, 0x4fdc, 0xba15, 0x4950, 0x1, 0x1);
        gbc.writeMem(0x4247, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x4f2a);
        EXPECT(gbc.pc(), 0x4249);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0368
        gbc.setState(0xc1ee, 0x6ac7, 0xb860, 0xde2a, 0xfb83, 0x73d8, 0x0, 0x0);
        gbc.writeMem(0xc1ee, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x6ac7);
        EXPECT(gbc.pc(), 0xc1f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1ee), 0xcb);
        EXPECT(gbc.readMem(0xc1ef), 0xf4);
        // CB F4 0369
        gbc.setState(0x33d0, 0xc07, 0x29a0, 0xfbfa, 0x37fd, 0x76d9, 0x0, 0x0);
        gbc.writeMem(0x33d0, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xc07);
        EXPECT(gbc.pc(), 0x33d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 036A
        gbc.setState(0x5b4, 0xdfdb, 0x33b0, 0x92d9, 0xb4a9, 0x5f7a, 0x0, 0x1);
        gbc.writeMem(0x5b4, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xdfdb);
        EXPECT(gbc.pc(), 0x5b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 036B
        gbc.setState(0x8802, 0xbd4f, 0xae60, 0x75c6, 0x2206, 0x93ec, 0x0, 0x1);
        gbc.writeMem(0x8802, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xbd4f);
        EXPECT(gbc.pc(), 0x8804);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8802), 0xcb);
        EXPECT(gbc.readMem(0x8803), 0xf4);
        // CB F4 036C
        gbc.setState(0x99c9, 0x5f26, 0x3ab0, 0xf191, 0xedd, 0xf99a, 0x0, 0x1);
        gbc.writeMem(0x99c9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x5f26);
        EXPECT(gbc.pc(), 0x99cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99c9), 0xcb);
        EXPECT(gbc.readMem(0x99ca), 0xf4);
        // CB F4 036E
        gbc.setState(0x7bf4, 0xfa0b, 0xcd10, 0x25de, 0x37cc, 0xff6f, 0x1, 0x1);
        gbc.writeMem(0x7bf4, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xfa0b);
        EXPECT(gbc.pc(), 0x7bf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 036F
        gbc.setState(0xa43f, 0x54c8, 0x2c0, 0xa5ba, 0x4d23, 0xbcc3, 0x0, 0x1);
        gbc.writeMem(0xa43f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x54c8);
        EXPECT(gbc.pc(), 0xa441);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa43f), 0xcb);
        EXPECT(gbc.readMem(0xa440), 0xf4);
        // CB F4 0370
        gbc.setState(0xd988, 0x3d14, 0xe260, 0x7bd6, 0xf578, 0xddd6, 0x1, 0x1);
        gbc.writeMem(0xd988, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x3d14);
        EXPECT(gbc.pc(), 0xd98a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd988), 0xcb);
        EXPECT(gbc.readMem(0xd989), 0xf4);
        // CB F4 0371
        gbc.setState(0x73c0, 0x4b96, 0x5a00, 0xc821, 0xf948, 0xba9e, 0x0, 0x1);
        gbc.writeMem(0x73c0, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x4b96);
        EXPECT(gbc.pc(), 0x73c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0372
        gbc.setState(0x7a3d, 0x3155, 0x4980, 0x9d35, 0xa4c8, 0x8dbb, 0x0, 0x0);
        gbc.writeMem(0x7a3d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x3155);
        EXPECT(gbc.pc(), 0x7a3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0373
        gbc.setState(0xa8c8, 0x4b0f, 0x99b0, 0x6125, 0xe07b, 0x32c1, 0x0, 0x0);
        gbc.writeMem(0xa8c8, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x4b0f);
        EXPECT(gbc.pc(), 0xa8ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8c8), 0xcb);
        EXPECT(gbc.readMem(0xa8c9), 0xf4);
        // CB F4 0375
        gbc.setState(0xc470, 0xe800, 0xc2a0, 0x21f1, 0x7609, 0x55b9, 0x0, 0x0);
        gbc.writeMem(0xc470, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xe800);
        EXPECT(gbc.pc(), 0xc472);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc470), 0xcb);
        EXPECT(gbc.readMem(0xc471), 0xf4);
        // CB F4 0376
        gbc.setState(0x55e7, 0x9a3e, 0x2df0, 0xdf68, 0x42d, 0xe52e, 0x1, 0x0);
        gbc.writeMem(0x55e7, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x9a3e);
        EXPECT(gbc.pc(), 0x55e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0377
        gbc.setState(0x3ae6, 0x36cb, 0x7ac0, 0x7053, 0xb989, 0x12c0, 0x1, 0x0);
        gbc.writeMem(0x3ae6, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x36cb);
        EXPECT(gbc.pc(), 0x3ae8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0378
        gbc.setState(0xcc7e, 0xf04, 0xe620, 0x31de, 0xc3b, 0x115, 0x0, 0x0);
        gbc.writeMem(0xcc7e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xf04);
        EXPECT(gbc.pc(), 0xcc80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc7e), 0xcb);
        EXPECT(gbc.readMem(0xcc7f), 0xf4);
        // CB F4 0379
        gbc.setState(0x3b46, 0xa3f3, 0x28a0, 0x7940, 0x5988, 0x2302, 0x1, 0x1);
        gbc.writeMem(0x3b46, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xa3f3);
        EXPECT(gbc.pc(), 0x3b48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 037A
        gbc.setState(0x490f, 0x2b1d, 0xc030, 0xabec, 0xf6dd, 0x2f63, 0x0, 0x0);
        gbc.writeMem(0x490f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x2b1d);
        EXPECT(gbc.pc(), 0x4911);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 037B
        gbc.setState(0xa4ae, 0x85eb, 0xce50, 0x7f6e, 0x79b7, 0x8b61, 0x0, 0x0);
        gbc.writeMem(0xa4ae, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x85eb);
        EXPECT(gbc.pc(), 0xa4b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4ae), 0xcb);
        EXPECT(gbc.readMem(0xa4af), 0xf4);
        // CB F4 037D
        gbc.setState(0x26ef, 0x760b, 0x47f0, 0x895d, 0xcf29, 0x340c, 0x0, 0x1);
        gbc.writeMem(0x26ef, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x760b);
        EXPECT(gbc.pc(), 0x26f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 037E
        gbc.setState(0xa40f, 0xaa64, 0x5ce0, 0x1abd, 0x1144, 0x2fd1, 0x0, 0x0);
        gbc.writeMem(0xa40f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xaa64);
        EXPECT(gbc.pc(), 0xa411);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa40f), 0xcb);
        EXPECT(gbc.readMem(0xa410), 0xf4);
        // CB F4 037F
        gbc.setState(0x5c4d, 0x2b8d, 0x6ae0, 0x9e6, 0xa045, 0xf5fb, 0x0, 0x1);
        gbc.writeMem(0x5c4d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x2b8d);
        EXPECT(gbc.pc(), 0x5c4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0381
        gbc.setState(0xc93b, 0x1543, 0xc790, 0x850a, 0xfc89, 0x7b16, 0x0, 0x0);
        gbc.writeMem(0xc93b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x1543);
        EXPECT(gbc.pc(), 0xc93d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc93b), 0xcb);
        EXPECT(gbc.readMem(0xc93c), 0xf4);
        // CB F4 0382
        gbc.setState(0x8b13, 0x5ff6, 0x2400, 0x83ae, 0xd38e, 0xa012, 0x1, 0x0);
        gbc.writeMem(0x8b13, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x5ff6);
        EXPECT(gbc.pc(), 0x8b15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b13), 0xcb);
        EXPECT(gbc.readMem(0x8b14), 0xf4);
        // CB F4 0383
        gbc.setState(0xdf7, 0x9d9c, 0x6240, 0xf4f2, 0xd5fb, 0xc45f, 0x1, 0x0);
        gbc.writeMem(0xdf7, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x9d9c);
        EXPECT(gbc.pc(), 0xdf9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0384
        gbc.setState(0xe54b, 0x651b, 0xc480, 0x5e79, 0x1d07, 0x6046, 0x1, 0x0);
        gbc.writeMem(0xe54b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x651b);
        EXPECT(gbc.pc(), 0xe54d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe54b), 0xcb);
        EXPECT(gbc.readMem(0xe54c), 0xf4);
        // CB F4 0386
        gbc.setState(0xc34b, 0xf957, 0x9490, 0xb406, 0xe0ea, 0xc103, 0x0, 0x0);
        gbc.writeMem(0xc34b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xf957);
        EXPECT(gbc.pc(), 0xc34d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc34b), 0xcb);
        EXPECT(gbc.readMem(0xc34c), 0xf4);
        // CB F4 0387
        gbc.setState(0xd2df, 0xf285, 0x9420, 0xd62e, 0xa69d, 0xf576, 0x0, 0x0);
        gbc.writeMem(0xd2df, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xf285);
        EXPECT(gbc.pc(), 0xd2e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2df), 0xcb);
        EXPECT(gbc.readMem(0xd2e0), 0xf4);
        // CB F4 0388
        gbc.setState(0x40a9, 0xa2a3, 0x4a30, 0x12e1, 0xd8c2, 0xa940, 0x1, 0x1);
        gbc.writeMem(0x40a9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xa2a3);
        EXPECT(gbc.pc(), 0x40ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0389
        gbc.setState(0x2f39, 0x338b, 0xbff0, 0xc13c, 0xa4ce, 0xd2d6, 0x1, 0x1);
        gbc.writeMem(0x2f39, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x338b);
        EXPECT(gbc.pc(), 0x2f3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 038A
        gbc.setState(0x7a86, 0x5776, 0xbb50, 0x7151, 0xfff8, 0x7832, 0x1, 0x0);
        gbc.writeMem(0x7a86, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x5776);
        EXPECT(gbc.pc(), 0x7a88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 038B
        gbc.setState(0xc386, 0x26a, 0xe090, 0x12a0, 0xd228, 0x2a1d, 0x0, 0x0);
        gbc.writeMem(0xc386, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x26a);
        EXPECT(gbc.pc(), 0xc388);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc386), 0xcb);
        EXPECT(gbc.readMem(0xc387), 0xf4);
        // CB F4 038C
        gbc.setState(0xad15, 0x6f85, 0x1ef0, 0xec1c, 0xebc, 0x1315, 0x0, 0x1);
        gbc.writeMem(0xad15, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x6f85);
        EXPECT(gbc.pc(), 0xad17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad15), 0xcb);
        EXPECT(gbc.readMem(0xad16), 0xf4);
        // CB F4 038D
        gbc.setState(0x6b46, 0x52ec, 0xf6b0, 0xd8bb, 0x6035, 0x2874, 0x1, 0x0);
        gbc.writeMem(0x6b46, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x52ec);
        EXPECT(gbc.pc(), 0x6b48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 038E
        gbc.setState(0x4c5f, 0xe37d, 0x5de0, 0xd7f2, 0x86a1, 0xfd1b, 0x1, 0x1);
        gbc.writeMem(0x4c5f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xe37d);
        EXPECT(gbc.pc(), 0x4c61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 038F
        gbc.setState(0x837, 0x1215, 0x1e90, 0xb6fe, 0xe00, 0xd969, 0x1, 0x0);
        gbc.writeMem(0x837, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x1215);
        EXPECT(gbc.pc(), 0x839);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0390
        gbc.setState(0xe58d, 0x1153, 0x7a20, 0x887e, 0xc8f, 0xfe0e, 0x0, 0x1);
        gbc.writeMem(0xe58d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x1153);
        EXPECT(gbc.pc(), 0xe58f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe58d), 0xcb);
        EXPECT(gbc.readMem(0xe58e), 0xf4);
        // CB F4 0391
        gbc.setState(0x3647, 0xcf10, 0x7b80, 0x76a1, 0xca4c, 0x3424, 0x1, 0x1);
        gbc.writeMem(0x3647, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xcf10);
        EXPECT(gbc.pc(), 0x3649);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 0392
        gbc.setState(0xc3c1, 0x15d7, 0x58e0, 0x911d, 0x400d, 0x45, 0x1, 0x1);
        gbc.writeMem(0xc3c1, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x15d7);
        EXPECT(gbc.pc(), 0xc3c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3c1), 0xcb);
        EXPECT(gbc.readMem(0xc3c2), 0xf4);
        // CB F4 0393
        gbc.setState(0xea52, 0xcc31, 0x7aa0, 0x2069, 0xd7fe, 0xb4e5, 0x1, 0x1);
        gbc.writeMem(0xea52, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xcc31);
        EXPECT(gbc.pc(), 0xea54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea52), 0xcb);
        EXPECT(gbc.readMem(0xea53), 0xf4);
        // CB F4 0394
        gbc.setState(0xb08e, 0xcaf5, 0xfb0, 0xdadc, 0xd30c, 0x6906, 0x1, 0x1);
        gbc.writeMem(0xb08e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xcaf5);
        EXPECT(gbc.pc(), 0xb090);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb08e), 0xcb);
        EXPECT(gbc.readMem(0xb08f), 0xf4);
        // CB F4 0395
        gbc.setState(0x5f3d, 0xfbe1, 0x97b0, 0x58a, 0x6b32, 0x476b, 0x0, 0x1);
        gbc.writeMem(0x5f3d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xfbe1);
        EXPECT(gbc.pc(), 0x5f3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0396
        gbc.setState(0x6495, 0x2eca, 0x7390, 0x7e4c, 0x3a55, 0xe32f, 0x0, 0x1);
        gbc.writeMem(0x6495, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x2eca);
        EXPECT(gbc.pc(), 0x6497);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0397
        gbc.setState(0x454b, 0xa814, 0x9dd0, 0x4032, 0x9c85, 0x16af, 0x1, 0x1);
        gbc.writeMem(0x454b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xa814);
        EXPECT(gbc.pc(), 0x454d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 0398
        gbc.setState(0xe4f7, 0x492e, 0xaf60, 0xe7bd, 0x95b2, 0x37b9, 0x1, 0x1);
        gbc.writeMem(0xe4f7, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x492e);
        EXPECT(gbc.pc(), 0xe4f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4f7), 0xcb);
        EXPECT(gbc.readMem(0xe4f8), 0xf4);
        // CB F4 0399
        gbc.setState(0x8554, 0x6725, 0xceb0, 0xddf3, 0xa053, 0x8c11, 0x1, 0x0);
        gbc.writeMem(0x8554, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x6725);
        EXPECT(gbc.pc(), 0x8556);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8554), 0xcb);
        EXPECT(gbc.readMem(0x8555), 0xf4);
        // CB F4 039A
        gbc.setState(0xd914, 0x963d, 0x4a90, 0x9430, 0xd4df, 0xfa5b, 0x0, 0x0);
        gbc.writeMem(0xd914, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x963d);
        EXPECT(gbc.pc(), 0xd916);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd914), 0xcb);
        EXPECT(gbc.readMem(0xd915), 0xf4);
        // CB F4 039B
        gbc.setState(0xa56d, 0x2700, 0x8370, 0x523f, 0xf618, 0x32d1, 0x1, 0x0);
        gbc.writeMem(0xa56d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x2700);
        EXPECT(gbc.pc(), 0xa56f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa56d), 0xcb);
        EXPECT(gbc.readMem(0xa56e), 0xf4);
        // CB F4 039C
        gbc.setState(0x5a32, 0xe34f, 0x3410, 0x49a5, 0x9638, 0xa9c3, 0x1, 0x0);
        gbc.writeMem(0x5a32, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xe34f);
        EXPECT(gbc.pc(), 0x5a34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 039D
        gbc.setState(0x14a6, 0x37f2, 0xb970, 0x5f13, 0xcea, 0x7795, 0x0, 0x1);
        gbc.writeMem(0x14a6, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x37f2);
        EXPECT(gbc.pc(), 0x14a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 039E
        gbc.setState(0x7157, 0xa27b, 0x2ca0, 0xfbb2, 0x54e8, 0xb33b, 0x1, 0x1);
        gbc.writeMem(0x7157, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xa27b);
        EXPECT(gbc.pc(), 0x7159);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 039F
        gbc.setState(0xa305, 0xaf40, 0x8e50, 0xd18e, 0xba1b, 0x2d5a, 0x1, 0x0);
        gbc.writeMem(0xa305, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xaf40);
        EXPECT(gbc.pc(), 0xa307);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa305), 0xcb);
        EXPECT(gbc.readMem(0xa306), 0xf4);
        // CB F4 03A0
        gbc.setState(0x838c, 0x6ae7, 0xcd80, 0x8fc9, 0xe0aa, 0x7553, 0x1, 0x1);
        gbc.writeMem(0x838c, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x6ae7);
        EXPECT(gbc.pc(), 0x838e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x838c), 0xcb);
        EXPECT(gbc.readMem(0x838d), 0xf4);
        // CB F4 03A1
        gbc.setState(0x9e58, 0x65aa, 0xe930, 0x1880, 0x325e, 0xb1ed, 0x1, 0x0);
        gbc.writeMem(0x9e58, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x65aa);
        EXPECT(gbc.pc(), 0x9e5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e58), 0xcb);
        EXPECT(gbc.readMem(0x9e59), 0xf4);
        // CB F4 03A2
        gbc.setState(0x1080, 0xc8c9, 0x3cc0, 0xc2ff, 0xbdb4, 0x3deb, 0x0, 0x1);
        gbc.writeMem(0x1080, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xc8c9);
        EXPECT(gbc.pc(), 0x1082);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 03A4
        gbc.setState(0x41f4, 0xd033, 0xed0, 0xb0ca, 0xe9dc, 0xe211, 0x1, 0x0);
        gbc.writeMem(0x41f4, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xd033);
        EXPECT(gbc.pc(), 0x41f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 03A5
        gbc.setState(0x5793, 0x54fc, 0xf810, 0x4739, 0x5c0e, 0xa2ca, 0x0, 0x0);
        gbc.writeMem(0x5793, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x54fc);
        EXPECT(gbc.pc(), 0x5795);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 03A6
        gbc.setState(0x56aa, 0x1111, 0x42e0, 0x9aae, 0x73b9, 0x7399, 0x0, 0x1);
        gbc.writeMem(0x56aa, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x1111);
        EXPECT(gbc.pc(), 0x56ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 03A7
        gbc.setState(0xc8f5, 0xaf7f, 0xa7e0, 0xe2c9, 0x6fa3, 0xc173, 0x0, 0x1);
        gbc.writeMem(0xc8f5, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xaf7f);
        EXPECT(gbc.pc(), 0xc8f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8f5), 0xcb);
        EXPECT(gbc.readMem(0xc8f6), 0xf4);
        // CB F4 03A8
        gbc.setState(0xd3c6, 0xdad8, 0xc080, 0x5d33, 0x6c51, 0xfcba, 0x0, 0x0);
        gbc.writeMem(0xd3c6, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xdad8);
        EXPECT(gbc.pc(), 0xd3c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3c6), 0xcb);
        EXPECT(gbc.readMem(0xd3c7), 0xf4);
        // CB F4 03A9
        gbc.setState(0xad23, 0x9092, 0x36f0, 0xa1f7, 0x8eb4, 0xd8bc, 0x1, 0x1);
        gbc.writeMem(0xad23, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x9092);
        EXPECT(gbc.pc(), 0xad25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad23), 0xcb);
        EXPECT(gbc.readMem(0xad24), 0xf4);
        // CB F4 03AA
        gbc.setState(0xa8a4, 0x3285, 0xf370, 0xcba4, 0x8525, 0xd0bf, 0x1, 0x0);
        gbc.writeMem(0xa8a4, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x3285);
        EXPECT(gbc.pc(), 0xa8a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8a4), 0xcb);
        EXPECT(gbc.readMem(0xa8a5), 0xf4);
        // CB F4 03AB
        gbc.setState(0xc99, 0xecad, 0x6370, 0xe5da, 0x6232, 0x23d2, 0x0, 0x0);
        gbc.writeMem(0xc99, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xecad);
        EXPECT(gbc.pc(), 0xc9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 03AC
        gbc.setState(0x2d36, 0xa86d, 0x7880, 0xff52, 0x5a8, 0x62b2, 0x0, 0x0);
        gbc.writeMem(0x2d36, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xa86d);
        EXPECT(gbc.pc(), 0x2d38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 03AD
        gbc.setState(0xed69, 0x259, 0x24c0, 0x5076, 0xb582, 0xe955, 0x0, 0x0);
        gbc.writeMem(0xed69, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x259);
        EXPECT(gbc.pc(), 0xed6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed69), 0xcb);
        EXPECT(gbc.readMem(0xed6a), 0xf4);
        // CB F4 03AE
        gbc.setState(0x432b, 0x37eb, 0x3610, 0x5b57, 0x848d, 0x33ab, 0x1, 0x0);
        gbc.writeMem(0x432b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x37eb);
        EXPECT(gbc.pc(), 0x432d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 03AF
        gbc.setState(0x5408, 0xbc72, 0xd880, 0xc6d, 0x9a80, 0xcf15, 0x0, 0x1);
        gbc.writeMem(0x5408, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xbc72);
        EXPECT(gbc.pc(), 0x540a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 03B0
        gbc.setState(0x4c40, 0xd801, 0xaa80, 0x7736, 0x5b88, 0xf137, 0x0, 0x0);
        gbc.writeMem(0x4c40, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xd801);
        EXPECT(gbc.pc(), 0x4c42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 03B1
        gbc.setState(0x33bc, 0xe469, 0xbe80, 0x89a6, 0x8bf4, 0x7e23, 0x0, 0x1);
        gbc.writeMem(0x33bc, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xe469);
        EXPECT(gbc.pc(), 0x33be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 03B2
        gbc.setState(0xb2e1, 0x5d00, 0xbd0, 0xc6ec, 0xcb44, 0xb6fa, 0x0, 0x0);
        gbc.writeMem(0xb2e1, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x5d00);
        EXPECT(gbc.pc(), 0xb2e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2e1), 0xcb);
        EXPECT(gbc.readMem(0xb2e2), 0xf4);
        // CB F4 03B3
        gbc.setState(0xadf3, 0xba45, 0xaab0, 0x664d, 0xcc27, 0xdce3, 0x1, 0x0);
        gbc.writeMem(0xadf3, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xba45);
        EXPECT(gbc.pc(), 0xadf5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadf3), 0xcb);
        EXPECT(gbc.readMem(0xadf4), 0xf4);
        // CB F4 03B4
        gbc.setState(0x2880, 0x46f3, 0xfb90, 0xd6a1, 0x39ef, 0xae73, 0x1, 0x1);
        gbc.writeMem(0x2880, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x46f3);
        EXPECT(gbc.pc(), 0x2882);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 03B5
        gbc.setState(0xafbc, 0xb83b, 0xedc0, 0xa5a4, 0xfd06, 0x95cb, 0x0, 0x1);
        gbc.writeMem(0xafbc, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xb83b);
        EXPECT(gbc.pc(), 0xafbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafbc), 0xcb);
        EXPECT(gbc.readMem(0xafbd), 0xf4);
        // CB F4 03B6
        gbc.setState(0x9c83, 0x5d41, 0x24d0, 0x9843, 0x1c43, 0x799f, 0x1, 0x0);
        gbc.writeMem(0x9c83, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x5d41);
        EXPECT(gbc.pc(), 0x9c85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c83), 0xcb);
        EXPECT(gbc.readMem(0x9c84), 0xf4);
        // CB F4 03B7
        gbc.setState(0xcaf4, 0x1361, 0x9300, 0x1586, 0xb077, 0x4514, 0x1, 0x1);
        gbc.writeMem(0xcaf4, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x1361);
        EXPECT(gbc.pc(), 0xcaf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcaf4), 0xcb);
        EXPECT(gbc.readMem(0xcaf5), 0xf4);
        // CB F4 03B8
        gbc.setState(0x6778, 0x84ed, 0x4af0, 0x950d, 0xdb73, 0xf949, 0x1, 0x0);
        gbc.writeMem(0x6778, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x84ed);
        EXPECT(gbc.pc(), 0x677a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 03B9
        gbc.setState(0x992a, 0xd29e, 0xdec0, 0x1f0d, 0x949b, 0xef02, 0x0, 0x0);
        gbc.writeMem(0x992a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xd29e);
        EXPECT(gbc.pc(), 0x992c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x992a), 0xcb);
        EXPECT(gbc.readMem(0x992b), 0xf4);
        // CB F4 03BB
        gbc.setState(0x57ff, 0x6df9, 0x3770, 0x3a12, 0x6504, 0x4dd3, 0x0, 0x0);
        gbc.writeMem(0x57ff, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x6df9);
        EXPECT(gbc.pc(), 0x5801);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 03BC
        gbc.setState(0xe467, 0xf1d5, 0xd20, 0x2aa9, 0x946f, 0x46fa, 0x0, 0x1);
        gbc.writeMem(0xe467, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xf1d5);
        EXPECT(gbc.pc(), 0xe469);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe467), 0xcb);
        EXPECT(gbc.readMem(0xe468), 0xf4);
        // CB F4 03BD
        gbc.setState(0xe8f6, 0xb48b, 0x6360, 0x9df9, 0x40f3, 0x18c9, 0x0, 0x0);
        gbc.writeMem(0xe8f6, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xb48b);
        EXPECT(gbc.pc(), 0xe8f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8f6), 0xcb);
        EXPECT(gbc.readMem(0xe8f7), 0xf4);
        // CB F4 03BE
        gbc.setState(0x3e33, 0xc3ad, 0x94a0, 0x451e, 0x2baa, 0x1781, 0x0, 0x1);
        gbc.writeMem(0x3e33, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xc3ad);
        EXPECT(gbc.pc(), 0x3e35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 03BF
        gbc.setState(0xa9b9, 0xd9c3, 0xeda0, 0x574b, 0x28cc, 0x613d, 0x0, 0x0);
        gbc.writeMem(0xa9b9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xd9c3);
        EXPECT(gbc.pc(), 0xa9bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9b9), 0xcb);
        EXPECT(gbc.readMem(0xa9ba), 0xf4);
        // CB F4 03C1
        gbc.setState(0x85f3, 0x6e44, 0xc1a0, 0xbaab, 0xad12, 0xf415, 0x1, 0x0);
        gbc.writeMem(0x85f3, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x6e44);
        EXPECT(gbc.pc(), 0x85f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85f3), 0xcb);
        EXPECT(gbc.readMem(0x85f4), 0xf4);
        // CB F4 03C2
        gbc.setState(0xd63d, 0x3a52, 0x4030, 0x81f8, 0x7f8d, 0xb904, 0x0, 0x0);
        gbc.writeMem(0xd63d, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x3a52);
        EXPECT(gbc.pc(), 0xd63f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd63d), 0xcb);
        EXPECT(gbc.readMem(0xd63e), 0xf4);
        // CB F4 03C3
        gbc.setState(0xd7e, 0x88aa, 0x67d0, 0xfcc5, 0x2c55, 0x90d4, 0x0, 0x0);
        gbc.writeMem(0xd7e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x88aa);
        EXPECT(gbc.pc(), 0xd80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 03C4
        gbc.setState(0xa4a5, 0x52d3, 0x6000, 0x42b8, 0x50c0, 0x96b9, 0x1, 0x1);
        gbc.writeMem(0xa4a5, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x52d3);
        EXPECT(gbc.pc(), 0xa4a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4a5), 0xcb);
        EXPECT(gbc.readMem(0xa4a6), 0xf4);
        // CB F4 03C5
        gbc.setState(0x19f5, 0x6298, 0x4dc0, 0xba66, 0x4f1f, 0xc696, 0x0, 0x1);
        gbc.writeMem(0x19f5, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x6298);
        EXPECT(gbc.pc(), 0x19f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 03C6
        gbc.setState(0xcc36, 0x8e5f, 0x3be0, 0x9a34, 0x27cd, 0x48a3, 0x1, 0x1);
        gbc.writeMem(0xcc36, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x8e5f);
        EXPECT(gbc.pc(), 0xcc38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc36), 0xcb);
        EXPECT(gbc.readMem(0xcc37), 0xf4);
        // CB F4 03C7
        gbc.setState(0xdbef, 0x2c8d, 0x5dc0, 0xdc8e, 0x82e5, 0xd5de, 0x0, 0x1);
        gbc.writeMem(0xdbef, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x2c8d);
        EXPECT(gbc.pc(), 0xdbf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbef), 0xcb);
        EXPECT(gbc.readMem(0xdbf0), 0xf4);
        // CB F4 03C8
        gbc.setState(0xef36, 0x906b, 0xcd60, 0x542f, 0xc66e, 0x5ac4, 0x1, 0x1);
        gbc.writeMem(0xef36, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x906b);
        EXPECT(gbc.pc(), 0xef38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef36), 0xcb);
        EXPECT(gbc.readMem(0xef37), 0xf4);
        // CB F4 03C9
        gbc.setState(0x407, 0x3c6d, 0x6580, 0x2b12, 0xcb43, 0x748c, 0x1, 0x1);
        gbc.writeMem(0x407, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x3c6d);
        EXPECT(gbc.pc(), 0x409);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 03CA
        gbc.setState(0xec9a, 0x83a4, 0xb0a0, 0xed4f, 0x42dd, 0x6859, 0x1, 0x0);
        gbc.writeMem(0xec9a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x83a4);
        EXPECT(gbc.pc(), 0xec9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec9a), 0xcb);
        EXPECT(gbc.readMem(0xec9b), 0xf4);
        // CB F4 03CB
        gbc.setState(0x782b, 0xd23f, 0x23f0, 0x3033, 0xf87, 0x2c4f, 0x1, 0x1);
        gbc.writeMem(0x782b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xd23f);
        EXPECT(gbc.pc(), 0x782d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 03CC
        gbc.setState(0x6a37, 0x48ac, 0xe850, 0x7685, 0xd16, 0xe998, 0x0, 0x1);
        gbc.writeMem(0x6a37, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x48ac);
        EXPECT(gbc.pc(), 0x6a39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 03CD
        gbc.setState(0x7590, 0xdcce, 0xe300, 0x583f, 0x582a, 0xa24d, 0x0, 0x0);
        gbc.writeMem(0x7590, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xdcce);
        EXPECT(gbc.pc(), 0x7592);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 03CE
        gbc.setState(0xb08a, 0x188a, 0x7c40, 0x786b, 0x15da, 0x6c24, 0x0, 0x0);
        gbc.writeMem(0xb08a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x188a);
        EXPECT(gbc.pc(), 0xb08c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb08a), 0xcb);
        EXPECT(gbc.readMem(0xb08b), 0xf4);
        // CB F4 03CF
        gbc.setState(0x6b5e, 0x1e7a, 0xe590, 0xeac6, 0x7a2a, 0xeb79, 0x1, 0x0);
        gbc.writeMem(0x6b5e, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x1e7a);
        EXPECT(gbc.pc(), 0x6b60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 03D0
        gbc.setState(0xa3c1, 0xa4e5, 0x3dd0, 0xe9c, 0x506f, 0xdeba, 0x0, 0x1);
        gbc.writeMem(0xa3c1, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xa4e5);
        EXPECT(gbc.pc(), 0xa3c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3c1), 0xcb);
        EXPECT(gbc.readMem(0xa3c2), 0xf4);
        // CB F4 03D2
        gbc.setState(0x595b, 0xb6bc, 0x2600, 0xdf66, 0x3179, 0x31c2, 0x1, 0x0);
        gbc.writeMem(0x595b, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xb6bc);
        EXPECT(gbc.pc(), 0x595d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 03D3
        gbc.setState(0xc8c3, 0x68a0, 0x6cc0, 0xc327, 0xaa2a, 0x3bb4, 0x0, 0x1);
        gbc.writeMem(0xc8c3, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x68a0);
        EXPECT(gbc.pc(), 0xc8c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8c3), 0xcb);
        EXPECT(gbc.readMem(0xc8c4), 0xf4);
        // CB F4 03D4
        gbc.setState(0x26b1, 0x28b6, 0x34b0, 0x7dc9, 0xb76e, 0xe418, 0x0, 0x0);
        gbc.writeMem(0x26b1, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x28b6);
        EXPECT(gbc.pc(), 0x26b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 03D5
        gbc.setState(0x976a, 0x7e1f, 0xd0, 0xd6dc, 0x149b, 0x42cc, 0x0, 0x0);
        gbc.writeMem(0x976a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x7e1f);
        EXPECT(gbc.pc(), 0x976c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x976a), 0xcb);
        EXPECT(gbc.readMem(0x976b), 0xf4);
        // CB F4 03D6
        gbc.setState(0x6df6, 0xb5c2, 0x2da0, 0x6189, 0xbddc, 0xf458, 0x1, 0x1);
        gbc.writeMem(0x6df6, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xb5c2);
        EXPECT(gbc.pc(), 0x6df8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F4 03D7
        gbc.setState(0xc75a, 0xd16f, 0x8660, 0xa97e, 0xc4e4, 0xa26c, 0x1, 0x1);
        gbc.writeMem(0xc75a, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xd16f);
        EXPECT(gbc.pc(), 0xc75c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc75a), 0xcb);
        EXPECT(gbc.readMem(0xc75b), 0xf4);
        // CB F4 03D8
        gbc.setState(0x4be0, 0x1951, 0x3180, 0x251a, 0x892d, 0x2a17, 0x0, 0x0);
        gbc.writeMem(0x4be0, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x1951);
        EXPECT(gbc.pc(), 0x4be2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 03D9
        gbc.setState(0x6e84, 0x9fab, 0x6a70, 0xa205, 0xc5d9, 0x1c0, 0x1, 0x1);
        gbc.writeMem(0x6e84, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x9fab);
        EXPECT(gbc.pc(), 0x6e86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 03DA
        gbc.setState(0x889f, 0xa9e8, 0x6a50, 0xf579, 0x4a72, 0x1577, 0x0, 0x1);
        gbc.writeMem(0x889f, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xa9e8);
        EXPECT(gbc.pc(), 0x88a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x889f), 0xcb);
        EXPECT(gbc.readMem(0x88a0), 0xf4);
        // CB F4 03DB
        gbc.setState(0x1a24, 0x2688, 0x21f0, 0xaa7e, 0xcdb5, 0xa2e5, 0x0, 0x0);
        gbc.writeMem(0x1a24, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x2688);
        EXPECT(gbc.pc(), 0x1a26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F4 03DC
        gbc.setState(0xbe73, 0xcf28, 0x7c70, 0x66f3, 0x17db, 0x4c05, 0x0, 0x1);
        gbc.writeMem(0xbe73, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xcf28);
        EXPECT(gbc.pc(), 0xbe75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe73), 0xcb);
        EXPECT(gbc.readMem(0xbe74), 0xf4);
        // CB F4 03DD
        gbc.setState(0x4c44, 0xf7ce, 0x1010, 0x73e, 0x67f9, 0xb28f, 0x0, 0x1);
        gbc.writeMem(0x4c44, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xf7ce);
        EXPECT(gbc.pc(), 0x4c46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 03DE
        gbc.setState(0xb7f8, 0xc5ea, 0xd210, 0x1279, 0x78a7, 0x65b7, 0x0, 0x1);
        gbc.writeMem(0xb7f8, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xc5ea);
        EXPECT(gbc.pc(), 0xb7fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7f8), 0xcb);
        EXPECT(gbc.readMem(0xb7f9), 0xf4);
        // CB F4 03E0
        gbc.setState(0xa5a3, 0x3e9, 0x7ac0, 0x8540, 0x8bdb, 0x219f, 0x1, 0x1);
        gbc.writeMem(0xa5a3, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x3e9);
        EXPECT(gbc.pc(), 0xa5a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5a3), 0xcb);
        EXPECT(gbc.readMem(0xa5a4), 0xf4);
        // CB F4 03E1
        gbc.setState(0x7fce, 0x9687, 0xca40, 0x8b63, 0x5170, 0xb098, 0x0, 0x0);
        gbc.writeMem(0x7fce, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x9687);
        EXPECT(gbc.pc(), 0x7fd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F4 03E2
        gbc.setState(0x5033, 0x87d6, 0xf810, 0x31c9, 0xaf3d, 0x2b25, 0x1, 0x1);
        gbc.writeMem(0x5033, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x87d6);
        EXPECT(gbc.pc(), 0x5035);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 03E3
        gbc.setState(0x5db9, 0xe25d, 0x75d0, 0xf38c, 0x68f1, 0x9cd3, 0x1, 0x0);
        gbc.writeMem(0x5db9, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xe25d);
        EXPECT(gbc.pc(), 0x5dbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F4 03E4
        gbc.setState(0xca22, 0x86ed, 0xfbd0, 0x87e6, 0x9474, 0xeba8, 0x1, 0x0);
        gbc.writeMem(0xca22, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x86ed);
        EXPECT(gbc.pc(), 0xca24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca22), 0xcb);
        EXPECT(gbc.readMem(0xca23), 0xf4);
        // CB F4 03E5
        gbc.setState(0x92dc, 0xc6ba, 0xaa60, 0xa6f1, 0xddfa, 0xfa8b, 0x1, 0x0);
        gbc.writeMem(0x92dc, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xc6ba);
        EXPECT(gbc.pc(), 0x92de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92dc), 0xcb);
        EXPECT(gbc.readMem(0x92dd), 0xf4);
        // CB F4 03E7
        gbc.setState(0x8df3, 0x55ff, 0x14d0, 0xb1b5, 0x59f8, 0x7a5c, 0x0, 0x1);
        gbc.writeMem(0x8df3, { 0xcb, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x55ff);
        EXPECT(gbc.pc(), 0x8df5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8df3), 0xcb);
        EXPECT(gbc.readMem(0x8df4), 0xf4);
    }
}
#endif
