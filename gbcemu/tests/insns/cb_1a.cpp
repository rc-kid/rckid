#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_cb_1a)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_cb_1a) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 1A 0000
        gbc.setState(0xf16, 0xcf42, 0x2140, 0x4251, 0x192b, 0xb803, 0x1, 0x0);
        gbc.writeMem(0xf16, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xcf42);
        EXPECT(gbc.pc(), 0xf18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0001
        gbc.setState(0xee49, 0x2d1b, 0xbfc0, 0x1378, 0xd438, 0xb3e6, 0x1, 0x1);
        gbc.writeMem(0xee49, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x2d1b);
        EXPECT(gbc.pc(), 0xee4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee49), 0xcb);
        EXPECT(gbc.readMem(0xee4a), 0x1a);
        // CB 1A 0002
        gbc.setState(0xd232, 0x9713, 0xc6b0, 0x9fb7, 0x6158, 0x1be6, 0x0, 0x1);
        gbc.writeMem(0xd232, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x9713);
        EXPECT(gbc.pc(), 0xd234);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd232), 0xcb);
        EXPECT(gbc.readMem(0xd233), 0x1a);
        // CB 1A 0003
        gbc.setState(0x2e48, 0x2e, 0x3810, 0x97e6, 0x753, 0x8030, 0x0, 0x0);
        gbc.writeMem(0x2e48, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x2e);
        EXPECT(gbc.pc(), 0x2e4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0004
        gbc.setState(0x274b, 0x292f, 0xe840, 0xa95c, 0x498d, 0xf7fb, 0x0, 0x0);
        gbc.writeMem(0x274b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x292f);
        EXPECT(gbc.pc(), 0x274d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0005
        gbc.setState(0x8a3c, 0x3417, 0xf970, 0x63c8, 0xac28, 0x9bdb, 0x0, 0x0);
        gbc.writeMem(0x8a3c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x3417);
        EXPECT(gbc.pc(), 0x8a3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a3c), 0xcb);
        EXPECT(gbc.readMem(0x8a3d), 0x1a);
        // CB 1A 0006
        gbc.setState(0x6929, 0xed53, 0x3ad0, 0x5a28, 0x7303, 0x4910, 0x0, 0x1);
        gbc.writeMem(0x6929, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xed53);
        EXPECT(gbc.pc(), 0x692b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0007
        gbc.setState(0xd50b, 0x2148, 0x1d60, 0x4c33, 0x3727, 0x9c46, 0x1, 0x0);
        gbc.writeMem(0xd50b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x2148);
        EXPECT(gbc.pc(), 0xd50d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd50b), 0xcb);
        EXPECT(gbc.readMem(0xd50c), 0x1a);
        // CB 1A 0008
        gbc.setState(0x4103, 0x77fc, 0x3ae0, 0xff8, 0xc8ea, 0x85b1, 0x1, 0x0);
        gbc.writeMem(0x4103, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x77fc);
        EXPECT(gbc.pc(), 0x4105);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0009
        gbc.setState(0x9a13, 0xeffd, 0xab50, 0xe7d, 0xd980, 0x2b4c, 0x0, 0x1);
        gbc.writeMem(0x9a13, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xeffd);
        EXPECT(gbc.pc(), 0x9a15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a13), 0xcb);
        EXPECT(gbc.readMem(0x9a14), 0x1a);
        // CB 1A 000A
        gbc.setState(0x6e3d, 0xffdd, 0xc090, 0xb887, 0x756, 0x77a2, 0x0, 0x0);
        gbc.writeMem(0x6e3d, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xffdd);
        EXPECT(gbc.pc(), 0x6e3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 000B
        gbc.setState(0x3505, 0xc75e, 0x10f0, 0x5215, 0x2344, 0xea0b, 0x1, 0x1);
        gbc.writeMem(0x3505, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xc75e);
        EXPECT(gbc.pc(), 0x3507);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 000C
        gbc.setState(0x6ef, 0x70, 0x1260, 0xd72b, 0xc22e, 0xa211, 0x1, 0x1);
        gbc.writeMem(0x6ef, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x70);
        EXPECT(gbc.pc(), 0x6f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 000D
        gbc.setState(0xaafd, 0x6c44, 0xb310, 0x6315, 0xd037, 0x42c9, 0x0, 0x1);
        gbc.writeMem(0xaafd, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x6c44);
        EXPECT(gbc.pc(), 0xaaff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaafd), 0xcb);
        EXPECT(gbc.readMem(0xaafe), 0x1a);
        // CB 1A 000E
        gbc.setState(0xa21d, 0xd4e5, 0xa390, 0x76, 0x2bd2, 0x6ab8, 0x1, 0x1);
        gbc.writeMem(0xa21d, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xd4e5);
        EXPECT(gbc.pc(), 0xa21f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa21d), 0xcb);
        EXPECT(gbc.readMem(0xa21e), 0x1a);
        // CB 1A 000F
        gbc.setState(0x4e74, 0x8056, 0xf2d0, 0x4c7d, 0xd2a2, 0x3cff, 0x0, 0x0);
        gbc.writeMem(0x4e74, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x8056);
        EXPECT(gbc.pc(), 0x4e76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0010
        gbc.setState(0x362e, 0x72cb, 0x5040, 0x1e5c, 0x91a6, 0x5fe7, 0x0, 0x1);
        gbc.writeMem(0x362e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x72cb);
        EXPECT(gbc.pc(), 0x3630);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0011
        gbc.setState(0x450b, 0x7a54, 0xfc30, 0x7c53, 0xfea3, 0x260e, 0x1, 0x0);
        gbc.writeMem(0x450b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x7a54);
        EXPECT(gbc.pc(), 0x450d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0012
        gbc.setState(0x2edc, 0xb7d0, 0x74c0, 0xbca0, 0xdb58, 0xe3d, 0x0, 0x0);
        gbc.writeMem(0x2edc, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xb7d0);
        EXPECT(gbc.pc(), 0x2ede);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0014
        gbc.setState(0x9271, 0xcabe, 0x29e0, 0x8feb, 0x59cd, 0x97ba, 0x1, 0x0);
        gbc.writeMem(0x9271, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xcabe);
        EXPECT(gbc.pc(), 0x9273);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9271), 0xcb);
        EXPECT(gbc.readMem(0x9272), 0x1a);
        // CB 1A 0015
        gbc.setState(0xb014, 0x2718, 0x33c0, 0x8976, 0x4e6c, 0xc1b4, 0x1, 0x0);
        gbc.writeMem(0xb014, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x2718);
        EXPECT(gbc.pc(), 0xb016);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb014), 0xcb);
        EXPECT(gbc.readMem(0xb015), 0x1a);
        // CB 1A 0016
        gbc.setState(0xe5bb, 0x2344, 0x2950, 0x9715, 0x6097, 0xe666, 0x0, 0x0);
        gbc.writeMem(0xe5bb, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x2344);
        EXPECT(gbc.pc(), 0xe5bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5bb), 0xcb);
        EXPECT(gbc.readMem(0xe5bc), 0x1a);
        // CB 1A 0017
        gbc.setState(0xc99f, 0x70ef, 0xbc0, 0x551c, 0x241, 0xd932, 0x1, 0x0);
        gbc.writeMem(0xc99f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x70ef);
        EXPECT(gbc.pc(), 0xc9a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc99f), 0xcb);
        EXPECT(gbc.readMem(0xc9a0), 0x1a);
        // CB 1A 0018
        gbc.setState(0xea3a, 0x5818, 0xfd00, 0xa9d1, 0x7aa2, 0x7d99, 0x1, 0x0);
        gbc.writeMem(0xea3a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x5818);
        EXPECT(gbc.pc(), 0xea3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea3a), 0xcb);
        EXPECT(gbc.readMem(0xea3b), 0x1a);
        // CB 1A 0019
        gbc.setState(0x61f5, 0x49f, 0x5310, 0x9a75, 0x37dd, 0xafd1, 0x1, 0x0);
        gbc.writeMem(0x61f5, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x49f);
        EXPECT(gbc.pc(), 0x61f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 001A
        gbc.setState(0xeabe, 0x8f74, 0x9d80, 0x9cd7, 0x707c, 0x947a, 0x1, 0x1);
        gbc.writeMem(0xeabe, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x8f74);
        EXPECT(gbc.pc(), 0xeac0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeabe), 0xcb);
        EXPECT(gbc.readMem(0xeabf), 0x1a);
        // CB 1A 001B
        gbc.setState(0x3961, 0x86ef, 0x9830, 0xa66a, 0xab39, 0xcbf3, 0x1, 0x0);
        gbc.writeMem(0x3961, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x86ef);
        EXPECT(gbc.pc(), 0x3963);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 001C
        gbc.setState(0x6f, 0x8cc3, 0xa2d0, 0xfcea, 0xd95b, 0x3c61, 0x0, 0x1);
        gbc.writeMem(0x6f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x8cc3);
        EXPECT(gbc.pc(), 0x71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 001D
        gbc.setState(0xf5b, 0xda3e, 0x5f00, 0xd53c, 0x9717, 0x8fc5, 0x1, 0x1);
        gbc.writeMem(0xf5b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xda3e);
        EXPECT(gbc.pc(), 0xf5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 001E
        gbc.setState(0x227, 0xb0c8, 0xf060, 0x5962, 0x75a1, 0xa018, 0x0, 0x0);
        gbc.writeMem(0x227, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xb0c8);
        EXPECT(gbc.pc(), 0x229);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 001F
        gbc.setState(0x6787, 0xd26a, 0xd530, 0xafc6, 0x82b2, 0xbdad, 0x1, 0x0);
        gbc.writeMem(0x6787, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xd26a);
        EXPECT(gbc.pc(), 0x6789);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0020
        gbc.setState(0xcbe8, 0xbac0, 0xe8e0, 0x6f2c, 0xbb48, 0xb966, 0x0, 0x0);
        gbc.writeMem(0xcbe8, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xbac0);
        EXPECT(gbc.pc(), 0xcbea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbe8), 0xcb);
        EXPECT(gbc.readMem(0xcbe9), 0x1a);
        // CB 1A 0021
        gbc.setState(0xa1f, 0x430f, 0x27a0, 0x17d6, 0x3bc6, 0x6469, 0x0, 0x1);
        gbc.writeMem(0xa1f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x430f);
        EXPECT(gbc.pc(), 0xa21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0022
        gbc.setState(0x5d4f, 0x72b8, 0x48e0, 0x2387, 0xc2c5, 0xbd75, 0x0, 0x1);
        gbc.writeMem(0x5d4f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x72b8);
        EXPECT(gbc.pc(), 0x5d51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0023
        gbc.setState(0x13e1, 0x8384, 0xee20, 0xf393, 0x30f1, 0x9b75, 0x1, 0x1);
        gbc.writeMem(0x13e1, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x8384);
        EXPECT(gbc.pc(), 0x13e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0024
        gbc.setState(0x35d5, 0x9745, 0xeaa0, 0xc344, 0xf02, 0xe61c, 0x0, 0x0);
        gbc.writeMem(0x35d5, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x9745);
        EXPECT(gbc.pc(), 0x35d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0025
        gbc.setState(0x392c, 0x4359, 0x6390, 0x4015, 0x2230, 0xf6ee, 0x0, 0x1);
        gbc.writeMem(0x392c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x4359);
        EXPECT(gbc.pc(), 0x392e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0026
        gbc.setState(0x2b0f, 0x2370, 0xbd60, 0x930a, 0x7bfc, 0xb540, 0x0, 0x0);
        gbc.writeMem(0x2b0f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x2370);
        EXPECT(gbc.pc(), 0x2b11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0027
        gbc.setState(0xc0ac, 0x42ad, 0x5f20, 0x7828, 0x464d, 0x2de6, 0x1, 0x1);
        gbc.writeMem(0xc0ac, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x42ad);
        EXPECT(gbc.pc(), 0xc0ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0ac), 0xcb);
        EXPECT(gbc.readMem(0xc0ad), 0x1a);
        // CB 1A 0028
        gbc.setState(0xc3d, 0xa5eb, 0xe490, 0x3a7c, 0x7a5b, 0x13fc, 0x0, 0x1);
        gbc.writeMem(0xc3d, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xa5eb);
        EXPECT(gbc.pc(), 0xc3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0029
        gbc.setState(0x67a, 0x64fa, 0x83a0, 0x75e4, 0xd682, 0x5f05, 0x0, 0x0);
        gbc.writeMem(0x67a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x64fa);
        EXPECT(gbc.pc(), 0x67c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 002A
        gbc.setState(0x4612, 0xe728, 0x1ca0, 0xbaed, 0x1898, 0xeeb, 0x0, 0x1);
        gbc.writeMem(0x4612, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xe728);
        EXPECT(gbc.pc(), 0x4614);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 002B
        gbc.setState(0x143c, 0x420a, 0x5dd0, 0x9ee2, 0xcbb1, 0xca46, 0x1, 0x0);
        gbc.writeMem(0x143c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x420a);
        EXPECT(gbc.pc(), 0x143e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 002C
        gbc.setState(0xac9e, 0xf1f0, 0xdaf0, 0x7339, 0xa12c, 0xf7d, 0x1, 0x1);
        gbc.writeMem(0xac9e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xf1f0);
        EXPECT(gbc.pc(), 0xaca0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac9e), 0xcb);
        EXPECT(gbc.readMem(0xac9f), 0x1a);
        // CB 1A 002D
        gbc.setState(0xa7de, 0xdbf0, 0xfe40, 0xddce, 0x3335, 0x6b, 0x0, 0x0);
        gbc.writeMem(0xa7de, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xdbf0);
        EXPECT(gbc.pc(), 0xa7e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7de), 0xcb);
        EXPECT(gbc.readMem(0xa7df), 0x1a);
        // CB 1A 002E
        gbc.setState(0x6305, 0xe461, 0x6770, 0xecb7, 0x2649, 0x948f, 0x0, 0x1);
        gbc.writeMem(0x6305, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xe461);
        EXPECT(gbc.pc(), 0x6307);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 002F
        gbc.setState(0xaf07, 0xcca, 0x9360, 0x2de6, 0x3fdd, 0xc624, 0x0, 0x0);
        gbc.writeMem(0xaf07, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xcca);
        EXPECT(gbc.pc(), 0xaf09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf07), 0xcb);
        EXPECT(gbc.readMem(0xaf08), 0x1a);
        // CB 1A 0030
        gbc.setState(0x53cd, 0xd479, 0xab50, 0xfafc, 0xcb53, 0x28c9, 0x0, 0x1);
        gbc.writeMem(0x53cd, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xd479);
        EXPECT(gbc.pc(), 0x53cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0031
        gbc.setState(0x16ee, 0x304c, 0xd680, 0xea32, 0xbc5e, 0x110a, 0x0, 0x1);
        gbc.writeMem(0x16ee, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x304c);
        EXPECT(gbc.pc(), 0x16f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0032
        gbc.setState(0xbbd2, 0xfb9e, 0x5990, 0x437b, 0xdd19, 0xa944, 0x1, 0x1);
        gbc.writeMem(0xbbd2, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xfb9e);
        EXPECT(gbc.pc(), 0xbbd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbd2), 0xcb);
        EXPECT(gbc.readMem(0xbbd3), 0x1a);
        // CB 1A 0033
        gbc.setState(0x9c6b, 0x9950, 0xca40, 0x90c1, 0xcb64, 0x4064, 0x0, 0x0);
        gbc.writeMem(0x9c6b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x9950);
        EXPECT(gbc.pc(), 0x9c6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c6b), 0xcb);
        EXPECT(gbc.readMem(0x9c6c), 0x1a);
        // CB 1A 0034
        gbc.setState(0xd18, 0xa712, 0xa110, 0x7234, 0xc9da, 0x84e, 0x0, 0x1);
        gbc.writeMem(0xd18, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xa712);
        EXPECT(gbc.pc(), 0xd1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0035
        gbc.setState(0x7c3d, 0x4de7, 0xdfa0, 0x9634, 0xf881, 0xde7f, 0x0, 0x1);
        gbc.writeMem(0x7c3d, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x4de7);
        EXPECT(gbc.pc(), 0x7c3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0036
        gbc.setState(0xaafd, 0x1050, 0x41f0, 0x279b, 0x61a6, 0x9751, 0x0, 0x0);
        gbc.writeMem(0xaafd, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x1050);
        EXPECT(gbc.pc(), 0xaaff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaafd), 0xcb);
        EXPECT(gbc.readMem(0xaafe), 0x1a);
        // CB 1A 0037
        gbc.setState(0x174, 0x2654, 0x1e0, 0x4c1, 0x59ac, 0x68b0, 0x0, 0x0);
        gbc.writeMem(0x174, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x2654);
        EXPECT(gbc.pc(), 0x176);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0038
        gbc.setState(0x957d, 0xe5cf, 0x18e0, 0x6263, 0xfb90, 0x7283, 0x0, 0x1);
        gbc.writeMem(0x957d, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xe5cf);
        EXPECT(gbc.pc(), 0x957f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x957d), 0xcb);
        EXPECT(gbc.readMem(0x957e), 0x1a);
        // CB 1A 0039
        gbc.setState(0xed3e, 0x6fe9, 0xa700, 0x6c83, 0x1fca, 0x6056, 0x1, 0x1);
        gbc.writeMem(0xed3e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x6fe9);
        EXPECT(gbc.pc(), 0xed40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed3e), 0xcb);
        EXPECT(gbc.readMem(0xed3f), 0x1a);
        // CB 1A 003A
        gbc.setState(0x7a1e, 0x7132, 0x8010, 0x89b1, 0x2b6c, 0x835, 0x0, 0x1);
        gbc.writeMem(0x7a1e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x7132);
        EXPECT(gbc.pc(), 0x7a20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 003B
        gbc.setState(0xbac7, 0x5301, 0x98f0, 0xfc27, 0x3381, 0x14d9, 0x1, 0x0);
        gbc.writeMem(0xbac7, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x5301);
        EXPECT(gbc.pc(), 0xbac9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbac7), 0xcb);
        EXPECT(gbc.readMem(0xbac8), 0x1a);
        // CB 1A 003C
        gbc.setState(0x507c, 0xa0c6, 0xacf0, 0xd5dd, 0x1a8c, 0x3079, 0x1, 0x0);
        gbc.writeMem(0x507c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xa0c6);
        EXPECT(gbc.pc(), 0x507e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 003D
        gbc.setState(0x6c0c, 0x7451, 0x43d0, 0x9d9e, 0x2864, 0x544e, 0x0, 0x0);
        gbc.writeMem(0x6c0c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x7451);
        EXPECT(gbc.pc(), 0x6c0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 003E
        gbc.setState(0x21ae, 0x5947, 0x6a10, 0xe326, 0x90ce, 0xe2e1, 0x0, 0x0);
        gbc.writeMem(0x21ae, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x5947);
        EXPECT(gbc.pc(), 0x21b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 003F
        gbc.setState(0x68e8, 0xb9fd, 0x6630, 0xbb88, 0x5d83, 0x4242, 0x1, 0x1);
        gbc.writeMem(0x68e8, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xb9fd);
        EXPECT(gbc.pc(), 0x68ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0040
        gbc.setState(0x7e7a, 0x6e7d, 0xe220, 0x71b6, 0x8345, 0xf170, 0x0, 0x0);
        gbc.writeMem(0x7e7a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x6e7d);
        EXPECT(gbc.pc(), 0x7e7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0041
        gbc.setState(0x8129, 0x4ade, 0xb910, 0xc98a, 0xfcca, 0xfdbf, 0x1, 0x0);
        gbc.writeMem(0x8129, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x4ade);
        EXPECT(gbc.pc(), 0x812b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8129), 0xcb);
        EXPECT(gbc.readMem(0x812a), 0x1a);
        // CB 1A 0042
        gbc.setState(0x728a, 0xec73, 0x92c0, 0xa272, 0xc981, 0x35bd, 0x1, 0x1);
        gbc.writeMem(0x728a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xec73);
        EXPECT(gbc.pc(), 0x728c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0043
        gbc.setState(0x399f, 0x3b44, 0x6e30, 0xd510, 0x4910, 0xec1b, 0x1, 0x1);
        gbc.writeMem(0x399f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x3b44);
        EXPECT(gbc.pc(), 0x39a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0044
        gbc.setState(0x9773, 0xc2b3, 0x8b20, 0xe0c4, 0xa62e, 0x3794, 0x1, 0x1);
        gbc.writeMem(0x9773, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xc2b3);
        EXPECT(gbc.pc(), 0x9775);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9773), 0xcb);
        EXPECT(gbc.readMem(0x9774), 0x1a);
        // CB 1A 0045
        gbc.setState(0x77a1, 0xc80d, 0x6fe0, 0x724a, 0xd2aa, 0xb8d7, 0x1, 0x0);
        gbc.writeMem(0x77a1, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xc80d);
        EXPECT(gbc.pc(), 0x77a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0046
        gbc.setState(0xd880, 0x3ab2, 0x6ec0, 0x3e92, 0xccd3, 0x9889, 0x0, 0x0);
        gbc.writeMem(0xd880, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x3ab2);
        EXPECT(gbc.pc(), 0xd882);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd880), 0xcb);
        EXPECT(gbc.readMem(0xd881), 0x1a);
        // CB 1A 0047
        gbc.setState(0x3912, 0xaa3f, 0x3d60, 0x8a6c, 0xf5d3, 0x70ec, 0x0, 0x1);
        gbc.writeMem(0x3912, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xaa3f);
        EXPECT(gbc.pc(), 0x3914);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0048
        gbc.setState(0x9355, 0x7f96, 0x85b0, 0x6b55, 0xf27e, 0xfaa6, 0x1, 0x0);
        gbc.writeMem(0x9355, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x7f96);
        EXPECT(gbc.pc(), 0x9357);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9355), 0xcb);
        EXPECT(gbc.readMem(0x9356), 0x1a);
        // CB 1A 0049
        gbc.setState(0x44cc, 0x89d2, 0x9410, 0xdb70, 0x95b1, 0x2785, 0x0, 0x1);
        gbc.writeMem(0x44cc, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x89d2);
        EXPECT(gbc.pc(), 0x44ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 004A
        gbc.setState(0xeeb2, 0x7eaa, 0xaac0, 0xce46, 0x5e2b, 0x10aa, 0x1, 0x0);
        gbc.writeMem(0xeeb2, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x7eaa);
        EXPECT(gbc.pc(), 0xeeb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeeb2), 0xcb);
        EXPECT(gbc.readMem(0xeeb3), 0x1a);
        // CB 1A 004C
        gbc.setState(0x1d80, 0x8c04, 0x3750, 0x1e66, 0x1347, 0xaee6, 0x1, 0x0);
        gbc.writeMem(0x1d80, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x8c04);
        EXPECT(gbc.pc(), 0x1d82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 004D
        gbc.setState(0xdf0c, 0x79b, 0xc400, 0xc63a, 0x3ea3, 0x4ad8, 0x0, 0x0);
        gbc.writeMem(0xdf0c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x79b);
        EXPECT(gbc.pc(), 0xdf0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf0c), 0xcb);
        EXPECT(gbc.readMem(0xdf0d), 0x1a);
        // CB 1A 004E
        gbc.setState(0x324e, 0x1ced, 0x5fa0, 0x392f, 0xeb8e, 0x118e, 0x1, 0x0);
        gbc.writeMem(0x324e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x1ced);
        EXPECT(gbc.pc(), 0x3250);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 004F
        gbc.setState(0x50dc, 0xb1e5, 0xb1c0, 0x6640, 0xa9f4, 0x8699, 0x1, 0x1);
        gbc.writeMem(0x50dc, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xb1e5);
        EXPECT(gbc.pc(), 0x50de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0050
        gbc.setState(0x2c58, 0x82c7, 0x5bb0, 0xf38f, 0xa5c5, 0x4c09, 0x1, 0x1);
        gbc.writeMem(0x2c58, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x82c7);
        EXPECT(gbc.pc(), 0x2c5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0051
        gbc.setState(0xe9a0, 0x5ed, 0x9120, 0x5829, 0x52e6, 0xb176, 0x0, 0x0);
        gbc.writeMem(0xe9a0, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x5ed);
        EXPECT(gbc.pc(), 0xe9a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9a0), 0xcb);
        EXPECT(gbc.readMem(0xe9a1), 0x1a);
        // CB 1A 0053
        gbc.setState(0xb67a, 0x98f5, 0xfd20, 0x9bd2, 0x3db1, 0x7164, 0x1, 0x0);
        gbc.writeMem(0xb67a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x98f5);
        EXPECT(gbc.pc(), 0xb67c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb67a), 0xcb);
        EXPECT(gbc.readMem(0xb67b), 0x1a);
        // CB 1A 0054
        gbc.setState(0xae06, 0x21fa, 0xeda0, 0xeacf, 0x2d7d, 0x70e7, 0x0, 0x0);
        gbc.writeMem(0xae06, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x21fa);
        EXPECT(gbc.pc(), 0xae08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae06), 0xcb);
        EXPECT(gbc.readMem(0xae07), 0x1a);
        // CB 1A 0055
        gbc.setState(0x8c8, 0x9110, 0x8f50, 0x14ec, 0x7e7a, 0x5eba, 0x1, 0x1);
        gbc.writeMem(0x8c8, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x9110);
        EXPECT(gbc.pc(), 0x8ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0056
        gbc.setState(0x5a36, 0x3a0a, 0xb1f0, 0x274c, 0x4acf, 0x9a84, 0x0, 0x0);
        gbc.writeMem(0x5a36, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x3a0a);
        EXPECT(gbc.pc(), 0x5a38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0057
        gbc.setState(0xcec2, 0xdfa4, 0xcee0, 0x2f37, 0xbd4f, 0xa938, 0x0, 0x0);
        gbc.writeMem(0xcec2, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xdfa4);
        EXPECT(gbc.pc(), 0xcec4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcec2), 0xcb);
        EXPECT(gbc.readMem(0xcec3), 0x1a);
        // CB 1A 0058
        gbc.setState(0x14b6, 0xa967, 0x2d70, 0xf7fc, 0x14d6, 0xf64a, 0x1, 0x1);
        gbc.writeMem(0x14b6, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xa967);
        EXPECT(gbc.pc(), 0x14b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0059
        gbc.setState(0x8fa8, 0xf8a9, 0x4680, 0xb42e, 0xfea2, 0x6caa, 0x1, 0x0);
        gbc.writeMem(0x8fa8, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xf8a9);
        EXPECT(gbc.pc(), 0x8faa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fa8), 0xcb);
        EXPECT(gbc.readMem(0x8fa9), 0x1a);
        // CB 1A 005A
        gbc.setState(0xbff4, 0x59b9, 0x71d0, 0xb4b0, 0xd06f, 0xcaca, 0x1, 0x0);
        gbc.writeMem(0xbff4, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x59b9);
        EXPECT(gbc.pc(), 0xbff6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbff4), 0xcb);
        EXPECT(gbc.readMem(0xbff5), 0x1a);
        // CB 1A 005B
        gbc.setState(0xbfd5, 0xffd2, 0x6ef0, 0x1df7, 0xc2c1, 0xe913, 0x0, 0x0);
        gbc.writeMem(0xbfd5, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xffd2);
        EXPECT(gbc.pc(), 0xbfd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfd5), 0xcb);
        EXPECT(gbc.readMem(0xbfd6), 0x1a);
        // CB 1A 005C
        gbc.setState(0x4f49, 0x344e, 0xdf60, 0x4e64, 0x825f, 0x5931, 0x1, 0x0);
        gbc.writeMem(0x4f49, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x344e);
        EXPECT(gbc.pc(), 0x4f4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 005D
        gbc.setState(0x98b1, 0x9cbb, 0x6c80, 0xdadb, 0x9370, 0x7c0d, 0x0, 0x0);
        gbc.writeMem(0x98b1, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x9cbb);
        EXPECT(gbc.pc(), 0x98b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98b1), 0xcb);
        EXPECT(gbc.readMem(0x98b2), 0x1a);
        // CB 1A 005E
        gbc.setState(0x4bc7, 0x9d46, 0x28b0, 0x9a98, 0x4c8, 0xb0f6, 0x0, 0x1);
        gbc.writeMem(0x4bc7, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x9d46);
        EXPECT(gbc.pc(), 0x4bc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 005F
        gbc.setState(0x33a6, 0x5120, 0xbc50, 0x635e, 0xeba2, 0xc1f2, 0x0, 0x0);
        gbc.writeMem(0x33a6, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x5120);
        EXPECT(gbc.pc(), 0x33a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0060
        gbc.setState(0x9b10, 0x5769, 0xc30, 0xd446, 0x7c62, 0x6e14, 0x0, 0x1);
        gbc.writeMem(0x9b10, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x5769);
        EXPECT(gbc.pc(), 0x9b12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b10), 0xcb);
        EXPECT(gbc.readMem(0x9b11), 0x1a);
        // CB 1A 0061
        gbc.setState(0x74bd, 0x314b, 0xd010, 0x5e31, 0xba26, 0x9f89, 0x0, 0x1);
        gbc.writeMem(0x74bd, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x314b);
        EXPECT(gbc.pc(), 0x74bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0062
        gbc.setState(0x2ec5, 0x22c3, 0x3ce0, 0x5ed8, 0x6376, 0x786e, 0x0, 0x1);
        gbc.writeMem(0x2ec5, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x22c3);
        EXPECT(gbc.pc(), 0x2ec7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0063
        gbc.setState(0x144a, 0xee3e, 0xe30, 0xfdd, 0xb51a, 0x98ba, 0x0, 0x0);
        gbc.writeMem(0x144a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xee3e);
        EXPECT(gbc.pc(), 0x144c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0064
        gbc.setState(0x8949, 0x1f5d, 0x1c00, 0xfe16, 0x88c4, 0xc5aa, 0x1, 0x1);
        gbc.writeMem(0x8949, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x1f5d);
        EXPECT(gbc.pc(), 0x894b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8949), 0xcb);
        EXPECT(gbc.readMem(0x894a), 0x1a);
        // CB 1A 0065
        gbc.setState(0xa3f, 0xe9f4, 0x7ba0, 0xeffe, 0xdd2a, 0x89a1, 0x1, 0x0);
        gbc.writeMem(0xa3f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xe9f4);
        EXPECT(gbc.pc(), 0xa41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0066
        gbc.setState(0x4150, 0xe426, 0x42c0, 0xb70d, 0xa1ee, 0xee28, 0x0, 0x1);
        gbc.writeMem(0x4150, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xe426);
        EXPECT(gbc.pc(), 0x4152);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0067
        gbc.setState(0x5f4f, 0xd4b1, 0x2920, 0x7005, 0x61e6, 0x828a, 0x0, 0x0);
        gbc.writeMem(0x5f4f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xd4b1);
        EXPECT(gbc.pc(), 0x5f51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0068
        gbc.setState(0x8294, 0x7f5d, 0x3ad0, 0xcb43, 0xf40f, 0x830c, 0x1, 0x1);
        gbc.writeMem(0x8294, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x7f5d);
        EXPECT(gbc.pc(), 0x8296);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8294), 0xcb);
        EXPECT(gbc.readMem(0x8295), 0x1a);
        // CB 1A 0069
        gbc.setState(0x54a2, 0x7f59, 0x12d0, 0x5f69, 0x8514, 0x58f7, 0x0, 0x0);
        gbc.writeMem(0x54a2, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x7f59);
        EXPECT(gbc.pc(), 0x54a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 006A
        gbc.setState(0x6870, 0xe146, 0x7aa0, 0x4406, 0x26b4, 0x70b8, 0x1, 0x0);
        gbc.writeMem(0x6870, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xe146);
        EXPECT(gbc.pc(), 0x6872);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 006B
        gbc.setState(0x80e2, 0x9410, 0x66f0, 0x51f7, 0xf2e, 0x9799, 0x1, 0x0);
        gbc.writeMem(0x80e2, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x9410);
        EXPECT(gbc.pc(), 0x80e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80e2), 0xcb);
        EXPECT(gbc.readMem(0x80e3), 0x1a);
        // CB 1A 006C
        gbc.setState(0x798f, 0x442d, 0xed80, 0x7ae4, 0xb49f, 0x174c, 0x1, 0x1);
        gbc.writeMem(0x798f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x442d);
        EXPECT(gbc.pc(), 0x7991);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 006D
        gbc.setState(0x6879, 0x1bc3, 0x7720, 0x30, 0xb395, 0x4037, 0x1, 0x0);
        gbc.writeMem(0x6879, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x1bc3);
        EXPECT(gbc.pc(), 0x687b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 006E
        gbc.setState(0xac98, 0x99b0, 0x7560, 0xce6a, 0x32d8, 0xee29, 0x1, 0x0);
        gbc.writeMem(0xac98, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x99b0);
        EXPECT(gbc.pc(), 0xac9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac98), 0xcb);
        EXPECT(gbc.readMem(0xac99), 0x1a);
        // CB 1A 006F
        gbc.setState(0x48c, 0xbe35, 0x5320, 0xc79, 0x5b8e, 0x7b35, 0x1, 0x1);
        gbc.writeMem(0x48c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xbe35);
        EXPECT(gbc.pc(), 0x48e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0071
        gbc.setState(0xae86, 0xd47c, 0x4a50, 0x353, 0xe5eb, 0x1b95, 0x1, 0x1);
        gbc.writeMem(0xae86, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xd47c);
        EXPECT(gbc.pc(), 0xae88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae86), 0xcb);
        EXPECT(gbc.readMem(0xae87), 0x1a);
        // CB 1A 0072
        gbc.setState(0xb67d, 0x8742, 0x190, 0xdc27, 0x4a47, 0xaa45, 0x1, 0x1);
        gbc.writeMem(0xb67d, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x8742);
        EXPECT(gbc.pc(), 0xb67f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb67d), 0xcb);
        EXPECT(gbc.readMem(0xb67e), 0x1a);
        // CB 1A 0073
        gbc.setState(0x4102, 0xd9a0, 0xc740, 0x1f78, 0x56d, 0x5ba0, 0x1, 0x0);
        gbc.writeMem(0x4102, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xd9a0);
        EXPECT(gbc.pc(), 0x4104);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0074
        gbc.setState(0x134c, 0x1ad0, 0x6750, 0x3da2, 0x3d9d, 0xe1a, 0x0, 0x0);
        gbc.writeMem(0x134c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x1ad0);
        EXPECT(gbc.pc(), 0x134e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0075
        gbc.setState(0x35a3, 0xea4b, 0x70a0, 0x5098, 0x5417, 0xc08b, 0x0, 0x1);
        gbc.writeMem(0x35a3, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xea4b);
        EXPECT(gbc.pc(), 0x35a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0076
        gbc.setState(0x1d62, 0x95db, 0xf00, 0xdeab, 0xba0c, 0x9d3c, 0x1, 0x1);
        gbc.writeMem(0x1d62, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x95db);
        EXPECT(gbc.pc(), 0x1d64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0077
        gbc.setState(0xd04f, 0xefc6, 0xb0b0, 0x5513, 0xbb33, 0x11d1, 0x1, 0x0);
        gbc.writeMem(0xd04f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xefc6);
        EXPECT(gbc.pc(), 0xd051);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd04f), 0xcb);
        EXPECT(gbc.readMem(0xd050), 0x1a);
        // CB 1A 0078
        gbc.setState(0x84aa, 0x4c51, 0x5550, 0x97f, 0x4789, 0x684c, 0x0, 0x1);
        gbc.writeMem(0x84aa, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x4c51);
        EXPECT(gbc.pc(), 0x84ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84aa), 0xcb);
        EXPECT(gbc.readMem(0x84ab), 0x1a);
        // CB 1A 0079
        gbc.setState(0x65e7, 0xebe1, 0xc0f0, 0xf3c1, 0x4c84, 0x9cf8, 0x0, 0x1);
        gbc.writeMem(0x65e7, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xebe1);
        EXPECT(gbc.pc(), 0x65e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 007A
        gbc.setState(0xdb48, 0x84a2, 0xb2d0, 0x4254, 0xe1d0, 0x3fb8, 0x0, 0x1);
        gbc.writeMem(0xdb48, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x84a2);
        EXPECT(gbc.pc(), 0xdb4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb48), 0xcb);
        EXPECT(gbc.readMem(0xdb49), 0x1a);
        // CB 1A 007B
        gbc.setState(0x4268, 0xc29d, 0x9f0, 0xd802, 0xd25c, 0x1f5f, 0x1, 0x1);
        gbc.writeMem(0x4268, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xc29d);
        EXPECT(gbc.pc(), 0x426a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 007C
        gbc.setState(0x8cb, 0xf138, 0x87c0, 0x58a0, 0x9850, 0x36ff, 0x0, 0x1);
        gbc.writeMem(0x8cb, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xf138);
        EXPECT(gbc.pc(), 0x8cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 007D
        gbc.setState(0x5e19, 0x3bba, 0x14f0, 0x56b4, 0xf868, 0xad7, 0x0, 0x0);
        gbc.writeMem(0x5e19, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x3bba);
        EXPECT(gbc.pc(), 0x5e1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 007E
        gbc.setState(0x7ba3, 0x415, 0x4ca0, 0xd3eb, 0xc31, 0xf0ef, 0x0, 0x1);
        gbc.writeMem(0x7ba3, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x415);
        EXPECT(gbc.pc(), 0x7ba5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 007F
        gbc.setState(0xbaa8, 0x5045, 0x6430, 0x66dd, 0xe655, 0xf7a2, 0x1, 0x0);
        gbc.writeMem(0xbaa8, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x5045);
        EXPECT(gbc.pc(), 0xbaaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbaa8), 0xcb);
        EXPECT(gbc.readMem(0xbaa9), 0x1a);
        // CB 1A 0080
        gbc.setState(0xd1f6, 0xa31, 0x4950, 0x5a3f, 0xc583, 0x905e, 0x1, 0x1);
        gbc.writeMem(0xd1f6, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xa31);
        EXPECT(gbc.pc(), 0xd1f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1f6), 0xcb);
        EXPECT(gbc.readMem(0xd1f7), 0x1a);
        // CB 1A 0081
        gbc.setState(0x2718, 0x53e9, 0x1a70, 0x205e, 0x9c49, 0x43e0, 0x0, 0x1);
        gbc.writeMem(0x2718, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x53e9);
        EXPECT(gbc.pc(), 0x271a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0082
        gbc.setState(0x39d7, 0x1ff9, 0x9a50, 0x7f5c, 0xae78, 0x52ac, 0x0, 0x0);
        gbc.writeMem(0x39d7, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x1ff9);
        EXPECT(gbc.pc(), 0x39d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0083
        gbc.setState(0x8d74, 0xf30, 0x3700, 0xc8ad, 0x1907, 0xf1f5, 0x0, 0x0);
        gbc.writeMem(0x8d74, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xf30);
        EXPECT(gbc.pc(), 0x8d76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d74), 0xcb);
        EXPECT(gbc.readMem(0x8d75), 0x1a);
        // CB 1A 0084
        gbc.setState(0x8782, 0xcaaf, 0x90e0, 0xfe6c, 0x96d3, 0x2bb9, 0x1, 0x0);
        gbc.writeMem(0x8782, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xcaaf);
        EXPECT(gbc.pc(), 0x8784);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8782), 0xcb);
        EXPECT(gbc.readMem(0x8783), 0x1a);
        // CB 1A 0085
        gbc.setState(0x138b, 0x8cc6, 0x9170, 0x394, 0x93ad, 0xb85a, 0x0, 0x0);
        gbc.writeMem(0x138b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x8cc6);
        EXPECT(gbc.pc(), 0x138d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0086
        gbc.setState(0x7327, 0x6945, 0xaf0, 0x9ff3, 0x5f9a, 0xdef0, 0x0, 0x0);
        gbc.writeMem(0x7327, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x6945);
        EXPECT(gbc.pc(), 0x7329);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0087
        gbc.setState(0x5f1f, 0x3410, 0x2280, 0x7d4a, 0x9a2a, 0xd0c1, 0x0, 0x1);
        gbc.writeMem(0x5f1f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x3410);
        EXPECT(gbc.pc(), 0x5f21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0088
        gbc.setState(0xc38c, 0xce53, 0x6640, 0xd111, 0x1ec5, 0x797a, 0x0, 0x0);
        gbc.writeMem(0xc38c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xce53);
        EXPECT(gbc.pc(), 0xc38e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc38c), 0xcb);
        EXPECT(gbc.readMem(0xc38d), 0x1a);
        // CB 1A 0089
        gbc.setState(0xe600, 0x68ff, 0xec10, 0x4a23, 0x6e96, 0xda5b, 0x1, 0x0);
        gbc.writeMem(0xe600, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x68ff);
        EXPECT(gbc.pc(), 0xe602);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe600), 0xcb);
        EXPECT(gbc.readMem(0xe601), 0x1a);
        // CB 1A 008A
        gbc.setState(0xc379, 0xa8fa, 0x21b0, 0xd7c0, 0x310b, 0xd446, 0x1, 0x1);
        gbc.writeMem(0xc379, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xa8fa);
        EXPECT(gbc.pc(), 0xc37b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc379), 0xcb);
        EXPECT(gbc.readMem(0xc37a), 0x1a);
        // CB 1A 008B
        gbc.setState(0xaa0a, 0x47cb, 0x6360, 0xc082, 0x4bc4, 0xab9c, 0x0, 0x1);
        gbc.writeMem(0xaa0a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x47cb);
        EXPECT(gbc.pc(), 0xaa0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa0a), 0xcb);
        EXPECT(gbc.readMem(0xaa0b), 0x1a);
        // CB 1A 008C
        gbc.setState(0xa865, 0x713d, 0x7fb0, 0xcff5, 0xaf64, 0x1d28, 0x0, 0x1);
        gbc.writeMem(0xa865, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x713d);
        EXPECT(gbc.pc(), 0xa867);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa865), 0xcb);
        EXPECT(gbc.readMem(0xa866), 0x1a);
        // CB 1A 008D
        gbc.setState(0x9a5e, 0x5eab, 0x38a0, 0xc7c3, 0x25d3, 0xfc1b, 0x1, 0x1);
        gbc.writeMem(0x9a5e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x5eab);
        EXPECT(gbc.pc(), 0x9a60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a5e), 0xcb);
        EXPECT(gbc.readMem(0x9a5f), 0x1a);
        // CB 1A 008E
        gbc.setState(0x1da9, 0x44dd, 0xe230, 0xc2bc, 0x52ae, 0x19d1, 0x0, 0x0);
        gbc.writeMem(0x1da9, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x44dd);
        EXPECT(gbc.pc(), 0x1dab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 008F
        gbc.setState(0x1f40, 0x20ae, 0x5fc0, 0x9a95, 0x5d69, 0x68e0, 0x0, 0x1);
        gbc.writeMem(0x1f40, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x20ae);
        EXPECT(gbc.pc(), 0x1f42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0091
        gbc.setState(0x691b, 0x5d0b, 0x6ff0, 0xcf15, 0x8165, 0x406f, 0x1, 0x0);
        gbc.writeMem(0x691b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x5d0b);
        EXPECT(gbc.pc(), 0x691d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0092
        gbc.setState(0x796a, 0xb49c, 0xe150, 0xe977, 0x4d, 0xd0f1, 0x0, 0x1);
        gbc.writeMem(0x796a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xb49c);
        EXPECT(gbc.pc(), 0x796c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0093
        gbc.setState(0x2c78, 0x4385, 0xcdd0, 0xde35, 0xdee1, 0x4cd5, 0x1, 0x1);
        gbc.writeMem(0x2c78, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x4385);
        EXPECT(gbc.pc(), 0x2c7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0094
        gbc.setState(0x6ad7, 0xf8c1, 0x6f50, 0xa772, 0x1e80, 0xe5ae, 0x1, 0x1);
        gbc.writeMem(0x6ad7, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xf8c1);
        EXPECT(gbc.pc(), 0x6ad9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0095
        gbc.setState(0xb197, 0x3c1a, 0x36d0, 0x87cf, 0x4c41, 0x1085, 0x0, 0x1);
        gbc.writeMem(0xb197, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x3c1a);
        EXPECT(gbc.pc(), 0xb199);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb197), 0xcb);
        EXPECT(gbc.readMem(0xb198), 0x1a);
        // CB 1A 0096
        gbc.setState(0x440, 0x18d, 0x5600, 0x9322, 0xde4d, 0x1d5a, 0x1, 0x1);
        gbc.writeMem(0x440, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x18d);
        EXPECT(gbc.pc(), 0x442);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0097
        gbc.setState(0x4f3d, 0x76fd, 0xbc80, 0x5ee3, 0x8d63, 0x5c51, 0x1, 0x1);
        gbc.writeMem(0x4f3d, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x76fd);
        EXPECT(gbc.pc(), 0x4f3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0098
        gbc.setState(0x2850, 0x27e2, 0x67d0, 0x66fe, 0x2f07, 0xc644, 0x0, 0x0);
        gbc.writeMem(0x2850, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x27e2);
        EXPECT(gbc.pc(), 0x2852);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0099
        gbc.setState(0xb1c, 0xe27e, 0x8850, 0x10eb, 0x267f, 0xd8f0, 0x0, 0x1);
        gbc.writeMem(0xb1c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xe27e);
        EXPECT(gbc.pc(), 0xb1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 009A
        gbc.setState(0xe768, 0x1973, 0xf830, 0x2199, 0x8ca7, 0x9f17, 0x0, 0x1);
        gbc.writeMem(0xe768, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x1973);
        EXPECT(gbc.pc(), 0xe76a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe768), 0xcb);
        EXPECT(gbc.readMem(0xe769), 0x1a);
        // CB 1A 009B
        gbc.setState(0xce60, 0x73d5, 0xd940, 0x4c99, 0x8f4d, 0x59cc, 0x1, 0x1);
        gbc.writeMem(0xce60, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x73d5);
        EXPECT(gbc.pc(), 0xce62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce60), 0xcb);
        EXPECT(gbc.readMem(0xce61), 0x1a);
        // CB 1A 009C
        gbc.setState(0xb1fd, 0x4522, 0x9df0, 0x4ca5, 0xc16c, 0xf6a, 0x1, 0x1);
        gbc.writeMem(0xb1fd, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x4522);
        EXPECT(gbc.pc(), 0xb1ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1fd), 0xcb);
        EXPECT(gbc.readMem(0xb1fe), 0x1a);
        // CB 1A 009D
        gbc.setState(0x187, 0xaa52, 0x8240, 0x77c0, 0xacb4, 0x21a6, 0x0, 0x1);
        gbc.writeMem(0x187, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xaa52);
        EXPECT(gbc.pc(), 0x189);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 009E
        gbc.setState(0xc98e, 0x1709, 0x1030, 0xe11c, 0x9895, 0x932d, 0x0, 0x1);
        gbc.writeMem(0xc98e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x1709);
        EXPECT(gbc.pc(), 0xc990);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc98e), 0xcb);
        EXPECT(gbc.readMem(0xc98f), 0x1a);
        // CB 1A 009F
        gbc.setState(0x2fff, 0xd38b, 0x310, 0xc64c, 0xccc6, 0xef9f, 0x0, 0x1);
        gbc.writeMem(0x2fff, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xd38b);
        EXPECT(gbc.pc(), 0x3001);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 00A0
        gbc.setState(0x1327, 0xf90c, 0x1620, 0xb377, 0x6958, 0x4323, 0x0, 0x0);
        gbc.writeMem(0x1327, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xf90c);
        EXPECT(gbc.pc(), 0x1329);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 00A1
        gbc.setState(0x74db, 0x246a, 0x55d0, 0x209e, 0x2c7a, 0xd14b, 0x1, 0x1);
        gbc.writeMem(0x74db, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x246a);
        EXPECT(gbc.pc(), 0x74dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 00A2
        gbc.setState(0x42e7, 0xfcd5, 0xb580, 0x7688, 0xf96d, 0xb10b, 0x1, 0x0);
        gbc.writeMem(0x42e7, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xfcd5);
        EXPECT(gbc.pc(), 0x42e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 00A3
        gbc.setState(0x2b5c, 0x54b5, 0xccd0, 0xc4f, 0x9633, 0x78c2, 0x0, 0x0);
        gbc.writeMem(0x2b5c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x54b5);
        EXPECT(gbc.pc(), 0x2b5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 00A4
        gbc.setState(0x6232, 0xe719, 0x9410, 0x3570, 0x1431, 0xb272, 0x1, 0x1);
        gbc.writeMem(0x6232, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xe719);
        EXPECT(gbc.pc(), 0x6234);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 00A5
        gbc.setState(0xebe7, 0x8f65, 0x4680, 0x8afd, 0x5339, 0xa273, 0x0, 0x0);
        gbc.writeMem(0xebe7, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x8f65);
        EXPECT(gbc.pc(), 0xebe9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebe7), 0xcb);
        EXPECT(gbc.readMem(0xebe8), 0x1a);
        // CB 1A 00A6
        gbc.setState(0x1e, 0xb57e, 0x250, 0xe0a2, 0x4bf6, 0xfe89, 0x1, 0x1);
        gbc.writeMem(0x1e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xb57e);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 00A7
        gbc.setState(0xc224, 0xa603, 0x640, 0x2da, 0x5e39, 0xf19e, 0x1, 0x0);
        gbc.writeMem(0xc224, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xa603);
        EXPECT(gbc.pc(), 0xc226);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc224), 0xcb);
        EXPECT(gbc.readMem(0xc225), 0x1a);
        // CB 1A 00A8
        gbc.setState(0x8f30, 0x80b2, 0xd790, 0xc19b, 0x23, 0x8a14, 0x1, 0x0);
        gbc.writeMem(0x8f30, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x80b2);
        EXPECT(gbc.pc(), 0x8f32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f30), 0xcb);
        EXPECT(gbc.readMem(0x8f31), 0x1a);
        // CB 1A 00A9
        gbc.setState(0x1f09, 0xf513, 0xc240, 0x2934, 0x6713, 0x1c96, 0x0, 0x0);
        gbc.writeMem(0x1f09, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xf513);
        EXPECT(gbc.pc(), 0x1f0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 00AA
        gbc.setState(0xe97e, 0x48be, 0x2d60, 0xb062, 0xa812, 0xf78a, 0x1, 0x0);
        gbc.writeMem(0xe97e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x48be);
        EXPECT(gbc.pc(), 0xe980);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe97e), 0xcb);
        EXPECT(gbc.readMem(0xe97f), 0x1a);
        // CB 1A 00AB
        gbc.setState(0xd5c9, 0x9ae5, 0xd400, 0x9241, 0x436e, 0x933c, 0x1, 0x1);
        gbc.writeMem(0xd5c9, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x9ae5);
        EXPECT(gbc.pc(), 0xd5cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5c9), 0xcb);
        EXPECT(gbc.readMem(0xd5ca), 0x1a);
        // CB 1A 00AC
        gbc.setState(0x4629, 0xb569, 0x9ba0, 0x30ba, 0x352f, 0x5e05, 0x1, 0x1);
        gbc.writeMem(0x4629, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xb569);
        EXPECT(gbc.pc(), 0x462b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 00AD
        gbc.setState(0xe4c4, 0x808e, 0xa3c0, 0x352d, 0x1f1, 0x9fb5, 0x1, 0x0);
        gbc.writeMem(0xe4c4, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x808e);
        EXPECT(gbc.pc(), 0xe4c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4c4), 0xcb);
        EXPECT(gbc.readMem(0xe4c5), 0x1a);
        // CB 1A 00AE
        gbc.setState(0x9c18, 0xea35, 0xc4d0, 0x8c11, 0x250d, 0x2bc1, 0x1, 0x0);
        gbc.writeMem(0x9c18, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xea35);
        EXPECT(gbc.pc(), 0x9c1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c18), 0xcb);
        EXPECT(gbc.readMem(0x9c19), 0x1a);
        // CB 1A 00AF
        gbc.setState(0x8e2b, 0xf76, 0xb230, 0xd3f2, 0x5541, 0x7fd5, 0x1, 0x0);
        gbc.writeMem(0x8e2b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xf76);
        EXPECT(gbc.pc(), 0x8e2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e2b), 0xcb);
        EXPECT(gbc.readMem(0x8e2c), 0x1a);
        // CB 1A 00B0
        gbc.setState(0xd45, 0xca65, 0x7b30, 0xd403, 0xc2f2, 0x7017, 0x1, 0x0);
        gbc.writeMem(0xd45, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xca65);
        EXPECT(gbc.pc(), 0xd47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 00B1
        gbc.setState(0xc115, 0xc9a9, 0x9f10, 0xf43d, 0xc076, 0xea24, 0x0, 0x0);
        gbc.writeMem(0xc115, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xc9a9);
        EXPECT(gbc.pc(), 0xc117);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc115), 0xcb);
        EXPECT(gbc.readMem(0xc116), 0x1a);
        // CB 1A 00B2
        gbc.setState(0xad7a, 0xe48d, 0x6f60, 0x6928, 0x375e, 0x5614, 0x1, 0x0);
        gbc.writeMem(0xad7a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xe48d);
        EXPECT(gbc.pc(), 0xad7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad7a), 0xcb);
        EXPECT(gbc.readMem(0xad7b), 0x1a);
        // CB 1A 00B3
        gbc.setState(0xc0f5, 0xb99d, 0x2da0, 0x8ddd, 0xca9d, 0xe7f5, 0x0, 0x0);
        gbc.writeMem(0xc0f5, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xb99d);
        EXPECT(gbc.pc(), 0xc0f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0f5), 0xcb);
        EXPECT(gbc.readMem(0xc0f6), 0x1a);
        // CB 1A 00B4
        gbc.setState(0x97da, 0x7946, 0x1740, 0x1857, 0x4e36, 0x17e2, 0x1, 0x1);
        gbc.writeMem(0x97da, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x7946);
        EXPECT(gbc.pc(), 0x97dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97da), 0xcb);
        EXPECT(gbc.readMem(0x97db), 0x1a);
        // CB 1A 00B5
        gbc.setState(0x81ca, 0x8d6c, 0x3e60, 0xb3f4, 0x319c, 0xb6e, 0x0, 0x0);
        gbc.writeMem(0x81ca, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x8d6c);
        EXPECT(gbc.pc(), 0x81cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81ca), 0xcb);
        EXPECT(gbc.readMem(0x81cb), 0x1a);
        // CB 1A 00B6
        gbc.setState(0xa909, 0x590c, 0xdfc0, 0xf213, 0xe6fb, 0x89cf, 0x1, 0x1);
        gbc.writeMem(0xa909, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x590c);
        EXPECT(gbc.pc(), 0xa90b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa909), 0xcb);
        EXPECT(gbc.readMem(0xa90a), 0x1a);
        // CB 1A 00B7
        gbc.setState(0x8e86, 0x3be5, 0xbcc0, 0x4677, 0x620a, 0x80f4, 0x0, 0x1);
        gbc.writeMem(0x8e86, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x3be5);
        EXPECT(gbc.pc(), 0x8e88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e86), 0xcb);
        EXPECT(gbc.readMem(0x8e87), 0x1a);
        // CB 1A 00B8
        gbc.setState(0xb78d, 0x307a, 0xc0e0, 0x304b, 0xac33, 0x6826, 0x1, 0x0);
        gbc.writeMem(0xb78d, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x307a);
        EXPECT(gbc.pc(), 0xb78f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb78d), 0xcb);
        EXPECT(gbc.readMem(0xb78e), 0x1a);
        // CB 1A 00B9
        gbc.setState(0x50bb, 0xbb5e, 0x5370, 0xebd7, 0x8feb, 0x1179, 0x0, 0x1);
        gbc.writeMem(0x50bb, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xbb5e);
        EXPECT(gbc.pc(), 0x50bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 00BA
        gbc.setState(0x87b2, 0x7afb, 0x2900, 0xd472, 0x7a12, 0x3639, 0x1, 0x1);
        gbc.writeMem(0x87b2, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x7afb);
        EXPECT(gbc.pc(), 0x87b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87b2), 0xcb);
        EXPECT(gbc.readMem(0x87b3), 0x1a);
        // CB 1A 00BB
        gbc.setState(0x8231, 0xcd0c, 0x3100, 0x17fb, 0x832b, 0x92af, 0x0, 0x1);
        gbc.writeMem(0x8231, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xcd0c);
        EXPECT(gbc.pc(), 0x8233);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8231), 0xcb);
        EXPECT(gbc.readMem(0x8232), 0x1a);
        // CB 1A 00BC
        gbc.setState(0xcca6, 0x1793, 0xa9d0, 0xab86, 0x85a5, 0x5f43, 0x1, 0x0);
        gbc.writeMem(0xcca6, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x1793);
        EXPECT(gbc.pc(), 0xcca8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcca6), 0xcb);
        EXPECT(gbc.readMem(0xcca7), 0x1a);
        // CB 1A 00BD
        gbc.setState(0xe8c5, 0xe5b1, 0x6ba0, 0x221, 0xcfac, 0xd3b4, 0x1, 0x1);
        gbc.writeMem(0xe8c5, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xe5b1);
        EXPECT(gbc.pc(), 0xe8c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8c5), 0xcb);
        EXPECT(gbc.readMem(0xe8c6), 0x1a);
        // CB 1A 00BE
        gbc.setState(0xc54b, 0xaa3, 0x4120, 0xbafc, 0x2224, 0x3e9, 0x1, 0x1);
        gbc.writeMem(0xc54b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xaa3);
        EXPECT(gbc.pc(), 0xc54d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc54b), 0xcb);
        EXPECT(gbc.readMem(0xc54c), 0x1a);
        // CB 1A 00BF
        gbc.setState(0x27b8, 0x835c, 0xb930, 0xd05, 0x5262, 0x94d0, 0x1, 0x1);
        gbc.writeMem(0x27b8, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x835c);
        EXPECT(gbc.pc(), 0x27ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 00C0
        gbc.setState(0xdae5, 0xab10, 0x7ff0, 0x2711, 0xc911, 0x9a05, 0x1, 0x1);
        gbc.writeMem(0xdae5, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xab10);
        EXPECT(gbc.pc(), 0xdae7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdae5), 0xcb);
        EXPECT(gbc.readMem(0xdae6), 0x1a);
        // CB 1A 00C1
        gbc.setState(0xbe1c, 0xbe4e, 0x5960, 0x258b, 0x69d9, 0xf4e5, 0x0, 0x0);
        gbc.writeMem(0xbe1c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xbe4e);
        EXPECT(gbc.pc(), 0xbe1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe1c), 0xcb);
        EXPECT(gbc.readMem(0xbe1d), 0x1a);
        // CB 1A 00C2
        gbc.setState(0xe4f4, 0x30af, 0x4890, 0xfcf0, 0x8d1a, 0x4aba, 0x1, 0x1);
        gbc.writeMem(0xe4f4, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x30af);
        EXPECT(gbc.pc(), 0xe4f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4f4), 0xcb);
        EXPECT(gbc.readMem(0xe4f5), 0x1a);
        // CB 1A 00C3
        gbc.setState(0xa5f2, 0xc2e0, 0x2800, 0xf834, 0xb45e, 0xf7ab, 0x1, 0x0);
        gbc.writeMem(0xa5f2, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xc2e0);
        EXPECT(gbc.pc(), 0xa5f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5f2), 0xcb);
        EXPECT(gbc.readMem(0xa5f3), 0x1a);
        // CB 1A 00C4
        gbc.setState(0xbd6, 0x83af, 0xc280, 0x7647, 0x3eb8, 0x2657, 0x1, 0x0);
        gbc.writeMem(0xbd6, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x83af);
        EXPECT(gbc.pc(), 0xbd8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 00C5
        gbc.setState(0x2239, 0x4d41, 0xcf30, 0xf595, 0x3ae4, 0x49ca, 0x0, 0x1);
        gbc.writeMem(0x2239, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x4d41);
        EXPECT(gbc.pc(), 0x223b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 00C6
        gbc.setState(0xa1fe, 0xade, 0x77f0, 0xc27a, 0xb153, 0xd75a, 0x0, 0x0);
        gbc.writeMem(0xa1fe, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xade);
        EXPECT(gbc.pc(), 0xa200);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1fe), 0xcb);
        EXPECT(gbc.readMem(0xa1ff), 0x1a);
        // CB 1A 00C7
        gbc.setState(0x8dc4, 0x2310, 0x4290, 0x16b, 0x2a82, 0x8e6b, 0x1, 0x0);
        gbc.writeMem(0x8dc4, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x2310);
        EXPECT(gbc.pc(), 0x8dc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dc4), 0xcb);
        EXPECT(gbc.readMem(0x8dc5), 0x1a);
        // CB 1A 00C8
        gbc.setState(0xea26, 0x29c3, 0xbfd0, 0x6cb, 0x6336, 0xd05c, 0x1, 0x0);
        gbc.writeMem(0xea26, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x29c3);
        EXPECT(gbc.pc(), 0xea28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea26), 0xcb);
        EXPECT(gbc.readMem(0xea27), 0x1a);
        // CB 1A 00C9
        gbc.setState(0x55e4, 0x2e61, 0x36b0, 0x580a, 0xe7b2, 0xc7c8, 0x0, 0x0);
        gbc.writeMem(0x55e4, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x2e61);
        EXPECT(gbc.pc(), 0x55e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 00CA
        gbc.setState(0xbc13, 0x80b7, 0x2230, 0x8b8f, 0xf049, 0xde9b, 0x1, 0x1);
        gbc.writeMem(0xbc13, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x80b7);
        EXPECT(gbc.pc(), 0xbc15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc13), 0xcb);
        EXPECT(gbc.readMem(0xbc14), 0x1a);
        // CB 1A 00CB
        gbc.setState(0xc3ae, 0xf956, 0x260, 0x7f93, 0xfea7, 0xf2b9, 0x0, 0x0);
        gbc.writeMem(0xc3ae, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xf956);
        EXPECT(gbc.pc(), 0xc3b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3ae), 0xcb);
        EXPECT(gbc.readMem(0xc3af), 0x1a);
        // CB 1A 00CC
        gbc.setState(0x6ecf, 0x10a3, 0xad40, 0x9042, 0xbe38, 0xf290, 0x1, 0x0);
        gbc.writeMem(0x6ecf, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x10a3);
        EXPECT(gbc.pc(), 0x6ed1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 00CD
        gbc.setState(0xceed, 0xc3c5, 0xba00, 0x2134, 0x7f78, 0x4fa8, 0x1, 0x0);
        gbc.writeMem(0xceed, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xc3c5);
        EXPECT(gbc.pc(), 0xceef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xceed), 0xcb);
        EXPECT(gbc.readMem(0xceee), 0x1a);
        // CB 1A 00CE
        gbc.setState(0x46a5, 0xae6, 0x1460, 0x44b5, 0x965a, 0x6416, 0x0, 0x0);
        gbc.writeMem(0x46a5, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xae6);
        EXPECT(gbc.pc(), 0x46a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 00CF
        gbc.setState(0x2bba, 0x9796, 0xdf30, 0xe5f, 0xc682, 0x86fa, 0x0, 0x0);
        gbc.writeMem(0x2bba, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x9796);
        EXPECT(gbc.pc(), 0x2bbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 00D0
        gbc.setState(0xe7b0, 0xac1, 0xd510, 0x87d2, 0xe1cd, 0xfd38, 0x1, 0x0);
        gbc.writeMem(0xe7b0, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xac1);
        EXPECT(gbc.pc(), 0xe7b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7b0), 0xcb);
        EXPECT(gbc.readMem(0xe7b1), 0x1a);
        // CB 1A 00D1
        gbc.setState(0xe830, 0x11c8, 0x9650, 0x8830, 0xef08, 0x7e78, 0x1, 0x1);
        gbc.writeMem(0xe830, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x11c8);
        EXPECT(gbc.pc(), 0xe832);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe830), 0xcb);
        EXPECT(gbc.readMem(0xe831), 0x1a);
        // CB 1A 00D2
        gbc.setState(0xd2f2, 0x7509, 0x1db0, 0x338e, 0x250b, 0x5957, 0x1, 0x1);
        gbc.writeMem(0xd2f2, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x7509);
        EXPECT(gbc.pc(), 0xd2f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2f2), 0xcb);
        EXPECT(gbc.readMem(0xd2f3), 0x1a);
        // CB 1A 00D3
        gbc.setState(0x29bc, 0xd559, 0x9530, 0xea6a, 0xf8be, 0x1f14, 0x0, 0x0);
        gbc.writeMem(0x29bc, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xd559);
        EXPECT(gbc.pc(), 0x29be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 00D4
        gbc.setState(0xab1e, 0x608, 0x17f0, 0x3d80, 0xf91d, 0x4a99, 0x1, 0x0);
        gbc.writeMem(0xab1e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x608);
        EXPECT(gbc.pc(), 0xab20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab1e), 0xcb);
        EXPECT(gbc.readMem(0xab1f), 0x1a);
        // CB 1A 00D5
        gbc.setState(0x18ba, 0xf27c, 0x1b40, 0xa53f, 0x68c4, 0x2f83, 0x0, 0x0);
        gbc.writeMem(0x18ba, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xf27c);
        EXPECT(gbc.pc(), 0x18bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 00D6
        gbc.setState(0xe857, 0x11d4, 0x8750, 0x743b, 0x58c7, 0x2fb9, 0x0, 0x1);
        gbc.writeMem(0xe857, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x11d4);
        EXPECT(gbc.pc(), 0xe859);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe857), 0xcb);
        EXPECT(gbc.readMem(0xe858), 0x1a);
        // CB 1A 00D7
        gbc.setState(0x70b4, 0x2974, 0x8570, 0xea08, 0x483b, 0xcece, 0x1, 0x1);
        gbc.writeMem(0x70b4, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x2974);
        EXPECT(gbc.pc(), 0x70b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 00D8
        gbc.setState(0x1485, 0xf53e, 0x3060, 0xd12f, 0x30d2, 0xa70b, 0x1, 0x1);
        gbc.writeMem(0x1485, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xf53e);
        EXPECT(gbc.pc(), 0x1487);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 00D9
        gbc.setState(0x6c6c, 0xb2, 0xb1f0, 0x2742, 0x8f28, 0x9c22, 0x1, 0x0);
        gbc.writeMem(0x6c6c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xb2);
        EXPECT(gbc.pc(), 0x6c6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 00DA
        gbc.setState(0xa9f, 0xae02, 0x7e30, 0x732a, 0x4686, 0x80d6, 0x0, 0x1);
        gbc.writeMem(0xa9f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xae02);
        EXPECT(gbc.pc(), 0xaa1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 00DB
        gbc.setState(0x8fa1, 0x5b36, 0x4190, 0x504b, 0x94ab, 0x158e, 0x0, 0x1);
        gbc.writeMem(0x8fa1, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x5b36);
        EXPECT(gbc.pc(), 0x8fa3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fa1), 0xcb);
        EXPECT(gbc.readMem(0x8fa2), 0x1a);
        // CB 1A 00DC
        gbc.setState(0x1a98, 0x6210, 0x8670, 0xdbab, 0x9698, 0x1200, 0x1, 0x1);
        gbc.writeMem(0x1a98, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x6210);
        EXPECT(gbc.pc(), 0x1a9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 00DD
        gbc.setState(0x611e, 0x5709, 0x1e90, 0x6a7d, 0xa221, 0x3e39, 0x0, 0x0);
        gbc.writeMem(0x611e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x5709);
        EXPECT(gbc.pc(), 0x6120);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 00DE
        gbc.setState(0x61a7, 0x1b62, 0x5fb0, 0xfc6c, 0xd1e8, 0x4219, 0x0, 0x1);
        gbc.writeMem(0x61a7, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x1b62);
        EXPECT(gbc.pc(), 0x61a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 00DF
        gbc.setState(0xbe6, 0xaff3, 0xe080, 0x5538, 0x576d, 0xa2bb, 0x1, 0x1);
        gbc.writeMem(0xbe6, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xaff3);
        EXPECT(gbc.pc(), 0xbe8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 00E0
        gbc.setState(0x6ed0, 0x49dd, 0x5640, 0x741a, 0xc0e8, 0x9aeb, 0x0, 0x0);
        gbc.writeMem(0x6ed0, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x49dd);
        EXPECT(gbc.pc(), 0x6ed2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 00E1
        gbc.setState(0x958a, 0xb641, 0x3510, 0x6120, 0xb649, 0x485, 0x0, 0x0);
        gbc.writeMem(0x958a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xb641);
        EXPECT(gbc.pc(), 0x958c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x958a), 0xcb);
        EXPECT(gbc.readMem(0x958b), 0x1a);
        // CB 1A 00E2
        gbc.setState(0x1727, 0xeb58, 0x99f0, 0x1724, 0xece, 0x4d3d, 0x1, 0x0);
        gbc.writeMem(0x1727, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xeb58);
        EXPECT(gbc.pc(), 0x1729);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 00E3
        gbc.setState(0x40f4, 0x62ab, 0xb060, 0x7c31, 0xa5bd, 0xefb7, 0x1, 0x1);
        gbc.writeMem(0x40f4, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x62ab);
        EXPECT(gbc.pc(), 0x40f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 00E4
        gbc.setState(0x6181, 0x54d2, 0x6640, 0x9d44, 0x7375, 0x91f8, 0x0, 0x1);
        gbc.writeMem(0x6181, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x54d2);
        EXPECT(gbc.pc(), 0x6183);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 00E5
        gbc.setState(0x87f0, 0x55ec, 0x9690, 0xfc97, 0xb9bf, 0x9ed, 0x0, 0x1);
        gbc.writeMem(0x87f0, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x55ec);
        EXPECT(gbc.pc(), 0x87f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87f0), 0xcb);
        EXPECT(gbc.readMem(0x87f1), 0x1a);
        // CB 1A 00E6
        gbc.setState(0x3c25, 0xdeb0, 0xf0, 0xc59f, 0x3c7e, 0xd1bc, 0x0, 0x1);
        gbc.writeMem(0x3c25, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xdeb0);
        EXPECT(gbc.pc(), 0x3c27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 00E7
        gbc.setState(0x5e82, 0xcf1d, 0xb6f0, 0x62f7, 0x86bb, 0xba02, 0x1, 0x0);
        gbc.writeMem(0x5e82, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xcf1d);
        EXPECT(gbc.pc(), 0x5e84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 00E8
        gbc.setState(0x4e2a, 0xec52, 0x8930, 0x1e83, 0x1be4, 0xe824, 0x0, 0x0);
        gbc.writeMem(0x4e2a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xec52);
        EXPECT(gbc.pc(), 0x4e2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 00EA
        gbc.setState(0xb77f, 0x5cc7, 0xfa60, 0x1d4, 0xc59d, 0x774, 0x1, 0x0);
        gbc.writeMem(0xb77f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x5cc7);
        EXPECT(gbc.pc(), 0xb781);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb77f), 0xcb);
        EXPECT(gbc.readMem(0xb780), 0x1a);
        // CB 1A 00EB
        gbc.setState(0xdcb4, 0xd5cd, 0xc6b0, 0xe856, 0xf907, 0xf9e, 0x0, 0x0);
        gbc.writeMem(0xdcb4, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xd5cd);
        EXPECT(gbc.pc(), 0xdcb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcb4), 0xcb);
        EXPECT(gbc.readMem(0xdcb5), 0x1a);
        // CB 1A 00EC
        gbc.setState(0xdcdf, 0xeb17, 0xe100, 0x1bb2, 0x69fb, 0xfa2d, 0x1, 0x0);
        gbc.writeMem(0xdcdf, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xeb17);
        EXPECT(gbc.pc(), 0xdce1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcdf), 0xcb);
        EXPECT(gbc.readMem(0xdce0), 0x1a);
        // CB 1A 00ED
        gbc.setState(0x411, 0x84a2, 0xa570, 0x156d, 0xddea, 0x78aa, 0x1, 0x1);
        gbc.writeMem(0x411, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x84a2);
        EXPECT(gbc.pc(), 0x413);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 00EE
        gbc.setState(0xe66a, 0x4e1d, 0x5f70, 0x199f, 0xafd5, 0x7f6, 0x1, 0x0);
        gbc.writeMem(0xe66a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x4e1d);
        EXPECT(gbc.pc(), 0xe66c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe66a), 0xcb);
        EXPECT(gbc.readMem(0xe66b), 0x1a);
        // CB 1A 00EF
        gbc.setState(0x2728, 0xa4d0, 0xa590, 0xaf49, 0x35cf, 0x8b5d, 0x1, 0x1);
        gbc.writeMem(0x2728, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xa4d0);
        EXPECT(gbc.pc(), 0x272a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 00F0
        gbc.setState(0x79ca, 0x8e4f, 0xdc80, 0x2dfe, 0xe76b, 0x7f28, 0x1, 0x1);
        gbc.writeMem(0x79ca, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x8e4f);
        EXPECT(gbc.pc(), 0x79cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 00F1
        gbc.setState(0xbdf7, 0x2382, 0x12c0, 0x31f0, 0x57fa, 0xd30e, 0x1, 0x0);
        gbc.writeMem(0xbdf7, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x2382);
        EXPECT(gbc.pc(), 0xbdf9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdf7), 0xcb);
        EXPECT(gbc.readMem(0xbdf8), 0x1a);
        // CB 1A 00F2
        gbc.setState(0x5d03, 0x9867, 0x7f50, 0x9ee2, 0x8aa4, 0xbf3a, 0x0, 0x1);
        gbc.writeMem(0x5d03, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x9867);
        EXPECT(gbc.pc(), 0x5d05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 00F3
        gbc.setState(0xbee3, 0xb5ad, 0xe440, 0x4728, 0x8a75, 0x117d, 0x1, 0x0);
        gbc.writeMem(0xbee3, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xb5ad);
        EXPECT(gbc.pc(), 0xbee5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbee3), 0xcb);
        EXPECT(gbc.readMem(0xbee4), 0x1a);
        // CB 1A 00F4
        gbc.setState(0x6a0, 0xc1af, 0x5ee0, 0x2756, 0xd909, 0x9258, 0x1, 0x1);
        gbc.writeMem(0x6a0, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xc1af);
        EXPECT(gbc.pc(), 0x6a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 00F5
        gbc.setState(0x496a, 0xf7f0, 0x19b0, 0x9cac, 0xd238, 0x60ca, 0x0, 0x1);
        gbc.writeMem(0x496a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xf7f0);
        EXPECT(gbc.pc(), 0x496c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 00F6
        gbc.setState(0x53f7, 0xdf11, 0xd990, 0xfb90, 0xc295, 0x62ab, 0x0, 0x0);
        gbc.writeMem(0x53f7, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xdf11);
        EXPECT(gbc.pc(), 0x53f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 00F7
        gbc.setState(0x22b2, 0xf17e, 0x7d30, 0x8525, 0xd271, 0xab83, 0x0, 0x1);
        gbc.writeMem(0x22b2, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xf17e);
        EXPECT(gbc.pc(), 0x22b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 00F8
        gbc.setState(0xdd46, 0x273e, 0x3620, 0xb5fa, 0x67be, 0xba53, 0x1, 0x0);
        gbc.writeMem(0xdd46, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x273e);
        EXPECT(gbc.pc(), 0xdd48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd46), 0xcb);
        EXPECT(gbc.readMem(0xdd47), 0x1a);
        // CB 1A 00F9
        gbc.setState(0x7a6b, 0xb585, 0x1380, 0xebe1, 0x6a7d, 0xc2e5, 0x1, 0x1);
        gbc.writeMem(0x7a6b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xb585);
        EXPECT(gbc.pc(), 0x7a6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 00FA
        gbc.setState(0xe9a, 0x7ba0, 0x2f00, 0x13da, 0x5ba0, 0xe210, 0x0, 0x0);
        gbc.writeMem(0xe9a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x7ba0);
        EXPECT(gbc.pc(), 0xe9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 00FB
        gbc.setState(0xa5f, 0x788e, 0x4290, 0xa90e, 0xd10c, 0x8f5e, 0x1, 0x1);
        gbc.writeMem(0xa5f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x788e);
        EXPECT(gbc.pc(), 0xa61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 00FD
        gbc.setState(0x92d3, 0x306, 0xc090, 0xef4d, 0x200f, 0x77f8, 0x0, 0x1);
        gbc.writeMem(0x92d3, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x306);
        EXPECT(gbc.pc(), 0x92d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92d3), 0xcb);
        EXPECT(gbc.readMem(0x92d4), 0x1a);
        // CB 1A 00FE
        gbc.setState(0xc2aa, 0xee8, 0x4e40, 0xebad, 0x51ff, 0x157a, 0x1, 0x0);
        gbc.writeMem(0xc2aa, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xee8);
        EXPECT(gbc.pc(), 0xc2ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2aa), 0xcb);
        EXPECT(gbc.readMem(0xc2ab), 0x1a);
        // CB 1A 00FF
        gbc.setState(0x378c, 0xa2f5, 0x3e10, 0x9e05, 0x7103, 0x15db, 0x0, 0x0);
        gbc.writeMem(0x378c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xa2f5);
        EXPECT(gbc.pc(), 0x378e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0100
        gbc.setState(0xa779, 0x9416, 0x3ac0, 0x5c42, 0x2343, 0x69d, 0x1, 0x1);
        gbc.writeMem(0xa779, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x9416);
        EXPECT(gbc.pc(), 0xa77b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa779), 0xcb);
        EXPECT(gbc.readMem(0xa77a), 0x1a);
        // CB 1A 0101
        gbc.setState(0xe915, 0x44dc, 0x5520, 0x649f, 0x9da4, 0xf383, 0x1, 0x1);
        gbc.writeMem(0xe915, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x44dc);
        EXPECT(gbc.pc(), 0xe917);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe915), 0xcb);
        EXPECT(gbc.readMem(0xe916), 0x1a);
        // CB 1A 0102
        gbc.setState(0xa8d5, 0xc9bc, 0x8380, 0x6514, 0xc87e, 0x6501, 0x1, 0x0);
        gbc.writeMem(0xa8d5, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xc9bc);
        EXPECT(gbc.pc(), 0xa8d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8d5), 0xcb);
        EXPECT(gbc.readMem(0xa8d6), 0x1a);
        // CB 1A 0103
        gbc.setState(0x3e65, 0xd5, 0xcbc0, 0xa9a3, 0xad97, 0x9d37, 0x0, 0x1);
        gbc.writeMem(0x3e65, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xd5);
        EXPECT(gbc.pc(), 0x3e67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0104
        gbc.setState(0x7d, 0x219b, 0x3840, 0x62b6, 0x4e50, 0xa152, 0x1, 0x1);
        gbc.writeMem(0x7d, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x219b);
        EXPECT(gbc.pc(), 0x7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0105
        gbc.setState(0x9458, 0xfb83, 0xfee0, 0xe3c7, 0x7eb5, 0xe6dd, 0x1, 0x0);
        gbc.writeMem(0x9458, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xfb83);
        EXPECT(gbc.pc(), 0x945a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9458), 0xcb);
        EXPECT(gbc.readMem(0x9459), 0x1a);
        // CB 1A 0106
        gbc.setState(0x1812, 0x43c2, 0x4f10, 0x5fc3, 0x7092, 0xfa20, 0x1, 0x0);
        gbc.writeMem(0x1812, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x43c2);
        EXPECT(gbc.pc(), 0x1814);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0107
        gbc.setState(0x8362, 0xd70a, 0x6200, 0xc49d, 0x968, 0x1c21, 0x0, 0x0);
        gbc.writeMem(0x8362, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xd70a);
        EXPECT(gbc.pc(), 0x8364);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8362), 0xcb);
        EXPECT(gbc.readMem(0x8363), 0x1a);
        // CB 1A 0108
        gbc.setState(0x8ef7, 0xcc9a, 0x5f80, 0x553e, 0xde18, 0x6eaa, 0x0, 0x0);
        gbc.writeMem(0x8ef7, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xcc9a);
        EXPECT(gbc.pc(), 0x8ef9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ef7), 0xcb);
        EXPECT(gbc.readMem(0x8ef8), 0x1a);
        // CB 1A 0109
        gbc.setState(0xe4b1, 0xc96d, 0x4f70, 0xc609, 0xcfc8, 0x132a, 0x0, 0x1);
        gbc.writeMem(0xe4b1, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xc96d);
        EXPECT(gbc.pc(), 0xe4b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4b1), 0xcb);
        EXPECT(gbc.readMem(0xe4b2), 0x1a);
        // CB 1A 010A
        gbc.setState(0xb6d9, 0x8096, 0x1460, 0x5ae9, 0xcb2c, 0xc5a5, 0x1, 0x0);
        gbc.writeMem(0xb6d9, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x8096);
        EXPECT(gbc.pc(), 0xb6db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6d9), 0xcb);
        EXPECT(gbc.readMem(0xb6da), 0x1a);
        // CB 1A 010B
        gbc.setState(0x9aec, 0x1a64, 0x2c0, 0x9fba, 0xf31f, 0x2dca, 0x1, 0x0);
        gbc.writeMem(0x9aec, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x1a64);
        EXPECT(gbc.pc(), 0x9aee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9aec), 0xcb);
        EXPECT(gbc.readMem(0x9aed), 0x1a);
        // CB 1A 010C
        gbc.setState(0x83bb, 0x990f, 0x6120, 0x44bd, 0x917, 0x4234, 0x1, 0x0);
        gbc.writeMem(0x83bb, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x990f);
        EXPECT(gbc.pc(), 0x83bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83bb), 0xcb);
        EXPECT(gbc.readMem(0x83bc), 0x1a);
        // CB 1A 010D
        gbc.setState(0xaf87, 0xfaf0, 0x6f0, 0x2dd6, 0x69ca, 0xf6a8, 0x1, 0x1);
        gbc.writeMem(0xaf87, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xfaf0);
        EXPECT(gbc.pc(), 0xaf89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf87), 0xcb);
        EXPECT(gbc.readMem(0xaf88), 0x1a);
        // CB 1A 010E
        gbc.setState(0xe1ed, 0x7d56, 0x8aa0, 0x288d, 0x807d, 0x97aa, 0x1, 0x0);
        gbc.writeMem(0xe1ed, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x7d56);
        EXPECT(gbc.pc(), 0xe1ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1ed), 0xcb);
        EXPECT(gbc.readMem(0xe1ee), 0x1a);
        // CB 1A 0110
        gbc.setState(0x8e91, 0xc2d9, 0xd9d0, 0xc569, 0x2cce, 0xc9e2, 0x1, 0x0);
        gbc.writeMem(0x8e91, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xc2d9);
        EXPECT(gbc.pc(), 0x8e93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e91), 0xcb);
        EXPECT(gbc.readMem(0x8e92), 0x1a);
        // CB 1A 0111
        gbc.setState(0x4e61, 0xc064, 0x67d0, 0x78ed, 0x9ef8, 0x29c, 0x1, 0x1);
        gbc.writeMem(0x4e61, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xc064);
        EXPECT(gbc.pc(), 0x4e63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0112
        gbc.setState(0xde37, 0x96d9, 0x45a0, 0xd4a8, 0xf867, 0x4ba7, 0x1, 0x0);
        gbc.writeMem(0xde37, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x96d9);
        EXPECT(gbc.pc(), 0xde39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde37), 0xcb);
        EXPECT(gbc.readMem(0xde38), 0x1a);
        // CB 1A 0113
        gbc.setState(0x4fee, 0x3807, 0xba70, 0xcb04, 0x5e16, 0xfb3d, 0x0, 0x0);
        gbc.writeMem(0x4fee, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x3807);
        EXPECT(gbc.pc(), 0x4ff0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0114
        gbc.setState(0x8afd, 0x130e, 0xfb30, 0x17ae, 0xf432, 0x8d95, 0x0, 0x0);
        gbc.writeMem(0x8afd, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x130e);
        EXPECT(gbc.pc(), 0x8aff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8afd), 0xcb);
        EXPECT(gbc.readMem(0x8afe), 0x1a);
        // CB 1A 0115
        gbc.setState(0xc8d1, 0x7f6f, 0xe370, 0xa5f6, 0xc137, 0xf4ab, 0x1, 0x0);
        gbc.writeMem(0xc8d1, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x7f6f);
        EXPECT(gbc.pc(), 0xc8d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8d1), 0xcb);
        EXPECT(gbc.readMem(0xc8d2), 0x1a);
        // CB 1A 0116
        gbc.setState(0x9e39, 0x1cea, 0x63b0, 0x6fb6, 0xb3c4, 0x14dd, 0x0, 0x1);
        gbc.writeMem(0x9e39, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x1cea);
        EXPECT(gbc.pc(), 0x9e3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e39), 0xcb);
        EXPECT(gbc.readMem(0x9e3a), 0x1a);
        // CB 1A 0117
        gbc.setState(0x9642, 0xfe11, 0x90a0, 0xc3b0, 0x61af, 0x3025, 0x1, 0x0);
        gbc.writeMem(0x9642, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xfe11);
        EXPECT(gbc.pc(), 0x9644);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9642), 0xcb);
        EXPECT(gbc.readMem(0x9643), 0x1a);
        // CB 1A 0118
        gbc.setState(0x47b2, 0x1e2d, 0xd6c0, 0x1444, 0xd444, 0x473d, 0x1, 0x1);
        gbc.writeMem(0x47b2, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x1e2d);
        EXPECT(gbc.pc(), 0x47b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0119
        gbc.setState(0xa1c4, 0xbe88, 0x7b50, 0x4e14, 0x748f, 0x8058, 0x0, 0x0);
        gbc.writeMem(0xa1c4, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xbe88);
        EXPECT(gbc.pc(), 0xa1c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1c4), 0xcb);
        EXPECT(gbc.readMem(0xa1c5), 0x1a);
        // CB 1A 011A
        gbc.setState(0x171b, 0x85ca, 0x75a0, 0xfa27, 0x72f0, 0x59f4, 0x1, 0x1);
        gbc.writeMem(0x171b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x85ca);
        EXPECT(gbc.pc(), 0x171d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 011B
        gbc.setState(0xe4c6, 0x9485, 0x8bd0, 0x6d2, 0x93f1, 0x5dd4, 0x1, 0x1);
        gbc.writeMem(0xe4c6, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x9485);
        EXPECT(gbc.pc(), 0xe4c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4c6), 0xcb);
        EXPECT(gbc.readMem(0xe4c7), 0x1a);
        // CB 1A 011C
        gbc.setState(0x5c66, 0x85ee, 0x3010, 0xf963, 0x3f8b, 0x8582, 0x1, 0x1);
        gbc.writeMem(0x5c66, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x85ee);
        EXPECT(gbc.pc(), 0x5c68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 011D
        gbc.setState(0x1f80, 0x2ce9, 0xbe50, 0x6a94, 0xb84d, 0xac92, 0x1, 0x0);
        gbc.writeMem(0x1f80, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x2ce9);
        EXPECT(gbc.pc(), 0x1f82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 011E
        gbc.setState(0x5323, 0x6ac2, 0xfd0, 0x8db7, 0xa563, 0xb082, 0x0, 0x1);
        gbc.writeMem(0x5323, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x6ac2);
        EXPECT(gbc.pc(), 0x5325);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 011F
        gbc.setState(0x6b89, 0x4b42, 0x5d30, 0x54ae, 0xf927, 0x1897, 0x1, 0x1);
        gbc.writeMem(0x6b89, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x4b42);
        EXPECT(gbc.pc(), 0x6b8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0120
        gbc.setState(0x7ae5, 0x5b74, 0xeda0, 0x703, 0x108f, 0x8cf6, 0x0, 0x1);
        gbc.writeMem(0x7ae5, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x5b74);
        EXPECT(gbc.pc(), 0x7ae7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0121
        gbc.setState(0x4ce5, 0x291, 0xc0f0, 0x7208, 0x41b1, 0x810e, 0x1, 0x1);
        gbc.writeMem(0x4ce5, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x291);
        EXPECT(gbc.pc(), 0x4ce7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0122
        gbc.setState(0x1b1c, 0x5892, 0x6860, 0x124d, 0x1a25, 0x5e4c, 0x1, 0x1);
        gbc.writeMem(0x1b1c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x5892);
        EXPECT(gbc.pc(), 0x1b1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0123
        gbc.setState(0xe342, 0x84bc, 0xeb20, 0x5522, 0x194c, 0x1a05, 0x1, 0x1);
        gbc.writeMem(0xe342, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x84bc);
        EXPECT(gbc.pc(), 0xe344);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe342), 0xcb);
        EXPECT(gbc.readMem(0xe343), 0x1a);
        // CB 1A 0124
        gbc.setState(0xc71c, 0x2dde, 0xe730, 0x93cc, 0x4f89, 0xaf4f, 0x1, 0x1);
        gbc.writeMem(0xc71c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x2dde);
        EXPECT(gbc.pc(), 0xc71e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc71c), 0xcb);
        EXPECT(gbc.readMem(0xc71d), 0x1a);
        // CB 1A 0125
        gbc.setState(0x4a4, 0xaed6, 0xfee0, 0x8834, 0x5cd4, 0xdcee, 0x1, 0x0);
        gbc.writeMem(0x4a4, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xaed6);
        EXPECT(gbc.pc(), 0x4a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0126
        gbc.setState(0x94b0, 0x931a, 0x26c0, 0x30b7, 0x8499, 0x88c3, 0x1, 0x1);
        gbc.writeMem(0x94b0, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x931a);
        EXPECT(gbc.pc(), 0x94b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94b0), 0xcb);
        EXPECT(gbc.readMem(0x94b1), 0x1a);
        // CB 1A 0127
        gbc.setState(0xeece, 0x2f40, 0x4860, 0xe026, 0xbb9a, 0x6cdd, 0x1, 0x1);
        gbc.writeMem(0xeece, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x2f40);
        EXPECT(gbc.pc(), 0xeed0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeece), 0xcb);
        EXPECT(gbc.readMem(0xeecf), 0x1a);
        // CB 1A 0128
        gbc.setState(0x593c, 0x4ce4, 0xe640, 0x6602, 0x7ac3, 0x1c59, 0x0, 0x0);
        gbc.writeMem(0x593c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x4ce4);
        EXPECT(gbc.pc(), 0x593e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0129
        gbc.setState(0x7ba1, 0x6a6b, 0x54f0, 0xcfa4, 0xa5f, 0x53e2, 0x1, 0x0);
        gbc.writeMem(0x7ba1, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x6a6b);
        EXPECT(gbc.pc(), 0x7ba3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 012A
        gbc.setState(0x2588, 0xe8b, 0xfa70, 0xa4ac, 0x5af0, 0x1a6e, 0x1, 0x1);
        gbc.writeMem(0x2588, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xe8b);
        EXPECT(gbc.pc(), 0x258a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 012B
        gbc.setState(0xaeed, 0xd7a, 0x4580, 0xe68a, 0x944d, 0xd645, 0x0, 0x0);
        gbc.writeMem(0xaeed, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xd7a);
        EXPECT(gbc.pc(), 0xaeef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaeed), 0xcb);
        EXPECT(gbc.readMem(0xaeee), 0x1a);
        // CB 1A 012C
        gbc.setState(0xc0f8, 0xb4bb, 0x58c0, 0x571b, 0x5804, 0xd6f4, 0x0, 0x0);
        gbc.writeMem(0xc0f8, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xb4bb);
        EXPECT(gbc.pc(), 0xc0fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0f8), 0xcb);
        EXPECT(gbc.readMem(0xc0f9), 0x1a);
        // CB 1A 012D
        gbc.setState(0x5a58, 0x2c2a, 0xf990, 0xb373, 0x860f, 0x4713, 0x0, 0x1);
        gbc.writeMem(0x5a58, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x2c2a);
        EXPECT(gbc.pc(), 0x5a5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 012E
        gbc.setState(0xbad1, 0x6d5b, 0xcdb0, 0xba34, 0xb766, 0xcd3c, 0x1, 0x1);
        gbc.writeMem(0xbad1, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x6d5b);
        EXPECT(gbc.pc(), 0xbad3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbad1), 0xcb);
        EXPECT(gbc.readMem(0xbad2), 0x1a);
        // CB 1A 012F
        gbc.setState(0x447, 0x58f, 0x4e80, 0x266c, 0x15de, 0x424, 0x1, 0x0);
        gbc.writeMem(0x447, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x58f);
        EXPECT(gbc.pc(), 0x449);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0130
        gbc.setState(0xdafe, 0xf53a, 0xe960, 0xd335, 0x3eae, 0x22e7, 0x0, 0x0);
        gbc.writeMem(0xdafe, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xf53a);
        EXPECT(gbc.pc(), 0xdb00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdafe), 0xcb);
        EXPECT(gbc.readMem(0xdaff), 0x1a);
        // CB 1A 0131
        gbc.setState(0x3f4e, 0x851c, 0xb8c0, 0x1653, 0x36d9, 0x2365, 0x1, 0x1);
        gbc.writeMem(0x3f4e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x851c);
        EXPECT(gbc.pc(), 0x3f50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0132
        gbc.setState(0x94bc, 0x2508, 0xba0, 0x66a8, 0xb33, 0x236f, 0x1, 0x1);
        gbc.writeMem(0x94bc, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x2508);
        EXPECT(gbc.pc(), 0x94be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94bc), 0xcb);
        EXPECT(gbc.readMem(0x94bd), 0x1a);
        // CB 1A 0133
        gbc.setState(0xda55, 0x72f3, 0x30, 0x9120, 0x3f9, 0x3d22, 0x1, 0x1);
        gbc.writeMem(0xda55, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x72f3);
        EXPECT(gbc.pc(), 0xda57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda55), 0xcb);
        EXPECT(gbc.readMem(0xda56), 0x1a);
        // CB 1A 0135
        gbc.setState(0xec, 0xbb32, 0x5e90, 0x4c9d, 0xe98a, 0x9a67, 0x0, 0x1);
        gbc.writeMem(0xec, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xbb32);
        EXPECT(gbc.pc(), 0xee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0136
        gbc.setState(0x21bb, 0x4ec5, 0x16d0, 0x8e3f, 0xac89, 0x1e0e, 0x0, 0x1);
        gbc.writeMem(0x21bb, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x4ec5);
        EXPECT(gbc.pc(), 0x21bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0137
        gbc.setState(0x2c25, 0x8c1a, 0x20, 0xac15, 0x70f2, 0xd115, 0x1, 0x0);
        gbc.writeMem(0x2c25, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x8c1a);
        EXPECT(gbc.pc(), 0x2c27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0138
        gbc.setState(0x59be, 0x5327, 0x7760, 0x214b, 0x4821, 0xc0ca, 0x1, 0x0);
        gbc.writeMem(0x59be, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x5327);
        EXPECT(gbc.pc(), 0x59c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 013A
        gbc.setState(0x15f7, 0x3179, 0xf9a0, 0xf158, 0x477c, 0x9b4, 0x0, 0x0);
        gbc.writeMem(0x15f7, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x3179);
        EXPECT(gbc.pc(), 0x15f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 013B
        gbc.setState(0x3bbb, 0xb098, 0xf2e0, 0xa8e6, 0xb5ca, 0x3d92, 0x1, 0x0);
        gbc.writeMem(0x3bbb, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xb098);
        EXPECT(gbc.pc(), 0x3bbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 013C
        gbc.setState(0x87ad, 0x6574, 0x7230, 0x72ce, 0xd9d8, 0x394d, 0x0, 0x1);
        gbc.writeMem(0x87ad, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x6574);
        EXPECT(gbc.pc(), 0x87af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87ad), 0xcb);
        EXPECT(gbc.readMem(0x87ae), 0x1a);
        // CB 1A 013D
        gbc.setState(0x7708, 0xdd17, 0x210, 0xd3df, 0xc684, 0x5020, 0x1, 0x0);
        gbc.writeMem(0x7708, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xdd17);
        EXPECT(gbc.pc(), 0x770a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 013E
        gbc.setState(0x3e66, 0xd529, 0xc4d0, 0xf3df, 0x5e74, 0x9c84, 0x1, 0x1);
        gbc.writeMem(0x3e66, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xd529);
        EXPECT(gbc.pc(), 0x3e68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 013F
        gbc.setState(0x4093, 0xac51, 0xcc60, 0xdfc0, 0x7e2f, 0xebc0, 0x0, 0x0);
        gbc.writeMem(0x4093, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xac51);
        EXPECT(gbc.pc(), 0x4095);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0140
        gbc.setState(0x7600, 0xf8b8, 0x2f80, 0x6432, 0x45b, 0x64c2, 0x0, 0x1);
        gbc.writeMem(0x7600, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xf8b8);
        EXPECT(gbc.pc(), 0x7602);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0141
        gbc.setState(0x87da, 0x996f, 0x88d0, 0x4be, 0x4567, 0x6fd9, 0x1, 0x1);
        gbc.writeMem(0x87da, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x996f);
        EXPECT(gbc.pc(), 0x87dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87da), 0xcb);
        EXPECT(gbc.readMem(0x87db), 0x1a);
        // CB 1A 0142
        gbc.setState(0xa4f3, 0xa44, 0xcef0, 0x7308, 0x14fd, 0x772f, 0x1, 0x0);
        gbc.writeMem(0xa4f3, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xa44);
        EXPECT(gbc.pc(), 0xa4f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4f3), 0xcb);
        EXPECT(gbc.readMem(0xa4f4), 0x1a);
        // CB 1A 0143
        gbc.setState(0xe1a, 0x503c, 0x3aa0, 0x4604, 0xeb66, 0x2c43, 0x0, 0x0);
        gbc.writeMem(0xe1a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x503c);
        EXPECT(gbc.pc(), 0xe1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0144
        gbc.setState(0x7082, 0x37aa, 0xbb10, 0xbcd3, 0x2dde, 0xb82b, 0x0, 0x0);
        gbc.writeMem(0x7082, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x37aa);
        EXPECT(gbc.pc(), 0x7084);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0145
        gbc.setState(0x13da, 0x9f7, 0xbee0, 0xe2b8, 0xadb8, 0x2ee6, 0x1, 0x0);
        gbc.writeMem(0x13da, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x9f7);
        EXPECT(gbc.pc(), 0x13dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0146
        gbc.setState(0xae1b, 0x860b, 0xad60, 0x2c51, 0xfc60, 0x521d, 0x1, 0x1);
        gbc.writeMem(0xae1b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x860b);
        EXPECT(gbc.pc(), 0xae1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae1b), 0xcb);
        EXPECT(gbc.readMem(0xae1c), 0x1a);
        // CB 1A 0147
        gbc.setState(0x42ab, 0xf307, 0x5080, 0x444, 0x3c6d, 0x11d8, 0x0, 0x1);
        gbc.writeMem(0x42ab, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xf307);
        EXPECT(gbc.pc(), 0x42ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0148
        gbc.setState(0x72e8, 0xfef7, 0x9200, 0xee84, 0x5853, 0xe33d, 0x0, 0x0);
        gbc.writeMem(0x72e8, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xfef7);
        EXPECT(gbc.pc(), 0x72ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0149
        gbc.setState(0x39fc, 0x8ce3, 0xbd80, 0x650e, 0x23f4, 0xd458, 0x1, 0x1);
        gbc.writeMem(0x39fc, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x8ce3);
        EXPECT(gbc.pc(), 0x39fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 014A
        gbc.setState(0xa1b, 0x2eef, 0x5e40, 0xffbd, 0xb037, 0x8eab, 0x0, 0x0);
        gbc.writeMem(0xa1b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x2eef);
        EXPECT(gbc.pc(), 0xa1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 014B
        gbc.setState(0x2b55, 0x305b, 0xb9b0, 0x14a8, 0xbb3b, 0xc696, 0x0, 0x1);
        gbc.writeMem(0x2b55, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x305b);
        EXPECT(gbc.pc(), 0x2b57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 014C
        gbc.setState(0xa278, 0x4a3f, 0xcec0, 0x8e1e, 0xf3d3, 0xc82c, 0x1, 0x0);
        gbc.writeMem(0xa278, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x4a3f);
        EXPECT(gbc.pc(), 0xa27a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa278), 0xcb);
        EXPECT(gbc.readMem(0xa279), 0x1a);
        // CB 1A 014D
        gbc.setState(0x39ca, 0x4a76, 0x4900, 0xe6a3, 0x3f5f, 0x1389, 0x0, 0x1);
        gbc.writeMem(0x39ca, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x4a76);
        EXPECT(gbc.pc(), 0x39cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 014F
        gbc.setState(0xb072, 0xd346, 0x4a0, 0x9d65, 0x79d0, 0xaae4, 0x1, 0x1);
        gbc.writeMem(0xb072, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xd346);
        EXPECT(gbc.pc(), 0xb074);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb072), 0xcb);
        EXPECT(gbc.readMem(0xb073), 0x1a);
        // CB 1A 0150
        gbc.setState(0x84f1, 0x1a30, 0xd880, 0x15b8, 0x61db, 0x5caf, 0x1, 0x0);
        gbc.writeMem(0x84f1, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x1a30);
        EXPECT(gbc.pc(), 0x84f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84f1), 0xcb);
        EXPECT(gbc.readMem(0x84f2), 0x1a);
        // CB 1A 0151
        gbc.setState(0x1c67, 0x5e43, 0x9940, 0xf167, 0x4754, 0xe477, 0x0, 0x1);
        gbc.writeMem(0x1c67, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x5e43);
        EXPECT(gbc.pc(), 0x1c69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0152
        gbc.setState(0x4094, 0xbede, 0x6400, 0xb708, 0x6718, 0x1377, 0x0, 0x1);
        gbc.writeMem(0x4094, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xbede);
        EXPECT(gbc.pc(), 0x4096);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0154
        gbc.setState(0x156, 0xe31, 0x1000, 0x3dd5, 0x9aa9, 0xa24e, 0x1, 0x0);
        gbc.writeMem(0x156, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xe31);
        EXPECT(gbc.pc(), 0x158);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0155
        gbc.setState(0x38bd, 0xf8e2, 0xcf90, 0x9a4a, 0xc08a, 0xab35, 0x1, 0x1);
        gbc.writeMem(0x38bd, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xf8e2);
        EXPECT(gbc.pc(), 0x38bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0156
        gbc.setState(0x218f, 0xac87, 0xd50, 0x18f5, 0x2867, 0x5b20, 0x0, 0x0);
        gbc.writeMem(0x218f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xac87);
        EXPECT(gbc.pc(), 0x2191);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0157
        gbc.setState(0xbc77, 0x18ae, 0xd540, 0x5f6a, 0x91ce, 0x40d7, 0x1, 0x0);
        gbc.writeMem(0xbc77, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x18ae);
        EXPECT(gbc.pc(), 0xbc79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc77), 0xcb);
        EXPECT(gbc.readMem(0xbc78), 0x1a);
        // CB 1A 0158
        gbc.setState(0x34b2, 0xdd06, 0xbda0, 0x9c6d, 0xb5ab, 0xaf98, 0x0, 0x0);
        gbc.writeMem(0x34b2, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xdd06);
        EXPECT(gbc.pc(), 0x34b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0159
        gbc.setState(0x416c, 0x1737, 0xfac0, 0x73a9, 0x1382, 0x753b, 0x1, 0x1);
        gbc.writeMem(0x416c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x1737);
        EXPECT(gbc.pc(), 0x416e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 015A
        gbc.setState(0x1c3d, 0xe716, 0xdb0, 0xc3c6, 0xac28, 0xed81, 0x1, 0x1);
        gbc.writeMem(0x1c3d, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xe716);
        EXPECT(gbc.pc(), 0x1c3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 015B
        gbc.setState(0x2eaa, 0x3d5f, 0x3370, 0x54fc, 0xdbc7, 0x1706, 0x0, 0x0);
        gbc.writeMem(0x2eaa, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x3d5f);
        EXPECT(gbc.pc(), 0x2eac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 015C
        gbc.setState(0x8384, 0xc995, 0x4a00, 0x98ca, 0xbb4, 0x99f9, 0x0, 0x1);
        gbc.writeMem(0x8384, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xc995);
        EXPECT(gbc.pc(), 0x8386);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8384), 0xcb);
        EXPECT(gbc.readMem(0x8385), 0x1a);
        // CB 1A 015D
        gbc.setState(0x7b57, 0x48b9, 0xdbb0, 0xb0f8, 0x7516, 0xd7a6, 0x1, 0x1);
        gbc.writeMem(0x7b57, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x48b9);
        EXPECT(gbc.pc(), 0x7b59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 015E
        gbc.setState(0xc140, 0xce7c, 0x9400, 0x48d0, 0x1551, 0x3847, 0x0, 0x0);
        gbc.writeMem(0xc140, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xce7c);
        EXPECT(gbc.pc(), 0xc142);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc140), 0xcb);
        EXPECT(gbc.readMem(0xc141), 0x1a);
        // CB 1A 015F
        gbc.setState(0x9ddc, 0xc63c, 0xa40, 0x4dd1, 0xb8d2, 0xbf89, 0x1, 0x1);
        gbc.writeMem(0x9ddc, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xc63c);
        EXPECT(gbc.pc(), 0x9dde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ddc), 0xcb);
        EXPECT(gbc.readMem(0x9ddd), 0x1a);
        // CB 1A 0160
        gbc.setState(0x41ba, 0x908f, 0x5790, 0x15a0, 0x406d, 0x68a0, 0x0, 0x0);
        gbc.writeMem(0x41ba, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x908f);
        EXPECT(gbc.pc(), 0x41bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0161
        gbc.setState(0xb7a9, 0x8f85, 0x51e0, 0xaf00, 0x9616, 0xdf50, 0x0, 0x1);
        gbc.writeMem(0xb7a9, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x8f85);
        EXPECT(gbc.pc(), 0xb7ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7a9), 0xcb);
        EXPECT(gbc.readMem(0xb7aa), 0x1a);
        // CB 1A 0162
        gbc.setState(0x3ee9, 0x8045, 0x38e0, 0xaf05, 0xf032, 0x85ad, 0x1, 0x1);
        gbc.writeMem(0x3ee9, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x8045);
        EXPECT(gbc.pc(), 0x3eeb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0163
        gbc.setState(0x8318, 0x26f6, 0xd040, 0x611a, 0x80fe, 0xd783, 0x0, 0x0);
        gbc.writeMem(0x8318, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x26f6);
        EXPECT(gbc.pc(), 0x831a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8318), 0xcb);
        EXPECT(gbc.readMem(0x8319), 0x1a);
        // CB 1A 0164
        gbc.setState(0x650c, 0xc6b9, 0x2840, 0xcaf1, 0x22f1, 0x847a, 0x0, 0x0);
        gbc.writeMem(0x650c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xc6b9);
        EXPECT(gbc.pc(), 0x650e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0165
        gbc.setState(0xc1c0, 0xd467, 0x9170, 0x7dc2, 0xdb97, 0x1045, 0x0, 0x1);
        gbc.writeMem(0xc1c0, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xd467);
        EXPECT(gbc.pc(), 0xc1c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1c0), 0xcb);
        EXPECT(gbc.readMem(0xc1c1), 0x1a);
        // CB 1A 0166
        gbc.setState(0x2003, 0x233d, 0x6cd0, 0x6628, 0xb4fc, 0xcee3, 0x0, 0x1);
        gbc.writeMem(0x2003, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x233d);
        EXPECT(gbc.pc(), 0x2005);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0168
        gbc.setState(0x67a2, 0xfb08, 0xe500, 0x5010, 0xfa7e, 0x4756, 0x0, 0x1);
        gbc.writeMem(0x67a2, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xfb08);
        EXPECT(gbc.pc(), 0x67a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0169
        gbc.setState(0x77e7, 0xee31, 0xec50, 0x53b1, 0xeaf0, 0x5419, 0x1, 0x1);
        gbc.writeMem(0x77e7, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xee31);
        EXPECT(gbc.pc(), 0x77e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 016A
        gbc.setState(0xbcec, 0x49f9, 0xe1c0, 0x61fc, 0x321f, 0x89ea, 0x1, 0x1);
        gbc.writeMem(0xbcec, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x49f9);
        EXPECT(gbc.pc(), 0xbcee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcec), 0xcb);
        EXPECT(gbc.readMem(0xbced), 0x1a);
        // CB 1A 016B
        gbc.setState(0xab1a, 0x2eca, 0xbb20, 0xf65f, 0x105f, 0xafd2, 0x0, 0x0);
        gbc.writeMem(0xab1a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x2eca);
        EXPECT(gbc.pc(), 0xab1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab1a), 0xcb);
        EXPECT(gbc.readMem(0xab1b), 0x1a);
        // CB 1A 016C
        gbc.setState(0xa111, 0xc2b3, 0x46c0, 0x23df, 0xfd96, 0xd717, 0x1, 0x1);
        gbc.writeMem(0xa111, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xc2b3);
        EXPECT(gbc.pc(), 0xa113);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa111), 0xcb);
        EXPECT(gbc.readMem(0xa112), 0x1a);
        // CB 1A 016D
        gbc.setState(0x8e36, 0xf094, 0x5690, 0x1801, 0xc73d, 0xec8e, 0x1, 0x1);
        gbc.writeMem(0x8e36, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xf094);
        EXPECT(gbc.pc(), 0x8e38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e36), 0xcb);
        EXPECT(gbc.readMem(0x8e37), 0x1a);
        // CB 1A 016E
        gbc.setState(0x6b7c, 0x6880, 0x23f0, 0x8471, 0x9c6a, 0x4c42, 0x1, 0x1);
        gbc.writeMem(0x6b7c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x6880);
        EXPECT(gbc.pc(), 0x6b7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 016F
        gbc.setState(0x8ce7, 0xacd9, 0xe430, 0x7e2d, 0xbb3f, 0xd3e7, 0x1, 0x1);
        gbc.writeMem(0x8ce7, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xacd9);
        EXPECT(gbc.pc(), 0x8ce9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ce7), 0xcb);
        EXPECT(gbc.readMem(0x8ce8), 0x1a);
        // CB 1A 0170
        gbc.setState(0xa399, 0x887e, 0x1840, 0xd02e, 0xfb6c, 0xa758, 0x0, 0x0);
        gbc.writeMem(0xa399, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x887e);
        EXPECT(gbc.pc(), 0xa39b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa399), 0xcb);
        EXPECT(gbc.readMem(0xa39a), 0x1a);
        // CB 1A 0171
        gbc.setState(0x7c5b, 0x4a89, 0x5740, 0xb2c0, 0xd6ce, 0x6ac8, 0x1, 0x1);
        gbc.writeMem(0x7c5b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x4a89);
        EXPECT(gbc.pc(), 0x7c5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0172
        gbc.setState(0xba3e, 0x504f, 0xf80, 0x7e30, 0xa50a, 0xb9ae, 0x1, 0x1);
        gbc.writeMem(0xba3e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x504f);
        EXPECT(gbc.pc(), 0xba40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba3e), 0xcb);
        EXPECT(gbc.readMem(0xba3f), 0x1a);
        // CB 1A 0173
        gbc.setState(0xd724, 0x8377, 0xeac0, 0x2472, 0x1f6, 0x3449, 0x0, 0x0);
        gbc.writeMem(0xd724, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x8377);
        EXPECT(gbc.pc(), 0xd726);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd724), 0xcb);
        EXPECT(gbc.readMem(0xd725), 0x1a);
        // CB 1A 0174
        gbc.setState(0x31f, 0x3dab, 0x6de0, 0xee18, 0x2294, 0x3303, 0x1, 0x0);
        gbc.writeMem(0x31f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x3dab);
        EXPECT(gbc.pc(), 0x321);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0175
        gbc.setState(0xbd1b, 0x6b92, 0x4b00, 0xaed, 0x3fee, 0x6c7, 0x0, 0x0);
        gbc.writeMem(0xbd1b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x6b92);
        EXPECT(gbc.pc(), 0xbd1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd1b), 0xcb);
        EXPECT(gbc.readMem(0xbd1c), 0x1a);
        // CB 1A 0176
        gbc.setState(0x6f7f, 0x61c5, 0x67e0, 0x6a50, 0xcf40, 0xcb2b, 0x0, 0x1);
        gbc.writeMem(0x6f7f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x61c5);
        EXPECT(gbc.pc(), 0x6f81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0177
        gbc.setState(0x18de, 0x5d15, 0x3270, 0x8d9c, 0x4aff, 0x22dc, 0x0, 0x0);
        gbc.writeMem(0x18de, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x5d15);
        EXPECT(gbc.pc(), 0x18e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0178
        gbc.setState(0xea01, 0x2ffd, 0xdef0, 0x8de0, 0x2cbe, 0xb503, 0x1, 0x1);
        gbc.writeMem(0xea01, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x2ffd);
        EXPECT(gbc.pc(), 0xea03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea01), 0xcb);
        EXPECT(gbc.readMem(0xea02), 0x1a);
        // CB 1A 0179
        gbc.setState(0x1e66, 0xe5e9, 0x21a0, 0x6955, 0x5333, 0x1a55, 0x0, 0x1);
        gbc.writeMem(0x1e66, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xe5e9);
        EXPECT(gbc.pc(), 0x1e68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 017A
        gbc.setState(0x4d0a, 0x496c, 0xce90, 0x8783, 0x8f2f, 0xbe81, 0x0, 0x0);
        gbc.writeMem(0x4d0a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x496c);
        EXPECT(gbc.pc(), 0x4d0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 017B
        gbc.setState(0x87b7, 0x1958, 0x40, 0xab3, 0x672e, 0x4a7e, 0x0, 0x1);
        gbc.writeMem(0x87b7, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x1958);
        EXPECT(gbc.pc(), 0x87b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87b7), 0xcb);
        EXPECT(gbc.readMem(0x87b8), 0x1a);
        // CB 1A 017C
        gbc.setState(0x5743, 0x5625, 0x240, 0x8d97, 0x2abe, 0xae79, 0x1, 0x1);
        gbc.writeMem(0x5743, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x5625);
        EXPECT(gbc.pc(), 0x5745);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 017D
        gbc.setState(0x5f04, 0xeb6a, 0x40d0, 0x9860, 0x3760, 0x89e4, 0x1, 0x1);
        gbc.writeMem(0x5f04, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xeb6a);
        EXPECT(gbc.pc(), 0x5f06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 017E
        gbc.setState(0x4fc3, 0x94d0, 0xec0, 0xd743, 0xf3d2, 0xfe0f, 0x1, 0x0);
        gbc.writeMem(0x4fc3, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x94d0);
        EXPECT(gbc.pc(), 0x4fc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 017F
        gbc.setState(0xe722, 0x3ebb, 0x17a0, 0x42c9, 0x2869, 0x89a, 0x0, 0x1);
        gbc.writeMem(0xe722, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x3ebb);
        EXPECT(gbc.pc(), 0xe724);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe722), 0xcb);
        EXPECT(gbc.readMem(0xe723), 0x1a);
        // CB 1A 0180
        gbc.setState(0x3a0, 0x6d5e, 0x3310, 0x35eb, 0x98dd, 0x1216, 0x0, 0x1);
        gbc.writeMem(0x3a0, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x6d5e);
        EXPECT(gbc.pc(), 0x3a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0181
        gbc.setState(0x3804, 0xf6b8, 0xf4b0, 0xcabd, 0x7ea, 0x4f9a, 0x0, 0x0);
        gbc.writeMem(0x3804, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xf6b8);
        EXPECT(gbc.pc(), 0x3806);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0182
        gbc.setState(0xc96b, 0xffe4, 0x46d0, 0x310a, 0xc768, 0x1694, 0x1, 0x0);
        gbc.writeMem(0xc96b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xffe4);
        EXPECT(gbc.pc(), 0xc96d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc96b), 0xcb);
        EXPECT(gbc.readMem(0xc96c), 0x1a);
        // CB 1A 0183
        gbc.setState(0x51d2, 0xca5, 0xbaa0, 0xfac6, 0xd89b, 0x1a, 0x1, 0x0);
        gbc.writeMem(0x51d2, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xca5);
        EXPECT(gbc.pc(), 0x51d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0184
        gbc.setState(0x13f9, 0xc33c, 0x91d0, 0x2627, 0x56b6, 0xde52, 0x1, 0x1);
        gbc.writeMem(0x13f9, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xc33c);
        EXPECT(gbc.pc(), 0x13fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0185
        gbc.setState(0xbfd9, 0xdec1, 0xe290, 0x81a, 0xcaf1, 0x269a, 0x0, 0x0);
        gbc.writeMem(0xbfd9, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xdec1);
        EXPECT(gbc.pc(), 0xbfdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfd9), 0xcb);
        EXPECT(gbc.readMem(0xbfda), 0x1a);
        // CB 1A 0186
        gbc.setState(0x7981, 0x6c1a, 0xe840, 0x7142, 0x6844, 0x5314, 0x0, 0x1);
        gbc.writeMem(0x7981, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x6c1a);
        EXPECT(gbc.pc(), 0x7983);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0187
        gbc.setState(0xa3eb, 0x70e1, 0x3930, 0xdf46, 0x69fd, 0xb4ab, 0x1, 0x0);
        gbc.writeMem(0xa3eb, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x70e1);
        EXPECT(gbc.pc(), 0xa3ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3eb), 0xcb);
        EXPECT(gbc.readMem(0xa3ec), 0x1a);
        // CB 1A 0188
        gbc.setState(0xdcbb, 0x5aaa, 0x7b80, 0xbaa5, 0x2a57, 0xca80, 0x0, 0x0);
        gbc.writeMem(0xdcbb, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x5aaa);
        EXPECT(gbc.pc(), 0xdcbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcbb), 0xcb);
        EXPECT(gbc.readMem(0xdcbc), 0x1a);
        // CB 1A 0189
        gbc.setState(0xe916, 0xdc0d, 0xecf0, 0x96a2, 0x6ec7, 0xc245, 0x0, 0x1);
        gbc.writeMem(0xe916, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xdc0d);
        EXPECT(gbc.pc(), 0xe918);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe916), 0xcb);
        EXPECT(gbc.readMem(0xe917), 0x1a);
        // CB 1A 018A
        gbc.setState(0x2a32, 0x7509, 0x7970, 0xb289, 0xa1cb, 0x9c61, 0x0, 0x1);
        gbc.writeMem(0x2a32, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x7509);
        EXPECT(gbc.pc(), 0x2a34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 018B
        gbc.setState(0x78ec, 0xb680, 0x5790, 0xdae0, 0x5f4a, 0x7798, 0x0, 0x0);
        gbc.writeMem(0x78ec, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xb680);
        EXPECT(gbc.pc(), 0x78ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 018C
        gbc.setState(0x3ea4, 0xf2f3, 0x5c20, 0xbd44, 0xd92, 0xf6bf, 0x1, 0x1);
        gbc.writeMem(0x3ea4, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xf2f3);
        EXPECT(gbc.pc(), 0x3ea6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 018D
        gbc.setState(0xb581, 0xe441, 0x2d80, 0xd8c0, 0xd0c, 0xbf69, 0x1, 0x0);
        gbc.writeMem(0xb581, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xe441);
        EXPECT(gbc.pc(), 0xb583);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb581), 0xcb);
        EXPECT(gbc.readMem(0xb582), 0x1a);
        // CB 1A 018E
        gbc.setState(0xcf64, 0x549a, 0xe9a0, 0x6309, 0x5ed4, 0xbdf4, 0x1, 0x0);
        gbc.writeMem(0xcf64, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x549a);
        EXPECT(gbc.pc(), 0xcf66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf64), 0xcb);
        EXPECT(gbc.readMem(0xcf65), 0x1a);
        // CB 1A 018F
        gbc.setState(0x95f2, 0x7592, 0xa970, 0xad07, 0xdbd8, 0xcb7c, 0x0, 0x1);
        gbc.writeMem(0x95f2, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x7592);
        EXPECT(gbc.pc(), 0x95f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95f2), 0xcb);
        EXPECT(gbc.readMem(0x95f3), 0x1a);
        // CB 1A 0190
        gbc.setState(0xc6cb, 0xa846, 0x5fe0, 0x6f05, 0x566f, 0x6194, 0x0, 0x1);
        gbc.writeMem(0xc6cb, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xa846);
        EXPECT(gbc.pc(), 0xc6cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6cb), 0xcb);
        EXPECT(gbc.readMem(0xc6cc), 0x1a);
        // CB 1A 0191
        gbc.setState(0x7c30, 0x5a84, 0x360, 0x82f9, 0x5d4, 0xbb8b, 0x0, 0x1);
        gbc.writeMem(0x7c30, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x5a84);
        EXPECT(gbc.pc(), 0x7c32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0192
        gbc.setState(0x3f54, 0xe433, 0xdba0, 0x6f58, 0x29d3, 0x7883, 0x1, 0x0);
        gbc.writeMem(0x3f54, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xe433);
        EXPECT(gbc.pc(), 0x3f56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0193
        gbc.setState(0x2212, 0x539f, 0x3130, 0x79bb, 0x898e, 0xde8c, 0x1, 0x0);
        gbc.writeMem(0x2212, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x539f);
        EXPECT(gbc.pc(), 0x2214);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0194
        gbc.setState(0xcc9, 0x4bff, 0x86d0, 0xff1d, 0x264b, 0x203a, 0x1, 0x1);
        gbc.writeMem(0xcc9, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x4bff);
        EXPECT(gbc.pc(), 0xccb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0195
        gbc.setState(0xe8b6, 0x74fb, 0x4f60, 0xbd0b, 0xe3f6, 0xbd8f, 0x0, 0x1);
        gbc.writeMem(0xe8b6, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x74fb);
        EXPECT(gbc.pc(), 0xe8b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8b6), 0xcb);
        EXPECT(gbc.readMem(0xe8b7), 0x1a);
        // CB 1A 0197
        gbc.setState(0x9035, 0xef30, 0x4560, 0x5aed, 0xd3a4, 0x99aa, 0x0, 0x1);
        gbc.writeMem(0x9035, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xef30);
        EXPECT(gbc.pc(), 0x9037);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9035), 0xcb);
        EXPECT(gbc.readMem(0x9036), 0x1a);
        // CB 1A 0198
        gbc.setState(0xc574, 0x1503, 0xa520, 0x630c, 0x3ab0, 0xd5dd, 0x1, 0x0);
        gbc.writeMem(0xc574, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x1503);
        EXPECT(gbc.pc(), 0xc576);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc574), 0xcb);
        EXPECT(gbc.readMem(0xc575), 0x1a);
        // CB 1A 0199
        gbc.setState(0x1330, 0xfc15, 0xa850, 0xc921, 0xbae1, 0x55f8, 0x1, 0x1);
        gbc.writeMem(0x1330, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xfc15);
        EXPECT(gbc.pc(), 0x1332);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 019A
        gbc.setState(0xe5bf, 0xc8ea, 0x2980, 0xd62a, 0xa8b0, 0x6556, 0x0, 0x0);
        gbc.writeMem(0xe5bf, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xc8ea);
        EXPECT(gbc.pc(), 0xe5c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5bf), 0xcb);
        EXPECT(gbc.readMem(0xe5c0), 0x1a);
        // CB 1A 019B
        gbc.setState(0xbdf1, 0x8a0, 0xe10, 0x2649, 0x7544, 0xd639, 0x1, 0x0);
        gbc.writeMem(0xbdf1, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x8a0);
        EXPECT(gbc.pc(), 0xbdf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdf1), 0xcb);
        EXPECT(gbc.readMem(0xbdf2), 0x1a);
        // CB 1A 019C
        gbc.setState(0xcf13, 0x9994, 0x73e0, 0x248d, 0x4a7e, 0x5bfc, 0x0, 0x1);
        gbc.writeMem(0xcf13, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x9994);
        EXPECT(gbc.pc(), 0xcf15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf13), 0xcb);
        EXPECT(gbc.readMem(0xcf14), 0x1a);
        // CB 1A 019E
        gbc.setState(0x51a2, 0xb8fa, 0x5550, 0x627e, 0x538e, 0x9162, 0x0, 0x1);
        gbc.writeMem(0x51a2, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xb8fa);
        EXPECT(gbc.pc(), 0x51a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 019F
        gbc.setState(0x2a52, 0x7816, 0xb320, 0xf526, 0x926b, 0xa188, 0x0, 0x1);
        gbc.writeMem(0x2a52, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x7816);
        EXPECT(gbc.pc(), 0x2a54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 01A0
        gbc.setState(0x8d6f, 0x3f63, 0x9240, 0x2861, 0xa562, 0x1aa5, 0x0, 0x1);
        gbc.writeMem(0x8d6f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x3f63);
        EXPECT(gbc.pc(), 0x8d71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d6f), 0xcb);
        EXPECT(gbc.readMem(0x8d70), 0x1a);
        // CB 1A 01A1
        gbc.setState(0x6bda, 0xa6b9, 0x8010, 0x2c56, 0x93e4, 0xc60b, 0x1, 0x0);
        gbc.writeMem(0x6bda, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xa6b9);
        EXPECT(gbc.pc(), 0x6bdc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 01A2
        gbc.setState(0x37e1, 0xd37a, 0xadd0, 0xbc78, 0x72bc, 0xc7bf, 0x1, 0x1);
        gbc.writeMem(0x37e1, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xd37a);
        EXPECT(gbc.pc(), 0x37e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 01A3
        gbc.setState(0xeacc, 0xe7c2, 0x95b0, 0x7b96, 0x938b, 0x1323, 0x0, 0x1);
        gbc.writeMem(0xeacc, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xe7c2);
        EXPECT(gbc.pc(), 0xeace);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeacc), 0xcb);
        EXPECT(gbc.readMem(0xeacd), 0x1a);
        // CB 1A 01A4
        gbc.setState(0x902a, 0x9905, 0xee20, 0xaed2, 0x54ad, 0xafc7, 0x0, 0x1);
        gbc.writeMem(0x902a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x9905);
        EXPECT(gbc.pc(), 0x902c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x902a), 0xcb);
        EXPECT(gbc.readMem(0x902b), 0x1a);
        // CB 1A 01A5
        gbc.setState(0xafd7, 0xbb87, 0x1c10, 0x8332, 0x5d6f, 0xaf8, 0x1, 0x1);
        gbc.writeMem(0xafd7, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xbb87);
        EXPECT(gbc.pc(), 0xafd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafd7), 0xcb);
        EXPECT(gbc.readMem(0xafd8), 0x1a);
        // CB 1A 01A6
        gbc.setState(0xc1de, 0xe275, 0x4130, 0xf72f, 0xc694, 0xfb92, 0x1, 0x1);
        gbc.writeMem(0xc1de, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xe275);
        EXPECT(gbc.pc(), 0xc1e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1de), 0xcb);
        EXPECT(gbc.readMem(0xc1df), 0x1a);
        // CB 1A 01A7
        gbc.setState(0x9970, 0xe6f8, 0x5a00, 0x4da8, 0x491f, 0xf18a, 0x0, 0x1);
        gbc.writeMem(0x9970, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xe6f8);
        EXPECT(gbc.pc(), 0x9972);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9970), 0xcb);
        EXPECT(gbc.readMem(0x9971), 0x1a);
        // CB 1A 01A8
        gbc.setState(0xbe2e, 0x870c, 0x7e40, 0x715e, 0x358b, 0xcffa, 0x1, 0x1);
        gbc.writeMem(0xbe2e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x870c);
        EXPECT(gbc.pc(), 0xbe30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe2e), 0xcb);
        EXPECT(gbc.readMem(0xbe2f), 0x1a);
        // CB 1A 01A9
        gbc.setState(0xe506, 0x2611, 0xe4e0, 0xa531, 0x703e, 0x80df, 0x0, 0x1);
        gbc.writeMem(0xe506, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x2611);
        EXPECT(gbc.pc(), 0xe508);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe506), 0xcb);
        EXPECT(gbc.readMem(0xe507), 0x1a);
        // CB 1A 01AA
        gbc.setState(0x6fb5, 0xbdde, 0xefa0, 0x4646, 0xe35e, 0xa3f, 0x0, 0x0);
        gbc.writeMem(0x6fb5, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xbdde);
        EXPECT(gbc.pc(), 0x6fb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 01AB
        gbc.setState(0xc25, 0x4027, 0x3060, 0xe28d, 0x54f7, 0xdab7, 0x0, 0x1);
        gbc.writeMem(0xc25, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x4027);
        EXPECT(gbc.pc(), 0xc27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 01AC
        gbc.setState(0x90f4, 0xeaab, 0xb370, 0x2, 0xcf37, 0x1802, 0x0, 0x1);
        gbc.writeMem(0x90f4, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xeaab);
        EXPECT(gbc.pc(), 0x90f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90f4), 0xcb);
        EXPECT(gbc.readMem(0x90f5), 0x1a);
        // CB 1A 01AD
        gbc.setState(0x9c38, 0x2b85, 0x4a00, 0x562e, 0xaa27, 0x3b3f, 0x0, 0x1);
        gbc.writeMem(0x9c38, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x2b85);
        EXPECT(gbc.pc(), 0x9c3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c38), 0xcb);
        EXPECT(gbc.readMem(0x9c39), 0x1a);
        // CB 1A 01AE
        gbc.setState(0xd1e2, 0x98d9, 0x9640, 0xc73, 0x54f9, 0x23f4, 0x0, 0x0);
        gbc.writeMem(0xd1e2, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x98d9);
        EXPECT(gbc.pc(), 0xd1e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1e2), 0xcb);
        EXPECT(gbc.readMem(0xd1e3), 0x1a);
        // CB 1A 01AF
        gbc.setState(0x1751, 0xd022, 0xaf70, 0x4e6f, 0x1905, 0xf368, 0x0, 0x1);
        gbc.writeMem(0x1751, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xd022);
        EXPECT(gbc.pc(), 0x1753);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 01B0
        gbc.setState(0x9be, 0xc7e9, 0xafd0, 0xa589, 0x9ee, 0xce88, 0x1, 0x0);
        gbc.writeMem(0x9be, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xc7e9);
        EXPECT(gbc.pc(), 0x9c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 01B1
        gbc.setState(0x583e, 0x9139, 0x23c0, 0xee98, 0x87dd, 0x68dc, 0x0, 0x0);
        gbc.writeMem(0x583e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x9139);
        EXPECT(gbc.pc(), 0x5840);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 01B2
        gbc.setState(0xaae6, 0xe2de, 0xd370, 0xd0f7, 0xc679, 0xfaa0, 0x1, 0x1);
        gbc.writeMem(0xaae6, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xe2de);
        EXPECT(gbc.pc(), 0xaae8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaae6), 0xcb);
        EXPECT(gbc.readMem(0xaae7), 0x1a);
        // CB 1A 01B3
        gbc.setState(0xa320, 0x7a6a, 0x3df0, 0xc62a, 0xbb53, 0xca5b, 0x1, 0x0);
        gbc.writeMem(0xa320, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x7a6a);
        EXPECT(gbc.pc(), 0xa322);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa320), 0xcb);
        EXPECT(gbc.readMem(0xa321), 0x1a);
        // CB 1A 01B4
        gbc.setState(0xdfde, 0x6753, 0x5820, 0x944e, 0xeff1, 0xf6cb, 0x0, 0x1);
        gbc.writeMem(0xdfde, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x6753);
        EXPECT(gbc.pc(), 0xdfe0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfde), 0xcb);
        EXPECT(gbc.readMem(0xdfdf), 0x1a);
        // CB 1A 01B5
        gbc.setState(0x483b, 0x481d, 0x8320, 0x11b9, 0xa696, 0x94c4, 0x1, 0x1);
        gbc.writeMem(0x483b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x481d);
        EXPECT(gbc.pc(), 0x483d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 01B6
        gbc.setState(0x5bff, 0x547f, 0x5420, 0x7527, 0xce37, 0x3f89, 0x1, 0x1);
        gbc.writeMem(0x5bff, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x547f);
        EXPECT(gbc.pc(), 0x5c01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 01B7
        gbc.setState(0x631f, 0xaa84, 0xb000, 0x7d4d, 0x9cc4, 0x293f, 0x0, 0x1);
        gbc.writeMem(0x631f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xaa84);
        EXPECT(gbc.pc(), 0x6321);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 01B8
        gbc.setState(0xd180, 0x8d3d, 0xc250, 0xd51f, 0xd7b2, 0x2898, 0x0, 0x1);
        gbc.writeMem(0xd180, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x8d3d);
        EXPECT(gbc.pc(), 0xd182);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd180), 0xcb);
        EXPECT(gbc.readMem(0xd181), 0x1a);
        // CB 1A 01B9
        gbc.setState(0xb96a, 0xef3a, 0x57a0, 0xf027, 0x955b, 0xb2bc, 0x1, 0x1);
        gbc.writeMem(0xb96a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xef3a);
        EXPECT(gbc.pc(), 0xb96c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb96a), 0xcb);
        EXPECT(gbc.readMem(0xb96b), 0x1a);
        // CB 1A 01BA
        gbc.setState(0x85f6, 0xacbe, 0x1e70, 0x8241, 0x9830, 0x922e, 0x1, 0x1);
        gbc.writeMem(0x85f6, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xacbe);
        EXPECT(gbc.pc(), 0x85f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85f6), 0xcb);
        EXPECT(gbc.readMem(0x85f7), 0x1a);
        // CB 1A 01BB
        gbc.setState(0x74c2, 0xf236, 0x3f90, 0x68e6, 0x84b0, 0xe036, 0x1, 0x1);
        gbc.writeMem(0x74c2, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xf236);
        EXPECT(gbc.pc(), 0x74c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 01BC
        gbc.setState(0x1ad6, 0x23d1, 0x9c90, 0xd6a9, 0xd0bf, 0x292d, 0x1, 0x1);
        gbc.writeMem(0x1ad6, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x23d1);
        EXPECT(gbc.pc(), 0x1ad8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 01BD
        gbc.setState(0xe710, 0xbb12, 0x1940, 0x46b7, 0x8049, 0x3c3c, 0x1, 0x1);
        gbc.writeMem(0xe710, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xbb12);
        EXPECT(gbc.pc(), 0xe712);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe710), 0xcb);
        EXPECT(gbc.readMem(0xe711), 0x1a);
        // CB 1A 01BE
        gbc.setState(0x9f24, 0xe7f0, 0x5ce0, 0x5670, 0x96d6, 0xff95, 0x0, 0x1);
        gbc.writeMem(0x9f24, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xe7f0);
        EXPECT(gbc.pc(), 0x9f26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f24), 0xcb);
        EXPECT(gbc.readMem(0x9f25), 0x1a);
        // CB 1A 01BF
        gbc.setState(0x38e7, 0xae23, 0x4730, 0xd372, 0xc2e8, 0x7448, 0x1, 0x0);
        gbc.writeMem(0x38e7, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xae23);
        EXPECT(gbc.pc(), 0x38e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 01C1
        gbc.setState(0x1ab7, 0x5987, 0x1020, 0xb8b3, 0xfdc4, 0x31d5, 0x0, 0x1);
        gbc.writeMem(0x1ab7, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x5987);
        EXPECT(gbc.pc(), 0x1ab9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 01C2
        gbc.setState(0x5e4b, 0xd5c6, 0x3190, 0xfaaa, 0x9198, 0xf43b, 0x0, 0x1);
        gbc.writeMem(0x5e4b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xd5c6);
        EXPECT(gbc.pc(), 0x5e4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 01C3
        gbc.setState(0x1822, 0x1191, 0x18a0, 0xf6e5, 0x5ac3, 0xd012, 0x1, 0x1);
        gbc.writeMem(0x1822, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x1191);
        EXPECT(gbc.pc(), 0x1824);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 01C4
        gbc.setState(0xdade, 0x96c2, 0x45e0, 0xc4a4, 0xa3e8, 0xf7c7, 0x1, 0x1);
        gbc.writeMem(0xdade, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x96c2);
        EXPECT(gbc.pc(), 0xdae0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdade), 0xcb);
        EXPECT(gbc.readMem(0xdadf), 0x1a);
        // CB 1A 01C5
        gbc.setState(0x16ac, 0x1283, 0xd060, 0xd6a2, 0xd41e, 0xe3b5, 0x0, 0x1);
        gbc.writeMem(0x16ac, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x1283);
        EXPECT(gbc.pc(), 0x16ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 01C6
        gbc.setState(0xa7e7, 0xafbd, 0x12b0, 0xeab7, 0x1611, 0xe72e, 0x0, 0x0);
        gbc.writeMem(0xa7e7, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xafbd);
        EXPECT(gbc.pc(), 0xa7e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7e7), 0xcb);
        EXPECT(gbc.readMem(0xa7e8), 0x1a);
        // CB 1A 01C7
        gbc.setState(0x8db9, 0xf71e, 0x8750, 0x69e1, 0x8f5, 0x4fe2, 0x0, 0x0);
        gbc.writeMem(0x8db9, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xf71e);
        EXPECT(gbc.pc(), 0x8dbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8db9), 0xcb);
        EXPECT(gbc.readMem(0x8dba), 0x1a);
        // CB 1A 01C8
        gbc.setState(0x36a4, 0xdf67, 0xb2a0, 0xf51, 0xf29f, 0x877d, 0x0, 0x0);
        gbc.writeMem(0x36a4, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xdf67);
        EXPECT(gbc.pc(), 0x36a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 01C9
        gbc.setState(0x98df, 0x4ec5, 0xba70, 0x9353, 0x4bd6, 0x6a7c, 0x0, 0x1);
        gbc.writeMem(0x98df, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x4ec5);
        EXPECT(gbc.pc(), 0x98e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98df), 0xcb);
        EXPECT(gbc.readMem(0x98e0), 0x1a);
        // CB 1A 01CA
        gbc.setState(0x8eaa, 0x18a8, 0x29c0, 0x21e1, 0x9926, 0xcea2, 0x0, 0x1);
        gbc.writeMem(0x8eaa, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x18a8);
        EXPECT(gbc.pc(), 0x8eac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8eaa), 0xcb);
        EXPECT(gbc.readMem(0x8eab), 0x1a);
        // CB 1A 01CB
        gbc.setState(0xc8d0, 0x9e61, 0xdaf0, 0x934a, 0xb0dd, 0x19cb, 0x0, 0x1);
        gbc.writeMem(0xc8d0, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x9e61);
        EXPECT(gbc.pc(), 0xc8d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8d0), 0xcb);
        EXPECT(gbc.readMem(0xc8d1), 0x1a);
        // CB 1A 01CC
        gbc.setState(0xe6ab, 0x861, 0x1560, 0x47d2, 0x9337, 0x9d4f, 0x0, 0x0);
        gbc.writeMem(0xe6ab, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x861);
        EXPECT(gbc.pc(), 0xe6ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6ab), 0xcb);
        EXPECT(gbc.readMem(0xe6ac), 0x1a);
        // CB 1A 01CD
        gbc.setState(0x9aa8, 0x9719, 0xf710, 0x272b, 0x9f5e, 0xada9, 0x1, 0x1);
        gbc.writeMem(0x9aa8, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x9719);
        EXPECT(gbc.pc(), 0x9aaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9aa8), 0xcb);
        EXPECT(gbc.readMem(0x9aa9), 0x1a);
        // CB 1A 01CE
        gbc.setState(0xc2bb, 0xdea1, 0xe9f0, 0xb044, 0x9fa, 0x8fc2, 0x1, 0x1);
        gbc.writeMem(0xc2bb, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xdea1);
        EXPECT(gbc.pc(), 0xc2bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2bb), 0xcb);
        EXPECT(gbc.readMem(0xc2bc), 0x1a);
        // CB 1A 01CF
        gbc.setState(0x52c7, 0x34c7, 0x18d0, 0x4518, 0x17e7, 0x866, 0x0, 0x0);
        gbc.writeMem(0x52c7, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x34c7);
        EXPECT(gbc.pc(), 0x52c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 01D0
        gbc.setState(0xe31c, 0xbf44, 0x1a10, 0x305f, 0x148b, 0x66ec, 0x1, 0x1);
        gbc.writeMem(0xe31c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xbf44);
        EXPECT(gbc.pc(), 0xe31e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe31c), 0xcb);
        EXPECT(gbc.readMem(0xe31d), 0x1a);
        // CB 1A 01D1
        gbc.setState(0xaf08, 0xc3f8, 0x5e60, 0x4d31, 0xb73c, 0x94b2, 0x0, 0x0);
        gbc.writeMem(0xaf08, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xc3f8);
        EXPECT(gbc.pc(), 0xaf0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf08), 0xcb);
        EXPECT(gbc.readMem(0xaf09), 0x1a);
        // CB 1A 01D2
        gbc.setState(0x2924, 0x73f4, 0x89e0, 0xe214, 0x4023, 0xcc67, 0x0, 0x1);
        gbc.writeMem(0x2924, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x73f4);
        EXPECT(gbc.pc(), 0x2926);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 01D3
        gbc.setState(0xb969, 0xe6b1, 0xa400, 0x8b03, 0x58e0, 0xbe06, 0x1, 0x0);
        gbc.writeMem(0xb969, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xe6b1);
        EXPECT(gbc.pc(), 0xb96b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb969), 0xcb);
        EXPECT(gbc.readMem(0xb96a), 0x1a);
        // CB 1A 01D4
        gbc.setState(0x35d5, 0x322f, 0x90f0, 0x4c85, 0x94a2, 0x665b, 0x1, 0x1);
        gbc.writeMem(0x35d5, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x322f);
        EXPECT(gbc.pc(), 0x35d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 01D5
        gbc.setState(0x10fd, 0xa722, 0x8fa0, 0x7f1a, 0xe48a, 0x8ddd, 0x1, 0x0);
        gbc.writeMem(0x10fd, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xa722);
        EXPECT(gbc.pc(), 0x10ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 01D6
        gbc.setState(0x54af, 0xcf4d, 0x9b40, 0x3254, 0x322f, 0x6fd5, 0x1, 0x1);
        gbc.writeMem(0x54af, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xcf4d);
        EXPECT(gbc.pc(), 0x54b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 01D7
        gbc.setState(0xc390, 0x1d4e, 0xd160, 0x559, 0x6ea4, 0xcaa1, 0x0, 0x0);
        gbc.writeMem(0xc390, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x1d4e);
        EXPECT(gbc.pc(), 0xc392);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc390), 0xcb);
        EXPECT(gbc.readMem(0xc391), 0x1a);
        // CB 1A 01D8
        gbc.setState(0x43e1, 0xa8e6, 0x89c0, 0x51d1, 0x70b7, 0x9d06, 0x1, 0x0);
        gbc.writeMem(0x43e1, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xa8e6);
        EXPECT(gbc.pc(), 0x43e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 01D9
        gbc.setState(0xcbc2, 0x449, 0xf090, 0x567e, 0x9b51, 0x4ffd, 0x0, 0x0);
        gbc.writeMem(0xcbc2, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x449);
        EXPECT(gbc.pc(), 0xcbc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbc2), 0xcb);
        EXPECT(gbc.readMem(0xcbc3), 0x1a);
        // CB 1A 01DA
        gbc.setState(0xc098, 0x31a4, 0xaf60, 0x862c, 0xdc08, 0x7a0, 0x0, 0x1);
        gbc.writeMem(0xc098, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x31a4);
        EXPECT(gbc.pc(), 0xc09a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc098), 0xcb);
        EXPECT(gbc.readMem(0xc099), 0x1a);
        // CB 1A 01DB
        gbc.setState(0x37e7, 0x57c, 0x9e10, 0x59d9, 0x4b9a, 0xc570, 0x1, 0x0);
        gbc.writeMem(0x37e7, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x57c);
        EXPECT(gbc.pc(), 0x37e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 01DC
        gbc.setState(0xcdef, 0xdb00, 0xf640, 0xaeef, 0x35e6, 0xd183, 0x0, 0x1);
        gbc.writeMem(0xcdef, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xdb00);
        EXPECT(gbc.pc(), 0xcdf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdef), 0xcb);
        EXPECT(gbc.readMem(0xcdf0), 0x1a);
        // CB 1A 01DD
        gbc.setState(0xbfea, 0x35ea, 0x17f0, 0x8abd, 0x9513, 0x568e, 0x0, 0x1);
        gbc.writeMem(0xbfea, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x35ea);
        EXPECT(gbc.pc(), 0xbfec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfea), 0xcb);
        EXPECT(gbc.readMem(0xbfeb), 0x1a);
        // CB 1A 01DE
        gbc.setState(0xa6b2, 0x1ae5, 0xdf40, 0x8a46, 0xdaba, 0x830b, 0x1, 0x0);
        gbc.writeMem(0xa6b2, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x1ae5);
        EXPECT(gbc.pc(), 0xa6b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6b2), 0xcb);
        EXPECT(gbc.readMem(0xa6b3), 0x1a);
        // CB 1A 01DF
        gbc.setState(0xccde, 0xcc14, 0x3f30, 0x2e95, 0xab5, 0x35c4, 0x1, 0x1);
        gbc.writeMem(0xccde, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xcc14);
        EXPECT(gbc.pc(), 0xcce0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccde), 0xcb);
        EXPECT(gbc.readMem(0xccdf), 0x1a);
        // CB 1A 01E0
        gbc.setState(0xce89, 0x2324, 0xc910, 0xaa5, 0xf291, 0x8673, 0x1, 0x1);
        gbc.writeMem(0xce89, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x2324);
        EXPECT(gbc.pc(), 0xce8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce89), 0xcb);
        EXPECT(gbc.readMem(0xce8a), 0x1a);
        // CB 1A 01E1
        gbc.setState(0x61fa, 0xf5fd, 0x6c90, 0xa303, 0xec37, 0xf11, 0x0, 0x0);
        gbc.writeMem(0x61fa, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xf5fd);
        EXPECT(gbc.pc(), 0x61fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 01E2
        gbc.setState(0x811a, 0xf269, 0x1ba0, 0x12e4, 0x75c9, 0xba53, 0x0, 0x0);
        gbc.writeMem(0x811a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xf269);
        EXPECT(gbc.pc(), 0x811c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x811a), 0xcb);
        EXPECT(gbc.readMem(0x811b), 0x1a);
        // CB 1A 01E3
        gbc.setState(0x9805, 0x79f3, 0x5ee0, 0xa81f, 0x508, 0x242b, 0x1, 0x0);
        gbc.writeMem(0x9805, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x79f3);
        EXPECT(gbc.pc(), 0x9807);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9805), 0xcb);
        EXPECT(gbc.readMem(0x9806), 0x1a);
        // CB 1A 01E4
        gbc.setState(0x9fc7, 0xf31f, 0x7f50, 0xe2bb, 0x9770, 0xd90, 0x1, 0x0);
        gbc.writeMem(0x9fc7, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xf31f);
        EXPECT(gbc.pc(), 0x9fc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fc7), 0xcb);
        EXPECT(gbc.readMem(0x9fc8), 0x1a);
        // CB 1A 01E5
        gbc.setState(0xbe6b, 0xad1b, 0x2f50, 0xda80, 0xab57, 0x461a, 0x0, 0x1);
        gbc.writeMem(0xbe6b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xad1b);
        EXPECT(gbc.pc(), 0xbe6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe6b), 0xcb);
        EXPECT(gbc.readMem(0xbe6c), 0x1a);
        // CB 1A 01E6
        gbc.setState(0xa87f, 0x90e6, 0x1550, 0x2a6, 0xb7fd, 0xb5da, 0x1, 0x1);
        gbc.writeMem(0xa87f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x90e6);
        EXPECT(gbc.pc(), 0xa881);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa87f), 0xcb);
        EXPECT(gbc.readMem(0xa880), 0x1a);
        // CB 1A 01E7
        gbc.setState(0xed8a, 0x5197, 0xe280, 0x49af, 0x57ff, 0x699b, 0x1, 0x0);
        gbc.writeMem(0xed8a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x5197);
        EXPECT(gbc.pc(), 0xed8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed8a), 0xcb);
        EXPECT(gbc.readMem(0xed8b), 0x1a);
        // CB 1A 01E8
        gbc.setState(0x9302, 0xaa85, 0x3450, 0xb5a9, 0x11c8, 0x366a, 0x0, 0x1);
        gbc.writeMem(0x9302, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xaa85);
        EXPECT(gbc.pc(), 0x9304);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9302), 0xcb);
        EXPECT(gbc.readMem(0x9303), 0x1a);
        // CB 1A 01E9
        gbc.setState(0x8359, 0x27b, 0x5f0, 0xb649, 0x6490, 0x6fd9, 0x1, 0x0);
        gbc.writeMem(0x8359, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x27b);
        EXPECT(gbc.pc(), 0x835b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8359), 0xcb);
        EXPECT(gbc.readMem(0x835a), 0x1a);
        // CB 1A 01EA
        gbc.setState(0x6c33, 0x8144, 0xcc90, 0x9952, 0xa663, 0xb646, 0x1, 0x1);
        gbc.writeMem(0x6c33, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x8144);
        EXPECT(gbc.pc(), 0x6c35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 01EB
        gbc.setState(0xa4bd, 0x6d26, 0x3e20, 0x946f, 0x724b, 0xf190, 0x1, 0x1);
        gbc.writeMem(0xa4bd, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x6d26);
        EXPECT(gbc.pc(), 0xa4bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4bd), 0xcb);
        EXPECT(gbc.readMem(0xa4be), 0x1a);
        // CB 1A 01EC
        gbc.setState(0x9c25, 0x405e, 0x4c10, 0x8e81, 0x9b76, 0xdf14, 0x1, 0x0);
        gbc.writeMem(0x9c25, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x405e);
        EXPECT(gbc.pc(), 0x9c27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c25), 0xcb);
        EXPECT(gbc.readMem(0x9c26), 0x1a);
        // CB 1A 01ED
        gbc.setState(0x429d, 0x3f2b, 0x3010, 0x3d36, 0xc862, 0xa3ef, 0x1, 0x0);
        gbc.writeMem(0x429d, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x3f2b);
        EXPECT(gbc.pc(), 0x429f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 01EE
        gbc.setState(0x3a6f, 0x88d2, 0x660, 0xc6f4, 0xd0eb, 0x6a06, 0x1, 0x1);
        gbc.writeMem(0x3a6f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x88d2);
        EXPECT(gbc.pc(), 0x3a71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 01EF
        gbc.setState(0xc3ae, 0x74c8, 0x7cd0, 0x6d8d, 0x7d52, 0xe82, 0x0, 0x1);
        gbc.writeMem(0xc3ae, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x74c8);
        EXPECT(gbc.pc(), 0xc3b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3ae), 0xcb);
        EXPECT(gbc.readMem(0xc3af), 0x1a);
        // CB 1A 01F0
        gbc.setState(0x41f2, 0x4e55, 0xc8c0, 0x3792, 0xfed1, 0xf3d8, 0x0, 0x0);
        gbc.writeMem(0x41f2, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x4e55);
        EXPECT(gbc.pc(), 0x41f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 01F1
        gbc.setState(0xe6c, 0x29d2, 0x4b0, 0xf223, 0xc266, 0x7d0, 0x0, 0x1);
        gbc.writeMem(0xe6c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x29d2);
        EXPECT(gbc.pc(), 0xe6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 01F2
        gbc.setState(0x5126, 0x9af, 0xb570, 0xdaf2, 0xceeb, 0x37f0, 0x1, 0x1);
        gbc.writeMem(0x5126, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x9af);
        EXPECT(gbc.pc(), 0x5128);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 01F3
        gbc.setState(0xa2d5, 0x4a1a, 0x9230, 0x2870, 0xca87, 0xffc4, 0x1, 0x1);
        gbc.writeMem(0xa2d5, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x4a1a);
        EXPECT(gbc.pc(), 0xa2d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2d5), 0xcb);
        EXPECT(gbc.readMem(0xa2d6), 0x1a);
        // CB 1A 01F4
        gbc.setState(0x1b77, 0xb134, 0x9cd0, 0x8933, 0x8455, 0xf817, 0x1, 0x1);
        gbc.writeMem(0x1b77, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xb134);
        EXPECT(gbc.pc(), 0x1b79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 01F5
        gbc.setState(0x338d, 0x191, 0x90, 0x99b9, 0x1cb0, 0x235a, 0x1, 0x0);
        gbc.writeMem(0x338d, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x191);
        EXPECT(gbc.pc(), 0x338f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 01F6
        gbc.setState(0xcaf1, 0x5161, 0x38c0, 0x93d1, 0xbb5d, 0x4dfa, 0x1, 0x0);
        gbc.writeMem(0xcaf1, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x5161);
        EXPECT(gbc.pc(), 0xcaf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcaf1), 0xcb);
        EXPECT(gbc.readMem(0xcaf2), 0x1a);
        // CB 1A 01F7
        gbc.setState(0xc813, 0x8c3d, 0x1920, 0x4f9d, 0x36ad, 0x1162, 0x0, 0x0);
        gbc.writeMem(0xc813, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x8c3d);
        EXPECT(gbc.pc(), 0xc815);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc813), 0xcb);
        EXPECT(gbc.readMem(0xc814), 0x1a);
        // CB 1A 01F8
        gbc.setState(0x8369, 0xd829, 0xdf0, 0x2d47, 0x233, 0x9592, 0x0, 0x1);
        gbc.writeMem(0x8369, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xd829);
        EXPECT(gbc.pc(), 0x836b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8369), 0xcb);
        EXPECT(gbc.readMem(0x836a), 0x1a);
        // CB 1A 01F9
        gbc.setState(0x7c4, 0xe842, 0xe4d0, 0xf4e4, 0x478e, 0x165c, 0x0, 0x0);
        gbc.writeMem(0x7c4, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xe842);
        EXPECT(gbc.pc(), 0x7c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 01FC
        gbc.setState(0xeae6, 0xfc84, 0xc0e0, 0xdf02, 0xffa5, 0xd9cb, 0x1, 0x1);
        gbc.writeMem(0xeae6, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xfc84);
        EXPECT(gbc.pc(), 0xeae8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeae6), 0xcb);
        EXPECT(gbc.readMem(0xeae7), 0x1a);
        // CB 1A 0202
        gbc.setState(0x1621, 0x2112, 0x3e90, 0xaf1, 0xdb68, 0x9530, 0x1, 0x1);
        gbc.writeMem(0x1621, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x2112);
        EXPECT(gbc.pc(), 0x1623);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0203
        gbc.setState(0x8dbd, 0x7e34, 0x8850, 0xd477, 0x8ca5, 0xd492, 0x1, 0x1);
        gbc.writeMem(0x8dbd, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x7e34);
        EXPECT(gbc.pc(), 0x8dbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dbd), 0xcb);
        EXPECT(gbc.readMem(0x8dbe), 0x1a);
        // CB 1A 0204
        gbc.setState(0x97a, 0xeb70, 0x8710, 0x13ee, 0x52bc, 0x678a, 0x1, 0x1);
        gbc.writeMem(0x97a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xeb70);
        EXPECT(gbc.pc(), 0x97c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0205
        gbc.setState(0xdc19, 0xa0cf, 0x6a80, 0x307f, 0x56cd, 0xd90b, 0x1, 0x1);
        gbc.writeMem(0xdc19, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xa0cf);
        EXPECT(gbc.pc(), 0xdc1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc19), 0xcb);
        EXPECT(gbc.readMem(0xdc1a), 0x1a);
        // CB 1A 0207
        gbc.setState(0xdf27, 0x89cf, 0xc1e0, 0xc543, 0x8fce, 0xb7ff, 0x1, 0x1);
        gbc.writeMem(0xdf27, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x89cf);
        EXPECT(gbc.pc(), 0xdf29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf27), 0xcb);
        EXPECT(gbc.readMem(0xdf28), 0x1a);
        // CB 1A 0208
        gbc.setState(0x8543, 0x9eff, 0x4e50, 0xc066, 0x9629, 0x797f, 0x1, 0x0);
        gbc.writeMem(0x8543, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x9eff);
        EXPECT(gbc.pc(), 0x8545);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8543), 0xcb);
        EXPECT(gbc.readMem(0x8544), 0x1a);
        // CB 1A 0209
        gbc.setState(0xb8cb, 0x22e6, 0xd410, 0xd0df, 0x7ad7, 0x6aa6, 0x1, 0x1);
        gbc.writeMem(0xb8cb, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x22e6);
        EXPECT(gbc.pc(), 0xb8cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8cb), 0xcb);
        EXPECT(gbc.readMem(0xb8cc), 0x1a);
        // CB 1A 020A
        gbc.setState(0xa96c, 0x3377, 0xd130, 0x8cba, 0xcaf0, 0xd45f, 0x0, 0x1);
        gbc.writeMem(0xa96c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x3377);
        EXPECT(gbc.pc(), 0xa96e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa96c), 0xcb);
        EXPECT(gbc.readMem(0xa96d), 0x1a);
        // CB 1A 020B
        gbc.setState(0x5ddc, 0x2832, 0x5b60, 0x8f41, 0x589c, 0x527f, 0x1, 0x0);
        gbc.writeMem(0x5ddc, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x2832);
        EXPECT(gbc.pc(), 0x5dde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 020C
        gbc.setState(0xa61f, 0x2742, 0x32c0, 0x46ca, 0x90d7, 0xee0f, 0x0, 0x1);
        gbc.writeMem(0xa61f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x2742);
        EXPECT(gbc.pc(), 0xa621);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa61f), 0xcb);
        EXPECT(gbc.readMem(0xa620), 0x1a);
        // CB 1A 020D
        gbc.setState(0x524e, 0xa9ec, 0xce60, 0xe473, 0xadff, 0x27a2, 0x1, 0x0);
        gbc.writeMem(0x524e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xa9ec);
        EXPECT(gbc.pc(), 0x5250);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 020E
        gbc.setState(0xc7d0, 0x4c0, 0x3e00, 0xe252, 0xda4e, 0xd0a1, 0x1, 0x0);
        gbc.writeMem(0xc7d0, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x4c0);
        EXPECT(gbc.pc(), 0xc7d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7d0), 0xcb);
        EXPECT(gbc.readMem(0xc7d1), 0x1a);
        // CB 1A 020F
        gbc.setState(0x5eb0, 0xe8cb, 0x3a0, 0x46fa, 0xb191, 0xae04, 0x1, 0x0);
        gbc.writeMem(0x5eb0, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xe8cb);
        EXPECT(gbc.pc(), 0x5eb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0210
        gbc.setState(0x5d37, 0x443c, 0xbb10, 0x3a38, 0x1b3c, 0xa8e0, 0x0, 0x1);
        gbc.writeMem(0x5d37, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x443c);
        EXPECT(gbc.pc(), 0x5d39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0211
        gbc.setState(0x6f44, 0x6b6b, 0xea70, 0xf169, 0xf6, 0x8838, 0x0, 0x0);
        gbc.writeMem(0x6f44, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x6b6b);
        EXPECT(gbc.pc(), 0x6f46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0212
        gbc.setState(0x668f, 0x4df7, 0x8470, 0xcda2, 0xaf43, 0x9bcb, 0x1, 0x0);
        gbc.writeMem(0x668f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x4df7);
        EXPECT(gbc.pc(), 0x6691);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0213
        gbc.setState(0x5341, 0x49eb, 0xbef0, 0xebb1, 0xfcd5, 0xd35c, 0x1, 0x0);
        gbc.writeMem(0x5341, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x49eb);
        EXPECT(gbc.pc(), 0x5343);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0214
        gbc.setState(0xcc9, 0xf240, 0xff90, 0xe698, 0xe428, 0xa699, 0x1, 0x0);
        gbc.writeMem(0xcc9, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xf240);
        EXPECT(gbc.pc(), 0xccb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0215
        gbc.setState(0x46cf, 0x6377, 0xd2a0, 0x414, 0x8bae, 0xf9ac, 0x0, 0x0);
        gbc.writeMem(0x46cf, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x6377);
        EXPECT(gbc.pc(), 0x46d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0216
        gbc.setState(0xcca5, 0xa5f8, 0x3780, 0x1d21, 0xe311, 0x7fc0, 0x1, 0x0);
        gbc.writeMem(0xcca5, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xa5f8);
        EXPECT(gbc.pc(), 0xcca7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcca5), 0xcb);
        EXPECT(gbc.readMem(0xcca6), 0x1a);
        // CB 1A 0217
        gbc.setState(0xe875, 0xe655, 0x3630, 0xfdd0, 0xa7ac, 0x15ff, 0x1, 0x0);
        gbc.writeMem(0xe875, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xe655);
        EXPECT(gbc.pc(), 0xe877);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe875), 0xcb);
        EXPECT(gbc.readMem(0xe876), 0x1a);
        // CB 1A 0219
        gbc.setState(0x8546, 0x68b3, 0x8e20, 0x2ade, 0x5283, 0x69cf, 0x0, 0x1);
        gbc.writeMem(0x8546, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x68b3);
        EXPECT(gbc.pc(), 0x8548);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8546), 0xcb);
        EXPECT(gbc.readMem(0x8547), 0x1a);
        // CB 1A 021A
        gbc.setState(0xd68, 0xb71f, 0x3b70, 0x7541, 0x4709, 0xf49a, 0x1, 0x0);
        gbc.writeMem(0xd68, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xb71f);
        EXPECT(gbc.pc(), 0xd6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 021B
        gbc.setState(0xd079, 0xe374, 0x5e40, 0xf71, 0x4f11, 0xabe4, 0x1, 0x1);
        gbc.writeMem(0xd079, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xe374);
        EXPECT(gbc.pc(), 0xd07b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd079), 0xcb);
        EXPECT(gbc.readMem(0xd07a), 0x1a);
        // CB 1A 021C
        gbc.setState(0x3a60, 0xb9a, 0xf720, 0x771f, 0x9fb, 0x11e3, 0x0, 0x1);
        gbc.writeMem(0x3a60, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xb9a);
        EXPECT(gbc.pc(), 0x3a62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 021D
        gbc.setState(0xbb6c, 0xa34e, 0xd4b0, 0x66e, 0x464e, 0x9fba, 0x0, 0x0);
        gbc.writeMem(0xbb6c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xa34e);
        EXPECT(gbc.pc(), 0xbb6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb6c), 0xcb);
        EXPECT(gbc.readMem(0xbb6d), 0x1a);
        // CB 1A 021E
        gbc.setState(0x6db, 0x175f, 0x7e0, 0x7bb1, 0x9f7c, 0x538, 0x1, 0x1);
        gbc.writeMem(0x6db, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x175f);
        EXPECT(gbc.pc(), 0x6dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 021F
        gbc.setState(0x1c12, 0xcacc, 0x4cd0, 0x47f7, 0xa569, 0xda6c, 0x1, 0x1);
        gbc.writeMem(0x1c12, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xcacc);
        EXPECT(gbc.pc(), 0x1c14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0220
        gbc.setState(0x201f, 0x9845, 0xb10, 0x54a2, 0xd380, 0x7205, 0x0, 0x1);
        gbc.writeMem(0x201f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x9845);
        EXPECT(gbc.pc(), 0x2021);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0221
        gbc.setState(0x1bbd, 0xa0aa, 0x4100, 0xc2c6, 0xc791, 0xbd4a, 0x0, 0x1);
        gbc.writeMem(0x1bbd, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xa0aa);
        EXPECT(gbc.pc(), 0x1bbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0222
        gbc.setState(0x97d1, 0x778f, 0x14d0, 0xb5b1, 0x1acf, 0x4057, 0x0, 0x0);
        gbc.writeMem(0x97d1, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x778f);
        EXPECT(gbc.pc(), 0x97d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97d1), 0xcb);
        EXPECT(gbc.readMem(0x97d2), 0x1a);
        // CB 1A 0223
        gbc.setState(0xda9, 0x9a5c, 0x62d0, 0x6022, 0xefd9, 0xb908, 0x1, 0x0);
        gbc.writeMem(0xda9, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x9a5c);
        EXPECT(gbc.pc(), 0xdab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0224
        gbc.setState(0x610b, 0x9169, 0x15d0, 0x48eb, 0xab5a, 0x8293, 0x0, 0x0);
        gbc.writeMem(0x610b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x9169);
        EXPECT(gbc.pc(), 0x610d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0225
        gbc.setState(0x666b, 0xb638, 0x2b90, 0xa557, 0xc451, 0x2ea8, 0x0, 0x1);
        gbc.writeMem(0x666b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xb638);
        EXPECT(gbc.pc(), 0x666d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0227
        gbc.setState(0x5bd4, 0x35ba, 0xb330, 0xd8f0, 0xcf99, 0xe10a, 0x1, 0x0);
        gbc.writeMem(0x5bd4, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x35ba);
        EXPECT(gbc.pc(), 0x5bd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0228
        gbc.setState(0x748d, 0xe0c6, 0xca0, 0xcbd4, 0x4d55, 0x6a40, 0x0, 0x1);
        gbc.writeMem(0x748d, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xe0c6);
        EXPECT(gbc.pc(), 0x748f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0229
        gbc.setState(0xa1ca, 0xd96b, 0xf770, 0x422c, 0xb581, 0x8b0f, 0x1, 0x0);
        gbc.writeMem(0xa1ca, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xd96b);
        EXPECT(gbc.pc(), 0xa1cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1ca), 0xcb);
        EXPECT(gbc.readMem(0xa1cb), 0x1a);
        // CB 1A 022A
        gbc.setState(0x935c, 0xce7, 0x51a0, 0x8d9c, 0x7a07, 0x1353, 0x0, 0x1);
        gbc.writeMem(0x935c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xce7);
        EXPECT(gbc.pc(), 0x935e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x935c), 0xcb);
        EXPECT(gbc.readMem(0x935d), 0x1a);
        // CB 1A 022B
        gbc.setState(0xc7db, 0x869, 0x6f40, 0xb5b0, 0x44f5, 0x1d9c, 0x0, 0x0);
        gbc.writeMem(0xc7db, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x869);
        EXPECT(gbc.pc(), 0xc7dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7db), 0xcb);
        EXPECT(gbc.readMem(0xc7dc), 0x1a);
        // CB 1A 022C
        gbc.setState(0xd367, 0xae73, 0xb570, 0x48, 0x7744, 0x7c9e, 0x1, 0x0);
        gbc.writeMem(0xd367, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xae73);
        EXPECT(gbc.pc(), 0xd369);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd367), 0xcb);
        EXPECT(gbc.readMem(0xd368), 0x1a);
        // CB 1A 022D
        gbc.setState(0xd5d5, 0x89f3, 0x35a0, 0x40b1, 0x4354, 0x518c, 0x0, 0x1);
        gbc.writeMem(0xd5d5, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x89f3);
        EXPECT(gbc.pc(), 0xd5d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5d5), 0xcb);
        EXPECT(gbc.readMem(0xd5d6), 0x1a);
        // CB 1A 022E
        gbc.setState(0x60ad, 0x20b6, 0x8ca0, 0x7518, 0xc199, 0xd026, 0x1, 0x1);
        gbc.writeMem(0x60ad, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x20b6);
        EXPECT(gbc.pc(), 0x60af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0230
        gbc.setState(0x13fd, 0x5b37, 0x9140, 0x6f2d, 0x37da, 0x6adf, 0x0, 0x1);
        gbc.writeMem(0x13fd, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x5b37);
        EXPECT(gbc.pc(), 0x13ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0231
        gbc.setState(0x45cd, 0xe42c, 0xf5c0, 0x130b, 0xb7ed, 0x2ae8, 0x1, 0x1);
        gbc.writeMem(0x45cd, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xe42c);
        EXPECT(gbc.pc(), 0x45cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0232
        gbc.setState(0x27, 0x6ca7, 0x1a80, 0x3d31, 0xc2de, 0xe5e6, 0x1, 0x1);
        gbc.writeMem(0x27, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x6ca7);
        EXPECT(gbc.pc(), 0x29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0233
        gbc.setState(0xb449, 0x39c, 0xb060, 0x8f4c, 0x9cfe, 0x3665, 0x1, 0x0);
        gbc.writeMem(0xb449, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x39c);
        EXPECT(gbc.pc(), 0xb44b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb449), 0xcb);
        EXPECT(gbc.readMem(0xb44a), 0x1a);
        // CB 1A 0234
        gbc.setState(0x9b70, 0x9d7b, 0x9110, 0xd6ee, 0x6df1, 0x90ed, 0x1, 0x0);
        gbc.writeMem(0x9b70, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x9d7b);
        EXPECT(gbc.pc(), 0x9b72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b70), 0xcb);
        EXPECT(gbc.readMem(0x9b71), 0x1a);
        // CB 1A 0235
        gbc.setState(0xdd47, 0xe6c8, 0x13f0, 0xc8c2, 0x134f, 0x1ce8, 0x1, 0x1);
        gbc.writeMem(0xdd47, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xe6c8);
        EXPECT(gbc.pc(), 0xdd49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd47), 0xcb);
        EXPECT(gbc.readMem(0xdd48), 0x1a);
        // CB 1A 0236
        gbc.setState(0xb70c, 0x60e0, 0x7940, 0xe6ae, 0xbb90, 0x5489, 0x1, 0x0);
        gbc.writeMem(0xb70c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x60e0);
        EXPECT(gbc.pc(), 0xb70e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb70c), 0xcb);
        EXPECT(gbc.readMem(0xb70d), 0x1a);
        // CB 1A 0237
        gbc.setState(0x378a, 0x85e, 0x25b0, 0xa8e5, 0xe183, 0xb239, 0x0, 0x1);
        gbc.writeMem(0x378a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x85e);
        EXPECT(gbc.pc(), 0x378c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0238
        gbc.setState(0xeb40, 0x5af0, 0xbca0, 0xe5b1, 0xa0d6, 0xbef3, 0x1, 0x0);
        gbc.writeMem(0xeb40, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x5af0);
        EXPECT(gbc.pc(), 0xeb42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb40), 0xcb);
        EXPECT(gbc.readMem(0xeb41), 0x1a);
        // CB 1A 0239
        gbc.setState(0x9f3b, 0xc97b, 0x5f30, 0x27c0, 0xb875, 0xe758, 0x1, 0x0);
        gbc.writeMem(0x9f3b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xc97b);
        EXPECT(gbc.pc(), 0x9f3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f3b), 0xcb);
        EXPECT(gbc.readMem(0x9f3c), 0x1a);
        // CB 1A 023A
        gbc.setState(0x8466, 0x505b, 0xb9b0, 0x9449, 0x6c8, 0xfd7a, 0x0, 0x0);
        gbc.writeMem(0x8466, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x505b);
        EXPECT(gbc.pc(), 0x8468);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8466), 0xcb);
        EXPECT(gbc.readMem(0x8467), 0x1a);
        // CB 1A 023B
        gbc.setState(0xa15, 0x89d0, 0xa660, 0x35cd, 0x8d9a, 0x3087, 0x1, 0x0);
        gbc.writeMem(0xa15, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x89d0);
        EXPECT(gbc.pc(), 0xa17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 023D
        gbc.setState(0x375d, 0x5f36, 0x5f0, 0x6300, 0xb790, 0xf610, 0x0, 0x1);
        gbc.writeMem(0x375d, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x5f36);
        EXPECT(gbc.pc(), 0x375f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 023E
        gbc.setState(0x4c79, 0xa04, 0x4410, 0x8ae8, 0xdf67, 0x9e24, 0x1, 0x1);
        gbc.writeMem(0x4c79, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xa04);
        EXPECT(gbc.pc(), 0x4c7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 023F
        gbc.setState(0x93e, 0x17a6, 0xacf0, 0xa0ac, 0xd25a, 0xd0d8, 0x1, 0x0);
        gbc.writeMem(0x93e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x17a6);
        EXPECT(gbc.pc(), 0x940);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0242
        gbc.setState(0x8971, 0x28a1, 0xe40, 0x6182, 0xd5e2, 0xfc66, 0x0, 0x0);
        gbc.writeMem(0x8971, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x28a1);
        EXPECT(gbc.pc(), 0x8973);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8971), 0xcb);
        EXPECT(gbc.readMem(0x8972), 0x1a);
        // CB 1A 0243
        gbc.setState(0xa477, 0x18a, 0xeb0, 0xfb77, 0x807b, 0xb672, 0x0, 0x0);
        gbc.writeMem(0xa477, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x18a);
        EXPECT(gbc.pc(), 0xa479);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa477), 0xcb);
        EXPECT(gbc.readMem(0xa478), 0x1a);
        // CB 1A 0244
        gbc.setState(0xa5ec, 0x433c, 0x2710, 0x8714, 0xc7, 0x8285, 0x0, 0x1);
        gbc.writeMem(0xa5ec, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x433c);
        EXPECT(gbc.pc(), 0xa5ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5ec), 0xcb);
        EXPECT(gbc.readMem(0xa5ed), 0x1a);
        // CB 1A 0245
        gbc.setState(0xaafd, 0xe5d0, 0x2d00, 0xa897, 0xb670, 0x6b81, 0x1, 0x1);
        gbc.writeMem(0xaafd, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xe5d0);
        EXPECT(gbc.pc(), 0xaaff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaafd), 0xcb);
        EXPECT(gbc.readMem(0xaafe), 0x1a);
        // CB 1A 0246
        gbc.setState(0xbd90, 0xbb26, 0xe490, 0xc44b, 0xd348, 0xc3e0, 0x0, 0x1);
        gbc.writeMem(0xbd90, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xbb26);
        EXPECT(gbc.pc(), 0xbd92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd90), 0xcb);
        EXPECT(gbc.readMem(0xbd91), 0x1a);
        // CB 1A 0247
        gbc.setState(0xdac8, 0xfa70, 0x9b40, 0xdb6e, 0xe0fe, 0xd508, 0x1, 0x0);
        gbc.writeMem(0xdac8, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xfa70);
        EXPECT(gbc.pc(), 0xdaca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdac8), 0xcb);
        EXPECT(gbc.readMem(0xdac9), 0x1a);
        // CB 1A 0248
        gbc.setState(0xd573, 0x7708, 0x5480, 0x8260, 0x612a, 0xf67, 0x1, 0x1);
        gbc.writeMem(0xd573, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x7708);
        EXPECT(gbc.pc(), 0xd575);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd573), 0xcb);
        EXPECT(gbc.readMem(0xd574), 0x1a);
        // CB 1A 024A
        gbc.setState(0x6da9, 0xd8ab, 0x13d0, 0x4494, 0xdbfe, 0x128c, 0x1, 0x0);
        gbc.writeMem(0x6da9, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xd8ab);
        EXPECT(gbc.pc(), 0x6dab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 024B
        gbc.setState(0x4d9f, 0xce7f, 0xecd0, 0xc466, 0x4c80, 0xdbb0, 0x0, 0x0);
        gbc.writeMem(0x4d9f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xce7f);
        EXPECT(gbc.pc(), 0x4da1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 024C
        gbc.setState(0x3630, 0x6d5f, 0x38f0, 0x57bb, 0x30af, 0x7ce4, 0x0, 0x1);
        gbc.writeMem(0x3630, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x6d5f);
        EXPECT(gbc.pc(), 0x3632);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 024D
        gbc.setState(0x5d81, 0x8a02, 0x87d0, 0xd7ac, 0x5080, 0x96ee, 0x0, 0x0);
        gbc.writeMem(0x5d81, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x8a02);
        EXPECT(gbc.pc(), 0x5d83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 024E
        gbc.setState(0x6f19, 0x1bd4, 0x4320, 0x1784, 0xdd0e, 0xb19e, 0x0, 0x1);
        gbc.writeMem(0x6f19, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x1bd4);
        EXPECT(gbc.pc(), 0x6f1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 024F
        gbc.setState(0xdb04, 0x7e66, 0xe1d0, 0x4cae, 0xb04c, 0x662c, 0x1, 0x1);
        gbc.writeMem(0xdb04, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x7e66);
        EXPECT(gbc.pc(), 0xdb06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb04), 0xcb);
        EXPECT(gbc.readMem(0xdb05), 0x1a);
        // CB 1A 0250
        gbc.setState(0x877a, 0xa32a, 0x6410, 0x2303, 0xfb9a, 0xb0fd, 0x0, 0x0);
        gbc.writeMem(0x877a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xa32a);
        EXPECT(gbc.pc(), 0x877c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x877a), 0xcb);
        EXPECT(gbc.readMem(0x877b), 0x1a);
        // CB 1A 0251
        gbc.setState(0x8dd9, 0x71c0, 0x3250, 0x5f04, 0x69a5, 0x5529, 0x1, 0x0);
        gbc.writeMem(0x8dd9, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x71c0);
        EXPECT(gbc.pc(), 0x8ddb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dd9), 0xcb);
        EXPECT(gbc.readMem(0x8dda), 0x1a);
        // CB 1A 0252
        gbc.setState(0xd008, 0x5cae, 0x9dc0, 0x9f89, 0x320c, 0xeed9, 0x0, 0x1);
        gbc.writeMem(0xd008, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x5cae);
        EXPECT(gbc.pc(), 0xd00a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd008), 0xcb);
        EXPECT(gbc.readMem(0xd009), 0x1a);
        // CB 1A 0253
        gbc.setState(0x289d, 0xc153, 0x3300, 0x69a4, 0xa4d1, 0x2ccb, 0x1, 0x1);
        gbc.writeMem(0x289d, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xc153);
        EXPECT(gbc.pc(), 0x289f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0254
        gbc.setState(0x7dba, 0xcc92, 0xbf30, 0xb4af, 0x53bb, 0x74d9, 0x1, 0x0);
        gbc.writeMem(0x7dba, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xcc92);
        EXPECT(gbc.pc(), 0x7dbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0255
        gbc.setState(0x5723, 0xf6b1, 0x6ca0, 0xa75a, 0xefc, 0x2668, 0x1, 0x1);
        gbc.writeMem(0x5723, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xf6b1);
        EXPECT(gbc.pc(), 0x5725);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0256
        gbc.setState(0x7564, 0xa109, 0xf610, 0x3fa9, 0xf390, 0x2620, 0x0, 0x1);
        gbc.writeMem(0x7564, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xa109);
        EXPECT(gbc.pc(), 0x7566);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0257
        gbc.setState(0xd924, 0xe366, 0x1450, 0xbbdd, 0xe261, 0x119b, 0x0, 0x0);
        gbc.writeMem(0xd924, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xe366);
        EXPECT(gbc.pc(), 0xd926);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd924), 0xcb);
        EXPECT(gbc.readMem(0xd925), 0x1a);
        // CB 1A 0259
        gbc.setState(0x62f1, 0xacfb, 0x6ed0, 0x67e, 0xe60, 0x1e75, 0x1, 0x0);
        gbc.writeMem(0x62f1, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xacfb);
        EXPECT(gbc.pc(), 0x62f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 025A
        gbc.setState(0x9d8e, 0xee46, 0xe400, 0x73e0, 0xf1d6, 0xd56c, 0x1, 0x1);
        gbc.writeMem(0x9d8e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xee46);
        EXPECT(gbc.pc(), 0x9d90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d8e), 0xcb);
        EXPECT(gbc.readMem(0x9d8f), 0x1a);
        // CB 1A 025B
        gbc.setState(0x1446, 0x24ff, 0x1ae0, 0x56e0, 0x9715, 0x6cc8, 0x1, 0x1);
        gbc.writeMem(0x1446, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x24ff);
        EXPECT(gbc.pc(), 0x1448);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 025C
        gbc.setState(0x32d4, 0xd50b, 0x3660, 0xa36, 0x4c50, 0x831a, 0x0, 0x0);
        gbc.writeMem(0x32d4, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xd50b);
        EXPECT(gbc.pc(), 0x32d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 025D
        gbc.setState(0xc8e6, 0xa67, 0x8ec0, 0x8ffb, 0x265b, 0xe23a, 0x0, 0x0);
        gbc.writeMem(0xc8e6, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xa67);
        EXPECT(gbc.pc(), 0xc8e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8e6), 0xcb);
        EXPECT(gbc.readMem(0xc8e7), 0x1a);
        // CB 1A 025F
        gbc.setState(0xbf7a, 0x903, 0xd1a0, 0x64ba, 0x277d, 0xf47, 0x0, 0x0);
        gbc.writeMem(0xbf7a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x903);
        EXPECT(gbc.pc(), 0xbf7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf7a), 0xcb);
        EXPECT(gbc.readMem(0xbf7b), 0x1a);
        // CB 1A 0260
        gbc.setState(0x16b8, 0xc5a3, 0x2e40, 0x874f, 0x49ef, 0x9364, 0x0, 0x0);
        gbc.writeMem(0x16b8, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xc5a3);
        EXPECT(gbc.pc(), 0x16ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0261
        gbc.setState(0x77ba, 0x2ac2, 0x100, 0x643b, 0x7e02, 0xee7f, 0x0, 0x1);
        gbc.writeMem(0x77ba, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x2ac2);
        EXPECT(gbc.pc(), 0x77bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0262
        gbc.setState(0x5a1e, 0xd209, 0x5e0, 0x733e, 0x932a, 0x538f, 0x0, 0x1);
        gbc.writeMem(0x5a1e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xd209);
        EXPECT(gbc.pc(), 0x5a20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0263
        gbc.setState(0x571b, 0x4cee, 0x8250, 0x9869, 0xf0fc, 0x1adf, 0x0, 0x1);
        gbc.writeMem(0x571b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x4cee);
        EXPECT(gbc.pc(), 0x571d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0264
        gbc.setState(0xb649, 0x36ff, 0x60e0, 0xccae, 0x9718, 0xe8b, 0x0, 0x1);
        gbc.writeMem(0xb649, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x36ff);
        EXPECT(gbc.pc(), 0xb64b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb649), 0xcb);
        EXPECT(gbc.readMem(0xb64a), 0x1a);
        // CB 1A 0265
        gbc.setState(0xad23, 0x83e8, 0x86d0, 0xd221, 0x68e6, 0x2442, 0x0, 0x1);
        gbc.writeMem(0xad23, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x83e8);
        EXPECT(gbc.pc(), 0xad25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad23), 0xcb);
        EXPECT(gbc.readMem(0xad24), 0x1a);
        // CB 1A 0266
        gbc.setState(0x715a, 0xfc6, 0x7b50, 0xa72, 0x6adb, 0x3ebf, 0x1, 0x0);
        gbc.writeMem(0x715a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xfc6);
        EXPECT(gbc.pc(), 0x715c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0267
        gbc.setState(0x55da, 0x4457, 0xfba0, 0x1f17, 0xdf3, 0x5d78, 0x1, 0x0);
        gbc.writeMem(0x55da, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x4457);
        EXPECT(gbc.pc(), 0x55dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0268
        gbc.setState(0xb10c, 0xf950, 0x6540, 0xc78, 0xb2fb, 0x4233, 0x0, 0x1);
        gbc.writeMem(0xb10c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xf950);
        EXPECT(gbc.pc(), 0xb10e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb10c), 0xcb);
        EXPECT(gbc.readMem(0xb10d), 0x1a);
        // CB 1A 0269
        gbc.setState(0x3f5e, 0x344, 0x1990, 0xc606, 0x89fe, 0x384a, 0x1, 0x1);
        gbc.writeMem(0x3f5e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x344);
        EXPECT(gbc.pc(), 0x3f60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 026A
        gbc.setState(0x70ef, 0x7ec3, 0x3510, 0xdd5, 0x56d5, 0x8bb2, 0x1, 0x0);
        gbc.writeMem(0x70ef, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x7ec3);
        EXPECT(gbc.pc(), 0x70f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 026B
        gbc.setState(0x3afe, 0xf4fc, 0xe820, 0xc852, 0xa997, 0x72fe, 0x1, 0x1);
        gbc.writeMem(0x3afe, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xf4fc);
        EXPECT(gbc.pc(), 0x3b00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 026C
        gbc.setState(0xd7ca, 0x81ff, 0xa4f0, 0x9988, 0xf0bb, 0x2516, 0x0, 0x0);
        gbc.writeMem(0xd7ca, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x81ff);
        EXPECT(gbc.pc(), 0xd7cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7ca), 0xcb);
        EXPECT(gbc.readMem(0xd7cb), 0x1a);
        // CB 1A 026D
        gbc.setState(0x7aeb, 0x8a7d, 0x5170, 0x8b05, 0xeab0, 0xed8c, 0x1, 0x1);
        gbc.writeMem(0x7aeb, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x8a7d);
        EXPECT(gbc.pc(), 0x7aed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 026E
        gbc.setState(0x13d6, 0xd039, 0x42e0, 0x3d1c, 0xf722, 0x7d59, 0x1, 0x1);
        gbc.writeMem(0x13d6, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xd039);
        EXPECT(gbc.pc(), 0x13d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 026F
        gbc.setState(0x632, 0x72ee, 0x5fd0, 0xaae8, 0xb035, 0xbe2, 0x0, 0x0);
        gbc.writeMem(0x632, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x72ee);
        EXPECT(gbc.pc(), 0x634);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0270
        gbc.setState(0x4534, 0xb705, 0xdba0, 0x9f54, 0xc104, 0x3ba5, 0x0, 0x1);
        gbc.writeMem(0x4534, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xb705);
        EXPECT(gbc.pc(), 0x4536);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0271
        gbc.setState(0x4b34, 0x13bc, 0x130, 0x7277, 0x9fbc, 0xa9b2, 0x0, 0x0);
        gbc.writeMem(0x4b34, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x13bc);
        EXPECT(gbc.pc(), 0x4b36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0272
        gbc.setState(0xa861, 0x8608, 0x720, 0xf34c, 0xfbda, 0xacd6, 0x1, 0x1);
        gbc.writeMem(0xa861, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x8608);
        EXPECT(gbc.pc(), 0xa863);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa861), 0xcb);
        EXPECT(gbc.readMem(0xa862), 0x1a);
        // CB 1A 0273
        gbc.setState(0x366, 0xd937, 0x8100, 0xed62, 0xb682, 0xd025, 0x0, 0x0);
        gbc.writeMem(0x366, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xd937);
        EXPECT(gbc.pc(), 0x368);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0274
        gbc.setState(0x1637, 0x62ea, 0xa8e0, 0xd44a, 0x379d, 0xefdf, 0x1, 0x0);
        gbc.writeMem(0x1637, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x62ea);
        EXPECT(gbc.pc(), 0x1639);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0275
        gbc.setState(0x52b8, 0x22cc, 0x2160, 0xd91e, 0xb542, 0x9671, 0x0, 0x1);
        gbc.writeMem(0x52b8, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x22cc);
        EXPECT(gbc.pc(), 0x52ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0276
        gbc.setState(0x31a8, 0xea8e, 0x52e0, 0xca3a, 0x8f6e, 0x2a3e, 0x1, 0x1);
        gbc.writeMem(0x31a8, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xea8e);
        EXPECT(gbc.pc(), 0x31aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0277
        gbc.setState(0x9ac4, 0x2d99, 0x9b60, 0x6fd9, 0x2abd, 0x72b5, 0x1, 0x0);
        gbc.writeMem(0x9ac4, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x2d99);
        EXPECT(gbc.pc(), 0x9ac6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ac4), 0xcb);
        EXPECT(gbc.readMem(0x9ac5), 0x1a);
        // CB 1A 0278
        gbc.setState(0xc83f, 0x1e58, 0xe740, 0x6bf8, 0xad42, 0x6450, 0x1, 0x1);
        gbc.writeMem(0xc83f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x1e58);
        EXPECT(gbc.pc(), 0xc841);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc83f), 0xcb);
        EXPECT(gbc.readMem(0xc840), 0x1a);
        // CB 1A 0279
        gbc.setState(0x30b4, 0xdfd8, 0xeb10, 0xa9a9, 0x11e4, 0xf9d4, 0x0, 0x1);
        gbc.writeMem(0x30b4, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xdfd8);
        EXPECT(gbc.pc(), 0x30b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 027A
        gbc.setState(0x888d, 0x33d1, 0x930, 0x26ee, 0xc3b2, 0xf82a, 0x1, 0x1);
        gbc.writeMem(0x888d, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x33d1);
        EXPECT(gbc.pc(), 0x888f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x888d), 0xcb);
        EXPECT(gbc.readMem(0x888e), 0x1a);
        // CB 1A 027B
        gbc.setState(0x1b2c, 0xc73c, 0x3bc0, 0x5ad, 0x1b81, 0xc5b, 0x0, 0x0);
        gbc.writeMem(0x1b2c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xc73c);
        EXPECT(gbc.pc(), 0x1b2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 027C
        gbc.setState(0xe39a, 0xe1fa, 0x7ca0, 0x5502, 0x9169, 0x479e, 0x1, 0x1);
        gbc.writeMem(0xe39a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xe1fa);
        EXPECT(gbc.pc(), 0xe39c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe39a), 0xcb);
        EXPECT(gbc.readMem(0xe39b), 0x1a);
        // CB 1A 027D
        gbc.setState(0x3a4d, 0xfb5d, 0x9f20, 0x83ee, 0x60d3, 0xd300, 0x0, 0x1);
        gbc.writeMem(0x3a4d, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xfb5d);
        EXPECT(gbc.pc(), 0x3a4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 027E
        gbc.setState(0x84aa, 0x3c9f, 0x1ad0, 0x74e4, 0xb63c, 0xc5c8, 0x1, 0x0);
        gbc.writeMem(0x84aa, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x3c9f);
        EXPECT(gbc.pc(), 0x84ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84aa), 0xcb);
        EXPECT(gbc.readMem(0x84ab), 0x1a);
        // CB 1A 027F
        gbc.setState(0x23a9, 0x6c35, 0x95e0, 0x7289, 0x89d7, 0x126c, 0x1, 0x1);
        gbc.writeMem(0x23a9, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x6c35);
        EXPECT(gbc.pc(), 0x23ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0280
        gbc.setState(0x76b0, 0x4b95, 0xe710, 0xf5d6, 0xf227, 0x28e2, 0x1, 0x0);
        gbc.writeMem(0x76b0, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x4b95);
        EXPECT(gbc.pc(), 0x76b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0281
        gbc.setState(0xefc9, 0x1f54, 0xce90, 0x7948, 0x7549, 0xa3b9, 0x1, 0x0);
        gbc.writeMem(0xefc9, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x1f54);
        EXPECT(gbc.pc(), 0xefcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefc9), 0xcb);
        EXPECT(gbc.readMem(0xefca), 0x1a);
        // CB 1A 0282
        gbc.setState(0x1d4c, 0x58d4, 0x31a0, 0x63e9, 0xfb97, 0xd875, 0x1, 0x1);
        gbc.writeMem(0x1d4c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x58d4);
        EXPECT(gbc.pc(), 0x1d4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0283
        gbc.setState(0x5acb, 0x666c, 0x9bf0, 0x8bb6, 0x95a2, 0xf443, 0x0, 0x1);
        gbc.writeMem(0x5acb, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x666c);
        EXPECT(gbc.pc(), 0x5acd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0284
        gbc.setState(0x7c8a, 0x5882, 0x3920, 0x379c, 0x9cb8, 0x995a, 0x0, 0x0);
        gbc.writeMem(0x7c8a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x5882);
        EXPECT(gbc.pc(), 0x7c8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0285
        gbc.setState(0x3d43, 0xae37, 0xfef0, 0xec12, 0x2111, 0xdb3e, 0x1, 0x1);
        gbc.writeMem(0x3d43, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xae37);
        EXPECT(gbc.pc(), 0x3d45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0286
        gbc.setState(0x2b0d, 0x5b5b, 0xbfe0, 0x48b6, 0x2dae, 0xede1, 0x1, 0x0);
        gbc.writeMem(0x2b0d, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x5b5b);
        EXPECT(gbc.pc(), 0x2b0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0287
        gbc.setState(0x124e, 0x68e9, 0xd630, 0xfaf6, 0x4f19, 0x9a8c, 0x0, 0x1);
        gbc.writeMem(0x124e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x68e9);
        EXPECT(gbc.pc(), 0x1250);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0288
        gbc.setState(0x42da, 0xf396, 0x90e0, 0xd556, 0x5ea7, 0x1b88, 0x1, 0x1);
        gbc.writeMem(0x42da, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xf396);
        EXPECT(gbc.pc(), 0x42dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0289
        gbc.setState(0xc79d, 0x8bf7, 0x8360, 0xc7c3, 0xe81e, 0x5a19, 0x0, 0x0);
        gbc.writeMem(0xc79d, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x8bf7);
        EXPECT(gbc.pc(), 0xc79f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc79d), 0xcb);
        EXPECT(gbc.readMem(0xc79e), 0x1a);
        // CB 1A 028A
        gbc.setState(0x7617, 0x8128, 0x77b0, 0xf032, 0x61ee, 0x5cc2, 0x0, 0x1);
        gbc.writeMem(0x7617, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x8128);
        EXPECT(gbc.pc(), 0x7619);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 028B
        gbc.setState(0x4aa1, 0xc1f8, 0xfda0, 0xbcfd, 0x6ea0, 0x1661, 0x0, 0x0);
        gbc.writeMem(0x4aa1, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xc1f8);
        EXPECT(gbc.pc(), 0x4aa3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 028C
        gbc.setState(0xe9d3, 0x6d8f, 0x61b0, 0x8ffa, 0x902a, 0x4909, 0x1, 0x1);
        gbc.writeMem(0xe9d3, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x6d8f);
        EXPECT(gbc.pc(), 0xe9d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9d3), 0xcb);
        EXPECT(gbc.readMem(0xe9d4), 0x1a);
        // CB 1A 028D
        gbc.setState(0x8ef6, 0xf87e, 0x5d80, 0x3ea2, 0xb80d, 0x8cdd, 0x1, 0x0);
        gbc.writeMem(0x8ef6, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xf87e);
        EXPECT(gbc.pc(), 0x8ef8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ef6), 0xcb);
        EXPECT(gbc.readMem(0x8ef7), 0x1a);
        // CB 1A 028E
        gbc.setState(0x619, 0x8271, 0x48b0, 0x153a, 0xce41, 0x2b05, 0x0, 0x0);
        gbc.writeMem(0x619, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x8271);
        EXPECT(gbc.pc(), 0x61b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 028F
        gbc.setState(0x2654, 0x844e, 0xdaa0, 0x58cd, 0xd714, 0xb920, 0x0, 0x1);
        gbc.writeMem(0x2654, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x844e);
        EXPECT(gbc.pc(), 0x2656);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0290
        gbc.setState(0x4047, 0xee93, 0x4510, 0x7bea, 0x4da4, 0xdabb, 0x1, 0x0);
        gbc.writeMem(0x4047, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xee93);
        EXPECT(gbc.pc(), 0x4049);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0291
        gbc.setState(0xe191, 0x7e8f, 0x7160, 0xc985, 0xadfc, 0xc735, 0x0, 0x0);
        gbc.writeMem(0xe191, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x7e8f);
        EXPECT(gbc.pc(), 0xe193);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe191), 0xcb);
        EXPECT(gbc.readMem(0xe192), 0x1a);
        // CB 1A 0292
        gbc.setState(0x917b, 0x8c35, 0x3e20, 0x745a, 0xffa5, 0xc30, 0x1, 0x0);
        gbc.writeMem(0x917b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x8c35);
        EXPECT(gbc.pc(), 0x917d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x917b), 0xcb);
        EXPECT(gbc.readMem(0x917c), 0x1a);
        // CB 1A 0293
        gbc.setState(0x5251, 0x99dd, 0x54c0, 0xaa85, 0x4206, 0xd67a, 0x0, 0x0);
        gbc.writeMem(0x5251, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x99dd);
        EXPECT(gbc.pc(), 0x5253);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0294
        gbc.setState(0x9337, 0x14b0, 0xf3e0, 0x7ae3, 0x7adb, 0xb8, 0x1, 0x1);
        gbc.writeMem(0x9337, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x14b0);
        EXPECT(gbc.pc(), 0x9339);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9337), 0xcb);
        EXPECT(gbc.readMem(0x9338), 0x1a);
        // CB 1A 0295
        gbc.setState(0x4ca3, 0x5457, 0xf740, 0x4be9, 0x6c40, 0x82c2, 0x0, 0x1);
        gbc.writeMem(0x4ca3, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x5457);
        EXPECT(gbc.pc(), 0x4ca5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0296
        gbc.setState(0xabb6, 0x3bc1, 0x1750, 0xa1f9, 0xb97c, 0xe02b, 0x1, 0x0);
        gbc.writeMem(0xabb6, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x3bc1);
        EXPECT(gbc.pc(), 0xabb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabb6), 0xcb);
        EXPECT(gbc.readMem(0xabb7), 0x1a);
        // CB 1A 0297
        gbc.setState(0x882a, 0xfa38, 0xb9b0, 0x2111, 0x629a, 0x1684, 0x1, 0x1);
        gbc.writeMem(0x882a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xfa38);
        EXPECT(gbc.pc(), 0x882c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x882a), 0xcb);
        EXPECT(gbc.readMem(0x882b), 0x1a);
        // CB 1A 0298
        gbc.setState(0x6e6e, 0x9f5a, 0x5cf0, 0xae01, 0x1c49, 0x2d3e, 0x0, 0x1);
        gbc.writeMem(0x6e6e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x9f5a);
        EXPECT(gbc.pc(), 0x6e70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0299
        gbc.setState(0xcb28, 0xcf71, 0x33d0, 0x59c5, 0x295c, 0x7e91, 0x0, 0x1);
        gbc.writeMem(0xcb28, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xcf71);
        EXPECT(gbc.pc(), 0xcb2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb28), 0xcb);
        EXPECT(gbc.readMem(0xcb29), 0x1a);
        // CB 1A 029A
        gbc.setState(0x4240, 0x5843, 0xd1f0, 0x7570, 0x933e, 0x5238, 0x1, 0x1);
        gbc.writeMem(0x4240, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x5843);
        EXPECT(gbc.pc(), 0x4242);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 029B
        gbc.setState(0x6d78, 0x52f8, 0x2d0, 0x802c, 0x9f38, 0x7087, 0x0, 0x0);
        gbc.writeMem(0x6d78, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x52f8);
        EXPECT(gbc.pc(), 0x6d7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 029C
        gbc.setState(0x4c53, 0xb51a, 0x6050, 0x5e2a, 0x210c, 0xf2a0, 0x1, 0x0);
        gbc.writeMem(0x4c53, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xb51a);
        EXPECT(gbc.pc(), 0x4c55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 029D
        gbc.setState(0x1536, 0xe4db, 0xc160, 0x5342, 0x7627, 0xa14, 0x1, 0x1);
        gbc.writeMem(0x1536, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xe4db);
        EXPECT(gbc.pc(), 0x1538);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 029E
        gbc.setState(0x6c37, 0x82e3, 0x8710, 0x891c, 0x4535, 0xddee, 0x1, 0x0);
        gbc.writeMem(0x6c37, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x82e3);
        EXPECT(gbc.pc(), 0x6c39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 029F
        gbc.setState(0x64b6, 0xc1a7, 0xd910, 0xaea4, 0x426d, 0xf009, 0x0, 0x0);
        gbc.writeMem(0x64b6, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xc1a7);
        EXPECT(gbc.pc(), 0x64b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 02A0
        gbc.setState(0xba09, 0x4306, 0xe740, 0x9eb3, 0xb2da, 0xf926, 0x0, 0x0);
        gbc.writeMem(0xba09, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x4306);
        EXPECT(gbc.pc(), 0xba0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba09), 0xcb);
        EXPECT(gbc.readMem(0xba0a), 0x1a);
        // CB 1A 02A1
        gbc.setState(0x5dcf, 0x44ee, 0x6ee0, 0x4697, 0xc699, 0x4dea, 0x0, 0x1);
        gbc.writeMem(0x5dcf, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x44ee);
        EXPECT(gbc.pc(), 0x5dd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 02A2
        gbc.setState(0x9585, 0x5cd6, 0x4a20, 0x14fe, 0x1380, 0xeb07, 0x1, 0x1);
        gbc.writeMem(0x9585, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x5cd6);
        EXPECT(gbc.pc(), 0x9587);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9585), 0xcb);
        EXPECT(gbc.readMem(0x9586), 0x1a);
        // CB 1A 02A3
        gbc.setState(0xbd00, 0x1159, 0x6de0, 0x2ed8, 0x7d70, 0xf3bb, 0x0, 0x0);
        gbc.writeMem(0xbd00, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x1159);
        EXPECT(gbc.pc(), 0xbd02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd00), 0xcb);
        EXPECT(gbc.readMem(0xbd01), 0x1a);
        // CB 1A 02A4
        gbc.setState(0xbb6c, 0xc48a, 0x35f0, 0x8eab, 0xf2da, 0xc4d5, 0x0, 0x1);
        gbc.writeMem(0xbb6c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xc48a);
        EXPECT(gbc.pc(), 0xbb6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb6c), 0xcb);
        EXPECT(gbc.readMem(0xbb6d), 0x1a);
        // CB 1A 02A5
        gbc.setState(0x5cf5, 0x8d49, 0xa090, 0xad74, 0x21b8, 0x3892, 0x1, 0x1);
        gbc.writeMem(0x5cf5, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x8d49);
        EXPECT(gbc.pc(), 0x5cf7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 02A6
        gbc.setState(0x96a0, 0x8d3b, 0xc1a0, 0x20c1, 0xeea4, 0x22a1, 0x0, 0x1);
        gbc.writeMem(0x96a0, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x8d3b);
        EXPECT(gbc.pc(), 0x96a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96a0), 0xcb);
        EXPECT(gbc.readMem(0x96a1), 0x1a);
        // CB 1A 02A7
        gbc.setState(0x8beb, 0xa3c, 0xe000, 0xdefd, 0x985d, 0x38fd, 0x1, 0x0);
        gbc.writeMem(0x8beb, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xa3c);
        EXPECT(gbc.pc(), 0x8bed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8beb), 0xcb);
        EXPECT(gbc.readMem(0x8bec), 0x1a);
        // CB 1A 02A8
        gbc.setState(0x158, 0xd17e, 0x9af0, 0xbae9, 0xa80e, 0xaf3f, 0x1, 0x0);
        gbc.writeMem(0x158, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xd17e);
        EXPECT(gbc.pc(), 0x15a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 02A9
        gbc.setState(0x2135, 0xec8b, 0x82c0, 0xcf08, 0x8cf4, 0xd5a6, 0x0, 0x1);
        gbc.writeMem(0x2135, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xec8b);
        EXPECT(gbc.pc(), 0x2137);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 02AA
        gbc.setState(0xde04, 0x2545, 0xde80, 0x951a, 0x9669, 0x9ba9, 0x1, 0x0);
        gbc.writeMem(0xde04, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x2545);
        EXPECT(gbc.pc(), 0xde06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde04), 0xcb);
        EXPECT(gbc.readMem(0xde05), 0x1a);
        // CB 1A 02AB
        gbc.setState(0xa556, 0xfc22, 0x7850, 0x4db6, 0x92c0, 0x3651, 0x1, 0x1);
        gbc.writeMem(0xa556, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xfc22);
        EXPECT(gbc.pc(), 0xa558);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa556), 0xcb);
        EXPECT(gbc.readMem(0xa557), 0x1a);
        // CB 1A 02AC
        gbc.setState(0xde00, 0xe72a, 0x8e10, 0xd9ff, 0xd16f, 0xe6ad, 0x0, 0x0);
        gbc.writeMem(0xde00, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xe72a);
        EXPECT(gbc.pc(), 0xde02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde00), 0xcb);
        EXPECT(gbc.readMem(0xde01), 0x1a);
        // CB 1A 02AD
        gbc.setState(0xd55f, 0x2d8f, 0xea0, 0x4178, 0x9c7f, 0x65db, 0x0, 0x1);
        gbc.writeMem(0xd55f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x2d8f);
        EXPECT(gbc.pc(), 0xd561);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd55f), 0xcb);
        EXPECT(gbc.readMem(0xd560), 0x1a);
        // CB 1A 02AE
        gbc.setState(0xef22, 0x79bf, 0x75d0, 0x5062, 0x36d7, 0xc4f6, 0x1, 0x0);
        gbc.writeMem(0xef22, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x79bf);
        EXPECT(gbc.pc(), 0xef24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef22), 0xcb);
        EXPECT(gbc.readMem(0xef23), 0x1a);
        // CB 1A 02AF
        gbc.setState(0xc503, 0x952a, 0x2e10, 0x1e26, 0x50e4, 0x21b6, 0x1, 0x1);
        gbc.writeMem(0xc503, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x952a);
        EXPECT(gbc.pc(), 0xc505);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc503), 0xcb);
        EXPECT(gbc.readMem(0xc504), 0x1a);
        // CB 1A 02B0
        gbc.setState(0xa, 0xb304, 0xaf10, 0xd2ca, 0x5700, 0x54b4, 0x1, 0x0);
        gbc.writeMem(0xa, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xb304);
        EXPECT(gbc.pc(), 0xc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 02B1
        gbc.setState(0xc4cf, 0x8a1, 0x5ab0, 0xfa7d, 0x3c0b, 0x8188, 0x1, 0x0);
        gbc.writeMem(0xc4cf, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x8a1);
        EXPECT(gbc.pc(), 0xc4d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4cf), 0xcb);
        EXPECT(gbc.readMem(0xc4d0), 0x1a);
        // CB 1A 02B2
        gbc.setState(0xdc71, 0xaac9, 0x59e0, 0x51fa, 0x5ff2, 0x6093, 0x1, 0x1);
        gbc.writeMem(0xdc71, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xaac9);
        EXPECT(gbc.pc(), 0xdc73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc71), 0xcb);
        EXPECT(gbc.readMem(0xdc72), 0x1a);
        // CB 1A 02B3
        gbc.setState(0x5cd7, 0x17c6, 0x4ea0, 0x4a32, 0xa325, 0x882b, 0x1, 0x1);
        gbc.writeMem(0x5cd7, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x17c6);
        EXPECT(gbc.pc(), 0x5cd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 02B4
        gbc.setState(0x661d, 0xdf3e, 0x4bc0, 0x51bd, 0xdab6, 0xa15c, 0x0, 0x1);
        gbc.writeMem(0x661d, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xdf3e);
        EXPECT(gbc.pc(), 0x661f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 02B5
        gbc.setState(0x73c1, 0xcec, 0xe530, 0x52d7, 0x2e46, 0x8a91, 0x0, 0x0);
        gbc.writeMem(0x73c1, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xcec);
        EXPECT(gbc.pc(), 0x73c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 02B6
        gbc.setState(0xe355, 0xe10, 0x2fa0, 0x720, 0x222d, 0x1b8e, 0x1, 0x0);
        gbc.writeMem(0xe355, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xe10);
        EXPECT(gbc.pc(), 0xe357);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe355), 0xcb);
        EXPECT(gbc.readMem(0xe356), 0x1a);
        // CB 1A 02B7
        gbc.setState(0x21bd, 0x805b, 0xec60, 0x3770, 0x4f67, 0x495a, 0x0, 0x1);
        gbc.writeMem(0x21bd, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x805b);
        EXPECT(gbc.pc(), 0x21bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 02B8
        gbc.setState(0x5b8d, 0x7c4c, 0xbfc0, 0xd5a0, 0xef8a, 0xcbe6, 0x1, 0x0);
        gbc.writeMem(0x5b8d, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x7c4c);
        EXPECT(gbc.pc(), 0x5b8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 02B9
        gbc.setState(0x1574, 0xf1fd, 0x36b0, 0x82b7, 0x1d34, 0x18ba, 0x1, 0x0);
        gbc.writeMem(0x1574, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xf1fd);
        EXPECT(gbc.pc(), 0x1576);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 02BA
        gbc.setState(0x5bdc, 0x55cc, 0x1b0, 0x719c, 0xe53a, 0x7edf, 0x1, 0x1);
        gbc.writeMem(0x5bdc, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x55cc);
        EXPECT(gbc.pc(), 0x5bde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 02BB
        gbc.setState(0xdb40, 0xc79d, 0x4230, 0x7861, 0xa02e, 0x1bca, 0x0, 0x0);
        gbc.writeMem(0xdb40, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xc79d);
        EXPECT(gbc.pc(), 0xdb42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb40), 0xcb);
        EXPECT(gbc.readMem(0xdb41), 0x1a);
        // CB 1A 02BC
        gbc.setState(0xaafe, 0xa7c9, 0x74d0, 0xcccf, 0xe5ff, 0x16ff, 0x0, 0x1);
        gbc.writeMem(0xaafe, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xa7c9);
        EXPECT(gbc.pc(), 0xab00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaafe), 0xcb);
        EXPECT(gbc.readMem(0xaaff), 0x1a);
        // CB 1A 02BD
        gbc.setState(0x3d07, 0x248e, 0x3cb0, 0x8af9, 0xfbf7, 0x1fa2, 0x1, 0x1);
        gbc.writeMem(0x3d07, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x248e);
        EXPECT(gbc.pc(), 0x3d09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 02BE
        gbc.setState(0xc3fd, 0xb58a, 0x6870, 0xee96, 0x39fc, 0xac1b, 0x1, 0x0);
        gbc.writeMem(0xc3fd, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xb58a);
        EXPECT(gbc.pc(), 0xc3ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3fd), 0xcb);
        EXPECT(gbc.readMem(0xc3fe), 0x1a);
        // CB 1A 02BF
        gbc.setState(0xd894, 0xc2e9, 0xe90, 0x75dc, 0x457e, 0x9832, 0x0, 0x0);
        gbc.writeMem(0xd894, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xc2e9);
        EXPECT(gbc.pc(), 0xd896);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd894), 0xcb);
        EXPECT(gbc.readMem(0xd895), 0x1a);
        // CB 1A 02C0
        gbc.setState(0x8462, 0xced6, 0xc670, 0x2228, 0x6abe, 0x6ebe, 0x1, 0x0);
        gbc.writeMem(0x8462, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xced6);
        EXPECT(gbc.pc(), 0x8464);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8462), 0xcb);
        EXPECT(gbc.readMem(0x8463), 0x1a);
        // CB 1A 02C1
        gbc.setState(0x3731, 0x8f6a, 0xa7c0, 0x919c, 0xed78, 0x2fd, 0x0, 0x0);
        gbc.writeMem(0x3731, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x8f6a);
        EXPECT(gbc.pc(), 0x3733);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 02C2
        gbc.setState(0x4559, 0x807b, 0xa9f0, 0x976, 0xac2b, 0xdcfc, 0x1, 0x0);
        gbc.writeMem(0x4559, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x807b);
        EXPECT(gbc.pc(), 0x455b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 02C3
        gbc.setState(0x51c6, 0xe470, 0xbe00, 0x821e, 0xe4f0, 0xbd45, 0x1, 0x0);
        gbc.writeMem(0x51c6, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xe470);
        EXPECT(gbc.pc(), 0x51c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 02C4
        gbc.setState(0x6880, 0x5041, 0x9ab0, 0xf212, 0xfc0c, 0x5f18, 0x1, 0x1);
        gbc.writeMem(0x6880, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x5041);
        EXPECT(gbc.pc(), 0x6882);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 02C5
        gbc.setState(0x3c5b, 0xc026, 0x48c0, 0xaafe, 0xc2b1, 0xb998, 0x0, 0x0);
        gbc.writeMem(0x3c5b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xc026);
        EXPECT(gbc.pc(), 0x3c5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 02C6
        gbc.setState(0x4e97, 0x36a6, 0x9550, 0x3bb, 0xd1b4, 0x966a, 0x1, 0x0);
        gbc.writeMem(0x4e97, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x36a6);
        EXPECT(gbc.pc(), 0x4e99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 02C7
        gbc.setState(0x60dd, 0x7144, 0x49d0, 0xa6d2, 0x7ef, 0xd69f, 0x1, 0x0);
        gbc.writeMem(0x60dd, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x7144);
        EXPECT(gbc.pc(), 0x60df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 02C8
        gbc.setState(0x741b, 0xb557, 0x2d90, 0x8e20, 0xb80d, 0x956a, 0x0, 0x1);
        gbc.writeMem(0x741b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xb557);
        EXPECT(gbc.pc(), 0x741d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 02C9
        gbc.setState(0x3db7, 0x1f56, 0xe020, 0x8e66, 0x290a, 0x309e, 0x0, 0x1);
        gbc.writeMem(0x3db7, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x1f56);
        EXPECT(gbc.pc(), 0x3db9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 02CA
        gbc.setState(0xbc47, 0x480d, 0xe610, 0x8d06, 0x1718, 0x9bf0, 0x0, 0x0);
        gbc.writeMem(0xbc47, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x480d);
        EXPECT(gbc.pc(), 0xbc49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc47), 0xcb);
        EXPECT(gbc.readMem(0xbc48), 0x1a);
        // CB 1A 02CB
        gbc.setState(0x39b2, 0xc60f, 0xe510, 0x3ac2, 0x2480, 0x88d3, 0x0, 0x0);
        gbc.writeMem(0x39b2, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xc60f);
        EXPECT(gbc.pc(), 0x39b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 02CC
        gbc.setState(0x8253, 0x7a88, 0xfb30, 0x6b18, 0xc2eb, 0x4470, 0x0, 0x1);
        gbc.writeMem(0x8253, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x7a88);
        EXPECT(gbc.pc(), 0x8255);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8253), 0xcb);
        EXPECT(gbc.readMem(0x8254), 0x1a);
        // CB 1A 02CD
        gbc.setState(0x25b6, 0x7e32, 0x3df0, 0x9b44, 0x3253, 0x3b3, 0x1, 0x0);
        gbc.writeMem(0x25b6, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x7e32);
        EXPECT(gbc.pc(), 0x25b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 02CF
        gbc.setState(0xbd65, 0x9fde, 0x2050, 0xcec2, 0x2470, 0xd607, 0x0, 0x0);
        gbc.writeMem(0xbd65, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x9fde);
        EXPECT(gbc.pc(), 0xbd67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd65), 0xcb);
        EXPECT(gbc.readMem(0xbd66), 0x1a);
        // CB 1A 02D0
        gbc.setState(0x79ac, 0xbc8f, 0x71b0, 0x8bdf, 0x11eb, 0xc1f5, 0x1, 0x0);
        gbc.writeMem(0x79ac, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xbc8f);
        EXPECT(gbc.pc(), 0x79ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 02D1
        gbc.setState(0x6842, 0x7d62, 0x95d0, 0xc559, 0x904f, 0x63b7, 0x1, 0x1);
        gbc.writeMem(0x6842, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x7d62);
        EXPECT(gbc.pc(), 0x6844);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 02D2
        gbc.setState(0x3b30, 0x309e, 0x6ea0, 0xbde3, 0x230b, 0xcda0, 0x0, 0x0);
        gbc.writeMem(0x3b30, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x309e);
        EXPECT(gbc.pc(), 0x3b32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 02D3
        gbc.setState(0xbbcb, 0xbd23, 0x91a0, 0x60f2, 0xfe53, 0x97fc, 0x0, 0x0);
        gbc.writeMem(0xbbcb, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xbd23);
        EXPECT(gbc.pc(), 0xbbcd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbcb), 0xcb);
        EXPECT(gbc.readMem(0xbbcc), 0x1a);
        // CB 1A 02D4
        gbc.setState(0xd2fb, 0xe368, 0xf380, 0x1936, 0xbcb2, 0x8d0b, 0x0, 0x1);
        gbc.writeMem(0xd2fb, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xe368);
        EXPECT(gbc.pc(), 0xd2fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2fb), 0xcb);
        EXPECT(gbc.readMem(0xd2fc), 0x1a);
        // CB 1A 02D5
        gbc.setState(0xfeb, 0x3ee9, 0xb40, 0xbaee, 0x8a58, 0x2cee, 0x1, 0x1);
        gbc.writeMem(0xfeb, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x3ee9);
        EXPECT(gbc.pc(), 0xfed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 02D6
        gbc.setState(0xc05a, 0xb12f, 0xc3c0, 0xdaaf, 0xb4ca, 0x55d9, 0x1, 0x1);
        gbc.writeMem(0xc05a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xb12f);
        EXPECT(gbc.pc(), 0xc05c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc05a), 0xcb);
        EXPECT(gbc.readMem(0xc05b), 0x1a);
        // CB 1A 02D7
        gbc.setState(0x8863, 0x799, 0x9e90, 0x3262, 0x9fe6, 0xfb8d, 0x0, 0x1);
        gbc.writeMem(0x8863, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x799);
        EXPECT(gbc.pc(), 0x8865);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8863), 0xcb);
        EXPECT(gbc.readMem(0x8864), 0x1a);
        // CB 1A 02D8
        gbc.setState(0xe478, 0x5f8f, 0xdd80, 0xaef, 0xb8bc, 0xf293, 0x1, 0x0);
        gbc.writeMem(0xe478, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x5f8f);
        EXPECT(gbc.pc(), 0xe47a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe478), 0xcb);
        EXPECT(gbc.readMem(0xe479), 0x1a);
        // CB 1A 02D9
        gbc.setState(0xb6e0, 0x2ce4, 0xdae0, 0x63ff, 0x8943, 0xddb9, 0x0, 0x0);
        gbc.writeMem(0xb6e0, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x2ce4);
        EXPECT(gbc.pc(), 0xb6e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6e0), 0xcb);
        EXPECT(gbc.readMem(0xb6e1), 0x1a);
        // CB 1A 02DA
        gbc.setState(0x60d0, 0xdc91, 0xab10, 0xc4b, 0xda8c, 0xeec1, 0x0, 0x0);
        gbc.writeMem(0x60d0, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xdc91);
        EXPECT(gbc.pc(), 0x60d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 02DB
        gbc.setState(0x2049, 0xd843, 0xcb0, 0x4bf7, 0x5480, 0x5ad, 0x1, 0x1);
        gbc.writeMem(0x2049, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xd843);
        EXPECT(gbc.pc(), 0x204b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 02DC
        gbc.setState(0x18d1, 0x7985, 0x3680, 0xffa8, 0x723, 0xdd80, 0x0, 0x0);
        gbc.writeMem(0x18d1, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x7985);
        EXPECT(gbc.pc(), 0x18d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 02DD
        gbc.setState(0xb5eb, 0x2781, 0x1540, 0xc81e, 0x7826, 0x56a9, 0x0, 0x1);
        gbc.writeMem(0xb5eb, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x2781);
        EXPECT(gbc.pc(), 0xb5ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5eb), 0xcb);
        EXPECT(gbc.readMem(0xb5ec), 0x1a);
        // CB 1A 02DE
        gbc.setState(0x7758, 0x110, 0xd5b0, 0x88fa, 0x880e, 0xf30c, 0x1, 0x1);
        gbc.writeMem(0x7758, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x110);
        EXPECT(gbc.pc(), 0x775a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 02DF
        gbc.setState(0xa279, 0xf4a, 0xcc50, 0x7a0d, 0x8534, 0x32f, 0x0, 0x1);
        gbc.writeMem(0xa279, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xf4a);
        EXPECT(gbc.pc(), 0xa27b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa279), 0xcb);
        EXPECT(gbc.readMem(0xa27a), 0x1a);
        // CB 1A 02E0
        gbc.setState(0xe759, 0xcd38, 0xad70, 0xeb70, 0xb8c9, 0x5e74, 0x0, 0x1);
        gbc.writeMem(0xe759, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xcd38);
        EXPECT(gbc.pc(), 0xe75b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe759), 0xcb);
        EXPECT(gbc.readMem(0xe75a), 0x1a);
        // CB 1A 02E1
        gbc.setState(0xde6e, 0x78d0, 0x71a0, 0xebe, 0x30ee, 0xadd4, 0x0, 0x0);
        gbc.writeMem(0xde6e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x78d0);
        EXPECT(gbc.pc(), 0xde70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde6e), 0xcb);
        EXPECT(gbc.readMem(0xde6f), 0x1a);
        // CB 1A 02E2
        gbc.setState(0xb6f9, 0xd3fd, 0xa460, 0xf5eb, 0x1aec, 0xd41b, 0x1, 0x1);
        gbc.writeMem(0xb6f9, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xd3fd);
        EXPECT(gbc.pc(), 0xb6fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6f9), 0xcb);
        EXPECT(gbc.readMem(0xb6fa), 0x1a);
        // CB 1A 02E3
        gbc.setState(0x66b5, 0x7706, 0xe510, 0xac32, 0x3a8b, 0x935c, 0x1, 0x0);
        gbc.writeMem(0x66b5, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x7706);
        EXPECT(gbc.pc(), 0x66b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 02E5
        gbc.setState(0x6e1e, 0x1f3e, 0x1f10, 0xc985, 0x5ace, 0x2165, 0x0, 0x1);
        gbc.writeMem(0x6e1e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x1f3e);
        EXPECT(gbc.pc(), 0x6e20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 02E6
        gbc.setState(0x1d8f, 0x3a53, 0xd850, 0x522c, 0xc9f9, 0xc51, 0x1, 0x0);
        gbc.writeMem(0x1d8f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x3a53);
        EXPECT(gbc.pc(), 0x1d91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 02E7
        gbc.setState(0xb7cb, 0xb954, 0xb930, 0xed8b, 0x7ea2, 0xc2ea, 0x0, 0x0);
        gbc.writeMem(0xb7cb, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xb954);
        EXPECT(gbc.pc(), 0xb7cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7cb), 0xcb);
        EXPECT(gbc.readMem(0xb7cc), 0x1a);
        // CB 1A 02E8
        gbc.setState(0x2134, 0x4fce, 0x5750, 0x483, 0x8ca4, 0x36cf, 0x1, 0x0);
        gbc.writeMem(0x2134, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x4fce);
        EXPECT(gbc.pc(), 0x2136);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 02E9
        gbc.setState(0xd4a3, 0xa658, 0xea0, 0xdee, 0x5be1, 0xa77f, 0x1, 0x0);
        gbc.writeMem(0xd4a3, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xa658);
        EXPECT(gbc.pc(), 0xd4a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4a3), 0xcb);
        EXPECT(gbc.readMem(0xd4a4), 0x1a);
        // CB 1A 02EA
        gbc.setState(0x901d, 0xbd5c, 0xc840, 0x4287, 0x59c9, 0xbf4e, 0x1, 0x1);
        gbc.writeMem(0x901d, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xbd5c);
        EXPECT(gbc.pc(), 0x901f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x901d), 0xcb);
        EXPECT(gbc.readMem(0x901e), 0x1a);
        // CB 1A 02EB
        gbc.setState(0xd74a, 0x647c, 0xbc50, 0x5f9, 0x6371, 0xd26d, 0x0, 0x0);
        gbc.writeMem(0xd74a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x647c);
        EXPECT(gbc.pc(), 0xd74c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd74a), 0xcb);
        EXPECT(gbc.readMem(0xd74b), 0x1a);
        // CB 1A 02EC
        gbc.setState(0xcc1e, 0xe425, 0x98b0, 0xc7ab, 0x9a24, 0x5951, 0x0, 0x0);
        gbc.writeMem(0xcc1e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xe425);
        EXPECT(gbc.pc(), 0xcc20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc1e), 0xcb);
        EXPECT(gbc.readMem(0xcc1f), 0x1a);
        // CB 1A 02ED
        gbc.setState(0x42d, 0x5a25, 0xdd80, 0xdb97, 0x308d, 0x491b, 0x1, 0x0);
        gbc.writeMem(0x42d, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x5a25);
        EXPECT(gbc.pc(), 0x42f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 02EE
        gbc.setState(0xc4c8, 0xda4b, 0x9560, 0x1582, 0xa8d3, 0x41c3, 0x0, 0x1);
        gbc.writeMem(0xc4c8, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xda4b);
        EXPECT(gbc.pc(), 0xc4ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4c8), 0xcb);
        EXPECT(gbc.readMem(0xc4c9), 0x1a);
        // CB 1A 02EF
        gbc.setState(0x2cc9, 0x142c, 0xc7b0, 0x96fd, 0xbfe6, 0xaf7e, 0x0, 0x1);
        gbc.writeMem(0x2cc9, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x142c);
        EXPECT(gbc.pc(), 0x2ccb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 02F0
        gbc.setState(0x927a, 0x3b05, 0xa220, 0x25df, 0x1092, 0x1dde, 0x0, 0x0);
        gbc.writeMem(0x927a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x3b05);
        EXPECT(gbc.pc(), 0x927c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x927a), 0xcb);
        EXPECT(gbc.readMem(0x927b), 0x1a);
        // CB 1A 02F2
        gbc.setState(0x1f2c, 0x7e29, 0xa350, 0xc24f, 0xc2de, 0xd731, 0x0, 0x0);
        gbc.writeMem(0x1f2c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x7e29);
        EXPECT(gbc.pc(), 0x1f2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 02F3
        gbc.setState(0x2146, 0x12be, 0x240, 0x94cf, 0xb7c3, 0x1015, 0x1, 0x1);
        gbc.writeMem(0x2146, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x12be);
        EXPECT(gbc.pc(), 0x2148);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 02F4
        gbc.setState(0x7ba0, 0xfc4, 0xc5b0, 0xecf5, 0x9253, 0x31fe, 0x1, 0x0);
        gbc.writeMem(0x7ba0, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xfc4);
        EXPECT(gbc.pc(), 0x7ba2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 02F5
        gbc.setState(0x9995, 0x1653, 0xef50, 0x98f4, 0xd9a1, 0xcccd, 0x0, 0x1);
        gbc.writeMem(0x9995, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x1653);
        EXPECT(gbc.pc(), 0x9997);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9995), 0xcb);
        EXPECT(gbc.readMem(0x9996), 0x1a);
        // CB 1A 02F6
        gbc.setState(0x3efd, 0x6267, 0x6450, 0xd96, 0x84da, 0xba38, 0x0, 0x1);
        gbc.writeMem(0x3efd, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x6267);
        EXPECT(gbc.pc(), 0x3eff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 02F7
        gbc.setState(0xe963, 0x7d80, 0x3d20, 0xa0ba, 0xd599, 0x5a42, 0x1, 0x0);
        gbc.writeMem(0xe963, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x7d80);
        EXPECT(gbc.pc(), 0xe965);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe963), 0xcb);
        EXPECT(gbc.readMem(0xe964), 0x1a);
        // CB 1A 02F8
        gbc.setState(0x97a4, 0xe4d4, 0xaa0, 0x9761, 0xaf1e, 0xe579, 0x0, 0x0);
        gbc.writeMem(0x97a4, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xe4d4);
        EXPECT(gbc.pc(), 0x97a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97a4), 0xcb);
        EXPECT(gbc.readMem(0x97a5), 0x1a);
        // CB 1A 02F9
        gbc.setState(0x638, 0xcea4, 0x1a50, 0xe423, 0x4fd7, 0x23b3, 0x1, 0x0);
        gbc.writeMem(0x638, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xcea4);
        EXPECT(gbc.pc(), 0x63a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 02FA
        gbc.setState(0x3d01, 0x40e5, 0x1400, 0xac9d, 0x93dc, 0xf635, 0x1, 0x0);
        gbc.writeMem(0x3d01, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x40e5);
        EXPECT(gbc.pc(), 0x3d03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 02FB
        gbc.setState(0xbdf4, 0x53f8, 0xd150, 0x47c, 0xaab, 0x73f7, 0x0, 0x1);
        gbc.writeMem(0xbdf4, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x53f8);
        EXPECT(gbc.pc(), 0xbdf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdf4), 0xcb);
        EXPECT(gbc.readMem(0xbdf5), 0x1a);
        // CB 1A 02FC
        gbc.setState(0x47fb, 0xcc11, 0x7270, 0xf3d0, 0x70b7, 0x4d41, 0x1, 0x0);
        gbc.writeMem(0x47fb, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xcc11);
        EXPECT(gbc.pc(), 0x47fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 02FD
        gbc.setState(0x4101, 0x7a65, 0xeec0, 0x64a2, 0xb01f, 0xf3fe, 0x1, 0x0);
        gbc.writeMem(0x4101, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x7a65);
        EXPECT(gbc.pc(), 0x4103);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 02FE
        gbc.setState(0x6a16, 0x9d84, 0xca60, 0x5dcd, 0xd5fe, 0xa86c, 0x0, 0x0);
        gbc.writeMem(0x6a16, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x9d84);
        EXPECT(gbc.pc(), 0x6a18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 02FF
        gbc.setState(0x3dc3, 0xb9a7, 0x7460, 0xe820, 0xd0b3, 0xef0b, 0x1, 0x0);
        gbc.writeMem(0x3dc3, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xb9a7);
        EXPECT(gbc.pc(), 0x3dc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0300
        gbc.setState(0xc5a3, 0xa728, 0xd930, 0xe5c2, 0x41f3, 0xc954, 0x1, 0x0);
        gbc.writeMem(0xc5a3, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xa728);
        EXPECT(gbc.pc(), 0xc5a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5a3), 0xcb);
        EXPECT(gbc.readMem(0xc5a4), 0x1a);
        // CB 1A 0301
        gbc.setState(0x3c04, 0xeabd, 0x11c0, 0x9d01, 0x8a2b, 0x246f, 0x0, 0x1);
        gbc.writeMem(0x3c04, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xeabd);
        EXPECT(gbc.pc(), 0x3c06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0302
        gbc.setState(0x69b7, 0x7e55, 0x19f0, 0x9459, 0x5844, 0x3faf, 0x1, 0x0);
        gbc.writeMem(0x69b7, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x7e55);
        EXPECT(gbc.pc(), 0x69b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0304
        gbc.setState(0x3570, 0x5dec, 0xffa0, 0x8147, 0x962d, 0x3ae1, 0x0, 0x1);
        gbc.writeMem(0x3570, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x5dec);
        EXPECT(gbc.pc(), 0x3572);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0305
        gbc.setState(0x7993, 0x2541, 0x2c80, 0x57c7, 0xbe97, 0x323b, 0x0, 0x0);
        gbc.writeMem(0x7993, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x2541);
        EXPECT(gbc.pc(), 0x7995);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0306
        gbc.setState(0x922f, 0x30c8, 0xe370, 0x2615, 0x9430, 0xdd16, 0x1, 0x0);
        gbc.writeMem(0x922f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x30c8);
        EXPECT(gbc.pc(), 0x9231);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x922f), 0xcb);
        EXPECT(gbc.readMem(0x9230), 0x1a);
        // CB 1A 0307
        gbc.setState(0xf81, 0xd25e, 0xa370, 0x68a4, 0xe166, 0x708a, 0x1, 0x1);
        gbc.writeMem(0xf81, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xd25e);
        EXPECT(gbc.pc(), 0xf83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0308
        gbc.setState(0xd7eb, 0xf69e, 0x3ac0, 0xcb8e, 0x977e, 0x66c9, 0x1, 0x0);
        gbc.writeMem(0xd7eb, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xf69e);
        EXPECT(gbc.pc(), 0xd7ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7eb), 0xcb);
        EXPECT(gbc.readMem(0xd7ec), 0x1a);
        // CB 1A 0309
        gbc.setState(0x94d3, 0x15fe, 0x7b70, 0x9473, 0xce89, 0x7ba1, 0x0, 0x0);
        gbc.writeMem(0x94d3, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x15fe);
        EXPECT(gbc.pc(), 0x94d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94d3), 0xcb);
        EXPECT(gbc.readMem(0x94d4), 0x1a);
        // CB 1A 030A
        gbc.setState(0x83eb, 0x6b26, 0xe560, 0x5b63, 0x9ae5, 0x268c, 0x0, 0x0);
        gbc.writeMem(0x83eb, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x6b26);
        EXPECT(gbc.pc(), 0x83ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83eb), 0xcb);
        EXPECT(gbc.readMem(0x83ec), 0x1a);
        // CB 1A 030B
        gbc.setState(0x652c, 0x1e7a, 0x8670, 0x4918, 0x4b54, 0xc3ca, 0x0, 0x1);
        gbc.writeMem(0x652c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x1e7a);
        EXPECT(gbc.pc(), 0x652e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 030C
        gbc.setState(0x6c1, 0x8a7c, 0x2ba0, 0x5e, 0x53b8, 0x5923, 0x1, 0x0);
        gbc.writeMem(0x6c1, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x8a7c);
        EXPECT(gbc.pc(), 0x6c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 030D
        gbc.setState(0x9456, 0x813c, 0xa90, 0x903e, 0xb33e, 0xa42, 0x1, 0x1);
        gbc.writeMem(0x9456, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x813c);
        EXPECT(gbc.pc(), 0x9458);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9456), 0xcb);
        EXPECT(gbc.readMem(0x9457), 0x1a);
        // CB 1A 030E
        gbc.setState(0x43f2, 0x3820, 0x6be0, 0x91a9, 0xa828, 0x1096, 0x1, 0x1);
        gbc.writeMem(0x43f2, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x3820);
        EXPECT(gbc.pc(), 0x43f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 030F
        gbc.setState(0x65f2, 0xcbe8, 0x1820, 0x7228, 0x288d, 0x291c, 0x0, 0x0);
        gbc.writeMem(0x65f2, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xcbe8);
        EXPECT(gbc.pc(), 0x65f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0310
        gbc.setState(0x414e, 0xbcc5, 0xe6a0, 0xb22, 0x253e, 0xa3bb, 0x0, 0x1);
        gbc.writeMem(0x414e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xbcc5);
        EXPECT(gbc.pc(), 0x4150);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0312
        gbc.setState(0x6f1d, 0x9bfa, 0xc800, 0xa2ae, 0xd4eb, 0x1b9b, 0x1, 0x1);
        gbc.writeMem(0x6f1d, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x9bfa);
        EXPECT(gbc.pc(), 0x6f1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0313
        gbc.setState(0x5d29, 0xdb9e, 0xf130, 0xa59e, 0x1fb5, 0xf604, 0x0, 0x0);
        gbc.writeMem(0x5d29, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xdb9e);
        EXPECT(gbc.pc(), 0x5d2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0314
        gbc.setState(0xc5f, 0x16b7, 0x13f0, 0x6c57, 0xcf50, 0x9e8e, 0x0, 0x0);
        gbc.writeMem(0xc5f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x16b7);
        EXPECT(gbc.pc(), 0xc61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0315
        gbc.setState(0x67b5, 0x57fb, 0xf3b0, 0xbfdb, 0x8c7f, 0x3d10, 0x1, 0x0);
        gbc.writeMem(0x67b5, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x57fb);
        EXPECT(gbc.pc(), 0x67b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0316
        gbc.setState(0xd3b6, 0x95f2, 0xc3f0, 0xe49e, 0x7222, 0xbcdb, 0x0, 0x1);
        gbc.writeMem(0xd3b6, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x95f2);
        EXPECT(gbc.pc(), 0xd3b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3b6), 0xcb);
        EXPECT(gbc.readMem(0xd3b7), 0x1a);
        // CB 1A 0317
        gbc.setState(0xaac2, 0x85bd, 0x3630, 0xec21, 0x4a96, 0xd400, 0x0, 0x0);
        gbc.writeMem(0xaac2, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x85bd);
        EXPECT(gbc.pc(), 0xaac4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaac2), 0xcb);
        EXPECT(gbc.readMem(0xaac3), 0x1a);
        // CB 1A 0318
        gbc.setState(0x6f85, 0xaea4, 0xbc0, 0xcddf, 0x315f, 0xd16c, 0x1, 0x0);
        gbc.writeMem(0x6f85, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xaea4);
        EXPECT(gbc.pc(), 0x6f87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0319
        gbc.setState(0xaad2, 0xfc21, 0xf600, 0x8b5c, 0xba4e, 0x1239, 0x1, 0x1);
        gbc.writeMem(0xaad2, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xfc21);
        EXPECT(gbc.pc(), 0xaad4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaad2), 0xcb);
        EXPECT(gbc.readMem(0xaad3), 0x1a);
        // CB 1A 031A
        gbc.setState(0xb844, 0x1b58, 0x9b50, 0xddd1, 0x35b9, 0xa654, 0x1, 0x1);
        gbc.writeMem(0xb844, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x1b58);
        EXPECT(gbc.pc(), 0xb846);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb844), 0xcb);
        EXPECT(gbc.readMem(0xb845), 0x1a);
        // CB 1A 031B
        gbc.setState(0xb51c, 0xd2de, 0xd9b0, 0xf461, 0x8f94, 0x2978, 0x1, 0x1);
        gbc.writeMem(0xb51c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xd2de);
        EXPECT(gbc.pc(), 0xb51e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb51c), 0xcb);
        EXPECT(gbc.readMem(0xb51d), 0x1a);
        // CB 1A 031C
        gbc.setState(0xbfaa, 0x327e, 0x3ca0, 0x8146, 0xab21, 0x4e1, 0x1, 0x0);
        gbc.writeMem(0xbfaa, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x327e);
        EXPECT(gbc.pc(), 0xbfac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfaa), 0xcb);
        EXPECT(gbc.readMem(0xbfab), 0x1a);
        // CB 1A 031D
        gbc.setState(0x5a75, 0xcc6b, 0xde90, 0x6b91, 0x76f4, 0x2aba, 0x0, 0x0);
        gbc.writeMem(0x5a75, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xcc6b);
        EXPECT(gbc.pc(), 0x5a77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 031F
        gbc.setState(0x5e67, 0xf214, 0x4390, 0x73dd, 0x39fb, 0x503d, 0x0, 0x0);
        gbc.writeMem(0x5e67, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xf214);
        EXPECT(gbc.pc(), 0x5e69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0320
        gbc.setState(0x9b04, 0xba22, 0x21a0, 0xd18b, 0x2b6c, 0x6c51, 0x1, 0x0);
        gbc.writeMem(0x9b04, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xba22);
        EXPECT(gbc.pc(), 0x9b06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b04), 0xcb);
        EXPECT(gbc.readMem(0x9b05), 0x1a);
        // CB 1A 0321
        gbc.setState(0x991e, 0xc33e, 0x5490, 0x1057, 0x8d8d, 0x7566, 0x0, 0x0);
        gbc.writeMem(0x991e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xc33e);
        EXPECT(gbc.pc(), 0x9920);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x991e), 0xcb);
        EXPECT(gbc.readMem(0x991f), 0x1a);
        // CB 1A 0322
        gbc.setState(0xf00, 0xfae0, 0x10b0, 0xca99, 0xaa9b, 0xbf0c, 0x0, 0x1);
        gbc.writeMem(0xf00, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xfae0);
        EXPECT(gbc.pc(), 0xf02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0323
        gbc.setState(0x5e42, 0x28fe, 0xa4a0, 0x16d9, 0x3921, 0xbc6a, 0x0, 0x0);
        gbc.writeMem(0x5e42, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x28fe);
        EXPECT(gbc.pc(), 0x5e44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0324
        gbc.setState(0xd415, 0xfe36, 0x9e60, 0x8ab4, 0x5315, 0x2d3c, 0x1, 0x1);
        gbc.writeMem(0xd415, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xfe36);
        EXPECT(gbc.pc(), 0xd417);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd415), 0xcb);
        EXPECT(gbc.readMem(0xd416), 0x1a);
        // CB 1A 0325
        gbc.setState(0x40a9, 0x5fe6, 0x8a0, 0xdf7d, 0xeff2, 0xf200, 0x0, 0x1);
        gbc.writeMem(0x40a9, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x5fe6);
        EXPECT(gbc.pc(), 0x40ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0326
        gbc.setState(0xa2d6, 0x9d94, 0xc6c0, 0x5837, 0xd25c, 0x4904, 0x0, 0x1);
        gbc.writeMem(0xa2d6, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x9d94);
        EXPECT(gbc.pc(), 0xa2d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2d6), 0xcb);
        EXPECT(gbc.readMem(0xa2d7), 0x1a);
        // CB 1A 0327
        gbc.setState(0x74e0, 0xd211, 0xb460, 0xd782, 0x9427, 0x9bab, 0x0, 0x0);
        gbc.writeMem(0x74e0, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xd211);
        EXPECT(gbc.pc(), 0x74e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0328
        gbc.setState(0x1e85, 0x90e3, 0x5710, 0x22b, 0x4ef2, 0x6fad, 0x1, 0x1);
        gbc.writeMem(0x1e85, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x90e3);
        EXPECT(gbc.pc(), 0x1e87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 032A
        gbc.setState(0x62e1, 0xf166, 0x9340, 0xbbdd, 0xa944, 0x395a, 0x0, 0x0);
        gbc.writeMem(0x62e1, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xf166);
        EXPECT(gbc.pc(), 0x62e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 032B
        gbc.setState(0x5e71, 0x7deb, 0x5070, 0x1787, 0x3b9a, 0x47cb, 0x0, 0x1);
        gbc.writeMem(0x5e71, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x7deb);
        EXPECT(gbc.pc(), 0x5e73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 032D
        gbc.setState(0x4273, 0x91ca, 0x6a70, 0x3da3, 0x8dea, 0xca62, 0x1, 0x0);
        gbc.writeMem(0x4273, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x91ca);
        EXPECT(gbc.pc(), 0x4275);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 032E
        gbc.setState(0x8b50, 0xd9cc, 0xcf60, 0xb422, 0x4aba, 0x8978, 0x1, 0x0);
        gbc.writeMem(0x8b50, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xd9cc);
        EXPECT(gbc.pc(), 0x8b52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b50), 0xcb);
        EXPECT(gbc.readMem(0x8b51), 0x1a);
        // CB 1A 032F
        gbc.setState(0xd1d4, 0xc425, 0x34a0, 0xa4a2, 0x4c48, 0x6b96, 0x1, 0x0);
        gbc.writeMem(0xd1d4, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xc425);
        EXPECT(gbc.pc(), 0xd1d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1d4), 0xcb);
        EXPECT(gbc.readMem(0xd1d5), 0x1a);
        // CB 1A 0330
        gbc.setState(0x9d12, 0x7a75, 0xba30, 0xeee5, 0xa706, 0x5d93, 0x0, 0x1);
        gbc.writeMem(0x9d12, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x7a75);
        EXPECT(gbc.pc(), 0x9d14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d12), 0xcb);
        EXPECT(gbc.readMem(0x9d13), 0x1a);
        // CB 1A 0331
        gbc.setState(0x8ace, 0xfa3, 0xd4b0, 0xff9, 0x4591, 0xa6e6, 0x0, 0x0);
        gbc.writeMem(0x8ace, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xfa3);
        EXPECT(gbc.pc(), 0x8ad0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ace), 0xcb);
        EXPECT(gbc.readMem(0x8acf), 0x1a);
        // CB 1A 0332
        gbc.setState(0xdafd, 0x9ddc, 0x4bf0, 0x309b, 0x7734, 0xcb91, 0x1, 0x0);
        gbc.writeMem(0xdafd, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x9ddc);
        EXPECT(gbc.pc(), 0xdaff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdafd), 0xcb);
        EXPECT(gbc.readMem(0xdafe), 0x1a);
        // CB 1A 0333
        gbc.setState(0x727d, 0xe71d, 0x4870, 0xf4e, 0x6eaa, 0x3dc5, 0x0, 0x1);
        gbc.writeMem(0x727d, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xe71d);
        EXPECT(gbc.pc(), 0x727f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0334
        gbc.setState(0x7945, 0x3bdd, 0x4630, 0x18c, 0x4993, 0xbdbc, 0x1, 0x1);
        gbc.writeMem(0x7945, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x3bdd);
        EXPECT(gbc.pc(), 0x7947);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0335
        gbc.setState(0x34f9, 0x3e2d, 0x6460, 0x9acb, 0x371b, 0xcd19, 0x0, 0x1);
        gbc.writeMem(0x34f9, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x3e2d);
        EXPECT(gbc.pc(), 0x34fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0336
        gbc.setState(0x34fe, 0x2cfb, 0xa4e0, 0x6c88, 0x3412, 0x2888, 0x0, 0x1);
        gbc.writeMem(0x34fe, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x2cfb);
        EXPECT(gbc.pc(), 0x3500);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0337
        gbc.setState(0x6ab5, 0x6818, 0x8dc0, 0xf32d, 0x7724, 0xe43e, 0x0, 0x0);
        gbc.writeMem(0x6ab5, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x6818);
        EXPECT(gbc.pc(), 0x6ab7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0338
        gbc.setState(0x4441, 0x4e7, 0x5a50, 0xa89f, 0x876e, 0x380c, 0x1, 0x1);
        gbc.writeMem(0x4441, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x4e7);
        EXPECT(gbc.pc(), 0x4443);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0339
        gbc.setState(0xc38d, 0x5509, 0x3a60, 0xa77d, 0x7b1, 0xb0a3, 0x0, 0x0);
        gbc.writeMem(0xc38d, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x5509);
        EXPECT(gbc.pc(), 0xc38f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc38d), 0xcb);
        EXPECT(gbc.readMem(0xc38e), 0x1a);
        // CB 1A 033A
        gbc.setState(0x6dbe, 0x8c4f, 0x2ad0, 0x4b17, 0x8834, 0xf619, 0x0, 0x1);
        gbc.writeMem(0x6dbe, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x8c4f);
        EXPECT(gbc.pc(), 0x6dc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 033B
        gbc.setState(0x7155, 0x31d3, 0xc350, 0x88f3, 0x6362, 0x6d7a, 0x0, 0x0);
        gbc.writeMem(0x7155, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x31d3);
        EXPECT(gbc.pc(), 0x7157);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 033C
        gbc.setState(0x28df, 0xfdc2, 0x67b0, 0xf1e4, 0xc451, 0xbb0c, 0x1, 0x0);
        gbc.writeMem(0x28df, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xfdc2);
        EXPECT(gbc.pc(), 0x28e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 033D
        gbc.setState(0x280b, 0xacd8, 0xc1f0, 0x9299, 0xc5ac, 0x1675, 0x1, 0x0);
        gbc.writeMem(0x280b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xacd8);
        EXPECT(gbc.pc(), 0x280d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 033E
        gbc.setState(0xe3fd, 0xd9f9, 0xb950, 0x77b5, 0x93dd, 0x2d10, 0x1, 0x0);
        gbc.writeMem(0xe3fd, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xd9f9);
        EXPECT(gbc.pc(), 0xe3ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3fd), 0xcb);
        EXPECT(gbc.readMem(0xe3fe), 0x1a);
        // CB 1A 033F
        gbc.setState(0x8cd9, 0x78d6, 0xba00, 0x7b7, 0x8431, 0x476a, 0x0, 0x1);
        gbc.writeMem(0x8cd9, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x78d6);
        EXPECT(gbc.pc(), 0x8cdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cd9), 0xcb);
        EXPECT(gbc.readMem(0x8cda), 0x1a);
        // CB 1A 0340
        gbc.setState(0x2030, 0x3942, 0xaa10, 0xd0ca, 0x8073, 0x11ff, 0x0, 0x1);
        gbc.writeMem(0x2030, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x3942);
        EXPECT(gbc.pc(), 0x2032);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0341
        gbc.setState(0x13a6, 0xdb16, 0x4ee0, 0x852c, 0xafb9, 0x7ea6, 0x1, 0x1);
        gbc.writeMem(0x13a6, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xdb16);
        EXPECT(gbc.pc(), 0x13a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0342
        gbc.setState(0x369d, 0x8f18, 0x7b50, 0x82c8, 0x1976, 0x2eec, 0x0, 0x0);
        gbc.writeMem(0x369d, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x8f18);
        EXPECT(gbc.pc(), 0x369f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0343
        gbc.setState(0x8827, 0x2ceb, 0xe1a0, 0xc107, 0xb597, 0xf3c2, 0x1, 0x1);
        gbc.writeMem(0x8827, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x2ceb);
        EXPECT(gbc.pc(), 0x8829);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8827), 0xcb);
        EXPECT(gbc.readMem(0x8828), 0x1a);
        // CB 1A 0344
        gbc.setState(0xe220, 0x6af2, 0x7cb0, 0x8cc6, 0xc95d, 0x9ca8, 0x0, 0x0);
        gbc.writeMem(0xe220, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x6af2);
        EXPECT(gbc.pc(), 0xe222);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe220), 0xcb);
        EXPECT(gbc.readMem(0xe221), 0x1a);
        // CB 1A 0345
        gbc.setState(0x9719, 0xb0ca, 0x9d00, 0x21b4, 0xf3c0, 0xe7ee, 0x1, 0x0);
        gbc.writeMem(0x9719, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xb0ca);
        EXPECT(gbc.pc(), 0x971b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9719), 0xcb);
        EXPECT(gbc.readMem(0x971a), 0x1a);
        // CB 1A 0346
        gbc.setState(0x435a, 0x3a7c, 0x5100, 0x8290, 0x9303, 0x55bb, 0x1, 0x0);
        gbc.writeMem(0x435a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x3a7c);
        EXPECT(gbc.pc(), 0x435c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0347
        gbc.setState(0x9ae4, 0xf52, 0xd790, 0x25de, 0xf0e0, 0x6065, 0x1, 0x0);
        gbc.writeMem(0x9ae4, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xf52);
        EXPECT(gbc.pc(), 0x9ae6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ae4), 0xcb);
        EXPECT(gbc.readMem(0x9ae5), 0x1a);
        // CB 1A 0348
        gbc.setState(0x82d7, 0x8952, 0x4500, 0xe68, 0x8352, 0x1a23, 0x0, 0x0);
        gbc.writeMem(0x82d7, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x8952);
        EXPECT(gbc.pc(), 0x82d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82d7), 0xcb);
        EXPECT(gbc.readMem(0x82d8), 0x1a);
        // CB 1A 0349
        gbc.setState(0xa334, 0xc42a, 0x82c0, 0x1718, 0xc6e3, 0x3353, 0x0, 0x0);
        gbc.writeMem(0xa334, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xc42a);
        EXPECT(gbc.pc(), 0xa336);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa334), 0xcb);
        EXPECT(gbc.readMem(0xa335), 0x1a);
        // CB 1A 034A
        gbc.setState(0x9ffc, 0xb5b7, 0x8900, 0x1961, 0x65d3, 0x4276, 0x1, 0x0);
        gbc.writeMem(0x9ffc, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xb5b7);
        EXPECT(gbc.pc(), 0x9ffe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ffc), 0xcb);
        EXPECT(gbc.readMem(0x9ffd), 0x1a);
        // CB 1A 034B
        gbc.setState(0xc3cb, 0x1945, 0xb470, 0xa436, 0x90fc, 0x4440, 0x0, 0x0);
        gbc.writeMem(0xc3cb, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x1945);
        EXPECT(gbc.pc(), 0xc3cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3cb), 0xcb);
        EXPECT(gbc.readMem(0xc3cc), 0x1a);
        // CB 1A 034C
        gbc.setState(0x6241, 0xddb2, 0xdcc0, 0x43c9, 0xf692, 0xdb04, 0x1, 0x0);
        gbc.writeMem(0x6241, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xddb2);
        EXPECT(gbc.pc(), 0x6243);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 034D
        gbc.setState(0x8589, 0x261f, 0xf490, 0x564a, 0x7c94, 0x8410, 0x0, 0x1);
        gbc.writeMem(0x8589, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x261f);
        EXPECT(gbc.pc(), 0x858b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8589), 0xcb);
        EXPECT(gbc.readMem(0x858a), 0x1a);
        // CB 1A 034E
        gbc.setState(0xc142, 0x95bc, 0xdcf0, 0x2d54, 0xb8fc, 0xb4c0, 0x0, 0x0);
        gbc.writeMem(0xc142, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x95bc);
        EXPECT(gbc.pc(), 0xc144);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc142), 0xcb);
        EXPECT(gbc.readMem(0xc143), 0x1a);
        // CB 1A 034F
        gbc.setState(0xe330, 0xf80b, 0x8320, 0x5467, 0xcb85, 0xbe4a, 0x1, 0x1);
        gbc.writeMem(0xe330, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xf80b);
        EXPECT(gbc.pc(), 0xe332);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe330), 0xcb);
        EXPECT(gbc.readMem(0xe331), 0x1a);
        // CB 1A 0350
        gbc.setState(0x90f9, 0xe106, 0x68f0, 0x31c2, 0x4804, 0x81d6, 0x1, 0x0);
        gbc.writeMem(0x90f9, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xe106);
        EXPECT(gbc.pc(), 0x90fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90f9), 0xcb);
        EXPECT(gbc.readMem(0x90fa), 0x1a);
        // CB 1A 0351
        gbc.setState(0x48a8, 0x636e, 0x7c00, 0x78f1, 0x54fb, 0x8542, 0x1, 0x0);
        gbc.writeMem(0x48a8, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x636e);
        EXPECT(gbc.pc(), 0x48aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0352
        gbc.setState(0x11ed, 0xe4d, 0xa9c0, 0x7dda, 0xe28b, 0x30fc, 0x0, 0x0);
        gbc.writeMem(0x11ed, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xe4d);
        EXPECT(gbc.pc(), 0x11ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0353
        gbc.setState(0xd577, 0xa7de, 0x22a0, 0x4ec0, 0xd1e1, 0xb0f3, 0x1, 0x0);
        gbc.writeMem(0xd577, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xa7de);
        EXPECT(gbc.pc(), 0xd579);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd577), 0xcb);
        EXPECT(gbc.readMem(0xd578), 0x1a);
        // CB 1A 0355
        gbc.setState(0xab7b, 0xf642, 0xf220, 0xf7c4, 0xe1a3, 0xd56a, 0x0, 0x0);
        gbc.writeMem(0xab7b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xf642);
        EXPECT(gbc.pc(), 0xab7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab7b), 0xcb);
        EXPECT(gbc.readMem(0xab7c), 0x1a);
        // CB 1A 0356
        gbc.setState(0x1a77, 0x7487, 0xcf20, 0x435, 0x7f10, 0xd0b6, 0x1, 0x1);
        gbc.writeMem(0x1a77, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x7487);
        EXPECT(gbc.pc(), 0x1a79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0357
        gbc.setState(0xad12, 0x645, 0xea50, 0x4e, 0x48ef, 0x5897, 0x0, 0x0);
        gbc.writeMem(0xad12, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x645);
        EXPECT(gbc.pc(), 0xad14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad12), 0xcb);
        EXPECT(gbc.readMem(0xad13), 0x1a);
        // CB 1A 0358
        gbc.setState(0x8c81, 0xda53, 0xaf80, 0x25ee, 0xf9c1, 0xa34d, 0x0, 0x0);
        gbc.writeMem(0x8c81, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xda53);
        EXPECT(gbc.pc(), 0x8c83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c81), 0xcb);
        EXPECT(gbc.readMem(0x8c82), 0x1a);
        // CB 1A 0359
        gbc.setState(0xb412, 0x1693, 0xd0b0, 0xaba3, 0x6c50, 0xa9e3, 0x0, 0x0);
        gbc.writeMem(0xb412, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x1693);
        EXPECT(gbc.pc(), 0xb414);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb412), 0xcb);
        EXPECT(gbc.readMem(0xb413), 0x1a);
        // CB 1A 035A
        gbc.setState(0x6228, 0xdcf1, 0x59e0, 0x5a5, 0x3c9d, 0xdd93, 0x1, 0x1);
        gbc.writeMem(0x6228, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xdcf1);
        EXPECT(gbc.pc(), 0x622a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 035B
        gbc.setState(0x57a0, 0x8c13, 0x4d00, 0x3fba, 0xb016, 0xaa11, 0x0, 0x1);
        gbc.writeMem(0x57a0, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x8c13);
        EXPECT(gbc.pc(), 0x57a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 035C
        gbc.setState(0x306e, 0x4947, 0xd4e0, 0x9757, 0xc299, 0x4b6f, 0x1, 0x0);
        gbc.writeMem(0x306e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x4947);
        EXPECT(gbc.pc(), 0x3070);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 035D
        gbc.setState(0x4411, 0x4fc0, 0xb050, 0x406d, 0xb888, 0x2dde, 0x0, 0x1);
        gbc.writeMem(0x4411, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x4fc0);
        EXPECT(gbc.pc(), 0x4413);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 035F
        gbc.setState(0x2e95, 0x36e2, 0x47d0, 0x79af, 0x993a, 0x375d, 0x1, 0x0);
        gbc.writeMem(0x2e95, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x36e2);
        EXPECT(gbc.pc(), 0x2e97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0361
        gbc.setState(0xdf49, 0x46ba, 0xee40, 0xf024, 0x3208, 0x12fd, 0x0, 0x1);
        gbc.writeMem(0xdf49, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x46ba);
        EXPECT(gbc.pc(), 0xdf4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf49), 0xcb);
        EXPECT(gbc.readMem(0xdf4a), 0x1a);
        // CB 1A 0362
        gbc.setState(0xc5f, 0x9afd, 0x7740, 0x2ba3, 0x59d, 0xe658, 0x0, 0x1);
        gbc.writeMem(0xc5f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x9afd);
        EXPECT(gbc.pc(), 0xc61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0363
        gbc.setState(0xd1e3, 0xa53b, 0x2c80, 0x7607, 0x19fb, 0xebdf, 0x1, 0x0);
        gbc.writeMem(0xd1e3, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xa53b);
        EXPECT(gbc.pc(), 0xd1e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1e3), 0xcb);
        EXPECT(gbc.readMem(0xd1e4), 0x1a);
        // CB 1A 0364
        gbc.setState(0x1582, 0x8441, 0x1150, 0x78f9, 0x562a, 0xbe87, 0x0, 0x0);
        gbc.writeMem(0x1582, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x8441);
        EXPECT(gbc.pc(), 0x1584);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0365
        gbc.setState(0x7afe, 0x1e14, 0xff0, 0xc0a0, 0xfadd, 0xb6d4, 0x0, 0x0);
        gbc.writeMem(0x7afe, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x1e14);
        EXPECT(gbc.pc(), 0x7b00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0366
        gbc.setState(0x817, 0x7ed1, 0x8d80, 0xaf90, 0xe367, 0x2570, 0x0, 0x1);
        gbc.writeMem(0x817, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x7ed1);
        EXPECT(gbc.pc(), 0x819);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0367
        gbc.setState(0x7af7, 0x6748, 0x95b0, 0xa957, 0x3673, 0x189d, 0x1, 0x0);
        gbc.writeMem(0x7af7, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x6748);
        EXPECT(gbc.pc(), 0x7af9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0368
        gbc.setState(0xc54a, 0x24a4, 0x35a0, 0x8ab, 0x1a1a, 0x672, 0x1, 0x0);
        gbc.writeMem(0xc54a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x24a4);
        EXPECT(gbc.pc(), 0xc54c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc54a), 0xcb);
        EXPECT(gbc.readMem(0xc54b), 0x1a);
        // CB 1A 0369
        gbc.setState(0x2bdd, 0x6933, 0x1060, 0x1731, 0xe3eb, 0x37f6, 0x0, 0x1);
        gbc.writeMem(0x2bdd, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x6933);
        EXPECT(gbc.pc(), 0x2bdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 036A
        gbc.setState(0xa331, 0x67dd, 0x1ce0, 0x7d, 0xf486, 0xa263, 0x1, 0x1);
        gbc.writeMem(0xa331, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x67dd);
        EXPECT(gbc.pc(), 0xa333);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa331), 0xcb);
        EXPECT(gbc.readMem(0xa332), 0x1a);
        // CB 1A 036B
        gbc.setState(0xaa4, 0xc655, 0xe2e0, 0x199e, 0x9250, 0xeb90, 0x0, 0x1);
        gbc.writeMem(0xaa4, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xc655);
        EXPECT(gbc.pc(), 0xaa6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 036C
        gbc.setState(0xc3eb, 0x4dc3, 0x9540, 0xfba8, 0x9f86, 0x4892, 0x1, 0x1);
        gbc.writeMem(0xc3eb, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x4dc3);
        EXPECT(gbc.pc(), 0xc3ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3eb), 0xcb);
        EXPECT(gbc.readMem(0xc3ec), 0x1a);
        // CB 1A 036D
        gbc.setState(0x68b5, 0x30ce, 0x8630, 0x540d, 0xd791, 0x795e, 0x0, 0x1);
        gbc.writeMem(0x68b5, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x30ce);
        EXPECT(gbc.pc(), 0x68b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 036E
        gbc.setState(0x63fb, 0x814b, 0x1720, 0x69f1, 0xaed9, 0x8e73, 0x0, 0x1);
        gbc.writeMem(0x63fb, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x814b);
        EXPECT(gbc.pc(), 0x63fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 036F
        gbc.setState(0x1f45, 0xda3c, 0xe210, 0x4c58, 0x819e, 0x79e6, 0x1, 0x0);
        gbc.writeMem(0x1f45, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xda3c);
        EXPECT(gbc.pc(), 0x1f47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0370
        gbc.setState(0x3a54, 0x67c1, 0x63e0, 0xf164, 0xc333, 0x7793, 0x1, 0x0);
        gbc.writeMem(0x3a54, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x67c1);
        EXPECT(gbc.pc(), 0x3a56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0371
        gbc.setState(0xe4ae, 0x3857, 0xa850, 0x3d1d, 0xf841, 0x8880, 0x1, 0x0);
        gbc.writeMem(0xe4ae, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x3857);
        EXPECT(gbc.pc(), 0xe4b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4ae), 0xcb);
        EXPECT(gbc.readMem(0xe4af), 0x1a);
        // CB 1A 0372
        gbc.setState(0xce01, 0x8c7b, 0xad60, 0x4df6, 0x4053, 0xc26b, 0x0, 0x0);
        gbc.writeMem(0xce01, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x8c7b);
        EXPECT(gbc.pc(), 0xce03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce01), 0xcb);
        EXPECT(gbc.readMem(0xce02), 0x1a);
        // CB 1A 0373
        gbc.setState(0x82ea, 0x9eb1, 0xfae0, 0x7b60, 0x9bf6, 0xc5d7, 0x1, 0x0);
        gbc.writeMem(0x82ea, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x9eb1);
        EXPECT(gbc.pc(), 0x82ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82ea), 0xcb);
        EXPECT(gbc.readMem(0x82eb), 0x1a);
        // CB 1A 0374
        gbc.setState(0x85a9, 0x4f22, 0x4c50, 0xd2b6, 0xecb, 0x7033, 0x0, 0x1);
        gbc.writeMem(0x85a9, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x4f22);
        EXPECT(gbc.pc(), 0x85ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85a9), 0xcb);
        EXPECT(gbc.readMem(0x85aa), 0x1a);
        // CB 1A 0375
        gbc.setState(0x8fbe, 0xf653, 0x8b90, 0xb302, 0x5f0d, 0xb550, 0x0, 0x1);
        gbc.writeMem(0x8fbe, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xf653);
        EXPECT(gbc.pc(), 0x8fc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fbe), 0xcb);
        EXPECT(gbc.readMem(0x8fbf), 0x1a);
        // CB 1A 0376
        gbc.setState(0xb5ec, 0x3c8e, 0xa8a0, 0x726, 0x68a1, 0xc3bb, 0x1, 0x0);
        gbc.writeMem(0xb5ec, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x3c8e);
        EXPECT(gbc.pc(), 0xb5ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5ec), 0xcb);
        EXPECT(gbc.readMem(0xb5ed), 0x1a);
        // CB 1A 0377
        gbc.setState(0x7e34, 0x367b, 0x2d00, 0x31ac, 0x1edb, 0xcf17, 0x1, 0x1);
        gbc.writeMem(0x7e34, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x367b);
        EXPECT(gbc.pc(), 0x7e36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0378
        gbc.setState(0x4137, 0xdfc2, 0x20, 0x6012, 0xc061, 0x653, 0x0, 0x0);
        gbc.writeMem(0x4137, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xdfc2);
        EXPECT(gbc.pc(), 0x4139);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0379
        gbc.setState(0x5d67, 0x6525, 0x44a0, 0x47a7, 0x2bac, 0xf22b, 0x1, 0x1);
        gbc.writeMem(0x5d67, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x6525);
        EXPECT(gbc.pc(), 0x5d69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 037A
        gbc.setState(0xa91, 0xa743, 0x6bc0, 0x6696, 0x99dc, 0xa6b0, 0x1, 0x1);
        gbc.writeMem(0xa91, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xa743);
        EXPECT(gbc.pc(), 0xa93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 037B
        gbc.setState(0x316c, 0x52bc, 0xb2d0, 0x7f, 0xd66b, 0x51e1, 0x0, 0x0);
        gbc.writeMem(0x316c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x52bc);
        EXPECT(gbc.pc(), 0x316e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 037C
        gbc.setState(0xdb93, 0xe0b0, 0x700, 0x1b6f, 0x105f, 0xa26b, 0x0, 0x0);
        gbc.writeMem(0xdb93, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xe0b0);
        EXPECT(gbc.pc(), 0xdb95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb93), 0xcb);
        EXPECT(gbc.readMem(0xdb94), 0x1a);
        // CB 1A 037D
        gbc.setState(0x2d36, 0x7001, 0xdc0, 0xbef0, 0x76b5, 0xef30, 0x0, 0x1);
        gbc.writeMem(0x2d36, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x7001);
        EXPECT(gbc.pc(), 0x2d38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 037E
        gbc.setState(0x5e6c, 0xbf62, 0x1b10, 0x231c, 0x6f30, 0x2f66, 0x0, 0x1);
        gbc.writeMem(0x5e6c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xbf62);
        EXPECT(gbc.pc(), 0x5e6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 037F
        gbc.setState(0xeddb, 0xa5d, 0x8ab0, 0x1a29, 0x676f, 0xe43e, 0x1, 0x0);
        gbc.writeMem(0xeddb, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xa5d);
        EXPECT(gbc.pc(), 0xeddd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeddb), 0xcb);
        EXPECT(gbc.readMem(0xeddc), 0x1a);
        // CB 1A 0380
        gbc.setState(0x984f, 0xcb15, 0x3950, 0xe805, 0xc1f2, 0x7448, 0x0, 0x1);
        gbc.writeMem(0x984f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xcb15);
        EXPECT(gbc.pc(), 0x9851);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x984f), 0xcb);
        EXPECT(gbc.readMem(0x9850), 0x1a);
        // CB 1A 0381
        gbc.setState(0x865d, 0x3a7a, 0x8610, 0xb7f6, 0x9442, 0xd95d, 0x1, 0x1);
        gbc.writeMem(0x865d, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x3a7a);
        EXPECT(gbc.pc(), 0x865f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x865d), 0xcb);
        EXPECT(gbc.readMem(0x865e), 0x1a);
        // CB 1A 0382
        gbc.setState(0x448, 0xb45d, 0xb4f0, 0xd02, 0xaa97, 0x21e9, 0x0, 0x0);
        gbc.writeMem(0x448, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xb45d);
        EXPECT(gbc.pc(), 0x44a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0383
        gbc.setState(0x2ea0, 0xac18, 0xe590, 0x540b, 0x4882, 0xc9b6, 0x1, 0x1);
        gbc.writeMem(0x2ea0, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xac18);
        EXPECT(gbc.pc(), 0x2ea2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0384
        gbc.setState(0x80c5, 0xc896, 0xf170, 0x4404, 0x85fa, 0xa0c8, 0x0, 0x1);
        gbc.writeMem(0x80c5, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xc896);
        EXPECT(gbc.pc(), 0x80c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80c5), 0xcb);
        EXPECT(gbc.readMem(0x80c6), 0x1a);
        // CB 1A 0385
        gbc.setState(0x786, 0x75fd, 0x7220, 0xe5b1, 0x6a4f, 0x3cfd, 0x0, 0x1);
        gbc.writeMem(0x786, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x75fd);
        EXPECT(gbc.pc(), 0x788);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0386
        gbc.setState(0x7989, 0xd44d, 0x3f60, 0x7b50, 0x9166, 0x679c, 0x0, 0x1);
        gbc.writeMem(0x7989, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xd44d);
        EXPECT(gbc.pc(), 0x798b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0387
        gbc.setState(0x49d2, 0xe158, 0x8a10, 0x711f, 0xa1d2, 0x85ce, 0x0, 0x0);
        gbc.writeMem(0x49d2, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xe158);
        EXPECT(gbc.pc(), 0x49d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0388
        gbc.setState(0x2ea, 0x9d0a, 0xbe0, 0xccd1, 0xb5a5, 0x1478, 0x0, 0x0);
        gbc.writeMem(0x2ea, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x9d0a);
        EXPECT(gbc.pc(), 0x2ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0389
        gbc.setState(0x69d9, 0x6eed, 0x3840, 0x21e, 0x8d73, 0x2d81, 0x0, 0x1);
        gbc.writeMem(0x69d9, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x6eed);
        EXPECT(gbc.pc(), 0x69db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 038A
        gbc.setState(0x2775, 0x760a, 0x2240, 0xe202, 0xd41, 0xe3c0, 0x0, 0x0);
        gbc.writeMem(0x2775, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x760a);
        EXPECT(gbc.pc(), 0x2777);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 038B
        gbc.setState(0x8bef, 0x2262, 0x8e80, 0x9aee, 0x757e, 0x8a51, 0x1, 0x1);
        gbc.writeMem(0x8bef, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x2262);
        EXPECT(gbc.pc(), 0x8bf1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bef), 0xcb);
        EXPECT(gbc.readMem(0x8bf0), 0x1a);
        // CB 1A 038C
        gbc.setState(0x5e34, 0xc4f8, 0xa510, 0xaac1, 0xa132, 0xb5da, 0x1, 0x1);
        gbc.writeMem(0x5e34, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xc4f8);
        EXPECT(gbc.pc(), 0x5e36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 038D
        gbc.setState(0x8c39, 0xb638, 0xbbc0, 0x4e22, 0xe441, 0xb380, 0x1, 0x0);
        gbc.writeMem(0x8c39, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xb638);
        EXPECT(gbc.pc(), 0x8c3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c39), 0xcb);
        EXPECT(gbc.readMem(0x8c3a), 0x1a);
        // CB 1A 038E
        gbc.setState(0x25c6, 0x7622, 0x2ae0, 0x11ef, 0xc01a, 0xed6a, 0x1, 0x0);
        gbc.writeMem(0x25c6, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x7622);
        EXPECT(gbc.pc(), 0x25c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 038F
        gbc.setState(0x44c2, 0xc2ac, 0x8d10, 0x9c0f, 0x4b05, 0xaf88, 0x0, 0x1);
        gbc.writeMem(0x44c2, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xc2ac);
        EXPECT(gbc.pc(), 0x44c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0390
        gbc.setState(0x392b, 0x5a4d, 0x19d0, 0xe311, 0x358f, 0xb17, 0x0, 0x1);
        gbc.writeMem(0x392b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x5a4d);
        EXPECT(gbc.pc(), 0x392d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0391
        gbc.setState(0x7d8, 0xe273, 0x3ee0, 0x9952, 0x8716, 0x1469, 0x1, 0x0);
        gbc.writeMem(0x7d8, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xe273);
        EXPECT(gbc.pc(), 0x7da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0392
        gbc.setState(0xecb8, 0xec7c, 0xd860, 0xdf36, 0x6cd6, 0xba6a, 0x1, 0x0);
        gbc.writeMem(0xecb8, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xec7c);
        EXPECT(gbc.pc(), 0xecba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecb8), 0xcb);
        EXPECT(gbc.readMem(0xecb9), 0x1a);
        // CB 1A 0393
        gbc.setState(0x5f84, 0x1f1, 0xd030, 0x6ce9, 0x2631, 0xd2e0, 0x1, 0x1);
        gbc.writeMem(0x5f84, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x1f1);
        EXPECT(gbc.pc(), 0x5f86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0394
        gbc.setState(0x8ee3, 0x9a2e, 0x40e0, 0xf083, 0x8a18, 0xbbd6, 0x1, 0x1);
        gbc.writeMem(0x8ee3, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x9a2e);
        EXPECT(gbc.pc(), 0x8ee5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ee3), 0xcb);
        EXPECT(gbc.readMem(0x8ee4), 0x1a);
        // CB 1A 0395
        gbc.setState(0x8e7c, 0x2cba, 0x3ca0, 0x9012, 0x55a8, 0x9e63, 0x0, 0x0);
        gbc.writeMem(0x8e7c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x2cba);
        EXPECT(gbc.pc(), 0x8e7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e7c), 0xcb);
        EXPECT(gbc.readMem(0x8e7d), 0x1a);
        // CB 1A 0396
        gbc.setState(0x23e7, 0x53f6, 0x9040, 0xa315, 0x683f, 0x7c1, 0x1, 0x1);
        gbc.writeMem(0x23e7, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x53f6);
        EXPECT(gbc.pc(), 0x23e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 0397
        gbc.setState(0x106d, 0xb3f7, 0xbae0, 0x83a3, 0x119c, 0x1af9, 0x0, 0x1);
        gbc.writeMem(0x106d, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xb3f7);
        EXPECT(gbc.pc(), 0x106f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0398
        gbc.setState(0x5c26, 0xd9e, 0xeab0, 0x21a0, 0x1be8, 0xa792, 0x1, 0x0);
        gbc.writeMem(0x5c26, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xd9e);
        EXPECT(gbc.pc(), 0x5c28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 0399
        gbc.setState(0xbb4e, 0xdf8f, 0xe7f0, 0xf416, 0x4afe, 0x8531, 0x0, 0x0);
        gbc.writeMem(0xbb4e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xdf8f);
        EXPECT(gbc.pc(), 0xbb50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb4e), 0xcb);
        EXPECT(gbc.readMem(0xbb4f), 0x1a);
        // CB 1A 039A
        gbc.setState(0xb9ff, 0xb991, 0xb660, 0xec7f, 0x9367, 0x3cbe, 0x0, 0x0);
        gbc.writeMem(0xb9ff, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xb991);
        EXPECT(gbc.pc(), 0xba01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9ff), 0xcb);
        EXPECT(gbc.readMem(0xba00), 0x1a);
        // CB 1A 039B
        gbc.setState(0x8de1, 0x3432, 0xc9b0, 0x4a1f, 0x2aa8, 0xc2c, 0x0, 0x0);
        gbc.writeMem(0x8de1, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x3432);
        EXPECT(gbc.pc(), 0x8de3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8de1), 0xcb);
        EXPECT(gbc.readMem(0x8de2), 0x1a);
        // CB 1A 039C
        gbc.setState(0x5bf6, 0xed58, 0xe650, 0x6fbf, 0x2bb1, 0x627a, 0x1, 0x0);
        gbc.writeMem(0x5bf6, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xed58);
        EXPECT(gbc.pc(), 0x5bf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 039D
        gbc.setState(0x65b1, 0xa3b8, 0xfbe0, 0x51f2, 0x3a32, 0x2c45, 0x0, 0x0);
        gbc.writeMem(0x65b1, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xa3b8);
        EXPECT(gbc.pc(), 0x65b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 039E
        gbc.setState(0xc6e9, 0x9d8d, 0x3d70, 0x74fc, 0x3363, 0x162c, 0x0, 0x0);
        gbc.writeMem(0xc6e9, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x9d8d);
        EXPECT(gbc.pc(), 0xc6eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6e9), 0xcb);
        EXPECT(gbc.readMem(0xc6ea), 0x1a);
        // CB 1A 039F
        gbc.setState(0x2720, 0x2504, 0x2350, 0xd856, 0x2400, 0x471a, 0x0, 0x0);
        gbc.writeMem(0x2720, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x2504);
        EXPECT(gbc.pc(), 0x2722);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 03A0
        gbc.setState(0x37b2, 0xc56, 0x5e60, 0xa4c6, 0x48cf, 0xdbea, 0x1, 0x1);
        gbc.writeMem(0x37b2, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xc56);
        EXPECT(gbc.pc(), 0x37b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 03A1
        gbc.setState(0x173d, 0x25f2, 0xf830, 0x96cb, 0x72fe, 0x2017, 0x1, 0x0);
        gbc.writeMem(0x173d, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x25f2);
        EXPECT(gbc.pc(), 0x173f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 03A2
        gbc.setState(0x25ed, 0x8421, 0xbb00, 0x2797, 0x38df, 0x9495, 0x0, 0x1);
        gbc.writeMem(0x25ed, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x8421);
        EXPECT(gbc.pc(), 0x25ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 03A3
        gbc.setState(0xea44, 0x36fe, 0xf560, 0x24cd, 0x7d4c, 0xb5f6, 0x0, 0x0);
        gbc.writeMem(0xea44, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x36fe);
        EXPECT(gbc.pc(), 0xea46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea44), 0xcb);
        EXPECT(gbc.readMem(0xea45), 0x1a);
        // CB 1A 03A4
        gbc.setState(0x7164, 0x6d0d, 0x8670, 0x4929, 0xaef1, 0x8e14, 0x1, 0x0);
        gbc.writeMem(0x7164, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x6d0d);
        EXPECT(gbc.pc(), 0x7166);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 03A5
        gbc.setState(0xe8b8, 0x17c, 0xaa20, 0x9ba, 0xbc1, 0x1d64, 0x0, 0x0);
        gbc.writeMem(0xe8b8, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x17c);
        EXPECT(gbc.pc(), 0xe8ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8b8), 0xcb);
        EXPECT(gbc.readMem(0xe8b9), 0x1a);
        // CB 1A 03A6
        gbc.setState(0x9075, 0x1e51, 0x7760, 0xad9e, 0x2f70, 0x7e13, 0x1, 0x1);
        gbc.writeMem(0x9075, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x1e51);
        EXPECT(gbc.pc(), 0x9077);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9075), 0xcb);
        EXPECT(gbc.readMem(0x9076), 0x1a);
        // CB 1A 03A7
        gbc.setState(0xacc8, 0x4258, 0xda40, 0x7427, 0xe07, 0xb57, 0x0, 0x0);
        gbc.writeMem(0xacc8, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x4258);
        EXPECT(gbc.pc(), 0xacca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacc8), 0xcb);
        EXPECT(gbc.readMem(0xacc9), 0x1a);
        // CB 1A 03A8
        gbc.setState(0x6a8f, 0x8718, 0x7c70, 0xf2df, 0xb921, 0x155c, 0x0, 0x0);
        gbc.writeMem(0x6a8f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x8718);
        EXPECT(gbc.pc(), 0x6a91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 03A9
        gbc.setState(0x3992, 0xd4f3, 0x5cc0, 0x710a, 0x1534, 0xf44e, 0x0, 0x1);
        gbc.writeMem(0x3992, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xd4f3);
        EXPECT(gbc.pc(), 0x3994);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 03AA
        gbc.setState(0x5c55, 0x7a7e, 0xaf0, 0x58f2, 0xd518, 0x4f96, 0x0, 0x1);
        gbc.writeMem(0x5c55, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x7a7e);
        EXPECT(gbc.pc(), 0x5c57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 03AB
        gbc.setState(0x5e45, 0x5b4f, 0xe6d0, 0x19fd, 0x311e, 0x5c43, 0x1, 0x0);
        gbc.writeMem(0x5e45, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x5b4f);
        EXPECT(gbc.pc(), 0x5e47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 03AC
        gbc.setState(0x1e61, 0xe0fd, 0x2b60, 0x888b, 0xfddb, 0xe9b, 0x0, 0x0);
        gbc.writeMem(0x1e61, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xe0fd);
        EXPECT(gbc.pc(), 0x1e63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 03AD
        gbc.setState(0xefe0, 0x33ff, 0x3e50, 0x2417, 0xc0d0, 0x8bb9, 0x1, 0x1);
        gbc.writeMem(0xefe0, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x33ff);
        EXPECT(gbc.pc(), 0xefe2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefe0), 0xcb);
        EXPECT(gbc.readMem(0xefe1), 0x1a);
        // CB 1A 03AE
        gbc.setState(0xc283, 0x5842, 0xd150, 0xc1b5, 0x843, 0x1daa, 0x0, 0x0);
        gbc.writeMem(0xc283, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x5842);
        EXPECT(gbc.pc(), 0xc285);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc283), 0xcb);
        EXPECT(gbc.readMem(0xc284), 0x1a);
        // CB 1A 03AF
        gbc.setState(0x210f, 0x40e8, 0xddb0, 0xdda1, 0xdfea, 0x1016, 0x0, 0x0);
        gbc.writeMem(0x210f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x40e8);
        EXPECT(gbc.pc(), 0x2111);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 03B0
        gbc.setState(0xcb6a, 0x50c2, 0x3c30, 0x8886, 0x313b, 0xdc7e, 0x0, 0x1);
        gbc.writeMem(0xcb6a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x50c2);
        EXPECT(gbc.pc(), 0xcb6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb6a), 0xcb);
        EXPECT(gbc.readMem(0xcb6b), 0x1a);
        // CB 1A 03B1
        gbc.setState(0x1c8f, 0x26d0, 0x6e90, 0x49b9, 0x6541, 0x3275, 0x0, 0x1);
        gbc.writeMem(0x1c8f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x26d0);
        EXPECT(gbc.pc(), 0x1c91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 03B2
        gbc.setState(0xc4f1, 0x98, 0x2330, 0x62f1, 0x379e, 0x2f57, 0x0, 0x1);
        gbc.writeMem(0xc4f1, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x98);
        EXPECT(gbc.pc(), 0xc4f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4f1), 0xcb);
        EXPECT(gbc.readMem(0xc4f2), 0x1a);
        // CB 1A 03B3
        gbc.setState(0x80f1, 0xb808, 0xa710, 0xed4b, 0x1e8, 0x297e, 0x1, 0x1);
        gbc.writeMem(0x80f1, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xb808);
        EXPECT(gbc.pc(), 0x80f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80f1), 0xcb);
        EXPECT(gbc.readMem(0x80f2), 0x1a);
        // CB 1A 03B4
        gbc.setState(0x3f77, 0x6bd0, 0x9280, 0xa57c, 0x432f, 0xd575, 0x1, 0x0);
        gbc.writeMem(0x3f77, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x6bd0);
        EXPECT(gbc.pc(), 0x3f79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 03B5
        gbc.setState(0x6bcd, 0xd9b, 0x5b20, 0x7ab8, 0x6468, 0x2561, 0x0, 0x1);
        gbc.writeMem(0x6bcd, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xd9b);
        EXPECT(gbc.pc(), 0x6bcf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 03B6
        gbc.setState(0x1dc6, 0x1d42, 0xaa20, 0xa825, 0x5f64, 0xa443, 0x0, 0x0);
        gbc.writeMem(0x1dc6, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x1d42);
        EXPECT(gbc.pc(), 0x1dc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 03B8
        gbc.setState(0x9df9, 0xbfae, 0xfb0, 0x5b52, 0x794e, 0xab3a, 0x1, 0x0);
        gbc.writeMem(0x9df9, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xbfae);
        EXPECT(gbc.pc(), 0x9dfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9df9), 0xcb);
        EXPECT(gbc.readMem(0x9dfa), 0x1a);
        // CB 1A 03B9
        gbc.setState(0x3e26, 0x18f2, 0x7cc0, 0xf56e, 0xb453, 0xd243, 0x1, 0x1);
        gbc.writeMem(0x3e26, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x18f2);
        EXPECT(gbc.pc(), 0x3e28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 03BA
        gbc.setState(0xbe62, 0xc6ea, 0xeaf0, 0x2b13, 0xa35c, 0x2fd2, 0x0, 0x0);
        gbc.writeMem(0xbe62, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xc6ea);
        EXPECT(gbc.pc(), 0xbe64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe62), 0xcb);
        EXPECT(gbc.readMem(0xbe63), 0x1a);
        // CB 1A 03BC
        gbc.setState(0x450b, 0x23a6, 0x6590, 0x45d8, 0x48b4, 0x99d4, 0x0, 0x0);
        gbc.writeMem(0x450b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x23a6);
        EXPECT(gbc.pc(), 0x450d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 03BD
        gbc.setState(0xa0e6, 0xfde6, 0x870, 0x4d70, 0x4377, 0xb5b9, 0x0, 0x1);
        gbc.writeMem(0xa0e6, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xfde6);
        EXPECT(gbc.pc(), 0xa0e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0e6), 0xcb);
        EXPECT(gbc.readMem(0xa0e7), 0x1a);
        // CB 1A 03BE
        gbc.setState(0x532b, 0x7efa, 0x6630, 0x6b26, 0x2dbf, 0x99f5, 0x1, 0x0);
        gbc.writeMem(0x532b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x7efa);
        EXPECT(gbc.pc(), 0x532d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 03BF
        gbc.setState(0x17b9, 0xbddc, 0xd450, 0xeedb, 0xb01f, 0xec0c, 0x0, 0x0);
        gbc.writeMem(0x17b9, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xbddc);
        EXPECT(gbc.pc(), 0x17bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 03C0
        gbc.setState(0xd346, 0x9030, 0x9a00, 0xd5d0, 0x51d1, 0x3452, 0x1, 0x0);
        gbc.writeMem(0xd346, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x9030);
        EXPECT(gbc.pc(), 0xd348);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd346), 0xcb);
        EXPECT(gbc.readMem(0xd347), 0x1a);
        // CB 1A 03C1
        gbc.setState(0xca52, 0xcfae, 0x3230, 0x5a40, 0x8a6d, 0xb00f, 0x1, 0x1);
        gbc.writeMem(0xca52, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xcfae);
        EXPECT(gbc.pc(), 0xca54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca52), 0xcb);
        EXPECT(gbc.readMem(0xca53), 0x1a);
        // CB 1A 03C2
        gbc.setState(0xbf46, 0xa19, 0x3bf0, 0x79ba, 0xac3c, 0x2f3f, 0x0, 0x1);
        gbc.writeMem(0xbf46, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xa19);
        EXPECT(gbc.pc(), 0xbf48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf46), 0xcb);
        EXPECT(gbc.readMem(0xbf47), 0x1a);
        // CB 1A 03C3
        gbc.setState(0xe04a, 0xfcc, 0x9cc0, 0x3667, 0xb1a3, 0xbe96, 0x1, 0x1);
        gbc.writeMem(0xe04a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xfcc);
        EXPECT(gbc.pc(), 0xe04c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe04a), 0xcb);
        EXPECT(gbc.readMem(0xe04b), 0x1a);
        // CB 1A 03C4
        gbc.setState(0xe142, 0x1f5f, 0x4a60, 0x632f, 0xe629, 0x85e9, 0x1, 0x1);
        gbc.writeMem(0xe142, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x1f5f);
        EXPECT(gbc.pc(), 0xe144);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe142), 0xcb);
        EXPECT(gbc.readMem(0xe143), 0x1a);
        // CB 1A 03C5
        gbc.setState(0x1e14, 0xec38, 0x29c0, 0x7f99, 0xb5e8, 0xb40c, 0x1, 0x0);
        gbc.writeMem(0x1e14, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xec38);
        EXPECT(gbc.pc(), 0x1e16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 03C6
        gbc.setState(0x3445, 0x38ff, 0x8750, 0xa352, 0xc6ca, 0xd3b, 0x0, 0x0);
        gbc.writeMem(0x3445, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x38ff);
        EXPECT(gbc.pc(), 0x3447);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 03C7
        gbc.setState(0x93af, 0xe113, 0xf440, 0x8b7b, 0x2858, 0xcc2c, 0x1, 0x1);
        gbc.writeMem(0x93af, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xe113);
        EXPECT(gbc.pc(), 0x93b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93af), 0xcb);
        EXPECT(gbc.readMem(0x93b0), 0x1a);
        // CB 1A 03C8
        gbc.setState(0x5d7f, 0xb990, 0x3400, 0x1ad8, 0x61b8, 0xbbe7, 0x0, 0x1);
        gbc.writeMem(0x5d7f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xb990);
        EXPECT(gbc.pc(), 0x5d81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 03C9
        gbc.setState(0xc650, 0x99e, 0x9fd0, 0x262f, 0x794d, 0xcdd9, 0x1, 0x0);
        gbc.writeMem(0xc650, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x99e);
        EXPECT(gbc.pc(), 0xc652);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc650), 0xcb);
        EXPECT(gbc.readMem(0xc651), 0x1a);
        // CB 1A 03CA
        gbc.setState(0x929c, 0x8e8b, 0x33c0, 0xc421, 0xfbc7, 0xe26c, 0x1, 0x0);
        gbc.writeMem(0x929c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x8e8b);
        EXPECT(gbc.pc(), 0x929e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x929c), 0xcb);
        EXPECT(gbc.readMem(0x929d), 0x1a);
        // CB 1A 03CB
        gbc.setState(0x8665, 0xfca4, 0xba80, 0xfff4, 0xa1a4, 0xd587, 0x1, 0x0);
        gbc.writeMem(0x8665, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xfca4);
        EXPECT(gbc.pc(), 0x8667);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8665), 0xcb);
        EXPECT(gbc.readMem(0x8666), 0x1a);
        // CB 1A 03CC
        gbc.setState(0x4e5f, 0xc8d2, 0xc430, 0xc5e3, 0xa6d4, 0xd339, 0x1, 0x1);
        gbc.writeMem(0x4e5f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xc8d2);
        EXPECT(gbc.pc(), 0x4e61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 03CD
        gbc.setState(0xe43f, 0x45ab, 0x28b0, 0xe37d, 0x68fe, 0x7725, 0x1, 0x0);
        gbc.writeMem(0xe43f, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x45ab);
        EXPECT(gbc.pc(), 0xe441);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe43f), 0xcb);
        EXPECT(gbc.readMem(0xe440), 0x1a);
        // CB 1A 03CE
        gbc.setState(0x8c47, 0x739d, 0x44c0, 0xfbbd, 0x1d04, 0x69fe, 0x1, 0x0);
        gbc.writeMem(0x8c47, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x739d);
        EXPECT(gbc.pc(), 0x8c49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c47), 0xcb);
        EXPECT(gbc.readMem(0x8c48), 0x1a);
        // CB 1A 03CF
        gbc.setState(0x8ab1, 0xe073, 0x63c0, 0xf8be, 0xec21, 0xa2bd, 0x1, 0x1);
        gbc.writeMem(0x8ab1, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xe073);
        EXPECT(gbc.pc(), 0x8ab3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ab1), 0xcb);
        EXPECT(gbc.readMem(0x8ab2), 0x1a);
        // CB 1A 03D0
        gbc.setState(0xb7d7, 0x96ed, 0x4bb0, 0xd1ed, 0x1106, 0x71c3, 0x0, 0x0);
        gbc.writeMem(0xb7d7, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x96ed);
        EXPECT(gbc.pc(), 0xb7d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7d7), 0xcb);
        EXPECT(gbc.readMem(0xb7d8), 0x1a);
        // CB 1A 03D1
        gbc.setState(0xa85, 0x6290, 0xa330, 0xa7c4, 0x9a0e, 0xf8f0, 0x1, 0x0);
        gbc.writeMem(0xa85, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x6290);
        EXPECT(gbc.pc(), 0xa87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 03D2
        gbc.setState(0x1772, 0x9ccf, 0xc360, 0x8851, 0x796, 0x22c6, 0x0, 0x1);
        gbc.writeMem(0x1772, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x9ccf);
        EXPECT(gbc.pc(), 0x1774);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 03D3
        gbc.setState(0x595e, 0xcbe2, 0xc1a0, 0x8fbb, 0x7531, 0x2f, 0x1, 0x0);
        gbc.writeMem(0x595e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xcbe2);
        EXPECT(gbc.pc(), 0x5960);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 03D4
        gbc.setState(0x58e4, 0xd3cd, 0x4990, 0xf59f, 0x1ce3, 0x18aa, 0x1, 0x0);
        gbc.writeMem(0x58e4, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xd3cd);
        EXPECT(gbc.pc(), 0x58e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 03D5
        gbc.setState(0x4c07, 0x649, 0x3b90, 0x2a92, 0x58a, 0xc070, 0x1, 0x1);
        gbc.writeMem(0x4c07, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x649);
        EXPECT(gbc.pc(), 0x4c09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 03D6
        gbc.setState(0xada4, 0x87a7, 0x86b0, 0xa8cc, 0xb27b, 0xf198, 0x0, 0x1);
        gbc.writeMem(0xada4, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x87a7);
        EXPECT(gbc.pc(), 0xada6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xada4), 0xcb);
        EXPECT(gbc.readMem(0xada5), 0x1a);
        // CB 1A 03D7
        gbc.setState(0xbad1, 0x58e0, 0x7a0, 0xeec2, 0x2e97, 0xdd6, 0x0, 0x1);
        gbc.writeMem(0xbad1, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x58e0);
        EXPECT(gbc.pc(), 0xbad3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbad1), 0xcb);
        EXPECT(gbc.readMem(0xbad2), 0x1a);
        // CB 1A 03D8
        gbc.setState(0x394a, 0xeb44, 0xf9a0, 0x810f, 0xca96, 0xb816, 0x1, 0x1);
        gbc.writeMem(0x394a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xeb44);
        EXPECT(gbc.pc(), 0x394c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 03D9
        gbc.setState(0x8e1c, 0x9e6d, 0xf120, 0x760f, 0xbb26, 0xc9d3, 0x1, 0x0);
        gbc.writeMem(0x8e1c, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x9e6d);
        EXPECT(gbc.pc(), 0x8e1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e1c), 0xcb);
        EXPECT(gbc.readMem(0x8e1d), 0x1a);
        // CB 1A 03DA
        gbc.setState(0xce13, 0x9131, 0x1800, 0x8545, 0x68fc, 0xe66a, 0x1, 0x1);
        gbc.writeMem(0xce13, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x9131);
        EXPECT(gbc.pc(), 0xce15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce13), 0xcb);
        EXPECT(gbc.readMem(0xce14), 0x1a);
        // CB 1A 03DB
        gbc.setState(0x195b, 0xe841, 0xabe0, 0x6599, 0xe7eb, 0x599a, 0x0, 0x1);
        gbc.writeMem(0x195b, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xe841);
        EXPECT(gbc.pc(), 0x195d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 03DC
        gbc.setState(0x98c8, 0xe3b7, 0xba10, 0x4349, 0x46c6, 0x8ff3, 0x0, 0x1);
        gbc.writeMem(0x98c8, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xe3b7);
        EXPECT(gbc.pc(), 0x98ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98c8), 0xcb);
        EXPECT(gbc.readMem(0x98c9), 0x1a);
        // CB 1A 03DD
        gbc.setState(0x9091, 0x9e8d, 0x6640, 0x9edd, 0x3c00, 0x13ee, 0x0, 0x1);
        gbc.writeMem(0x9091, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x9e8d);
        EXPECT(gbc.pc(), 0x9093);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9091), 0xcb);
        EXPECT(gbc.readMem(0x9092), 0x1a);
        // CB 1A 03DE
        gbc.setState(0xd179, 0x70c9, 0x3910, 0x6d9, 0x1f71, 0x6cc4, 0x1, 0x1);
        gbc.writeMem(0xd179, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x70c9);
        EXPECT(gbc.pc(), 0xd17b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd179), 0xcb);
        EXPECT(gbc.readMem(0xd17a), 0x1a);
        // CB 1A 03DF
        gbc.setState(0x6d6e, 0x5675, 0xcd90, 0x134a, 0x1726, 0x5b89, 0x1, 0x0);
        gbc.writeMem(0x6d6e, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x5675);
        EXPECT(gbc.pc(), 0x6d70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 03E0
        gbc.setState(0x9786, 0x1d7b, 0x5470, 0xb342, 0xea62, 0x2a0c, 0x1, 0x1);
        gbc.writeMem(0x9786, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x1d7b);
        EXPECT(gbc.pc(), 0x9788);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9786), 0xcb);
        EXPECT(gbc.readMem(0x9787), 0x1a);
        // CB 1A 03E1
        gbc.setState(0x4ecb, 0xd57a, 0x3ab0, 0xc9bb, 0x284c, 0xc5d2, 0x1, 0x0);
        gbc.writeMem(0x4ecb, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xd57a);
        EXPECT(gbc.pc(), 0x4ecd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 03E2
        gbc.setState(0x6621, 0x5f1, 0x14f0, 0x3dcc, 0x39bc, 0xa350, 0x0, 0x1);
        gbc.writeMem(0x6621, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x5f1);
        EXPECT(gbc.pc(), 0x6623);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 03E3
        gbc.setState(0x5c1a, 0xbea9, 0xfd20, 0x7bf7, 0x3726, 0x8e89, 0x1, 0x0);
        gbc.writeMem(0x5c1a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xbea9);
        EXPECT(gbc.pc(), 0x5c1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 1A 03E4
        gbc.setState(0x30a7, 0x5ab5, 0xaad0, 0x6e27, 0x203a, 0x87d0, 0x0, 0x1);
        gbc.writeMem(0x30a7, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x5ab5);
        EXPECT(gbc.pc(), 0x30a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 03E5
        gbc.setState(0x5f32, 0x3f1d, 0xac30, 0x7dce, 0x2837, 0xb10, 0x0, 0x0);
        gbc.writeMem(0x5f32, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x3f1d);
        EXPECT(gbc.pc(), 0x5f34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 1A 03E6
        gbc.setState(0x9981, 0x2d1f, 0xb910, 0x8d5d, 0x1d1d, 0xbf24, 0x1, 0x0);
        gbc.writeMem(0x9981, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x2d1f);
        EXPECT(gbc.pc(), 0x9983);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9981), 0xcb);
        EXPECT(gbc.readMem(0x9982), 0x1a);
        // CB 1A 03E7
        gbc.setState(0xda8a, 0xd29b, 0xd070, 0x9034, 0xc85, 0x925, 0x0, 0x1);
        gbc.writeMem(0xda8a, { 0xcb, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xd29b);
        EXPECT(gbc.pc(), 0xda8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda8a), 0xcb);
        EXPECT(gbc.readMem(0xda8b), 0x1a);
    }
}
#endif
