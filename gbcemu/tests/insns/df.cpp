#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_df)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_df) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // DF 0000
        gbc.setState(0xb121, 0xbfb1, 0x5c00, 0xc952, 0xecfc, 0xd9a5, 0x1, 0x0);
        gbc.writeMem(0xb121, { 0xdf });
        gbc.writeMem(0xbfaf, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xbfaf);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb121), 0xdf);
        EXPECT(gbc.readMem(0xbfaf), 0x22);
        EXPECT(gbc.readMem(0xbfb0), 0xb1);
        // DF 0002
        gbc.setState(0x5be3, 0x98ba, 0xd90, 0xfb5b, 0xb95f, 0x6d95, 0x1, 0x0);
        gbc.writeMem(0x5be3, { 0xdf });
        gbc.writeMem(0x98b8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x98b8);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98b8), 0xe4);
        EXPECT(gbc.readMem(0x98b9), 0x5b);
        // DF 0004
        gbc.setState(0x451a, 0xded7, 0x1b90, 0x1465, 0x8931, 0x4bb8, 0x1, 0x0);
        gbc.writeMem(0x451a, { 0xdf });
        gbc.writeMem(0xded5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xded5);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xded5), 0x1b);
        EXPECT(gbc.readMem(0xded6), 0x45);
        // DF 0006
        gbc.setState(0x5610, 0xd1bf, 0x65b0, 0xb018, 0xb9fc, 0xf92d, 0x0, 0x1);
        gbc.writeMem(0x5610, { 0xdf });
        gbc.writeMem(0xd1bd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xd1bd);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1bd), 0x11);
        EXPECT(gbc.readMem(0xd1be), 0x56);
        // DF 0009
        gbc.setState(0x2dff, 0xab4b, 0x3380, 0xd315, 0x1144, 0x1eda, 0x0, 0x1);
        gbc.writeMem(0x2dff, { 0xdf });
        gbc.writeMem(0xab49, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xab49);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab49), 0x0);
        EXPECT(gbc.readMem(0xab4a), 0x2e);
        // DF 000A
        gbc.setState(0x3dff, 0xf085, 0xc060, 0x4333, 0xe4a5, 0xe82, 0x0, 0x0);
        gbc.writeMem(0x3dff, { 0xdf });
        gbc.writeMem(0xf083, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xf083);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf083), 0x0);
        EXPECT(gbc.readMem(0xf084), 0x3e);
        // DF 000D
        gbc.setState(0xbc60, 0x91d4, 0x460, 0xc761, 0xc4d2, 0x9627, 0x1, 0x0);
        gbc.writeMem(0x91d2, { 0x0, 0x0 });
        gbc.writeMem(0xbc60, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x91d2);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91d2), 0x61);
        EXPECT(gbc.readMem(0x91d3), 0xbc);
        EXPECT(gbc.readMem(0xbc60), 0xdf);
        // DF 000E
        gbc.setState(0x8ed, 0xfea3, 0x3740, 0xfe3e, 0x97cd, 0x2e02, 0x1, 0x0);
        gbc.writeMem(0x8ed, { 0xdf });
        gbc.writeMem(0xfea1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xfea1);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfea1), 0xee);
        EXPECT(gbc.readMem(0xfea2), 0x8);
        // DF 000F
        gbc.setState(0xce8, 0xf1e5, 0x19d0, 0x877, 0xb1f6, 0xf63d, 0x0, 0x1);
        gbc.writeMem(0xce8, { 0xdf });
        gbc.writeMem(0xf1e3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xf1e3);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf1e3), 0xe9);
        EXPECT(gbc.readMem(0xf1e4), 0xc);
        // DF 0014
        gbc.setState(0x7067, 0xa7d4, 0xc700, 0x9394, 0x9a6b, 0x754d, 0x1, 0x1);
        gbc.writeMem(0x7067, { 0xdf });
        gbc.writeMem(0xa7d2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xa7d2);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7d2), 0x68);
        EXPECT(gbc.readMem(0xa7d3), 0x70);
        // DF 0015
        gbc.setState(0xee52, 0xc23e, 0xf810, 0x6725, 0xd190, 0x3efd, 0x0, 0x0);
        gbc.writeMem(0xc23c, { 0x0, 0x0 });
        gbc.writeMem(0xee52, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xc23c);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc23c), 0x53);
        EXPECT(gbc.readMem(0xc23d), 0xee);
        EXPECT(gbc.readMem(0xee52), 0xdf);
        // DF 0017
        gbc.setState(0x5b78, 0xcadc, 0xacd0, 0x60ae, 0xe4e, 0xcdfa, 0x1, 0x0);
        gbc.writeMem(0x5b78, { 0xdf });
        gbc.writeMem(0xcada, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xcada);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcada), 0x79);
        EXPECT(gbc.readMem(0xcadb), 0x5b);
        // DF 001A
        gbc.setState(0x5501, 0xe86c, 0x7020, 0xb1e2, 0x1122, 0xc37c, 0x0, 0x0);
        gbc.writeMem(0x5501, { 0xdf });
        gbc.writeMem(0xe86a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xe86a);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe86a), 0x2);
        EXPECT(gbc.readMem(0xe86b), 0x55);
        // DF 001C
        gbc.setState(0xe9bf, 0x8c20, 0xb660, 0xe1fc, 0xb47e, 0xb7f5, 0x1, 0x1);
        gbc.writeMem(0x8c1e, { 0x0, 0x0 });
        gbc.writeMem(0xe9bf, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x8c1e);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c1e), 0xc0);
        EXPECT(gbc.readMem(0x8c1f), 0xe9);
        EXPECT(gbc.readMem(0xe9bf), 0xdf);
        // DF 001E
        gbc.setState(0xc53, 0xdb1f, 0x1880, 0x22a2, 0x7484, 0xc402, 0x1, 0x1);
        gbc.writeMem(0xc53, { 0xdf });
        gbc.writeMem(0xdb1d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xdb1d);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb1d), 0x54);
        EXPECT(gbc.readMem(0xdb1e), 0xc);
        // DF 001F
        gbc.setState(0xdf72, 0xe781, 0x8500, 0x79e7, 0xa812, 0xf404, 0x1, 0x1);
        gbc.writeMem(0xdf72, { 0xdf });
        gbc.writeMem(0xe77f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xe77f);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf72), 0xdf);
        EXPECT(gbc.readMem(0xe77f), 0x73);
        EXPECT(gbc.readMem(0xe780), 0xdf);
        // DF 0027
        gbc.setState(0x4527, 0xaa50, 0xab20, 0xcfd0, 0x8ca1, 0xfa17, 0x1, 0x1);
        gbc.writeMem(0x4527, { 0xdf });
        gbc.writeMem(0xaa4e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xaa4e);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa4e), 0x28);
        EXPECT(gbc.readMem(0xaa4f), 0x45);
        // DF 0028
        gbc.setState(0x29e2, 0xff4a, 0x5670, 0x1fad, 0xb15e, 0xc58b, 0x1, 0x1);
        gbc.writeMem(0x29e2, { 0xdf });
        gbc.writeMem(0xff48, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xff48);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff48), 0xe3);
        EXPECT(gbc.readMem(0xff49), 0x29);
        // DF 0029
        gbc.setState(0x22ba, 0xe231, 0xe0c0, 0xe71a, 0xf769, 0xf5c2, 0x0, 0x1);
        gbc.writeMem(0x22ba, { 0xdf });
        gbc.writeMem(0xe22f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xe22f);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe22f), 0xbb);
        EXPECT(gbc.readMem(0xe230), 0x22);
        // DF 002C
        gbc.setState(0x9e53, 0xc3e6, 0x9a70, 0xc866, 0xb36, 0xa813, 0x1, 0x0);
        gbc.writeMem(0x9e53, { 0xdf });
        gbc.writeMem(0xc3e4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xc3e4);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e53), 0xdf);
        EXPECT(gbc.readMem(0xc3e4), 0x54);
        EXPECT(gbc.readMem(0xc3e5), 0x9e);
        // DF 002E
        gbc.setState(0x80d0, 0xd012, 0x850, 0xcf62, 0xca52, 0x2bd9, 0x0, 0x0);
        gbc.writeMem(0x80d0, { 0xdf });
        gbc.writeMem(0xd010, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xd010);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80d0), 0xdf);
        EXPECT(gbc.readMem(0xd010), 0xd1);
        EXPECT(gbc.readMem(0xd011), 0x80);
        // DF 0030
        gbc.setState(0xb6b5, 0xb65d, 0x36b0, 0x2bfe, 0xd4d0, 0x3531, 0x0, 0x1);
        gbc.writeMem(0xb65b, { 0x0, 0x0 });
        gbc.writeMem(0xb6b5, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xb65b);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb65b), 0xb6);
        EXPECT(gbc.readMem(0xb65c), 0xb6);
        EXPECT(gbc.readMem(0xb6b5), 0xdf);
        // DF 0032
        gbc.setState(0x617d, 0x9deb, 0xac90, 0x306, 0xb0a9, 0xd3ad, 0x0, 0x0);
        gbc.writeMem(0x617d, { 0xdf });
        gbc.writeMem(0x9de9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x9de9);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9de9), 0x7e);
        EXPECT(gbc.readMem(0x9dea), 0x61);
        // DF 0034
        gbc.setState(0x9633, 0x938f, 0x6110, 0x67d9, 0x588c, 0xab57, 0x0, 0x1);
        gbc.writeMem(0x938d, { 0x0, 0x0 });
        gbc.writeMem(0x9633, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x938d);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x938d), 0x34);
        EXPECT(gbc.readMem(0x938e), 0x96);
        EXPECT(gbc.readMem(0x9633), 0xdf);
        // DF 0036
        gbc.setState(0xeef8, 0xad0d, 0xea20, 0x37c1, 0xabd7, 0x7c83, 0x1, 0x1);
        gbc.writeMem(0xad0b, { 0x0, 0x0 });
        gbc.writeMem(0xeef8, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xad0b);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad0b), 0xf9);
        EXPECT(gbc.readMem(0xad0c), 0xee);
        EXPECT(gbc.readMem(0xeef8), 0xdf);
        // DF 0039
        gbc.setState(0x2eae, 0xa8c1, 0xc0f0, 0xf12b, 0x2751, 0x556f, 0x1, 0x1);
        gbc.writeMem(0x2eae, { 0xdf });
        gbc.writeMem(0xa8bf, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xa8bf);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8bf), 0xaf);
        EXPECT(gbc.readMem(0xa8c0), 0x2e);
        // DF 003A
        gbc.setState(0xef1, 0x824d, 0x4550, 0xb08a, 0x8f55, 0x3cb4, 0x0, 0x0);
        gbc.writeMem(0xef1, { 0xdf });
        gbc.writeMem(0x824b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x824b);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x824b), 0xf2);
        EXPECT(gbc.readMem(0x824c), 0xe);
        // DF 003B
        gbc.setState(0xb2f, 0x8cd2, 0xa1f0, 0x2168, 0x6b88, 0xd2eb, 0x1, 0x0);
        gbc.writeMem(0xb2f, { 0xdf });
        gbc.writeMem(0x8cd0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x8cd0);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cd0), 0x30);
        EXPECT(gbc.readMem(0x8cd1), 0xb);
        // DF 003C
        gbc.setState(0xb8fa, 0x9732, 0xb720, 0x2a85, 0x20aa, 0xd869, 0x1, 0x0);
        gbc.writeMem(0x9730, { 0x0, 0x0 });
        gbc.writeMem(0xb8fa, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x9730);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9730), 0xfb);
        EXPECT(gbc.readMem(0x9731), 0xb8);
        EXPECT(gbc.readMem(0xb8fa), 0xdf);
        // DF 0041
        gbc.setState(0x720d, 0xe498, 0x2070, 0x9855, 0x1ca2, 0xb82a, 0x0, 0x1);
        gbc.writeMem(0x720d, { 0xdf });
        gbc.writeMem(0xe496, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xe496);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe496), 0xe);
        EXPECT(gbc.readMem(0xe497), 0x72);
        // DF 0042
        gbc.setState(0xdc37, 0xecec, 0xf3e0, 0x4759, 0xb6ee, 0x80b2, 0x0, 0x0);
        gbc.writeMem(0xdc37, { 0xdf });
        gbc.writeMem(0xecea, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xecea);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc37), 0xdf);
        EXPECT(gbc.readMem(0xecea), 0x38);
        EXPECT(gbc.readMem(0xeceb), 0xdc);
        // DF 0043
        gbc.setState(0xa46d, 0x9a86, 0xb110, 0x6ec, 0x62af, 0x8dd9, 0x0, 0x0);
        gbc.writeMem(0x9a84, { 0x0, 0x0 });
        gbc.writeMem(0xa46d, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x9a84);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a84), 0x6e);
        EXPECT(gbc.readMem(0x9a85), 0xa4);
        EXPECT(gbc.readMem(0xa46d), 0xdf);
        // DF 0044
        gbc.setState(0x52c, 0x97fb, 0x36e0, 0xe7c7, 0x5173, 0x9647, 0x1, 0x1);
        gbc.writeMem(0x52c, { 0xdf });
        gbc.writeMem(0x97f9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x97f9);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97f9), 0x2d);
        EXPECT(gbc.readMem(0x97fa), 0x5);
        // DF 0047
        gbc.setState(0x3b5, 0xff4e, 0xf90, 0xeb55, 0x7a64, 0x592c, 0x1, 0x0);
        gbc.writeMem(0x3b5, { 0xdf });
        gbc.writeMem(0xff4c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xff4c);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff4c), 0xb6);
        EXPECT(gbc.readMem(0xff4d), 0x3);
        // DF 0049
        gbc.setState(0x2e94, 0x8b42, 0xd1e0, 0x47ff, 0x3238, 0x2e37, 0x1, 0x0);
        gbc.writeMem(0x2e94, { 0xdf });
        gbc.writeMem(0x8b40, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x8b40);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b40), 0x95);
        EXPECT(gbc.readMem(0x8b41), 0x2e);
        // DF 004D
        gbc.setState(0x2be4, 0xf41b, 0x52c0, 0x4f82, 0xf013, 0x6594, 0x1, 0x1);
        gbc.writeMem(0x2be4, { 0xdf });
        gbc.writeMem(0xf419, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xf419);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf419), 0xe5);
        EXPECT(gbc.readMem(0xf41a), 0x2b);
        // DF 0051
        gbc.setState(0x8ce7, 0x9227, 0x34c0, 0x4e5, 0x295a, 0x9de9, 0x1, 0x0);
        gbc.writeMem(0x8ce7, { 0xdf });
        gbc.writeMem(0x9225, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x9225);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ce7), 0xdf);
        EXPECT(gbc.readMem(0x9225), 0xe8);
        EXPECT(gbc.readMem(0x9226), 0x8c);
        // DF 0052
        gbc.setState(0x855b, 0xbccb, 0x8dd0, 0xca47, 0xd8b4, 0x4591, 0x0, 0x0);
        gbc.writeMem(0x855b, { 0xdf });
        gbc.writeMem(0xbcc9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xbcc9);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x855b), 0xdf);
        EXPECT(gbc.readMem(0xbcc9), 0x5c);
        EXPECT(gbc.readMem(0xbcca), 0x85);
        // DF 0058
        gbc.setState(0xc8b6, 0xe3a8, 0xfa70, 0x9850, 0xa840, 0xaa2c, 0x1, 0x1);
        gbc.writeMem(0xc8b6, { 0xdf });
        gbc.writeMem(0xe3a6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xe3a6);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8b6), 0xdf);
        EXPECT(gbc.readMem(0xe3a6), 0xb7);
        EXPECT(gbc.readMem(0xe3a7), 0xc8);
        // DF 0059
        gbc.setState(0x2a08, 0xc08d, 0x1e90, 0x3f78, 0x5509, 0xf492, 0x1, 0x0);
        gbc.writeMem(0x2a08, { 0xdf });
        gbc.writeMem(0xc08b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xc08b);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc08b), 0x9);
        EXPECT(gbc.readMem(0xc08c), 0x2a);
        // DF 005C
        gbc.setState(0x219d, 0xad26, 0x37b0, 0xb44b, 0xd13c, 0xd45e, 0x0, 0x0);
        gbc.writeMem(0x219d, { 0xdf });
        gbc.writeMem(0xad24, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xad24);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad24), 0x9e);
        EXPECT(gbc.readMem(0xad25), 0x21);
        // DF 0060
        gbc.setState(0x16dc, 0xc335, 0x3de0, 0xefd0, 0xcb23, 0x779d, 0x1, 0x1);
        gbc.writeMem(0x16dc, { 0xdf });
        gbc.writeMem(0xc333, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xc333);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc333), 0xdd);
        EXPECT(gbc.readMem(0xc334), 0x16);
        // DF 0062
        gbc.setState(0x5ec4, 0xff77, 0xef0, 0x6f58, 0x5b12, 0xa02a, 0x0, 0x0);
        gbc.writeMem(0x5ec4, { 0xdf });
        gbc.writeMem(0xff75, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xff75);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff75), 0xc5);
        EXPECT(gbc.readMem(0xff76), 0x5e);
        // DF 0063
        gbc.setState(0x9c00, 0xf83c, 0x4f80, 0x38fe, 0x8dce, 0x531e, 0x1, 0x1);
        gbc.writeMem(0x9c00, { 0xdf });
        gbc.writeMem(0xf83a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xf83a);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c00), 0xdf);
        EXPECT(gbc.readMem(0xf83a), 0x1);
        EXPECT(gbc.readMem(0xf83b), 0x9c);
        // DF 0066
        gbc.setState(0x9586, 0xd80a, 0xfab0, 0x1c4a, 0x43bf, 0x63e1, 0x0, 0x0);
        gbc.writeMem(0x9586, { 0xdf });
        gbc.writeMem(0xd808, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xd808);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9586), 0xdf);
        EXPECT(gbc.readMem(0xd808), 0x87);
        EXPECT(gbc.readMem(0xd809), 0x95);
        // DF 0067
        gbc.setState(0xa4e5, 0xd99e, 0x7cf0, 0x933d, 0xa4a7, 0xb87, 0x0, 0x0);
        gbc.writeMem(0xa4e5, { 0xdf });
        gbc.writeMem(0xd99c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xd99c);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4e5), 0xdf);
        EXPECT(gbc.readMem(0xd99c), 0xe6);
        EXPECT(gbc.readMem(0xd99d), 0xa4);
        // DF 0069
        gbc.setState(0x7b99, 0xe84f, 0x4f10, 0x9d02, 0x4546, 0x223a, 0x1, 0x1);
        gbc.writeMem(0x7b99, { 0xdf });
        gbc.writeMem(0xe84d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xe84d);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe84d), 0x9a);
        EXPECT(gbc.readMem(0xe84e), 0x7b);
        // DF 006A
        gbc.setState(0x6eee, 0xb3e5, 0x8260, 0x58f6, 0xb53d, 0x43d1, 0x0, 0x0);
        gbc.writeMem(0x6eee, { 0xdf });
        gbc.writeMem(0xb3e3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xb3e3);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3e3), 0xef);
        EXPECT(gbc.readMem(0xb3e4), 0x6e);
        // DF 006B
        gbc.setState(0x6490, 0xac5d, 0xf80, 0xc1dc, 0xa51d, 0xc5f4, 0x0, 0x1);
        gbc.writeMem(0x6490, { 0xdf });
        gbc.writeMem(0xac5b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xac5b);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac5b), 0x91);
        EXPECT(gbc.readMem(0xac5c), 0x64);
        // DF 006D
        gbc.setState(0xd669, 0xfe57, 0x3390, 0x3262, 0xa2ff, 0x54c8, 0x0, 0x0);
        gbc.writeMem(0xd669, { 0xdf });
        gbc.writeMem(0xfe55, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xfe55);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd669), 0xdf);
        EXPECT(gbc.readMem(0xfe55), 0x6a);
        EXPECT(gbc.readMem(0xfe56), 0xd6);
        // DF 0072
        gbc.setState(0x2436, 0xa594, 0x97c0, 0x18c3, 0xf30c, 0x37fb, 0x1, 0x0);
        gbc.writeMem(0x2436, { 0xdf });
        gbc.writeMem(0xa592, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xa592);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa592), 0x37);
        EXPECT(gbc.readMem(0xa593), 0x24);
        // DF 0074
        gbc.setState(0x6855, 0xd419, 0x3240, 0x65a8, 0x96a1, 0xbe9f, 0x0, 0x1);
        gbc.writeMem(0x6855, { 0xdf });
        gbc.writeMem(0xd417, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xd417);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd417), 0x56);
        EXPECT(gbc.readMem(0xd418), 0x68);
        // DF 0078
        gbc.setState(0xe684, 0xe158, 0xc710, 0xb0c0, 0xff3c, 0x241b, 0x1, 0x1);
        gbc.writeMem(0xe156, { 0x0, 0x0 });
        gbc.writeMem(0xe684, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xe156);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe156), 0x85);
        EXPECT(gbc.readMem(0xe157), 0xe6);
        EXPECT(gbc.readMem(0xe684), 0xdf);
        // DF 007C
        gbc.setState(0xdaa3, 0xec20, 0x2d80, 0x5191, 0x64dc, 0x4f4b, 0x0, 0x0);
        gbc.writeMem(0xdaa3, { 0xdf });
        gbc.writeMem(0xec1e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xec1e);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdaa3), 0xdf);
        EXPECT(gbc.readMem(0xec1e), 0xa4);
        EXPECT(gbc.readMem(0xec1f), 0xda);
        // DF 007E
        gbc.setState(0x5b0, 0xd607, 0xe590, 0x92a1, 0xc205, 0xe7f, 0x0, 0x1);
        gbc.writeMem(0x5b0, { 0xdf });
        gbc.writeMem(0xd605, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xd605);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd605), 0xb1);
        EXPECT(gbc.readMem(0xd606), 0x5);
        // DF 0085
        gbc.setState(0xed9e, 0xdc33, 0xaf0, 0x2c3, 0xd87d, 0x2593, 0x0, 0x0);
        gbc.writeMem(0xdc31, { 0x0, 0x0 });
        gbc.writeMem(0xed9e, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xdc31);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc31), 0x9f);
        EXPECT(gbc.readMem(0xdc32), 0xed);
        EXPECT(gbc.readMem(0xed9e), 0xdf);
        // DF 0086
        gbc.setState(0x835, 0xa740, 0x81e0, 0x48ab, 0x9e5, 0x2e32, 0x1, 0x1);
        gbc.writeMem(0x835, { 0xdf });
        gbc.writeMem(0xa73e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xa73e);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa73e), 0x36);
        EXPECT(gbc.readMem(0xa73f), 0x8);
        // DF 0088
        gbc.setState(0x694f, 0xaf5e, 0xb370, 0x32ca, 0x332d, 0xc942, 0x0, 0x1);
        gbc.writeMem(0x694f, { 0xdf });
        gbc.writeMem(0xaf5c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xaf5c);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf5c), 0x50);
        EXPECT(gbc.readMem(0xaf5d), 0x69);
        // DF 0089
        gbc.setState(0xc235, 0x8463, 0x8ac0, 0x59d7, 0xf9dc, 0x7a07, 0x1, 0x1);
        gbc.writeMem(0x8461, { 0x0, 0x0 });
        gbc.writeMem(0xc235, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x8461);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8461), 0x36);
        EXPECT(gbc.readMem(0x8462), 0xc2);
        EXPECT(gbc.readMem(0xc235), 0xdf);
        // DF 008A
        gbc.setState(0xb6c3, 0xe2e0, 0x72f0, 0x8c9e, 0x8bf0, 0xe353, 0x0, 0x0);
        gbc.writeMem(0xb6c3, { 0xdf });
        gbc.writeMem(0xe2de, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xe2de);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6c3), 0xdf);
        EXPECT(gbc.readMem(0xe2de), 0xc4);
        EXPECT(gbc.readMem(0xe2df), 0xb6);
        // DF 008B
        gbc.setState(0xfc2, 0xab5a, 0x9960, 0xf040, 0xa26f, 0xfd4f, 0x0, 0x0);
        gbc.writeMem(0xfc2, { 0xdf });
        gbc.writeMem(0xab58, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xab58);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab58), 0xc3);
        EXPECT(gbc.readMem(0xab59), 0xf);
        // DF 008C
        gbc.setState(0xd0fa, 0xc70c, 0xd2b0, 0xa716, 0x103, 0x5118, 0x0, 0x1);
        gbc.writeMem(0xc70a, { 0x0, 0x0 });
        gbc.writeMem(0xd0fa, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xc70a);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc70a), 0xfb);
        EXPECT(gbc.readMem(0xc70b), 0xd0);
        EXPECT(gbc.readMem(0xd0fa), 0xdf);
        // DF 0095
        gbc.setState(0xe2e7, 0xd5f3, 0xf270, 0x6c93, 0x9f51, 0xb96d, 0x0, 0x0);
        gbc.writeMem(0xd5f1, { 0x0, 0x0 });
        gbc.writeMem(0xe2e7, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xd5f1);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5f1), 0xe8);
        EXPECT(gbc.readMem(0xd5f2), 0xe2);
        EXPECT(gbc.readMem(0xe2e7), 0xdf);
        // DF 0096
        gbc.setState(0xedaa, 0xb9b9, 0xa8e0, 0x14f5, 0x72b5, 0x1400, 0x1, 0x1);
        gbc.writeMem(0xb9b7, { 0x0, 0x0 });
        gbc.writeMem(0xedaa, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xb9b7);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9b7), 0xab);
        EXPECT(gbc.readMem(0xb9b8), 0xed);
        EXPECT(gbc.readMem(0xedaa), 0xdf);
        // DF 0099
        gbc.setState(0x85bf, 0x93e1, 0xf310, 0x9bb6, 0x4d29, 0xf183, 0x0, 0x1);
        gbc.writeMem(0x85bf, { 0xdf });
        gbc.writeMem(0x93df, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x93df);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85bf), 0xdf);
        EXPECT(gbc.readMem(0x93df), 0xc0);
        EXPECT(gbc.readMem(0x93e0), 0x85);
        // DF 00A0
        gbc.setState(0x8b22, 0x9fe9, 0x93f0, 0x3c35, 0x2a1f, 0xd979, 0x0, 0x1);
        gbc.writeMem(0x8b22, { 0xdf });
        gbc.writeMem(0x9fe7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x9fe7);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b22), 0xdf);
        EXPECT(gbc.readMem(0x9fe7), 0x23);
        EXPECT(gbc.readMem(0x9fe8), 0x8b);
        // DF 00A5
        gbc.setState(0xd86b, 0xbc7e, 0xf450, 0xccc3, 0x52ec, 0xb70c, 0x0, 0x0);
        gbc.writeMem(0xbc7c, { 0x0, 0x0 });
        gbc.writeMem(0xd86b, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xbc7c);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc7c), 0x6c);
        EXPECT(gbc.readMem(0xbc7d), 0xd8);
        EXPECT(gbc.readMem(0xd86b), 0xdf);
        // DF 00A6
        gbc.setState(0xe8d7, 0x93c7, 0xd830, 0x2afa, 0x1336, 0x9b7e, 0x1, 0x0);
        gbc.writeMem(0x93c5, { 0x0, 0x0 });
        gbc.writeMem(0xe8d7, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x93c5);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93c5), 0xd8);
        EXPECT(gbc.readMem(0x93c6), 0xe8);
        EXPECT(gbc.readMem(0xe8d7), 0xdf);
        // DF 00A8
        gbc.setState(0xb896, 0xf45a, 0x3f80, 0x8985, 0xf052, 0x957a, 0x1, 0x1);
        gbc.writeMem(0xb896, { 0xdf });
        gbc.writeMem(0xf458, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xf458);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb896), 0xdf);
        EXPECT(gbc.readMem(0xf458), 0x97);
        EXPECT(gbc.readMem(0xf459), 0xb8);
        // DF 00AA
        gbc.setState(0x5f3, 0xc6ac, 0xc950, 0x5bed, 0xd8ce, 0x7738, 0x0, 0x1);
        gbc.writeMem(0x5f3, { 0xdf });
        gbc.writeMem(0xc6aa, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xc6aa);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6aa), 0xf4);
        EXPECT(gbc.readMem(0xc6ab), 0x5);
        // DF 00AF
        gbc.setState(0x5d08, 0xf59b, 0xcf60, 0xfaf3, 0x8ed3, 0x34df, 0x1, 0x1);
        gbc.writeMem(0x5d08, { 0xdf });
        gbc.writeMem(0xf599, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xf599);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf599), 0x9);
        EXPECT(gbc.readMem(0xf59a), 0x5d);
        // DF 00B6
        gbc.setState(0xdf33, 0xf5f3, 0x5260, 0x77b8, 0xb503, 0xb583, 0x1, 0x1);
        gbc.writeMem(0xdf33, { 0xdf });
        gbc.writeMem(0xf5f1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xf5f1);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf33), 0xdf);
        EXPECT(gbc.readMem(0xf5f1), 0x34);
        EXPECT(gbc.readMem(0xf5f2), 0xdf);
        // DF 00B8
        gbc.setState(0x39c1, 0xbe8a, 0x8570, 0x9f19, 0xfd94, 0x5711, 0x0, 0x1);
        gbc.writeMem(0x39c1, { 0xdf });
        gbc.writeMem(0xbe88, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xbe88);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe88), 0xc2);
        EXPECT(gbc.readMem(0xbe89), 0x39);
        // DF 00BC
        gbc.setState(0xaf61, 0xb312, 0xc5a0, 0x40c, 0x5eb7, 0x86eb, 0x0, 0x0);
        gbc.writeMem(0xaf61, { 0xdf });
        gbc.writeMem(0xb310, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xb310);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf61), 0xdf);
        EXPECT(gbc.readMem(0xb310), 0x62);
        EXPECT(gbc.readMem(0xb311), 0xaf);
        // DF 00BF
        gbc.setState(0x6449, 0xafcb, 0x2ce0, 0x2274, 0x888c, 0x7969, 0x0, 0x1);
        gbc.writeMem(0x6449, { 0xdf });
        gbc.writeMem(0xafc9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xafc9);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafc9), 0x4a);
        EXPECT(gbc.readMem(0xafca), 0x64);
        // DF 00C0
        gbc.setState(0xb92c, 0xea1e, 0xbdf0, 0x6a13, 0xa550, 0x27ac, 0x0, 0x1);
        gbc.writeMem(0xb92c, { 0xdf });
        gbc.writeMem(0xea1c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xea1c);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb92c), 0xdf);
        EXPECT(gbc.readMem(0xea1c), 0x2d);
        EXPECT(gbc.readMem(0xea1d), 0xb9);
        // DF 00C1
        gbc.setState(0xed03, 0xd771, 0xd010, 0xa9c6, 0x4320, 0x63b0, 0x0, 0x1);
        gbc.writeMem(0xd76f, { 0x0, 0x0 });
        gbc.writeMem(0xed03, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xd76f);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd76f), 0x4);
        EXPECT(gbc.readMem(0xd770), 0xed);
        EXPECT(gbc.readMem(0xed03), 0xdf);
        // DF 00C2
        gbc.setState(0x7a3f, 0xd0f4, 0x6880, 0x38cd, 0x9ab3, 0x8c66, 0x1, 0x0);
        gbc.writeMem(0x7a3f, { 0xdf });
        gbc.writeMem(0xd0f2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xd0f2);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0f2), 0x40);
        EXPECT(gbc.readMem(0xd0f3), 0x7a);
        // DF 00C3
        gbc.setState(0x646e, 0xc338, 0xa60, 0xe0ec, 0xa3b9, 0x3a9a, 0x1, 0x0);
        gbc.writeMem(0x646e, { 0xdf });
        gbc.writeMem(0xc336, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xc336);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc336), 0x6f);
        EXPECT(gbc.readMem(0xc337), 0x64);
        // DF 00C4
        gbc.setState(0x5f01, 0xd2fe, 0x7ec0, 0x3693, 0x885e, 0x8276, 0x0, 0x0);
        gbc.writeMem(0x5f01, { 0xdf });
        gbc.writeMem(0xd2fc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xd2fc);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2fc), 0x2);
        EXPECT(gbc.readMem(0xd2fd), 0x5f);
        // DF 00C6
        gbc.setState(0x3902, 0xc848, 0xc200, 0xfcd7, 0xf441, 0x7fbb, 0x1, 0x1);
        gbc.writeMem(0x3902, { 0xdf });
        gbc.writeMem(0xc846, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xc846);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc846), 0x3);
        EXPECT(gbc.readMem(0xc847), 0x39);
        // DF 00C7
        gbc.setState(0xcc78, 0x9ea2, 0x7820, 0x552, 0xd31f, 0xbeb3, 0x1, 0x0);
        gbc.writeMem(0x9ea0, { 0x0, 0x0 });
        gbc.writeMem(0xcc78, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x9ea0);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ea0), 0x79);
        EXPECT(gbc.readMem(0x9ea1), 0xcc);
        EXPECT(gbc.readMem(0xcc78), 0xdf);
        // DF 00C9
        gbc.setState(0xdd85, 0xd99f, 0x3180, 0x1759, 0xd4c, 0xac2d, 0x1, 0x1);
        gbc.writeMem(0xd99d, { 0x0, 0x0 });
        gbc.writeMem(0xdd85, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xd99d);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd99d), 0x86);
        EXPECT(gbc.readMem(0xd99e), 0xdd);
        EXPECT(gbc.readMem(0xdd85), 0xdf);
        // DF 00CA
        gbc.setState(0x65c7, 0x8440, 0x9000, 0x4fe7, 0x8dbe, 0xd64e, 0x1, 0x1);
        gbc.writeMem(0x65c7, { 0xdf });
        gbc.writeMem(0x843e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x843e);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x843e), 0xc8);
        EXPECT(gbc.readMem(0x843f), 0x65);
        // DF 00CC
        gbc.setState(0xf95, 0xc419, 0x5760, 0x283c, 0xb7d8, 0xb8ec, 0x1, 0x1);
        gbc.writeMem(0xf95, { 0xdf });
        gbc.writeMem(0xc417, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xc417);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc417), 0x96);
        EXPECT(gbc.readMem(0xc418), 0xf);
        // DF 00CD
        gbc.setState(0x7485, 0xeabb, 0xb660, 0x8a4c, 0x278d, 0xa1f1, 0x0, 0x0);
        gbc.writeMem(0x7485, { 0xdf });
        gbc.writeMem(0xeab9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xeab9);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeab9), 0x86);
        EXPECT(gbc.readMem(0xeaba), 0x74);
        // DF 00CE
        gbc.setState(0xd4ba, 0xe9d5, 0x8a90, 0xb144, 0x8f4b, 0x92f5, 0x0, 0x1);
        gbc.writeMem(0xd4ba, { 0xdf });
        gbc.writeMem(0xe9d3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xe9d3);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4ba), 0xdf);
        EXPECT(gbc.readMem(0xe9d3), 0xbb);
        EXPECT(gbc.readMem(0xe9d4), 0xd4);
        // DF 00CF
        gbc.setState(0x6e44, 0xadf7, 0x4f40, 0xb986, 0xde49, 0x886c, 0x0, 0x0);
        gbc.writeMem(0x6e44, { 0xdf });
        gbc.writeMem(0xadf5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xadf5);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadf5), 0x45);
        EXPECT(gbc.readMem(0xadf6), 0x6e);
        // DF 00D3
        gbc.setState(0x985f, 0xa98a, 0xb460, 0x4738, 0x1bb0, 0x56cb, 0x0, 0x0);
        gbc.writeMem(0x985f, { 0xdf });
        gbc.writeMem(0xa988, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xa988);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x985f), 0xdf);
        EXPECT(gbc.readMem(0xa988), 0x60);
        EXPECT(gbc.readMem(0xa989), 0x98);
        // DF 00D4
        gbc.setState(0x9b09, 0xef33, 0x58b0, 0x5629, 0x5535, 0x1a28, 0x0, 0x1);
        gbc.writeMem(0x9b09, { 0xdf });
        gbc.writeMem(0xef31, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xef31);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b09), 0xdf);
        EXPECT(gbc.readMem(0xef31), 0xa);
        EXPECT(gbc.readMem(0xef32), 0x9b);
        // DF 00D5
        gbc.setState(0x1a52, 0xbe4a, 0x8480, 0x8f75, 0xa2a2, 0x68de, 0x1, 0x0);
        gbc.writeMem(0x1a52, { 0xdf });
        gbc.writeMem(0xbe48, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xbe48);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe48), 0x53);
        EXPECT(gbc.readMem(0xbe49), 0x1a);
        // DF 00D6
        gbc.setState(0xc54f, 0xa0c1, 0x8090, 0x628e, 0x5d92, 0x2086, 0x0, 0x0);
        gbc.writeMem(0xa0bf, { 0x0, 0x0 });
        gbc.writeMem(0xc54f, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xa0bf);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0bf), 0x50);
        EXPECT(gbc.readMem(0xa0c0), 0xc5);
        EXPECT(gbc.readMem(0xc54f), 0xdf);
        // DF 00D9
        gbc.setState(0xcb14, 0x9f7c, 0x4740, 0x52bb, 0x9c76, 0x6bbf, 0x1, 0x1);
        gbc.writeMem(0x9f7a, { 0x0, 0x0 });
        gbc.writeMem(0xcb14, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x9f7a);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f7a), 0x15);
        EXPECT(gbc.readMem(0x9f7b), 0xcb);
        EXPECT(gbc.readMem(0xcb14), 0xdf);
        // DF 00DB
        gbc.setState(0x2fd2, 0xbec3, 0x7160, 0xc636, 0x32ca, 0x5fa3, 0x1, 0x0);
        gbc.writeMem(0x2fd2, { 0xdf });
        gbc.writeMem(0xbec1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xbec1);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbec1), 0xd3);
        EXPECT(gbc.readMem(0xbec2), 0x2f);
        // DF 00DE
        gbc.setState(0x62c8, 0xe288, 0x2540, 0xc580, 0xfbde, 0x2ae7, 0x1, 0x1);
        gbc.writeMem(0x62c8, { 0xdf });
        gbc.writeMem(0xe286, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xe286);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe286), 0xc9);
        EXPECT(gbc.readMem(0xe287), 0x62);
        // DF 00DF
        gbc.setState(0x8f8e, 0xc37b, 0x2ce0, 0x5472, 0x554c, 0x75b2, 0x0, 0x1);
        gbc.writeMem(0x8f8e, { 0xdf });
        gbc.writeMem(0xc379, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xc379);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f8e), 0xdf);
        EXPECT(gbc.readMem(0xc379), 0x8f);
        EXPECT(gbc.readMem(0xc37a), 0x8f);
        // DF 00E0
        gbc.setState(0xb7a3, 0xa47b, 0xc80, 0xc5a, 0x1f73, 0x7ac2, 0x0, 0x0);
        gbc.writeMem(0xa479, { 0x0, 0x0 });
        gbc.writeMem(0xb7a3, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xa479);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa479), 0xa4);
        EXPECT(gbc.readMem(0xa47a), 0xb7);
        EXPECT(gbc.readMem(0xb7a3), 0xdf);
        // DF 00E3
        gbc.setState(0x5e09, 0xfd95, 0xb500, 0xbe16, 0x35b9, 0xaed8, 0x1, 0x0);
        gbc.writeMem(0x5e09, { 0xdf });
        gbc.writeMem(0xfd93, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xfd93);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfd93), 0xa);
        EXPECT(gbc.readMem(0xfd94), 0x5e);
        // DF 00E4
        gbc.setState(0x2a65, 0x89e4, 0x8950, 0xe962, 0xb6cf, 0xd91, 0x0, 0x0);
        gbc.writeMem(0x2a65, { 0xdf });
        gbc.writeMem(0x89e2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x89e2);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89e2), 0x66);
        EXPECT(gbc.readMem(0x89e3), 0x2a);
        // DF 00EC
        gbc.setState(0xa861, 0xad28, 0xc470, 0x4d9a, 0xec03, 0x2a49, 0x0, 0x1);
        gbc.writeMem(0xa861, { 0xdf });
        gbc.writeMem(0xad26, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xad26);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa861), 0xdf);
        EXPECT(gbc.readMem(0xad26), 0x62);
        EXPECT(gbc.readMem(0xad27), 0xa8);
        // DF 00EE
        gbc.setState(0xc0c3, 0xb270, 0x9550, 0xce6, 0x87d8, 0xc32, 0x0, 0x1);
        gbc.writeMem(0xb26e, { 0x0, 0x0 });
        gbc.writeMem(0xc0c3, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xb26e);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb26e), 0xc4);
        EXPECT(gbc.readMem(0xb26f), 0xc0);
        EXPECT(gbc.readMem(0xc0c3), 0xdf);
        // DF 00F0
        gbc.setState(0xef2d, 0xf547, 0x4ee0, 0x1a90, 0xef63, 0xc57f, 0x0, 0x0);
        gbc.writeMem(0xef2d, { 0xdf });
        gbc.writeMem(0xf545, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xf545);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef2d), 0xdf);
        EXPECT(gbc.readMem(0xf545), 0x2e);
        EXPECT(gbc.readMem(0xf546), 0xef);
        // DF 00F1
        gbc.setState(0x1922, 0xe54d, 0xd090, 0x837d, 0xc841, 0xdfd0, 0x1, 0x0);
        gbc.writeMem(0x1922, { 0xdf });
        gbc.writeMem(0xe54b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xe54b);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe54b), 0x23);
        EXPECT(gbc.readMem(0xe54c), 0x19);
        // DF 00F3
        gbc.setState(0xdf8f, 0xc706, 0x6ad0, 0xe1a5, 0x975, 0x1ad9, 0x1, 0x1);
        gbc.writeMem(0xc704, { 0x0, 0x0 });
        gbc.writeMem(0xdf8f, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xc704);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc704), 0x90);
        EXPECT(gbc.readMem(0xc705), 0xdf);
        EXPECT(gbc.readMem(0xdf8f), 0xdf);
        // DF 00F4
        gbc.setState(0x6f10, 0xce65, 0x8c30, 0xb103, 0x6cc1, 0x53aa, 0x0, 0x0);
        gbc.writeMem(0x6f10, { 0xdf });
        gbc.writeMem(0xce63, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xce63);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce63), 0x11);
        EXPECT(gbc.readMem(0xce64), 0x6f);
        // DF 00F6
        gbc.setState(0xd7, 0xc9dc, 0x35d0, 0x98df, 0xdef4, 0x7d3d, 0x1, 0x0);
        gbc.writeMem(0xd7, { 0xdf });
        gbc.writeMem(0xc9da, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xc9da);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9da), 0xd8);
        EXPECT(gbc.readMem(0xc9db), 0x0);
        // DF 00F8
        gbc.setState(0xba4d, 0x95a8, 0xbc60, 0x55ab, 0x8f01, 0x2133, 0x0, 0x0);
        gbc.writeMem(0x95a6, { 0x0, 0x0 });
        gbc.writeMem(0xba4d, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x95a6);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95a6), 0x4e);
        EXPECT(gbc.readMem(0x95a7), 0xba);
        EXPECT(gbc.readMem(0xba4d), 0xdf);
        // DF 00FA
        gbc.setState(0x59a9, 0xcc00, 0xf4c0, 0xe3e, 0x72, 0x305d, 0x1, 0x0);
        gbc.writeMem(0x59a9, { 0xdf });
        gbc.writeMem(0xcbfe, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xcbfe);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbfe), 0xaa);
        EXPECT(gbc.readMem(0xcbff), 0x59);
        // DF 0101
        gbc.setState(0x3b5c, 0xd37a, 0x8420, 0x872e, 0x2624, 0x8736, 0x1, 0x1);
        gbc.writeMem(0x3b5c, { 0xdf });
        gbc.writeMem(0xd378, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xd378);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd378), 0x5d);
        EXPECT(gbc.readMem(0xd379), 0x3b);
        // DF 0102
        gbc.setState(0x929d, 0x94de, 0x6750, 0x98c6, 0xc1d1, 0x7353, 0x1, 0x0);
        gbc.writeMem(0x929d, { 0xdf });
        gbc.writeMem(0x94dc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x94dc);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x929d), 0xdf);
        EXPECT(gbc.readMem(0x94dc), 0x9e);
        EXPECT(gbc.readMem(0x94dd), 0x92);
        // DF 0103
        gbc.setState(0xa252, 0xbd68, 0x83b0, 0xbe49, 0xdcbb, 0xe164, 0x1, 0x1);
        gbc.writeMem(0xa252, { 0xdf });
        gbc.writeMem(0xbd66, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xbd66);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa252), 0xdf);
        EXPECT(gbc.readMem(0xbd66), 0x53);
        EXPECT(gbc.readMem(0xbd67), 0xa2);
        // DF 0104
        gbc.setState(0xdee8, 0xfef7, 0x78a0, 0xbf28, 0xca6c, 0x5670, 0x1, 0x0);
        gbc.writeMem(0xdee8, { 0xdf });
        gbc.writeMem(0xfef5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xfef5);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdee8), 0xdf);
        EXPECT(gbc.readMem(0xfef5), 0xe9);
        EXPECT(gbc.readMem(0xfef6), 0xde);
        // DF 0105
        gbc.setState(0x26db, 0x9fa7, 0xf130, 0x7c7e, 0x5342, 0xc112, 0x0, 0x0);
        gbc.writeMem(0x26db, { 0xdf });
        gbc.writeMem(0x9fa5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x9fa5);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fa5), 0xdc);
        EXPECT(gbc.readMem(0x9fa6), 0x26);
        // DF 0106
        gbc.setState(0x60de, 0xf97f, 0xf670, 0xd248, 0x3c, 0x5546, 0x0, 0x1);
        gbc.writeMem(0x60de, { 0xdf });
        gbc.writeMem(0xf97d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xf97d);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf97d), 0xdf);
        EXPECT(gbc.readMem(0xf97e), 0x60);
        // DF 0107
        gbc.setState(0x41ba, 0x8004, 0xc180, 0x614, 0x9e7e, 0xd278, 0x1, 0x1);
        gbc.writeMem(0x41ba, { 0xdf });
        gbc.writeMem(0x8002, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x8002);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8002), 0xbb);
        EXPECT(gbc.readMem(0x8003), 0x41);
        // DF 0108
        gbc.setState(0x5c41, 0xfd5d, 0xf800, 0x5eea, 0xdd6b, 0x1f6a, 0x1, 0x1);
        gbc.writeMem(0x5c41, { 0xdf });
        gbc.writeMem(0xfd5b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xfd5b);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfd5b), 0x42);
        EXPECT(gbc.readMem(0xfd5c), 0x5c);
        // DF 010A
        gbc.setState(0x9bc5, 0x8901, 0x9300, 0xf168, 0xc1f8, 0x6107, 0x1, 0x1);
        gbc.writeMem(0x88ff, { 0x0, 0x0 });
        gbc.writeMem(0x9bc5, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x88ff);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88ff), 0xc6);
        EXPECT(gbc.readMem(0x8900), 0x9b);
        EXPECT(gbc.readMem(0x9bc5), 0xdf);
        // DF 010B
        gbc.setState(0xd71c, 0xdea9, 0x74c0, 0xef9, 0xb9e5, 0x3f30, 0x1, 0x1);
        gbc.writeMem(0xd71c, { 0xdf });
        gbc.writeMem(0xdea7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xdea7);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd71c), 0xdf);
        EXPECT(gbc.readMem(0xdea7), 0x1d);
        EXPECT(gbc.readMem(0xdea8), 0xd7);
        // DF 010D
        gbc.setState(0x9fee, 0xbba7, 0xff30, 0xa908, 0x1e29, 0x3491, 0x1, 0x0);
        gbc.writeMem(0x9fee, { 0xdf });
        gbc.writeMem(0xbba5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xbba5);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fee), 0xdf);
        EXPECT(gbc.readMem(0xbba5), 0xef);
        EXPECT(gbc.readMem(0xbba6), 0x9f);
        // DF 010E
        gbc.setState(0x9026, 0xda6b, 0x7560, 0x521d, 0x7d1b, 0x6e90, 0x1, 0x0);
        gbc.writeMem(0x9026, { 0xdf });
        gbc.writeMem(0xda69, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xda69);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9026), 0xdf);
        EXPECT(gbc.readMem(0xda69), 0x27);
        EXPECT(gbc.readMem(0xda6a), 0x90);
        // DF 010F
        gbc.setState(0xbfbb, 0xd68c, 0x5190, 0xcf58, 0x4d11, 0xab25, 0x1, 0x0);
        gbc.writeMem(0xbfbb, { 0xdf });
        gbc.writeMem(0xd68a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xd68a);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfbb), 0xdf);
        EXPECT(gbc.readMem(0xd68a), 0xbc);
        EXPECT(gbc.readMem(0xd68b), 0xbf);
        // DF 0118
        gbc.setState(0x488e, 0xc092, 0xef0, 0xb99c, 0x5fe2, 0xa02, 0x0, 0x0);
        gbc.writeMem(0x488e, { 0xdf });
        gbc.writeMem(0xc090, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xc090);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc090), 0x8f);
        EXPECT(gbc.readMem(0xc091), 0x48);
        // DF 0119
        gbc.setState(0x88b2, 0xe462, 0x58b0, 0xfcd2, 0xed33, 0xc7c1, 0x0, 0x0);
        gbc.writeMem(0x88b2, { 0xdf });
        gbc.writeMem(0xe460, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xe460);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88b2), 0xdf);
        EXPECT(gbc.readMem(0xe460), 0xb3);
        EXPECT(gbc.readMem(0xe461), 0x88);
        // DF 011E
        gbc.setState(0x7931, 0xa99f, 0x4c60, 0x89f0, 0xa2eb, 0xc670, 0x1, 0x1);
        gbc.writeMem(0x7931, { 0xdf });
        gbc.writeMem(0xa99d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xa99d);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa99d), 0x32);
        EXPECT(gbc.readMem(0xa99e), 0x79);
        // DF 011F
        gbc.setState(0xc8db, 0xdb0b, 0xdc60, 0x61b1, 0x33a, 0x86a5, 0x0, 0x1);
        gbc.writeMem(0xc8db, { 0xdf });
        gbc.writeMem(0xdb09, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xdb09);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8db), 0xdf);
        EXPECT(gbc.readMem(0xdb09), 0xdc);
        EXPECT(gbc.readMem(0xdb0a), 0xc8);
        // DF 0121
        gbc.setState(0x9efc, 0xcbfa, 0xede0, 0xed9e, 0xf5ac, 0x14d1, 0x1, 0x1);
        gbc.writeMem(0x9efc, { 0xdf });
        gbc.writeMem(0xcbf8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xcbf8);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9efc), 0xdf);
        EXPECT(gbc.readMem(0xcbf8), 0xfd);
        EXPECT(gbc.readMem(0xcbf9), 0x9e);
        // DF 0122
        gbc.setState(0xbda5, 0x9839, 0x33f0, 0x9863, 0x4e72, 0x79ce, 0x0, 0x1);
        gbc.writeMem(0x9837, { 0x0, 0x0 });
        gbc.writeMem(0xbda5, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x9837);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9837), 0xa6);
        EXPECT(gbc.readMem(0x9838), 0xbd);
        EXPECT(gbc.readMem(0xbda5), 0xdf);
        // DF 0129
        gbc.setState(0x5a51, 0xf559, 0xf470, 0x9f4a, 0x3d32, 0x775b, 0x1, 0x0);
        gbc.writeMem(0x5a51, { 0xdf });
        gbc.writeMem(0xf557, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xf557);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf557), 0x52);
        EXPECT(gbc.readMem(0xf558), 0x5a);
        // DF 012C
        gbc.setState(0x6127, 0xbca2, 0x59a0, 0x8839, 0x7093, 0xe2ec, 0x0, 0x1);
        gbc.writeMem(0x6127, { 0xdf });
        gbc.writeMem(0xbca0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xbca0);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbca0), 0x28);
        EXPECT(gbc.readMem(0xbca1), 0x61);
        // DF 012D
        gbc.setState(0x4da6, 0xabb2, 0x690, 0xd4fb, 0x6698, 0x6286, 0x1, 0x0);
        gbc.writeMem(0x4da6, { 0xdf });
        gbc.writeMem(0xabb0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xabb0);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabb0), 0xa7);
        EXPECT(gbc.readMem(0xabb1), 0x4d);
        // DF 012E
        gbc.setState(0x2d83, 0xffa9, 0x12f0, 0x8ce6, 0x6c25, 0x4cd9, 0x1, 0x1);
        gbc.writeMem(0x2d83, { 0xdf });
        gbc.writeMem(0xffa7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xffa7);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffa7), 0x84);
        EXPECT(gbc.readMem(0xffa8), 0x2d);
        // DF 0130
        gbc.setState(0xa178, 0xf2bf, 0xfb80, 0x38b2, 0x2e4e, 0x8819, 0x0, 0x1);
        gbc.writeMem(0xa178, { 0xdf });
        gbc.writeMem(0xf2bd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xf2bd);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa178), 0xdf);
        EXPECT(gbc.readMem(0xf2bd), 0x79);
        EXPECT(gbc.readMem(0xf2be), 0xa1);
        // DF 0131
        gbc.setState(0x1df7, 0xede7, 0x51a0, 0x7c21, 0x9a1c, 0x7c4e, 0x0, 0x1);
        gbc.writeMem(0x1df7, { 0xdf });
        gbc.writeMem(0xede5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xede5);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xede5), 0xf8);
        EXPECT(gbc.readMem(0xede6), 0x1d);
        // DF 0135
        gbc.setState(0x6b26, 0xfb80, 0x7e30, 0x16df, 0x7b50, 0x9252, 0x1, 0x1);
        gbc.writeMem(0x6b26, { 0xdf });
        gbc.writeMem(0xfb7e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xfb7e);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfb7e), 0x27);
        EXPECT(gbc.readMem(0xfb7f), 0x6b);
        // DF 0137
        gbc.setState(0xe7bf, 0xf7e3, 0x5830, 0x6fd7, 0x37cb, 0xf3fd, 0x0, 0x1);
        gbc.writeMem(0xe7bf, { 0xdf });
        gbc.writeMem(0xf7e1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xf7e1);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7bf), 0xdf);
        EXPECT(gbc.readMem(0xf7e1), 0xc0);
        EXPECT(gbc.readMem(0xf7e2), 0xe7);
        // DF 0138
        gbc.setState(0x8afd, 0x99f1, 0x7df0, 0x5b2, 0x6bce, 0x4546, 0x1, 0x1);
        gbc.writeMem(0x8afd, { 0xdf });
        gbc.writeMem(0x99ef, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x99ef);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8afd), 0xdf);
        EXPECT(gbc.readMem(0x99ef), 0xfe);
        EXPECT(gbc.readMem(0x99f0), 0x8a);
        // DF 0139
        gbc.setState(0xb41d, 0xdbc6, 0x3340, 0xf26c, 0x9576, 0xacfb, 0x0, 0x1);
        gbc.writeMem(0xb41d, { 0xdf });
        gbc.writeMem(0xdbc4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xdbc4);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb41d), 0xdf);
        EXPECT(gbc.readMem(0xdbc4), 0x1e);
        EXPECT(gbc.readMem(0xdbc5), 0xb4);
        // DF 013B
        gbc.setState(0x589f, 0xe63d, 0xeca0, 0x42e, 0xfcdd, 0x4dd2, 0x1, 0x0);
        gbc.writeMem(0x589f, { 0xdf });
        gbc.writeMem(0xe63b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xe63b);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe63b), 0xa0);
        EXPECT(gbc.readMem(0xe63c), 0x58);
        // DF 013C
        gbc.setState(0x9043, 0xd59f, 0x2ba0, 0xdf6d, 0xa602, 0x3011, 0x1, 0x0);
        gbc.writeMem(0x9043, { 0xdf });
        gbc.writeMem(0xd59d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xd59d);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9043), 0xdf);
        EXPECT(gbc.readMem(0xd59d), 0x44);
        EXPECT(gbc.readMem(0xd59e), 0x90);
        // DF 013E
        gbc.setState(0xedc7, 0x991c, 0x6dd0, 0x3c72, 0x7170, 0x1bd9, 0x1, 0x1);
        gbc.writeMem(0x991a, { 0x0, 0x0 });
        gbc.writeMem(0xedc7, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x991a);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x991a), 0xc8);
        EXPECT(gbc.readMem(0x991b), 0xed);
        EXPECT(gbc.readMem(0xedc7), 0xdf);
        // DF 013F
        gbc.setState(0xc8a3, 0xdb2b, 0x9fe0, 0xb831, 0x7858, 0x41be, 0x0, 0x1);
        gbc.writeMem(0xc8a3, { 0xdf });
        gbc.writeMem(0xdb29, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xdb29);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8a3), 0xdf);
        EXPECT(gbc.readMem(0xdb29), 0xa4);
        EXPECT(gbc.readMem(0xdb2a), 0xc8);
        // DF 0140
        gbc.setState(0x84aa, 0xe31a, 0x5e60, 0x7acd, 0x7791, 0x7f24, 0x1, 0x0);
        gbc.writeMem(0x84aa, { 0xdf });
        gbc.writeMem(0xe318, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xe318);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84aa), 0xdf);
        EXPECT(gbc.readMem(0xe318), 0xab);
        EXPECT(gbc.readMem(0xe319), 0x84);
        // DF 0141
        gbc.setState(0x3b9a, 0x864d, 0xfd70, 0xadde, 0xb128, 0x95fb, 0x0, 0x1);
        gbc.writeMem(0x3b9a, { 0xdf });
        gbc.writeMem(0x864b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x864b);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x864b), 0x9b);
        EXPECT(gbc.readMem(0x864c), 0x3b);
        // DF 0143
        gbc.setState(0xbc5a, 0xf0a5, 0xa240, 0x109a, 0x5ca1, 0x3f4f, 0x1, 0x1);
        gbc.writeMem(0xbc5a, { 0xdf });
        gbc.writeMem(0xf0a3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xf0a3);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc5a), 0xdf);
        EXPECT(gbc.readMem(0xf0a3), 0x5b);
        EXPECT(gbc.readMem(0xf0a4), 0xbc);
        // DF 0148
        gbc.setState(0xe466, 0x8f32, 0xb4b0, 0x97c4, 0xd308, 0xde09, 0x1, 0x0);
        gbc.writeMem(0x8f30, { 0x0, 0x0 });
        gbc.writeMem(0xe466, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x8f30);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f30), 0x67);
        EXPECT(gbc.readMem(0x8f31), 0xe4);
        EXPECT(gbc.readMem(0xe466), 0xdf);
        // DF 0149
        gbc.setState(0xec8a, 0xec59, 0x8600, 0xc8b3, 0x4139, 0xc3cb, 0x1, 0x0);
        gbc.writeMem(0xec57, { 0x0, 0x0 });
        gbc.writeMem(0xec8a, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xec57);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec57), 0x8b);
        EXPECT(gbc.readMem(0xec58), 0xec);
        EXPECT(gbc.readMem(0xec8a), 0xdf);
        // DF 014A
        gbc.setState(0xa2ae, 0x9756, 0x40f0, 0x8e82, 0xb7ab, 0x565a, 0x0, 0x1);
        gbc.writeMem(0x9754, { 0x0, 0x0 });
        gbc.writeMem(0xa2ae, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x9754);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9754), 0xaf);
        EXPECT(gbc.readMem(0x9755), 0xa2);
        EXPECT(gbc.readMem(0xa2ae), 0xdf);
        // DF 014B
        gbc.setState(0xe578, 0xcc46, 0x7c70, 0x1d5a, 0x1fce, 0x2010, 0x1, 0x0);
        gbc.writeMem(0xcc44, { 0x0, 0x0 });
        gbc.writeMem(0xe578, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xcc44);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc44), 0x79);
        EXPECT(gbc.readMem(0xcc45), 0xe5);
        EXPECT(gbc.readMem(0xe578), 0xdf);
        // DF 014D
        gbc.setState(0x85b4, 0xe8b4, 0x1a70, 0xf58a, 0x88be, 0x70d7, 0x0, 0x0);
        gbc.writeMem(0x85b4, { 0xdf });
        gbc.writeMem(0xe8b2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xe8b2);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85b4), 0xdf);
        EXPECT(gbc.readMem(0xe8b2), 0xb5);
        EXPECT(gbc.readMem(0xe8b3), 0x85);
        // DF 014E
        gbc.setState(0x7689, 0xf525, 0xad00, 0x9ed8, 0xaf74, 0xe3bd, 0x0, 0x0);
        gbc.writeMem(0x7689, { 0xdf });
        gbc.writeMem(0xf523, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xf523);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf523), 0x8a);
        EXPECT(gbc.readMem(0xf524), 0x76);
        // DF 0153
        gbc.setState(0x7f87, 0xac25, 0xe470, 0x6a04, 0xbab6, 0x7080, 0x0, 0x1);
        gbc.writeMem(0x7f87, { 0xdf });
        gbc.writeMem(0xac23, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xac23);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac23), 0x88);
        EXPECT(gbc.readMem(0xac24), 0x7f);
        // DF 0155
        gbc.setState(0x34e2, 0xaddd, 0xa340, 0x5bbe, 0x25b7, 0xe215, 0x0, 0x0);
        gbc.writeMem(0x34e2, { 0xdf });
        gbc.writeMem(0xaddb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xaddb);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaddb), 0xe3);
        EXPECT(gbc.readMem(0xaddc), 0x34);
        // DF 015B
        gbc.setState(0x7492, 0xcf9b, 0x67d0, 0x642a, 0x6761, 0xe252, 0x0, 0x0);
        gbc.writeMem(0x7492, { 0xdf });
        gbc.writeMem(0xcf99, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xcf99);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf99), 0x93);
        EXPECT(gbc.readMem(0xcf9a), 0x74);
        // DF 015D
        gbc.setState(0x57f3, 0xfed5, 0x87e0, 0xdf58, 0x7008, 0xab6e, 0x0, 0x1);
        gbc.writeMem(0x57f3, { 0xdf });
        gbc.writeMem(0xfed3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xfed3);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfed3), 0xf4);
        EXPECT(gbc.readMem(0xfed4), 0x57);
        // DF 0160
        gbc.setState(0x215a, 0xa47c, 0xd1f0, 0xf917, 0xf571, 0x3473, 0x1, 0x1);
        gbc.writeMem(0x215a, { 0xdf });
        gbc.writeMem(0xa47a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xa47a);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa47a), 0x5b);
        EXPECT(gbc.readMem(0xa47b), 0x21);
        // DF 0162
        gbc.setState(0x7c12, 0xb843, 0xa610, 0x529e, 0x4d48, 0x4d75, 0x1, 0x0);
        gbc.writeMem(0x7c12, { 0xdf });
        gbc.writeMem(0xb841, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xb841);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb841), 0x13);
        EXPECT(gbc.readMem(0xb842), 0x7c);
        // DF 0166
        gbc.setState(0xe53a, 0xb3cf, 0x3400, 0x488, 0x3dd2, 0xb70c, 0x0, 0x0);
        gbc.writeMem(0xb3cd, { 0x0, 0x0 });
        gbc.writeMem(0xe53a, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xb3cd);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3cd), 0x3b);
        EXPECT(gbc.readMem(0xb3ce), 0xe5);
        EXPECT(gbc.readMem(0xe53a), 0xdf);
        // DF 0169
        gbc.setState(0x36c4, 0xe60b, 0x2f30, 0x26d9, 0x4131, 0x2af2, 0x1, 0x0);
        gbc.writeMem(0x36c4, { 0xdf });
        gbc.writeMem(0xe609, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xe609);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe609), 0xc5);
        EXPECT(gbc.readMem(0xe60a), 0x36);
        // DF 016A
        gbc.setState(0x24c3, 0xb0c0, 0x6280, 0xc28c, 0xbd6c, 0xbf7e, 0x1, 0x0);
        gbc.writeMem(0x24c3, { 0xdf });
        gbc.writeMem(0xb0be, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xb0be);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0be), 0xc4);
        EXPECT(gbc.readMem(0xb0bf), 0x24);
        // DF 016C
        gbc.setState(0x2af2, 0xe51b, 0xcb10, 0x1c5a, 0x781a, 0x6967, 0x0, 0x0);
        gbc.writeMem(0x2af2, { 0xdf });
        gbc.writeMem(0xe519, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xe519);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe519), 0xf3);
        EXPECT(gbc.readMem(0xe51a), 0x2a);
        // DF 016D
        gbc.setState(0xeb45, 0x9a23, 0xea90, 0x7d0c, 0x589d, 0xf3a3, 0x1, 0x0);
        gbc.writeMem(0x9a21, { 0x0, 0x0 });
        gbc.writeMem(0xeb45, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x9a21);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a21), 0x46);
        EXPECT(gbc.readMem(0x9a22), 0xeb);
        EXPECT(gbc.readMem(0xeb45), 0xdf);
        // DF 016F
        gbc.setState(0xc276, 0x8077, 0xb100, 0xa1ad, 0xa260, 0xebcd, 0x0, 0x0);
        gbc.writeMem(0x8075, { 0x0, 0x0 });
        gbc.writeMem(0xc276, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x8075);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8075), 0x77);
        EXPECT(gbc.readMem(0x8076), 0xc2);
        EXPECT(gbc.readMem(0xc276), 0xdf);
        // DF 0170
        gbc.setState(0xbe26, 0xd02d, 0xb120, 0xd621, 0x1c78, 0xe122, 0x0, 0x1);
        gbc.writeMem(0xbe26, { 0xdf });
        gbc.writeMem(0xd02b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xd02b);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe26), 0xdf);
        EXPECT(gbc.readMem(0xd02b), 0x27);
        EXPECT(gbc.readMem(0xd02c), 0xbe);
        // DF 0171
        gbc.setState(0x4296, 0xa6f2, 0xd510, 0x6fb5, 0xb836, 0x16e4, 0x1, 0x0);
        gbc.writeMem(0x4296, { 0xdf });
        gbc.writeMem(0xa6f0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xa6f0);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6f0), 0x97);
        EXPECT(gbc.readMem(0xa6f1), 0x42);
        // DF 0172
        gbc.setState(0xd466, 0xe8b3, 0x4650, 0xff43, 0xef51, 0x6790, 0x0, 0x0);
        gbc.writeMem(0xd466, { 0xdf });
        gbc.writeMem(0xe8b1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xe8b1);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd466), 0xdf);
        EXPECT(gbc.readMem(0xe8b1), 0x67);
        EXPECT(gbc.readMem(0xe8b2), 0xd4);
        // DF 0173
        gbc.setState(0xd624, 0xb8d8, 0xbaa0, 0xde78, 0x3cc5, 0x4a06, 0x1, 0x1);
        gbc.writeMem(0xb8d6, { 0x0, 0x0 });
        gbc.writeMem(0xd624, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xb8d6);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8d6), 0x25);
        EXPECT(gbc.readMem(0xb8d7), 0xd6);
        EXPECT(gbc.readMem(0xd624), 0xdf);
        // DF 0174
        gbc.setState(0xe96e, 0x82a1, 0xc4b0, 0x7ac7, 0x5e84, 0x6284, 0x0, 0x0);
        gbc.writeMem(0x829f, { 0x0, 0x0 });
        gbc.writeMem(0xe96e, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x829f);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x829f), 0x6f);
        EXPECT(gbc.readMem(0x82a0), 0xe9);
        EXPECT(gbc.readMem(0xe96e), 0xdf);
        // DF 0176
        gbc.setState(0xabc9, 0xd0ec, 0x24a0, 0x1279, 0xa007, 0x5070, 0x1, 0x0);
        gbc.writeMem(0xabc9, { 0xdf });
        gbc.writeMem(0xd0ea, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xd0ea);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabc9), 0xdf);
        EXPECT(gbc.readMem(0xd0ea), 0xca);
        EXPECT(gbc.readMem(0xd0eb), 0xab);
        // DF 0177
        gbc.setState(0xe48c, 0xac8b, 0x85a0, 0x795f, 0x1b22, 0x20c1, 0x1, 0x0);
        gbc.writeMem(0xac89, { 0x0, 0x0 });
        gbc.writeMem(0xe48c, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xac89);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac89), 0x8d);
        EXPECT(gbc.readMem(0xac8a), 0xe4);
        EXPECT(gbc.readMem(0xe48c), 0xdf);
        // DF 0179
        gbc.setState(0x5e3a, 0xae0a, 0x7d30, 0xaf, 0x1f8b, 0xc94b, 0x1, 0x0);
        gbc.writeMem(0x5e3a, { 0xdf });
        gbc.writeMem(0xae08, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xae08);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae08), 0x3b);
        EXPECT(gbc.readMem(0xae09), 0x5e);
        // DF 017B
        gbc.setState(0x9a9e, 0xfa3f, 0xc340, 0xae46, 0x4590, 0xd7f6, 0x0, 0x0);
        gbc.writeMem(0x9a9e, { 0xdf });
        gbc.writeMem(0xfa3d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xfa3d);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a9e), 0xdf);
        EXPECT(gbc.readMem(0xfa3d), 0x9f);
        EXPECT(gbc.readMem(0xfa3e), 0x9a);
        // DF 017D
        gbc.setState(0x671c, 0xdc72, 0x6e0, 0x7581, 0x30af, 0xe88d, 0x0, 0x1);
        gbc.writeMem(0x671c, { 0xdf });
        gbc.writeMem(0xdc70, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xdc70);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc70), 0x1d);
        EXPECT(gbc.readMem(0xdc71), 0x67);
        // DF 0180
        gbc.setState(0x6f40, 0xe6e9, 0xef10, 0x58fa, 0xed7f, 0x2533, 0x1, 0x0);
        gbc.writeMem(0x6f40, { 0xdf });
        gbc.writeMem(0xe6e7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xe6e7);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6e7), 0x41);
        EXPECT(gbc.readMem(0xe6e8), 0x6f);
        // DF 0181
        gbc.setState(0x399d, 0xb3b6, 0x2940, 0x603f, 0x404a, 0x4bd5, 0x1, 0x0);
        gbc.writeMem(0x399d, { 0xdf });
        gbc.writeMem(0xb3b4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xb3b4);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3b4), 0x9e);
        EXPECT(gbc.readMem(0xb3b5), 0x39);
        // DF 0182
        gbc.setState(0xcc78, 0xcf2b, 0x2890, 0x8cde, 0xd6bc, 0x2c29, 0x1, 0x1);
        gbc.writeMem(0xcc78, { 0xdf });
        gbc.writeMem(0xcf29, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xcf29);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc78), 0xdf);
        EXPECT(gbc.readMem(0xcf29), 0x79);
        EXPECT(gbc.readMem(0xcf2a), 0xcc);
        // DF 0185
        gbc.setState(0x4977, 0xc3d6, 0x39f0, 0x74d9, 0x237a, 0xc55c, 0x0, 0x0);
        gbc.writeMem(0x4977, { 0xdf });
        gbc.writeMem(0xc3d4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xc3d4);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3d4), 0x78);
        EXPECT(gbc.readMem(0xc3d5), 0x49);
        // DF 0187
        gbc.setState(0x6736, 0xcfcb, 0x1180, 0xaffe, 0x4a6f, 0x9ef, 0x1, 0x0);
        gbc.writeMem(0x6736, { 0xdf });
        gbc.writeMem(0xcfc9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xcfc9);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfc9), 0x37);
        EXPECT(gbc.readMem(0xcfca), 0x67);
        // DF 0189
        gbc.setState(0xafbb, 0xe1d9, 0xff30, 0x9c61, 0xee48, 0x1517, 0x1, 0x0);
        gbc.writeMem(0xafbb, { 0xdf });
        gbc.writeMem(0xe1d7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xe1d7);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafbb), 0xdf);
        EXPECT(gbc.readMem(0xe1d7), 0xbc);
        EXPECT(gbc.readMem(0xe1d8), 0xaf);
        // DF 018B
        gbc.setState(0x5972, 0xa375, 0xab40, 0x7fc1, 0xfd73, 0x9b40, 0x1, 0x1);
        gbc.writeMem(0x5972, { 0xdf });
        gbc.writeMem(0xa373, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xa373);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa373), 0x73);
        EXPECT(gbc.readMem(0xa374), 0x59);
        // DF 018C
        gbc.setState(0xb298, 0xbbc8, 0x5fe0, 0xf598, 0xe898, 0xf17d, 0x1, 0x0);
        gbc.writeMem(0xb298, { 0xdf });
        gbc.writeMem(0xbbc6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xbbc6);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb298), 0xdf);
        EXPECT(gbc.readMem(0xbbc6), 0x99);
        EXPECT(gbc.readMem(0xbbc7), 0xb2);
        // DF 018D
        gbc.setState(0xca0d, 0xb96b, 0x9120, 0xd38f, 0x4369, 0x158b, 0x1, 0x1);
        gbc.writeMem(0xb969, { 0x0, 0x0 });
        gbc.writeMem(0xca0d, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xb969);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb969), 0xe);
        EXPECT(gbc.readMem(0xb96a), 0xca);
        EXPECT(gbc.readMem(0xca0d), 0xdf);
        // DF 018F
        gbc.setState(0x2157, 0xcf90, 0xd980, 0x334c, 0xa933, 0x1ae5, 0x0, 0x0);
        gbc.writeMem(0x2157, { 0xdf });
        gbc.writeMem(0xcf8e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xcf8e);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf8e), 0x58);
        EXPECT(gbc.readMem(0xcf8f), 0x21);
        // DF 0191
        gbc.setState(0x6ff8, 0xf400, 0x5700, 0xfe52, 0x6b20, 0x1749, 0x0, 0x1);
        gbc.writeMem(0x6ff8, { 0xdf });
        gbc.writeMem(0xf3fe, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xf3fe);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf3fe), 0xf9);
        EXPECT(gbc.readMem(0xf3ff), 0x6f);
        // DF 0192
        gbc.setState(0x42ce, 0xd15e, 0x8f80, 0x5090, 0xddc2, 0x7b5b, 0x1, 0x1);
        gbc.writeMem(0x42ce, { 0xdf });
        gbc.writeMem(0xd15c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xd15c);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd15c), 0xcf);
        EXPECT(gbc.readMem(0xd15d), 0x42);
        // DF 0193
        gbc.setState(0x93d4, 0xded8, 0xce40, 0xb45, 0x3e44, 0x11b5, 0x1, 0x1);
        gbc.writeMem(0x93d4, { 0xdf });
        gbc.writeMem(0xded6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xded6);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93d4), 0xdf);
        EXPECT(gbc.readMem(0xded6), 0xd5);
        EXPECT(gbc.readMem(0xded7), 0x93);
        // DF 0194
        gbc.setState(0xe813, 0xc06c, 0x9d10, 0xab95, 0xb9a4, 0x61c8, 0x0, 0x1);
        gbc.writeMem(0xc06a, { 0x0, 0x0 });
        gbc.writeMem(0xe813, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xc06a);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc06a), 0x14);
        EXPECT(gbc.readMem(0xc06b), 0xe8);
        EXPECT(gbc.readMem(0xe813), 0xdf);
        // DF 0195
        gbc.setState(0xac4c, 0x8ce7, 0xd9d0, 0x4c8f, 0x1a96, 0x6e03, 0x1, 0x0);
        gbc.writeMem(0x8ce5, { 0x0, 0x0 });
        gbc.writeMem(0xac4c, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x8ce5);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ce5), 0x4d);
        EXPECT(gbc.readMem(0x8ce6), 0xac);
        EXPECT(gbc.readMem(0xac4c), 0xdf);
        // DF 0197
        gbc.setState(0x1ee3, 0x9c11, 0x7bf0, 0xbfc6, 0x22ae, 0xe5c8, 0x0, 0x1);
        gbc.writeMem(0x1ee3, { 0xdf });
        gbc.writeMem(0x9c0f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x9c0f);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c0f), 0xe4);
        EXPECT(gbc.readMem(0x9c10), 0x1e);
        // DF 0198
        gbc.setState(0xa922, 0x8f5c, 0xdc50, 0x3c9c, 0xdc85, 0x2788, 0x0, 0x0);
        gbc.writeMem(0x8f5a, { 0x0, 0x0 });
        gbc.writeMem(0xa922, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x8f5a);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f5a), 0x23);
        EXPECT(gbc.readMem(0x8f5b), 0xa9);
        EXPECT(gbc.readMem(0xa922), 0xdf);
        // DF 0199
        gbc.setState(0x60a7, 0xdfe4, 0x8d40, 0xbe2b, 0x438b, 0x9b0f, 0x1, 0x0);
        gbc.writeMem(0x60a7, { 0xdf });
        gbc.writeMem(0xdfe2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xdfe2);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfe2), 0xa8);
        EXPECT(gbc.readMem(0xdfe3), 0x60);
        // DF 019A
        gbc.setState(0x9056, 0x95fe, 0x6320, 0xd0cc, 0xf051, 0x2b85, 0x1, 0x0);
        gbc.writeMem(0x9056, { 0xdf });
        gbc.writeMem(0x95fc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x95fc);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9056), 0xdf);
        EXPECT(gbc.readMem(0x95fc), 0x57);
        EXPECT(gbc.readMem(0x95fd), 0x90);
        // DF 019B
        gbc.setState(0xb331, 0xec06, 0x5460, 0x380d, 0xf4dc, 0xa595, 0x1, 0x1);
        gbc.writeMem(0xb331, { 0xdf });
        gbc.writeMem(0xec04, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xec04);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb331), 0xdf);
        EXPECT(gbc.readMem(0xec04), 0x32);
        EXPECT(gbc.readMem(0xec05), 0xb3);
        // DF 019D
        gbc.setState(0x384c, 0x9994, 0x91b0, 0xb555, 0xa704, 0x6fe2, 0x1, 0x1);
        gbc.writeMem(0x384c, { 0xdf });
        gbc.writeMem(0x9992, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x9992);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9992), 0x4d);
        EXPECT(gbc.readMem(0x9993), 0x38);
        // DF 019E
        gbc.setState(0x8496, 0x81e0, 0x73d0, 0xdb6b, 0xabef, 0x9c70, 0x1, 0x1);
        gbc.writeMem(0x81de, { 0x0, 0x0 });
        gbc.writeMem(0x8496, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x81de);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81de), 0x97);
        EXPECT(gbc.readMem(0x81df), 0x84);
        EXPECT(gbc.readMem(0x8496), 0xdf);
        // DF 01A0
        gbc.setState(0x31ee, 0xc743, 0x4820, 0x6efa, 0x16d1, 0x2fcb, 0x1, 0x0);
        gbc.writeMem(0x31ee, { 0xdf });
        gbc.writeMem(0xc741, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xc741);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc741), 0xef);
        EXPECT(gbc.readMem(0xc742), 0x31);
        // DF 01A1
        gbc.setState(0x2b0d, 0xa816, 0x4a30, 0x497f, 0x3012, 0xa4de, 0x1, 0x0);
        gbc.writeMem(0x2b0d, { 0xdf });
        gbc.writeMem(0xa814, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xa814);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa814), 0xe);
        EXPECT(gbc.readMem(0xa815), 0x2b);
        // DF 01A5
        gbc.setState(0xd0, 0x8cfc, 0x1840, 0xf520, 0x1a3e, 0x7e65, 0x1, 0x0);
        gbc.writeMem(0xd0, { 0xdf });
        gbc.writeMem(0x8cfa, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x8cfa);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cfa), 0xd1);
        EXPECT(gbc.readMem(0x8cfb), 0x0);
        // DF 01A8
        gbc.setState(0x685c, 0xf42a, 0xf70, 0xe84d, 0x42ab, 0x6dad, 0x1, 0x0);
        gbc.writeMem(0x685c, { 0xdf });
        gbc.writeMem(0xf428, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xf428);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf428), 0x5d);
        EXPECT(gbc.readMem(0xf429), 0x68);
        // DF 01A9
        gbc.setState(0x36fc, 0xd3ab, 0x9460, 0xa207, 0xc052, 0x80a, 0x0, 0x0);
        gbc.writeMem(0x36fc, { 0xdf });
        gbc.writeMem(0xd3a9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xd3a9);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3a9), 0xfd);
        EXPECT(gbc.readMem(0xd3aa), 0x36);
        // DF 01AA
        gbc.setState(0x488d, 0xcf8a, 0x8d00, 0x8479, 0xd99e, 0x5513, 0x1, 0x1);
        gbc.writeMem(0x488d, { 0xdf });
        gbc.writeMem(0xcf88, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xcf88);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf88), 0x8e);
        EXPECT(gbc.readMem(0xcf89), 0x48);
        // DF 01AB
        gbc.setState(0x2737, 0x8af4, 0x8520, 0xbf1d, 0x949b, 0x985, 0x0, 0x1);
        gbc.writeMem(0x2737, { 0xdf });
        gbc.writeMem(0x8af2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x8af2);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8af2), 0x38);
        EXPECT(gbc.readMem(0x8af3), 0x27);
        // DF 01AC
        gbc.setState(0x4a02, 0xa63e, 0x96d0, 0xbb0e, 0xb2cb, 0x9361, 0x1, 0x0);
        gbc.writeMem(0x4a02, { 0xdf });
        gbc.writeMem(0xa63c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xa63c);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa63c), 0x3);
        EXPECT(gbc.readMem(0xa63d), 0x4a);
        // DF 01AD
        gbc.setState(0x7667, 0x943c, 0xda00, 0x23c8, 0x7f69, 0x63c0, 0x0, 0x1);
        gbc.writeMem(0x7667, { 0xdf });
        gbc.writeMem(0x943a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x943a);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x943a), 0x68);
        EXPECT(gbc.readMem(0x943b), 0x76);
        // DF 01AF
        gbc.setState(0x865a, 0x9929, 0x480, 0xc5c6, 0xa89e, 0xf4b6, 0x1, 0x1);
        gbc.writeMem(0x865a, { 0xdf });
        gbc.writeMem(0x9927, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x9927);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x865a), 0xdf);
        EXPECT(gbc.readMem(0x9927), 0x5b);
        EXPECT(gbc.readMem(0x9928), 0x86);
        // DF 01B0
        gbc.setState(0x19a3, 0xdb56, 0xcbb0, 0xcae7, 0x5577, 0x62c2, 0x1, 0x1);
        gbc.writeMem(0x19a3, { 0xdf });
        gbc.writeMem(0xdb54, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xdb54);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb54), 0xa4);
        EXPECT(gbc.readMem(0xdb55), 0x19);
        // DF 01B4
        gbc.setState(0x3575, 0x9f56, 0xd900, 0x975a, 0x4f52, 0x5c37, 0x0, 0x0);
        gbc.writeMem(0x3575, { 0xdf });
        gbc.writeMem(0x9f54, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x9f54);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f54), 0x76);
        EXPECT(gbc.readMem(0x9f55), 0x35);
        // DF 01B7
        gbc.setState(0xe36a, 0xc219, 0x31e0, 0xd513, 0x37c4, 0x58c4, 0x1, 0x1);
        gbc.writeMem(0xc217, { 0x0, 0x0 });
        gbc.writeMem(0xe36a, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xc217);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc217), 0x6b);
        EXPECT(gbc.readMem(0xc218), 0xe3);
        EXPECT(gbc.readMem(0xe36a), 0xdf);
        // DF 01B8
        gbc.setState(0xdb1, 0xa312, 0x1bb0, 0x8997, 0x50db, 0x67ca, 0x1, 0x0);
        gbc.writeMem(0xdb1, { 0xdf });
        gbc.writeMem(0xa310, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xa310);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa310), 0xb2);
        EXPECT(gbc.readMem(0xa311), 0xd);
        // DF 01BB
        gbc.setState(0x8c49, 0x8429, 0x1020, 0x145, 0xd2b3, 0xa903, 0x1, 0x0);
        gbc.writeMem(0x8427, { 0x0, 0x0 });
        gbc.writeMem(0x8c49, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x8427);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8427), 0x4a);
        EXPECT(gbc.readMem(0x8428), 0x8c);
        EXPECT(gbc.readMem(0x8c49), 0xdf);
        // DF 01BD
        gbc.setState(0x6d0, 0xc504, 0xd1a0, 0xf0c8, 0x37ba, 0x723a, 0x0, 0x1);
        gbc.writeMem(0x6d0, { 0xdf });
        gbc.writeMem(0xc502, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xc502);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc502), 0xd1);
        EXPECT(gbc.readMem(0xc503), 0x6);
        // DF 01C0
        gbc.setState(0x5649, 0x9c5f, 0x9580, 0xb5a8, 0x56d3, 0x2741, 0x1, 0x1);
        gbc.writeMem(0x5649, { 0xdf });
        gbc.writeMem(0x9c5d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x9c5d);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c5d), 0x4a);
        EXPECT(gbc.readMem(0x9c5e), 0x56);
        // DF 01C1
        gbc.setState(0x3575, 0xa4f8, 0x47b0, 0xd8f2, 0xf1b8, 0x8377, 0x1, 0x0);
        gbc.writeMem(0x3575, { 0xdf });
        gbc.writeMem(0xa4f6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xa4f6);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4f6), 0x76);
        EXPECT(gbc.readMem(0xa4f7), 0x35);
        // DF 01C3
        gbc.setState(0xe176, 0x9054, 0x41d0, 0xc725, 0x8618, 0x9743, 0x1, 0x0);
        gbc.writeMem(0x9052, { 0x0, 0x0 });
        gbc.writeMem(0xe176, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x9052);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9052), 0x77);
        EXPECT(gbc.readMem(0x9053), 0xe1);
        EXPECT(gbc.readMem(0xe176), 0xdf);
        // DF 01C5
        gbc.setState(0xd3cd, 0xe1d9, 0xc190, 0x2485, 0x4d1e, 0x18aa, 0x1, 0x0);
        gbc.writeMem(0xd3cd, { 0xdf });
        gbc.writeMem(0xe1d7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xe1d7);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3cd), 0xdf);
        EXPECT(gbc.readMem(0xe1d7), 0xce);
        EXPECT(gbc.readMem(0xe1d8), 0xd3);
        // DF 01C6
        gbc.setState(0xe563, 0xb58f, 0xc680, 0x516f, 0xa220, 0xd1fb, 0x1, 0x1);
        gbc.writeMem(0xb58d, { 0x0, 0x0 });
        gbc.writeMem(0xe563, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xb58d);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb58d), 0x64);
        EXPECT(gbc.readMem(0xb58e), 0xe5);
        EXPECT(gbc.readMem(0xe563), 0xdf);
        // DF 01CD
        gbc.setState(0xe6ef, 0xfc54, 0xfa70, 0xe0c2, 0x5177, 0x1a59, 0x0, 0x1);
        gbc.writeMem(0xe6ef, { 0xdf });
        gbc.writeMem(0xfc52, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xfc52);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6ef), 0xdf);
        EXPECT(gbc.readMem(0xfc52), 0xf0);
        EXPECT(gbc.readMem(0xfc53), 0xe6);
        // DF 01D2
        gbc.setState(0xeb0, 0xb1b4, 0x7a20, 0x23a1, 0xa668, 0x5954, 0x0, 0x0);
        gbc.writeMem(0xeb0, { 0xdf });
        gbc.writeMem(0xb1b2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xb1b2);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1b2), 0xb1);
        EXPECT(gbc.readMem(0xb1b3), 0xe);
        // DF 01D5
        gbc.setState(0x6d9a, 0x8134, 0xe370, 0x61df, 0x5cd3, 0x4557, 0x1, 0x0);
        gbc.writeMem(0x6d9a, { 0xdf });
        gbc.writeMem(0x8132, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x8132);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8132), 0x9b);
        EXPECT(gbc.readMem(0x8133), 0x6d);
        // DF 01D6
        gbc.setState(0x599f, 0xb142, 0xa7f0, 0xa882, 0xf144, 0x3959, 0x1, 0x0);
        gbc.writeMem(0x599f, { 0xdf });
        gbc.writeMem(0xb140, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xb140);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb140), 0xa0);
        EXPECT(gbc.readMem(0xb141), 0x59);
        // DF 01D9
        gbc.setState(0xac91, 0x88ef, 0x1fa0, 0x1a93, 0x7905, 0x83dc, 0x0, 0x0);
        gbc.writeMem(0x88ed, { 0x0, 0x0 });
        gbc.writeMem(0xac91, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x88ed);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88ed), 0x92);
        EXPECT(gbc.readMem(0x88ee), 0xac);
        EXPECT(gbc.readMem(0xac91), 0xdf);
        // DF 01DB
        gbc.setState(0xb3a8, 0xc238, 0xe3f0, 0x83d4, 0xf4f3, 0xe3a6, 0x1, 0x0);
        gbc.writeMem(0xb3a8, { 0xdf });
        gbc.writeMem(0xc236, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xc236);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3a8), 0xdf);
        EXPECT(gbc.readMem(0xc236), 0xa9);
        EXPECT(gbc.readMem(0xc237), 0xb3);
        // DF 01E0
        gbc.setState(0xc409, 0xb4cf, 0xd560, 0xd983, 0x187, 0xe318, 0x0, 0x0);
        gbc.writeMem(0xb4cd, { 0x0, 0x0 });
        gbc.writeMem(0xc409, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xb4cd);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4cd), 0xa);
        EXPECT(gbc.readMem(0xb4ce), 0xc4);
        EXPECT(gbc.readMem(0xc409), 0xdf);
        // DF 01E1
        gbc.setState(0xb275, 0xd999, 0x3640, 0x669d, 0x1d62, 0x15c0, 0x0, 0x1);
        gbc.writeMem(0xb275, { 0xdf });
        gbc.writeMem(0xd997, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xd997);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb275), 0xdf);
        EXPECT(gbc.readMem(0xd997), 0x76);
        EXPECT(gbc.readMem(0xd998), 0xb2);
        // DF 01E2
        gbc.setState(0x603, 0x894d, 0x48b0, 0xfbef, 0x1df, 0x1795, 0x1, 0x1);
        gbc.writeMem(0x603, { 0xdf });
        gbc.writeMem(0x894b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x894b);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x894b), 0x4);
        EXPECT(gbc.readMem(0x894c), 0x6);
        // DF 01E3
        gbc.setState(0x5d63, 0xe374, 0xb8b0, 0xf37b, 0x641, 0x4e9a, 0x1, 0x0);
        gbc.writeMem(0x5d63, { 0xdf });
        gbc.writeMem(0xe372, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xe372);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe372), 0x64);
        EXPECT(gbc.readMem(0xe373), 0x5d);
        // DF 01E4
        gbc.setState(0xe9e2, 0xc172, 0x94b0, 0x9567, 0xd655, 0xf28a, 0x1, 0x1);
        gbc.writeMem(0xc170, { 0x0, 0x0 });
        gbc.writeMem(0xe9e2, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xc170);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc170), 0xe3);
        EXPECT(gbc.readMem(0xc171), 0xe9);
        EXPECT(gbc.readMem(0xe9e2), 0xdf);
        // DF 01E5
        gbc.setState(0x245b, 0xcc94, 0xc850, 0x7d24, 0x6079, 0xaaef, 0x1, 0x1);
        gbc.writeMem(0x245b, { 0xdf });
        gbc.writeMem(0xcc92, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xcc92);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc92), 0x5c);
        EXPECT(gbc.readMem(0xcc93), 0x24);
        // DF 01E6
        gbc.setState(0x6fe8, 0xe843, 0xbbf0, 0xa8d0, 0x287a, 0xa7f6, 0x1, 0x0);
        gbc.writeMem(0x6fe8, { 0xdf });
        gbc.writeMem(0xe841, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xe841);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe841), 0xe9);
        EXPECT(gbc.readMem(0xe842), 0x6f);
        // DF 01E9
        gbc.setState(0x6fc7, 0xadcb, 0x3480, 0xf7df, 0x48f3, 0xf5e9, 0x0, 0x1);
        gbc.writeMem(0x6fc7, { 0xdf });
        gbc.writeMem(0xadc9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xadc9);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadc9), 0xc8);
        EXPECT(gbc.readMem(0xadca), 0x6f);
        // DF 01EB
        gbc.setState(0x1f29, 0xd200, 0x9620, 0x907e, 0x9aa6, 0x3e2, 0x0, 0x0);
        gbc.writeMem(0x1f29, { 0xdf });
        gbc.writeMem(0xd1fe, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xd1fe);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1fe), 0x2a);
        EXPECT(gbc.readMem(0xd1ff), 0x1f);
        // DF 01ED
        gbc.setState(0x7ab, 0xfd9a, 0xbb40, 0xff44, 0xbdc3, 0x65b2, 0x0, 0x1);
        gbc.writeMem(0x7ab, { 0xdf });
        gbc.writeMem(0xfd98, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xfd98);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfd98), 0xac);
        EXPECT(gbc.readMem(0xfd99), 0x7);
        // DF 01EE
        gbc.setState(0xc087, 0xcef4, 0x3410, 0xc173, 0xdead, 0x7569, 0x0, 0x0);
        gbc.writeMem(0xc087, { 0xdf });
        gbc.writeMem(0xcef2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xcef2);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc087), 0xdf);
        EXPECT(gbc.readMem(0xcef2), 0x88);
        EXPECT(gbc.readMem(0xcef3), 0xc0);
        // DF 01EF
        gbc.setState(0xb902, 0x9e84, 0x7730, 0x7714, 0xd34e, 0x6ef2, 0x1, 0x1);
        gbc.writeMem(0x9e82, { 0x0, 0x0 });
        gbc.writeMem(0xb902, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x9e82);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e82), 0x3);
        EXPECT(gbc.readMem(0x9e83), 0xb9);
        EXPECT(gbc.readMem(0xb902), 0xdf);
        // DF 01F3
        gbc.setState(0xb1e4, 0xeb6e, 0xaae0, 0xddd9, 0x36b9, 0x86ed, 0x1, 0x0);
        gbc.writeMem(0xb1e4, { 0xdf });
        gbc.writeMem(0xeb6c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xeb6c);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1e4), 0xdf);
        EXPECT(gbc.readMem(0xeb6c), 0xe5);
        EXPECT(gbc.readMem(0xeb6d), 0xb1);
        // DF 01F5
        gbc.setState(0x95c7, 0xeab7, 0xaa20, 0x85fa, 0xa718, 0xc1af, 0x0, 0x1);
        gbc.writeMem(0x95c7, { 0xdf });
        gbc.writeMem(0xeab5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xeab5);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95c7), 0xdf);
        EXPECT(gbc.readMem(0xeab5), 0xc8);
        EXPECT(gbc.readMem(0xeab6), 0x95);
        // DF 01F6
        gbc.setState(0x4eb9, 0xaec4, 0x81a0, 0x4a9a, 0x20c7, 0x8dce, 0x0, 0x1);
        gbc.writeMem(0x4eb9, { 0xdf });
        gbc.writeMem(0xaec2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xaec2);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaec2), 0xba);
        EXPECT(gbc.readMem(0xaec3), 0x4e);
        // DF 01F7
        gbc.setState(0xd662, 0x9b64, 0xfb20, 0x7daa, 0xca75, 0x7844, 0x1, 0x0);
        gbc.writeMem(0x9b62, { 0x0, 0x0 });
        gbc.writeMem(0xd662, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x9b62);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b62), 0x63);
        EXPECT(gbc.readMem(0x9b63), 0xd6);
        EXPECT(gbc.readMem(0xd662), 0xdf);
        // DF 01F8
        gbc.setState(0xa9bd, 0xa07d, 0x5a80, 0xfbe2, 0xf48c, 0xfd0d, 0x0, 0x0);
        gbc.writeMem(0xa07b, { 0x0, 0x0 });
        gbc.writeMem(0xa9bd, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xa07b);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa07b), 0xbe);
        EXPECT(gbc.readMem(0xa07c), 0xa9);
        EXPECT(gbc.readMem(0xa9bd), 0xdf);
        // DF 01FA
        gbc.setState(0x20f, 0x9840, 0xd670, 0xa757, 0xb7fc, 0x45fa, 0x1, 0x1);
        gbc.writeMem(0x20f, { 0xdf });
        gbc.writeMem(0x983e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x983e);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x983e), 0x10);
        EXPECT(gbc.readMem(0x983f), 0x2);
        // DF 0200
        gbc.setState(0xb308, 0xa562, 0xd5c0, 0x470, 0xc54e, 0xc83f, 0x1, 0x0);
        gbc.writeMem(0xa560, { 0x0, 0x0 });
        gbc.writeMem(0xb308, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xa560);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa560), 0x9);
        EXPECT(gbc.readMem(0xa561), 0xb3);
        EXPECT(gbc.readMem(0xb308), 0xdf);
        // DF 0201
        gbc.setState(0xcebb, 0x9ad2, 0x7ce0, 0x2a53, 0xff53, 0xbe98, 0x1, 0x1);
        gbc.writeMem(0x9ad0, { 0x0, 0x0 });
        gbc.writeMem(0xcebb, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x9ad0);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ad0), 0xbc);
        EXPECT(gbc.readMem(0x9ad1), 0xce);
        EXPECT(gbc.readMem(0xcebb), 0xdf);
        // DF 0202
        gbc.setState(0xaaaa, 0xb39a, 0xdbc0, 0x64e1, 0xec94, 0xf9cf, 0x1, 0x0);
        gbc.writeMem(0xaaaa, { 0xdf });
        gbc.writeMem(0xb398, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xb398);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaaaa), 0xdf);
        EXPECT(gbc.readMem(0xb398), 0xab);
        EXPECT(gbc.readMem(0xb399), 0xaa);
        // DF 0208
        gbc.setState(0x70da, 0xfda6, 0xd510, 0x70bf, 0x8391, 0x1ca0, 0x1, 0x0);
        gbc.writeMem(0x70da, { 0xdf });
        gbc.writeMem(0xfda4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xfda4);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfda4), 0xdb);
        EXPECT(gbc.readMem(0xfda5), 0x70);
        // DF 020B
        gbc.setState(0xc1ce, 0xc8a5, 0x8bc0, 0xad72, 0x851c, 0xd9d1, 0x0, 0x1);
        gbc.writeMem(0xc1ce, { 0xdf });
        gbc.writeMem(0xc8a3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xc8a3);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1ce), 0xdf);
        EXPECT(gbc.readMem(0xc8a3), 0xcf);
        EXPECT(gbc.readMem(0xc8a4), 0xc1);
        // DF 020C
        gbc.setState(0x24f6, 0x856a, 0x26d0, 0xc29, 0x6e89, 0x1e43, 0x1, 0x0);
        gbc.writeMem(0x24f6, { 0xdf });
        gbc.writeMem(0x8568, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x8568);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8568), 0xf7);
        EXPECT(gbc.readMem(0x8569), 0x24);
        // DF 020D
        gbc.setState(0x621c, 0xb198, 0x3020, 0x70b4, 0x92c7, 0x3d6c, 0x0, 0x1);
        gbc.writeMem(0x621c, { 0xdf });
        gbc.writeMem(0xb196, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xb196);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb196), 0x1d);
        EXPECT(gbc.readMem(0xb197), 0x62);
        // DF 020E
        gbc.setState(0x8840, 0x8ec8, 0x7dc0, 0x4614, 0xc170, 0x5275, 0x0, 0x0);
        gbc.writeMem(0x8840, { 0xdf });
        gbc.writeMem(0x8ec6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x8ec6);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8840), 0xdf);
        EXPECT(gbc.readMem(0x8ec6), 0x41);
        EXPECT(gbc.readMem(0x8ec7), 0x88);
        // DF 020F
        gbc.setState(0xdcdb, 0xb09e, 0x3aa0, 0xbacc, 0x2e42, 0x4012, 0x1, 0x0);
        gbc.writeMem(0xb09c, { 0x0, 0x0 });
        gbc.writeMem(0xdcdb, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xb09c);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb09c), 0xdc);
        EXPECT(gbc.readMem(0xb09d), 0xdc);
        EXPECT(gbc.readMem(0xdcdb), 0xdf);
        // DF 0210
        gbc.setState(0x6629, 0xfe89, 0x2500, 0x8812, 0xd03a, 0x5c95, 0x1, 0x0);
        gbc.writeMem(0x6629, { 0xdf });
        gbc.writeMem(0xfe87, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xfe87);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfe87), 0x2a);
        EXPECT(gbc.readMem(0xfe88), 0x66);
        // DF 0211
        gbc.setState(0xbd0d, 0xff26, 0x5680, 0x577c, 0x8104, 0xd427, 0x1, 0x1);
        gbc.writeMem(0xbd0d, { 0xdf });
        gbc.writeMem(0xff24, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xff24);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd0d), 0xdf);
        EXPECT(gbc.readMem(0xff24), 0xe);
        EXPECT(gbc.readMem(0xff25), 0xbd);
        // DF 0214
        gbc.setState(0xba4, 0xa04b, 0x9630, 0xdd4e, 0x8c23, 0xf909, 0x1, 0x1);
        gbc.writeMem(0xba4, { 0xdf });
        gbc.writeMem(0xa049, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xa049);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa049), 0xa5);
        EXPECT(gbc.readMem(0xa04a), 0xb);
        // DF 0217
        gbc.setState(0xbc70, 0xad90, 0x88f0, 0x63de, 0x4260, 0x7e6, 0x1, 0x0);
        gbc.writeMem(0xad8e, { 0x0, 0x0 });
        gbc.writeMem(0xbc70, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xad8e);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad8e), 0x71);
        EXPECT(gbc.readMem(0xad8f), 0xbc);
        EXPECT(gbc.readMem(0xbc70), 0xdf);
        // DF 0218
        gbc.setState(0x9fe6, 0xc0f2, 0xaaa0, 0xf3c4, 0xfbc1, 0xaaca, 0x1, 0x1);
        gbc.writeMem(0x9fe6, { 0xdf });
        gbc.writeMem(0xc0f0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xc0f0);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fe6), 0xdf);
        EXPECT(gbc.readMem(0xc0f0), 0xe7);
        EXPECT(gbc.readMem(0xc0f1), 0x9f);
        // DF 021D
        gbc.setState(0x5176, 0x91b2, 0xfa60, 0x370e, 0xf9f2, 0x6e2d, 0x0, 0x1);
        gbc.writeMem(0x5176, { 0xdf });
        gbc.writeMem(0x91b0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x91b0);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91b0), 0x77);
        EXPECT(gbc.readMem(0x91b1), 0x51);
        // DF 021E
        gbc.setState(0x2470, 0xfb99, 0x5110, 0x88e7, 0x978c, 0x1582, 0x0, 0x0);
        gbc.writeMem(0x2470, { 0xdf });
        gbc.writeMem(0xfb97, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xfb97);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfb97), 0x71);
        EXPECT(gbc.readMem(0xfb98), 0x24);
        // DF 021F
        gbc.setState(0x3b0, 0xc51f, 0xd380, 0xdd28, 0xaaf8, 0xee17, 0x1, 0x0);
        gbc.writeMem(0x3b0, { 0xdf });
        gbc.writeMem(0xc51d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xc51d);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc51d), 0xb1);
        EXPECT(gbc.readMem(0xc51e), 0x3);
        // DF 0220
        gbc.setState(0x7b18, 0xe806, 0x3e20, 0x7902, 0x29b3, 0x68b5, 0x1, 0x0);
        gbc.writeMem(0x7b18, { 0xdf });
        gbc.writeMem(0xe804, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xe804);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe804), 0x19);
        EXPECT(gbc.readMem(0xe805), 0x7b);
        // DF 0221
        gbc.setState(0x15e4, 0xd6db, 0x3620, 0x8cc8, 0x474e, 0x1a4e, 0x0, 0x1);
        gbc.writeMem(0x15e4, { 0xdf });
        gbc.writeMem(0xd6d9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xd6d9);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6d9), 0xe5);
        EXPECT(gbc.readMem(0xd6da), 0x15);
        // DF 0222
        gbc.setState(0x50c9, 0xaafb, 0xfdd0, 0x5da2, 0xe589, 0x2efb, 0x1, 0x0);
        gbc.writeMem(0x50c9, { 0xdf });
        gbc.writeMem(0xaaf9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xaaf9);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaaf9), 0xca);
        EXPECT(gbc.readMem(0xaafa), 0x50);
        // DF 0223
        gbc.setState(0x3b19, 0x822b, 0xda30, 0x1b04, 0x1d61, 0xb7c1, 0x0, 0x0);
        gbc.writeMem(0x3b19, { 0xdf });
        gbc.writeMem(0x8229, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x8229);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8229), 0x1a);
        EXPECT(gbc.readMem(0x822a), 0x3b);
        // DF 0224
        gbc.setState(0xd54e, 0xf150, 0xcd30, 0x8d25, 0xfed3, 0x4fd3, 0x1, 0x1);
        gbc.writeMem(0xd54e, { 0xdf });
        gbc.writeMem(0xf14e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xf14e);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd54e), 0xdf);
        EXPECT(gbc.readMem(0xf14e), 0x4f);
        EXPECT(gbc.readMem(0xf14f), 0xd5);
        // DF 0225
        gbc.setState(0x8a0d, 0xc011, 0xb40, 0xbb86, 0x4dec, 0xf1f2, 0x0, 0x1);
        gbc.writeMem(0x8a0d, { 0xdf });
        gbc.writeMem(0xc00f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xc00f);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a0d), 0xdf);
        EXPECT(gbc.readMem(0xc00f), 0xe);
        EXPECT(gbc.readMem(0xc010), 0x8a);
        // DF 0226
        gbc.setState(0xe365, 0x9a21, 0x9e50, 0x7f43, 0xd70b, 0xa307, 0x1, 0x0);
        gbc.writeMem(0x9a1f, { 0x0, 0x0 });
        gbc.writeMem(0xe365, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x9a1f);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a1f), 0x66);
        EXPECT(gbc.readMem(0x9a20), 0xe3);
        EXPECT(gbc.readMem(0xe365), 0xdf);
        // DF 0227
        gbc.setState(0xe4c, 0x8daa, 0x26d0, 0xdf6d, 0xc26a, 0xed3f, 0x0, 0x0);
        gbc.writeMem(0xe4c, { 0xdf });
        gbc.writeMem(0x8da8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x8da8);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8da8), 0x4d);
        EXPECT(gbc.readMem(0x8da9), 0xe);
        // DF 0229
        gbc.setState(0x7f6b, 0xe012, 0xf8e0, 0x3efe, 0x2afd, 0x5e6a, 0x0, 0x1);
        gbc.writeMem(0x7f6b, { 0xdf });
        gbc.writeMem(0xe010, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xe010);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe010), 0x6c);
        EXPECT(gbc.readMem(0xe011), 0x7f);
        // DF 022C
        gbc.setState(0x86c5, 0x8864, 0xd5a0, 0x1c98, 0x1120, 0x5379, 0x0, 0x0);
        gbc.writeMem(0x86c5, { 0xdf });
        gbc.writeMem(0x8862, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x8862);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86c5), 0xdf);
        EXPECT(gbc.readMem(0x8862), 0xc6);
        EXPECT(gbc.readMem(0x8863), 0x86);
        // DF 022D
        gbc.setState(0x65f6, 0xe3df, 0xf9c0, 0x1735, 0x4d2d, 0xb398, 0x1, 0x1);
        gbc.writeMem(0x65f6, { 0xdf });
        gbc.writeMem(0xe3dd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xe3dd);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3dd), 0xf7);
        EXPECT(gbc.readMem(0xe3de), 0x65);
        // DF 0230
        gbc.setState(0xb347, 0xbcf6, 0x64b0, 0x33d6, 0x659d, 0x7eee, 0x0, 0x0);
        gbc.writeMem(0xb347, { 0xdf });
        gbc.writeMem(0xbcf4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xbcf4);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb347), 0xdf);
        EXPECT(gbc.readMem(0xbcf4), 0x48);
        EXPECT(gbc.readMem(0xbcf5), 0xb3);
        // DF 0236
        gbc.setState(0x81bf, 0xbf3a, 0x8240, 0x1d44, 0x8be8, 0x7448, 0x1, 0x0);
        gbc.writeMem(0x81bf, { 0xdf });
        gbc.writeMem(0xbf38, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xbf38);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81bf), 0xdf);
        EXPECT(gbc.readMem(0xbf38), 0xc0);
        EXPECT(gbc.readMem(0xbf39), 0x81);
        // DF 0237
        gbc.setState(0xca86, 0xe9cc, 0xb310, 0x8156, 0xfe58, 0x3870, 0x1, 0x0);
        gbc.writeMem(0xca86, { 0xdf });
        gbc.writeMem(0xe9ca, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xe9ca);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca86), 0xdf);
        EXPECT(gbc.readMem(0xe9ca), 0x87);
        EXPECT(gbc.readMem(0xe9cb), 0xca);
        // DF 023A
        gbc.setState(0x5df7, 0xbe59, 0xf1e0, 0xd57, 0xa9ef, 0x60c5, 0x0, 0x0);
        gbc.writeMem(0x5df7, { 0xdf });
        gbc.writeMem(0xbe57, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xbe57);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe57), 0xf8);
        EXPECT(gbc.readMem(0xbe58), 0x5d);
        // DF 023D
        gbc.setState(0xb45f, 0xda7b, 0xef20, 0xfbf2, 0xcf3f, 0x488e, 0x1, 0x0);
        gbc.writeMem(0xb45f, { 0xdf });
        gbc.writeMem(0xda79, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xda79);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb45f), 0xdf);
        EXPECT(gbc.readMem(0xda79), 0x60);
        EXPECT(gbc.readMem(0xda7a), 0xb4);
        // DF 023F
        gbc.setState(0xc54f, 0xd6ba, 0xeef0, 0x95b9, 0x7fe9, 0x57b0, 0x0, 0x0);
        gbc.writeMem(0xc54f, { 0xdf });
        gbc.writeMem(0xd6b8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xd6b8);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc54f), 0xdf);
        EXPECT(gbc.readMem(0xd6b8), 0x50);
        EXPECT(gbc.readMem(0xd6b9), 0xc5);
        // DF 0240
        gbc.setState(0x4388, 0xe1b4, 0xc810, 0x9eba, 0x9ff5, 0x97bf, 0x0, 0x1);
        gbc.writeMem(0x4388, { 0xdf });
        gbc.writeMem(0xe1b2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xe1b2);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1b2), 0x89);
        EXPECT(gbc.readMem(0xe1b3), 0x43);
        // DF 0241
        gbc.setState(0x118f, 0xa1f7, 0x38f0, 0x866, 0x85b6, 0x5094, 0x1, 0x1);
        gbc.writeMem(0x118f, { 0xdf });
        gbc.writeMem(0xa1f5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xa1f5);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1f5), 0x90);
        EXPECT(gbc.readMem(0xa1f6), 0x11);
        // DF 0245
        gbc.setState(0x5263, 0x80c9, 0x4010, 0x67a3, 0xdabc, 0x1fc0, 0x0, 0x1);
        gbc.writeMem(0x5263, { 0xdf });
        gbc.writeMem(0x80c7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x80c7);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80c7), 0x64);
        EXPECT(gbc.readMem(0x80c8), 0x52);
        // DF 0246
        gbc.setState(0x9d7a, 0xad46, 0xf520, 0x2b3f, 0x5ab3, 0xc35a, 0x1, 0x0);
        gbc.writeMem(0x9d7a, { 0xdf });
        gbc.writeMem(0xad44, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xad44);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d7a), 0xdf);
        EXPECT(gbc.readMem(0xad44), 0x7b);
        EXPECT(gbc.readMem(0xad45), 0x9d);
        // DF 0249
        gbc.setState(0xd26f, 0xd994, 0x4e0, 0xec48, 0x9518, 0x957b, 0x0, 0x1);
        gbc.writeMem(0xd26f, { 0xdf });
        gbc.writeMem(0xd992, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xd992);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd26f), 0xdf);
        EXPECT(gbc.readMem(0xd992), 0x70);
        EXPECT(gbc.readMem(0xd993), 0xd2);
        // DF 024A
        gbc.setState(0xe584, 0xec86, 0xb620, 0x9dc4, 0x8c8d, 0x3465, 0x0, 0x0);
        gbc.writeMem(0xe584, { 0xdf });
        gbc.writeMem(0xec84, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xec84);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe584), 0xdf);
        EXPECT(gbc.readMem(0xec84), 0x85);
        EXPECT(gbc.readMem(0xec85), 0xe5);
        // DF 024B
        gbc.setState(0xe2c3, 0x8824, 0x3bb0, 0xe582, 0xf591, 0x6ba7, 0x1, 0x0);
        gbc.writeMem(0x8822, { 0x0, 0x0 });
        gbc.writeMem(0xe2c3, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x8822);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8822), 0xc4);
        EXPECT(gbc.readMem(0x8823), 0xe2);
        EXPECT(gbc.readMem(0xe2c3), 0xdf);
        // DF 0250
        gbc.setState(0xcbc2, 0xa061, 0xb0, 0x3f8a, 0x5725, 0x5e3f, 0x1, 0x1);
        gbc.writeMem(0xa05f, { 0x0, 0x0 });
        gbc.writeMem(0xcbc2, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xa05f);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa05f), 0xc3);
        EXPECT(gbc.readMem(0xa060), 0xcb);
        EXPECT(gbc.readMem(0xcbc2), 0xdf);
        // DF 0255
        gbc.setState(0x8d8f, 0xcc78, 0xa480, 0x166e, 0xf13a, 0x3323, 0x0, 0x0);
        gbc.writeMem(0x8d8f, { 0xdf });
        gbc.writeMem(0xcc76, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xcc76);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d8f), 0xdf);
        EXPECT(gbc.readMem(0xcc76), 0x90);
        EXPECT(gbc.readMem(0xcc77), 0x8d);
        // DF 0256
        gbc.setState(0x63e4, 0x8474, 0xd5a0, 0x494e, 0x150d, 0x8312, 0x0, 0x1);
        gbc.writeMem(0x63e4, { 0xdf });
        gbc.writeMem(0x8472, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x8472);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8472), 0xe5);
        EXPECT(gbc.readMem(0x8473), 0x63);
        // DF 0257
        gbc.setState(0xeee4, 0xc6fd, 0x35b0, 0xbfc1, 0xca81, 0x1497, 0x1, 0x0);
        gbc.writeMem(0xc6fb, { 0x0, 0x0 });
        gbc.writeMem(0xeee4, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xc6fb);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6fb), 0xe5);
        EXPECT(gbc.readMem(0xc6fc), 0xee);
        EXPECT(gbc.readMem(0xeee4), 0xdf);
        // DF 0258
        gbc.setState(0x46ef, 0xb029, 0x5f80, 0x775f, 0x4d3, 0xa3bb, 0x0, 0x1);
        gbc.writeMem(0x46ef, { 0xdf });
        gbc.writeMem(0xb027, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xb027);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb027), 0xf0);
        EXPECT(gbc.readMem(0xb028), 0x46);
        // DF 025F
        gbc.setState(0x2988, 0x84f8, 0xf610, 0xc636, 0x6fc9, 0x7fdf, 0x1, 0x0);
        gbc.writeMem(0x2988, { 0xdf });
        gbc.writeMem(0x84f6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x84f6);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84f6), 0x89);
        EXPECT(gbc.readMem(0x84f7), 0x29);
        // DF 0260
        gbc.setState(0xac38, 0x919c, 0x2cf0, 0x194d, 0x80dd, 0x426, 0x0, 0x0);
        gbc.writeMem(0x919a, { 0x0, 0x0 });
        gbc.writeMem(0xac38, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x919a);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x919a), 0x39);
        EXPECT(gbc.readMem(0x919b), 0xac);
        EXPECT(gbc.readMem(0xac38), 0xdf);
        // DF 0261
        gbc.setState(0xcb8c, 0xaf69, 0x1b00, 0x3284, 0x961e, 0xd72a, 0x1, 0x1);
        gbc.writeMem(0xaf67, { 0x0, 0x0 });
        gbc.writeMem(0xcb8c, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xaf67);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf67), 0x8d);
        EXPECT(gbc.readMem(0xaf68), 0xcb);
        EXPECT(gbc.readMem(0xcb8c), 0xdf);
        // DF 0262
        gbc.setState(0x5e70, 0xa6c7, 0x5c00, 0x5d9b, 0xfdff, 0xdcae, 0x0, 0x1);
        gbc.writeMem(0x5e70, { 0xdf });
        gbc.writeMem(0xa6c5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xa6c5);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6c5), 0x71);
        EXPECT(gbc.readMem(0xa6c6), 0x5e);
        // DF 0263
        gbc.setState(0x516a, 0xaa7d, 0x30a0, 0xe88d, 0xbf34, 0x3de5, 0x1, 0x1);
        gbc.writeMem(0x516a, { 0xdf });
        gbc.writeMem(0xaa7b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xaa7b);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa7b), 0x6b);
        EXPECT(gbc.readMem(0xaa7c), 0x51);
        // DF 0266
        gbc.setState(0x4ee1, 0xed27, 0x1150, 0xd01a, 0x4e46, 0xabc5, 0x0, 0x1);
        gbc.writeMem(0x4ee1, { 0xdf });
        gbc.writeMem(0xed25, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xed25);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed25), 0xe2);
        EXPECT(gbc.readMem(0xed26), 0x4e);
        // DF 0267
        gbc.setState(0x470a, 0xbb4b, 0x1530, 0xa962, 0x3f82, 0x58bd, 0x1, 0x1);
        gbc.writeMem(0x470a, { 0xdf });
        gbc.writeMem(0xbb49, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xbb49);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb49), 0xb);
        EXPECT(gbc.readMem(0xbb4a), 0x47);
        // DF 0269
        gbc.setState(0x49b2, 0x91db, 0xa5f0, 0x7739, 0x100e, 0xd603, 0x0, 0x0);
        gbc.writeMem(0x49b2, { 0xdf });
        gbc.writeMem(0x91d9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x91d9);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91d9), 0xb3);
        EXPECT(gbc.readMem(0x91da), 0x49);
        // DF 026D
        gbc.setState(0x968d, 0xc1de, 0x4150, 0xb0dc, 0xc77a, 0xc90, 0x1, 0x1);
        gbc.writeMem(0x968d, { 0xdf });
        gbc.writeMem(0xc1dc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xc1dc);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x968d), 0xdf);
        EXPECT(gbc.readMem(0xc1dc), 0x8e);
        EXPECT(gbc.readMem(0xc1dd), 0x96);
        // DF 026F
        gbc.setState(0x971e, 0xe15f, 0x2520, 0xecb0, 0x4326, 0x7017, 0x0, 0x1);
        gbc.writeMem(0x971e, { 0xdf });
        gbc.writeMem(0xe15d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xe15d);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x971e), 0xdf);
        EXPECT(gbc.readMem(0xe15d), 0x1f);
        EXPECT(gbc.readMem(0xe15e), 0x97);
        // DF 0272
        gbc.setState(0x7e7b, 0xdf35, 0x8ab0, 0xb1bc, 0x702c, 0x8391, 0x0, 0x0);
        gbc.writeMem(0x7e7b, { 0xdf });
        gbc.writeMem(0xdf33, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xdf33);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf33), 0x7c);
        EXPECT(gbc.readMem(0xdf34), 0x7e);
        // DF 0275
        gbc.setState(0xd57f, 0x985c, 0xf770, 0xb9a2, 0xbe8c, 0x7ee0, 0x1, 0x1);
        gbc.writeMem(0x985a, { 0x0, 0x0 });
        gbc.writeMem(0xd57f, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x985a);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x985a), 0x80);
        EXPECT(gbc.readMem(0x985b), 0xd5);
        EXPECT(gbc.readMem(0xd57f), 0xdf);
        // DF 0277
        gbc.setState(0xd67e, 0xc16d, 0xc420, 0x275d, 0x6044, 0x1f52, 0x1, 0x1);
        gbc.writeMem(0xc16b, { 0x0, 0x0 });
        gbc.writeMem(0xd67e, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xc16b);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc16b), 0x7f);
        EXPECT(gbc.readMem(0xc16c), 0xd6);
        EXPECT(gbc.readMem(0xd67e), 0xdf);
        // DF 0279
        gbc.setState(0x2912, 0xd9fc, 0xea0, 0xf38e, 0x248d, 0xb426, 0x0, 0x1);
        gbc.writeMem(0x2912, { 0xdf });
        gbc.writeMem(0xd9fa, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xd9fa);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9fa), 0x13);
        EXPECT(gbc.readMem(0xd9fb), 0x29);
        // DF 027B
        gbc.setState(0xa7d0, 0xbb3e, 0x5b20, 0xb016, 0x978f, 0x3132, 0x1, 0x1);
        gbc.writeMem(0xa7d0, { 0xdf });
        gbc.writeMem(0xbb3c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xbb3c);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7d0), 0xdf);
        EXPECT(gbc.readMem(0xbb3c), 0xd1);
        EXPECT(gbc.readMem(0xbb3d), 0xa7);
        // DF 027C
        gbc.setState(0x6f9, 0xefcb, 0x4a70, 0x4860, 0xc6c7, 0x4b15, 0x0, 0x0);
        gbc.writeMem(0x6f9, { 0xdf });
        gbc.writeMem(0xefc9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xefc9);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefc9), 0xfa);
        EXPECT(gbc.readMem(0xefca), 0x6);
        // DF 027E
        gbc.setState(0x6b82, 0x89e5, 0xc880, 0xd1ce, 0x4d1b, 0xc79d, 0x0, 0x0);
        gbc.writeMem(0x6b82, { 0xdf });
        gbc.writeMem(0x89e3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x89e3);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89e3), 0x83);
        EXPECT(gbc.readMem(0x89e4), 0x6b);
        // DF 0281
        gbc.setState(0xd7f5, 0x82b3, 0x2b60, 0xa0ac, 0x66b4, 0xf722, 0x0, 0x1);
        gbc.writeMem(0x82b1, { 0x0, 0x0 });
        gbc.writeMem(0xd7f5, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x82b1);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82b1), 0xf6);
        EXPECT(gbc.readMem(0x82b2), 0xd7);
        EXPECT(gbc.readMem(0xd7f5), 0xdf);
        // DF 0282
        gbc.setState(0x7518, 0xfc97, 0xf040, 0xa0bf, 0xfc38, 0x1d86, 0x1, 0x1);
        gbc.writeMem(0x7518, { 0xdf });
        gbc.writeMem(0xfc95, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xfc95);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfc95), 0x19);
        EXPECT(gbc.readMem(0xfc96), 0x75);
        // DF 0284
        gbc.setState(0xabf6, 0xcf8e, 0x5f30, 0x4fd2, 0xcd6b, 0xf6a8, 0x0, 0x1);
        gbc.writeMem(0xabf6, { 0xdf });
        gbc.writeMem(0xcf8c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xcf8c);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabf6), 0xdf);
        EXPECT(gbc.readMem(0xcf8c), 0xf7);
        EXPECT(gbc.readMem(0xcf8d), 0xab);
        // DF 0285
        gbc.setState(0x64dc, 0xb0e8, 0xe2b0, 0x8257, 0xe403, 0x8b75, 0x1, 0x1);
        gbc.writeMem(0x64dc, { 0xdf });
        gbc.writeMem(0xb0e6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xb0e6);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0e6), 0xdd);
        EXPECT(gbc.readMem(0xb0e7), 0x64);
        // DF 0287
        gbc.setState(0x5719, 0xa68f, 0xd880, 0x40cb, 0x2f2, 0x5e28, 0x1, 0x0);
        gbc.writeMem(0x5719, { 0xdf });
        gbc.writeMem(0xa68d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xa68d);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa68d), 0x1a);
        EXPECT(gbc.readMem(0xa68e), 0x57);
        // DF 0288
        gbc.setState(0xae1d, 0xb89e, 0xcf30, 0x8cad, 0xb7af, 0xbbec, 0x0, 0x1);
        gbc.writeMem(0xae1d, { 0xdf });
        gbc.writeMem(0xb89c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xb89c);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae1d), 0xdf);
        EXPECT(gbc.readMem(0xb89c), 0x1e);
        EXPECT(gbc.readMem(0xb89d), 0xae);
        // DF 0289
        gbc.setState(0x24ea, 0xbb39, 0x1d30, 0xc15, 0xe2a2, 0xad4b, 0x1, 0x0);
        gbc.writeMem(0x24ea, { 0xdf });
        gbc.writeMem(0xbb37, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xbb37);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb37), 0xeb);
        EXPECT(gbc.readMem(0xbb38), 0x24);
        // DF 028C
        gbc.setState(0x8db7, 0x9641, 0xfbf0, 0x2fdd, 0xd9f7, 0x49a7, 0x0, 0x1);
        gbc.writeMem(0x8db7, { 0xdf });
        gbc.writeMem(0x963f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x963f);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8db7), 0xdf);
        EXPECT(gbc.readMem(0x963f), 0xb8);
        EXPECT(gbc.readMem(0x9640), 0x8d);
        // DF 0295
        gbc.setState(0x51cd, 0x880f, 0xb120, 0x7260, 0xcdb6, 0xd031, 0x1, 0x0);
        gbc.writeMem(0x51cd, { 0xdf });
        gbc.writeMem(0x880d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x880d);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x880d), 0xce);
        EXPECT(gbc.readMem(0x880e), 0x51);
        // DF 0296
        gbc.setState(0x9f32, 0xe360, 0x4990, 0x533c, 0xfe1a, 0xc2cb, 0x1, 0x0);
        gbc.writeMem(0x9f32, { 0xdf });
        gbc.writeMem(0xe35e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xe35e);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f32), 0xdf);
        EXPECT(gbc.readMem(0xe35e), 0x33);
        EXPECT(gbc.readMem(0xe35f), 0x9f);
        // DF 0297
        gbc.setState(0x7b3a, 0xbb47, 0xa3e0, 0xb46d, 0x2fcc, 0x503a, 0x0, 0x1);
        gbc.writeMem(0x7b3a, { 0xdf });
        gbc.writeMem(0xbb45, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xbb45);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb45), 0x3b);
        EXPECT(gbc.readMem(0xbb46), 0x7b);
        // DF 0299
        gbc.setState(0xb41, 0x8ef6, 0xc6f0, 0xd9d0, 0x91aa, 0x482d, 0x1, 0x0);
        gbc.writeMem(0xb41, { 0xdf });
        gbc.writeMem(0x8ef4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x8ef4);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ef4), 0x42);
        EXPECT(gbc.readMem(0x8ef5), 0xb);
        // DF 029B
        gbc.setState(0x45f8, 0x849a, 0x6220, 0xbc86, 0xafa1, 0xa3df, 0x0, 0x0);
        gbc.writeMem(0x45f8, { 0xdf });
        gbc.writeMem(0x8498, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x8498);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8498), 0xf9);
        EXPECT(gbc.readMem(0x8499), 0x45);
        // DF 029E
        gbc.setState(0xa086, 0xc3ee, 0xcb30, 0x5891, 0x57a6, 0x5a09, 0x1, 0x0);
        gbc.writeMem(0xa086, { 0xdf });
        gbc.writeMem(0xc3ec, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xc3ec);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa086), 0xdf);
        EXPECT(gbc.readMem(0xc3ec), 0x87);
        EXPECT(gbc.readMem(0xc3ed), 0xa0);
        // DF 029F
        gbc.setState(0x7c5a, 0x89e1, 0x75a0, 0xa9c8, 0xab6d, 0x55e4, 0x0, 0x1);
        gbc.writeMem(0x7c5a, { 0xdf });
        gbc.writeMem(0x89df, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x89df);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89df), 0x5b);
        EXPECT(gbc.readMem(0x89e0), 0x7c);
        // DF 02A1
        gbc.setState(0x7b3d, 0x9af9, 0x3b0, 0xd957, 0xfabe, 0x3f05, 0x1, 0x1);
        gbc.writeMem(0x7b3d, { 0xdf });
        gbc.writeMem(0x9af7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x9af7);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9af7), 0x3e);
        EXPECT(gbc.readMem(0x9af8), 0x7b);
        // DF 02A3
        gbc.setState(0x79b6, 0xa147, 0x2320, 0x666a, 0xa718, 0xba83, 0x1, 0x1);
        gbc.writeMem(0x79b6, { 0xdf });
        gbc.writeMem(0xa145, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xa145);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa145), 0xb7);
        EXPECT(gbc.readMem(0xa146), 0x79);
        // DF 02A5
        gbc.setState(0x1c5b, 0xac04, 0xc010, 0xe5b9, 0x83f5, 0x5dff, 0x1, 0x1);
        gbc.writeMem(0x1c5b, { 0xdf });
        gbc.writeMem(0xac02, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xac02);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac02), 0x5c);
        EXPECT(gbc.readMem(0xac03), 0x1c);
        // DF 02AA
        gbc.setState(0xad76, 0xb138, 0xf9c0, 0xee2, 0xd5f4, 0x2b73, 0x0, 0x1);
        gbc.writeMem(0xad76, { 0xdf });
        gbc.writeMem(0xb136, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xb136);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad76), 0xdf);
        EXPECT(gbc.readMem(0xb136), 0x77);
        EXPECT(gbc.readMem(0xb137), 0xad);
        // DF 02AD
        gbc.setState(0x21a6, 0xcba4, 0x9680, 0x4eb6, 0xb908, 0x2689, 0x1, 0x0);
        gbc.writeMem(0x21a6, { 0xdf });
        gbc.writeMem(0xcba2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xcba2);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcba2), 0xa7);
        EXPECT(gbc.readMem(0xcba3), 0x21);
        // DF 02AE
        gbc.setState(0x4c94, 0xb328, 0x2bc0, 0x427b, 0xa4f4, 0x6aa, 0x1, 0x1);
        gbc.writeMem(0x4c94, { 0xdf });
        gbc.writeMem(0xb326, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xb326);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb326), 0x95);
        EXPECT(gbc.readMem(0xb327), 0x4c);
        // DF 02AF
        gbc.setState(0x90ef, 0xbaa1, 0xb140, 0x1918, 0xf296, 0x5bc8, 0x1, 0x0);
        gbc.writeMem(0x90ef, { 0xdf });
        gbc.writeMem(0xba9f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xba9f);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90ef), 0xdf);
        EXPECT(gbc.readMem(0xba9f), 0xf0);
        EXPECT(gbc.readMem(0xbaa0), 0x90);
        // DF 02B0
        gbc.setState(0xd4be, 0xd512, 0x29a0, 0x827d, 0x45f4, 0x3016, 0x0, 0x1);
        gbc.writeMem(0xd4be, { 0xdf });
        gbc.writeMem(0xd510, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xd510);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4be), 0xdf);
        EXPECT(gbc.readMem(0xd510), 0xbf);
        EXPECT(gbc.readMem(0xd511), 0xd4);
        // DF 02B2
        gbc.setState(0x73fd, 0xe41d, 0x3f20, 0xc1c1, 0x3da0, 0xe175, 0x0, 0x1);
        gbc.writeMem(0x73fd, { 0xdf });
        gbc.writeMem(0xe41b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xe41b);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe41b), 0xfe);
        EXPECT(gbc.readMem(0xe41c), 0x73);
        // DF 02B5
        gbc.setState(0xb774, 0xbd87, 0xd010, 0x2fb7, 0x92cc, 0x2c08, 0x1, 0x1);
        gbc.writeMem(0xb774, { 0xdf });
        gbc.writeMem(0xbd85, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xbd85);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb774), 0xdf);
        EXPECT(gbc.readMem(0xbd85), 0x75);
        EXPECT(gbc.readMem(0xbd86), 0xb7);
        // DF 02B8
        gbc.setState(0x5fd5, 0xa923, 0x950, 0x1f77, 0x2a39, 0x1cf4, 0x1, 0x0);
        gbc.writeMem(0x5fd5, { 0xdf });
        gbc.writeMem(0xa921, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xa921);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa921), 0xd6);
        EXPECT(gbc.readMem(0xa922), 0x5f);
        // DF 02B9
        gbc.setState(0xb112, 0xdf8c, 0xe920, 0xe603, 0x9dea, 0x2bea, 0x0, 0x1);
        gbc.writeMem(0xb112, { 0xdf });
        gbc.writeMem(0xdf8a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xdf8a);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb112), 0xdf);
        EXPECT(gbc.readMem(0xdf8a), 0x13);
        EXPECT(gbc.readMem(0xdf8b), 0xb1);
        // DF 02BA
        gbc.setState(0xec6b, 0x90bc, 0xaf10, 0x466d, 0x4267, 0xc376, 0x0, 0x1);
        gbc.writeMem(0x90ba, { 0x0, 0x0 });
        gbc.writeMem(0xec6b, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x90ba);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90ba), 0x6c);
        EXPECT(gbc.readMem(0x90bb), 0xec);
        EXPECT(gbc.readMem(0xec6b), 0xdf);
        // DF 02BC
        gbc.setState(0x7576, 0xc558, 0x4c10, 0xf64b, 0xfbe6, 0x566, 0x1, 0x0);
        gbc.writeMem(0x7576, { 0xdf });
        gbc.writeMem(0xc556, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xc556);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc556), 0x77);
        EXPECT(gbc.readMem(0xc557), 0x75);
        // DF 02C0
        gbc.setState(0xb17e, 0xf9d2, 0x2260, 0xe83, 0xf409, 0x30e3, 0x0, 0x1);
        gbc.writeMem(0xb17e, { 0xdf });
        gbc.writeMem(0xf9d0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xf9d0);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb17e), 0xdf);
        EXPECT(gbc.readMem(0xf9d0), 0x7f);
        EXPECT(gbc.readMem(0xf9d1), 0xb1);
        // DF 02C1
        gbc.setState(0xced5, 0xc586, 0xad50, 0xee6f, 0xec64, 0x4154, 0x1, 0x1);
        gbc.writeMem(0xc584, { 0x0, 0x0 });
        gbc.writeMem(0xced5, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xc584);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc584), 0xd6);
        EXPECT(gbc.readMem(0xc585), 0xce);
        EXPECT(gbc.readMem(0xced5), 0xdf);
        // DF 02C4
        gbc.setState(0x71cf, 0x9a6c, 0xfc10, 0xcbd4, 0x7640, 0x1563, 0x0, 0x1);
        gbc.writeMem(0x71cf, { 0xdf });
        gbc.writeMem(0x9a6a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x9a6a);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a6a), 0xd0);
        EXPECT(gbc.readMem(0x9a6b), 0x71);
        // DF 02C5
        gbc.setState(0xd77f, 0x9da7, 0xa4c0, 0x113, 0x79d9, 0x6090, 0x1, 0x1);
        gbc.writeMem(0x9da5, { 0x0, 0x0 });
        gbc.writeMem(0xd77f, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x9da5);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9da5), 0x80);
        EXPECT(gbc.readMem(0x9da6), 0xd7);
        EXPECT(gbc.readMem(0xd77f), 0xdf);
        // DF 02CB
        gbc.setState(0xbef1, 0x8e31, 0xe040, 0xab47, 0xe95c, 0x1556, 0x1, 0x0);
        gbc.writeMem(0x8e2f, { 0x0, 0x0 });
        gbc.writeMem(0xbef1, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x8e2f);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e2f), 0xf2);
        EXPECT(gbc.readMem(0x8e30), 0xbe);
        EXPECT(gbc.readMem(0xbef1), 0xdf);
        // DF 02CC
        gbc.setState(0x5675, 0xa215, 0xd400, 0x13ec, 0xe1e4, 0xdc13, 0x1, 0x1);
        gbc.writeMem(0x5675, { 0xdf });
        gbc.writeMem(0xa213, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xa213);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa213), 0x76);
        EXPECT(gbc.readMem(0xa214), 0x56);
        // DF 02CF
        gbc.setState(0x3392, 0x8744, 0x7200, 0x4dc4, 0x144d, 0x2e9e, 0x0, 0x0);
        gbc.writeMem(0x3392, { 0xdf });
        gbc.writeMem(0x8742, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x8742);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8742), 0x93);
        EXPECT(gbc.readMem(0x8743), 0x33);
        // DF 02D3
        gbc.setState(0xef61, 0x9d3e, 0x2480, 0xb81f, 0xdbe2, 0xb389, 0x1, 0x0);
        gbc.writeMem(0x9d3c, { 0x0, 0x0 });
        gbc.writeMem(0xef61, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x9d3c);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d3c), 0x62);
        EXPECT(gbc.readMem(0x9d3d), 0xef);
        EXPECT(gbc.readMem(0xef61), 0xdf);
        // DF 02D5
        gbc.setState(0x2d73, 0xa838, 0x2250, 0x4878, 0x5bf2, 0x4839, 0x1, 0x0);
        gbc.writeMem(0x2d73, { 0xdf });
        gbc.writeMem(0xa836, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xa836);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa836), 0x74);
        EXPECT(gbc.readMem(0xa837), 0x2d);
        // DF 02D6
        gbc.setState(0x431b, 0xa4c9, 0x7020, 0x1eb0, 0x1ef5, 0x3565, 0x0, 0x0);
        gbc.writeMem(0x431b, { 0xdf });
        gbc.writeMem(0xa4c7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xa4c7);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4c7), 0x1c);
        EXPECT(gbc.readMem(0xa4c8), 0x43);
        // DF 02D7
        gbc.setState(0x4d5d, 0xbf19, 0x56c0, 0x8ee3, 0xfc01, 0x8424, 0x1, 0x1);
        gbc.writeMem(0x4d5d, { 0xdf });
        gbc.writeMem(0xbf17, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xbf17);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf17), 0x5e);
        EXPECT(gbc.readMem(0xbf18), 0x4d);
        // DF 02D8
        gbc.setState(0xee5d, 0xad56, 0x99a0, 0x887f, 0x78bc, 0x32e, 0x0, 0x0);
        gbc.writeMem(0xad54, { 0x0, 0x0 });
        gbc.writeMem(0xee5d, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xad54);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad54), 0x5e);
        EXPECT(gbc.readMem(0xad55), 0xee);
        EXPECT(gbc.readMem(0xee5d), 0xdf);
        // DF 02DC
        gbc.setState(0x712b, 0xd09f, 0xfb30, 0xb457, 0xdf62, 0x3654, 0x0, 0x1);
        gbc.writeMem(0x712b, { 0xdf });
        gbc.writeMem(0xd09d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xd09d);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd09d), 0x2c);
        EXPECT(gbc.readMem(0xd09e), 0x71);
        // DF 02DD
        gbc.setState(0xae0, 0xc02a, 0x27c0, 0xa509, 0x2148, 0x45e4, 0x1, 0x1);
        gbc.writeMem(0xae0, { 0xdf });
        gbc.writeMem(0xc028, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xc028);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc028), 0xe1);
        EXPECT(gbc.readMem(0xc029), 0xa);
        // DF 02DE
        gbc.setState(0x4285, 0xdf8b, 0x8720, 0xa6c5, 0x57f1, 0x129b, 0x1, 0x0);
        gbc.writeMem(0x4285, { 0xdf });
        gbc.writeMem(0xdf89, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xdf89);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf89), 0x86);
        EXPECT(gbc.readMem(0xdf8a), 0x42);
        // DF 02E1
        gbc.setState(0x2f15, 0x8702, 0x24a0, 0x8369, 0xdd9b, 0x938e, 0x0, 0x0);
        gbc.writeMem(0x2f15, { 0xdf });
        gbc.writeMem(0x8700, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x8700);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8700), 0x16);
        EXPECT(gbc.readMem(0x8701), 0x2f);
        // DF 02E4
        gbc.setState(0x322b, 0x88db, 0x7620, 0xd72c, 0x21e1, 0x6110, 0x0, 0x1);
        gbc.writeMem(0x322b, { 0xdf });
        gbc.writeMem(0x88d9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x88d9);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88d9), 0x2c);
        EXPECT(gbc.readMem(0x88da), 0x32);
        // DF 02E7
        gbc.setState(0xc7b, 0xf847, 0x6af0, 0x3b1c, 0x44df, 0xc955, 0x0, 0x1);
        gbc.writeMem(0xc7b, { 0xdf });
        gbc.writeMem(0xf845, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xf845);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf845), 0x7c);
        EXPECT(gbc.readMem(0xf846), 0xc);
        // DF 02E8
        gbc.setState(0x2a52, 0xd0a7, 0x2bb0, 0x8b59, 0xcb79, 0xc963, 0x0, 0x1);
        gbc.writeMem(0x2a52, { 0xdf });
        gbc.writeMem(0xd0a5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xd0a5);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0a5), 0x53);
        EXPECT(gbc.readMem(0xd0a6), 0x2a);
        // DF 02E9
        gbc.setState(0xc3a0, 0xb7af, 0xf30, 0xd2eb, 0xf77a, 0x713a, 0x1, 0x0);
        gbc.writeMem(0xb7ad, { 0x0, 0x0 });
        gbc.writeMem(0xc3a0, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xb7ad);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7ad), 0xa1);
        EXPECT(gbc.readMem(0xb7ae), 0xc3);
        EXPECT(gbc.readMem(0xc3a0), 0xdf);
        // DF 02EB
        gbc.setState(0xb1e0, 0xf53a, 0x1ce0, 0x510a, 0x500, 0xd2d4, 0x0, 0x0);
        gbc.writeMem(0xb1e0, { 0xdf });
        gbc.writeMem(0xf538, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xf538);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1e0), 0xdf);
        EXPECT(gbc.readMem(0xf538), 0xe1);
        EXPECT(gbc.readMem(0xf539), 0xb1);
        // DF 02EE
        gbc.setState(0x92fd, 0xf42f, 0xc2e0, 0xc9a9, 0xf4af, 0xdbe8, 0x1, 0x0);
        gbc.writeMem(0x92fd, { 0xdf });
        gbc.writeMem(0xf42d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xf42d);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92fd), 0xdf);
        EXPECT(gbc.readMem(0xf42d), 0xfe);
        EXPECT(gbc.readMem(0xf42e), 0x92);
        // DF 02F7
        gbc.setState(0xba7d, 0xfae4, 0xb7b0, 0x83ab, 0x6594, 0x46d0, 0x0, 0x1);
        gbc.writeMem(0xba7d, { 0xdf });
        gbc.writeMem(0xfae2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xfae2);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba7d), 0xdf);
        EXPECT(gbc.readMem(0xfae2), 0x7e);
        EXPECT(gbc.readMem(0xfae3), 0xba);
        // DF 02F8
        gbc.setState(0xe7e6, 0x848b, 0xed00, 0xf6cf, 0xf266, 0x2c9, 0x0, 0x0);
        gbc.writeMem(0x8489, { 0x0, 0x0 });
        gbc.writeMem(0xe7e6, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x8489);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8489), 0xe7);
        EXPECT(gbc.readMem(0x848a), 0xe7);
        EXPECT(gbc.readMem(0xe7e6), 0xdf);
        // DF 02FA
        gbc.setState(0xd226, 0xe218, 0xc860, 0x420, 0xaaf6, 0xa79c, 0x1, 0x1);
        gbc.writeMem(0xd226, { 0xdf });
        gbc.writeMem(0xe216, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xe216);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd226), 0xdf);
        EXPECT(gbc.readMem(0xe216), 0x27);
        EXPECT(gbc.readMem(0xe217), 0xd2);
        // DF 02FC
        gbc.setState(0x8883, 0x95b1, 0x11f0, 0xb3ed, 0x702d, 0x9c7c, 0x1, 0x0);
        gbc.writeMem(0x8883, { 0xdf });
        gbc.writeMem(0x95af, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x95af);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8883), 0xdf);
        EXPECT(gbc.readMem(0x95af), 0x84);
        EXPECT(gbc.readMem(0x95b0), 0x88);
        // DF 02FD
        gbc.setState(0xb396, 0xb9bb, 0xa6a0, 0xe0dd, 0x571d, 0x4a1c, 0x1, 0x1);
        gbc.writeMem(0xb396, { 0xdf });
        gbc.writeMem(0xb9b9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xb9b9);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb396), 0xdf);
        EXPECT(gbc.readMem(0xb9b9), 0x97);
        EXPECT(gbc.readMem(0xb9ba), 0xb3);
        // DF 02FE
        gbc.setState(0x7e80, 0xe28d, 0x5730, 0x4e98, 0x5110, 0x79c6, 0x0, 0x1);
        gbc.writeMem(0x7e80, { 0xdf });
        gbc.writeMem(0xe28b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xe28b);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe28b), 0x81);
        EXPECT(gbc.readMem(0xe28c), 0x7e);
        // DF 02FF
        gbc.setState(0xcb9a, 0xd460, 0x78c0, 0x151d, 0x3616, 0x5897, 0x0, 0x1);
        gbc.writeMem(0xcb9a, { 0xdf });
        gbc.writeMem(0xd45e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xd45e);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb9a), 0xdf);
        EXPECT(gbc.readMem(0xd45e), 0x9b);
        EXPECT(gbc.readMem(0xd45f), 0xcb);
        // DF 0303
        gbc.setState(0x48f3, 0xd251, 0xf300, 0x7001, 0x7ea7, 0xe02e, 0x1, 0x1);
        gbc.writeMem(0x48f3, { 0xdf });
        gbc.writeMem(0xd24f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xd24f);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd24f), 0xf4);
        EXPECT(gbc.readMem(0xd250), 0x48);
        // DF 0305
        gbc.setState(0x3671, 0xd2da, 0xfac0, 0x9274, 0x485a, 0xb9, 0x0, 0x1);
        gbc.writeMem(0x3671, { 0xdf });
        gbc.writeMem(0xd2d8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xd2d8);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2d8), 0x72);
        EXPECT(gbc.readMem(0xd2d9), 0x36);
        // DF 0306
        gbc.setState(0xde91, 0xa1cd, 0x4b60, 0x5f48, 0xc393, 0xc233, 0x0, 0x1);
        gbc.writeMem(0xa1cb, { 0x0, 0x0 });
        gbc.writeMem(0xde91, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xa1cb);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1cb), 0x92);
        EXPECT(gbc.readMem(0xa1cc), 0xde);
        EXPECT(gbc.readMem(0xde91), 0xdf);
        // DF 0307
        gbc.setState(0xc3d4, 0xd652, 0x1a00, 0x90c2, 0x755f, 0xa19a, 0x0, 0x0);
        gbc.writeMem(0xc3d4, { 0xdf });
        gbc.writeMem(0xd650, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xd650);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3d4), 0xdf);
        EXPECT(gbc.readMem(0xd650), 0xd5);
        EXPECT(gbc.readMem(0xd651), 0xc3);
        // DF 030B
        gbc.setState(0x2652, 0xb5eb, 0x3b00, 0x155c, 0x32f1, 0xb57a, 0x0, 0x0);
        gbc.writeMem(0x2652, { 0xdf });
        gbc.writeMem(0xb5e9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xb5e9);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5e9), 0x53);
        EXPECT(gbc.readMem(0xb5ea), 0x26);
        // DF 030C
        gbc.setState(0xd193, 0x83cc, 0xf720, 0xa275, 0x9854, 0xe25d, 0x1, 0x0);
        gbc.writeMem(0x83ca, { 0x0, 0x0 });
        gbc.writeMem(0xd193, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x83ca);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83ca), 0x94);
        EXPECT(gbc.readMem(0x83cb), 0xd1);
        EXPECT(gbc.readMem(0xd193), 0xdf);
        // DF 030D
        gbc.setState(0x2ae, 0xf520, 0x9db0, 0x4082, 0x1378, 0x243d, 0x0, 0x1);
        gbc.writeMem(0x2ae, { 0xdf });
        gbc.writeMem(0xf51e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xf51e);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf51e), 0xaf);
        EXPECT(gbc.readMem(0xf51f), 0x2);
        // DF 030E
        gbc.setState(0x4d2, 0x8e94, 0x7e70, 0x8d95, 0x3d4d, 0x3024, 0x0, 0x1);
        gbc.writeMem(0x4d2, { 0xdf });
        gbc.writeMem(0x8e92, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x8e92);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e92), 0xd3);
        EXPECT(gbc.readMem(0x8e93), 0x4);
        // DF 0311
        gbc.setState(0x54c3, 0xc818, 0xe1a0, 0x4799, 0x25cb, 0xa94, 0x0, 0x0);
        gbc.writeMem(0x54c3, { 0xdf });
        gbc.writeMem(0xc816, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xc816);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc816), 0xc4);
        EXPECT(gbc.readMem(0xc817), 0x54);
        // DF 0312
        gbc.setState(0xeee6, 0x928a, 0xced0, 0xd99b, 0x9847, 0xb5df, 0x0, 0x0);
        gbc.writeMem(0x9288, { 0x0, 0x0 });
        gbc.writeMem(0xeee6, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x9288);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9288), 0xe7);
        EXPECT(gbc.readMem(0x9289), 0xee);
        EXPECT(gbc.readMem(0xeee6), 0xdf);
        // DF 0315
        gbc.setState(0x6b95, 0xbef4, 0x3190, 0x8639, 0x9eb3, 0x36b6, 0x0, 0x0);
        gbc.writeMem(0x6b95, { 0xdf });
        gbc.writeMem(0xbef2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xbef2);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbef2), 0x96);
        EXPECT(gbc.readMem(0xbef3), 0x6b);
        // DF 0317
        gbc.setState(0x6c5e, 0xa919, 0xa0b0, 0xd88c, 0x51c7, 0x1794, 0x0, 0x1);
        gbc.writeMem(0x6c5e, { 0xdf });
        gbc.writeMem(0xa917, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xa917);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa917), 0x5f);
        EXPECT(gbc.readMem(0xa918), 0x6c);
        // DF 031A
        gbc.setState(0xe690, 0xa0f9, 0xa6c0, 0xf7a0, 0x953c, 0xf517, 0x0, 0x0);
        gbc.writeMem(0xa0f7, { 0x0, 0x0 });
        gbc.writeMem(0xe690, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xa0f7);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0f7), 0x91);
        EXPECT(gbc.readMem(0xa0f8), 0xe6);
        EXPECT(gbc.readMem(0xe690), 0xdf);
        // DF 031B
        gbc.setState(0x45cb, 0xbe59, 0x98a0, 0xb435, 0xb46a, 0x857c, 0x0, 0x1);
        gbc.writeMem(0x45cb, { 0xdf });
        gbc.writeMem(0xbe57, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xbe57);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe57), 0xcc);
        EXPECT(gbc.readMem(0xbe58), 0x45);
        // DF 031C
        gbc.setState(0x450, 0xfbc9, 0xa850, 0xd867, 0xa3, 0x95e6, 0x0, 0x0);
        gbc.writeMem(0x450, { 0xdf });
        gbc.writeMem(0xfbc7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xfbc7);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfbc7), 0x51);
        EXPECT(gbc.readMem(0xfbc8), 0x4);
        // DF 0320
        gbc.setState(0x5934, 0x938f, 0x42d0, 0xb90d, 0x246e, 0x944e, 0x1, 0x0);
        gbc.writeMem(0x5934, { 0xdf });
        gbc.writeMem(0x938d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x938d);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x938d), 0x35);
        EXPECT(gbc.readMem(0x938e), 0x59);
        // DF 0321
        gbc.setState(0x84f2, 0x9647, 0x9390, 0xf716, 0xa96a, 0xa21d, 0x0, 0x0);
        gbc.writeMem(0x84f2, { 0xdf });
        gbc.writeMem(0x9645, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x9645);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84f2), 0xdf);
        EXPECT(gbc.readMem(0x9645), 0xf3);
        EXPECT(gbc.readMem(0x9646), 0x84);
        // DF 0322
        gbc.setState(0x56bb, 0xc6ea, 0xb480, 0x2c98, 0xddec, 0xf3b9, 0x1, 0x0);
        gbc.writeMem(0x56bb, { 0xdf });
        gbc.writeMem(0xc6e8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xc6e8);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6e8), 0xbc);
        EXPECT(gbc.readMem(0xc6e9), 0x56);
        // DF 0323
        gbc.setState(0x1e14, 0xab06, 0xb170, 0x6742, 0xb765, 0xb119, 0x0, 0x1);
        gbc.writeMem(0x1e14, { 0xdf });
        gbc.writeMem(0xab04, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xab04);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab04), 0x15);
        EXPECT(gbc.readMem(0xab05), 0x1e);
        // DF 0326
        gbc.setState(0xcbcc, 0xbc47, 0xd250, 0xcc63, 0x5b8b, 0xc967, 0x0, 0x1);
        gbc.writeMem(0xbc45, { 0x0, 0x0 });
        gbc.writeMem(0xcbcc, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xbc45);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc45), 0xcd);
        EXPECT(gbc.readMem(0xbc46), 0xcb);
        EXPECT(gbc.readMem(0xcbcc), 0xdf);
        // DF 0329
        gbc.setState(0x208c, 0xb622, 0xd960, 0xb96e, 0x905d, 0xb22d, 0x1, 0x0);
        gbc.writeMem(0x208c, { 0xdf });
        gbc.writeMem(0xb620, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xb620);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb620), 0x8d);
        EXPECT(gbc.readMem(0xb621), 0x20);
        // DF 032B
        gbc.setState(0x7e89, 0xda0b, 0x8d00, 0x1f0d, 0xb65e, 0x9987, 0x0, 0x0);
        gbc.writeMem(0x7e89, { 0xdf });
        gbc.writeMem(0xda09, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xda09);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda09), 0x8a);
        EXPECT(gbc.readMem(0xda0a), 0x7e);
        // DF 032D
        gbc.setState(0x667b, 0x93e1, 0xcbc0, 0xf802, 0xa05, 0x32bc, 0x1, 0x0);
        gbc.writeMem(0x667b, { 0xdf });
        gbc.writeMem(0x93df, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x93df);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93df), 0x7c);
        EXPECT(gbc.readMem(0x93e0), 0x66);
        // DF 032E
        gbc.setState(0x74a, 0xdfe4, 0xbb80, 0x2c57, 0x170e, 0x616e, 0x1, 0x1);
        gbc.writeMem(0x74a, { 0xdf });
        gbc.writeMem(0xdfe2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xdfe2);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfe2), 0x4b);
        EXPECT(gbc.readMem(0xdfe3), 0x7);
        // DF 0333
        gbc.setState(0x20b5, 0x8bea, 0xc190, 0x47ae, 0x10e1, 0x12d0, 0x1, 0x1);
        gbc.writeMem(0x20b5, { 0xdf });
        gbc.writeMem(0x8be8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x8be8);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8be8), 0xb6);
        EXPECT(gbc.readMem(0x8be9), 0x20);
        // DF 0335
        gbc.setState(0x6340, 0xf1ab, 0x5b90, 0x96d6, 0x4361, 0xbed, 0x1, 0x1);
        gbc.writeMem(0x6340, { 0xdf });
        gbc.writeMem(0xf1a9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xf1a9);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf1a9), 0x41);
        EXPECT(gbc.readMem(0xf1aa), 0x63);
        // DF 0336
        gbc.setState(0x3a95, 0xf114, 0x4b0, 0xd235, 0xa6be, 0x1d97, 0x0, 0x0);
        gbc.writeMem(0x3a95, { 0xdf });
        gbc.writeMem(0xf112, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xf112);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf112), 0x96);
        EXPECT(gbc.readMem(0xf113), 0x3a);
        // DF 0337
        gbc.setState(0x2a8e, 0xbd67, 0x3f0, 0x5b18, 0xeceb, 0x1e02, 0x1, 0x0);
        gbc.writeMem(0x2a8e, { 0xdf });
        gbc.writeMem(0xbd65, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xbd65);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd65), 0x8f);
        EXPECT(gbc.readMem(0xbd66), 0x2a);
        // DF 0339
        gbc.setState(0xcc2c, 0xc37e, 0xa870, 0x21a2, 0x6839, 0x74ae, 0x1, 0x0);
        gbc.writeMem(0xc37c, { 0x0, 0x0 });
        gbc.writeMem(0xcc2c, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xc37c);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc37c), 0x2d);
        EXPECT(gbc.readMem(0xc37d), 0xcc);
        EXPECT(gbc.readMem(0xcc2c), 0xdf);
        // DF 033A
        gbc.setState(0xea6a, 0xaced, 0x5ad0, 0x902a, 0x7b86, 0xf9cf, 0x0, 0x0);
        gbc.writeMem(0xaceb, { 0x0, 0x0 });
        gbc.writeMem(0xea6a, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xaceb);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaceb), 0x6b);
        EXPECT(gbc.readMem(0xacec), 0xea);
        EXPECT(gbc.readMem(0xea6a), 0xdf);
        // DF 033B
        gbc.setState(0x7394, 0xe953, 0xc7e0, 0xcee, 0xf851, 0x57f6, 0x0, 0x0);
        gbc.writeMem(0x7394, { 0xdf });
        gbc.writeMem(0xe951, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xe951);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe951), 0x95);
        EXPECT(gbc.readMem(0xe952), 0x73);
        // DF 033C
        gbc.setState(0x914f, 0xdceb, 0xae60, 0x2ced, 0x1add, 0x263b, 0x1, 0x1);
        gbc.writeMem(0x914f, { 0xdf });
        gbc.writeMem(0xdce9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xdce9);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x914f), 0xdf);
        EXPECT(gbc.readMem(0xdce9), 0x50);
        EXPECT(gbc.readMem(0xdcea), 0x91);
        // DF 033D
        gbc.setState(0xc36b, 0xf95c, 0xdcc0, 0x50db, 0x8cb6, 0x127c, 0x1, 0x1);
        gbc.writeMem(0xc36b, { 0xdf });
        gbc.writeMem(0xf95a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xf95a);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc36b), 0xdf);
        EXPECT(gbc.readMem(0xf95a), 0x6c);
        EXPECT(gbc.readMem(0xf95b), 0xc3);
        // DF 033E
        gbc.setState(0xe4a7, 0xd87c, 0x54a0, 0x236f, 0xb3ee, 0x331e, 0x1, 0x0);
        gbc.writeMem(0xd87a, { 0x0, 0x0 });
        gbc.writeMem(0xe4a7, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xd87a);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd87a), 0xa8);
        EXPECT(gbc.readMem(0xd87b), 0xe4);
        EXPECT(gbc.readMem(0xe4a7), 0xdf);
        // DF 0341
        gbc.setState(0x2753, 0xbe88, 0x2590, 0x3f25, 0x3304, 0x541b, 0x1, 0x1);
        gbc.writeMem(0x2753, { 0xdf });
        gbc.writeMem(0xbe86, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xbe86);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe86), 0x54);
        EXPECT(gbc.readMem(0xbe87), 0x27);
        // DF 0344
        gbc.setState(0x547a, 0xcc1a, 0xd160, 0xb32a, 0xa867, 0xa5c2, 0x1, 0x1);
        gbc.writeMem(0x547a, { 0xdf });
        gbc.writeMem(0xcc18, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xcc18);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc18), 0x7b);
        EXPECT(gbc.readMem(0xcc19), 0x54);
        // DF 0347
        gbc.setState(0x3ff9, 0x9104, 0x3740, 0xd4de, 0x692b, 0x6515, 0x0, 0x0);
        gbc.writeMem(0x3ff9, { 0xdf });
        gbc.writeMem(0x9102, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x9102);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9102), 0xfa);
        EXPECT(gbc.readMem(0x9103), 0x3f);
        // DF 0349
        gbc.setState(0xd860, 0xdb69, 0x34b0, 0xa477, 0xc3c7, 0x7560, 0x1, 0x0);
        gbc.writeMem(0xd860, { 0xdf });
        gbc.writeMem(0xdb67, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xdb67);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd860), 0xdf);
        EXPECT(gbc.readMem(0xdb67), 0x61);
        EXPECT(gbc.readMem(0xdb68), 0xd8);
        // DF 034A
        gbc.setState(0xd899, 0xf2b4, 0x5960, 0xc7c2, 0x4a4e, 0x979, 0x1, 0x1);
        gbc.writeMem(0xd899, { 0xdf });
        gbc.writeMem(0xf2b2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xf2b2);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd899), 0xdf);
        EXPECT(gbc.readMem(0xf2b2), 0x9a);
        EXPECT(gbc.readMem(0xf2b3), 0xd8);
        // DF 034C
        gbc.setState(0xac51, 0x8106, 0xde80, 0xdc04, 0xcd5f, 0xa18f, 0x0, 0x1);
        gbc.writeMem(0x8104, { 0x0, 0x0 });
        gbc.writeMem(0xac51, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x8104);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8104), 0x52);
        EXPECT(gbc.readMem(0x8105), 0xac);
        EXPECT(gbc.readMem(0xac51), 0xdf);
        // DF 034D
        gbc.setState(0x14e9, 0xe134, 0x27a0, 0x32b1, 0x8cde, 0xe27a, 0x0, 0x0);
        gbc.writeMem(0x14e9, { 0xdf });
        gbc.writeMem(0xe132, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xe132);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe132), 0xea);
        EXPECT(gbc.readMem(0xe133), 0x14);
        // DF 034E
        gbc.setState(0x438a, 0xad33, 0x9280, 0x4291, 0x4b65, 0xe7e7, 0x1, 0x1);
        gbc.writeMem(0x438a, { 0xdf });
        gbc.writeMem(0xad31, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xad31);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad31), 0x8b);
        EXPECT(gbc.readMem(0xad32), 0x43);
        // DF 0351
        gbc.setState(0x2804, 0x9fc0, 0xf860, 0x2845, 0x8873, 0xe22d, 0x0, 0x1);
        gbc.writeMem(0x2804, { 0xdf });
        gbc.writeMem(0x9fbe, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x9fbe);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fbe), 0x5);
        EXPECT(gbc.readMem(0x9fbf), 0x28);
        // DF 0353
        gbc.setState(0x902e, 0xbdbe, 0xb410, 0xf802, 0xab7b, 0xe86b, 0x0, 0x0);
        gbc.writeMem(0x902e, { 0xdf });
        gbc.writeMem(0xbdbc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xbdbc);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x902e), 0xdf);
        EXPECT(gbc.readMem(0xbdbc), 0x2f);
        EXPECT(gbc.readMem(0xbdbd), 0x90);
        // DF 0356
        gbc.setState(0xd51c, 0xb783, 0x79d0, 0x9e84, 0xddcc, 0x71f6, 0x1, 0x1);
        gbc.writeMem(0xb781, { 0x0, 0x0 });
        gbc.writeMem(0xd51c, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xb781);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb781), 0x1d);
        EXPECT(gbc.readMem(0xb782), 0xd5);
        EXPECT(gbc.readMem(0xd51c), 0xdf);
        // DF 0357
        gbc.setState(0xc2b2, 0xc457, 0xf10, 0xf2c0, 0x6be7, 0x476b, 0x1, 0x0);
        gbc.writeMem(0xc2b2, { 0xdf });
        gbc.writeMem(0xc455, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xc455);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2b2), 0xdf);
        EXPECT(gbc.readMem(0xc455), 0xb3);
        EXPECT(gbc.readMem(0xc456), 0xc2);
        // DF 035B
        gbc.setState(0xac44, 0xf63f, 0xfd50, 0xd7b2, 0xf71a, 0x1635, 0x0, 0x1);
        gbc.writeMem(0xac44, { 0xdf });
        gbc.writeMem(0xf63d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xf63d);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac44), 0xdf);
        EXPECT(gbc.readMem(0xf63d), 0x45);
        EXPECT(gbc.readMem(0xf63e), 0xac);
        // DF 035F
        gbc.setState(0x83b4, 0xeef9, 0x26f0, 0x1f4, 0x64fa, 0xec07, 0x1, 0x1);
        gbc.writeMem(0x83b4, { 0xdf });
        gbc.writeMem(0xeef7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xeef7);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83b4), 0xdf);
        EXPECT(gbc.readMem(0xeef7), 0xb5);
        EXPECT(gbc.readMem(0xeef8), 0x83);
        // DF 0362
        gbc.setState(0x95ba, 0xc06b, 0x7c20, 0x1768, 0x3c89, 0xb37, 0x0, 0x1);
        gbc.writeMem(0x95ba, { 0xdf });
        gbc.writeMem(0xc069, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xc069);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95ba), 0xdf);
        EXPECT(gbc.readMem(0xc069), 0xbb);
        EXPECT(gbc.readMem(0xc06a), 0x95);
        // DF 0368
        gbc.setState(0xa2ef, 0xc3ed, 0xdc0, 0xbe64, 0x45b1, 0x7f62, 0x0, 0x1);
        gbc.writeMem(0xa2ef, { 0xdf });
        gbc.writeMem(0xc3eb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xc3eb);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2ef), 0xdf);
        EXPECT(gbc.readMem(0xc3eb), 0xf0);
        EXPECT(gbc.readMem(0xc3ec), 0xa2);
        // DF 0369
        gbc.setState(0xa0cd, 0x87ae, 0xf980, 0xf5a0, 0xb067, 0x294a, 0x1, 0x1);
        gbc.writeMem(0x87ac, { 0x0, 0x0 });
        gbc.writeMem(0xa0cd, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x87ac);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87ac), 0xce);
        EXPECT(gbc.readMem(0x87ad), 0xa0);
        EXPECT(gbc.readMem(0xa0cd), 0xdf);
        // DF 036B
        gbc.setState(0xb8ca, 0xacb2, 0xef60, 0x718a, 0xe156, 0x1e24, 0x0, 0x1);
        gbc.writeMem(0xacb0, { 0x0, 0x0 });
        gbc.writeMem(0xb8ca, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xacb0);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacb0), 0xcb);
        EXPECT(gbc.readMem(0xacb1), 0xb8);
        EXPECT(gbc.readMem(0xb8ca), 0xdf);
        // DF 036C
        gbc.setState(0xdfc5, 0xcd01, 0xc970, 0x6e3, 0xe62c, 0x2659, 0x1, 0x0);
        gbc.writeMem(0xccff, { 0x0, 0x0 });
        gbc.writeMem(0xdfc5, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xccff);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccff), 0xc6);
        EXPECT(gbc.readMem(0xcd00), 0xdf);
        EXPECT(gbc.readMem(0xdfc5), 0xdf);
        // DF 036D
        gbc.setState(0x14bd, 0x8d7c, 0x4940, 0xb1ef, 0x40a, 0xdc75, 0x0, 0x0);
        gbc.writeMem(0x14bd, { 0xdf });
        gbc.writeMem(0x8d7a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x8d7a);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d7a), 0xbe);
        EXPECT(gbc.readMem(0x8d7b), 0x14);
        // DF 036E
        gbc.setState(0x63e3, 0xe56b, 0x15f0, 0xc99a, 0x33e8, 0x8ef3, 0x0, 0x0);
        gbc.writeMem(0x63e3, { 0xdf });
        gbc.writeMem(0xe569, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xe569);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe569), 0xe4);
        EXPECT(gbc.readMem(0xe56a), 0x63);
        // DF 0374
        gbc.setState(0x9610, 0xa9d0, 0x800, 0xc68c, 0xa615, 0x75a3, 0x0, 0x0);
        gbc.writeMem(0x9610, { 0xdf });
        gbc.writeMem(0xa9ce, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xa9ce);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9610), 0xdf);
        EXPECT(gbc.readMem(0xa9ce), 0x11);
        EXPECT(gbc.readMem(0xa9cf), 0x96);
        // DF 0379
        gbc.setState(0x4086, 0x8254, 0xf410, 0xc8d, 0x4a4f, 0x7c20, 0x1, 0x1);
        gbc.writeMem(0x4086, { 0xdf });
        gbc.writeMem(0x8252, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x8252);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8252), 0x87);
        EXPECT(gbc.readMem(0x8253), 0x40);
        // DF 037C
        gbc.setState(0xe5ba, 0xc23a, 0xa530, 0x399b, 0xb907, 0x2c5, 0x1, 0x1);
        gbc.writeMem(0xc238, { 0x0, 0x0 });
        gbc.writeMem(0xe5ba, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xc238);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc238), 0xbb);
        EXPECT(gbc.readMem(0xc239), 0xe5);
        EXPECT(gbc.readMem(0xe5ba), 0xdf);
        // DF 037E
        gbc.setState(0x8e6b, 0xc524, 0x8230, 0x324e, 0xfe7a, 0xc77d, 0x1, 0x0);
        gbc.writeMem(0x8e6b, { 0xdf });
        gbc.writeMem(0xc522, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xc522);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e6b), 0xdf);
        EXPECT(gbc.readMem(0xc522), 0x6c);
        EXPECT(gbc.readMem(0xc523), 0x8e);
        // DF 037F
        gbc.setState(0x4caa, 0xdd19, 0x87f0, 0xde15, 0x5948, 0x307f, 0x1, 0x1);
        gbc.writeMem(0x4caa, { 0xdf });
        gbc.writeMem(0xdd17, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xdd17);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd17), 0xab);
        EXPECT(gbc.readMem(0xdd18), 0x4c);
        // DF 0380
        gbc.setState(0x52b8, 0xef95, 0x8fd0, 0x3b06, 0x674d, 0xe9c9, 0x0, 0x0);
        gbc.writeMem(0x52b8, { 0xdf });
        gbc.writeMem(0xef93, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xef93);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef93), 0xb9);
        EXPECT(gbc.readMem(0xef94), 0x52);
        // DF 0384
        gbc.setState(0xba1f, 0x9bf0, 0x3e0, 0x4ca0, 0x8437, 0x71b, 0x1, 0x0);
        gbc.writeMem(0x9bee, { 0x0, 0x0 });
        gbc.writeMem(0xba1f, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x9bee);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bee), 0x20);
        EXPECT(gbc.readMem(0x9bef), 0xba);
        EXPECT(gbc.readMem(0xba1f), 0xdf);
        // DF 038A
        gbc.setState(0x12cf, 0xc0bb, 0x8bb0, 0xca67, 0x9244, 0xc83d, 0x1, 0x0);
        gbc.writeMem(0x12cf, { 0xdf });
        gbc.writeMem(0xc0b9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xc0b9);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0b9), 0xd0);
        EXPECT(gbc.readMem(0xc0ba), 0x12);
        // DF 038C
        gbc.setState(0xbf6a, 0xfc22, 0x9fa0, 0x8e9e, 0x3430, 0xd934, 0x1, 0x0);
        gbc.writeMem(0xbf6a, { 0xdf });
        gbc.writeMem(0xfc20, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xfc20);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf6a), 0xdf);
        EXPECT(gbc.readMem(0xfc20), 0x6b);
        EXPECT(gbc.readMem(0xfc21), 0xbf);
        // DF 038F
        gbc.setState(0xe3ec, 0xe6ee, 0xb930, 0xe52b, 0x91e, 0xef35, 0x1, 0x1);
        gbc.writeMem(0xe3ec, { 0xdf });
        gbc.writeMem(0xe6ec, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xe6ec);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3ec), 0xdf);
        EXPECT(gbc.readMem(0xe6ec), 0xed);
        EXPECT(gbc.readMem(0xe6ed), 0xe3);
        // DF 0391
        gbc.setState(0x51d3, 0xaf86, 0x4ed0, 0xe81b, 0xb879, 0x2bb6, 0x1, 0x0);
        gbc.writeMem(0x51d3, { 0xdf });
        gbc.writeMem(0xaf84, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xaf84);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf84), 0xd4);
        EXPECT(gbc.readMem(0xaf85), 0x51);
        // DF 0393
        gbc.setState(0x5419, 0x8204, 0x2b50, 0xa1eb, 0xf136, 0xc1fe, 0x0, 0x1);
        gbc.writeMem(0x5419, { 0xdf });
        gbc.writeMem(0x8202, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x8202);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8202), 0x1a);
        EXPECT(gbc.readMem(0x8203), 0x54);
        // DF 0395
        gbc.setState(0x59b, 0xfa3e, 0xfe20, 0x5a81, 0xf1dc, 0xc69b, 0x1, 0x0);
        gbc.writeMem(0x59b, { 0xdf });
        gbc.writeMem(0xfa3c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xfa3c);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfa3c), 0x9c);
        EXPECT(gbc.readMem(0xfa3d), 0x5);
        // DF 0397
        gbc.setState(0xe96c, 0x8eba, 0x16f0, 0x39ec, 0xd368, 0x792f, 0x0, 0x1);
        gbc.writeMem(0x8eb8, { 0x0, 0x0 });
        gbc.writeMem(0xe96c, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x8eb8);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8eb8), 0x6d);
        EXPECT(gbc.readMem(0x8eb9), 0xe9);
        EXPECT(gbc.readMem(0xe96c), 0xdf);
        // DF 0398
        gbc.setState(0x9398, 0xd30c, 0xfc30, 0x3dd9, 0x81fc, 0x865f, 0x0, 0x0);
        gbc.writeMem(0x9398, { 0xdf });
        gbc.writeMem(0xd30a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xd30a);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9398), 0xdf);
        EXPECT(gbc.readMem(0xd30a), 0x99);
        EXPECT(gbc.readMem(0xd30b), 0x93);
        // DF 0399
        gbc.setState(0xced9, 0xef0f, 0x7b50, 0x5d74, 0x14e1, 0xc2ce, 0x1, 0x1);
        gbc.writeMem(0xced9, { 0xdf });
        gbc.writeMem(0xef0d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xef0d);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xced9), 0xdf);
        EXPECT(gbc.readMem(0xef0d), 0xda);
        EXPECT(gbc.readMem(0xef0e), 0xce);
        // DF 039B
        gbc.setState(0xd2a8, 0xd1de, 0x4e80, 0xf2c5, 0x6e4a, 0xfa6f, 0x1, 0x0);
        gbc.writeMem(0xd1dc, { 0x0, 0x0 });
        gbc.writeMem(0xd2a8, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xd1dc);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1dc), 0xa9);
        EXPECT(gbc.readMem(0xd1dd), 0xd2);
        EXPECT(gbc.readMem(0xd2a8), 0xdf);
        // DF 039C
        gbc.setState(0xcc5c, 0xb16a, 0x6570, 0x219d, 0xf499, 0x5ebc, 0x1, 0x0);
        gbc.writeMem(0xb168, { 0x0, 0x0 });
        gbc.writeMem(0xcc5c, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xb168);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb168), 0x5d);
        EXPECT(gbc.readMem(0xb169), 0xcc);
        EXPECT(gbc.readMem(0xcc5c), 0xdf);
        // DF 039D
        gbc.setState(0xcbbd, 0xa7b7, 0xc650, 0xe1d4, 0x1eb, 0xdc7, 0x0, 0x1);
        gbc.writeMem(0xa7b5, { 0x0, 0x0 });
        gbc.writeMem(0xcbbd, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xa7b5);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7b5), 0xbe);
        EXPECT(gbc.readMem(0xa7b6), 0xcb);
        EXPECT(gbc.readMem(0xcbbd), 0xdf);
        // DF 03A2
        gbc.setState(0x4d7, 0xdb61, 0x5570, 0xcad0, 0x194d, 0x8178, 0x1, 0x1);
        gbc.writeMem(0x4d7, { 0xdf });
        gbc.writeMem(0xdb5f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xdb5f);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb5f), 0xd8);
        EXPECT(gbc.readMem(0xdb60), 0x4);
        // DF 03A7
        gbc.setState(0xad94, 0xa9f8, 0xcbe0, 0xc27d, 0xeb58, 0x8f5c, 0x1, 0x1);
        gbc.writeMem(0xa9f6, { 0x0, 0x0 });
        gbc.writeMem(0xad94, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xa9f6);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9f6), 0x95);
        EXPECT(gbc.readMem(0xa9f7), 0xad);
        EXPECT(gbc.readMem(0xad94), 0xdf);
        // DF 03AA
        gbc.setState(0x15ae, 0x8522, 0xd460, 0xc304, 0xb534, 0x33db, 0x0, 0x1);
        gbc.writeMem(0x15ae, { 0xdf });
        gbc.writeMem(0x8520, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x8520);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8520), 0xaf);
        EXPECT(gbc.readMem(0x8521), 0x15);
        // DF 03AD
        gbc.setState(0x26eb, 0xb69b, 0xc420, 0x98e5, 0x1adb, 0xc911, 0x0, 0x0);
        gbc.writeMem(0x26eb, { 0xdf });
        gbc.writeMem(0xb699, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xb699);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb699), 0xec);
        EXPECT(gbc.readMem(0xb69a), 0x26);
        // DF 03B0
        gbc.setState(0x1eb5, 0xa996, 0x65a0, 0xfd8e, 0xaf09, 0x1f5a, 0x0, 0x1);
        gbc.writeMem(0x1eb5, { 0xdf });
        gbc.writeMem(0xa994, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xa994);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa994), 0xb6);
        EXPECT(gbc.readMem(0xa995), 0x1e);
        // DF 03B1
        gbc.setState(0x2f2c, 0xc1fa, 0x4780, 0x3d4e, 0x2f7c, 0x1602, 0x0, 0x0);
        gbc.writeMem(0x2f2c, { 0xdf });
        gbc.writeMem(0xc1f8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xc1f8);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1f8), 0x2d);
        EXPECT(gbc.readMem(0xc1f9), 0x2f);
        // DF 03B3
        gbc.setState(0x885e, 0xe64f, 0xadb0, 0x6723, 0xee07, 0x98dc, 0x1, 0x1);
        gbc.writeMem(0x885e, { 0xdf });
        gbc.writeMem(0xe64d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xe64d);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x885e), 0xdf);
        EXPECT(gbc.readMem(0xe64d), 0x5f);
        EXPECT(gbc.readMem(0xe64e), 0x88);
        // DF 03B8
        gbc.setState(0x7ef8, 0xd73d, 0x2e80, 0xd27b, 0x8730, 0x9ce5, 0x0, 0x1);
        gbc.writeMem(0x7ef8, { 0xdf });
        gbc.writeMem(0xd73b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xd73b);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd73b), 0xf9);
        EXPECT(gbc.readMem(0xd73c), 0x7e);
        // DF 03B9
        gbc.setState(0x2f68, 0x89e4, 0x4730, 0x1f26, 0xf22c, 0xa4b7, 0x0, 0x1);
        gbc.writeMem(0x2f68, { 0xdf });
        gbc.writeMem(0x89e2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x89e2);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89e2), 0x69);
        EXPECT(gbc.readMem(0x89e3), 0x2f);
        // DF 03BC
        gbc.setState(0xdb30, 0xfbf9, 0xe990, 0xf9cf, 0x4e0b, 0x2a6a, 0x1, 0x0);
        gbc.writeMem(0xdb30, { 0xdf });
        gbc.writeMem(0xfbf7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xfbf7);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb30), 0xdf);
        EXPECT(gbc.readMem(0xfbf7), 0x31);
        EXPECT(gbc.readMem(0xfbf8), 0xdb);
        // DF 03BE
        gbc.setState(0x2764, 0xad13, 0x1280, 0x98e0, 0xd727, 0x691e, 0x1, 0x1);
        gbc.writeMem(0x2764, { 0xdf });
        gbc.writeMem(0xad11, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xad11);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad11), 0x65);
        EXPECT(gbc.readMem(0xad12), 0x27);
        // DF 03C0
        gbc.setState(0x4f67, 0xffd0, 0xdb50, 0xae0d, 0xae79, 0xbc9a, 0x0, 0x0);
        gbc.writeMem(0x4f67, { 0xdf });
        gbc.writeMem(0xffce, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xffce);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffce), 0x68);
        EXPECT(gbc.readMem(0xffcf), 0x4f);
        // DF 03C1
        gbc.setState(0x5aa2, 0xf3ae, 0xc680, 0xf19a, 0xa026, 0xbe3d, 0x1, 0x0);
        gbc.writeMem(0x5aa2, { 0xdf });
        gbc.writeMem(0xf3ac, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xf3ac);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf3ac), 0xa3);
        EXPECT(gbc.readMem(0xf3ad), 0x5a);
        // DF 03C2
        gbc.setState(0xe910, 0xb250, 0x8080, 0x4423, 0xf962, 0xbe64, 0x0, 0x0);
        gbc.writeMem(0xb24e, { 0x0, 0x0 });
        gbc.writeMem(0xe910, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xb24e);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb24e), 0x11);
        EXPECT(gbc.readMem(0xb24f), 0xe9);
        EXPECT(gbc.readMem(0xe910), 0xdf);
        // DF 03C3
        gbc.setState(0xc084, 0xf5c5, 0x96e0, 0x815b, 0x3f4, 0x8918, 0x1, 0x1);
        gbc.writeMem(0xc084, { 0xdf });
        gbc.writeMem(0xf5c3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xf5c3);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc084), 0xdf);
        EXPECT(gbc.readMem(0xf5c3), 0x85);
        EXPECT(gbc.readMem(0xf5c4), 0xc0);
        // DF 03C4
        gbc.setState(0x1b5, 0xaf1b, 0xd620, 0x8b95, 0x8d45, 0xbc42, 0x1, 0x0);
        gbc.writeMem(0x1b5, { 0xdf });
        gbc.writeMem(0xaf19, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xaf19);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf19), 0xb6);
        EXPECT(gbc.readMem(0xaf1a), 0x1);
        // DF 03C7
        gbc.setState(0x48be, 0x81fd, 0x4960, 0x60a9, 0x32f4, 0x6883, 0x1, 0x0);
        gbc.writeMem(0x48be, { 0xdf });
        gbc.writeMem(0x81fb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x81fb);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81fb), 0xbf);
        EXPECT(gbc.readMem(0x81fc), 0x48);
        // DF 03C8
        gbc.setState(0x9252, 0xacaa, 0x6da0, 0xc87, 0x76, 0x8109, 0x0, 0x0);
        gbc.writeMem(0x9252, { 0xdf });
        gbc.writeMem(0xaca8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xaca8);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9252), 0xdf);
        EXPECT(gbc.readMem(0xaca8), 0x53);
        EXPECT(gbc.readMem(0xaca9), 0x92);
        // DF 03C9
        gbc.setState(0xac4a, 0xb438, 0x7f30, 0x1f1a, 0x54b4, 0x4090, 0x0, 0x1);
        gbc.writeMem(0xac4a, { 0xdf });
        gbc.writeMem(0xb436, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xb436);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac4a), 0xdf);
        EXPECT(gbc.readMem(0xb436), 0x4b);
        EXPECT(gbc.readMem(0xb437), 0xac);
        // DF 03CD
        gbc.setState(0x6673, 0xc767, 0x91f0, 0x115b, 0x5069, 0xccda, 0x1, 0x0);
        gbc.writeMem(0x6673, { 0xdf });
        gbc.writeMem(0xc765, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xc765);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc765), 0x74);
        EXPECT(gbc.readMem(0xc766), 0x66);
        // DF 03CF
        gbc.setState(0x6b2c, 0xd0bf, 0x4850, 0x9e55, 0x76, 0x166c, 0x0, 0x0);
        gbc.writeMem(0x6b2c, { 0xdf });
        gbc.writeMem(0xd0bd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xd0bd);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0bd), 0x2d);
        EXPECT(gbc.readMem(0xd0be), 0x6b);
        // DF 03D3
        gbc.setState(0xd6d9, 0xca1f, 0x38a0, 0xaabd, 0x8c4a, 0xe237, 0x1, 0x0);
        gbc.writeMem(0xca1d, { 0x0, 0x0 });
        gbc.writeMem(0xd6d9, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xca1d);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca1d), 0xda);
        EXPECT(gbc.readMem(0xca1e), 0xd6);
        EXPECT(gbc.readMem(0xd6d9), 0xdf);
        // DF 03D5
        gbc.setState(0x5053, 0xf8e8, 0xa5a0, 0x5bba, 0x7b87, 0x904, 0x1, 0x0);
        gbc.writeMem(0x5053, { 0xdf });
        gbc.writeMem(0xf8e6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xf8e6);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf8e6), 0x54);
        EXPECT(gbc.readMem(0xf8e7), 0x50);
        // DF 03D6
        gbc.setState(0x69c8, 0xe4c8, 0x760, 0x276c, 0x24b9, 0xbb17, 0x1, 0x0);
        gbc.writeMem(0x69c8, { 0xdf });
        gbc.writeMem(0xe4c6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xe4c6);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4c6), 0xc9);
        EXPECT(gbc.readMem(0xe4c7), 0x69);
        // DF 03D9
        gbc.setState(0x51de, 0xcc60, 0xf0f0, 0x5d0c, 0xeba6, 0x8e2a, 0x0, 0x1);
        gbc.writeMem(0x51de, { 0xdf });
        gbc.writeMem(0xcc5e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xcc5e);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc5e), 0xdf);
        EXPECT(gbc.readMem(0xcc5f), 0x51);
        // DF 03DA
        gbc.setState(0x9188, 0xe637, 0x7300, 0x6262, 0xed82, 0x58f8, 0x0, 0x1);
        gbc.writeMem(0x9188, { 0xdf });
        gbc.writeMem(0xe635, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xe635);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9188), 0xdf);
        EXPECT(gbc.readMem(0xe635), 0x89);
        EXPECT(gbc.readMem(0xe636), 0x91);
        // DF 03DB
        gbc.setState(0x209, 0x92dc, 0x9830, 0xd933, 0x436, 0xae2c, 0x0, 0x0);
        gbc.writeMem(0x209, { 0xdf });
        gbc.writeMem(0x92da, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x92da);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92da), 0xa);
        EXPECT(gbc.readMem(0x92db), 0x2);
        // DF 03DC
        gbc.setState(0xc0ed, 0x86e9, 0x5af0, 0x6b12, 0x1ea7, 0xbdcb, 0x0, 0x1);
        gbc.writeMem(0x86e7, { 0x0, 0x0 });
        gbc.writeMem(0xc0ed, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x86e7);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86e7), 0xee);
        EXPECT(gbc.readMem(0x86e8), 0xc0);
        EXPECT(gbc.readMem(0xc0ed), 0xdf);
        // DF 03DE
        gbc.setState(0xeadd, 0xc1e6, 0x8ee0, 0x670b, 0xbf0c, 0x906e, 0x0, 0x1);
        gbc.writeMem(0xc1e4, { 0x0, 0x0 });
        gbc.writeMem(0xeadd, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xc1e4);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1e4), 0xde);
        EXPECT(gbc.readMem(0xc1e5), 0xea);
        EXPECT(gbc.readMem(0xeadd), 0xdf);
        // DF 03DF
        gbc.setState(0x82bb, 0xa6bc, 0x5dd0, 0xfccf, 0xe7e6, 0xc9a5, 0x1, 0x1);
        gbc.writeMem(0x82bb, { 0xdf });
        gbc.writeMem(0xa6ba, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xa6ba);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82bb), 0xdf);
        EXPECT(gbc.readMem(0xa6ba), 0xbc);
        EXPECT(gbc.readMem(0xa6bb), 0x82);
        // DF 03E0
        gbc.setState(0xb6af, 0xddf6, 0x3560, 0xf327, 0x77d7, 0xcaf7, 0x1, 0x0);
        gbc.writeMem(0xb6af, { 0xdf });
        gbc.writeMem(0xddf4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xddf4);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6af), 0xdf);
        EXPECT(gbc.readMem(0xddf4), 0xb0);
        EXPECT(gbc.readMem(0xddf5), 0xb6);
        // DF 03E1
        gbc.setState(0xebc8, 0x8373, 0x63f0, 0xc46e, 0x2a89, 0xc630, 0x1, 0x0);
        gbc.writeMem(0x8371, { 0x0, 0x0 });
        gbc.writeMem(0xebc8, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x8371);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8371), 0xc9);
        EXPECT(gbc.readMem(0x8372), 0xeb);
        EXPECT(gbc.readMem(0xebc8), 0xdf);
        // DF 03E2
        gbc.setState(0x50da, 0xcf10, 0xdae0, 0xad0a, 0x13e, 0x4601, 0x0, 0x1);
        gbc.writeMem(0x50da, { 0xdf });
        gbc.writeMem(0xcf0e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xcf0e);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf0e), 0xdb);
        EXPECT(gbc.readMem(0xcf0f), 0x50);
        // DF 03E5
        gbc.setState(0x7ac4, 0xc528, 0xb190, 0x8074, 0x7b0c, 0x8ec5, 0x1, 0x0);
        gbc.writeMem(0x7ac4, { 0xdf });
        gbc.writeMem(0xc526, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xc526);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc526), 0xc5);
        EXPECT(gbc.readMem(0xc527), 0x7a);
        // DF 03E6
        gbc.setState(0xa08a, 0xaa9a, 0x88d0, 0x9070, 0xa19e, 0x9f01, 0x1, 0x0);
        gbc.writeMem(0xa08a, { 0xdf });
        gbc.writeMem(0xaa98, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xaa98);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa08a), 0xdf);
        EXPECT(gbc.readMem(0xaa98), 0x8b);
        EXPECT(gbc.readMem(0xaa99), 0xa0);
        // DF 03E7
        gbc.setState(0x6f83, 0x93f1, 0x72c0, 0x297f, 0x90b8, 0xcc67, 0x0, 0x0);
        gbc.writeMem(0x6f83, { 0xdf });
        gbc.writeMem(0x93ef, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x93ef);
        EXPECT(gbc.pc(), 0x18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93ef), 0x84);
        EXPECT(gbc.readMem(0x93f0), 0x6f);
    }
}
#endif
