    TEST(gbcemu, opcode_cb_0f) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 0F 0000
        gbc.setState(0x84a, 0xc70, 0x8530, 0x5adc, 0x879c, 0x38f9, 0x0, 0x1);
        gbc.writeMem(0x84a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0xc70, gbc.sp());
        EXPECT(0x84c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0002
        gbc.setState(0xeea5, 0x30b6, 0x51a0, 0x595b, 0xa9b6, 0xc50c, 0x0, 0x1);
        gbc.writeMem(0xeea5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x30b6, gbc.sp());
        EXPECT(0xeea7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeea5));
        EXPECT(0xf, gbc.readMem(0xeea6));
        // CB 0F 0003
        gbc.setState(0x9397, 0x184, 0x2ec0, 0xef2b, 0x678f, 0xda47, 0x1, 0x0);
        gbc.writeMem(0x9397, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x184, gbc.sp());
        EXPECT(0x9399, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9397));
        EXPECT(0xf, gbc.readMem(0x9398));
        // CB 0F 0004
        gbc.setState(0x1c03, 0x106b, 0xdcb0, 0x85ba, 0xb785, 0x9201, 0x0, 0x1);
        gbc.writeMem(0x1c03, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0x106b, gbc.sp());
        EXPECT(0x1c05, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0005
        gbc.setState(0xa708, 0xa2e7, 0xb20, 0x261b, 0xde0, 0xb4, 0x1, 0x0);
        gbc.writeMem(0xa708, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0xa2e7, gbc.sp());
        EXPECT(0xa70a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa708));
        EXPECT(0xf, gbc.readMem(0xa709));
        // CB 0F 0006
        gbc.setState(0xad70, 0x480b, 0x9780, 0x5e09, 0x1e10, 0x93e6, 0x1, 0x1);
        gbc.writeMem(0xad70, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x480b, gbc.sp());
        EXPECT(0xad72, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xad70));
        EXPECT(0xf, gbc.readMem(0xad71));
        // CB 0F 0007
        gbc.setState(0x84c9, 0xc1a7, 0xd470, 0xd47e, 0x388, 0x1d12, 0x0, 0x1);
        gbc.writeMem(0x84c9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0xc1a7, gbc.sp());
        EXPECT(0x84cb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84c9));
        EXPECT(0xf, gbc.readMem(0x84ca));
        // CB 0F 0008
        gbc.setState(0x6a32, 0x445d, 0xeac0, 0x3b46, 0x9773, 0x94af, 0x1, 0x1);
        gbc.writeMem(0x6a32, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x445d, gbc.sp());
        EXPECT(0x6a34, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0009
        gbc.setState(0x9fc7, 0xdae3, 0xf560, 0xa558, 0x5c69, 0x750f, 0x0, 0x1);
        gbc.writeMem(0x9fc7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0xdae3, gbc.sp());
        EXPECT(0x9fc9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9fc7));
        EXPECT(0xf, gbc.readMem(0x9fc8));
        // CB 0F 000A
        gbc.setState(0x4f40, 0xf408, 0xbfa0, 0xc604, 0x2357, 0xfc2e, 0x1, 0x0);
        gbc.writeMem(0x4f40, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0xf408, gbc.sp());
        EXPECT(0x4f42, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 000B
        gbc.setState(0x73d, 0x3d82, 0x13c0, 0xb3c, 0x735a, 0x18d3, 0x1, 0x1);
        gbc.writeMem(0x73d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x3d82, gbc.sp());
        EXPECT(0x73f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 000C
        gbc.setState(0x88ef, 0x2f46, 0x5bc0, 0x5269, 0x1373, 0xd025, 0x0, 0x0);
        gbc.writeMem(0x88ef, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x2f46, gbc.sp());
        EXPECT(0x88f1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x88ef));
        EXPECT(0xf, gbc.readMem(0x88f0));
        // CB 0F 000D
        gbc.setState(0x30cc, 0xbb7e, 0x2430, 0xf9c5, 0x8575, 0xc30c, 0x0, 0x1);
        gbc.writeMem(0x30cc, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xbb7e, gbc.sp());
        EXPECT(0x30ce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 000E
        gbc.setState(0x8d44, 0x7aa4, 0xd8f0, 0xf90b, 0xcce7, 0xc8ab, 0x0, 0x0);
        gbc.writeMem(0x8d44, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x7aa4, gbc.sp());
        EXPECT(0x8d46, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8d44));
        EXPECT(0xf, gbc.readMem(0x8d45));
        // CB 0F 000F
        gbc.setState(0x4da0, 0xa150, 0x5a30, 0x5a3, 0x3c99, 0xb19c, 0x1, 0x0);
        gbc.writeMem(0x4da0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0xa150, gbc.sp());
        EXPECT(0x4da2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0010
        gbc.setState(0x7411, 0xbfff, 0x3150, 0xa9ba, 0x5330, 0x350a, 0x0, 0x0);
        gbc.writeMem(0x7411, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0xbfff, gbc.sp());
        EXPECT(0x7413, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0011
        gbc.setState(0x6562, 0x34b6, 0x63e0, 0xd342, 0x2d8a, 0x4cbf, 0x1, 0x0);
        gbc.writeMem(0x6562, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x34b6, gbc.sp());
        EXPECT(0x6564, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0012
        gbc.setState(0xc8b8, 0xb88a, 0x7df0, 0xae2f, 0xbc59, 0xcd34, 0x0, 0x0);
        gbc.writeMem(0xc8b8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0xb88a, gbc.sp());
        EXPECT(0xc8ba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc8b8));
        EXPECT(0xf, gbc.readMem(0xc8b9));
        // CB 0F 0013
        gbc.setState(0xa88b, 0x3d6b, 0xeaf0, 0x1def, 0xe9c5, 0xfa73, 0x0, 0x1);
        gbc.writeMem(0xa88b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x3d6b, gbc.sp());
        EXPECT(0xa88d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa88b));
        EXPECT(0xf, gbc.readMem(0xa88c));
        // CB 0F 0014
        gbc.setState(0x58d4, 0x3f42, 0x990, 0xafd3, 0x15a5, 0x3a31, 0x0, 0x1);
        gbc.writeMem(0x58d4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x3f42, gbc.sp());
        EXPECT(0x58d6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0015
        gbc.setState(0x362e, 0xf0b7, 0x7b0, 0x250c, 0x323c, 0x173e, 0x1, 0x0);
        gbc.writeMem(0x362e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0xf0b7, gbc.sp());
        EXPECT(0x3630, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0016
        gbc.setState(0x1530, 0xf57d, 0x3c30, 0xeb61, 0xbde0, 0xa216, 0x0, 0x1);
        gbc.writeMem(0x1530, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0xf57d, gbc.sp());
        EXPECT(0x1532, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0017
        gbc.setState(0x8bf1, 0xca02, 0x8460, 0x2a9f, 0x8e5c, 0xfd73, 0x0, 0x1);
        gbc.writeMem(0x8bf1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0xca02, gbc.sp());
        EXPECT(0x8bf3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8bf1));
        EXPECT(0xf, gbc.readMem(0x8bf2));
        // CB 0F 0018
        gbc.setState(0xbd4a, 0x7293, 0xb310, 0x63dd, 0x4a20, 0x8488, 0x0, 0x1);
        gbc.writeMem(0xbd4a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0x7293, gbc.sp());
        EXPECT(0xbd4c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd4a));
        EXPECT(0xf, gbc.readMem(0xbd4b));
        // CB 0F 001A
        gbc.setState(0x4d7d, 0x2d82, 0x2380, 0x55c4, 0x6bd2, 0x94f6, 0x1, 0x0);
        gbc.writeMem(0x4d7d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x2d82, gbc.sp());
        EXPECT(0x4d7f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 001B
        gbc.setState(0x7846, 0x7c60, 0x230, 0xa81e, 0x8714, 0xca74, 0x0, 0x1);
        gbc.writeMem(0x7846, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x7c60, gbc.sp());
        EXPECT(0x7848, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 001C
        gbc.setState(0xb2f8, 0xa25b, 0xd5a0, 0xeb5e, 0x6419, 0x8c71, 0x0, 0x1);
        gbc.writeMem(0xb2f8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xa25b, gbc.sp());
        EXPECT(0xb2fa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb2f8));
        EXPECT(0xf, gbc.readMem(0xb2f9));
        // CB 0F 001D
        gbc.setState(0xec81, 0x566e, 0x4740, 0x7b57, 0x107b, 0xe625, 0x1, 0x1);
        gbc.writeMem(0xec81, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x566e, gbc.sp());
        EXPECT(0xec83, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xec81));
        EXPECT(0xf, gbc.readMem(0xec82));
        // CB 0F 001E
        gbc.setState(0x85a, 0xa1cd, 0x9310, 0x6fb8, 0xfc83, 0x7d96, 0x0, 0x0);
        gbc.writeMem(0x85a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xa1cd, gbc.sp());
        EXPECT(0x85c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 001F
        gbc.setState(0x6866, 0xfd24, 0x69b0, 0xdea9, 0xb073, 0xf60e, 0x1, 0x0);
        gbc.writeMem(0x6866, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0xfd24, gbc.sp());
        EXPECT(0x6868, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0020
        gbc.setState(0xc782, 0xdfa2, 0x9660, 0x74b2, 0xc950, 0x2a54, 0x1, 0x0);
        gbc.writeMem(0xc782, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0xdfa2, gbc.sp());
        EXPECT(0xc784, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc782));
        EXPECT(0xf, gbc.readMem(0xc783));
        // CB 0F 0021
        gbc.setState(0x6966, 0x22d0, 0xb4e0, 0xd23c, 0xa832, 0xd631, 0x1, 0x1);
        gbc.writeMem(0x6966, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x22d0, gbc.sp());
        EXPECT(0x6968, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0023
        gbc.setState(0xa472, 0x1f71, 0x2e60, 0x326c, 0xecac, 0xcde7, 0x0, 0x1);
        gbc.writeMem(0xa472, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0x1f71, gbc.sp());
        EXPECT(0xa474, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa472));
        EXPECT(0xf, gbc.readMem(0xa473));
        // CB 0F 0024
        gbc.setState(0xe2f5, 0x90b8, 0x21c0, 0x518f, 0xd27d, 0xd4e9, 0x1, 0x0);
        gbc.writeMem(0xe2f5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x90b8, gbc.sp());
        EXPECT(0xe2f7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe2f5));
        EXPECT(0xf, gbc.readMem(0xe2f6));
        // CB 0F 0025
        gbc.setState(0xc42e, 0xfc81, 0xb600, 0x122f, 0x717d, 0xf971, 0x1, 0x0);
        gbc.writeMem(0xc42e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xfc81, gbc.sp());
        EXPECT(0xc430, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc42e));
        EXPECT(0xf, gbc.readMem(0xc42f));
        // CB 0F 0026
        gbc.setState(0x37d7, 0xd3f0, 0xeef0, 0xcc57, 0x7f16, 0xa06d, 0x1, 0x1);
        gbc.writeMem(0x37d7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xd3f0, gbc.sp());
        EXPECT(0x37d9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0027
        gbc.setState(0xeb2f, 0xfefc, 0xc60, 0x3a0f, 0x8de5, 0xac0b, 0x0, 0x1);
        gbc.writeMem(0xeb2f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xfefc, gbc.sp());
        EXPECT(0xeb31, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb2f));
        EXPECT(0xf, gbc.readMem(0xeb30));
        // CB 0F 0028
        gbc.setState(0x8738, 0xcc23, 0x2590, 0xe0c9, 0x8f0a, 0xbe20, 0x0, 0x1);
        gbc.writeMem(0x8738, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0xcc23, gbc.sp());
        EXPECT(0x873a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8738));
        EXPECT(0xf, gbc.readMem(0x8739));
        // CB 0F 0029
        gbc.setState(0x9d0, 0x9f4b, 0xbf70, 0x6402, 0xe186, 0xf27a, 0x1, 0x1);
        gbc.writeMem(0x9d0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x9f4b, gbc.sp());
        EXPECT(0x9d2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 002A
        gbc.setState(0xbfdd, 0x530b, 0xc010, 0x1716, 0x4d74, 0x2688, 0x1, 0x1);
        gbc.writeMem(0xbfdd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0x530b, gbc.sp());
        EXPECT(0xbfdf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbfdd));
        EXPECT(0xf, gbc.readMem(0xbfde));
        // CB 0F 002B
        gbc.setState(0x8573, 0xc16, 0xff60, 0x3d1f, 0xddc9, 0xf772, 0x1, 0x0);
        gbc.writeMem(0x8573, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0xc16, gbc.sp());
        EXPECT(0x8575, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8573));
        EXPECT(0xf, gbc.readMem(0x8574));
        // CB 0F 002C
        gbc.setState(0x8bf3, 0x9a8f, 0x8d60, 0x9dbd, 0x53fa, 0xf2db, 0x1, 0x1);
        gbc.writeMem(0x8bf3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x9a8f, gbc.sp());
        EXPECT(0x8bf5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8bf3));
        EXPECT(0xf, gbc.readMem(0x8bf4));
        // CB 0F 002D
        gbc.setState(0xac82, 0xc018, 0xaee0, 0xfada, 0xc056, 0xef65, 0x1, 0x1);
        gbc.writeMem(0xac82, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0xc018, gbc.sp());
        EXPECT(0xac84, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac82));
        EXPECT(0xf, gbc.readMem(0xac83));
        // CB 0F 002F
        gbc.setState(0x547b, 0xb5c6, 0x9350, 0xe1be, 0x9b99, 0x2b44, 0x1, 0x0);
        gbc.writeMem(0x547b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xb5c6, gbc.sp());
        EXPECT(0x547d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0030
        gbc.setState(0x1386, 0x4c8a, 0x6c80, 0x293e, 0x12c1, 0x1455, 0x1, 0x0);
        gbc.writeMem(0x1386, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x4c8a, gbc.sp());
        EXPECT(0x1388, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0031
        gbc.setState(0x88aa, 0x6b49, 0x3860, 0xe979, 0x7495, 0x45db, 0x0, 0x0);
        gbc.writeMem(0x88aa, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x6b49, gbc.sp());
        EXPECT(0x88ac, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x88aa));
        EXPECT(0xf, gbc.readMem(0x88ab));
        // CB 0F 0032
        gbc.setState(0x9e05, 0x38ec, 0x5950, 0x35a1, 0xa6e2, 0x2488, 0x0, 0x0);
        gbc.writeMem(0x9e05, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0x38ec, gbc.sp());
        EXPECT(0x9e07, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9e05));
        EXPECT(0xf, gbc.readMem(0x9e06));
        // CB 0F 0033
        gbc.setState(0xbc9b, 0xcad, 0x83a0, 0xbe61, 0x1615, 0x5380, 0x0, 0x0);
        gbc.writeMem(0xbc9b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0xcad, gbc.sp());
        EXPECT(0xbc9d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbc9b));
        EXPECT(0xf, gbc.readMem(0xbc9c));
        // CB 0F 0034
        gbc.setState(0xd3f4, 0xd04f, 0x8b80, 0x3de3, 0x78c, 0xc26f, 0x0, 0x1);
        gbc.writeMem(0xd3f4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0xd04f, gbc.sp());
        EXPECT(0xd3f6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd3f4));
        EXPECT(0xf, gbc.readMem(0xd3f5));
        // CB 0F 0035
        gbc.setState(0xdfba, 0x895a, 0x1c10, 0x3f3c, 0x3652, 0x8757, 0x0, 0x0);
        gbc.writeMem(0xdfba, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x895a, gbc.sp());
        EXPECT(0xdfbc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdfba));
        EXPECT(0xf, gbc.readMem(0xdfbb));
        // CB 0F 0036
        gbc.setState(0x76ee, 0x7e93, 0x9260, 0x1f82, 0xe7cd, 0x51a3, 0x1, 0x1);
        gbc.writeMem(0x76ee, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x7e93, gbc.sp());
        EXPECT(0x76f0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0037
        gbc.setState(0x4d27, 0xfccd, 0xb9c0, 0x1ac2, 0x2b1b, 0xbe82, 0x1, 0x1);
        gbc.writeMem(0x4d27, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xfccd, gbc.sp());
        EXPECT(0x4d29, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0038
        gbc.setState(0xd1e4, 0xe4eb, 0x22b0, 0xa741, 0xe5de, 0xe6c3, 0x0, 0x0);
        gbc.writeMem(0xd1e4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xe4eb, gbc.sp());
        EXPECT(0xd1e6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd1e4));
        EXPECT(0xf, gbc.readMem(0xd1e5));
        // CB 0F 0039
        gbc.setState(0x3c26, 0xb269, 0x4430, 0xc08f, 0x5c41, 0x30a8, 0x0, 0x1);
        gbc.writeMem(0x3c26, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xb269, gbc.sp());
        EXPECT(0x3c28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 003A
        gbc.setState(0x81e0, 0xf4e6, 0x7c70, 0x4991, 0xe0c6, 0x4a1b, 0x1, 0x1);
        gbc.writeMem(0x81e0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0xf4e6, gbc.sp());
        EXPECT(0x81e2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x81e0));
        EXPECT(0xf, gbc.readMem(0x81e1));
        // CB 0F 003B
        gbc.setState(0xc872, 0x7667, 0x65c0, 0x2f78, 0xfdfa, 0xf1d8, 0x1, 0x0);
        gbc.writeMem(0xc872, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x7667, gbc.sp());
        EXPECT(0xc874, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc872));
        EXPECT(0xf, gbc.readMem(0xc873));
        // CB 0F 003C
        gbc.setState(0x8281, 0xa7d4, 0x7ff0, 0x3843, 0x3241, 0x2d21, 0x1, 0x0);
        gbc.writeMem(0x8281, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0xa7d4, gbc.sp());
        EXPECT(0x8283, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8281));
        EXPECT(0xf, gbc.readMem(0x8282));
        // CB 0F 003D
        gbc.setState(0xa24e, 0xce79, 0xfb10, 0x682e, 0xd105, 0x22b8, 0x1, 0x0);
        gbc.writeMem(0xa24e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0xce79, gbc.sp());
        EXPECT(0xa250, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa24e));
        EXPECT(0xf, gbc.readMem(0xa24f));
        // CB 0F 003E
        gbc.setState(0xcb37, 0x1626, 0xdf40, 0x2160, 0x94a7, 0x1c64, 0x1, 0x1);
        gbc.writeMem(0xcb37, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0x1626, gbc.sp());
        EXPECT(0xcb39, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcb37));
        EXPECT(0xf, gbc.readMem(0xcb38));
        // CB 0F 003F
        gbc.setState(0x52f5, 0xd92c, 0x8e20, 0x7339, 0xca71, 0x538c, 0x0, 0x1);
        gbc.writeMem(0x52f5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xd92c, gbc.sp());
        EXPECT(0x52f7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0040
        gbc.setState(0xa13f, 0x8de0, 0x7c10, 0xf818, 0xdf35, 0xf33f, 0x0, 0x0);
        gbc.writeMem(0xa13f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x8de0, gbc.sp());
        EXPECT(0xa141, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa13f));
        EXPECT(0xf, gbc.readMem(0xa140));
        // CB 0F 0041
        gbc.setState(0x3d51, 0x5e66, 0xf420, 0x12bf, 0x874f, 0x230f, 0x1, 0x0);
        gbc.writeMem(0x3d51, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0x5e66, gbc.sp());
        EXPECT(0x3d53, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0042
        gbc.setState(0x8698, 0xab6a, 0x66f0, 0x40ee, 0xc63e, 0x331e, 0x0, 0x0);
        gbc.writeMem(0x8698, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0xab6a, gbc.sp());
        EXPECT(0x869a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8698));
        EXPECT(0xf, gbc.readMem(0x8699));
        // CB 0F 0043
        gbc.setState(0x80e2, 0x7aa8, 0x7c30, 0xff28, 0x2153, 0x7be5, 0x1, 0x0);
        gbc.writeMem(0x80e2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x7aa8, gbc.sp());
        EXPECT(0x80e4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x80e2));
        EXPECT(0xf, gbc.readMem(0x80e3));
        // CB 0F 0044
        gbc.setState(0x6bb2, 0xc32f, 0x6b50, 0x3382, 0xed16, 0x34a8, 0x0, 0x1);
        gbc.writeMem(0x6bb2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xc32f, gbc.sp());
        EXPECT(0x6bb4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0045
        gbc.setState(0x5754, 0x2ccd, 0xa880, 0x2e77, 0x8ebe, 0x3d63, 0x1, 0x1);
        gbc.writeMem(0x5754, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0x2ccd, gbc.sp());
        EXPECT(0x5756, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0046
        gbc.setState(0x98c8, 0xc3bd, 0xe840, 0xeb89, 0xe18b, 0xfb1c, 0x0, 0x1);
        gbc.writeMem(0x98c8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0xc3bd, gbc.sp());
        EXPECT(0x98ca, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x98c8));
        EXPECT(0xf, gbc.readMem(0x98c9));
        // CB 0F 0047
        gbc.setState(0x440e, 0x1287, 0xf9f0, 0x6f21, 0x70fe, 0x927b, 0x1, 0x1);
        gbc.writeMem(0x440e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x1287, gbc.sp());
        EXPECT(0x4410, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0048
        gbc.setState(0xaccb, 0xb9dd, 0xe880, 0x612a, 0x9f1e, 0x5baf, 0x1, 0x1);
        gbc.writeMem(0xaccb, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0xb9dd, gbc.sp());
        EXPECT(0xaccd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaccb));
        EXPECT(0xf, gbc.readMem(0xaccc));
        // CB 0F 0049
        gbc.setState(0x1bdc, 0xd275, 0xc470, 0x7357, 0x22e9, 0x8443, 0x0, 0x0);
        gbc.writeMem(0x1bdc, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0xd275, gbc.sp());
        EXPECT(0x1bde, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 004A
        gbc.setState(0x4299, 0xbffc, 0xfed0, 0x4762, 0x60b2, 0xd90d, 0x0, 0x1);
        gbc.writeMem(0x4299, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0xbffc, gbc.sp());
        EXPECT(0x429b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 004B
        gbc.setState(0xad08, 0x4e87, 0x4790, 0x7eda, 0x4b71, 0x2879, 0x0, 0x1);
        gbc.writeMem(0xad08, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x4e87, gbc.sp());
        EXPECT(0xad0a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xad08));
        EXPECT(0xf, gbc.readMem(0xad09));
        // CB 0F 004C
        gbc.setState(0xa62b, 0xceee, 0xc7e0, 0x3b06, 0xe508, 0xb5fa, 0x0, 0x1);
        gbc.writeMem(0xa62b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xceee, gbc.sp());
        EXPECT(0xa62d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa62b));
        EXPECT(0xf, gbc.readMem(0xa62c));
        // CB 0F 004D
        gbc.setState(0x4a62, 0xab48, 0x9120, 0x2305, 0x37b3, 0xa051, 0x1, 0x1);
        gbc.writeMem(0x4a62, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0xab48, gbc.sp());
        EXPECT(0x4a64, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 004E
        gbc.setState(0xa0f8, 0x9ed1, 0x2c20, 0xf44b, 0x7802, 0xcb8, 0x1, 0x1);
        gbc.writeMem(0xa0f8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x9ed1, gbc.sp());
        EXPECT(0xa0fa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa0f8));
        EXPECT(0xf, gbc.readMem(0xa0f9));
        // CB 0F 004F
        gbc.setState(0x5f3d, 0x7a01, 0xded0, 0x34fd, 0xc810, 0xc66c, 0x1, 0x1);
        gbc.writeMem(0x5f3d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x7a01, gbc.sp());
        EXPECT(0x5f3f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0050
        gbc.setState(0xdfad, 0x2117, 0xa880, 0x4124, 0x1767, 0xb53d, 0x1, 0x1);
        gbc.writeMem(0xdfad, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x2117, gbc.sp());
        EXPECT(0xdfaf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdfad));
        EXPECT(0xf, gbc.readMem(0xdfae));
        // CB 0F 0051
        gbc.setState(0x5704, 0x611a, 0x69d0, 0x536a, 0x199b, 0x240e, 0x0, 0x1);
        gbc.writeMem(0x5704, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x611a, gbc.sp());
        EXPECT(0x5706, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0052
        gbc.setState(0x90a3, 0x7d1d, 0xcb0, 0x3121, 0x1a76, 0xe8e6, 0x1, 0x1);
        gbc.writeMem(0x90a3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x7d1d, gbc.sp());
        EXPECT(0x90a5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x90a3));
        EXPECT(0xf, gbc.readMem(0x90a4));
        // CB 0F 0053
        gbc.setState(0x271d, 0x3648, 0xffa0, 0x1a7c, 0x2052, 0x2d6a, 0x0, 0x0);
        gbc.writeMem(0x271d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0x3648, gbc.sp());
        EXPECT(0x271f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0054
        gbc.setState(0x8ea4, 0x7456, 0x8300, 0x513d, 0x96b, 0x5f7c, 0x1, 0x1);
        gbc.writeMem(0x8ea4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x7456, gbc.sp());
        EXPECT(0x8ea6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ea4));
        EXPECT(0xf, gbc.readMem(0x8ea5));
        // CB 0F 0055
        gbc.setState(0xe97a, 0x4232, 0x3360, 0x53b2, 0xaa7d, 0x8798, 0x0, 0x1);
        gbc.writeMem(0xe97a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x4232, gbc.sp());
        EXPECT(0xe97c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe97a));
        EXPECT(0xf, gbc.readMem(0xe97b));
        // CB 0F 0056
        gbc.setState(0x4404, 0x7320, 0xd610, 0x2d2f, 0xefdb, 0x8082, 0x1, 0x0);
        gbc.writeMem(0x4404, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x7320, gbc.sp());
        EXPECT(0x4406, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0057
        gbc.setState(0x137, 0x4af8, 0xb080, 0x74e5, 0x1819, 0x237c, 0x1, 0x1);
        gbc.writeMem(0x137, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x4af8, gbc.sp());
        EXPECT(0x139, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0058
        gbc.setState(0x4dbc, 0x1780, 0x970, 0xdf98, 0xe30, 0x3150, 0x0, 0x0);
        gbc.writeMem(0x4dbc, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x1780, gbc.sp());
        EXPECT(0x4dbe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0059
        gbc.setState(0x229d, 0x8f9a, 0x4ae0, 0xcde6, 0x9e55, 0xc952, 0x1, 0x0);
        gbc.writeMem(0x229d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x8f9a, gbc.sp());
        EXPECT(0x229f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 005A
        gbc.setState(0x3d5a, 0xdd00, 0x1ea0, 0x6fd4, 0x7479, 0x56f8, 0x0, 0x1);
        gbc.writeMem(0x3d5a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0xdd00, gbc.sp());
        EXPECT(0x3d5c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 005B
        gbc.setState(0x8996, 0x6dcd, 0xa670, 0x4b59, 0x8091, 0x83c5, 0x1, 0x0);
        gbc.writeMem(0x8996, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x6dcd, gbc.sp());
        EXPECT(0x8998, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8996));
        EXPECT(0xf, gbc.readMem(0x8997));
        // CB 0F 005C
        gbc.setState(0x287a, 0x7e66, 0x4470, 0xcf3, 0xeb2f, 0x6914, 0x0, 0x0);
        gbc.writeMem(0x287a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x7e66, gbc.sp());
        EXPECT(0x287c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 005D
        gbc.setState(0xe03f, 0x22fd, 0x24f0, 0xeb06, 0x6ef3, 0x4ec9, 0x1, 0x1);
        gbc.writeMem(0xe03f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x22fd, gbc.sp());
        EXPECT(0xe041, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe03f));
        EXPECT(0xf, gbc.readMem(0xe040));
        // CB 0F 005E
        gbc.setState(0x800d, 0xe45e, 0xd800, 0xa57b, 0x931d, 0x244a, 0x0, 0x0);
        gbc.writeMem(0x800d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0xe45e, gbc.sp());
        EXPECT(0x800f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x800d));
        EXPECT(0xf, gbc.readMem(0x800e));
        // CB 0F 0060
        gbc.setState(0x888e, 0x7c93, 0xd90, 0xd374, 0x42da, 0x9491, 0x0, 0x1);
        gbc.writeMem(0x888e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x7c93, gbc.sp());
        EXPECT(0x8890, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x888e));
        EXPECT(0xf, gbc.readMem(0x888f));
        // CB 0F 0061
        gbc.setState(0x30a1, 0x14e1, 0xeb30, 0x3b75, 0x6ee0, 0x3ca1, 0x0, 0x1);
        gbc.writeMem(0x30a1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x14e1, gbc.sp());
        EXPECT(0x30a3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0062
        gbc.setState(0xd6ab, 0x8332, 0x58f0, 0xf0fd, 0x823e, 0x17be, 0x1, 0x1);
        gbc.writeMem(0xd6ab, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x8332, gbc.sp());
        EXPECT(0xd6ad, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd6ab));
        EXPECT(0xf, gbc.readMem(0xd6ac));
        // CB 0F 0063
        gbc.setState(0x42ec, 0xc39e, 0x8640, 0x4713, 0x3395, 0x601f, 0x0, 0x1);
        gbc.writeMem(0x42ec, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0xc39e, gbc.sp());
        EXPECT(0x42ee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0064
        gbc.setState(0x9b34, 0x77cb, 0xabd0, 0x6d23, 0x7026, 0x58a7, 0x1, 0x1);
        gbc.writeMem(0x9b34, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x77cb, gbc.sp());
        EXPECT(0x9b36, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b34));
        EXPECT(0xf, gbc.readMem(0x9b35));
        // CB 0F 0065
        gbc.setState(0x9be7, 0x1a76, 0x2140, 0x5ee0, 0xc404, 0x46eb, 0x0, 0x1);
        gbc.writeMem(0x9be7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x1a76, gbc.sp());
        EXPECT(0x9be9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9be7));
        EXPECT(0xf, gbc.readMem(0x9be8));
        // CB 0F 0066
        gbc.setState(0x2f66, 0x97d, 0x7330, 0x2158, 0x2e76, 0xec70, 0x0, 0x1);
        gbc.writeMem(0x2f66, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x97d, gbc.sp());
        EXPECT(0x2f68, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0067
        gbc.setState(0xe02a, 0x50ff, 0xc270, 0xa9d3, 0xb217, 0x822a, 0x0, 0x1);
        gbc.writeMem(0xe02a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x50ff, gbc.sp());
        EXPECT(0xe02c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe02a));
        EXPECT(0xf, gbc.readMem(0xe02b));
        // CB 0F 0068
        gbc.setState(0x5e8b, 0x46f9, 0x5ff0, 0xe163, 0xb177, 0x75ce, 0x1, 0x0);
        gbc.writeMem(0x5e8b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x46f9, gbc.sp());
        EXPECT(0x5e8d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0069
        gbc.setState(0x80f2, 0x2c47, 0x7630, 0x66a5, 0xf74b, 0xf08f, 0x1, 0x1);
        gbc.writeMem(0x80f2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x2c47, gbc.sp());
        EXPECT(0x80f4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x80f2));
        EXPECT(0xf, gbc.readMem(0x80f3));
        // CB 0F 006A
        gbc.setState(0x2d8e, 0xae76, 0x810, 0xa21b, 0x41f4, 0xc799, 0x0, 0x1);
        gbc.writeMem(0x2d8e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0xae76, gbc.sp());
        EXPECT(0x2d90, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 006B
        gbc.setState(0xd625, 0xbb93, 0xc00, 0xb9a8, 0xe648, 0xa31a, 0x0, 0x1);
        gbc.writeMem(0xd625, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xbb93, gbc.sp());
        EXPECT(0xd627, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd625));
        EXPECT(0xf, gbc.readMem(0xd626));
        // CB 0F 006C
        gbc.setState(0x7d1c, 0x295, 0xe6e0, 0x639d, 0xd61a, 0xf846, 0x1, 0x0);
        gbc.writeMem(0x7d1c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x295, gbc.sp());
        EXPECT(0x7d1e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 006D
        gbc.setState(0xcf0f, 0xc15a, 0x9680, 0xced1, 0xfda7, 0xf1f, 0x1, 0x1);
        gbc.writeMem(0xcf0f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0xc15a, gbc.sp());
        EXPECT(0xcf11, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf0f));
        EXPECT(0xf, gbc.readMem(0xcf10));
        // CB 0F 006E
        gbc.setState(0xb95c, 0xaf0e, 0x6c20, 0x21ee, 0xc39a, 0xd1cb, 0x1, 0x1);
        gbc.writeMem(0xb95c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0xaf0e, gbc.sp());
        EXPECT(0xb95e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb95c));
        EXPECT(0xf, gbc.readMem(0xb95d));
        // CB 0F 006F
        gbc.setState(0x865e, 0xc48c, 0x1a80, 0x6acc, 0x2883, 0x961c, 0x1, 0x1);
        gbc.writeMem(0x865e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0xc48c, gbc.sp());
        EXPECT(0x8660, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x865e));
        EXPECT(0xf, gbc.readMem(0x865f));
        // CB 0F 0070
        gbc.setState(0x8aef, 0x89f3, 0xf510, 0xba01, 0xbc96, 0x8846, 0x1, 0x1);
        gbc.writeMem(0x8aef, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x89f3, gbc.sp());
        EXPECT(0x8af1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8aef));
        EXPECT(0xf, gbc.readMem(0x8af0));
        // CB 0F 0071
        gbc.setState(0x94dd, 0x74f, 0x7cb0, 0xcf4d, 0xb3b, 0x9ba9, 0x0, 0x1);
        gbc.writeMem(0x94dd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x74f, gbc.sp());
        EXPECT(0x94df, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x94dd));
        EXPECT(0xf, gbc.readMem(0x94de));
        // CB 0F 0072
        gbc.setState(0xb85f, 0xa7ee, 0x4e10, 0x185c, 0x51d0, 0x262, 0x1, 0x1);
        gbc.writeMem(0xb85f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0xa7ee, gbc.sp());
        EXPECT(0xb861, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb85f));
        EXPECT(0xf, gbc.readMem(0xb860));
        // CB 0F 0073
        gbc.setState(0x8d0b, 0x763c, 0x9b60, 0x10d7, 0x1475, 0xe73a, 0x0, 0x1);
        gbc.writeMem(0x8d0b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x763c, gbc.sp());
        EXPECT(0x8d0d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8d0b));
        EXPECT(0xf, gbc.readMem(0x8d0c));
        // CB 0F 0075
        gbc.setState(0x3c2b, 0x9bac, 0x1140, 0x68fc, 0x6272, 0x233d, 0x0, 0x0);
        gbc.writeMem(0x3c2b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x9bac, gbc.sp());
        EXPECT(0x3c2d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0076
        gbc.setState(0x9751, 0x6e68, 0xa910, 0x5139, 0x31ed, 0xad83, 0x1, 0x1);
        gbc.writeMem(0x9751, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x6e68, gbc.sp());
        EXPECT(0x9753, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9751));
        EXPECT(0xf, gbc.readMem(0x9752));
        // CB 0F 0077
        gbc.setState(0x7653, 0xc3c3, 0x46f0, 0xa376, 0x4bf0, 0xf554, 0x1, 0x1);
        gbc.writeMem(0x7653, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0xc3c3, gbc.sp());
        EXPECT(0x7655, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0079
        gbc.setState(0x742d, 0xdcbe, 0x4eb0, 0x572b, 0x82f9, 0xa6b8, 0x0, 0x1);
        gbc.writeMem(0x742d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0xdcbe, gbc.sp());
        EXPECT(0x742f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 007A
        gbc.setState(0x7b44, 0xcb09, 0x6db0, 0x34b, 0x1008, 0x3905, 0x1, 0x1);
        gbc.writeMem(0x7b44, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0xcb09, gbc.sp());
        EXPECT(0x7b46, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 007C
        gbc.setState(0x1d26, 0x3b73, 0xac40, 0xdc57, 0x6dac, 0xbea8, 0x0, 0x1);
        gbc.writeMem(0x1d26, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x3b73, gbc.sp());
        EXPECT(0x1d28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 007D
        gbc.setState(0x9f3b, 0x9765, 0xc590, 0x571b, 0x7681, 0x39af, 0x1, 0x1);
        gbc.writeMem(0x9f3b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x9765, gbc.sp());
        EXPECT(0x9f3d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f3b));
        EXPECT(0xf, gbc.readMem(0x9f3c));
        // CB 0F 007E
        gbc.setState(0x76fa, 0xfccf, 0x1ee0, 0xa001, 0x4f41, 0xdcb2, 0x0, 0x1);
        gbc.writeMem(0x76fa, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0xfccf, gbc.sp());
        EXPECT(0x76fc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 007F
        gbc.setState(0x9461, 0xb17f, 0x35b0, 0xc256, 0x9f59, 0x7fb, 0x0, 0x1);
        gbc.writeMem(0x9461, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0xb17f, gbc.sp());
        EXPECT(0x9463, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9461));
        EXPECT(0xf, gbc.readMem(0x9462));
        // CB 0F 0080
        gbc.setState(0x6fdd, 0xeee6, 0xc340, 0x6621, 0x7697, 0xa39f, 0x0, 0x0);
        gbc.writeMem(0x6fdd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0xeee6, gbc.sp());
        EXPECT(0x6fdf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0081
        gbc.setState(0x8a34, 0xd0c3, 0xd340, 0x947c, 0xa0dd, 0x871, 0x0, 0x1);
        gbc.writeMem(0x8a34, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xd0c3, gbc.sp());
        EXPECT(0x8a36, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a34));
        EXPECT(0xf, gbc.readMem(0x8a35));
        // CB 0F 0082
        gbc.setState(0xb79f, 0xc53c, 0x1eb0, 0xe7ca, 0xb970, 0xadb7, 0x1, 0x1);
        gbc.writeMem(0xb79f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0xc53c, gbc.sp());
        EXPECT(0xb7a1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb79f));
        EXPECT(0xf, gbc.readMem(0xb7a0));
        // CB 0F 0083
        gbc.setState(0xd4ed, 0x52c8, 0x3c90, 0xc2fd, 0xbad, 0x46f4, 0x0, 0x0);
        gbc.writeMem(0xd4ed, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x52c8, gbc.sp());
        EXPECT(0xd4ef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd4ed));
        EXPECT(0xf, gbc.readMem(0xd4ee));
        // CB 0F 0086
        gbc.setState(0xb0db, 0x999b, 0x3f50, 0xbb29, 0x6560, 0x6afa, 0x1, 0x1);
        gbc.writeMem(0xb0db, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0x999b, gbc.sp());
        EXPECT(0xb0dd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb0db));
        EXPECT(0xf, gbc.readMem(0xb0dc));
        // CB 0F 0087
        gbc.setState(0xead8, 0x3739, 0x3bc0, 0x8f87, 0x6847, 0x91d4, 0x0, 0x1);
        gbc.writeMem(0xead8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x3739, gbc.sp());
        EXPECT(0xeada, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xead8));
        EXPECT(0xf, gbc.readMem(0xead9));
        // CB 0F 0088
        gbc.setState(0x8735, 0xc03e, 0x3d30, 0xaedf, 0x88a5, 0x8ea9, 0x1, 0x1);
        gbc.writeMem(0x8735, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0xc03e, gbc.sp());
        EXPECT(0x8737, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8735));
        EXPECT(0xf, gbc.readMem(0x8736));
        // CB 0F 0089
        gbc.setState(0x42d0, 0xa13d, 0xc620, 0xc77d, 0x6efb, 0xf26, 0x1, 0x0);
        gbc.writeMem(0x42d0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0xa13d, gbc.sp());
        EXPECT(0x42d2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 008A
        gbc.setState(0x1a7b, 0xc81b, 0x53b0, 0xbc, 0xd30a, 0x5e0b, 0x0, 0x0);
        gbc.writeMem(0x1a7b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xc81b, gbc.sp());
        EXPECT(0x1a7d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 008B
        gbc.setState(0x8c29, 0x8ada, 0x2d00, 0xa8, 0x2264, 0x3211, 0x0, 0x1);
        gbc.writeMem(0x8c29, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x8ada, gbc.sp());
        EXPECT(0x8c2b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8c29));
        EXPECT(0xf, gbc.readMem(0x8c2a));
        // CB 0F 008C
        gbc.setState(0x8ce7, 0x5337, 0x5950, 0x3b71, 0x2120, 0x22d9, 0x1, 0x0);
        gbc.writeMem(0x8ce7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x5337, gbc.sp());
        EXPECT(0x8ce9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ce7));
        EXPECT(0xf, gbc.readMem(0x8ce8));
        // CB 0F 008D
        gbc.setState(0x267a, 0x7ad2, 0x78b0, 0x7560, 0xb369, 0x27f7, 0x1, 0x0);
        gbc.writeMem(0x267a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x7ad2, gbc.sp());
        EXPECT(0x267c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 008E
        gbc.setState(0x32, 0xab50, 0x1420, 0xcfd5, 0xe856, 0x7e98, 0x0, 0x1);
        gbc.writeMem(0x32, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xab50, gbc.sp());
        EXPECT(0x34, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 008F
        gbc.setState(0x950b, 0xef64, 0x6700, 0xb1a, 0x92dc, 0x294a, 0x0, 0x0);
        gbc.writeMem(0x950b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0xef64, gbc.sp());
        EXPECT(0x950d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x950b));
        EXPECT(0xf, gbc.readMem(0x950c));
        // CB 0F 0090
        gbc.setState(0x902c, 0x5622, 0x8330, 0x1b28, 0x7ebc, 0xbf7a, 0x0, 0x1);
        gbc.writeMem(0x902c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x5622, gbc.sp());
        EXPECT(0x902e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x902c));
        EXPECT(0xf, gbc.readMem(0x902d));
        // CB 0F 0091
        gbc.setState(0x28a3, 0xc99a, 0x21e0, 0xbd82, 0xed4e, 0x8d89, 0x1, 0x0);
        gbc.writeMem(0x28a3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xc99a, gbc.sp());
        EXPECT(0x28a5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0093
        gbc.setState(0x22c9, 0x1c69, 0xf7d0, 0x22fe, 0x1861, 0x358e, 0x1, 0x1);
        gbc.writeMem(0x22c9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x1c69, gbc.sp());
        EXPECT(0x22cb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0094
        gbc.setState(0xad72, 0xf9ec, 0x4a60, 0x9aae, 0x4987, 0x1527, 0x0, 0x1);
        gbc.writeMem(0xad72, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0xf9ec, gbc.sp());
        EXPECT(0xad74, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xad72));
        EXPECT(0xf, gbc.readMem(0xad73));
        // CB 0F 0095
        gbc.setState(0xe78b, 0xaf0f, 0xbae0, 0x3db6, 0xbb56, 0x3dbb, 0x1, 0x1);
        gbc.writeMem(0xe78b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0xaf0f, gbc.sp());
        EXPECT(0xe78d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe78b));
        EXPECT(0xf, gbc.readMem(0xe78c));
        // CB 0F 0096
        gbc.setState(0xbd40, 0x8f37, 0x79d0, 0xfd7e, 0x125b, 0xced0, 0x1, 0x1);
        gbc.writeMem(0xbd40, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x8f37, gbc.sp());
        EXPECT(0xbd42, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd40));
        EXPECT(0xf, gbc.readMem(0xbd41));
        // CB 0F 0097
        gbc.setState(0x1b3a, 0xa30d, 0x8ef0, 0x7a62, 0xd446, 0x8cac, 0x1, 0x0);
        gbc.writeMem(0x1b3a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xa30d, gbc.sp());
        EXPECT(0x1b3c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0098
        gbc.setState(0x5fbc, 0xe470, 0xe1e0, 0xe6b, 0x316, 0x4b45, 0x1, 0x1);
        gbc.writeMem(0x5fbc, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0xe470, gbc.sp());
        EXPECT(0x5fbe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0099
        gbc.setState(0xe37c, 0xaa01, 0x5950, 0x1215, 0x98f, 0xf445, 0x0, 0x0);
        gbc.writeMem(0xe37c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0xaa01, gbc.sp());
        EXPECT(0xe37e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe37c));
        EXPECT(0xf, gbc.readMem(0xe37d));
        // CB 0F 009A
        gbc.setState(0x58c5, 0xdd17, 0xaec0, 0xa484, 0x8c09, 0xb1be, 0x1, 0x1);
        gbc.writeMem(0x58c5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xdd17, gbc.sp());
        EXPECT(0x58c7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 009B
        gbc.setState(0x71e0, 0xe996, 0x87e0, 0x8273, 0xa101, 0x33c4, 0x1, 0x0);
        gbc.writeMem(0x71e0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0xe996, gbc.sp());
        EXPECT(0x71e2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 009C
        gbc.setState(0x7da0, 0xad99, 0x4f50, 0xf51b, 0xcc4, 0xda77, 0x0, 0x0);
        gbc.writeMem(0x7da0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xad99, gbc.sp());
        EXPECT(0x7da2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 009D
        gbc.setState(0xb699, 0x46bf, 0xd1d0, 0x488b, 0x8833, 0xfdc, 0x1, 0x1);
        gbc.writeMem(0xb699, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x46bf, gbc.sp());
        EXPECT(0xb69b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb699));
        EXPECT(0xf, gbc.readMem(0xb69a));
        // CB 0F 009E
        gbc.setState(0x6177, 0x1a2a, 0x9d10, 0xb6ad, 0x64ac, 0x12cb, 0x0, 0x1);
        gbc.writeMem(0x6177, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x1a2a, gbc.sp());
        EXPECT(0x6179, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 009F
        gbc.setState(0x8fb3, 0x3e3d, 0xfd0, 0xa058, 0xe60c, 0x449b, 0x1, 0x0);
        gbc.writeMem(0x8fb3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x3e3d, gbc.sp());
        EXPECT(0x8fb5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8fb3));
        EXPECT(0xf, gbc.readMem(0x8fb4));
        // CB 0F 00A0
        gbc.setState(0xb2bb, 0x56ad, 0x13e0, 0x2662, 0x43bf, 0xffa1, 0x0, 0x0);
        gbc.writeMem(0xb2bb, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x56ad, gbc.sp());
        EXPECT(0xb2bd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb2bb));
        EXPECT(0xf, gbc.readMem(0xb2bc));
        // CB 0F 00A1
        gbc.setState(0xa2c4, 0x2c8, 0xf350, 0x59a2, 0xb4ce, 0xea7c, 0x1, 0x1);
        gbc.writeMem(0xa2c4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x2c8, gbc.sp());
        EXPECT(0xa2c6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa2c4));
        EXPECT(0xf, gbc.readMem(0xa2c5));
        // CB 0F 00A3
        gbc.setState(0x384b, 0xbbbc, 0x7b30, 0xedec, 0x9d02, 0xe419, 0x1, 0x1);
        gbc.writeMem(0x384b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0xbbbc, gbc.sp());
        EXPECT(0x384d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 00A4
        gbc.setState(0x31bf, 0x4698, 0x6e20, 0x79ea, 0xb03e, 0xb485, 0x1, 0x0);
        gbc.writeMem(0x31bf, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0x4698, gbc.sp());
        EXPECT(0x31c1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 00A5
        gbc.setState(0xe85e, 0x7a55, 0xbd70, 0xf2a2, 0x47f5, 0xe5f3, 0x0, 0x1);
        gbc.writeMem(0xe85e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x7a55, gbc.sp());
        EXPECT(0xe860, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe85e));
        EXPECT(0xf, gbc.readMem(0xe85f));
        // CB 0F 00A6
        gbc.setState(0xdf91, 0x80ec, 0x4df0, 0x259f, 0x6c9d, 0x2501, 0x1, 0x0);
        gbc.writeMem(0xdf91, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0x80ec, gbc.sp());
        EXPECT(0xdf93, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdf91));
        EXPECT(0xf, gbc.readMem(0xdf92));
        // CB 0F 00A8
        gbc.setState(0x92a3, 0x7ef5, 0x5670, 0x3a1f, 0x6a7, 0xce39, 0x0, 0x1);
        gbc.writeMem(0x92a3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x7ef5, gbc.sp());
        EXPECT(0x92a5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x92a3));
        EXPECT(0xf, gbc.readMem(0x92a4));
        // CB 0F 00A9
        gbc.setState(0x2668, 0x962d, 0xb250, 0xdc11, 0xbf90, 0x66e6, 0x0, 0x0);
        gbc.writeMem(0x2668, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x962d, gbc.sp());
        EXPECT(0x266a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 00AA
        gbc.setState(0xb32, 0x124, 0x6910, 0x2fc3, 0x1a5e, 0x784, 0x1, 0x0);
        gbc.writeMem(0xb32, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x124, gbc.sp());
        EXPECT(0xb34, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 00AB
        gbc.setState(0x4b0, 0x5df6, 0xcf90, 0xe6d3, 0xd6df, 0x61e2, 0x1, 0x1);
        gbc.writeMem(0x4b0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x5df6, gbc.sp());
        EXPECT(0x4b2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 00AC
        gbc.setState(0x1421, 0x8fa4, 0xb830, 0x105d, 0xea6a, 0xe5d0, 0x0, 0x0);
        gbc.writeMem(0x1421, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x8fa4, gbc.sp());
        EXPECT(0x1423, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 00AD
        gbc.setState(0x7826, 0xc65c, 0x9730, 0xf876, 0x43a1, 0xf759, 0x1, 0x1);
        gbc.writeMem(0x7826, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0xc65c, gbc.sp());
        EXPECT(0x7828, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 00AF
        gbc.setState(0x7658, 0x8e02, 0x3ec0, 0x6d71, 0xad9, 0x2da6, 0x1, 0x1);
        gbc.writeMem(0x7658, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x8e02, gbc.sp());
        EXPECT(0x765a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 00B0
        gbc.setState(0x38da, 0xb7fb, 0x1c90, 0x93d4, 0x4fab, 0xb51b, 0x0, 0x1);
        gbc.writeMem(0x38da, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0xb7fb, gbc.sp());
        EXPECT(0x38dc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 00B1
        gbc.setState(0x8156, 0x40e8, 0x3b00, 0xd8a, 0xaee7, 0xf628, 0x1, 0x0);
        gbc.writeMem(0x8156, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x40e8, gbc.sp());
        EXPECT(0x8158, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8156));
        EXPECT(0xf, gbc.readMem(0x8157));
        // CB 0F 00B2
        gbc.setState(0xb046, 0x9fef, 0x7780, 0xd7a7, 0xd8c3, 0x94e7, 0x0, 0x0);
        gbc.writeMem(0xb046, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0x9fef, gbc.sp());
        EXPECT(0xb048, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb046));
        EXPECT(0xf, gbc.readMem(0xb047));
        // CB 0F 00B3
        gbc.setState(0xb6bf, 0xf00, 0x6690, 0x6244, 0xec91, 0xa54a, 0x0, 0x1);
        gbc.writeMem(0xb6bf, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0xf00, gbc.sp());
        EXPECT(0xb6c1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb6bf));
        EXPECT(0xf, gbc.readMem(0xb6c0));
        // CB 0F 00B4
        gbc.setState(0xbb5, 0xe29a, 0x8740, 0x3b60, 0xa38f, 0x65f4, 0x0, 0x0);
        gbc.writeMem(0xbb5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xe29a, gbc.sp());
        EXPECT(0xbb7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 00B5
        gbc.setState(0xecff, 0x5309, 0xda20, 0x81c9, 0xb398, 0xd33c, 0x0, 0x1);
        gbc.writeMem(0xecff, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x5309, gbc.sp());
        EXPECT(0xed01, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xecff));
        EXPECT(0xf, gbc.readMem(0xed00));
        // CB 0F 00B6
        gbc.setState(0x69e8, 0xab80, 0xe010, 0xcba8, 0x99aa, 0x7ee1, 0x1, 0x0);
        gbc.writeMem(0x69e8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0xab80, gbc.sp());
        EXPECT(0x69ea, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 00B7
        gbc.setState(0x3f41, 0x4053, 0x9500, 0x8fae, 0xd89, 0xddf2, 0x1, 0x1);
        gbc.writeMem(0x3f41, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x4053, gbc.sp());
        EXPECT(0x3f43, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 00B8
        gbc.setState(0x12bc, 0xfd27, 0x37b0, 0x84e8, 0x9a11, 0x3178, 0x0, 0x0);
        gbc.writeMem(0x12bc, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0xfd27, gbc.sp());
        EXPECT(0x12be, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 00B9
        gbc.setState(0x7077, 0x9e43, 0xde70, 0x2bf6, 0x902, 0x62c0, 0x0, 0x1);
        gbc.writeMem(0x7077, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x9e43, gbc.sp());
        EXPECT(0x7079, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 00BA
        gbc.setState(0x9d90, 0x47e4, 0x8300, 0x715c, 0x30f3, 0x21d3, 0x1, 0x1);
        gbc.writeMem(0x9d90, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x47e4, gbc.sp());
        EXPECT(0x9d92, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d90));
        EXPECT(0xf, gbc.readMem(0x9d91));
        // CB 0F 00BB
        gbc.setState(0xc28b, 0xe5d8, 0xa1a0, 0xe4ac, 0x2848, 0x9f72, 0x0, 0x0);
        gbc.writeMem(0xc28b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0xe5d8, gbc.sp());
        EXPECT(0xc28d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc28b));
        EXPECT(0xf, gbc.readMem(0xc28c));
        // CB 0F 00BC
        gbc.setState(0xc267, 0x4465, 0x2540, 0x13d0, 0x4998, 0xf556, 0x1, 0x1);
        gbc.writeMem(0xc267, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x4465, gbc.sp());
        EXPECT(0xc269, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc267));
        EXPECT(0xf, gbc.readMem(0xc268));
        // CB 0F 00BD
        gbc.setState(0x6c1a, 0xf26d, 0x58e0, 0xdbab, 0x56c3, 0x530f, 0x1, 0x1);
        gbc.writeMem(0x6c1a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0xf26d, gbc.sp());
        EXPECT(0x6c1c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 00BE
        gbc.setState(0x944f, 0x639c, 0xfa30, 0xf1f6, 0x9567, 0xfc9b, 0x0, 0x1);
        gbc.writeMem(0x944f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x639c, gbc.sp());
        EXPECT(0x9451, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x944f));
        EXPECT(0xf, gbc.readMem(0x9450));
        // CB 0F 00BF
        gbc.setState(0xefd8, 0x7add, 0xef0, 0x824e, 0xd490, 0xc1d9, 0x0, 0x1);
        gbc.writeMem(0xefd8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x7add, gbc.sp());
        EXPECT(0xefda, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xefd8));
        EXPECT(0xf, gbc.readMem(0xefd9));
        // CB 0F 00C0
        gbc.setState(0x12df, 0x3755, 0x3650, 0xf28c, 0xe7a8, 0x9041, 0x1, 0x1);
        gbc.writeMem(0x12df, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x3755, gbc.sp());
        EXPECT(0x12e1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 00C1
        gbc.setState(0x5a10, 0x4982, 0x8d40, 0x1ea2, 0x38b7, 0xdc7f, 0x1, 0x0);
        gbc.writeMem(0x5a10, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x4982, gbc.sp());
        EXPECT(0x5a12, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 00C2
        gbc.setState(0x7acf, 0xffea, 0x3fa0, 0xe63, 0x5728, 0x75db, 0x1, 0x0);
        gbc.writeMem(0x7acf, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0xffea, gbc.sp());
        EXPECT(0x7ad1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 00C3
        gbc.setState(0xcb52, 0x6cb8, 0x5270, 0x8ad, 0x3f27, 0xb432, 0x1, 0x0);
        gbc.writeMem(0xcb52, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x6cb8, gbc.sp());
        EXPECT(0xcb54, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcb52));
        EXPECT(0xf, gbc.readMem(0xcb53));
        // CB 0F 00C4
        gbc.setState(0xcb3b, 0x32a4, 0x4400, 0x3746, 0xfd2a, 0x90c9, 0x0, 0x1);
        gbc.writeMem(0xcb3b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x32a4, gbc.sp());
        EXPECT(0xcb3d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcb3b));
        EXPECT(0xf, gbc.readMem(0xcb3c));
        // CB 0F 00C5
        gbc.setState(0x69a1, 0x5f41, 0x9d70, 0x829b, 0x1600, 0x6601, 0x0, 0x1);
        gbc.writeMem(0x69a1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0x5f41, gbc.sp());
        EXPECT(0x69a3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 00C6
        gbc.setState(0xab2c, 0xe329, 0xb020, 0x7178, 0x4b3f, 0xc46a, 0x1, 0x0);
        gbc.writeMem(0xab2c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xe329, gbc.sp());
        EXPECT(0xab2e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab2c));
        EXPECT(0xf, gbc.readMem(0xab2d));
        // CB 0F 00C7
        gbc.setState(0x5b62, 0xe703, 0xce50, 0x4a61, 0xda93, 0xff6b, 0x1, 0x1);
        gbc.writeMem(0x5b62, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0xe703, gbc.sp());
        EXPECT(0x5b64, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 00C9
        gbc.setState(0x8a6, 0x9ce1, 0x4c60, 0x5665, 0x5360, 0x9dcd, 0x1, 0x0);
        gbc.writeMem(0x8a6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0x9ce1, gbc.sp());
        EXPECT(0x8a8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 00CA
        gbc.setState(0x5542, 0xd46c, 0x5e50, 0x33dd, 0xdfb4, 0x92a, 0x0, 0x0);
        gbc.writeMem(0x5542, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0xd46c, gbc.sp());
        EXPECT(0x5544, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 00CB
        gbc.setState(0xce74, 0x5b90, 0x11d0, 0x15e4, 0xcc8, 0x41a5, 0x1, 0x1);
        gbc.writeMem(0xce74, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x5b90, gbc.sp());
        EXPECT(0xce76, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xce74));
        EXPECT(0xf, gbc.readMem(0xce75));
        // CB 0F 00CC
        gbc.setState(0x7718, 0x16ab, 0x68b0, 0x4c95, 0x1775, 0x5e5e, 0x1, 0x0);
        gbc.writeMem(0x7718, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x16ab, gbc.sp());
        EXPECT(0x771a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 00CD
        gbc.setState(0x6af, 0xac49, 0x2f60, 0x9477, 0x5972, 0xbbd0, 0x0, 0x1);
        gbc.writeMem(0x6af, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0xac49, gbc.sp());
        EXPECT(0x6b1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 00CE
        gbc.setState(0x7485, 0x6311, 0x8e90, 0x103e, 0x6411, 0x5a66, 0x0, 0x1);
        gbc.writeMem(0x7485, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x6311, gbc.sp());
        EXPECT(0x7487, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 00CF
        gbc.setState(0xfc8, 0x847e, 0x4020, 0xd6c6, 0x5844, 0xf58f, 0x0, 0x1);
        gbc.writeMem(0xfc8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x847e, gbc.sp());
        EXPECT(0xfca, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 00D0
        gbc.setState(0x2e41, 0xa63a, 0x7fa0, 0xe203, 0x16ec, 0xba76, 0x0, 0x0);
        gbc.writeMem(0x2e41, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0xa63a, gbc.sp());
        EXPECT(0x2e43, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 00D1
        gbc.setState(0xb35e, 0x171d, 0x590, 0xa181, 0x8447, 0xd625, 0x0, 0x1);
        gbc.writeMem(0xb35e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x171d, gbc.sp());
        EXPECT(0xb360, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb35e));
        EXPECT(0xf, gbc.readMem(0xb35f));
        // CB 0F 00D2
        gbc.setState(0xe82e, 0xb74a, 0x3c90, 0x46b2, 0x9eeb, 0x3b36, 0x0, 0x0);
        gbc.writeMem(0xe82e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0xb74a, gbc.sp());
        EXPECT(0xe830, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe82e));
        EXPECT(0xf, gbc.readMem(0xe82f));
        // CB 0F 00D3
        gbc.setState(0xb6e1, 0xdbc7, 0x8aa0, 0x2422, 0x475, 0x9d78, 0x0, 0x1);
        gbc.writeMem(0xb6e1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0xdbc7, gbc.sp());
        EXPECT(0xb6e3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb6e1));
        EXPECT(0xf, gbc.readMem(0xb6e2));
        // CB 0F 00D4
        gbc.setState(0xc9e3, 0x807c, 0x82c0, 0xe921, 0xab47, 0xd3e1, 0x0, 0x0);
        gbc.writeMem(0xc9e3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x807c, gbc.sp());
        EXPECT(0xc9e5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc9e3));
        EXPECT(0xf, gbc.readMem(0xc9e4));
        // CB 0F 00D6
        gbc.setState(0x7933, 0x93d4, 0x5710, 0x20a1, 0x322a, 0x941, 0x1, 0x0);
        gbc.writeMem(0x7933, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x93d4, gbc.sp());
        EXPECT(0x7935, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 00D7
        gbc.setState(0x6b86, 0x1dd, 0x42b0, 0x39f, 0x1efe, 0x78bf, 0x1, 0x0);
        gbc.writeMem(0x6b86, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x1dd, gbc.sp());
        EXPECT(0x6b88, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 00D8
        gbc.setState(0x1264, 0x87ee, 0x9340, 0x4098, 0xe31c, 0x8936, 0x0, 0x1);
        gbc.writeMem(0x1264, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x87ee, gbc.sp());
        EXPECT(0x1266, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 00D9
        gbc.setState(0x5cce, 0x80d0, 0x7fe0, 0xe1fb, 0x581a, 0x169c, 0x1, 0x1);
        gbc.writeMem(0x5cce, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x80d0, gbc.sp());
        EXPECT(0x5cd0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 00DA
        gbc.setState(0x5087, 0x2824, 0xebf0, 0x48e4, 0x127d, 0xef59, 0x1, 0x0);
        gbc.writeMem(0x5087, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x2824, gbc.sp());
        EXPECT(0x5089, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 00DB
        gbc.setState(0x71dd, 0x8743, 0xc540, 0xe990, 0xaad2, 0x488, 0x1, 0x1);
        gbc.writeMem(0x71dd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0x8743, gbc.sp());
        EXPECT(0x71df, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 00DC
        gbc.setState(0x7d6, 0x9767, 0x4e00, 0x1bd3, 0xa514, 0x60dc, 0x0, 0x1);
        gbc.writeMem(0x7d6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x9767, gbc.sp());
        EXPECT(0x7d8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 00DD
        gbc.setState(0x3983, 0x3a0e, 0x1440, 0x94e, 0xe5a1, 0x2292, 0x0, 0x1);
        gbc.writeMem(0x3983, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x3a0e, gbc.sp());
        EXPECT(0x3985, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 00DE
        gbc.setState(0x230f, 0x7588, 0x4e60, 0x4adc, 0x56cb, 0x8084, 0x0, 0x1);
        gbc.writeMem(0x230f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x7588, gbc.sp());
        EXPECT(0x2311, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 00DF
        gbc.setState(0x3317, 0xc441, 0x74c0, 0xcd3f, 0x85a5, 0x5179, 0x0, 0x0);
        gbc.writeMem(0x3317, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0xc441, gbc.sp());
        EXPECT(0x3319, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 00E0
        gbc.setState(0xdcea, 0xe350, 0x5730, 0xde7e, 0x95a7, 0x8796, 0x1, 0x1);
        gbc.writeMem(0xdcea, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xe350, gbc.sp());
        EXPECT(0xdcec, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdcea));
        EXPECT(0xf, gbc.readMem(0xdceb));
        // CB 0F 00E1
        gbc.setState(0xbf32, 0xf68, 0xbe70, 0x553a, 0x1437, 0xbfac, 0x1, 0x1);
        gbc.writeMem(0xbf32, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xf68, gbc.sp());
        EXPECT(0xbf34, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbf32));
        EXPECT(0xf, gbc.readMem(0xbf33));
        // CB 0F 00E3
        gbc.setState(0x6e21, 0x3fe8, 0x6320, 0xe003, 0xd614, 0x9149, 0x1, 0x0);
        gbc.writeMem(0x6e21, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x3fe8, gbc.sp());
        EXPECT(0x6e23, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 00E4
        gbc.setState(0xebad, 0x8e6f, 0x5fb0, 0xf7cb, 0x77cf, 0xe705, 0x0, 0x0);
        gbc.writeMem(0xebad, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0x8e6f, gbc.sp());
        EXPECT(0xebaf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xebad));
        EXPECT(0xf, gbc.readMem(0xebae));
        // CB 0F 00E5
        gbc.setState(0x4c71, 0x5431, 0x7f00, 0x4d9f, 0x30a0, 0xe3e8, 0x0, 0x1);
        gbc.writeMem(0x4c71, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x5431, gbc.sp());
        EXPECT(0x4c73, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 00E6
        gbc.setState(0xb233, 0x1fd9, 0xa2f0, 0xaa7b, 0x5c6d, 0xc7a6, 0x1, 0x1);
        gbc.writeMem(0xb233, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x1fd9, gbc.sp());
        EXPECT(0xb235, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb233));
        EXPECT(0xf, gbc.readMem(0xb234));
        // CB 0F 00E7
        gbc.setState(0x577e, 0x465e, 0x72d0, 0xea15, 0x2837, 0x2d8f, 0x1, 0x0);
        gbc.writeMem(0x577e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x465e, gbc.sp());
        EXPECT(0x5780, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 00E8
        gbc.setState(0xd1cb, 0xf631, 0xac80, 0xb658, 0x57fe, 0x74a3, 0x0, 0x1);
        gbc.writeMem(0xd1cb, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0xf631, gbc.sp());
        EXPECT(0xd1cd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd1cb));
        EXPECT(0xf, gbc.readMem(0xd1cc));
        // CB 0F 00E9
        gbc.setState(0xb503, 0xd74a, 0x2140, 0x4962, 0xcb98, 0xc081, 0x0, 0x1);
        gbc.writeMem(0xb503, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0xd74a, gbc.sp());
        EXPECT(0xb505, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb503));
        EXPECT(0xf, gbc.readMem(0xb504));
        // CB 0F 00EA
        gbc.setState(0xb7d7, 0x2c25, 0x17a0, 0x576f, 0x80e1, 0x5be9, 0x0, 0x0);
        gbc.writeMem(0xb7d7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x2c25, gbc.sp());
        EXPECT(0xb7d9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb7d7));
        EXPECT(0xf, gbc.readMem(0xb7d8));
        // CB 0F 00EB
        gbc.setState(0x61, 0x8805, 0x3e30, 0x5b22, 0x5dea, 0xb66f, 0x0, 0x1);
        gbc.writeMem(0x61, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0x8805, gbc.sp());
        EXPECT(0x63, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 00ED
        gbc.setState(0x9c08, 0xc399, 0x6d10, 0x68ec, 0x18a9, 0xda20, 0x1, 0x0);
        gbc.writeMem(0x9c08, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0xc399, gbc.sp());
        EXPECT(0x9c0a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c08));
        EXPECT(0xf, gbc.readMem(0x9c09));
        // CB 0F 00EE
        gbc.setState(0x4f59, 0x9d0c, 0x1930, 0xf989, 0xc078, 0xe462, 0x1, 0x0);
        gbc.writeMem(0x4f59, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0x9d0c, gbc.sp());
        EXPECT(0x4f5b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 00EF
        gbc.setState(0xd253, 0x6446, 0xd0f0, 0x76e5, 0xc2f0, 0x8d0c, 0x1, 0x1);
        gbc.writeMem(0xd253, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x6446, gbc.sp());
        EXPECT(0xd255, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd253));
        EXPECT(0xf, gbc.readMem(0xd254));
        // CB 0F 00F0
        gbc.setState(0xb00f, 0xdbe9, 0xd4c0, 0x5a83, 0x3f44, 0x94b0, 0x1, 0x1);
        gbc.writeMem(0xb00f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xdbe9, gbc.sp());
        EXPECT(0xb011, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb00f));
        EXPECT(0xf, gbc.readMem(0xb010));
        // CB 0F 00F1
        gbc.setState(0x3719, 0xec70, 0x2750, 0x9cf6, 0x116a, 0xcd00, 0x0, 0x0);
        gbc.writeMem(0x3719, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0xec70, gbc.sp());
        EXPECT(0x371b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 00F2
        gbc.setState(0x1118, 0x7c, 0xffd0, 0x9a0b, 0xf58c, 0x5abf, 0x1, 0x1);
        gbc.writeMem(0x1118, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x7c, gbc.sp());
        EXPECT(0x111a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 00F3
        gbc.setState(0x5ab9, 0xd6d8, 0x8b30, 0xb718, 0xaa0f, 0x3b3, 0x0, 0x1);
        gbc.writeMem(0x5ab9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0xd6d8, gbc.sp());
        EXPECT(0x5abb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 00F4
        gbc.setState(0x4cbf, 0xf175, 0x130, 0x5ba1, 0xef9, 0x885b, 0x0, 0x1);
        gbc.writeMem(0x4cbf, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0xf175, gbc.sp());
        EXPECT(0x4cc1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 00F5
        gbc.setState(0x307c, 0x33ef, 0xa300, 0x76ea, 0x93b, 0x41ea, 0x1, 0x1);
        gbc.writeMem(0x307c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x33ef, gbc.sp());
        EXPECT(0x307e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 00F6
        gbc.setState(0x145a, 0x5f8e, 0x3430, 0xc408, 0xf93e, 0x823e, 0x0, 0x0);
        gbc.writeMem(0x145a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x5f8e, gbc.sp());
        EXPECT(0x145c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 00F7
        gbc.setState(0x2cb6, 0x6d54, 0x1a90, 0x1c2, 0x9e49, 0x4299, 0x0, 0x0);
        gbc.writeMem(0x2cb6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x6d54, gbc.sp());
        EXPECT(0x2cb8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 00F8
        gbc.setState(0x19bd, 0x603d, 0x8590, 0x4a95, 0x1451, 0xa1fd, 0x1, 0x0);
        gbc.writeMem(0x19bd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x603d, gbc.sp());
        EXPECT(0x19bf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 00F9
        gbc.setState(0x82c4, 0x15dc, 0x1cd0, 0xaf88, 0xe213, 0xf2f3, 0x0, 0x1);
        gbc.writeMem(0x82c4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x15dc, gbc.sp());
        EXPECT(0x82c6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x82c4));
        EXPECT(0xf, gbc.readMem(0x82c5));
        // CB 0F 00FA
        gbc.setState(0xa5de, 0xd00f, 0xf430, 0xfd5c, 0xc148, 0xbdb5, 0x1, 0x1);
        gbc.writeMem(0xa5de, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0xd00f, gbc.sp());
        EXPECT(0xa5e0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa5de));
        EXPECT(0xf, gbc.readMem(0xa5df));
        // CB 0F 00FB
        gbc.setState(0x31ac, 0xf62f, 0x1e00, 0xe63, 0x7b65, 0x27d4, 0x1, 0x0);
        gbc.writeMem(0x31ac, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0xf62f, gbc.sp());
        EXPECT(0x31ae, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 00FC
        gbc.setState(0x14ff, 0x2a82, 0xb400, 0xb5f5, 0x429b, 0xf8b4, 0x0, 0x0);
        gbc.writeMem(0x14ff, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x2a82, gbc.sp());
        EXPECT(0x1501, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 00FE
        gbc.setState(0x7246, 0xb645, 0xba80, 0x9356, 0xbc75, 0xb2be, 0x1, 0x1);
        gbc.writeMem(0x7246, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xb645, gbc.sp());
        EXPECT(0x7248, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 00FF
        gbc.setState(0xf40, 0x5604, 0x17b0, 0xffed, 0x34fa, 0x6826, 0x1, 0x0);
        gbc.writeMem(0xf40, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x5604, gbc.sp());
        EXPECT(0xf42, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0100
        gbc.setState(0x9748, 0xecbb, 0xc000, 0x687, 0x29d6, 0xaaa4, 0x0, 0x0);
        gbc.writeMem(0x9748, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xecbb, gbc.sp());
        EXPECT(0x974a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9748));
        EXPECT(0xf, gbc.readMem(0x9749));
        // CB 0F 0101
        gbc.setState(0x367a, 0x2a12, 0x9460, 0xc03f, 0x9a81, 0x7009, 0x0, 0x1);
        gbc.writeMem(0x367a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0x2a12, gbc.sp());
        EXPECT(0x367c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0102
        gbc.setState(0xa3b7, 0x738c, 0x6d0, 0x1191, 0x6266, 0x4668, 0x0, 0x1);
        gbc.writeMem(0xa3b7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x738c, gbc.sp());
        EXPECT(0xa3b9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa3b7));
        EXPECT(0xf, gbc.readMem(0xa3b8));
        // CB 0F 0103
        gbc.setState(0x7b7d, 0xc1c3, 0x34d0, 0x9d90, 0xdc70, 0x69cb, 0x0, 0x1);
        gbc.writeMem(0x7b7d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0xc1c3, gbc.sp());
        EXPECT(0x7b7f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0104
        gbc.setState(0x859c, 0x15e3, 0xdeb0, 0x9bce, 0x8bfd, 0x24c3, 0x1, 0x1);
        gbc.writeMem(0x859c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x15e3, gbc.sp());
        EXPECT(0x859e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x859c));
        EXPECT(0xf, gbc.readMem(0x859d));
        // CB 0F 0105
        gbc.setState(0xad6e, 0x42c, 0x7a40, 0xac7c, 0x695a, 0xb952, 0x0, 0x1);
        gbc.writeMem(0xad6e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x42c, gbc.sp());
        EXPECT(0xad70, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xad6e));
        EXPECT(0xf, gbc.readMem(0xad6f));
        // CB 0F 0106
        gbc.setState(0xa79e, 0x72cc, 0xa720, 0x7dc9, 0x6fd0, 0x8362, 0x0, 0x1);
        gbc.writeMem(0xa79e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0x72cc, gbc.sp());
        EXPECT(0xa7a0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa79e));
        EXPECT(0xf, gbc.readMem(0xa79f));
        // CB 0F 0108
        gbc.setState(0xb5e, 0x7954, 0x1e80, 0xf200, 0x94f6, 0x2a59, 0x1, 0x1);
        gbc.writeMem(0xb5e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x7954, gbc.sp());
        EXPECT(0xb60, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0109
        gbc.setState(0x50bf, 0xbd03, 0x2180, 0x3544, 0xf467, 0x1f3a, 0x1, 0x1);
        gbc.writeMem(0x50bf, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0xbd03, gbc.sp());
        EXPECT(0x50c1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 010A
        gbc.setState(0xbefd, 0xb871, 0xed10, 0x91e7, 0xc90a, 0xf153, 0x0, 0x1);
        gbc.writeMem(0xbefd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0xb871, gbc.sp());
        EXPECT(0xbeff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbefd));
        EXPECT(0xf, gbc.readMem(0xbefe));
        // CB 0F 010B
        gbc.setState(0x1ce1, 0x5120, 0xa090, 0xb273, 0x6d69, 0xc427, 0x1, 0x1);
        gbc.writeMem(0x1ce1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x5120, gbc.sp());
        EXPECT(0x1ce3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 010C
        gbc.setState(0xa6e6, 0xfaf, 0x2f20, 0x84f, 0x4941, 0x5577, 0x1, 0x0);
        gbc.writeMem(0xa6e6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xfaf, gbc.sp());
        EXPECT(0xa6e8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa6e6));
        EXPECT(0xf, gbc.readMem(0xa6e7));
        // CB 0F 010D
        gbc.setState(0xe443, 0xf565, 0x1450, 0xcc43, 0xea7a, 0xd985, 0x1, 0x0);
        gbc.writeMem(0xe443, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xf565, gbc.sp());
        EXPECT(0xe445, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe443));
        EXPECT(0xf, gbc.readMem(0xe444));
        // CB 0F 010E
        gbc.setState(0xe728, 0xfed7, 0xb8f0, 0xb420, 0xe3c0, 0x4063, 0x1, 0x0);
        gbc.writeMem(0xe728, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0xfed7, gbc.sp());
        EXPECT(0xe72a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe728));
        EXPECT(0xf, gbc.readMem(0xe729));
        // CB 0F 010F
        gbc.setState(0x31ec, 0xa41b, 0xcc0, 0x4dec, 0x1d96, 0xb6f5, 0x0, 0x0);
        gbc.writeMem(0x31ec, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0xa41b, gbc.sp());
        EXPECT(0x31ee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0110
        gbc.setState(0xa1, 0x17fc, 0x4040, 0x4db2, 0x14db, 0x3d15, 0x1, 0x1);
        gbc.writeMem(0xa1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x17fc, gbc.sp());
        EXPECT(0xa3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0111
        gbc.setState(0x720e, 0xad60, 0xec50, 0x5046, 0x1a29, 0x265e, 0x0, 0x0);
        gbc.writeMem(0x720e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0xad60, gbc.sp());
        EXPECT(0x7210, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0112
        gbc.setState(0x3d4, 0x955b, 0x1cb0, 0x3132, 0xe1a5, 0x40ba, 0x1, 0x1);
        gbc.writeMem(0x3d4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x955b, gbc.sp());
        EXPECT(0x3d6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0113
        gbc.setState(0x31f, 0x9b2f, 0x95f0, 0x5ded, 0xb20f, 0x6aab, 0x0, 0x1);
        gbc.writeMem(0x31f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x9b2f, gbc.sp());
        EXPECT(0x321, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0114
        gbc.setState(0x5a27, 0xd704, 0xa520, 0xd9ed, 0xbe73, 0xcdfb, 0x1, 0x1);
        gbc.writeMem(0x5a27, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0xd704, gbc.sp());
        EXPECT(0x5a29, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0115
        gbc.setState(0x256a, 0xc4df, 0xa500, 0xa7a4, 0x81a1, 0xadc1, 0x0, 0x1);
        gbc.writeMem(0x256a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xc4df, gbc.sp());
        EXPECT(0x256c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0116
        gbc.setState(0x489c, 0x5ab4, 0x3ea0, 0xc850, 0x914d, 0xcbaf, 0x0, 0x0);
        gbc.writeMem(0x489c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x5ab4, gbc.sp());
        EXPECT(0x489e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0117
        gbc.setState(0xbbc5, 0x8595, 0xe3d0, 0xa5eb, 0x1a28, 0xb360, 0x0, 0x1);
        gbc.writeMem(0xbbc5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x8595, gbc.sp());
        EXPECT(0xbbc7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbbc5));
        EXPECT(0xf, gbc.readMem(0xbbc6));
        // CB 0F 0118
        gbc.setState(0xb18f, 0xc87, 0x3e10, 0xcfc3, 0x68c1, 0x3c0b, 0x1, 0x0);
        gbc.writeMem(0xb18f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xc87, gbc.sp());
        EXPECT(0xb191, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb18f));
        EXPECT(0xf, gbc.readMem(0xb190));
        // CB 0F 011A
        gbc.setState(0x6bc6, 0xa051, 0xa230, 0x6459, 0x7ade, 0xcff1, 0x1, 0x1);
        gbc.writeMem(0x6bc6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0xa051, gbc.sp());
        EXPECT(0x6bc8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 011B
        gbc.setState(0x3ff, 0x1a96, 0x41a0, 0xb2f8, 0x35a9, 0x8d54, 0x1, 0x0);
        gbc.writeMem(0x3ff, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0x1a96, gbc.sp());
        EXPECT(0x401, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 011C
        gbc.setState(0xa730, 0x575c, 0x2470, 0x2b97, 0x1753, 0x6e2, 0x0, 0x0);
        gbc.writeMem(0xa730, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x575c, gbc.sp());
        EXPECT(0xa732, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa730));
        EXPECT(0xf, gbc.readMem(0xa731));
        // CB 0F 011D
        gbc.setState(0x8210, 0x2eda, 0xff10, 0xa89b, 0xd970, 0x58b5, 0x0, 0x1);
        gbc.writeMem(0x8210, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x2eda, gbc.sp());
        EXPECT(0x8212, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8210));
        EXPECT(0xf, gbc.readMem(0x8211));
        // CB 0F 011E
        gbc.setState(0x8b15, 0x9b8, 0x91c0, 0x5c15, 0xd7b9, 0xf94, 0x1, 0x1);
        gbc.writeMem(0x8b15, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x9b8, gbc.sp());
        EXPECT(0x8b17, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b15));
        EXPECT(0xf, gbc.readMem(0x8b16));
        // CB 0F 011F
        gbc.setState(0x67cb, 0x5326, 0xf050, 0xee52, 0xe747, 0x517f, 0x1, 0x0);
        gbc.writeMem(0x67cb, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x5326, gbc.sp());
        EXPECT(0x67cd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0120
        gbc.setState(0x2dbb, 0xf05d, 0x39c0, 0x69bc, 0xe8b0, 0x7946, 0x0, 0x0);
        gbc.writeMem(0x2dbb, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0xf05d, gbc.sp());
        EXPECT(0x2dbd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0121
        gbc.setState(0x1b91, 0xf438, 0x10f0, 0x49f3, 0x928e, 0xcf6a, 0x1, 0x1);
        gbc.writeMem(0x1b91, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xf438, gbc.sp());
        EXPECT(0x1b93, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0122
        gbc.setState(0xa3d7, 0x30ee, 0x1ca0, 0x9d3e, 0x5724, 0x5423, 0x1, 0x0);
        gbc.writeMem(0xa3d7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x30ee, gbc.sp());
        EXPECT(0xa3d9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa3d7));
        EXPECT(0xf, gbc.readMem(0xa3d8));
        // CB 0F 0123
        gbc.setState(0xbb7c, 0xc967, 0xa670, 0x65e9, 0x3780, 0x4a39, 0x0, 0x0);
        gbc.writeMem(0xbb7c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0xc967, gbc.sp());
        EXPECT(0xbb7e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbb7c));
        EXPECT(0xf, gbc.readMem(0xbb7d));
        // CB 0F 0124
        gbc.setState(0x710c, 0x398b, 0x80d0, 0x7f5d, 0x6fa0, 0x3ca4, 0x1, 0x0);
        gbc.writeMem(0x710c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x398b, gbc.sp());
        EXPECT(0x710e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0125
        gbc.setState(0xcf35, 0x3d0a, 0x86e0, 0x3af5, 0x8a72, 0x2469, 0x1, 0x0);
        gbc.writeMem(0xcf35, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0x3d0a, gbc.sp());
        EXPECT(0xcf37, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf35));
        EXPECT(0xf, gbc.readMem(0xcf36));
        // CB 0F 0126
        gbc.setState(0x196, 0xcdb3, 0xb1b0, 0x94ef, 0x8fdd, 0x394b, 0x0, 0x0);
        gbc.writeMem(0x196, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0xcdb3, gbc.sp());
        EXPECT(0x198, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0128
        gbc.setState(0x18ca, 0xebb5, 0xe8c0, 0x2920, 0x4a91, 0x2820, 0x1, 0x0);
        gbc.writeMem(0x18ca, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0xebb5, gbc.sp());
        EXPECT(0x18cc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0129
        gbc.setState(0xc584, 0xbb2, 0x90e0, 0xa885, 0x317d, 0x768e, 0x1, 0x1);
        gbc.writeMem(0xc584, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0xbb2, gbc.sp());
        EXPECT(0xc586, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc584));
        EXPECT(0xf, gbc.readMem(0xc585));
        // CB 0F 012A
        gbc.setState(0x2588, 0x7bac, 0xf890, 0xab0e, 0x4df8, 0x9a8b, 0x1, 0x0);
        gbc.writeMem(0x2588, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x7bac, gbc.sp());
        EXPECT(0x258a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 012B
        gbc.setState(0xbe12, 0x9a95, 0x7000, 0x8709, 0x48e5, 0xb839, 0x1, 0x0);
        gbc.writeMem(0xbe12, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x9a95, gbc.sp());
        EXPECT(0xbe14, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe12));
        EXPECT(0xf, gbc.readMem(0xbe13));
        // CB 0F 012C
        gbc.setState(0x8dae, 0xccc8, 0x70a0, 0x4f43, 0x54ec, 0xf667, 0x0, 0x0);
        gbc.writeMem(0x8dae, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0xccc8, gbc.sp());
        EXPECT(0x8db0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8dae));
        EXPECT(0xf, gbc.readMem(0x8daf));
        // CB 0F 012D
        gbc.setState(0x6cb, 0x481c, 0xde20, 0xb5c5, 0xb3b2, 0x3042, 0x1, 0x1);
        gbc.writeMem(0x6cb, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0x481c, gbc.sp());
        EXPECT(0x6cd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 012E
        gbc.setState(0x35f8, 0xe384, 0x7c90, 0xf0ae, 0x8849, 0xa207, 0x1, 0x0);
        gbc.writeMem(0x35f8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0xe384, gbc.sp());
        EXPECT(0x35fa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 012F
        gbc.setState(0x4baf, 0x2837, 0xa660, 0xfb7f, 0x376e, 0xc0a, 0x0, 0x0);
        gbc.writeMem(0x4baf, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x2837, gbc.sp());
        EXPECT(0x4bb1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0130
        gbc.setState(0x407, 0xcb17, 0x64a0, 0x8, 0x9ccd, 0x6b77, 0x0, 0x1);
        gbc.writeMem(0x407, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xcb17, gbc.sp());
        EXPECT(0x409, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0131
        gbc.setState(0xc1a3, 0xcfc2, 0x8ad0, 0x8c8, 0x46c9, 0x2c29, 0x1, 0x0);
        gbc.writeMem(0xc1a3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0xcfc2, gbc.sp());
        EXPECT(0xc1a5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc1a3));
        EXPECT(0xf, gbc.readMem(0xc1a4));
        // CB 0F 0132
        gbc.setState(0x3b40, 0xedcc, 0xc730, 0x5403, 0x3e18, 0x735f, 0x0, 0x1);
        gbc.writeMem(0x3b40, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0xedcc, gbc.sp());
        EXPECT(0x3b42, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0133
        gbc.setState(0x7d3e, 0x8ff4, 0x3830, 0xb0a3, 0x39ee, 0x670b, 0x1, 0x0);
        gbc.writeMem(0x7d3e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x8ff4, gbc.sp());
        EXPECT(0x7d40, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0134
        gbc.setState(0xc5fa, 0x70d4, 0x35e0, 0xa2c5, 0xd80d, 0x4db, 0x0, 0x0);
        gbc.writeMem(0xc5fa, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x70d4, gbc.sp());
        EXPECT(0xc5fc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc5fa));
        EXPECT(0xf, gbc.readMem(0xc5fb));
        // CB 0F 0135
        gbc.setState(0xa690, 0x2827, 0xf670, 0xd586, 0x8e31, 0x82ea, 0x0, 0x1);
        gbc.writeMem(0xa690, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x2827, gbc.sp());
        EXPECT(0xa692, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa690));
        EXPECT(0xf, gbc.readMem(0xa691));
        // CB 0F 0136
        gbc.setState(0xe487, 0xe255, 0xacb0, 0x670, 0x1fae, 0x2c3c, 0x1, 0x0);
        gbc.writeMem(0xe487, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0xe255, gbc.sp());
        EXPECT(0xe489, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe487));
        EXPECT(0xf, gbc.readMem(0xe488));
        // CB 0F 0137
        gbc.setState(0x5ac1, 0xc3e9, 0xa430, 0x7d6, 0x78b4, 0xf529, 0x1, 0x1);
        gbc.writeMem(0x5ac1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0xc3e9, gbc.sp());
        EXPECT(0x5ac3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0138
        gbc.setState(0x2b72, 0x52db, 0xaa10, 0xd39f, 0x2f62, 0x66d2, 0x1, 0x0);
        gbc.writeMem(0x2b72, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x52db, gbc.sp());
        EXPECT(0x2b74, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0139
        gbc.setState(0xa8ab, 0xeddd, 0xfb80, 0x9391, 0x9c4d, 0xac19, 0x0, 0x1);
        gbc.writeMem(0xa8ab, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0xeddd, gbc.sp());
        EXPECT(0xa8ad, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa8ab));
        EXPECT(0xf, gbc.readMem(0xa8ac));
        // CB 0F 013A
        gbc.setState(0x24a8, 0x9abc, 0x9760, 0xb2a8, 0x4e15, 0xfdcc, 0x1, 0x1);
        gbc.writeMem(0x24a8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x9abc, gbc.sp());
        EXPECT(0x24aa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 013C
        gbc.setState(0x9bd6, 0x381, 0x5950, 0x7944, 0x56b, 0x2480, 0x0, 0x1);
        gbc.writeMem(0x9bd6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x381, gbc.sp());
        EXPECT(0x9bd8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9bd6));
        EXPECT(0xf, gbc.readMem(0x9bd7));
        // CB 0F 013D
        gbc.setState(0x2cd1, 0x23c9, 0xeca0, 0x8f4f, 0xb489, 0xd94f, 0x0, 0x1);
        gbc.writeMem(0x2cd1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0x23c9, gbc.sp());
        EXPECT(0x2cd3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 013E
        gbc.setState(0xd93f, 0xc055, 0x99b0, 0xa7d3, 0x8d38, 0x74b7, 0x1, 0x1);
        gbc.writeMem(0xd93f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0xc055, gbc.sp());
        EXPECT(0xd941, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd93f));
        EXPECT(0xf, gbc.readMem(0xd940));
        // CB 0F 013F
        gbc.setState(0x6842, 0x2ed3, 0xaa10, 0x867e, 0xfd47, 0x8fad, 0x0, 0x1);
        gbc.writeMem(0x6842, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x2ed3, gbc.sp());
        EXPECT(0x6844, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0140
        gbc.setState(0x84fd, 0x4b8, 0xf210, 0xba56, 0xf03b, 0x2611, 0x1, 0x1);
        gbc.writeMem(0x84fd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x4b8, gbc.sp());
        EXPECT(0x84ff, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84fd));
        EXPECT(0xf, gbc.readMem(0x84fe));
        // CB 0F 0141
        gbc.setState(0x5a4a, 0xf030, 0xcd50, 0xf757, 0x8579, 0x1df0, 0x1, 0x0);
        gbc.writeMem(0x5a4a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0xf030, gbc.sp());
        EXPECT(0x5a4c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0142
        gbc.setState(0xdba2, 0xe21d, 0x90e0, 0xea65, 0xaebe, 0x788b, 0x0, 0x0);
        gbc.writeMem(0xdba2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0xe21d, gbc.sp());
        EXPECT(0xdba4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdba2));
        EXPECT(0xf, gbc.readMem(0xdba3));
        // CB 0F 0143
        gbc.setState(0x5f40, 0x6d8b, 0x5820, 0xe1d8, 0xcd6, 0xff00, 0x0, 0x1);
        gbc.writeMem(0x5f40, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x6d8b, gbc.sp());
        EXPECT(0x5f42, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0144
        gbc.setState(0xcdc6, 0x7920, 0xb360, 0x5d8d, 0x251d, 0x78f2, 0x1, 0x0);
        gbc.writeMem(0xcdc6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x7920, gbc.sp());
        EXPECT(0xcdc8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcdc6));
        EXPECT(0xf, gbc.readMem(0xcdc7));
        // CB 0F 0145
        gbc.setState(0xfc4, 0x6bd5, 0x8f80, 0x4d07, 0x2616, 0x4331, 0x1, 0x0);
        gbc.writeMem(0xfc4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x6bd5, gbc.sp());
        EXPECT(0xfc6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0146
        gbc.setState(0x3a3f, 0x2d25, 0x3750, 0xb4c5, 0x24fd, 0x8bc8, 0x0, 0x0);
        gbc.writeMem(0x3a3f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x2d25, gbc.sp());
        EXPECT(0x3a41, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0147
        gbc.setState(0x385c, 0xb72a, 0xe500, 0x323, 0x6fa2, 0x6040, 0x0, 0x0);
        gbc.writeMem(0x385c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0xb72a, gbc.sp());
        EXPECT(0x385e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0148
        gbc.setState(0x5bb3, 0xecf9, 0xa9d0, 0x76c7, 0xa874, 0xd9a0, 0x1, 0x0);
        gbc.writeMem(0x5bb3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xecf9, gbc.sp());
        EXPECT(0x5bb5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0149
        gbc.setState(0xb910, 0x2def, 0x9db0, 0xaf4c, 0xe659, 0x83e6, 0x0, 0x0);
        gbc.writeMem(0xb910, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x2def, gbc.sp());
        EXPECT(0xb912, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb910));
        EXPECT(0xf, gbc.readMem(0xb911));
        // CB 0F 014A
        gbc.setState(0xe992, 0x7386, 0x7b90, 0xde40, 0xb534, 0xf5d1, 0x0, 0x0);
        gbc.writeMem(0xe992, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0x7386, gbc.sp());
        EXPECT(0xe994, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe992));
        EXPECT(0xf, gbc.readMem(0xe993));
        // CB 0F 014B
        gbc.setState(0xe146, 0x1ef5, 0x86c0, 0xda02, 0x3ed0, 0xa44, 0x1, 0x0);
        gbc.writeMem(0xe146, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0x1ef5, gbc.sp());
        EXPECT(0xe148, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe146));
        EXPECT(0xf, gbc.readMem(0xe147));
        // CB 0F 014C
        gbc.setState(0x265d, 0xc5c3, 0xde80, 0x1be5, 0xabd4, 0xa38e, 0x0, 0x0);
        gbc.writeMem(0x265d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0xc5c3, gbc.sp());
        EXPECT(0x265f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 014D
        gbc.setState(0x60b2, 0x2d1d, 0xaf70, 0x60df, 0x2ec4, 0x77b4, 0x1, 0x0);
        gbc.writeMem(0x60b2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x2d1d, gbc.sp());
        EXPECT(0x60b4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 014E
        gbc.setState(0x4dc8, 0x2f16, 0x5000, 0xbb0e, 0xf9df, 0xf904, 0x1, 0x0);
        gbc.writeMem(0x4dc8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0x2f16, gbc.sp());
        EXPECT(0x4dca, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 014F
        gbc.setState(0x6390, 0x6a6f, 0x8ff0, 0x4904, 0x2862, 0xe00e, 0x1, 0x1);
        gbc.writeMem(0x6390, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x6a6f, gbc.sp());
        EXPECT(0x6392, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0150
        gbc.setState(0x4d32, 0x4b4b, 0x2ff0, 0xea8, 0xecf7, 0xbc12, 0x0, 0x1);
        gbc.writeMem(0x4d32, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x4b4b, gbc.sp());
        EXPECT(0x4d34, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0151
        gbc.setState(0x9551, 0xb596, 0x4060, 0xe3a9, 0x1af0, 0x2682, 0x1, 0x1);
        gbc.writeMem(0x9551, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xb596, gbc.sp());
        EXPECT(0x9553, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9551));
        EXPECT(0xf, gbc.readMem(0x9552));
        // CB 0F 0152
        gbc.setState(0x5fe8, 0x36a6, 0x9800, 0xa55f, 0x4612, 0xdb2b, 0x0, 0x0);
        gbc.writeMem(0x5fe8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x36a6, gbc.sp());
        EXPECT(0x5fea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0153
        gbc.setState(0xa354, 0xa11, 0xebc0, 0xad8b, 0xbf2c, 0xcd36, 0x0, 0x0);
        gbc.writeMem(0xa354, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0xa11, gbc.sp());
        EXPECT(0xa356, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa354));
        EXPECT(0xf, gbc.readMem(0xa355));
        // CB 0F 0154
        gbc.setState(0x78f3, 0x416b, 0x3c70, 0x1f9d, 0x126b, 0x6b7c, 0x0, 0x1);
        gbc.writeMem(0x78f3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x416b, gbc.sp());
        EXPECT(0x78f5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0155
        gbc.setState(0x5fd8, 0x729, 0x9b10, 0x33b1, 0xf922, 0xab01, 0x1, 0x0);
        gbc.writeMem(0x5fd8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0x729, gbc.sp());
        EXPECT(0x5fda, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0156
        gbc.setState(0x3056, 0x8bf9, 0x7550, 0x9247, 0xbd2e, 0xf75, 0x0, 0x0);
        gbc.writeMem(0x3056, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x8bf9, gbc.sp());
        EXPECT(0x3058, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0157
        gbc.setState(0x645, 0xdeea, 0x7d70, 0xf8f7, 0xf4d2, 0x2db3, 0x1, 0x1);
        gbc.writeMem(0x645, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0xdeea, gbc.sp());
        EXPECT(0x647, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0158
        gbc.setState(0x557, 0xaf06, 0x2c70, 0x4442, 0x3a60, 0xad4c, 0x1, 0x1);
        gbc.writeMem(0x557, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0xaf06, gbc.sp());
        EXPECT(0x559, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 015C
        gbc.setState(0xb948, 0xd7ed, 0xbc60, 0xf3cd, 0x3d7f, 0x54a4, 0x0, 0x1);
        gbc.writeMem(0xb948, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xd7ed, gbc.sp());
        EXPECT(0xb94a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb948));
        EXPECT(0xf, gbc.readMem(0xb949));
        // CB 0F 015D
        gbc.setState(0x14c1, 0x8d82, 0x85f0, 0x6d5f, 0xd21e, 0xb234, 0x1, 0x1);
        gbc.writeMem(0x14c1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x8d82, gbc.sp());
        EXPECT(0x14c3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 015E
        gbc.setState(0x9f19, 0x76a0, 0x26b0, 0x6691, 0x8d67, 0x2db3, 0x0, 0x0);
        gbc.writeMem(0x9f19, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x76a0, gbc.sp());
        EXPECT(0x9f1b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f19));
        EXPECT(0xf, gbc.readMem(0x9f1a));
        // CB 0F 015F
        gbc.setState(0x70a9, 0xbcf1, 0x2a70, 0x9e01, 0xb3f7, 0xe127, 0x1, 0x1);
        gbc.writeMem(0x70a9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0xbcf1, gbc.sp());
        EXPECT(0x70ab, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0160
        gbc.setState(0x8ba7, 0xb421, 0x35c0, 0x891b, 0x1b0a, 0x9ffc, 0x1, 0x0);
        gbc.writeMem(0x8ba7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0xb421, gbc.sp());
        EXPECT(0x8ba9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ba7));
        EXPECT(0xf, gbc.readMem(0x8ba8));
        // CB 0F 0161
        gbc.setState(0xa923, 0x8c57, 0xb310, 0x7fa5, 0x1bb9, 0xc531, 0x0, 0x0);
        gbc.writeMem(0xa923, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x8c57, gbc.sp());
        EXPECT(0xa925, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa923));
        EXPECT(0xf, gbc.readMem(0xa924));
        // CB 0F 0162
        gbc.setState(0x560e, 0xb197, 0xa730, 0x651d, 0xa186, 0xe928, 0x0, 0x0);
        gbc.writeMem(0x560e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0xb197, gbc.sp());
        EXPECT(0x5610, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0163
        gbc.setState(0x8185, 0x5ce4, 0x61b0, 0x14ae, 0xab82, 0xaaf0, 0x0, 0x0);
        gbc.writeMem(0x8185, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x5ce4, gbc.sp());
        EXPECT(0x8187, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8185));
        EXPECT(0xf, gbc.readMem(0x8186));
        // CB 0F 0164
        gbc.setState(0x783e, 0x17b2, 0xa9b0, 0xf4e, 0x9b08, 0x47f5, 0x0, 0x0);
        gbc.writeMem(0x783e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x17b2, gbc.sp());
        EXPECT(0x7840, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0165
        gbc.setState(0x795b, 0x9e5, 0x4e40, 0x6031, 0xc810, 0xf594, 0x1, 0x1);
        gbc.writeMem(0x795b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x9e5, gbc.sp());
        EXPECT(0x795d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0166
        gbc.setState(0x77f6, 0x4cc9, 0x3dc0, 0x83f3, 0xd05c, 0xc14a, 0x0, 0x0);
        gbc.writeMem(0x77f6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0x4cc9, gbc.sp());
        EXPECT(0x77f8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0167
        gbc.setState(0xbbe8, 0x49b0, 0x64c0, 0x5b59, 0x3c22, 0x445e, 0x0, 0x0);
        gbc.writeMem(0xbbe8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x49b0, gbc.sp());
        EXPECT(0xbbea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbbe8));
        EXPECT(0xf, gbc.readMem(0xbbe9));
        // CB 0F 0168
        gbc.setState(0x9e5e, 0x9d1a, 0x2f60, 0x92a1, 0x4961, 0x1665, 0x0, 0x1);
        gbc.writeMem(0x9e5e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x9d1a, gbc.sp());
        EXPECT(0x9e60, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9e5e));
        EXPECT(0xf, gbc.readMem(0x9e5f));
        // CB 0F 0169
        gbc.setState(0xdc32, 0x4789, 0xe700, 0x7929, 0xb89e, 0x67bf, 0x1, 0x0);
        gbc.writeMem(0xdc32, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x4789, gbc.sp());
        EXPECT(0xdc34, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc32));
        EXPECT(0xf, gbc.readMem(0xdc33));
        // CB 0F 016A
        gbc.setState(0xcdd, 0x125d, 0x38b0, 0xbe7d, 0xf266, 0x21b7, 0x1, 0x1);
        gbc.writeMem(0xcdd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x125d, gbc.sp());
        EXPECT(0xcdf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 016B
        gbc.setState(0x2978, 0x3311, 0xebe0, 0x2392, 0x8ca6, 0x6345, 0x0, 0x0);
        gbc.writeMem(0x2978, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x3311, gbc.sp());
        EXPECT(0x297a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 016C
        gbc.setState(0xc06c, 0xba68, 0x3f90, 0x877c, 0xdf43, 0x3fef, 0x1, 0x0);
        gbc.writeMem(0xc06c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xba68, gbc.sp());
        EXPECT(0xc06e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc06c));
        EXPECT(0xf, gbc.readMem(0xc06d));
        // CB 0F 016D
        gbc.setState(0x4db2, 0xcc8a, 0xb0b0, 0x7e82, 0xbee1, 0x9433, 0x0, 0x0);
        gbc.writeMem(0x4db2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0xcc8a, gbc.sp());
        EXPECT(0x4db4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 016E
        gbc.setState(0x177c, 0x66fc, 0xe5f0, 0xf5e9, 0x8f14, 0x65ca, 0x0, 0x1);
        gbc.writeMem(0x177c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x66fc, gbc.sp());
        EXPECT(0x177e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 016F
        gbc.setState(0xc472, 0xd258, 0x20d0, 0x13bc, 0x57e1, 0xe628, 0x1, 0x0);
        gbc.writeMem(0xc472, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0xd258, gbc.sp());
        EXPECT(0xc474, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc472));
        EXPECT(0xf, gbc.readMem(0xc473));
        // CB 0F 0170
        gbc.setState(0xa8db, 0x456, 0x64c0, 0x5948, 0x204e, 0xab4c, 0x1, 0x1);
        gbc.writeMem(0xa8db, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0x456, gbc.sp());
        EXPECT(0xa8dd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa8db));
        EXPECT(0xf, gbc.readMem(0xa8dc));
        // CB 0F 0171
        gbc.setState(0x5e17, 0xb79e, 0x6900, 0x19e8, 0xaf35, 0xe215, 0x0, 0x1);
        gbc.writeMem(0x5e17, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xb79e, gbc.sp());
        EXPECT(0x5e19, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0172
        gbc.setState(0x1d72, 0xac64, 0xe460, 0x9d4f, 0xdbac, 0x98b5, 0x1, 0x0);
        gbc.writeMem(0x1d72, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0xac64, gbc.sp());
        EXPECT(0x1d74, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0173
        gbc.setState(0xe569, 0xd657, 0x4e60, 0xe11e, 0x3a0d, 0xb330, 0x1, 0x1);
        gbc.writeMem(0xe569, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0xd657, gbc.sp());
        EXPECT(0xe56b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe569));
        EXPECT(0xf, gbc.readMem(0xe56a));
        // CB 0F 0174
        gbc.setState(0xd212, 0xb064, 0x6cc0, 0x61fc, 0x85d3, 0xf890, 0x1, 0x1);
        gbc.writeMem(0xd212, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0xb064, gbc.sp());
        EXPECT(0xd214, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd212));
        EXPECT(0xf, gbc.readMem(0xd213));
        // CB 0F 0176
        gbc.setState(0xc7ae, 0x402f, 0x8510, 0x6b88, 0xfc42, 0x2999, 0x0, 0x0);
        gbc.writeMem(0xc7ae, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x402f, gbc.sp());
        EXPECT(0xc7b0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc7ae));
        EXPECT(0xf, gbc.readMem(0xc7af));
        // CB 0F 0177
        gbc.setState(0x4848, 0x8163, 0x5250, 0xb2c7, 0xae1b, 0x8057, 0x0, 0x0);
        gbc.writeMem(0x4848, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x8163, gbc.sp());
        EXPECT(0x484a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0178
        gbc.setState(0x7c8e, 0x9e21, 0xd3a0, 0x95fc, 0xca85, 0x80ee, 0x0, 0x0);
        gbc.writeMem(0x7c8e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x9e21, gbc.sp());
        EXPECT(0x7c90, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0179
        gbc.setState(0x6b1a, 0xceb0, 0xda30, 0x82d3, 0x3d7f, 0x7423, 0x0, 0x0);
        gbc.writeMem(0x6b1a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0xceb0, gbc.sp());
        EXPECT(0x6b1c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 017A
        gbc.setState(0x957d, 0x77bc, 0x8600, 0xc214, 0x695, 0x6de4, 0x0, 0x0);
        gbc.writeMem(0x957d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0x77bc, gbc.sp());
        EXPECT(0x957f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x957d));
        EXPECT(0xf, gbc.readMem(0x957e));
        // CB 0F 017B
        gbc.setState(0x60c0, 0x5a12, 0xabe0, 0x8495, 0x9f3b, 0xf05d, 0x1, 0x0);
        gbc.writeMem(0x60c0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x5a12, gbc.sp());
        EXPECT(0x60c2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 017C
        gbc.setState(0xba88, 0xbfb9, 0x6c40, 0x5840, 0x7ead, 0xb2cd, 0x0, 0x0);
        gbc.writeMem(0xba88, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0xbfb9, gbc.sp());
        EXPECT(0xba8a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xba88));
        EXPECT(0xf, gbc.readMem(0xba89));
        // CB 0F 017D
        gbc.setState(0xae83, 0x1089, 0x6260, 0x7e5f, 0xc026, 0xf137, 0x1, 0x0);
        gbc.writeMem(0xae83, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x1089, gbc.sp());
        EXPECT(0xae85, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xae83));
        EXPECT(0xf, gbc.readMem(0xae84));
        // CB 0F 017E
        gbc.setState(0x3408, 0x59da, 0xd70, 0xf3da, 0x9c2a, 0xe426, 0x1, 0x0);
        gbc.writeMem(0x3408, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x59da, gbc.sp());
        EXPECT(0x340a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 017F
        gbc.setState(0xbce5, 0xd587, 0x2230, 0x991f, 0xc558, 0x2815, 0x1, 0x0);
        gbc.writeMem(0xbce5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xd587, gbc.sp());
        EXPECT(0xbce7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbce5));
        EXPECT(0xf, gbc.readMem(0xbce6));
        // CB 0F 0180
        gbc.setState(0x498b, 0xf9df, 0xbd10, 0x7a57, 0x2b24, 0x47cb, 0x1, 0x0);
        gbc.writeMem(0x498b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0xf9df, gbc.sp());
        EXPECT(0x498d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0181
        gbc.setState(0x2d05, 0x1566, 0xf5e0, 0x9966, 0xea62, 0x4910, 0x0, 0x0);
        gbc.writeMem(0x2d05, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0x1566, gbc.sp());
        EXPECT(0x2d07, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0182
        gbc.setState(0xe847, 0xcc03, 0xa250, 0x2917, 0x890a, 0x6ff7, 0x1, 0x1);
        gbc.writeMem(0xe847, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0xcc03, gbc.sp());
        EXPECT(0xe849, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe847));
        EXPECT(0xf, gbc.readMem(0xe848));
        // CB 0F 0183
        gbc.setState(0x162b, 0xd68d, 0xb940, 0xe72f, 0x61b2, 0x36a6, 0x0, 0x0);
        gbc.writeMem(0x162b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0xd68d, gbc.sp());
        EXPECT(0x162d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0184
        gbc.setState(0xbde4, 0x6e94, 0x2530, 0x1e6, 0x95a8, 0x695a, 0x1, 0x0);
        gbc.writeMem(0xbde4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x6e94, gbc.sp());
        EXPECT(0xbde6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbde4));
        EXPECT(0xf, gbc.readMem(0xbde5));
        // CB 0F 0185
        gbc.setState(0x95a3, 0x37bc, 0x7b00, 0x115, 0x7fc, 0xa951, 0x1, 0x1);
        gbc.writeMem(0x95a3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x37bc, gbc.sp());
        EXPECT(0x95a5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x95a3));
        EXPECT(0xf, gbc.readMem(0x95a4));
        // CB 0F 0186
        gbc.setState(0xc38b, 0x2be7, 0x3100, 0x346d, 0xa7f1, 0x7bd9, 0x0, 0x0);
        gbc.writeMem(0xc38b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x2be7, gbc.sp());
        EXPECT(0xc38d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc38b));
        EXPECT(0xf, gbc.readMem(0xc38c));
        // CB 0F 0187
        gbc.setState(0x880, 0x2658, 0x44b0, 0xcb9b, 0xd98b, 0x9686, 0x1, 0x0);
        gbc.writeMem(0x880, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x2658, gbc.sp());
        EXPECT(0x882, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0188
        gbc.setState(0x1421, 0x200f, 0x87e0, 0x3735, 0xda75, 0x8b0c, 0x1, 0x0);
        gbc.writeMem(0x1421, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x200f, gbc.sp());
        EXPECT(0x1423, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0189
        gbc.setState(0x3c87, 0xe5aa, 0x5ac0, 0xe3a5, 0xb374, 0xd12b, 0x1, 0x1);
        gbc.writeMem(0x3c87, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0xe5aa, gbc.sp());
        EXPECT(0x3c89, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 018A
        gbc.setState(0xd3f2, 0xcba3, 0xea50, 0x610f, 0x8647, 0x2556, 0x0, 0x1);
        gbc.writeMem(0xd3f2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0xcba3, gbc.sp());
        EXPECT(0xd3f4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd3f2));
        EXPECT(0xf, gbc.readMem(0xd3f3));
        // CB 0F 018B
        gbc.setState(0xe848, 0x3218, 0x3190, 0x284e, 0x22b2, 0xd48d, 0x0, 0x1);
        gbc.writeMem(0xe848, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x3218, gbc.sp());
        EXPECT(0xe84a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe848));
        EXPECT(0xf, gbc.readMem(0xe849));
        // CB 0F 018C
        gbc.setState(0xb399, 0xf411, 0xe4e0, 0x5938, 0x5ab6, 0x5254, 0x1, 0x0);
        gbc.writeMem(0xb399, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0xf411, gbc.sp());
        EXPECT(0xb39b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb399));
        EXPECT(0xf, gbc.readMem(0xb39a));
        // CB 0F 018D
        gbc.setState(0xc70e, 0x4d48, 0x7c20, 0x1106, 0xc7d3, 0x64a0, 0x0, 0x0);
        gbc.writeMem(0xc70e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0x4d48, gbc.sp());
        EXPECT(0xc710, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc70e));
        EXPECT(0xf, gbc.readMem(0xc70f));
        // CB 0F 018E
        gbc.setState(0x1b95, 0xf2b1, 0xdbd0, 0xc712, 0x2c79, 0xcf85, 0x0, 0x1);
        gbc.writeMem(0x1b95, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xf2b1, gbc.sp());
        EXPECT(0x1b97, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0190
        gbc.setState(0x18d0, 0xd0e8, 0x980, 0x3180, 0x25d8, 0x5f1d, 0x0, 0x0);
        gbc.writeMem(0x18d0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xd0e8, gbc.sp());
        EXPECT(0x18d2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0191
        gbc.setState(0x5059, 0x9efc, 0xb260, 0xb215, 0x7ea3, 0xd738, 0x0, 0x1);
        gbc.writeMem(0x5059, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x9efc, gbc.sp());
        EXPECT(0x505b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0192
        gbc.setState(0xa9a4, 0xe03f, 0xa510, 0x9855, 0x3614, 0x2ceb, 0x0, 0x0);
        gbc.writeMem(0xa9a4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0xe03f, gbc.sp());
        EXPECT(0xa9a6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa9a4));
        EXPECT(0xf, gbc.readMem(0xa9a5));
        // CB 0F 0193
        gbc.setState(0x38f, 0x32a, 0x69d0, 0x54e8, 0x2574, 0x6f60, 0x0, 0x1);
        gbc.writeMem(0x38f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x32a, gbc.sp());
        EXPECT(0x391, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0194
        gbc.setState(0x670c, 0x814c, 0x56c0, 0xb85d, 0x956e, 0xcebc, 0x0, 0x1);
        gbc.writeMem(0x670c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x814c, gbc.sp());
        EXPECT(0x670e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0195
        gbc.setState(0x2b38, 0xf0bb, 0x56d0, 0x8ad8, 0x3f7a, 0xe16c, 0x1, 0x1);
        gbc.writeMem(0x2b38, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0xf0bb, gbc.sp());
        EXPECT(0x2b3a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0196
        gbc.setState(0xe4ec, 0xae69, 0xe2c0, 0xbbbf, 0x9f45, 0xf9ad, 0x1, 0x1);
        gbc.writeMem(0xe4ec, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xae69, gbc.sp());
        EXPECT(0xe4ee, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe4ec));
        EXPECT(0xf, gbc.readMem(0xe4ed));
        // CB 0F 0197
        gbc.setState(0xd807, 0xed36, 0x9b70, 0x318a, 0xc9e2, 0xbf77, 0x0, 0x0);
        gbc.writeMem(0xd807, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xed36, gbc.sp());
        EXPECT(0xd809, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd807));
        EXPECT(0xf, gbc.readMem(0xd808));
        // CB 0F 0198
        gbc.setState(0x88aa, 0x56ec, 0xd9b0, 0x301b, 0xc2f7, 0x4df9, 0x0, 0x1);
        gbc.writeMem(0x88aa, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0x56ec, gbc.sp());
        EXPECT(0x88ac, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x88aa));
        EXPECT(0xf, gbc.readMem(0x88ab));
        // CB 0F 0199
        gbc.setState(0x1fe8, 0x9e60, 0x8ff0, 0xbbcf, 0x16d, 0x51a1, 0x1, 0x1);
        gbc.writeMem(0x1fe8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x9e60, gbc.sp());
        EXPECT(0x1fea, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 019A
        gbc.setState(0x36ad, 0x3fa6, 0xff90, 0x36b5, 0x6678, 0xc4fb, 0x0, 0x0);
        gbc.writeMem(0x36ad, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x3fa6, gbc.sp());
        EXPECT(0x36af, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 019B
        gbc.setState(0x87b9, 0x411f, 0x3a30, 0xb3b8, 0xd53d, 0x5829, 0x1, 0x0);
        gbc.writeMem(0x87b9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0x411f, gbc.sp());
        EXPECT(0x87bb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x87b9));
        EXPECT(0xf, gbc.readMem(0x87ba));
        // CB 0F 019C
        gbc.setState(0xa708, 0x4fa5, 0x2360, 0x6baa, 0x8f88, 0x33d6, 0x1, 0x1);
        gbc.writeMem(0xa708, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x4fa5, gbc.sp());
        EXPECT(0xa70a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa708));
        EXPECT(0xf, gbc.readMem(0xa709));
        // CB 0F 019D
        gbc.setState(0x2285, 0x3172, 0x7f40, 0xe04c, 0xfbd7, 0x6ce2, 0x0, 0x0);
        gbc.writeMem(0x2285, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x3172, gbc.sp());
        EXPECT(0x2287, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 019E
        gbc.setState(0x8814, 0x75f8, 0xacd0, 0x6d87, 0x76b0, 0x1053, 0x1, 0x1);
        gbc.writeMem(0x8814, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x75f8, gbc.sp());
        EXPECT(0x8816, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8814));
        EXPECT(0xf, gbc.readMem(0x8815));
        // CB 0F 019F
        gbc.setState(0x279b, 0x9b4a, 0x8cf0, 0xc795, 0x442d, 0x4b77, 0x0, 0x1);
        gbc.writeMem(0x279b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x9b4a, gbc.sp());
        EXPECT(0x279d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 01A0
        gbc.setState(0x2de1, 0xdbf5, 0x6d80, 0xe9e7, 0xcadf, 0xdc85, 0x0, 0x0);
        gbc.writeMem(0x2de1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xdbf5, gbc.sp());
        EXPECT(0x2de3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 01A1
        gbc.setState(0x783e, 0x61fd, 0x7610, 0xf6d, 0xb9e8, 0xf269, 0x0, 0x1);
        gbc.writeMem(0x783e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0x61fd, gbc.sp());
        EXPECT(0x7840, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 01A2
        gbc.setState(0xa19b, 0x6bc0, 0x65f0, 0x2d92, 0x66b, 0x54a5, 0x0, 0x1);
        gbc.writeMem(0xa19b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x6bc0, gbc.sp());
        EXPECT(0xa19d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa19b));
        EXPECT(0xf, gbc.readMem(0xa19c));
        // CB 0F 01A3
        gbc.setState(0x80bd, 0x5f3b, 0xc50, 0xb801, 0x7d8e, 0xfffb, 0x0, 0x1);
        gbc.writeMem(0x80bd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x5f3b, gbc.sp());
        EXPECT(0x80bf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x80bd));
        EXPECT(0xf, gbc.readMem(0x80be));
        // CB 0F 01A4
        gbc.setState(0x149, 0x85c9, 0xcc30, 0xb66a, 0xfc5b, 0xa5b8, 0x0, 0x0);
        gbc.writeMem(0x149, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x85c9, gbc.sp());
        EXPECT(0x14b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 01A5
        gbc.setState(0x6ae6, 0x3c34, 0xfaa0, 0xc357, 0xc7e7, 0xbc33, 0x1, 0x1);
        gbc.writeMem(0x6ae6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x3c34, gbc.sp());
        EXPECT(0x6ae8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 01A6
        gbc.setState(0x97f0, 0x3c75, 0x96d0, 0xc2ac, 0xeca6, 0x5412, 0x0, 0x0);
        gbc.writeMem(0x97f0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x3c75, gbc.sp());
        EXPECT(0x97f2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x97f0));
        EXPECT(0xf, gbc.readMem(0x97f1));
        // CB 0F 01A7
        gbc.setState(0xe092, 0x471f, 0xa420, 0x9de5, 0x693, 0x34a6, 0x0, 0x1);
        gbc.writeMem(0xe092, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x471f, gbc.sp());
        EXPECT(0xe094, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe092));
        EXPECT(0xf, gbc.readMem(0xe093));
        // CB 0F 01A9
        gbc.setState(0x8041, 0xffeb, 0xfef0, 0x505d, 0x5e19, 0xb993, 0x0, 0x1);
        gbc.writeMem(0x8041, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0xffeb, gbc.sp());
        EXPECT(0x8043, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8041));
        EXPECT(0xf, gbc.readMem(0x8042));
        // CB 0F 01AA
        gbc.setState(0x7a27, 0x7e09, 0xc930, 0xb718, 0x7b98, 0xf8b7, 0x1, 0x0);
        gbc.writeMem(0x7a27, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x7e09, gbc.sp());
        EXPECT(0x7a29, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 01AB
        gbc.setState(0x9ee6, 0x1c41, 0xeed0, 0xbc39, 0x207d, 0xfcc9, 0x1, 0x0);
        gbc.writeMem(0x9ee6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x1c41, gbc.sp());
        EXPECT(0x9ee8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9ee6));
        EXPECT(0xf, gbc.readMem(0x9ee7));
        // CB 0F 01AC
        gbc.setState(0x841d, 0xb169, 0xe900, 0x965a, 0x29a7, 0xd42c, 0x0, 0x0);
        gbc.writeMem(0x841d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0xb169, gbc.sp());
        EXPECT(0x841f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x841d));
        EXPECT(0xf, gbc.readMem(0x841e));
        // CB 0F 01AD
        gbc.setState(0x418, 0x11fe, 0x44d0, 0x23e9, 0x6ed1, 0x26b4, 0x1, 0x1);
        gbc.writeMem(0x418, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x11fe, gbc.sp());
        EXPECT(0x41a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 01AE
        gbc.setState(0x8af4, 0x5dcd, 0x5cb0, 0x44d5, 0x9f80, 0x83a0, 0x1, 0x1);
        gbc.writeMem(0x8af4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0x5dcd, gbc.sp());
        EXPECT(0x8af6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8af4));
        EXPECT(0xf, gbc.readMem(0x8af5));
        // CB 0F 01AF
        gbc.setState(0xec81, 0x8b4, 0x1b70, 0xfe63, 0x7386, 0x875a, 0x1, 0x1);
        gbc.writeMem(0xec81, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x8b4, gbc.sp());
        EXPECT(0xec83, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xec81));
        EXPECT(0xf, gbc.readMem(0xec82));
        // CB 0F 01B0
        gbc.setState(0x6695, 0x4379, 0x9e20, 0x47cd, 0x5eb, 0xccb7, 0x1, 0x0);
        gbc.writeMem(0x6695, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x4379, gbc.sp());
        EXPECT(0x6697, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 01B1
        gbc.setState(0x4e0f, 0x3aac, 0x5140, 0x4d2b, 0x169c, 0x88b8, 0x0, 0x1);
        gbc.writeMem(0x4e0f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x3aac, gbc.sp());
        EXPECT(0x4e11, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 01B2
        gbc.setState(0xcb6d, 0x8996, 0x5860, 0xa26f, 0x9fcb, 0x81a2, 0x1, 0x0);
        gbc.writeMem(0xcb6d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0x8996, gbc.sp());
        EXPECT(0xcb6f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcb6d));
        EXPECT(0xf, gbc.readMem(0xcb6e));
        // CB 0F 01B3
        gbc.setState(0x6f5d, 0x2480, 0x77f0, 0xd60c, 0xc2b3, 0xfbbb, 0x0, 0x0);
        gbc.writeMem(0x6f5d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x2480, gbc.sp());
        EXPECT(0x6f5f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 01B4
        gbc.setState(0x9a72, 0xa9a3, 0x14c0, 0x3209, 0xec53, 0xb71a, 0x1, 0x1);
        gbc.writeMem(0x9a72, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xa9a3, gbc.sp());
        EXPECT(0x9a74, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9a72));
        EXPECT(0xf, gbc.readMem(0x9a73));
        // CB 0F 01B5
        gbc.setState(0xa436, 0x4a30, 0x3800, 0x2241, 0x59f8, 0xdf02, 0x0, 0x1);
        gbc.writeMem(0xa436, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x4a30, gbc.sp());
        EXPECT(0xa438, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa436));
        EXPECT(0xf, gbc.readMem(0xa437));
        // CB 0F 01B6
        gbc.setState(0x9b05, 0x47b3, 0xc600, 0x3efc, 0xd79d, 0xe601, 0x1, 0x1);
        gbc.writeMem(0x9b05, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0x47b3, gbc.sp());
        EXPECT(0x9b07, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b05));
        EXPECT(0xf, gbc.readMem(0x9b06));
        // CB 0F 01B7
        gbc.setState(0x9d15, 0xb305, 0x7b0, 0xd9e4, 0x3539, 0x6ab8, 0x0, 0x0);
        gbc.writeMem(0x9d15, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0xb305, gbc.sp());
        EXPECT(0x9d17, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d15));
        EXPECT(0xf, gbc.readMem(0x9d16));
        // CB 0F 01B8
        gbc.setState(0xdf, 0x4782, 0x8360, 0xffdc, 0xf2, 0x18a9, 0x0, 0x1);
        gbc.writeMem(0xdf, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x4782, gbc.sp());
        EXPECT(0xe1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 01B9
        gbc.setState(0x2beb, 0x3ed0, 0x2b00, 0x4a33, 0x5b8a, 0xe1c7, 0x0, 0x1);
        gbc.writeMem(0x2beb, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x3ed0, gbc.sp());
        EXPECT(0x2bed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 01BA
        gbc.setState(0x6f48, 0xd08f, 0xb1a0, 0x3fb0, 0x486c, 0x9ffa, 0x1, 0x0);
        gbc.writeMem(0x6f48, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xd08f, gbc.sp());
        EXPECT(0x6f4a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 01BB
        gbc.setState(0x2c34, 0xe32d, 0x6f80, 0xa610, 0xa983, 0xabac, 0x0, 0x1);
        gbc.writeMem(0x2c34, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xe32d, gbc.sp());
        EXPECT(0x2c36, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 01BC
        gbc.setState(0x9b2b, 0xa6f4, 0xb8b0, 0xdc47, 0xf8a8, 0xdfe, 0x1, 0x1);
        gbc.writeMem(0x9b2b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0xa6f4, gbc.sp());
        EXPECT(0x9b2d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b2b));
        EXPECT(0xf, gbc.readMem(0x9b2c));
        // CB 0F 01BD
        gbc.setState(0x7af8, 0x774, 0x23b0, 0x1bdb, 0xc9, 0x38ed, 0x0, 0x0);
        gbc.writeMem(0x7af8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x774, gbc.sp());
        EXPECT(0x7afa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 01BE
        gbc.setState(0xdf2f, 0xd02c, 0xf1c0, 0x7d6a, 0xb5f8, 0x231c, 0x1, 0x0);
        gbc.writeMem(0xdf2f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0xd02c, gbc.sp());
        EXPECT(0xdf31, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdf2f));
        EXPECT(0xf, gbc.readMem(0xdf30));
        // CB 0F 01BF
        gbc.setState(0x15ff, 0xa1ca, 0x36d0, 0x894a, 0x71c5, 0xa8ad, 0x1, 0x1);
        gbc.writeMem(0x15ff, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xa1ca, gbc.sp());
        EXPECT(0x1601, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 01C1
        gbc.setState(0xcf2c, 0xb5ca, 0xb7c0, 0xd2e8, 0xa247, 0x1f69, 0x0, 0x1);
        gbc.writeMem(0xcf2c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xb5ca, gbc.sp());
        EXPECT(0xcf2e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf2c));
        EXPECT(0xf, gbc.readMem(0xcf2d));
        // CB 0F 01C2
        gbc.setState(0x6ead, 0x570e, 0xfb10, 0xe0d7, 0x74f5, 0xff3a, 0x1, 0x1);
        gbc.writeMem(0x6ead, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x570e, gbc.sp());
        EXPECT(0x6eaf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 01C3
        gbc.setState(0x5b9b, 0x2763, 0x8620, 0x79ef, 0xe469, 0xfe84, 0x0, 0x0);
        gbc.writeMem(0x5b9b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x2763, gbc.sp());
        EXPECT(0x5b9d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 01C4
        gbc.setState(0x4b30, 0x5f8b, 0x2f0, 0x9c3d, 0x390c, 0x78d6, 0x1, 0x1);
        gbc.writeMem(0x4b30, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x5f8b, gbc.sp());
        EXPECT(0x4b32, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 01C5
        gbc.setState(0x79e9, 0x479f, 0x5bb0, 0x51fd, 0x267d, 0xb085, 0x0, 0x1);
        gbc.writeMem(0x79e9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0x479f, gbc.sp());
        EXPECT(0x79eb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 01C7
        gbc.setState(0xede1, 0xd233, 0x6c90, 0x5070, 0xb1c7, 0xbbc5, 0x0, 0x1);
        gbc.writeMem(0xede1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0xd233, gbc.sp());
        EXPECT(0xede3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xede1));
        EXPECT(0xf, gbc.readMem(0xede2));
        // CB 0F 01C8
        gbc.setState(0xc21d, 0xca0, 0xec20, 0x6b02, 0xe4c0, 0xabb7, 0x0, 0x0);
        gbc.writeMem(0xc21d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0xca0, gbc.sp());
        EXPECT(0xc21f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc21d));
        EXPECT(0xf, gbc.readMem(0xc21e));
        // CB 0F 01C9
        gbc.setState(0x5629, 0x1c49, 0x7290, 0x123a, 0x931b, 0x6d92, 0x1, 0x0);
        gbc.writeMem(0x5629, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x1c49, gbc.sp());
        EXPECT(0x562b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 01CA
        gbc.setState(0xc256, 0x618c, 0x7c00, 0x18a7, 0x99f7, 0x4998, 0x1, 0x0);
        gbc.writeMem(0xc256, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x618c, gbc.sp());
        EXPECT(0xc258, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc256));
        EXPECT(0xf, gbc.readMem(0xc257));
        // CB 0F 01CB
        gbc.setState(0xd16a, 0x8e09, 0xeaf0, 0xab94, 0x10c9, 0x9b7c, 0x0, 0x0);
        gbc.writeMem(0xd16a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x8e09, gbc.sp());
        EXPECT(0xd16c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd16a));
        EXPECT(0xf, gbc.readMem(0xd16b));
        // CB 0F 01CC
        gbc.setState(0xdbe0, 0xe7a6, 0x2c30, 0x203e, 0x1ae3, 0xffeb, 0x0, 0x0);
        gbc.writeMem(0xdbe0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0xe7a6, gbc.sp());
        EXPECT(0xdbe2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdbe0));
        EXPECT(0xf, gbc.readMem(0xdbe1));
        // CB 0F 01CD
        gbc.setState(0x42dc, 0x277c, 0xb0e0, 0x7c7c, 0xae6c, 0xdafb, 0x0, 0x0);
        gbc.writeMem(0x42dc, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x277c, gbc.sp());
        EXPECT(0x42de, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 01CE
        gbc.setState(0x1fd8, 0xc5a, 0xf780, 0x6388, 0xc386, 0xe250, 0x1, 0x1);
        gbc.writeMem(0x1fd8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0xc5a, gbc.sp());
        EXPECT(0x1fda, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 01CF
        gbc.setState(0x7159, 0x6d1e, 0x7750, 0xcdd4, 0xe638, 0xcfcc, 0x1, 0x1);
        gbc.writeMem(0x7159, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x6d1e, gbc.sp());
        EXPECT(0x715b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 01D0
        gbc.setState(0xcf8b, 0x7ced, 0xfde0, 0x515c, 0x50ce, 0x8cc1, 0x1, 0x0);
        gbc.writeMem(0xcf8b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x7ced, gbc.sp());
        EXPECT(0xcf8d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf8b));
        EXPECT(0xf, gbc.readMem(0xcf8c));
        // CB 0F 01D1
        gbc.setState(0xcbde, 0xde0b, 0x3540, 0x5191, 0x7aae, 0xce1d, 0x1, 0x1);
        gbc.writeMem(0xcbde, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xde0b, gbc.sp());
        EXPECT(0xcbe0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcbde));
        EXPECT(0xf, gbc.readMem(0xcbdf));
        // CB 0F 01D2
        gbc.setState(0x6e0e, 0xf008, 0xe9b0, 0x4758, 0x62e2, 0xa5de, 0x1, 0x1);
        gbc.writeMem(0x6e0e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0xf008, gbc.sp());
        EXPECT(0x6e10, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 01D3
        gbc.setState(0xdd47, 0x7f02, 0xaec0, 0xdcfd, 0x692c, 0x863b, 0x0, 0x1);
        gbc.writeMem(0xdd47, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0x7f02, gbc.sp());
        EXPECT(0xdd49, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdd47));
        EXPECT(0xf, gbc.readMem(0xdd48));
        // CB 0F 01D4
        gbc.setState(0xb1ab, 0xd711, 0x2050, 0xec41, 0x3c3a, 0xe116, 0x0, 0x1);
        gbc.writeMem(0xb1ab, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0xd711, gbc.sp());
        EXPECT(0xb1ad, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb1ab));
        EXPECT(0xf, gbc.readMem(0xb1ac));
        // CB 0F 01D5
        gbc.setState(0x973, 0x4813, 0xa820, 0x80a3, 0x3afd, 0x9145, 0x1, 0x1);
        gbc.writeMem(0x973, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x4813, gbc.sp());
        EXPECT(0x975, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 01D6
        gbc.setState(0xb40c, 0x2abb, 0xf880, 0x19bd, 0x41f0, 0x1bb8, 0x1, 0x1);
        gbc.writeMem(0xb40c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x2abb, gbc.sp());
        EXPECT(0xb40e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb40c));
        EXPECT(0xf, gbc.readMem(0xb40d));
        // CB 0F 01D7
        gbc.setState(0x4917, 0x57b9, 0x57b0, 0xb19e, 0x67d, 0x25a2, 0x1, 0x0);
        gbc.writeMem(0x4917, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0x57b9, gbc.sp());
        EXPECT(0x4919, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 01D8
        gbc.setState(0x35a9, 0xa503, 0x2530, 0x4e67, 0xc00b, 0x64d9, 0x0, 0x0);
        gbc.writeMem(0x35a9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0xa503, gbc.sp());
        EXPECT(0x35ab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 01D9
        gbc.setState(0x6fbf, 0xaf8c, 0x5d60, 0xe103, 0xc38, 0x411b, 0x0, 0x0);
        gbc.writeMem(0x6fbf, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0xaf8c, gbc.sp());
        EXPECT(0x6fc1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 01DA
        gbc.setState(0x5ca2, 0x1588, 0xcb30, 0x726, 0x28a, 0xa8dc, 0x1, 0x1);
        gbc.writeMem(0x5ca2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x1588, gbc.sp());
        EXPECT(0x5ca4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 01DB
        gbc.setState(0xa8e6, 0x7211, 0xc9b0, 0x39fa, 0x7636, 0x5f95, 0x0, 0x1);
        gbc.writeMem(0xa8e6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x7211, gbc.sp());
        EXPECT(0xa8e8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa8e6));
        EXPECT(0xf, gbc.readMem(0xa8e7));
        // CB 0F 01DC
        gbc.setState(0x4b79, 0x726d, 0x4790, 0xac56, 0xa56e, 0x2acf, 0x1, 0x0);
        gbc.writeMem(0x4b79, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x726d, gbc.sp());
        EXPECT(0x4b7b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 01DD
        gbc.setState(0x1999, 0x709d, 0x350, 0x5b01, 0xf919, 0xa6d4, 0x0, 0x0);
        gbc.writeMem(0x1999, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x709d, gbc.sp());
        EXPECT(0x199b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 01DE
        gbc.setState(0x8e69, 0x96a3, 0x8320, 0x9476, 0xb1e0, 0xeb46, 0x0, 0x0);
        gbc.writeMem(0x8e69, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x96a3, gbc.sp());
        EXPECT(0x8e6b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e69));
        EXPECT(0xf, gbc.readMem(0x8e6a));
        // CB 0F 01DF
        gbc.setState(0x4db3, 0xe8ae, 0x4920, 0x1ee9, 0x7838, 0x84c6, 0x0, 0x1);
        gbc.writeMem(0x4db3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0xe8ae, gbc.sp());
        EXPECT(0x4db5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 01E0
        gbc.setState(0x44a9, 0xa242, 0xcc80, 0xf77f, 0x8289, 0x1d72, 0x0, 0x0);
        gbc.writeMem(0x44a9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0xa242, gbc.sp());
        EXPECT(0x44ab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 01E1
        gbc.setState(0x5d66, 0x6535, 0x2840, 0xa095, 0xdd29, 0xf58c, 0x0, 0x1);
        gbc.writeMem(0x5d66, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x6535, gbc.sp());
        EXPECT(0x5d68, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 01E2
        gbc.setState(0xde9f, 0x5d94, 0x6940, 0x6518, 0x211b, 0x1b1f, 0x1, 0x0);
        gbc.writeMem(0xde9f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0x5d94, gbc.sp());
        EXPECT(0xdea1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xde9f));
        EXPECT(0xf, gbc.readMem(0xdea0));
        // CB 0F 01E3
        gbc.setState(0x1ee3, 0x7485, 0xc7f0, 0x1758, 0x3785, 0xbd05, 0x0, 0x1);
        gbc.writeMem(0x1ee3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0x7485, gbc.sp());
        EXPECT(0x1ee5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 01E4
        gbc.setState(0xa71b, 0x356d, 0x43f0, 0xe3a0, 0xcfa6, 0x5b0c, 0x0, 0x0);
        gbc.writeMem(0xa71b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x356d, gbc.sp());
        EXPECT(0xa71d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa71b));
        EXPECT(0xf, gbc.readMem(0xa71c));
        // CB 0F 01E5
        gbc.setState(0x5347, 0x7d22, 0x9d0, 0x421f, 0xb79f, 0xd190, 0x1, 0x1);
        gbc.writeMem(0x5347, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x7d22, gbc.sp());
        EXPECT(0x5349, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 01E6
        gbc.setState(0x2acd, 0x2a6f, 0xf6c0, 0x4756, 0xc7ba, 0x8676, 0x0, 0x1);
        gbc.writeMem(0x2acd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x2a6f, gbc.sp());
        EXPECT(0x2acf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 01E7
        gbc.setState(0x9636, 0x1fa4, 0x4770, 0xaec, 0xb970, 0x6a63, 0x1, 0x1);
        gbc.writeMem(0x9636, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0x1fa4, gbc.sp());
        EXPECT(0x9638, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9636));
        EXPECT(0xf, gbc.readMem(0x9637));
        // CB 0F 01E8
        gbc.setState(0x159b, 0x700a, 0x41e0, 0x2cbc, 0xf47a, 0xa9f1, 0x0, 0x0);
        gbc.writeMem(0x159b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x700a, gbc.sp());
        EXPECT(0x159d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 01E9
        gbc.setState(0x1d23, 0x2e57, 0xdca0, 0x9afa, 0x6903, 0x45ea, 0x0, 0x1);
        gbc.writeMem(0x1d23, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x2e57, gbc.sp());
        EXPECT(0x1d25, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 01EC
        gbc.setState(0x471d, 0xe25d, 0xa820, 0x31be, 0x107b, 0xcd69, 0x0, 0x1);
        gbc.writeMem(0x471d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xe25d, gbc.sp());
        EXPECT(0x471f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 01EE
        gbc.setState(0x849e, 0x8bf4, 0xbda0, 0xc33e, 0x95ea, 0x511b, 0x0, 0x1);
        gbc.writeMem(0x849e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x8bf4, gbc.sp());
        EXPECT(0x84a0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x849e));
        EXPECT(0xf, gbc.readMem(0x849f));
        // CB 0F 01EF
        gbc.setState(0xcb5, 0x1038, 0x8c30, 0x6782, 0xfcd5, 0x65e0, 0x0, 0x1);
        gbc.writeMem(0xcb5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x1038, gbc.sp());
        EXPECT(0xcb7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 01F0
        gbc.setState(0xbd49, 0x661d, 0x3850, 0xcc7c, 0x866e, 0xfed0, 0x1, 0x0);
        gbc.writeMem(0xbd49, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x661d, gbc.sp());
        EXPECT(0xbd4b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd49));
        EXPECT(0xf, gbc.readMem(0xbd4a));
        // CB 0F 01F1
        gbc.setState(0x2602, 0xae6, 0x4030, 0x8858, 0xe7e8, 0x9254, 0x0, 0x0);
        gbc.writeMem(0x2602, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0xae6, gbc.sp());
        EXPECT(0x2604, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 01F2
        gbc.setState(0x937f, 0xe7f, 0x3ce0, 0x776e, 0xf760, 0x2943, 0x1, 0x1);
        gbc.writeMem(0x937f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0xe7f, gbc.sp());
        EXPECT(0x9381, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x937f));
        EXPECT(0xf, gbc.readMem(0x9380));
        // CB 0F 01F3
        gbc.setState(0xb86a, 0xdbb4, 0x6d90, 0x1ce7, 0x86da, 0xac41, 0x1, 0x0);
        gbc.writeMem(0xb86a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0xdbb4, gbc.sp());
        EXPECT(0xb86c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb86a));
        EXPECT(0xf, gbc.readMem(0xb86b));
        // CB 0F 01F4
        gbc.setState(0x7250, 0xce20, 0x2460, 0xfa0b, 0x1c63, 0xfce0, 0x0, 0x1);
        gbc.writeMem(0x7250, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0xce20, gbc.sp());
        EXPECT(0x7252, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 01F5
        gbc.setState(0xe951, 0xb57, 0x4000, 0x4c5f, 0x4249, 0x5474, 0x0, 0x1);
        gbc.writeMem(0xe951, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0xb57, gbc.sp());
        EXPECT(0xe953, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe951));
        EXPECT(0xf, gbc.readMem(0xe952));
        // CB 0F 01F6
        gbc.setState(0x3d4e, 0x56c8, 0xb630, 0x2ed, 0xf2d6, 0x8eed, 0x0, 0x0);
        gbc.writeMem(0x3d4e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x56c8, gbc.sp());
        EXPECT(0x3d50, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 01F7
        gbc.setState(0x8b0c, 0x84fe, 0x4630, 0xc52b, 0x3e85, 0x5c98, 0x1, 0x0);
        gbc.writeMem(0x8b0c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x84fe, gbc.sp());
        EXPECT(0x8b0e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b0c));
        EXPECT(0xf, gbc.readMem(0x8b0d));
        // CB 0F 01F8
        gbc.setState(0xa2d3, 0x8ff6, 0x9890, 0x73ab, 0x6d77, 0x96ae, 0x1, 0x1);
        gbc.writeMem(0xa2d3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x8ff6, gbc.sp());
        EXPECT(0xa2d5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa2d3));
        EXPECT(0xf, gbc.readMem(0xa2d4));
        // CB 0F 01F9
        gbc.setState(0x5702, 0xffd8, 0xae10, 0xd, 0x80fd, 0xf96e, 0x0, 0x0);
        gbc.writeMem(0x5702, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0xffd8, gbc.sp());
        EXPECT(0x5704, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 01FA
        gbc.setState(0x86a9, 0x53dc, 0xda40, 0x4679, 0xfb49, 0x607a, 0x1, 0x1);
        gbc.writeMem(0x86a9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x53dc, gbc.sp());
        EXPECT(0x86ab, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x86a9));
        EXPECT(0xf, gbc.readMem(0x86aa));
        // CB 0F 01FB
        gbc.setState(0x60be, 0xda72, 0xd920, 0xaae9, 0x74d7, 0x9bfc, 0x1, 0x0);
        gbc.writeMem(0x60be, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0xda72, gbc.sp());
        EXPECT(0x60c0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 01FC
        gbc.setState(0x685, 0xb30a, 0x1a60, 0x95ba, 0x3168, 0x45ae, 0x1, 0x1);
        gbc.writeMem(0x685, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0xb30a, gbc.sp());
        EXPECT(0x687, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 01FD
        gbc.setState(0x85b1, 0x5a2f, 0xe810, 0xfe79, 0x32c7, 0x696, 0x0, 0x0);
        gbc.writeMem(0x85b1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x5a2f, gbc.sp());
        EXPECT(0x85b3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x85b1));
        EXPECT(0xf, gbc.readMem(0x85b2));
        // CB 0F 01FE
        gbc.setState(0x9709, 0xaf81, 0x9b40, 0x386c, 0x5e1, 0xd253, 0x0, 0x0);
        gbc.writeMem(0x9709, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0xaf81, gbc.sp());
        EXPECT(0x970b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9709));
        EXPECT(0xf, gbc.readMem(0x970a));
        // CB 0F 01FF
        gbc.setState(0xca44, 0x18ff, 0xefb0, 0x3286, 0xe2f8, 0xe7d9, 0x0, 0x0);
        gbc.writeMem(0xca44, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x18ff, gbc.sp());
        EXPECT(0xca46, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xca44));
        EXPECT(0xf, gbc.readMem(0xca45));
        // CB 0F 0200
        gbc.setState(0x7ec4, 0x7922, 0x13d0, 0x14e1, 0xe625, 0x7b4f, 0x1, 0x1);
        gbc.writeMem(0x7ec4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0x7922, gbc.sp());
        EXPECT(0x7ec6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0201
        gbc.setState(0xd0ce, 0x1911, 0x5b30, 0xba6b, 0x21cd, 0x265f, 0x0, 0x0);
        gbc.writeMem(0xd0ce, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x1911, gbc.sp());
        EXPECT(0xd0d0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd0ce));
        EXPECT(0xf, gbc.readMem(0xd0cf));
        // CB 0F 0202
        gbc.setState(0x5606, 0x7130, 0xcc00, 0x28c3, 0x89d9, 0x6061, 0x1, 0x1);
        gbc.writeMem(0x5606, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x7130, gbc.sp());
        EXPECT(0x5608, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0203
        gbc.setState(0x9528, 0x9ce7, 0xc230, 0xa688, 0x607c, 0x82b, 0x1, 0x0);
        gbc.writeMem(0x9528, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x9ce7, gbc.sp());
        EXPECT(0x952a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9528));
        EXPECT(0xf, gbc.readMem(0x9529));
        // CB 0F 0204
        gbc.setState(0x28ec, 0x3bdd, 0xad80, 0x7357, 0xdc72, 0xc007, 0x1, 0x0);
        gbc.writeMem(0x28ec, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x3bdd, gbc.sp());
        EXPECT(0x28ee, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0205
        gbc.setState(0x9025, 0xee57, 0xb20, 0x70f0, 0xdf39, 0x2fcc, 0x1, 0x1);
        gbc.writeMem(0x9025, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xee57, gbc.sp());
        EXPECT(0x9027, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9025));
        EXPECT(0xf, gbc.readMem(0x9026));
        // CB 0F 0206
        gbc.setState(0x60d8, 0x81e9, 0xa130, 0x6c59, 0x6619, 0x1349, 0x1, 0x1);
        gbc.writeMem(0x60d8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x81e9, gbc.sp());
        EXPECT(0x60da, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0207
        gbc.setState(0x70e0, 0xa2bc, 0x2410, 0x7006, 0x5f4d, 0x4f9c, 0x1, 0x0);
        gbc.writeMem(0x70e0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0xa2bc, gbc.sp());
        EXPECT(0x70e2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0209
        gbc.setState(0x4f37, 0xbfba, 0x2590, 0x4df5, 0xa7c8, 0xb7c, 0x1, 0x1);
        gbc.writeMem(0x4f37, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0xbfba, gbc.sp());
        EXPECT(0x4f39, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 020A
        gbc.setState(0x80a8, 0xb5e8, 0x310, 0xb74d, 0x8671, 0xe594, 0x0, 0x0);
        gbc.writeMem(0x80a8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0xb5e8, gbc.sp());
        EXPECT(0x80aa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x80a8));
        EXPECT(0xf, gbc.readMem(0x80a9));
        // CB 0F 020B
        gbc.setState(0x78e, 0x59cd, 0xabc0, 0xaace, 0x96e, 0xb10a, 0x0, 0x0);
        gbc.writeMem(0x78e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x59cd, gbc.sp());
        EXPECT(0x790, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 020C
        gbc.setState(0x65d, 0x3de2, 0xa900, 0x9315, 0xf077, 0x9d7c, 0x1, 0x1);
        gbc.writeMem(0x65d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x3de2, gbc.sp());
        EXPECT(0x65f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 020D
        gbc.setState(0x66, 0xa869, 0x8020, 0xd4f8, 0xd742, 0xef52, 0x1, 0x1);
        gbc.writeMem(0x66, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0xa869, gbc.sp());
        EXPECT(0x68, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 020E
        gbc.setState(0x273d, 0x5e51, 0xda30, 0xdf84, 0xd16e, 0xa575, 0x1, 0x0);
        gbc.writeMem(0x273d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x5e51, gbc.sp());
        EXPECT(0x273f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 020F
        gbc.setState(0x7e5c, 0x1fb1, 0x80f0, 0xd3a1, 0x20d6, 0x644b, 0x1, 0x0);
        gbc.writeMem(0x7e5c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0x1fb1, gbc.sp());
        EXPECT(0x7e5e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0210
        gbc.setState(0xc0b7, 0x8ed5, 0xd3b0, 0x972e, 0x9ef5, 0xe256, 0x1, 0x1);
        gbc.writeMem(0xc0b7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x8ed5, gbc.sp());
        EXPECT(0xc0b9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc0b7));
        EXPECT(0xf, gbc.readMem(0xc0b8));
        // CB 0F 0211
        gbc.setState(0x75a6, 0xd799, 0xe230, 0x7455, 0x1052, 0xc6c9, 0x1, 0x0);
        gbc.writeMem(0x75a6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0xd799, gbc.sp());
        EXPECT(0x75a8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0212
        gbc.setState(0x963f, 0xfe5a, 0xc450, 0xa43a, 0xb5b1, 0x8da3, 0x0, 0x1);
        gbc.writeMem(0x963f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0xfe5a, gbc.sp());
        EXPECT(0x9641, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x963f));
        EXPECT(0xf, gbc.readMem(0x9640));
        // CB 0F 0213
        gbc.setState(0x2d19, 0xfe5b, 0xfdc0, 0x4492, 0x6400, 0x4153, 0x1, 0x0);
        gbc.writeMem(0x2d19, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0xfe5b, gbc.sp());
        EXPECT(0x2d1b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0215
        gbc.setState(0x975b, 0x200f, 0x7610, 0xe504, 0x757a, 0x7a12, 0x0, 0x1);
        gbc.writeMem(0x975b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x200f, gbc.sp());
        EXPECT(0x975d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x975b));
        EXPECT(0xf, gbc.readMem(0x975c));
        // CB 0F 0216
        gbc.setState(0x6159, 0x7740, 0xd330, 0xaa9d, 0x9bb7, 0xaef1, 0x0, 0x1);
        gbc.writeMem(0x6159, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x7740, gbc.sp());
        EXPECT(0x615b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0217
        gbc.setState(0x5781, 0x3070, 0x9940, 0x5577, 0x802d, 0x7200, 0x1, 0x1);
        gbc.writeMem(0x5781, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x3070, gbc.sp());
        EXPECT(0x5783, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0218
        gbc.setState(0x3e40, 0x2b93, 0xbce0, 0x2057, 0xd477, 0xfcf3, 0x0, 0x0);
        gbc.writeMem(0x3e40, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x2b93, gbc.sp());
        EXPECT(0x3e42, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0219
        gbc.setState(0x1b33, 0x4fb9, 0xc540, 0xa369, 0xa9f6, 0xb6d0, 0x0, 0x1);
        gbc.writeMem(0x1b33, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x4fb9, gbc.sp());
        EXPECT(0x1b35, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 021A
        gbc.setState(0x86b3, 0x9d08, 0xddf0, 0x49ff, 0x9f2a, 0x3e62, 0x1, 0x1);
        gbc.writeMem(0x86b3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0x9d08, gbc.sp());
        EXPECT(0x86b5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x86b3));
        EXPECT(0xf, gbc.readMem(0x86b4));
        // CB 0F 021B
        gbc.setState(0x91a1, 0xa93c, 0xc7d0, 0x1357, 0xad79, 0x5bf4, 0x1, 0x1);
        gbc.writeMem(0x91a1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xa93c, gbc.sp());
        EXPECT(0x91a3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x91a1));
        EXPECT(0xf, gbc.readMem(0x91a2));
        // CB 0F 021C
        gbc.setState(0x8285, 0x6148, 0xdc10, 0xfea1, 0x36ad, 0xffdf, 0x0, 0x0);
        gbc.writeMem(0x8285, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x6148, gbc.sp());
        EXPECT(0x8287, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8285));
        EXPECT(0xf, gbc.readMem(0x8286));
        // CB 0F 021D
        gbc.setState(0x1107, 0xe8da, 0x16d0, 0x3bdc, 0xff0b, 0x44a, 0x1, 0x0);
        gbc.writeMem(0x1107, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0xe8da, gbc.sp());
        EXPECT(0x1109, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 021E
        gbc.setState(0x7b33, 0xb03, 0x1d50, 0x1007, 0x36b7, 0xbc59, 0x1, 0x1);
        gbc.writeMem(0x7b33, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0xb03, gbc.sp());
        EXPECT(0x7b35, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 021F
        gbc.setState(0x1df1, 0x3b4f, 0x80, 0x77dc, 0xa862, 0xca9b, 0x1, 0x0);
        gbc.writeMem(0x1df1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x3b4f, gbc.sp());
        EXPECT(0x1df3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0220
        gbc.setState(0xb6e0, 0x2ad, 0x900, 0xb93, 0x18b5, 0x7b32, 0x0, 0x0);
        gbc.writeMem(0xb6e0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x2ad, gbc.sp());
        EXPECT(0xb6e2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb6e0));
        EXPECT(0xf, gbc.readMem(0xb6e1));
        // CB 0F 0221
        gbc.setState(0x2b45, 0x61a7, 0xcf10, 0x77e4, 0xb967, 0xe56f, 0x0, 0x0);
        gbc.writeMem(0x2b45, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0x61a7, gbc.sp());
        EXPECT(0x2b47, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0222
        gbc.setState(0x441c, 0x89bb, 0x5010, 0x41e0, 0x3485, 0x87f3, 0x0, 0x1);
        gbc.writeMem(0x441c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x89bb, gbc.sp());
        EXPECT(0x441e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0223
        gbc.setState(0x20fb, 0xc3d6, 0xeb20, 0x1f95, 0x76e3, 0x978, 0x1, 0x1);
        gbc.writeMem(0x20fb, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0xc3d6, gbc.sp());
        EXPECT(0x20fd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0224
        gbc.setState(0xdb65, 0xde79, 0xd1b0, 0x3400, 0x6eb4, 0xc358, 0x0, 0x1);
        gbc.writeMem(0xdb65, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0xde79, gbc.sp());
        EXPECT(0xdb67, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb65));
        EXPECT(0xf, gbc.readMem(0xdb66));
        // CB 0F 0225
        gbc.setState(0x9040, 0x62a3, 0x3aa0, 0xe479, 0x4056, 0x5d35, 0x0, 0x1);
        gbc.writeMem(0x9040, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x62a3, gbc.sp());
        EXPECT(0x9042, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9040));
        EXPECT(0xf, gbc.readMem(0x9041));
        // CB 0F 0226
        gbc.setState(0x5c99, 0xfbe9, 0x5720, 0xf7fc, 0x136b, 0x7c69, 0x1, 0x0);
        gbc.writeMem(0x5c99, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xfbe9, gbc.sp());
        EXPECT(0x5c9b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0227
        gbc.setState(0xa570, 0x3b93, 0xd430, 0xb935, 0xc837, 0xd768, 0x1, 0x1);
        gbc.writeMem(0xa570, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x3b93, gbc.sp());
        EXPECT(0xa572, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa570));
        EXPECT(0xf, gbc.readMem(0xa571));
        // CB 0F 0228
        gbc.setState(0x368f, 0x3468, 0x780, 0xc5e4, 0x75f6, 0x734a, 0x1, 0x1);
        gbc.writeMem(0x368f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0x3468, gbc.sp());
        EXPECT(0x3691, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0229
        gbc.setState(0xb833, 0xe3cd, 0x1220, 0xf0bd, 0x9da0, 0x8491, 0x0, 0x1);
        gbc.writeMem(0xb833, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0xe3cd, gbc.sp());
        EXPECT(0xb835, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb833));
        EXPECT(0xf, gbc.readMem(0xb834));
        // CB 0F 022A
        gbc.setState(0x4c10, 0x8167, 0x3640, 0x7dc7, 0x4271, 0xb7db, 0x0, 0x0);
        gbc.writeMem(0x4c10, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x8167, gbc.sp());
        EXPECT(0x4c12, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 022B
        gbc.setState(0xb475, 0x60ca, 0xb680, 0x74ac, 0x2bf6, 0x7b1a, 0x0, 0x0);
        gbc.writeMem(0xb475, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x60ca, gbc.sp());
        EXPECT(0xb477, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb475));
        EXPECT(0xf, gbc.readMem(0xb476));
        // CB 0F 022C
        gbc.setState(0xeca, 0x1cb, 0x3ce0, 0xef53, 0xb05c, 0xcf97, 0x1, 0x0);
        gbc.writeMem(0xeca, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x1cb, gbc.sp());
        EXPECT(0xecc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 022D
        gbc.setState(0x5596, 0x3e96, 0x2640, 0xacef, 0xf5b0, 0xde35, 0x0, 0x1);
        gbc.writeMem(0x5596, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x3e96, gbc.sp());
        EXPECT(0x5598, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 022F
        gbc.setState(0x8104, 0xaad9, 0xfbb0, 0x31f3, 0x3e70, 0x4d69, 0x0, 0x0);
        gbc.writeMem(0x8104, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xaad9, gbc.sp());
        EXPECT(0x8106, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8104));
        EXPECT(0xf, gbc.readMem(0x8105));
        // CB 0F 0230
        gbc.setState(0xdda6, 0x6e05, 0x9830, 0xef8f, 0xc5f, 0xd00b, 0x1, 0x1);
        gbc.writeMem(0xdda6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x6e05, gbc.sp());
        EXPECT(0xdda8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdda6));
        EXPECT(0xf, gbc.readMem(0xdda7));
        // CB 0F 0231
        gbc.setState(0x3b9c, 0x48df, 0xd9a0, 0x3964, 0xcaed, 0x6605, 0x0, 0x0);
        gbc.writeMem(0x3b9c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0x48df, gbc.sp());
        EXPECT(0x3b9e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0233
        gbc.setState(0x7e14, 0x3352, 0x5ba0, 0x2345, 0x8967, 0xf01e, 0x1, 0x1);
        gbc.writeMem(0x7e14, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x3352, gbc.sp());
        EXPECT(0x7e16, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0234
        gbc.setState(0x2979, 0x41be, 0x4200, 0x521d, 0xac5f, 0x82c8, 0x1, 0x1);
        gbc.writeMem(0x2979, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x41be, gbc.sp());
        EXPECT(0x297b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0235
        gbc.setState(0x1ba0, 0x1606, 0x45a0, 0x2426, 0xd467, 0x259d, 0x0, 0x0);
        gbc.writeMem(0x1ba0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x1606, gbc.sp());
        EXPECT(0x1ba2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0236
        gbc.setState(0xebeb, 0xcab, 0xe60, 0xeece, 0x2095, 0x7fa5, 0x0, 0x1);
        gbc.writeMem(0xebeb, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0xcab, gbc.sp());
        EXPECT(0xebed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xebeb));
        EXPECT(0xf, gbc.readMem(0xebec));
        // CB 0F 0237
        gbc.setState(0xc173, 0x8cde, 0x7830, 0xba65, 0xc02e, 0x5150, 0x1, 0x0);
        gbc.writeMem(0xc173, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x8cde, gbc.sp());
        EXPECT(0xc175, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc173));
        EXPECT(0xf, gbc.readMem(0xc174));
        // CB 0F 0238
        gbc.setState(0xecb4, 0x8d7d, 0x4a90, 0x5b98, 0x1617, 0xd673, 0x1, 0x0);
        gbc.writeMem(0xecb4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x8d7d, gbc.sp());
        EXPECT(0xecb6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xecb4));
        EXPECT(0xf, gbc.readMem(0xecb5));
        // CB 0F 0239
        gbc.setState(0xdc0, 0xd9d4, 0xff00, 0x4d28, 0xa486, 0x7172, 0x1, 0x1);
        gbc.writeMem(0xdc0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0xd9d4, gbc.sp());
        EXPECT(0xdc2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 023A
        gbc.setState(0x5a70, 0x3a07, 0xa680, 0x42c, 0x9096, 0x8202, 0x1, 0x0);
        gbc.writeMem(0x5a70, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x3a07, gbc.sp());
        EXPECT(0x5a72, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 023B
        gbc.setState(0x7af7, 0x1c97, 0x5f90, 0x5c3e, 0x16e2, 0x304f, 0x1, 0x1);
        gbc.writeMem(0x7af7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0x1c97, gbc.sp());
        EXPECT(0x7af9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 023C
        gbc.setState(0x30a4, 0xaaff, 0x6ec0, 0x6dc5, 0x28f0, 0x1991, 0x1, 0x0);
        gbc.writeMem(0x30a4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0xaaff, gbc.sp());
        EXPECT(0x30a6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 023D
        gbc.setState(0x3f3e, 0xf626, 0x30e0, 0xb800, 0xf87d, 0xb816, 0x1, 0x0);
        gbc.writeMem(0x3f3e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0xf626, gbc.sp());
        EXPECT(0x3f40, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 023E
        gbc.setState(0x88cc, 0xf7f3, 0xebc0, 0xad90, 0x385a, 0x6198, 0x0, 0x1);
        gbc.writeMem(0x88cc, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xf7f3, gbc.sp());
        EXPECT(0x88ce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x88cc));
        EXPECT(0xf, gbc.readMem(0x88cd));
        // CB 0F 023F
        gbc.setState(0xc1a7, 0xc4ab, 0x130, 0xe666, 0xaff6, 0xfaa1, 0x0, 0x0);
        gbc.writeMem(0xc1a7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0xc4ab, gbc.sp());
        EXPECT(0xc1a9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc1a7));
        EXPECT(0xf, gbc.readMem(0xc1a8));
        // CB 0F 0240
        gbc.setState(0x1572, 0xf210, 0x3730, 0x2d1f, 0x45dd, 0xb714, 0x1, 0x0);
        gbc.writeMem(0x1572, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0xf210, gbc.sp());
        EXPECT(0x1574, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0241
        gbc.setState(0x60, 0xec67, 0xb6c0, 0x363c, 0xfc4d, 0xd3ce, 0x1, 0x0);
        gbc.writeMem(0x60, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0xec67, gbc.sp());
        EXPECT(0x62, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0242
        gbc.setState(0x4f5e, 0x5e92, 0xa8e0, 0xa173, 0x64f7, 0x3de2, 0x0, 0x1);
        gbc.writeMem(0x4f5e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x5e92, gbc.sp());
        EXPECT(0x4f60, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0243
        gbc.setState(0x10fd, 0x8c24, 0xe560, 0x543, 0x22e8, 0xad31, 0x1, 0x1);
        gbc.writeMem(0x10fd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x8c24, gbc.sp());
        EXPECT(0x10ff, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0244
        gbc.setState(0xc9c2, 0xd7c7, 0x7f0, 0x6df1, 0xe585, 0xdfcf, 0x1, 0x1);
        gbc.writeMem(0xc9c2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xd7c7, gbc.sp());
        EXPECT(0xc9c4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc9c2));
        EXPECT(0xf, gbc.readMem(0xc9c3));
        // CB 0F 0245
        gbc.setState(0xa08, 0x3d49, 0x8890, 0xd664, 0x2ca1, 0x228e, 0x0, 0x1);
        gbc.writeMem(0xa08, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x3d49, gbc.sp());
        EXPECT(0xa0a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0246
        gbc.setState(0x1254, 0x3e73, 0x9db0, 0xba24, 0x2b89, 0x9cf5, 0x0, 0x0);
        gbc.writeMem(0x1254, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x3e73, gbc.sp());
        EXPECT(0x1256, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0247
        gbc.setState(0xeec5, 0x5f8d, 0xe6e0, 0xda98, 0xe91d, 0xddd5, 0x1, 0x0);
        gbc.writeMem(0xeec5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x5f8d, gbc.sp());
        EXPECT(0xeec7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeec5));
        EXPECT(0xf, gbc.readMem(0xeec6));
        // CB 0F 0248
        gbc.setState(0x96ca, 0x8200, 0x6ce0, 0xc454, 0xbe07, 0x1144, 0x0, 0x0);
        gbc.writeMem(0x96ca, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0x8200, gbc.sp());
        EXPECT(0x96cc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x96ca));
        EXPECT(0xf, gbc.readMem(0x96cb));
        // CB 0F 024A
        gbc.setState(0x3e3c, 0x37c3, 0xe150, 0x5457, 0x2d72, 0xd58, 0x0, 0x1);
        gbc.writeMem(0x3e3c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x37c3, gbc.sp());
        EXPECT(0x3e3e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 024B
        gbc.setState(0x2d3d, 0x2df3, 0xe640, 0xc188, 0x96a8, 0xc79f, 0x0, 0x0);
        gbc.writeMem(0x2d3d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x2df3, gbc.sp());
        EXPECT(0x2d3f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 024C
        gbc.setState(0x1a18, 0xc9f7, 0xc220, 0x8d, 0x279c, 0x8f20, 0x1, 0x1);
        gbc.writeMem(0x1a18, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0xc9f7, gbc.sp());
        EXPECT(0x1a1a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 024D
        gbc.setState(0x3473, 0x673d, 0x7360, 0xabb2, 0xab4e, 0x2db9, 0x0, 0x1);
        gbc.writeMem(0x3473, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x673d, gbc.sp());
        EXPECT(0x3475, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 024E
        gbc.setState(0xdae7, 0x86bc, 0xbe60, 0xc40b, 0xd081, 0x64fb, 0x1, 0x1);
        gbc.writeMem(0xdae7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x86bc, gbc.sp());
        EXPECT(0xdae9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdae7));
        EXPECT(0xf, gbc.readMem(0xdae8));
        // CB 0F 024F
        gbc.setState(0xea3c, 0xfce6, 0x2920, 0x8df1, 0x9962, 0xc715, 0x1, 0x1);
        gbc.writeMem(0xea3c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xfce6, gbc.sp());
        EXPECT(0xea3e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xea3c));
        EXPECT(0xf, gbc.readMem(0xea3d));
        // CB 0F 0250
        gbc.setState(0x7ac3, 0x137d, 0xd990, 0x54a4, 0xba39, 0xfda8, 0x0, 0x0);
        gbc.writeMem(0x7ac3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x137d, gbc.sp());
        EXPECT(0x7ac5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0251
        gbc.setState(0x79ee, 0xaec1, 0x3a60, 0x8ef2, 0x1db9, 0xd7e7, 0x1, 0x1);
        gbc.writeMem(0x79ee, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0xaec1, gbc.sp());
        EXPECT(0x79f0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0252
        gbc.setState(0xd142, 0x4888, 0xbc50, 0xf632, 0x5d1d, 0xb345, 0x1, 0x0);
        gbc.writeMem(0xd142, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x4888, gbc.sp());
        EXPECT(0xd144, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd142));
        EXPECT(0xf, gbc.readMem(0xd143));
        // CB 0F 0253
        gbc.setState(0x7ffc, 0x2a45, 0xf740, 0x5ad3, 0xbcd4, 0xe291, 0x1, 0x1);
        gbc.writeMem(0x7ffc, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x2a45, gbc.sp());
        EXPECT(0x7ffe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0254
        gbc.setState(0xf50, 0x3720, 0xdf00, 0x209f, 0xc2a3, 0x4bde, 0x0, 0x0);
        gbc.writeMem(0xf50, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x3720, gbc.sp());
        EXPECT(0xf52, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0255
        gbc.setState(0x1edf, 0x494a, 0x2250, 0x8792, 0x7970, 0xf419, 0x0, 0x1);
        gbc.writeMem(0x1edf, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x494a, gbc.sp());
        EXPECT(0x1ee1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0256
        gbc.setState(0x6c4d, 0x95a1, 0x7330, 0xb291, 0x318d, 0x5e, 0x1, 0x0);
        gbc.writeMem(0x6c4d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x95a1, gbc.sp());
        EXPECT(0x6c4f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0257
        gbc.setState(0xeaf6, 0x663d, 0x4490, 0x8767, 0x9a7b, 0x174a, 0x0, 0x0);
        gbc.writeMem(0xeaf6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0x663d, gbc.sp());
        EXPECT(0xeaf8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeaf6));
        EXPECT(0xf, gbc.readMem(0xeaf7));
        // CB 0F 0259
        gbc.setState(0x351a, 0x5ec9, 0x9900, 0xa898, 0x3206, 0x6d45, 0x1, 0x1);
        gbc.writeMem(0x351a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x5ec9, gbc.sp());
        EXPECT(0x351c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 025A
        gbc.setState(0xb43, 0x696, 0xef60, 0x296b, 0x8b60, 0x8f75, 0x1, 0x0);
        gbc.writeMem(0xb43, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x696, gbc.sp());
        EXPECT(0xb45, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 025B
        gbc.setState(0x229f, 0x6cde, 0x7da0, 0x45bd, 0xeac4, 0x4c72, 0x1, 0x0);
        gbc.writeMem(0x229f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x6cde, gbc.sp());
        EXPECT(0x22a1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 025C
        gbc.setState(0x79b3, 0xfa2e, 0xae90, 0x4bd7, 0xc7d2, 0x3a5c, 0x1, 0x1);
        gbc.writeMem(0x79b3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0xfa2e, gbc.sp());
        EXPECT(0x79b5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 025D
        gbc.setState(0x6d5, 0xfce1, 0x1080, 0xedb2, 0xb2a4, 0x3de7, 0x1, 0x0);
        gbc.writeMem(0x6d5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0xfce1, gbc.sp());
        EXPECT(0x6d7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 025E
        gbc.setState(0x8a6, 0x4b0b, 0xc490, 0xd758, 0x8677, 0xb671, 0x1, 0x1);
        gbc.writeMem(0x8a6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x4b0b, gbc.sp());
        EXPECT(0x8a8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 025F
        gbc.setState(0x4f7c, 0x6697, 0xe5f0, 0x7509, 0xbdaf, 0x4b3a, 0x0, 0x1);
        gbc.writeMem(0x4f7c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x6697, gbc.sp());
        EXPECT(0x4f7e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0260
        gbc.setState(0x5f0, 0x8d09, 0x19e0, 0x7a9a, 0x9233, 0x2a43, 0x0, 0x1);
        gbc.writeMem(0x5f0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x8d09, gbc.sp());
        EXPECT(0x5f2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0261
        gbc.setState(0x7a72, 0x5c9c, 0xa50, 0x74b1, 0x9edc, 0xef05, 0x0, 0x1);
        gbc.writeMem(0x7a72, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0x5c9c, gbc.sp());
        EXPECT(0x7a74, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0262
        gbc.setState(0xdc93, 0xab5f, 0xcf0, 0x7dcb, 0xf9c8, 0x4997, 0x1, 0x0);
        gbc.writeMem(0xdc93, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xab5f, gbc.sp());
        EXPECT(0xdc95, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc93));
        EXPECT(0xf, gbc.readMem(0xdc94));
        // CB 0F 0263
        gbc.setState(0x9d74, 0xa8d0, 0x6f70, 0x94ec, 0x9713, 0xa216, 0x0, 0x0);
        gbc.writeMem(0x9d74, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0xa8d0, gbc.sp());
        EXPECT(0x9d76, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d74));
        EXPECT(0xf, gbc.readMem(0x9d75));
        // CB 0F 0264
        gbc.setState(0xb463, 0x99d1, 0xd0a0, 0x3f3d, 0xe793, 0xad0, 0x1, 0x0);
        gbc.writeMem(0xb463, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x99d1, gbc.sp());
        EXPECT(0xb465, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb463));
        EXPECT(0xf, gbc.readMem(0xb464));
        // CB 0F 0265
        gbc.setState(0x2758, 0x278f, 0x45c0, 0xc026, 0x9a20, 0xdd1b, 0x0, 0x1);
        gbc.writeMem(0x2758, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x278f, gbc.sp());
        EXPECT(0x275a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0266
        gbc.setState(0x68a7, 0xd625, 0x41f0, 0xe64b, 0xb576, 0xc93, 0x1, 0x1);
        gbc.writeMem(0x68a7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0xd625, gbc.sp());
        EXPECT(0x68a9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0267
        gbc.setState(0x19df, 0xb4f5, 0x34e0, 0xa5d4, 0x7391, 0x2bfc, 0x0, 0x1);
        gbc.writeMem(0x19df, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0xb4f5, gbc.sp());
        EXPECT(0x19e1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0268
        gbc.setState(0xba12, 0x50a2, 0xbaa0, 0x4f0b, 0x6764, 0xa6e7, 0x0, 0x1);
        gbc.writeMem(0xba12, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0x50a2, gbc.sp());
        EXPECT(0xba14, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xba12));
        EXPECT(0xf, gbc.readMem(0xba13));
        // CB 0F 0269
        gbc.setState(0x740e, 0x9b2, 0xeae0, 0x2821, 0x5bf3, 0x8537, 0x0, 0x0);
        gbc.writeMem(0x740e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x9b2, gbc.sp());
        EXPECT(0x7410, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 026A
        gbc.setState(0x5e5a, 0x2f6d, 0x5fe0, 0x40ba, 0x262a, 0x51f8, 0x0, 0x0);
        gbc.writeMem(0x5e5a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x2f6d, gbc.sp());
        EXPECT(0x5e5c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 026B
        gbc.setState(0x73b, 0xc4b8, 0xc380, 0x89a1, 0x78b1, 0x5b73, 0x1, 0x0);
        gbc.writeMem(0x73b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0xc4b8, gbc.sp());
        EXPECT(0x73d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 026C
        gbc.setState(0x7a6d, 0x22ee, 0xcee0, 0xced0, 0xd85, 0xe8be, 0x1, 0x0);
        gbc.writeMem(0x7a6d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x22ee, gbc.sp());
        EXPECT(0x7a6f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 026D
        gbc.setState(0x5563, 0xd071, 0xe400, 0x6dfe, 0x4262, 0x1804, 0x1, 0x0);
        gbc.writeMem(0x5563, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xd071, gbc.sp());
        EXPECT(0x5565, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 026E
        gbc.setState(0x683b, 0x8d46, 0x1b00, 0xf320, 0x3175, 0xf376, 0x1, 0x1);
        gbc.writeMem(0x683b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x8d46, gbc.sp());
        EXPECT(0x683d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 026F
        gbc.setState(0x74d, 0xfc6d, 0xba50, 0x89bd, 0x28ab, 0xcb0f, 0x1, 0x1);
        gbc.writeMem(0x74d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0xfc6d, gbc.sp());
        EXPECT(0x74f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0270
        gbc.setState(0x9379, 0x5e48, 0x5ac0, 0x35e9, 0x7025, 0x2f55, 0x0, 0x1);
        gbc.writeMem(0x9379, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x5e48, gbc.sp());
        EXPECT(0x937b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9379));
        EXPECT(0xf, gbc.readMem(0x937a));
        // CB 0F 0272
        gbc.setState(0x6096, 0x22f6, 0x760, 0xfddb, 0xa069, 0x95dd, 0x0, 0x1);
        gbc.writeMem(0x6096, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x22f6, gbc.sp());
        EXPECT(0x6098, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0273
        gbc.setState(0xb75f, 0xc38e, 0x1fa0, 0xe952, 0x69e8, 0xd74d, 0x1, 0x1);
        gbc.writeMem(0xb75f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0xc38e, gbc.sp());
        EXPECT(0xb761, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb75f));
        EXPECT(0xf, gbc.readMem(0xb760));
        // CB 0F 0274
        gbc.setState(0xed67, 0x648, 0xbe80, 0x2dde, 0xe04b, 0x61f4, 0x1, 0x0);
        gbc.writeMem(0xed67, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x648, gbc.sp());
        EXPECT(0xed69, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xed67));
        EXPECT(0xf, gbc.readMem(0xed68));
        // CB 0F 0275
        gbc.setState(0xb06b, 0xd55a, 0x1c0, 0xd4a1, 0x8029, 0x6d3c, 0x0, 0x0);
        gbc.writeMem(0xb06b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0xd55a, gbc.sp());
        EXPECT(0xb06d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb06b));
        EXPECT(0xf, gbc.readMem(0xb06c));
        // CB 0F 0276
        gbc.setState(0xe994, 0xefca, 0x8700, 0x9656, 0xe49d, 0xc1e4, 0x1, 0x0);
        gbc.writeMem(0xe994, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0xefca, gbc.sp());
        EXPECT(0xe996, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe994));
        EXPECT(0xf, gbc.readMem(0xe995));
        // CB 0F 0277
        gbc.setState(0x3f56, 0x546b, 0x5180, 0x821, 0x8fd5, 0xf2d, 0x1, 0x0);
        gbc.writeMem(0x3f56, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x546b, gbc.sp());
        EXPECT(0x3f58, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0278
        gbc.setState(0xd3bf, 0xadba, 0x1300, 0xb9c8, 0x8d4, 0x4c38, 0x0, 0x1);
        gbc.writeMem(0xd3bf, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0xadba, gbc.sp());
        EXPECT(0xd3c1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd3bf));
        EXPECT(0xf, gbc.readMem(0xd3c0));
        // CB 0F 0279
        gbc.setState(0x2e78, 0xb2db, 0xa4d0, 0x3f9, 0xbf48, 0x7224, 0x1, 0x0);
        gbc.writeMem(0x2e78, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0xb2db, gbc.sp());
        EXPECT(0x2e7a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 027A
        gbc.setState(0xa495, 0x8bb2, 0x1d10, 0x94f4, 0xfc59, 0x4621, 0x1, 0x1);
        gbc.writeMem(0xa495, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x8bb2, gbc.sp());
        EXPECT(0xa497, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa495));
        EXPECT(0xf, gbc.readMem(0xa496));
        // CB 0F 027B
        gbc.setState(0xb9ae, 0x89c0, 0xf080, 0x16b2, 0x4d96, 0xf47c, 0x1, 0x1);
        gbc.writeMem(0xb9ae, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x89c0, gbc.sp());
        EXPECT(0xb9b0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb9ae));
        EXPECT(0xf, gbc.readMem(0xb9af));
        // CB 0F 027C
        gbc.setState(0x20a4, 0x3b7f, 0x9a20, 0x2ab1, 0x36bb, 0x842b, 0x0, 0x0);
        gbc.writeMem(0x20a4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x3b7f, gbc.sp());
        EXPECT(0x20a6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 027D
        gbc.setState(0x35a3, 0xef30, 0xb380, 0x53fe, 0xa41f, 0x1cf0, 0x0, 0x1);
        gbc.writeMem(0x35a3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0xef30, gbc.sp());
        EXPECT(0x35a5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 027E
        gbc.setState(0x46ee, 0xd7f4, 0x6fa0, 0x8d21, 0x1c42, 0xe63, 0x0, 0x0);
        gbc.writeMem(0x46ee, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0xd7f4, gbc.sp());
        EXPECT(0x46f0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 027F
        gbc.setState(0x28a0, 0x44fd, 0x40b0, 0x1ff8, 0x7ab3, 0x804f, 0x0, 0x1);
        gbc.writeMem(0x28a0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0x44fd, gbc.sp());
        EXPECT(0x28a2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0281
        gbc.setState(0x204e, 0xa419, 0xb300, 0x7c16, 0xf3e4, 0xa47f, 0x0, 0x0);
        gbc.writeMem(0x204e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0xa419, gbc.sp());
        EXPECT(0x2050, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0282
        gbc.setState(0xa881, 0x9ec1, 0xfae0, 0x776, 0x3d5f, 0x5ed6, 0x1, 0x0);
        gbc.writeMem(0xa881, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x9ec1, gbc.sp());
        EXPECT(0xa883, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa881));
        EXPECT(0xf, gbc.readMem(0xa882));
        // CB 0F 0283
        gbc.setState(0xeab9, 0x511, 0xec50, 0x3da6, 0x5b35, 0x69db, 0x1, 0x1);
        gbc.writeMem(0xeab9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x511, gbc.sp());
        EXPECT(0xeabb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeab9));
        EXPECT(0xf, gbc.readMem(0xeaba));
        // CB 0F 0284
        gbc.setState(0x8148, 0x30c8, 0x85c0, 0xe432, 0xe0cb, 0xfc75, 0x0, 0x1);
        gbc.writeMem(0x8148, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x30c8, gbc.sp());
        EXPECT(0x814a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8148));
        EXPECT(0xf, gbc.readMem(0x8149));
        // CB 0F 0285
        gbc.setState(0x7a0e, 0xee77, 0xaec0, 0xaed9, 0xd028, 0xefb1, 0x0, 0x1);
        gbc.writeMem(0x7a0e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0xee77, gbc.sp());
        EXPECT(0x7a10, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0286
        gbc.setState(0xa443, 0x57a5, 0x91e0, 0x945a, 0x5b25, 0xbb2b, 0x0, 0x1);
        gbc.writeMem(0xa443, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x57a5, gbc.sp());
        EXPECT(0xa445, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa443));
        EXPECT(0xf, gbc.readMem(0xa444));
        // CB 0F 0287
        gbc.setState(0x4ebb, 0xfd70, 0x57c0, 0x3bb4, 0xa5b7, 0xa591, 0x0, 0x1);
        gbc.writeMem(0x4ebb, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0xfd70, gbc.sp());
        EXPECT(0x4ebd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0288
        gbc.setState(0x8478, 0xd0b8, 0xf5a0, 0xd699, 0x8b21, 0x3be3, 0x1, 0x0);
        gbc.writeMem(0x8478, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xd0b8, gbc.sp());
        EXPECT(0x847a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8478));
        EXPECT(0xf, gbc.readMem(0x8479));
        // CB 0F 0289
        gbc.setState(0x506b, 0x6016, 0x8620, 0xb6cd, 0x760a, 0xb9f4, 0x0, 0x0);
        gbc.writeMem(0x506b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x6016, gbc.sp());
        EXPECT(0x506d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 028A
        gbc.setState(0x58fa, 0xab75, 0xecd0, 0x24c1, 0x5f64, 0x397, 0x0, 0x1);
        gbc.writeMem(0x58fa, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xab75, gbc.sp());
        EXPECT(0x58fc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 028B
        gbc.setState(0x8a71, 0x9427, 0x86a0, 0xe07f, 0xcaca, 0xb628, 0x1, 0x0);
        gbc.writeMem(0x8a71, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x9427, gbc.sp());
        EXPECT(0x8a73, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a71));
        EXPECT(0xf, gbc.readMem(0x8a72));
        // CB 0F 028C
        gbc.setState(0xbed9, 0x2ca, 0xd20, 0x449e, 0xbb37, 0xd81b, 0x0, 0x0);
        gbc.writeMem(0xbed9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x2ca, gbc.sp());
        EXPECT(0xbedb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbed9));
        EXPECT(0xf, gbc.readMem(0xbeda));
        // CB 0F 028D
        gbc.setState(0xafd8, 0x3abd, 0xa690, 0xb94e, 0xa83c, 0x3527, 0x1, 0x0);
        gbc.writeMem(0xafd8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x3abd, gbc.sp());
        EXPECT(0xafda, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xafd8));
        EXPECT(0xf, gbc.readMem(0xafd9));
        // CB 0F 028E
        gbc.setState(0xde10, 0x7be6, 0xb500, 0xc10, 0xef84, 0x5557, 0x0, 0x0);
        gbc.writeMem(0xde10, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x7be6, gbc.sp());
        EXPECT(0xde12, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xde10));
        EXPECT(0xf, gbc.readMem(0xde11));
        // CB 0F 028F
        gbc.setState(0x577f, 0x62d3, 0x1560, 0x39b7, 0xfcf6, 0x8462, 0x1, 0x0);
        gbc.writeMem(0x577f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0x62d3, gbc.sp());
        EXPECT(0x5781, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0290
        gbc.setState(0xeb8a, 0x542e, 0xc0, 0x57f8, 0x814c, 0xd514, 0x1, 0x1);
        gbc.writeMem(0xeb8a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x542e, gbc.sp());
        EXPECT(0xeb8c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb8a));
        EXPECT(0xf, gbc.readMem(0xeb8b));
        // CB 0F 0292
        gbc.setState(0x92ae, 0x97fb, 0x7400, 0xd3a3, 0x3b6d, 0x4488, 0x1, 0x0);
        gbc.writeMem(0x92ae, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0x97fb, gbc.sp());
        EXPECT(0x92b0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x92ae));
        EXPECT(0xf, gbc.readMem(0x92af));
        // CB 0F 0293
        gbc.setState(0x19fd, 0x2a64, 0xcba0, 0x14fd, 0x967b, 0xda83, 0x0, 0x1);
        gbc.writeMem(0x19fd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x2a64, gbc.sp());
        EXPECT(0x19ff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0294
        gbc.setState(0xe946, 0xef6b, 0x1320, 0x916a, 0x2fd0, 0xe657, 0x0, 0x0);
        gbc.writeMem(0xe946, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0xef6b, gbc.sp());
        EXPECT(0xe948, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe946));
        EXPECT(0xf, gbc.readMem(0xe947));
        // CB 0F 0295
        gbc.setState(0x98dd, 0x2df, 0xebb0, 0x9809, 0x822d, 0x95e, 0x1, 0x0);
        gbc.writeMem(0x98dd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x2df, gbc.sp());
        EXPECT(0x98df, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x98dd));
        EXPECT(0xf, gbc.readMem(0x98de));
        // CB 0F 0296
        gbc.setState(0xbfc6, 0x2101, 0x6d10, 0x7f94, 0xd74, 0x94d6, 0x1, 0x0);
        gbc.writeMem(0xbfc6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x2101, gbc.sp());
        EXPECT(0xbfc8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbfc6));
        EXPECT(0xf, gbc.readMem(0xbfc7));
        // CB 0F 0297
        gbc.setState(0x38c9, 0xef2b, 0x1e30, 0x3687, 0xfb40, 0x71d3, 0x1, 0x1);
        gbc.writeMem(0x38c9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0xef2b, gbc.sp());
        EXPECT(0x38cb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0298
        gbc.setState(0xb4ea, 0x7778, 0x8d60, 0x1e59, 0xbf20, 0x8f3b, 0x1, 0x0);
        gbc.writeMem(0xb4ea, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0x7778, gbc.sp());
        EXPECT(0xb4ec, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb4ea));
        EXPECT(0xf, gbc.readMem(0xb4eb));
        // CB 0F 0299
        gbc.setState(0x813, 0xe175, 0xec0, 0xaa21, 0x2a20, 0xc46c, 0x0, 0x1);
        gbc.writeMem(0x813, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0xe175, gbc.sp());
        EXPECT(0x815, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 029A
        gbc.setState(0xa674, 0xdbb, 0xf940, 0x38ff, 0xff31, 0x41cd, 0x0, 0x1);
        gbc.writeMem(0xa674, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0xdbb, gbc.sp());
        EXPECT(0xa676, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa674));
        EXPECT(0xf, gbc.readMem(0xa675));
        // CB 0F 029B
        gbc.setState(0xc18e, 0x26fd, 0xfcf0, 0x14ca, 0x4dc2, 0x2091, 0x0, 0x0);
        gbc.writeMem(0xc18e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x26fd, gbc.sp());
        EXPECT(0xc190, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc18e));
        EXPECT(0xf, gbc.readMem(0xc18f));
        // CB 0F 029C
        gbc.setState(0x24df, 0xb80, 0xc470, 0x5e8a, 0x6b5b, 0x5f51, 0x1, 0x0);
        gbc.writeMem(0x24df, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0xb80, gbc.sp());
        EXPECT(0x24e1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 029D
        gbc.setState(0x36fa, 0xe397, 0xdb0, 0xa82d, 0x27d9, 0x82d, 0x1, 0x0);
        gbc.writeMem(0x36fa, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0xe397, gbc.sp());
        EXPECT(0x36fc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 029E
        gbc.setState(0x8502, 0xd3e4, 0x4a10, 0xb479, 0xe408, 0xd35d, 0x0, 0x0);
        gbc.writeMem(0x8502, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0xd3e4, gbc.sp());
        EXPECT(0x8504, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8502));
        EXPECT(0xf, gbc.readMem(0x8503));
        // CB 0F 029F
        gbc.setState(0x3264, 0x388c, 0x6f60, 0x3592, 0x1868, 0x3cb3, 0x0, 0x0);
        gbc.writeMem(0x3264, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x388c, gbc.sp());
        EXPECT(0x3266, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 02A0
        gbc.setState(0x2a46, 0xb61a, 0x1c50, 0x76f0, 0x86d5, 0x3e3, 0x1, 0x0);
        gbc.writeMem(0x2a46, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xb61a, gbc.sp());
        EXPECT(0x2a48, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 02A1
        gbc.setState(0x3299, 0x4802, 0x280, 0x9ce2, 0xa98b, 0xa2d2, 0x1, 0x1);
        gbc.writeMem(0x3299, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x4802, gbc.sp());
        EXPECT(0x329b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 02A2
        gbc.setState(0x2c08, 0xaf, 0x25d0, 0x7bd, 0x6444, 0xae5e, 0x1, 0x0);
        gbc.writeMem(0x2c08, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0xaf, gbc.sp());
        EXPECT(0x2c0a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 02A3
        gbc.setState(0xcee1, 0xa197, 0xa80, 0x13d4, 0x6615, 0xbfa9, 0x1, 0x1);
        gbc.writeMem(0xcee1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0xa197, gbc.sp());
        EXPECT(0xcee3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcee1));
        EXPECT(0xf, gbc.readMem(0xcee2));
        // CB 0F 02A4
        gbc.setState(0x2965, 0xc7ac, 0x85b0, 0x5d1b, 0x4b8c, 0x73b7, 0x1, 0x1);
        gbc.writeMem(0x2965, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0xc7ac, gbc.sp());
        EXPECT(0x2967, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 02A5
        gbc.setState(0x1d5c, 0x1cc, 0xe2a0, 0x4ffe, 0x9b8, 0x6afb, 0x0, 0x1);
        gbc.writeMem(0x1d5c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x1cc, gbc.sp());
        EXPECT(0x1d5e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 02A6
        gbc.setState(0x20ff, 0xd2e, 0x4fa0, 0xdb8b, 0x8038, 0xccc1, 0x0, 0x0);
        gbc.writeMem(0x20ff, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xd2e, gbc.sp());
        EXPECT(0x2101, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 02A7
        gbc.setState(0xb02c, 0xa457, 0xca20, 0xc0d0, 0x5f55, 0x152d, 0x1, 0x1);
        gbc.writeMem(0xb02c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0xa457, gbc.sp());
        EXPECT(0xb02e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb02c));
        EXPECT(0xf, gbc.readMem(0xb02d));
        // CB 0F 02A8
        gbc.setState(0x23ea, 0x4f99, 0x1e50, 0xa2d, 0xe1d5, 0xc2ae, 0x1, 0x1);
        gbc.writeMem(0x23ea, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x4f99, gbc.sp());
        EXPECT(0x23ec, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 02A9
        gbc.setState(0xe3a3, 0x82d0, 0x7c70, 0xc857, 0xfea8, 0xed6c, 0x0, 0x1);
        gbc.writeMem(0xe3a3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x82d0, gbc.sp());
        EXPECT(0xe3a5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe3a3));
        EXPECT(0xf, gbc.readMem(0xe3a4));
        // CB 0F 02AA
        gbc.setState(0x69e8, 0xb8b9, 0x8120, 0xed93, 0x642, 0x28a, 0x0, 0x0);
        gbc.writeMem(0x69e8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0xb8b9, gbc.sp());
        EXPECT(0x69ea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 02AB
        gbc.setState(0x1540, 0xb9fe, 0xccf0, 0xdc7d, 0x8358, 0x6e64, 0x0, 0x0);
        gbc.writeMem(0x1540, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0xb9fe, gbc.sp());
        EXPECT(0x1542, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 02AC
        gbc.setState(0x8106, 0x1fba, 0x7750, 0xfff9, 0x5b43, 0xd366, 0x1, 0x0);
        gbc.writeMem(0x8106, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x1fba, gbc.sp());
        EXPECT(0x8108, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8106));
        EXPECT(0xf, gbc.readMem(0x8107));
        // CB 0F 02AD
        gbc.setState(0x719f, 0x23d9, 0xd2d0, 0x38e5, 0x2d67, 0xff0b, 0x0, 0x1);
        gbc.writeMem(0x719f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x23d9, gbc.sp());
        EXPECT(0x71a1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 02AE
        gbc.setState(0x4c4f, 0xd712, 0xc280, 0x1368, 0x1c07, 0xbc1a, 0x0, 0x1);
        gbc.writeMem(0x4c4f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xd712, gbc.sp());
        EXPECT(0x4c51, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 02AF
        gbc.setState(0x2adc, 0x470f, 0x5530, 0xd840, 0x2d1f, 0xfa3, 0x1, 0x1);
        gbc.writeMem(0x2adc, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x470f, gbc.sp());
        EXPECT(0x2ade, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 02B0
        gbc.setState(0x2fac, 0x8f6b, 0x3e70, 0xd511, 0x28ff, 0x2d4e, 0x0, 0x0);
        gbc.writeMem(0x2fac, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0x8f6b, gbc.sp());
        EXPECT(0x2fae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 02B1
        gbc.setState(0xbea2, 0xfd36, 0x70e0, 0x94d4, 0x5674, 0x81f9, 0x1, 0x0);
        gbc.writeMem(0xbea2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0xfd36, gbc.sp());
        EXPECT(0xbea4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbea2));
        EXPECT(0xf, gbc.readMem(0xbea3));
        // CB 0F 02B2
        gbc.setState(0xda7b, 0xe6f7, 0x9f40, 0x5ebf, 0xdaf7, 0x85aa, 0x0, 0x0);
        gbc.writeMem(0xda7b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xe6f7, gbc.sp());
        EXPECT(0xda7d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xda7b));
        EXPECT(0xf, gbc.readMem(0xda7c));
        // CB 0F 02B3
        gbc.setState(0x85ff, 0xc79a, 0x1bd0, 0xbff2, 0xac08, 0x3650, 0x0, 0x0);
        gbc.writeMem(0x85ff, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0xc79a, gbc.sp());
        EXPECT(0x8601, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x85ff));
        EXPECT(0xf, gbc.readMem(0x8600));
        // CB 0F 02B4
        gbc.setState(0x3334, 0x7656, 0xdb30, 0x5709, 0x1ad6, 0xb6c6, 0x0, 0x1);
        gbc.writeMem(0x3334, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x7656, gbc.sp());
        EXPECT(0x3336, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 02B5
        gbc.setState(0xa369, 0x6902, 0x99d0, 0x3e29, 0xcf14, 0x428e, 0x0, 0x0);
        gbc.writeMem(0xa369, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x6902, gbc.sp());
        EXPECT(0xa36b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa369));
        EXPECT(0xf, gbc.readMem(0xa36a));
        // CB 0F 02B6
        gbc.setState(0xe51c, 0xc75a, 0x9630, 0xf7fe, 0x365e, 0x5372, 0x0, 0x0);
        gbc.writeMem(0xe51c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0xc75a, gbc.sp());
        EXPECT(0xe51e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe51c));
        EXPECT(0xf, gbc.readMem(0xe51d));
        // CB 0F 02B7
        gbc.setState(0x351e, 0x1898, 0xc420, 0x1bd, 0x22c5, 0x5854, 0x0, 0x0);
        gbc.writeMem(0x351e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0x1898, gbc.sp());
        EXPECT(0x3520, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 02B8
        gbc.setState(0x2e28, 0x2b6c, 0x4da0, 0x859f, 0x7e67, 0x97da, 0x1, 0x1);
        gbc.writeMem(0x2e28, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x2b6c, gbc.sp());
        EXPECT(0x2e2a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 02B9
        gbc.setState(0xc2bd, 0x1a3, 0x9560, 0x3720, 0xfacf, 0x59b6, 0x0, 0x1);
        gbc.writeMem(0xc2bd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x1a3, gbc.sp());
        EXPECT(0xc2bf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc2bd));
        EXPECT(0xf, gbc.readMem(0xc2be));
        // CB 0F 02BA
        gbc.setState(0x64e9, 0x29b, 0xc370, 0x8df1, 0xa9c, 0xb80d, 0x0, 0x1);
        gbc.writeMem(0x64e9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x29b, gbc.sp());
        EXPECT(0x64eb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 02BB
        gbc.setState(0xa15, 0xe940, 0x81f0, 0x7a85, 0x6cfb, 0xfd76, 0x1, 0x0);
        gbc.writeMem(0xa15, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0xe940, gbc.sp());
        EXPECT(0xa17, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 02BC
        gbc.setState(0xcf3f, 0xff28, 0x3a70, 0x9880, 0xc6e1, 0x908e, 0x1, 0x1);
        gbc.writeMem(0xcf3f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0xff28, gbc.sp());
        EXPECT(0xcf41, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf3f));
        EXPECT(0xf, gbc.readMem(0xcf40));
        // CB 0F 02BD
        gbc.setState(0x72f2, 0x45ba, 0x16e0, 0xa4e2, 0xcdc8, 0xd3c9, 0x0, 0x0);
        gbc.writeMem(0x72f2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x45ba, gbc.sp());
        EXPECT(0x72f4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 02BE
        gbc.setState(0xb0f6, 0xe2c, 0x4530, 0x3fab, 0x37c2, 0xf19d, 0x1, 0x0);
        gbc.writeMem(0xb0f6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0xe2c, gbc.sp());
        EXPECT(0xb0f8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb0f6));
        EXPECT(0xf, gbc.readMem(0xb0f7));
        // CB 0F 02BF
        gbc.setState(0x8b74, 0xdc3c, 0xc60, 0x6ab2, 0xe30e, 0x7e08, 0x1, 0x0);
        gbc.writeMem(0x8b74, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0xdc3c, gbc.sp());
        EXPECT(0x8b76, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b74));
        EXPECT(0xf, gbc.readMem(0x8b75));
        // CB 0F 02C0
        gbc.setState(0x110d, 0xa5e3, 0x1ae0, 0xe4e9, 0x2b41, 0x563f, 0x1, 0x0);
        gbc.writeMem(0x110d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0xa5e3, gbc.sp());
        EXPECT(0x110f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 02C1
        gbc.setState(0x5da2, 0xd55d, 0xa540, 0xbbf4, 0xace6, 0x5330, 0x1, 0x0);
        gbc.writeMem(0x5da2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0xd55d, gbc.sp());
        EXPECT(0x5da4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 02C3
        gbc.setState(0x963e, 0x5ec3, 0xe7e0, 0xfbd1, 0xaa47, 0x9035, 0x1, 0x1);
        gbc.writeMem(0x963e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x5ec3, gbc.sp());
        EXPECT(0x9640, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x963e));
        EXPECT(0xf, gbc.readMem(0x963f));
        // CB 0F 02C4
        gbc.setState(0xb732, 0x500, 0x4410, 0x2b64, 0xb928, 0xcd80, 0x0, 0x0);
        gbc.writeMem(0xb732, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x500, gbc.sp());
        EXPECT(0xb734, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb732));
        EXPECT(0xf, gbc.readMem(0xb733));
        // CB 0F 02C5
        gbc.setState(0x57d8, 0xf2fe, 0xfcf0, 0x3f2c, 0x8fdc, 0x66db, 0x1, 0x1);
        gbc.writeMem(0x57d8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0xf2fe, gbc.sp());
        EXPECT(0x57da, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 02C6
        gbc.setState(0x4526, 0x1a23, 0xe290, 0xf3ed, 0xe23f, 0x6abc, 0x0, 0x0);
        gbc.writeMem(0x4526, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x1a23, gbc.sp());
        EXPECT(0x4528, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 02C7
        gbc.setState(0x5b5a, 0xda4, 0x7ab0, 0xfbe2, 0x5b17, 0xb7e7, 0x0, 0x1);
        gbc.writeMem(0x5b5a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0xda4, gbc.sp());
        EXPECT(0x5b5c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 02C9
        gbc.setState(0x7480, 0x3c5d, 0x3ff0, 0x2b20, 0xb0c, 0x6589, 0x1, 0x1);
        gbc.writeMem(0x7480, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x3c5d, gbc.sp());
        EXPECT(0x7482, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 02CB
        gbc.setState(0x8e96, 0x5b, 0x3910, 0x7aac, 0xae76, 0x7b4e, 0x0, 0x1);
        gbc.writeMem(0x8e96, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0x5b, gbc.sp());
        EXPECT(0x8e98, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e96));
        EXPECT(0xf, gbc.readMem(0x8e97));
        // CB 0F 02CC
        gbc.setState(0xa392, 0x577a, 0x5430, 0xa881, 0xf821, 0x1a1, 0x0, 0x1);
        gbc.writeMem(0xa392, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x577a, gbc.sp());
        EXPECT(0xa394, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa392));
        EXPECT(0xf, gbc.readMem(0xa393));
        // CB 0F 02CD
        gbc.setState(0x3956, 0x4964, 0x5b90, 0xc182, 0xb2b, 0xeac5, 0x1, 0x1);
        gbc.writeMem(0x3956, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x4964, gbc.sp());
        EXPECT(0x3958, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 02CE
        gbc.setState(0x433f, 0x1ac, 0x6650, 0xacf6, 0xf49d, 0xd572, 0x0, 0x0);
        gbc.writeMem(0x433f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x1ac, gbc.sp());
        EXPECT(0x4341, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 02CF
        gbc.setState(0xdf4d, 0x13ad, 0x60e0, 0x61f, 0xb64, 0x3d70, 0x1, 0x0);
        gbc.writeMem(0xdf4d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x13ad, gbc.sp());
        EXPECT(0xdf4f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdf4d));
        EXPECT(0xf, gbc.readMem(0xdf4e));
        // CB 0F 02D0
        gbc.setState(0x4f6d, 0xc3f8, 0x54c0, 0x44bd, 0x7d36, 0x2e40, 0x1, 0x1);
        gbc.writeMem(0x4f6d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0xc3f8, gbc.sp());
        EXPECT(0x4f6f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 02D1
        gbc.setState(0xd6ad, 0x26da, 0x1950, 0x32dd, 0x747a, 0x8ee9, 0x1, 0x1);
        gbc.writeMem(0xd6ad, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x26da, gbc.sp());
        EXPECT(0xd6af, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd6ad));
        EXPECT(0xf, gbc.readMem(0xd6ae));
        // CB 0F 02D2
        gbc.setState(0x72a2, 0xc180, 0xc750, 0x5638, 0x6ddb, 0x89a3, 0x0, 0x1);
        gbc.writeMem(0x72a2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0xc180, gbc.sp());
        EXPECT(0x72a4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 02D3
        gbc.setState(0x712c, 0xecd8, 0x47e0, 0xdde7, 0xfd1a, 0x1edd, 0x0, 0x1);
        gbc.writeMem(0x712c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0xecd8, gbc.sp());
        EXPECT(0x712e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 02D5
        gbc.setState(0xdb06, 0xfcaf, 0x9420, 0x8033, 0x7803, 0xaff2, 0x1, 0x1);
        gbc.writeMem(0xdb06, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0xfcaf, gbc.sp());
        EXPECT(0xdb08, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb06));
        EXPECT(0xf, gbc.readMem(0xdb07));
        // CB 0F 02D6
        gbc.setState(0x3178, 0xd83c, 0xb430, 0xd8d, 0x7fda, 0xfafa, 0x0, 0x0);
        gbc.writeMem(0x3178, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xd83c, gbc.sp());
        EXPECT(0x317a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 02D7
        gbc.setState(0x8951, 0xe9c4, 0x2e90, 0xb1d1, 0x89b8, 0x9ebf, 0x0, 0x1);
        gbc.writeMem(0x8951, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0xe9c4, gbc.sp());
        EXPECT(0x8953, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8951));
        EXPECT(0xf, gbc.readMem(0x8952));
        // CB 0F 02D8
        gbc.setState(0x584d, 0xc0f8, 0x2600, 0x61a0, 0xbeb2, 0x5915, 0x0, 0x1);
        gbc.writeMem(0x584d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xc0f8, gbc.sp());
        EXPECT(0x584f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 02D9
        gbc.setState(0x35a8, 0xe104, 0xfa00, 0x2bf8, 0x4407, 0x4ee3, 0x0, 0x1);
        gbc.writeMem(0x35a8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xe104, gbc.sp());
        EXPECT(0x35aa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 02DA
        gbc.setState(0x428b, 0xec52, 0xe5c0, 0xfa7, 0x665d, 0xfe0c, 0x1, 0x1);
        gbc.writeMem(0x428b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xec52, gbc.sp());
        EXPECT(0x428d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 02DB
        gbc.setState(0xaf36, 0xcda8, 0x1a80, 0x9e04, 0x973c, 0xc883, 0x1, 0x1);
        gbc.writeMem(0xaf36, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0xcda8, gbc.sp());
        EXPECT(0xaf38, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaf36));
        EXPECT(0xf, gbc.readMem(0xaf37));
        // CB 0F 02DC
        gbc.setState(0xa304, 0x38ff, 0xa640, 0xe2d2, 0x5cc, 0xd707, 0x1, 0x0);
        gbc.writeMem(0xa304, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x38ff, gbc.sp());
        EXPECT(0xa306, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa304));
        EXPECT(0xf, gbc.readMem(0xa305));
        // CB 0F 02DD
        gbc.setState(0xe7ff, 0x9d50, 0x9010, 0x1d8, 0x5941, 0x24f6, 0x0, 0x1);
        gbc.writeMem(0xe7ff, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x9d50, gbc.sp());
        EXPECT(0xe801, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe7ff));
        EXPECT(0xf, gbc.readMem(0xe800));
        // CB 0F 02DE
        gbc.setState(0x70e, 0x4661, 0x74a0, 0xb289, 0xb81e, 0x1dcc, 0x0, 0x1);
        gbc.writeMem(0x70e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x4661, gbc.sp());
        EXPECT(0x710, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 02DF
        gbc.setState(0xa03a, 0x3a08, 0x8750, 0x63a0, 0xffdb, 0xcb61, 0x0, 0x0);
        gbc.writeMem(0xa03a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x3a08, gbc.sp());
        EXPECT(0xa03c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa03a));
        EXPECT(0xf, gbc.readMem(0xa03b));
        // CB 0F 02E0
        gbc.setState(0xc436, 0x3cfb, 0x69b0, 0x538a, 0xf9ee, 0x3e98, 0x1, 0x0);
        gbc.writeMem(0xc436, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x3cfb, gbc.sp());
        EXPECT(0xc438, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc436));
        EXPECT(0xf, gbc.readMem(0xc437));
        // CB 0F 02E1
        gbc.setState(0x73b9, 0x4e86, 0x5700, 0x7147, 0x5667, 0xb653, 0x1, 0x1);
        gbc.writeMem(0x73b9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x4e86, gbc.sp());
        EXPECT(0x73bb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 02E2
        gbc.setState(0x8ded, 0x8cfb, 0x2950, 0x38c, 0x4904, 0x7bb3, 0x1, 0x1);
        gbc.writeMem(0x8ded, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x8cfb, gbc.sp());
        EXPECT(0x8def, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ded));
        EXPECT(0xf, gbc.readMem(0x8dee));
        // CB 0F 02E3
        gbc.setState(0x7928, 0xdee7, 0xe1d0, 0xa371, 0xc0e9, 0xe5f1, 0x0, 0x1);
        gbc.writeMem(0x7928, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0xdee7, gbc.sp());
        EXPECT(0x792a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 02E4
        gbc.setState(0x73dc, 0xa963, 0xaab0, 0x1c0a, 0x3684, 0xeadb, 0x0, 0x0);
        gbc.writeMem(0x73dc, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0xa963, gbc.sp());
        EXPECT(0x73de, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 02E5
        gbc.setState(0xdeb5, 0xe08b, 0xb4b0, 0xd055, 0x9739, 0x1ca3, 0x0, 0x1);
        gbc.writeMem(0xdeb5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0xe08b, gbc.sp());
        EXPECT(0xdeb7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdeb5));
        EXPECT(0xf, gbc.readMem(0xdeb6));
        // CB 0F 02E6
        gbc.setState(0x2603, 0x3c3b, 0x2940, 0xc64c, 0xbf94, 0x7c06, 0x0, 0x1);
        gbc.writeMem(0x2603, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0x3c3b, gbc.sp());
        EXPECT(0x2605, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 02E7
        gbc.setState(0x4fa6, 0xa2d7, 0x5460, 0x30cb, 0xf737, 0xcabc, 0x0, 0x1);
        gbc.writeMem(0x4fa6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0xa2d7, gbc.sp());
        EXPECT(0x4fa8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 02E8
        gbc.setState(0x3dd0, 0x61c9, 0x94d0, 0x1219, 0x760, 0x539f, 0x0, 0x1);
        gbc.writeMem(0x3dd0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x61c9, gbc.sp());
        EXPECT(0x3dd2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 02E9
        gbc.setState(0xbd74, 0xd15, 0xc640, 0x8afa, 0xaa4, 0x52da, 0x1, 0x1);
        gbc.writeMem(0xbd74, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0xd15, gbc.sp());
        EXPECT(0xbd76, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd74));
        EXPECT(0xf, gbc.readMem(0xbd75));
        // CB 0F 02EA
        gbc.setState(0xe37a, 0xbe3d, 0xe800, 0x53c8, 0x9ad7, 0x874f, 0x1, 0x0);
        gbc.writeMem(0xe37a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0xbe3d, gbc.sp());
        EXPECT(0xe37c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe37a));
        EXPECT(0xf, gbc.readMem(0xe37b));
        // CB 0F 02EB
        gbc.setState(0xdd08, 0x4ceb, 0x16a0, 0x955b, 0xd060, 0x3b48, 0x0, 0x1);
        gbc.writeMem(0xdd08, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x4ceb, gbc.sp());
        EXPECT(0xdd0a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdd08));
        EXPECT(0xf, gbc.readMem(0xdd09));
        // CB 0F 02EC
        gbc.setState(0x1458, 0x32e8, 0x96d0, 0x6c2f, 0x40ca, 0x68b8, 0x1, 0x1);
        gbc.writeMem(0x1458, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x32e8, gbc.sp());
        EXPECT(0x145a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 02ED
        gbc.setState(0x693e, 0xb665, 0x9e10, 0x328b, 0x1be7, 0x12ff, 0x0, 0x1);
        gbc.writeMem(0x693e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0xb665, gbc.sp());
        EXPECT(0x6940, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 02EE
        gbc.setState(0xa372, 0x1f85, 0xa340, 0x2877, 0x3b3b, 0xa50d, 0x0, 0x1);
        gbc.writeMem(0xa372, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x1f85, gbc.sp());
        EXPECT(0xa374, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa372));
        EXPECT(0xf, gbc.readMem(0xa373));
        // CB 0F 02EF
        gbc.setState(0xb900, 0xca80, 0x9dd0, 0xebdf, 0x110e, 0x1078, 0x1, 0x1);
        gbc.writeMem(0xb900, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0xca80, gbc.sp());
        EXPECT(0xb902, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb900));
        EXPECT(0xf, gbc.readMem(0xb901));
        // CB 0F 02F0
        gbc.setState(0xb68, 0x2122, 0xf680, 0x4fdd, 0x5170, 0x63ec, 0x0, 0x0);
        gbc.writeMem(0xb68, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0x2122, gbc.sp());
        EXPECT(0xb6a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 02F1
        gbc.setState(0xd20b, 0x5874, 0xecd0, 0x10a0, 0x2ea3, 0x3dcc, 0x1, 0x0);
        gbc.writeMem(0xd20b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x5874, gbc.sp());
        EXPECT(0xd20d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd20b));
        EXPECT(0xf, gbc.readMem(0xd20c));
        // CB 0F 02F2
        gbc.setState(0x77d9, 0x44d9, 0x6b20, 0xae68, 0xbb85, 0xafd4, 0x0, 0x0);
        gbc.writeMem(0x77d9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x44d9, gbc.sp());
        EXPECT(0x77db, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 02F3
        gbc.setState(0x95eb, 0x926c, 0xd450, 0x6a2b, 0xfbac, 0xdede, 0x1, 0x0);
        gbc.writeMem(0x95eb, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x926c, gbc.sp());
        EXPECT(0x95ed, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x95eb));
        EXPECT(0xf, gbc.readMem(0x95ec));
        // CB 0F 02F4
        gbc.setState(0xb397, 0xd6ae, 0x7fd0, 0xc8d1, 0xcd15, 0xa0a1, 0x0, 0x1);
        gbc.writeMem(0xb397, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0xd6ae, gbc.sp());
        EXPECT(0xb399, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb397));
        EXPECT(0xf, gbc.readMem(0xb398));
        // CB 0F 02F5
        gbc.setState(0x641e, 0x77d2, 0x9b70, 0x7235, 0xc5f5, 0x5e07, 0x0, 0x0);
        gbc.writeMem(0x641e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x77d2, gbc.sp());
        EXPECT(0x6420, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 02F7
        gbc.setState(0xdb7c, 0xb13e, 0xf4d0, 0x9d34, 0x9aee, 0x1374, 0x1, 0x1);
        gbc.writeMem(0xdb7c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0xb13e, gbc.sp());
        EXPECT(0xdb7e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb7c));
        EXPECT(0xf, gbc.readMem(0xdb7d));
        // CB 0F 02F8
        gbc.setState(0x773, 0xc2d1, 0xe600, 0x506c, 0x3179, 0xcc0f, 0x0, 0x0);
        gbc.writeMem(0x773, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0xc2d1, gbc.sp());
        EXPECT(0x775, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 02F9
        gbc.setState(0x1ad2, 0x81fa, 0xce0, 0x2c5, 0xe9db, 0xa1f1, 0x1, 0x1);
        gbc.writeMem(0x1ad2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x81fa, gbc.sp());
        EXPECT(0x1ad4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 02FA
        gbc.setState(0xe565, 0xc8b8, 0xd960, 0x819a, 0xc4ac, 0x2703, 0x0, 0x1);
        gbc.writeMem(0xe565, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0xc8b8, gbc.sp());
        EXPECT(0xe567, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe565));
        EXPECT(0xf, gbc.readMem(0xe566));
        // CB 0F 02FB
        gbc.setState(0xbdf5, 0x240b, 0x5bd0, 0xbad5, 0xe70b, 0x4b64, 0x1, 0x1);
        gbc.writeMem(0xbdf5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0x240b, gbc.sp());
        EXPECT(0xbdf7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbdf5));
        EXPECT(0xf, gbc.readMem(0xbdf6));
        // CB 0F 02FC
        gbc.setState(0xe5c, 0x6b69, 0x1390, 0x12c, 0x25a2, 0xf008, 0x1, 0x0);
        gbc.writeMem(0xe5c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x6b69, gbc.sp());
        EXPECT(0xe5e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 02FD
        gbc.setState(0xbd7, 0xbe17, 0xf890, 0x7d18, 0xf21e, 0x948b, 0x0, 0x0);
        gbc.writeMem(0xbd7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0xbe17, gbc.sp());
        EXPECT(0xbd9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 02FE
        gbc.setState(0x28e6, 0x6ccf, 0x1d0, 0x66e4, 0x3101, 0x9a22, 0x0, 0x1);
        gbc.writeMem(0x28e6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x6ccf, gbc.sp());
        EXPECT(0x28e8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 02FF
        gbc.setState(0x188e, 0x9ad3, 0x3b20, 0xc90b, 0xc899, 0xc0a9, 0x0, 0x0);
        gbc.writeMem(0x188e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x9ad3, gbc.sp());
        EXPECT(0x1890, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0300
        gbc.setState(0x38f9, 0x9fa3, 0xd260, 0x4d3d, 0xd1e7, 0xb534, 0x1, 0x1);
        gbc.writeMem(0x38f9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x9fa3, gbc.sp());
        EXPECT(0x38fb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0301
        gbc.setState(0x58de, 0x465, 0x1050, 0xc6d1, 0x8496, 0x17ac, 0x0, 0x1);
        gbc.writeMem(0x58de, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x465, gbc.sp());
        EXPECT(0x58e0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0302
        gbc.setState(0x1c94, 0x7984, 0xfa50, 0x1485, 0x36c7, 0x39cd, 0x1, 0x0);
        gbc.writeMem(0x1c94, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0x7984, gbc.sp());
        EXPECT(0x1c96, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0303
        gbc.setState(0xa2b6, 0xb435, 0x7ed0, 0x31c2, 0x4cb1, 0x4454, 0x1, 0x1);
        gbc.writeMem(0xa2b6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0xb435, gbc.sp());
        EXPECT(0xa2b8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa2b6));
        EXPECT(0xf, gbc.readMem(0xa2b7));
        // CB 0F 0304
        gbc.setState(0x71da, 0x955b, 0x8d30, 0xb5e1, 0xab06, 0x24ea, 0x1, 0x1);
        gbc.writeMem(0x71da, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x955b, gbc.sp());
        EXPECT(0x71dc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0305
        gbc.setState(0xb625, 0xb744, 0x86d0, 0x5f52, 0xaace, 0xcd8b, 0x0, 0x1);
        gbc.writeMem(0xb625, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0xb744, gbc.sp());
        EXPECT(0xb627, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb625));
        EXPECT(0xf, gbc.readMem(0xb626));
        // CB 0F 0306
        gbc.setState(0xbd0c, 0x98dc, 0x1510, 0xf51a, 0xf162, 0x77d1, 0x1, 0x1);
        gbc.writeMem(0xbd0c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0x98dc, gbc.sp());
        EXPECT(0xbd0e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd0c));
        EXPECT(0xf, gbc.readMem(0xbd0d));
        // CB 0F 0307
        gbc.setState(0xae9d, 0xbd35, 0x1a00, 0x594a, 0xb69d, 0xe17a, 0x1, 0x1);
        gbc.writeMem(0xae9d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0xbd35, gbc.sp());
        EXPECT(0xae9f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xae9d));
        EXPECT(0xf, gbc.readMem(0xae9e));
        // CB 0F 0309
        gbc.setState(0xb18f, 0x3c87, 0xc430, 0xf2b6, 0xeea1, 0x59, 0x1, 0x0);
        gbc.writeMem(0xb18f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x3c87, gbc.sp());
        EXPECT(0xb191, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb18f));
        EXPECT(0xf, gbc.readMem(0xb190));
        // CB 0F 030A
        gbc.setState(0x7c1d, 0x86c1, 0xc340, 0x993e, 0x1aee, 0x1438, 0x0, 0x1);
        gbc.writeMem(0x7c1d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x86c1, gbc.sp());
        EXPECT(0x7c1f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 030B
        gbc.setState(0x9b56, 0xcde2, 0xb100, 0xac68, 0xbc8a, 0x3e0b, 0x1, 0x1);
        gbc.writeMem(0x9b56, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xcde2, gbc.sp());
        EXPECT(0x9b58, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b56));
        EXPECT(0xf, gbc.readMem(0x9b57));
        // CB 0F 030C
        gbc.setState(0x58d, 0x37e0, 0x98e0, 0xd30f, 0xfbb7, 0x4de5, 0x0, 0x1);
        gbc.writeMem(0x58d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x37e0, gbc.sp());
        EXPECT(0x58f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 030E
        gbc.setState(0x2f0f, 0x5381, 0xde70, 0x91c1, 0x5f17, 0xc132, 0x1, 0x1);
        gbc.writeMem(0x2f0f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x5381, gbc.sp());
        EXPECT(0x2f11, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 030F
        gbc.setState(0x72bd, 0x2ef1, 0xbaf0, 0x28dd, 0x1e12, 0xf77d, 0x1, 0x0);
        gbc.writeMem(0x72bd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x2ef1, gbc.sp());
        EXPECT(0x72bf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0310
        gbc.setState(0xd9db, 0xf648, 0x690, 0xaf7f, 0x90be, 0x5808, 0x0, 0x0);
        gbc.writeMem(0xd9db, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0xf648, gbc.sp());
        EXPECT(0xd9dd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd9db));
        EXPECT(0xf, gbc.readMem(0xd9dc));
        // CB 0F 0311
        gbc.setState(0xe5f7, 0xee57, 0x28f0, 0x2879, 0xd0ef, 0xccfb, 0x1, 0x1);
        gbc.writeMem(0xe5f7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0xee57, gbc.sp());
        EXPECT(0xe5f9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe5f7));
        EXPECT(0xf, gbc.readMem(0xe5f8));
        // CB 0F 0312
        gbc.setState(0x689b, 0xa3cb, 0x8b40, 0x3cbc, 0x309d, 0xa1f6, 0x1, 0x1);
        gbc.writeMem(0x689b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0xa3cb, gbc.sp());
        EXPECT(0x689d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0313
        gbc.setState(0xeada, 0xc523, 0x1e0, 0x4831, 0x78d3, 0xe8f0, 0x0, 0x1);
        gbc.writeMem(0xeada, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0xc523, gbc.sp());
        EXPECT(0xeadc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeada));
        EXPECT(0xf, gbc.readMem(0xeadb));
        // CB 0F 0314
        gbc.setState(0x9722, 0x4d9e, 0x8960, 0x5874, 0x95d4, 0x7abb, 0x0, 0x1);
        gbc.writeMem(0x9722, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x4d9e, gbc.sp());
        EXPECT(0x9724, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9722));
        EXPECT(0xf, gbc.readMem(0x9723));
        // CB 0F 0315
        gbc.setState(0xae0, 0xc487, 0x55b0, 0x88c9, 0x983e, 0x8eba, 0x1, 0x1);
        gbc.writeMem(0xae0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0xc487, gbc.sp());
        EXPECT(0xae2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0316
        gbc.setState(0xcb64, 0xe96b, 0xfae0, 0x6eb6, 0x1567, 0xebdc, 0x0, 0x1);
        gbc.writeMem(0xcb64, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0xe96b, gbc.sp());
        EXPECT(0xcb66, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcb64));
        EXPECT(0xf, gbc.readMem(0xcb65));
        // CB 0F 0317
        gbc.setState(0x9883, 0x6d9, 0xd560, 0xdba2, 0x2d61, 0x2c1e, 0x1, 0x1);
        gbc.writeMem(0x9883, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x6d9, gbc.sp());
        EXPECT(0x9885, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9883));
        EXPECT(0xf, gbc.readMem(0x9884));
        // CB 0F 0318
        gbc.setState(0x2485, 0xfca9, 0x1f60, 0xb184, 0xf820, 0x2c4c, 0x0, 0x1);
        gbc.writeMem(0x2485, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0xfca9, gbc.sp());
        EXPECT(0x2487, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0319
        gbc.setState(0x3ec3, 0xf7ea, 0xd0b0, 0xa23e, 0x2219, 0xf6e1, 0x1, 0x1);
        gbc.writeMem(0x3ec3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0xf7ea, gbc.sp());
        EXPECT(0x3ec5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 031A
        gbc.setState(0x8634, 0x66c5, 0x8c30, 0x9294, 0xf5ac, 0x1c68, 0x0, 0x1);
        gbc.writeMem(0x8634, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x66c5, gbc.sp());
        EXPECT(0x8636, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8634));
        EXPECT(0xf, gbc.readMem(0x8635));
        // CB 0F 031B
        gbc.setState(0x3200, 0x8a96, 0x3140, 0xc3db, 0x2459, 0xc4e, 0x1, 0x0);
        gbc.writeMem(0x3200, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0x8a96, gbc.sp());
        EXPECT(0x3202, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 031C
        gbc.setState(0x62b1, 0x7b00, 0x8d20, 0xcb7a, 0xd03d, 0xdf64, 0x0, 0x1);
        gbc.writeMem(0x62b1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0x7b00, gbc.sp());
        EXPECT(0x62b3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 031D
        gbc.setState(0x18e1, 0xe75b, 0x5760, 0x4e27, 0x36b7, 0x86ee, 0x1, 0x1);
        gbc.writeMem(0x18e1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0xe75b, gbc.sp());
        EXPECT(0x18e3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 031E
        gbc.setState(0x83d2, 0xb1e4, 0x5fd0, 0x302a, 0x7322, 0x1da6, 0x0, 0x1);
        gbc.writeMem(0x83d2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0xb1e4, gbc.sp());
        EXPECT(0x83d4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x83d2));
        EXPECT(0xf, gbc.readMem(0x83d3));
        // CB 0F 031F
        gbc.setState(0x3f31, 0x7d41, 0xff90, 0x4e1a, 0xe4b8, 0xa8df, 0x1, 0x1);
        gbc.writeMem(0x3f31, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x7d41, gbc.sp());
        EXPECT(0x3f33, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0320
        gbc.setState(0xcf73, 0x57bd, 0xf270, 0x9e4e, 0x658c, 0xfb98, 0x0, 0x0);
        gbc.writeMem(0xcf73, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x57bd, gbc.sp());
        EXPECT(0xcf75, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf73));
        EXPECT(0xf, gbc.readMem(0xcf74));
        // CB 0F 0321
        gbc.setState(0x7da9, 0x6421, 0xb3c0, 0x5a3e, 0xd734, 0x3e75, 0x1, 0x1);
        gbc.writeMem(0x7da9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x6421, gbc.sp());
        EXPECT(0x7dab, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0322
        gbc.setState(0xca8a, 0x55d, 0x5800, 0xc04d, 0x5198, 0xc6e5, 0x1, 0x0);
        gbc.writeMem(0xca8a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x55d, gbc.sp());
        EXPECT(0xca8c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xca8a));
        EXPECT(0xf, gbc.readMem(0xca8b));
        // CB 0F 0323
        gbc.setState(0x340, 0x6524, 0x8ca0, 0x425d, 0xaef4, 0x43ba, 0x0, 0x0);
        gbc.writeMem(0x340, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x6524, gbc.sp());
        EXPECT(0x342, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0324
        gbc.setState(0xdac3, 0x7299, 0xc50, 0xd484, 0xea84, 0x6e80, 0x1, 0x0);
        gbc.writeMem(0xdac3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x7299, gbc.sp());
        EXPECT(0xdac5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdac3));
        EXPECT(0xf, gbc.readMem(0xdac4));
        // CB 0F 0325
        gbc.setState(0xe854, 0xc128, 0xf030, 0xc242, 0x9495, 0xb4ab, 0x1, 0x1);
        gbc.writeMem(0xe854, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0xc128, gbc.sp());
        EXPECT(0xe856, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe854));
        EXPECT(0xf, gbc.readMem(0xe855));
        // CB 0F 0327
        gbc.setState(0x6061, 0xa6, 0x61f0, 0x8d61, 0xdbad, 0x4725, 0x1, 0x0);
        gbc.writeMem(0x6061, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0xa6, gbc.sp());
        EXPECT(0x6063, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0328
        gbc.setState(0x1ab, 0xbdc9, 0x3960, 0xe12a, 0x252, 0xec7c, 0x1, 0x1);
        gbc.writeMem(0x1ab, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0xbdc9, gbc.sp());
        EXPECT(0x1ad, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0329
        gbc.setState(0x8548, 0x47d1, 0x3d60, 0x4b02, 0xab19, 0x8b3c, 0x0, 0x0);
        gbc.writeMem(0x8548, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x47d1, gbc.sp());
        EXPECT(0x854a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8548));
        EXPECT(0xf, gbc.readMem(0x8549));
        // CB 0F 032A
        gbc.setState(0xcaf7, 0x5106, 0xcc00, 0x7f97, 0xcdb2, 0x8929, 0x0, 0x0);
        gbc.writeMem(0xcaf7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0x5106, gbc.sp());
        EXPECT(0xcaf9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcaf7));
        EXPECT(0xf, gbc.readMem(0xcaf8));
        // CB 0F 032B
        gbc.setState(0xe0f8, 0x1bef, 0x7e10, 0xee3e, 0xe835, 0xad91, 0x0, 0x0);
        gbc.writeMem(0xe0f8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x1bef, gbc.sp());
        EXPECT(0xe0fa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe0f8));
        EXPECT(0xf, gbc.readMem(0xe0f9));
        // CB 0F 032C
        gbc.setState(0xfea, 0x1637, 0xf1d0, 0x6e19, 0xda2, 0x5973, 0x1, 0x1);
        gbc.writeMem(0xfea, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x1637, gbc.sp());
        EXPECT(0xfec, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 032D
        gbc.setState(0x2953, 0x1a96, 0x2810, 0xb10a, 0xd2fd, 0xab93, 0x1, 0x1);
        gbc.writeMem(0x2953, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x1a96, gbc.sp());
        EXPECT(0x2955, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 032E
        gbc.setState(0x77ae, 0x6fdf, 0xe3f0, 0x443f, 0x1c96, 0x4a31, 0x0, 0x0);
        gbc.writeMem(0x77ae, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x6fdf, gbc.sp());
        EXPECT(0x77b0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 032F
        gbc.setState(0xe063, 0x2c90, 0x4f60, 0xa510, 0x1532, 0xd697, 0x0, 0x0);
        gbc.writeMem(0xe063, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x2c90, gbc.sp());
        EXPECT(0xe065, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe063));
        EXPECT(0xf, gbc.readMem(0xe064));
        // CB 0F 0330
        gbc.setState(0x8985, 0x3833, 0x8c90, 0x2d7e, 0xc012, 0xed8b, 0x0, 0x0);
        gbc.writeMem(0x8985, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x3833, gbc.sp());
        EXPECT(0x8987, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8985));
        EXPECT(0xf, gbc.readMem(0x8986));
        // CB 0F 0331
        gbc.setState(0x2e24, 0x3921, 0xe6e0, 0x4337, 0x61ec, 0xb1e7, 0x0, 0x0);
        gbc.writeMem(0x2e24, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0x3921, gbc.sp());
        EXPECT(0x2e26, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0332
        gbc.setState(0x9e92, 0xcf7e, 0xd0c0, 0x6c50, 0x7074, 0xfdfa, 0x0, 0x0);
        gbc.writeMem(0x9e92, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xcf7e, gbc.sp());
        EXPECT(0x9e94, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9e92));
        EXPECT(0xf, gbc.readMem(0x9e93));
        // CB 0F 0333
        gbc.setState(0x154e, 0x7a83, 0x4ce0, 0xa890, 0xb7e2, 0x119f, 0x0, 0x0);
        gbc.writeMem(0x154e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x7a83, gbc.sp());
        EXPECT(0x1550, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0334
        gbc.setState(0x84e0, 0x5378, 0xf730, 0x3d34, 0x49f0, 0xe9ab, 0x0, 0x0);
        gbc.writeMem(0x84e0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x5378, gbc.sp());
        EXPECT(0x84e2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84e0));
        EXPECT(0xf, gbc.readMem(0x84e1));
        // CB 0F 0335
        gbc.setState(0x9d4f, 0x2917, 0xae20, 0xb148, 0xe1db, 0x4756, 0x1, 0x1);
        gbc.writeMem(0x9d4f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x2917, gbc.sp());
        EXPECT(0x9d51, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d4f));
        EXPECT(0xf, gbc.readMem(0x9d50));
        // CB 0F 0336
        gbc.setState(0xced, 0xb256, 0x8f00, 0xf57c, 0x467c, 0xd6e9, 0x0, 0x1);
        gbc.writeMem(0xced, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0xb256, gbc.sp());
        EXPECT(0xcef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0337
        gbc.setState(0x8cf9, 0xfef4, 0xd640, 0x25d3, 0xf615, 0xc40, 0x0, 0x1);
        gbc.writeMem(0x8cf9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0xfef4, gbc.sp());
        EXPECT(0x8cfb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8cf9));
        EXPECT(0xf, gbc.readMem(0x8cfa));
        // CB 0F 0338
        gbc.setState(0xe65a, 0xc06, 0x3f30, 0xf384, 0xac5d, 0xc2f3, 0x1, 0x0);
        gbc.writeMem(0xe65a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0xc06, gbc.sp());
        EXPECT(0xe65c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe65a));
        EXPECT(0xf, gbc.readMem(0xe65b));
        // CB 0F 0339
        gbc.setState(0x6248, 0x407b, 0x19d0, 0x7822, 0xbd4, 0x6b62, 0x1, 0x0);
        gbc.writeMem(0x6248, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0x407b, gbc.sp());
        EXPECT(0x624a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 033A
        gbc.setState(0xb772, 0x1863, 0xa100, 0x6fd, 0xa7c6, 0x6698, 0x0, 0x1);
        gbc.writeMem(0xb772, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x1863, gbc.sp());
        EXPECT(0xb774, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb772));
        EXPECT(0xf, gbc.readMem(0xb773));
        // CB 0F 033B
        gbc.setState(0x360, 0x450e, 0xc2f0, 0x2ab4, 0x5f73, 0x14f, 0x0, 0x0);
        gbc.writeMem(0x360, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0x450e, gbc.sp());
        EXPECT(0x362, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 033C
        gbc.setState(0xd40d, 0xbb3, 0x6230, 0x85f3, 0x6a82, 0xdae9, 0x1, 0x1);
        gbc.writeMem(0xd40d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0xbb3, gbc.sp());
        EXPECT(0xd40f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd40d));
        EXPECT(0xf, gbc.readMem(0xd40e));
        // CB 0F 033D
        gbc.setState(0x8089, 0x301, 0xf830, 0xa45d, 0x8a25, 0x61eb, 0x1, 0x1);
        gbc.writeMem(0x8089, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x301, gbc.sp());
        EXPECT(0x808b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8089));
        EXPECT(0xf, gbc.readMem(0x808a));
        // CB 0F 033E
        gbc.setState(0xbc46, 0x708d, 0x8a80, 0xfbc7, 0x6c25, 0x6293, 0x1, 0x0);
        gbc.writeMem(0xbc46, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x708d, gbc.sp());
        EXPECT(0xbc48, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbc46));
        EXPECT(0xf, gbc.readMem(0xbc47));
        // CB 0F 033F
        gbc.setState(0x319d, 0x81b2, 0xa070, 0x1834, 0x126b, 0xc8e7, 0x1, 0x0);
        gbc.writeMem(0x319d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0x81b2, gbc.sp());
        EXPECT(0x319f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0340
        gbc.setState(0x23a9, 0x4888, 0x9a00, 0x3c86, 0x1b3, 0x17bb, 0x0, 0x1);
        gbc.writeMem(0x23a9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x4888, gbc.sp());
        EXPECT(0x23ab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0341
        gbc.setState(0x9849, 0xae42, 0x1c30, 0xc7a7, 0x6997, 0x4f4c, 0x1, 0x1);
        gbc.writeMem(0x9849, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0xae42, gbc.sp());
        EXPECT(0x984b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9849));
        EXPECT(0xf, gbc.readMem(0x984a));
        // CB 0F 0342
        gbc.setState(0x1046, 0x9940, 0xde30, 0xe16, 0x66e2, 0x34a6, 0x0, 0x1);
        gbc.writeMem(0x1046, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x9940, gbc.sp());
        EXPECT(0x1048, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0343
        gbc.setState(0xa62f, 0xfcf, 0x62f0, 0xfaa0, 0x1efe, 0x1c1b, 0x1, 0x0);
        gbc.writeMem(0xa62f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0xfcf, gbc.sp());
        EXPECT(0xa631, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa62f));
        EXPECT(0xf, gbc.readMem(0xa630));
        // CB 0F 0344
        gbc.setState(0x3e8f, 0xdb28, 0x8320, 0x951f, 0xc56f, 0x8b02, 0x1, 0x1);
        gbc.writeMem(0x3e8f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0xdb28, gbc.sp());
        EXPECT(0x3e91, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0345
        gbc.setState(0x5236, 0xf740, 0x3940, 0x3f0a, 0x3ded, 0xd58a, 0x0, 0x1);
        gbc.writeMem(0x5236, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0xf740, gbc.sp());
        EXPECT(0x5238, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0346
        gbc.setState(0x7c1a, 0xb4dc, 0xd7f0, 0xb13b, 0x5682, 0x3d03, 0x1, 0x0);
        gbc.writeMem(0x7c1a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0xb4dc, gbc.sp());
        EXPECT(0x7c1c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0347
        gbc.setState(0x35c0, 0x2183, 0x75d0, 0x47cf, 0xd2a, 0xe21d, 0x0, 0x0);
        gbc.writeMem(0x35c0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x2183, gbc.sp());
        EXPECT(0x35c2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0348
        gbc.setState(0xb56c, 0x3b81, 0xc120, 0xfd14, 0x4671, 0x2abd, 0x1, 0x0);
        gbc.writeMem(0xb56c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x3b81, gbc.sp());
        EXPECT(0xb56e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb56c));
        EXPECT(0xf, gbc.readMem(0xb56d));
        // CB 0F 0349
        gbc.setState(0xc635, 0x9848, 0xc20, 0xd1aa, 0x844d, 0x5e8d, 0x0, 0x0);
        gbc.writeMem(0xc635, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x9848, gbc.sp());
        EXPECT(0xc637, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc635));
        EXPECT(0xf, gbc.readMem(0xc636));
        // CB 0F 034A
        gbc.setState(0xed5d, 0xaa51, 0x2770, 0x91fe, 0x4cde, 0x2d06, 0x0, 0x0);
        gbc.writeMem(0xed5d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0xaa51, gbc.sp());
        EXPECT(0xed5f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xed5d));
        EXPECT(0xf, gbc.readMem(0xed5e));
        // CB 0F 034B
        gbc.setState(0x1a9f, 0xeff7, 0x1130, 0xd473, 0x89dc, 0x309, 0x1, 0x1);
        gbc.writeMem(0x1a9f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0xeff7, gbc.sp());
        EXPECT(0x1aa1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 034C
        gbc.setState(0x81f0, 0x9cab, 0x290, 0xd3dd, 0x97b, 0x37ff, 0x0, 0x1);
        gbc.writeMem(0x81f0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x9cab, gbc.sp());
        EXPECT(0x81f2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x81f0));
        EXPECT(0xf, gbc.readMem(0x81f1));
        // CB 0F 034D
        gbc.setState(0xab61, 0x120c, 0xdea0, 0x28ed, 0x93af, 0x3207, 0x0, 0x1);
        gbc.writeMem(0xab61, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x120c, gbc.sp());
        EXPECT(0xab63, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab61));
        EXPECT(0xf, gbc.readMem(0xab62));
        // CB 0F 034E
        gbc.setState(0x5eea, 0x4429, 0xed40, 0x8caf, 0x74c, 0x20f0, 0x0, 0x1);
        gbc.writeMem(0x5eea, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x4429, gbc.sp());
        EXPECT(0x5eec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 034F
        gbc.setState(0x655d, 0xe9f5, 0x96f0, 0xfcee, 0xa25d, 0xd30, 0x1, 0x1);
        gbc.writeMem(0x655d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0xe9f5, gbc.sp());
        EXPECT(0x655f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0350
        gbc.setState(0xdc49, 0xe02e, 0x4250, 0x899b, 0xfe97, 0x3631, 0x1, 0x0);
        gbc.writeMem(0xdc49, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0xe02e, gbc.sp());
        EXPECT(0xdc4b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc49));
        EXPECT(0xf, gbc.readMem(0xdc4a));
        // CB 0F 0351
        gbc.setState(0x1bd2, 0x2a09, 0x2160, 0x809c, 0xce60, 0x19ba, 0x0, 0x0);
        gbc.writeMem(0x1bd2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x2a09, gbc.sp());
        EXPECT(0x1bd4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0352
        gbc.setState(0x4af0, 0x635b, 0x3e30, 0x9d92, 0xc019, 0x2edd, 0x0, 0x1);
        gbc.writeMem(0x4af0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x635b, gbc.sp());
        EXPECT(0x4af2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0353
        gbc.setState(0x4507, 0xb3a3, 0x2360, 0x223e, 0x25e8, 0x1f6, 0x0, 0x0);
        gbc.writeMem(0x4507, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0xb3a3, gbc.sp());
        EXPECT(0x4509, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0354
        gbc.setState(0xcdcd, 0x278e, 0x3030, 0x4187, 0xf5dc, 0x508f, 0x1, 0x0);
        gbc.writeMem(0xcdcd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x278e, gbc.sp());
        EXPECT(0xcdcf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcdcd));
        EXPECT(0xf, gbc.readMem(0xcdce));
        // CB 0F 0355
        gbc.setState(0x4140, 0x658a, 0xf930, 0x6d85, 0xa0e7, 0x5cdd, 0x0, 0x1);
        gbc.writeMem(0x4140, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x658a, gbc.sp());
        EXPECT(0x4142, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0356
        gbc.setState(0x8734, 0xaa1c, 0x1190, 0xd54d, 0xd77b, 0x60b1, 0x0, 0x0);
        gbc.writeMem(0x8734, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0xaa1c, gbc.sp());
        EXPECT(0x8736, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8734));
        EXPECT(0xf, gbc.readMem(0x8735));
        // CB 0F 0357
        gbc.setState(0x7ade, 0x19d0, 0x7840, 0x25fc, 0x554b, 0x580d, 0x0, 0x0);
        gbc.writeMem(0x7ade, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x19d0, gbc.sp());
        EXPECT(0x7ae0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0358
        gbc.setState(0xbdb4, 0xb181, 0xd7e0, 0xba13, 0x8c48, 0x355a, 0x0, 0x0);
        gbc.writeMem(0xbdb4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0xb181, gbc.sp());
        EXPECT(0xbdb6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbdb4));
        EXPECT(0xf, gbc.readMem(0xbdb5));
        // CB 0F 0359
        gbc.setState(0x4def, 0x992d, 0x1610, 0x1931, 0x630f, 0xfb5a, 0x1, 0x0);
        gbc.writeMem(0x4def, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x992d, gbc.sp());
        EXPECT(0x4df1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 035A
        gbc.setState(0x26d7, 0x5bce, 0x9900, 0x32d5, 0xa934, 0xa688, 0x1, 0x1);
        gbc.writeMem(0x26d7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0x5bce, gbc.sp());
        EXPECT(0x26d9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 035B
        gbc.setState(0x2822, 0x794, 0xc5b0, 0xcc6, 0xe1e5, 0xb8ea, 0x0, 0x1);
        gbc.writeMem(0x2822, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x794, gbc.sp());
        EXPECT(0x2824, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 035C
        gbc.setState(0x44ee, 0xe8e3, 0x7dc0, 0x2a6a, 0x9c16, 0xea4, 0x1, 0x1);
        gbc.writeMem(0x44ee, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xe8e3, gbc.sp());
        EXPECT(0x44f0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 035D
        gbc.setState(0x3f03, 0x3983, 0xdd70, 0x147f, 0xf950, 0xd652, 0x0, 0x1);
        gbc.writeMem(0x3f03, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x3983, gbc.sp());
        EXPECT(0x3f05, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 035E
        gbc.setState(0x5288, 0x27ea, 0xa440, 0xd75, 0x881c, 0x87d3, 0x0, 0x1);
        gbc.writeMem(0x5288, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x27ea, gbc.sp());
        EXPECT(0x528a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 035F
        gbc.setState(0x294a, 0x9770, 0x69e0, 0xa881, 0x235c, 0x68ce, 0x0, 0x1);
        gbc.writeMem(0x294a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x9770, gbc.sp());
        EXPECT(0x294c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0360
        gbc.setState(0x624f, 0x806, 0xcfb0, 0x2e20, 0xdef4, 0x4632, 0x0, 0x1);
        gbc.writeMem(0x624f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x806, gbc.sp());
        EXPECT(0x6251, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0361
        gbc.setState(0xd4bf, 0xf34b, 0x7240, 0x161e, 0xdca0, 0xf076, 0x1, 0x0);
        gbc.writeMem(0xd4bf, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0xf34b, gbc.sp());
        EXPECT(0xd4c1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd4bf));
        EXPECT(0xf, gbc.readMem(0xd4c0));
        // CB 0F 0362
        gbc.setState(0xcb9d, 0x5434, 0xf2d0, 0xb772, 0xc35c, 0xfbe6, 0x0, 0x0);
        gbc.writeMem(0xcb9d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x5434, gbc.sp());
        EXPECT(0xcb9f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcb9d));
        EXPECT(0xf, gbc.readMem(0xcb9e));
        // CB 0F 0363
        gbc.setState(0xa206, 0xcf48, 0xe1d0, 0x1aa6, 0x67e4, 0x88ef, 0x1, 0x1);
        gbc.writeMem(0xa206, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xcf48, gbc.sp());
        EXPECT(0xa208, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa206));
        EXPECT(0xf, gbc.readMem(0xa207));
        // CB 0F 0364
        gbc.setState(0xa2c6, 0x9c59, 0xb2d0, 0x7110, 0x6be8, 0xe105, 0x0, 0x1);
        gbc.writeMem(0xa2c6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0x9c59, gbc.sp());
        EXPECT(0xa2c8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa2c6));
        EXPECT(0xf, gbc.readMem(0xa2c7));
        // CB 0F 0365
        gbc.setState(0x7fd5, 0xd1e0, 0xf470, 0xf66b, 0x9c50, 0xf4b, 0x1, 0x0);
        gbc.writeMem(0x7fd5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0xd1e0, gbc.sp());
        EXPECT(0x7fd7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0366
        gbc.setState(0x945a, 0x6e01, 0xcda0, 0x4133, 0x78ba, 0x8f9e, 0x0, 0x1);
        gbc.writeMem(0x945a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x6e01, gbc.sp());
        EXPECT(0x945c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x945a));
        EXPECT(0xf, gbc.readMem(0x945b));
        // CB 0F 0367
        gbc.setState(0x1e9c, 0x4c87, 0xf960, 0x8592, 0x6ad6, 0x22d9, 0x1, 0x1);
        gbc.writeMem(0x1e9c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x4c87, gbc.sp());
        EXPECT(0x1e9e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0368
        gbc.setState(0x9009, 0xb4c1, 0x9160, 0x7c4a, 0xb797, 0x771a, 0x0, 0x1);
        gbc.writeMem(0x9009, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xb4c1, gbc.sp());
        EXPECT(0x900b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9009));
        EXPECT(0xf, gbc.readMem(0x900a));
        // CB 0F 0369
        gbc.setState(0xc55b, 0xde42, 0x9900, 0x6322, 0xd6c6, 0x13df, 0x0, 0x1);
        gbc.writeMem(0xc55b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0xde42, gbc.sp());
        EXPECT(0xc55d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc55b));
        EXPECT(0xf, gbc.readMem(0xc55c));
        // CB 0F 036A
        gbc.setState(0x4d76, 0x6777, 0xbf50, 0x4a18, 0x22f0, 0xf414, 0x1, 0x0);
        gbc.writeMem(0x4d76, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x6777, gbc.sp());
        EXPECT(0x4d78, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 036B
        gbc.setState(0x3d89, 0x63d5, 0x8d20, 0x590, 0x93e8, 0x9d4f, 0x1, 0x0);
        gbc.writeMem(0x3d89, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0x63d5, gbc.sp());
        EXPECT(0x3d8b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 036C
        gbc.setState(0xa312, 0xb5d5, 0x49c0, 0x3b52, 0x76c8, 0x5c7b, 0x1, 0x0);
        gbc.writeMem(0xa312, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0xb5d5, gbc.sp());
        EXPECT(0xa314, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa312));
        EXPECT(0xf, gbc.readMem(0xa313));
        // CB 0F 036D
        gbc.setState(0x3dd8, 0xae49, 0xeab0, 0x1bbc, 0x5d39, 0x8cd8, 0x0, 0x0);
        gbc.writeMem(0x3dd8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0xae49, gbc.sp());
        EXPECT(0x3dda, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 036E
        gbc.setState(0x6f0c, 0x51b0, 0x4c10, 0x49b1, 0x4f4e, 0xd98b, 0x0, 0x0);
        gbc.writeMem(0x6f0c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x51b0, gbc.sp());
        EXPECT(0x6f0e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 036F
        gbc.setState(0x699c, 0xf5e5, 0x2e20, 0x68ee, 0x3179, 0xe9e, 0x0, 0x1);
        gbc.writeMem(0x699c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0xf5e5, gbc.sp());
        EXPECT(0x699e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0370
        gbc.setState(0xb95, 0x6be0, 0xd990, 0xc306, 0x7851, 0x2c53, 0x1, 0x1);
        gbc.writeMem(0xb95, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x6be0, gbc.sp());
        EXPECT(0xb97, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0371
        gbc.setState(0x78c5, 0x819, 0x51f0, 0x2c73, 0xe166, 0x92a4, 0x1, 0x1);
        gbc.writeMem(0x78c5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x819, gbc.sp());
        EXPECT(0x78c7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0372
        gbc.setState(0x784, 0x17b8, 0x280, 0xdaf1, 0x9eac, 0xc5fb, 0x0, 0x1);
        gbc.writeMem(0x784, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x17b8, gbc.sp());
        EXPECT(0x786, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0373
        gbc.setState(0x7eac, 0x47b1, 0xbc40, 0x9b9b, 0xf6b6, 0x21f5, 0x1, 0x1);
        gbc.writeMem(0x7eac, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x47b1, gbc.sp());
        EXPECT(0x7eae, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0374
        gbc.setState(0x2acd, 0xe8a9, 0x4c30, 0xb9c2, 0x6365, 0x851d, 0x1, 0x0);
        gbc.writeMem(0x2acd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xe8a9, gbc.sp());
        EXPECT(0x2acf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0375
        gbc.setState(0x1ec6, 0x31bd, 0x2a80, 0xc97, 0xb7c8, 0xef50, 0x1, 0x0);
        gbc.writeMem(0x1ec6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x31bd, gbc.sp());
        EXPECT(0x1ec8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0376
        gbc.setState(0x38ef, 0x3f4c, 0x50c0, 0xf0af, 0x435a, 0x4755, 0x1, 0x1);
        gbc.writeMem(0x38ef, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x3f4c, gbc.sp());
        EXPECT(0x38f1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0377
        gbc.setState(0xe469, 0x3191, 0x1f40, 0x69c6, 0xc9ff, 0x16dc, 0x0, 0x1);
        gbc.writeMem(0xe469, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x3191, gbc.sp());
        EXPECT(0xe46b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe469));
        EXPECT(0xf, gbc.readMem(0xe46a));
        // CB 0F 0378
        gbc.setState(0xed02, 0xd5fb, 0xe400, 0xc83, 0xc5ea, 0xd4b9, 0x1, 0x1);
        gbc.writeMem(0xed02, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xd5fb, gbc.sp());
        EXPECT(0xed04, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xed02));
        EXPECT(0xf, gbc.readMem(0xed03));
        // CB 0F 0379
        gbc.setState(0x5193, 0xfcee, 0x3930, 0x6e52, 0x1538, 0x1d1a, 0x0, 0x0);
        gbc.writeMem(0x5193, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xfcee, gbc.sp());
        EXPECT(0x5195, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 037A
        gbc.setState(0xc9a9, 0x6fb, 0x6a0, 0x1ddf, 0x980c, 0xe00d, 0x1, 0x1);
        gbc.writeMem(0xc9a9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x6fb, gbc.sp());
        EXPECT(0xc9ab, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc9a9));
        EXPECT(0xf, gbc.readMem(0xc9aa));
        // CB 0F 037B
        gbc.setState(0xb1a, 0x5db0, 0xbc60, 0x86ad, 0x818f, 0x168, 0x1, 0x1);
        gbc.writeMem(0xb1a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x5db0, gbc.sp());
        EXPECT(0xb1c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 037C
        gbc.setState(0xbd08, 0x2920, 0x17e0, 0xf91b, 0x213, 0x6df0, 0x0, 0x1);
        gbc.writeMem(0xbd08, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x2920, gbc.sp());
        EXPECT(0xbd0a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd08));
        EXPECT(0xf, gbc.readMem(0xbd09));
        // CB 0F 037D
        gbc.setState(0x84a7, 0x4979, 0x2d90, 0xca30, 0x1d50, 0x1350, 0x0, 0x0);
        gbc.writeMem(0x84a7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x4979, gbc.sp());
        EXPECT(0x84a9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84a7));
        EXPECT(0xf, gbc.readMem(0x84a8));
        // CB 0F 037E
        gbc.setState(0xac8c, 0xe5a5, 0x8cb0, 0x89ac, 0x249e, 0xa4c6, 0x0, 0x1);
        gbc.writeMem(0xac8c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0xe5a5, gbc.sp());
        EXPECT(0xac8e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac8c));
        EXPECT(0xf, gbc.readMem(0xac8d));
        // CB 0F 037F
        gbc.setState(0x76ff, 0xd9b9, 0x4770, 0x167e, 0xb001, 0x647b, 0x1, 0x0);
        gbc.writeMem(0x76ff, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0xd9b9, gbc.sp());
        EXPECT(0x7701, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0380
        gbc.setState(0x9b83, 0xeeef, 0xf690, 0x547f, 0x3d41, 0x686, 0x1, 0x0);
        gbc.writeMem(0x9b83, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0xeeef, gbc.sp());
        EXPECT(0x9b85, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b83));
        EXPECT(0xf, gbc.readMem(0x9b84));
        // CB 0F 0381
        gbc.setState(0x7198, 0xe47d, 0x7120, 0x2343, 0x6c74, 0x6850, 0x1, 0x1);
        gbc.writeMem(0x7198, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0xe47d, gbc.sp());
        EXPECT(0x719a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0382
        gbc.setState(0x2472, 0x161b, 0xe590, 0x2c09, 0xa753, 0xccb4, 0x1, 0x1);
        gbc.writeMem(0x2472, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x161b, gbc.sp());
        EXPECT(0x2474, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0383
        gbc.setState(0x8943, 0x8692, 0x9e20, 0x94a7, 0xd1e9, 0x4d5b, 0x0, 0x1);
        gbc.writeMem(0x8943, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x8692, gbc.sp());
        EXPECT(0x8945, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8943));
        EXPECT(0xf, gbc.readMem(0x8944));
        // CB 0F 0384
        gbc.setState(0x8e10, 0xece4, 0x5ba0, 0xccc1, 0x2493, 0x3886, 0x0, 0x1);
        gbc.writeMem(0x8e10, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0xece4, gbc.sp());
        EXPECT(0x8e12, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e10));
        EXPECT(0xf, gbc.readMem(0x8e11));
        // CB 0F 0385
        gbc.setState(0x4a32, 0x5da0, 0x4fe0, 0x7b7c, 0xea40, 0x5d35, 0x1, 0x0);
        gbc.writeMem(0x4a32, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x5da0, gbc.sp());
        EXPECT(0x4a34, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0386
        gbc.setState(0x3d28, 0xa127, 0x2b0, 0xdb82, 0x3685, 0xf096, 0x0, 0x1);
        gbc.writeMem(0x3d28, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xa127, gbc.sp());
        EXPECT(0x3d2a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0387
        gbc.setState(0x199b, 0xab50, 0xa3e0, 0xb56a, 0x784f, 0x7f5c, 0x0, 0x0);
        gbc.writeMem(0x199b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0xab50, gbc.sp());
        EXPECT(0x199d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0388
        gbc.setState(0xd9b3, 0xed22, 0x1f30, 0x1f82, 0xe0dd, 0x527c, 0x1, 0x0);
        gbc.writeMem(0xd9b3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0xed22, gbc.sp());
        EXPECT(0xd9b5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd9b3));
        EXPECT(0xf, gbc.readMem(0xd9b4));
        // CB 0F 038A
        gbc.setState(0x6d7b, 0xdc97, 0x6b70, 0x6fd6, 0xbaa8, 0xfc82, 0x0, 0x0);
        gbc.writeMem(0x6d7b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xdc97, gbc.sp());
        EXPECT(0x6d7d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 038B
        gbc.setState(0x6945, 0xacee, 0xc6a0, 0x3e91, 0x3ae3, 0xddd2, 0x1, 0x0);
        gbc.writeMem(0x6945, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0xacee, gbc.sp());
        EXPECT(0x6947, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 038C
        gbc.setState(0x7334, 0x78b0, 0xbd80, 0x2c00, 0x748e, 0xdba9, 0x1, 0x1);
        gbc.writeMem(0x7334, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x78b0, gbc.sp());
        EXPECT(0x7336, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 038D
        gbc.setState(0x8dc8, 0x206b, 0x460, 0xc43d, 0xdb13, 0xfabc, 0x1, 0x1);
        gbc.writeMem(0x8dc8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x206b, gbc.sp());
        EXPECT(0x8dca, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8dc8));
        EXPECT(0xf, gbc.readMem(0x8dc9));
        // CB 0F 038E
        gbc.setState(0x7513, 0xb873, 0xdb00, 0x2c9f, 0xbc3a, 0x194f, 0x1, 0x0);
        gbc.writeMem(0x7513, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0xb873, gbc.sp());
        EXPECT(0x7515, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 038F
        gbc.setState(0xe27c, 0xd290, 0x8670, 0x4b85, 0x1546, 0xed, 0x0, 0x1);
        gbc.writeMem(0xe27c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0xd290, gbc.sp());
        EXPECT(0xe27e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe27c));
        EXPECT(0xf, gbc.readMem(0xe27d));
        // CB 0F 0390
        gbc.setState(0xa9f5, 0x1eda, 0x6ec0, 0x9596, 0xb031, 0x70d0, 0x1, 0x1);
        gbc.writeMem(0xa9f5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x1eda, gbc.sp());
        EXPECT(0xa9f7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa9f5));
        EXPECT(0xf, gbc.readMem(0xa9f6));
        // CB 0F 0391
        gbc.setState(0x3bb1, 0x76e1, 0x1a40, 0xcc46, 0xff5c, 0xb7b3, 0x1, 0x1);
        gbc.writeMem(0x3bb1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x76e1, gbc.sp());
        EXPECT(0x3bb3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0392
        gbc.setState(0x6547, 0xe35f, 0x6600, 0x24a3, 0x7825, 0x896d, 0x0, 0x0);
        gbc.writeMem(0x6547, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xe35f, gbc.sp());
        EXPECT(0x6549, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0393
        gbc.setState(0x4a11, 0x8521, 0x1700, 0xee5d, 0x340a, 0xc73c, 0x1, 0x0);
        gbc.writeMem(0x4a11, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x8521, gbc.sp());
        EXPECT(0x4a13, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0394
        gbc.setState(0x946e, 0xda50, 0x3180, 0xf2dd, 0x7929, 0xcd53, 0x0, 0x1);
        gbc.writeMem(0x946e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0xda50, gbc.sp());
        EXPECT(0x9470, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x946e));
        EXPECT(0xf, gbc.readMem(0x946f));
        // CB 0F 0395
        gbc.setState(0x206b, 0xcbf8, 0x27d0, 0xf9e9, 0xf23a, 0x1e41, 0x1, 0x1);
        gbc.writeMem(0x206b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0xcbf8, gbc.sp());
        EXPECT(0x206d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0396
        gbc.setState(0x471, 0xb07f, 0x9630, 0x83c, 0x20f3, 0x7f5e, 0x0, 0x0);
        gbc.writeMem(0x471, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0xb07f, gbc.sp());
        EXPECT(0x473, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0397
        gbc.setState(0x22f, 0x72c5, 0x4120, 0x8dcb, 0x2728, 0x58cf, 0x1, 0x1);
        gbc.writeMem(0x22f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x72c5, gbc.sp());
        EXPECT(0x231, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 0398
        gbc.setState(0x604d, 0xe037, 0xf6c0, 0xde48, 0xf1ba, 0x103d, 0x0, 0x1);
        gbc.writeMem(0x604d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0xe037, gbc.sp());
        EXPECT(0x604f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 0399
        gbc.setState(0x5154, 0x54e5, 0xd710, 0x60ab, 0x29dd, 0xace5, 0x1, 0x1);
        gbc.writeMem(0x5154, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x54e5, gbc.sp());
        EXPECT(0x5156, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 039A
        gbc.setState(0x445f, 0xba65, 0x430, 0x3ecd, 0x9617, 0xc463, 0x1, 0x0);
        gbc.writeMem(0x445f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0xba65, gbc.sp());
        EXPECT(0x4461, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 039B
        gbc.setState(0x6f78, 0x2b5d, 0xabc0, 0xd06b, 0x3187, 0xb0c5, 0x1, 0x1);
        gbc.writeMem(0x6f78, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x2b5d, gbc.sp());
        EXPECT(0x6f7a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 039C
        gbc.setState(0x8578, 0xf9b3, 0x9a00, 0xed73, 0x970, 0xc4fd, 0x0, 0x1);
        gbc.writeMem(0x8578, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0xf9b3, gbc.sp());
        EXPECT(0x857a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8578));
        EXPECT(0xf, gbc.readMem(0x8579));
        // CB 0F 039D
        gbc.setState(0x9f01, 0x5526, 0x4d50, 0x3678, 0xf418, 0x4c8a, 0x1, 0x1);
        gbc.writeMem(0x9f01, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x5526, gbc.sp());
        EXPECT(0x9f03, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f01));
        EXPECT(0xf, gbc.readMem(0x9f02));
        // CB 0F 039E
        gbc.setState(0x90e1, 0x12b7, 0x2b20, 0x9af0, 0x6ca0, 0xe267, 0x0, 0x1);
        gbc.writeMem(0x90e1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x12b7, gbc.sp());
        EXPECT(0x90e3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x90e1));
        EXPECT(0xf, gbc.readMem(0x90e2));
        // CB 0F 039F
        gbc.setState(0x241c, 0x99f4, 0x8700, 0xb59d, 0x7522, 0x1496, 0x0, 0x1);
        gbc.writeMem(0x241c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x99f4, gbc.sp());
        EXPECT(0x241e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 03A0
        gbc.setState(0xcef1, 0x7ff, 0x28c0, 0x3cf6, 0xa4af, 0xe968, 0x0, 0x1);
        gbc.writeMem(0xcef1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x7ff, gbc.sp());
        EXPECT(0xcef3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcef1));
        EXPECT(0xf, gbc.readMem(0xcef2));
        // CB 0F 03A1
        gbc.setState(0x52e7, 0x1b64, 0xb1b0, 0x89cf, 0x863a, 0x1032, 0x1, 0x1);
        gbc.writeMem(0x52e7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x1b64, gbc.sp());
        EXPECT(0x52e9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 03A2
        gbc.setState(0x99af, 0x20c, 0x22b0, 0xa672, 0x4102, 0xac3b, 0x1, 0x1);
        gbc.writeMem(0x99af, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0x20c, gbc.sp());
        EXPECT(0x99b1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x99af));
        EXPECT(0xf, gbc.readMem(0x99b0));
        // CB 0F 03A3
        gbc.setState(0x7ca8, 0xf6d7, 0xd9d0, 0xffab, 0x8f7f, 0x7b82, 0x0, 0x0);
        gbc.writeMem(0x7ca8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xf6d7, gbc.sp());
        EXPECT(0x7caa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 03A4
        gbc.setState(0xcd97, 0xf3bb, 0xdf00, 0xeb33, 0x4e1c, 0xc127, 0x0, 0x1);
        gbc.writeMem(0xcd97, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0xf3bb, gbc.sp());
        EXPECT(0xcd99, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd97));
        EXPECT(0xf, gbc.readMem(0xcd98));
        // CB 0F 03A5
        gbc.setState(0x3b7c, 0xaae6, 0xf7f0, 0x1adb, 0x6b59, 0x5b95, 0x0, 0x0);
        gbc.writeMem(0x3b7c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0xaae6, gbc.sp());
        EXPECT(0x3b7e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 03A6
        gbc.setState(0x4037, 0x7ba3, 0xbe40, 0xdc90, 0x6c8c, 0x255a, 0x0, 0x1);
        gbc.writeMem(0x4037, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x7ba3, gbc.sp());
        EXPECT(0x4039, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 03A7
        gbc.setState(0x1e4f, 0x16de, 0x1300, 0x5ad, 0x2ff9, 0x53e5, 0x1, 0x0);
        gbc.writeMem(0x1e4f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x16de, gbc.sp());
        EXPECT(0x1e51, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 03A8
        gbc.setState(0x8f9a, 0xf3b9, 0x1f50, 0x8d4f, 0x9718, 0x81bd, 0x1, 0x1);
        gbc.writeMem(0x8f9a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xf3b9, gbc.sp());
        EXPECT(0x8f9c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f9a));
        EXPECT(0xf, gbc.readMem(0x8f9b));
        // CB 0F 03A9
        gbc.setState(0xdf61, 0x31d4, 0xfd20, 0xf257, 0x1ccb, 0x17a8, 0x1, 0x0);
        gbc.writeMem(0xdf61, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x31d4, gbc.sp());
        EXPECT(0xdf63, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdf61));
        EXPECT(0xf, gbc.readMem(0xdf62));
        // CB 0F 03AA
        gbc.setState(0xa0b8, 0xfaf6, 0x34d0, 0x4615, 0x61ba, 0xa587, 0x0, 0x1);
        gbc.writeMem(0xa0b8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0xfaf6, gbc.sp());
        EXPECT(0xa0ba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa0b8));
        EXPECT(0xf, gbc.readMem(0xa0b9));
        // CB 0F 03AB
        gbc.setState(0x4ac8, 0x2364, 0x7160, 0xa1bd, 0xb682, 0x6934, 0x0, 0x0);
        gbc.writeMem(0x4ac8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x2364, gbc.sp());
        EXPECT(0x4aca, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 03AC
        gbc.setState(0xd53c, 0x34fe, 0x8480, 0x3267, 0xd4f4, 0xbac9, 0x0, 0x0);
        gbc.writeMem(0xd53c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x34fe, gbc.sp());
        EXPECT(0xd53e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd53c));
        EXPECT(0xf, gbc.readMem(0xd53d));
        // CB 0F 03AD
        gbc.setState(0x8dca, 0xd838, 0xd8f0, 0xf6f8, 0x8072, 0x2764, 0x1, 0x0);
        gbc.writeMem(0x8dca, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0xd838, gbc.sp());
        EXPECT(0x8dcc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8dca));
        EXPECT(0xf, gbc.readMem(0x8dcb));
        // CB 0F 03AE
        gbc.setState(0x2d01, 0xff27, 0xb60, 0x1466, 0xe4e, 0x4fa8, 0x1, 0x0);
        gbc.writeMem(0x2d01, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xff27, gbc.sp());
        EXPECT(0x2d03, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 03AF
        gbc.setState(0x23ea, 0x56f9, 0xe3d0, 0x5d1c, 0xc61a, 0x1c6f, 0x1, 0x1);
        gbc.writeMem(0x23ea, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0x56f9, gbc.sp());
        EXPECT(0x23ec, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 03B0
        gbc.setState(0x8a87, 0xaf84, 0x34c0, 0xe16d, 0x46a5, 0xc541, 0x1, 0x1);
        gbc.writeMem(0x8a87, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0xaf84, gbc.sp());
        EXPECT(0x8a89, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a87));
        EXPECT(0xf, gbc.readMem(0x8a88));
        // CB 0F 03B1
        gbc.setState(0x3bfa, 0x36c5, 0x67d0, 0x1c89, 0xbce7, 0x9b28, 0x0, 0x1);
        gbc.writeMem(0x3bfa, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x36c5, gbc.sp());
        EXPECT(0x3bfc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 03B2
        gbc.setState(0x5460, 0x11c3, 0x3520, 0x3040, 0xfaf7, 0x518b, 0x0, 0x1);
        gbc.writeMem(0x5460, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x11c3, gbc.sp());
        EXPECT(0x5462, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 03B3
        gbc.setState(0xa0ef, 0x2f42, 0x200, 0x94b5, 0x5db7, 0x8171, 0x1, 0x1);
        gbc.writeMem(0xa0ef, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x2f42, gbc.sp());
        EXPECT(0xa0f1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa0ef));
        EXPECT(0xf, gbc.readMem(0xa0f0));
        // CB 0F 03B4
        gbc.setState(0xd246, 0xc036, 0x69c0, 0xec73, 0x21d6, 0xd6e5, 0x0, 0x0);
        gbc.writeMem(0xd246, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0xc036, gbc.sp());
        EXPECT(0xd248, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd246));
        EXPECT(0xf, gbc.readMem(0xd247));
        // CB 0F 03B5
        gbc.setState(0x43e4, 0x1b05, 0xbb20, 0xa712, 0x22d9, 0xd981, 0x1, 0x1);
        gbc.writeMem(0x43e4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x1b05, gbc.sp());
        EXPECT(0x43e6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 03B6
        gbc.setState(0x970f, 0x6fa3, 0x63e0, 0xc927, 0x9c1e, 0x531, 0x0, 0x1);
        gbc.writeMem(0x970f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x6fa3, gbc.sp());
        EXPECT(0x9711, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x970f));
        EXPECT(0xf, gbc.readMem(0x9710));
        // CB 0F 03B7
        gbc.setState(0xc883, 0x9f1, 0xe810, 0xaea6, 0xdb70, 0x8c35, 0x0, 0x0);
        gbc.writeMem(0xc883, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x9f1, gbc.sp());
        EXPECT(0xc885, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc883));
        EXPECT(0xf, gbc.readMem(0xc884));
        // CB 0F 03B8
        gbc.setState(0xb18, 0x1185, 0xad20, 0x8e8a, 0x3d57, 0x2fde, 0x0, 0x1);
        gbc.writeMem(0xb18, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x1185, gbc.sp());
        EXPECT(0xb1a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 03B9
        gbc.setState(0x38cb, 0x6083, 0x99f0, 0x52d2, 0xe042, 0x2c6b, 0x1, 0x0);
        gbc.writeMem(0x38cb, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x6083, gbc.sp());
        EXPECT(0x38cd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 03BA
        gbc.setState(0x98bf, 0x57ed, 0x4850, 0x6100, 0x7b79, 0xffb3, 0x1, 0x1);
        gbc.writeMem(0x98bf, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x57ed, gbc.sp());
        EXPECT(0x98c1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x98bf));
        EXPECT(0xf, gbc.readMem(0x98c0));
        // CB 0F 03BB
        gbc.setState(0xaf89, 0x990b, 0x8310, 0xee30, 0xee93, 0xf299, 0x0, 0x1);
        gbc.writeMem(0xaf89, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x990b, gbc.sp());
        EXPECT(0xaf8b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaf89));
        EXPECT(0xf, gbc.readMem(0xaf8a));
        // CB 0F 03BC
        gbc.setState(0xd80c, 0x30b1, 0x5930, 0x3df2, 0x9559, 0x23b6, 0x0, 0x1);
        gbc.writeMem(0xd80c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x30b1, gbc.sp());
        EXPECT(0xd80e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd80c));
        EXPECT(0xf, gbc.readMem(0xd80d));
        // CB 0F 03BD
        gbc.setState(0xc5b2, 0x81c0, 0xfb80, 0xacd9, 0x385f, 0x402, 0x1, 0x1);
        gbc.writeMem(0xc5b2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x81c0, gbc.sp());
        EXPECT(0xc5b4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc5b2));
        EXPECT(0xf, gbc.readMem(0xc5b3));
        // CB 0F 03BE
        gbc.setState(0x4239, 0xcac5, 0xe870, 0x864d, 0xe9df, 0x430b, 0x0, 0x0);
        gbc.writeMem(0x4239, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xcac5, gbc.sp());
        EXPECT(0x423b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 03BF
        gbc.setState(0xd93e, 0x21b9, 0x81f0, 0x19a6, 0x35e5, 0x2316, 0x1, 0x1);
        gbc.writeMem(0xd93e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x21b9, gbc.sp());
        EXPECT(0xd940, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd93e));
        EXPECT(0xf, gbc.readMem(0xd93f));
        // CB 0F 03C0
        gbc.setState(0x87eb, 0x46ec, 0xc6a0, 0xc5b9, 0xaa30, 0xcb18, 0x0, 0x1);
        gbc.writeMem(0x87eb, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x46ec, gbc.sp());
        EXPECT(0x87ed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x87eb));
        EXPECT(0xf, gbc.readMem(0x87ec));
        // CB 0F 03C2
        gbc.setState(0xb85e, 0x2e6, 0x7cc0, 0xe634, 0x209, 0x516, 0x1, 0x0);
        gbc.writeMem(0xb85e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x2e6, gbc.sp());
        EXPECT(0xb860, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb85e));
        EXPECT(0xf, gbc.readMem(0xb85f));
        // CB 0F 03C3
        gbc.setState(0xebc5, 0xfc24, 0x34f0, 0x11e4, 0xd03, 0x96b2, 0x0, 0x0);
        gbc.writeMem(0xebc5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0xfc24, gbc.sp());
        EXPECT(0xebc7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xebc5));
        EXPECT(0xf, gbc.readMem(0xebc6));
        // CB 0F 03C4
        gbc.setState(0xbdf, 0x8f31, 0xc980, 0xb260, 0x6a03, 0xa329, 0x1, 0x1);
        gbc.writeMem(0xbdf, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0x8f31, gbc.sp());
        EXPECT(0xbe1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 03C5
        gbc.setState(0xe268, 0xa529, 0x8fb0, 0x37b1, 0xed9b, 0x3045, 0x1, 0x0);
        gbc.writeMem(0xe268, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0xa529, gbc.sp());
        EXPECT(0xe26a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe268));
        EXPECT(0xf, gbc.readMem(0xe269));
        // CB 0F 03C6
        gbc.setState(0x601d, 0x5645, 0x5f80, 0x8edf, 0x8674, 0x777e, 0x1, 0x1);
        gbc.writeMem(0x601d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x5645, gbc.sp());
        EXPECT(0x601f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 03C7
        gbc.setState(0x8415, 0xe82b, 0x30f0, 0x4aa3, 0x86e0, 0xfcd5, 0x0, 0x0);
        gbc.writeMem(0x8415, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0xe82b, gbc.sp());
        EXPECT(0x8417, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8415));
        EXPECT(0xf, gbc.readMem(0x8416));
        // CB 0F 03C8
        gbc.setState(0xcf13, 0x5696, 0xe5d0, 0x23f7, 0xd88d, 0xd20a, 0x1, 0x0);
        gbc.writeMem(0xcf13, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x5696, gbc.sp());
        EXPECT(0xcf15, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf13));
        EXPECT(0xf, gbc.readMem(0xcf14));
        // CB 0F 03C9
        gbc.setState(0x37b4, 0xcc5e, 0x8160, 0x3b50, 0xf8ac, 0xeaf2, 0x0, 0x0);
        gbc.writeMem(0x37b4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0xcc5e, gbc.sp());
        EXPECT(0x37b6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 03CA
        gbc.setState(0xbecf, 0xe80d, 0x9680, 0x7b19, 0xa58a, 0xed51, 0x0, 0x1);
        gbc.writeMem(0xbecf, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0xe80d, gbc.sp());
        EXPECT(0xbed1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbecf));
        EXPECT(0xf, gbc.readMem(0xbed0));
        // CB 0F 03CB
        gbc.setState(0x9112, 0x1db3, 0x5880, 0xb687, 0x4ec0, 0x53ad, 0x1, 0x1);
        gbc.writeMem(0x9112, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x1db3, gbc.sp());
        EXPECT(0x9114, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9112));
        EXPECT(0xf, gbc.readMem(0x9113));
        // CB 0F 03CC
        gbc.setState(0x2aeb, 0xfe65, 0x1080, 0xcb30, 0xc663, 0x89df, 0x0, 0x0);
        gbc.writeMem(0x2aeb, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0xfe65, gbc.sp());
        EXPECT(0x2aed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 03CD
        gbc.setState(0x9217, 0x8880, 0xa0a0, 0xc090, 0xff12, 0x6221, 0x1, 0x0);
        gbc.writeMem(0x9217, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x8880, gbc.sp());
        EXPECT(0x9219, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9217));
        EXPECT(0xf, gbc.readMem(0x9218));
        // CB 0F 03CF
        gbc.setState(0xbaae, 0xe5fa, 0xd750, 0xc727, 0x31e9, 0x8855, 0x1, 0x0);
        gbc.writeMem(0xbaae, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0xe5fa, gbc.sp());
        EXPECT(0xbab0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbaae));
        EXPECT(0xf, gbc.readMem(0xbaaf));
        // CB 0F 03D0
        gbc.setState(0x56b1, 0x35d, 0x96f0, 0x2812, 0xe3fc, 0xfe52, 0x1, 0x0);
        gbc.writeMem(0x56b1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x35d, gbc.sp());
        EXPECT(0x56b3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 03D1
        gbc.setState(0x707b, 0xa9a2, 0x690, 0xd847, 0x7219, 0x26a5, 0x0, 0x0);
        gbc.writeMem(0x707b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0xa9a2, gbc.sp());
        EXPECT(0x707d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 03D2
        gbc.setState(0x3a65, 0xbeb5, 0xa180, 0x8c33, 0x56d0, 0xd24a, 0x0, 0x0);
        gbc.writeMem(0x3a65, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0xbeb5, gbc.sp());
        EXPECT(0x3a67, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 03D3
        gbc.setState(0x5335, 0xa2fb, 0xb910, 0x8abb, 0xf02c, 0x7222, 0x1, 0x1);
        gbc.writeMem(0x5335, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0xa2fb, gbc.sp());
        EXPECT(0x5337, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 03D4
        gbc.setState(0xd184, 0x58ba, 0x670, 0xff37, 0xe82e, 0x7ac8, 0x1, 0x1);
        gbc.writeMem(0xd184, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x58ba, gbc.sp());
        EXPECT(0xd186, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd184));
        EXPECT(0xf, gbc.readMem(0xd185));
        // CB 0F 03D6
        gbc.setState(0xe309, 0x24de, 0xdbf0, 0x6f01, 0x8782, 0xa2c, 0x1, 0x0);
        gbc.writeMem(0xe309, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x24de, gbc.sp());
        EXPECT(0xe30b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe309));
        EXPECT(0xf, gbc.readMem(0xe30a));
        // CB 0F 03D7
        gbc.setState(0x3356, 0xb5c4, 0x230, 0x893a, 0x6bf2, 0xbe19, 0x1, 0x1);
        gbc.writeMem(0x3356, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0xb5c4, gbc.sp());
        EXPECT(0x3358, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 03D8
        gbc.setState(0xa268, 0x507e, 0x5230, 0xff4d, 0x49c1, 0x92b1, 0x0, 0x1);
        gbc.writeMem(0xa268, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x507e, gbc.sp());
        EXPECT(0xa26a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa268));
        EXPECT(0xf, gbc.readMem(0xa269));
        // CB 0F 03D9
        gbc.setState(0x5391, 0xedcf, 0xd730, 0x4936, 0xc9b8, 0xd0af, 0x0, 0x0);
        gbc.writeMem(0x5391, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0xedcf, gbc.sp());
        EXPECT(0x5393, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 03DA
        gbc.setState(0x3892, 0xba0b, 0x7fa0, 0x87a5, 0x3818, 0xb264, 0x0, 0x1);
        gbc.writeMem(0x3892, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0xba0b, gbc.sp());
        EXPECT(0x3894, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 03DB
        gbc.setState(0x6bdc, 0x1305, 0xcd70, 0x189d, 0x1d97, 0x4656, 0x1, 0x1);
        gbc.writeMem(0x6bdc, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x1305, gbc.sp());
        EXPECT(0x6bde, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 03DC
        gbc.setState(0x9388, 0x32e8, 0x3120, 0x3efa, 0xaaae, 0x6dca, 0x1, 0x1);
        gbc.writeMem(0x9388, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x32e8, gbc.sp());
        EXPECT(0x938a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9388));
        EXPECT(0xf, gbc.readMem(0x9389));
        // CB 0F 03DD
        gbc.setState(0x8773, 0x3c51, 0x9c70, 0x4779, 0x9406, 0xd737, 0x0, 0x1);
        gbc.writeMem(0x8773, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x3c51, gbc.sp());
        EXPECT(0x8775, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8773));
        EXPECT(0xf, gbc.readMem(0x8774));
        // CB 0F 03DE
        gbc.setState(0x7fdd, 0x7914, 0xf9a0, 0xe8ca, 0x647f, 0xc3a9, 0x1, 0x1);
        gbc.writeMem(0x7fdd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x7914, gbc.sp());
        EXPECT(0x7fdf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 03DF
        gbc.setState(0xbff7, 0xa3ae, 0xc430, 0xbb22, 0xbb22, 0xc6e4, 0x0, 0x0);
        gbc.writeMem(0xbff7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0xa3ae, gbc.sp());
        EXPECT(0xbff9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbff7));
        EXPECT(0xf, gbc.readMem(0xbff8));
        // CB 0F 03E0
        gbc.setState(0x70e7, 0xcf96, 0x57d0, 0x196f, 0xd7c4, 0xb842, 0x0, 0x1);
        gbc.writeMem(0x70e7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0xcf96, gbc.sp());
        EXPECT(0x70e9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 03E1
        gbc.setState(0xa0b9, 0xa88f, 0xf1d0, 0x83c7, 0xec41, 0x87bf, 0x1, 0x0);
        gbc.writeMem(0xa0b9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0xa88f, gbc.sp());
        EXPECT(0xa0bb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa0b9));
        EXPECT(0xf, gbc.readMem(0xa0ba));
        // CB 0F 03E2
        gbc.setState(0xe63d, 0x3bf8, 0x6b50, 0x718e, 0x533d, 0x23ca, 0x1, 0x1);
        gbc.writeMem(0xe63d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x3bf8, gbc.sp());
        EXPECT(0xe63f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe63d));
        EXPECT(0xf, gbc.readMem(0xe63e));
        // CB 0F 03E3
        gbc.setState(0x3f54, 0xd107, 0x1b80, 0x9eec, 0x6129, 0xd0eb, 0x1, 0x1);
        gbc.writeMem(0x3f54, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0xd107, gbc.sp());
        EXPECT(0x3f56, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 0F 03E4
        gbc.setState(0x19e8, 0x566, 0x4070, 0x628f, 0xcd8, 0xa489, 0x0, 0x1);
        gbc.writeMem(0x19e8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x566, gbc.sp());
        EXPECT(0x19ea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 03E5
        gbc.setState(0xe568, 0x89fc, 0x52d0, 0x375, 0xdfbb, 0x27f6, 0x0, 0x1);
        gbc.writeMem(0xe568, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x89fc, gbc.sp());
        EXPECT(0xe56a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe568));
        EXPECT(0xf, gbc.readMem(0xe569));
        // CB 0F 03E6
        gbc.setState(0x2bd3, 0x1de0, 0x66c0, 0x3b2d, 0xbd8b, 0xa687, 0x0, 0x1);
        gbc.writeMem(0x2bd3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x1de0, gbc.sp());
        EXPECT(0x2bd5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 0F 03E7
        gbc.setState(0x79f, 0xfe55, 0xaa70, 0x3c50, 0x769b, 0x7b49, 0x0, 0x1);
        gbc.writeMem(0x79f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xfe55, gbc.sp());
        EXPECT(0x7a1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
    }
