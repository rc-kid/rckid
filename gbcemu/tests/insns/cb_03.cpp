#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_cb_03)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_cb_03) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 03 0000
        gbc.setState(0x6093, 0xf615, 0xb1b0, 0xde2e, 0xe1fe, 0xab1e, 0x0, 0x0);
        gbc.writeMem(0x6093, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xf615);
        EXPECT(gbc.pc(), 0x6095);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0001
        gbc.setState(0xa680, 0x57e9, 0x7890, 0xcaf6, 0x4355, 0xae58, 0x0, 0x1);
        gbc.writeMem(0xa680, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x57e9);
        EXPECT(gbc.pc(), 0xa682);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa680), 0xcb);
        EXPECT(gbc.readMem(0xa681), 0x3);
        // CB 03 0002
        gbc.setState(0x27dd, 0x25e5, 0xd630, 0x7a4e, 0xb545, 0xeb48, 0x1, 0x1);
        gbc.writeMem(0x27dd, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x25e5);
        EXPECT(gbc.pc(), 0x27df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0003
        gbc.setState(0xae90, 0x70e9, 0x4970, 0xa9ec, 0xafd9, 0xd21e, 0x1, 0x1);
        gbc.writeMem(0xae90, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x70e9);
        EXPECT(gbc.pc(), 0xae92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae90), 0xcb);
        EXPECT(gbc.readMem(0xae91), 0x3);
        // CB 03 0004
        gbc.setState(0xec2d, 0x1f2d, 0x7e80, 0x6d8b, 0x96e3, 0x8964, 0x1, 0x1);
        gbc.writeMem(0xec2d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x1f2d);
        EXPECT(gbc.pc(), 0xec2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec2d), 0xcb);
        EXPECT(gbc.readMem(0xec2e), 0x3);
        // CB 03 0005
        gbc.setState(0x6914, 0xedba, 0x3f80, 0x5d48, 0x960b, 0xd5da, 0x1, 0x1);
        gbc.writeMem(0x6914, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xedba);
        EXPECT(gbc.pc(), 0x6916);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0006
        gbc.setState(0x38ab, 0x9a58, 0x27a0, 0x8f0a, 0xff6c, 0x6e1f, 0x0, 0x0);
        gbc.writeMem(0x38ab, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x9a58);
        EXPECT(gbc.pc(), 0x38ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0007
        gbc.setState(0x5d70, 0xcdc5, 0x9140, 0x93a, 0x3b03, 0x6b17, 0x1, 0x0);
        gbc.writeMem(0x5d70, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xcdc5);
        EXPECT(gbc.pc(), 0x5d72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0008
        gbc.setState(0x4935, 0x5c42, 0x3330, 0x4d35, 0xfbce, 0xdbb4, 0x0, 0x0);
        gbc.writeMem(0x4935, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x5c42);
        EXPECT(gbc.pc(), 0x4937);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0009
        gbc.setState(0xc9df, 0xfbea, 0x51f0, 0xc47f, 0x8d78, 0x505b, 0x1, 0x0);
        gbc.writeMem(0xc9df, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xfbea);
        EXPECT(gbc.pc(), 0xc9e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9df), 0xcb);
        EXPECT(gbc.readMem(0xc9e0), 0x3);
        // CB 03 000A
        gbc.setState(0x631, 0x7c64, 0x82a0, 0x15f0, 0x88bd, 0xc79d, 0x1, 0x1);
        gbc.writeMem(0x631, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x7c64);
        EXPECT(gbc.pc(), 0x633);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 000B
        gbc.setState(0xeb71, 0x4c30, 0x5cf0, 0xb449, 0x6d40, 0x9ea7, 0x0, 0x1);
        gbc.writeMem(0xeb71, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x4c30);
        EXPECT(gbc.pc(), 0xeb73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb71), 0xcb);
        EXPECT(gbc.readMem(0xeb72), 0x3);
        // CB 03 000C
        gbc.setState(0xb587, 0x8a24, 0xb600, 0x1b93, 0x5921, 0x8e79, 0x1, 0x1);
        gbc.writeMem(0xb587, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x8a24);
        EXPECT(gbc.pc(), 0xb589);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb587), 0xcb);
        EXPECT(gbc.readMem(0xb588), 0x3);
        // CB 03 000D
        gbc.setState(0x517c, 0x5d0a, 0x7090, 0x8fae, 0x5660, 0x6dcd, 0x0, 0x0);
        gbc.writeMem(0x517c, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x5d0a);
        EXPECT(gbc.pc(), 0x517e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 000E
        gbc.setState(0x8577, 0x13f7, 0x420, 0x39eb, 0xc42e, 0xb4fb, 0x0, 0x0);
        gbc.writeMem(0x8577, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x13f7);
        EXPECT(gbc.pc(), 0x8579);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8577), 0xcb);
        EXPECT(gbc.readMem(0x8578), 0x3);
        // CB 03 000F
        gbc.setState(0xca47, 0xb312, 0xd3b0, 0x49ed, 0xa43f, 0xd6e1, 0x0, 0x1);
        gbc.writeMem(0xca47, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xb312);
        EXPECT(gbc.pc(), 0xca49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca47), 0xcb);
        EXPECT(gbc.readMem(0xca48), 0x3);
        // CB 03 0010
        gbc.setState(0x6ac6, 0x81f, 0x6360, 0x6bba, 0xd835, 0xdb05, 0x1, 0x1);
        gbc.writeMem(0x6ac6, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x81f);
        EXPECT(gbc.pc(), 0x6ac8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0011
        gbc.setState(0x1fd5, 0x80b0, 0x9500, 0xaad9, 0x742d, 0xc25e, 0x1, 0x1);
        gbc.writeMem(0x1fd5, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x80b0);
        EXPECT(gbc.pc(), 0x1fd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0012
        gbc.setState(0x5733, 0x7533, 0xc20, 0x8ab5, 0x2e9f, 0x7151, 0x0, 0x1);
        gbc.writeMem(0x5733, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x7533);
        EXPECT(gbc.pc(), 0x5735);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0013
        gbc.setState(0x1e1, 0xaa6a, 0xb770, 0x8c99, 0xfbd7, 0xb5ef, 0x0, 0x1);
        gbc.writeMem(0x1e1, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xaa6a);
        EXPECT(gbc.pc(), 0x1e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0014
        gbc.setState(0xeecc, 0xed12, 0x2680, 0x6d7c, 0x4f9d, 0x7626, 0x1, 0x1);
        gbc.writeMem(0xeecc, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xed12);
        EXPECT(gbc.pc(), 0xeece);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeecc), 0xcb);
        EXPECT(gbc.readMem(0xeecd), 0x3);
        // CB 03 0015
        gbc.setState(0x4b27, 0x7d9a, 0xae90, 0x4b8d, 0x6b9f, 0x7a15, 0x1, 0x1);
        gbc.writeMem(0x4b27, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x7d9a);
        EXPECT(gbc.pc(), 0x4b29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0016
        gbc.setState(0xcb40, 0x1a49, 0xf40, 0x9c71, 0x5d70, 0x824f, 0x1, 0x1);
        gbc.writeMem(0xcb40, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x1a49);
        EXPECT(gbc.pc(), 0xcb42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb40), 0xcb);
        EXPECT(gbc.readMem(0xcb41), 0x3);
        // CB 03 0017
        gbc.setState(0x3d76, 0xb069, 0xac90, 0x58f0, 0xf0db, 0x2a18, 0x0, 0x0);
        gbc.writeMem(0x3d76, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xb069);
        EXPECT(gbc.pc(), 0x3d78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0018
        gbc.setState(0x825, 0x6bfc, 0xcb00, 0x65fc, 0xf1a9, 0x48fa, 0x0, 0x0);
        gbc.writeMem(0x825, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x6bfc);
        EXPECT(gbc.pc(), 0x827);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0019
        gbc.setState(0x1d16, 0xb68f, 0xd580, 0xadea, 0xf4a6, 0x5bb0, 0x0, 0x0);
        gbc.writeMem(0x1d16, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xb68f);
        EXPECT(gbc.pc(), 0x1d18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 001A
        gbc.setState(0x5a9f, 0x3063, 0xd4b0, 0xb208, 0xbe2e, 0xdd27, 0x0, 0x1);
        gbc.writeMem(0x5a9f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x3063);
        EXPECT(gbc.pc(), 0x5aa1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 001B
        gbc.setState(0x10cc, 0x63b7, 0x93c0, 0x8230, 0x3c9c, 0x763a, 0x0, 0x1);
        gbc.writeMem(0x10cc, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x63b7);
        EXPECT(gbc.pc(), 0x10ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 001C
        gbc.setState(0x2ab3, 0x17eb, 0x1420, 0x616a, 0xc315, 0x54bd, 0x1, 0x0);
        gbc.writeMem(0x2ab3, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x17eb);
        EXPECT(gbc.pc(), 0x2ab5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 001D
        gbc.setState(0xd252, 0x3232, 0xa420, 0x1e20, 0xb4c1, 0x93c3, 0x1, 0x0);
        gbc.writeMem(0xd252, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x3232);
        EXPECT(gbc.pc(), 0xd254);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd252), 0xcb);
        EXPECT(gbc.readMem(0xd253), 0x3);
        // CB 03 001E
        gbc.setState(0xc9c5, 0x6311, 0xea50, 0x7b4f, 0x5345, 0x197a, 0x0, 0x1);
        gbc.writeMem(0xc9c5, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x6311);
        EXPECT(gbc.pc(), 0xc9c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9c5), 0xcb);
        EXPECT(gbc.readMem(0xc9c6), 0x3);
        // CB 03 001F
        gbc.setState(0xea64, 0xd0da, 0x2830, 0x36aa, 0x2243, 0xb218, 0x0, 0x1);
        gbc.writeMem(0xea64, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xd0da);
        EXPECT(gbc.pc(), 0xea66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea64), 0xcb);
        EXPECT(gbc.readMem(0xea65), 0x3);
        // CB 03 0020
        gbc.setState(0x74c8, 0x4761, 0x8e50, 0xab59, 0xb724, 0x6f72, 0x1, 0x0);
        gbc.writeMem(0x74c8, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x4761);
        EXPECT(gbc.pc(), 0x74ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0021
        gbc.setState(0x18af, 0xa4cd, 0xfe60, 0xc7a, 0xfdcb, 0x902f, 0x0, 0x1);
        gbc.writeMem(0x18af, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xa4cd);
        EXPECT(gbc.pc(), 0x18b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0022
        gbc.setState(0x970a, 0x2445, 0x1a60, 0xfb9a, 0x6d30, 0x9d3c, 0x1, 0x0);
        gbc.writeMem(0x970a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x2445);
        EXPECT(gbc.pc(), 0x970c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x970a), 0xcb);
        EXPECT(gbc.readMem(0x970b), 0x3);
        // CB 03 0023
        gbc.setState(0xea61, 0x91cb, 0x4fe0, 0x5056, 0xc0f7, 0xb880, 0x1, 0x0);
        gbc.writeMem(0xea61, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x91cb);
        EXPECT(gbc.pc(), 0xea63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea61), 0xcb);
        EXPECT(gbc.readMem(0xea62), 0x3);
        // CB 03 0024
        gbc.setState(0x5cd9, 0x14d5, 0x2150, 0x1c5, 0xab2b, 0xd99, 0x0, 0x0);
        gbc.writeMem(0x5cd9, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x14d5);
        EXPECT(gbc.pc(), 0x5cdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0025
        gbc.setState(0xd7ac, 0x809, 0xda40, 0xa873, 0x5e2c, 0x2699, 0x0, 0x0);
        gbc.writeMem(0xd7ac, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x809);
        EXPECT(gbc.pc(), 0xd7ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7ac), 0xcb);
        EXPECT(gbc.readMem(0xd7ad), 0x3);
        // CB 03 0026
        gbc.setState(0x9c2e, 0xc8be, 0x9010, 0x8ea3, 0x9fc1, 0x3e44, 0x1, 0x1);
        gbc.writeMem(0x9c2e, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xc8be);
        EXPECT(gbc.pc(), 0x9c30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c2e), 0xcb);
        EXPECT(gbc.readMem(0x9c2f), 0x3);
        // CB 03 0027
        gbc.setState(0x46fc, 0xabdb, 0x6cf0, 0x4f62, 0x58c3, 0x71d3, 0x0, 0x0);
        gbc.writeMem(0x46fc, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xabdb);
        EXPECT(gbc.pc(), 0x46fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0028
        gbc.setState(0x5369, 0xd1af, 0xc750, 0x4b90, 0xaf29, 0x27dc, 0x0, 0x0);
        gbc.writeMem(0x5369, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xd1af);
        EXPECT(gbc.pc(), 0x536b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0029
        gbc.setState(0x547d, 0xffdf, 0x9100, 0xc166, 0xa020, 0xd2d0, 0x0, 0x1);
        gbc.writeMem(0x547d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xffdf);
        EXPECT(gbc.pc(), 0x547f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 002A
        gbc.setState(0x7342, 0x4d36, 0xc150, 0xc282, 0x47fa, 0x96c2, 0x0, 0x0);
        gbc.writeMem(0x7342, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x4d36);
        EXPECT(gbc.pc(), 0x7344);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 002B
        gbc.setState(0x46c5, 0x84d2, 0xf370, 0x74e4, 0x1acb, 0x145, 0x0, 0x0);
        gbc.writeMem(0x46c5, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x84d2);
        EXPECT(gbc.pc(), 0x46c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 002C
        gbc.setState(0x912f, 0x90f4, 0x1fa0, 0xcb3a, 0xd212, 0x98b9, 0x0, 0x0);
        gbc.writeMem(0x912f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x90f4);
        EXPECT(gbc.pc(), 0x9131);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x912f), 0xcb);
        EXPECT(gbc.readMem(0x9130), 0x3);
        // CB 03 002D
        gbc.setState(0x2f75, 0x3ef7, 0x4e50, 0x2b38, 0xbb05, 0xb5e7, 0x0, 0x0);
        gbc.writeMem(0x2f75, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x3ef7);
        EXPECT(gbc.pc(), 0x2f77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 002E
        gbc.setState(0xa2dd, 0x1a02, 0xe900, 0x716f, 0xeb9f, 0x4669, 0x0, 0x0);
        gbc.writeMem(0xa2dd, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x1a02);
        EXPECT(gbc.pc(), 0xa2df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2dd), 0xcb);
        EXPECT(gbc.readMem(0xa2de), 0x3);
        // CB 03 002F
        gbc.setState(0xd880, 0xd9f, 0xa750, 0xf649, 0x22b1, 0xbae, 0x1, 0x1);
        gbc.writeMem(0xd880, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xd9f);
        EXPECT(gbc.pc(), 0xd882);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd880), 0xcb);
        EXPECT(gbc.readMem(0xd881), 0x3);
        // CB 03 0030
        gbc.setState(0xd9ad, 0x20b4, 0x6d40, 0xa89a, 0x1ae, 0x5f2f, 0x1, 0x0);
        gbc.writeMem(0xd9ad, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x20b4);
        EXPECT(gbc.pc(), 0xd9af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9ad), 0xcb);
        EXPECT(gbc.readMem(0xd9ae), 0x3);
        // CB 03 0031
        gbc.setState(0x4d5f, 0x4d87, 0xcb10, 0xc7a4, 0x86fe, 0x7e2f, 0x1, 0x0);
        gbc.writeMem(0x4d5f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x4d87);
        EXPECT(gbc.pc(), 0x4d61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0032
        gbc.setState(0x3c31, 0xec22, 0x2210, 0x2945, 0x31f, 0xee85, 0x0, 0x0);
        gbc.writeMem(0x3c31, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xec22);
        EXPECT(gbc.pc(), 0x3c33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0033
        gbc.setState(0x80ed, 0xafaf, 0x3b00, 0x663b, 0x4b45, 0x8333, 0x0, 0x1);
        gbc.writeMem(0x80ed, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xafaf);
        EXPECT(gbc.pc(), 0x80ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80ed), 0xcb);
        EXPECT(gbc.readMem(0x80ee), 0x3);
        // CB 03 0034
        gbc.setState(0x77c1, 0x4d3, 0xdb0, 0xcf20, 0x68f8, 0xa094, 0x0, 0x0);
        gbc.writeMem(0x77c1, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x4d3);
        EXPECT(gbc.pc(), 0x77c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0035
        gbc.setState(0xbc25, 0x17d7, 0x1bb0, 0x72df, 0x84a6, 0xdee5, 0x1, 0x1);
        gbc.writeMem(0xbc25, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x17d7);
        EXPECT(gbc.pc(), 0xbc27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc25), 0xcb);
        EXPECT(gbc.readMem(0xbc26), 0x3);
        // CB 03 0036
        gbc.setState(0xefc6, 0x42cc, 0x50a0, 0x9ea2, 0xc650, 0x9459, 0x1, 0x1);
        gbc.writeMem(0xefc6, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x42cc);
        EXPECT(gbc.pc(), 0xefc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefc6), 0xcb);
        EXPECT(gbc.readMem(0xefc7), 0x3);
        // CB 03 0037
        gbc.setState(0xd762, 0x7731, 0xf10, 0x8a21, 0x519d, 0x4d25, 0x0, 0x1);
        gbc.writeMem(0xd762, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x7731);
        EXPECT(gbc.pc(), 0xd764);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd762), 0xcb);
        EXPECT(gbc.readMem(0xd763), 0x3);
        // CB 03 0038
        gbc.setState(0x4a02, 0x5501, 0x4590, 0xe5af, 0xd335, 0x9634, 0x1, 0x1);
        gbc.writeMem(0x4a02, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x5501);
        EXPECT(gbc.pc(), 0x4a04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0039
        gbc.setState(0x75df, 0x95e9, 0x4d30, 0x7bc5, 0xed30, 0x9c36, 0x0, 0x0);
        gbc.writeMem(0x75df, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x95e9);
        EXPECT(gbc.pc(), 0x75e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 003A
        gbc.setState(0x1990, 0x176, 0xc410, 0x4c64, 0xb877, 0x2f17, 0x0, 0x0);
        gbc.writeMem(0x1990, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x176);
        EXPECT(gbc.pc(), 0x1992);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 003B
        gbc.setState(0x69e7, 0xef4e, 0xaf40, 0x83e1, 0xdd58, 0x563f, 0x1, 0x0);
        gbc.writeMem(0x69e7, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xef4e);
        EXPECT(gbc.pc(), 0x69e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 003C
        gbc.setState(0xe3ea, 0xf4c2, 0xe0b0, 0xa531, 0x14a, 0xa08e, 0x0, 0x1);
        gbc.writeMem(0xe3ea, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xf4c2);
        EXPECT(gbc.pc(), 0xe3ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3ea), 0xcb);
        EXPECT(gbc.readMem(0xe3eb), 0x3);
        // CB 03 003E
        gbc.setState(0x9a7c, 0x8ac, 0xa40, 0xfb42, 0x3d0a, 0xce0b, 0x1, 0x0);
        gbc.writeMem(0x9a7c, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x8ac);
        EXPECT(gbc.pc(), 0x9a7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a7c), 0xcb);
        EXPECT(gbc.readMem(0x9a7d), 0x3);
        // CB 03 003F
        gbc.setState(0x985e, 0xdbd6, 0x8410, 0x6080, 0x334c, 0x5abf, 0x1, 0x0);
        gbc.writeMem(0x985e, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xdbd6);
        EXPECT(gbc.pc(), 0x9860);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x985e), 0xcb);
        EXPECT(gbc.readMem(0x985f), 0x3);
        // CB 03 0040
        gbc.setState(0x6576, 0xed28, 0x1a0, 0xc292, 0x3f81, 0x8f6c, 0x0, 0x0);
        gbc.writeMem(0x6576, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xed28);
        EXPECT(gbc.pc(), 0x6578);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0041
        gbc.setState(0xe967, 0x69f7, 0x9600, 0xeb6e, 0x887c, 0x623f, 0x0, 0x0);
        gbc.writeMem(0xe967, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x69f7);
        EXPECT(gbc.pc(), 0xe969);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe967), 0xcb);
        EXPECT(gbc.readMem(0xe968), 0x3);
        // CB 03 0042
        gbc.setState(0xb6c2, 0xf3cb, 0xcb80, 0xdd7a, 0xcca3, 0x49ed, 0x1, 0x0);
        gbc.writeMem(0xb6c2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xf3cb);
        EXPECT(gbc.pc(), 0xb6c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6c2), 0xcb);
        EXPECT(gbc.readMem(0xb6c3), 0x3);
        // CB 03 0043
        gbc.setState(0x4bf, 0xbef3, 0xfbf0, 0xffe7, 0x3570, 0x4c14, 0x0, 0x0);
        gbc.writeMem(0x4bf, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xbef3);
        EXPECT(gbc.pc(), 0x4c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0044
        gbc.setState(0x710e, 0x9d94, 0xfd10, 0xd96c, 0xa324, 0x9c0d, 0x0, 0x0);
        gbc.writeMem(0x710e, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x9d94);
        EXPECT(gbc.pc(), 0x7110);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0045
        gbc.setState(0x119, 0x4661, 0x5db0, 0xa785, 0xeb86, 0xbea, 0x0, 0x0);
        gbc.writeMem(0x119, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x4661);
        EXPECT(gbc.pc(), 0x11b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0046
        gbc.setState(0xce55, 0x7baf, 0xa670, 0xf231, 0xfa4b, 0xd3a8, 0x1, 0x1);
        gbc.writeMem(0xce55, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x7baf);
        EXPECT(gbc.pc(), 0xce57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce55), 0xcb);
        EXPECT(gbc.readMem(0xce56), 0x3);
        // CB 03 0047
        gbc.setState(0x3271, 0x987c, 0x4060, 0xd3d3, 0x9efd, 0x9066, 0x1, 0x1);
        gbc.writeMem(0x3271, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x987c);
        EXPECT(gbc.pc(), 0x3273);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0048
        gbc.setState(0x98e5, 0x6586, 0xcae0, 0x2539, 0x4b6d, 0x67d7, 0x1, 0x0);
        gbc.writeMem(0x98e5, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x6586);
        EXPECT(gbc.pc(), 0x98e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98e5), 0xcb);
        EXPECT(gbc.readMem(0x98e6), 0x3);
        // CB 03 0049
        gbc.setState(0x2149, 0x2c2a, 0x6840, 0x330c, 0x197c, 0x3b33, 0x1, 0x0);
        gbc.writeMem(0x2149, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x2c2a);
        EXPECT(gbc.pc(), 0x214b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 004A
        gbc.setState(0x4b6a, 0xffac, 0x1ef0, 0x29aa, 0x16cb, 0x1136, 0x0, 0x1);
        gbc.writeMem(0x4b6a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xffac);
        EXPECT(gbc.pc(), 0x4b6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 004B
        gbc.setState(0x3809, 0x5884, 0xee50, 0x3a02, 0xfff4, 0x7c5a, 0x1, 0x0);
        gbc.writeMem(0x3809, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x5884);
        EXPECT(gbc.pc(), 0x380b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 004C
        gbc.setState(0xd0f2, 0xe2e4, 0x91e0, 0x3191, 0x2870, 0x7131, 0x0, 0x0);
        gbc.writeMem(0xd0f2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xe2e4);
        EXPECT(gbc.pc(), 0xd0f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0f2), 0xcb);
        EXPECT(gbc.readMem(0xd0f3), 0x3);
        // CB 03 004D
        gbc.setState(0xccab, 0xc4a3, 0xe320, 0x7144, 0xc62, 0x5cd, 0x0, 0x1);
        gbc.writeMem(0xccab, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xc4a3);
        EXPECT(gbc.pc(), 0xccad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccab), 0xcb);
        EXPECT(gbc.readMem(0xccac), 0x3);
        // CB 03 004E
        gbc.setState(0xb3a5, 0xad68, 0x8e30, 0x4bd1, 0x8e65, 0x6677, 0x1, 0x0);
        gbc.writeMem(0xb3a5, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xad68);
        EXPECT(gbc.pc(), 0xb3a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3a5), 0xcb);
        EXPECT(gbc.readMem(0xb3a6), 0x3);
        // CB 03 004F
        gbc.setState(0xbd68, 0xd32f, 0x2a90, 0xb588, 0xfc67, 0x4b27, 0x0, 0x0);
        gbc.writeMem(0xbd68, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xd32f);
        EXPECT(gbc.pc(), 0xbd6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd68), 0xcb);
        EXPECT(gbc.readMem(0xbd69), 0x3);
        // CB 03 0050
        gbc.setState(0x9dea, 0xc259, 0xdc90, 0x11e4, 0xbac7, 0x1267, 0x1, 0x0);
        gbc.writeMem(0x9dea, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xc259);
        EXPECT(gbc.pc(), 0x9dec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dea), 0xcb);
        EXPECT(gbc.readMem(0x9deb), 0x3);
        // CB 03 0051
        gbc.setState(0xe1c3, 0x4177, 0x8ec0, 0x6feb, 0x7d69, 0x35db, 0x1, 0x1);
        gbc.writeMem(0xe1c3, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x4177);
        EXPECT(gbc.pc(), 0xe1c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1c3), 0xcb);
        EXPECT(gbc.readMem(0xe1c4), 0x3);
        // CB 03 0052
        gbc.setState(0x1478, 0x5ae, 0x3b50, 0x1cfa, 0x88c9, 0x1b5b, 0x1, 0x1);
        gbc.writeMem(0x1478, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x5ae);
        EXPECT(gbc.pc(), 0x147a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0053
        gbc.setState(0xb3d5, 0x1f5d, 0xc4a0, 0x200, 0x156c, 0x48d8, 0x0, 0x1);
        gbc.writeMem(0xb3d5, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x1f5d);
        EXPECT(gbc.pc(), 0xb3d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3d5), 0xcb);
        EXPECT(gbc.readMem(0xb3d6), 0x3);
        // CB 03 0054
        gbc.setState(0x1c69, 0xa8a3, 0xd5b0, 0xb2b0, 0xd988, 0x3d9f, 0x1, 0x0);
        gbc.writeMem(0x1c69, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xa8a3);
        EXPECT(gbc.pc(), 0x1c6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0055
        gbc.setState(0x2b77, 0xe9a9, 0xd230, 0x2651, 0x49e3, 0xbadb, 0x0, 0x0);
        gbc.writeMem(0x2b77, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xe9a9);
        EXPECT(gbc.pc(), 0x2b79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0057
        gbc.setState(0x18e2, 0x306c, 0xa4e0, 0xdc65, 0x32f8, 0xdc6c, 0x0, 0x1);
        gbc.writeMem(0x18e2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x306c);
        EXPECT(gbc.pc(), 0x18e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0058
        gbc.setState(0x6a0d, 0xc577, 0x38b0, 0x472f, 0x2313, 0xad26, 0x1, 0x1);
        gbc.writeMem(0x6a0d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xc577);
        EXPECT(gbc.pc(), 0x6a0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0059
        gbc.setState(0x6570, 0x5a0c, 0xcc30, 0x31cd, 0xded2, 0xe03a, 0x1, 0x0);
        gbc.writeMem(0x6570, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x5a0c);
        EXPECT(gbc.pc(), 0x6572);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 005A
        gbc.setState(0xaa5f, 0xee52, 0x7dd0, 0xef7, 0x6882, 0x9075, 0x0, 0x1);
        gbc.writeMem(0xaa5f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xee52);
        EXPECT(gbc.pc(), 0xaa61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa5f), 0xcb);
        EXPECT(gbc.readMem(0xaa60), 0x3);
        // CB 03 005B
        gbc.setState(0x7cee, 0xf003, 0x7320, 0xad6b, 0x2e32, 0x592e, 0x0, 0x1);
        gbc.writeMem(0x7cee, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xf003);
        EXPECT(gbc.pc(), 0x7cf0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 005C
        gbc.setState(0x2db3, 0x2771, 0x3a80, 0x7dd4, 0x838e, 0x2eda, 0x1, 0x1);
        gbc.writeMem(0x2db3, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x2771);
        EXPECT(gbc.pc(), 0x2db5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 005D
        gbc.setState(0x19c3, 0x2f9, 0x28f0, 0x6deb, 0xde5c, 0xa08b, 0x1, 0x1);
        gbc.writeMem(0x19c3, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x2f9);
        EXPECT(gbc.pc(), 0x19c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 005E
        gbc.setState(0x8762, 0x1cb, 0xa5b0, 0xa456, 0x84e8, 0x2d87, 0x0, 0x0);
        gbc.writeMem(0x8762, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x1cb);
        EXPECT(gbc.pc(), 0x8764);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8762), 0xcb);
        EXPECT(gbc.readMem(0x8763), 0x3);
        // CB 03 005F
        gbc.setState(0x2b60, 0x944, 0x8e60, 0x8a57, 0x3fdb, 0x6896, 0x0, 0x1);
        gbc.writeMem(0x2b60, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x944);
        EXPECT(gbc.pc(), 0x2b62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0060
        gbc.setState(0xc985, 0x6b06, 0x5500, 0x5fd2, 0x95db, 0x54a5, 0x0, 0x0);
        gbc.writeMem(0xc985, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x6b06);
        EXPECT(gbc.pc(), 0xc987);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc985), 0xcb);
        EXPECT(gbc.readMem(0xc986), 0x3);
        // CB 03 0061
        gbc.setState(0x3621, 0xa289, 0xf0, 0xced0, 0x1728, 0x760d, 0x0, 0x1);
        gbc.writeMem(0x3621, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xa289);
        EXPECT(gbc.pc(), 0x3623);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0062
        gbc.setState(0xcdca, 0x20eb, 0xc340, 0x4d92, 0x7e49, 0x1c9b, 0x1, 0x0);
        gbc.writeMem(0xcdca, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x20eb);
        EXPECT(gbc.pc(), 0xcdcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdca), 0xcb);
        EXPECT(gbc.readMem(0xcdcb), 0x3);
        // CB 03 0063
        gbc.setState(0x7783, 0xa83e, 0x9550, 0x376a, 0xf039, 0x5157, 0x0, 0x1);
        gbc.writeMem(0x7783, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xa83e);
        EXPECT(gbc.pc(), 0x7785);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0064
        gbc.setState(0xeec, 0xef05, 0xc230, 0xb8e, 0x632f, 0xa7d8, 0x0, 0x0);
        gbc.writeMem(0xeec, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xef05);
        EXPECT(gbc.pc(), 0xeee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0065
        gbc.setState(0x84c1, 0xa1a7, 0xaa60, 0x9a6a, 0x9794, 0x3c54, 0x1, 0x1);
        gbc.writeMem(0x84c1, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xa1a7);
        EXPECT(gbc.pc(), 0x84c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84c1), 0xcb);
        EXPECT(gbc.readMem(0x84c2), 0x3);
        // CB 03 0066
        gbc.setState(0xb8e0, 0xcded, 0xe080, 0x9f32, 0x787, 0x98b2, 0x1, 0x0);
        gbc.writeMem(0xb8e0, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xcded);
        EXPECT(gbc.pc(), 0xb8e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8e0), 0xcb);
        EXPECT(gbc.readMem(0xb8e1), 0x3);
        // CB 03 0067
        gbc.setState(0x3a98, 0xf9fb, 0xd550, 0xa14a, 0xf5ed, 0xd862, 0x0, 0x1);
        gbc.writeMem(0x3a98, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xf9fb);
        EXPECT(gbc.pc(), 0x3a9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0068
        gbc.setState(0xe80b, 0xeec0, 0x3760, 0xc85, 0x9bd2, 0xa442, 0x0, 0x0);
        gbc.writeMem(0xe80b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xeec0);
        EXPECT(gbc.pc(), 0xe80d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe80b), 0xcb);
        EXPECT(gbc.readMem(0xe80c), 0x3);
        // CB 03 0069
        gbc.setState(0x6292, 0x670e, 0x9f60, 0x1a62, 0x10a7, 0x4a69, 0x1, 0x0);
        gbc.writeMem(0x6292, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x670e);
        EXPECT(gbc.pc(), 0x6294);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 006A
        gbc.setState(0x329c, 0x70f1, 0x2900, 0xcc9b, 0x4ca5, 0x79d9, 0x1, 0x1);
        gbc.writeMem(0x329c, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x70f1);
        EXPECT(gbc.pc(), 0x329e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 006B
        gbc.setState(0xa2a0, 0x5b97, 0xbd90, 0xd67f, 0xb08f, 0xbd3c, 0x0, 0x1);
        gbc.writeMem(0xa2a0, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x5b97);
        EXPECT(gbc.pc(), 0xa2a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2a0), 0xcb);
        EXPECT(gbc.readMem(0xa2a1), 0x3);
        // CB 03 006D
        gbc.setState(0xf9a, 0x392b, 0x9e60, 0x93d2, 0xbf63, 0xd9b3, 0x0, 0x0);
        gbc.writeMem(0xf9a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x392b);
        EXPECT(gbc.pc(), 0xf9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 006E
        gbc.setState(0x4db1, 0xfd0b, 0x8a60, 0x9f6c, 0x19d1, 0x5f08, 0x0, 0x0);
        gbc.writeMem(0x4db1, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xfd0b);
        EXPECT(gbc.pc(), 0x4db3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 006F
        gbc.setState(0x364d, 0xb040, 0xb80, 0x4adc, 0x8e12, 0x3bdc, 0x1, 0x0);
        gbc.writeMem(0x364d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xb040);
        EXPECT(gbc.pc(), 0x364f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0070
        gbc.setState(0x23cf, 0x5cb3, 0xc910, 0x8cad, 0x9e2a, 0xc279, 0x1, 0x1);
        gbc.writeMem(0x23cf, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x5cb3);
        EXPECT(gbc.pc(), 0x23d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0071
        gbc.setState(0x10aa, 0xb11c, 0xd240, 0xcacd, 0xa207, 0x949, 0x1, 0x0);
        gbc.writeMem(0x10aa, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xb11c);
        EXPECT(gbc.pc(), 0x10ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0072
        gbc.setState(0xb55, 0xb1c3, 0xd6e0, 0x107f, 0xb994, 0x2a90, 0x1, 0x1);
        gbc.writeMem(0xb55, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xb1c3);
        EXPECT(gbc.pc(), 0xb57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0073
        gbc.setState(0x5cd1, 0x99d6, 0x1220, 0xa5ad, 0xf8e9, 0x8f6f, 0x1, 0x0);
        gbc.writeMem(0x5cd1, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x99d6);
        EXPECT(gbc.pc(), 0x5cd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0075
        gbc.setState(0x798, 0x611, 0xacd0, 0xb2df, 0x8911, 0x3e0e, 0x1, 0x1);
        gbc.writeMem(0x798, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x611);
        EXPECT(gbc.pc(), 0x79a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0076
        gbc.setState(0x570f, 0x6324, 0x420, 0xec2d, 0x1c04, 0x2d85, 0x0, 0x0);
        gbc.writeMem(0x570f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x6324);
        EXPECT(gbc.pc(), 0x5711);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0077
        gbc.setState(0x4971, 0xcf7c, 0x9de0, 0xba2a, 0xa261, 0x82ea, 0x0, 0x0);
        gbc.writeMem(0x4971, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xcf7c);
        EXPECT(gbc.pc(), 0x4973);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0078
        gbc.setState(0xbe89, 0x1806, 0x1440, 0x1102, 0xad20, 0x775a, 0x1, 0x1);
        gbc.writeMem(0xbe89, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x1806);
        EXPECT(gbc.pc(), 0xbe8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe89), 0xcb);
        EXPECT(gbc.readMem(0xbe8a), 0x3);
        // CB 03 0079
        gbc.setState(0x5c47, 0x40e7, 0xd4c0, 0x4e04, 0x587f, 0xc9b3, 0x1, 0x1);
        gbc.writeMem(0x5c47, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x40e7);
        EXPECT(gbc.pc(), 0x5c49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 007A
        gbc.setState(0x3467, 0x4047, 0x6190, 0x958f, 0x2c7, 0x8a27, 0x1, 0x1);
        gbc.writeMem(0x3467, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x4047);
        EXPECT(gbc.pc(), 0x3469);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 007B
        gbc.setState(0x30f7, 0xb45b, 0x4270, 0x8d71, 0x5970, 0x1da3, 0x1, 0x0);
        gbc.writeMem(0x30f7, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xb45b);
        EXPECT(gbc.pc(), 0x30f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 007C
        gbc.setState(0x17f8, 0x53dd, 0x460, 0x376c, 0xa4c6, 0x7dd3, 0x1, 0x1);
        gbc.writeMem(0x17f8, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x53dd);
        EXPECT(gbc.pc(), 0x17fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 007D
        gbc.setState(0x5a6e, 0x4a26, 0xc0f0, 0xe345, 0xa955, 0x6711, 0x0, 0x1);
        gbc.writeMem(0x5a6e, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x4a26);
        EXPECT(gbc.pc(), 0x5a70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 007E
        gbc.setState(0x1c0a, 0xc053, 0xd150, 0x9021, 0x8e0e, 0xe657, 0x1, 0x1);
        gbc.writeMem(0x1c0a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xc053);
        EXPECT(gbc.pc(), 0x1c0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 007F
        gbc.setState(0x3a9c, 0x9f53, 0xb20, 0x5955, 0xcb6e, 0x50ec, 0x1, 0x1);
        gbc.writeMem(0x3a9c, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x9f53);
        EXPECT(gbc.pc(), 0x3a9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0081
        gbc.setState(0x765, 0x2709, 0xa5e0, 0xcaf, 0x429b, 0xfc32, 0x1, 0x0);
        gbc.writeMem(0x765, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x2709);
        EXPECT(gbc.pc(), 0x767);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0082
        gbc.setState(0xb643, 0x2fe7, 0xb30, 0x37fe, 0xf487, 0x265b, 0x0, 0x0);
        gbc.writeMem(0xb643, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x2fe7);
        EXPECT(gbc.pc(), 0xb645);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb643), 0xcb);
        EXPECT(gbc.readMem(0xb644), 0x3);
        // CB 03 0083
        gbc.setState(0xe7a8, 0x1425, 0x2570, 0x7e26, 0x45de, 0xfd8c, 0x0, 0x0);
        gbc.writeMem(0xe7a8, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x1425);
        EXPECT(gbc.pc(), 0xe7aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7a8), 0xcb);
        EXPECT(gbc.readMem(0xe7a9), 0x3);
        // CB 03 0084
        gbc.setState(0x3013, 0x29fd, 0xf690, 0xf844, 0x8729, 0xb097, 0x0, 0x1);
        gbc.writeMem(0x3013, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x29fd);
        EXPECT(gbc.pc(), 0x3015);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0085
        gbc.setState(0x6c92, 0x23e9, 0x6330, 0x8919, 0x1984, 0xa6e5, 0x1, 0x1);
        gbc.writeMem(0x6c92, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x23e9);
        EXPECT(gbc.pc(), 0x6c94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0086
        gbc.setState(0x64ba, 0xc3e8, 0x980, 0x9be3, 0x70ca, 0xee22, 0x1, 0x1);
        gbc.writeMem(0x64ba, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xc3e8);
        EXPECT(gbc.pc(), 0x64bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0088
        gbc.setState(0x3b18, 0x31b, 0x6ab0, 0xb7d1, 0xeea7, 0xd737, 0x0, 0x1);
        gbc.writeMem(0x3b18, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x31b);
        EXPECT(gbc.pc(), 0x3b1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0089
        gbc.setState(0xbeaa, 0xfd89, 0xc50, 0x6bc5, 0xfd81, 0x68b3, 0x1, 0x0);
        gbc.writeMem(0xbeaa, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xfd89);
        EXPECT(gbc.pc(), 0xbeac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbeaa), 0xcb);
        EXPECT(gbc.readMem(0xbeab), 0x3);
        // CB 03 008A
        gbc.setState(0xd1da, 0x6a8, 0xc810, 0x897f, 0xe7ba, 0xa30d, 0x0, 0x1);
        gbc.writeMem(0xd1da, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x6a8);
        EXPECT(gbc.pc(), 0xd1dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1da), 0xcb);
        EXPECT(gbc.readMem(0xd1db), 0x3);
        // CB 03 008B
        gbc.setState(0x337d, 0x6b21, 0x6ef0, 0xf264, 0x36c3, 0xa0be, 0x0, 0x1);
        gbc.writeMem(0x337d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x6b21);
        EXPECT(gbc.pc(), 0x337f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 008C
        gbc.setState(0x155, 0xc605, 0x7720, 0x1dac, 0xf428, 0xcaa6, 0x1, 0x0);
        gbc.writeMem(0x155, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xc605);
        EXPECT(gbc.pc(), 0x157);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 008D
        gbc.setState(0xb526, 0x19ca, 0x6790, 0xe481, 0x920a, 0x7182, 0x1, 0x0);
        gbc.writeMem(0xb526, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x19ca);
        EXPECT(gbc.pc(), 0xb528);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb526), 0xcb);
        EXPECT(gbc.readMem(0xb527), 0x3);
        // CB 03 008E
        gbc.setState(0x5581, 0x5a6d, 0xf500, 0x8aef, 0x666b, 0x75e2, 0x1, 0x0);
        gbc.writeMem(0x5581, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x5a6d);
        EXPECT(gbc.pc(), 0x5583);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0090
        gbc.setState(0xa3de, 0x5526, 0xaff0, 0xed42, 0x269b, 0x8189, 0x0, 0x1);
        gbc.writeMem(0xa3de, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x5526);
        EXPECT(gbc.pc(), 0xa3e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3de), 0xcb);
        EXPECT(gbc.readMem(0xa3df), 0x3);
        // CB 03 0091
        gbc.setState(0x9bed, 0x2580, 0x4c80, 0xa200, 0x8412, 0x79d9, 0x1, 0x0);
        gbc.writeMem(0x9bed, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x2580);
        EXPECT(gbc.pc(), 0x9bef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bed), 0xcb);
        EXPECT(gbc.readMem(0x9bee), 0x3);
        // CB 03 0092
        gbc.setState(0x3aaf, 0xd8d4, 0x2b20, 0x6443, 0x35a7, 0xf5e0, 0x1, 0x1);
        gbc.writeMem(0x3aaf, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xd8d4);
        EXPECT(gbc.pc(), 0x3ab1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0093
        gbc.setState(0x65e, 0xa6af, 0x6dd0, 0x4128, 0x1ae3, 0xcd17, 0x0, 0x1);
        gbc.writeMem(0x65e, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xa6af);
        EXPECT(gbc.pc(), 0x660);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0094
        gbc.setState(0xbda3, 0xfd6d, 0x4030, 0xaac, 0xaa28, 0xb75a, 0x0, 0x0);
        gbc.writeMem(0xbda3, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xfd6d);
        EXPECT(gbc.pc(), 0xbda5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbda3), 0xcb);
        EXPECT(gbc.readMem(0xbda4), 0x3);
        // CB 03 0095
        gbc.setState(0x945c, 0xe828, 0x6070, 0xda9f, 0xce30, 0x5e8, 0x0, 0x0);
        gbc.writeMem(0x945c, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xe828);
        EXPECT(gbc.pc(), 0x945e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x945c), 0xcb);
        EXPECT(gbc.readMem(0x945d), 0x3);
        // CB 03 0096
        gbc.setState(0xbcee, 0xa519, 0x13d0, 0xaac8, 0xf690, 0xf955, 0x0, 0x0);
        gbc.writeMem(0xbcee, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xa519);
        EXPECT(gbc.pc(), 0xbcf0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcee), 0xcb);
        EXPECT(gbc.readMem(0xbcef), 0x3);
        // CB 03 0097
        gbc.setState(0x3d4e, 0x3d5e, 0xb5c0, 0x5d59, 0xefd9, 0x4b30, 0x0, 0x1);
        gbc.writeMem(0x3d4e, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x3d5e);
        EXPECT(gbc.pc(), 0x3d50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0099
        gbc.setState(0x69c0, 0x7858, 0x8c0, 0x6236, 0x121d, 0xdc7c, 0x1, 0x1);
        gbc.writeMem(0x69c0, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x7858);
        EXPECT(gbc.pc(), 0x69c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 009A
        gbc.setState(0x3697, 0x3356, 0xed0, 0xd6fb, 0x5e55, 0xf7c1, 0x0, 0x1);
        gbc.writeMem(0x3697, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x3356);
        EXPECT(gbc.pc(), 0x3699);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 009C
        gbc.setState(0x5f46, 0x6b18, 0x5eb0, 0x7257, 0x5723, 0x5c60, 0x1, 0x0);
        gbc.writeMem(0x5f46, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x6b18);
        EXPECT(gbc.pc(), 0x5f48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 009D
        gbc.setState(0x8ebe, 0x11d8, 0xbcc0, 0x20f1, 0x2c7f, 0x37a6, 0x1, 0x0);
        gbc.writeMem(0x8ebe, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x11d8);
        EXPECT(gbc.pc(), 0x8ec0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ebe), 0xcb);
        EXPECT(gbc.readMem(0x8ebf), 0x3);
        // CB 03 009E
        gbc.setState(0xc1c2, 0x92e0, 0x5140, 0xd7f1, 0x3e75, 0x73b2, 0x0, 0x0);
        gbc.writeMem(0xc1c2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x92e0);
        EXPECT(gbc.pc(), 0xc1c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1c2), 0xcb);
        EXPECT(gbc.readMem(0xc1c3), 0x3);
        // CB 03 009F
        gbc.setState(0x9819, 0x26c8, 0xcbe0, 0x6aa7, 0x1bb7, 0x40, 0x0, 0x1);
        gbc.writeMem(0x9819, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x26c8);
        EXPECT(gbc.pc(), 0x981b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9819), 0xcb);
        EXPECT(gbc.readMem(0x981a), 0x3);
        // CB 03 00A0
        gbc.setState(0xb336, 0x4289, 0xbaa0, 0x271b, 0x9f57, 0x76c6, 0x0, 0x0);
        gbc.writeMem(0xb336, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x4289);
        EXPECT(gbc.pc(), 0xb338);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb336), 0xcb);
        EXPECT(gbc.readMem(0xb337), 0x3);
        // CB 03 00A1
        gbc.setState(0x1048, 0x5f96, 0x2ec0, 0x10cc, 0x50e1, 0x30e1, 0x0, 0x1);
        gbc.writeMem(0x1048, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x5f96);
        EXPECT(gbc.pc(), 0x104a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 00A2
        gbc.setState(0xd5af, 0xe8d3, 0x6760, 0xe108, 0x6d89, 0xd475, 0x1, 0x0);
        gbc.writeMem(0xd5af, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xe8d3);
        EXPECT(gbc.pc(), 0xd5b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5af), 0xcb);
        EXPECT(gbc.readMem(0xd5b0), 0x3);
        // CB 03 00A3
        gbc.setState(0xa9ff, 0x7920, 0x6ec0, 0x2069, 0x8c8a, 0xc537, 0x0, 0x1);
        gbc.writeMem(0xa9ff, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x7920);
        EXPECT(gbc.pc(), 0xaa01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9ff), 0xcb);
        EXPECT(gbc.readMem(0xaa00), 0x3);
        // CB 03 00A4
        gbc.setState(0x847f, 0x6bfa, 0x7bb0, 0x258d, 0x4153, 0xd783, 0x0, 0x1);
        gbc.writeMem(0x847f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x6bfa);
        EXPECT(gbc.pc(), 0x8481);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x847f), 0xcb);
        EXPECT(gbc.readMem(0x8480), 0x3);
        // CB 03 00A5
        gbc.setState(0xbfe7, 0x6870, 0xe590, 0x58b5, 0xd7b8, 0x1c87, 0x0, 0x1);
        gbc.writeMem(0xbfe7, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x6870);
        EXPECT(gbc.pc(), 0xbfe9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfe7), 0xcb);
        EXPECT(gbc.readMem(0xbfe8), 0x3);
        // CB 03 00A6
        gbc.setState(0xa05b, 0x89d, 0x9fd0, 0xb918, 0x12e6, 0x718c, 0x1, 0x0);
        gbc.writeMem(0xa05b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x89d);
        EXPECT(gbc.pc(), 0xa05d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa05b), 0xcb);
        EXPECT(gbc.readMem(0xa05c), 0x3);
        // CB 03 00A7
        gbc.setState(0x1892, 0x1415, 0x4530, 0xcd02, 0x5508, 0x52dd, 0x0, 0x1);
        gbc.writeMem(0x1892, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x1415);
        EXPECT(gbc.pc(), 0x1894);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 00A8
        gbc.setState(0x469c, 0xe1e1, 0xd1b0, 0x364b, 0xf0aa, 0xcff0, 0x1, 0x0);
        gbc.writeMem(0x469c, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xe1e1);
        EXPECT(gbc.pc(), 0x469e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 00A9
        gbc.setState(0xd86b, 0x9e50, 0x4360, 0x4c05, 0x68a0, 0x8343, 0x0, 0x0);
        gbc.writeMem(0xd86b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x9e50);
        EXPECT(gbc.pc(), 0xd86d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd86b), 0xcb);
        EXPECT(gbc.readMem(0xd86c), 0x3);
        // CB 03 00AA
        gbc.setState(0x1698, 0x3413, 0x2740, 0x57a0, 0x6688, 0xb210, 0x1, 0x1);
        gbc.writeMem(0x1698, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x3413);
        EXPECT(gbc.pc(), 0x169a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 00AB
        gbc.setState(0x97b, 0x2f5c, 0xbf60, 0xadb1, 0x73cc, 0x524e, 0x0, 0x1);
        gbc.writeMem(0x97b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x2f5c);
        EXPECT(gbc.pc(), 0x97d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 00AC
        gbc.setState(0x2b31, 0x8715, 0x3810, 0x3288, 0xae4a, 0x7d03, 0x1, 0x0);
        gbc.writeMem(0x2b31, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x8715);
        EXPECT(gbc.pc(), 0x2b33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 00AE
        gbc.setState(0xdfa8, 0xb70f, 0x1540, 0x6e75, 0x2411, 0xa609, 0x0, 0x0);
        gbc.writeMem(0xdfa8, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xb70f);
        EXPECT(gbc.pc(), 0xdfaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfa8), 0xcb);
        EXPECT(gbc.readMem(0xdfa9), 0x3);
        // CB 03 00B0
        gbc.setState(0xca33, 0xe6f2, 0x7ae0, 0x195b, 0x7b72, 0x7935, 0x0, 0x0);
        gbc.writeMem(0xca33, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xe6f2);
        EXPECT(gbc.pc(), 0xca35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca33), 0xcb);
        EXPECT(gbc.readMem(0xca34), 0x3);
        // CB 03 00B1
        gbc.setState(0xc3a7, 0x4eb7, 0xba70, 0x2301, 0x1782, 0xdf8d, 0x0, 0x1);
        gbc.writeMem(0xc3a7, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x4eb7);
        EXPECT(gbc.pc(), 0xc3a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3a7), 0xcb);
        EXPECT(gbc.readMem(0xc3a8), 0x3);
        // CB 03 00B2
        gbc.setState(0x83c1, 0xca6, 0xb5d0, 0x2a7d, 0x1fe0, 0x33fb, 0x1, 0x0);
        gbc.writeMem(0x83c1, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xca6);
        EXPECT(gbc.pc(), 0x83c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83c1), 0xcb);
        EXPECT(gbc.readMem(0x83c2), 0x3);
        // CB 03 00B3
        gbc.setState(0xd135, 0xa0d0, 0x2240, 0x673e, 0xbf17, 0x5830, 0x0, 0x0);
        gbc.writeMem(0xd135, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xa0d0);
        EXPECT(gbc.pc(), 0xd137);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd135), 0xcb);
        EXPECT(gbc.readMem(0xd136), 0x3);
        // CB 03 00B4
        gbc.setState(0x1367, 0xf4a4, 0x4550, 0xc819, 0xc067, 0x337f, 0x0, 0x1);
        gbc.writeMem(0x1367, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xf4a4);
        EXPECT(gbc.pc(), 0x1369);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 00B5
        gbc.setState(0x3ecc, 0x81f8, 0x89a0, 0x5f12, 0x6dd5, 0x78c0, 0x1, 0x0);
        gbc.writeMem(0x3ecc, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x81f8);
        EXPECT(gbc.pc(), 0x3ece);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 00B7
        gbc.setState(0x6aa4, 0xb79, 0x43a0, 0x56ed, 0x9e6, 0xb849, 0x0, 0x0);
        gbc.writeMem(0x6aa4, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xb79);
        EXPECT(gbc.pc(), 0x6aa6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 00B9
        gbc.setState(0xbc10, 0xc68c, 0xf310, 0xa991, 0x944c, 0x4134, 0x0, 0x1);
        gbc.writeMem(0xbc10, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xc68c);
        EXPECT(gbc.pc(), 0xbc12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc10), 0xcb);
        EXPECT(gbc.readMem(0xbc11), 0x3);
        // CB 03 00BA
        gbc.setState(0x593d, 0x96b6, 0xf110, 0xf71f, 0x44d, 0x5de7, 0x1, 0x0);
        gbc.writeMem(0x593d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x96b6);
        EXPECT(gbc.pc(), 0x593f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 00BB
        gbc.setState(0x4879, 0xb0ff, 0x6450, 0xec89, 0x2c0d, 0xbf8f, 0x1, 0x1);
        gbc.writeMem(0x4879, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xb0ff);
        EXPECT(gbc.pc(), 0x487b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 00BC
        gbc.setState(0x960f, 0x906a, 0xb4a0, 0x2344, 0xbe14, 0xf21e, 0x1, 0x0);
        gbc.writeMem(0x960f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x906a);
        EXPECT(gbc.pc(), 0x9611);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x960f), 0xcb);
        EXPECT(gbc.readMem(0x9610), 0x3);
        // CB 03 00BD
        gbc.setState(0x16e2, 0x9254, 0x6820, 0xc9d, 0x94da, 0xa992, 0x1, 0x1);
        gbc.writeMem(0x16e2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x9254);
        EXPECT(gbc.pc(), 0x16e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 00BE
        gbc.setState(0xd94c, 0x19d6, 0xed20, 0xbd1a, 0x39f8, 0x59b, 0x1, 0x0);
        gbc.writeMem(0xd94c, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x19d6);
        EXPECT(gbc.pc(), 0xd94e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd94c), 0xcb);
        EXPECT(gbc.readMem(0xd94d), 0x3);
        // CB 03 00BF
        gbc.setState(0x9159, 0x9bef, 0xf830, 0xe0a6, 0xada4, 0xff8e, 0x1, 0x0);
        gbc.writeMem(0x9159, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x9bef);
        EXPECT(gbc.pc(), 0x915b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9159), 0xcb);
        EXPECT(gbc.readMem(0x915a), 0x3);
        // CB 03 00C0
        gbc.setState(0x949, 0x9ff6, 0x6740, 0xfc3b, 0x4813, 0xa369, 0x1, 0x0);
        gbc.writeMem(0x949, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x9ff6);
        EXPECT(gbc.pc(), 0x94b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 00C1
        gbc.setState(0xc0a3, 0x34c0, 0x640, 0xcd40, 0xe069, 0x2702, 0x1, 0x1);
        gbc.writeMem(0xc0a3, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x34c0);
        EXPECT(gbc.pc(), 0xc0a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0a3), 0xcb);
        EXPECT(gbc.readMem(0xc0a4), 0x3);
        // CB 03 00C2
        gbc.setState(0x7389, 0xfc27, 0x5d70, 0x4361, 0xd730, 0x7b01, 0x0, 0x0);
        gbc.writeMem(0x7389, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xfc27);
        EXPECT(gbc.pc(), 0x738b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 00C3
        gbc.setState(0x8da4, 0xe26e, 0x4ec0, 0x5f08, 0x1d90, 0x5849, 0x0, 0x1);
        gbc.writeMem(0x8da4, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xe26e);
        EXPECT(gbc.pc(), 0x8da6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8da4), 0xcb);
        EXPECT(gbc.readMem(0x8da5), 0x3);
        // CB 03 00C4
        gbc.setState(0xdf1d, 0x42f6, 0xc3f0, 0x1b1e, 0x9fcd, 0x2b8d, 0x1, 0x0);
        gbc.writeMem(0xdf1d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x42f6);
        EXPECT(gbc.pc(), 0xdf1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf1d), 0xcb);
        EXPECT(gbc.readMem(0xdf1e), 0x3);
        // CB 03 00C5
        gbc.setState(0x694d, 0xe35c, 0x2e70, 0x68a2, 0x113f, 0xa3a5, 0x0, 0x0);
        gbc.writeMem(0x694d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xe35c);
        EXPECT(gbc.pc(), 0x694f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 00C6
        gbc.setState(0x1a42, 0x91d1, 0xaee0, 0x9ada, 0xd25b, 0xb60b, 0x1, 0x1);
        gbc.writeMem(0x1a42, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x91d1);
        EXPECT(gbc.pc(), 0x1a44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 00C7
        gbc.setState(0x2449, 0x88b0, 0xd510, 0xaf71, 0xcccd, 0x9424, 0x1, 0x0);
        gbc.writeMem(0x2449, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x88b0);
        EXPECT(gbc.pc(), 0x244b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 00C8
        gbc.setState(0x1bbe, 0xe769, 0xe8f0, 0xc7d5, 0xe60e, 0x1c44, 0x1, 0x1);
        gbc.writeMem(0x1bbe, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xe769);
        EXPECT(gbc.pc(), 0x1bc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 00C9
        gbc.setState(0x7fc5, 0xdba, 0xb150, 0x738, 0xc45f, 0xd7ae, 0x1, 0x0);
        gbc.writeMem(0x7fc5, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xdba);
        EXPECT(gbc.pc(), 0x7fc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 00CA
        gbc.setState(0x279e, 0xcf55, 0x2380, 0x1ddd, 0x52bf, 0xec1c, 0x0, 0x0);
        gbc.writeMem(0x279e, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xcf55);
        EXPECT(gbc.pc(), 0x27a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 00CB
        gbc.setState(0x6729, 0x1848, 0x8170, 0x8347, 0x20ad, 0x2c16, 0x0, 0x1);
        gbc.writeMem(0x6729, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x1848);
        EXPECT(gbc.pc(), 0x672b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 00CC
        gbc.setState(0x44ef, 0x1527, 0x210, 0xefa9, 0x31f5, 0x94d7, 0x0, 0x0);
        gbc.writeMem(0x44ef, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x1527);
        EXPECT(gbc.pc(), 0x44f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 00CD
        gbc.setState(0x4b50, 0x8a41, 0x5390, 0xdd8c, 0xbba0, 0x6435, 0x0, 0x0);
        gbc.writeMem(0x4b50, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x8a41);
        EXPECT(gbc.pc(), 0x4b52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 00CE
        gbc.setState(0xc09, 0x215c, 0x7e30, 0x1c12, 0xf93b, 0x7bb3, 0x0, 0x0);
        gbc.writeMem(0xc09, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x215c);
        EXPECT(gbc.pc(), 0xc0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 00CF
        gbc.setState(0x9af2, 0xf23, 0x2290, 0xbaf8, 0xa33a, 0x72c8, 0x1, 0x1);
        gbc.writeMem(0x9af2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xf23);
        EXPECT(gbc.pc(), 0x9af4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9af2), 0xcb);
        EXPECT(gbc.readMem(0x9af3), 0x3);
        // CB 03 00D0
        gbc.setState(0xba05, 0x4901, 0x1ff0, 0x49a3, 0xc43, 0x8dda, 0x1, 0x1);
        gbc.writeMem(0xba05, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x4901);
        EXPECT(gbc.pc(), 0xba07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba05), 0xcb);
        EXPECT(gbc.readMem(0xba06), 0x3);
        // CB 03 00D1
        gbc.setState(0x595f, 0xd8b1, 0x51c0, 0x1526, 0x8a5f, 0x8c92, 0x0, 0x0);
        gbc.writeMem(0x595f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xd8b1);
        EXPECT(gbc.pc(), 0x5961);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 00D2
        gbc.setState(0x2eda, 0x4c03, 0xc4d0, 0xabae, 0xb822, 0xaa1c, 0x1, 0x1);
        gbc.writeMem(0x2eda, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x4c03);
        EXPECT(gbc.pc(), 0x2edc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 00D3
        gbc.setState(0x7137, 0xae71, 0xc60, 0xa263, 0xb283, 0x31de, 0x0, 0x1);
        gbc.writeMem(0x7137, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xae71);
        EXPECT(gbc.pc(), 0x7139);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 00D4
        gbc.setState(0x9adb, 0xd3f1, 0x84e0, 0x8723, 0x11b3, 0xcc99, 0x0, 0x0);
        gbc.writeMem(0x9adb, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xd3f1);
        EXPECT(gbc.pc(), 0x9add);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9adb), 0xcb);
        EXPECT(gbc.readMem(0x9adc), 0x3);
        // CB 03 00D5
        gbc.setState(0xa393, 0xb2a8, 0x1330, 0xfc90, 0xb211, 0x7a73, 0x1, 0x1);
        gbc.writeMem(0xa393, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xb2a8);
        EXPECT(gbc.pc(), 0xa395);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa393), 0xcb);
        EXPECT(gbc.readMem(0xa394), 0x3);
        // CB 03 00D6
        gbc.setState(0x2e8, 0xfff3, 0x2e40, 0xfc9a, 0xcd6c, 0xfe82, 0x0, 0x1);
        gbc.writeMem(0x2e8, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xfff3);
        EXPECT(gbc.pc(), 0x2ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 00D7
        gbc.setState(0xe45a, 0xaaee, 0xa630, 0x65ee, 0x5ad2, 0x1d6, 0x1, 0x0);
        gbc.writeMem(0xe45a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xaaee);
        EXPECT(gbc.pc(), 0xe45c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe45a), 0xcb);
        EXPECT(gbc.readMem(0xe45b), 0x3);
        // CB 03 00D8
        gbc.setState(0xc1fc, 0xa096, 0x9630, 0x66a4, 0x462, 0x8df3, 0x1, 0x1);
        gbc.writeMem(0xc1fc, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xa096);
        EXPECT(gbc.pc(), 0xc1fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1fc), 0xcb);
        EXPECT(gbc.readMem(0xc1fd), 0x3);
        // CB 03 00D9
        gbc.setState(0xdc3, 0x6b96, 0x2000, 0x2c50, 0x56df, 0xeb77, 0x1, 0x1);
        gbc.writeMem(0xdc3, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x6b96);
        EXPECT(gbc.pc(), 0xdc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 00DA
        gbc.setState(0x8648, 0x8bce, 0x83b0, 0xf222, 0x7108, 0xf422, 0x1, 0x1);
        gbc.writeMem(0x8648, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x8bce);
        EXPECT(gbc.pc(), 0x864a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8648), 0xcb);
        EXPECT(gbc.readMem(0x8649), 0x3);
        // CB 03 00DC
        gbc.setState(0x30bb, 0x3a58, 0x5a60, 0x4286, 0x6362, 0x5b93, 0x1, 0x1);
        gbc.writeMem(0x30bb, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x3a58);
        EXPECT(gbc.pc(), 0x30bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 00DD
        gbc.setState(0x6d9a, 0xdd84, 0x5820, 0x1932, 0xe3ce, 0xcd9e, 0x1, 0x0);
        gbc.writeMem(0x6d9a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xdd84);
        EXPECT(gbc.pc(), 0x6d9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 00DE
        gbc.setState(0x9e20, 0x8e34, 0x8950, 0xdb03, 0xc2bd, 0x95f3, 0x1, 0x1);
        gbc.writeMem(0x9e20, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x8e34);
        EXPECT(gbc.pc(), 0x9e22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e20), 0xcb);
        EXPECT(gbc.readMem(0x9e21), 0x3);
        // CB 03 00DF
        gbc.setState(0x10c5, 0xa1d7, 0xba50, 0x23b1, 0xa4c4, 0x48e3, 0x0, 0x1);
        gbc.writeMem(0x10c5, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xa1d7);
        EXPECT(gbc.pc(), 0x10c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 00E0
        gbc.setState(0x5909, 0x3f0c, 0xbcb0, 0xdcb1, 0x2ca6, 0xe5de, 0x1, 0x1);
        gbc.writeMem(0x5909, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x3f0c);
        EXPECT(gbc.pc(), 0x590b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 00E1
        gbc.setState(0x607b, 0x564d, 0x2f40, 0xd47, 0x8963, 0x170d, 0x0, 0x1);
        gbc.writeMem(0x607b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x564d);
        EXPECT(gbc.pc(), 0x607d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 00E2
        gbc.setState(0x54f5, 0xf329, 0xb720, 0x2b0e, 0x65b9, 0xbec1, 0x0, 0x1);
        gbc.writeMem(0x54f5, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xf329);
        EXPECT(gbc.pc(), 0x54f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 00E3
        gbc.setState(0xb9b1, 0x90b1, 0x1c00, 0xd2a0, 0xfd6c, 0xe6ed, 0x0, 0x1);
        gbc.writeMem(0xb9b1, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x90b1);
        EXPECT(gbc.pc(), 0xb9b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9b1), 0xcb);
        EXPECT(gbc.readMem(0xb9b2), 0x3);
        // CB 03 00E4
        gbc.setState(0xca39, 0x1df6, 0xcae0, 0xfa01, 0xcd3f, 0xda04, 0x0, 0x1);
        gbc.writeMem(0xca39, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x1df6);
        EXPECT(gbc.pc(), 0xca3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca39), 0xcb);
        EXPECT(gbc.readMem(0xca3a), 0x3);
        // CB 03 00E5
        gbc.setState(0x60a5, 0x5a46, 0x2b30, 0x3b8f, 0xdc05, 0xcf35, 0x0, 0x1);
        gbc.writeMem(0x60a5, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x5a46);
        EXPECT(gbc.pc(), 0x60a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 00E6
        gbc.setState(0xd8c, 0xa748, 0x38a0, 0x8e50, 0xf791, 0xcc87, 0x0, 0x1);
        gbc.writeMem(0xd8c, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xa748);
        EXPECT(gbc.pc(), 0xd8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 00E7
        gbc.setState(0xc77a, 0xafe3, 0xfcc0, 0x53dc, 0xdedf, 0x8106, 0x0, 0x0);
        gbc.writeMem(0xc77a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xafe3);
        EXPECT(gbc.pc(), 0xc77c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc77a), 0xcb);
        EXPECT(gbc.readMem(0xc77b), 0x3);
        // CB 03 00E8
        gbc.setState(0x8c3a, 0x1f89, 0xcaa0, 0x56fd, 0xcee3, 0x5f89, 0x0, 0x1);
        gbc.writeMem(0x8c3a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x1f89);
        EXPECT(gbc.pc(), 0x8c3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c3a), 0xcb);
        EXPECT(gbc.readMem(0x8c3b), 0x3);
        // CB 03 00E9
        gbc.setState(0xdc0b, 0xf019, 0xd4f0, 0x37c8, 0xd899, 0xa5ae, 0x0, 0x1);
        gbc.writeMem(0xdc0b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xf019);
        EXPECT(gbc.pc(), 0xdc0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc0b), 0xcb);
        EXPECT(gbc.readMem(0xdc0c), 0x3);
        // CB 03 00EA
        gbc.setState(0x80b4, 0xe01d, 0x9280, 0xbb61, 0x5c0d, 0x6a20, 0x1, 0x0);
        gbc.writeMem(0x80b4, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xe01d);
        EXPECT(gbc.pc(), 0x80b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80b4), 0xcb);
        EXPECT(gbc.readMem(0x80b5), 0x3);
        // CB 03 00EB
        gbc.setState(0x6eae, 0xcaec, 0x7fb0, 0x92f9, 0x45d7, 0xa294, 0x0, 0x1);
        gbc.writeMem(0x6eae, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xcaec);
        EXPECT(gbc.pc(), 0x6eb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 00EC
        gbc.setState(0xb198, 0x7774, 0xbd90, 0xafa2, 0xa47c, 0x720f, 0x0, 0x0);
        gbc.writeMem(0xb198, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x7774);
        EXPECT(gbc.pc(), 0xb19a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb198), 0xcb);
        EXPECT(gbc.readMem(0xb199), 0x3);
        // CB 03 00ED
        gbc.setState(0x5cf9, 0x3eb4, 0x9490, 0xfb44, 0x2844, 0x3cf6, 0x0, 0x0);
        gbc.writeMem(0x5cf9, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x3eb4);
        EXPECT(gbc.pc(), 0x5cfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 00EF
        gbc.setState(0x446f, 0xdd0, 0xaec0, 0x149d, 0x8fff, 0xc2bc, 0x1, 0x0);
        gbc.writeMem(0x446f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xdd0);
        EXPECT(gbc.pc(), 0x4471);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 00F1
        gbc.setState(0x76b1, 0x7aa9, 0x2af0, 0xd105, 0x4c52, 0x135b, 0x0, 0x1);
        gbc.writeMem(0x76b1, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x7aa9);
        EXPECT(gbc.pc(), 0x76b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 00F2
        gbc.setState(0x3a7c, 0xb604, 0xed0, 0xe64a, 0x348c, 0x8706, 0x1, 0x0);
        gbc.writeMem(0x3a7c, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xb604);
        EXPECT(gbc.pc(), 0x3a7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 00F3
        gbc.setState(0xbe81, 0xd682, 0x2ce0, 0x4f64, 0x1022, 0xc80b, 0x1, 0x0);
        gbc.writeMem(0xbe81, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xd682);
        EXPECT(gbc.pc(), 0xbe83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe81), 0xcb);
        EXPECT(gbc.readMem(0xbe82), 0x3);
        // CB 03 00F4
        gbc.setState(0xa701, 0x9f46, 0x1c0, 0xae37, 0x724a, 0xf16c, 0x1, 0x1);
        gbc.writeMem(0xa701, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x9f46);
        EXPECT(gbc.pc(), 0xa703);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa701), 0xcb);
        EXPECT(gbc.readMem(0xa702), 0x3);
        // CB 03 00F6
        gbc.setState(0x79e9, 0xd9a9, 0x3b80, 0x7431, 0x6c70, 0x81d7, 0x1, 0x1);
        gbc.writeMem(0x79e9, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xd9a9);
        EXPECT(gbc.pc(), 0x79eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 00F7
        gbc.setState(0xa8da, 0xee98, 0x90a0, 0x32ee, 0x27ec, 0x7f86, 0x1, 0x0);
        gbc.writeMem(0xa8da, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xee98);
        EXPECT(gbc.pc(), 0xa8dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8da), 0xcb);
        EXPECT(gbc.readMem(0xa8db), 0x3);
        // CB 03 00F8
        gbc.setState(0xdd2e, 0x8866, 0x2d40, 0x189f, 0x3961, 0x9be4, 0x1, 0x0);
        gbc.writeMem(0xdd2e, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x8866);
        EXPECT(gbc.pc(), 0xdd30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd2e), 0xcb);
        EXPECT(gbc.readMem(0xdd2f), 0x3);
        // CB 03 00F9
        gbc.setState(0x7e93, 0x63ca, 0xb660, 0xefb7, 0xbca1, 0xf801, 0x1, 0x0);
        gbc.writeMem(0x7e93, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x63ca);
        EXPECT(gbc.pc(), 0x7e95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 00FA
        gbc.setState(0x7a5a, 0x5780, 0xf5d0, 0x1ec8, 0x362f, 0x2dc0, 0x1, 0x1);
        gbc.writeMem(0x7a5a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x5780);
        EXPECT(gbc.pc(), 0x7a5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 00FB
        gbc.setState(0x8e9b, 0xce48, 0x11c0, 0x21cd, 0x855f, 0xb5e3, 0x0, 0x0);
        gbc.writeMem(0x8e9b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xce48);
        EXPECT(gbc.pc(), 0x8e9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e9b), 0xcb);
        EXPECT(gbc.readMem(0x8e9c), 0x3);
        // CB 03 00FC
        gbc.setState(0x6e52, 0x7fb2, 0xba0, 0xd300, 0x743e, 0x5175, 0x0, 0x0);
        gbc.writeMem(0x6e52, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x7fb2);
        EXPECT(gbc.pc(), 0x6e54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 00FD
        gbc.setState(0xe750, 0xdcf7, 0xdb0, 0x39ec, 0x36d6, 0x1c22, 0x0, 0x1);
        gbc.writeMem(0xe750, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xdcf7);
        EXPECT(gbc.pc(), 0xe752);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe750), 0xcb);
        EXPECT(gbc.readMem(0xe751), 0x3);
        // CB 03 00FE
        gbc.setState(0xe4b0, 0xa3b6, 0xd2f0, 0xf91, 0x890d, 0x2d4e, 0x0, 0x1);
        gbc.writeMem(0xe4b0, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xa3b6);
        EXPECT(gbc.pc(), 0xe4b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4b0), 0xcb);
        EXPECT(gbc.readMem(0xe4b1), 0x3);
        // CB 03 00FF
        gbc.setState(0x5a2, 0xdaf2, 0x1660, 0x391d, 0x56ba, 0x17fc, 0x0, 0x0);
        gbc.writeMem(0x5a2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xdaf2);
        EXPECT(gbc.pc(), 0x5a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0100
        gbc.setState(0x992f, 0x8c4a, 0xb770, 0xfa0a, 0x23c1, 0x50f9, 0x1, 0x0);
        gbc.writeMem(0x992f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x8c4a);
        EXPECT(gbc.pc(), 0x9931);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x992f), 0xcb);
        EXPECT(gbc.readMem(0x9930), 0x3);
        // CB 03 0101
        gbc.setState(0x300a, 0x8655, 0x50b0, 0x433b, 0xb76b, 0x5a4b, 0x0, 0x1);
        gbc.writeMem(0x300a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x8655);
        EXPECT(gbc.pc(), 0x300c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0102
        gbc.setState(0xc8f2, 0x4ed3, 0xda70, 0xbffc, 0x5104, 0x1252, 0x1, 0x1);
        gbc.writeMem(0xc8f2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x4ed3);
        EXPECT(gbc.pc(), 0xc8f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8f2), 0xcb);
        EXPECT(gbc.readMem(0xc8f3), 0x3);
        // CB 03 0103
        gbc.setState(0x32be, 0x45ef, 0x23a0, 0x4468, 0xfe16, 0x4748, 0x1, 0x0);
        gbc.writeMem(0x32be, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x45ef);
        EXPECT(gbc.pc(), 0x32c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0104
        gbc.setState(0x6f97, 0x2146, 0xc680, 0x6bb0, 0xd689, 0x83a1, 0x1, 0x0);
        gbc.writeMem(0x6f97, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x2146);
        EXPECT(gbc.pc(), 0x6f99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0105
        gbc.setState(0x4153, 0x267b, 0xa650, 0xb50b, 0x1797, 0xed6c, 0x0, 0x1);
        gbc.writeMem(0x4153, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x267b);
        EXPECT(gbc.pc(), 0x4155);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0106
        gbc.setState(0xb199, 0x2b80, 0x2580, 0x7cf8, 0x100, 0x9f36, 0x0, 0x1);
        gbc.writeMem(0xb199, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x2b80);
        EXPECT(gbc.pc(), 0xb19b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb199), 0xcb);
        EXPECT(gbc.readMem(0xb19a), 0x3);
        // CB 03 0107
        gbc.setState(0xccea, 0x824, 0xad20, 0xe6cc, 0x296f, 0x2abf, 0x1, 0x0);
        gbc.writeMem(0xccea, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x824);
        EXPECT(gbc.pc(), 0xccec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccea), 0xcb);
        EXPECT(gbc.readMem(0xcceb), 0x3);
        // CB 03 0108
        gbc.setState(0x8520, 0x15bf, 0x660, 0x95bc, 0x7acb, 0xe097, 0x1, 0x1);
        gbc.writeMem(0x8520, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x15bf);
        EXPECT(gbc.pc(), 0x8522);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8520), 0xcb);
        EXPECT(gbc.readMem(0x8521), 0x3);
        // CB 03 0109
        gbc.setState(0x9a46, 0x2915, 0x4e90, 0x2079, 0x44e1, 0x5e94, 0x0, 0x1);
        gbc.writeMem(0x9a46, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x2915);
        EXPECT(gbc.pc(), 0x9a48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a46), 0xcb);
        EXPECT(gbc.readMem(0x9a47), 0x3);
        // CB 03 010A
        gbc.setState(0xd0b, 0x3fb5, 0x9380, 0xb45f, 0x9fa2, 0xce71, 0x1, 0x1);
        gbc.writeMem(0xd0b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x3fb5);
        EXPECT(gbc.pc(), 0xd0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 010B
        gbc.setState(0x2867, 0x9d8f, 0x44f0, 0x3a8e, 0x419d, 0x7508, 0x0, 0x0);
        gbc.writeMem(0x2867, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x9d8f);
        EXPECT(gbc.pc(), 0x2869);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 010C
        gbc.setState(0x1379, 0x92a8, 0x150, 0xd74f, 0xed02, 0x880e, 0x1, 0x0);
        gbc.writeMem(0x1379, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x92a8);
        EXPECT(gbc.pc(), 0x137b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 010D
        gbc.setState(0x1278, 0x467e, 0x8360, 0x187d, 0x6fa0, 0xfe4d, 0x0, 0x1);
        gbc.writeMem(0x1278, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x467e);
        EXPECT(gbc.pc(), 0x127a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 010E
        gbc.setState(0x43b1, 0x60d7, 0xa7e0, 0x5013, 0xa070, 0xb0fa, 0x0, 0x1);
        gbc.writeMem(0x43b1, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x60d7);
        EXPECT(gbc.pc(), 0x43b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 010F
        gbc.setState(0x672f, 0xee61, 0x74c0, 0x66e8, 0xcc64, 0x49b9, 0x1, 0x1);
        gbc.writeMem(0x672f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xee61);
        EXPECT(gbc.pc(), 0x6731);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0110
        gbc.setState(0x1756, 0x62ed, 0x5c20, 0x5276, 0xa6e, 0xe5d, 0x0, 0x1);
        gbc.writeMem(0x1756, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x62ed);
        EXPECT(gbc.pc(), 0x1758);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0111
        gbc.setState(0x7516, 0x27b8, 0x2480, 0x47cd, 0xec8b, 0x5f02, 0x1, 0x1);
        gbc.writeMem(0x7516, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x27b8);
        EXPECT(gbc.pc(), 0x7518);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0112
        gbc.setState(0x21b2, 0xba3d, 0xb030, 0xd2ac, 0xde3e, 0x1d7e, 0x1, 0x0);
        gbc.writeMem(0x21b2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xba3d);
        EXPECT(gbc.pc(), 0x21b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0113
        gbc.setState(0x40fe, 0x1c40, 0x9050, 0x37e5, 0x527b, 0xae65, 0x1, 0x0);
        gbc.writeMem(0x40fe, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x1c40);
        EXPECT(gbc.pc(), 0x4100);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0114
        gbc.setState(0x1da5, 0x5457, 0xc350, 0x4d53, 0xf489, 0xccd, 0x0, 0x0);
        gbc.writeMem(0x1da5, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x5457);
        EXPECT(gbc.pc(), 0x1da7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0115
        gbc.setState(0x5ce2, 0x8882, 0xafc0, 0xe038, 0xf18f, 0xacf5, 0x0, 0x1);
        gbc.writeMem(0x5ce2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x8882);
        EXPECT(gbc.pc(), 0x5ce4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0116
        gbc.setState(0x4987, 0x9617, 0x1c80, 0x4fa0, 0xb7b8, 0x267e, 0x0, 0x0);
        gbc.writeMem(0x4987, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x9617);
        EXPECT(gbc.pc(), 0x4989);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0117
        gbc.setState(0xc73e, 0x47e3, 0xc860, 0x7e62, 0xcaa1, 0xffa4, 0x1, 0x0);
        gbc.writeMem(0xc73e, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x47e3);
        EXPECT(gbc.pc(), 0xc740);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc73e), 0xcb);
        EXPECT(gbc.readMem(0xc73f), 0x3);
        // CB 03 0118
        gbc.setState(0xb313, 0x3b98, 0x32a0, 0xa28c, 0x4841, 0x4841, 0x1, 0x0);
        gbc.writeMem(0xb313, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x3b98);
        EXPECT(gbc.pc(), 0xb315);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb313), 0xcb);
        EXPECT(gbc.readMem(0xb314), 0x3);
        // CB 03 0119
        gbc.setState(0x4a98, 0x97f9, 0x9030, 0xafc7, 0x2772, 0xca31, 0x0, 0x0);
        gbc.writeMem(0x4a98, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x97f9);
        EXPECT(gbc.pc(), 0x4a9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 011A
        gbc.setState(0x3e59, 0x1509, 0x8910, 0x5c7f, 0x6cd6, 0x49de, 0x0, 0x1);
        gbc.writeMem(0x3e59, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x1509);
        EXPECT(gbc.pc(), 0x3e5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 011B
        gbc.setState(0x5be, 0x387d, 0xbbd0, 0xb614, 0xd71b, 0xc7f0, 0x0, 0x1);
        gbc.writeMem(0x5be, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x387d);
        EXPECT(gbc.pc(), 0x5c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 011C
        gbc.setState(0xe68f, 0xcd4f, 0xf150, 0xce1c, 0x82b6, 0x7d1e, 0x1, 0x0);
        gbc.writeMem(0xe68f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xcd4f);
        EXPECT(gbc.pc(), 0xe691);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe68f), 0xcb);
        EXPECT(gbc.readMem(0xe690), 0x3);
        // CB 03 011D
        gbc.setState(0x6f8d, 0xb207, 0x90f0, 0x56a6, 0x9570, 0x56a9, 0x1, 0x0);
        gbc.writeMem(0x6f8d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xb207);
        EXPECT(gbc.pc(), 0x6f8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 011E
        gbc.setState(0x49c9, 0x816b, 0xb3c0, 0x954, 0x68f3, 0x37f2, 0x1, 0x1);
        gbc.writeMem(0x49c9, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x816b);
        EXPECT(gbc.pc(), 0x49cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 011F
        gbc.setState(0x860c, 0x2586, 0x3340, 0x5e8a, 0x99b1, 0x2efa, 0x1, 0x0);
        gbc.writeMem(0x860c, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x2586);
        EXPECT(gbc.pc(), 0x860e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x860c), 0xcb);
        EXPECT(gbc.readMem(0x860d), 0x3);
        // CB 03 0120
        gbc.setState(0x5810, 0xc4e4, 0x9d60, 0xaf6f, 0xe71f, 0x1542, 0x0, 0x1);
        gbc.writeMem(0x5810, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xc4e4);
        EXPECT(gbc.pc(), 0x5812);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0121
        gbc.setState(0x7207, 0x40e1, 0xe830, 0xa511, 0x159a, 0xc5bb, 0x1, 0x0);
        gbc.writeMem(0x7207, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x40e1);
        EXPECT(gbc.pc(), 0x7209);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0122
        gbc.setState(0x36c8, 0xd5b6, 0xeef0, 0xc366, 0xcb1e, 0x6a96, 0x1, 0x0);
        gbc.writeMem(0x36c8, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xd5b6);
        EXPECT(gbc.pc(), 0x36ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0123
        gbc.setState(0x260b, 0xfc7a, 0x5080, 0x117, 0x28d, 0x4964, 0x1, 0x1);
        gbc.writeMem(0x260b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xfc7a);
        EXPECT(gbc.pc(), 0x260d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0124
        gbc.setState(0xeebf, 0xaee1, 0x9090, 0xa245, 0xcd01, 0xc35, 0x1, 0x1);
        gbc.writeMem(0xeebf, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xaee1);
        EXPECT(gbc.pc(), 0xeec1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeebf), 0xcb);
        EXPECT(gbc.readMem(0xeec0), 0x3);
        // CB 03 0125
        gbc.setState(0x910, 0x800e, 0xbf50, 0x36bc, 0x5ffa, 0xe52c, 0x1, 0x0);
        gbc.writeMem(0x910, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x800e);
        EXPECT(gbc.pc(), 0x912);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0126
        gbc.setState(0x65ea, 0x2a14, 0x3140, 0xc11b, 0xa9fc, 0x8658, 0x0, 0x1);
        gbc.writeMem(0x65ea, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x2a14);
        EXPECT(gbc.pc(), 0x65ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0127
        gbc.setState(0xd398, 0xe4c3, 0xf460, 0xc6b6, 0x84e1, 0xe0c7, 0x0, 0x0);
        gbc.writeMem(0xd398, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xe4c3);
        EXPECT(gbc.pc(), 0xd39a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd398), 0xcb);
        EXPECT(gbc.readMem(0xd399), 0x3);
        // CB 03 0128
        gbc.setState(0xeaca, 0xddd8, 0xc860, 0x62be, 0x6c86, 0xecef, 0x1, 0x0);
        gbc.writeMem(0xeaca, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xddd8);
        EXPECT(gbc.pc(), 0xeacc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeaca), 0xcb);
        EXPECT(gbc.readMem(0xeacb), 0x3);
        // CB 03 0129
        gbc.setState(0x73f8, 0x9a70, 0x9c10, 0x42b, 0xa84d, 0xe4c6, 0x0, 0x1);
        gbc.writeMem(0x73f8, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x9a70);
        EXPECT(gbc.pc(), 0x73fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 012A
        gbc.setState(0xc8fc, 0xb97e, 0x1400, 0x906e, 0x52d, 0x6d5c, 0x0, 0x0);
        gbc.writeMem(0xc8fc, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xb97e);
        EXPECT(gbc.pc(), 0xc8fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8fc), 0xcb);
        EXPECT(gbc.readMem(0xc8fd), 0x3);
        // CB 03 012B
        gbc.setState(0x6b10, 0xf481, 0x8840, 0x7d49, 0xc52d, 0x499f, 0x0, 0x1);
        gbc.writeMem(0x6b10, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xf481);
        EXPECT(gbc.pc(), 0x6b12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 012C
        gbc.setState(0x1490, 0x1c4a, 0xcd60, 0x9f7b, 0xdcc9, 0x5f5b, 0x1, 0x1);
        gbc.writeMem(0x1490, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x1c4a);
        EXPECT(gbc.pc(), 0x1492);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 012D
        gbc.setState(0x2ddb, 0xdf9c, 0xbd40, 0xbc96, 0x5dc7, 0x7273, 0x0, 0x1);
        gbc.writeMem(0x2ddb, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xdf9c);
        EXPECT(gbc.pc(), 0x2ddd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 012E
        gbc.setState(0xc748, 0x39a7, 0x28b0, 0xf297, 0xfa6a, 0xec1f, 0x0, 0x1);
        gbc.writeMem(0xc748, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x39a7);
        EXPECT(gbc.pc(), 0xc74a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc748), 0xcb);
        EXPECT(gbc.readMem(0xc749), 0x3);
        // CB 03 012F
        gbc.setState(0x98ab, 0x865c, 0x420, 0x6122, 0x2bbe, 0xe7df, 0x0, 0x0);
        gbc.writeMem(0x98ab, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x865c);
        EXPECT(gbc.pc(), 0x98ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98ab), 0xcb);
        EXPECT(gbc.readMem(0x98ac), 0x3);
        // CB 03 0130
        gbc.setState(0x4abd, 0xe0e3, 0x7f60, 0x8ea8, 0x151e, 0xbe35, 0x1, 0x0);
        gbc.writeMem(0x4abd, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xe0e3);
        EXPECT(gbc.pc(), 0x4abf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0131
        gbc.setState(0xd391, 0x56df, 0x90b0, 0xc8d, 0x1219, 0x2935, 0x1, 0x0);
        gbc.writeMem(0xd391, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x56df);
        EXPECT(gbc.pc(), 0xd393);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd391), 0xcb);
        EXPECT(gbc.readMem(0xd392), 0x3);
        // CB 03 0132
        gbc.setState(0x5ab4, 0xecd7, 0x6b40, 0xa4f8, 0x9b77, 0xfdce, 0x1, 0x0);
        gbc.writeMem(0x5ab4, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xecd7);
        EXPECT(gbc.pc(), 0x5ab6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0133
        gbc.setState(0xadff, 0xf446, 0x7890, 0x81e8, 0x464d, 0xb82, 0x1, 0x0);
        gbc.writeMem(0xadff, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xf446);
        EXPECT(gbc.pc(), 0xae01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadff), 0xcb);
        EXPECT(gbc.readMem(0xae00), 0x3);
        // CB 03 0134
        gbc.setState(0x16c4, 0x133a, 0x2a00, 0x35d, 0x88fa, 0xe742, 0x1, 0x1);
        gbc.writeMem(0x16c4, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x133a);
        EXPECT(gbc.pc(), 0x16c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0135
        gbc.setState(0x8db3, 0x9b9, 0x2380, 0xa8fd, 0xf8c6, 0x3834, 0x1, 0x0);
        gbc.writeMem(0x8db3, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x9b9);
        EXPECT(gbc.pc(), 0x8db5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8db3), 0xcb);
        EXPECT(gbc.readMem(0x8db4), 0x3);
        // CB 03 0136
        gbc.setState(0xda12, 0x5969, 0x11a0, 0xd72f, 0x6a33, 0x40cd, 0x0, 0x0);
        gbc.writeMem(0xda12, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x5969);
        EXPECT(gbc.pc(), 0xda14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda12), 0xcb);
        EXPECT(gbc.readMem(0xda13), 0x3);
        // CB 03 0137
        gbc.setState(0x6a30, 0xa94f, 0xf6d0, 0x3b82, 0xee0d, 0xff3, 0x1, 0x1);
        gbc.writeMem(0x6a30, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xa94f);
        EXPECT(gbc.pc(), 0x6a32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0138
        gbc.setState(0xa706, 0x1b1e, 0x8960, 0xa1ca, 0x4916, 0xc19f, 0x0, 0x1);
        gbc.writeMem(0xa706, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x1b1e);
        EXPECT(gbc.pc(), 0xa708);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa706), 0xcb);
        EXPECT(gbc.readMem(0xa707), 0x3);
        // CB 03 0139
        gbc.setState(0x77af, 0x64c7, 0x7430, 0x2bea, 0x1973, 0x9ca8, 0x1, 0x0);
        gbc.writeMem(0x77af, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x64c7);
        EXPECT(gbc.pc(), 0x77b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 013A
        gbc.setState(0xa7bd, 0xa29a, 0xf020, 0x5949, 0xda8f, 0xd069, 0x1, 0x0);
        gbc.writeMem(0xa7bd, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xa29a);
        EXPECT(gbc.pc(), 0xa7bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7bd), 0xcb);
        EXPECT(gbc.readMem(0xa7be), 0x3);
        // CB 03 013B
        gbc.setState(0xa56d, 0xf170, 0x45b0, 0x6872, 0x8ae, 0x3f79, 0x0, 0x1);
        gbc.writeMem(0xa56d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xf170);
        EXPECT(gbc.pc(), 0xa56f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa56d), 0xcb);
        EXPECT(gbc.readMem(0xa56e), 0x3);
        // CB 03 013C
        gbc.setState(0x1261, 0xcb9a, 0x2650, 0xdd1a, 0x6eca, 0x531b, 0x0, 0x1);
        gbc.writeMem(0x1261, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xcb9a);
        EXPECT(gbc.pc(), 0x1263);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 013D
        gbc.setState(0x3c13, 0xa265, 0xbb20, 0x752c, 0x9a81, 0x90fe, 0x1, 0x0);
        gbc.writeMem(0x3c13, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xa265);
        EXPECT(gbc.pc(), 0x3c15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 013E
        gbc.setState(0x1407, 0x6c29, 0xb10, 0x7834, 0x6c34, 0x81b3, 0x1, 0x1);
        gbc.writeMem(0x1407, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x6c29);
        EXPECT(gbc.pc(), 0x1409);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 013F
        gbc.setState(0x9477, 0x4564, 0xb740, 0xceb7, 0x680e, 0xe858, 0x1, 0x0);
        gbc.writeMem(0x9477, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x4564);
        EXPECT(gbc.pc(), 0x9479);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9477), 0xcb);
        EXPECT(gbc.readMem(0x9478), 0x3);
        // CB 03 0140
        gbc.setState(0xbfb9, 0x60b6, 0x950, 0x6b99, 0xd33b, 0x6925, 0x1, 0x1);
        gbc.writeMem(0xbfb9, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x60b6);
        EXPECT(gbc.pc(), 0xbfbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfb9), 0xcb);
        EXPECT(gbc.readMem(0xbfba), 0x3);
        // CB 03 0141
        gbc.setState(0x8e91, 0x1367, 0x9160, 0x992e, 0x94cb, 0x92e7, 0x0, 0x1);
        gbc.writeMem(0x8e91, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x1367);
        EXPECT(gbc.pc(), 0x8e93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e91), 0xcb);
        EXPECT(gbc.readMem(0x8e92), 0x3);
        // CB 03 0142
        gbc.setState(0x8892, 0x4842, 0x3190, 0x4017, 0xf250, 0x3cdb, 0x1, 0x0);
        gbc.writeMem(0x8892, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x4842);
        EXPECT(gbc.pc(), 0x8894);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8892), 0xcb);
        EXPECT(gbc.readMem(0x8893), 0x3);
        // CB 03 0144
        gbc.setState(0x52f, 0x30ce, 0xb150, 0x3ae9, 0xb835, 0x5140, 0x0, 0x1);
        gbc.writeMem(0x52f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x30ce);
        EXPECT(gbc.pc(), 0x531);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0145
        gbc.setState(0xbbed, 0xef55, 0xb9a0, 0xece8, 0xa0b1, 0x83d5, 0x1, 0x0);
        gbc.writeMem(0xbbed, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xef55);
        EXPECT(gbc.pc(), 0xbbef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbed), 0xcb);
        EXPECT(gbc.readMem(0xbbee), 0x3);
        // CB 03 0146
        gbc.setState(0x61c5, 0xca35, 0x2d40, 0x8428, 0xee0a, 0x1a26, 0x0, 0x1);
        gbc.writeMem(0x61c5, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xca35);
        EXPECT(gbc.pc(), 0x61c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0147
        gbc.setState(0x4696, 0x395f, 0x5690, 0x81bd, 0x45c2, 0xc608, 0x0, 0x0);
        gbc.writeMem(0x4696, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x395f);
        EXPECT(gbc.pc(), 0x4698);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0148
        gbc.setState(0xeadf, 0xdc23, 0xc100, 0x2dc4, 0xb7d8, 0xeb2, 0x1, 0x1);
        gbc.writeMem(0xeadf, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xdc23);
        EXPECT(gbc.pc(), 0xeae1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeadf), 0xcb);
        EXPECT(gbc.readMem(0xeae0), 0x3);
        // CB 03 0149
        gbc.setState(0xaa9e, 0x91fd, 0x4450, 0x8362, 0x7787, 0x8034, 0x0, 0x0);
        gbc.writeMem(0xaa9e, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x91fd);
        EXPECT(gbc.pc(), 0xaaa0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa9e), 0xcb);
        EXPECT(gbc.readMem(0xaa9f), 0x3);
        // CB 03 014B
        gbc.setState(0x1d96, 0x599c, 0x8d30, 0x3629, 0x82ec, 0x7d9e, 0x0, 0x1);
        gbc.writeMem(0x1d96, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x599c);
        EXPECT(gbc.pc(), 0x1d98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 014C
        gbc.setState(0x8f20, 0xff26, 0x1da0, 0x679f, 0x453a, 0xc7be, 0x0, 0x1);
        gbc.writeMem(0x8f20, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xff26);
        EXPECT(gbc.pc(), 0x8f22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f20), 0xcb);
        EXPECT(gbc.readMem(0x8f21), 0x3);
        // CB 03 014D
        gbc.setState(0xd74a, 0x36b0, 0xf300, 0xdb5d, 0x80f, 0xa459, 0x1, 0x1);
        gbc.writeMem(0xd74a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x36b0);
        EXPECT(gbc.pc(), 0xd74c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd74a), 0xcb);
        EXPECT(gbc.readMem(0xd74b), 0x3);
        // CB 03 014E
        gbc.setState(0x1809, 0xe872, 0xc9d0, 0x4648, 0x299a, 0x9727, 0x1, 0x0);
        gbc.writeMem(0x1809, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xe872);
        EXPECT(gbc.pc(), 0x180b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 014F
        gbc.setState(0x1396, 0x7984, 0x99b0, 0xaf1c, 0x6a33, 0x2145, 0x0, 0x1);
        gbc.writeMem(0x1396, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x7984);
        EXPECT(gbc.pc(), 0x1398);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0150
        gbc.setState(0x512c, 0xda5f, 0x92f0, 0x7145, 0xcfff, 0x7ef0, 0x0, 0x0);
        gbc.writeMem(0x512c, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xda5f);
        EXPECT(gbc.pc(), 0x512e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0151
        gbc.setState(0x310e, 0x93c3, 0xe150, 0xec79, 0x4ed7, 0x1852, 0x0, 0x1);
        gbc.writeMem(0x310e, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x93c3);
        EXPECT(gbc.pc(), 0x3110);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0152
        gbc.setState(0x4158, 0xdc72, 0x6110, 0xbd4e, 0xa422, 0x55a2, 0x1, 0x1);
        gbc.writeMem(0x4158, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xdc72);
        EXPECT(gbc.pc(), 0x415a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0154
        gbc.setState(0x6d4a, 0x498, 0x1360, 0x9bf4, 0x62f9, 0xe503, 0x0, 0x1);
        gbc.writeMem(0x6d4a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x498);
        EXPECT(gbc.pc(), 0x6d4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0155
        gbc.setState(0x82f0, 0x706a, 0xf220, 0x741f, 0x9cfc, 0x74d6, 0x1, 0x1);
        gbc.writeMem(0x82f0, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x706a);
        EXPECT(gbc.pc(), 0x82f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82f0), 0xcb);
        EXPECT(gbc.readMem(0x82f1), 0x3);
        // CB 03 0156
        gbc.setState(0xb30b, 0x3a47, 0x1770, 0x5639, 0xb3ca, 0xeddb, 0x0, 0x0);
        gbc.writeMem(0xb30b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x3a47);
        EXPECT(gbc.pc(), 0xb30d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb30b), 0xcb);
        EXPECT(gbc.readMem(0xb30c), 0x3);
        // CB 03 0157
        gbc.setState(0x2f35, 0xfc35, 0x3a10, 0x19cc, 0x2f49, 0x8d4a, 0x0, 0x1);
        gbc.writeMem(0x2f35, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xfc35);
        EXPECT(gbc.pc(), 0x2f37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0158
        gbc.setState(0x1504, 0xb31c, 0x860, 0x85d9, 0xa7e9, 0x1e64, 0x0, 0x1);
        gbc.writeMem(0x1504, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xb31c);
        EXPECT(gbc.pc(), 0x1506);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0159
        gbc.setState(0x85ed, 0xc08c, 0x7570, 0x9af7, 0xc1ea, 0x3b96, 0x1, 0x1);
        gbc.writeMem(0x85ed, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xc08c);
        EXPECT(gbc.pc(), 0x85ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85ed), 0xcb);
        EXPECT(gbc.readMem(0x85ee), 0x3);
        // CB 03 015A
        gbc.setState(0xd2ea, 0xdc14, 0x37f0, 0xfbc5, 0x6c0, 0xbe77, 0x0, 0x1);
        gbc.writeMem(0xd2ea, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xdc14);
        EXPECT(gbc.pc(), 0xd2ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2ea), 0xcb);
        EXPECT(gbc.readMem(0xd2eb), 0x3);
        // CB 03 015B
        gbc.setState(0x1e6f, 0x61e1, 0x54c0, 0x23ae, 0xfdb9, 0xa267, 0x1, 0x1);
        gbc.writeMem(0x1e6f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x61e1);
        EXPECT(gbc.pc(), 0x1e71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 015C
        gbc.setState(0x357c, 0x943e, 0xc20, 0xe2bb, 0xcbdb, 0x903e, 0x0, 0x0);
        gbc.writeMem(0x357c, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x943e);
        EXPECT(gbc.pc(), 0x357e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 015D
        gbc.setState(0xbb51, 0x8c71, 0xf740, 0x878f, 0xa076, 0x4c25, 0x0, 0x0);
        gbc.writeMem(0xbb51, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x8c71);
        EXPECT(gbc.pc(), 0xbb53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb51), 0xcb);
        EXPECT(gbc.readMem(0xbb52), 0x3);
        // CB 03 015F
        gbc.setState(0x7a41, 0x91f9, 0x4dd0, 0x989e, 0xe08, 0x9cdd, 0x1, 0x0);
        gbc.writeMem(0x7a41, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x91f9);
        EXPECT(gbc.pc(), 0x7a43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0160
        gbc.setState(0xe4bf, 0xe27f, 0x2840, 0x4128, 0x4d4, 0xb0d6, 0x1, 0x0);
        gbc.writeMem(0xe4bf, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xe27f);
        EXPECT(gbc.pc(), 0xe4c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4bf), 0xcb);
        EXPECT(gbc.readMem(0xe4c0), 0x3);
        // CB 03 0161
        gbc.setState(0xc795, 0x213d, 0x1700, 0x1d2b, 0x3fe6, 0x6f05, 0x1, 0x1);
        gbc.writeMem(0xc795, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x213d);
        EXPECT(gbc.pc(), 0xc797);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc795), 0xcb);
        EXPECT(gbc.readMem(0xc796), 0x3);
        // CB 03 0162
        gbc.setState(0x12e, 0x63ca, 0x1ea0, 0x69db, 0x288c, 0x979a, 0x0, 0x1);
        gbc.writeMem(0x12e, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x63ca);
        EXPECT(gbc.pc(), 0x130);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0163
        gbc.setState(0x57c9, 0x4135, 0x740, 0xedeb, 0x82eb, 0xc9d7, 0x1, 0x0);
        gbc.writeMem(0x57c9, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x4135);
        EXPECT(gbc.pc(), 0x57cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0164
        gbc.setState(0x6078, 0x53fa, 0x3690, 0x8d68, 0xade2, 0xbb57, 0x1, 0x1);
        gbc.writeMem(0x6078, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x53fa);
        EXPECT(gbc.pc(), 0x607a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0165
        gbc.setState(0x3c03, 0x6628, 0xcac0, 0x33b3, 0xfe36, 0x442d, 0x0, 0x0);
        gbc.writeMem(0x3c03, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x6628);
        EXPECT(gbc.pc(), 0x3c05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0166
        gbc.setState(0x7c32, 0x2032, 0x30a0, 0x8ec4, 0xea1f, 0x3717, 0x0, 0x0);
        gbc.writeMem(0x7c32, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x2032);
        EXPECT(gbc.pc(), 0x7c34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0167
        gbc.setState(0x2685, 0x8932, 0xf940, 0x493, 0xf7a6, 0x8864, 0x1, 0x1);
        gbc.writeMem(0x2685, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x8932);
        EXPECT(gbc.pc(), 0x2687);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0168
        gbc.setState(0xe289, 0xf7c6, 0x3840, 0x7596, 0xe30e, 0x7585, 0x0, 0x1);
        gbc.writeMem(0xe289, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xf7c6);
        EXPECT(gbc.pc(), 0xe28b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe289), 0xcb);
        EXPECT(gbc.readMem(0xe28a), 0x3);
        // CB 03 0169
        gbc.setState(0x856d, 0x6ab2, 0xe0a0, 0x76b7, 0xb0b1, 0x2353, 0x0, 0x0);
        gbc.writeMem(0x856d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x6ab2);
        EXPECT(gbc.pc(), 0x856f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x856d), 0xcb);
        EXPECT(gbc.readMem(0x856e), 0x3);
        // CB 03 016A
        gbc.setState(0x2f95, 0x4fe1, 0xd280, 0x9b19, 0x32e, 0xfd5c, 0x0, 0x0);
        gbc.writeMem(0x2f95, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x4fe1);
        EXPECT(gbc.pc(), 0x2f97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 016B
        gbc.setState(0xea11, 0xfed, 0x3dc0, 0x1c61, 0x784d, 0xd17a, 0x1, 0x0);
        gbc.writeMem(0xea11, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xfed);
        EXPECT(gbc.pc(), 0xea13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea11), 0xcb);
        EXPECT(gbc.readMem(0xea12), 0x3);
        // CB 03 016C
        gbc.setState(0x4a08, 0x876, 0xbb20, 0x1d38, 0xc0a3, 0x96b3, 0x0, 0x1);
        gbc.writeMem(0x4a08, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x876);
        EXPECT(gbc.pc(), 0x4a0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 016E
        gbc.setState(0xbe7a, 0xa4fa, 0x5970, 0xb756, 0x6c5c, 0x101c, 0x1, 0x1);
        gbc.writeMem(0xbe7a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xa4fa);
        EXPECT(gbc.pc(), 0xbe7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe7a), 0xcb);
        EXPECT(gbc.readMem(0xbe7b), 0x3);
        // CB 03 016F
        gbc.setState(0x4f58, 0xe0d3, 0x70a0, 0xf0e8, 0x82c, 0x9fac, 0x0, 0x1);
        gbc.writeMem(0x4f58, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xe0d3);
        EXPECT(gbc.pc(), 0x4f5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0170
        gbc.setState(0xe0c4, 0x69e3, 0x33f0, 0xf166, 0x86e1, 0xb0df, 0x0, 0x1);
        gbc.writeMem(0xe0c4, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x69e3);
        EXPECT(gbc.pc(), 0xe0c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0c4), 0xcb);
        EXPECT(gbc.readMem(0xe0c5), 0x3);
        // CB 03 0171
        gbc.setState(0x5568, 0xe3d3, 0x8530, 0xc88d, 0xd5ca, 0x30a7, 0x0, 0x0);
        gbc.writeMem(0x5568, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xe3d3);
        EXPECT(gbc.pc(), 0x556a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0173
        gbc.setState(0x240d, 0x94fa, 0x8040, 0x77b7, 0x9e06, 0x1b12, 0x0, 0x1);
        gbc.writeMem(0x240d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x94fa);
        EXPECT(gbc.pc(), 0x240f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0174
        gbc.setState(0xa4e9, 0x9c7b, 0x1970, 0x5310, 0x3df7, 0xc3d5, 0x1, 0x1);
        gbc.writeMem(0xa4e9, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x9c7b);
        EXPECT(gbc.pc(), 0xa4eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4e9), 0xcb);
        EXPECT(gbc.readMem(0xa4ea), 0x3);
        // CB 03 0175
        gbc.setState(0x4923, 0x22a4, 0xa480, 0x9da6, 0xc8c0, 0x745d, 0x1, 0x0);
        gbc.writeMem(0x4923, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x22a4);
        EXPECT(gbc.pc(), 0x4925);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0176
        gbc.setState(0x8e54, 0xa150, 0x9d50, 0x675, 0x4f18, 0xdb19, 0x1, 0x0);
        gbc.writeMem(0x8e54, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xa150);
        EXPECT(gbc.pc(), 0x8e56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e54), 0xcb);
        EXPECT(gbc.readMem(0x8e55), 0x3);
        // CB 03 0177
        gbc.setState(0x49ab, 0x6c77, 0xa150, 0x4297, 0xc1bf, 0x34ab, 0x1, 0x0);
        gbc.writeMem(0x49ab, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x6c77);
        EXPECT(gbc.pc(), 0x49ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0178
        gbc.setState(0x551f, 0xe7a0, 0x2550, 0xac8c, 0x1c92, 0x24c5, 0x0, 0x0);
        gbc.writeMem(0x551f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xe7a0);
        EXPECT(gbc.pc(), 0x5521);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0179
        gbc.setState(0x4c5b, 0x6f5c, 0xd850, 0xd6f9, 0x7eb3, 0xcbed, 0x0, 0x1);
        gbc.writeMem(0x4c5b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x6f5c);
        EXPECT(gbc.pc(), 0x4c5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 017A
        gbc.setState(0xc2f6, 0xada3, 0x81e0, 0x5b2e, 0xb373, 0x7d5f, 0x0, 0x1);
        gbc.writeMem(0xc2f6, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xada3);
        EXPECT(gbc.pc(), 0xc2f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2f6), 0xcb);
        EXPECT(gbc.readMem(0xc2f7), 0x3);
        // CB 03 017B
        gbc.setState(0xba52, 0x5164, 0x57d0, 0x66cf, 0x29c, 0x74bc, 0x1, 0x1);
        gbc.writeMem(0xba52, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x5164);
        EXPECT(gbc.pc(), 0xba54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba52), 0xcb);
        EXPECT(gbc.readMem(0xba53), 0x3);
        // CB 03 017C
        gbc.setState(0x8570, 0xb012, 0xc020, 0x8ff1, 0xcb88, 0xe13f, 0x0, 0x0);
        gbc.writeMem(0x8570, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xb012);
        EXPECT(gbc.pc(), 0x8572);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8570), 0xcb);
        EXPECT(gbc.readMem(0x8571), 0x3);
        // CB 03 017D
        gbc.setState(0x497d, 0xea8e, 0xdb0, 0x3249, 0x1e23, 0x8d69, 0x1, 0x1);
        gbc.writeMem(0x497d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xea8e);
        EXPECT(gbc.pc(), 0x497f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 017E
        gbc.setState(0x6803, 0x97c6, 0x11a0, 0xc2a0, 0xb, 0x936, 0x0, 0x1);
        gbc.writeMem(0x6803, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x97c6);
        EXPECT(gbc.pc(), 0x6805);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 017F
        gbc.setState(0x876f, 0x4958, 0xfef0, 0x1483, 0xb821, 0x857b, 0x1, 0x1);
        gbc.writeMem(0x876f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x4958);
        EXPECT(gbc.pc(), 0x8771);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x876f), 0xcb);
        EXPECT(gbc.readMem(0x8770), 0x3);
        // CB 03 0180
        gbc.setState(0x1b36, 0x5082, 0x8b40, 0x9c87, 0xc95a, 0x55eb, 0x0, 0x1);
        gbc.writeMem(0x1b36, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x5082);
        EXPECT(gbc.pc(), 0x1b38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0181
        gbc.setState(0x76a1, 0x1449, 0xae70, 0xcaf3, 0x6ac7, 0x486, 0x1, 0x0);
        gbc.writeMem(0x76a1, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x1449);
        EXPECT(gbc.pc(), 0x76a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0182
        gbc.setState(0xa6c3, 0x4529, 0x6eb0, 0x2cc1, 0x1a01, 0x68ac, 0x1, 0x1);
        gbc.writeMem(0xa6c3, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x4529);
        EXPECT(gbc.pc(), 0xa6c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6c3), 0xcb);
        EXPECT(gbc.readMem(0xa6c4), 0x3);
        // CB 03 0183
        gbc.setState(0x9098, 0x4f93, 0x6ac0, 0x62cd, 0x5f0c, 0x9d44, 0x1, 0x1);
        gbc.writeMem(0x9098, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x4f93);
        EXPECT(gbc.pc(), 0x909a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9098), 0xcb);
        EXPECT(gbc.readMem(0x9099), 0x3);
        // CB 03 0184
        gbc.setState(0xc29, 0x394e, 0xff00, 0x7b39, 0xff6, 0x2d59, 0x0, 0x1);
        gbc.writeMem(0xc29, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x394e);
        EXPECT(gbc.pc(), 0xc2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0185
        gbc.setState(0x2d25, 0x9b34, 0x8770, 0x1dd9, 0xcc91, 0x8e20, 0x0, 0x0);
        gbc.writeMem(0x2d25, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x9b34);
        EXPECT(gbc.pc(), 0x2d27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0186
        gbc.setState(0x28d7, 0xf94c, 0xd230, 0xe75a, 0x1dea, 0x2368, 0x0, 0x0);
        gbc.writeMem(0x28d7, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xf94c);
        EXPECT(gbc.pc(), 0x28d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0187
        gbc.setState(0xe3dc, 0x187d, 0x85e0, 0xd087, 0x78bd, 0xcb11, 0x0, 0x1);
        gbc.writeMem(0xe3dc, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x187d);
        EXPECT(gbc.pc(), 0xe3de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3dc), 0xcb);
        EXPECT(gbc.readMem(0xe3dd), 0x3);
        // CB 03 0188
        gbc.setState(0xe8b2, 0x3400, 0x89a0, 0xfcd3, 0x26f9, 0x2bde, 0x0, 0x0);
        gbc.writeMem(0xe8b2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x3400);
        EXPECT(gbc.pc(), 0xe8b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8b2), 0xcb);
        EXPECT(gbc.readMem(0xe8b3), 0x3);
        // CB 03 0189
        gbc.setState(0x7d87, 0x8d9a, 0x70f0, 0x2df7, 0x26a0, 0xa76a, 0x0, 0x0);
        gbc.writeMem(0x7d87, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x8d9a);
        EXPECT(gbc.pc(), 0x7d89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 018A
        gbc.setState(0x3176, 0x17d2, 0xabe0, 0xd0d9, 0x3a3f, 0x6f54, 0x1, 0x0);
        gbc.writeMem(0x3176, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x17d2);
        EXPECT(gbc.pc(), 0x3178);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 018B
        gbc.setState(0x5a7d, 0x61c1, 0x1b90, 0xd80c, 0xeaaf, 0x1458, 0x0, 0x1);
        gbc.writeMem(0x5a7d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x61c1);
        EXPECT(gbc.pc(), 0x5a7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 018C
        gbc.setState(0xdc14, 0xc679, 0x3c80, 0x2298, 0x5a74, 0x2fa2, 0x0, 0x1);
        gbc.writeMem(0xdc14, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xc679);
        EXPECT(gbc.pc(), 0xdc16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc14), 0xcb);
        EXPECT(gbc.readMem(0xdc15), 0x3);
        // CB 03 018D
        gbc.setState(0x7028, 0xac65, 0x77d0, 0x787b, 0x317, 0x6634, 0x1, 0x0);
        gbc.writeMem(0x7028, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xac65);
        EXPECT(gbc.pc(), 0x702a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 018E
        gbc.setState(0xaef2, 0x3af6, 0xd280, 0xc8fc, 0x5539, 0xd9f2, 0x1, 0x0);
        gbc.writeMem(0xaef2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x3af6);
        EXPECT(gbc.pc(), 0xaef4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaef2), 0xcb);
        EXPECT(gbc.readMem(0xaef3), 0x3);
        // CB 03 018F
        gbc.setState(0x100a, 0x4f8a, 0xdc90, 0xd612, 0xda62, 0x5a77, 0x1, 0x1);
        gbc.writeMem(0x100a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x4f8a);
        EXPECT(gbc.pc(), 0x100c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0190
        gbc.setState(0x2bf6, 0xb502, 0x6ee0, 0xfdfe, 0x91dc, 0xa733, 0x0, 0x0);
        gbc.writeMem(0x2bf6, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xb502);
        EXPECT(gbc.pc(), 0x2bf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0191
        gbc.setState(0xadc8, 0xf4af, 0x20f0, 0x3bc7, 0x44af, 0x565, 0x0, 0x1);
        gbc.writeMem(0xadc8, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xf4af);
        EXPECT(gbc.pc(), 0xadca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadc8), 0xcb);
        EXPECT(gbc.readMem(0xadc9), 0x3);
        // CB 03 0192
        gbc.setState(0xd1ca, 0x8267, 0x6280, 0xacd1, 0xbf4a, 0xbebd, 0x0, 0x0);
        gbc.writeMem(0xd1ca, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x8267);
        EXPECT(gbc.pc(), 0xd1cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1ca), 0xcb);
        EXPECT(gbc.readMem(0xd1cb), 0x3);
        // CB 03 0193
        gbc.setState(0x58b, 0xee9c, 0x78c0, 0xc678, 0x2399, 0x4a17, 0x0, 0x0);
        gbc.writeMem(0x58b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xee9c);
        EXPECT(gbc.pc(), 0x58d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0194
        gbc.setState(0x33ba, 0xc1ea, 0x9140, 0x2ef, 0x7c2, 0x3ac6, 0x0, 0x0);
        gbc.writeMem(0x33ba, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xc1ea);
        EXPECT(gbc.pc(), 0x33bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0195
        gbc.setState(0x4d30, 0x39e7, 0x3530, 0xceef, 0xc4af, 0x943d, 0x1, 0x0);
        gbc.writeMem(0x4d30, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x39e7);
        EXPECT(gbc.pc(), 0x4d32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0196
        gbc.setState(0x5a3d, 0x7caa, 0xab10, 0xec08, 0x509d, 0xee5a, 0x0, 0x0);
        gbc.writeMem(0x5a3d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x7caa);
        EXPECT(gbc.pc(), 0x5a3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0197
        gbc.setState(0x26f8, 0x9230, 0xc1f0, 0xc2e8, 0x3a6d, 0xb63c, 0x1, 0x0);
        gbc.writeMem(0x26f8, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x9230);
        EXPECT(gbc.pc(), 0x26fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0198
        gbc.setState(0x41cb, 0xaff8, 0x4900, 0x5cf5, 0x64de, 0xa292, 0x0, 0x0);
        gbc.writeMem(0x41cb, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xaff8);
        EXPECT(gbc.pc(), 0x41cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0199
        gbc.setState(0x538b, 0x2963, 0x9c40, 0xf68e, 0x43d1, 0x7f3c, 0x1, 0x1);
        gbc.writeMem(0x538b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x2963);
        EXPECT(gbc.pc(), 0x538d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 019A
        gbc.setState(0xe862, 0x17d5, 0x76d0, 0xe75e, 0x1ea9, 0xf964, 0x0, 0x0);
        gbc.writeMem(0xe862, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x17d5);
        EXPECT(gbc.pc(), 0xe864);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe862), 0xcb);
        EXPECT(gbc.readMem(0xe863), 0x3);
        // CB 03 019B
        gbc.setState(0x9462, 0x5a66, 0x6180, 0x66eb, 0x7bf, 0xbfdb, 0x1, 0x1);
        gbc.writeMem(0x9462, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x5a66);
        EXPECT(gbc.pc(), 0x9464);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9462), 0xcb);
        EXPECT(gbc.readMem(0x9463), 0x3);
        // CB 03 019C
        gbc.setState(0x609b, 0x3398, 0x3b40, 0xf68f, 0x40a6, 0xacc1, 0x1, 0x0);
        gbc.writeMem(0x609b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x3398);
        EXPECT(gbc.pc(), 0x609d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 019D
        gbc.setState(0x1cdd, 0x6583, 0x7b50, 0xde27, 0xbf46, 0x630, 0x0, 0x0);
        gbc.writeMem(0x1cdd, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x6583);
        EXPECT(gbc.pc(), 0x1cdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 019E
        gbc.setState(0x137f, 0xc97c, 0xfc20, 0xf811, 0x3e1, 0xa08f, 0x0, 0x0);
        gbc.writeMem(0x137f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xc97c);
        EXPECT(gbc.pc(), 0x1381);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 019F
        gbc.setState(0xe03a, 0xb1df, 0xf560, 0x910d, 0xd353, 0x33c2, 0x1, 0x0);
        gbc.writeMem(0xe03a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xb1df);
        EXPECT(gbc.pc(), 0xe03c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe03a), 0xcb);
        EXPECT(gbc.readMem(0xe03b), 0x3);
        // CB 03 01A0
        gbc.setState(0x7c25, 0x7d8e, 0x1de0, 0x4ce7, 0x1782, 0xc89, 0x1, 0x0);
        gbc.writeMem(0x7c25, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x7d8e);
        EXPECT(gbc.pc(), 0x7c27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 01A1
        gbc.setState(0x2fd9, 0x33de, 0x9810, 0xbc8b, 0x4aca, 0xb9f7, 0x0, 0x1);
        gbc.writeMem(0x2fd9, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x33de);
        EXPECT(gbc.pc(), 0x2fdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 01A2
        gbc.setState(0xec82, 0x9968, 0x3df0, 0x27ed, 0xeda7, 0xa3f1, 0x0, 0x1);
        gbc.writeMem(0xec82, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x9968);
        EXPECT(gbc.pc(), 0xec84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec82), 0xcb);
        EXPECT(gbc.readMem(0xec83), 0x3);
        // CB 03 01A3
        gbc.setState(0x1dca, 0xe34e, 0xbbe0, 0x8dab, 0x32b2, 0xa5e2, 0x1, 0x1);
        gbc.writeMem(0x1dca, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xe34e);
        EXPECT(gbc.pc(), 0x1dcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 01A4
        gbc.setState(0x948, 0x3c6c, 0x7c10, 0x893b, 0x2e5f, 0x6dd2, 0x0, 0x1);
        gbc.writeMem(0x948, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x3c6c);
        EXPECT(gbc.pc(), 0x94a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01A5
        gbc.setState(0x8f60, 0x2b38, 0x3dd0, 0x665c, 0x30bd, 0xc2d7, 0x1, 0x0);
        gbc.writeMem(0x8f60, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x2b38);
        EXPECT(gbc.pc(), 0x8f62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f60), 0xcb);
        EXPECT(gbc.readMem(0x8f61), 0x3);
        // CB 03 01A6
        gbc.setState(0x9822, 0x26cd, 0x3c20, 0x4dfa, 0xff27, 0xbdb2, 0x1, 0x1);
        gbc.writeMem(0x9822, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x26cd);
        EXPECT(gbc.pc(), 0x9824);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9822), 0xcb);
        EXPECT(gbc.readMem(0x9823), 0x3);
        // CB 03 01A7
        gbc.setState(0x4607, 0xcf3d, 0xd770, 0x3a89, 0x6fbe, 0xe865, 0x0, 0x1);
        gbc.writeMem(0x4607, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xcf3d);
        EXPECT(gbc.pc(), 0x4609);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 01A8
        gbc.setState(0xb53a, 0x9e4f, 0x6af0, 0xf901, 0xab31, 0xa61f, 0x1, 0x1);
        gbc.writeMem(0xb53a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x9e4f);
        EXPECT(gbc.pc(), 0xb53c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb53a), 0xcb);
        EXPECT(gbc.readMem(0xb53b), 0x3);
        // CB 03 01A9
        gbc.setState(0x6de2, 0x8d3, 0xe970, 0xc492, 0x7902, 0xb726, 0x0, 0x1);
        gbc.writeMem(0x6de2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x8d3);
        EXPECT(gbc.pc(), 0x6de4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01AA
        gbc.setState(0x4007, 0x8bda, 0x2b60, 0x27f3, 0x1145, 0x41d0, 0x1, 0x1);
        gbc.writeMem(0x4007, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x8bda);
        EXPECT(gbc.pc(), 0x4009);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01AB
        gbc.setState(0x82b9, 0x4e77, 0xf490, 0x67fe, 0x66bc, 0x5ab6, 0x0, 0x0);
        gbc.writeMem(0x82b9, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x4e77);
        EXPECT(gbc.pc(), 0x82bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82b9), 0xcb);
        EXPECT(gbc.readMem(0x82ba), 0x3);
        // CB 03 01AC
        gbc.setState(0xdb84, 0xcf02, 0x5450, 0x9218, 0x5761, 0xd889, 0x0, 0x0);
        gbc.writeMem(0xdb84, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xcf02);
        EXPECT(gbc.pc(), 0xdb86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb84), 0xcb);
        EXPECT(gbc.readMem(0xdb85), 0x3);
        // CB 03 01AD
        gbc.setState(0x5e70, 0x69de, 0xeb0, 0xcbb7, 0xd182, 0x15a4, 0x0, 0x1);
        gbc.writeMem(0x5e70, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x69de);
        EXPECT(gbc.pc(), 0x5e72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 01AE
        gbc.setState(0x148e, 0x8d82, 0x4bc0, 0x9f67, 0x9f5a, 0x1799, 0x1, 0x0);
        gbc.writeMem(0x148e, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x8d82);
        EXPECT(gbc.pc(), 0x1490);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01AF
        gbc.setState(0x58b0, 0x471, 0xbc10, 0x8eac, 0x352c, 0xd7b8, 0x0, 0x1);
        gbc.writeMem(0x58b0, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x471);
        EXPECT(gbc.pc(), 0x58b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01B0
        gbc.setState(0x6c2c, 0xe61, 0x4a60, 0xc539, 0x40ae, 0x9558, 0x0, 0x0);
        gbc.writeMem(0x6c2c, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xe61);
        EXPECT(gbc.pc(), 0x6c2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 01B1
        gbc.setState(0x1c9d, 0x3371, 0xbe70, 0x8388, 0x9bd7, 0x9fea, 0x0, 0x0);
        gbc.writeMem(0x1c9d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x3371);
        EXPECT(gbc.pc(), 0x1c9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 01B2
        gbc.setState(0x90f7, 0x90d4, 0x6e90, 0x50f, 0x8e35, 0xa863, 0x1, 0x1);
        gbc.writeMem(0x90f7, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x90d4);
        EXPECT(gbc.pc(), 0x90f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90f7), 0xcb);
        EXPECT(gbc.readMem(0x90f8), 0x3);
        // CB 03 01B3
        gbc.setState(0x85a8, 0xa2f, 0xe590, 0x9d9b, 0xa427, 0xde1d, 0x1, 0x1);
        gbc.writeMem(0x85a8, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xa2f);
        EXPECT(gbc.pc(), 0x85aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85a8), 0xcb);
        EXPECT(gbc.readMem(0x85a9), 0x3);
        // CB 03 01B4
        gbc.setState(0xb981, 0xb7ec, 0x4c10, 0x7291, 0x909b, 0xa951, 0x0, 0x1);
        gbc.writeMem(0xb981, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xb7ec);
        EXPECT(gbc.pc(), 0xb983);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb981), 0xcb);
        EXPECT(gbc.readMem(0xb982), 0x3);
        // CB 03 01B5
        gbc.setState(0x59d0, 0x2506, 0x8820, 0x753b, 0x76d7, 0x7d88, 0x1, 0x1);
        gbc.writeMem(0x59d0, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x2506);
        EXPECT(gbc.pc(), 0x59d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 01B6
        gbc.setState(0xe466, 0xd338, 0x640, 0xe2da, 0x4b13, 0xf5af, 0x1, 0x1);
        gbc.writeMem(0xe466, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xd338);
        EXPECT(gbc.pc(), 0xe468);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe466), 0xcb);
        EXPECT(gbc.readMem(0xe467), 0x3);
        // CB 03 01B7
        gbc.setState(0x8b96, 0x8461, 0x5140, 0xe2d4, 0x1971, 0x643e, 0x0, 0x1);
        gbc.writeMem(0x8b96, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x8461);
        EXPECT(gbc.pc(), 0x8b98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b96), 0xcb);
        EXPECT(gbc.readMem(0x8b97), 0x3);
        // CB 03 01B8
        gbc.setState(0x83a7, 0xd6e2, 0x2120, 0x989, 0x4783, 0x2f65, 0x1, 0x0);
        gbc.writeMem(0x83a7, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xd6e2);
        EXPECT(gbc.pc(), 0x83a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83a7), 0xcb);
        EXPECT(gbc.readMem(0x83a8), 0x3);
        // CB 03 01B9
        gbc.setState(0xd8b1, 0xcea0, 0xf10, 0x6c22, 0xb02a, 0xec3e, 0x0, 0x0);
        gbc.writeMem(0xd8b1, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xcea0);
        EXPECT(gbc.pc(), 0xd8b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8b1), 0xcb);
        EXPECT(gbc.readMem(0xd8b2), 0x3);
        // CB 03 01BA
        gbc.setState(0xbb21, 0xd2a7, 0xa490, 0x77d6, 0x80b0, 0xdace, 0x1, 0x1);
        gbc.writeMem(0xbb21, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xd2a7);
        EXPECT(gbc.pc(), 0xbb23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb21), 0xcb);
        EXPECT(gbc.readMem(0xbb22), 0x3);
        // CB 03 01BB
        gbc.setState(0x960f, 0x8d61, 0x6bd0, 0x580b, 0x3d24, 0x5c46, 0x0, 0x1);
        gbc.writeMem(0x960f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x8d61);
        EXPECT(gbc.pc(), 0x9611);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x960f), 0xcb);
        EXPECT(gbc.readMem(0x9610), 0x3);
        // CB 03 01BC
        gbc.setState(0x3ac0, 0x2837, 0xd450, 0x5b33, 0x4fe8, 0xe215, 0x1, 0x1);
        gbc.writeMem(0x3ac0, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x2837);
        EXPECT(gbc.pc(), 0x3ac2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 01BD
        gbc.setState(0x6fe7, 0x5a56, 0xe6e0, 0x148a, 0xbf43, 0x877, 0x1, 0x1);
        gbc.writeMem(0x6fe7, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x5a56);
        EXPECT(gbc.pc(), 0x6fe9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01BE
        gbc.setState(0xa836, 0x4350, 0x47d0, 0x6f1d, 0xf591, 0xe55e, 0x0, 0x1);
        gbc.writeMem(0xa836, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x4350);
        EXPECT(gbc.pc(), 0xa838);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa836), 0xcb);
        EXPECT(gbc.readMem(0xa837), 0x3);
        // CB 03 01BF
        gbc.setState(0x619d, 0xee8c, 0x59d0, 0x5128, 0x9329, 0xfc6, 0x1, 0x0);
        gbc.writeMem(0x619d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xee8c);
        EXPECT(gbc.pc(), 0x619f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01C0
        gbc.setState(0x710e, 0x416c, 0xb7e0, 0xa0b9, 0x9350, 0xb975, 0x0, 0x1);
        gbc.writeMem(0x710e, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x416c);
        EXPECT(gbc.pc(), 0x7110);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01C1
        gbc.setState(0xdc37, 0xf695, 0x6d20, 0x1e3e, 0x888c, 0x4838, 0x1, 0x1);
        gbc.writeMem(0xdc37, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xf695);
        EXPECT(gbc.pc(), 0xdc39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc37), 0xcb);
        EXPECT(gbc.readMem(0xdc38), 0x3);
        // CB 03 01C2
        gbc.setState(0xc2a2, 0xc754, 0xe230, 0xb0d8, 0x5ed9, 0x707a, 0x0, 0x0);
        gbc.writeMem(0xc2a2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xc754);
        EXPECT(gbc.pc(), 0xc2a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2a2), 0xcb);
        EXPECT(gbc.readMem(0xc2a3), 0x3);
        // CB 03 01C3
        gbc.setState(0x33a8, 0xafff, 0xdbc0, 0x1bbf, 0x54bd, 0xd4cf, 0x1, 0x0);
        gbc.writeMem(0x33a8, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xafff);
        EXPECT(gbc.pc(), 0x33aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 01C4
        gbc.setState(0x20b8, 0xcd33, 0xee20, 0xcd6a, 0xe7ea, 0xec52, 0x1, 0x1);
        gbc.writeMem(0x20b8, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xcd33);
        EXPECT(gbc.pc(), 0x20ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 01C5
        gbc.setState(0x7e60, 0x1c5, 0xe0e0, 0x8121, 0xd82e, 0xf889, 0x0, 0x0);
        gbc.writeMem(0x7e60, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x1c5);
        EXPECT(gbc.pc(), 0x7e62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01C6
        gbc.setState(0x18a, 0xcdb3, 0xab50, 0xa0a0, 0x6764, 0xa08c, 0x1, 0x1);
        gbc.writeMem(0x18a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xcdb3);
        EXPECT(gbc.pc(), 0x18c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01C8
        gbc.setState(0x2376, 0xacf6, 0x7900, 0xceac, 0x3765, 0x7e9a, 0x1, 0x1);
        gbc.writeMem(0x2376, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xacf6);
        EXPECT(gbc.pc(), 0x2378);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01C9
        gbc.setState(0x2640, 0x5780, 0x5b40, 0xd704, 0x4943, 0x1592, 0x1, 0x1);
        gbc.writeMem(0x2640, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x5780);
        EXPECT(gbc.pc(), 0x2642);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01CA
        gbc.setState(0x20cc, 0x29f4, 0x47a0, 0xa431, 0xa868, 0xa166, 0x0, 0x0);
        gbc.writeMem(0x20cc, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x29f4);
        EXPECT(gbc.pc(), 0x20ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01CB
        gbc.setState(0x9f6a, 0xa514, 0xa7f0, 0xdeb3, 0xc7a7, 0x1e1f, 0x1, 0x1);
        gbc.writeMem(0x9f6a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xa514);
        EXPECT(gbc.pc(), 0x9f6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f6a), 0xcb);
        EXPECT(gbc.readMem(0x9f6b), 0x3);
        // CB 03 01CC
        gbc.setState(0x39ed, 0x1d06, 0x330, 0xbe08, 0xa95e, 0xcea0, 0x1, 0x1);
        gbc.writeMem(0x39ed, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x1d06);
        EXPECT(gbc.pc(), 0x39ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01CD
        gbc.setState(0x5965, 0xacb3, 0xb870, 0xd364, 0x76dd, 0xf4e7, 0x1, 0x1);
        gbc.writeMem(0x5965, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xacb3);
        EXPECT(gbc.pc(), 0x5967);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 01CE
        gbc.setState(0x36e0, 0x4004, 0x7b10, 0x1d1c, 0xd274, 0x474d, 0x1, 0x0);
        gbc.writeMem(0x36e0, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x4004);
        EXPECT(gbc.pc(), 0x36e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01D0
        gbc.setState(0x5344, 0x27bf, 0x7f90, 0x58e8, 0x92b1, 0x933c, 0x0, 0x1);
        gbc.writeMem(0x5344, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x27bf);
        EXPECT(gbc.pc(), 0x5346);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 01D1
        gbc.setState(0x81bc, 0xdc2, 0x1a00, 0x1d64, 0xd83e, 0xd1ac, 0x1, 0x0);
        gbc.writeMem(0x81bc, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xdc2);
        EXPECT(gbc.pc(), 0x81be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81bc), 0xcb);
        EXPECT(gbc.readMem(0x81bd), 0x3);
        // CB 03 01D2
        gbc.setState(0x1038, 0xd61f, 0x6010, 0xfe2, 0xd104, 0xea96, 0x1, 0x0);
        gbc.writeMem(0x1038, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xd61f);
        EXPECT(gbc.pc(), 0x103a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01D3
        gbc.setState(0x8654, 0x3c48, 0x9930, 0xad5f, 0x2732, 0xc7a6, 0x0, 0x0);
        gbc.writeMem(0x8654, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x3c48);
        EXPECT(gbc.pc(), 0x8656);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8654), 0xcb);
        EXPECT(gbc.readMem(0x8655), 0x3);
        // CB 03 01D4
        gbc.setState(0x363d, 0x76a6, 0x7d20, 0x3cea, 0xd688, 0x8a55, 0x1, 0x0);
        gbc.writeMem(0x363d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x76a6);
        EXPECT(gbc.pc(), 0x363f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 01D5
        gbc.setState(0x6b5, 0x97c0, 0xd770, 0xfbd6, 0xd33d, 0xfaa, 0x1, 0x0);
        gbc.writeMem(0x6b5, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x97c0);
        EXPECT(gbc.pc(), 0x6b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01D7
        gbc.setState(0xc830, 0x5df9, 0x40c0, 0x7e39, 0xe349, 0xc9c9, 0x0, 0x1);
        gbc.writeMem(0xc830, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x5df9);
        EXPECT(gbc.pc(), 0xc832);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc830), 0xcb);
        EXPECT(gbc.readMem(0xc831), 0x3);
        // CB 03 01D8
        gbc.setState(0xde31, 0xfd58, 0x75c0, 0x12f9, 0x4f2f, 0x59e0, 0x1, 0x0);
        gbc.writeMem(0xde31, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xfd58);
        EXPECT(gbc.pc(), 0xde33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde31), 0xcb);
        EXPECT(gbc.readMem(0xde32), 0x3);
        // CB 03 01D9
        gbc.setState(0x9b1c, 0xc9d9, 0xe070, 0x392a, 0x40c9, 0x54a2, 0x1, 0x1);
        gbc.writeMem(0x9b1c, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xc9d9);
        EXPECT(gbc.pc(), 0x9b1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b1c), 0xcb);
        EXPECT(gbc.readMem(0x9b1d), 0x3);
        // CB 03 01DA
        gbc.setState(0xf88, 0x3e11, 0xd970, 0xee2e, 0xd929, 0xa904, 0x0, 0x1);
        gbc.writeMem(0xf88, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x3e11);
        EXPECT(gbc.pc(), 0xf8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01DB
        gbc.setState(0x3729, 0x1974, 0x4260, 0x96be, 0xec40, 0xac74, 0x1, 0x1);
        gbc.writeMem(0x3729, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x1974);
        EXPECT(gbc.pc(), 0x372b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01DC
        gbc.setState(0xea9, 0xb8ff, 0x5e10, 0xd4fe, 0x3cb5, 0xda57, 0x1, 0x0);
        gbc.writeMem(0xea9, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xb8ff);
        EXPECT(gbc.pc(), 0xeab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 01DD
        gbc.setState(0xa4e8, 0xb41e, 0x7b50, 0xaaac, 0x2711, 0xb580, 0x0, 0x0);
        gbc.writeMem(0xa4e8, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xb41e);
        EXPECT(gbc.pc(), 0xa4ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4e8), 0xcb);
        EXPECT(gbc.readMem(0xa4e9), 0x3);
        // CB 03 01DE
        gbc.setState(0x12a4, 0x8c7, 0x2090, 0xa8a0, 0x651d, 0x1d34, 0x0, 0x1);
        gbc.writeMem(0x12a4, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x8c7);
        EXPECT(gbc.pc(), 0x12a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01DF
        gbc.setState(0x2fd, 0x738d, 0xd790, 0xd4ae, 0xaf14, 0x5a1c, 0x0, 0x1);
        gbc.writeMem(0x2fd, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x738d);
        EXPECT(gbc.pc(), 0x2ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01E0
        gbc.setState(0x6de0, 0x5c56, 0x4f80, 0xa132, 0x5fa3, 0xba3d, 0x1, 0x0);
        gbc.writeMem(0x6de0, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x5c56);
        EXPECT(gbc.pc(), 0x6de2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 01E1
        gbc.setState(0x642, 0x38a7, 0x2590, 0x2621, 0x36fb, 0xa32c, 0x0, 0x0);
        gbc.writeMem(0x642, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x38a7);
        EXPECT(gbc.pc(), 0x644);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 01E2
        gbc.setState(0x1645, 0x109f, 0x8c70, 0x3f35, 0xd124, 0xa16c, 0x1, 0x0);
        gbc.writeMem(0x1645, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x109f);
        EXPECT(gbc.pc(), 0x1647);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01E3
        gbc.setState(0xd99b, 0x59b5, 0xb880, 0x2c4b, 0x9005, 0xa2e4, 0x0, 0x1);
        gbc.writeMem(0xd99b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x59b5);
        EXPECT(gbc.pc(), 0xd99d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd99b), 0xcb);
        EXPECT(gbc.readMem(0xd99c), 0x3);
        // CB 03 01E4
        gbc.setState(0x9669, 0x56f1, 0xb0b0, 0x6c42, 0xfa6c, 0xe1b3, 0x1, 0x0);
        gbc.writeMem(0x9669, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x56f1);
        EXPECT(gbc.pc(), 0x966b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9669), 0xcb);
        EXPECT(gbc.readMem(0x966a), 0x3);
        // CB 03 01E5
        gbc.setState(0x97b1, 0x56ea, 0x6c0, 0x26b8, 0xd7bd, 0x8d91, 0x1, 0x1);
        gbc.writeMem(0x97b1, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x56ea);
        EXPECT(gbc.pc(), 0x97b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97b1), 0xcb);
        EXPECT(gbc.readMem(0x97b2), 0x3);
        // CB 03 01E6
        gbc.setState(0xe04c, 0xb526, 0x97b0, 0x30af, 0xe422, 0x14d4, 0x1, 0x0);
        gbc.writeMem(0xe04c, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xb526);
        EXPECT(gbc.pc(), 0xe04e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe04c), 0xcb);
        EXPECT(gbc.readMem(0xe04d), 0x3);
        // CB 03 01E7
        gbc.setState(0xc5, 0x8c1a, 0x63d0, 0x2f79, 0xfa80, 0x8b8c, 0x0, 0x0);
        gbc.writeMem(0xc5, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x8c1a);
        EXPECT(gbc.pc(), 0xc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 01E8
        gbc.setState(0x12d2, 0xd790, 0xedc0, 0x696f, 0xbdff, 0x659e, 0x0, 0x0);
        gbc.writeMem(0x12d2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xd790);
        EXPECT(gbc.pc(), 0x12d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 01E9
        gbc.setState(0xcf5, 0x8015, 0x4f30, 0x99cd, 0x88f6, 0x5b52, 0x0, 0x0);
        gbc.writeMem(0xcf5, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x8015);
        EXPECT(gbc.pc(), 0xcf7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 01EA
        gbc.setState(0xe54e, 0xe9a5, 0x5050, 0xec55, 0xc8c6, 0x6b7b, 0x0, 0x1);
        gbc.writeMem(0xe54e, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xe9a5);
        EXPECT(gbc.pc(), 0xe550);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe54e), 0xcb);
        EXPECT(gbc.readMem(0xe54f), 0x3);
        // CB 03 01EB
        gbc.setState(0x546a, 0x1d25, 0x73d0, 0x1011, 0x7025, 0xb448, 0x0, 0x1);
        gbc.writeMem(0x546a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x1d25);
        EXPECT(gbc.pc(), 0x546c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01EC
        gbc.setState(0x39c1, 0x4a0, 0xce80, 0x1e61, 0xfb9, 0x8b66, 0x0, 0x0);
        gbc.writeMem(0x39c1, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x4a0);
        EXPECT(gbc.pc(), 0x39c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 01ED
        gbc.setState(0x26e3, 0xd22, 0x4fc0, 0xd37b, 0x9a7f, 0x1a80, 0x1, 0x0);
        gbc.writeMem(0x26e3, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xd22);
        EXPECT(gbc.pc(), 0x26e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01EE
        gbc.setState(0x62f8, 0xf6f5, 0x4ee0, 0x24f6, 0xef03, 0xe3c2, 0x1, 0x1);
        gbc.writeMem(0x62f8, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xf6f5);
        EXPECT(gbc.pc(), 0x62fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01EF
        gbc.setState(0x7424, 0x3661, 0x6740, 0xf6b2, 0x6dfb, 0x3415, 0x0, 0x0);
        gbc.writeMem(0x7424, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x3661);
        EXPECT(gbc.pc(), 0x7426);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 01F0
        gbc.setState(0x428a, 0x2e4d, 0x7860, 0xde74, 0x5236, 0xc740, 0x1, 0x1);
        gbc.writeMem(0x428a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x2e4d);
        EXPECT(gbc.pc(), 0x428c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01F1
        gbc.setState(0x4669, 0xdf11, 0xfb80, 0xca9a, 0x5f59, 0xf871, 0x1, 0x1);
        gbc.writeMem(0x4669, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xdf11);
        EXPECT(gbc.pc(), 0x466b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01F2
        gbc.setState(0x8fdf, 0x11f5, 0xd0c0, 0xdb0a, 0x30a0, 0x2a, 0x0, 0x0);
        gbc.writeMem(0x8fdf, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x11f5);
        EXPECT(gbc.pc(), 0x8fe1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fdf), 0xcb);
        EXPECT(gbc.readMem(0x8fe0), 0x3);
        // CB 03 01F3
        gbc.setState(0x2b44, 0xa473, 0x92b0, 0x1a67, 0xf6bf, 0xdf8d, 0x1, 0x1);
        gbc.writeMem(0x2b44, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xa473);
        EXPECT(gbc.pc(), 0x2b46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 01F4
        gbc.setState(0x38cb, 0xf108, 0xbb20, 0xe1a3, 0xa629, 0x5e30, 0x0, 0x1);
        gbc.writeMem(0x38cb, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xf108);
        EXPECT(gbc.pc(), 0x38cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01F5
        gbc.setState(0x46e7, 0xc6c5, 0xdfe0, 0x2531, 0xc437, 0xad89, 0x1, 0x0);
        gbc.writeMem(0x46e7, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xc6c5);
        EXPECT(gbc.pc(), 0x46e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01F6
        gbc.setState(0xa102, 0x9d1, 0xc310, 0x137c, 0xe2b, 0xbb4, 0x1, 0x0);
        gbc.writeMem(0xa102, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x9d1);
        EXPECT(gbc.pc(), 0xa104);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa102), 0xcb);
        EXPECT(gbc.readMem(0xa103), 0x3);
        // CB 03 01F7
        gbc.setState(0x24d8, 0x72ac, 0x82b0, 0x8138, 0xc746, 0xb159, 0x1, 0x1);
        gbc.writeMem(0x24d8, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x72ac);
        EXPECT(gbc.pc(), 0x24da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01F8
        gbc.setState(0x81fa, 0x5536, 0xbf10, 0x60bb, 0x2866, 0x4040, 0x1, 0x1);
        gbc.writeMem(0x81fa, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x5536);
        EXPECT(gbc.pc(), 0x81fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81fa), 0xcb);
        EXPECT(gbc.readMem(0x81fb), 0x3);
        // CB 03 01F9
        gbc.setState(0x4f, 0xa7b3, 0x58d0, 0xdb3e, 0x71a2, 0xdb9c, 0x0, 0x1);
        gbc.writeMem(0x4f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xa7b3);
        EXPECT(gbc.pc(), 0x51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 01FA
        gbc.setState(0x6240, 0x59db, 0x9390, 0x9c5a, 0x30d, 0x6408, 0x0, 0x0);
        gbc.writeMem(0x6240, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x59db);
        EXPECT(gbc.pc(), 0x6242);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01FB
        gbc.setState(0x7c73, 0x47c4, 0xdb10, 0x48c8, 0x9f3d, 0x6f3e, 0x1, 0x1);
        gbc.writeMem(0x7c73, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x47c4);
        EXPECT(gbc.pc(), 0x7c75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01FC
        gbc.setState(0x88ed, 0x5ab8, 0xbb0, 0x9e67, 0x5f3e, 0xc75d, 0x0, 0x1);
        gbc.writeMem(0x88ed, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x5ab8);
        EXPECT(gbc.pc(), 0x88ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88ed), 0xcb);
        EXPECT(gbc.readMem(0x88ee), 0x3);
        // CB 03 01FD
        gbc.setState(0x4e50, 0x5145, 0x4990, 0x5c58, 0xcc60, 0xbd95, 0x0, 0x1);
        gbc.writeMem(0x4e50, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x5145);
        EXPECT(gbc.pc(), 0x4e52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01FE
        gbc.setState(0x4684, 0x6661, 0x6a70, 0x4a8, 0x8635, 0x888, 0x0, 0x0);
        gbc.writeMem(0x4684, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x6661);
        EXPECT(gbc.pc(), 0x4686);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 01FF
        gbc.setState(0x2f31, 0xd041, 0xf900, 0x35d2, 0x3d21, 0x45da, 0x1, 0x0);
        gbc.writeMem(0x2f31, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xd041);
        EXPECT(gbc.pc(), 0x2f33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0200
        gbc.setState(0x6dad, 0xee27, 0xc550, 0x92ec, 0x67e, 0xd984, 0x0, 0x1);
        gbc.writeMem(0x6dad, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xee27);
        EXPECT(gbc.pc(), 0x6daf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0201
        gbc.setState(0xe208, 0x2cc8, 0xec50, 0xd89d, 0xe379, 0xf9ee, 0x1, 0x1);
        gbc.writeMem(0xe208, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x2cc8);
        EXPECT(gbc.pc(), 0xe20a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe208), 0xcb);
        EXPECT(gbc.readMem(0xe209), 0x3);
        // CB 03 0202
        gbc.setState(0xa674, 0x4427, 0xbdb0, 0x52ab, 0x6196, 0xc118, 0x0, 0x1);
        gbc.writeMem(0xa674, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x4427);
        EXPECT(gbc.pc(), 0xa676);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa674), 0xcb);
        EXPECT(gbc.readMem(0xa675), 0x3);
        // CB 03 0204
        gbc.setState(0x5000, 0x13e7, 0x2a50, 0x3e8f, 0xd26b, 0x8440, 0x1, 0x1);
        gbc.writeMem(0x5000, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x13e7);
        EXPECT(gbc.pc(), 0x5002);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0205
        gbc.setState(0x3ab2, 0x52f, 0xf520, 0x2a21, 0x901c, 0xf309, 0x0, 0x1);
        gbc.writeMem(0x3ab2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x52f);
        EXPECT(gbc.pc(), 0x3ab4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0206
        gbc.setState(0x5251, 0xb6b4, 0x9050, 0x166c, 0x7862, 0x1287, 0x1, 0x1);
        gbc.writeMem(0x5251, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xb6b4);
        EXPECT(gbc.pc(), 0x5253);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0207
        gbc.setState(0xbea6, 0x65f9, 0x7c40, 0x59d6, 0xe415, 0x303, 0x0, 0x0);
        gbc.writeMem(0xbea6, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x65f9);
        EXPECT(gbc.pc(), 0xbea8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbea6), 0xcb);
        EXPECT(gbc.readMem(0xbea7), 0x3);
        // CB 03 0208
        gbc.setState(0xcd3f, 0x1b52, 0x54a0, 0x239f, 0xc3f9, 0xb7ad, 0x1, 0x1);
        gbc.writeMem(0xcd3f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x1b52);
        EXPECT(gbc.pc(), 0xcd41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd3f), 0xcb);
        EXPECT(gbc.readMem(0xcd40), 0x3);
        // CB 03 0209
        gbc.setState(0x8241, 0x719d, 0x2860, 0xc4fe, 0x8e8, 0x7624, 0x0, 0x1);
        gbc.writeMem(0x8241, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x719d);
        EXPECT(gbc.pc(), 0x8243);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8241), 0xcb);
        EXPECT(gbc.readMem(0x8242), 0x3);
        // CB 03 020A
        gbc.setState(0xb092, 0x4faf, 0x6630, 0xd7c0, 0xbc72, 0xc36f, 0x1, 0x1);
        gbc.writeMem(0xb092, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x4faf);
        EXPECT(gbc.pc(), 0xb094);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb092), 0xcb);
        EXPECT(gbc.readMem(0xb093), 0x3);
        // CB 03 020B
        gbc.setState(0xd146, 0xa78e, 0x9360, 0x1aca, 0xdef1, 0x3e2d, 0x0, 0x0);
        gbc.writeMem(0xd146, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xa78e);
        EXPECT(gbc.pc(), 0xd148);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd146), 0xcb);
        EXPECT(gbc.readMem(0xd147), 0x3);
        // CB 03 020C
        gbc.setState(0x2748, 0x36f7, 0x3730, 0x3de3, 0x1664, 0x2375, 0x1, 0x1);
        gbc.writeMem(0x2748, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x36f7);
        EXPECT(gbc.pc(), 0x274a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 020D
        gbc.setState(0x2251, 0xbf2b, 0xa4b0, 0xeffe, 0x93d6, 0x42f5, 0x1, 0x0);
        gbc.writeMem(0x2251, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xbf2b);
        EXPECT(gbc.pc(), 0x2253);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 020E
        gbc.setState(0xc8ea, 0x449d, 0x6bb0, 0x55ef, 0xec6e, 0x6a2f, 0x0, 0x1);
        gbc.writeMem(0xc8ea, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x449d);
        EXPECT(gbc.pc(), 0xc8ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8ea), 0xcb);
        EXPECT(gbc.readMem(0xc8eb), 0x3);
        // CB 03 020F
        gbc.setState(0x15d2, 0xa1c9, 0xbe60, 0x3269, 0x6c94, 0xe6e9, 0x1, 0x0);
        gbc.writeMem(0x15d2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xa1c9);
        EXPECT(gbc.pc(), 0x15d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0210
        gbc.setState(0x9955, 0x57b9, 0x2f20, 0x2aca, 0x3acd, 0x5de9, 0x0, 0x1);
        gbc.writeMem(0x9955, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x57b9);
        EXPECT(gbc.pc(), 0x9957);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9955), 0xcb);
        EXPECT(gbc.readMem(0x9956), 0x3);
        // CB 03 0211
        gbc.setState(0x716d, 0x983f, 0x57e0, 0x30aa, 0x6693, 0x8c83, 0x1, 0x1);
        gbc.writeMem(0x716d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x983f);
        EXPECT(gbc.pc(), 0x716f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0212
        gbc.setState(0x9068, 0x62b3, 0xaf40, 0x8f83, 0x2e33, 0x1f3a, 0x0, 0x1);
        gbc.writeMem(0x9068, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x62b3);
        EXPECT(gbc.pc(), 0x906a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9068), 0xcb);
        EXPECT(gbc.readMem(0x9069), 0x3);
        // CB 03 0213
        gbc.setState(0xdce0, 0xc359, 0x1c40, 0xfc53, 0xfc44, 0x6deb, 0x1, 0x1);
        gbc.writeMem(0xdce0, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xc359);
        EXPECT(gbc.pc(), 0xdce2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdce0), 0xcb);
        EXPECT(gbc.readMem(0xdce1), 0x3);
        // CB 03 0214
        gbc.setState(0x47b0, 0x7061, 0x6860, 0xc70f, 0x63ef, 0xe792, 0x0, 0x0);
        gbc.writeMem(0x47b0, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x7061);
        EXPECT(gbc.pc(), 0x47b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0215
        gbc.setState(0x492a, 0x4838, 0x8f40, 0xca51, 0xea90, 0x5c1d, 0x0, 0x0);
        gbc.writeMem(0x492a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x4838);
        EXPECT(gbc.pc(), 0x492c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0216
        gbc.setState(0x895f, 0x3430, 0xa720, 0xf1dd, 0x4fc5, 0x4ffe, 0x1, 0x1);
        gbc.writeMem(0x895f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x3430);
        EXPECT(gbc.pc(), 0x8961);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x895f), 0xcb);
        EXPECT(gbc.readMem(0x8960), 0x3);
        // CB 03 0217
        gbc.setState(0x84b1, 0x6d50, 0x7f60, 0xcd6d, 0x22e3, 0x28d8, 0x1, 0x0);
        gbc.writeMem(0x84b1, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x6d50);
        EXPECT(gbc.pc(), 0x84b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84b1), 0xcb);
        EXPECT(gbc.readMem(0x84b2), 0x3);
        // CB 03 0218
        gbc.setState(0xd64b, 0xcf17, 0x3900, 0x62b9, 0xe53c, 0x2ae, 0x1, 0x0);
        gbc.writeMem(0xd64b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xcf17);
        EXPECT(gbc.pc(), 0xd64d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd64b), 0xcb);
        EXPECT(gbc.readMem(0xd64c), 0x3);
        // CB 03 0219
        gbc.setState(0x7f7d, 0x55dc, 0x2730, 0x98f9, 0xa311, 0x2954, 0x0, 0x1);
        gbc.writeMem(0x7f7d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x55dc);
        EXPECT(gbc.pc(), 0x7f7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 021A
        gbc.setState(0x6fb9, 0x5a32, 0x5790, 0x77d5, 0xd6b5, 0xb95, 0x0, 0x0);
        gbc.writeMem(0x6fb9, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x5a32);
        EXPECT(gbc.pc(), 0x6fbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 021B
        gbc.setState(0x2a99, 0x907c, 0x6f20, 0xdb82, 0xd76e, 0xf838, 0x0, 0x0);
        gbc.writeMem(0x2a99, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x907c);
        EXPECT(gbc.pc(), 0x2a9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 021C
        gbc.setState(0x4769, 0x5168, 0x1f70, 0xf3dc, 0x262, 0x8c9b, 0x1, 0x0);
        gbc.writeMem(0x4769, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x5168);
        EXPECT(gbc.pc(), 0x476b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 021D
        gbc.setState(0xa36d, 0x855d, 0x2220, 0x7692, 0xdb0a, 0x163, 0x1, 0x1);
        gbc.writeMem(0xa36d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x855d);
        EXPECT(gbc.pc(), 0xa36f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa36d), 0xcb);
        EXPECT(gbc.readMem(0xa36e), 0x3);
        // CB 03 021E
        gbc.setState(0xdb5a, 0xba31, 0x1100, 0x954, 0x4113, 0x58a0, 0x0, 0x1);
        gbc.writeMem(0xdb5a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xba31);
        EXPECT(gbc.pc(), 0xdb5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb5a), 0xcb);
        EXPECT(gbc.readMem(0xdb5b), 0x3);
        // CB 03 021F
        gbc.setState(0x26f0, 0xf8ab, 0x1b80, 0x6403, 0x10d8, 0x279c, 0x1, 0x1);
        gbc.writeMem(0x26f0, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xf8ab);
        EXPECT(gbc.pc(), 0x26f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0220
        gbc.setState(0x2fcc, 0x3b8, 0xf6e0, 0x8b48, 0xa311, 0x5bd6, 0x1, 0x0);
        gbc.writeMem(0x2fcc, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x3b8);
        EXPECT(gbc.pc(), 0x2fce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0221
        gbc.setState(0x601a, 0xa0aa, 0xc600, 0xbf43, 0xc541, 0xcf65, 0x0, 0x1);
        gbc.writeMem(0x601a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xa0aa);
        EXPECT(gbc.pc(), 0x601c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0222
        gbc.setState(0x88a9, 0x9cbd, 0x41a0, 0x2f0c, 0x8694, 0x997e, 0x1, 0x0);
        gbc.writeMem(0x88a9, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x9cbd);
        EXPECT(gbc.pc(), 0x88ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88a9), 0xcb);
        EXPECT(gbc.readMem(0x88aa), 0x3);
        // CB 03 0223
        gbc.setState(0x7931, 0x36a1, 0x46d0, 0x97bc, 0xaf, 0xd1fb, 0x1, 0x0);
        gbc.writeMem(0x7931, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x36a1);
        EXPECT(gbc.pc(), 0x7933);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0224
        gbc.setState(0x8242, 0x408e, 0xf760, 0x7f91, 0x5dcf, 0x9ce3, 0x1, 0x1);
        gbc.writeMem(0x8242, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x408e);
        EXPECT(gbc.pc(), 0x8244);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8242), 0xcb);
        EXPECT(gbc.readMem(0x8243), 0x3);
        // CB 03 0225
        gbc.setState(0x12ef, 0xeade, 0xef0, 0x7d81, 0xeb65, 0xf021, 0x1, 0x1);
        gbc.writeMem(0x12ef, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xeade);
        EXPECT(gbc.pc(), 0x12f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0227
        gbc.setState(0x715, 0xf433, 0xdfb0, 0x7e15, 0x3da8, 0x80b1, 0x1, 0x0);
        gbc.writeMem(0x715, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xf433);
        EXPECT(gbc.pc(), 0x717);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0228
        gbc.setState(0xc577, 0xb400, 0x9250, 0x552f, 0xc19a, 0xeae0, 0x0, 0x1);
        gbc.writeMem(0xc577, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xb400);
        EXPECT(gbc.pc(), 0xc579);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc577), 0xcb);
        EXPECT(gbc.readMem(0xc578), 0x3);
        // CB 03 0229
        gbc.setState(0xa2cd, 0x12c3, 0x870, 0x9cb1, 0x95d3, 0xad33, 0x1, 0x1);
        gbc.writeMem(0xa2cd, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x12c3);
        EXPECT(gbc.pc(), 0xa2cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2cd), 0xcb);
        EXPECT(gbc.readMem(0xa2ce), 0x3);
        // CB 03 022A
        gbc.setState(0xd56a, 0xb2e2, 0x65e0, 0xf668, 0xeb36, 0x191d, 0x0, 0x0);
        gbc.writeMem(0xd56a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xb2e2);
        EXPECT(gbc.pc(), 0xd56c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd56a), 0xcb);
        EXPECT(gbc.readMem(0xd56b), 0x3);
        // CB 03 022B
        gbc.setState(0x8453, 0xbee3, 0x4600, 0xab0e, 0xdad5, 0x1383, 0x0, 0x0);
        gbc.writeMem(0x8453, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xbee3);
        EXPECT(gbc.pc(), 0x8455);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8453), 0xcb);
        EXPECT(gbc.readMem(0x8454), 0x3);
        // CB 03 022C
        gbc.setState(0x4bce, 0x7f2c, 0x4310, 0xa698, 0xc2b4, 0x91c, 0x1, 0x1);
        gbc.writeMem(0x4bce, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x7f2c);
        EXPECT(gbc.pc(), 0x4bd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 022D
        gbc.setState(0xcb27, 0x1f7a, 0x50f0, 0x3a1, 0xa8b5, 0x5b69, 0x1, 0x1);
        gbc.writeMem(0xcb27, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x1f7a);
        EXPECT(gbc.pc(), 0xcb29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb27), 0xcb);
        EXPECT(gbc.readMem(0xcb28), 0x3);
        // CB 03 022E
        gbc.setState(0xdfcf, 0x32ce, 0x1150, 0xf18a, 0xe200, 0x6c95, 0x1, 0x0);
        gbc.writeMem(0xdfcf, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x32ce);
        EXPECT(gbc.pc(), 0xdfd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfcf), 0xcb);
        EXPECT(gbc.readMem(0xdfd0), 0x3);
        // CB 03 022F
        gbc.setState(0x843c, 0x96c5, 0x6c70, 0xbcd8, 0xb3e8, 0x38a, 0x1, 0x1);
        gbc.writeMem(0x843c, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x96c5);
        EXPECT(gbc.pc(), 0x843e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x843c), 0xcb);
        EXPECT(gbc.readMem(0x843d), 0x3);
        // CB 03 0230
        gbc.setState(0x9f12, 0x1a46, 0xfe80, 0x37c6, 0xce6, 0x6741, 0x0, 0x0);
        gbc.writeMem(0x9f12, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x1a46);
        EXPECT(gbc.pc(), 0x9f14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f12), 0xcb);
        EXPECT(gbc.readMem(0x9f13), 0x3);
        // CB 03 0231
        gbc.setState(0x89c6, 0x6b4, 0xad30, 0xa55b, 0x7e45, 0x658f, 0x1, 0x1);
        gbc.writeMem(0x89c6, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x6b4);
        EXPECT(gbc.pc(), 0x89c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89c6), 0xcb);
        EXPECT(gbc.readMem(0x89c7), 0x3);
        // CB 03 0232
        gbc.setState(0x5aa, 0xd925, 0x670, 0xbf17, 0x76c5, 0x3a9c, 0x1, 0x1);
        gbc.writeMem(0x5aa, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xd925);
        EXPECT(gbc.pc(), 0x5ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0233
        gbc.setState(0xbc0, 0xcfb8, 0x4a0, 0x82ea, 0x2a39, 0xa1af, 0x0, 0x1);
        gbc.writeMem(0xbc0, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xcfb8);
        EXPECT(gbc.pc(), 0xbc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0234
        gbc.setState(0x147b, 0x3282, 0xef0, 0x2c2a, 0xc1ea, 0x1bd1, 0x1, 0x0);
        gbc.writeMem(0x147b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x3282);
        EXPECT(gbc.pc(), 0x147d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0235
        gbc.setState(0x5988, 0x3596, 0x2580, 0x7383, 0xb122, 0x3123, 0x0, 0x1);
        gbc.writeMem(0x5988, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x3596);
        EXPECT(gbc.pc(), 0x598a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0236
        gbc.setState(0x3659, 0x169c, 0xd70, 0xe570, 0x3a32, 0xc0de, 0x0, 0x1);
        gbc.writeMem(0x3659, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x169c);
        EXPECT(gbc.pc(), 0x365b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0237
        gbc.setState(0xa6cb, 0xff1f, 0xcc50, 0x5842, 0x94ef, 0x30bb, 0x0, 0x0);
        gbc.writeMem(0xa6cb, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xff1f);
        EXPECT(gbc.pc(), 0xa6cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6cb), 0xcb);
        EXPECT(gbc.readMem(0xa6cc), 0x3);
        // CB 03 0238
        gbc.setState(0x6943, 0x72f0, 0x38b0, 0x9945, 0x765e, 0x4c6b, 0x1, 0x0);
        gbc.writeMem(0x6943, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x72f0);
        EXPECT(gbc.pc(), 0x6945);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0239
        gbc.setState(0x5d, 0xe42c, 0xffb0, 0x5cc7, 0x3e8b, 0xe165, 0x1, 0x0);
        gbc.writeMem(0x5d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xe42c);
        EXPECT(gbc.pc(), 0x5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 023A
        gbc.setState(0x6937, 0x23e6, 0x3430, 0x6c5b, 0xbf92, 0xfbff, 0x0, 0x1);
        gbc.writeMem(0x6937, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x23e6);
        EXPECT(gbc.pc(), 0x6939);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 023B
        gbc.setState(0x6202, 0xd476, 0x66e0, 0x9a84, 0xb0b8, 0x34af, 0x1, 0x1);
        gbc.writeMem(0x6202, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xd476);
        EXPECT(gbc.pc(), 0x6204);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 023C
        gbc.setState(0x6b3b, 0x948e, 0xcc10, 0x1593, 0xc0c2, 0x1c80, 0x0, 0x1);
        gbc.writeMem(0x6b3b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x948e);
        EXPECT(gbc.pc(), 0x6b3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 023D
        gbc.setState(0x7b, 0x9acf, 0xb2d0, 0x2b4, 0x8f47, 0xfbaf, 0x1, 0x1);
        gbc.writeMem(0x7b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x9acf);
        EXPECT(gbc.pc(), 0x7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 023E
        gbc.setState(0x7373, 0x882a, 0xf540, 0xe9a6, 0xad47, 0xc187, 0x0, 0x1);
        gbc.writeMem(0x7373, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x882a);
        EXPECT(gbc.pc(), 0x7375);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 023F
        gbc.setState(0xd802, 0xcd38, 0x6fe0, 0xdad, 0x43a3, 0x915c, 0x1, 0x0);
        gbc.writeMem(0xd802, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xcd38);
        EXPECT(gbc.pc(), 0xd804);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd802), 0xcb);
        EXPECT(gbc.readMem(0xd803), 0x3);
        // CB 03 0240
        gbc.setState(0xb67d, 0x56b6, 0x3720, 0x1732, 0x899e, 0xae03, 0x0, 0x0);
        gbc.writeMem(0xb67d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x56b6);
        EXPECT(gbc.pc(), 0xb67f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb67d), 0xcb);
        EXPECT(gbc.readMem(0xb67e), 0x3);
        // CB 03 0242
        gbc.setState(0x136b, 0xaa1, 0xc9e0, 0x6180, 0x4348, 0x3e85, 0x1, 0x0);
        gbc.writeMem(0x136b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xaa1);
        EXPECT(gbc.pc(), 0x136d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0243
        gbc.setState(0x8c0f, 0xe159, 0x14e0, 0xe667, 0x2ade, 0xc897, 0x0, 0x0);
        gbc.writeMem(0x8c0f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xe159);
        EXPECT(gbc.pc(), 0x8c11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c0f), 0xcb);
        EXPECT(gbc.readMem(0x8c10), 0x3);
        // CB 03 0244
        gbc.setState(0x25eb, 0x4d43, 0x1250, 0xb18b, 0x9345, 0x6971, 0x0, 0x1);
        gbc.writeMem(0x25eb, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x4d43);
        EXPECT(gbc.pc(), 0x25ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0245
        gbc.setState(0x4d21, 0x2e11, 0x8910, 0x6cec, 0xd3b1, 0x3fac, 0x0, 0x0);
        gbc.writeMem(0x4d21, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x2e11);
        EXPECT(gbc.pc(), 0x4d23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0246
        gbc.setState(0x26a2, 0x42f2, 0x38b0, 0xf27a, 0x4cd, 0x52df, 0x1, 0x1);
        gbc.writeMem(0x26a2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x42f2);
        EXPECT(gbc.pc(), 0x26a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0247
        gbc.setState(0x4fc1, 0x7413, 0xa370, 0xced2, 0xee01, 0x7972, 0x1, 0x1);
        gbc.writeMem(0x4fc1, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x7413);
        EXPECT(gbc.pc(), 0x4fc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0248
        gbc.setState(0x4b38, 0x737c, 0xa6c0, 0x6cd4, 0xe5a6, 0x9e38, 0x0, 0x0);
        gbc.writeMem(0x4b38, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x737c);
        EXPECT(gbc.pc(), 0x4b3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0249
        gbc.setState(0x4253, 0x7c85, 0xad80, 0x5afc, 0xe87e, 0x71bf, 0x1, 0x1);
        gbc.writeMem(0x4253, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x7c85);
        EXPECT(gbc.pc(), 0x4255);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 024A
        gbc.setState(0x6eae, 0x30be, 0xd210, 0x1b11, 0x16f0, 0x9110, 0x0, 0x1);
        gbc.writeMem(0x6eae, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x30be);
        EXPECT(gbc.pc(), 0x6eb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 024B
        gbc.setState(0x702a, 0xacae, 0xc2c0, 0x96c, 0xac74, 0xb743, 0x0, 0x1);
        gbc.writeMem(0x702a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xacae);
        EXPECT(gbc.pc(), 0x702c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 024C
        gbc.setState(0xe797, 0xeae0, 0x210, 0x90a0, 0x44b5, 0x3b0a, 0x1, 0x0);
        gbc.writeMem(0xe797, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xeae0);
        EXPECT(gbc.pc(), 0xe799);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe797), 0xcb);
        EXPECT(gbc.readMem(0xe798), 0x3);
        // CB 03 024D
        gbc.setState(0x7f54, 0x74df, 0xbe00, 0xfd7a, 0x8c7a, 0xaf18, 0x0, 0x0);
        gbc.writeMem(0x7f54, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x74df);
        EXPECT(gbc.pc(), 0x7f56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 024E
        gbc.setState(0x165a, 0xc5ba, 0x8230, 0xda06, 0xf5ca, 0xad98, 0x1, 0x1);
        gbc.writeMem(0x165a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xc5ba);
        EXPECT(gbc.pc(), 0x165c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 024F
        gbc.setState(0x2862, 0x76e6, 0xaac0, 0xe241, 0x5bdb, 0xe555, 0x0, 0x0);
        gbc.writeMem(0x2862, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x76e6);
        EXPECT(gbc.pc(), 0x2864);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0250
        gbc.setState(0xd941, 0xe0d0, 0xe250, 0x7831, 0x92d2, 0xf1f, 0x0, 0x1);
        gbc.writeMem(0xd941, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xe0d0);
        EXPECT(gbc.pc(), 0xd943);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd941), 0xcb);
        EXPECT(gbc.readMem(0xd942), 0x3);
        // CB 03 0251
        gbc.setState(0x7cd9, 0x5ec5, 0xeb90, 0xc412, 0xd93d, 0xbfdf, 0x1, 0x1);
        gbc.writeMem(0x7cd9, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x5ec5);
        EXPECT(gbc.pc(), 0x7cdb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0252
        gbc.setState(0x933d, 0xb362, 0x4c90, 0xc58f, 0xa59a, 0x6614, 0x0, 0x0);
        gbc.writeMem(0x933d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xb362);
        EXPECT(gbc.pc(), 0x933f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x933d), 0xcb);
        EXPECT(gbc.readMem(0x933e), 0x3);
        // CB 03 0253
        gbc.setState(0xa53e, 0xefe2, 0x1950, 0x4978, 0xc1cb, 0x6704, 0x1, 0x1);
        gbc.writeMem(0xa53e, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xefe2);
        EXPECT(gbc.pc(), 0xa540);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa53e), 0xcb);
        EXPECT(gbc.readMem(0xa53f), 0x3);
        // CB 03 0254
        gbc.setState(0xbf21, 0xdfdd, 0xd2d0, 0x5822, 0xdd4a, 0x2e92, 0x1, 0x0);
        gbc.writeMem(0xbf21, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xdfdd);
        EXPECT(gbc.pc(), 0xbf23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf21), 0xcb);
        EXPECT(gbc.readMem(0xbf22), 0x3);
        // CB 03 0255
        gbc.setState(0xaccc, 0xe0fb, 0xeb20, 0x5cde, 0x8fd9, 0x60cd, 0x0, 0x1);
        gbc.writeMem(0xaccc, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xe0fb);
        EXPECT(gbc.pc(), 0xacce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaccc), 0xcb);
        EXPECT(gbc.readMem(0xaccd), 0x3);
        // CB 03 0256
        gbc.setState(0xd818, 0x4c96, 0x4dc0, 0x42ee, 0xa400, 0x560, 0x1, 0x0);
        gbc.writeMem(0xd818, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x4c96);
        EXPECT(gbc.pc(), 0xd81a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd818), 0xcb);
        EXPECT(gbc.readMem(0xd819), 0x3);
        // CB 03 0257
        gbc.setState(0x686b, 0x6886, 0x6af0, 0xa4e4, 0x7b09, 0xd127, 0x0, 0x0);
        gbc.writeMem(0x686b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x6886);
        EXPECT(gbc.pc(), 0x686d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0259
        gbc.setState(0x3b71, 0x4566, 0x93a0, 0x6ad8, 0xbcfe, 0x832, 0x0, 0x0);
        gbc.writeMem(0x3b71, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x4566);
        EXPECT(gbc.pc(), 0x3b73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 025A
        gbc.setState(0xe45, 0xfce4, 0x5160, 0xbb6d, 0x973a, 0x3de7, 0x1, 0x0);
        gbc.writeMem(0xe45, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xfce4);
        EXPECT(gbc.pc(), 0xe47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 025B
        gbc.setState(0xccc9, 0x1965, 0xbcc0, 0x9168, 0xcfa9, 0x76fa, 0x0, 0x0);
        gbc.writeMem(0xccc9, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x1965);
        EXPECT(gbc.pc(), 0xcccb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccc9), 0xcb);
        EXPECT(gbc.readMem(0xccca), 0x3);
        // CB 03 025C
        gbc.setState(0xe98f, 0x5996, 0x8260, 0x3463, 0xb980, 0x28dc, 0x0, 0x0);
        gbc.writeMem(0xe98f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x5996);
        EXPECT(gbc.pc(), 0xe991);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe98f), 0xcb);
        EXPECT(gbc.readMem(0xe990), 0x3);
        // CB 03 025D
        gbc.setState(0x845d, 0xece, 0x1e50, 0x11b6, 0x564e, 0x75f5, 0x0, 0x0);
        gbc.writeMem(0x845d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xece);
        EXPECT(gbc.pc(), 0x845f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x845d), 0xcb);
        EXPECT(gbc.readMem(0x845e), 0x3);
        // CB 03 025E
        gbc.setState(0x689f, 0x77de, 0x8700, 0xa70a, 0x9f34, 0xabfc, 0x0, 0x0);
        gbc.writeMem(0x689f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x77de);
        EXPECT(gbc.pc(), 0x68a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0260
        gbc.setState(0xba77, 0xe696, 0x58f0, 0xdaa9, 0x640f, 0x87b0, 0x0, 0x0);
        gbc.writeMem(0xba77, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xe696);
        EXPECT(gbc.pc(), 0xba79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba77), 0xcb);
        EXPECT(gbc.readMem(0xba78), 0x3);
        // CB 03 0261
        gbc.setState(0xe78a, 0x9704, 0x71d0, 0xcca9, 0xbf1e, 0x63c8, 0x1, 0x0);
        gbc.writeMem(0xe78a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x9704);
        EXPECT(gbc.pc(), 0xe78c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe78a), 0xcb);
        EXPECT(gbc.readMem(0xe78b), 0x3);
        // CB 03 0262
        gbc.setState(0xb0e6, 0x4d97, 0x15c0, 0xdf4b, 0xa83e, 0xa88d, 0x0, 0x0);
        gbc.writeMem(0xb0e6, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x4d97);
        EXPECT(gbc.pc(), 0xb0e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0e6), 0xcb);
        EXPECT(gbc.readMem(0xb0e7), 0x3);
        // CB 03 0263
        gbc.setState(0x9ad5, 0x1c99, 0xcb0, 0x958e, 0xa420, 0xa683, 0x0, 0x0);
        gbc.writeMem(0x9ad5, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x1c99);
        EXPECT(gbc.pc(), 0x9ad7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ad5), 0xcb);
        EXPECT(gbc.readMem(0x9ad6), 0x3);
        // CB 03 0264
        gbc.setState(0x9a9a, 0x6794, 0x8620, 0xbc91, 0x34e9, 0x504c, 0x0, 0x1);
        gbc.writeMem(0x9a9a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x6794);
        EXPECT(gbc.pc(), 0x9a9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a9a), 0xcb);
        EXPECT(gbc.readMem(0x9a9b), 0x3);
        // CB 03 0267
        gbc.setState(0x2ef5, 0xefe9, 0xe870, 0xead4, 0xa92, 0xb16a, 0x1, 0x0);
        gbc.writeMem(0x2ef5, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xefe9);
        EXPECT(gbc.pc(), 0x2ef7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0268
        gbc.setState(0x6b3b, 0xc4f8, 0xdc10, 0xa70a, 0xed49, 0x94e7, 0x1, 0x1);
        gbc.writeMem(0x6b3b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xc4f8);
        EXPECT(gbc.pc(), 0x6b3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 026A
        gbc.setState(0x7c27, 0x9676, 0x7ab0, 0x2a31, 0x8678, 0xb3f6, 0x0, 0x1);
        gbc.writeMem(0x7c27, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x9676);
        EXPECT(gbc.pc(), 0x7c29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 026C
        gbc.setState(0x9450, 0x45df, 0x8d60, 0x5531, 0xea0, 0xbe28, 0x1, 0x0);
        gbc.writeMem(0x9450, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x45df);
        EXPECT(gbc.pc(), 0x9452);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9450), 0xcb);
        EXPECT(gbc.readMem(0x9451), 0x3);
        // CB 03 026D
        gbc.setState(0xacff, 0xc3d1, 0x1e50, 0x5811, 0xc3a0, 0xd67, 0x1, 0x0);
        gbc.writeMem(0xacff, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xc3d1);
        EXPECT(gbc.pc(), 0xad01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacff), 0xcb);
        EXPECT(gbc.readMem(0xad00), 0x3);
        // CB 03 026E
        gbc.setState(0x45d7, 0x4aef, 0x4980, 0x7c32, 0xc460, 0xbc43, 0x1, 0x0);
        gbc.writeMem(0x45d7, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x4aef);
        EXPECT(gbc.pc(), 0x45d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0270
        gbc.setState(0x3bfd, 0x58e6, 0x7a50, 0x2df9, 0x58f0, 0x8ef2, 0x0, 0x0);
        gbc.writeMem(0x3bfd, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x58e6);
        EXPECT(gbc.pc(), 0x3bff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0271
        gbc.setState(0x6021, 0x5437, 0x6d0, 0x6d31, 0x5300, 0x8436, 0x0, 0x0);
        gbc.writeMem(0x6021, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x5437);
        EXPECT(gbc.pc(), 0x6023);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0272
        gbc.setState(0x349e, 0x9bdf, 0xd450, 0x1a38, 0x781f, 0x92e5, 0x1, 0x0);
        gbc.writeMem(0x349e, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x9bdf);
        EXPECT(gbc.pc(), 0x34a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0273
        gbc.setState(0xb301, 0xc802, 0x6380, 0x5c0, 0x2337, 0x92ec, 0x0, 0x0);
        gbc.writeMem(0xb301, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xc802);
        EXPECT(gbc.pc(), 0xb303);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb301), 0xcb);
        EXPECT(gbc.readMem(0xb302), 0x3);
        // CB 03 0274
        gbc.setState(0x8e97, 0x31bf, 0xbee0, 0xb354, 0xaf63, 0x481a, 0x1, 0x1);
        gbc.writeMem(0x8e97, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x31bf);
        EXPECT(gbc.pc(), 0x8e99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e97), 0xcb);
        EXPECT(gbc.readMem(0x8e98), 0x3);
        // CB 03 0275
        gbc.setState(0x2ca8, 0x8074, 0xa210, 0x8e7, 0x6a05, 0x56fd, 0x0, 0x1);
        gbc.writeMem(0x2ca8, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x8074);
        EXPECT(gbc.pc(), 0x2caa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0276
        gbc.setState(0x6e08, 0x6ce, 0x7990, 0x6523, 0xbba, 0x5342, 0x0, 0x0);
        gbc.writeMem(0x6e08, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x6ce);
        EXPECT(gbc.pc(), 0x6e0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0277
        gbc.setState(0xaefb, 0x425b, 0xb230, 0xb100, 0xfb35, 0x10a6, 0x1, 0x1);
        gbc.writeMem(0xaefb, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x425b);
        EXPECT(gbc.pc(), 0xaefd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaefb), 0xcb);
        EXPECT(gbc.readMem(0xaefc), 0x3);
        // CB 03 0278
        gbc.setState(0x2346, 0x1fe2, 0xf950, 0xa215, 0x6396, 0x24d7, 0x0, 0x1);
        gbc.writeMem(0x2346, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x1fe2);
        EXPECT(gbc.pc(), 0x2348);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0279
        gbc.setState(0xb5b0, 0xccfe, 0xdb50, 0xb1a0, 0x239e, 0xfb64, 0x1, 0x1);
        gbc.writeMem(0xb5b0, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xccfe);
        EXPECT(gbc.pc(), 0xb5b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5b0), 0xcb);
        EXPECT(gbc.readMem(0xb5b1), 0x3);
        // CB 03 027A
        gbc.setState(0x874f, 0x1dbc, 0x4300, 0x6ef2, 0xcce5, 0x4815, 0x1, 0x1);
        gbc.writeMem(0x874f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x1dbc);
        EXPECT(gbc.pc(), 0x8751);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x874f), 0xcb);
        EXPECT(gbc.readMem(0x8750), 0x3);
        // CB 03 027B
        gbc.setState(0xbfec, 0xa2ac, 0xd740, 0x5bb1, 0x2e6b, 0x3bba, 0x0, 0x1);
        gbc.writeMem(0xbfec, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xa2ac);
        EXPECT(gbc.pc(), 0xbfee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfec), 0xcb);
        EXPECT(gbc.readMem(0xbfed), 0x3);
        // CB 03 027C
        gbc.setState(0xcfe3, 0xe374, 0xc220, 0x2b70, 0xada3, 0x54d0, 0x1, 0x1);
        gbc.writeMem(0xcfe3, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xe374);
        EXPECT(gbc.pc(), 0xcfe5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfe3), 0xcb);
        EXPECT(gbc.readMem(0xcfe4), 0x3);
        // CB 03 027D
        gbc.setState(0x7020, 0xf178, 0xf830, 0x3391, 0xc607, 0xce74, 0x1, 0x1);
        gbc.writeMem(0x7020, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xf178);
        EXPECT(gbc.pc(), 0x7022);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 027E
        gbc.setState(0x602d, 0x49b8, 0x2150, 0x1dc1, 0x1c52, 0x4d5e, 0x0, 0x1);
        gbc.writeMem(0x602d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x49b8);
        EXPECT(gbc.pc(), 0x602f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 027F
        gbc.setState(0x8f27, 0x9d2c, 0x7b0, 0x9b1a, 0x1e42, 0x1141, 0x0, 0x1);
        gbc.writeMem(0x8f27, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x9d2c);
        EXPECT(gbc.pc(), 0x8f29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f27), 0xcb);
        EXPECT(gbc.readMem(0x8f28), 0x3);
        // CB 03 0280
        gbc.setState(0xb1a7, 0xb698, 0xfe90, 0xd574, 0xa8f6, 0xcf0f, 0x1, 0x0);
        gbc.writeMem(0xb1a7, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xb698);
        EXPECT(gbc.pc(), 0xb1a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1a7), 0xcb);
        EXPECT(gbc.readMem(0xb1a8), 0x3);
        // CB 03 0282
        gbc.setState(0x5155, 0xde32, 0xd320, 0x6e9b, 0xe583, 0x45f5, 0x0, 0x1);
        gbc.writeMem(0x5155, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xde32);
        EXPECT(gbc.pc(), 0x5157);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0283
        gbc.setState(0x81b2, 0x3813, 0xfcb0, 0x4734, 0x83b8, 0xfd3d, 0x1, 0x0);
        gbc.writeMem(0x81b2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x3813);
        EXPECT(gbc.pc(), 0x81b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81b2), 0xcb);
        EXPECT(gbc.readMem(0x81b3), 0x3);
        // CB 03 0284
        gbc.setState(0x4ee9, 0xe681, 0x8310, 0xce1d, 0xdc99, 0xcaa9, 0x0, 0x0);
        gbc.writeMem(0x4ee9, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xe681);
        EXPECT(gbc.pc(), 0x4eeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0285
        gbc.setState(0x1d44, 0xb107, 0x34f0, 0x8ee7, 0x9536, 0x3f04, 0x1, 0x0);
        gbc.writeMem(0x1d44, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xb107);
        EXPECT(gbc.pc(), 0x1d46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0286
        gbc.setState(0x7f0a, 0xcce6, 0x2800, 0x6dc3, 0xc0bb, 0x7832, 0x0, 0x0);
        gbc.writeMem(0x7f0a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xcce6);
        EXPECT(gbc.pc(), 0x7f0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0287
        gbc.setState(0x1359, 0xe659, 0x20c0, 0x88c6, 0x2df3, 0x7d9e, 0x0, 0x1);
        gbc.writeMem(0x1359, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xe659);
        EXPECT(gbc.pc(), 0x135b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0289
        gbc.setState(0xb6c2, 0x4cda, 0x7cc0, 0x49d, 0xec2a, 0x22c9, 0x0, 0x0);
        gbc.writeMem(0xb6c2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x4cda);
        EXPECT(gbc.pc(), 0xb6c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6c2), 0xcb);
        EXPECT(gbc.readMem(0xb6c3), 0x3);
        // CB 03 028A
        gbc.setState(0x6582, 0xec87, 0x2040, 0xa510, 0xc0f7, 0x1213, 0x0, 0x0);
        gbc.writeMem(0x6582, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xec87);
        EXPECT(gbc.pc(), 0x6584);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 028B
        gbc.setState(0xc2ad, 0x16af, 0x16f0, 0x857e, 0xf2d3, 0x74d5, 0x0, 0x0);
        gbc.writeMem(0xc2ad, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x16af);
        EXPECT(gbc.pc(), 0xc2af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2ad), 0xcb);
        EXPECT(gbc.readMem(0xc2ae), 0x3);
        // CB 03 028C
        gbc.setState(0xa9f2, 0xf8a0, 0xa060, 0xe571, 0xeeb2, 0xd591, 0x1, 0x1);
        gbc.writeMem(0xa9f2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xf8a0);
        EXPECT(gbc.pc(), 0xa9f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9f2), 0xcb);
        EXPECT(gbc.readMem(0xa9f3), 0x3);
        // CB 03 028D
        gbc.setState(0x2a9f, 0x63e3, 0x7630, 0x4fe9, 0x74ed, 0xf9d2, 0x1, 0x1);
        gbc.writeMem(0x2a9f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x63e3);
        EXPECT(gbc.pc(), 0x2aa1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 028E
        gbc.setState(0x4281, 0x66f1, 0x9760, 0x2d27, 0xf665, 0xaf97, 0x1, 0x0);
        gbc.writeMem(0x4281, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x66f1);
        EXPECT(gbc.pc(), 0x4283);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 028F
        gbc.setState(0x7a52, 0x8b20, 0x7630, 0xa968, 0x781f, 0xeab5, 0x0, 0x0);
        gbc.writeMem(0x7a52, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x8b20);
        EXPECT(gbc.pc(), 0x7a54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0290
        gbc.setState(0xb48, 0x1211, 0xbbd0, 0x29d7, 0xd926, 0x3af, 0x0, 0x0);
        gbc.writeMem(0xb48, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x1211);
        EXPECT(gbc.pc(), 0xb4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0291
        gbc.setState(0x7b73, 0xe7c7, 0x7a50, 0x6c40, 0xd612, 0xbb50, 0x0, 0x0);
        gbc.writeMem(0x7b73, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xe7c7);
        EXPECT(gbc.pc(), 0x7b75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0292
        gbc.setState(0x28b2, 0x5d, 0xbed0, 0xd37c, 0xc0a2, 0x1dcc, 0x0, 0x1);
        gbc.writeMem(0x28b2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x5d);
        EXPECT(gbc.pc(), 0x28b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0294
        gbc.setState(0x15c4, 0xad06, 0x1800, 0x43a8, 0xfc74, 0x8215, 0x0, 0x1);
        gbc.writeMem(0x15c4, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xad06);
        EXPECT(gbc.pc(), 0x15c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0295
        gbc.setState(0xb613, 0x7488, 0x84c0, 0xc04a, 0xce04, 0x244d, 0x1, 0x1);
        gbc.writeMem(0xb613, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x7488);
        EXPECT(gbc.pc(), 0xb615);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb613), 0xcb);
        EXPECT(gbc.readMem(0xb614), 0x3);
        // CB 03 0296
        gbc.setState(0x9c0d, 0x2929, 0xe1d0, 0xf023, 0xb5ed, 0xb968, 0x1, 0x1);
        gbc.writeMem(0x9c0d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x2929);
        EXPECT(gbc.pc(), 0x9c0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c0d), 0xcb);
        EXPECT(gbc.readMem(0x9c0e), 0x3);
        // CB 03 0297
        gbc.setState(0xda54, 0xae5c, 0xbc40, 0x9e0e, 0x81fd, 0xca0b, 0x0, 0x1);
        gbc.writeMem(0xda54, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xae5c);
        EXPECT(gbc.pc(), 0xda56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda54), 0xcb);
        EXPECT(gbc.readMem(0xda55), 0x3);
        // CB 03 0298
        gbc.setState(0x5af, 0xc57b, 0x3100, 0xc854, 0xed73, 0xe6d8, 0x0, 0x1);
        gbc.writeMem(0x5af, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xc57b);
        EXPECT(gbc.pc(), 0x5b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0299
        gbc.setState(0x4663, 0xf9fb, 0x82c0, 0xa6a4, 0x7d91, 0x24bd, 0x0, 0x0);
        gbc.writeMem(0x4663, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xf9fb);
        EXPECT(gbc.pc(), 0x4665);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 029A
        gbc.setState(0x78cc, 0x1738, 0xdae0, 0xa35d, 0x549, 0x86ec, 0x1, 0x1);
        gbc.writeMem(0x78cc, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x1738);
        EXPECT(gbc.pc(), 0x78ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 029B
        gbc.setState(0x8f77, 0x4f8f, 0xbf30, 0xc3de, 0x1c0a, 0xc7d4, 0x0, 0x0);
        gbc.writeMem(0x8f77, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x4f8f);
        EXPECT(gbc.pc(), 0x8f79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f77), 0xcb);
        EXPECT(gbc.readMem(0x8f78), 0x3);
        // CB 03 029C
        gbc.setState(0xd9af, 0x6c07, 0x41a0, 0x182d, 0x66b5, 0xad4e, 0x0, 0x1);
        gbc.writeMem(0xd9af, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x6c07);
        EXPECT(gbc.pc(), 0xd9b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9af), 0xcb);
        EXPECT(gbc.readMem(0xd9b0), 0x3);
        // CB 03 029D
        gbc.setState(0x653a, 0x8dfd, 0xb160, 0xa52b, 0x2b20, 0xe398, 0x1, 0x1);
        gbc.writeMem(0x653a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x8dfd);
        EXPECT(gbc.pc(), 0x653c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 029E
        gbc.setState(0x9311, 0xd18c, 0x2540, 0xcf07, 0xd24, 0x93e0, 0x0, 0x1);
        gbc.writeMem(0x9311, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xd18c);
        EXPECT(gbc.pc(), 0x9313);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9311), 0xcb);
        EXPECT(gbc.readMem(0x9312), 0x3);
        // CB 03 029F
        gbc.setState(0x8c56, 0x6408, 0x64b0, 0xf156, 0xd3b5, 0x3353, 0x0, 0x0);
        gbc.writeMem(0x8c56, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x6408);
        EXPECT(gbc.pc(), 0x8c58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c56), 0xcb);
        EXPECT(gbc.readMem(0x8c57), 0x3);
        // CB 03 02A0
        gbc.setState(0xe81e, 0xec1c, 0x36f0, 0x6176, 0x4c4b, 0x2261, 0x1, 0x0);
        gbc.writeMem(0xe81e, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xec1c);
        EXPECT(gbc.pc(), 0xe820);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe81e), 0xcb);
        EXPECT(gbc.readMem(0xe81f), 0x3);
        // CB 03 02A1
        gbc.setState(0xcfc1, 0x3041, 0x1070, 0xaa95, 0x974b, 0x9843, 0x0, 0x0);
        gbc.writeMem(0xcfc1, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x3041);
        EXPECT(gbc.pc(), 0xcfc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfc1), 0xcb);
        EXPECT(gbc.readMem(0xcfc2), 0x3);
        // CB 03 02A2
        gbc.setState(0x9c43, 0xa5a5, 0xe930, 0x559, 0x3099, 0xf29, 0x1, 0x0);
        gbc.writeMem(0x9c43, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xa5a5);
        EXPECT(gbc.pc(), 0x9c45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c43), 0xcb);
        EXPECT(gbc.readMem(0x9c44), 0x3);
        // CB 03 02A3
        gbc.setState(0xc74, 0xde92, 0xc2f0, 0xf0c3, 0x4119, 0x7e4b, 0x0, 0x1);
        gbc.writeMem(0xc74, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xde92);
        EXPECT(gbc.pc(), 0xc76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 02A4
        gbc.setState(0x56f, 0x991d, 0x4c50, 0xc51b, 0x4bd6, 0x607a, 0x1, 0x1);
        gbc.writeMem(0x56f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x991d);
        EXPECT(gbc.pc(), 0x571);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 02A5
        gbc.setState(0xda5f, 0xe132, 0x1c00, 0x9f60, 0xd36f, 0x3b0e, 0x1, 0x0);
        gbc.writeMem(0xda5f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xe132);
        EXPECT(gbc.pc(), 0xda61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda5f), 0xcb);
        EXPECT(gbc.readMem(0xda60), 0x3);
        // CB 03 02A6
        gbc.setState(0xd4e, 0xa24b, 0x7d0, 0xa544, 0xcb05, 0x8f3c, 0x1, 0x0);
        gbc.writeMem(0xd4e, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xa24b);
        EXPECT(gbc.pc(), 0xd50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 02A7
        gbc.setState(0xe88f, 0x9cdc, 0x5de0, 0x8222, 0x7685, 0x5486, 0x0, 0x1);
        gbc.writeMem(0xe88f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x9cdc);
        EXPECT(gbc.pc(), 0xe891);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe88f), 0xcb);
        EXPECT(gbc.readMem(0xe890), 0x3);
        // CB 03 02A8
        gbc.setState(0x3b60, 0xf66, 0x8bb0, 0x969d, 0xad6f, 0x9c26, 0x1, 0x0);
        gbc.writeMem(0x3b60, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xf66);
        EXPECT(gbc.pc(), 0x3b62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 02A9
        gbc.setState(0x501a, 0xe8f6, 0xf620, 0xb3eb, 0x359c, 0x53de, 0x0, 0x0);
        gbc.writeMem(0x501a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xe8f6);
        EXPECT(gbc.pc(), 0x501c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 02AA
        gbc.setState(0x4593, 0x674d, 0x1810, 0x4f38, 0xdead, 0xea40, 0x1, 0x1);
        gbc.writeMem(0x4593, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x674d);
        EXPECT(gbc.pc(), 0x4595);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 02AB
        gbc.setState(0xab61, 0x5abd, 0x4620, 0x5f00, 0xdbc0, 0x7367, 0x0, 0x1);
        gbc.writeMem(0xab61, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x5abd);
        EXPECT(gbc.pc(), 0xab63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab61), 0xcb);
        EXPECT(gbc.readMem(0xab62), 0x3);
        // CB 03 02AC
        gbc.setState(0x2785, 0xf7a5, 0xe7b0, 0xd559, 0x7ac9, 0x1906, 0x1, 0x1);
        gbc.writeMem(0x2785, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xf7a5);
        EXPECT(gbc.pc(), 0x2787);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 02AD
        gbc.setState(0xa436, 0x8f7e, 0x3640, 0x6fb1, 0xfeb9, 0x9d85, 0x0, 0x1);
        gbc.writeMem(0xa436, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x8f7e);
        EXPECT(gbc.pc(), 0xa438);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa436), 0xcb);
        EXPECT(gbc.readMem(0xa437), 0x3);
        // CB 03 02AE
        gbc.setState(0x94b3, 0xa3eb, 0xe940, 0x3073, 0x82e, 0x8d9b, 0x1, 0x0);
        gbc.writeMem(0x94b3, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xa3eb);
        EXPECT(gbc.pc(), 0x94b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94b3), 0xcb);
        EXPECT(gbc.readMem(0x94b4), 0x3);
        // CB 03 02AF
        gbc.setState(0x2011, 0x36a9, 0xc8d0, 0xefd, 0x6bbe, 0x9b39, 0x0, 0x0);
        gbc.writeMem(0x2011, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x36a9);
        EXPECT(gbc.pc(), 0x2013);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 02B0
        gbc.setState(0x68df, 0xc676, 0xed80, 0x84fc, 0x3fe4, 0x7432, 0x1, 0x1);
        gbc.writeMem(0x68df, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xc676);
        EXPECT(gbc.pc(), 0x68e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 02B1
        gbc.setState(0x15c0, 0x33aa, 0x7830, 0x17ef, 0xdd38, 0x9df2, 0x1, 0x1);
        gbc.writeMem(0x15c0, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x33aa);
        EXPECT(gbc.pc(), 0x15c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 02B2
        gbc.setState(0x232a, 0x6eb8, 0xc100, 0x40b7, 0xd06b, 0x7b83, 0x1, 0x1);
        gbc.writeMem(0x232a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x6eb8);
        EXPECT(gbc.pc(), 0x232c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 02B3
        gbc.setState(0x2cf6, 0x192e, 0xeef0, 0xeabc, 0x6f5c, 0xfff6, 0x0, 0x1);
        gbc.writeMem(0x2cf6, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x192e);
        EXPECT(gbc.pc(), 0x2cf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 02B4
        gbc.setState(0xd821, 0x84fb, 0xba90, 0xb14, 0x7454, 0x7d56, 0x1, 0x0);
        gbc.writeMem(0xd821, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x84fb);
        EXPECT(gbc.pc(), 0xd823);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd821), 0xcb);
        EXPECT(gbc.readMem(0xd822), 0x3);
        // CB 03 02B5
        gbc.setState(0xb820, 0xf063, 0x8620, 0xf856, 0x6a6e, 0x28e4, 0x0, 0x1);
        gbc.writeMem(0xb820, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xf063);
        EXPECT(gbc.pc(), 0xb822);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb820), 0xcb);
        EXPECT(gbc.readMem(0xb821), 0x3);
        // CB 03 02B6
        gbc.setState(0x194, 0xf335, 0xd190, 0x57bb, 0x13cb, 0x8ffd, 0x0, 0x0);
        gbc.writeMem(0x194, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xf335);
        EXPECT(gbc.pc(), 0x196);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 02B7
        gbc.setState(0x6fc8, 0x2895, 0x900, 0x4efd, 0x928, 0xb627, 0x1, 0x0);
        gbc.writeMem(0x6fc8, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x2895);
        EXPECT(gbc.pc(), 0x6fca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 02B8
        gbc.setState(0x22, 0x1bda, 0xc0, 0x4e53, 0x4463, 0xd7ea, 0x0, 0x0);
        gbc.writeMem(0x22, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x1bda);
        EXPECT(gbc.pc(), 0x24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 02B9
        gbc.setState(0x90f0, 0x15ea, 0x86b0, 0x94e5, 0x58b0, 0xe09c, 0x1, 0x1);
        gbc.writeMem(0x90f0, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x15ea);
        EXPECT(gbc.pc(), 0x90f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90f0), 0xcb);
        EXPECT(gbc.readMem(0x90f1), 0x3);
        // CB 03 02BB
        gbc.setState(0xcd47, 0xe39d, 0xee0, 0xdd74, 0x896d, 0x63d3, 0x0, 0x0);
        gbc.writeMem(0xcd47, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xe39d);
        EXPECT(gbc.pc(), 0xcd49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd47), 0xcb);
        EXPECT(gbc.readMem(0xcd48), 0x3);
        // CB 03 02BC
        gbc.setState(0xa6e2, 0x4e60, 0x1970, 0x2038, 0x5a1e, 0xbf58, 0x1, 0x1);
        gbc.writeMem(0xa6e2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x4e60);
        EXPECT(gbc.pc(), 0xa6e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6e2), 0xcb);
        EXPECT(gbc.readMem(0xa6e3), 0x3);
        // CB 03 02BD
        gbc.setState(0x46f1, 0xf17b, 0x5730, 0xee5c, 0x512b, 0x4401, 0x1, 0x1);
        gbc.writeMem(0x46f1, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xf17b);
        EXPECT(gbc.pc(), 0x46f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 02BE
        gbc.setState(0x3ea0, 0x9acf, 0x2370, 0xab2e, 0xdae1, 0x7019, 0x0, 0x1);
        gbc.writeMem(0x3ea0, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x9acf);
        EXPECT(gbc.pc(), 0x3ea2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 02BF
        gbc.setState(0x2ebb, 0xdf12, 0xb550, 0x1e35, 0xf86b, 0x1a2d, 0x1, 0x0);
        gbc.writeMem(0x2ebb, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xdf12);
        EXPECT(gbc.pc(), 0x2ebd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 02C0
        gbc.setState(0xe564, 0xb526, 0xb220, 0xc397, 0x7eee, 0xabb2, 0x0, 0x0);
        gbc.writeMem(0xe564, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xb526);
        EXPECT(gbc.pc(), 0xe566);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe564), 0xcb);
        EXPECT(gbc.readMem(0xe565), 0x3);
        // CB 03 02C1
        gbc.setState(0x37a0, 0x5dbc, 0xadd0, 0x742a, 0x8db, 0xb8b, 0x1, 0x0);
        gbc.writeMem(0x37a0, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x5dbc);
        EXPECT(gbc.pc(), 0x37a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 02C2
        gbc.setState(0x22c9, 0xe4d9, 0x3e60, 0xdb4e, 0xcc32, 0x9022, 0x1, 0x1);
        gbc.writeMem(0x22c9, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xe4d9);
        EXPECT(gbc.pc(), 0x22cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 02C3
        gbc.setState(0x476a, 0x90e8, 0x8970, 0xb206, 0x4ae2, 0x1b78, 0x1, 0x0);
        gbc.writeMem(0x476a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x90e8);
        EXPECT(gbc.pc(), 0x476c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 02C4
        gbc.setState(0x7bc1, 0x2642, 0x2ad0, 0x84ce, 0xb2e2, 0xf1eb, 0x1, 0x0);
        gbc.writeMem(0x7bc1, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x2642);
        EXPECT(gbc.pc(), 0x7bc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 02C5
        gbc.setState(0x3242, 0x3848, 0x16b0, 0xd14d, 0x4ac3, 0xe9b0, 0x0, 0x0);
        gbc.writeMem(0x3242, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x3848);
        EXPECT(gbc.pc(), 0x3244);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 02C6
        gbc.setState(0xe8dd, 0xf206, 0xb160, 0x249f, 0x1bc7, 0x1794, 0x0, 0x1);
        gbc.writeMem(0xe8dd, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xf206);
        EXPECT(gbc.pc(), 0xe8df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8dd), 0xcb);
        EXPECT(gbc.readMem(0xe8de), 0x3);
        // CB 03 02C7
        gbc.setState(0x74ce, 0x3618, 0xfbc0, 0xa5fc, 0x4356, 0x9c41, 0x0, 0x0);
        gbc.writeMem(0x74ce, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x3618);
        EXPECT(gbc.pc(), 0x74d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 02C8
        gbc.setState(0x9c1c, 0x489f, 0x5940, 0x3739, 0xb841, 0x2b9, 0x0, 0x1);
        gbc.writeMem(0x9c1c, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x489f);
        EXPECT(gbc.pc(), 0x9c1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c1c), 0xcb);
        EXPECT(gbc.readMem(0x9c1d), 0x3);
        // CB 03 02C9
        gbc.setState(0x92e6, 0xeb7f, 0x5c30, 0x7c4b, 0x261d, 0x7619, 0x1, 0x0);
        gbc.writeMem(0x92e6, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xeb7f);
        EXPECT(gbc.pc(), 0x92e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92e6), 0xcb);
        EXPECT(gbc.readMem(0x92e7), 0x3);
        // CB 03 02CA
        gbc.setState(0x457a, 0xfefd, 0x4700, 0x8f0f, 0xe1db, 0xe1e5, 0x1, 0x1);
        gbc.writeMem(0x457a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xfefd);
        EXPECT(gbc.pc(), 0x457c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 02CB
        gbc.setState(0x9c83, 0xf062, 0x1be0, 0xa6e5, 0x117, 0xd79a, 0x1, 0x0);
        gbc.writeMem(0x9c83, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xf062);
        EXPECT(gbc.pc(), 0x9c85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c83), 0xcb);
        EXPECT(gbc.readMem(0x9c84), 0x3);
        // CB 03 02CC
        gbc.setState(0x8ff2, 0xcc14, 0x9f0, 0x462c, 0x2544, 0x48c0, 0x1, 0x0);
        gbc.writeMem(0x8ff2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xcc14);
        EXPECT(gbc.pc(), 0x8ff4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ff2), 0xcb);
        EXPECT(gbc.readMem(0x8ff3), 0x3);
        // CB 03 02CD
        gbc.setState(0x1467, 0xa882, 0xe1f0, 0xc334, 0x1669, 0xeadf, 0x1, 0x0);
        gbc.writeMem(0x1467, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xa882);
        EXPECT(gbc.pc(), 0x1469);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 02CE
        gbc.setState(0x259b, 0x7a1f, 0xf440, 0x907f, 0x2714, 0xe913, 0x0, 0x0);
        gbc.writeMem(0x259b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x7a1f);
        EXPECT(gbc.pc(), 0x259d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 02CF
        gbc.setState(0x9987, 0x3ad7, 0xb230, 0x74f, 0xc138, 0xebc8, 0x1, 0x1);
        gbc.writeMem(0x9987, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x3ad7);
        EXPECT(gbc.pc(), 0x9989);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9987), 0xcb);
        EXPECT(gbc.readMem(0x9988), 0x3);
        // CB 03 02D0
        gbc.setState(0xafd5, 0x596a, 0x910, 0xb0cf, 0xca5f, 0x720, 0x0, 0x0);
        gbc.writeMem(0xafd5, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x596a);
        EXPECT(gbc.pc(), 0xafd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafd5), 0xcb);
        EXPECT(gbc.readMem(0xafd6), 0x3);
        // CB 03 02D1
        gbc.setState(0xdf69, 0x892c, 0xe0a0, 0x3afb, 0x9099, 0x949e, 0x0, 0x0);
        gbc.writeMem(0xdf69, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x892c);
        EXPECT(gbc.pc(), 0xdf6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf69), 0xcb);
        EXPECT(gbc.readMem(0xdf6a), 0x3);
        // CB 03 02D2
        gbc.setState(0x9b5b, 0xc69, 0xd160, 0xaca6, 0xa4e3, 0x652f, 0x1, 0x0);
        gbc.writeMem(0x9b5b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xc69);
        EXPECT(gbc.pc(), 0x9b5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b5b), 0xcb);
        EXPECT(gbc.readMem(0x9b5c), 0x3);
        // CB 03 02D3
        gbc.setState(0x4037, 0xc6d7, 0x6f30, 0x5f24, 0x6fe8, 0x6872, 0x1, 0x0);
        gbc.writeMem(0x4037, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xc6d7);
        EXPECT(gbc.pc(), 0x4039);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 02D4
        gbc.setState(0xec61, 0x979c, 0xdfd0, 0xb1c6, 0xac0f, 0xee92, 0x1, 0x1);
        gbc.writeMem(0xec61, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x979c);
        EXPECT(gbc.pc(), 0xec63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec61), 0xcb);
        EXPECT(gbc.readMem(0xec62), 0x3);
        // CB 03 02D6
        gbc.setState(0x14e2, 0xe6a1, 0x86e0, 0x8ecd, 0x87a0, 0x92c9, 0x1, 0x1);
        gbc.writeMem(0x14e2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xe6a1);
        EXPECT(gbc.pc(), 0x14e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 02D7
        gbc.setState(0x1822, 0x4d43, 0x1f20, 0xb220, 0x3bd5, 0x83bf, 0x1, 0x0);
        gbc.writeMem(0x1822, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x4d43);
        EXPECT(gbc.pc(), 0x1824);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 02D8
        gbc.setState(0xb6ac, 0xfcb, 0x2da0, 0x4409, 0xcf6, 0x82ef, 0x1, 0x0);
        gbc.writeMem(0xb6ac, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xfcb);
        EXPECT(gbc.pc(), 0xb6ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6ac), 0xcb);
        EXPECT(gbc.readMem(0xb6ad), 0x3);
        // CB 03 02D9
        gbc.setState(0x19c6, 0xfd7, 0x5c50, 0x660a, 0x732f, 0x378c, 0x1, 0x1);
        gbc.writeMem(0x19c6, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xfd7);
        EXPECT(gbc.pc(), 0x19c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 02DA
        gbc.setState(0x2a14, 0xbfa3, 0xfa30, 0xb867, 0x9521, 0x346f, 0x1, 0x1);
        gbc.writeMem(0x2a14, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xbfa3);
        EXPECT(gbc.pc(), 0x2a16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 02DB
        gbc.setState(0x3e22, 0xddb1, 0x69b0, 0xbee4, 0x4922, 0xe07, 0x0, 0x0);
        gbc.writeMem(0x3e22, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xddb1);
        EXPECT(gbc.pc(), 0x3e24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 02DC
        gbc.setState(0xa8b1, 0xcd12, 0x3060, 0x37e, 0x9879, 0x2c87, 0x1, 0x1);
        gbc.writeMem(0xa8b1, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xcd12);
        EXPECT(gbc.pc(), 0xa8b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8b1), 0xcb);
        EXPECT(gbc.readMem(0xa8b2), 0x3);
        // CB 03 02DD
        gbc.setState(0xea62, 0xfa5e, 0xb200, 0x7ef3, 0xbf9d, 0xab3, 0x0, 0x0);
        gbc.writeMem(0xea62, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xfa5e);
        EXPECT(gbc.pc(), 0xea64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea62), 0xcb);
        EXPECT(gbc.readMem(0xea63), 0x3);
        // CB 03 02DE
        gbc.setState(0x6060, 0x467e, 0x7790, 0xf317, 0x2a43, 0xe3fe, 0x0, 0x1);
        gbc.writeMem(0x6060, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x467e);
        EXPECT(gbc.pc(), 0x6062);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 02DF
        gbc.setState(0x3eb0, 0x3397, 0x1740, 0xcd84, 0x6fc8, 0xe14b, 0x1, 0x1);
        gbc.writeMem(0x3eb0, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x3397);
        EXPECT(gbc.pc(), 0x3eb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 02E0
        gbc.setState(0x81a2, 0x1139, 0x36b0, 0x949e, 0xf0d9, 0x2253, 0x0, 0x1);
        gbc.writeMem(0x81a2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x1139);
        EXPECT(gbc.pc(), 0x81a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81a2), 0xcb);
        EXPECT(gbc.readMem(0x81a3), 0x3);
        // CB 03 02E1
        gbc.setState(0x328f, 0x2af5, 0x7360, 0xc06e, 0x73e, 0xb11e, 0x0, 0x0);
        gbc.writeMem(0x328f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x2af5);
        EXPECT(gbc.pc(), 0x3291);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 02E2
        gbc.setState(0x6d9c, 0xd1d6, 0x7eb0, 0x921d, 0xdabe, 0x7473, 0x1, 0x0);
        gbc.writeMem(0x6d9c, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xd1d6);
        EXPECT(gbc.pc(), 0x6d9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 02E3
        gbc.setState(0xb2b1, 0xe7ab, 0x8fc0, 0x2b7e, 0x9f8a, 0x4721, 0x1, 0x0);
        gbc.writeMem(0xb2b1, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xe7ab);
        EXPECT(gbc.pc(), 0xb2b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2b1), 0xcb);
        EXPECT(gbc.readMem(0xb2b2), 0x3);
        // CB 03 02E4
        gbc.setState(0x9aac, 0x412f, 0xa4e0, 0x1638, 0x28ac, 0x2e5, 0x1, 0x1);
        gbc.writeMem(0x9aac, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x412f);
        EXPECT(gbc.pc(), 0x9aae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9aac), 0xcb);
        EXPECT(gbc.readMem(0x9aad), 0x3);
        // CB 03 02E5
        gbc.setState(0xa4c1, 0x4e3d, 0x7230, 0x8e09, 0xbde3, 0x76aa, 0x1, 0x0);
        gbc.writeMem(0xa4c1, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x4e3d);
        EXPECT(gbc.pc(), 0xa4c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4c1), 0xcb);
        EXPECT(gbc.readMem(0xa4c2), 0x3);
        // CB 03 02E6
        gbc.setState(0x6253, 0x5877, 0x1be0, 0x4aca, 0x3773, 0xb005, 0x1, 0x0);
        gbc.writeMem(0x6253, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x5877);
        EXPECT(gbc.pc(), 0x6255);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 02E7
        gbc.setState(0x63c6, 0x9af8, 0x99b0, 0xe4a4, 0x5e23, 0x59b3, 0x0, 0x1);
        gbc.writeMem(0x63c6, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x9af8);
        EXPECT(gbc.pc(), 0x63c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 02E8
        gbc.setState(0x7d49, 0x94e5, 0x8060, 0x800, 0xbdc2, 0x1ed8, 0x1, 0x1);
        gbc.writeMem(0x7d49, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x94e5);
        EXPECT(gbc.pc(), 0x7d4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 02E9
        gbc.setState(0xc36c, 0x9c55, 0xe0d0, 0x5b54, 0xf96, 0x3956, 0x0, 0x0);
        gbc.writeMem(0xc36c, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x9c55);
        EXPECT(gbc.pc(), 0xc36e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc36c), 0xcb);
        EXPECT(gbc.readMem(0xc36d), 0x3);
        // CB 03 02EA
        gbc.setState(0x3d53, 0x60b7, 0xd5d0, 0x4633, 0xa351, 0x7eda, 0x0, 0x1);
        gbc.writeMem(0x3d53, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x60b7);
        EXPECT(gbc.pc(), 0x3d55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 02EB
        gbc.setState(0x11ab, 0x3ee3, 0xfb0, 0x28c3, 0x5517, 0x9e9f, 0x0, 0x0);
        gbc.writeMem(0x11ab, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x3ee3);
        EXPECT(gbc.pc(), 0x11ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 02EC
        gbc.setState(0xcd4d, 0xe0f8, 0xd130, 0x5a86, 0x8431, 0xd599, 0x0, 0x1);
        gbc.writeMem(0xcd4d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xe0f8);
        EXPECT(gbc.pc(), 0xcd4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd4d), 0xcb);
        EXPECT(gbc.readMem(0xcd4e), 0x3);
        // CB 03 02ED
        gbc.setState(0x76d4, 0xa511, 0xc520, 0x371d, 0x64e1, 0xd498, 0x1, 0x1);
        gbc.writeMem(0x76d4, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xa511);
        EXPECT(gbc.pc(), 0x76d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 02EE
        gbc.setState(0x55a0, 0xcb2, 0xb7c0, 0x4097, 0x7d29, 0x4d26, 0x1, 0x0);
        gbc.writeMem(0x55a0, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xcb2);
        EXPECT(gbc.pc(), 0x55a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 02EF
        gbc.setState(0xa64b, 0x940d, 0xf970, 0xc5f2, 0x1dff, 0xe6c1, 0x0, 0x1);
        gbc.writeMem(0xa64b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x940d);
        EXPECT(gbc.pc(), 0xa64d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa64b), 0xcb);
        EXPECT(gbc.readMem(0xa64c), 0x3);
        // CB 03 02F0
        gbc.setState(0x4c16, 0xec6b, 0x4790, 0x91a3, 0x87c8, 0x6b8, 0x1, 0x0);
        gbc.writeMem(0x4c16, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xec6b);
        EXPECT(gbc.pc(), 0x4c18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 02F1
        gbc.setState(0xc689, 0x2c04, 0x6ab0, 0x48d7, 0x9c21, 0x8e24, 0x0, 0x1);
        gbc.writeMem(0xc689, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x2c04);
        EXPECT(gbc.pc(), 0xc68b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc689), 0xcb);
        EXPECT(gbc.readMem(0xc68a), 0x3);
        // CB 03 02F2
        gbc.setState(0x3231, 0xcfbc, 0x8940, 0x215, 0x420d, 0xc79e, 0x1, 0x1);
        gbc.writeMem(0x3231, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xcfbc);
        EXPECT(gbc.pc(), 0x3233);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 02F3
        gbc.setState(0x7c2f, 0x3235, 0xf360, 0x5029, 0xd417, 0x9559, 0x1, 0x1);
        gbc.writeMem(0x7c2f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x3235);
        EXPECT(gbc.pc(), 0x7c31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 02F4
        gbc.setState(0x71b3, 0x507a, 0x29d0, 0x6891, 0xb1fa, 0xd7ee, 0x0, 0x0);
        gbc.writeMem(0x71b3, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x507a);
        EXPECT(gbc.pc(), 0x71b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 02F5
        gbc.setState(0x29bd, 0xdce2, 0x4e80, 0x59c3, 0x3372, 0xb85b, 0x0, 0x0);
        gbc.writeMem(0x29bd, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xdce2);
        EXPECT(gbc.pc(), 0x29bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 02F6
        gbc.setState(0x99ce, 0x4cfd, 0xbca0, 0xa6e1, 0xd17c, 0x8ba3, 0x0, 0x1);
        gbc.writeMem(0x99ce, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x4cfd);
        EXPECT(gbc.pc(), 0x99d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99ce), 0xcb);
        EXPECT(gbc.readMem(0x99cf), 0x3);
        // CB 03 02F7
        gbc.setState(0x98c2, 0x68b6, 0xcaa0, 0x4821, 0xebf7, 0x677c, 0x1, 0x1);
        gbc.writeMem(0x98c2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x68b6);
        EXPECT(gbc.pc(), 0x98c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98c2), 0xcb);
        EXPECT(gbc.readMem(0x98c3), 0x3);
        // CB 03 02F8
        gbc.setState(0xb7cd, 0x8280, 0xa5e0, 0x2b4c, 0xb00, 0x292f, 0x1, 0x1);
        gbc.writeMem(0xb7cd, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x8280);
        EXPECT(gbc.pc(), 0xb7cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7cd), 0xcb);
        EXPECT(gbc.readMem(0xb7ce), 0x3);
        // CB 03 02FA
        gbc.setState(0x8994, 0x4999, 0x1b50, 0xb51, 0x355c, 0x5b51, 0x1, 0x1);
        gbc.writeMem(0x8994, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x4999);
        EXPECT(gbc.pc(), 0x8996);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8994), 0xcb);
        EXPECT(gbc.readMem(0x8995), 0x3);
        // CB 03 02FB
        gbc.setState(0xbd2d, 0xaa10, 0xcbe0, 0x542a, 0x78af, 0x1ec7, 0x0, 0x0);
        gbc.writeMem(0xbd2d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xaa10);
        EXPECT(gbc.pc(), 0xbd2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd2d), 0xcb);
        EXPECT(gbc.readMem(0xbd2e), 0x3);
        // CB 03 02FC
        gbc.setState(0x33bd, 0x9749, 0xbf90, 0xca72, 0xe276, 0x7256, 0x1, 0x1);
        gbc.writeMem(0x33bd, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x9749);
        EXPECT(gbc.pc(), 0x33bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 02FD
        gbc.setState(0x812e, 0x9ed8, 0x2a40, 0xae54, 0xa0c3, 0x912, 0x0, 0x1);
        gbc.writeMem(0x812e, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x9ed8);
        EXPECT(gbc.pc(), 0x8130);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x812e), 0xcb);
        EXPECT(gbc.readMem(0x812f), 0x3);
        // CB 03 02FE
        gbc.setState(0x8196, 0x7c69, 0xaf70, 0x6cca, 0x66b3, 0xdced, 0x0, 0x1);
        gbc.writeMem(0x8196, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x7c69);
        EXPECT(gbc.pc(), 0x8198);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8196), 0xcb);
        EXPECT(gbc.readMem(0x8197), 0x3);
        // CB 03 02FF
        gbc.setState(0x43d, 0x662d, 0x9130, 0x5464, 0x686b, 0x8a59, 0x1, 0x1);
        gbc.writeMem(0x43d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x662d);
        EXPECT(gbc.pc(), 0x43f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0300
        gbc.setState(0xb81d, 0xb867, 0xe070, 0x5c58, 0xbc56, 0x3866, 0x1, 0x1);
        gbc.writeMem(0xb81d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xb867);
        EXPECT(gbc.pc(), 0xb81f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb81d), 0xcb);
        EXPECT(gbc.readMem(0xb81e), 0x3);
        // CB 03 0301
        gbc.setState(0xcd7a, 0x712, 0x4d30, 0xad44, 0xb001, 0x88ab, 0x1, 0x0);
        gbc.writeMem(0xcd7a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x712);
        EXPECT(gbc.pc(), 0xcd7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd7a), 0xcb);
        EXPECT(gbc.readMem(0xcd7b), 0x3);
        // CB 03 0302
        gbc.setState(0xbcf0, 0xa49f, 0xb650, 0x4bee, 0x4e84, 0xd6ee, 0x0, 0x1);
        gbc.writeMem(0xbcf0, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xa49f);
        EXPECT(gbc.pc(), 0xbcf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcf0), 0xcb);
        EXPECT(gbc.readMem(0xbcf1), 0x3);
        // CB 03 0303
        gbc.setState(0x578a, 0xbc67, 0xf480, 0x5df1, 0xfdea, 0x521c, 0x0, 0x0);
        gbc.writeMem(0x578a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xbc67);
        EXPECT(gbc.pc(), 0x578c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0304
        gbc.setState(0x66ff, 0xf7c9, 0xb130, 0x205f, 0xe47e, 0x9c12, 0x1, 0x0);
        gbc.writeMem(0x66ff, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xf7c9);
        EXPECT(gbc.pc(), 0x6701);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0305
        gbc.setState(0x36f5, 0x9e74, 0x52d0, 0xbd20, 0x1d1b, 0x6aeb, 0x1, 0x0);
        gbc.writeMem(0x36f5, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x9e74);
        EXPECT(gbc.pc(), 0x36f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0306
        gbc.setState(0x652c, 0x5935, 0x8370, 0x4fc2, 0xb16d, 0x764a, 0x0, 0x1);
        gbc.writeMem(0x652c, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x5935);
        EXPECT(gbc.pc(), 0x652e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0307
        gbc.setState(0x98e, 0x687c, 0xb260, 0xf39b, 0xff09, 0xad0a, 0x1, 0x0);
        gbc.writeMem(0x98e, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x687c);
        EXPECT(gbc.pc(), 0x990);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0308
        gbc.setState(0x17e2, 0x7bde, 0xa320, 0x6fa1, 0xa9a6, 0xe1cb, 0x0, 0x0);
        gbc.writeMem(0x17e2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x7bde);
        EXPECT(gbc.pc(), 0x17e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0309
        gbc.setState(0x82db, 0x43e6, 0x5ef0, 0xd8ef, 0xdbb2, 0x181f, 0x0, 0x1);
        gbc.writeMem(0x82db, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x43e6);
        EXPECT(gbc.pc(), 0x82dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82db), 0xcb);
        EXPECT(gbc.readMem(0x82dc), 0x3);
        // CB 03 030A
        gbc.setState(0x3a59, 0x72a5, 0x3d30, 0x788f, 0x2c6d, 0xc348, 0x1, 0x0);
        gbc.writeMem(0x3a59, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x72a5);
        EXPECT(gbc.pc(), 0x3a5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 030C
        gbc.setState(0x5cf5, 0x9592, 0xcd90, 0x52e6, 0xcd5b, 0x956b, 0x0, 0x0);
        gbc.writeMem(0x5cf5, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x9592);
        EXPECT(gbc.pc(), 0x5cf7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 030D
        gbc.setState(0x82cb, 0x4e32, 0x5790, 0xc3e2, 0x18d8, 0x34bc, 0x0, 0x0);
        gbc.writeMem(0x82cb, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x4e32);
        EXPECT(gbc.pc(), 0x82cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82cb), 0xcb);
        EXPECT(gbc.readMem(0x82cc), 0x3);
        // CB 03 030E
        gbc.setState(0x4417, 0xa281, 0xbd80, 0xea09, 0x45dc, 0x45c6, 0x1, 0x1);
        gbc.writeMem(0x4417, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xa281);
        EXPECT(gbc.pc(), 0x4419);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 030F
        gbc.setState(0xc45, 0xc839, 0xf3d0, 0x5d1d, 0xdb42, 0x4bb6, 0x1, 0x0);
        gbc.writeMem(0xc45, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xc839);
        EXPECT(gbc.pc(), 0xc47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0310
        gbc.setState(0x6493, 0xd990, 0x8d20, 0x4a63, 0x1a1e, 0xd31f, 0x1, 0x1);
        gbc.writeMem(0x6493, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xd990);
        EXPECT(gbc.pc(), 0x6495);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0311
        gbc.setState(0x551c, 0x2bd7, 0x5ad0, 0xb51b, 0xfe29, 0xa6ec, 0x0, 0x0);
        gbc.writeMem(0x551c, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x2bd7);
        EXPECT(gbc.pc(), 0x551e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0312
        gbc.setState(0xcb7b, 0xe315, 0xf550, 0xd96a, 0xd9e2, 0xccc3, 0x1, 0x1);
        gbc.writeMem(0xcb7b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xe315);
        EXPECT(gbc.pc(), 0xcb7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb7b), 0xcb);
        EXPECT(gbc.readMem(0xcb7c), 0x3);
        // CB 03 0313
        gbc.setState(0x18d1, 0x63f3, 0x2a40, 0x8af2, 0x59b9, 0x9e88, 0x1, 0x1);
        gbc.writeMem(0x18d1, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x63f3);
        EXPECT(gbc.pc(), 0x18d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0314
        gbc.setState(0x276b, 0x1ce2, 0xbc40, 0x13db, 0xd3fd, 0xa725, 0x0, 0x0);
        gbc.writeMem(0x276b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x1ce2);
        EXPECT(gbc.pc(), 0x276d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0315
        gbc.setState(0x32d, 0x6d27, 0x9c10, 0x2f7d, 0x41e7, 0x5bb4, 0x0, 0x0);
        gbc.writeMem(0x32d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x6d27);
        EXPECT(gbc.pc(), 0x32f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0316
        gbc.setState(0xebd9, 0xf6a8, 0x2c10, 0xef86, 0x394, 0xf959, 0x1, 0x0);
        gbc.writeMem(0xebd9, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xf6a8);
        EXPECT(gbc.pc(), 0xebdb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebd9), 0xcb);
        EXPECT(gbc.readMem(0xebda), 0x3);
        // CB 03 0317
        gbc.setState(0xd5c7, 0x226e, 0x4d0, 0xd44e, 0x1ad5, 0x21a, 0x1, 0x1);
        gbc.writeMem(0xd5c7, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x226e);
        EXPECT(gbc.pc(), 0xd5c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5c7), 0xcb);
        EXPECT(gbc.readMem(0xd5c8), 0x3);
        // CB 03 0319
        gbc.setState(0xe23b, 0xaca1, 0x5940, 0xe4b8, 0x75d6, 0xa4d4, 0x1, 0x0);
        gbc.writeMem(0xe23b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xaca1);
        EXPECT(gbc.pc(), 0xe23d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe23b), 0xcb);
        EXPECT(gbc.readMem(0xe23c), 0x3);
        // CB 03 031A
        gbc.setState(0x6614, 0xe005, 0xd510, 0xb78d, 0x731b, 0x55df, 0x0, 0x0);
        gbc.writeMem(0x6614, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xe005);
        EXPECT(gbc.pc(), 0x6616);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 031B
        gbc.setState(0x87be, 0xffd1, 0xde00, 0x85b6, 0x6770, 0xd92f, 0x0, 0x1);
        gbc.writeMem(0x87be, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xffd1);
        EXPECT(gbc.pc(), 0x87c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87be), 0xcb);
        EXPECT(gbc.readMem(0x87bf), 0x3);
        // CB 03 031C
        gbc.setState(0xe224, 0xa6a6, 0x8160, 0xb91d, 0x9ec0, 0x50a5, 0x0, 0x1);
        gbc.writeMem(0xe224, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xa6a6);
        EXPECT(gbc.pc(), 0xe226);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe224), 0xcb);
        EXPECT(gbc.readMem(0xe225), 0x3);
        // CB 03 031D
        gbc.setState(0x6f4d, 0x99a0, 0xece0, 0x8e6a, 0xe5ad, 0xfff0, 0x1, 0x1);
        gbc.writeMem(0x6f4d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x99a0);
        EXPECT(gbc.pc(), 0x6f4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 031E
        gbc.setState(0x110c, 0xa81b, 0xe800, 0x47fe, 0xf987, 0x4d1b, 0x1, 0x0);
        gbc.writeMem(0x110c, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xa81b);
        EXPECT(gbc.pc(), 0x110e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 031F
        gbc.setState(0xc220, 0x9378, 0x9640, 0xdd3e, 0x74c8, 0xd5cb, 0x0, 0x1);
        gbc.writeMem(0xc220, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x9378);
        EXPECT(gbc.pc(), 0xc222);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc220), 0xcb);
        EXPECT(gbc.readMem(0xc221), 0x3);
        // CB 03 0320
        gbc.setState(0x9892, 0xa6f5, 0x8810, 0x5263, 0x1436, 0xd513, 0x0, 0x0);
        gbc.writeMem(0x9892, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xa6f5);
        EXPECT(gbc.pc(), 0x9894);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9892), 0xcb);
        EXPECT(gbc.readMem(0x9893), 0x3);
        // CB 03 0321
        gbc.setState(0xd13d, 0xc863, 0xf2b0, 0xe286, 0x6e8e, 0x3f88, 0x1, 0x0);
        gbc.writeMem(0xd13d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xc863);
        EXPECT(gbc.pc(), 0xd13f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd13d), 0xcb);
        EXPECT(gbc.readMem(0xd13e), 0x3);
        // CB 03 0322
        gbc.setState(0xa434, 0xb967, 0xbaf0, 0x2547, 0xc571, 0x952e, 0x1, 0x0);
        gbc.writeMem(0xa434, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xb967);
        EXPECT(gbc.pc(), 0xa436);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa434), 0xcb);
        EXPECT(gbc.readMem(0xa435), 0x3);
        // CB 03 0323
        gbc.setState(0x5abd, 0x34e0, 0x5ce0, 0x3560, 0x7bb6, 0xb6c7, 0x1, 0x1);
        gbc.writeMem(0x5abd, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x34e0);
        EXPECT(gbc.pc(), 0x5abf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0324
        gbc.setState(0x5429, 0xac25, 0x40b0, 0xfb20, 0x331a, 0x54a9, 0x1, 0x0);
        gbc.writeMem(0x5429, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xac25);
        EXPECT(gbc.pc(), 0x542b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0325
        gbc.setState(0xc7bc, 0xba80, 0x4df0, 0x6d0c, 0x6b7f, 0xe78a, 0x1, 0x1);
        gbc.writeMem(0xc7bc, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xba80);
        EXPECT(gbc.pc(), 0xc7be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7bc), 0xcb);
        EXPECT(gbc.readMem(0xc7bd), 0x3);
        // CB 03 0326
        gbc.setState(0xe0c6, 0x71db, 0xc9e0, 0x81f0, 0x1c31, 0x940a, 0x0, 0x1);
        gbc.writeMem(0xe0c6, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x71db);
        EXPECT(gbc.pc(), 0xe0c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0c6), 0xcb);
        EXPECT(gbc.readMem(0xe0c7), 0x3);
        // CB 03 0327
        gbc.setState(0x88b8, 0x6c96, 0xc370, 0x1396, 0xe8ca, 0x19a4, 0x1, 0x1);
        gbc.writeMem(0x88b8, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x6c96);
        EXPECT(gbc.pc(), 0x88ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88b8), 0xcb);
        EXPECT(gbc.readMem(0x88b9), 0x3);
        // CB 03 0328
        gbc.setState(0x72a2, 0xe697, 0x6a50, 0x348, 0xfa81, 0xf6ea, 0x1, 0x0);
        gbc.writeMem(0x72a2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xe697);
        EXPECT(gbc.pc(), 0x72a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0329
        gbc.setState(0xb0fc, 0x55c0, 0xa090, 0x7b09, 0x95ae, 0x308f, 0x0, 0x1);
        gbc.writeMem(0xb0fc, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x55c0);
        EXPECT(gbc.pc(), 0xb0fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0fc), 0xcb);
        EXPECT(gbc.readMem(0xb0fd), 0x3);
        // CB 03 032A
        gbc.setState(0xc45b, 0x9706, 0x2f80, 0xcd90, 0x9eda, 0x78a1, 0x0, 0x0);
        gbc.writeMem(0xc45b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x9706);
        EXPECT(gbc.pc(), 0xc45d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc45b), 0xcb);
        EXPECT(gbc.readMem(0xc45c), 0x3);
        // CB 03 032B
        gbc.setState(0x7b7e, 0x41ae, 0xef90, 0x3051, 0xf73c, 0xb7e6, 0x1, 0x0);
        gbc.writeMem(0x7b7e, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x41ae);
        EXPECT(gbc.pc(), 0x7b80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 032C
        gbc.setState(0x42a, 0xcc9d, 0x3610, 0x1845, 0xbccd, 0x5fc1, 0x0, 0x0);
        gbc.writeMem(0x42a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xcc9d);
        EXPECT(gbc.pc(), 0x42c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 032D
        gbc.setState(0xd0e1, 0x1bed, 0xba60, 0xdff0, 0x6b7, 0x96fd, 0x0, 0x1);
        gbc.writeMem(0xd0e1, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x1bed);
        EXPECT(gbc.pc(), 0xd0e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0e1), 0xcb);
        EXPECT(gbc.readMem(0xd0e2), 0x3);
        // CB 03 032E
        gbc.setState(0xe112, 0x8e83, 0x5e20, 0x9d4f, 0x90de, 0x3aaa, 0x0, 0x1);
        gbc.writeMem(0xe112, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x8e83);
        EXPECT(gbc.pc(), 0xe114);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe112), 0xcb);
        EXPECT(gbc.readMem(0xe113), 0x3);
        // CB 03 032F
        gbc.setState(0x8f54, 0x56c4, 0xf450, 0x841b, 0x4092, 0xb1d6, 0x0, 0x0);
        gbc.writeMem(0x8f54, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x56c4);
        EXPECT(gbc.pc(), 0x8f56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f54), 0xcb);
        EXPECT(gbc.readMem(0x8f55), 0x3);
        // CB 03 0330
        gbc.setState(0xbbdd, 0xfa5c, 0x40a0, 0x21dc, 0xb00d, 0x8f09, 0x0, 0x0);
        gbc.writeMem(0xbbdd, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xfa5c);
        EXPECT(gbc.pc(), 0xbbdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbdd), 0xcb);
        EXPECT(gbc.readMem(0xbbde), 0x3);
        // CB 03 0331
        gbc.setState(0x5a3d, 0xfb50, 0x2fa0, 0xd3a0, 0x9996, 0x7a8e, 0x1, 0x0);
        gbc.writeMem(0x5a3d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xfb50);
        EXPECT(gbc.pc(), 0x5a3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0332
        gbc.setState(0x83da, 0xdb8a, 0xed40, 0xca4f, 0x38db, 0x2955, 0x0, 0x0);
        gbc.writeMem(0x83da, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xdb8a);
        EXPECT(gbc.pc(), 0x83dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83da), 0xcb);
        EXPECT(gbc.readMem(0x83db), 0x3);
        // CB 03 0333
        gbc.setState(0x8200, 0x7563, 0xbe60, 0x2b76, 0x355a, 0x5dd8, 0x1, 0x0);
        gbc.writeMem(0x8200, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x7563);
        EXPECT(gbc.pc(), 0x8202);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8200), 0xcb);
        EXPECT(gbc.readMem(0x8201), 0x3);
        // CB 03 0334
        gbc.setState(0x57a5, 0x29b8, 0x8d40, 0x54fe, 0xe7f3, 0xb54a, 0x1, 0x0);
        gbc.writeMem(0x57a5, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x29b8);
        EXPECT(gbc.pc(), 0x57a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0335
        gbc.setState(0x6a15, 0x9688, 0xdf20, 0x7e90, 0x3015, 0x8ec2, 0x0, 0x1);
        gbc.writeMem(0x6a15, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x9688);
        EXPECT(gbc.pc(), 0x6a17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0336
        gbc.setState(0x1a83, 0xb354, 0x82b0, 0xa90b, 0x2093, 0x4de, 0x0, 0x1);
        gbc.writeMem(0x1a83, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xb354);
        EXPECT(gbc.pc(), 0x1a85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0337
        gbc.setState(0x41ff, 0x4b6b, 0x2d80, 0xeca8, 0xbf8d, 0x9cc8, 0x0, 0x0);
        gbc.writeMem(0x41ff, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x4b6b);
        EXPECT(gbc.pc(), 0x4201);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0338
        gbc.setState(0x7e24, 0x25c7, 0x5540, 0xf06, 0x3143, 0x183d, 0x0, 0x1);
        gbc.writeMem(0x7e24, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x25c7);
        EXPECT(gbc.pc(), 0x7e26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0339
        gbc.setState(0x3085, 0x369, 0xe30, 0x7530, 0x6dc2, 0x7a71, 0x1, 0x0);
        gbc.writeMem(0x3085, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x369);
        EXPECT(gbc.pc(), 0x3087);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 033A
        gbc.setState(0x7d32, 0xd1d7, 0xfb20, 0x7a12, 0x53e2, 0x800a, 0x0, 0x1);
        gbc.writeMem(0x7d32, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xd1d7);
        EXPECT(gbc.pc(), 0x7d34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 033B
        gbc.setState(0x6767, 0x2e58, 0x2620, 0x815b, 0x4329, 0x554c, 0x1, 0x1);
        gbc.writeMem(0x6767, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x2e58);
        EXPECT(gbc.pc(), 0x6769);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 033C
        gbc.setState(0xaf5e, 0x912, 0xe5f0, 0x71ed, 0xcfe7, 0x307f, 0x1, 0x1);
        gbc.writeMem(0xaf5e, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x912);
        EXPECT(gbc.pc(), 0xaf60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf5e), 0xcb);
        EXPECT(gbc.readMem(0xaf5f), 0x3);
        // CB 03 033D
        gbc.setState(0x5db1, 0xca0d, 0xd3b0, 0x4953, 0x6b00, 0xae3b, 0x0, 0x0);
        gbc.writeMem(0x5db1, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xca0d);
        EXPECT(gbc.pc(), 0x5db3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 033E
        gbc.setState(0x28b6, 0x6c11, 0x7890, 0x2a14, 0x5898, 0x1f50, 0x0, 0x1);
        gbc.writeMem(0x28b6, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x6c11);
        EXPECT(gbc.pc(), 0x28b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 033F
        gbc.setState(0x83fd, 0xd64b, 0x7890, 0xb3ae, 0x487b, 0x5a46, 0x0, 0x0);
        gbc.writeMem(0x83fd, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xd64b);
        EXPECT(gbc.pc(), 0x83ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83fd), 0xcb);
        EXPECT(gbc.readMem(0x83fe), 0x3);
        // CB 03 0340
        gbc.setState(0x1d30, 0x7d86, 0x9000, 0x4db9, 0x1add, 0x1193, 0x1, 0x0);
        gbc.writeMem(0x1d30, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x7d86);
        EXPECT(gbc.pc(), 0x1d32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0341
        gbc.setState(0x5281, 0xfc76, 0xcb60, 0xfa4e, 0x10a0, 0x2ae4, 0x1, 0x1);
        gbc.writeMem(0x5281, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xfc76);
        EXPECT(gbc.pc(), 0x5283);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0342
        gbc.setState(0xcf64, 0xbf25, 0xd290, 0xbf94, 0xa5fe, 0xe308, 0x0, 0x1);
        gbc.writeMem(0xcf64, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xbf25);
        EXPECT(gbc.pc(), 0xcf66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf64), 0xcb);
        EXPECT(gbc.readMem(0xcf65), 0x3);
        // CB 03 0343
        gbc.setState(0x8b83, 0xd287, 0x6a80, 0x1688, 0xd017, 0x2e98, 0x0, 0x1);
        gbc.writeMem(0x8b83, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xd287);
        EXPECT(gbc.pc(), 0x8b85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b83), 0xcb);
        EXPECT(gbc.readMem(0x8b84), 0x3);
        // CB 03 0344
        gbc.setState(0x5b47, 0x9e52, 0x590, 0x738d, 0xaa7f, 0x4b53, 0x1, 0x0);
        gbc.writeMem(0x5b47, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x9e52);
        EXPECT(gbc.pc(), 0x5b49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0345
        gbc.setState(0x105, 0xa66e, 0x1b0, 0x4d69, 0xeea0, 0x99a0, 0x0, 0x1);
        gbc.writeMem(0x105, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xa66e);
        EXPECT(gbc.pc(), 0x107);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0346
        gbc.setState(0x5af0, 0xd7ec, 0x99c0, 0xf981, 0x4a1f, 0x9eef, 0x0, 0x0);
        gbc.writeMem(0x5af0, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xd7ec);
        EXPECT(gbc.pc(), 0x5af2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0347
        gbc.setState(0x32c2, 0x48d6, 0xaeb0, 0x1f3a, 0x9842, 0xe534, 0x0, 0x0);
        gbc.writeMem(0x32c2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x48d6);
        EXPECT(gbc.pc(), 0x32c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0348
        gbc.setState(0x4deb, 0x22fb, 0x3fb0, 0xe71c, 0x2de5, 0x56ea, 0x0, 0x0);
        gbc.writeMem(0x4deb, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x22fb);
        EXPECT(gbc.pc(), 0x4ded);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0349
        gbc.setState(0xc527, 0x153f, 0x62c0, 0x871a, 0x4570, 0xdb28, 0x1, 0x0);
        gbc.writeMem(0xc527, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x153f);
        EXPECT(gbc.pc(), 0xc529);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc527), 0xcb);
        EXPECT(gbc.readMem(0xc528), 0x3);
        // CB 03 034A
        gbc.setState(0x4e70, 0x80d, 0xd450, 0x66bb, 0xdb1e, 0xdfc0, 0x0, 0x0);
        gbc.writeMem(0x4e70, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x80d);
        EXPECT(gbc.pc(), 0x4e72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 034B
        gbc.setState(0xc0db, 0x5974, 0xbdc0, 0xb6f2, 0xa7c8, 0x5cf6, 0x0, 0x1);
        gbc.writeMem(0xc0db, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x5974);
        EXPECT(gbc.pc(), 0xc0dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0db), 0xcb);
        EXPECT(gbc.readMem(0xc0dc), 0x3);
        // CB 03 034C
        gbc.setState(0xdfe8, 0x4aa9, 0x9590, 0x706d, 0x702a, 0xd4fc, 0x0, 0x0);
        gbc.writeMem(0xdfe8, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x4aa9);
        EXPECT(gbc.pc(), 0xdfea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfe8), 0xcb);
        EXPECT(gbc.readMem(0xdfe9), 0x3);
        // CB 03 034D
        gbc.setState(0x868b, 0x1144, 0x4730, 0x9426, 0xa784, 0x7b01, 0x1, 0x1);
        gbc.writeMem(0x868b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x1144);
        EXPECT(gbc.pc(), 0x868d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x868b), 0xcb);
        EXPECT(gbc.readMem(0x868c), 0x3);
        // CB 03 034E
        gbc.setState(0xed12, 0x58a5, 0x8bf0, 0x4528, 0xf567, 0xe8d8, 0x1, 0x0);
        gbc.writeMem(0xed12, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x58a5);
        EXPECT(gbc.pc(), 0xed14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed12), 0xcb);
        EXPECT(gbc.readMem(0xed13), 0x3);
        // CB 03 0350
        gbc.setState(0x3716, 0xba28, 0x28e0, 0x23b4, 0x2949, 0xce10, 0x1, 0x0);
        gbc.writeMem(0x3716, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xba28);
        EXPECT(gbc.pc(), 0x3718);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0352
        gbc.setState(0xba19, 0x2568, 0x3080, 0xfea4, 0x657c, 0x74ad, 0x0, 0x0);
        gbc.writeMem(0xba19, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x2568);
        EXPECT(gbc.pc(), 0xba1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba19), 0xcb);
        EXPECT(gbc.readMem(0xba1a), 0x3);
        // CB 03 0353
        gbc.setState(0x6156, 0x4667, 0xeb60, 0x812e, 0x6f05, 0xba46, 0x0, 0x1);
        gbc.writeMem(0x6156, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x4667);
        EXPECT(gbc.pc(), 0x6158);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0354
        gbc.setState(0xcea4, 0x8dea, 0x7460, 0x547b, 0x3eab, 0x4dc0, 0x0, 0x0);
        gbc.writeMem(0xcea4, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x8dea);
        EXPECT(gbc.pc(), 0xcea6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcea4), 0xcb);
        EXPECT(gbc.readMem(0xcea5), 0x3);
        // CB 03 0355
        gbc.setState(0x2069, 0xdd19, 0x9bb0, 0x7583, 0xed69, 0x8a86, 0x1, 0x1);
        gbc.writeMem(0x2069, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xdd19);
        EXPECT(gbc.pc(), 0x206b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0356
        gbc.setState(0x2e0a, 0x1933, 0x60b0, 0xb5b9, 0xb72b, 0xb6cb, 0x0, 0x1);
        gbc.writeMem(0x2e0a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x1933);
        EXPECT(gbc.pc(), 0x2e0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0357
        gbc.setState(0x655b, 0x99ab, 0xcd0, 0x538f, 0x13d1, 0x88ee, 0x1, 0x0);
        gbc.writeMem(0x655b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x99ab);
        EXPECT(gbc.pc(), 0x655d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0358
        gbc.setState(0x21fe, 0xe9a2, 0x200, 0x67f6, 0xdd7d, 0x113d, 0x0, 0x0);
        gbc.writeMem(0x21fe, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xe9a2);
        EXPECT(gbc.pc(), 0x2200);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0359
        gbc.setState(0x25b4, 0x380c, 0x85f0, 0xc98a, 0xcff2, 0x73ce, 0x0, 0x1);
        gbc.writeMem(0x25b4, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x380c);
        EXPECT(gbc.pc(), 0x25b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 035A
        gbc.setState(0xe414, 0x787d, 0x110, 0x856b, 0x536, 0x375b, 0x1, 0x1);
        gbc.writeMem(0xe414, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x787d);
        EXPECT(gbc.pc(), 0xe416);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe414), 0xcb);
        EXPECT(gbc.readMem(0xe415), 0x3);
        // CB 03 035B
        gbc.setState(0x5773, 0x3a6f, 0xf3f0, 0x1bf6, 0x9475, 0xee57, 0x1, 0x0);
        gbc.writeMem(0x5773, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x3a6f);
        EXPECT(gbc.pc(), 0x5775);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 035C
        gbc.setState(0xdd3b, 0xb1ae, 0x5710, 0x6144, 0xfba2, 0xa421, 0x0, 0x1);
        gbc.writeMem(0xdd3b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xb1ae);
        EXPECT(gbc.pc(), 0xdd3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd3b), 0xcb);
        EXPECT(gbc.readMem(0xdd3c), 0x3);
        // CB 03 035D
        gbc.setState(0xc3db, 0x418a, 0x25a0, 0x92e9, 0xa0a3, 0x5a46, 0x1, 0x1);
        gbc.writeMem(0xc3db, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x418a);
        EXPECT(gbc.pc(), 0xc3dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3db), 0xcb);
        EXPECT(gbc.readMem(0xc3dc), 0x3);
        // CB 03 035E
        gbc.setState(0xe2df, 0x1920, 0x8c70, 0x3ab7, 0xedfc, 0x6f05, 0x0, 0x1);
        gbc.writeMem(0xe2df, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x1920);
        EXPECT(gbc.pc(), 0xe2e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2df), 0xcb);
        EXPECT(gbc.readMem(0xe2e0), 0x3);
        // CB 03 035F
        gbc.setState(0x56cf, 0x133d, 0x770, 0xb122, 0xb8c5, 0x453d, 0x1, 0x0);
        gbc.writeMem(0x56cf, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x133d);
        EXPECT(gbc.pc(), 0x56d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0360
        gbc.setState(0xd9cf, 0xfc37, 0xfb80, 0x14f5, 0x66df, 0x4aec, 0x0, 0x0);
        gbc.writeMem(0xd9cf, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xfc37);
        EXPECT(gbc.pc(), 0xd9d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9cf), 0xcb);
        EXPECT(gbc.readMem(0xd9d0), 0x3);
        // CB 03 0361
        gbc.setState(0xaa3a, 0x1091, 0x7040, 0x7e23, 0x1828, 0x1c90, 0x0, 0x1);
        gbc.writeMem(0xaa3a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x1091);
        EXPECT(gbc.pc(), 0xaa3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa3a), 0xcb);
        EXPECT(gbc.readMem(0xaa3b), 0x3);
        // CB 03 0362
        gbc.setState(0x320d, 0xa7db, 0xd9d0, 0xd671, 0x6f0b, 0x258, 0x1, 0x1);
        gbc.writeMem(0x320d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xa7db);
        EXPECT(gbc.pc(), 0x320f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0363
        gbc.setState(0xa7db, 0x48ab, 0x8820, 0x387c, 0x775b, 0x46b0, 0x1, 0x0);
        gbc.writeMem(0xa7db, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x48ab);
        EXPECT(gbc.pc(), 0xa7dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7db), 0xcb);
        EXPECT(gbc.readMem(0xa7dc), 0x3);
        // CB 03 0364
        gbc.setState(0xd776, 0x6f08, 0xc0f0, 0x3ca0, 0xc9af, 0x3612, 0x0, 0x0);
        gbc.writeMem(0xd776, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x6f08);
        EXPECT(gbc.pc(), 0xd778);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd776), 0xcb);
        EXPECT(gbc.readMem(0xd777), 0x3);
        // CB 03 0365
        gbc.setState(0x4850, 0x3d73, 0xd490, 0x2c6, 0x7a47, 0x28cd, 0x1, 0x1);
        gbc.writeMem(0x4850, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x3d73);
        EXPECT(gbc.pc(), 0x4852);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0366
        gbc.setState(0xe, 0x9ba1, 0x6f30, 0x1a93, 0xc5ff, 0xac1, 0x0, 0x0);
        gbc.writeMem(0xe, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x9ba1);
        EXPECT(gbc.pc(), 0x10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0367
        gbc.setState(0x9ae8, 0xf23a, 0xbaa0, 0x4ff7, 0xccf0, 0x9e7a, 0x0, 0x0);
        gbc.writeMem(0x9ae8, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xf23a);
        EXPECT(gbc.pc(), 0x9aea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ae8), 0xcb);
        EXPECT(gbc.readMem(0x9ae9), 0x3);
        // CB 03 0368
        gbc.setState(0x503a, 0x22cf, 0x76e0, 0x8ce, 0xfd27, 0xf15c, 0x0, 0x1);
        gbc.writeMem(0x503a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x22cf);
        EXPECT(gbc.pc(), 0x503c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0369
        gbc.setState(0xe9fd, 0x9591, 0x840, 0x855, 0xa6bf, 0x7d8b, 0x1, 0x1);
        gbc.writeMem(0xe9fd, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x9591);
        EXPECT(gbc.pc(), 0xe9ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9fd), 0xcb);
        EXPECT(gbc.readMem(0xe9fe), 0x3);
        // CB 03 036A
        gbc.setState(0x8162, 0x509f, 0xd1e0, 0x7da4, 0x7519, 0x4597, 0x1, 0x0);
        gbc.writeMem(0x8162, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x509f);
        EXPECT(gbc.pc(), 0x8164);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8162), 0xcb);
        EXPECT(gbc.readMem(0x8163), 0x3);
        // CB 03 036B
        gbc.setState(0xa1a8, 0x71a6, 0x4b70, 0x85b6, 0x7bb5, 0xf386, 0x1, 0x0);
        gbc.writeMem(0xa1a8, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x71a6);
        EXPECT(gbc.pc(), 0xa1aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1a8), 0xcb);
        EXPECT(gbc.readMem(0xa1a9), 0x3);
        // CB 03 036C
        gbc.setState(0x24db, 0xa015, 0x5910, 0xf054, 0xe66, 0x7a82, 0x0, 0x0);
        gbc.writeMem(0x24db, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xa015);
        EXPECT(gbc.pc(), 0x24dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 036D
        gbc.setState(0xd1c7, 0x1785, 0xf860, 0x2c33, 0x8392, 0xf942, 0x1, 0x0);
        gbc.writeMem(0xd1c7, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x1785);
        EXPECT(gbc.pc(), 0xd1c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1c7), 0xcb);
        EXPECT(gbc.readMem(0xd1c8), 0x3);
        // CB 03 036E
        gbc.setState(0x66c0, 0x64c6, 0xe2d0, 0x51d3, 0x8435, 0xfad8, 0x1, 0x0);
        gbc.writeMem(0x66c0, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x64c6);
        EXPECT(gbc.pc(), 0x66c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 036F
        gbc.setState(0x82a5, 0x3d10, 0x3150, 0x6984, 0x9ebb, 0x68e8, 0x0, 0x0);
        gbc.writeMem(0x82a5, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x3d10);
        EXPECT(gbc.pc(), 0x82a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82a5), 0xcb);
        EXPECT(gbc.readMem(0x82a6), 0x3);
        // CB 03 0370
        gbc.setState(0xa6d0, 0x1e62, 0xdfe0, 0x4b02, 0x1634, 0xa7c0, 0x0, 0x0);
        gbc.writeMem(0xa6d0, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x1e62);
        EXPECT(gbc.pc(), 0xa6d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6d0), 0xcb);
        EXPECT(gbc.readMem(0xa6d1), 0x3);
        // CB 03 0371
        gbc.setState(0x54ce, 0x38c3, 0x6c20, 0xc4a6, 0x5d5c, 0xefc8, 0x1, 0x0);
        gbc.writeMem(0x54ce, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x38c3);
        EXPECT(gbc.pc(), 0x54d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0372
        gbc.setState(0xbe98, 0xdd90, 0xaaa0, 0xb472, 0xc7ae, 0xe227, 0x0, 0x1);
        gbc.writeMem(0xbe98, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xdd90);
        EXPECT(gbc.pc(), 0xbe9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe98), 0xcb);
        EXPECT(gbc.readMem(0xbe99), 0x3);
        // CB 03 0373
        gbc.setState(0x237e, 0xcd2e, 0xbbd0, 0x399f, 0xd0e6, 0x76e5, 0x0, 0x0);
        gbc.writeMem(0x237e, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xcd2e);
        EXPECT(gbc.pc(), 0x2380);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0374
        gbc.setState(0x4686, 0xc206, 0x47f0, 0x6657, 0x21f9, 0x35bb, 0x0, 0x0);
        gbc.writeMem(0x4686, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xc206);
        EXPECT(gbc.pc(), 0x4688);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0375
        gbc.setState(0x81ba, 0x913f, 0x3f90, 0x9446, 0x262d, 0x47d6, 0x0, 0x1);
        gbc.writeMem(0x81ba, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x913f);
        EXPECT(gbc.pc(), 0x81bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81ba), 0xcb);
        EXPECT(gbc.readMem(0x81bb), 0x3);
        // CB 03 0376
        gbc.setState(0x2941, 0x25a9, 0xc6a0, 0xcb3f, 0xa703, 0x3ca1, 0x0, 0x0);
        gbc.writeMem(0x2941, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x25a9);
        EXPECT(gbc.pc(), 0x2943);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0377
        gbc.setState(0x9b11, 0x151, 0x13b0, 0x98bd, 0x4e61, 0x70a4, 0x1, 0x0);
        gbc.writeMem(0x9b11, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x151);
        EXPECT(gbc.pc(), 0x9b13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b11), 0xcb);
        EXPECT(gbc.readMem(0x9b12), 0x3);
        // CB 03 0379
        gbc.setState(0xdaa2, 0x550e, 0x11d0, 0xf35d, 0xe4ae, 0x1361, 0x0, 0x0);
        gbc.writeMem(0xdaa2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x550e);
        EXPECT(gbc.pc(), 0xdaa4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdaa2), 0xcb);
        EXPECT(gbc.readMem(0xdaa3), 0x3);
        // CB 03 037A
        gbc.setState(0x2180, 0x83a8, 0xbb10, 0x71a7, 0xc17c, 0x6f1b, 0x1, 0x1);
        gbc.writeMem(0x2180, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x83a8);
        EXPECT(gbc.pc(), 0x2182);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 037B
        gbc.setState(0x3fcf, 0xaa3a, 0x130, 0xd98b, 0xdd32, 0xe771, 0x1, 0x1);
        gbc.writeMem(0x3fcf, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xaa3a);
        EXPECT(gbc.pc(), 0x3fd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 037C
        gbc.setState(0xe26c, 0xe29b, 0xd500, 0x399d, 0x5a8a, 0x84f2, 0x1, 0x0);
        gbc.writeMem(0xe26c, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xe29b);
        EXPECT(gbc.pc(), 0xe26e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe26c), 0xcb);
        EXPECT(gbc.readMem(0xe26d), 0x3);
        // CB 03 037D
        gbc.setState(0x5967, 0x2f1, 0x5960, 0xe71, 0x275f, 0x24f5, 0x0, 0x0);
        gbc.writeMem(0x5967, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x2f1);
        EXPECT(gbc.pc(), 0x5969);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 037E
        gbc.setState(0x1fc3, 0x99ce, 0x3710, 0xe81d, 0x22ba, 0x932e, 0x1, 0x0);
        gbc.writeMem(0x1fc3, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x99ce);
        EXPECT(gbc.pc(), 0x1fc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 037F
        gbc.setState(0x718b, 0x16ac, 0xf9b0, 0x729, 0xcd78, 0xcb54, 0x1, 0x0);
        gbc.writeMem(0x718b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x16ac);
        EXPECT(gbc.pc(), 0x718d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0380
        gbc.setState(0xcc54, 0xdf3f, 0xb340, 0xd824, 0x425a, 0x7a36, 0x1, 0x0);
        gbc.writeMem(0xcc54, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xdf3f);
        EXPECT(gbc.pc(), 0xcc56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc54), 0xcb);
        EXPECT(gbc.readMem(0xcc55), 0x3);
        // CB 03 0381
        gbc.setState(0x4779, 0xc5c, 0x1d80, 0xb35, 0x37c8, 0xdd3e, 0x1, 0x0);
        gbc.writeMem(0x4779, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xc5c);
        EXPECT(gbc.pc(), 0x477b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0383
        gbc.setState(0x372c, 0xf150, 0xec0, 0x3ea9, 0xb62e, 0x4126, 0x1, 0x0);
        gbc.writeMem(0x372c, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xf150);
        EXPECT(gbc.pc(), 0x372e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0385
        gbc.setState(0xe8b3, 0xd0f, 0x3140, 0x5b21, 0xa5d4, 0x1ec7, 0x0, 0x1);
        gbc.writeMem(0xe8b3, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xd0f);
        EXPECT(gbc.pc(), 0xe8b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8b3), 0xcb);
        EXPECT(gbc.readMem(0xe8b4), 0x3);
        // CB 03 0386
        gbc.setState(0x86d7, 0xd340, 0xb8f0, 0x5e4e, 0x9a80, 0x1b27, 0x1, 0x0);
        gbc.writeMem(0x86d7, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xd340);
        EXPECT(gbc.pc(), 0x86d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86d7), 0xcb);
        EXPECT(gbc.readMem(0x86d8), 0x3);
        // CB 03 0387
        gbc.setState(0x302e, 0xd137, 0xfb90, 0xb107, 0xd97b, 0x2f43, 0x0, 0x1);
        gbc.writeMem(0x302e, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xd137);
        EXPECT(gbc.pc(), 0x3030);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0388
        gbc.setState(0xa3ce, 0xa0d0, 0x9370, 0xf818, 0x72fe, 0xb543, 0x0, 0x0);
        gbc.writeMem(0xa3ce, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xa0d0);
        EXPECT(gbc.pc(), 0xa3d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3ce), 0xcb);
        EXPECT(gbc.readMem(0xa3cf), 0x3);
        // CB 03 0389
        gbc.setState(0x8ccb, 0x6a5f, 0x69c0, 0xac2d, 0x40ae, 0x63bd, 0x1, 0x1);
        gbc.writeMem(0x8ccb, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x6a5f);
        EXPECT(gbc.pc(), 0x8ccd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ccb), 0xcb);
        EXPECT(gbc.readMem(0x8ccc), 0x3);
        // CB 03 038A
        gbc.setState(0xdbfe, 0xfdb2, 0x2e40, 0xa381, 0xb103, 0x2566, 0x0, 0x1);
        gbc.writeMem(0xdbfe, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xfdb2);
        EXPECT(gbc.pc(), 0xdc00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbfe), 0xcb);
        EXPECT(gbc.readMem(0xdbff), 0x3);
        // CB 03 038B
        gbc.setState(0xbfa8, 0xbf68, 0x3880, 0x7521, 0x6d9b, 0xd554, 0x0, 0x0);
        gbc.writeMem(0xbfa8, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xbf68);
        EXPECT(gbc.pc(), 0xbfaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfa8), 0xcb);
        EXPECT(gbc.readMem(0xbfa9), 0x3);
        // CB 03 038C
        gbc.setState(0x1fb3, 0x84b8, 0x7580, 0xb824, 0x7916, 0xaec4, 0x1, 0x1);
        gbc.writeMem(0x1fb3, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x84b8);
        EXPECT(gbc.pc(), 0x1fb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 038D
        gbc.setState(0x8709, 0x7a78, 0xc9d0, 0xac7a, 0xc381, 0x40b6, 0x1, 0x1);
        gbc.writeMem(0x8709, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x7a78);
        EXPECT(gbc.pc(), 0x870b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8709), 0xcb);
        EXPECT(gbc.readMem(0x870a), 0x3);
        // CB 03 038E
        gbc.setState(0x8ea9, 0x8b79, 0x3b0, 0x6fc9, 0x5f21, 0xc04d, 0x1, 0x1);
        gbc.writeMem(0x8ea9, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x8b79);
        EXPECT(gbc.pc(), 0x8eab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ea9), 0xcb);
        EXPECT(gbc.readMem(0x8eaa), 0x3);
        // CB 03 038F
        gbc.setState(0xe7c6, 0xd384, 0x1840, 0x654e, 0xed5e, 0xfe2b, 0x0, 0x1);
        gbc.writeMem(0xe7c6, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xd384);
        EXPECT(gbc.pc(), 0xe7c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7c6), 0xcb);
        EXPECT(gbc.readMem(0xe7c7), 0x3);
        // CB 03 0390
        gbc.setState(0xdd08, 0x4fe6, 0x7c0, 0x1254, 0x2281, 0x799d, 0x0, 0x0);
        gbc.writeMem(0xdd08, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x4fe6);
        EXPECT(gbc.pc(), 0xdd0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd08), 0xcb);
        EXPECT(gbc.readMem(0xdd09), 0x3);
        // CB 03 0391
        gbc.setState(0x4cb7, 0xf960, 0x2b0, 0x5971, 0xba1, 0xb5d3, 0x0, 0x1);
        gbc.writeMem(0x4cb7, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xf960);
        EXPECT(gbc.pc(), 0x4cb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0392
        gbc.setState(0xd1bb, 0xd8ad, 0x7080, 0xf3bc, 0x5fa9, 0x2ad, 0x1, 0x0);
        gbc.writeMem(0xd1bb, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xd8ad);
        EXPECT(gbc.pc(), 0xd1bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1bb), 0xcb);
        EXPECT(gbc.readMem(0xd1bc), 0x3);
        // CB 03 0393
        gbc.setState(0x5204, 0xa2de, 0xad50, 0xa98e, 0xd5a7, 0xac49, 0x0, 0x0);
        gbc.writeMem(0x5204, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xa2de);
        EXPECT(gbc.pc(), 0x5206);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0394
        gbc.setState(0xdd6a, 0xc172, 0xa980, 0x1d9, 0x875a, 0x65c9, 0x0, 0x0);
        gbc.writeMem(0xdd6a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xc172);
        EXPECT(gbc.pc(), 0xdd6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd6a), 0xcb);
        EXPECT(gbc.readMem(0xdd6b), 0x3);
        // CB 03 0395
        gbc.setState(0x1e60, 0x661, 0xbea0, 0xdb0a, 0x50a9, 0x7aff, 0x1, 0x0);
        gbc.writeMem(0x1e60, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x661);
        EXPECT(gbc.pc(), 0x1e62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0397
        gbc.setState(0x5a55, 0x4abf, 0x5020, 0x86db, 0x756a, 0x8957, 0x1, 0x0);
        gbc.writeMem(0x5a55, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x4abf);
        EXPECT(gbc.pc(), 0x5a57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 0398
        gbc.setState(0xb85, 0xd75a, 0xe620, 0x4c8b, 0x69c9, 0x8f4f, 0x0, 0x1);
        gbc.writeMem(0xb85, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xd75a);
        EXPECT(gbc.pc(), 0xb87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 0399
        gbc.setState(0xd21, 0x48a8, 0xcee0, 0xee9b, 0x8a0a, 0x26a1, 0x1, 0x1);
        gbc.writeMem(0xd21, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x48a8);
        EXPECT(gbc.pc(), 0xd23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 039A
        gbc.setState(0xd2b9, 0x5568, 0x61e0, 0xf7ad, 0xd782, 0x215, 0x1, 0x1);
        gbc.writeMem(0xd2b9, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x5568);
        EXPECT(gbc.pc(), 0xd2bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2b9), 0xcb);
        EXPECT(gbc.readMem(0xd2ba), 0x3);
        // CB 03 039B
        gbc.setState(0x9998, 0xf436, 0x68b0, 0x60b6, 0x86ec, 0x9b63, 0x0, 0x0);
        gbc.writeMem(0x9998, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xf436);
        EXPECT(gbc.pc(), 0x999a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9998), 0xcb);
        EXPECT(gbc.readMem(0x9999), 0x3);
        // CB 03 039C
        gbc.setState(0xd1aa, 0x7c8a, 0xc530, 0xdfa9, 0xb03f, 0x4aed, 0x1, 0x0);
        gbc.writeMem(0xd1aa, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x7c8a);
        EXPECT(gbc.pc(), 0xd1ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1aa), 0xcb);
        EXPECT(gbc.readMem(0xd1ab), 0x3);
        // CB 03 039D
        gbc.setState(0x12bc, 0xefda, 0x6dc0, 0x74ff, 0x153f, 0xe67d, 0x0, 0x0);
        gbc.writeMem(0x12bc, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xefda);
        EXPECT(gbc.pc(), 0x12be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 039E
        gbc.setState(0x9472, 0xd357, 0x8230, 0x5fa6, 0x62cd, 0x18e3, 0x0, 0x1);
        gbc.writeMem(0x9472, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xd357);
        EXPECT(gbc.pc(), 0x9474);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9472), 0xcb);
        EXPECT(gbc.readMem(0x9473), 0x3);
        // CB 03 039F
        gbc.setState(0xa8c2, 0x3ea5, 0xd9b0, 0xc76c, 0x5d14, 0xe63f, 0x1, 0x1);
        gbc.writeMem(0xa8c2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x3ea5);
        EXPECT(gbc.pc(), 0xa8c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8c2), 0xcb);
        EXPECT(gbc.readMem(0xa8c3), 0x3);
        // CB 03 03A0
        gbc.setState(0x4f6b, 0x62c8, 0x25d0, 0x4b79, 0x665f, 0xbb5f, 0x0, 0x0);
        gbc.writeMem(0x4f6b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x62c8);
        EXPECT(gbc.pc(), 0x4f6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 03A1
        gbc.setState(0x1fb7, 0x6e6e, 0x6ce0, 0x50b, 0x8fcc, 0xa9ef, 0x1, 0x0);
        gbc.writeMem(0x1fb7, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x6e6e);
        EXPECT(gbc.pc(), 0x1fb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 03A2
        gbc.setState(0x206, 0xf37e, 0xe940, 0x2c5e, 0x8a6, 0xc70d, 0x1, 0x1);
        gbc.writeMem(0x206, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xf37e);
        EXPECT(gbc.pc(), 0x208);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 03A3
        gbc.setState(0x470f, 0xb2c5, 0xe900, 0xb34f, 0xb07e, 0x4483, 0x0, 0x0);
        gbc.writeMem(0x470f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xb2c5);
        EXPECT(gbc.pc(), 0x4711);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 03A4
        gbc.setState(0xc929, 0x4f8b, 0x5f20, 0xc82f, 0x37d6, 0xe67b, 0x0, 0x0);
        gbc.writeMem(0xc929, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x4f8b);
        EXPECT(gbc.pc(), 0xc92b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc929), 0xcb);
        EXPECT(gbc.readMem(0xc92a), 0x3);
        // CB 03 03A5
        gbc.setState(0xe698, 0xf105, 0xfca0, 0xed1c, 0x4f19, 0x12d6, 0x0, 0x0);
        gbc.writeMem(0xe698, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xf105);
        EXPECT(gbc.pc(), 0xe69a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe698), 0xcb);
        EXPECT(gbc.readMem(0xe699), 0x3);
        // CB 03 03A6
        gbc.setState(0xb053, 0x4f4f, 0x5000, 0xd534, 0x13e8, 0x6d3f, 0x0, 0x1);
        gbc.writeMem(0xb053, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x4f4f);
        EXPECT(gbc.pc(), 0xb055);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb053), 0xcb);
        EXPECT(gbc.readMem(0xb054), 0x3);
        // CB 03 03A7
        gbc.setState(0x8e98, 0x13d2, 0x14c0, 0x987c, 0x9c42, 0x4e7c, 0x1, 0x0);
        gbc.writeMem(0x8e98, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x13d2);
        EXPECT(gbc.pc(), 0x8e9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e98), 0xcb);
        EXPECT(gbc.readMem(0x8e99), 0x3);
        // CB 03 03A8
        gbc.setState(0x2b6d, 0xdc92, 0xf540, 0x7bf, 0x3904, 0x135b, 0x0, 0x1);
        gbc.writeMem(0x2b6d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xdc92);
        EXPECT(gbc.pc(), 0x2b6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 03A9
        gbc.setState(0x9e5f, 0x2011, 0x300, 0x82b9, 0x5188, 0x379f, 0x1, 0x0);
        gbc.writeMem(0x9e5f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x2011);
        EXPECT(gbc.pc(), 0x9e61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e5f), 0xcb);
        EXPECT(gbc.readMem(0x9e60), 0x3);
        // CB 03 03AA
        gbc.setState(0x4e97, 0xe08f, 0x5c90, 0xc59f, 0x643b, 0x9512, 0x0, 0x0);
        gbc.writeMem(0x4e97, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xe08f);
        EXPECT(gbc.pc(), 0x4e99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 03AB
        gbc.setState(0xac4f, 0x8c17, 0xa220, 0x67a2, 0x27f4, 0xee57, 0x1, 0x1);
        gbc.writeMem(0xac4f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x8c17);
        EXPECT(gbc.pc(), 0xac51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac4f), 0xcb);
        EXPECT(gbc.readMem(0xac50), 0x3);
        // CB 03 03AC
        gbc.setState(0x6272, 0xf236, 0xd960, 0xc64b, 0x6cde, 0xc42a, 0x1, 0x1);
        gbc.writeMem(0x6272, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xf236);
        EXPECT(gbc.pc(), 0x6274);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 03AD
        gbc.setState(0xe723, 0x71c1, 0xf2c0, 0x82db, 0x816a, 0xcc5a, 0x0, 0x0);
        gbc.writeMem(0xe723, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x71c1);
        EXPECT(gbc.pc(), 0xe725);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe723), 0xcb);
        EXPECT(gbc.readMem(0xe724), 0x3);
        // CB 03 03AE
        gbc.setState(0x4d85, 0x13c, 0x6990, 0x8fc9, 0x37cc, 0xe1b5, 0x1, 0x0);
        gbc.writeMem(0x4d85, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x13c);
        EXPECT(gbc.pc(), 0x4d87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 03AF
        gbc.setState(0x6dca, 0x1f10, 0x8910, 0xb1d2, 0xb312, 0xf97c, 0x1, 0x0);
        gbc.writeMem(0x6dca, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x1f10);
        EXPECT(gbc.pc(), 0x6dcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 03B0
        gbc.setState(0x27a9, 0x1314, 0x4710, 0xd1a, 0x9a29, 0xe2e3, 0x1, 0x1);
        gbc.writeMem(0x27a9, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x1314);
        EXPECT(gbc.pc(), 0x27ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 03B1
        gbc.setState(0x9b1c, 0x95ee, 0x28e0, 0x1b36, 0x6254, 0x42df, 0x1, 0x1);
        gbc.writeMem(0x9b1c, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x95ee);
        EXPECT(gbc.pc(), 0x9b1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b1c), 0xcb);
        EXPECT(gbc.readMem(0x9b1d), 0x3);
        // CB 03 03B2
        gbc.setState(0xa3e4, 0xdf9e, 0x31e0, 0x3e89, 0x5502, 0xb64c, 0x0, 0x1);
        gbc.writeMem(0xa3e4, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xdf9e);
        EXPECT(gbc.pc(), 0xa3e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3e4), 0xcb);
        EXPECT(gbc.readMem(0xa3e5), 0x3);
        // CB 03 03B3
        gbc.setState(0xa193, 0x5112, 0xfc20, 0x2207, 0xbe2e, 0xe1cd, 0x0, 0x1);
        gbc.writeMem(0xa193, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x5112);
        EXPECT(gbc.pc(), 0xa195);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa193), 0xcb);
        EXPECT(gbc.readMem(0xa194), 0x3);
        // CB 03 03B4
        gbc.setState(0x1d4b, 0x3bb4, 0xe0d0, 0x57fe, 0x6d, 0x6a70, 0x0, 0x0);
        gbc.writeMem(0x1d4b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x3bb4);
        EXPECT(gbc.pc(), 0x1d4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 03B6
        gbc.setState(0x7c4d, 0xaa9, 0x6250, 0x137a, 0xfc07, 0x63da, 0x0, 0x0);
        gbc.writeMem(0x7c4d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xaa9);
        EXPECT(gbc.pc(), 0x7c4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 03B7
        gbc.setState(0x5a3b, 0x73c9, 0xd190, 0x5ca1, 0xebba, 0x1971, 0x0, 0x0);
        gbc.writeMem(0x5a3b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x73c9);
        EXPECT(gbc.pc(), 0x5a3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 03B8
        gbc.setState(0x1fe0, 0x7387, 0x9020, 0xf865, 0x9fcd, 0x9449, 0x1, 0x0);
        gbc.writeMem(0x1fe0, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x7387);
        EXPECT(gbc.pc(), 0x1fe2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 03B9
        gbc.setState(0x5ea1, 0x8048, 0x53f0, 0xaed1, 0x9f33, 0xf09c, 0x1, 0x0);
        gbc.writeMem(0x5ea1, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x8048);
        EXPECT(gbc.pc(), 0x5ea3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 03BA
        gbc.setState(0xaf92, 0xcd89, 0xa0c0, 0x7336, 0x2572, 0xbd0c, 0x0, 0x0);
        gbc.writeMem(0xaf92, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xcd89);
        EXPECT(gbc.pc(), 0xaf94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf92), 0xcb);
        EXPECT(gbc.readMem(0xaf93), 0x3);
        // CB 03 03BB
        gbc.setState(0x8184, 0x7c70, 0x3760, 0x8fc1, 0x1d11, 0xdcdb, 0x0, 0x1);
        gbc.writeMem(0x8184, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x7c70);
        EXPECT(gbc.pc(), 0x8186);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8184), 0xcb);
        EXPECT(gbc.readMem(0x8185), 0x3);
        // CB 03 03BC
        gbc.setState(0x2e4b, 0x5af4, 0x4580, 0x7adc, 0xfe1e, 0xa0ca, 0x0, 0x1);
        gbc.writeMem(0x2e4b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x5af4);
        EXPECT(gbc.pc(), 0x2e4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 03BD
        gbc.setState(0x13d7, 0x5031, 0x10c0, 0x8093, 0x4f5f, 0x8114, 0x0, 0x1);
        gbc.writeMem(0x13d7, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x5031);
        EXPECT(gbc.pc(), 0x13d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 03BE
        gbc.setState(0xc92, 0x239d, 0x83b0, 0x80a5, 0x380b, 0x6f42, 0x0, 0x0);
        gbc.writeMem(0xc92, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x239d);
        EXPECT(gbc.pc(), 0xc94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 03BF
        gbc.setState(0xb763, 0x9846, 0xd940, 0x6802, 0x7e89, 0xbdd8, 0x0, 0x1);
        gbc.writeMem(0xb763, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x9846);
        EXPECT(gbc.pc(), 0xb765);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb763), 0xcb);
        EXPECT(gbc.readMem(0xb764), 0x3);
        // CB 03 03C0
        gbc.setState(0xac85, 0x1f1d, 0x4b80, 0x3c3a, 0x2439, 0xe452, 0x0, 0x1);
        gbc.writeMem(0xac85, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x1f1d);
        EXPECT(gbc.pc(), 0xac87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac85), 0xcb);
        EXPECT(gbc.readMem(0xac86), 0x3);
        // CB 03 03C1
        gbc.setState(0x1502, 0x3078, 0x3470, 0xd5ca, 0xf317, 0xb976, 0x1, 0x1);
        gbc.writeMem(0x1502, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x3078);
        EXPECT(gbc.pc(), 0x1504);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 03C2
        gbc.setState(0x8aa5, 0x52c5, 0x2e20, 0xb6b4, 0xcba1, 0x1919, 0x0, 0x1);
        gbc.writeMem(0x8aa5, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x52c5);
        EXPECT(gbc.pc(), 0x8aa7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8aa5), 0xcb);
        EXPECT(gbc.readMem(0x8aa6), 0x3);
        // CB 03 03C3
        gbc.setState(0x5eae, 0xbe98, 0x5820, 0xcac8, 0xc4a0, 0x988b, 0x1, 0x0);
        gbc.writeMem(0x5eae, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xbe98);
        EXPECT(gbc.pc(), 0x5eb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 03C4
        gbc.setState(0x4661, 0x13d5, 0x1520, 0x70, 0x9e64, 0x37de, 0x0, 0x0);
        gbc.writeMem(0x4661, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x13d5);
        EXPECT(gbc.pc(), 0x4663);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 03C5
        gbc.setState(0x384b, 0xa87d, 0xeeb0, 0xb898, 0x19a8, 0x476d, 0x1, 0x1);
        gbc.writeMem(0x384b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xa87d);
        EXPECT(gbc.pc(), 0x384d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 03C6
        gbc.setState(0xc47e, 0xd925, 0xde60, 0xf0d4, 0xb9c1, 0xc85f, 0x1, 0x1);
        gbc.writeMem(0xc47e, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xd925);
        EXPECT(gbc.pc(), 0xc480);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc47e), 0xcb);
        EXPECT(gbc.readMem(0xc47f), 0x3);
        // CB 03 03C7
        gbc.setState(0xdc64, 0xc435, 0x2610, 0xc09d, 0x176e, 0x217b, 0x0, 0x1);
        gbc.writeMem(0xdc64, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xc435);
        EXPECT(gbc.pc(), 0xdc66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc64), 0xcb);
        EXPECT(gbc.readMem(0xdc65), 0x3);
        // CB 03 03C8
        gbc.setState(0xa3f8, 0x69b6, 0x1c80, 0xb85e, 0xb683, 0x7cc6, 0x0, 0x1);
        gbc.writeMem(0xa3f8, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x69b6);
        EXPECT(gbc.pc(), 0xa3fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3f8), 0xcb);
        EXPECT(gbc.readMem(0xa3f9), 0x3);
        // CB 03 03C9
        gbc.setState(0xa55d, 0xe34c, 0xb430, 0xb4bd, 0x28a1, 0x4e0, 0x0, 0x1);
        gbc.writeMem(0xa55d, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xe34c);
        EXPECT(gbc.pc(), 0xa55f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa55d), 0xcb);
        EXPECT(gbc.readMem(0xa55e), 0x3);
        // CB 03 03CA
        gbc.setState(0xa5f7, 0x9aa4, 0xc2c0, 0x56ac, 0x6686, 0x4b59, 0x1, 0x1);
        gbc.writeMem(0xa5f7, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x9aa4);
        EXPECT(gbc.pc(), 0xa5f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5f7), 0xcb);
        EXPECT(gbc.readMem(0xa5f8), 0x3);
        // CB 03 03CB
        gbc.setState(0x43c0, 0x1585, 0xaa00, 0xc521, 0x1dbd, 0x5714, 0x0, 0x0);
        gbc.writeMem(0x43c0, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x1585);
        EXPECT(gbc.pc(), 0x43c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 03CC
        gbc.setState(0x34c2, 0x53c5, 0x9aa0, 0x648d, 0xddc0, 0x27c2, 0x0, 0x0);
        gbc.writeMem(0x34c2, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x53c5);
        EXPECT(gbc.pc(), 0x34c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 03CD
        gbc.setState(0xb871, 0xec1a, 0x2e90, 0x1a88, 0x7c1f, 0xe84b, 0x0, 0x0);
        gbc.writeMem(0xb871, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xec1a);
        EXPECT(gbc.pc(), 0xb873);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb871), 0xcb);
        EXPECT(gbc.readMem(0xb872), 0x3);
        // CB 03 03CE
        gbc.setState(0x8783, 0x88aa, 0x9400, 0x59b8, 0x84a6, 0xa916, 0x0, 0x1);
        gbc.writeMem(0x8783, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x88aa);
        EXPECT(gbc.pc(), 0x8785);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8783), 0xcb);
        EXPECT(gbc.readMem(0x8784), 0x3);
        // CB 03 03CF
        gbc.setState(0x6692, 0xb679, 0x1890, 0x192a, 0xbdeb, 0x2a61, 0x1, 0x0);
        gbc.writeMem(0x6692, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xb679);
        EXPECT(gbc.pc(), 0x6694);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 03D1
        gbc.setState(0x4d7, 0x245a, 0xfe40, 0xc5dc, 0xdfab, 0x50b4, 0x1, 0x1);
        gbc.writeMem(0x4d7, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x245a);
        EXPECT(gbc.pc(), 0x4d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 03D2
        gbc.setState(0x69df, 0x7aa5, 0x9830, 0xaa46, 0xb5c, 0x61e9, 0x0, 0x0);
        gbc.writeMem(0x69df, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x7aa5);
        EXPECT(gbc.pc(), 0x69e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 03D3
        gbc.setState(0x3216, 0xc008, 0x5740, 0x9282, 0x6b6c, 0xe23, 0x0, 0x0);
        gbc.writeMem(0x3216, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xc008);
        EXPECT(gbc.pc(), 0x3218);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 03D4
        gbc.setState(0xe027, 0xf79d, 0xfaf0, 0x5719, 0x950e, 0x6eb8, 0x0, 0x1);
        gbc.writeMem(0xe027, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xf79d);
        EXPECT(gbc.pc(), 0xe029);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe027), 0xcb);
        EXPECT(gbc.readMem(0xe028), 0x3);
        // CB 03 03D5
        gbc.setState(0x901f, 0x9878, 0xf8a0, 0x748d, 0xdf97, 0x3c2a, 0x0, 0x1);
        gbc.writeMem(0x901f, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x9878);
        EXPECT(gbc.pc(), 0x9021);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x901f), 0xcb);
        EXPECT(gbc.readMem(0x9020), 0x3);
        // CB 03 03D6
        gbc.setState(0xc49a, 0x4a5, 0x52c0, 0x88f9, 0x2965, 0x89d6, 0x1, 0x1);
        gbc.writeMem(0xc49a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x4a5);
        EXPECT(gbc.pc(), 0xc49c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc49a), 0xcb);
        EXPECT(gbc.readMem(0xc49b), 0x3);
        // CB 03 03D7
        gbc.setState(0xe9e8, 0xbc8a, 0x66b0, 0x3c94, 0x6783, 0x8d50, 0x1, 0x0);
        gbc.writeMem(0xe9e8, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xbc8a);
        EXPECT(gbc.pc(), 0xe9ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9e8), 0xcb);
        EXPECT(gbc.readMem(0xe9e9), 0x3);
        // CB 03 03D8
        gbc.setState(0x588a, 0x4485, 0x5b00, 0xb267, 0x7240, 0x9add, 0x1, 0x0);
        gbc.writeMem(0x588a, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x4485);
        EXPECT(gbc.pc(), 0x588c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 03D9
        gbc.setState(0xb3d6, 0x8b8a, 0x1a70, 0xfee8, 0x7afa, 0x78d1, 0x0, 0x0);
        gbc.writeMem(0xb3d6, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x8b8a);
        EXPECT(gbc.pc(), 0xb3d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3d6), 0xcb);
        EXPECT(gbc.readMem(0xb3d7), 0x3);
        // CB 03 03DA
        gbc.setState(0x9202, 0x55f6, 0x6de0, 0x213a, 0xd1f, 0xec2e, 0x1, 0x0);
        gbc.writeMem(0x9202, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x55f6);
        EXPECT(gbc.pc(), 0x9204);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9202), 0xcb);
        EXPECT(gbc.readMem(0x9203), 0x3);
        // CB 03 03DB
        gbc.setState(0x2e0c, 0x80b9, 0xa9a0, 0xa5c7, 0x1746, 0x2943, 0x1, 0x1);
        gbc.writeMem(0x2e0c, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x80b9);
        EXPECT(gbc.pc(), 0x2e0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 03DC
        gbc.setState(0x6038, 0x2932, 0x5a40, 0x8b7, 0x210d, 0x4ba, 0x1, 0x0);
        gbc.writeMem(0x6038, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x2932);
        EXPECT(gbc.pc(), 0x603a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 03DD
        gbc.setState(0xe2eb, 0x2ff6, 0xf1b0, 0x89bc, 0xabd, 0x40c6, 0x1, 0x0);
        gbc.writeMem(0xe2eb, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x2ff6);
        EXPECT(gbc.pc(), 0xe2ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2eb), 0xcb);
        EXPECT(gbc.readMem(0xe2ec), 0x3);
        // CB 03 03DE
        gbc.setState(0xefc3, 0x9bd6, 0x60c0, 0xc7c8, 0x7cb2, 0x75b, 0x0, 0x0);
        gbc.writeMem(0xefc3, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x9bd6);
        EXPECT(gbc.pc(), 0xefc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefc3), 0xcb);
        EXPECT(gbc.readMem(0xefc4), 0x3);
        // CB 03 03DF
        gbc.setState(0xbc3c, 0x431, 0xf90, 0x3395, 0x346c, 0xeb07, 0x1, 0x1);
        gbc.writeMem(0xbc3c, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x431);
        EXPECT(gbc.pc(), 0xbc3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc3c), 0xcb);
        EXPECT(gbc.readMem(0xbc3d), 0x3);
        // CB 03 03E0
        gbc.setState(0xae57, 0x6089, 0xa130, 0xcbb8, 0x8042, 0xd1ad, 0x0, 0x0);
        gbc.writeMem(0xae57, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x6089);
        EXPECT(gbc.pc(), 0xae59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae57), 0xcb);
        EXPECT(gbc.readMem(0xae58), 0x3);
        // CB 03 03E1
        gbc.setState(0x5824, 0x5986, 0xc600, 0x9053, 0xbff1, 0x173a, 0x0, 0x0);
        gbc.writeMem(0x5824, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x5986);
        EXPECT(gbc.pc(), 0x5826);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 03E2
        gbc.setState(0x76d9, 0xeff6, 0x64c0, 0xa32, 0xa107, 0x8313, 0x1, 0x1);
        gbc.writeMem(0x76d9, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xeff6);
        EXPECT(gbc.pc(), 0x76db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 03E3
        gbc.setState(0x648c, 0x701f, 0xc990, 0x3996, 0x3689, 0x932f, 0x1, 0x1);
        gbc.writeMem(0x648c, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x701f);
        EXPECT(gbc.pc(), 0x648e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 03 03E4
        gbc.setState(0xd6df, 0x280, 0x4060, 0x97d7, 0xa5e8, 0xcfa2, 0x1, 0x0);
        gbc.writeMem(0xd6df, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x280);
        EXPECT(gbc.pc(), 0xd6e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6df), 0xcb);
        EXPECT(gbc.readMem(0xd6e0), 0x3);
        // CB 03 03E5
        gbc.setState(0x1aff, 0xfdd6, 0x7310, 0x1644, 0x882f, 0x2f37, 0x0, 0x1);
        gbc.writeMem(0x1aff, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xfdd6);
        EXPECT(gbc.pc(), 0x1b01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 03 03E6
        gbc.setState(0x890b, 0xb861, 0xf30, 0x8bf0, 0x3c1a, 0xb3e, 0x0, 0x0);
        gbc.writeMem(0x890b, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xb861);
        EXPECT(gbc.pc(), 0x890d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x890b), 0xcb);
        EXPECT(gbc.readMem(0x890c), 0x3);
        // CB 03 03E7
        gbc.setState(0x2754, 0x7c2e, 0x1e70, 0xa076, 0x654b, 0xca44, 0x1, 0x1);
        gbc.writeMem(0x2754, { 0xcb, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x7c2e);
        EXPECT(gbc.pc(), 0x2756);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
    }
}
#endif
