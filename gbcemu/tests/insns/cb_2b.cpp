#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_cb_2b)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_cb_2b) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 2B 0000
        gbc.setState(0xe196, 0x9238, 0xbbd0, 0x921d, 0x47ce, 0x2d18, 0x1, 0x1);
        gbc.writeMem(0xe196, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x9238);
        EXPECT(gbc.pc(), 0xe198);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe196), 0xcb);
        EXPECT(gbc.readMem(0xe197), 0x2b);
        // CB 2B 0001
        gbc.setState(0xccb8, 0x17bc, 0xba80, 0x50a2, 0xf18, 0x7898, 0x1, 0x1);
        gbc.writeMem(0xccb8, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x17bc);
        EXPECT(gbc.pc(), 0xccba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccb8), 0xcb);
        EXPECT(gbc.readMem(0xccb9), 0x2b);
        // CB 2B 0002
        gbc.setState(0x93aa, 0xbd46, 0x7620, 0xf86e, 0xd2, 0x7e2a, 0x1, 0x1);
        gbc.writeMem(0x93aa, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xbd46);
        EXPECT(gbc.pc(), 0x93ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93aa), 0xcb);
        EXPECT(gbc.readMem(0x93ab), 0x2b);
        // CB 2B 0003
        gbc.setState(0xceb0, 0x90a5, 0x87e0, 0xa853, 0x5c58, 0xec4b, 0x1, 0x1);
        gbc.writeMem(0xceb0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x90a5);
        EXPECT(gbc.pc(), 0xceb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xceb0), 0xcb);
        EXPECT(gbc.readMem(0xceb1), 0x2b);
        // CB 2B 0004
        gbc.setState(0xb457, 0xfb9a, 0x1dc0, 0xa077, 0xc64e, 0x92b6, 0x0, 0x1);
        gbc.writeMem(0xb457, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xfb9a);
        EXPECT(gbc.pc(), 0xb459);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb457), 0xcb);
        EXPECT(gbc.readMem(0xb458), 0x2b);
        // CB 2B 0005
        gbc.setState(0x369, 0x14bd, 0x76e0, 0x1933, 0xa033, 0x9d19, 0x1, 0x1);
        gbc.writeMem(0x369, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x14bd);
        EXPECT(gbc.pc(), 0x36b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0006
        gbc.setState(0xef0a, 0x2a17, 0xea0, 0xeb56, 0xe45d, 0xa1f2, 0x0, 0x1);
        gbc.writeMem(0xef0a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x2a17);
        EXPECT(gbc.pc(), 0xef0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef0a), 0xcb);
        EXPECT(gbc.readMem(0xef0b), 0x2b);
        // CB 2B 0007
        gbc.setState(0x97c3, 0xc393, 0x8e80, 0x9635, 0x6611, 0x6fa, 0x0, 0x1);
        gbc.writeMem(0x97c3, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xc393);
        EXPECT(gbc.pc(), 0x97c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97c3), 0xcb);
        EXPECT(gbc.readMem(0x97c4), 0x2b);
        // CB 2B 0008
        gbc.setState(0xc159, 0x4dda, 0x1b80, 0x857d, 0x9f52, 0x68d1, 0x0, 0x1);
        gbc.writeMem(0xc159, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x4dda);
        EXPECT(gbc.pc(), 0xc15b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc159), 0xcb);
        EXPECT(gbc.readMem(0xc15a), 0x2b);
        // CB 2B 0009
        gbc.setState(0x5af2, 0x5a75, 0x9b50, 0x75c7, 0x2b56, 0xe612, 0x0, 0x0);
        gbc.writeMem(0x5af2, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x5a75);
        EXPECT(gbc.pc(), 0x5af4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 000A
        gbc.setState(0x2e71, 0xaec2, 0xc0f0, 0x71c0, 0x248b, 0xce23, 0x1, 0x1);
        gbc.writeMem(0x2e71, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xaec2);
        EXPECT(gbc.pc(), 0x2e73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 000B
        gbc.setState(0xb270, 0xd701, 0xd460, 0x6f9f, 0xa2f5, 0xe02b, 0x0, 0x0);
        gbc.writeMem(0xb270, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xd701);
        EXPECT(gbc.pc(), 0xb272);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb270), 0xcb);
        EXPECT(gbc.readMem(0xb271), 0x2b);
        // CB 2B 000C
        gbc.setState(0x6e18, 0xb988, 0xe840, 0xce33, 0x268d, 0xe120, 0x1, 0x1);
        gbc.writeMem(0x6e18, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xb988);
        EXPECT(gbc.pc(), 0x6e1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 000D
        gbc.setState(0x5724, 0x5881, 0x8d00, 0xe75c, 0xd2a5, 0x6a0, 0x1, 0x0);
        gbc.writeMem(0x5724, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x5881);
        EXPECT(gbc.pc(), 0x5726);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 000E
        gbc.setState(0x2795, 0x58d1, 0x91f0, 0xbfeb, 0xb1a0, 0x65a6, 0x1, 0x1);
        gbc.writeMem(0x2795, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x58d1);
        EXPECT(gbc.pc(), 0x2797);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 000F
        gbc.setState(0x7f1, 0xdb33, 0xb370, 0x238d, 0x5a94, 0x85cc, 0x0, 0x0);
        gbc.writeMem(0x7f1, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xdb33);
        EXPECT(gbc.pc(), 0x7f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0012
        gbc.setState(0xe461, 0x1009, 0x5500, 0xb4f8, 0x3b31, 0x7218, 0x1, 0x0);
        gbc.writeMem(0xe461, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x1009);
        EXPECT(gbc.pc(), 0xe463);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe461), 0xcb);
        EXPECT(gbc.readMem(0xe462), 0x2b);
        // CB 2B 0013
        gbc.setState(0xb340, 0x972e, 0x90, 0xb21d, 0x9274, 0x60f7, 0x0, 0x1);
        gbc.writeMem(0xb340, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x972e);
        EXPECT(gbc.pc(), 0xb342);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb340), 0xcb);
        EXPECT(gbc.readMem(0xb341), 0x2b);
        // CB 2B 0015
        gbc.setState(0xd3ba, 0xbad6, 0x58c0, 0xe5b4, 0x4151, 0xdb2c, 0x1, 0x0);
        gbc.writeMem(0xd3ba, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xbad6);
        EXPECT(gbc.pc(), 0xd3bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3ba), 0xcb);
        EXPECT(gbc.readMem(0xd3bb), 0x2b);
        // CB 2B 0016
        gbc.setState(0x4742, 0x3829, 0x6260, 0xdafe, 0xd176, 0xd283, 0x1, 0x1);
        gbc.writeMem(0x4742, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x3829);
        EXPECT(gbc.pc(), 0x4744);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0017
        gbc.setState(0x7438, 0x5f35, 0xf4c0, 0xaf9f, 0xdeb9, 0xae5e, 0x0, 0x1);
        gbc.writeMem(0x7438, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x5f35);
        EXPECT(gbc.pc(), 0x743a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0018
        gbc.setState(0x10a, 0x7c65, 0xf560, 0x3478, 0x6a9, 0x672f, 0x0, 0x1);
        gbc.writeMem(0x10a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x7c65);
        EXPECT(gbc.pc(), 0x10c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0019
        gbc.setState(0x212, 0x19d1, 0x8630, 0x1c1e, 0x30d0, 0x6bcb, 0x0, 0x1);
        gbc.writeMem(0x212, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x19d1);
        EXPECT(gbc.pc(), 0x214);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 001A
        gbc.setState(0xe119, 0x9af1, 0x7e0, 0xf64f, 0xca8, 0x9a08, 0x0, 0x1);
        gbc.writeMem(0xe119, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x9af1);
        EXPECT(gbc.pc(), 0xe11b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe119), 0xcb);
        EXPECT(gbc.readMem(0xe11a), 0x2b);
        // CB 2B 001B
        gbc.setState(0xbb38, 0x91d3, 0x8b0, 0x76c8, 0x9fc7, 0x7d3c, 0x1, 0x1);
        gbc.writeMem(0xbb38, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x91d3);
        EXPECT(gbc.pc(), 0xbb3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb38), 0xcb);
        EXPECT(gbc.readMem(0xbb39), 0x2b);
        // CB 2B 001C
        gbc.setState(0xd780, 0x624, 0xd460, 0x9177, 0x6fb3, 0xdcaa, 0x1, 0x1);
        gbc.writeMem(0xd780, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x624);
        EXPECT(gbc.pc(), 0xd782);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd780), 0xcb);
        EXPECT(gbc.readMem(0xd781), 0x2b);
        // CB 2B 001D
        gbc.setState(0xb04e, 0xcfcc, 0x9ce0, 0x6174, 0xce8e, 0x6701, 0x1, 0x1);
        gbc.writeMem(0xb04e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xcfcc);
        EXPECT(gbc.pc(), 0xb050);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb04e), 0xcb);
        EXPECT(gbc.readMem(0xb04f), 0x2b);
        // CB 2B 001E
        gbc.setState(0x475, 0xc9f1, 0xa630, 0xdf24, 0x95cf, 0xe5d9, 0x0, 0x0);
        gbc.writeMem(0x475, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xc9f1);
        EXPECT(gbc.pc(), 0x477);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 001F
        gbc.setState(0x245, 0x3149, 0x2b80, 0x4269, 0x80dc, 0x829a, 0x1, 0x0);
        gbc.writeMem(0x245, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x3149);
        EXPECT(gbc.pc(), 0x247);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0020
        gbc.setState(0xc9a1, 0xbcaf, 0xde0, 0x75dc, 0xae5, 0xce8b, 0x0, 0x0);
        gbc.writeMem(0xc9a1, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xbcaf);
        EXPECT(gbc.pc(), 0xc9a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9a1), 0xcb);
        EXPECT(gbc.readMem(0xc9a2), 0x2b);
        // CB 2B 0022
        gbc.setState(0x356c, 0xd847, 0x1630, 0x182f, 0xdc97, 0xb9d0, 0x0, 0x1);
        gbc.writeMem(0x356c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xd847);
        EXPECT(gbc.pc(), 0x356e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0024
        gbc.setState(0xae30, 0xb1, 0xdaa0, 0xd2fe, 0xff8a, 0x2f7, 0x1, 0x0);
        gbc.writeMem(0xae30, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xb1);
        EXPECT(gbc.pc(), 0xae32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae30), 0xcb);
        EXPECT(gbc.readMem(0xae31), 0x2b);
        // CB 2B 0025
        gbc.setState(0x7388, 0x7ce1, 0xc7d0, 0x6171, 0x4188, 0xa83f, 0x1, 0x0);
        gbc.writeMem(0x7388, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x7ce1);
        EXPECT(gbc.pc(), 0x738a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0026
        gbc.setState(0x96f1, 0xb19e, 0xb070, 0x6c41, 0x276, 0x150a, 0x0, 0x1);
        gbc.writeMem(0x96f1, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xb19e);
        EXPECT(gbc.pc(), 0x96f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96f1), 0xcb);
        EXPECT(gbc.readMem(0x96f2), 0x2b);
        // CB 2B 0027
        gbc.setState(0xe8af, 0x67fe, 0x4d0, 0xd91d, 0x4978, 0x703f, 0x1, 0x0);
        gbc.writeMem(0xe8af, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x67fe);
        EXPECT(gbc.pc(), 0xe8b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8af), 0xcb);
        EXPECT(gbc.readMem(0xe8b0), 0x2b);
        // CB 2B 0028
        gbc.setState(0xcd02, 0x7625, 0x8790, 0xb28, 0xed53, 0x3221, 0x1, 0x1);
        gbc.writeMem(0xcd02, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x7625);
        EXPECT(gbc.pc(), 0xcd04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd02), 0xcb);
        EXPECT(gbc.readMem(0xcd03), 0x2b);
        // CB 2B 0029
        gbc.setState(0x21c7, 0x9ad7, 0xb7d0, 0x27cd, 0x7be5, 0x82ef, 0x1, 0x0);
        gbc.writeMem(0x21c7, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x9ad7);
        EXPECT(gbc.pc(), 0x21c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 002A
        gbc.setState(0x2838, 0x4fb8, 0x3130, 0x79ab, 0x115b, 0x2491, 0x1, 0x0);
        gbc.writeMem(0x2838, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x4fb8);
        EXPECT(gbc.pc(), 0x283a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 002B
        gbc.setState(0xe38c, 0x1125, 0xed20, 0x5e23, 0xdcb9, 0xc2d2, 0x0, 0x0);
        gbc.writeMem(0xe38c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x1125);
        EXPECT(gbc.pc(), 0xe38e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe38c), 0xcb);
        EXPECT(gbc.readMem(0xe38d), 0x2b);
        // CB 2B 002C
        gbc.setState(0x2b27, 0xf18f, 0x10d0, 0xfffa, 0x8f24, 0x812, 0x1, 0x0);
        gbc.writeMem(0x2b27, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xf18f);
        EXPECT(gbc.pc(), 0x2b29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 002D
        gbc.setState(0xbc72, 0xf2b3, 0xf200, 0xdd10, 0x1f08, 0x4cc5, 0x1, 0x1);
        gbc.writeMem(0xbc72, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xf2b3);
        EXPECT(gbc.pc(), 0xbc74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc72), 0xcb);
        EXPECT(gbc.readMem(0xbc73), 0x2b);
        // CB 2B 002E
        gbc.setState(0x5fd4, 0xc20b, 0x3de0, 0xbda8, 0x634b, 0xadb9, 0x0, 0x1);
        gbc.writeMem(0x5fd4, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xc20b);
        EXPECT(gbc.pc(), 0x5fd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 002F
        gbc.setState(0xaeee, 0x45e1, 0xe200, 0xf644, 0x1690, 0x10de, 0x1, 0x1);
        gbc.writeMem(0xaeee, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x45e1);
        EXPECT(gbc.pc(), 0xaef0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaeee), 0xcb);
        EXPECT(gbc.readMem(0xaeef), 0x2b);
        // CB 2B 0030
        gbc.setState(0x478e, 0x6524, 0xf180, 0xc955, 0x32c7, 0x90c8, 0x1, 0x1);
        gbc.writeMem(0x478e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x6524);
        EXPECT(gbc.pc(), 0x4790);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0031
        gbc.setState(0x6dd6, 0x4add, 0x8a10, 0x8fa4, 0xf536, 0xbc2a, 0x1, 0x1);
        gbc.writeMem(0x6dd6, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x4add);
        EXPECT(gbc.pc(), 0x6dd8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0032
        gbc.setState(0x8972, 0x466b, 0x7460, 0x5cb6, 0xe7d3, 0x6da9, 0x0, 0x1);
        gbc.writeMem(0x8972, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x466b);
        EXPECT(gbc.pc(), 0x8974);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8972), 0xcb);
        EXPECT(gbc.readMem(0x8973), 0x2b);
        // CB 2B 0033
        gbc.setState(0x23fa, 0xc2e8, 0x1fa0, 0x539d, 0xf25d, 0x9178, 0x0, 0x0);
        gbc.writeMem(0x23fa, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xc2e8);
        EXPECT(gbc.pc(), 0x23fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0034
        gbc.setState(0x6566, 0xeef7, 0x6720, 0x1cae, 0xb7b3, 0xcbfd, 0x0, 0x1);
        gbc.writeMem(0x6566, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xeef7);
        EXPECT(gbc.pc(), 0x6568);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0035
        gbc.setState(0x2da, 0xc576, 0xf950, 0xe0d9, 0x9b34, 0x3acb, 0x1, 0x0);
        gbc.writeMem(0x2da, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xc576);
        EXPECT(gbc.pc(), 0x2dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0036
        gbc.setState(0xe5cd, 0x4d9, 0xc510, 0xb0c5, 0xfe6, 0xbc0b, 0x1, 0x1);
        gbc.writeMem(0xe5cd, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x4d9);
        EXPECT(gbc.pc(), 0xe5cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5cd), 0xcb);
        EXPECT(gbc.readMem(0xe5ce), 0x2b);
        // CB 2B 0037
        gbc.setState(0x4c02, 0xf87d, 0xe3d0, 0x91b5, 0x88ed, 0x9254, 0x0, 0x1);
        gbc.writeMem(0x4c02, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xf87d);
        EXPECT(gbc.pc(), 0x4c04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0038
        gbc.setState(0xdf95, 0xf530, 0xb3c0, 0xbb12, 0x35e1, 0xd507, 0x1, 0x1);
        gbc.writeMem(0xdf95, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xf530);
        EXPECT(gbc.pc(), 0xdf97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf95), 0xcb);
        EXPECT(gbc.readMem(0xdf96), 0x2b);
        // CB 2B 0039
        gbc.setState(0xabfa, 0x4e8a, 0x9650, 0xa122, 0x9903, 0xcc4b, 0x1, 0x1);
        gbc.writeMem(0xabfa, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x4e8a);
        EXPECT(gbc.pc(), 0xabfc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabfa), 0xcb);
        EXPECT(gbc.readMem(0xabfb), 0x2b);
        // CB 2B 003A
        gbc.setState(0x46c5, 0x21a0, 0x73c0, 0x513e, 0x30d3, 0x5ca4, 0x1, 0x0);
        gbc.writeMem(0x46c5, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x21a0);
        EXPECT(gbc.pc(), 0x46c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 003B
        gbc.setState(0x6f7a, 0x4e53, 0x9ec0, 0xca06, 0x8512, 0x6e45, 0x0, 0x1);
        gbc.writeMem(0x6f7a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x4e53);
        EXPECT(gbc.pc(), 0x6f7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 003C
        gbc.setState(0x6f61, 0xcc75, 0xe040, 0x1fe6, 0xee25, 0x1780, 0x0, 0x0);
        gbc.writeMem(0x6f61, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xcc75);
        EXPECT(gbc.pc(), 0x6f63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 003D
        gbc.setState(0x139, 0x38d5, 0xe30, 0x2886, 0xa18b, 0x6ad3, 0x1, 0x1);
        gbc.writeMem(0x139, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x38d5);
        EXPECT(gbc.pc(), 0x13b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 003E
        gbc.setState(0x596a, 0x5784, 0x5960, 0x425e, 0x1b68, 0x5ff4, 0x1, 0x1);
        gbc.writeMem(0x596a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x5784);
        EXPECT(gbc.pc(), 0x596c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 003F
        gbc.setState(0xa979, 0xce50, 0xddf0, 0xfc3b, 0x9852, 0x8c1b, 0x0, 0x0);
        gbc.writeMem(0xa979, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xce50);
        EXPECT(gbc.pc(), 0xa97b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa979), 0xcb);
        EXPECT(gbc.readMem(0xa97a), 0x2b);
        // CB 2B 0040
        gbc.setState(0x2c08, 0x9d02, 0xbca0, 0x258d, 0xef75, 0xa028, 0x1, 0x1);
        gbc.writeMem(0x2c08, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x9d02);
        EXPECT(gbc.pc(), 0x2c0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0041
        gbc.setState(0xe8c0, 0x2ac6, 0x7160, 0x4baf, 0x8ea7, 0x6e9b, 0x1, 0x1);
        gbc.writeMem(0xe8c0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x2ac6);
        EXPECT(gbc.pc(), 0xe8c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8c0), 0xcb);
        EXPECT(gbc.readMem(0xe8c1), 0x2b);
        // CB 2B 0042
        gbc.setState(0x1293, 0xaab9, 0x6f20, 0xa953, 0x1e2a, 0xfeaf, 0x0, 0x1);
        gbc.writeMem(0x1293, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xaab9);
        EXPECT(gbc.pc(), 0x1295);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0043
        gbc.setState(0xed7c, 0x5e08, 0x9db0, 0x8041, 0xfebb, 0xd77, 0x1, 0x0);
        gbc.writeMem(0xed7c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x5e08);
        EXPECT(gbc.pc(), 0xed7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed7c), 0xcb);
        EXPECT(gbc.readMem(0xed7d), 0x2b);
        // CB 2B 0044
        gbc.setState(0xcda9, 0x77cf, 0x8c20, 0xd5c9, 0x3b67, 0x9536, 0x1, 0x1);
        gbc.writeMem(0xcda9, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x77cf);
        EXPECT(gbc.pc(), 0xcdab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcda9), 0xcb);
        EXPECT(gbc.readMem(0xcdaa), 0x2b);
        // CB 2B 0045
        gbc.setState(0x12fc, 0x3c1d, 0x43f0, 0xd627, 0xa158, 0x30c9, 0x0, 0x0);
        gbc.writeMem(0x12fc, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x3c1d);
        EXPECT(gbc.pc(), 0x12fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0046
        gbc.setState(0x80b6, 0x4f8f, 0xdb20, 0xf564, 0x303f, 0x1c06, 0x0, 0x0);
        gbc.writeMem(0x80b6, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x4f8f);
        EXPECT(gbc.pc(), 0x80b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80b6), 0xcb);
        EXPECT(gbc.readMem(0x80b7), 0x2b);
        // CB 2B 0047
        gbc.setState(0xbc68, 0x4ecb, 0x37a0, 0x78ce, 0x5007, 0x5c4e, 0x1, 0x1);
        gbc.writeMem(0xbc68, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x4ecb);
        EXPECT(gbc.pc(), 0xbc6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc68), 0xcb);
        EXPECT(gbc.readMem(0xbc69), 0x2b);
        // CB 2B 0048
        gbc.setState(0x844, 0x95bb, 0x7370, 0xa169, 0xb8d7, 0xa552, 0x1, 0x0);
        gbc.writeMem(0x844, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x95bb);
        EXPECT(gbc.pc(), 0x846);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0049
        gbc.setState(0x5622, 0x5b18, 0x4f00, 0x2dc6, 0x65e8, 0xaefb, 0x0, 0x0);
        gbc.writeMem(0x5622, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x5b18);
        EXPECT(gbc.pc(), 0x5624);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 004A
        gbc.setState(0xbc8d, 0xb92a, 0x5310, 0xf56b, 0x1d0c, 0xf791, 0x1, 0x1);
        gbc.writeMem(0xbc8d, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xb92a);
        EXPECT(gbc.pc(), 0xbc8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc8d), 0xcb);
        EXPECT(gbc.readMem(0xbc8e), 0x2b);
        // CB 2B 004B
        gbc.setState(0x9f48, 0x7886, 0x2190, 0x1aed, 0x4c6, 0x58a9, 0x0, 0x0);
        gbc.writeMem(0x9f48, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x7886);
        EXPECT(gbc.pc(), 0x9f4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f48), 0xcb);
        EXPECT(gbc.readMem(0x9f49), 0x2b);
        // CB 2B 004C
        gbc.setState(0x8f0f, 0xc3c7, 0x3890, 0x3599, 0x9aef, 0x393b, 0x1, 0x1);
        gbc.writeMem(0x8f0f, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xc3c7);
        EXPECT(gbc.pc(), 0x8f11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f0f), 0xcb);
        EXPECT(gbc.readMem(0x8f10), 0x2b);
        // CB 2B 004D
        gbc.setState(0xb36a, 0xe7cc, 0x2c10, 0x1c81, 0xeae, 0xda63, 0x0, 0x0);
        gbc.writeMem(0xb36a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xe7cc);
        EXPECT(gbc.pc(), 0xb36c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb36a), 0xcb);
        EXPECT(gbc.readMem(0xb36b), 0x2b);
        // CB 2B 004E
        gbc.setState(0x66b0, 0xa568, 0x36f0, 0x565f, 0x5a0e, 0x6bb9, 0x1, 0x1);
        gbc.writeMem(0x66b0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xa568);
        EXPECT(gbc.pc(), 0x66b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 004F
        gbc.setState(0x7460, 0xdea3, 0x3280, 0x8ac6, 0xb60f, 0x5cb0, 0x0, 0x0);
        gbc.writeMem(0x7460, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xdea3);
        EXPECT(gbc.pc(), 0x7462);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0050
        gbc.setState(0x5569, 0x3c63, 0x1070, 0x441d, 0x4e3b, 0xf81, 0x1, 0x1);
        gbc.writeMem(0x5569, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x3c63);
        EXPECT(gbc.pc(), 0x556b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0051
        gbc.setState(0xa00f, 0xa591, 0x380, 0x7228, 0x798c, 0x9c4d, 0x0, 0x1);
        gbc.writeMem(0xa00f, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xa591);
        EXPECT(gbc.pc(), 0xa011);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa00f), 0xcb);
        EXPECT(gbc.readMem(0xa010), 0x2b);
        // CB 2B 0052
        gbc.setState(0xaec4, 0x281c, 0xa4d0, 0x67f5, 0x6afb, 0xe99c, 0x1, 0x1);
        gbc.writeMem(0xaec4, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x281c);
        EXPECT(gbc.pc(), 0xaec6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaec4), 0xcb);
        EXPECT(gbc.readMem(0xaec5), 0x2b);
        // CB 2B 0053
        gbc.setState(0x289a, 0x52be, 0xcb20, 0x1e64, 0x95f2, 0x32ce, 0x0, 0x0);
        gbc.writeMem(0x289a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x52be);
        EXPECT(gbc.pc(), 0x289c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0054
        gbc.setState(0x4a06, 0xbbfe, 0xf9a0, 0x79b5, 0x55d0, 0x9b80, 0x0, 0x1);
        gbc.writeMem(0x4a06, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xbbfe);
        EXPECT(gbc.pc(), 0x4a08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0055
        gbc.setState(0x2880, 0xd06d, 0x33b0, 0x5054, 0xcce6, 0x24b7, 0x0, 0x0);
        gbc.writeMem(0x2880, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xd06d);
        EXPECT(gbc.pc(), 0x2882);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0056
        gbc.setState(0xea16, 0xde78, 0x6890, 0x886d, 0x3460, 0x62ce, 0x1, 0x0);
        gbc.writeMem(0xea16, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xde78);
        EXPECT(gbc.pc(), 0xea18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea16), 0xcb);
        EXPECT(gbc.readMem(0xea17), 0x2b);
        // CB 2B 0057
        gbc.setState(0x66db, 0x1065, 0x7060, 0x243b, 0xda63, 0x91ec, 0x1, 0x0);
        gbc.writeMem(0x66db, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x1065);
        EXPECT(gbc.pc(), 0x66dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0058
        gbc.setState(0xeac0, 0x3ba8, 0x4480, 0x651b, 0x69a3, 0x4715, 0x0, 0x0);
        gbc.writeMem(0xeac0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x3ba8);
        EXPECT(gbc.pc(), 0xeac2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeac0), 0xcb);
        EXPECT(gbc.readMem(0xeac1), 0x2b);
        // CB 2B 0059
        gbc.setState(0x17a0, 0x477a, 0xf370, 0xcffb, 0x397a, 0xaef9, 0x0, 0x1);
        gbc.writeMem(0x17a0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x477a);
        EXPECT(gbc.pc(), 0x17a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 005A
        gbc.setState(0x8db7, 0xc40d, 0x65e0, 0x7a48, 0x53b3, 0xe900, 0x0, 0x1);
        gbc.writeMem(0x8db7, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xc40d);
        EXPECT(gbc.pc(), 0x8db9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8db7), 0xcb);
        EXPECT(gbc.readMem(0x8db8), 0x2b);
        // CB 2B 005B
        gbc.setState(0x687e, 0x2bbe, 0x1c50, 0x41bf, 0x964b, 0x9d5, 0x1, 0x1);
        gbc.writeMem(0x687e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x2bbe);
        EXPECT(gbc.pc(), 0x6880);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 005C
        gbc.setState(0x667b, 0x69cd, 0x6700, 0x4385, 0xb241, 0x8cdb, 0x1, 0x1);
        gbc.writeMem(0x667b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x69cd);
        EXPECT(gbc.pc(), 0x667d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 005D
        gbc.setState(0x5461, 0xec74, 0xfb20, 0x740d, 0xe44, 0x739a, 0x0, 0x0);
        gbc.writeMem(0x5461, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xec74);
        EXPECT(gbc.pc(), 0x5463);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 005E
        gbc.setState(0xbdb0, 0x96d4, 0xb40, 0xadd6, 0x8a99, 0x4d08, 0x0, 0x1);
        gbc.writeMem(0xbdb0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x96d4);
        EXPECT(gbc.pc(), 0xbdb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdb0), 0xcb);
        EXPECT(gbc.readMem(0xbdb1), 0x2b);
        // CB 2B 005F
        gbc.setState(0x9ee7, 0x3704, 0xc260, 0xf6e4, 0xb0db, 0xe375, 0x1, 0x1);
        gbc.writeMem(0x9ee7, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x3704);
        EXPECT(gbc.pc(), 0x9ee9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ee7), 0xcb);
        EXPECT(gbc.readMem(0x9ee8), 0x2b);
        // CB 2B 0060
        gbc.setState(0x46f6, 0x67c4, 0x69e0, 0x1537, 0x8d8b, 0xf0f8, 0x0, 0x1);
        gbc.writeMem(0x46f6, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x67c4);
        EXPECT(gbc.pc(), 0x46f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0062
        gbc.setState(0x2367, 0xf5d, 0xe060, 0x7577, 0xa3ad, 0x3de4, 0x0, 0x1);
        gbc.writeMem(0x2367, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xf5d);
        EXPECT(gbc.pc(), 0x2369);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0063
        gbc.setState(0x6773, 0x4641, 0x7b50, 0xd709, 0xc6e2, 0x340b, 0x1, 0x0);
        gbc.writeMem(0x6773, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x4641);
        EXPECT(gbc.pc(), 0x6775);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0064
        gbc.setState(0x2463, 0xce60, 0x9ec0, 0x90bd, 0x5b36, 0x1c6b, 0x1, 0x0);
        gbc.writeMem(0x2463, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xce60);
        EXPECT(gbc.pc(), 0x2465);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0065
        gbc.setState(0x72bc, 0x77d0, 0xb140, 0x976c, 0xcb43, 0x1c5a, 0x0, 0x1);
        gbc.writeMem(0x72bc, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x77d0);
        EXPECT(gbc.pc(), 0x72be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0066
        gbc.setState(0xd11e, 0x4903, 0x6b30, 0x448d, 0xb4c1, 0xaec6, 0x0, 0x0);
        gbc.writeMem(0xd11e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x4903);
        EXPECT(gbc.pc(), 0xd120);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd11e), 0xcb);
        EXPECT(gbc.readMem(0xd11f), 0x2b);
        // CB 2B 0067
        gbc.setState(0xb433, 0x41ff, 0x7cf0, 0xab39, 0xa848, 0xc696, 0x1, 0x1);
        gbc.writeMem(0xb433, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x41ff);
        EXPECT(gbc.pc(), 0xb435);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb433), 0xcb);
        EXPECT(gbc.readMem(0xb434), 0x2b);
        // CB 2B 0068
        gbc.setState(0xa8ea, 0x6d5c, 0x4a70, 0xd733, 0xeeac, 0xa0e3, 0x0, 0x0);
        gbc.writeMem(0xa8ea, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x6d5c);
        EXPECT(gbc.pc(), 0xa8ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8ea), 0xcb);
        EXPECT(gbc.readMem(0xa8eb), 0x2b);
        // CB 2B 0069
        gbc.setState(0xbad4, 0xd711, 0xc6d0, 0xe03, 0xac6c, 0x6136, 0x1, 0x0);
        gbc.writeMem(0xbad4, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xd711);
        EXPECT(gbc.pc(), 0xbad6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbad4), 0xcb);
        EXPECT(gbc.readMem(0xbad5), 0x2b);
        // CB 2B 006A
        gbc.setState(0xa7b4, 0x1c56, 0x4a00, 0x65ba, 0x6cd6, 0xc998, 0x0, 0x1);
        gbc.writeMem(0xa7b4, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x1c56);
        EXPECT(gbc.pc(), 0xa7b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7b4), 0xcb);
        EXPECT(gbc.readMem(0xa7b5), 0x2b);
        // CB 2B 006B
        gbc.setState(0x47e3, 0x7d07, 0xbd20, 0x5710, 0x1bee, 0x4e25, 0x0, 0x1);
        gbc.writeMem(0x47e3, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x7d07);
        EXPECT(gbc.pc(), 0x47e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 006C
        gbc.setState(0xa297, 0x337d, 0x94d0, 0x1b1b, 0x457c, 0x325b, 0x1, 0x1);
        gbc.writeMem(0xa297, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x337d);
        EXPECT(gbc.pc(), 0xa299);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa297), 0xcb);
        EXPECT(gbc.readMem(0xa298), 0x2b);
        // CB 2B 006D
        gbc.setState(0x771a, 0x4abd, 0xcf80, 0x8a1d, 0x4405, 0x8f36, 0x1, 0x1);
        gbc.writeMem(0x771a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x4abd);
        EXPECT(gbc.pc(), 0x771c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 006E
        gbc.setState(0x88ca, 0x2309, 0x570, 0x90f3, 0x1de, 0x4a75, 0x0, 0x0);
        gbc.writeMem(0x88ca, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x2309);
        EXPECT(gbc.pc(), 0x88cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88ca), 0xcb);
        EXPECT(gbc.readMem(0x88cb), 0x2b);
        // CB 2B 006F
        gbc.setState(0xeb59, 0x485f, 0xba70, 0x73c0, 0xd52a, 0x6ef, 0x0, 0x1);
        gbc.writeMem(0xeb59, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x485f);
        EXPECT(gbc.pc(), 0xeb5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb59), 0xcb);
        EXPECT(gbc.readMem(0xeb5a), 0x2b);
        // CB 2B 0070
        gbc.setState(0xec36, 0xc199, 0x5cc0, 0xe484, 0xce92, 0x1e74, 0x0, 0x0);
        gbc.writeMem(0xec36, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xc199);
        EXPECT(gbc.pc(), 0xec38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec36), 0xcb);
        EXPECT(gbc.readMem(0xec37), 0x2b);
        // CB 2B 0071
        gbc.setState(0x774a, 0x3b50, 0x8b60, 0xf3f6, 0xfc69, 0x2656, 0x1, 0x1);
        gbc.writeMem(0x774a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x3b50);
        EXPECT(gbc.pc(), 0x774c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0072
        gbc.setState(0xee19, 0x425e, 0x4510, 0x7acc, 0x20e, 0x76ae, 0x0, 0x1);
        gbc.writeMem(0xee19, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x425e);
        EXPECT(gbc.pc(), 0xee1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee19), 0xcb);
        EXPECT(gbc.readMem(0xee1a), 0x2b);
        // CB 2B 0073
        gbc.setState(0xad48, 0x80, 0x51f0, 0x2f73, 0x9968, 0xe58e, 0x1, 0x1);
        gbc.writeMem(0xad48, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x80);
        EXPECT(gbc.pc(), 0xad4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad48), 0xcb);
        EXPECT(gbc.readMem(0xad49), 0x2b);
        // CB 2B 0074
        gbc.setState(0x5f3c, 0x7828, 0x50f0, 0xa17c, 0xfb91, 0x3c, 0x0, 0x1);
        gbc.writeMem(0x5f3c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x7828);
        EXPECT(gbc.pc(), 0x5f3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0075
        gbc.setState(0x75c0, 0xdcd3, 0x49e0, 0x53cc, 0xbd74, 0xc12f, 0x0, 0x1);
        gbc.writeMem(0x75c0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xdcd3);
        EXPECT(gbc.pc(), 0x75c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0076
        gbc.setState(0xdacb, 0xe50c, 0x14d0, 0x1547, 0x31e2, 0xf200, 0x0, 0x1);
        gbc.writeMem(0xdacb, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xe50c);
        EXPECT(gbc.pc(), 0xdacd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdacb), 0xcb);
        EXPECT(gbc.readMem(0xdacc), 0x2b);
        // CB 2B 0077
        gbc.setState(0x1cd4, 0xfbdd, 0xb1e0, 0x3e32, 0x80a6, 0xd55c, 0x0, 0x1);
        gbc.writeMem(0x1cd4, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xfbdd);
        EXPECT(gbc.pc(), 0x1cd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0078
        gbc.setState(0x7636, 0xce1a, 0x62b0, 0x2d0a, 0x9b3e, 0x8b74, 0x1, 0x0);
        gbc.writeMem(0x7636, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xce1a);
        EXPECT(gbc.pc(), 0x7638);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0079
        gbc.setState(0x9492, 0x517, 0x250, 0xac89, 0x2bef, 0x6183, 0x0, 0x1);
        gbc.writeMem(0x9492, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x517);
        EXPECT(gbc.pc(), 0x9494);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9492), 0xcb);
        EXPECT(gbc.readMem(0x9493), 0x2b);
        // CB 2B 007A
        gbc.setState(0x67e6, 0x4fa8, 0x2f90, 0xc5b5, 0xee26, 0x2c14, 0x0, 0x1);
        gbc.writeMem(0x67e6, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x4fa8);
        EXPECT(gbc.pc(), 0x67e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 007B
        gbc.setState(0x925a, 0x4494, 0xbc50, 0x8f78, 0x695f, 0x9e6a, 0x1, 0x0);
        gbc.writeMem(0x925a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x4494);
        EXPECT(gbc.pc(), 0x925c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x925a), 0xcb);
        EXPECT(gbc.readMem(0x925b), 0x2b);
        // CB 2B 007C
        gbc.setState(0xbda8, 0xf2bb, 0x590, 0x522b, 0xbda3, 0x3df4, 0x0, 0x1);
        gbc.writeMem(0xbda8, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xf2bb);
        EXPECT(gbc.pc(), 0xbdaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbda8), 0xcb);
        EXPECT(gbc.readMem(0xbda9), 0x2b);
        // CB 2B 007D
        gbc.setState(0x73f4, 0xc183, 0x1480, 0x19d7, 0x6a6, 0x7422, 0x1, 0x0);
        gbc.writeMem(0x73f4, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xc183);
        EXPECT(gbc.pc(), 0x73f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 007E
        gbc.setState(0x1fba, 0xfe9, 0x8e60, 0x4928, 0x8b89, 0xd98e, 0x1, 0x0);
        gbc.writeMem(0x1fba, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xfe9);
        EXPECT(gbc.pc(), 0x1fbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 007F
        gbc.setState(0x1576, 0x8ef5, 0xb680, 0x161b, 0xbd04, 0x226e, 0x1, 0x1);
        gbc.writeMem(0x1576, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x8ef5);
        EXPECT(gbc.pc(), 0x1578);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0080
        gbc.setState(0xa02d, 0x3ce2, 0xa480, 0x53a6, 0x76a6, 0xb2cf, 0x1, 0x0);
        gbc.writeMem(0xa02d, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x3ce2);
        EXPECT(gbc.pc(), 0xa02f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa02d), 0xcb);
        EXPECT(gbc.readMem(0xa02e), 0x2b);
        // CB 2B 0081
        gbc.setState(0x1ebd, 0x5c1a, 0x9c10, 0xf5f8, 0x4017, 0xf4f3, 0x0, 0x1);
        gbc.writeMem(0x1ebd, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x5c1a);
        EXPECT(gbc.pc(), 0x1ebf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0082
        gbc.setState(0xedae, 0x4957, 0x7eb0, 0x323a, 0x4372, 0x4ea8, 0x0, 0x0);
        gbc.writeMem(0xedae, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x4957);
        EXPECT(gbc.pc(), 0xedb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedae), 0xcb);
        EXPECT(gbc.readMem(0xedaf), 0x2b);
        // CB 2B 0083
        gbc.setState(0x129e, 0xcaa6, 0xa20, 0x4137, 0xcae1, 0x40f0, 0x1, 0x0);
        gbc.writeMem(0x129e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xcaa6);
        EXPECT(gbc.pc(), 0x12a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0084
        gbc.setState(0x9660, 0xbfde, 0xe780, 0x8445, 0x9d4c, 0xac63, 0x1, 0x0);
        gbc.writeMem(0x9660, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xbfde);
        EXPECT(gbc.pc(), 0x9662);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9660), 0xcb);
        EXPECT(gbc.readMem(0x9661), 0x2b);
        // CB 2B 0085
        gbc.setState(0x8581, 0x3fa1, 0xb250, 0x5fcb, 0xda99, 0x4b35, 0x1, 0x1);
        gbc.writeMem(0x8581, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x3fa1);
        EXPECT(gbc.pc(), 0x8583);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8581), 0xcb);
        EXPECT(gbc.readMem(0x8582), 0x2b);
        // CB 2B 0086
        gbc.setState(0xa39f, 0xdfba, 0xe5b0, 0x7945, 0xb9a, 0x73b4, 0x1, 0x1);
        gbc.writeMem(0xa39f, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xdfba);
        EXPECT(gbc.pc(), 0xa3a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa39f), 0xcb);
        EXPECT(gbc.readMem(0xa3a0), 0x2b);
        // CB 2B 0087
        gbc.setState(0xcf87, 0x5864, 0x7f70, 0xe27b, 0xd4bc, 0x6c24, 0x1, 0x1);
        gbc.writeMem(0xcf87, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x5864);
        EXPECT(gbc.pc(), 0xcf89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf87), 0xcb);
        EXPECT(gbc.readMem(0xcf88), 0x2b);
        // CB 2B 0088
        gbc.setState(0xad76, 0x523c, 0x98b0, 0xa10f, 0xb66c, 0xde95, 0x1, 0x1);
        gbc.writeMem(0xad76, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x523c);
        EXPECT(gbc.pc(), 0xad78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad76), 0xcb);
        EXPECT(gbc.readMem(0xad77), 0x2b);
        // CB 2B 0089
        gbc.setState(0xaa16, 0xdda2, 0x6cd0, 0xa0de, 0xe4ce, 0x41a1, 0x0, 0x1);
        gbc.writeMem(0xaa16, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xdda2);
        EXPECT(gbc.pc(), 0xaa18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa16), 0xcb);
        EXPECT(gbc.readMem(0xaa17), 0x2b);
        // CB 2B 008A
        gbc.setState(0x9d6f, 0xbcf7, 0x1d20, 0xde8e, 0xd69d, 0xa4d3, 0x0, 0x0);
        gbc.writeMem(0x9d6f, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xbcf7);
        EXPECT(gbc.pc(), 0x9d71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d6f), 0xcb);
        EXPECT(gbc.readMem(0x9d70), 0x2b);
        // CB 2B 008B
        gbc.setState(0x2603, 0x5fd4, 0xc520, 0x9b66, 0x4978, 0xd33e, 0x0, 0x1);
        gbc.writeMem(0x2603, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x5fd4);
        EXPECT(gbc.pc(), 0x2605);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 008C
        gbc.setState(0x4d89, 0x6029, 0x1190, 0x2e4d, 0xfa88, 0x80a2, 0x1, 0x1);
        gbc.writeMem(0x4d89, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x6029);
        EXPECT(gbc.pc(), 0x4d8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 008D
        gbc.setState(0x80dd, 0x2860, 0xf2d0, 0xfd3, 0xf2dd, 0xa562, 0x0, 0x0);
        gbc.writeMem(0x80dd, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x2860);
        EXPECT(gbc.pc(), 0x80df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80dd), 0xcb);
        EXPECT(gbc.readMem(0x80de), 0x2b);
        // CB 2B 008E
        gbc.setState(0x23d3, 0x8fa6, 0x61e0, 0xacd0, 0x295, 0xc245, 0x0, 0x0);
        gbc.writeMem(0x23d3, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x8fa6);
        EXPECT(gbc.pc(), 0x23d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 008F
        gbc.setState(0x764f, 0x947f, 0xe5b0, 0xde3c, 0xec92, 0x4744, 0x1, 0x1);
        gbc.writeMem(0x764f, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x947f);
        EXPECT(gbc.pc(), 0x7651);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0090
        gbc.setState(0xcf98, 0x8af, 0x1400, 0xbea4, 0x9492, 0xb493, 0x1, 0x0);
        gbc.writeMem(0xcf98, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x8af);
        EXPECT(gbc.pc(), 0xcf9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf98), 0xcb);
        EXPECT(gbc.readMem(0xcf99), 0x2b);
        // CB 2B 0091
        gbc.setState(0x7bbb, 0xfd78, 0x7500, 0xe494, 0x2f12, 0x9b17, 0x1, 0x0);
        gbc.writeMem(0x7bbb, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xfd78);
        EXPECT(gbc.pc(), 0x7bbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0092
        gbc.setState(0x3ee7, 0x2d87, 0x6ba0, 0xf4f6, 0x1ae6, 0xd2eb, 0x1, 0x0);
        gbc.writeMem(0x3ee7, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x2d87);
        EXPECT(gbc.pc(), 0x3ee9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0093
        gbc.setState(0x61cf, 0xe194, 0x28e0, 0xc96e, 0xcc09, 0xdf2c, 0x0, 0x1);
        gbc.writeMem(0x61cf, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xe194);
        EXPECT(gbc.pc(), 0x61d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0094
        gbc.setState(0x7b2b, 0x1eef, 0x3cd0, 0xae45, 0xcedc, 0xecde, 0x0, 0x0);
        gbc.writeMem(0x7b2b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x1eef);
        EXPECT(gbc.pc(), 0x7b2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0095
        gbc.setState(0x280f, 0xc271, 0x2500, 0x79e1, 0xa9ae, 0xb5bf, 0x1, 0x1);
        gbc.writeMem(0x280f, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xc271);
        EXPECT(gbc.pc(), 0x2811);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0096
        gbc.setState(0x20f6, 0x6e2d, 0x9f90, 0xd3cb, 0x82a8, 0x99cf, 0x1, 0x1);
        gbc.writeMem(0x20f6, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x6e2d);
        EXPECT(gbc.pc(), 0x20f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0097
        gbc.setState(0x65a7, 0x38ce, 0x17b0, 0xb47f, 0x2c6e, 0x479f, 0x0, 0x1);
        gbc.writeMem(0x65a7, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x38ce);
        EXPECT(gbc.pc(), 0x65a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0098
        gbc.setState(0x1c32, 0x1c19, 0x2fa0, 0xff3f, 0x66ff, 0x172b, 0x0, 0x0);
        gbc.writeMem(0x1c32, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x1c19);
        EXPECT(gbc.pc(), 0x1c34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0099
        gbc.setState(0x41e1, 0xf463, 0x2ad0, 0x88ce, 0xb2f1, 0x3bf4, 0x1, 0x0);
        gbc.writeMem(0x41e1, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xf463);
        EXPECT(gbc.pc(), 0x41e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 009A
        gbc.setState(0x9910, 0xad66, 0xa030, 0xcf3e, 0xeaf2, 0x1210, 0x1, 0x1);
        gbc.writeMem(0x9910, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xad66);
        EXPECT(gbc.pc(), 0x9912);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9910), 0xcb);
        EXPECT(gbc.readMem(0x9911), 0x2b);
        // CB 2B 009B
        gbc.setState(0x9209, 0x168, 0x2140, 0x9aa5, 0x1ef6, 0xdcfa, 0x1, 0x1);
        gbc.writeMem(0x9209, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x168);
        EXPECT(gbc.pc(), 0x920b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9209), 0xcb);
        EXPECT(gbc.readMem(0x920a), 0x2b);
        // CB 2B 009C
        gbc.setState(0x789e, 0x5ad9, 0x1f40, 0xeaf6, 0xd853, 0x8673, 0x0, 0x0);
        gbc.writeMem(0x789e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x5ad9);
        EXPECT(gbc.pc(), 0x78a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 009D
        gbc.setState(0x8f7b, 0x3695, 0xd3b0, 0x8594, 0x90ee, 0xe07f, 0x0, 0x1);
        gbc.writeMem(0x8f7b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x3695);
        EXPECT(gbc.pc(), 0x8f7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f7b), 0xcb);
        EXPECT(gbc.readMem(0x8f7c), 0x2b);
        // CB 2B 009E
        gbc.setState(0xd5ed, 0x4a5a, 0x1e30, 0xe1bb, 0xce2e, 0xd094, 0x0, 0x1);
        gbc.writeMem(0xd5ed, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x4a5a);
        EXPECT(gbc.pc(), 0xd5ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5ed), 0xcb);
        EXPECT(gbc.readMem(0xd5ee), 0x2b);
        // CB 2B 009F
        gbc.setState(0x84ab, 0xbe13, 0xcb30, 0x4435, 0x3223, 0x9d44, 0x0, 0x1);
        gbc.writeMem(0x84ab, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xbe13);
        EXPECT(gbc.pc(), 0x84ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84ab), 0xcb);
        EXPECT(gbc.readMem(0x84ac), 0x2b);
        // CB 2B 00A0
        gbc.setState(0x70fa, 0xaa3e, 0x6f60, 0xe7a7, 0xba5c, 0x1238, 0x1, 0x1);
        gbc.writeMem(0x70fa, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xaa3e);
        EXPECT(gbc.pc(), 0x70fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 00A1
        gbc.setState(0xc697, 0x75ce, 0x17a0, 0xf0f4, 0x47f0, 0xae2e, 0x1, 0x0);
        gbc.writeMem(0xc697, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x75ce);
        EXPECT(gbc.pc(), 0xc699);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc697), 0xcb);
        EXPECT(gbc.readMem(0xc698), 0x2b);
        // CB 2B 00A2
        gbc.setState(0x4e56, 0xa7e6, 0xcdd0, 0x7f05, 0x627b, 0x5df6, 0x1, 0x1);
        gbc.writeMem(0x4e56, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xa7e6);
        EXPECT(gbc.pc(), 0x4e58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 00A3
        gbc.setState(0x5594, 0x6788, 0x8b0, 0x317c, 0xf021, 0x5761, 0x0, 0x0);
        gbc.writeMem(0x5594, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x6788);
        EXPECT(gbc.pc(), 0x5596);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 00A4
        gbc.setState(0x188b, 0x6d5, 0xd30, 0x9a02, 0x578a, 0x5b62, 0x1, 0x1);
        gbc.writeMem(0x188b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x6d5);
        EXPECT(gbc.pc(), 0x188d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 00A5
        gbc.setState(0x9361, 0x8edf, 0x2e30, 0xf9a6, 0xda5c, 0x7b87, 0x0, 0x0);
        gbc.writeMem(0x9361, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x8edf);
        EXPECT(gbc.pc(), 0x9363);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9361), 0xcb);
        EXPECT(gbc.readMem(0x9362), 0x2b);
        // CB 2B 00A7
        gbc.setState(0xc436, 0x870a, 0xab40, 0xb75e, 0xca73, 0x4fa7, 0x1, 0x1);
        gbc.writeMem(0xc436, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x870a);
        EXPECT(gbc.pc(), 0xc438);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc436), 0xcb);
        EXPECT(gbc.readMem(0xc437), 0x2b);
        // CB 2B 00A8
        gbc.setState(0x51b2, 0xff58, 0x5ae0, 0xd3c1, 0x33a5, 0x5ce, 0x0, 0x0);
        gbc.writeMem(0x51b2, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xff58);
        EXPECT(gbc.pc(), 0x51b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 00A9
        gbc.setState(0xe21a, 0x14a4, 0x3220, 0xaa56, 0xbd20, 0x71eb, 0x0, 0x0);
        gbc.writeMem(0xe21a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x14a4);
        EXPECT(gbc.pc(), 0xe21c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe21a), 0xcb);
        EXPECT(gbc.readMem(0xe21b), 0x2b);
        // CB 2B 00AA
        gbc.setState(0x38be, 0x1687, 0x6bf0, 0xda7f, 0x7ba5, 0x9e12, 0x1, 0x0);
        gbc.writeMem(0x38be, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x1687);
        EXPECT(gbc.pc(), 0x38c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 00AB
        gbc.setState(0x6811, 0xdc78, 0xe410, 0x7ce6, 0x7e7a, 0x92fd, 0x0, 0x0);
        gbc.writeMem(0x6811, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xdc78);
        EXPECT(gbc.pc(), 0x6813);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 00AC
        gbc.setState(0x257a, 0xdddd, 0x1ce0, 0x9782, 0xfcf8, 0x90a9, 0x0, 0x1);
        gbc.writeMem(0x257a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xdddd);
        EXPECT(gbc.pc(), 0x257c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 00AE
        gbc.setState(0x3b58, 0xbb57, 0x90d0, 0x7706, 0x927e, 0x9d5a, 0x0, 0x1);
        gbc.writeMem(0x3b58, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xbb57);
        EXPECT(gbc.pc(), 0x3b5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 00AF
        gbc.setState(0x26be, 0xfcc, 0x9150, 0x476, 0xf17, 0x36f9, 0x0, 0x1);
        gbc.writeMem(0x26be, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xfcc);
        EXPECT(gbc.pc(), 0x26c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 00B0
        gbc.setState(0xe66d, 0xcabc, 0x91b0, 0x4eb, 0xd48f, 0xbc2b, 0x0, 0x0);
        gbc.writeMem(0xe66d, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xcabc);
        EXPECT(gbc.pc(), 0xe66f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe66d), 0xcb);
        EXPECT(gbc.readMem(0xe66e), 0x2b);
        // CB 2B 00B1
        gbc.setState(0x1c12, 0x7a2c, 0x6010, 0xee3d, 0x6741, 0xfaf3, 0x1, 0x1);
        gbc.writeMem(0x1c12, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x7a2c);
        EXPECT(gbc.pc(), 0x1c14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 00B2
        gbc.setState(0xcb25, 0xb51d, 0x42c0, 0x3733, 0x45bb, 0x13cb, 0x1, 0x0);
        gbc.writeMem(0xcb25, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xb51d);
        EXPECT(gbc.pc(), 0xcb27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb25), 0xcb);
        EXPECT(gbc.readMem(0xcb26), 0x2b);
        // CB 2B 00B3
        gbc.setState(0xee0c, 0x4f40, 0xbaf0, 0x92c7, 0x3302, 0xe805, 0x1, 0x1);
        gbc.writeMem(0xee0c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x4f40);
        EXPECT(gbc.pc(), 0xee0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee0c), 0xcb);
        EXPECT(gbc.readMem(0xee0d), 0x2b);
        // CB 2B 00B4
        gbc.setState(0xdd10, 0x5cbe, 0x1220, 0xf11b, 0x2d3b, 0xa10f, 0x1, 0x0);
        gbc.writeMem(0xdd10, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x5cbe);
        EXPECT(gbc.pc(), 0xdd12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd10), 0xcb);
        EXPECT(gbc.readMem(0xdd11), 0x2b);
        // CB 2B 00B5
        gbc.setState(0x2a38, 0x13f0, 0xc3b0, 0x7986, 0x9417, 0x9c63, 0x1, 0x0);
        gbc.writeMem(0x2a38, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x13f0);
        EXPECT(gbc.pc(), 0x2a3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 00B6
        gbc.setState(0x5a46, 0x6938, 0x5ea0, 0x5426, 0xff7c, 0x2eae, 0x1, 0x1);
        gbc.writeMem(0x5a46, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x6938);
        EXPECT(gbc.pc(), 0x5a48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 00B7
        gbc.setState(0xd49b, 0x4294, 0x2980, 0xed69, 0xd0a7, 0xa427, 0x1, 0x0);
        gbc.writeMem(0xd49b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x4294);
        EXPECT(gbc.pc(), 0xd49d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd49b), 0xcb);
        EXPECT(gbc.readMem(0xd49c), 0x2b);
        // CB 2B 00B8
        gbc.setState(0x659, 0x3503, 0x4a40, 0xefc1, 0x171b, 0x3c2e, 0x0, 0x1);
        gbc.writeMem(0x659, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x3503);
        EXPECT(gbc.pc(), 0x65b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 00BA
        gbc.setState(0x782d, 0x8252, 0x1510, 0xf1d2, 0xf57b, 0x44fa, 0x0, 0x0);
        gbc.writeMem(0x782d, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x8252);
        EXPECT(gbc.pc(), 0x782f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 00BB
        gbc.setState(0x60f2, 0xf64e, 0xe020, 0x2ad6, 0x28f2, 0x876c, 0x1, 0x1);
        gbc.writeMem(0x60f2, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xf64e);
        EXPECT(gbc.pc(), 0x60f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 00BC
        gbc.setState(0x625c, 0x516f, 0x4470, 0x1d02, 0x78c4, 0xf14, 0x0, 0x0);
        gbc.writeMem(0x625c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x516f);
        EXPECT(gbc.pc(), 0x625e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 00BD
        gbc.setState(0xe99f, 0x716d, 0xcce0, 0x71c8, 0xdcec, 0x4126, 0x0, 0x0);
        gbc.writeMem(0xe99f, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x716d);
        EXPECT(gbc.pc(), 0xe9a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe99f), 0xcb);
        EXPECT(gbc.readMem(0xe9a0), 0x2b);
        // CB 2B 00BE
        gbc.setState(0x3c8a, 0x9639, 0x52b0, 0x424a, 0x1037, 0xfede, 0x1, 0x1);
        gbc.writeMem(0x3c8a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x9639);
        EXPECT(gbc.pc(), 0x3c8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 00BF
        gbc.setState(0x72d2, 0x75e, 0xdc20, 0xb60c, 0xe181, 0x95a9, 0x0, 0x0);
        gbc.writeMem(0x72d2, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x75e);
        EXPECT(gbc.pc(), 0x72d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 00C0
        gbc.setState(0x8daa, 0x8f60, 0x3e80, 0x1062, 0xcf05, 0x33ef, 0x0, 0x1);
        gbc.writeMem(0x8daa, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x8f60);
        EXPECT(gbc.pc(), 0x8dac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8daa), 0xcb);
        EXPECT(gbc.readMem(0x8dab), 0x2b);
        // CB 2B 00C1
        gbc.setState(0x148f, 0x2f9c, 0x85d0, 0xca77, 0xfdd5, 0x7bce, 0x0, 0x0);
        gbc.writeMem(0x148f, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x2f9c);
        EXPECT(gbc.pc(), 0x1491);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 00C2
        gbc.setState(0x26bd, 0x2a33, 0x9fc0, 0xc37f, 0xfbf3, 0x7d8b, 0x0, 0x1);
        gbc.writeMem(0x26bd, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x2a33);
        EXPECT(gbc.pc(), 0x26bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 00C3
        gbc.setState(0xb670, 0xa26d, 0x6030, 0x55cf, 0x841b, 0x14a8, 0x1, 0x1);
        gbc.writeMem(0xb670, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xa26d);
        EXPECT(gbc.pc(), 0xb672);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb670), 0xcb);
        EXPECT(gbc.readMem(0xb671), 0x2b);
        // CB 2B 00C4
        gbc.setState(0x49c7, 0xa04d, 0xd800, 0xb624, 0xde54, 0x2752, 0x0, 0x0);
        gbc.writeMem(0x49c7, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xa04d);
        EXPECT(gbc.pc(), 0x49c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 00C5
        gbc.setState(0xc378, 0x7c9e, 0xa550, 0xa5fd, 0x68ac, 0x35c9, 0x1, 0x1);
        gbc.writeMem(0xc378, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x7c9e);
        EXPECT(gbc.pc(), 0xc37a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc378), 0xcb);
        EXPECT(gbc.readMem(0xc379), 0x2b);
        // CB 2B 00C6
        gbc.setState(0x7bf0, 0x76a3, 0xc4a0, 0xf8dc, 0x672a, 0xaa16, 0x0, 0x0);
        gbc.writeMem(0x7bf0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x76a3);
        EXPECT(gbc.pc(), 0x7bf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 00C7
        gbc.setState(0x7470, 0x72, 0x9500, 0xaef5, 0x2a47, 0x46c5, 0x0, 0x1);
        gbc.writeMem(0x7470, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x72);
        EXPECT(gbc.pc(), 0x7472);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 00C8
        gbc.setState(0x658, 0x549, 0xfa30, 0x58ee, 0xc07e, 0xb424, 0x0, 0x1);
        gbc.writeMem(0x658, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x549);
        EXPECT(gbc.pc(), 0x65a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 00C9
        gbc.setState(0x4a51, 0x6965, 0x7ec0, 0x55f1, 0x9096, 0xd583, 0x1, 0x1);
        gbc.writeMem(0x4a51, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x6965);
        EXPECT(gbc.pc(), 0x4a53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 00CA
        gbc.setState(0x4f51, 0x9b72, 0xc6d0, 0xe39a, 0xf566, 0x6291, 0x0, 0x0);
        gbc.writeMem(0x4f51, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x9b72);
        EXPECT(gbc.pc(), 0x4f53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 00CB
        gbc.setState(0x77c4, 0x272c, 0x5340, 0x4006, 0xfb48, 0x9b60, 0x0, 0x1);
        gbc.writeMem(0x77c4, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x272c);
        EXPECT(gbc.pc(), 0x77c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 00CC
        gbc.setState(0x9121, 0xb013, 0x83b0, 0x9c22, 0xe456, 0x21c7, 0x1, 0x0);
        gbc.writeMem(0x9121, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xb013);
        EXPECT(gbc.pc(), 0x9123);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9121), 0xcb);
        EXPECT(gbc.readMem(0x9122), 0x2b);
        // CB 2B 00CD
        gbc.setState(0x4b20, 0xc3f, 0xe80, 0x9ab3, 0x89ac, 0xd385, 0x1, 0x0);
        gbc.writeMem(0x4b20, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xc3f);
        EXPECT(gbc.pc(), 0x4b22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 00CE
        gbc.setState(0xac74, 0x85a0, 0xd920, 0x753a, 0x87ea, 0xf14, 0x1, 0x0);
        gbc.writeMem(0xac74, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x85a0);
        EXPECT(gbc.pc(), 0xac76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac74), 0xcb);
        EXPECT(gbc.readMem(0xac75), 0x2b);
        // CB 2B 00D0
        gbc.setState(0x69ff, 0xc7e5, 0x1060, 0x6d5e, 0x2c8e, 0xd588, 0x1, 0x1);
        gbc.writeMem(0x69ff, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xc7e5);
        EXPECT(gbc.pc(), 0x6a01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 00D1
        gbc.setState(0x9ae4, 0xd3fa, 0x9230, 0x8999, 0xe997, 0x5caf, 0x0, 0x0);
        gbc.writeMem(0x9ae4, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xd3fa);
        EXPECT(gbc.pc(), 0x9ae6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ae4), 0xcb);
        EXPECT(gbc.readMem(0x9ae5), 0x2b);
        // CB 2B 00D2
        gbc.setState(0x7b22, 0xb10e, 0xb560, 0xe51, 0xe24b, 0x6e61, 0x0, 0x1);
        gbc.writeMem(0x7b22, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xb10e);
        EXPECT(gbc.pc(), 0x7b24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 00D3
        gbc.setState(0xb237, 0x2a9a, 0xfd0, 0x5a58, 0x5382, 0x45bb, 0x0, 0x0);
        gbc.writeMem(0xb237, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x2a9a);
        EXPECT(gbc.pc(), 0xb239);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb237), 0xcb);
        EXPECT(gbc.readMem(0xb238), 0x2b);
        // CB 2B 00D4
        gbc.setState(0xea42, 0x76ed, 0x4510, 0xf270, 0xa8b1, 0xf14b, 0x1, 0x0);
        gbc.writeMem(0xea42, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x76ed);
        EXPECT(gbc.pc(), 0xea44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea42), 0xcb);
        EXPECT(gbc.readMem(0xea43), 0x2b);
        // CB 2B 00D5
        gbc.setState(0x38f2, 0x8e28, 0x15e0, 0x5977, 0x3af7, 0xa3cf, 0x0, 0x1);
        gbc.writeMem(0x38f2, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x8e28);
        EXPECT(gbc.pc(), 0x38f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 00D6
        gbc.setState(0xdfe5, 0x18b6, 0x1180, 0x1e8d, 0x1a78, 0xcc25, 0x0, 0x0);
        gbc.writeMem(0xdfe5, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x18b6);
        EXPECT(gbc.pc(), 0xdfe7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfe5), 0xcb);
        EXPECT(gbc.readMem(0xdfe6), 0x2b);
        // CB 2B 00D7
        gbc.setState(0x83c6, 0xad7c, 0xbee0, 0x1357, 0x3c08, 0xcbd3, 0x0, 0x1);
        gbc.writeMem(0x83c6, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xad7c);
        EXPECT(gbc.pc(), 0x83c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83c6), 0xcb);
        EXPECT(gbc.readMem(0x83c7), 0x2b);
        // CB 2B 00D8
        gbc.setState(0x81a4, 0x16b4, 0x5510, 0xb648, 0xe273, 0x9cae, 0x0, 0x0);
        gbc.writeMem(0x81a4, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x16b4);
        EXPECT(gbc.pc(), 0x81a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81a4), 0xcb);
        EXPECT(gbc.readMem(0x81a5), 0x2b);
        // CB 2B 00D9
        gbc.setState(0x1eae, 0x9f00, 0x83e0, 0xb53f, 0x4d3e, 0x765e, 0x0, 0x0);
        gbc.writeMem(0x1eae, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x9f00);
        EXPECT(gbc.pc(), 0x1eb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 00DA
        gbc.setState(0xd2c4, 0x88cd, 0xdcb0, 0x146b, 0xad21, 0x53be, 0x1, 0x0);
        gbc.writeMem(0xd2c4, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x88cd);
        EXPECT(gbc.pc(), 0xd2c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2c4), 0xcb);
        EXPECT(gbc.readMem(0xd2c5), 0x2b);
        // CB 2B 00DB
        gbc.setState(0x2ea8, 0xce9f, 0x56b0, 0x7aaa, 0x1229, 0x9a28, 0x1, 0x1);
        gbc.writeMem(0x2ea8, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xce9f);
        EXPECT(gbc.pc(), 0x2eaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 00DC
        gbc.setState(0x897b, 0x9b17, 0x6bf0, 0x5dbf, 0xca3d, 0xced5, 0x1, 0x0);
        gbc.writeMem(0x897b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x9b17);
        EXPECT(gbc.pc(), 0x897d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x897b), 0xcb);
        EXPECT(gbc.readMem(0x897c), 0x2b);
        // CB 2B 00DD
        gbc.setState(0xa878, 0xf16f, 0x4700, 0xe2b8, 0x38a, 0xe15c, 0x0, 0x0);
        gbc.writeMem(0xa878, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xf16f);
        EXPECT(gbc.pc(), 0xa87a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa878), 0xcb);
        EXPECT(gbc.readMem(0xa879), 0x2b);
        // CB 2B 00DE
        gbc.setState(0xcdbc, 0xf111, 0xfae0, 0x64ea, 0x9ffc, 0xe3eb, 0x1, 0x1);
        gbc.writeMem(0xcdbc, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xf111);
        EXPECT(gbc.pc(), 0xcdbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdbc), 0xcb);
        EXPECT(gbc.readMem(0xcdbd), 0x2b);
        // CB 2B 00DF
        gbc.setState(0xa8e3, 0x3e74, 0x84f0, 0x6bf9, 0xcb3d, 0x2a8d, 0x1, 0x1);
        gbc.writeMem(0xa8e3, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x3e74);
        EXPECT(gbc.pc(), 0xa8e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8e3), 0xcb);
        EXPECT(gbc.readMem(0xa8e4), 0x2b);
        // CB 2B 00E0
        gbc.setState(0x6c61, 0x24bc, 0x79c0, 0xe34f, 0x65fc, 0xf484, 0x1, 0x1);
        gbc.writeMem(0x6c61, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x24bc);
        EXPECT(gbc.pc(), 0x6c63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 00E1
        gbc.setState(0x94ba, 0x433d, 0xd860, 0x1fde, 0x6292, 0x14a, 0x1, 0x0);
        gbc.writeMem(0x94ba, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x433d);
        EXPECT(gbc.pc(), 0x94bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94ba), 0xcb);
        EXPECT(gbc.readMem(0x94bb), 0x2b);
        // CB 2B 00E2
        gbc.setState(0x9ab5, 0x8075, 0xbd50, 0x9756, 0xb22e, 0x442b, 0x1, 0x1);
        gbc.writeMem(0x9ab5, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x8075);
        EXPECT(gbc.pc(), 0x9ab7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ab5), 0xcb);
        EXPECT(gbc.readMem(0x9ab6), 0x2b);
        // CB 2B 00E3
        gbc.setState(0x42c, 0x2260, 0x2950, 0x3bf4, 0x9a3d, 0x57d2, 0x0, 0x0);
        gbc.writeMem(0x42c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x2260);
        EXPECT(gbc.pc(), 0x42e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 00E4
        gbc.setState(0x62c8, 0x81b6, 0xbb20, 0xa4ad, 0x8e6d, 0xd5e6, 0x0, 0x0);
        gbc.writeMem(0x62c8, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x81b6);
        EXPECT(gbc.pc(), 0x62ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 00E5
        gbc.setState(0x470, 0xb14c, 0x5a00, 0x2700, 0x9e6a, 0x60ac, 0x0, 0x1);
        gbc.writeMem(0x470, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xb14c);
        EXPECT(gbc.pc(), 0x472);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 00E6
        gbc.setState(0xe9e3, 0x770d, 0xe850, 0xcbeb, 0x4bdd, 0xac5a, 0x0, 0x1);
        gbc.writeMem(0xe9e3, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x770d);
        EXPECT(gbc.pc(), 0xe9e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9e3), 0xcb);
        EXPECT(gbc.readMem(0xe9e4), 0x2b);
        // CB 2B 00E7
        gbc.setState(0xc7b0, 0x84f8, 0x56b0, 0x9a8f, 0xca1e, 0xae58, 0x1, 0x1);
        gbc.writeMem(0xc7b0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x84f8);
        EXPECT(gbc.pc(), 0xc7b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7b0), 0xcb);
        EXPECT(gbc.readMem(0xc7b1), 0x2b);
        // CB 2B 00E8
        gbc.setState(0xc2c7, 0x7bb4, 0xa410, 0x5289, 0xa187, 0xb6f5, 0x1, 0x0);
        gbc.writeMem(0xc2c7, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x7bb4);
        EXPECT(gbc.pc(), 0xc2c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2c7), 0xcb);
        EXPECT(gbc.readMem(0xc2c8), 0x2b);
        // CB 2B 00E9
        gbc.setState(0xd334, 0x6b74, 0xb1e0, 0x9cd5, 0x3465, 0xa93e, 0x1, 0x0);
        gbc.writeMem(0xd334, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x6b74);
        EXPECT(gbc.pc(), 0xd336);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd334), 0xcb);
        EXPECT(gbc.readMem(0xd335), 0x2b);
        // CB 2B 00EA
        gbc.setState(0xcd94, 0xe170, 0xf1a0, 0x96c2, 0xd226, 0xcf82, 0x0, 0x1);
        gbc.writeMem(0xcd94, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xe170);
        EXPECT(gbc.pc(), 0xcd96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd94), 0xcb);
        EXPECT(gbc.readMem(0xcd95), 0x2b);
        // CB 2B 00EB
        gbc.setState(0xafd6, 0x76c7, 0x85a0, 0x8c49, 0xd87c, 0x1f9a, 0x0, 0x1);
        gbc.writeMem(0xafd6, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x76c7);
        EXPECT(gbc.pc(), 0xafd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafd6), 0xcb);
        EXPECT(gbc.readMem(0xafd7), 0x2b);
        // CB 2B 00EC
        gbc.setState(0x639a, 0xd03f, 0x7d50, 0xde7b, 0x1cf8, 0x3df6, 0x0, 0x1);
        gbc.writeMem(0x639a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xd03f);
        EXPECT(gbc.pc(), 0x639c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 00ED
        gbc.setState(0x19e1, 0x17e2, 0xbc70, 0xf3fd, 0x6cd0, 0x89e4, 0x0, 0x1);
        gbc.writeMem(0x19e1, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x17e2);
        EXPECT(gbc.pc(), 0x19e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 00EE
        gbc.setState(0x88a3, 0x74b0, 0x9350, 0x69c8, 0x7985, 0x4f54, 0x1, 0x0);
        gbc.writeMem(0x88a3, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x74b0);
        EXPECT(gbc.pc(), 0x88a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88a3), 0xcb);
        EXPECT(gbc.readMem(0x88a4), 0x2b);
        // CB 2B 00EF
        gbc.setState(0xb328, 0x22ed, 0x7a00, 0xce68, 0x5e26, 0x1cb0, 0x0, 0x1);
        gbc.writeMem(0xb328, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x22ed);
        EXPECT(gbc.pc(), 0xb32a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb328), 0xcb);
        EXPECT(gbc.readMem(0xb329), 0x2b);
        // CB 2B 00F0
        gbc.setState(0x700d, 0x8fd0, 0xb800, 0xd532, 0x9cd5, 0x9f5f, 0x0, 0x0);
        gbc.writeMem(0x700d, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x8fd0);
        EXPECT(gbc.pc(), 0x700f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 00F1
        gbc.setState(0xc803, 0xf2d9, 0x5500, 0x3881, 0x3f1, 0x2a83, 0x0, 0x1);
        gbc.writeMem(0xc803, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xf2d9);
        EXPECT(gbc.pc(), 0xc805);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc803), 0xcb);
        EXPECT(gbc.readMem(0xc804), 0x2b);
        // CB 2B 00F2
        gbc.setState(0xe96f, 0x826, 0x7730, 0xc9ab, 0xc2c5, 0x8ddc, 0x1, 0x0);
        gbc.writeMem(0xe96f, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x826);
        EXPECT(gbc.pc(), 0xe971);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe96f), 0xcb);
        EXPECT(gbc.readMem(0xe970), 0x2b);
        // CB 2B 00F4
        gbc.setState(0x39a6, 0xa330, 0x7f50, 0x43a2, 0xcd5f, 0x1ed1, 0x1, 0x1);
        gbc.writeMem(0x39a6, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xa330);
        EXPECT(gbc.pc(), 0x39a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 00F5
        gbc.setState(0x20a0, 0xd279, 0x7e10, 0x20d4, 0xfe58, 0x435e, 0x0, 0x1);
        gbc.writeMem(0x20a0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xd279);
        EXPECT(gbc.pc(), 0x20a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 00F6
        gbc.setState(0xc643, 0x5d0c, 0x7f90, 0xfd41, 0xd7cf, 0x4090, 0x1, 0x0);
        gbc.writeMem(0xc643, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x5d0c);
        EXPECT(gbc.pc(), 0xc645);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc643), 0xcb);
        EXPECT(gbc.readMem(0xc644), 0x2b);
        // CB 2B 00F7
        gbc.setState(0x6ec3, 0x70a3, 0x20, 0x1808, 0x8e9a, 0x3daf, 0x1, 0x0);
        gbc.writeMem(0x6ec3, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x70a3);
        EXPECT(gbc.pc(), 0x6ec5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 00F8
        gbc.setState(0x5ddc, 0xedc0, 0x9a00, 0x444c, 0x6f32, 0x714, 0x0, 0x0);
        gbc.writeMem(0x5ddc, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xedc0);
        EXPECT(gbc.pc(), 0x5dde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 00F9
        gbc.setState(0x33c9, 0xe450, 0x4e10, 0x4d82, 0x6764, 0x8323, 0x1, 0x1);
        gbc.writeMem(0x33c9, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xe450);
        EXPECT(gbc.pc(), 0x33cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 00FB
        gbc.setState(0x1a42, 0x42d6, 0x3a00, 0x10d9, 0x8cbe, 0x7ff6, 0x0, 0x1);
        gbc.writeMem(0x1a42, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x42d6);
        EXPECT(gbc.pc(), 0x1a44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 00FC
        gbc.setState(0xefe1, 0x6af1, 0xae50, 0x7564, 0x92cd, 0x933, 0x1, 0x1);
        gbc.writeMem(0xefe1, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x6af1);
        EXPECT(gbc.pc(), 0xefe3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefe1), 0xcb);
        EXPECT(gbc.readMem(0xefe2), 0x2b);
        // CB 2B 00FD
        gbc.setState(0x76f9, 0x13fa, 0xeeb0, 0x2057, 0xd4f4, 0xd231, 0x0, 0x1);
        gbc.writeMem(0x76f9, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x13fa);
        EXPECT(gbc.pc(), 0x76fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 00FE
        gbc.setState(0x785f, 0xd269, 0x9210, 0xf5f1, 0x75f5, 0xeec9, 0x0, 0x0);
        gbc.writeMem(0x785f, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xd269);
        EXPECT(gbc.pc(), 0x7861);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 00FF
        gbc.setState(0xa9b3, 0x2ecc, 0x7690, 0x478d, 0xfa6d, 0xc202, 0x0, 0x1);
        gbc.writeMem(0xa9b3, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x2ecc);
        EXPECT(gbc.pc(), 0xa9b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9b3), 0xcb);
        EXPECT(gbc.readMem(0xa9b4), 0x2b);
        // CB 2B 0100
        gbc.setState(0x83cb, 0xbc58, 0x3f50, 0x3d8c, 0x9ca, 0xf751, 0x0, 0x0);
        gbc.writeMem(0x83cb, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xbc58);
        EXPECT(gbc.pc(), 0x83cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83cb), 0xcb);
        EXPECT(gbc.readMem(0x83cc), 0x2b);
        // CB 2B 0101
        gbc.setState(0xbda1, 0xc6b1, 0x3cf0, 0xb2ab, 0xceab, 0x6abd, 0x0, 0x0);
        gbc.writeMem(0xbda1, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xc6b1);
        EXPECT(gbc.pc(), 0xbda3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbda1), 0xcb);
        EXPECT(gbc.readMem(0xbda2), 0x2b);
        // CB 2B 0102
        gbc.setState(0x5d26, 0x3157, 0xcfc0, 0xf0ea, 0xc1f3, 0x2993, 0x1, 0x0);
        gbc.writeMem(0x5d26, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x3157);
        EXPECT(gbc.pc(), 0x5d28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0103
        gbc.setState(0x72f6, 0x7433, 0x85a0, 0xe778, 0xc080, 0x2022, 0x1, 0x1);
        gbc.writeMem(0x72f6, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x7433);
        EXPECT(gbc.pc(), 0x72f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0104
        gbc.setState(0xd4c7, 0x2611, 0xc780, 0xfcbb, 0xbbca, 0x7585, 0x1, 0x1);
        gbc.writeMem(0xd4c7, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x2611);
        EXPECT(gbc.pc(), 0xd4c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4c7), 0xcb);
        EXPECT(gbc.readMem(0xd4c8), 0x2b);
        // CB 2B 0105
        gbc.setState(0x852, 0xa722, 0x40, 0x5c91, 0xa182, 0x7979, 0x0, 0x1);
        gbc.writeMem(0x852, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xa722);
        EXPECT(gbc.pc(), 0x854);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0106
        gbc.setState(0xe6e8, 0xe47f, 0xffe0, 0xddb3, 0xc5d6, 0x3ade, 0x1, 0x1);
        gbc.writeMem(0xe6e8, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xe47f);
        EXPECT(gbc.pc(), 0xe6ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6e8), 0xcb);
        EXPECT(gbc.readMem(0xe6e9), 0x2b);
        // CB 2B 0107
        gbc.setState(0x4bc1, 0xaf13, 0x3850, 0x70df, 0x1817, 0xf36c, 0x1, 0x0);
        gbc.writeMem(0x4bc1, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xaf13);
        EXPECT(gbc.pc(), 0x4bc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0108
        gbc.setState(0x95f3, 0x1b31, 0xb0, 0xe9ef, 0x3b54, 0x2010, 0x0, 0x0);
        gbc.writeMem(0x95f3, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x1b31);
        EXPECT(gbc.pc(), 0x95f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95f3), 0xcb);
        EXPECT(gbc.readMem(0x95f4), 0x2b);
        // CB 2B 0109
        gbc.setState(0x43, 0xb66, 0xae20, 0xf8f9, 0xa84c, 0xf142, 0x1, 0x1);
        gbc.writeMem(0x43, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xb66);
        EXPECT(gbc.pc(), 0x45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 010A
        gbc.setState(0x491, 0xf847, 0xb8d0, 0xd0fc, 0x311f, 0x6f52, 0x1, 0x1);
        gbc.writeMem(0x491, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xf847);
        EXPECT(gbc.pc(), 0x493);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 010B
        gbc.setState(0x87fa, 0x32b5, 0x9fb0, 0x58d2, 0x7893, 0x4e2a, 0x0, 0x1);
        gbc.writeMem(0x87fa, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x32b5);
        EXPECT(gbc.pc(), 0x87fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87fa), 0xcb);
        EXPECT(gbc.readMem(0x87fb), 0x2b);
        // CB 2B 010D
        gbc.setState(0x7756, 0xe0f0, 0x3920, 0xfa52, 0xe57a, 0x2172, 0x1, 0x0);
        gbc.writeMem(0x7756, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xe0f0);
        EXPECT(gbc.pc(), 0x7758);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 010E
        gbc.setState(0x6715, 0xf2dd, 0xe1f0, 0xd6fd, 0x732a, 0x56d3, 0x0, 0x1);
        gbc.writeMem(0x6715, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xf2dd);
        EXPECT(gbc.pc(), 0x6717);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0110
        gbc.setState(0x9438, 0xe176, 0x5280, 0x14b6, 0x2e3a, 0xd01c, 0x0, 0x1);
        gbc.writeMem(0x9438, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xe176);
        EXPECT(gbc.pc(), 0x943a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9438), 0xcb);
        EXPECT(gbc.readMem(0x9439), 0x2b);
        // CB 2B 0111
        gbc.setState(0x988c, 0x675f, 0xf1a0, 0xfcba, 0x9135, 0xfd94, 0x0, 0x0);
        gbc.writeMem(0x988c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x675f);
        EXPECT(gbc.pc(), 0x988e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x988c), 0xcb);
        EXPECT(gbc.readMem(0x988d), 0x2b);
        // CB 2B 0112
        gbc.setState(0x98a8, 0xfd7f, 0x3ea0, 0xfb3e, 0xd7fe, 0x4556, 0x0, 0x1);
        gbc.writeMem(0x98a8, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xfd7f);
        EXPECT(gbc.pc(), 0x98aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98a8), 0xcb);
        EXPECT(gbc.readMem(0x98a9), 0x2b);
        // CB 2B 0113
        gbc.setState(0x2a03, 0xd137, 0x7400, 0xdbe0, 0x594b, 0xa41d, 0x0, 0x1);
        gbc.writeMem(0x2a03, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xd137);
        EXPECT(gbc.pc(), 0x2a05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0114
        gbc.setState(0x883c, 0x406, 0x27b0, 0xc83a, 0x8b, 0x16af, 0x1, 0x1);
        gbc.writeMem(0x883c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x406);
        EXPECT(gbc.pc(), 0x883e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x883c), 0xcb);
        EXPECT(gbc.readMem(0x883d), 0x2b);
        // CB 2B 0116
        gbc.setState(0x2897, 0x9156, 0x9840, 0x903e, 0x601a, 0x254f, 0x1, 0x0);
        gbc.writeMem(0x2897, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x9156);
        EXPECT(gbc.pc(), 0x2899);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0117
        gbc.setState(0x8983, 0x97d7, 0xf80, 0xd277, 0xd874, 0x805, 0x0, 0x1);
        gbc.writeMem(0x8983, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x97d7);
        EXPECT(gbc.pc(), 0x8985);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8983), 0xcb);
        EXPECT(gbc.readMem(0x8984), 0x2b);
        // CB 2B 0118
        gbc.setState(0x21c4, 0xcc4a, 0x5860, 0x9339, 0xa169, 0xf172, 0x1, 0x0);
        gbc.writeMem(0x21c4, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xcc4a);
        EXPECT(gbc.pc(), 0x21c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0119
        gbc.setState(0xa18e, 0xdeb5, 0x41c0, 0x184, 0x996c, 0x9775, 0x0, 0x0);
        gbc.writeMem(0xa18e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xdeb5);
        EXPECT(gbc.pc(), 0xa190);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa18e), 0xcb);
        EXPECT(gbc.readMem(0xa18f), 0x2b);
        // CB 2B 011A
        gbc.setState(0x8bd8, 0x5013, 0x54a0, 0x3b01, 0x44ea, 0x7d41, 0x0, 0x1);
        gbc.writeMem(0x8bd8, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x5013);
        EXPECT(gbc.pc(), 0x8bda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bd8), 0xcb);
        EXPECT(gbc.readMem(0x8bd9), 0x2b);
        // CB 2B 011B
        gbc.setState(0x90ab, 0xea65, 0xf380, 0xe7f, 0x67d3, 0x8374, 0x0, 0x0);
        gbc.writeMem(0x90ab, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xea65);
        EXPECT(gbc.pc(), 0x90ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90ab), 0xcb);
        EXPECT(gbc.readMem(0x90ac), 0x2b);
        // CB 2B 011C
        gbc.setState(0x2eb6, 0xb837, 0xae0, 0x6330, 0x9d1c, 0x2aa5, 0x1, 0x0);
        gbc.writeMem(0x2eb6, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xb837);
        EXPECT(gbc.pc(), 0x2eb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 011D
        gbc.setState(0xd273, 0xbd32, 0x49c0, 0xa46d, 0x5f02, 0xc18f, 0x1, 0x0);
        gbc.writeMem(0xd273, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xbd32);
        EXPECT(gbc.pc(), 0xd275);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd273), 0xcb);
        EXPECT(gbc.readMem(0xd274), 0x2b);
        // CB 2B 011E
        gbc.setState(0xe51f, 0x6551, 0x6fa0, 0xc6df, 0x1f5, 0xf905, 0x0, 0x0);
        gbc.writeMem(0xe51f, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x6551);
        EXPECT(gbc.pc(), 0xe521);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe51f), 0xcb);
        EXPECT(gbc.readMem(0xe520), 0x2b);
        // CB 2B 011F
        gbc.setState(0x7b2c, 0x3399, 0x76c0, 0x4fab, 0x6bff, 0xb014, 0x1, 0x1);
        gbc.writeMem(0x7b2c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x3399);
        EXPECT(gbc.pc(), 0x7b2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0120
        gbc.setState(0xdfe6, 0xa172, 0x20e0, 0xf79, 0x498b, 0x14a2, 0x1, 0x0);
        gbc.writeMem(0xdfe6, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xa172);
        EXPECT(gbc.pc(), 0xdfe8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfe6), 0xcb);
        EXPECT(gbc.readMem(0xdfe7), 0x2b);
        // CB 2B 0121
        gbc.setState(0x2813, 0x6696, 0x5860, 0x5970, 0xf544, 0x13e7, 0x1, 0x0);
        gbc.writeMem(0x2813, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x6696);
        EXPECT(gbc.pc(), 0x2815);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0122
        gbc.setState(0x9e29, 0x2cd3, 0x980, 0xfc8d, 0x25c1, 0x724d, 0x1, 0x0);
        gbc.writeMem(0x9e29, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x2cd3);
        EXPECT(gbc.pc(), 0x9e2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e29), 0xcb);
        EXPECT(gbc.readMem(0x9e2a), 0x2b);
        // CB 2B 0123
        gbc.setState(0x21f0, 0xc28a, 0xc430, 0xd50f, 0x42d4, 0xba1f, 0x0, 0x1);
        gbc.writeMem(0x21f0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xc28a);
        EXPECT(gbc.pc(), 0x21f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0124
        gbc.setState(0xa1c3, 0x1f78, 0x2ad0, 0xa769, 0x20ef, 0xa779, 0x0, 0x0);
        gbc.writeMem(0xa1c3, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x1f78);
        EXPECT(gbc.pc(), 0xa1c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1c3), 0xcb);
        EXPECT(gbc.readMem(0xa1c4), 0x2b);
        // CB 2B 0125
        gbc.setState(0x13a7, 0x975c, 0xe3a0, 0x7b4e, 0xc587, 0xd78b, 0x1, 0x1);
        gbc.writeMem(0x13a7, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x975c);
        EXPECT(gbc.pc(), 0x13a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0126
        gbc.setState(0xce73, 0x4417, 0x26e0, 0xec2c, 0x5ed4, 0x8865, 0x0, 0x0);
        gbc.writeMem(0xce73, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x4417);
        EXPECT(gbc.pc(), 0xce75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce73), 0xcb);
        EXPECT(gbc.readMem(0xce74), 0x2b);
        // CB 2B 0127
        gbc.setState(0x1e7b, 0x8f86, 0x6ab0, 0x7911, 0x3fc4, 0x2c6b, 0x0, 0x1);
        gbc.writeMem(0x1e7b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x8f86);
        EXPECT(gbc.pc(), 0x1e7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0128
        gbc.setState(0x120e, 0x8745, 0x8200, 0xbdac, 0xedae, 0x7777, 0x0, 0x0);
        gbc.writeMem(0x120e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x8745);
        EXPECT(gbc.pc(), 0x1210);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0129
        gbc.setState(0x576a, 0x90a0, 0x670, 0xeaa9, 0x3a6a, 0x5567, 0x1, 0x1);
        gbc.writeMem(0x576a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x90a0);
        EXPECT(gbc.pc(), 0x576c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 012A
        gbc.setState(0xb48, 0x358d, 0x5280, 0x5c4e, 0x5d43, 0xbea8, 0x1, 0x0);
        gbc.writeMem(0xb48, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x358d);
        EXPECT(gbc.pc(), 0xb4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 012B
        gbc.setState(0x212a, 0x61bf, 0x9860, 0xac16, 0xf2ed, 0x46ee, 0x0, 0x1);
        gbc.writeMem(0x212a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x61bf);
        EXPECT(gbc.pc(), 0x212c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 012C
        gbc.setState(0x68af, 0x520f, 0x8c50, 0x5113, 0xd54f, 0xf5d3, 0x0, 0x0);
        gbc.writeMem(0x68af, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x520f);
        EXPECT(gbc.pc(), 0x68b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 012D
        gbc.setState(0xa604, 0xfc79, 0xf80, 0x7b9, 0x2cf2, 0x8202, 0x1, 0x0);
        gbc.writeMem(0xa604, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xfc79);
        EXPECT(gbc.pc(), 0xa606);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa604), 0xcb);
        EXPECT(gbc.readMem(0xa605), 0x2b);
        // CB 2B 012E
        gbc.setState(0xb736, 0x57f2, 0xd300, 0x6fdd, 0x6cd2, 0xaad1, 0x0, 0x1);
        gbc.writeMem(0xb736, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x57f2);
        EXPECT(gbc.pc(), 0xb738);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb736), 0xcb);
        EXPECT(gbc.readMem(0xb737), 0x2b);
        // CB 2B 012F
        gbc.setState(0x96ff, 0x36ce, 0x6f00, 0xdc44, 0xe062, 0x476b, 0x1, 0x0);
        gbc.writeMem(0x96ff, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x36ce);
        EXPECT(gbc.pc(), 0x9701);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96ff), 0xcb);
        EXPECT(gbc.readMem(0x9700), 0x2b);
        // CB 2B 0130
        gbc.setState(0xe66f, 0xf3f2, 0x2940, 0x6367, 0x1db3, 0xd0df, 0x1, 0x1);
        gbc.writeMem(0xe66f, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xf3f2);
        EXPECT(gbc.pc(), 0xe671);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe66f), 0xcb);
        EXPECT(gbc.readMem(0xe670), 0x2b);
        // CB 2B 0131
        gbc.setState(0xb533, 0xf00, 0x92c0, 0x7101, 0x821e, 0xae8, 0x0, 0x0);
        gbc.writeMem(0xb533, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xf00);
        EXPECT(gbc.pc(), 0xb535);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb533), 0xcb);
        EXPECT(gbc.readMem(0xb534), 0x2b);
        // CB 2B 0132
        gbc.setState(0xef67, 0xb6e7, 0x8f30, 0x3bd2, 0x61ff, 0xe509, 0x1, 0x0);
        gbc.writeMem(0xef67, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xb6e7);
        EXPECT(gbc.pc(), 0xef69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef67), 0xcb);
        EXPECT(gbc.readMem(0xef68), 0x2b);
        // CB 2B 0133
        gbc.setState(0x4805, 0x9aab, 0x24b0, 0xb672, 0xf24e, 0xa07f, 0x0, 0x0);
        gbc.writeMem(0x4805, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x9aab);
        EXPECT(gbc.pc(), 0x4807);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0134
        gbc.setState(0x486, 0x5cac, 0xc940, 0x8e7e, 0xbb52, 0xa8d9, 0x0, 0x1);
        gbc.writeMem(0x486, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x5cac);
        EXPECT(gbc.pc(), 0x488);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0135
        gbc.setState(0x92c0, 0x71de, 0x9d20, 0x7e17, 0xe74d, 0x59db, 0x1, 0x0);
        gbc.writeMem(0x92c0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x71de);
        EXPECT(gbc.pc(), 0x92c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92c0), 0xcb);
        EXPECT(gbc.readMem(0x92c1), 0x2b);
        // CB 2B 0136
        gbc.setState(0x3037, 0x3608, 0xad40, 0xa7f0, 0x690e, 0x6631, 0x0, 0x1);
        gbc.writeMem(0x3037, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x3608);
        EXPECT(gbc.pc(), 0x3039);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0137
        gbc.setState(0xca6a, 0x6acf, 0x9610, 0x3f29, 0x6c8d, 0x6a9b, 0x0, 0x0);
        gbc.writeMem(0xca6a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x6acf);
        EXPECT(gbc.pc(), 0xca6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca6a), 0xcb);
        EXPECT(gbc.readMem(0xca6b), 0x2b);
        // CB 2B 0138
        gbc.setState(0x2cd0, 0x20ef, 0x13d0, 0xb729, 0xf52, 0x1d7, 0x1, 0x1);
        gbc.writeMem(0x2cd0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x20ef);
        EXPECT(gbc.pc(), 0x2cd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0139
        gbc.setState(0x1a78, 0x835a, 0xe600, 0x829f, 0x1c2a, 0x50a5, 0x0, 0x0);
        gbc.writeMem(0x1a78, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x835a);
        EXPECT(gbc.pc(), 0x1a7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 013A
        gbc.setState(0x2b1d, 0x9029, 0x4c20, 0xcb8c, 0x1ecc, 0x5b6b, 0x1, 0x0);
        gbc.writeMem(0x2b1d, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x9029);
        EXPECT(gbc.pc(), 0x2b1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 013C
        gbc.setState(0x474b, 0xe591, 0xa040, 0x2c13, 0x8f42, 0x3fba, 0x1, 0x0);
        gbc.writeMem(0x474b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xe591);
        EXPECT(gbc.pc(), 0x474d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 013D
        gbc.setState(0x1695, 0xfe0c, 0x2980, 0x3717, 0xd244, 0x828, 0x0, 0x0);
        gbc.writeMem(0x1695, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xfe0c);
        EXPECT(gbc.pc(), 0x1697);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 013E
        gbc.setState(0x1aef, 0xd334, 0x6f30, 0x6197, 0x5cc8, 0xe9a2, 0x0, 0x1);
        gbc.writeMem(0x1aef, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xd334);
        EXPECT(gbc.pc(), 0x1af1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0140
        gbc.setState(0xafe3, 0xed74, 0x6060, 0x88d5, 0x252a, 0xdea5, 0x0, 0x1);
        gbc.writeMem(0xafe3, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xed74);
        EXPECT(gbc.pc(), 0xafe5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafe3), 0xcb);
        EXPECT(gbc.readMem(0xafe4), 0x2b);
        // CB 2B 0141
        gbc.setState(0x81bd, 0x8974, 0x6fb0, 0x574b, 0x8f33, 0xcf3c, 0x1, 0x1);
        gbc.writeMem(0x81bd, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x8974);
        EXPECT(gbc.pc(), 0x81bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81bd), 0xcb);
        EXPECT(gbc.readMem(0x81be), 0x2b);
        // CB 2B 0142
        gbc.setState(0x6348, 0x734a, 0x62a0, 0xb016, 0xf7fb, 0xbc00, 0x0, 0x1);
        gbc.writeMem(0x6348, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x734a);
        EXPECT(gbc.pc(), 0x634a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0143
        gbc.setState(0x3c31, 0x105d, 0xa200, 0x4f09, 0xfa5b, 0x5de9, 0x1, 0x0);
        gbc.writeMem(0x3c31, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x105d);
        EXPECT(gbc.pc(), 0x3c33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0144
        gbc.setState(0x946b, 0x9901, 0x9720, 0x2834, 0xf2cd, 0x217e, 0x0, 0x1);
        gbc.writeMem(0x946b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x9901);
        EXPECT(gbc.pc(), 0x946d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x946b), 0xcb);
        EXPECT(gbc.readMem(0x946c), 0x2b);
        // CB 2B 0145
        gbc.setState(0x498e, 0x9400, 0xb00, 0xfec8, 0xc6b3, 0xa55b, 0x0, 0x0);
        gbc.writeMem(0x498e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x9400);
        EXPECT(gbc.pc(), 0x4990);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0146
        gbc.setState(0xb1ce, 0x2fe4, 0x7af0, 0x4fc5, 0x8a31, 0xad5a, 0x0, 0x0);
        gbc.writeMem(0xb1ce, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x2fe4);
        EXPECT(gbc.pc(), 0xb1d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1ce), 0xcb);
        EXPECT(gbc.readMem(0xb1cf), 0x2b);
        // CB 2B 0147
        gbc.setState(0x62b3, 0xe06d, 0xf630, 0xe78d, 0xbb45, 0x409c, 0x1, 0x1);
        gbc.writeMem(0x62b3, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xe06d);
        EXPECT(gbc.pc(), 0x62b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0148
        gbc.setState(0xadc7, 0x29e6, 0x7150, 0x15d0, 0xe961, 0x4f1c, 0x0, 0x0);
        gbc.writeMem(0xadc7, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x29e6);
        EXPECT(gbc.pc(), 0xadc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadc7), 0xcb);
        EXPECT(gbc.readMem(0xadc8), 0x2b);
        // CB 2B 0149
        gbc.setState(0x11ba, 0x988, 0x6bc0, 0x93c4, 0x7f20, 0xd6d8, 0x1, 0x0);
        gbc.writeMem(0x11ba, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x988);
        EXPECT(gbc.pc(), 0x11bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 014A
        gbc.setState(0x2c71, 0xd6a0, 0xc5e0, 0xcbd4, 0x3296, 0xec88, 0x1, 0x1);
        gbc.writeMem(0x2c71, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xd6a0);
        EXPECT(gbc.pc(), 0x2c73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 014B
        gbc.setState(0xb052, 0xd119, 0x2000, 0x31f3, 0x5370, 0x7e50, 0x1, 0x1);
        gbc.writeMem(0xb052, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xd119);
        EXPECT(gbc.pc(), 0xb054);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb052), 0xcb);
        EXPECT(gbc.readMem(0xb053), 0x2b);
        // CB 2B 014C
        gbc.setState(0x59ee, 0x75c1, 0xa190, 0xe6a7, 0x2444, 0xe90, 0x1, 0x1);
        gbc.writeMem(0x59ee, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x75c1);
        EXPECT(gbc.pc(), 0x59f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 014D
        gbc.setState(0x5f87, 0x8878, 0xecd0, 0x78d9, 0xdf17, 0xe3a, 0x1, 0x0);
        gbc.writeMem(0x5f87, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x8878);
        EXPECT(gbc.pc(), 0x5f89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 014E
        gbc.setState(0x62a9, 0xa78b, 0xd700, 0x2214, 0x5ceb, 0xa9a9, 0x0, 0x1);
        gbc.writeMem(0x62a9, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xa78b);
        EXPECT(gbc.pc(), 0x62ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 014F
        gbc.setState(0x2e1e, 0xa492, 0x2680, 0xe0f4, 0xe480, 0xbea0, 0x0, 0x1);
        gbc.writeMem(0x2e1e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xa492);
        EXPECT(gbc.pc(), 0x2e20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0152
        gbc.setState(0x5301, 0xb462, 0x3ff0, 0x5277, 0x1a80, 0x6a31, 0x1, 0x0);
        gbc.writeMem(0x5301, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xb462);
        EXPECT(gbc.pc(), 0x5303);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0153
        gbc.setState(0x541a, 0x9670, 0x9ef0, 0x91cf, 0xa234, 0xd304, 0x0, 0x0);
        gbc.writeMem(0x541a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x9670);
        EXPECT(gbc.pc(), 0x541c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0155
        gbc.setState(0x725b, 0xd309, 0x5b0, 0xcaaf, 0xc750, 0xf20, 0x1, 0x0);
        gbc.writeMem(0x725b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xd309);
        EXPECT(gbc.pc(), 0x725d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0156
        gbc.setState(0x128b, 0x9648, 0x33d0, 0xa5a1, 0xe7e2, 0xa45b, 0x0, 0x1);
        gbc.writeMem(0x128b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x9648);
        EXPECT(gbc.pc(), 0x128d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0157
        gbc.setState(0x23ca, 0x5a67, 0x95f0, 0x96f, 0x1c9f, 0x766d, 0x1, 0x1);
        gbc.writeMem(0x23ca, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x5a67);
        EXPECT(gbc.pc(), 0x23cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0158
        gbc.setState(0xd41b, 0x6908, 0x8950, 0x28d8, 0x41be, 0xfcf5, 0x1, 0x1);
        gbc.writeMem(0xd41b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x6908);
        EXPECT(gbc.pc(), 0xd41d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd41b), 0xcb);
        EXPECT(gbc.readMem(0xd41c), 0x2b);
        // CB 2B 0159
        gbc.setState(0x894e, 0x9f5e, 0xdd0, 0x39f0, 0x491, 0x1905, 0x1, 0x0);
        gbc.writeMem(0x894e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x9f5e);
        EXPECT(gbc.pc(), 0x8950);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x894e), 0xcb);
        EXPECT(gbc.readMem(0x894f), 0x2b);
        // CB 2B 015A
        gbc.setState(0x13fb, 0x1b7d, 0xb870, 0x6f81, 0xf46, 0xca2c, 0x0, 0x1);
        gbc.writeMem(0x13fb, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x1b7d);
        EXPECT(gbc.pc(), 0x13fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 015B
        gbc.setState(0x7991, 0xa086, 0x6710, 0xd611, 0x2f2f, 0xa844, 0x1, 0x0);
        gbc.writeMem(0x7991, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xa086);
        EXPECT(gbc.pc(), 0x7993);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 015C
        gbc.setState(0xb39a, 0x656, 0xe3b0, 0xc06, 0x4ac5, 0x5351, 0x1, 0x1);
        gbc.writeMem(0xb39a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x656);
        EXPECT(gbc.pc(), 0xb39c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb39a), 0xcb);
        EXPECT(gbc.readMem(0xb39b), 0x2b);
        // CB 2B 015D
        gbc.setState(0x1d36, 0x8fc0, 0x2720, 0x7124, 0x8b76, 0xf97c, 0x1, 0x1);
        gbc.writeMem(0x1d36, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x8fc0);
        EXPECT(gbc.pc(), 0x1d38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 015E
        gbc.setState(0xdda1, 0x9b9d, 0x62c0, 0x4c0, 0x9c0, 0x3d65, 0x1, 0x0);
        gbc.writeMem(0xdda1, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x9b9d);
        EXPECT(gbc.pc(), 0xdda3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdda1), 0xcb);
        EXPECT(gbc.readMem(0xdda2), 0x2b);
        // CB 2B 015F
        gbc.setState(0xad02, 0xe084, 0x12f0, 0x289d, 0x39e9, 0xa989, 0x0, 0x0);
        gbc.writeMem(0xad02, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xe084);
        EXPECT(gbc.pc(), 0xad04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad02), 0xcb);
        EXPECT(gbc.readMem(0xad03), 0x2b);
        // CB 2B 0160
        gbc.setState(0xc0fe, 0x6945, 0xd1b0, 0x6e5e, 0xb18b, 0xefd4, 0x0, 0x1);
        gbc.writeMem(0xc0fe, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x6945);
        EXPECT(gbc.pc(), 0xc100);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0fe), 0xcb);
        EXPECT(gbc.readMem(0xc0ff), 0x2b);
        // CB 2B 0161
        gbc.setState(0x88a5, 0x9922, 0x8d30, 0x7a3c, 0xe441, 0xb54b, 0x1, 0x1);
        gbc.writeMem(0x88a5, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x9922);
        EXPECT(gbc.pc(), 0x88a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88a5), 0xcb);
        EXPECT(gbc.readMem(0x88a6), 0x2b);
        // CB 2B 0162
        gbc.setState(0xc703, 0xd94d, 0x74a0, 0xf8b1, 0x278f, 0x392, 0x0, 0x0);
        gbc.writeMem(0xc703, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xd94d);
        EXPECT(gbc.pc(), 0xc705);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc703), 0xcb);
        EXPECT(gbc.readMem(0xc704), 0x2b);
        // CB 2B 0164
        gbc.setState(0xd584, 0x1ca2, 0xe300, 0x460d, 0x7b44, 0xd220, 0x0, 0x0);
        gbc.writeMem(0xd584, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x1ca2);
        EXPECT(gbc.pc(), 0xd586);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd584), 0xcb);
        EXPECT(gbc.readMem(0xd585), 0x2b);
        // CB 2B 0165
        gbc.setState(0xdf12, 0xb274, 0x7660, 0x4ec, 0xa4e3, 0x19ef, 0x1, 0x0);
        gbc.writeMem(0xdf12, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xb274);
        EXPECT(gbc.pc(), 0xdf14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf12), 0xcb);
        EXPECT(gbc.readMem(0xdf13), 0x2b);
        // CB 2B 0166
        gbc.setState(0xab0b, 0x4c39, 0xbcd0, 0xc252, 0x2c2, 0xa0e0, 0x0, 0x1);
        gbc.writeMem(0xab0b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x4c39);
        EXPECT(gbc.pc(), 0xab0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab0b), 0xcb);
        EXPECT(gbc.readMem(0xab0c), 0x2b);
        // CB 2B 0167
        gbc.setState(0xe9bb, 0xa9cc, 0x6dd0, 0x5135, 0x3789, 0x7da0, 0x1, 0x1);
        gbc.writeMem(0xe9bb, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xa9cc);
        EXPECT(gbc.pc(), 0xe9bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9bb), 0xcb);
        EXPECT(gbc.readMem(0xe9bc), 0x2b);
        // CB 2B 0168
        gbc.setState(0xa2c0, 0xf358, 0x8d40, 0xb72b, 0x8ae7, 0x1c97, 0x1, 0x0);
        gbc.writeMem(0xa2c0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xf358);
        EXPECT(gbc.pc(), 0xa2c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2c0), 0xcb);
        EXPECT(gbc.readMem(0xa2c1), 0x2b);
        // CB 2B 0169
        gbc.setState(0x1b73, 0x4fe, 0x89d0, 0xd9d5, 0xddfa, 0xaca8, 0x0, 0x0);
        gbc.writeMem(0x1b73, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x4fe);
        EXPECT(gbc.pc(), 0x1b75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 016A
        gbc.setState(0xa345, 0x1d4b, 0x1c50, 0xfff, 0x9fdb, 0x8ec0, 0x1, 0x0);
        gbc.writeMem(0xa345, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x1d4b);
        EXPECT(gbc.pc(), 0xa347);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa345), 0xcb);
        EXPECT(gbc.readMem(0xa346), 0x2b);
        // CB 2B 016B
        gbc.setState(0x4d7c, 0x8d02, 0xc740, 0xa779, 0xc103, 0x346, 0x0, 0x1);
        gbc.writeMem(0x4d7c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x8d02);
        EXPECT(gbc.pc(), 0x4d7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 016C
        gbc.setState(0x3862, 0xfc88, 0xde20, 0x21fa, 0xb01b, 0x6521, 0x1, 0x0);
        gbc.writeMem(0x3862, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xfc88);
        EXPECT(gbc.pc(), 0x3864);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 016D
        gbc.setState(0x37d0, 0xc7cd, 0xec10, 0x3385, 0x6877, 0xb3b8, 0x1, 0x0);
        gbc.writeMem(0x37d0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xc7cd);
        EXPECT(gbc.pc(), 0x37d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 016E
        gbc.setState(0xc93, 0x145b, 0x7690, 0x831e, 0x7d47, 0xc9c1, 0x0, 0x1);
        gbc.writeMem(0xc93, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x145b);
        EXPECT(gbc.pc(), 0xc95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 016F
        gbc.setState(0x39, 0xbc26, 0x5900, 0x8794, 0x2fa2, 0x7d1a, 0x0, 0x0);
        gbc.writeMem(0x39, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xbc26);
        EXPECT(gbc.pc(), 0x3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0170
        gbc.setState(0xb1b9, 0x5b66, 0xf690, 0x3db2, 0xd2e1, 0x876f, 0x0, 0x1);
        gbc.writeMem(0xb1b9, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x5b66);
        EXPECT(gbc.pc(), 0xb1bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1b9), 0xcb);
        EXPECT(gbc.readMem(0xb1ba), 0x2b);
        // CB 2B 0171
        gbc.setState(0x288e, 0xae97, 0x570, 0x7469, 0x5052, 0xbd50, 0x0, 0x0);
        gbc.writeMem(0x288e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xae97);
        EXPECT(gbc.pc(), 0x2890);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0172
        gbc.setState(0x4358, 0xab26, 0xe5b0, 0x3fc4, 0x2718, 0x68a6, 0x0, 0x1);
        gbc.writeMem(0x4358, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xab26);
        EXPECT(gbc.pc(), 0x435a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0173
        gbc.setState(0x4d6e, 0x80fd, 0xbce0, 0x2a96, 0x688f, 0x9a74, 0x1, 0x1);
        gbc.writeMem(0x4d6e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x80fd);
        EXPECT(gbc.pc(), 0x4d70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0175
        gbc.setState(0x7052, 0xb735, 0xa790, 0xb320, 0x70ed, 0x3e14, 0x0, 0x0);
        gbc.writeMem(0x7052, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xb735);
        EXPECT(gbc.pc(), 0x7054);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0176
        gbc.setState(0xdf9c, 0xe45f, 0xe260, 0x62d0, 0xbbbb, 0xc02b, 0x0, 0x0);
        gbc.writeMem(0xdf9c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xe45f);
        EXPECT(gbc.pc(), 0xdf9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf9c), 0xcb);
        EXPECT(gbc.readMem(0xdf9d), 0x2b);
        // CB 2B 0177
        gbc.setState(0x567b, 0xac5b, 0x7520, 0xa42, 0xcfac, 0xbe96, 0x0, 0x0);
        gbc.writeMem(0x567b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xac5b);
        EXPECT(gbc.pc(), 0x567d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0178
        gbc.setState(0x6fd, 0x9376, 0xa00, 0xdc39, 0x27ce, 0xb73d, 0x0, 0x1);
        gbc.writeMem(0x6fd, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x9376);
        EXPECT(gbc.pc(), 0x6ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0179
        gbc.setState(0x41d0, 0x7482, 0x1c20, 0x8afe, 0xf92, 0x3e4f, 0x0, 0x0);
        gbc.writeMem(0x41d0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x7482);
        EXPECT(gbc.pc(), 0x41d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 017A
        gbc.setState(0xc637, 0xa3c2, 0x7f50, 0x6315, 0xcb0d, 0x11d0, 0x1, 0x1);
        gbc.writeMem(0xc637, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xa3c2);
        EXPECT(gbc.pc(), 0xc639);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc637), 0xcb);
        EXPECT(gbc.readMem(0xc638), 0x2b);
        // CB 2B 017B
        gbc.setState(0x4298, 0x343f, 0x63f0, 0x2cc1, 0x81fe, 0x3146, 0x1, 0x1);
        gbc.writeMem(0x4298, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x343f);
        EXPECT(gbc.pc(), 0x429a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 017C
        gbc.setState(0x80f3, 0xa8c1, 0xef60, 0x8ee0, 0xea66, 0x5bd8, 0x0, 0x1);
        gbc.writeMem(0x80f3, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xa8c1);
        EXPECT(gbc.pc(), 0x80f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80f3), 0xcb);
        EXPECT(gbc.readMem(0x80f4), 0x2b);
        // CB 2B 017D
        gbc.setState(0xbe39, 0x9163, 0xf0a0, 0xec86, 0x2725, 0x2ff6, 0x0, 0x0);
        gbc.writeMem(0xbe39, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x9163);
        EXPECT(gbc.pc(), 0xbe3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe39), 0xcb);
        EXPECT(gbc.readMem(0xbe3a), 0x2b);
        // CB 2B 017F
        gbc.setState(0x100b, 0x2a7b, 0xedf0, 0xc8ae, 0x7579, 0x5f4, 0x0, 0x1);
        gbc.writeMem(0x100b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x2a7b);
        EXPECT(gbc.pc(), 0x100d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0180
        gbc.setState(0xd910, 0x7964, 0x25c0, 0xf351, 0xbdb7, 0xfde7, 0x0, 0x0);
        gbc.writeMem(0xd910, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x7964);
        EXPECT(gbc.pc(), 0xd912);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd910), 0xcb);
        EXPECT(gbc.readMem(0xd911), 0x2b);
        // CB 2B 0181
        gbc.setState(0xeb88, 0x4e64, 0x5c50, 0xb0e5, 0xae4e, 0x188a, 0x0, 0x1);
        gbc.writeMem(0xeb88, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x4e64);
        EXPECT(gbc.pc(), 0xeb8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb88), 0xcb);
        EXPECT(gbc.readMem(0xeb89), 0x2b);
        // CB 2B 0183
        gbc.setState(0xc8f3, 0x2667, 0xad0, 0xb1ea, 0x32b, 0x62b6, 0x0, 0x0);
        gbc.writeMem(0xc8f3, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x2667);
        EXPECT(gbc.pc(), 0xc8f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8f3), 0xcb);
        EXPECT(gbc.readMem(0xc8f4), 0x2b);
        // CB 2B 0184
        gbc.setState(0xd1c1, 0x7589, 0xc600, 0x2ef6, 0xddec, 0x6a9b, 0x0, 0x0);
        gbc.writeMem(0xd1c1, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x7589);
        EXPECT(gbc.pc(), 0xd1c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1c1), 0xcb);
        EXPECT(gbc.readMem(0xd1c2), 0x2b);
        // CB 2B 0185
        gbc.setState(0x755a, 0x42dd, 0xb690, 0x846, 0xa293, 0x846a, 0x1, 0x0);
        gbc.writeMem(0x755a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x42dd);
        EXPECT(gbc.pc(), 0x755c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0186
        gbc.setState(0xcb9e, 0xd743, 0x8af0, 0x4056, 0xd6e, 0xca69, 0x0, 0x0);
        gbc.writeMem(0xcb9e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xd743);
        EXPECT(gbc.pc(), 0xcba0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb9e), 0xcb);
        EXPECT(gbc.readMem(0xcb9f), 0x2b);
        // CB 2B 0187
        gbc.setState(0x7ee8, 0xdf06, 0xcee0, 0x1e05, 0x90c, 0xebec, 0x1, 0x0);
        gbc.writeMem(0x7ee8, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xdf06);
        EXPECT(gbc.pc(), 0x7eea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0188
        gbc.setState(0x47bf, 0x7ef0, 0x4780, 0xc8ab, 0xd25, 0x878, 0x1, 0x1);
        gbc.writeMem(0x47bf, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x7ef0);
        EXPECT(gbc.pc(), 0x47c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0189
        gbc.setState(0x6ef6, 0x9954, 0x95e0, 0x174f, 0x6d40, 0xa976, 0x1, 0x0);
        gbc.writeMem(0x6ef6, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x9954);
        EXPECT(gbc.pc(), 0x6ef8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 018A
        gbc.setState(0x4520, 0x7ad, 0x89a0, 0xc1d2, 0x3306, 0xa9f1, 0x1, 0x1);
        gbc.writeMem(0x4520, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x7ad);
        EXPECT(gbc.pc(), 0x4522);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 018B
        gbc.setState(0x3841, 0x3484, 0x770, 0x82e4, 0x3d0c, 0x3fc5, 0x0, 0x0);
        gbc.writeMem(0x3841, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x3484);
        EXPECT(gbc.pc(), 0x3843);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 018C
        gbc.setState(0xbc16, 0xa896, 0x8310, 0xd63f, 0x18fd, 0xce66, 0x1, 0x0);
        gbc.writeMem(0xbc16, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xa896);
        EXPECT(gbc.pc(), 0xbc18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc16), 0xcb);
        EXPECT(gbc.readMem(0xbc17), 0x2b);
        // CB 2B 018D
        gbc.setState(0x516c, 0x626b, 0x6d80, 0x354e, 0x3ce7, 0x7390, 0x0, 0x1);
        gbc.writeMem(0x516c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x626b);
        EXPECT(gbc.pc(), 0x516e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 018E
        gbc.setState(0xa685, 0xd1e6, 0xd100, 0x50cb, 0x4582, 0x99b3, 0x1, 0x0);
        gbc.writeMem(0xa685, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xd1e6);
        EXPECT(gbc.pc(), 0xa687);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa685), 0xcb);
        EXPECT(gbc.readMem(0xa686), 0x2b);
        // CB 2B 018F
        gbc.setState(0x7bc5, 0xc45a, 0xa490, 0x351b, 0xbe4b, 0x84cc, 0x1, 0x1);
        gbc.writeMem(0x7bc5, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xc45a);
        EXPECT(gbc.pc(), 0x7bc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0190
        gbc.setState(0xcf3e, 0xd04c, 0xd050, 0xe209, 0x7e7d, 0xa93d, 0x1, 0x1);
        gbc.writeMem(0xcf3e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xd04c);
        EXPECT(gbc.pc(), 0xcf40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf3e), 0xcb);
        EXPECT(gbc.readMem(0xcf3f), 0x2b);
        // CB 2B 0191
        gbc.setState(0x515e, 0x348b, 0x9b90, 0x3e99, 0x6010, 0x4de0, 0x0, 0x0);
        gbc.writeMem(0x515e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x348b);
        EXPECT(gbc.pc(), 0x5160);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0192
        gbc.setState(0x4958, 0x8244, 0x5940, 0xe299, 0xbd76, 0x983d, 0x1, 0x1);
        gbc.writeMem(0x4958, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x8244);
        EXPECT(gbc.pc(), 0x495a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0193
        gbc.setState(0x5c01, 0xe36f, 0x27d0, 0xb153, 0x63c0, 0xa243, 0x0, 0x0);
        gbc.writeMem(0x5c01, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xe36f);
        EXPECT(gbc.pc(), 0x5c03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0194
        gbc.setState(0x4fdd, 0xaeab, 0x5350, 0xced4, 0x5a03, 0x406f, 0x1, 0x0);
        gbc.writeMem(0x4fdd, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xaeab);
        EXPECT(gbc.pc(), 0x4fdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0195
        gbc.setState(0x9056, 0x58, 0xc620, 0xfe96, 0xbed9, 0x718e, 0x1, 0x0);
        gbc.writeMem(0x9056, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x58);
        EXPECT(gbc.pc(), 0x9058);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9056), 0xcb);
        EXPECT(gbc.readMem(0x9057), 0x2b);
        // CB 2B 0196
        gbc.setState(0xd54f, 0x3346, 0xb450, 0xbb95, 0xe445, 0x7ebd, 0x1, 0x0);
        gbc.writeMem(0xd54f, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x3346);
        EXPECT(gbc.pc(), 0xd551);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd54f), 0xcb);
        EXPECT(gbc.readMem(0xd550), 0x2b);
        // CB 2B 0197
        gbc.setState(0x86d, 0xaa58, 0xab60, 0xa4a0, 0x6165, 0xf15, 0x1, 0x1);
        gbc.writeMem(0x86d, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xaa58);
        EXPECT(gbc.pc(), 0x86f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0198
        gbc.setState(0x9c07, 0x3f3f, 0x5b0, 0x8850, 0xc1f1, 0xfcec, 0x0, 0x0);
        gbc.writeMem(0x9c07, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x3f3f);
        EXPECT(gbc.pc(), 0x9c09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c07), 0xcb);
        EXPECT(gbc.readMem(0x9c08), 0x2b);
        // CB 2B 0199
        gbc.setState(0xbe09, 0xf513, 0x5c60, 0x1d0b, 0x5b1e, 0xd941, 0x0, 0x1);
        gbc.writeMem(0xbe09, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xf513);
        EXPECT(gbc.pc(), 0xbe0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe09), 0xcb);
        EXPECT(gbc.readMem(0xbe0a), 0x2b);
        // CB 2B 019A
        gbc.setState(0xe4dc, 0x7369, 0x2a40, 0x9223, 0xc023, 0x948d, 0x0, 0x1);
        gbc.writeMem(0xe4dc, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x7369);
        EXPECT(gbc.pc(), 0xe4de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4dc), 0xcb);
        EXPECT(gbc.readMem(0xe4dd), 0x2b);
        // CB 2B 019B
        gbc.setState(0x177c, 0xc2db, 0xfb70, 0x7d33, 0xd2d3, 0xca7d, 0x0, 0x0);
        gbc.writeMem(0x177c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xc2db);
        EXPECT(gbc.pc(), 0x177e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 019C
        gbc.setState(0x5822, 0x1af7, 0xb400, 0xb37f, 0x6806, 0xc5bf, 0x0, 0x0);
        gbc.writeMem(0x5822, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x1af7);
        EXPECT(gbc.pc(), 0x5824);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 019D
        gbc.setState(0xb93f, 0xbc94, 0x9d0, 0x747a, 0xcf50, 0xe451, 0x1, 0x0);
        gbc.writeMem(0xb93f, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xbc94);
        EXPECT(gbc.pc(), 0xb941);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb93f), 0xcb);
        EXPECT(gbc.readMem(0xb940), 0x2b);
        // CB 2B 019E
        gbc.setState(0x3949, 0xe9fb, 0xef60, 0x6c47, 0x82ae, 0x7e5e, 0x0, 0x1);
        gbc.writeMem(0x3949, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xe9fb);
        EXPECT(gbc.pc(), 0x394b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 019F
        gbc.setState(0x2279, 0x52f0, 0x5870, 0x688d, 0xa05d, 0x6c6d, 0x0, 0x0);
        gbc.writeMem(0x2279, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x52f0);
        EXPECT(gbc.pc(), 0x227b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 01A0
        gbc.setState(0xe5ff, 0x3631, 0x4a30, 0x322, 0x6afd, 0xdf2f, 0x0, 0x0);
        gbc.writeMem(0xe5ff, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x3631);
        EXPECT(gbc.pc(), 0xe601);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5ff), 0xcb);
        EXPECT(gbc.readMem(0xe600), 0x2b);
        // CB 2B 01A1
        gbc.setState(0xa7a5, 0xbe54, 0x8f40, 0x56b8, 0xeb77, 0xd3df, 0x0, 0x0);
        gbc.writeMem(0xa7a5, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xbe54);
        EXPECT(gbc.pc(), 0xa7a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7a5), 0xcb);
        EXPECT(gbc.readMem(0xa7a6), 0x2b);
        // CB 2B 01A3
        gbc.setState(0x4512, 0xc94c, 0x19e0, 0xd0fd, 0xf1d4, 0xf845, 0x1, 0x0);
        gbc.writeMem(0x4512, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xc94c);
        EXPECT(gbc.pc(), 0x4514);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 01A4
        gbc.setState(0xa458, 0x5287, 0x6da0, 0x8eaa, 0xe04e, 0xb539, 0x0, 0x0);
        gbc.writeMem(0xa458, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x5287);
        EXPECT(gbc.pc(), 0xa45a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa458), 0xcb);
        EXPECT(gbc.readMem(0xa459), 0x2b);
        // CB 2B 01A5
        gbc.setState(0x1fd0, 0xeb75, 0x55c0, 0xc798, 0x45da, 0x33d9, 0x0, 0x1);
        gbc.writeMem(0x1fd0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xeb75);
        EXPECT(gbc.pc(), 0x1fd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 01A6
        gbc.setState(0xefce, 0xe885, 0x1310, 0x17ad, 0xfe6b, 0x4102, 0x0, 0x1);
        gbc.writeMem(0xefce, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xe885);
        EXPECT(gbc.pc(), 0xefd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefce), 0xcb);
        EXPECT(gbc.readMem(0xefcf), 0x2b);
        // CB 2B 01A7
        gbc.setState(0x3046, 0x75d6, 0x4940, 0x55c3, 0x2594, 0x317b, 0x1, 0x1);
        gbc.writeMem(0x3046, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x75d6);
        EXPECT(gbc.pc(), 0x3048);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 01A8
        gbc.setState(0x4f6a, 0xb6d9, 0x9760, 0x310, 0x4fe1, 0xf2b6, 0x0, 0x0);
        gbc.writeMem(0x4f6a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xb6d9);
        EXPECT(gbc.pc(), 0x4f6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 01A9
        gbc.setState(0x75c1, 0xf7f8, 0xafc0, 0x9011, 0x35d, 0x8c6e, 0x1, 0x0);
        gbc.writeMem(0x75c1, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xf7f8);
        EXPECT(gbc.pc(), 0x75c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 01AA
        gbc.setState(0xdc3b, 0xb0e2, 0x6ed0, 0x65ac, 0x2aad, 0x713, 0x1, 0x1);
        gbc.writeMem(0xdc3b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xb0e2);
        EXPECT(gbc.pc(), 0xdc3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc3b), 0xcb);
        EXPECT(gbc.readMem(0xdc3c), 0x2b);
        // CB 2B 01AC
        gbc.setState(0xea12, 0x5627, 0xda10, 0x5990, 0xf9b2, 0xb5be, 0x0, 0x0);
        gbc.writeMem(0xea12, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x5627);
        EXPECT(gbc.pc(), 0xea14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea12), 0xcb);
        EXPECT(gbc.readMem(0xea13), 0x2b);
        // CB 2B 01AD
        gbc.setState(0x985a, 0xd1ee, 0x82c0, 0xf39b, 0xfd3f, 0xc524, 0x1, 0x0);
        gbc.writeMem(0x985a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xd1ee);
        EXPECT(gbc.pc(), 0x985c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x985a), 0xcb);
        EXPECT(gbc.readMem(0x985b), 0x2b);
        // CB 2B 01AE
        gbc.setState(0xad18, 0xb638, 0x8e60, 0xcf00, 0x4524, 0xc092, 0x0, 0x0);
        gbc.writeMem(0xad18, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xb638);
        EXPECT(gbc.pc(), 0xad1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad18), 0xcb);
        EXPECT(gbc.readMem(0xad19), 0x2b);
        // CB 2B 01AF
        gbc.setState(0xacc6, 0xe1, 0xdbe0, 0x3397, 0xdd9b, 0xdd3b, 0x1, 0x1);
        gbc.writeMem(0xacc6, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xe1);
        EXPECT(gbc.pc(), 0xacc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacc6), 0xcb);
        EXPECT(gbc.readMem(0xacc7), 0x2b);
        // CB 2B 01B0
        gbc.setState(0xe439, 0xa02, 0x12a0, 0xfcc8, 0xef66, 0x7f44, 0x1, 0x0);
        gbc.writeMem(0xe439, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xa02);
        EXPECT(gbc.pc(), 0xe43b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe439), 0xcb);
        EXPECT(gbc.readMem(0xe43a), 0x2b);
        // CB 2B 01B2
        gbc.setState(0x43e2, 0xa258, 0xea60, 0x94e7, 0x10a4, 0x318a, 0x1, 0x0);
        gbc.writeMem(0x43e2, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xa258);
        EXPECT(gbc.pc(), 0x43e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 01B3
        gbc.setState(0x597c, 0x8107, 0x9990, 0xe4b7, 0x58da, 0xeab9, 0x0, 0x0);
        gbc.writeMem(0x597c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x8107);
        EXPECT(gbc.pc(), 0x597e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 01B4
        gbc.setState(0xd4c5, 0x4cfd, 0xdac0, 0xe35a, 0x3370, 0xe5c, 0x1, 0x0);
        gbc.writeMem(0xd4c5, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x4cfd);
        EXPECT(gbc.pc(), 0xd4c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4c5), 0xcb);
        EXPECT(gbc.readMem(0xd4c6), 0x2b);
        // CB 2B 01B5
        gbc.setState(0x78ba, 0x8689, 0x9b60, 0xe5fe, 0xcb84, 0xbee4, 0x1, 0x0);
        gbc.writeMem(0x78ba, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x8689);
        EXPECT(gbc.pc(), 0x78bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 01B6
        gbc.setState(0x5e07, 0xe7dc, 0xb670, 0x889c, 0xf3ad, 0x1d84, 0x1, 0x1);
        gbc.writeMem(0x5e07, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xe7dc);
        EXPECT(gbc.pc(), 0x5e09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 01B7
        gbc.setState(0xed6c, 0xb3e4, 0xbdd0, 0x1b9c, 0x7219, 0x66ae, 0x1, 0x1);
        gbc.writeMem(0xed6c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xb3e4);
        EXPECT(gbc.pc(), 0xed6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed6c), 0xcb);
        EXPECT(gbc.readMem(0xed6d), 0x2b);
        // CB 2B 01B8
        gbc.setState(0xe28d, 0x8404, 0x580, 0x7ec3, 0x4a12, 0xcedb, 0x0, 0x1);
        gbc.writeMem(0xe28d, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x8404);
        EXPECT(gbc.pc(), 0xe28f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe28d), 0xcb);
        EXPECT(gbc.readMem(0xe28e), 0x2b);
        // CB 2B 01B9
        gbc.setState(0x43e, 0x3a5a, 0x23e0, 0x2d1f, 0xb2e, 0x4682, 0x1, 0x0);
        gbc.writeMem(0x43e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x3a5a);
        EXPECT(gbc.pc(), 0x440);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 01BA
        gbc.setState(0x3f4, 0x573e, 0x7990, 0x31c4, 0xaad1, 0x83ac, 0x1, 0x1);
        gbc.writeMem(0x3f4, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x573e);
        EXPECT(gbc.pc(), 0x3f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 01BB
        gbc.setState(0xdde7, 0x44a7, 0x4790, 0x42ad, 0x1c75, 0x6112, 0x1, 0x1);
        gbc.writeMem(0xdde7, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x44a7);
        EXPECT(gbc.pc(), 0xdde9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdde7), 0xcb);
        EXPECT(gbc.readMem(0xdde8), 0x2b);
        // CB 2B 01BC
        gbc.setState(0x35e5, 0x2d88, 0x5180, 0xa857, 0x8772, 0x2e60, 0x0, 0x0);
        gbc.writeMem(0x35e5, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x2d88);
        EXPECT(gbc.pc(), 0x35e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 01BD
        gbc.setState(0xb7c0, 0x9cc7, 0xa280, 0x4463, 0x1e4c, 0x712e, 0x0, 0x0);
        gbc.writeMem(0xb7c0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x9cc7);
        EXPECT(gbc.pc(), 0xb7c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7c0), 0xcb);
        EXPECT(gbc.readMem(0xb7c1), 0x2b);
        // CB 2B 01BE
        gbc.setState(0x8aa0, 0x31d7, 0x3470, 0xad5c, 0x4029, 0x45a4, 0x0, 0x1);
        gbc.writeMem(0x8aa0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x31d7);
        EXPECT(gbc.pc(), 0x8aa2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8aa0), 0xcb);
        EXPECT(gbc.readMem(0x8aa1), 0x2b);
        // CB 2B 01BF
        gbc.setState(0x56a, 0xc83, 0x31c0, 0x2730, 0x3665, 0x1626, 0x1, 0x1);
        gbc.writeMem(0x56a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xc83);
        EXPECT(gbc.pc(), 0x56c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 01C0
        gbc.setState(0x44de, 0xd324, 0x1e90, 0x79f, 0xbcfa, 0x48a3, 0x1, 0x0);
        gbc.writeMem(0x44de, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xd324);
        EXPECT(gbc.pc(), 0x44e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 01C1
        gbc.setState(0xa7e2, 0x8ebe, 0x9330, 0x8b27, 0x41f0, 0xc3b, 0x0, 0x1);
        gbc.writeMem(0xa7e2, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x8ebe);
        EXPECT(gbc.pc(), 0xa7e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7e2), 0xcb);
        EXPECT(gbc.readMem(0xa7e3), 0x2b);
        // CB 2B 01C2
        gbc.setState(0x1867, 0xdc6d, 0x8370, 0xf28b, 0xf423, 0x8f03, 0x0, 0x1);
        gbc.writeMem(0x1867, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xdc6d);
        EXPECT(gbc.pc(), 0x1869);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 01C3
        gbc.setState(0xa568, 0xc3a1, 0xf270, 0x1125, 0x336d, 0xacee, 0x1, 0x1);
        gbc.writeMem(0xa568, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xc3a1);
        EXPECT(gbc.pc(), 0xa56a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa568), 0xcb);
        EXPECT(gbc.readMem(0xa569), 0x2b);
        // CB 2B 01C4
        gbc.setState(0x2215, 0x588b, 0x5ea0, 0xdab5, 0x844e, 0x8e74, 0x0, 0x0);
        gbc.writeMem(0x2215, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x588b);
        EXPECT(gbc.pc(), 0x2217);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 01C5
        gbc.setState(0xd650, 0x538b, 0x3ae0, 0x1fd, 0xc1c, 0xb47a, 0x1, 0x1);
        gbc.writeMem(0xd650, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x538b);
        EXPECT(gbc.pc(), 0xd652);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd650), 0xcb);
        EXPECT(gbc.readMem(0xd651), 0x2b);
        // CB 2B 01C6
        gbc.setState(0xe04a, 0x6999, 0x2d00, 0x269d, 0x36e8, 0x71b2, 0x1, 0x1);
        gbc.writeMem(0xe04a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x6999);
        EXPECT(gbc.pc(), 0xe04c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe04a), 0xcb);
        EXPECT(gbc.readMem(0xe04b), 0x2b);
        // CB 2B 01C7
        gbc.setState(0x53e9, 0x73cc, 0x3670, 0xff08, 0xc216, 0x4497, 0x1, 0x0);
        gbc.writeMem(0x53e9, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x73cc);
        EXPECT(gbc.pc(), 0x53eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 01C8
        gbc.setState(0x78df, 0xb8ed, 0x88b0, 0x3be0, 0x3c8b, 0xfd2c, 0x0, 0x0);
        gbc.writeMem(0x78df, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xb8ed);
        EXPECT(gbc.pc(), 0x78e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 01C9
        gbc.setState(0xc8e0, 0xd806, 0x70e0, 0x25a8, 0x90dc, 0x8600, 0x1, 0x1);
        gbc.writeMem(0xc8e0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xd806);
        EXPECT(gbc.pc(), 0xc8e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8e0), 0xcb);
        EXPECT(gbc.readMem(0xc8e1), 0x2b);
        // CB 2B 01CA
        gbc.setState(0x83ea, 0xb109, 0xed70, 0xc838, 0x591f, 0xf739, 0x1, 0x0);
        gbc.writeMem(0x83ea, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xb109);
        EXPECT(gbc.pc(), 0x83ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83ea), 0xcb);
        EXPECT(gbc.readMem(0x83eb), 0x2b);
        // CB 2B 01CB
        gbc.setState(0xe67f, 0x26e0, 0xbec0, 0x1230, 0xd2ec, 0x586f, 0x1, 0x0);
        gbc.writeMem(0xe67f, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x26e0);
        EXPECT(gbc.pc(), 0xe681);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe67f), 0xcb);
        EXPECT(gbc.readMem(0xe680), 0x2b);
        // CB 2B 01CC
        gbc.setState(0xeca4, 0x547b, 0xf690, 0xcfe9, 0x5ee4, 0x69fd, 0x1, 0x1);
        gbc.writeMem(0xeca4, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x547b);
        EXPECT(gbc.pc(), 0xeca6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeca4), 0xcb);
        EXPECT(gbc.readMem(0xeca5), 0x2b);
        // CB 2B 01CD
        gbc.setState(0x6831, 0xb1bc, 0x8c00, 0xbbcd, 0x4f54, 0x6077, 0x0, 0x1);
        gbc.writeMem(0x6831, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xb1bc);
        EXPECT(gbc.pc(), 0x6833);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 01CE
        gbc.setState(0x49e0, 0x76ac, 0xc0c0, 0xc166, 0x37c0, 0x1ec9, 0x1, 0x0);
        gbc.writeMem(0x49e0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x76ac);
        EXPECT(gbc.pc(), 0x49e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 01CF
        gbc.setState(0x734e, 0xbdfd, 0x5f30, 0x8737, 0x639a, 0x6715, 0x0, 0x1);
        gbc.writeMem(0x734e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xbdfd);
        EXPECT(gbc.pc(), 0x7350);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 01D0
        gbc.setState(0xbb5, 0x60ba, 0x2750, 0x6122, 0x5910, 0x81a4, 0x0, 0x1);
        gbc.writeMem(0xbb5, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x60ba);
        EXPECT(gbc.pc(), 0xbb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 01D1
        gbc.setState(0x8431, 0xd19f, 0x9320, 0x1f0e, 0x2291, 0x23c0, 0x1, 0x0);
        gbc.writeMem(0x8431, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xd19f);
        EXPECT(gbc.pc(), 0x8433);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8431), 0xcb);
        EXPECT(gbc.readMem(0x8432), 0x2b);
        // CB 2B 01D2
        gbc.setState(0x5679, 0x3aea, 0xe6e0, 0xa0d7, 0xe405, 0x8bf3, 0x0, 0x1);
        gbc.writeMem(0x5679, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x3aea);
        EXPECT(gbc.pc(), 0x567b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 01D3
        gbc.setState(0xefd4, 0xe527, 0x45c0, 0x428, 0x6ff, 0x2ced, 0x0, 0x0);
        gbc.writeMem(0xefd4, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xe527);
        EXPECT(gbc.pc(), 0xefd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefd4), 0xcb);
        EXPECT(gbc.readMem(0xefd5), 0x2b);
        // CB 2B 01D4
        gbc.setState(0x3555, 0xff29, 0x120, 0xabc3, 0xb06b, 0xc88e, 0x0, 0x0);
        gbc.writeMem(0x3555, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xff29);
        EXPECT(gbc.pc(), 0x3557);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 01D5
        gbc.setState(0x7322, 0x1be5, 0xd6b0, 0x8a26, 0x1524, 0xb77d, 0x1, 0x1);
        gbc.writeMem(0x7322, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x1be5);
        EXPECT(gbc.pc(), 0x7324);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 01D6
        gbc.setState(0xeeec, 0x241e, 0x3520, 0xfe0b, 0xbe71, 0x89bf, 0x0, 0x1);
        gbc.writeMem(0xeeec, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x241e);
        EXPECT(gbc.pc(), 0xeeee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeeec), 0xcb);
        EXPECT(gbc.readMem(0xeeed), 0x2b);
        // CB 2B 01D7
        gbc.setState(0x5b9f, 0x49f3, 0xbd30, 0xe667, 0x68bd, 0xa566, 0x1, 0x1);
        gbc.writeMem(0x5b9f, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x49f3);
        EXPECT(gbc.pc(), 0x5ba1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 01D8
        gbc.setState(0x1598, 0x6235, 0xe960, 0xa144, 0xc26, 0x59bd, 0x1, 0x1);
        gbc.writeMem(0x1598, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x6235);
        EXPECT(gbc.pc(), 0x159a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 01D9
        gbc.setState(0x602d, 0xb0bc, 0xba70, 0xc293, 0xceb4, 0xf22d, 0x0, 0x0);
        gbc.writeMem(0x602d, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xb0bc);
        EXPECT(gbc.pc(), 0x602f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 01DA
        gbc.setState(0x588f, 0x589f, 0x8cb0, 0xa393, 0xab61, 0x4ab6, 0x0, 0x0);
        gbc.writeMem(0x588f, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x589f);
        EXPECT(gbc.pc(), 0x5891);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 01DB
        gbc.setState(0x9a43, 0xea1d, 0xf740, 0x19e8, 0x71eb, 0x9493, 0x0, 0x0);
        gbc.writeMem(0x9a43, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xea1d);
        EXPECT(gbc.pc(), 0x9a45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a43), 0xcb);
        EXPECT(gbc.readMem(0x9a44), 0x2b);
        // CB 2B 01DC
        gbc.setState(0x40e1, 0x69e7, 0xe300, 0xda09, 0xc09b, 0x5356, 0x0, 0x0);
        gbc.writeMem(0x40e1, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x69e7);
        EXPECT(gbc.pc(), 0x40e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 01DD
        gbc.setState(0xcf77, 0x8b22, 0x2e40, 0x58fd, 0x50b6, 0x4f46, 0x0, 0x0);
        gbc.writeMem(0xcf77, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x8b22);
        EXPECT(gbc.pc(), 0xcf79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf77), 0xcb);
        EXPECT(gbc.readMem(0xcf78), 0x2b);
        // CB 2B 01DE
        gbc.setState(0x7121, 0x206d, 0xf3b0, 0x43a8, 0x5160, 0xd357, 0x1, 0x1);
        gbc.writeMem(0x7121, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x206d);
        EXPECT(gbc.pc(), 0x7123);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 01DF
        gbc.setState(0xc296, 0x25d7, 0x7230, 0x430, 0x4c7c, 0x75fe, 0x1, 0x0);
        gbc.writeMem(0xc296, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x25d7);
        EXPECT(gbc.pc(), 0xc298);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc296), 0xcb);
        EXPECT(gbc.readMem(0xc297), 0x2b);
        // CB 2B 01E0
        gbc.setState(0x541, 0xe837, 0xcdc0, 0xc2ef, 0x74b3, 0xc5e9, 0x1, 0x1);
        gbc.writeMem(0x541, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xe837);
        EXPECT(gbc.pc(), 0x543);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 01E1
        gbc.setState(0xb287, 0xf8d9, 0x7bd0, 0x6080, 0xc8e, 0x24ba, 0x0, 0x0);
        gbc.writeMem(0xb287, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xf8d9);
        EXPECT(gbc.pc(), 0xb289);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb287), 0xcb);
        EXPECT(gbc.readMem(0xb288), 0x2b);
        // CB 2B 01E2
        gbc.setState(0x320, 0xf2d2, 0xb9e0, 0xc98e, 0xee97, 0xe5a, 0x0, 0x1);
        gbc.writeMem(0x320, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xf2d2);
        EXPECT(gbc.pc(), 0x322);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 01E3
        gbc.setState(0xa328, 0xbc98, 0x9b70, 0x10c, 0x363f, 0xbc2d, 0x1, 0x0);
        gbc.writeMem(0xa328, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xbc98);
        EXPECT(gbc.pc(), 0xa32a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa328), 0xcb);
        EXPECT(gbc.readMem(0xa329), 0x2b);
        // CB 2B 01E4
        gbc.setState(0x6a66, 0x4c9e, 0xf170, 0x2f95, 0xf1cd, 0xdbf0, 0x0, 0x1);
        gbc.writeMem(0x6a66, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x4c9e);
        EXPECT(gbc.pc(), 0x6a68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 01E5
        gbc.setState(0x280b, 0x82ca, 0x99a0, 0xc4f9, 0xaa9f, 0x40cd, 0x1, 0x1);
        gbc.writeMem(0x280b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x82ca);
        EXPECT(gbc.pc(), 0x280d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 01E6
        gbc.setState(0xe864, 0xa743, 0x22b0, 0xbf3f, 0x2267, 0x6e2e, 0x1, 0x1);
        gbc.writeMem(0xe864, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xa743);
        EXPECT(gbc.pc(), 0xe866);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe864), 0xcb);
        EXPECT(gbc.readMem(0xe865), 0x2b);
        // CB 2B 01E7
        gbc.setState(0xd5af, 0xc499, 0xa260, 0x9521, 0x512d, 0x532c, 0x1, 0x1);
        gbc.writeMem(0xd5af, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xc499);
        EXPECT(gbc.pc(), 0xd5b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5af), 0xcb);
        EXPECT(gbc.readMem(0xd5b0), 0x2b);
        // CB 2B 01E8
        gbc.setState(0x14ff, 0x5044, 0x5450, 0x76c6, 0x137a, 0x7c02, 0x0, 0x0);
        gbc.writeMem(0x14ff, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x5044);
        EXPECT(gbc.pc(), 0x1501);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 01E9
        gbc.setState(0x6bc6, 0xd2e3, 0xb4b0, 0xe225, 0xeded, 0x73e, 0x1, 0x1);
        gbc.writeMem(0x6bc6, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xd2e3);
        EXPECT(gbc.pc(), 0x6bc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 01EA
        gbc.setState(0x1e4d, 0xd050, 0xfc60, 0xfe55, 0xcd27, 0x3100, 0x1, 0x1);
        gbc.writeMem(0x1e4d, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xd050);
        EXPECT(gbc.pc(), 0x1e4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 01EB
        gbc.setState(0x96b2, 0x83f1, 0x7eb0, 0x8cf8, 0x9e34, 0x11bb, 0x1, 0x1);
        gbc.writeMem(0x96b2, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x83f1);
        EXPECT(gbc.pc(), 0x96b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96b2), 0xcb);
        EXPECT(gbc.readMem(0x96b3), 0x2b);
        // CB 2B 01EC
        gbc.setState(0xd4bf, 0xd46a, 0x3270, 0x1c38, 0xf760, 0xd2cf, 0x1, 0x1);
        gbc.writeMem(0xd4bf, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xd46a);
        EXPECT(gbc.pc(), 0xd4c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4bf), 0xcb);
        EXPECT(gbc.readMem(0xd4c0), 0x2b);
        // CB 2B 01ED
        gbc.setState(0x9732, 0x160a, 0xd430, 0x53a2, 0xc845, 0x97c5, 0x0, 0x1);
        gbc.writeMem(0x9732, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x160a);
        EXPECT(gbc.pc(), 0x9734);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9732), 0xcb);
        EXPECT(gbc.readMem(0x9733), 0x2b);
        // CB 2B 01EE
        gbc.setState(0x7696, 0xf06, 0x3290, 0xb5a1, 0x1d7d, 0xd519, 0x1, 0x0);
        gbc.writeMem(0x7696, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xf06);
        EXPECT(gbc.pc(), 0x7698);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 01EF
        gbc.setState(0x770c, 0xe6c4, 0x76c0, 0x31a5, 0x3651, 0x3688, 0x0, 0x0);
        gbc.writeMem(0x770c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xe6c4);
        EXPECT(gbc.pc(), 0x770e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 01F0
        gbc.setState(0xca52, 0x806d, 0xc6e0, 0xb03d, 0x56f7, 0x58a8, 0x0, 0x1);
        gbc.writeMem(0xca52, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x806d);
        EXPECT(gbc.pc(), 0xca54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca52), 0xcb);
        EXPECT(gbc.readMem(0xca53), 0x2b);
        // CB 2B 01F1
        gbc.setState(0x789d, 0x6847, 0x4280, 0xb041, 0x466c, 0x88cb, 0x1, 0x1);
        gbc.writeMem(0x789d, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x6847);
        EXPECT(gbc.pc(), 0x789f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 01F2
        gbc.setState(0x7eaf, 0x1095, 0x2680, 0xe710, 0xeb41, 0xa88f, 0x0, 0x1);
        gbc.writeMem(0x7eaf, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x1095);
        EXPECT(gbc.pc(), 0x7eb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 01F3
        gbc.setState(0xd8fe, 0x3dff, 0xe090, 0xe71, 0xe3df, 0x6ef3, 0x0, 0x1);
        gbc.writeMem(0xd8fe, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x3dff);
        EXPECT(gbc.pc(), 0xd900);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8fe), 0xcb);
        EXPECT(gbc.readMem(0xd8ff), 0x2b);
        // CB 2B 01F4
        gbc.setState(0x24b1, 0x16bc, 0xc700, 0xb349, 0x8905, 0x2436, 0x1, 0x1);
        gbc.writeMem(0x24b1, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x16bc);
        EXPECT(gbc.pc(), 0x24b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 01F5
        gbc.setState(0x7206, 0x23b6, 0x9400, 0x23db, 0x740, 0x56e5, 0x1, 0x1);
        gbc.writeMem(0x7206, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x23b6);
        EXPECT(gbc.pc(), 0x7208);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 01F6
        gbc.setState(0xa225, 0xcb4a, 0xfaf0, 0x1400, 0x9265, 0x805c, 0x1, 0x1);
        gbc.writeMem(0xa225, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xcb4a);
        EXPECT(gbc.pc(), 0xa227);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa225), 0xcb);
        EXPECT(gbc.readMem(0xa226), 0x2b);
        // CB 2B 01F7
        gbc.setState(0x7dc4, 0x6d29, 0xae70, 0xfd67, 0xeeeb, 0x75be, 0x1, 0x0);
        gbc.writeMem(0x7dc4, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x6d29);
        EXPECT(gbc.pc(), 0x7dc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 01F8
        gbc.setState(0x9e03, 0xaddd, 0x2b0, 0x666, 0x98db, 0x9eb2, 0x0, 0x1);
        gbc.writeMem(0x9e03, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xaddd);
        EXPECT(gbc.pc(), 0x9e05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e03), 0xcb);
        EXPECT(gbc.readMem(0x9e04), 0x2b);
        // CB 2B 01F9
        gbc.setState(0xa6ba, 0xfb1b, 0x5e80, 0xc18b, 0xc378, 0x25, 0x0, 0x1);
        gbc.writeMem(0xa6ba, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xfb1b);
        EXPECT(gbc.pc(), 0xa6bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6ba), 0xcb);
        EXPECT(gbc.readMem(0xa6bb), 0x2b);
        // CB 2B 01FA
        gbc.setState(0xc35c, 0x5821, 0x2ec0, 0x4db4, 0xa1e9, 0xa2fe, 0x0, 0x1);
        gbc.writeMem(0xc35c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x5821);
        EXPECT(gbc.pc(), 0xc35e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc35c), 0xcb);
        EXPECT(gbc.readMem(0xc35d), 0x2b);
        // CB 2B 01FB
        gbc.setState(0x78d7, 0xf396, 0x7e70, 0xc944, 0xf559, 0x2640, 0x1, 0x1);
        gbc.writeMem(0x78d7, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xf396);
        EXPECT(gbc.pc(), 0x78d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 01FC
        gbc.setState(0x9d30, 0xa690, 0xfe30, 0x8be9, 0x3809, 0x5450, 0x0, 0x0);
        gbc.writeMem(0x9d30, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xa690);
        EXPECT(gbc.pc(), 0x9d32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d30), 0xcb);
        EXPECT(gbc.readMem(0x9d31), 0x2b);
        // CB 2B 01FD
        gbc.setState(0x651, 0x617, 0x1500, 0xc6f8, 0x63df, 0xcdd8, 0x0, 0x0);
        gbc.writeMem(0x651, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x617);
        EXPECT(gbc.pc(), 0x653);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 01FE
        gbc.setState(0x3298, 0x9f87, 0x75f0, 0x3584, 0x5fac, 0x99a7, 0x0, 0x1);
        gbc.writeMem(0x3298, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x9f87);
        EXPECT(gbc.pc(), 0x329a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 01FF
        gbc.setState(0xee4d, 0xb43f, 0x6ee0, 0x5fa, 0x3138, 0x461d, 0x0, 0x1);
        gbc.writeMem(0xee4d, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xb43f);
        EXPECT(gbc.pc(), 0xee4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee4d), 0xcb);
        EXPECT(gbc.readMem(0xee4e), 0x2b);
        // CB 2B 0200
        gbc.setState(0xc6, 0x12d6, 0xb910, 0xca0f, 0x35a4, 0x9b75, 0x0, 0x1);
        gbc.writeMem(0xc6, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x12d6);
        EXPECT(gbc.pc(), 0xc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0201
        gbc.setState(0x5a8a, 0xea0, 0x5530, 0x29ea, 0x999c, 0x4ae, 0x0, 0x1);
        gbc.writeMem(0x5a8a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xea0);
        EXPECT(gbc.pc(), 0x5a8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0202
        gbc.setState(0xa25a, 0x7965, 0x4e60, 0x7396, 0x4c13, 0xc73c, 0x1, 0x0);
        gbc.writeMem(0xa25a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x7965);
        EXPECT(gbc.pc(), 0xa25c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa25a), 0xcb);
        EXPECT(gbc.readMem(0xa25b), 0x2b);
        // CB 2B 0204
        gbc.setState(0xdf5c, 0x445a, 0xefd0, 0x2ce1, 0x2a5e, 0x73d8, 0x0, 0x1);
        gbc.writeMem(0xdf5c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x445a);
        EXPECT(gbc.pc(), 0xdf5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf5c), 0xcb);
        EXPECT(gbc.readMem(0xdf5d), 0x2b);
        // CB 2B 0205
        gbc.setState(0xb4da, 0x5744, 0x3b80, 0xc2e0, 0x498a, 0x42a3, 0x1, 0x0);
        gbc.writeMem(0xb4da, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x5744);
        EXPECT(gbc.pc(), 0xb4dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4da), 0xcb);
        EXPECT(gbc.readMem(0xb4db), 0x2b);
        // CB 2B 0206
        gbc.setState(0x5025, 0xe99c, 0xe140, 0x84a8, 0x3b4d, 0x97b8, 0x1, 0x0);
        gbc.writeMem(0x5025, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xe99c);
        EXPECT(gbc.pc(), 0x5027);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0207
        gbc.setState(0x2709, 0xf350, 0xfab0, 0x7608, 0x4e7, 0xb8a, 0x0, 0x0);
        gbc.writeMem(0x2709, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xf350);
        EXPECT(gbc.pc(), 0x270b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0208
        gbc.setState(0xbca3, 0x65c8, 0xca50, 0xd46e, 0x8430, 0xd6c4, 0x0, 0x1);
        gbc.writeMem(0xbca3, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x65c8);
        EXPECT(gbc.pc(), 0xbca5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbca3), 0xcb);
        EXPECT(gbc.readMem(0xbca4), 0x2b);
        // CB 2B 0209
        gbc.setState(0xced7, 0x3389, 0x51a0, 0x7d3a, 0xf280, 0xfd91, 0x0, 0x1);
        gbc.writeMem(0xced7, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x3389);
        EXPECT(gbc.pc(), 0xced9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xced7), 0xcb);
        EXPECT(gbc.readMem(0xced8), 0x2b);
        // CB 2B 020A
        gbc.setState(0x8084, 0xab0a, 0x4a10, 0x5bd3, 0xaf06, 0x5f02, 0x0, 0x1);
        gbc.writeMem(0x8084, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xab0a);
        EXPECT(gbc.pc(), 0x8086);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8084), 0xcb);
        EXPECT(gbc.readMem(0x8085), 0x2b);
        // CB 2B 020B
        gbc.setState(0xac5c, 0xc3aa, 0x21a0, 0x7f01, 0x65b5, 0x90ac, 0x0, 0x0);
        gbc.writeMem(0xac5c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xc3aa);
        EXPECT(gbc.pc(), 0xac5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac5c), 0xcb);
        EXPECT(gbc.readMem(0xac5d), 0x2b);
        // CB 2B 020C
        gbc.setState(0xb1f9, 0x1e01, 0xb260, 0xbfcd, 0xca7f, 0xae04, 0x0, 0x1);
        gbc.writeMem(0xb1f9, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x1e01);
        EXPECT(gbc.pc(), 0xb1fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1f9), 0xcb);
        EXPECT(gbc.readMem(0xb1fa), 0x2b);
        // CB 2B 020D
        gbc.setState(0xdcd4, 0x30e6, 0x15b0, 0x546f, 0xe59c, 0x907b, 0x0, 0x0);
        gbc.writeMem(0xdcd4, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x30e6);
        EXPECT(gbc.pc(), 0xdcd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcd4), 0xcb);
        EXPECT(gbc.readMem(0xdcd5), 0x2b);
        // CB 2B 020E
        gbc.setState(0x8f46, 0x10ee, 0x2970, 0x9b44, 0xaa83, 0x86af, 0x1, 0x0);
        gbc.writeMem(0x8f46, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x10ee);
        EXPECT(gbc.pc(), 0x8f48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f46), 0xcb);
        EXPECT(gbc.readMem(0x8f47), 0x2b);
        // CB 2B 020F
        gbc.setState(0xdef, 0x5cfa, 0x8ba0, 0xa904, 0x92d2, 0x3c42, 0x1, 0x0);
        gbc.writeMem(0xdef, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x5cfa);
        EXPECT(gbc.pc(), 0xdf1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0210
        gbc.setState(0x88a1, 0x76f3, 0x6930, 0xc823, 0xdcc0, 0xf655, 0x0, 0x0);
        gbc.writeMem(0x88a1, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x76f3);
        EXPECT(gbc.pc(), 0x88a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88a1), 0xcb);
        EXPECT(gbc.readMem(0x88a2), 0x2b);
        // CB 2B 0211
        gbc.setState(0x504c, 0xf8a1, 0xa280, 0x8c89, 0x759c, 0xfd4c, 0x0, 0x0);
        gbc.writeMem(0x504c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xf8a1);
        EXPECT(gbc.pc(), 0x504e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0212
        gbc.setState(0x4aa2, 0x43fa, 0x5140, 0x1afd, 0xbdbc, 0xdc9e, 0x0, 0x0);
        gbc.writeMem(0x4aa2, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x43fa);
        EXPECT(gbc.pc(), 0x4aa4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0213
        gbc.setState(0x4877, 0x787c, 0x3650, 0x4b5e, 0x44ff, 0x23f0, 0x1, 0x1);
        gbc.writeMem(0x4877, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x787c);
        EXPECT(gbc.pc(), 0x4879);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0214
        gbc.setState(0xb29b, 0xb06d, 0xa360, 0xcef3, 0x930c, 0xc679, 0x0, 0x0);
        gbc.writeMem(0xb29b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xb06d);
        EXPECT(gbc.pc(), 0xb29d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb29b), 0xcb);
        EXPECT(gbc.readMem(0xb29c), 0x2b);
        // CB 2B 0215
        gbc.setState(0x6db2, 0x2cd2, 0x22f0, 0x858b, 0xbe91, 0x2953, 0x0, 0x1);
        gbc.writeMem(0x6db2, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x2cd2);
        EXPECT(gbc.pc(), 0x6db4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0216
        gbc.setState(0x1623, 0x294e, 0x1490, 0x7b64, 0x86ee, 0xfa3, 0x1, 0x0);
        gbc.writeMem(0x1623, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x294e);
        EXPECT(gbc.pc(), 0x1625);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0217
        gbc.setState(0xdc61, 0x8641, 0xf910, 0x35e4, 0x22cb, 0x3c25, 0x0, 0x1);
        gbc.writeMem(0xdc61, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x8641);
        EXPECT(gbc.pc(), 0xdc63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc61), 0xcb);
        EXPECT(gbc.readMem(0xdc62), 0x2b);
        // CB 2B 0218
        gbc.setState(0x146b, 0xed1a, 0x7eb0, 0x10e2, 0x19be, 0xc33f, 0x0, 0x1);
        gbc.writeMem(0x146b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xed1a);
        EXPECT(gbc.pc(), 0x146d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0219
        gbc.setState(0x1552, 0x5bf9, 0xc6c0, 0xb255, 0xee8c, 0x3d25, 0x1, 0x0);
        gbc.writeMem(0x1552, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x5bf9);
        EXPECT(gbc.pc(), 0x1554);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 021A
        gbc.setState(0xde60, 0x5a4f, 0xc380, 0x1ca9, 0xcab, 0x954c, 0x0, 0x1);
        gbc.writeMem(0xde60, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x5a4f);
        EXPECT(gbc.pc(), 0xde62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde60), 0xcb);
        EXPECT(gbc.readMem(0xde61), 0x2b);
        // CB 2B 021B
        gbc.setState(0x9b51, 0x8505, 0x7760, 0x2a20, 0x18a0, 0xe974, 0x1, 0x0);
        gbc.writeMem(0x9b51, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x8505);
        EXPECT(gbc.pc(), 0x9b53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b51), 0xcb);
        EXPECT(gbc.readMem(0x9b52), 0x2b);
        // CB 2B 021C
        gbc.setState(0x7b07, 0x9442, 0x8650, 0x56ab, 0x80ad, 0xed60, 0x1, 0x1);
        gbc.writeMem(0x7b07, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x9442);
        EXPECT(gbc.pc(), 0x7b09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 021D
        gbc.setState(0xacd0, 0x1b6b, 0x65b0, 0x627, 0x3cd9, 0x1ece, 0x0, 0x0);
        gbc.writeMem(0xacd0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x1b6b);
        EXPECT(gbc.pc(), 0xacd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacd0), 0xcb);
        EXPECT(gbc.readMem(0xacd1), 0x2b);
        // CB 2B 021E
        gbc.setState(0xea3c, 0x743, 0xd280, 0xfcc6, 0x8dd6, 0xdbe0, 0x1, 0x1);
        gbc.writeMem(0xea3c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x743);
        EXPECT(gbc.pc(), 0xea3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea3c), 0xcb);
        EXPECT(gbc.readMem(0xea3d), 0x2b);
        // CB 2B 021F
        gbc.setState(0xe730, 0x9e95, 0x9560, 0xe2c, 0x6e2, 0xc7c9, 0x1, 0x0);
        gbc.writeMem(0xe730, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x9e95);
        EXPECT(gbc.pc(), 0xe732);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe730), 0xcb);
        EXPECT(gbc.readMem(0xe731), 0x2b);
        // CB 2B 0220
        gbc.setState(0x303f, 0x8cae, 0x8870, 0x740c, 0xd53f, 0xf7bb, 0x0, 0x0);
        gbc.writeMem(0x303f, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x8cae);
        EXPECT(gbc.pc(), 0x3041);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0221
        gbc.setState(0x8d74, 0xee2e, 0xd440, 0x2d91, 0xb913, 0x4593, 0x1, 0x0);
        gbc.writeMem(0x8d74, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xee2e);
        EXPECT(gbc.pc(), 0x8d76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d74), 0xcb);
        EXPECT(gbc.readMem(0x8d75), 0x2b);
        // CB 2B 0222
        gbc.setState(0x95c5, 0xfcd1, 0x83f0, 0x8bd7, 0x3b2, 0xf8fc, 0x1, 0x0);
        gbc.writeMem(0x95c5, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xfcd1);
        EXPECT(gbc.pc(), 0x95c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95c5), 0xcb);
        EXPECT(gbc.readMem(0x95c6), 0x2b);
        // CB 2B 0223
        gbc.setState(0xd480, 0x7825, 0xa70, 0x4fc4, 0x6ebf, 0x4977, 0x0, 0x0);
        gbc.writeMem(0xd480, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x7825);
        EXPECT(gbc.pc(), 0xd482);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd480), 0xcb);
        EXPECT(gbc.readMem(0xd481), 0x2b);
        // CB 2B 0224
        gbc.setState(0xb8fa, 0xb232, 0xc170, 0x31cd, 0xc0e9, 0xb793, 0x0, 0x0);
        gbc.writeMem(0xb8fa, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xb232);
        EXPECT(gbc.pc(), 0xb8fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8fa), 0xcb);
        EXPECT(gbc.readMem(0xb8fb), 0x2b);
        // CB 2B 0225
        gbc.setState(0x5fcf, 0x34a9, 0x1400, 0xe233, 0x63b3, 0xdde5, 0x0, 0x1);
        gbc.writeMem(0x5fcf, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x34a9);
        EXPECT(gbc.pc(), 0x5fd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0226
        gbc.setState(0x44ab, 0x774d, 0x4060, 0x601c, 0x1511, 0x15dd, 0x1, 0x1);
        gbc.writeMem(0x44ab, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x774d);
        EXPECT(gbc.pc(), 0x44ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0227
        gbc.setState(0x9363, 0x2f1d, 0x8e80, 0x2277, 0x895, 0xaeaf, 0x1, 0x1);
        gbc.writeMem(0x9363, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x2f1d);
        EXPECT(gbc.pc(), 0x9365);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9363), 0xcb);
        EXPECT(gbc.readMem(0x9364), 0x2b);
        // CB 2B 0228
        gbc.setState(0x2f8e, 0x163e, 0xcc20, 0xeb99, 0x996e, 0x28d6, 0x1, 0x1);
        gbc.writeMem(0x2f8e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x163e);
        EXPECT(gbc.pc(), 0x2f90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0229
        gbc.setState(0xaff5, 0xe022, 0xecf0, 0x4562, 0xb036, 0x9711, 0x1, 0x0);
        gbc.writeMem(0xaff5, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xe022);
        EXPECT(gbc.pc(), 0xaff7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaff5), 0xcb);
        EXPECT(gbc.readMem(0xaff6), 0x2b);
        // CB 2B 022A
        gbc.setState(0xca1, 0x69ca, 0xde80, 0x1058, 0x4916, 0xc5b8, 0x1, 0x1);
        gbc.writeMem(0xca1, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x69ca);
        EXPECT(gbc.pc(), 0xca3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 022B
        gbc.setState(0xc95, 0x62ae, 0x9f90, 0x2771, 0x4367, 0xb892, 0x0, 0x1);
        gbc.writeMem(0xc95, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x62ae);
        EXPECT(gbc.pc(), 0xc97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 022C
        gbc.setState(0x4041, 0xc7e1, 0xd5c0, 0xf933, 0x50bb, 0xb482, 0x1, 0x1);
        gbc.writeMem(0x4041, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xc7e1);
        EXPECT(gbc.pc(), 0x4043);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 022D
        gbc.setState(0xcb3d, 0x3308, 0x1850, 0x6b6, 0x5bad, 0xf69d, 0x1, 0x1);
        gbc.writeMem(0xcb3d, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x3308);
        EXPECT(gbc.pc(), 0xcb3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb3d), 0xcb);
        EXPECT(gbc.readMem(0xcb3e), 0x2b);
        // CB 2B 022E
        gbc.setState(0x8a79, 0xdde5, 0xb380, 0xf92d, 0xbdca, 0x5bd1, 0x1, 0x1);
        gbc.writeMem(0x8a79, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xdde5);
        EXPECT(gbc.pc(), 0x8a7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a79), 0xcb);
        EXPECT(gbc.readMem(0x8a7a), 0x2b);
        // CB 2B 022F
        gbc.setState(0xa187, 0x9283, 0xe250, 0x55ef, 0xde94, 0x6be8, 0x1, 0x1);
        gbc.writeMem(0xa187, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x9283);
        EXPECT(gbc.pc(), 0xa189);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa187), 0xcb);
        EXPECT(gbc.readMem(0xa188), 0x2b);
        // CB 2B 0231
        gbc.setState(0x4877, 0x3be0, 0x4f30, 0x4b25, 0x45a4, 0xe493, 0x1, 0x0);
        gbc.writeMem(0x4877, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x3be0);
        EXPECT(gbc.pc(), 0x4879);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0232
        gbc.setState(0x6cb4, 0x8eaa, 0x9dc0, 0x1988, 0x7868, 0x131a, 0x0, 0x0);
        gbc.writeMem(0x6cb4, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x8eaa);
        EXPECT(gbc.pc(), 0x6cb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0233
        gbc.setState(0xe037, 0x3c07, 0xa740, 0x42e2, 0x5a23, 0x9982, 0x1, 0x0);
        gbc.writeMem(0xe037, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x3c07);
        EXPECT(gbc.pc(), 0xe039);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe037), 0xcb);
        EXPECT(gbc.readMem(0xe038), 0x2b);
        // CB 2B 0234
        gbc.setState(0x2c3c, 0xff21, 0x1820, 0x315a, 0x48f5, 0x1974, 0x1, 0x0);
        gbc.writeMem(0x2c3c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xff21);
        EXPECT(gbc.pc(), 0x2c3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0235
        gbc.setState(0x318, 0x865d, 0x42a0, 0xd95f, 0x2b16, 0x862b, 0x1, 0x1);
        gbc.writeMem(0x318, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x865d);
        EXPECT(gbc.pc(), 0x31a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0236
        gbc.setState(0xae85, 0x6733, 0x2680, 0xf7f5, 0x1d93, 0x91aa, 0x1, 0x0);
        gbc.writeMem(0xae85, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x6733);
        EXPECT(gbc.pc(), 0xae87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae85), 0xcb);
        EXPECT(gbc.readMem(0xae86), 0x2b);
        // CB 2B 0238
        gbc.setState(0x56dc, 0x4693, 0x710, 0xed56, 0xe45a, 0xf25d, 0x1, 0x0);
        gbc.writeMem(0x56dc, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x4693);
        EXPECT(gbc.pc(), 0x56de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0239
        gbc.setState(0x647e, 0x9c7f, 0x47b0, 0xd43b, 0xe300, 0x67b6, 0x0, 0x1);
        gbc.writeMem(0x647e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x9c7f);
        EXPECT(gbc.pc(), 0x6480);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 023A
        gbc.setState(0xdabb, 0x236d, 0xeed0, 0xa1f6, 0xf6cf, 0xb449, 0x1, 0x1);
        gbc.writeMem(0xdabb, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x236d);
        EXPECT(gbc.pc(), 0xdabd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdabb), 0xcb);
        EXPECT(gbc.readMem(0xdabc), 0x2b);
        // CB 2B 023B
        gbc.setState(0x4a6e, 0x21e8, 0x6870, 0xd8c3, 0x9618, 0xe796, 0x0, 0x0);
        gbc.writeMem(0x4a6e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x21e8);
        EXPECT(gbc.pc(), 0x4a70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 023C
        gbc.setState(0x72ab, 0xdaa3, 0x4080, 0x45f2, 0x33de, 0x62d6, 0x0, 0x0);
        gbc.writeMem(0x72ab, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xdaa3);
        EXPECT(gbc.pc(), 0x72ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 023D
        gbc.setState(0x9df0, 0xa816, 0xcae0, 0x5384, 0x857, 0x4c2f, 0x0, 0x1);
        gbc.writeMem(0x9df0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xa816);
        EXPECT(gbc.pc(), 0x9df2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9df0), 0xcb);
        EXPECT(gbc.readMem(0x9df1), 0x2b);
        // CB 2B 023E
        gbc.setState(0x2e57, 0x5f2e, 0xd920, 0x8848, 0x4adf, 0xc4d4, 0x1, 0x0);
        gbc.writeMem(0x2e57, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x5f2e);
        EXPECT(gbc.pc(), 0x2e59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 023F
        gbc.setState(0x291d, 0xe8b7, 0x610, 0x7194, 0x37cd, 0x2019, 0x0, 0x1);
        gbc.writeMem(0x291d, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xe8b7);
        EXPECT(gbc.pc(), 0x291f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0240
        gbc.setState(0x3144, 0x1ccc, 0x71e0, 0x94a0, 0x46c8, 0xdabf, 0x0, 0x0);
        gbc.writeMem(0x3144, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x1ccc);
        EXPECT(gbc.pc(), 0x3146);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0241
        gbc.setState(0x9e13, 0x7f15, 0xc140, 0xac7a, 0x2ede, 0x412e, 0x1, 0x1);
        gbc.writeMem(0x9e13, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x7f15);
        EXPECT(gbc.pc(), 0x9e15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e13), 0xcb);
        EXPECT(gbc.readMem(0x9e14), 0x2b);
        // CB 2B 0242
        gbc.setState(0xa186, 0xbd1c, 0xab50, 0x6241, 0xb8ed, 0xd61a, 0x1, 0x0);
        gbc.writeMem(0xa186, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xbd1c);
        EXPECT(gbc.pc(), 0xa188);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa186), 0xcb);
        EXPECT(gbc.readMem(0xa187), 0x2b);
        // CB 2B 0243
        gbc.setState(0x69fd, 0x1385, 0x3240, 0xc42d, 0xa9d8, 0xd654, 0x1, 0x1);
        gbc.writeMem(0x69fd, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x1385);
        EXPECT(gbc.pc(), 0x69ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0245
        gbc.setState(0x6f97, 0x556d, 0xe0e0, 0x733c, 0xeb04, 0x73ee, 0x1, 0x1);
        gbc.writeMem(0x6f97, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x556d);
        EXPECT(gbc.pc(), 0x6f99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0246
        gbc.setState(0x8529, 0xdea1, 0x3970, 0x5e87, 0x86a, 0x5181, 0x0, 0x1);
        gbc.writeMem(0x8529, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xdea1);
        EXPECT(gbc.pc(), 0x852b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8529), 0xcb);
        EXPECT(gbc.readMem(0x852a), 0x2b);
        // CB 2B 0247
        gbc.setState(0x568b, 0x7996, 0x9650, 0x26bc, 0x7451, 0xcc86, 0x1, 0x1);
        gbc.writeMem(0x568b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x7996);
        EXPECT(gbc.pc(), 0x568d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0248
        gbc.setState(0x1d97, 0x8fc9, 0x360, 0x10ea, 0x75d8, 0xc1c4, 0x0, 0x1);
        gbc.writeMem(0x1d97, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x8fc9);
        EXPECT(gbc.pc(), 0x1d99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0249
        gbc.setState(0xe032, 0x243e, 0xf2f0, 0xbeb0, 0x40e2, 0x1f53, 0x0, 0x1);
        gbc.writeMem(0xe032, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x243e);
        EXPECT(gbc.pc(), 0xe034);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe032), 0xcb);
        EXPECT(gbc.readMem(0xe033), 0x2b);
        // CB 2B 024A
        gbc.setState(0xbe3d, 0xe57f, 0x7f10, 0x6126, 0xfeea, 0xdb08, 0x0, 0x1);
        gbc.writeMem(0xbe3d, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xe57f);
        EXPECT(gbc.pc(), 0xbe3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe3d), 0xcb);
        EXPECT(gbc.readMem(0xbe3e), 0x2b);
        // CB 2B 024C
        gbc.setState(0xe1, 0xf3e2, 0xc8a0, 0x6f9b, 0x25d, 0xdd38, 0x0, 0x0);
        gbc.writeMem(0xe1, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xf3e2);
        EXPECT(gbc.pc(), 0xe3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 024D
        gbc.setState(0x6d8d, 0x1d32, 0xf170, 0x3b8e, 0xf8b8, 0x2879, 0x0, 0x1);
        gbc.writeMem(0x6d8d, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x1d32);
        EXPECT(gbc.pc(), 0x6d8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 024F
        gbc.setState(0x53e6, 0x7d89, 0x6430, 0x27fe, 0xec2e, 0x6380, 0x0, 0x1);
        gbc.writeMem(0x53e6, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x7d89);
        EXPECT(gbc.pc(), 0x53e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0250
        gbc.setState(0x44e, 0xc8a, 0x8610, 0x4310, 0xbf2e, 0x1214, 0x0, 0x1);
        gbc.writeMem(0x44e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xc8a);
        EXPECT(gbc.pc(), 0x450);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0251
        gbc.setState(0xc631, 0x1ead, 0x5fd0, 0x99e0, 0x14a2, 0xbbf4, 0x0, 0x0);
        gbc.writeMem(0xc631, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x1ead);
        EXPECT(gbc.pc(), 0xc633);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc631), 0xcb);
        EXPECT(gbc.readMem(0xc632), 0x2b);
        // CB 2B 0252
        gbc.setState(0xcd7d, 0x9732, 0x4d60, 0xe19b, 0xff61, 0x9bce, 0x1, 0x1);
        gbc.writeMem(0xcd7d, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x9732);
        EXPECT(gbc.pc(), 0xcd7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd7d), 0xcb);
        EXPECT(gbc.readMem(0xcd7e), 0x2b);
        // CB 2B 0253
        gbc.setState(0xe6e8, 0x996c, 0x2610, 0xc03e, 0xf9cf, 0x4ea2, 0x0, 0x0);
        gbc.writeMem(0xe6e8, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x996c);
        EXPECT(gbc.pc(), 0xe6ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6e8), 0xcb);
        EXPECT(gbc.readMem(0xe6e9), 0x2b);
        // CB 2B 0254
        gbc.setState(0xe419, 0xb1c6, 0x7cc0, 0xddb5, 0x4e58, 0x8485, 0x0, 0x0);
        gbc.writeMem(0xe419, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xb1c6);
        EXPECT(gbc.pc(), 0xe41b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe419), 0xcb);
        EXPECT(gbc.readMem(0xe41a), 0x2b);
        // CB 2B 0255
        gbc.setState(0xbd21, 0x185, 0x2980, 0x20ab, 0xa31d, 0x9a29, 0x1, 0x1);
        gbc.writeMem(0xbd21, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x185);
        EXPECT(gbc.pc(), 0xbd23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd21), 0xcb);
        EXPECT(gbc.readMem(0xbd22), 0x2b);
        // CB 2B 0256
        gbc.setState(0x33d0, 0xfed, 0xd4b0, 0xeafc, 0x6057, 0x9145, 0x0, 0x0);
        gbc.writeMem(0x33d0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xfed);
        EXPECT(gbc.pc(), 0x33d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0257
        gbc.setState(0x866b, 0xaa6d, 0x4da0, 0xfa8b, 0xf219, 0x277e, 0x1, 0x0);
        gbc.writeMem(0x866b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xaa6d);
        EXPECT(gbc.pc(), 0x866d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x866b), 0xcb);
        EXPECT(gbc.readMem(0x866c), 0x2b);
        // CB 2B 0258
        gbc.setState(0x4d4d, 0x7d90, 0xb600, 0x7d8b, 0x2ab7, 0x66ea, 0x1, 0x1);
        gbc.writeMem(0x4d4d, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x7d90);
        EXPECT(gbc.pc(), 0x4d4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0259
        gbc.setState(0xa9b8, 0xea92, 0x8a20, 0x2b99, 0x17f6, 0x44b2, 0x1, 0x1);
        gbc.writeMem(0xa9b8, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xea92);
        EXPECT(gbc.pc(), 0xa9ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9b8), 0xcb);
        EXPECT(gbc.readMem(0xa9b9), 0x2b);
        // CB 2B 025A
        gbc.setState(0xa664, 0x573f, 0xccc0, 0xbd12, 0x1e07, 0x251, 0x0, 0x0);
        gbc.writeMem(0xa664, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x573f);
        EXPECT(gbc.pc(), 0xa666);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa664), 0xcb);
        EXPECT(gbc.readMem(0xa665), 0x2b);
        // CB 2B 025B
        gbc.setState(0x3a8d, 0x39c4, 0xa160, 0xd1ce, 0x53e8, 0x5101, 0x0, 0x1);
        gbc.writeMem(0x3a8d, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x39c4);
        EXPECT(gbc.pc(), 0x3a8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 025C
        gbc.setState(0x84e0, 0xb94c, 0x8570, 0x2177, 0xcda7, 0x12b1, 0x1, 0x0);
        gbc.writeMem(0x84e0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xb94c);
        EXPECT(gbc.pc(), 0x84e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84e0), 0xcb);
        EXPECT(gbc.readMem(0x84e1), 0x2b);
        // CB 2B 025D
        gbc.setState(0xaab0, 0xd09c, 0xcfb0, 0xc209, 0xa551, 0xdb4, 0x1, 0x0);
        gbc.writeMem(0xaab0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xd09c);
        EXPECT(gbc.pc(), 0xaab2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaab0), 0xcb);
        EXPECT(gbc.readMem(0xaab1), 0x2b);
        // CB 2B 025E
        gbc.setState(0xc760, 0xc89c, 0x3ab0, 0xf03, 0x8ee6, 0xdd25, 0x1, 0x1);
        gbc.writeMem(0xc760, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xc89c);
        EXPECT(gbc.pc(), 0xc762);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc760), 0xcb);
        EXPECT(gbc.readMem(0xc761), 0x2b);
        // CB 2B 0260
        gbc.setState(0x1768, 0xf6ea, 0x3e50, 0xef5f, 0x6143, 0xc877, 0x1, 0x0);
        gbc.writeMem(0x1768, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xf6ea);
        EXPECT(gbc.pc(), 0x176a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0261
        gbc.setState(0x2b94, 0xa7db, 0xf230, 0xdada, 0x4387, 0x7791, 0x0, 0x1);
        gbc.writeMem(0x2b94, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xa7db);
        EXPECT(gbc.pc(), 0x2b96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0262
        gbc.setState(0x618b, 0x9e3, 0x49a0, 0x59be, 0xe8aa, 0x5b2e, 0x1, 0x1);
        gbc.writeMem(0x618b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x9e3);
        EXPECT(gbc.pc(), 0x618d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0263
        gbc.setState(0x7bd, 0x384a, 0xb080, 0x9bc5, 0xe93f, 0xaae0, 0x1, 0x1);
        gbc.writeMem(0x7bd, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x384a);
        EXPECT(gbc.pc(), 0x7bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0264
        gbc.setState(0x18cf, 0xc9b8, 0xd6c0, 0x1963, 0x2621, 0x4e31, 0x1, 0x1);
        gbc.writeMem(0x18cf, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xc9b8);
        EXPECT(gbc.pc(), 0x18d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0265
        gbc.setState(0xd1d7, 0x645d, 0xa0a0, 0xb041, 0x70bf, 0xbcc9, 0x1, 0x1);
        gbc.writeMem(0xd1d7, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x645d);
        EXPECT(gbc.pc(), 0xd1d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1d7), 0xcb);
        EXPECT(gbc.readMem(0xd1d8), 0x2b);
        // CB 2B 0266
        gbc.setState(0x4f49, 0x1b8f, 0x53e0, 0xc961, 0xb663, 0x76f7, 0x0, 0x0);
        gbc.writeMem(0x4f49, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x1b8f);
        EXPECT(gbc.pc(), 0x4f4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0268
        gbc.setState(0x53e5, 0x13d1, 0x8b60, 0xefae, 0x5a87, 0xc4aa, 0x0, 0x0);
        gbc.writeMem(0x53e5, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x13d1);
        EXPECT(gbc.pc(), 0x53e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0269
        gbc.setState(0xdf14, 0xabe5, 0x8cb0, 0x7cbb, 0x7293, 0x3909, 0x0, 0x0);
        gbc.writeMem(0xdf14, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xabe5);
        EXPECT(gbc.pc(), 0xdf16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf14), 0xcb);
        EXPECT(gbc.readMem(0xdf15), 0x2b);
        // CB 2B 026A
        gbc.setState(0xd0e9, 0xfa76, 0x6c10, 0xd898, 0xd98f, 0x6d87, 0x0, 0x1);
        gbc.writeMem(0xd0e9, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xfa76);
        EXPECT(gbc.pc(), 0xd0eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0e9), 0xcb);
        EXPECT(gbc.readMem(0xd0ea), 0x2b);
        // CB 2B 026C
        gbc.setState(0x9c64, 0xa4c7, 0xa050, 0x4a76, 0x97f9, 0xdde1, 0x1, 0x0);
        gbc.writeMem(0x9c64, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xa4c7);
        EXPECT(gbc.pc(), 0x9c66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c64), 0xcb);
        EXPECT(gbc.readMem(0x9c65), 0x2b);
        // CB 2B 026D
        gbc.setState(0x52ab, 0x1cfc, 0xc4e0, 0x85f4, 0xfe7, 0x61a, 0x1, 0x0);
        gbc.writeMem(0x52ab, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x1cfc);
        EXPECT(gbc.pc(), 0x52ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 026E
        gbc.setState(0x8068, 0x1b55, 0x2560, 0xe504, 0x27e0, 0xa224, 0x0, 0x1);
        gbc.writeMem(0x8068, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x1b55);
        EXPECT(gbc.pc(), 0x806a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8068), 0xcb);
        EXPECT(gbc.readMem(0x8069), 0x2b);
        // CB 2B 026F
        gbc.setState(0xbd6a, 0x87e7, 0xe420, 0xe252, 0xa489, 0x4598, 0x1, 0x1);
        gbc.writeMem(0xbd6a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x87e7);
        EXPECT(gbc.pc(), 0xbd6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd6a), 0xcb);
        EXPECT(gbc.readMem(0xbd6b), 0x2b);
        // CB 2B 0270
        gbc.setState(0x166c, 0x5c66, 0x3360, 0xf32, 0xb0d1, 0x1ab6, 0x0, 0x0);
        gbc.writeMem(0x166c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x5c66);
        EXPECT(gbc.pc(), 0x166e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0271
        gbc.setState(0x527e, 0xf5f3, 0x47d0, 0x464, 0x6f1b, 0xc36, 0x1, 0x0);
        gbc.writeMem(0x527e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xf5f3);
        EXPECT(gbc.pc(), 0x5280);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0272
        gbc.setState(0xe9bc, 0x2bc, 0xecd0, 0xfa96, 0xfd6d, 0xf21b, 0x1, 0x0);
        gbc.writeMem(0xe9bc, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x2bc);
        EXPECT(gbc.pc(), 0xe9be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9bc), 0xcb);
        EXPECT(gbc.readMem(0xe9bd), 0x2b);
        // CB 2B 0273
        gbc.setState(0xdfec, 0xeb0b, 0x1530, 0x90d7, 0xd111, 0xa2e0, 0x1, 0x0);
        gbc.writeMem(0xdfec, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xeb0b);
        EXPECT(gbc.pc(), 0xdfee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfec), 0xcb);
        EXPECT(gbc.readMem(0xdfed), 0x2b);
        // CB 2B 0274
        gbc.setState(0xd71c, 0x7873, 0xbb50, 0xf10d, 0xc324, 0xc04e, 0x0, 0x1);
        gbc.writeMem(0xd71c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x7873);
        EXPECT(gbc.pc(), 0xd71e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd71c), 0xcb);
        EXPECT(gbc.readMem(0xd71d), 0x2b);
        // CB 2B 0275
        gbc.setState(0x4aa8, 0x9dec, 0x4210, 0x32c0, 0xf969, 0xe1b0, 0x1, 0x1);
        gbc.writeMem(0x4aa8, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x9dec);
        EXPECT(gbc.pc(), 0x4aaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0276
        gbc.setState(0xed40, 0xe727, 0xfbf0, 0xd50a, 0xc0a3, 0x7735, 0x1, 0x1);
        gbc.writeMem(0xed40, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xe727);
        EXPECT(gbc.pc(), 0xed42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed40), 0xcb);
        EXPECT(gbc.readMem(0xed41), 0x2b);
        // CB 2B 0277
        gbc.setState(0x62ec, 0x68c7, 0x9080, 0x4843, 0x8ad8, 0xbd31, 0x0, 0x1);
        gbc.writeMem(0x62ec, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x68c7);
        EXPECT(gbc.pc(), 0x62ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0278
        gbc.setState(0x9fe2, 0x93d2, 0x58b0, 0xc066, 0x36f3, 0x7258, 0x1, 0x1);
        gbc.writeMem(0x9fe2, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x93d2);
        EXPECT(gbc.pc(), 0x9fe4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fe2), 0xcb);
        EXPECT(gbc.readMem(0x9fe3), 0x2b);
        // CB 2B 0279
        gbc.setState(0x8350, 0x71f9, 0x33f0, 0x9cc, 0x8c46, 0x95b6, 0x1, 0x1);
        gbc.writeMem(0x8350, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x71f9);
        EXPECT(gbc.pc(), 0x8352);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8350), 0xcb);
        EXPECT(gbc.readMem(0x8351), 0x2b);
        // CB 2B 027A
        gbc.setState(0x58b6, 0x1bc2, 0xd700, 0xe0f0, 0x8e38, 0x4e8f, 0x0, 0x0);
        gbc.writeMem(0x58b6, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x1bc2);
        EXPECT(gbc.pc(), 0x58b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 027B
        gbc.setState(0x3979, 0x1910, 0x9760, 0x6d0, 0xf207, 0x79b8, 0x1, 0x0);
        gbc.writeMem(0x3979, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x1910);
        EXPECT(gbc.pc(), 0x397b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 027C
        gbc.setState(0x8e26, 0x276e, 0x17f0, 0xbd43, 0x35d, 0xe323, 0x0, 0x0);
        gbc.writeMem(0x8e26, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x276e);
        EXPECT(gbc.pc(), 0x8e28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e26), 0xcb);
        EXPECT(gbc.readMem(0x8e27), 0x2b);
        // CB 2B 027D
        gbc.setState(0x3930, 0xe5ba, 0x6430, 0xa8b9, 0xad43, 0x5e89, 0x0, 0x1);
        gbc.writeMem(0x3930, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xe5ba);
        EXPECT(gbc.pc(), 0x3932);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 027E
        gbc.setState(0x8728, 0x2fb6, 0x8b90, 0x8680, 0x99a9, 0x7715, 0x1, 0x1);
        gbc.writeMem(0x8728, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x2fb6);
        EXPECT(gbc.pc(), 0x872a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8728), 0xcb);
        EXPECT(gbc.readMem(0x8729), 0x2b);
        // CB 2B 027F
        gbc.setState(0xdd88, 0x2043, 0x87d0, 0x186, 0xf8ca, 0x33a9, 0x1, 0x1);
        gbc.writeMem(0xdd88, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x2043);
        EXPECT(gbc.pc(), 0xdd8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd88), 0xcb);
        EXPECT(gbc.readMem(0xdd89), 0x2b);
        // CB 2B 0280
        gbc.setState(0x7523, 0x390d, 0x1f80, 0xd99d, 0x74a0, 0x893, 0x0, 0x0);
        gbc.writeMem(0x7523, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x390d);
        EXPECT(gbc.pc(), 0x7525);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0281
        gbc.setState(0x924b, 0x6e24, 0x8be0, 0x9289, 0x72f1, 0x39fa, 0x1, 0x1);
        gbc.writeMem(0x924b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x6e24);
        EXPECT(gbc.pc(), 0x924d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x924b), 0xcb);
        EXPECT(gbc.readMem(0x924c), 0x2b);
        // CB 2B 0282
        gbc.setState(0x5e56, 0xec57, 0x1920, 0xce89, 0xfcef, 0xe964, 0x1, 0x0);
        gbc.writeMem(0x5e56, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xec57);
        EXPECT(gbc.pc(), 0x5e58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0283
        gbc.setState(0xa993, 0xd8a2, 0xa1e0, 0x40f0, 0x32a2, 0x7bf3, 0x1, 0x1);
        gbc.writeMem(0xa993, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xd8a2);
        EXPECT(gbc.pc(), 0xa995);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa993), 0xcb);
        EXPECT(gbc.readMem(0xa994), 0x2b);
        // CB 2B 0284
        gbc.setState(0x6f18, 0x4a17, 0x68c0, 0x5e51, 0x4ef0, 0x9014, 0x0, 0x0);
        gbc.writeMem(0x6f18, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x4a17);
        EXPECT(gbc.pc(), 0x6f1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0285
        gbc.setState(0xd5d8, 0x509b, 0x2720, 0x84e2, 0x73c5, 0xd25f, 0x1, 0x1);
        gbc.writeMem(0xd5d8, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x509b);
        EXPECT(gbc.pc(), 0xd5da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5d8), 0xcb);
        EXPECT(gbc.readMem(0xd5d9), 0x2b);
        // CB 2B 0286
        gbc.setState(0xd34f, 0x41b2, 0x5ef0, 0xdf4e, 0x94b, 0x6dd2, 0x1, 0x1);
        gbc.writeMem(0xd34f, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x41b2);
        EXPECT(gbc.pc(), 0xd351);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd34f), 0xcb);
        EXPECT(gbc.readMem(0xd350), 0x2b);
        // CB 2B 0287
        gbc.setState(0x7a40, 0xedc0, 0x3070, 0xf315, 0x449, 0x31bd, 0x1, 0x0);
        gbc.writeMem(0x7a40, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xedc0);
        EXPECT(gbc.pc(), 0x7a42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0288
        gbc.setState(0x8de1, 0x8990, 0xdd50, 0x727, 0x682f, 0x9829, 0x0, 0x0);
        gbc.writeMem(0x8de1, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x8990);
        EXPECT(gbc.pc(), 0x8de3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8de1), 0xcb);
        EXPECT(gbc.readMem(0x8de2), 0x2b);
        // CB 2B 0289
        gbc.setState(0x78c0, 0x7035, 0x21a0, 0x378f, 0xb139, 0x3114, 0x0, 0x1);
        gbc.writeMem(0x78c0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x7035);
        EXPECT(gbc.pc(), 0x78c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 028A
        gbc.setState(0x8e5f, 0xfbe, 0x6500, 0xa28a, 0x5667, 0xcbcc, 0x0, 0x0);
        gbc.writeMem(0x8e5f, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xfbe);
        EXPECT(gbc.pc(), 0x8e61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e5f), 0xcb);
        EXPECT(gbc.readMem(0x8e60), 0x2b);
        // CB 2B 028B
        gbc.setState(0x8e76, 0x7472, 0x6fa0, 0x849a, 0x1c0e, 0x8dbb, 0x1, 0x0);
        gbc.writeMem(0x8e76, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x7472);
        EXPECT(gbc.pc(), 0x8e78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e76), 0xcb);
        EXPECT(gbc.readMem(0x8e77), 0x2b);
        // CB 2B 028C
        gbc.setState(0xcbed, 0xecd2, 0x3b50, 0x60b3, 0xe4c4, 0xc54c, 0x1, 0x1);
        gbc.writeMem(0xcbed, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xecd2);
        EXPECT(gbc.pc(), 0xcbef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbed), 0xcb);
        EXPECT(gbc.readMem(0xcbee), 0x2b);
        // CB 2B 028D
        gbc.setState(0x8425, 0xf590, 0xcd50, 0x7caa, 0x465, 0x7456, 0x1, 0x1);
        gbc.writeMem(0x8425, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xf590);
        EXPECT(gbc.pc(), 0x8427);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8425), 0xcb);
        EXPECT(gbc.readMem(0x8426), 0x2b);
        // CB 2B 028E
        gbc.setState(0x1742, 0x279e, 0xcfa0, 0xfa18, 0x7394, 0x43d0, 0x0, 0x1);
        gbc.writeMem(0x1742, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x279e);
        EXPECT(gbc.pc(), 0x1744);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 028F
        gbc.setState(0xe1b4, 0x86c4, 0x7810, 0x40d4, 0xeeb, 0xbb9b, 0x0, 0x1);
        gbc.writeMem(0xe1b4, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x86c4);
        EXPECT(gbc.pc(), 0xe1b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1b4), 0xcb);
        EXPECT(gbc.readMem(0xe1b5), 0x2b);
        // CB 2B 0290
        gbc.setState(0x18c, 0xb3d1, 0xb220, 0xbab2, 0xf54f, 0x166b, 0x0, 0x1);
        gbc.writeMem(0x18c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xb3d1);
        EXPECT(gbc.pc(), 0x18e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0291
        gbc.setState(0xdefe, 0x8a9d, 0x76f0, 0xae4e, 0x5da, 0xb0f1, 0x0, 0x0);
        gbc.writeMem(0xdefe, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x8a9d);
        EXPECT(gbc.pc(), 0xdf00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdefe), 0xcb);
        EXPECT(gbc.readMem(0xdeff), 0x2b);
        // CB 2B 0292
        gbc.setState(0xc0a6, 0x6637, 0x7bc0, 0x68fd, 0x51a3, 0xcdce, 0x1, 0x1);
        gbc.writeMem(0xc0a6, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x6637);
        EXPECT(gbc.pc(), 0xc0a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0a6), 0xcb);
        EXPECT(gbc.readMem(0xc0a7), 0x2b);
        // CB 2B 0293
        gbc.setState(0x2080, 0x4ac2, 0xb70, 0x11e1, 0xdbbb, 0x41ca, 0x0, 0x0);
        gbc.writeMem(0x2080, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x4ac2);
        EXPECT(gbc.pc(), 0x2082);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0294
        gbc.setState(0xe929, 0x5611, 0x4cd0, 0xba5d, 0x1592, 0xda6e, 0x1, 0x1);
        gbc.writeMem(0xe929, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x5611);
        EXPECT(gbc.pc(), 0xe92b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe929), 0xcb);
        EXPECT(gbc.readMem(0xe92a), 0x2b);
        // CB 2B 0295
        gbc.setState(0xe48b, 0xf11f, 0x99d0, 0x72e8, 0xc39d, 0xfa61, 0x0, 0x1);
        gbc.writeMem(0xe48b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xf11f);
        EXPECT(gbc.pc(), 0xe48d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe48b), 0xcb);
        EXPECT(gbc.readMem(0xe48c), 0x2b);
        // CB 2B 0296
        gbc.setState(0x839, 0x4369, 0xc440, 0x7e52, 0x95a5, 0xca4c, 0x0, 0x1);
        gbc.writeMem(0x839, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x4369);
        EXPECT(gbc.pc(), 0x83b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0297
        gbc.setState(0xc455, 0x8176, 0xe3a0, 0xc267, 0xdbc5, 0x703a, 0x1, 0x0);
        gbc.writeMem(0xc455, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x8176);
        EXPECT(gbc.pc(), 0xc457);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc455), 0xcb);
        EXPECT(gbc.readMem(0xc456), 0x2b);
        // CB 2B 0298
        gbc.setState(0x6062, 0x6b95, 0x6960, 0x5884, 0xcf7c, 0x5aeb, 0x1, 0x0);
        gbc.writeMem(0x6062, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x6b95);
        EXPECT(gbc.pc(), 0x6064);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 029A
        gbc.setState(0x9f73, 0xb537, 0xbde0, 0xd41, 0xa766, 0x96bf, 0x0, 0x0);
        gbc.writeMem(0x9f73, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xb537);
        EXPECT(gbc.pc(), 0x9f75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f73), 0xcb);
        EXPECT(gbc.readMem(0x9f74), 0x2b);
        // CB 2B 029B
        gbc.setState(0x4a13, 0x8c69, 0xc620, 0xbceb, 0x131f, 0xbf65, 0x0, 0x0);
        gbc.writeMem(0x4a13, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x8c69);
        EXPECT(gbc.pc(), 0x4a15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 029C
        gbc.setState(0x2aa2, 0x5700, 0x720, 0x366c, 0x8ca8, 0x4e35, 0x1, 0x1);
        gbc.writeMem(0x2aa2, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x5700);
        EXPECT(gbc.pc(), 0x2aa4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 029D
        gbc.setState(0xc1df, 0x2926, 0x530, 0x8949, 0x446a, 0x17f2, 0x0, 0x0);
        gbc.writeMem(0xc1df, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x2926);
        EXPECT(gbc.pc(), 0xc1e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1df), 0xcb);
        EXPECT(gbc.readMem(0xc1e0), 0x2b);
        // CB 2B 029E
        gbc.setState(0xa5d7, 0x8590, 0xe720, 0x82d, 0xe6a7, 0x3e2a, 0x1, 0x0);
        gbc.writeMem(0xa5d7, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x8590);
        EXPECT(gbc.pc(), 0xa5d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5d7), 0xcb);
        EXPECT(gbc.readMem(0xa5d8), 0x2b);
        // CB 2B 02A0
        gbc.setState(0xcf27, 0x1978, 0xc960, 0xee4e, 0xb3ef, 0xf15f, 0x1, 0x1);
        gbc.writeMem(0xcf27, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x1978);
        EXPECT(gbc.pc(), 0xcf29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf27), 0xcb);
        EXPECT(gbc.readMem(0xcf28), 0x2b);
        // CB 2B 02A1
        gbc.setState(0x9472, 0xdbbd, 0x93e0, 0x5da0, 0x4933, 0xc73f, 0x0, 0x1);
        gbc.writeMem(0x9472, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xdbbd);
        EXPECT(gbc.pc(), 0x9474);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9472), 0xcb);
        EXPECT(gbc.readMem(0x9473), 0x2b);
        // CB 2B 02A2
        gbc.setState(0xbfa0, 0x8f16, 0x7400, 0x9fc4, 0xf1bb, 0x93da, 0x1, 0x0);
        gbc.writeMem(0xbfa0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x8f16);
        EXPECT(gbc.pc(), 0xbfa2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfa0), 0xcb);
        EXPECT(gbc.readMem(0xbfa1), 0x2b);
        // CB 2B 02A3
        gbc.setState(0x2639, 0x1ff1, 0xb5a0, 0x4d3e, 0xb51f, 0xba59, 0x0, 0x1);
        gbc.writeMem(0x2639, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x1ff1);
        EXPECT(gbc.pc(), 0x263b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 02A4
        gbc.setState(0xe6d8, 0x2f02, 0xaa00, 0x6078, 0xedba, 0x34de, 0x0, 0x0);
        gbc.writeMem(0xe6d8, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x2f02);
        EXPECT(gbc.pc(), 0xe6da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6d8), 0xcb);
        EXPECT(gbc.readMem(0xe6d9), 0x2b);
        // CB 2B 02A5
        gbc.setState(0x11ee, 0xe5c6, 0x2a00, 0x2c16, 0x3008, 0xa12, 0x1, 0x0);
        gbc.writeMem(0x11ee, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xe5c6);
        EXPECT(gbc.pc(), 0x11f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 02A6
        gbc.setState(0xdf63, 0x5ae0, 0x9280, 0x7128, 0x6720, 0x1147, 0x1, 0x1);
        gbc.writeMem(0xdf63, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x5ae0);
        EXPECT(gbc.pc(), 0xdf65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf63), 0xcb);
        EXPECT(gbc.readMem(0xdf64), 0x2b);
        // CB 2B 02A7
        gbc.setState(0x40d4, 0x14ac, 0xcde0, 0x99b3, 0x3ec0, 0x9da2, 0x0, 0x0);
        gbc.writeMem(0x40d4, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x14ac);
        EXPECT(gbc.pc(), 0x40d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 02A8
        gbc.setState(0x192, 0xdd5b, 0x960, 0x6775, 0xd962, 0xc8a1, 0x0, 0x0);
        gbc.writeMem(0x192, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xdd5b);
        EXPECT(gbc.pc(), 0x194);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 02A9
        gbc.setState(0xa559, 0xeeb3, 0xacb0, 0xfaba, 0x22eb, 0xb4e1, 0x1, 0x1);
        gbc.writeMem(0xa559, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xeeb3);
        EXPECT(gbc.pc(), 0xa55b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa559), 0xcb);
        EXPECT(gbc.readMem(0xa55a), 0x2b);
        // CB 2B 02AA
        gbc.setState(0xaea3, 0x2e57, 0x4a10, 0x7732, 0x487e, 0xdb42, 0x0, 0x1);
        gbc.writeMem(0xaea3, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x2e57);
        EXPECT(gbc.pc(), 0xaea5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaea3), 0xcb);
        EXPECT(gbc.readMem(0xaea4), 0x2b);
        // CB 2B 02AB
        gbc.setState(0x8d61, 0xe086, 0x9200, 0x55d4, 0xc1fa, 0xc7ba, 0x0, 0x0);
        gbc.writeMem(0x8d61, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xe086);
        EXPECT(gbc.pc(), 0x8d63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d61), 0xcb);
        EXPECT(gbc.readMem(0x8d62), 0x2b);
        // CB 2B 02AC
        gbc.setState(0x47f5, 0x7082, 0x5550, 0xd94c, 0x8855, 0x9cab, 0x1, 0x0);
        gbc.writeMem(0x47f5, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x7082);
        EXPECT(gbc.pc(), 0x47f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 02AE
        gbc.setState(0x6665, 0x390a, 0xb4e0, 0x3a01, 0xec26, 0x7e0b, 0x1, 0x0);
        gbc.writeMem(0x6665, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x390a);
        EXPECT(gbc.pc(), 0x6667);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 02AF
        gbc.setState(0x6a62, 0x9ce2, 0xf9d0, 0x75f, 0xab00, 0x8c07, 0x0, 0x0);
        gbc.writeMem(0x6a62, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x9ce2);
        EXPECT(gbc.pc(), 0x6a64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 02B0
        gbc.setState(0x109e, 0x475f, 0x3ab0, 0x17af, 0xef73, 0x7286, 0x1, 0x0);
        gbc.writeMem(0x109e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x475f);
        EXPECT(gbc.pc(), 0x10a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 02B1
        gbc.setState(0xc292, 0x655d, 0x1190, 0x7dff, 0xe551, 0xbd39, 0x1, 0x0);
        gbc.writeMem(0xc292, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x655d);
        EXPECT(gbc.pc(), 0xc294);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc292), 0xcb);
        EXPECT(gbc.readMem(0xc293), 0x2b);
        // CB 2B 02B2
        gbc.setState(0x8272, 0xf966, 0x67d0, 0xa6dd, 0x2136, 0xf093, 0x0, 0x1);
        gbc.writeMem(0x8272, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xf966);
        EXPECT(gbc.pc(), 0x8274);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8272), 0xcb);
        EXPECT(gbc.readMem(0x8273), 0x2b);
        // CB 2B 02B3
        gbc.setState(0xe20b, 0x2c34, 0x6a30, 0x9ff5, 0xb16d, 0x4f29, 0x0, 0x1);
        gbc.writeMem(0xe20b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x2c34);
        EXPECT(gbc.pc(), 0xe20d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe20b), 0xcb);
        EXPECT(gbc.readMem(0xe20c), 0x2b);
        // CB 2B 02B4
        gbc.setState(0xd965, 0x3c06, 0x5800, 0x74bb, 0xbef, 0x44c0, 0x1, 0x0);
        gbc.writeMem(0xd965, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x3c06);
        EXPECT(gbc.pc(), 0xd967);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd965), 0xcb);
        EXPECT(gbc.readMem(0xd966), 0x2b);
        // CB 2B 02B5
        gbc.setState(0xc07e, 0x9e59, 0x45a0, 0xf838, 0x3cb2, 0xf545, 0x1, 0x1);
        gbc.writeMem(0xc07e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x9e59);
        EXPECT(gbc.pc(), 0xc080);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc07e), 0xcb);
        EXPECT(gbc.readMem(0xc07f), 0x2b);
        // CB 2B 02B6
        gbc.setState(0x9685, 0x9907, 0x99d0, 0xd28a, 0xb3f7, 0x85bd, 0x0, 0x1);
        gbc.writeMem(0x9685, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x9907);
        EXPECT(gbc.pc(), 0x9687);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9685), 0xcb);
        EXPECT(gbc.readMem(0x9686), 0x2b);
        // CB 2B 02B7
        gbc.setState(0x2f5, 0x556c, 0xa1e0, 0xad8c, 0xd159, 0xb18d, 0x1, 0x0);
        gbc.writeMem(0x2f5, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x556c);
        EXPECT(gbc.pc(), 0x2f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 02B8
        gbc.setState(0xba48, 0x7f40, 0xd710, 0x5e12, 0xab85, 0x8cb6, 0x0, 0x1);
        gbc.writeMem(0xba48, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x7f40);
        EXPECT(gbc.pc(), 0xba4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba48), 0xcb);
        EXPECT(gbc.readMem(0xba49), 0x2b);
        // CB 2B 02B9
        gbc.setState(0x9561, 0xd66b, 0xfd30, 0x8e9d, 0x2783, 0x4880, 0x0, 0x1);
        gbc.writeMem(0x9561, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xd66b);
        EXPECT(gbc.pc(), 0x9563);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9561), 0xcb);
        EXPECT(gbc.readMem(0x9562), 0x2b);
        // CB 2B 02BA
        gbc.setState(0x9a2e, 0x342d, 0x9f00, 0xe762, 0x1f52, 0x789a, 0x0, 0x0);
        gbc.writeMem(0x9a2e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x342d);
        EXPECT(gbc.pc(), 0x9a30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a2e), 0xcb);
        EXPECT(gbc.readMem(0x9a2f), 0x2b);
        // CB 2B 02BB
        gbc.setState(0xe23d, 0xbc8a, 0xcc70, 0x4b8b, 0xa807, 0x29bc, 0x1, 0x1);
        gbc.writeMem(0xe23d, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xbc8a);
        EXPECT(gbc.pc(), 0xe23f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe23d), 0xcb);
        EXPECT(gbc.readMem(0xe23e), 0x2b);
        // CB 2B 02BC
        gbc.setState(0x9f6a, 0xc9c, 0xac00, 0x48cb, 0x2c4b, 0x9272, 0x0, 0x1);
        gbc.writeMem(0x9f6a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xc9c);
        EXPECT(gbc.pc(), 0x9f6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f6a), 0xcb);
        EXPECT(gbc.readMem(0x9f6b), 0x2b);
        // CB 2B 02BD
        gbc.setState(0x4dd2, 0xb4e3, 0xe8f0, 0x5f16, 0x3af3, 0x473c, 0x0, 0x1);
        gbc.writeMem(0x4dd2, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xb4e3);
        EXPECT(gbc.pc(), 0x4dd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 02BE
        gbc.setState(0x5171, 0xb197, 0x820, 0x5900, 0x1722, 0x1f43, 0x1, 0x1);
        gbc.writeMem(0x5171, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xb197);
        EXPECT(gbc.pc(), 0x5173);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 02BF
        gbc.setState(0xda3e, 0xcf63, 0x6d0, 0xd343, 0x4b34, 0x37ab, 0x1, 0x1);
        gbc.writeMem(0xda3e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xcf63);
        EXPECT(gbc.pc(), 0xda40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda3e), 0xcb);
        EXPECT(gbc.readMem(0xda3f), 0x2b);
        // CB 2B 02C0
        gbc.setState(0x1846, 0x9a0b, 0x5060, 0xcff3, 0x7d46, 0x377, 0x0, 0x1);
        gbc.writeMem(0x1846, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x9a0b);
        EXPECT(gbc.pc(), 0x1848);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 02C1
        gbc.setState(0xeb93, 0x7c93, 0x83d0, 0x503, 0x53f9, 0x308d, 0x1, 0x0);
        gbc.writeMem(0xeb93, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x7c93);
        EXPECT(gbc.pc(), 0xeb95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb93), 0xcb);
        EXPECT(gbc.readMem(0xeb94), 0x2b);
        // CB 2B 02C2
        gbc.setState(0xe4b9, 0xf9a8, 0x9450, 0x970b, 0x759, 0x707b, 0x0, 0x0);
        gbc.writeMem(0xe4b9, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xf9a8);
        EXPECT(gbc.pc(), 0xe4bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4b9), 0xcb);
        EXPECT(gbc.readMem(0xe4ba), 0x2b);
        // CB 2B 02C3
        gbc.setState(0x8415, 0x6f93, 0xafa0, 0xfd2b, 0x1a60, 0xdf23, 0x1, 0x0);
        gbc.writeMem(0x8415, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x6f93);
        EXPECT(gbc.pc(), 0x8417);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8415), 0xcb);
        EXPECT(gbc.readMem(0x8416), 0x2b);
        // CB 2B 02C4
        gbc.setState(0x3aa9, 0x18f9, 0x3b90, 0x5c6c, 0x57b6, 0x86bf, 0x0, 0x1);
        gbc.writeMem(0x3aa9, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x18f9);
        EXPECT(gbc.pc(), 0x3aab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 02C5
        gbc.setState(0xce93, 0xbd4c, 0x3d60, 0xac83, 0x8fe6, 0xa1b7, 0x0, 0x1);
        gbc.writeMem(0xce93, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xbd4c);
        EXPECT(gbc.pc(), 0xce95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce93), 0xcb);
        EXPECT(gbc.readMem(0xce94), 0x2b);
        // CB 2B 02C6
        gbc.setState(0xe764, 0x73e6, 0x5c10, 0x132d, 0xb09c, 0xf1ff, 0x1, 0x1);
        gbc.writeMem(0xe764, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x73e6);
        EXPECT(gbc.pc(), 0xe766);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe764), 0xcb);
        EXPECT(gbc.readMem(0xe765), 0x2b);
        // CB 2B 02C7
        gbc.setState(0x8de9, 0x3000, 0xfda0, 0xa00b, 0x27ac, 0x6226, 0x1, 0x0);
        gbc.writeMem(0x8de9, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x3000);
        EXPECT(gbc.pc(), 0x8deb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8de9), 0xcb);
        EXPECT(gbc.readMem(0x8dea), 0x2b);
        // CB 2B 02C8
        gbc.setState(0x287b, 0x4b2f, 0x640, 0x8fa7, 0xbf1e, 0x66f, 0x1, 0x1);
        gbc.writeMem(0x287b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x4b2f);
        EXPECT(gbc.pc(), 0x287d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 02C9
        gbc.setState(0xc5aa, 0x24bb, 0x1500, 0x3e6, 0x4be4, 0xd650, 0x1, 0x1);
        gbc.writeMem(0xc5aa, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x24bb);
        EXPECT(gbc.pc(), 0xc5ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5aa), 0xcb);
        EXPECT(gbc.readMem(0xc5ab), 0x2b);
        // CB 2B 02CA
        gbc.setState(0x3027, 0x2942, 0x9400, 0xf8aa, 0x6fd4, 0xcf17, 0x1, 0x1);
        gbc.writeMem(0x3027, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x2942);
        EXPECT(gbc.pc(), 0x3029);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 02CB
        gbc.setState(0x5036, 0x63d2, 0x66e0, 0xe1b9, 0xe829, 0xa655, 0x0, 0x1);
        gbc.writeMem(0x5036, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x63d2);
        EXPECT(gbc.pc(), 0x5038);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 02CC
        gbc.setState(0x5459, 0xc529, 0xb00, 0x5631, 0xd0e, 0x41e9, 0x1, 0x1);
        gbc.writeMem(0x5459, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xc529);
        EXPECT(gbc.pc(), 0x545b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 02CD
        gbc.setState(0xde05, 0xb62f, 0x79a0, 0x321d, 0xa242, 0x5864, 0x1, 0x1);
        gbc.writeMem(0xde05, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xb62f);
        EXPECT(gbc.pc(), 0xde07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde05), 0xcb);
        EXPECT(gbc.readMem(0xde06), 0x2b);
        // CB 2B 02CF
        gbc.setState(0x2753, 0xd13b, 0x8bb0, 0x570e, 0xe2b9, 0xda7a, 0x1, 0x0);
        gbc.writeMem(0x2753, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xd13b);
        EXPECT(gbc.pc(), 0x2755);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 02D0
        gbc.setState(0xa13e, 0x9e8c, 0x56c0, 0xe234, 0x5498, 0x34a5, 0x1, 0x1);
        gbc.writeMem(0xa13e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x9e8c);
        EXPECT(gbc.pc(), 0xa140);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa13e), 0xcb);
        EXPECT(gbc.readMem(0xa13f), 0x2b);
        // CB 2B 02D1
        gbc.setState(0x1156, 0x6ec6, 0xe240, 0x3098, 0x4a2f, 0x6e44, 0x1, 0x0);
        gbc.writeMem(0x1156, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x6ec6);
        EXPECT(gbc.pc(), 0x1158);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 02D2
        gbc.setState(0x3477, 0xf536, 0xf5d0, 0x9116, 0x7482, 0x8fa9, 0x1, 0x1);
        gbc.writeMem(0x3477, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xf536);
        EXPECT(gbc.pc(), 0x3479);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 02D3
        gbc.setState(0x90d2, 0x1a22, 0xca90, 0x64fb, 0x4b1f, 0x2710, 0x0, 0x1);
        gbc.writeMem(0x90d2, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x1a22);
        EXPECT(gbc.pc(), 0x90d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90d2), 0xcb);
        EXPECT(gbc.readMem(0x90d3), 0x2b);
        // CB 2B 02D4
        gbc.setState(0xcece, 0xe87a, 0x28f0, 0x6149, 0xfcd1, 0x238e, 0x0, 0x0);
        gbc.writeMem(0xcece, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xe87a);
        EXPECT(gbc.pc(), 0xced0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcece), 0xcb);
        EXPECT(gbc.readMem(0xcecf), 0x2b);
        // CB 2B 02D5
        gbc.setState(0x7730, 0x8a2c, 0x1240, 0x679e, 0xe60c, 0xaa0c, 0x0, 0x1);
        gbc.writeMem(0x7730, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x8a2c);
        EXPECT(gbc.pc(), 0x7732);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 02D6
        gbc.setState(0x2bc3, 0xa0d5, 0xe590, 0x54fe, 0x436c, 0x2c02, 0x0, 0x1);
        gbc.writeMem(0x2bc3, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xa0d5);
        EXPECT(gbc.pc(), 0x2bc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 02D7
        gbc.setState(0x43fc, 0x3f56, 0xfcd0, 0x625d, 0x5424, 0xc2fa, 0x1, 0x1);
        gbc.writeMem(0x43fc, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x3f56);
        EXPECT(gbc.pc(), 0x43fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 02D8
        gbc.setState(0x9dba, 0x6827, 0x4540, 0x2bfc, 0xdf6c, 0x6a73, 0x1, 0x1);
        gbc.writeMem(0x9dba, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x6827);
        EXPECT(gbc.pc(), 0x9dbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dba), 0xcb);
        EXPECT(gbc.readMem(0x9dbb), 0x2b);
        // CB 2B 02D9
        gbc.setState(0x13b8, 0xaa19, 0xeab0, 0x6c38, 0x3e3b, 0x9eb3, 0x0, 0x1);
        gbc.writeMem(0x13b8, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xaa19);
        EXPECT(gbc.pc(), 0x13ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 02DA
        gbc.setState(0x88c8, 0x73fe, 0x44f0, 0x1138, 0x638e, 0xf65b, 0x1, 0x0);
        gbc.writeMem(0x88c8, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x73fe);
        EXPECT(gbc.pc(), 0x88ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88c8), 0xcb);
        EXPECT(gbc.readMem(0x88c9), 0x2b);
        // CB 2B 02DB
        gbc.setState(0xe25e, 0x81c4, 0xf0, 0xbaf1, 0xfb2b, 0x7eef, 0x1, 0x1);
        gbc.writeMem(0xe25e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x81c4);
        EXPECT(gbc.pc(), 0xe260);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe25e), 0xcb);
        EXPECT(gbc.readMem(0xe25f), 0x2b);
        // CB 2B 02DC
        gbc.setState(0x90da, 0x4cad, 0x2c90, 0x1f92, 0x569f, 0x29ea, 0x1, 0x0);
        gbc.writeMem(0x90da, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x4cad);
        EXPECT(gbc.pc(), 0x90dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90da), 0xcb);
        EXPECT(gbc.readMem(0x90db), 0x2b);
        // CB 2B 02DD
        gbc.setState(0x4dce, 0x490b, 0xaf0, 0xbaa9, 0x3c5b, 0x829c, 0x0, 0x0);
        gbc.writeMem(0x4dce, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x490b);
        EXPECT(gbc.pc(), 0x4dd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 02DE
        gbc.setState(0xb17c, 0x68e2, 0xaac0, 0x254c, 0x1ab3, 0x358d, 0x1, 0x0);
        gbc.writeMem(0xb17c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x68e2);
        EXPECT(gbc.pc(), 0xb17e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb17c), 0xcb);
        EXPECT(gbc.readMem(0xb17d), 0x2b);
        // CB 2B 02DF
        gbc.setState(0x657c, 0x15a8, 0xbbc0, 0x6633, 0xfb46, 0xaf11, 0x0, 0x0);
        gbc.writeMem(0x657c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x15a8);
        EXPECT(gbc.pc(), 0x657e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 02E0
        gbc.setState(0xb85a, 0xa0f3, 0x8fb0, 0x9b3c, 0x45f7, 0x4dc5, 0x1, 0x1);
        gbc.writeMem(0xb85a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xa0f3);
        EXPECT(gbc.pc(), 0xb85c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb85a), 0xcb);
        EXPECT(gbc.readMem(0xb85b), 0x2b);
        // CB 2B 02E1
        gbc.setState(0xcbb0, 0x791e, 0x8e0, 0xc52c, 0x3998, 0x20fc, 0x0, 0x1);
        gbc.writeMem(0xcbb0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x791e);
        EXPECT(gbc.pc(), 0xcbb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbb0), 0xcb);
        EXPECT(gbc.readMem(0xcbb1), 0x2b);
        // CB 2B 02E2
        gbc.setState(0x14e3, 0x6274, 0x7660, 0xc0c3, 0x3ca5, 0xe2ec, 0x0, 0x1);
        gbc.writeMem(0x14e3, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x6274);
        EXPECT(gbc.pc(), 0x14e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 02E3
        gbc.setState(0xb328, 0x6212, 0xf440, 0x3512, 0xacb5, 0xb6ee, 0x1, 0x1);
        gbc.writeMem(0xb328, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x6212);
        EXPECT(gbc.pc(), 0xb32a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb328), 0xcb);
        EXPECT(gbc.readMem(0xb329), 0x2b);
        // CB 2B 02E4
        gbc.setState(0x2122, 0xe4e8, 0x4c0, 0xac3e, 0x185f, 0xb7f8, 0x0, 0x1);
        gbc.writeMem(0x2122, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xe4e8);
        EXPECT(gbc.pc(), 0x2124);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 02E5
        gbc.setState(0x13c9, 0xb9e2, 0x5480, 0x12f7, 0xff54, 0x6376, 0x1, 0x0);
        gbc.writeMem(0x13c9, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xb9e2);
        EXPECT(gbc.pc(), 0x13cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 02E6
        gbc.setState(0x3ae9, 0xaefc, 0x6f60, 0xfeef, 0x9242, 0xba4a, 0x1, 0x1);
        gbc.writeMem(0x3ae9, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xaefc);
        EXPECT(gbc.pc(), 0x3aeb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 02E9
        gbc.setState(0xdccc, 0x9487, 0xfb80, 0x3e74, 0x4417, 0xf626, 0x1, 0x1);
        gbc.writeMem(0xdccc, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x9487);
        EXPECT(gbc.pc(), 0xdcce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdccc), 0xcb);
        EXPECT(gbc.readMem(0xdccd), 0x2b);
        // CB 2B 02EA
        gbc.setState(0x9357, 0x16d1, 0xd070, 0x1735, 0x48be, 0x3751, 0x0, 0x1);
        gbc.writeMem(0x9357, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x16d1);
        EXPECT(gbc.pc(), 0x9359);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9357), 0xcb);
        EXPECT(gbc.readMem(0x9358), 0x2b);
        // CB 2B 02EB
        gbc.setState(0x1cf4, 0x709f, 0xe8d0, 0xe4d9, 0xccca, 0xae4d, 0x0, 0x1);
        gbc.writeMem(0x1cf4, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x709f);
        EXPECT(gbc.pc(), 0x1cf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 02EC
        gbc.setState(0xd9e0, 0x4d6b, 0x13d0, 0x9988, 0x3624, 0x8c38, 0x0, 0x0);
        gbc.writeMem(0xd9e0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x4d6b);
        EXPECT(gbc.pc(), 0xd9e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9e0), 0xcb);
        EXPECT(gbc.readMem(0xd9e1), 0x2b);
        // CB 2B 02ED
        gbc.setState(0x5414, 0x2305, 0xfaf0, 0x4380, 0x5b95, 0xdbb8, 0x0, 0x0);
        gbc.writeMem(0x5414, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x2305);
        EXPECT(gbc.pc(), 0x5416);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 02EE
        gbc.setState(0xa6e2, 0xc243, 0x86a0, 0x1ac, 0xb3ba, 0x68a0, 0x0, 0x1);
        gbc.writeMem(0xa6e2, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xc243);
        EXPECT(gbc.pc(), 0xa6e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6e2), 0xcb);
        EXPECT(gbc.readMem(0xa6e3), 0x2b);
        // CB 2B 02EF
        gbc.setState(0xb5a8, 0xbc5a, 0xada0, 0x4ca3, 0x44e6, 0x59a9, 0x1, 0x1);
        gbc.writeMem(0xb5a8, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xbc5a);
        EXPECT(gbc.pc(), 0xb5aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5a8), 0xcb);
        EXPECT(gbc.readMem(0xb5a9), 0x2b);
        // CB 2B 02F0
        gbc.setState(0x3c13, 0x6b6c, 0x5ca0, 0x3f22, 0xb116, 0x9bd8, 0x1, 0x1);
        gbc.writeMem(0x3c13, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x6b6c);
        EXPECT(gbc.pc(), 0x3c15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 02F1
        gbc.setState(0x1e43, 0x6732, 0xcd60, 0x637a, 0xb193, 0x2ec7, 0x1, 0x0);
        gbc.writeMem(0x1e43, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x6732);
        EXPECT(gbc.pc(), 0x1e45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 02F2
        gbc.setState(0x1374, 0xa5f2, 0xfbb0, 0xdc04, 0x2504, 0x949c, 0x0, 0x1);
        gbc.writeMem(0x1374, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xa5f2);
        EXPECT(gbc.pc(), 0x1376);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 02F3
        gbc.setState(0x510, 0x8ab8, 0x2c60, 0x7774, 0x1644, 0x45d6, 0x0, 0x0);
        gbc.writeMem(0x510, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x8ab8);
        EXPECT(gbc.pc(), 0x512);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 02F4
        gbc.setState(0xdb3c, 0xd3ff, 0xfc10, 0x15be, 0x7870, 0xdc6a, 0x0, 0x0);
        gbc.writeMem(0xdb3c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xd3ff);
        EXPECT(gbc.pc(), 0xdb3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb3c), 0xcb);
        EXPECT(gbc.readMem(0xdb3d), 0x2b);
        // CB 2B 02F5
        gbc.setState(0x9bee, 0xb5ea, 0x8c40, 0x6ba1, 0x685b, 0xdba5, 0x1, 0x1);
        gbc.writeMem(0x9bee, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xb5ea);
        EXPECT(gbc.pc(), 0x9bf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bee), 0xcb);
        EXPECT(gbc.readMem(0x9bef), 0x2b);
        // CB 2B 02F6
        gbc.setState(0x9af0, 0x6306, 0x76d0, 0x38be, 0x364b, 0x3598, 0x0, 0x1);
        gbc.writeMem(0x9af0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x6306);
        EXPECT(gbc.pc(), 0x9af2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9af0), 0xcb);
        EXPECT(gbc.readMem(0x9af1), 0x2b);
        // CB 2B 02F7
        gbc.setState(0x302e, 0xad19, 0x9bd0, 0x22e2, 0xb649, 0xd824, 0x1, 0x1);
        gbc.writeMem(0x302e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xad19);
        EXPECT(gbc.pc(), 0x3030);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 02F8
        gbc.setState(0x2db8, 0x400c, 0xf2d0, 0xb195, 0x59ff, 0x2088, 0x1, 0x1);
        gbc.writeMem(0x2db8, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x400c);
        EXPECT(gbc.pc(), 0x2dba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 02F9
        gbc.setState(0x2fd0, 0x7420, 0x5600, 0xbb09, 0x7aaa, 0x715c, 0x1, 0x1);
        gbc.writeMem(0x2fd0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x7420);
        EXPECT(gbc.pc(), 0x2fd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 02FA
        gbc.setState(0xd4fe, 0x8f06, 0xb0, 0x23fe, 0xabd9, 0x959b, 0x0, 0x1);
        gbc.writeMem(0xd4fe, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x8f06);
        EXPECT(gbc.pc(), 0xd500);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4fe), 0xcb);
        EXPECT(gbc.readMem(0xd4ff), 0x2b);
        // CB 2B 02FB
        gbc.setState(0x4b9, 0xeeb8, 0x7220, 0xd8ea, 0x8e62, 0xc128, 0x1, 0x1);
        gbc.writeMem(0x4b9, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xeeb8);
        EXPECT(gbc.pc(), 0x4bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 02FC
        gbc.setState(0x55c3, 0x4c96, 0x2160, 0xe29c, 0x5601, 0x255d, 0x1, 0x0);
        gbc.writeMem(0x55c3, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x4c96);
        EXPECT(gbc.pc(), 0x55c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 02FD
        gbc.setState(0xa514, 0xea3d, 0xc0a0, 0xd9de, 0xf469, 0x1726, 0x1, 0x1);
        gbc.writeMem(0xa514, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xea3d);
        EXPECT(gbc.pc(), 0xa516);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa514), 0xcb);
        EXPECT(gbc.readMem(0xa515), 0x2b);
        // CB 2B 02FE
        gbc.setState(0x8956, 0x4297, 0x5850, 0xa173, 0x72db, 0x51c9, 0x0, 0x1);
        gbc.writeMem(0x8956, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x4297);
        EXPECT(gbc.pc(), 0x8958);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8956), 0xcb);
        EXPECT(gbc.readMem(0x8957), 0x2b);
        // CB 2B 02FF
        gbc.setState(0x6e63, 0x6d6d, 0xdd70, 0xd18a, 0x88a7, 0x5fd9, 0x0, 0x0);
        gbc.writeMem(0x6e63, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x6d6d);
        EXPECT(gbc.pc(), 0x6e65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0300
        gbc.setState(0x9d3b, 0x4a32, 0x7410, 0x72ca, 0x262b, 0xeb64, 0x1, 0x0);
        gbc.writeMem(0x9d3b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x4a32);
        EXPECT(gbc.pc(), 0x9d3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d3b), 0xcb);
        EXPECT(gbc.readMem(0x9d3c), 0x2b);
        // CB 2B 0301
        gbc.setState(0x3873, 0x99d1, 0x5e30, 0xd96c, 0xf6ab, 0x34e2, 0x1, 0x0);
        gbc.writeMem(0x3873, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x99d1);
        EXPECT(gbc.pc(), 0x3875);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0302
        gbc.setState(0x24b1, 0x4ab8, 0x9f50, 0xf382, 0xd488, 0xcf8, 0x0, 0x1);
        gbc.writeMem(0x24b1, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x4ab8);
        EXPECT(gbc.pc(), 0x24b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0303
        gbc.setState(0xb70a, 0x269f, 0xa620, 0x3f3d, 0xbd3a, 0x3f0f, 0x1, 0x1);
        gbc.writeMem(0xb70a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x269f);
        EXPECT(gbc.pc(), 0xb70c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb70a), 0xcb);
        EXPECT(gbc.readMem(0xb70b), 0x2b);
        // CB 2B 0304
        gbc.setState(0xda93, 0x2ab3, 0xe9e0, 0x2ae0, 0xb00f, 0xfbe, 0x1, 0x1);
        gbc.writeMem(0xda93, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x2ab3);
        EXPECT(gbc.pc(), 0xda95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda93), 0xcb);
        EXPECT(gbc.readMem(0xda94), 0x2b);
        // CB 2B 0305
        gbc.setState(0x9960, 0x3b18, 0xf70, 0x7c42, 0xd003, 0xb197, 0x0, 0x0);
        gbc.writeMem(0x9960, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x3b18);
        EXPECT(gbc.pc(), 0x9962);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9960), 0xcb);
        EXPECT(gbc.readMem(0x9961), 0x2b);
        // CB 2B 0306
        gbc.setState(0xcaea, 0x96b4, 0x2dc0, 0x202b, 0x3310, 0x3867, 0x0, 0x0);
        gbc.writeMem(0xcaea, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x96b4);
        EXPECT(gbc.pc(), 0xcaec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcaea), 0xcb);
        EXPECT(gbc.readMem(0xcaeb), 0x2b);
        // CB 2B 0307
        gbc.setState(0xbd59, 0xfeb1, 0x5c50, 0xe90d, 0xa3ff, 0x5da2, 0x0, 0x0);
        gbc.writeMem(0xbd59, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xfeb1);
        EXPECT(gbc.pc(), 0xbd5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd59), 0xcb);
        EXPECT(gbc.readMem(0xbd5a), 0x2b);
        // CB 2B 0308
        gbc.setState(0x47a6, 0xbca, 0xc0d0, 0xc153, 0xcfe, 0x28f0, 0x0, 0x0);
        gbc.writeMem(0x47a6, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xbca);
        EXPECT(gbc.pc(), 0x47a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0309
        gbc.setState(0xa4f0, 0x5496, 0x6b20, 0x33cb, 0xaef0, 0xd61b, 0x0, 0x1);
        gbc.writeMem(0xa4f0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x5496);
        EXPECT(gbc.pc(), 0xa4f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4f0), 0xcb);
        EXPECT(gbc.readMem(0xa4f1), 0x2b);
        // CB 2B 030A
        gbc.setState(0xe51e, 0x3249, 0x1a60, 0xfb8f, 0x7fad, 0x50a3, 0x0, 0x1);
        gbc.writeMem(0xe51e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x3249);
        EXPECT(gbc.pc(), 0xe520);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe51e), 0xcb);
        EXPECT(gbc.readMem(0xe51f), 0x2b);
        // CB 2B 030B
        gbc.setState(0xcbcb, 0x7490, 0x3bf0, 0x2c0b, 0x6c89, 0xb904, 0x1, 0x1);
        gbc.writeMem(0xcbcb, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x7490);
        EXPECT(gbc.pc(), 0xcbcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbcb), 0xcb);
        EXPECT(gbc.readMem(0xcbcc), 0x2b);
        // CB 2B 030C
        gbc.setState(0xe02b, 0xdc01, 0x8a10, 0xea04, 0x5a14, 0x4d44, 0x0, 0x0);
        gbc.writeMem(0xe02b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xdc01);
        EXPECT(gbc.pc(), 0xe02d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe02b), 0xcb);
        EXPECT(gbc.readMem(0xe02c), 0x2b);
        // CB 2B 030D
        gbc.setState(0x81c4, 0x52c2, 0xf110, 0xddf1, 0x843f, 0xf2f0, 0x0, 0x0);
        gbc.writeMem(0x81c4, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x52c2);
        EXPECT(gbc.pc(), 0x81c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81c4), 0xcb);
        EXPECT(gbc.readMem(0x81c5), 0x2b);
        // CB 2B 030E
        gbc.setState(0xdb8c, 0x196a, 0x9bf0, 0x620a, 0x697c, 0x5f53, 0x0, 0x0);
        gbc.writeMem(0xdb8c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x196a);
        EXPECT(gbc.pc(), 0xdb8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb8c), 0xcb);
        EXPECT(gbc.readMem(0xdb8d), 0x2b);
        // CB 2B 030F
        gbc.setState(0xd6ec, 0xe575, 0x6490, 0x437d, 0xc1c2, 0x9a6f, 0x0, 0x0);
        gbc.writeMem(0xd6ec, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xe575);
        EXPECT(gbc.pc(), 0xd6ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6ec), 0xcb);
        EXPECT(gbc.readMem(0xd6ed), 0x2b);
        // CB 2B 0310
        gbc.setState(0x6e24, 0xa89e, 0xae80, 0x696c, 0xe493, 0xe5bb, 0x1, 0x0);
        gbc.writeMem(0x6e24, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xa89e);
        EXPECT(gbc.pc(), 0x6e26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0311
        gbc.setState(0x7e56, 0x967, 0x4cf0, 0x129e, 0x14fe, 0xb0cd, 0x1, 0x0);
        gbc.writeMem(0x7e56, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x967);
        EXPECT(gbc.pc(), 0x7e58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0312
        gbc.setState(0x5ae5, 0xe3, 0x3690, 0x89cd, 0xdd2, 0xb18e, 0x1, 0x1);
        gbc.writeMem(0x5ae5, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xe3);
        EXPECT(gbc.pc(), 0x5ae7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0313
        gbc.setState(0x5529, 0xd07a, 0xa690, 0x2579, 0x1e64, 0x505e, 0x1, 0x0);
        gbc.writeMem(0x5529, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xd07a);
        EXPECT(gbc.pc(), 0x552b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0314
        gbc.setState(0x8cab, 0xc2f9, 0x7960, 0x3fe, 0xaaee, 0x287, 0x0, 0x1);
        gbc.writeMem(0x8cab, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xc2f9);
        EXPECT(gbc.pc(), 0x8cad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cab), 0xcb);
        EXPECT(gbc.readMem(0x8cac), 0x2b);
        // CB 2B 0315
        gbc.setState(0xb128, 0xbbd7, 0x1fd0, 0x6627, 0x1b36, 0x6c2f, 0x1, 0x1);
        gbc.writeMem(0xb128, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xbbd7);
        EXPECT(gbc.pc(), 0xb12a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb128), 0xcb);
        EXPECT(gbc.readMem(0xb129), 0x2b);
        // CB 2B 0316
        gbc.setState(0x5cb5, 0x9c3c, 0x1e10, 0x9bce, 0x2815, 0xcdaa, 0x0, 0x0);
        gbc.writeMem(0x5cb5, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x9c3c);
        EXPECT(gbc.pc(), 0x5cb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0317
        gbc.setState(0xd5a9, 0x283e, 0x39d0, 0x4f66, 0xef11, 0x932b, 0x1, 0x0);
        gbc.writeMem(0xd5a9, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x283e);
        EXPECT(gbc.pc(), 0xd5ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5a9), 0xcb);
        EXPECT(gbc.readMem(0xd5aa), 0x2b);
        // CB 2B 0318
        gbc.setState(0x3152, 0x654, 0xe5a0, 0xd169, 0xc2f9, 0x8b14, 0x1, 0x0);
        gbc.writeMem(0x3152, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x654);
        EXPECT(gbc.pc(), 0x3154);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0319
        gbc.setState(0xd7f1, 0x3c3f, 0x4e0, 0xd990, 0xd31f, 0xe316, 0x0, 0x1);
        gbc.writeMem(0xd7f1, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x3c3f);
        EXPECT(gbc.pc(), 0xd7f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7f1), 0xcb);
        EXPECT(gbc.readMem(0xd7f2), 0x2b);
        // CB 2B 031A
        gbc.setState(0x6130, 0x8b40, 0x9480, 0x5885, 0x348f, 0x264c, 0x0, 0x1);
        gbc.writeMem(0x6130, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x8b40);
        EXPECT(gbc.pc(), 0x6132);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 031B
        gbc.setState(0xefda, 0x8671, 0x2cd0, 0xeec3, 0x2a6a, 0x1ac1, 0x0, 0x0);
        gbc.writeMem(0xefda, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x8671);
        EXPECT(gbc.pc(), 0xefdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefda), 0xcb);
        EXPECT(gbc.readMem(0xefdb), 0x2b);
        // CB 2B 031D
        gbc.setState(0xd027, 0xc99c, 0xbd00, 0x9b7a, 0xcf21, 0x324d, 0x0, 0x0);
        gbc.writeMem(0xd027, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xc99c);
        EXPECT(gbc.pc(), 0xd029);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd027), 0xcb);
        EXPECT(gbc.readMem(0xd028), 0x2b);
        // CB 2B 031E
        gbc.setState(0x34e4, 0x73f0, 0x3020, 0xf94c, 0xef25, 0x73cf, 0x1, 0x0);
        gbc.writeMem(0x34e4, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x73f0);
        EXPECT(gbc.pc(), 0x34e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 031F
        gbc.setState(0xccb7, 0xee6d, 0x49f0, 0xc47d, 0xa6ad, 0x8283, 0x1, 0x0);
        gbc.writeMem(0xccb7, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xee6d);
        EXPECT(gbc.pc(), 0xccb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccb7), 0xcb);
        EXPECT(gbc.readMem(0xccb8), 0x2b);
        // CB 2B 0320
        gbc.setState(0x7de7, 0xa616, 0x9ea0, 0x285f, 0x2669, 0x6dca, 0x0, 0x0);
        gbc.writeMem(0x7de7, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xa616);
        EXPECT(gbc.pc(), 0x7de9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0321
        gbc.setState(0x3b93, 0x49be, 0xa0f0, 0x7558, 0x8a, 0x76e, 0x1, 0x0);
        gbc.writeMem(0x3b93, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x49be);
        EXPECT(gbc.pc(), 0x3b95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0322
        gbc.setState(0xaa8c, 0x934a, 0xc0a0, 0x9538, 0xa2a0, 0x5623, 0x1, 0x0);
        gbc.writeMem(0xaa8c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x934a);
        EXPECT(gbc.pc(), 0xaa8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa8c), 0xcb);
        EXPECT(gbc.readMem(0xaa8d), 0x2b);
        // CB 2B 0323
        gbc.setState(0x6243, 0xa41c, 0xf160, 0xfdd9, 0x83eb, 0x93f8, 0x0, 0x0);
        gbc.writeMem(0x6243, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xa41c);
        EXPECT(gbc.pc(), 0x6245);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0325
        gbc.setState(0x988c, 0x693a, 0xda0, 0xb96b, 0x4754, 0x8357, 0x1, 0x1);
        gbc.writeMem(0x988c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x693a);
        EXPECT(gbc.pc(), 0x988e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x988c), 0xcb);
        EXPECT(gbc.readMem(0x988d), 0x2b);
        // CB 2B 0326
        gbc.setState(0x99a5, 0xd169, 0xff00, 0xdd62, 0x9121, 0x2400, 0x0, 0x1);
        gbc.writeMem(0x99a5, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xd169);
        EXPECT(gbc.pc(), 0x99a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99a5), 0xcb);
        EXPECT(gbc.readMem(0x99a6), 0x2b);
        // CB 2B 0327
        gbc.setState(0x3e85, 0xa5e1, 0x7640, 0xf916, 0xf41b, 0xb51f, 0x1, 0x1);
        gbc.writeMem(0x3e85, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xa5e1);
        EXPECT(gbc.pc(), 0x3e87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0328
        gbc.setState(0x4d54, 0x917c, 0x8b20, 0x9acd, 0x69cf, 0x927c, 0x0, 0x1);
        gbc.writeMem(0x4d54, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x917c);
        EXPECT(gbc.pc(), 0x4d56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0329
        gbc.setState(0xae27, 0xcdf8, 0xc960, 0xbff9, 0xa17, 0x9cd8, 0x0, 0x1);
        gbc.writeMem(0xae27, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xcdf8);
        EXPECT(gbc.pc(), 0xae29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae27), 0xcb);
        EXPECT(gbc.readMem(0xae28), 0x2b);
        // CB 2B 032A
        gbc.setState(0xcfb, 0x6135, 0xdbe0, 0xbf90, 0x8dc5, 0x76d1, 0x0, 0x1);
        gbc.writeMem(0xcfb, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x6135);
        EXPECT(gbc.pc(), 0xcfd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 032B
        gbc.setState(0xb170, 0x3b07, 0x4800, 0x2e7, 0xb5d2, 0x534f, 0x1, 0x1);
        gbc.writeMem(0xb170, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x3b07);
        EXPECT(gbc.pc(), 0xb172);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb170), 0xcb);
        EXPECT(gbc.readMem(0xb171), 0x2b);
        // CB 2B 032C
        gbc.setState(0x8196, 0xe2b0, 0x7cc0, 0xda1d, 0xcb89, 0xc6dc, 0x0, 0x1);
        gbc.writeMem(0x8196, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xe2b0);
        EXPECT(gbc.pc(), 0x8198);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8196), 0xcb);
        EXPECT(gbc.readMem(0x8197), 0x2b);
        // CB 2B 032D
        gbc.setState(0x7e37, 0xe1f8, 0x3d60, 0x991d, 0x5fb4, 0x88d3, 0x1, 0x0);
        gbc.writeMem(0x7e37, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xe1f8);
        EXPECT(gbc.pc(), 0x7e39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 032E
        gbc.setState(0x49a3, 0xcdc4, 0xe910, 0x75f1, 0x2855, 0x6a5d, 0x1, 0x0);
        gbc.writeMem(0x49a3, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xcdc4);
        EXPECT(gbc.pc(), 0x49a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 032F
        gbc.setState(0x5ce3, 0xa51c, 0x9a40, 0x8002, 0x81a4, 0x6781, 0x0, 0x1);
        gbc.writeMem(0x5ce3, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xa51c);
        EXPECT(gbc.pc(), 0x5ce5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0330
        gbc.setState(0x58bd, 0xe42c, 0x6d90, 0xa239, 0x5a87, 0x12d1, 0x1, 0x1);
        gbc.writeMem(0x58bd, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xe42c);
        EXPECT(gbc.pc(), 0x58bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0331
        gbc.setState(0x31fa, 0x1920, 0x51f0, 0xdc6e, 0x26d5, 0xc84c, 0x0, 0x1);
        gbc.writeMem(0x31fa, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x1920);
        EXPECT(gbc.pc(), 0x31fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0332
        gbc.setState(0x5e59, 0xe960, 0x3d40, 0x3249, 0xcc30, 0x343b, 0x1, 0x1);
        gbc.writeMem(0x5e59, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xe960);
        EXPECT(gbc.pc(), 0x5e5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0333
        gbc.setState(0x787c, 0x5a3e, 0x67a0, 0x4f2c, 0x5fe7, 0xf3fc, 0x0, 0x1);
        gbc.writeMem(0x787c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x5a3e);
        EXPECT(gbc.pc(), 0x787e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0334
        gbc.setState(0x835, 0x483, 0x5b60, 0xccdd, 0x3a51, 0x50a8, 0x0, 0x0);
        gbc.writeMem(0x835, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x483);
        EXPECT(gbc.pc(), 0x837);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0335
        gbc.setState(0x4151, 0xcb39, 0x2800, 0x7c4e, 0xd57b, 0x1860, 0x1, 0x0);
        gbc.writeMem(0x4151, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xcb39);
        EXPECT(gbc.pc(), 0x4153);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0336
        gbc.setState(0xbd78, 0xc878, 0x33a0, 0x16b0, 0x53cf, 0x557f, 0x0, 0x1);
        gbc.writeMem(0xbd78, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xc878);
        EXPECT(gbc.pc(), 0xbd7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd78), 0xcb);
        EXPECT(gbc.readMem(0xbd79), 0x2b);
        // CB 2B 0337
        gbc.setState(0x2862, 0xd641, 0x5a0, 0xac6b, 0x6601, 0x86f5, 0x0, 0x0);
        gbc.writeMem(0x2862, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xd641);
        EXPECT(gbc.pc(), 0x2864);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0338
        gbc.setState(0x6603, 0x4a66, 0x45b0, 0xae08, 0xfefd, 0x458b, 0x1, 0x1);
        gbc.writeMem(0x6603, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x4a66);
        EXPECT(gbc.pc(), 0x6605);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0339
        gbc.setState(0xe0a3, 0x6f58, 0x9d40, 0x2142, 0xd529, 0x9d59, 0x0, 0x1);
        gbc.writeMem(0xe0a3, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x6f58);
        EXPECT(gbc.pc(), 0xe0a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0a3), 0xcb);
        EXPECT(gbc.readMem(0xe0a4), 0x2b);
        // CB 2B 033A
        gbc.setState(0x6ab0, 0x3c19, 0xaef0, 0xfcc4, 0x82bd, 0xeb51, 0x1, 0x0);
        gbc.writeMem(0x6ab0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x3c19);
        EXPECT(gbc.pc(), 0x6ab2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 033B
        gbc.setState(0x8ccc, 0x63af, 0xec30, 0xfe86, 0x3835, 0xcb56, 0x0, 0x0);
        gbc.writeMem(0x8ccc, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x63af);
        EXPECT(gbc.pc(), 0x8cce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ccc), 0xcb);
        EXPECT(gbc.readMem(0x8ccd), 0x2b);
        // CB 2B 033C
        gbc.setState(0x24d8, 0x4499, 0x5d10, 0xfe8c, 0x6c3c, 0xd952, 0x0, 0x1);
        gbc.writeMem(0x24d8, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x4499);
        EXPECT(gbc.pc(), 0x24da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 033D
        gbc.setState(0x7867, 0xbd12, 0xd780, 0xd72b, 0x302f, 0x3f2f, 0x0, 0x0);
        gbc.writeMem(0x7867, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xbd12);
        EXPECT(gbc.pc(), 0x7869);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 033E
        gbc.setState(0x23a1, 0xe9d0, 0x5fe0, 0x10df, 0x4ede, 0xb9cc, 0x1, 0x0);
        gbc.writeMem(0x23a1, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xe9d0);
        EXPECT(gbc.pc(), 0x23a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0340
        gbc.setState(0x7504, 0x2564, 0x7620, 0x7eec, 0xde05, 0xef82, 0x1, 0x1);
        gbc.writeMem(0x7504, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x2564);
        EXPECT(gbc.pc(), 0x7506);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0341
        gbc.setState(0xa838, 0xd373, 0x1050, 0xb887, 0x9de4, 0xce8f, 0x0, 0x1);
        gbc.writeMem(0xa838, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xd373);
        EXPECT(gbc.pc(), 0xa83a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa838), 0xcb);
        EXPECT(gbc.readMem(0xa839), 0x2b);
        // CB 2B 0342
        gbc.setState(0xeb83, 0xe66a, 0xf2b0, 0x4f34, 0x1888, 0xfed3, 0x1, 0x0);
        gbc.writeMem(0xeb83, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xe66a);
        EXPECT(gbc.pc(), 0xeb85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb83), 0xcb);
        EXPECT(gbc.readMem(0xeb84), 0x2b);
        // CB 2B 0344
        gbc.setState(0x70c1, 0x4767, 0xc480, 0x4991, 0x7d04, 0xc660, 0x0, 0x1);
        gbc.writeMem(0x70c1, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x4767);
        EXPECT(gbc.pc(), 0x70c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0345
        gbc.setState(0x940a, 0xe0dc, 0x25c0, 0xee29, 0xc76f, 0x825b, 0x1, 0x1);
        gbc.writeMem(0x940a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xe0dc);
        EXPECT(gbc.pc(), 0x940c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x940a), 0xcb);
        EXPECT(gbc.readMem(0x940b), 0x2b);
        // CB 2B 0346
        gbc.setState(0x8136, 0x3c51, 0x9020, 0x6665, 0x2117, 0xbd78, 0x1, 0x0);
        gbc.writeMem(0x8136, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x3c51);
        EXPECT(gbc.pc(), 0x8138);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8136), 0xcb);
        EXPECT(gbc.readMem(0x8137), 0x2b);
        // CB 2B 0347
        gbc.setState(0x1d39, 0xd342, 0x4f80, 0x73b3, 0xc6f6, 0x97b4, 0x1, 0x0);
        gbc.writeMem(0x1d39, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xd342);
        EXPECT(gbc.pc(), 0x1d3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0348
        gbc.setState(0x5c1c, 0x4f15, 0x8cb0, 0x1428, 0x2eb9, 0x153d, 0x0, 0x1);
        gbc.writeMem(0x5c1c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x4f15);
        EXPECT(gbc.pc(), 0x5c1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0349
        gbc.setState(0x9bd3, 0xef60, 0xeac0, 0xd6d8, 0x275, 0x3a61, 0x0, 0x0);
        gbc.writeMem(0x9bd3, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xef60);
        EXPECT(gbc.pc(), 0x9bd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bd3), 0xcb);
        EXPECT(gbc.readMem(0x9bd4), 0x2b);
        // CB 2B 034A
        gbc.setState(0x916d, 0xa56a, 0xfdd0, 0xef90, 0x6b34, 0x298, 0x0, 0x1);
        gbc.writeMem(0x916d, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xa56a);
        EXPECT(gbc.pc(), 0x916f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x916d), 0xcb);
        EXPECT(gbc.readMem(0x916e), 0x2b);
        // CB 2B 034B
        gbc.setState(0xe9b1, 0xf039, 0xfdf0, 0xbbf5, 0xfdc7, 0x6fe4, 0x0, 0x0);
        gbc.writeMem(0xe9b1, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xf039);
        EXPECT(gbc.pc(), 0xe9b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9b1), 0xcb);
        EXPECT(gbc.readMem(0xe9b2), 0x2b);
        // CB 2B 034C
        gbc.setState(0x9dc6, 0x56ed, 0xec00, 0xd991, 0x9c8c, 0x2529, 0x0, 0x0);
        gbc.writeMem(0x9dc6, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x56ed);
        EXPECT(gbc.pc(), 0x9dc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dc6), 0xcb);
        EXPECT(gbc.readMem(0x9dc7), 0x2b);
        // CB 2B 034D
        gbc.setState(0x9e97, 0xa45, 0xfbd0, 0xbe21, 0x1b88, 0x7e13, 0x0, 0x1);
        gbc.writeMem(0x9e97, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xa45);
        EXPECT(gbc.pc(), 0x9e99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e97), 0xcb);
        EXPECT(gbc.readMem(0x9e98), 0x2b);
        // CB 2B 034E
        gbc.setState(0xc0f, 0x3314, 0x5a90, 0x28d2, 0x2d5a, 0x3200, 0x1, 0x1);
        gbc.writeMem(0xc0f, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x3314);
        EXPECT(gbc.pc(), 0xc11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 034F
        gbc.setState(0x9865, 0xebc3, 0xd390, 0x9c8c, 0xd919, 0x16b6, 0x0, 0x0);
        gbc.writeMem(0x9865, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xebc3);
        EXPECT(gbc.pc(), 0x9867);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9865), 0xcb);
        EXPECT(gbc.readMem(0x9866), 0x2b);
        // CB 2B 0350
        gbc.setState(0xc950, 0x4ff1, 0xf040, 0x61bf, 0x93cf, 0xb60a, 0x1, 0x1);
        gbc.writeMem(0xc950, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x4ff1);
        EXPECT(gbc.pc(), 0xc952);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc950), 0xcb);
        EXPECT(gbc.readMem(0xc951), 0x2b);
        // CB 2B 0351
        gbc.setState(0x90f6, 0xfc2, 0xda00, 0x9d1c, 0x21ae, 0x6657, 0x0, 0x1);
        gbc.writeMem(0x90f6, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xfc2);
        EXPECT(gbc.pc(), 0x90f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90f6), 0xcb);
        EXPECT(gbc.readMem(0x90f7), 0x2b);
        // CB 2B 0352
        gbc.setState(0xd947, 0x73de, 0x58a0, 0x3829, 0x158b, 0x6837, 0x1, 0x0);
        gbc.writeMem(0xd947, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x73de);
        EXPECT(gbc.pc(), 0xd949);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd947), 0xcb);
        EXPECT(gbc.readMem(0xd948), 0x2b);
        // CB 2B 0353
        gbc.setState(0x3403, 0xa783, 0xc3d0, 0xce2b, 0x4158, 0xa299, 0x0, 0x0);
        gbc.writeMem(0x3403, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xa783);
        EXPECT(gbc.pc(), 0x3405);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0354
        gbc.setState(0x319a, 0xe48f, 0xe440, 0x675c, 0x5505, 0x3c42, 0x0, 0x1);
        gbc.writeMem(0x319a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xe48f);
        EXPECT(gbc.pc(), 0x319c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0355
        gbc.setState(0xd73e, 0x6404, 0x5fc0, 0xf6ad, 0xe07a, 0x2bb, 0x1, 0x0);
        gbc.writeMem(0xd73e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x6404);
        EXPECT(gbc.pc(), 0xd740);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd73e), 0xcb);
        EXPECT(gbc.readMem(0xd73f), 0x2b);
        // CB 2B 0356
        gbc.setState(0x86da, 0xd5ec, 0xa080, 0xa0da, 0x600d, 0x701e, 0x1, 0x0);
        gbc.writeMem(0x86da, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xd5ec);
        EXPECT(gbc.pc(), 0x86dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86da), 0xcb);
        EXPECT(gbc.readMem(0x86db), 0x2b);
        // CB 2B 0357
        gbc.setState(0xa306, 0xc90b, 0x190, 0x45a1, 0xb5e4, 0xb6b4, 0x0, 0x1);
        gbc.writeMem(0xa306, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xc90b);
        EXPECT(gbc.pc(), 0xa308);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa306), 0xcb);
        EXPECT(gbc.readMem(0xa307), 0x2b);
        // CB 2B 0358
        gbc.setState(0xaf15, 0xff02, 0x7160, 0x5b9e, 0xbb88, 0x370, 0x0, 0x0);
        gbc.writeMem(0xaf15, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xff02);
        EXPECT(gbc.pc(), 0xaf17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf15), 0xcb);
        EXPECT(gbc.readMem(0xaf16), 0x2b);
        // CB 2B 0359
        gbc.setState(0x53dc, 0x238a, 0x52d0, 0x2bf9, 0x28c1, 0x7428, 0x0, 0x1);
        gbc.writeMem(0x53dc, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x238a);
        EXPECT(gbc.pc(), 0x53de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 035A
        gbc.setState(0x9f55, 0xb3be, 0xdcd0, 0x4ad9, 0xa48e, 0xd1, 0x1, 0x1);
        gbc.writeMem(0x9f55, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xb3be);
        EXPECT(gbc.pc(), 0x9f57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f55), 0xcb);
        EXPECT(gbc.readMem(0x9f56), 0x2b);
        // CB 2B 035B
        gbc.setState(0x8745, 0x6380, 0x8c90, 0x126d, 0x4431, 0xc99d, 0x0, 0x1);
        gbc.writeMem(0x8745, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x6380);
        EXPECT(gbc.pc(), 0x8747);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8745), 0xcb);
        EXPECT(gbc.readMem(0x8746), 0x2b);
        // CB 2B 035C
        gbc.setState(0x856e, 0xae10, 0x1610, 0x3b51, 0xad1b, 0xd196, 0x1, 0x1);
        gbc.writeMem(0x856e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xae10);
        EXPECT(gbc.pc(), 0x8570);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x856e), 0xcb);
        EXPECT(gbc.readMem(0x856f), 0x2b);
        // CB 2B 035D
        gbc.setState(0x3640, 0xdce1, 0xa210, 0xa89, 0x4775, 0xc03a, 0x1, 0x0);
        gbc.writeMem(0x3640, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xdce1);
        EXPECT(gbc.pc(), 0x3642);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 035E
        gbc.setState(0xcbbf, 0x42f3, 0xdfc0, 0x1964, 0xd59e, 0x7c76, 0x1, 0x0);
        gbc.writeMem(0xcbbf, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x42f3);
        EXPECT(gbc.pc(), 0xcbc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbbf), 0xcb);
        EXPECT(gbc.readMem(0xcbc0), 0x2b);
        // CB 2B 035F
        gbc.setState(0x47d3, 0x6729, 0x150, 0xa246, 0xb84b, 0x2cab, 0x1, 0x1);
        gbc.writeMem(0x47d3, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x6729);
        EXPECT(gbc.pc(), 0x47d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0360
        gbc.setState(0xc0a2, 0xe149, 0x2320, 0x2880, 0xb5b7, 0x3630, 0x1, 0x1);
        gbc.writeMem(0xc0a2, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xe149);
        EXPECT(gbc.pc(), 0xc0a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0a2), 0xcb);
        EXPECT(gbc.readMem(0xc0a3), 0x2b);
        // CB 2B 0362
        gbc.setState(0xa9c7, 0x1aad, 0x77d0, 0x6a0a, 0x1850, 0xef1, 0x1, 0x0);
        gbc.writeMem(0xa9c7, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x1aad);
        EXPECT(gbc.pc(), 0xa9c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9c7), 0xcb);
        EXPECT(gbc.readMem(0xa9c8), 0x2b);
        // CB 2B 0363
        gbc.setState(0x9c1c, 0x9137, 0x5170, 0x6bd4, 0xbd32, 0xd4e7, 0x0, 0x1);
        gbc.writeMem(0x9c1c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x9137);
        EXPECT(gbc.pc(), 0x9c1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c1c), 0xcb);
        EXPECT(gbc.readMem(0x9c1d), 0x2b);
        // CB 2B 0364
        gbc.setState(0x80e7, 0xe252, 0x7ab0, 0xee25, 0x1684, 0xca96, 0x0, 0x0);
        gbc.writeMem(0x80e7, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xe252);
        EXPECT(gbc.pc(), 0x80e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80e7), 0xcb);
        EXPECT(gbc.readMem(0x80e8), 0x2b);
        // CB 2B 0366
        gbc.setState(0x4b4a, 0x2ba2, 0xf590, 0xc724, 0x684e, 0x9f68, 0x1, 0x1);
        gbc.writeMem(0x4b4a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x2ba2);
        EXPECT(gbc.pc(), 0x4b4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0367
        gbc.setState(0xa3ad, 0xc6b1, 0x2b70, 0xc1c0, 0x6f5b, 0x3bbf, 0x0, 0x1);
        gbc.writeMem(0xa3ad, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xc6b1);
        EXPECT(gbc.pc(), 0xa3af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3ad), 0xcb);
        EXPECT(gbc.readMem(0xa3ae), 0x2b);
        // CB 2B 0368
        gbc.setState(0xc271, 0x143e, 0x7980, 0xc738, 0x55cf, 0xf3d9, 0x1, 0x1);
        gbc.writeMem(0xc271, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x143e);
        EXPECT(gbc.pc(), 0xc273);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc271), 0xcb);
        EXPECT(gbc.readMem(0xc272), 0x2b);
        // CB 2B 0369
        gbc.setState(0x1a41, 0xe836, 0xf550, 0xd39, 0xd8d3, 0xa922, 0x0, 0x1);
        gbc.writeMem(0x1a41, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xe836);
        EXPECT(gbc.pc(), 0x1a43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 036A
        gbc.setState(0x85c1, 0xf2b4, 0xdfb0, 0x114c, 0xa8d7, 0xe51f, 0x1, 0x1);
        gbc.writeMem(0x85c1, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xf2b4);
        EXPECT(gbc.pc(), 0x85c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85c1), 0xcb);
        EXPECT(gbc.readMem(0x85c2), 0x2b);
        // CB 2B 036B
        gbc.setState(0x51ec, 0xfb6e, 0x2cb0, 0x9316, 0x1073, 0x844, 0x0, 0x0);
        gbc.writeMem(0x51ec, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xfb6e);
        EXPECT(gbc.pc(), 0x51ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 036C
        gbc.setState(0x140, 0xfb43, 0x1ec0, 0xad80, 0x3726, 0x1ec7, 0x1, 0x1);
        gbc.writeMem(0x140, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xfb43);
        EXPECT(gbc.pc(), 0x142);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 036D
        gbc.setState(0x35de, 0x5128, 0x9860, 0x347f, 0x6d40, 0x1569, 0x0, 0x1);
        gbc.writeMem(0x35de, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x5128);
        EXPECT(gbc.pc(), 0x35e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 036E
        gbc.setState(0x311, 0x21cc, 0x15c0, 0x3c06, 0x50bb, 0x941a, 0x1, 0x0);
        gbc.writeMem(0x311, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x21cc);
        EXPECT(gbc.pc(), 0x313);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 036F
        gbc.setState(0x1d93, 0x7346, 0x31c0, 0x7126, 0x41bf, 0xb779, 0x1, 0x1);
        gbc.writeMem(0x1d93, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x7346);
        EXPECT(gbc.pc(), 0x1d95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0370
        gbc.setState(0xe9be, 0x4511, 0x47a0, 0xd02d, 0x6c3, 0xddea, 0x0, 0x1);
        gbc.writeMem(0xe9be, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x4511);
        EXPECT(gbc.pc(), 0xe9c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9be), 0xcb);
        EXPECT(gbc.readMem(0xe9bf), 0x2b);
        // CB 2B 0371
        gbc.setState(0xbf22, 0xb5ee, 0xa5c0, 0xb513, 0x62ca, 0xacf8, 0x0, 0x1);
        gbc.writeMem(0xbf22, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xb5ee);
        EXPECT(gbc.pc(), 0xbf24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf22), 0xcb);
        EXPECT(gbc.readMem(0xbf23), 0x2b);
        // CB 2B 0372
        gbc.setState(0x1133, 0x582, 0x8e00, 0x375a, 0x8a33, 0x5910, 0x1, 0x0);
        gbc.writeMem(0x1133, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x582);
        EXPECT(gbc.pc(), 0x1135);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0373
        gbc.setState(0xbbc0, 0x3a99, 0xf640, 0xd3a2, 0xce4b, 0x6261, 0x0, 0x1);
        gbc.writeMem(0xbbc0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x3a99);
        EXPECT(gbc.pc(), 0xbbc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbc0), 0xcb);
        EXPECT(gbc.readMem(0xbbc1), 0x2b);
        // CB 2B 0374
        gbc.setState(0x5609, 0x26c7, 0xa5d0, 0xeabc, 0xc839, 0xfa5f, 0x1, 0x1);
        gbc.writeMem(0x5609, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x26c7);
        EXPECT(gbc.pc(), 0x560b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0376
        gbc.setState(0x5ada, 0xcd0, 0xd3a0, 0xbd55, 0xdae, 0x5ff2, 0x0, 0x1);
        gbc.writeMem(0x5ada, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xcd0);
        EXPECT(gbc.pc(), 0x5adc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0377
        gbc.setState(0x6f9e, 0xaadc, 0xd520, 0xf509, 0x5353, 0x3f24, 0x0, 0x1);
        gbc.writeMem(0x6f9e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xaadc);
        EXPECT(gbc.pc(), 0x6fa0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0378
        gbc.setState(0xafba, 0x3e64, 0x3b90, 0xa373, 0x2b49, 0x2a3c, 0x0, 0x1);
        gbc.writeMem(0xafba, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x3e64);
        EXPECT(gbc.pc(), 0xafbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafba), 0xcb);
        EXPECT(gbc.readMem(0xafbb), 0x2b);
        // CB 2B 0379
        gbc.setState(0x7bf8, 0x4b7d, 0xb800, 0x3d75, 0x2ca6, 0x66a9, 0x1, 0x1);
        gbc.writeMem(0x7bf8, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x4b7d);
        EXPECT(gbc.pc(), 0x7bfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 037A
        gbc.setState(0xe1cd, 0xfd4f, 0xef30, 0x1c6c, 0x84e8, 0xb796, 0x0, 0x1);
        gbc.writeMem(0xe1cd, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xfd4f);
        EXPECT(gbc.pc(), 0xe1cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1cd), 0xcb);
        EXPECT(gbc.readMem(0xe1ce), 0x2b);
        // CB 2B 037C
        gbc.setState(0xdb9b, 0xb831, 0xf2c0, 0x8655, 0x399c, 0x2fd1, 0x0, 0x1);
        gbc.writeMem(0xdb9b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xb831);
        EXPECT(gbc.pc(), 0xdb9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb9b), 0xcb);
        EXPECT(gbc.readMem(0xdb9c), 0x2b);
        // CB 2B 037D
        gbc.setState(0x9ff9, 0x1b56, 0xf750, 0xcbf6, 0xad7c, 0xbe76, 0x1, 0x0);
        gbc.writeMem(0x9ff9, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x1b56);
        EXPECT(gbc.pc(), 0x9ffb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ff9), 0xcb);
        EXPECT(gbc.readMem(0x9ffa), 0x2b);
        // CB 2B 037E
        gbc.setState(0xb536, 0x1288, 0xdbc0, 0xb2c, 0x8f54, 0xd706, 0x0, 0x0);
        gbc.writeMem(0xb536, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x1288);
        EXPECT(gbc.pc(), 0xb538);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb536), 0xcb);
        EXPECT(gbc.readMem(0xb537), 0x2b);
        // CB 2B 037F
        gbc.setState(0xb5e1, 0xca0c, 0xd970, 0x7cd3, 0xe7e6, 0xe136, 0x0, 0x0);
        gbc.writeMem(0xb5e1, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xca0c);
        EXPECT(gbc.pc(), 0xb5e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5e1), 0xcb);
        EXPECT(gbc.readMem(0xb5e2), 0x2b);
        // CB 2B 0380
        gbc.setState(0x13fd, 0x7263, 0x3300, 0x4ea3, 0x49e2, 0xfae3, 0x1, 0x0);
        gbc.writeMem(0x13fd, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x7263);
        EXPECT(gbc.pc(), 0x13ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0381
        gbc.setState(0xa21e, 0x1d38, 0x90c0, 0x7b25, 0xc01c, 0xa7dd, 0x1, 0x0);
        gbc.writeMem(0xa21e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x1d38);
        EXPECT(gbc.pc(), 0xa220);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa21e), 0xcb);
        EXPECT(gbc.readMem(0xa21f), 0x2b);
        // CB 2B 0382
        gbc.setState(0xa4f3, 0xc43, 0x6250, 0x22f1, 0xf333, 0x3cd, 0x0, 0x0);
        gbc.writeMem(0xa4f3, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xc43);
        EXPECT(gbc.pc(), 0xa4f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4f3), 0xcb);
        EXPECT(gbc.readMem(0xa4f4), 0x2b);
        // CB 2B 0383
        gbc.setState(0xc558, 0x168, 0xa6a0, 0xd893, 0xae33, 0xe3e7, 0x1, 0x1);
        gbc.writeMem(0xc558, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x168);
        EXPECT(gbc.pc(), 0xc55a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc558), 0xcb);
        EXPECT(gbc.readMem(0xc559), 0x2b);
        // CB 2B 0384
        gbc.setState(0x7772, 0xc788, 0x2530, 0xd0d, 0x85a2, 0xb300, 0x1, 0x1);
        gbc.writeMem(0x7772, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xc788);
        EXPECT(gbc.pc(), 0x7774);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0385
        gbc.setState(0x19b8, 0x6f64, 0x1dc0, 0xbe23, 0x4b7a, 0x4038, 0x1, 0x0);
        gbc.writeMem(0x19b8, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x6f64);
        EXPECT(gbc.pc(), 0x19ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0386
        gbc.setState(0x5187, 0xe368, 0xf2e0, 0x3f47, 0x5a9b, 0x43f7, 0x0, 0x1);
        gbc.writeMem(0x5187, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xe368);
        EXPECT(gbc.pc(), 0x5189);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0387
        gbc.setState(0xc216, 0xf572, 0xd4b0, 0x5787, 0xb646, 0x1f2c, 0x0, 0x0);
        gbc.writeMem(0xc216, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xf572);
        EXPECT(gbc.pc(), 0xc218);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc216), 0xcb);
        EXPECT(gbc.readMem(0xc217), 0x2b);
        // CB 2B 0388
        gbc.setState(0x8823, 0xaef3, 0xeb70, 0xb006, 0xf468, 0x4999, 0x0, 0x1);
        gbc.writeMem(0x8823, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xaef3);
        EXPECT(gbc.pc(), 0x8825);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8823), 0xcb);
        EXPECT(gbc.readMem(0x8824), 0x2b);
        // CB 2B 0389
        gbc.setState(0x3096, 0xccf9, 0xb6c0, 0x75b0, 0x2bc1, 0xe190, 0x1, 0x0);
        gbc.writeMem(0x3096, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xccf9);
        EXPECT(gbc.pc(), 0x3098);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 038A
        gbc.setState(0x2507, 0xf1a9, 0x7a80, 0x1aeb, 0x523f, 0x2430, 0x1, 0x1);
        gbc.writeMem(0x2507, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xf1a9);
        EXPECT(gbc.pc(), 0x2509);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 038B
        gbc.setState(0x9d5c, 0xbbdf, 0x3170, 0xf3c2, 0x838d, 0x1c41, 0x1, 0x1);
        gbc.writeMem(0x9d5c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xbbdf);
        EXPECT(gbc.pc(), 0x9d5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d5c), 0xcb);
        EXPECT(gbc.readMem(0x9d5d), 0x2b);
        // CB 2B 038C
        gbc.setState(0xadc4, 0x404f, 0x37c0, 0x1c10, 0x9421, 0x1310, 0x1, 0x1);
        gbc.writeMem(0xadc4, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x404f);
        EXPECT(gbc.pc(), 0xadc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadc4), 0xcb);
        EXPECT(gbc.readMem(0xadc5), 0x2b);
        // CB 2B 038D
        gbc.setState(0x72c, 0xc93, 0x2360, 0xb344, 0xc87, 0x538f, 0x1, 0x0);
        gbc.writeMem(0x72c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xc93);
        EXPECT(gbc.pc(), 0x72e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 038E
        gbc.setState(0x124, 0x7747, 0x3170, 0x25f1, 0xca1b, 0xe40a, 0x0, 0x0);
        gbc.writeMem(0x124, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x7747);
        EXPECT(gbc.pc(), 0x126);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 038F
        gbc.setState(0x8ca3, 0xc819, 0x2920, 0xa44e, 0x4611, 0x2134, 0x1, 0x1);
        gbc.writeMem(0x8ca3, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xc819);
        EXPECT(gbc.pc(), 0x8ca5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ca3), 0xcb);
        EXPECT(gbc.readMem(0x8ca4), 0x2b);
        // CB 2B 0390
        gbc.setState(0x8181, 0x85fc, 0x90d0, 0xdf0a, 0x3344, 0x2a6e, 0x0, 0x1);
        gbc.writeMem(0x8181, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x85fc);
        EXPECT(gbc.pc(), 0x8183);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8181), 0xcb);
        EXPECT(gbc.readMem(0x8182), 0x2b);
        // CB 2B 0391
        gbc.setState(0xea6a, 0x9dd6, 0x60, 0xa7d3, 0x2bad, 0x1643, 0x0, 0x0);
        gbc.writeMem(0xea6a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x9dd6);
        EXPECT(gbc.pc(), 0xea6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea6a), 0xcb);
        EXPECT(gbc.readMem(0xea6b), 0x2b);
        // CB 2B 0392
        gbc.setState(0xc224, 0xd080, 0xd7f0, 0x4acc, 0x1cc8, 0x69f9, 0x1, 0x0);
        gbc.writeMem(0xc224, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xd080);
        EXPECT(gbc.pc(), 0xc226);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc224), 0xcb);
        EXPECT(gbc.readMem(0xc225), 0x2b);
        // CB 2B 0393
        gbc.setState(0x77de, 0x74c1, 0x2120, 0xe8a6, 0x45d5, 0x7d99, 0x0, 0x1);
        gbc.writeMem(0x77de, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x74c1);
        EXPECT(gbc.pc(), 0x77e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 0394
        gbc.setState(0xcc6a, 0x73f2, 0x8ba0, 0x6669, 0x9173, 0xd7d6, 0x1, 0x1);
        gbc.writeMem(0xcc6a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x73f2);
        EXPECT(gbc.pc(), 0xcc6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc6a), 0xcb);
        EXPECT(gbc.readMem(0xcc6b), 0x2b);
        // CB 2B 0395
        gbc.setState(0x230, 0x1e68, 0x2ad0, 0x49e6, 0xf278, 0x3363, 0x1, 0x0);
        gbc.writeMem(0x230, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x1e68);
        EXPECT(gbc.pc(), 0x232);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0397
        gbc.setState(0x6f79, 0xe166, 0x8700, 0xec67, 0x4e80, 0xbdc6, 0x1, 0x0);
        gbc.writeMem(0x6f79, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xe166);
        EXPECT(gbc.pc(), 0x6f7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 0398
        gbc.setState(0x8255, 0x4bc6, 0x9cd0, 0x2c33, 0xfa93, 0x3cc3, 0x0, 0x1);
        gbc.writeMem(0x8255, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x4bc6);
        EXPECT(gbc.pc(), 0x8257);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8255), 0xcb);
        EXPECT(gbc.readMem(0x8256), 0x2b);
        // CB 2B 0399
        gbc.setState(0x253, 0xbf04, 0x4cb0, 0x815f, 0xf79d, 0x1b67, 0x1, 0x0);
        gbc.writeMem(0x253, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xbf04);
        EXPECT(gbc.pc(), 0x255);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 039A
        gbc.setState(0x3d97, 0xabb6, 0x91c0, 0x56a1, 0x9122, 0x5d59, 0x1, 0x0);
        gbc.writeMem(0x3d97, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xabb6);
        EXPECT(gbc.pc(), 0x3d99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 039B
        gbc.setState(0x564f, 0x5ef5, 0x4f0, 0x899e, 0xbebf, 0xd4d8, 0x0, 0x0);
        gbc.writeMem(0x564f, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x5ef5);
        EXPECT(gbc.pc(), 0x5651);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 039C
        gbc.setState(0xd0ba, 0x358, 0x63f0, 0xbbf0, 0x375a, 0x5e41, 0x0, 0x1);
        gbc.writeMem(0xd0ba, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x358);
        EXPECT(gbc.pc(), 0xd0bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0ba), 0xcb);
        EXPECT(gbc.readMem(0xd0bb), 0x2b);
        // CB 2B 039D
        gbc.setState(0x700b, 0xccde, 0x8d00, 0x2d09, 0xed30, 0x30a5, 0x1, 0x1);
        gbc.writeMem(0x700b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xccde);
        EXPECT(gbc.pc(), 0x700d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 039E
        gbc.setState(0xa2fc, 0x3f9d, 0x2da0, 0xf9fa, 0xfa28, 0x14f5, 0x0, 0x0);
        gbc.writeMem(0xa2fc, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x3f9d);
        EXPECT(gbc.pc(), 0xa2fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2fc), 0xcb);
        EXPECT(gbc.readMem(0xa2fd), 0x2b);
        // CB 2B 039F
        gbc.setState(0xc7, 0x11e2, 0xfaa0, 0x2f50, 0xd554, 0xc75c, 0x0, 0x1);
        gbc.writeMem(0xc7, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x11e2);
        EXPECT(gbc.pc(), 0xc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 03A0
        gbc.setState(0xe39c, 0x508, 0x5e50, 0xe06c, 0xb033, 0xa491, 0x1, 0x1);
        gbc.writeMem(0xe39c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x508);
        EXPECT(gbc.pc(), 0xe39e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe39c), 0xcb);
        EXPECT(gbc.readMem(0xe39d), 0x2b);
        // CB 2B 03A1
        gbc.setState(0x7b58, 0xaa5a, 0xd370, 0xc773, 0x81d3, 0xd8fb, 0x0, 0x1);
        gbc.writeMem(0x7b58, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xaa5a);
        EXPECT(gbc.pc(), 0x7b5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 03A2
        gbc.setState(0x5db9, 0xe402, 0xe470, 0xd808, 0xa5a0, 0x29f5, 0x1, 0x1);
        gbc.writeMem(0x5db9, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xe402);
        EXPECT(gbc.pc(), 0x5dbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 03A3
        gbc.setState(0x433b, 0x2dcc, 0x6420, 0xd0f2, 0xab61, 0xca5f, 0x1, 0x0);
        gbc.writeMem(0x433b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x2dcc);
        EXPECT(gbc.pc(), 0x433d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 03A4
        gbc.setState(0x38d7, 0xa214, 0x4e30, 0xfc67, 0x3975, 0x54fb, 0x0, 0x1);
        gbc.writeMem(0x38d7, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xa214);
        EXPECT(gbc.pc(), 0x38d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 03A6
        gbc.setState(0x5209, 0x627c, 0x130, 0x29a8, 0x9ca, 0xf26f, 0x0, 0x1);
        gbc.writeMem(0x5209, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x627c);
        EXPECT(gbc.pc(), 0x520b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 03A7
        gbc.setState(0x2a76, 0x1670, 0x6110, 0x6576, 0xe6cc, 0xfd43, 0x1, 0x1);
        gbc.writeMem(0x2a76, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x1670);
        EXPECT(gbc.pc(), 0x2a78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 03A8
        gbc.setState(0xe950, 0x9738, 0xac30, 0xc6f8, 0x42cb, 0x4862, 0x0, 0x0);
        gbc.writeMem(0xe950, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x9738);
        EXPECT(gbc.pc(), 0xe952);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe950), 0xcb);
        EXPECT(gbc.readMem(0xe951), 0x2b);
        // CB 2B 03A9
        gbc.setState(0xb102, 0x9ffa, 0xce80, 0x9733, 0x9fd3, 0xb19b, 0x0, 0x1);
        gbc.writeMem(0xb102, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x9ffa);
        EXPECT(gbc.pc(), 0xb104);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb102), 0xcb);
        EXPECT(gbc.readMem(0xb103), 0x2b);
        // CB 2B 03AA
        gbc.setState(0xb608, 0x43da, 0x5d10, 0x16, 0x8cc2, 0x5897, 0x1, 0x0);
        gbc.writeMem(0xb608, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x43da);
        EXPECT(gbc.pc(), 0xb60a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb608), 0xcb);
        EXPECT(gbc.readMem(0xb609), 0x2b);
        // CB 2B 03AB
        gbc.setState(0x60be, 0xd076, 0xc100, 0x2c1d, 0xec78, 0x7d81, 0x1, 0x0);
        gbc.writeMem(0x60be, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xd076);
        EXPECT(gbc.pc(), 0x60c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 03AC
        gbc.setState(0x5c0d, 0xd747, 0x4090, 0x619b, 0xc59e, 0x93bf, 0x0, 0x0);
        gbc.writeMem(0x5c0d, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xd747);
        EXPECT(gbc.pc(), 0x5c0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 03AD
        gbc.setState(0x9f15, 0x56f5, 0xee30, 0xc46, 0x77d, 0xd37, 0x0, 0x0);
        gbc.writeMem(0x9f15, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x56f5);
        EXPECT(gbc.pc(), 0x9f17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f15), 0xcb);
        EXPECT(gbc.readMem(0x9f16), 0x2b);
        // CB 2B 03AE
        gbc.setState(0xc64b, 0x70a3, 0xf490, 0xb328, 0xb04a, 0x12ee, 0x0, 0x0);
        gbc.writeMem(0xc64b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x70a3);
        EXPECT(gbc.pc(), 0xc64d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc64b), 0xcb);
        EXPECT(gbc.readMem(0xc64c), 0x2b);
        // CB 2B 03AF
        gbc.setState(0x9a23, 0x3a6e, 0x47c0, 0xb595, 0xc436, 0xf016, 0x0, 0x0);
        gbc.writeMem(0x9a23, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x3a6e);
        EXPECT(gbc.pc(), 0x9a25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a23), 0xcb);
        EXPECT(gbc.readMem(0x9a24), 0x2b);
        // CB 2B 03B0
        gbc.setState(0xb278, 0x4b3, 0x10f0, 0x5c1b, 0x1419, 0xc694, 0x0, 0x0);
        gbc.writeMem(0xb278, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x4b3);
        EXPECT(gbc.pc(), 0xb27a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb278), 0xcb);
        EXPECT(gbc.readMem(0xb279), 0x2b);
        // CB 2B 03B1
        gbc.setState(0x29ab, 0x80f, 0x34d0, 0x6c5b, 0xaaba, 0x124, 0x1, 0x0);
        gbc.writeMem(0x29ab, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x80f);
        EXPECT(gbc.pc(), 0x29ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 03B2
        gbc.setState(0x5550, 0xe685, 0x5aa0, 0xec4a, 0xa66b, 0x399d, 0x0, 0x0);
        gbc.writeMem(0x5550, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xe685);
        EXPECT(gbc.pc(), 0x5552);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 03B3
        gbc.setState(0x9d5f, 0x1eac, 0xed20, 0x562d, 0x7ed6, 0x3ac, 0x1, 0x1);
        gbc.writeMem(0x9d5f, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x1eac);
        EXPECT(gbc.pc(), 0x9d61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d5f), 0xcb);
        EXPECT(gbc.readMem(0x9d60), 0x2b);
        // CB 2B 03B4
        gbc.setState(0x21ca, 0x541f, 0xfe60, 0x569f, 0x52d6, 0x30f, 0x1, 0x0);
        gbc.writeMem(0x21ca, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x541f);
        EXPECT(gbc.pc(), 0x21cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 03B5
        gbc.setState(0x5931, 0x4f6c, 0xd5a0, 0xa8eb, 0x4c89, 0x9acb, 0x1, 0x1);
        gbc.writeMem(0x5931, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x4f6c);
        EXPECT(gbc.pc(), 0x5933);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 03B6
        gbc.setState(0x8c72, 0x35df, 0xd500, 0x7172, 0xe39d, 0xc36c, 0x1, 0x1);
        gbc.writeMem(0x8c72, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x35df);
        EXPECT(gbc.pc(), 0x8c74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c72), 0xcb);
        EXPECT(gbc.readMem(0x8c73), 0x2b);
        // CB 2B 03B7
        gbc.setState(0x807a, 0x7d52, 0xa090, 0xc44d, 0xa1b9, 0x5198, 0x1, 0x0);
        gbc.writeMem(0x807a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x7d52);
        EXPECT(gbc.pc(), 0x807c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x807a), 0xcb);
        EXPECT(gbc.readMem(0x807b), 0x2b);
        // CB 2B 03B8
        gbc.setState(0x410e, 0x1c9, 0x1e0, 0x90b3, 0x74bd, 0xcd68, 0x1, 0x0);
        gbc.writeMem(0x410e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x1c9);
        EXPECT(gbc.pc(), 0x4110);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 03B9
        gbc.setState(0x620e, 0xab37, 0x1c30, 0x13d0, 0xb716, 0xb845, 0x1, 0x1);
        gbc.writeMem(0x620e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xab37);
        EXPECT(gbc.pc(), 0x6210);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 03BB
        gbc.setState(0xaad3, 0x1503, 0x90e0, 0xb49a, 0xa02e, 0x2b78, 0x1, 0x0);
        gbc.writeMem(0xaad3, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x1503);
        EXPECT(gbc.pc(), 0xaad5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaad3), 0xcb);
        EXPECT(gbc.readMem(0xaad4), 0x2b);
        // CB 2B 03BC
        gbc.setState(0x7a3c, 0x4260, 0x9e80, 0xd793, 0x2b74, 0xf05a, 0x1, 0x1);
        gbc.writeMem(0x7a3c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x4260);
        EXPECT(gbc.pc(), 0x7a3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 03BD
        gbc.setState(0x29d1, 0x528f, 0xa320, 0x7db4, 0xec62, 0x7358, 0x1, 0x1);
        gbc.writeMem(0x29d1, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x528f);
        EXPECT(gbc.pc(), 0x29d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 03BF
        gbc.setState(0x9903, 0xc6c6, 0x5310, 0xc085, 0x8d05, 0x5bd, 0x0, 0x0);
        gbc.writeMem(0x9903, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xc6c6);
        EXPECT(gbc.pc(), 0x9905);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9903), 0xcb);
        EXPECT(gbc.readMem(0x9904), 0x2b);
        // CB 2B 03C0
        gbc.setState(0xa2d6, 0x1603, 0xe550, 0x21b4, 0xec1e, 0x2e8a, 0x0, 0x0);
        gbc.writeMem(0xa2d6, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x1603);
        EXPECT(gbc.pc(), 0xa2d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2d6), 0xcb);
        EXPECT(gbc.readMem(0xa2d7), 0x2b);
        // CB 2B 03C1
        gbc.setState(0x589a, 0x7a11, 0x2880, 0x2012, 0x181e, 0x6cfc, 0x0, 0x1);
        gbc.writeMem(0x589a, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x7a11);
        EXPECT(gbc.pc(), 0x589c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 03C2
        gbc.setState(0x677e, 0x3d21, 0x82e0, 0x5946, 0xf658, 0xdec4, 0x0, 0x0);
        gbc.writeMem(0x677e, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x3d21);
        EXPECT(gbc.pc(), 0x6780);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 03C3
        gbc.setState(0xb997, 0x3579, 0x26d0, 0x50a4, 0x8c0, 0x32bf, 0x0, 0x0);
        gbc.writeMem(0xb997, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x3579);
        EXPECT(gbc.pc(), 0xb999);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb997), 0xcb);
        EXPECT(gbc.readMem(0xb998), 0x2b);
        // CB 2B 03C4
        gbc.setState(0xa755, 0x11cd, 0xa360, 0x7c04, 0x2deb, 0x3cb5, 0x0, 0x1);
        gbc.writeMem(0xa755, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x11cd);
        EXPECT(gbc.pc(), 0xa757);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa755), 0xcb);
        EXPECT(gbc.readMem(0xa756), 0x2b);
        // CB 2B 03C5
        gbc.setState(0xa5cf, 0xc5db, 0x78e0, 0xa130, 0x16f0, 0x1fea, 0x1, 0x0);
        gbc.writeMem(0xa5cf, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xc5db);
        EXPECT(gbc.pc(), 0xa5d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5cf), 0xcb);
        EXPECT(gbc.readMem(0xa5d0), 0x2b);
        // CB 2B 03C6
        gbc.setState(0xec2, 0xece5, 0xd10, 0xdbeb, 0xe474, 0x37b9, 0x0, 0x1);
        gbc.writeMem(0xec2, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xece5);
        EXPECT(gbc.pc(), 0xec4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 03C7
        gbc.setState(0x1d90, 0xde1e, 0xee20, 0xaba4, 0xc158, 0xfd87, 0x1, 0x0);
        gbc.writeMem(0x1d90, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xde1e);
        EXPECT(gbc.pc(), 0x1d92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 03C8
        gbc.setState(0x55a4, 0x88dc, 0x2b70, 0xbc8a, 0xf2d8, 0xb841, 0x0, 0x1);
        gbc.writeMem(0x55a4, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x88dc);
        EXPECT(gbc.pc(), 0x55a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 03C9
        gbc.setState(0x29dc, 0xa8f2, 0x7410, 0x9cfc, 0xd9e5, 0x6adb, 0x1, 0x0);
        gbc.writeMem(0x29dc, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xa8f2);
        EXPECT(gbc.pc(), 0x29de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 03CA
        gbc.setState(0xa56, 0xa0f2, 0x6350, 0x990b, 0xa577, 0x63b, 0x1, 0x1);
        gbc.writeMem(0xa56, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xa0f2);
        EXPECT(gbc.pc(), 0xa58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 03CB
        gbc.setState(0x396b, 0xd984, 0x7250, 0x42e8, 0x3f4a, 0xd754, 0x1, 0x0);
        gbc.writeMem(0x396b, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xd984);
        EXPECT(gbc.pc(), 0x396d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 03CC
        gbc.setState(0xce9d, 0xbd6e, 0x2630, 0xfa59, 0x4033, 0x9d78, 0x0, 0x0);
        gbc.writeMem(0xce9d, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xbd6e);
        EXPECT(gbc.pc(), 0xce9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce9d), 0xcb);
        EXPECT(gbc.readMem(0xce9e), 0x2b);
        // CB 2B 03CD
        gbc.setState(0x9b56, 0xef8b, 0x4180, 0x4df1, 0x9a8b, 0xdb92, 0x1, 0x1);
        gbc.writeMem(0x9b56, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xef8b);
        EXPECT(gbc.pc(), 0x9b58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b56), 0xcb);
        EXPECT(gbc.readMem(0x9b57), 0x2b);
        // CB 2B 03CE
        gbc.setState(0x4578, 0xf4e, 0x1630, 0xe3e0, 0xa28d, 0x4514, 0x1, 0x1);
        gbc.writeMem(0x4578, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xf4e);
        EXPECT(gbc.pc(), 0x457a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 03CF
        gbc.setState(0x1b34, 0xeaf8, 0xd0a0, 0x5b56, 0x28e4, 0x61d9, 0x1, 0x1);
        gbc.writeMem(0x1b34, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xeaf8);
        EXPECT(gbc.pc(), 0x1b36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 03D0
        gbc.setState(0x3a26, 0x304a, 0xa6a0, 0xc404, 0xa4, 0xf513, 0x1, 0x1);
        gbc.writeMem(0x3a26, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x304a);
        EXPECT(gbc.pc(), 0x3a28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 03D1
        gbc.setState(0x8750, 0xc19e, 0x71d0, 0x64eb, 0x748d, 0xdab8, 0x0, 0x1);
        gbc.writeMem(0x8750, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xc19e);
        EXPECT(gbc.pc(), 0x8752);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8750), 0xcb);
        EXPECT(gbc.readMem(0x8751), 0x2b);
        // CB 2B 03D2
        gbc.setState(0x7313, 0xa465, 0x1220, 0xe92f, 0x7529, 0x8865, 0x0, 0x1);
        gbc.writeMem(0x7313, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xa465);
        EXPECT(gbc.pc(), 0x7315);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 03D3
        gbc.setState(0xa154, 0x6d5a, 0xc070, 0xc32b, 0x698c, 0xa236, 0x0, 0x0);
        gbc.writeMem(0xa154, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x6d5a);
        EXPECT(gbc.pc(), 0xa156);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa154), 0xcb);
        EXPECT(gbc.readMem(0xa155), 0x2b);
        // CB 2B 03D4
        gbc.setState(0xe262, 0xcebb, 0xc580, 0x9dd9, 0x1662, 0xec3e, 0x0, 0x1);
        gbc.writeMem(0xe262, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xcebb);
        EXPECT(gbc.pc(), 0xe264);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe262), 0xcb);
        EXPECT(gbc.readMem(0xe263), 0x2b);
        // CB 2B 03D5
        gbc.setState(0x7422, 0xd200, 0x25a0, 0x4661, 0xd60e, 0x461d, 0x1, 0x1);
        gbc.writeMem(0x7422, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xd200);
        EXPECT(gbc.pc(), 0x7424);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 03D6
        gbc.setState(0x56f1, 0x610d, 0x1cc0, 0x5154, 0x909c, 0x80f9, 0x0, 0x1);
        gbc.writeMem(0x56f1, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x610d);
        EXPECT(gbc.pc(), 0x56f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 03D8
        gbc.setState(0x4f73, 0x3646, 0x1750, 0x28d0, 0xc58f, 0xc15c, 0x1, 0x0);
        gbc.writeMem(0x4f73, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x3646);
        EXPECT(gbc.pc(), 0x4f75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 03D9
        gbc.setState(0x5591, 0x28a8, 0x7ff0, 0x264c, 0x78de, 0xb7ba, 0x1, 0x0);
        gbc.writeMem(0x5591, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x28a8);
        EXPECT(gbc.pc(), 0x5593);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 2B 03DA
        gbc.setState(0xdb99, 0xd770, 0x4f00, 0x509c, 0xa247, 0xe084, 0x1, 0x1);
        gbc.writeMem(0xdb99, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xd770);
        EXPECT(gbc.pc(), 0xdb9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb99), 0xcb);
        EXPECT(gbc.readMem(0xdb9a), 0x2b);
        // CB 2B 03DB
        gbc.setState(0x2e18, 0xf10a, 0xf1d0, 0xd28c, 0xdac9, 0x5e2a, 0x1, 0x0);
        gbc.writeMem(0x2e18, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xf10a);
        EXPECT(gbc.pc(), 0x2e1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 03DC
        gbc.setState(0xc5c0, 0x876d, 0xce60, 0xadb0, 0x986d, 0x9444, 0x1, 0x1);
        gbc.writeMem(0xc5c0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x876d);
        EXPECT(gbc.pc(), 0xc5c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5c0), 0xcb);
        EXPECT(gbc.readMem(0xc5c1), 0x2b);
        // CB 2B 03DD
        gbc.setState(0x2940, 0x82b2, 0x2a40, 0x13be, 0x6ee3, 0x69db, 0x1, 0x0);
        gbc.writeMem(0x2940, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x82b2);
        EXPECT(gbc.pc(), 0x2942);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 03DE
        gbc.setState(0x4423, 0x2c1d, 0xd200, 0x4d82, 0x8faf, 0x6f7c, 0x1, 0x1);
        gbc.writeMem(0x4423, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x2c1d);
        EXPECT(gbc.pc(), 0x4425);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 03DF
        gbc.setState(0xcbd0, 0x7c6, 0xcbe0, 0x32c4, 0x3ae1, 0xd79e, 0x1, 0x0);
        gbc.writeMem(0xcbd0, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x7c6);
        EXPECT(gbc.pc(), 0xcbd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbd0), 0xcb);
        EXPECT(gbc.readMem(0xcbd1), 0x2b);
        // CB 2B 03E0
        gbc.setState(0xba3c, 0xe2e2, 0x6a50, 0x4160, 0xf173, 0x9cfc, 0x1, 0x0);
        gbc.writeMem(0xba3c, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xe2e2);
        EXPECT(gbc.pc(), 0xba3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba3c), 0xcb);
        EXPECT(gbc.readMem(0xba3d), 0x2b);
        // CB 2B 03E1
        gbc.setState(0xaf35, 0xac70, 0x98b0, 0x869a, 0x5e54, 0xd537, 0x1, 0x0);
        gbc.writeMem(0xaf35, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xac70);
        EXPECT(gbc.pc(), 0xaf37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf35), 0xcb);
        EXPECT(gbc.readMem(0xaf36), 0x2b);
        // CB 2B 03E2
        gbc.setState(0xed8f, 0x484e, 0xa40, 0x18b4, 0x4984, 0x78ea, 0x0, 0x0);
        gbc.writeMem(0xed8f, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x484e);
        EXPECT(gbc.pc(), 0xed91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed8f), 0xcb);
        EXPECT(gbc.readMem(0xed90), 0x2b);
        // CB 2B 03E3
        gbc.setState(0xaedf, 0xfbac, 0x870, 0xb1d, 0x10d, 0x4183, 0x0, 0x1);
        gbc.writeMem(0xaedf, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xfbac);
        EXPECT(gbc.pc(), 0xaee1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaedf), 0xcb);
        EXPECT(gbc.readMem(0xaee0), 0x2b);
        // CB 2B 03E4
        gbc.setState(0x7f95, 0x903c, 0xb270, 0x6ec0, 0xdcfb, 0xa74a, 0x1, 0x0);
        gbc.writeMem(0x7f95, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x903c);
        EXPECT(gbc.pc(), 0x7f97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 2B 03E5
        gbc.setState(0x84a8, 0xbbf0, 0x93d0, 0xfb2, 0x3695, 0xb615, 0x1, 0x1);
        gbc.writeMem(0x84a8, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xbbf0);
        EXPECT(gbc.pc(), 0x84aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84a8), 0xcb);
        EXPECT(gbc.readMem(0x84a9), 0x2b);
        // CB 2B 03E6
        gbc.setState(0xa737, 0xd03, 0x15d0, 0x2297, 0xf8e9, 0xbf80, 0x0, 0x1);
        gbc.writeMem(0xa737, { 0xcb, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xd03);
        EXPECT(gbc.pc(), 0xa739);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa737), 0xcb);
        EXPECT(gbc.readMem(0xa738), 0x2b);
    }
}
#endif
