#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_9f)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_9f) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // 9F 0000
        gbc.setState(0xde49, 0x95d7, 0x8c0, 0x6126, 0x349e, 0x3959, 0x0, 0x0);
        gbc.writeMem(0xde49, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x95d7);
        EXPECT(gbc.pc(), 0xde4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde49), 0x9f);
        // 9F 0001
        gbc.setState(0x9ce, 0x5263, 0x2f50, 0x3551, 0xadff, 0xb4d2, 0x0, 0x1);
        gbc.writeMem(0x9ce, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x5263);
        EXPECT(gbc.pc(), 0x9cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0002
        gbc.setState(0x251d, 0x8571, 0xede0, 0x9203, 0xd2c6, 0xf57b, 0x1, 0x1);
        gbc.writeMem(0x251d, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x8571);
        EXPECT(gbc.pc(), 0x251e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0003
        gbc.setState(0xe8b0, 0xb09b, 0xb8a0, 0x7045, 0xdca1, 0x5dcb, 0x0, 0x1);
        gbc.writeMem(0xe8b0, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xb09b);
        EXPECT(gbc.pc(), 0xe8b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8b0), 0x9f);
        // 9F 0004
        gbc.setState(0x7384, 0xac6c, 0x9f00, 0x4ecc, 0x102a, 0xcb82, 0x0, 0x1);
        gbc.writeMem(0x7384, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xac6c);
        EXPECT(gbc.pc(), 0x7385);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0005
        gbc.setState(0xc5ed, 0x3e22, 0x5640, 0x3b13, 0xf335, 0x1353, 0x0, 0x0);
        gbc.writeMem(0xc5ed, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x3e22);
        EXPECT(gbc.pc(), 0xc5ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5ed), 0x9f);
        // 9F 0006
        gbc.setState(0x4dfc, 0x64ac, 0xaab0, 0xb647, 0x89c5, 0x939e, 0x1, 0x1);
        gbc.writeMem(0x4dfc, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x64ac);
        EXPECT(gbc.pc(), 0x4dfd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0007
        gbc.setState(0x259d, 0x9bff, 0xabd0, 0x627e, 0xaa68, 0xb6f1, 0x0, 0x1);
        gbc.writeMem(0x259d, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x9bff);
        EXPECT(gbc.pc(), 0x259e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0008
        gbc.setState(0xc30f, 0x9ddb, 0xf850, 0x1982, 0x6e97, 0xf365, 0x0, 0x0);
        gbc.writeMem(0xc30f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x9ddb);
        EXPECT(gbc.pc(), 0xc310);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc30f), 0x9f);
        // 9F 0009
        gbc.setState(0xd3b5, 0xedcd, 0xbb90, 0x36b, 0xd08d, 0xd400, 0x1, 0x1);
        gbc.writeMem(0xd3b5, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xedcd);
        EXPECT(gbc.pc(), 0xd3b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3b5), 0x9f);
        // 9F 000A
        gbc.setState(0x1ca1, 0x91db, 0x81f0, 0xc744, 0x4366, 0x8a74, 0x1, 0x1);
        gbc.writeMem(0x1ca1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x91db);
        EXPECT(gbc.pc(), 0x1ca2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 000B
        gbc.setState(0x91e0, 0xed38, 0x1780, 0x8c42, 0xf7c, 0x7ed, 0x0, 0x0);
        gbc.writeMem(0x91e0, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xed38);
        EXPECT(gbc.pc(), 0x91e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91e0), 0x9f);
        // 9F 000C
        gbc.setState(0x5f10, 0xd17a, 0x2c40, 0x54a2, 0xc654, 0x7e8f, 0x1, 0x1);
        gbc.writeMem(0x5f10, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xd17a);
        EXPECT(gbc.pc(), 0x5f11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 000D
        gbc.setState(0x6586, 0xcde0, 0xe010, 0x21d7, 0x2c08, 0x8c9a, 0x0, 0x0);
        gbc.writeMem(0x6586, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xcde0);
        EXPECT(gbc.pc(), 0x6587);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 000E
        gbc.setState(0x60f9, 0xcadc, 0x5600, 0xccf0, 0x8b2d, 0x416a, 0x1, 0x1);
        gbc.writeMem(0x60f9, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xcadc);
        EXPECT(gbc.pc(), 0x60fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 000F
        gbc.setState(0xaafb, 0x909d, 0x15f0, 0xb87c, 0x8f63, 0x47de, 0x0, 0x1);
        gbc.writeMem(0xaafb, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x909d);
        EXPECT(gbc.pc(), 0xaafc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaafb), 0x9f);
        // 9F 0011
        gbc.setState(0x9f6e, 0x382d, 0x5440, 0x74b0, 0x414e, 0x63ca, 0x0, 0x0);
        gbc.writeMem(0x9f6e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x382d);
        EXPECT(gbc.pc(), 0x9f6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f6e), 0x9f);
        // 9F 0012
        gbc.setState(0x6da9, 0x60a1, 0x62e0, 0xb4d4, 0xbae, 0x4b4e, 0x0, 0x0);
        gbc.writeMem(0x6da9, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x60a1);
        EXPECT(gbc.pc(), 0x6daa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0014
        gbc.setState(0xe6cc, 0xf215, 0x8a80, 0x2713, 0xa396, 0x1a18, 0x1, 0x1);
        gbc.writeMem(0xe6cc, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xf215);
        EXPECT(gbc.pc(), 0xe6cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6cc), 0x9f);
        // 9F 0015
        gbc.setState(0xad79, 0x237c, 0x4b0, 0x14c1, 0x9ca0, 0xbe47, 0x1, 0x1);
        gbc.writeMem(0xad79, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x237c);
        EXPECT(gbc.pc(), 0xad7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad79), 0x9f);
        // 9F 0016
        gbc.setState(0xdb47, 0x4245, 0x98e0, 0xd6d8, 0xac27, 0xf76c, 0x1, 0x0);
        gbc.writeMem(0xdb47, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x4245);
        EXPECT(gbc.pc(), 0xdb48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb47), 0x9f);
        // 9F 0017
        gbc.setState(0x2e7, 0xe23b, 0xa1e0, 0xf269, 0x6c5d, 0xf419, 0x0, 0x1);
        gbc.writeMem(0x2e7, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xe23b);
        EXPECT(gbc.pc(), 0x2e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0018
        gbc.setState(0xa84c, 0xf341, 0x29e0, 0xf5ba, 0x3bb2, 0x8885, 0x0, 0x0);
        gbc.writeMem(0xa84c, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xf341);
        EXPECT(gbc.pc(), 0xa84d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa84c), 0x9f);
        // 9F 0019
        gbc.setState(0x6db6, 0x18d3, 0x2700, 0x767a, 0x1ddb, 0xcf8e, 0x0, 0x1);
        gbc.writeMem(0x6db6, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x18d3);
        EXPECT(gbc.pc(), 0x6db7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 001A
        gbc.setState(0x2964, 0xdde5, 0x5170, 0xfcd2, 0x39fa, 0xc6af, 0x0, 0x0);
        gbc.writeMem(0x2964, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xdde5);
        EXPECT(gbc.pc(), 0x2965);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 001B
        gbc.setState(0x61a, 0x6827, 0x6110, 0xd3c9, 0xb75c, 0x492c, 0x0, 0x0);
        gbc.writeMem(0x61a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x6827);
        EXPECT(gbc.pc(), 0x61b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 001C
        gbc.setState(0x70b5, 0xd55b, 0x1750, 0xbcd0, 0x8a78, 0xcec3, 0x1, 0x0);
        gbc.writeMem(0x70b5, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xd55b);
        EXPECT(gbc.pc(), 0x70b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 001D
        gbc.setState(0x644f, 0x9ba3, 0xf00, 0xfd33, 0xac13, 0xdcbd, 0x1, 0x1);
        gbc.writeMem(0x644f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x9ba3);
        EXPECT(gbc.pc(), 0x6450);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 001E
        gbc.setState(0x2c10, 0x110c, 0x2190, 0x31f, 0x81f2, 0xc46e, 0x1, 0x0);
        gbc.writeMem(0x2c10, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x110c);
        EXPECT(gbc.pc(), 0x2c11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 001F
        gbc.setState(0x3f04, 0x6ed, 0xae40, 0xcfb0, 0xd05e, 0xa69c, 0x1, 0x1);
        gbc.writeMem(0x3f04, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x6ed);
        EXPECT(gbc.pc(), 0x3f05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0020
        gbc.setState(0xd495, 0x38c6, 0x680, 0x7e64, 0x816, 0xf3b7, 0x1, 0x1);
        gbc.writeMem(0xd495, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x38c6);
        EXPECT(gbc.pc(), 0xd496);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd495), 0x9f);
        // 9F 0021
        gbc.setState(0xa0c0, 0x4832, 0xd1a0, 0x93ca, 0x7bfd, 0xef07, 0x1, 0x0);
        gbc.writeMem(0xa0c0, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x4832);
        EXPECT(gbc.pc(), 0xa0c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0c0), 0x9f);
        // 9F 0022
        gbc.setState(0x634a, 0x3661, 0x9190, 0xac07, 0x3d43, 0xac53, 0x1, 0x0);
        gbc.writeMem(0x634a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x3661);
        EXPECT(gbc.pc(), 0x634b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0023
        gbc.setState(0x2981, 0x810c, 0x4210, 0xc921, 0x5ac6, 0xaf2d, 0x0, 0x1);
        gbc.writeMem(0x2981, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x810c);
        EXPECT(gbc.pc(), 0x2982);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0024
        gbc.setState(0x52aa, 0xb7a4, 0xa6e0, 0xdf6c, 0x807b, 0xfb42, 0x0, 0x1);
        gbc.writeMem(0x52aa, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xb7a4);
        EXPECT(gbc.pc(), 0x52ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0025
        gbc.setState(0x6f9e, 0xa243, 0x7040, 0xf36f, 0xd9ff, 0x6e60, 0x0, 0x0);
        gbc.writeMem(0x6f9e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xa243);
        EXPECT(gbc.pc(), 0x6f9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0026
        gbc.setState(0x6e69, 0xd322, 0xf910, 0x304b, 0x2670, 0x7611, 0x0, 0x1);
        gbc.writeMem(0x6e69, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xd322);
        EXPECT(gbc.pc(), 0x6e6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0027
        gbc.setState(0x2735, 0x3708, 0xec10, 0x8b68, 0x4a18, 0x9274, 0x1, 0x0);
        gbc.writeMem(0x2735, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x3708);
        EXPECT(gbc.pc(), 0x2736);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0028
        gbc.setState(0x6cdd, 0x3d41, 0x8a10, 0x3ee0, 0x6c91, 0x5e07, 0x1, 0x1);
        gbc.writeMem(0x6cdd, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x3d41);
        EXPECT(gbc.pc(), 0x6cde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0029
        gbc.setState(0x2dc2, 0x2d1f, 0x6340, 0x5cbb, 0xf9d1, 0xa1dd, 0x0, 0x1);
        gbc.writeMem(0x2dc2, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x2d1f);
        EXPECT(gbc.pc(), 0x2dc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 002A
        gbc.setState(0x9fc6, 0x3357, 0xe910, 0x2bad, 0x2739, 0xc70a, 0x0, 0x1);
        gbc.writeMem(0x9fc6, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x3357);
        EXPECT(gbc.pc(), 0x9fc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fc6), 0x9f);
        // 9F 002B
        gbc.setState(0x669d, 0x71fa, 0x4100, 0xb3d7, 0x9520, 0xd40c, 0x1, 0x0);
        gbc.writeMem(0x669d, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x71fa);
        EXPECT(gbc.pc(), 0x669e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 002C
        gbc.setState(0x82e7, 0x1179, 0xbf40, 0xfb89, 0x2f2, 0xecd, 0x0, 0x1);
        gbc.writeMem(0x82e7, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x1179);
        EXPECT(gbc.pc(), 0x82e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82e7), 0x9f);
        // 9F 002D
        gbc.setState(0x976a, 0x649a, 0x12c0, 0x2a98, 0xff64, 0x6a55, 0x1, 0x1);
        gbc.writeMem(0x976a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x649a);
        EXPECT(gbc.pc(), 0x976b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x976a), 0x9f);
        // 9F 002E
        gbc.setState(0xecfe, 0xca9b, 0x8460, 0x6e09, 0x9f08, 0xd1e3, 0x1, 0x0);
        gbc.writeMem(0xecfe, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xca9b);
        EXPECT(gbc.pc(), 0xecff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecfe), 0x9f);
        // 9F 002F
        gbc.setState(0xa9d4, 0x3220, 0xc630, 0xe04e, 0x909e, 0xe443, 0x0, 0x1);
        gbc.writeMem(0xa9d4, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x3220);
        EXPECT(gbc.pc(), 0xa9d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9d4), 0x9f);
        // 9F 0030
        gbc.setState(0x25f0, 0xb053, 0xe620, 0x65ae, 0xf847, 0x800e, 0x0, 0x0);
        gbc.writeMem(0x25f0, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xb053);
        EXPECT(gbc.pc(), 0x25f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0031
        gbc.setState(0x6f07, 0x60b7, 0x9780, 0x4c03, 0xd627, 0x459b, 0x1, 0x0);
        gbc.writeMem(0x6f07, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x60b7);
        EXPECT(gbc.pc(), 0x6f08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0033
        gbc.setState(0x5dcf, 0xff46, 0x7e10, 0xab80, 0xad74, 0x389a, 0x1, 0x1);
        gbc.writeMem(0x5dcf, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xff46);
        EXPECT(gbc.pc(), 0x5dd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0034
        gbc.setState(0xa14a, 0x61e6, 0xe430, 0xa629, 0xa383, 0x903e, 0x1, 0x0);
        gbc.writeMem(0xa14a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x61e6);
        EXPECT(gbc.pc(), 0xa14b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa14a), 0x9f);
        // 9F 0035
        gbc.setState(0xda35, 0x799b, 0x3a90, 0x6c82, 0x63f0, 0x2725, 0x1, 0x0);
        gbc.writeMem(0xda35, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x799b);
        EXPECT(gbc.pc(), 0xda36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda35), 0x9f);
        // 9F 0036
        gbc.setState(0xc945, 0x8c44, 0xeed0, 0xc206, 0xf73c, 0xc0bf, 0x1, 0x1);
        gbc.writeMem(0xc945, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x8c44);
        EXPECT(gbc.pc(), 0xc946);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc945), 0x9f);
        // 9F 0037
        gbc.setState(0x517, 0x6e36, 0xc860, 0x622e, 0xd29, 0x2673, 0x0, 0x1);
        gbc.writeMem(0x517, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x6e36);
        EXPECT(gbc.pc(), 0x518);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0038
        gbc.setState(0x13c5, 0x37a8, 0x1600, 0x9cb2, 0x289b, 0xd2c5, 0x1, 0x0);
        gbc.writeMem(0x13c5, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x37a8);
        EXPECT(gbc.pc(), 0x13c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0039
        gbc.setState(0x3929, 0xe250, 0x4790, 0xab87, 0xf60a, 0x9c75, 0x1, 0x0);
        gbc.writeMem(0x3929, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xe250);
        EXPECT(gbc.pc(), 0x392a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 003A
        gbc.setState(0x6235, 0xbcc4, 0x1e50, 0x66f9, 0xe39a, 0xaf04, 0x1, 0x0);
        gbc.writeMem(0x6235, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xbcc4);
        EXPECT(gbc.pc(), 0x6236);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 003B
        gbc.setState(0x120e, 0x5050, 0x9e00, 0xa919, 0xb834, 0x28bd, 0x1, 0x1);
        gbc.writeMem(0x120e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x5050);
        EXPECT(gbc.pc(), 0x120f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 003D
        gbc.setState(0x30ec, 0x991a, 0x930, 0x6d56, 0x254f, 0xe7a0, 0x0, 0x1);
        gbc.writeMem(0x30ec, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x991a);
        EXPECT(gbc.pc(), 0x30ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 003E
        gbc.setState(0xe1ab, 0x80ac, 0x7e30, 0xb073, 0xf0b6, 0x3ac0, 0x0, 0x0);
        gbc.writeMem(0xe1ab, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x80ac);
        EXPECT(gbc.pc(), 0xe1ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1ab), 0x9f);
        // 9F 003F
        gbc.setState(0xc267, 0xbe3c, 0x84e0, 0x1717, 0xe561, 0xa660, 0x0, 0x1);
        gbc.writeMem(0xc267, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xbe3c);
        EXPECT(gbc.pc(), 0xc268);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc267), 0x9f);
        // 9F 0040
        gbc.setState(0xd472, 0x2440, 0x8120, 0xa689, 0xa24e, 0x2c72, 0x1, 0x0);
        gbc.writeMem(0xd472, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x2440);
        EXPECT(gbc.pc(), 0xd473);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd472), 0x9f);
        // 9F 0041
        gbc.setState(0x64af, 0x5ec8, 0x4c90, 0x22d7, 0xe0ce, 0x4571, 0x1, 0x0);
        gbc.writeMem(0x64af, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x5ec8);
        EXPECT(gbc.pc(), 0x64b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0042
        gbc.setState(0x73c9, 0xe990, 0xf6d0, 0x83ad, 0x2e6e, 0x1b4d, 0x0, 0x1);
        gbc.writeMem(0x73c9, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xe990);
        EXPECT(gbc.pc(), 0x73ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0043
        gbc.setState(0xc3af, 0x3c8e, 0x1780, 0xc4f0, 0xd376, 0x689b, 0x1, 0x0);
        gbc.writeMem(0xc3af, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x3c8e);
        EXPECT(gbc.pc(), 0xc3b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3af), 0x9f);
        // 9F 0045
        gbc.setState(0x559d, 0x3da4, 0x87c0, 0x71b8, 0x3a9, 0x4296, 0x1, 0x1);
        gbc.writeMem(0x559d, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x3da4);
        EXPECT(gbc.pc(), 0x559e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0046
        gbc.setState(0x134e, 0x5ca6, 0x7e10, 0xa386, 0x9228, 0xd058, 0x0, 0x0);
        gbc.writeMem(0x134e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x5ca6);
        EXPECT(gbc.pc(), 0x134f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0047
        gbc.setState(0x3036, 0x4575, 0x5940, 0x5a36, 0x26a3, 0x1730, 0x0, 0x1);
        gbc.writeMem(0x3036, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x4575);
        EXPECT(gbc.pc(), 0x3037);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0048
        gbc.setState(0x90aa, 0x898d, 0x6910, 0xedd7, 0xeaf3, 0x4b7f, 0x0, 0x0);
        gbc.writeMem(0x90aa, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x898d);
        EXPECT(gbc.pc(), 0x90ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90aa), 0x9f);
        // 9F 0049
        gbc.setState(0x8ca9, 0xe2e7, 0xb240, 0x3bb6, 0xfa0d, 0x203d, 0x1, 0x1);
        gbc.writeMem(0x8ca9, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xe2e7);
        EXPECT(gbc.pc(), 0x8caa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ca9), 0x9f);
        // 9F 004A
        gbc.setState(0x2bde, 0xfa9b, 0x1040, 0x62fd, 0x1f74, 0xcdce, 0x1, 0x1);
        gbc.writeMem(0x2bde, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xfa9b);
        EXPECT(gbc.pc(), 0x2bdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 004B
        gbc.setState(0x6b0a, 0x35e1, 0x5c60, 0x11f3, 0xcadb, 0xf95f, 0x0, 0x1);
        gbc.writeMem(0x6b0a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x35e1);
        EXPECT(gbc.pc(), 0x6b0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 004C
        gbc.setState(0x996b, 0x3952, 0x86b0, 0x45f4, 0x55e9, 0xd08b, 0x1, 0x0);
        gbc.writeMem(0x996b, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x3952);
        EXPECT(gbc.pc(), 0x996c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x996b), 0x9f);
        // 9F 004E
        gbc.setState(0x6833, 0x97c6, 0xc170, 0x7ead, 0x133, 0xdd9f, 0x0, 0x1);
        gbc.writeMem(0x6833, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x97c6);
        EXPECT(gbc.pc(), 0x6834);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 004F
        gbc.setState(0x43b0, 0xf6ac, 0xfe80, 0x4539, 0x1707, 0x2bc5, 0x0, 0x0);
        gbc.writeMem(0x43b0, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xf6ac);
        EXPECT(gbc.pc(), 0x43b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0050
        gbc.setState(0x773a, 0x8557, 0x250, 0x13af, 0x7d88, 0xbc24, 0x1, 0x1);
        gbc.writeMem(0x773a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x8557);
        EXPECT(gbc.pc(), 0x773b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0051
        gbc.setState(0x1b5, 0xaede, 0x1d90, 0xb359, 0x36a6, 0xc322, 0x1, 0x1);
        gbc.writeMem(0x1b5, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xaede);
        EXPECT(gbc.pc(), 0x1b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0052
        gbc.setState(0x7202, 0x434a, 0x3f0, 0x6960, 0x463e, 0x3df8, 0x1, 0x1);
        gbc.writeMem(0x7202, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x434a);
        EXPECT(gbc.pc(), 0x7203);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0053
        gbc.setState(0xc046, 0x36d, 0xe2b0, 0x9d5b, 0x71ae, 0xf80, 0x1, 0x1);
        gbc.writeMem(0xc046, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x36d);
        EXPECT(gbc.pc(), 0xc047);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc046), 0x9f);
        // 9F 0054
        gbc.setState(0x475, 0xa695, 0x9cb0, 0xa1d9, 0x1225, 0x4fb1, 0x0, 0x0);
        gbc.writeMem(0x475, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xa695);
        EXPECT(gbc.pc(), 0x476);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0055
        gbc.setState(0x72dc, 0xafa4, 0xe450, 0x1db8, 0x9388, 0x9c7a, 0x1, 0x1);
        gbc.writeMem(0x72dc, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xafa4);
        EXPECT(gbc.pc(), 0x72dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0056
        gbc.setState(0x18ec, 0xefc, 0x51d0, 0x72de, 0x32ec, 0x5807, 0x0, 0x0);
        gbc.writeMem(0x18ec, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xefc);
        EXPECT(gbc.pc(), 0x18ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0057
        gbc.setState(0x1152, 0xb608, 0xf000, 0x9de8, 0xb5e, 0xcc90, 0x0, 0x0);
        gbc.writeMem(0x1152, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xb608);
        EXPECT(gbc.pc(), 0x1153);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0058
        gbc.setState(0x933a, 0x2aba, 0xba50, 0x9d14, 0xc8b7, 0x3472, 0x0, 0x0);
        gbc.writeMem(0x933a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x2aba);
        EXPECT(gbc.pc(), 0x933b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x933a), 0x9f);
        // 9F 0059
        gbc.setState(0x8b9a, 0xdc54, 0xcbc0, 0xd346, 0x873c, 0xae39, 0x1, 0x0);
        gbc.writeMem(0x8b9a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xdc54);
        EXPECT(gbc.pc(), 0x8b9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b9a), 0x9f);
        // 9F 005A
        gbc.setState(0x4efb, 0x6d29, 0x8ea0, 0xe751, 0x8d76, 0x334a, 0x1, 0x0);
        gbc.writeMem(0x4efb, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x6d29);
        EXPECT(gbc.pc(), 0x4efc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 005B
        gbc.setState(0x9f52, 0x13e5, 0x4c50, 0xc672, 0xffbd, 0x862d, 0x0, 0x0);
        gbc.writeMem(0x9f52, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x13e5);
        EXPECT(gbc.pc(), 0x9f53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f52), 0x9f);
        // 9F 005C
        gbc.setState(0xe02f, 0x2e88, 0x1b20, 0xccc0, 0x99a5, 0xe6b8, 0x1, 0x0);
        gbc.writeMem(0xe02f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x2e88);
        EXPECT(gbc.pc(), 0xe030);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe02f), 0x9f);
        // 9F 005D
        gbc.setState(0x23aa, 0x17bf, 0x3ef0, 0x82ef, 0xc2d2, 0x682f, 0x1, 0x1);
        gbc.writeMem(0x23aa, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x17bf);
        EXPECT(gbc.pc(), 0x23ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 005E
        gbc.setState(0xbc6d, 0xa15c, 0xae00, 0x2e01, 0xb56, 0x5244, 0x1, 0x0);
        gbc.writeMem(0xbc6d, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xa15c);
        EXPECT(gbc.pc(), 0xbc6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc6d), 0x9f);
        // 9F 0060
        gbc.setState(0xd353, 0xa307, 0x7e10, 0x3e10, 0x4770, 0x60b0, 0x1, 0x1);
        gbc.writeMem(0xd353, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xa307);
        EXPECT(gbc.pc(), 0xd354);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd353), 0x9f);
        // 9F 0061
        gbc.setState(0x6763, 0x9be0, 0xc1e0, 0xbce5, 0x5741, 0xa531, 0x0, 0x1);
        gbc.writeMem(0x6763, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x9be0);
        EXPECT(gbc.pc(), 0x6764);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0063
        gbc.setState(0x632e, 0x8b76, 0xd270, 0x4636, 0xfddb, 0xbea6, 0x1, 0x0);
        gbc.writeMem(0x632e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x8b76);
        EXPECT(gbc.pc(), 0x632f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0064
        gbc.setState(0x6ae1, 0x991c, 0x6dd0, 0x778f, 0x5ddf, 0x6999, 0x1, 0x1);
        gbc.writeMem(0x6ae1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x991c);
        EXPECT(gbc.pc(), 0x6ae2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0065
        gbc.setState(0x7e88, 0xa55c, 0x8280, 0xba99, 0x7cda, 0x76e2, 0x0, 0x1);
        gbc.writeMem(0x7e88, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xa55c);
        EXPECT(gbc.pc(), 0x7e89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0066
        gbc.setState(0x593e, 0xfe54, 0x49a0, 0x6565, 0xce51, 0xcb94, 0x0, 0x0);
        gbc.writeMem(0x593e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xfe54);
        EXPECT(gbc.pc(), 0x593f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0067
        gbc.setState(0x8449, 0xef7c, 0x3bf0, 0x9d1a, 0x34f9, 0x30af, 0x1, 0x0);
        gbc.writeMem(0x8449, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xef7c);
        EXPECT(gbc.pc(), 0x844a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8449), 0x9f);
        // 9F 0068
        gbc.setState(0xa38d, 0x6b4a, 0x3c00, 0x5f4b, 0xe3c7, 0x2d0f, 0x1, 0x0);
        gbc.writeMem(0xa38d, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x6b4a);
        EXPECT(gbc.pc(), 0xa38e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa38d), 0x9f);
        // 9F 0069
        gbc.setState(0x85e9, 0x795e, 0xb7d0, 0x8b90, 0x7164, 0xa0e, 0x0, 0x0);
        gbc.writeMem(0x85e9, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x795e);
        EXPECT(gbc.pc(), 0x85ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85e9), 0x9f);
        // 9F 006A
        gbc.setState(0xe4c8, 0xac49, 0x43e0, 0xef4c, 0xb127, 0xc23d, 0x0, 0x0);
        gbc.writeMem(0xe4c8, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xac49);
        EXPECT(gbc.pc(), 0xe4c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4c8), 0x9f);
        // 9F 006B
        gbc.setState(0xada4, 0x24f2, 0xdf60, 0xec28, 0xd9b3, 0x771b, 0x0, 0x0);
        gbc.writeMem(0xada4, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x24f2);
        EXPECT(gbc.pc(), 0xada5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xada4), 0x9f);
        // 9F 006C
        gbc.setState(0xee56, 0x22a, 0xeb10, 0xce6, 0xcb1c, 0xac26, 0x0, 0x0);
        gbc.writeMem(0xee56, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x22a);
        EXPECT(gbc.pc(), 0xee57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee56), 0x9f);
        // 9F 006D
        gbc.setState(0xb52, 0xa8ad, 0x44b0, 0x2491, 0x4ecc, 0x4d53, 0x0, 0x0);
        gbc.writeMem(0xb52, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xa8ad);
        EXPECT(gbc.pc(), 0xb53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 006E
        gbc.setState(0x464, 0x9635, 0x5640, 0x4f06, 0x494, 0x9ac5, 0x1, 0x0);
        gbc.writeMem(0x464, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x9635);
        EXPECT(gbc.pc(), 0x465);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 006F
        gbc.setState(0xdfb2, 0x5888, 0xb4b0, 0x4664, 0x2d7a, 0x707, 0x1, 0x0);
        gbc.writeMem(0xdfb2, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x5888);
        EXPECT(gbc.pc(), 0xdfb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfb2), 0x9f);
        // 9F 0070
        gbc.setState(0x1967, 0x189f, 0xd080, 0x370a, 0x5b9f, 0xa7c4, 0x0, 0x0);
        gbc.writeMem(0x1967, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x189f);
        EXPECT(gbc.pc(), 0x1968);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0071
        gbc.setState(0xc3bd, 0xd4cd, 0x6340, 0x7738, 0x4403, 0x8003, 0x1, 0x1);
        gbc.writeMem(0xc3bd, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xd4cd);
        EXPECT(gbc.pc(), 0xc3be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3bd), 0x9f);
        // 9F 0072
        gbc.setState(0xee3e, 0xca10, 0xb4f0, 0x163b, 0xc97c, 0x7b7a, 0x1, 0x0);
        gbc.writeMem(0xee3e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xca10);
        EXPECT(gbc.pc(), 0xee3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee3e), 0x9f);
        // 9F 0073
        gbc.setState(0xc4d9, 0xaa50, 0xdc00, 0xe38, 0x5de1, 0xa246, 0x1, 0x1);
        gbc.writeMem(0xc4d9, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xaa50);
        EXPECT(gbc.pc(), 0xc4da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4d9), 0x9f);
        // 9F 0074
        gbc.setState(0x4709, 0x2e59, 0x9e60, 0xb310, 0x563c, 0x3446, 0x1, 0x0);
        gbc.writeMem(0x4709, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x2e59);
        EXPECT(gbc.pc(), 0x470a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0075
        gbc.setState(0xc59a, 0x707a, 0xdc70, 0x2814, 0x4357, 0x76e5, 0x0, 0x0);
        gbc.writeMem(0xc59a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x707a);
        EXPECT(gbc.pc(), 0xc59b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc59a), 0x9f);
        // 9F 0076
        gbc.setState(0xaf8e, 0x1613, 0xe540, 0xf1ed, 0xedd3, 0xaccc, 0x0, 0x1);
        gbc.writeMem(0xaf8e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x1613);
        EXPECT(gbc.pc(), 0xaf8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf8e), 0x9f);
        // 9F 0078
        gbc.setState(0x6b75, 0x47fb, 0xb060, 0x9e61, 0xb105, 0x8042, 0x0, 0x0);
        gbc.writeMem(0x6b75, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x47fb);
        EXPECT(gbc.pc(), 0x6b76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0079
        gbc.setState(0xd0a2, 0xde67, 0xf810, 0xf4e5, 0xbbc9, 0x4d55, 0x1, 0x0);
        gbc.writeMem(0xd0a2, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xde67);
        EXPECT(gbc.pc(), 0xd0a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0a2), 0x9f);
        // 9F 007B
        gbc.setState(0x1d12, 0xdd32, 0x1250, 0x4c45, 0x5c04, 0x6f70, 0x0, 0x1);
        gbc.writeMem(0x1d12, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xdd32);
        EXPECT(gbc.pc(), 0x1d13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 007C
        gbc.setState(0x2119, 0xcc8e, 0x63c0, 0x5e08, 0xc1e3, 0xa8df, 0x0, 0x0);
        gbc.writeMem(0x2119, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xcc8e);
        EXPECT(gbc.pc(), 0x211a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 007D
        gbc.setState(0x8a44, 0xe69f, 0x5300, 0x73c, 0xacc6, 0xdbba, 0x1, 0x1);
        gbc.writeMem(0x8a44, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xe69f);
        EXPECT(gbc.pc(), 0x8a45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a44), 0x9f);
        // 9F 007F
        gbc.setState(0xe215, 0x3d95, 0xb9c0, 0xc327, 0xc65f, 0x9191, 0x0, 0x1);
        gbc.writeMem(0xe215, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x3d95);
        EXPECT(gbc.pc(), 0xe216);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe215), 0x9f);
        // 9F 0080
        gbc.setState(0xaddd, 0x305a, 0xec10, 0xc45b, 0x193c, 0x987, 0x1, 0x1);
        gbc.writeMem(0xaddd, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x305a);
        EXPECT(gbc.pc(), 0xadde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaddd), 0x9f);
        // 9F 0081
        gbc.setState(0x12b5, 0xcba, 0xb0c0, 0xabd2, 0xa779, 0x1b8a, 0x1, 0x1);
        gbc.writeMem(0x12b5, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xcba);
        EXPECT(gbc.pc(), 0x12b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0083
        gbc.setState(0x542f, 0xf5ab, 0xfe0, 0x65f8, 0xa814, 0xed4, 0x0, 0x0);
        gbc.writeMem(0x542f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xf5ab);
        EXPECT(gbc.pc(), 0x5430);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0084
        gbc.setState(0x9c82, 0xe273, 0x2510, 0xb025, 0x6446, 0xc2c2, 0x0, 0x1);
        gbc.writeMem(0x9c82, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xe273);
        EXPECT(gbc.pc(), 0x9c83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c82), 0x9f);
        // 9F 0085
        gbc.setState(0xbc50, 0x5f2d, 0x2c40, 0xa981, 0x5382, 0x31f7, 0x0, 0x0);
        gbc.writeMem(0xbc50, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x5f2d);
        EXPECT(gbc.pc(), 0xbc51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc50), 0x9f);
        // 9F 0086
        gbc.setState(0x5785, 0x7991, 0x1200, 0x4690, 0x14c9, 0xbd0a, 0x0, 0x1);
        gbc.writeMem(0x5785, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x7991);
        EXPECT(gbc.pc(), 0x5786);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0088
        gbc.setState(0x7c6c, 0x410c, 0xc90, 0xf1e1, 0xa27e, 0x99a4, 0x1, 0x1);
        gbc.writeMem(0x7c6c, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x410c);
        EXPECT(gbc.pc(), 0x7c6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0089
        gbc.setState(0x5074, 0xdab, 0xfb60, 0xd75, 0xc596, 0x67c0, 0x1, 0x1);
        gbc.writeMem(0x5074, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xdab);
        EXPECT(gbc.pc(), 0x5075);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 008C
        gbc.setState(0x69e0, 0xd3e, 0x44b0, 0xf79a, 0xf2d4, 0x29df, 0x0, 0x1);
        gbc.writeMem(0x69e0, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xd3e);
        EXPECT(gbc.pc(), 0x69e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 008D
        gbc.setState(0xe387, 0xff52, 0x9050, 0x16f2, 0x69a7, 0xc60f, 0x1, 0x0);
        gbc.writeMem(0xe387, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xff52);
        EXPECT(gbc.pc(), 0xe388);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe387), 0x9f);
        // 9F 008E
        gbc.setState(0xcdeb, 0x1e21, 0xa1e0, 0x71f7, 0xdc48, 0x7b90, 0x0, 0x0);
        gbc.writeMem(0xcdeb, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x1e21);
        EXPECT(gbc.pc(), 0xcdec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdeb), 0x9f);
        // 9F 008F
        gbc.setState(0xcb46, 0xc109, 0x7790, 0x356c, 0x7630, 0x9f62, 0x0, 0x1);
        gbc.writeMem(0xcb46, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xc109);
        EXPECT(gbc.pc(), 0xcb47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb46), 0x9f);
        // 9F 0090
        gbc.setState(0x6e90, 0xd28f, 0x55f0, 0x4199, 0x888, 0x3fd, 0x0, 0x1);
        gbc.writeMem(0x6e90, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xd28f);
        EXPECT(gbc.pc(), 0x6e91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0091
        gbc.setState(0xab7c, 0x74e, 0x8530, 0xea57, 0xd4e2, 0xdbf3, 0x1, 0x0);
        gbc.writeMem(0xab7c, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x74e);
        EXPECT(gbc.pc(), 0xab7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab7c), 0x9f);
        // 9F 0092
        gbc.setState(0xd1b0, 0x9c69, 0xe960, 0xb336, 0xc5a5, 0xeaa0, 0x1, 0x0);
        gbc.writeMem(0xd1b0, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x9c69);
        EXPECT(gbc.pc(), 0xd1b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1b0), 0x9f);
        // 9F 0093
        gbc.setState(0x8a23, 0xbe16, 0xb7b0, 0x1796, 0x5dee, 0xd87, 0x0, 0x1);
        gbc.writeMem(0x8a23, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xbe16);
        EXPECT(gbc.pc(), 0x8a24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a23), 0x9f);
        // 9F 0094
        gbc.setState(0x8a0f, 0x2e11, 0x8940, 0xa29, 0xc41c, 0xf42a, 0x0, 0x1);
        gbc.writeMem(0x8a0f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x2e11);
        EXPECT(gbc.pc(), 0x8a10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a0f), 0x9f);
        // 9F 0095
        gbc.setState(0x22e1, 0x15ba, 0x2070, 0x4b97, 0x5c1f, 0x1ce2, 0x0, 0x1);
        gbc.writeMem(0x22e1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x15ba);
        EXPECT(gbc.pc(), 0x22e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0096
        gbc.setState(0xb30c, 0x881a, 0x6c70, 0x194e, 0xbc30, 0x69df, 0x1, 0x0);
        gbc.writeMem(0xb30c, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x881a);
        EXPECT(gbc.pc(), 0xb30d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb30c), 0x9f);
        // 9F 0097
        gbc.setState(0xc9df, 0xe41, 0x4ca0, 0x2f21, 0x34ad, 0x8a40, 0x1, 0x1);
        gbc.writeMem(0xc9df, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xe41);
        EXPECT(gbc.pc(), 0xc9e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9df), 0x9f);
        // 9F 0098
        gbc.setState(0x4af0, 0x7c0c, 0xb680, 0xb706, 0x99f7, 0x5fff, 0x0, 0x1);
        gbc.writeMem(0x4af0, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x7c0c);
        EXPECT(gbc.pc(), 0x4af1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0099
        gbc.setState(0x8205, 0x27d8, 0x43b0, 0xad78, 0x796f, 0xc307, 0x1, 0x1);
        gbc.writeMem(0x8205, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x27d8);
        EXPECT(gbc.pc(), 0x8206);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8205), 0x9f);
        // 9F 009A
        gbc.setState(0x9dc8, 0x7722, 0x6d30, 0xb393, 0xa870, 0x9324, 0x1, 0x0);
        gbc.writeMem(0x9dc8, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x7722);
        EXPECT(gbc.pc(), 0x9dc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dc8), 0x9f);
        // 9F 009B
        gbc.setState(0xd4aa, 0xabc2, 0x4090, 0x6ca9, 0x2a96, 0xd65d, 0x0, 0x1);
        gbc.writeMem(0xd4aa, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xabc2);
        EXPECT(gbc.pc(), 0xd4ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4aa), 0x9f);
        // 9F 009C
        gbc.setState(0x286b, 0x702b, 0x6890, 0x2305, 0xd88, 0xf1db, 0x0, 0x0);
        gbc.writeMem(0x286b, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x702b);
        EXPECT(gbc.pc(), 0x286c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 009D
        gbc.setState(0xb9d6, 0x1b62, 0x8790, 0x7fd0, 0x60a3, 0x2d1a, 0x1, 0x1);
        gbc.writeMem(0xb9d6, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x1b62);
        EXPECT(gbc.pc(), 0xb9d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9d6), 0x9f);
        // 9F 009E
        gbc.setState(0xe5dc, 0x308b, 0xbb10, 0x8acc, 0x8d98, 0x2ef8, 0x1, 0x0);
        gbc.writeMem(0xe5dc, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x308b);
        EXPECT(gbc.pc(), 0xe5dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5dc), 0x9f);
        // 9F 009F
        gbc.setState(0x2005, 0xc775, 0xf5c0, 0xaec, 0x5bef, 0x8954, 0x1, 0x1);
        gbc.writeMem(0x2005, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xc775);
        EXPECT(gbc.pc(), 0x2006);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 00A0
        gbc.setState(0x9206, 0xcd1b, 0x4fe0, 0x91b8, 0x9eca, 0xc1cb, 0x0, 0x1);
        gbc.writeMem(0x9206, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xcd1b);
        EXPECT(gbc.pc(), 0x9207);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9206), 0x9f);
        // 9F 00A1
        gbc.setState(0x60cb, 0x7db2, 0xc3a0, 0x777d, 0x6417, 0x8b3c, 0x0, 0x0);
        gbc.writeMem(0x60cb, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x7db2);
        EXPECT(gbc.pc(), 0x60cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 00A2
        gbc.setState(0xb73d, 0xa067, 0x6050, 0x8304, 0xd82d, 0x9d4d, 0x1, 0x0);
        gbc.writeMem(0xb73d, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xa067);
        EXPECT(gbc.pc(), 0xb73e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb73d), 0x9f);
        // 9F 00A4
        gbc.setState(0xd93e, 0xedf0, 0x7ba0, 0x6f1f, 0xa129, 0x8126, 0x0, 0x0);
        gbc.writeMem(0xd93e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xedf0);
        EXPECT(gbc.pc(), 0xd93f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd93e), 0x9f);
        // 9F 00A5
        gbc.setState(0xda88, 0x45d6, 0x5140, 0x8f82, 0xfb16, 0xf05e, 0x0, 0x0);
        gbc.writeMem(0xda88, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x45d6);
        EXPECT(gbc.pc(), 0xda89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda88), 0x9f);
        // 9F 00A6
        gbc.setState(0x5914, 0x921a, 0x8740, 0x692e, 0x297e, 0x25ab, 0x0, 0x1);
        gbc.writeMem(0x5914, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x921a);
        EXPECT(gbc.pc(), 0x5915);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 00A7
        gbc.setState(0x96c3, 0xfe35, 0xd190, 0x87b7, 0xa10d, 0xf1e6, 0x0, 0x1);
        gbc.writeMem(0x96c3, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xfe35);
        EXPECT(gbc.pc(), 0x96c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96c3), 0x9f);
        // 9F 00A8
        gbc.setState(0x5f70, 0xc65a, 0x4470, 0xa388, 0x8127, 0x3b71, 0x1, 0x1);
        gbc.writeMem(0x5f70, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xc65a);
        EXPECT(gbc.pc(), 0x5f71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 00A9
        gbc.setState(0xc265, 0xabed, 0x44f0, 0x86d, 0xc2c, 0xc436, 0x0, 0x0);
        gbc.writeMem(0xc265, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xabed);
        EXPECT(gbc.pc(), 0xc266);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc265), 0x9f);
        // 9F 00AA
        gbc.setState(0xcc45, 0x9af9, 0xb740, 0xf3a, 0xbd1b, 0x7f5e, 0x0, 0x0);
        gbc.writeMem(0xcc45, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x9af9);
        EXPECT(gbc.pc(), 0xcc46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc45), 0x9f);
        // 9F 00AB
        gbc.setState(0xa981, 0xabf9, 0x10a0, 0x2d94, 0x65aa, 0xc65a, 0x0, 0x0);
        gbc.writeMem(0xa981, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xabf9);
        EXPECT(gbc.pc(), 0xa982);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa981), 0x9f);
        // 9F 00AC
        gbc.setState(0x5d84, 0x657c, 0x2460, 0xf71b, 0xb84e, 0x66a3, 0x1, 0x1);
        gbc.writeMem(0x5d84, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x657c);
        EXPECT(gbc.pc(), 0x5d85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 00AD
        gbc.setState(0xe4ca, 0x5c17, 0xf800, 0x713, 0x885a, 0x93e4, 0x1, 0x0);
        gbc.writeMem(0xe4ca, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x5c17);
        EXPECT(gbc.pc(), 0xe4cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4ca), 0x9f);
        // 9F 00AE
        gbc.setState(0x582, 0x32cb, 0x87e0, 0x5826, 0xe534, 0xda8b, 0x1, 0x0);
        gbc.writeMem(0x582, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x32cb);
        EXPECT(gbc.pc(), 0x583);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 00AF
        gbc.setState(0xd8f1, 0xcc2e, 0x16b0, 0x34e0, 0x5ddd, 0x4afe, 0x1, 0x0);
        gbc.writeMem(0xd8f1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xcc2e);
        EXPECT(gbc.pc(), 0xd8f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8f1), 0x9f);
        // 9F 00B0
        gbc.setState(0x16cf, 0x1853, 0xa80, 0x20fc, 0x812c, 0x789d, 0x1, 0x1);
        gbc.writeMem(0x16cf, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x1853);
        EXPECT(gbc.pc(), 0x16d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 00B1
        gbc.setState(0x2616, 0xfa08, 0x2500, 0x4f43, 0x2e47, 0xf4f7, 0x1, 0x1);
        gbc.writeMem(0x2616, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xfa08);
        EXPECT(gbc.pc(), 0x2617);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 00B2
        gbc.setState(0xc7c4, 0xa883, 0x9820, 0x7d4a, 0x30fe, 0x8c08, 0x1, 0x1);
        gbc.writeMem(0xc7c4, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xa883);
        EXPECT(gbc.pc(), 0xc7c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7c4), 0x9f);
        // 9F 00B3
        gbc.setState(0x551, 0x15cd, 0x53f0, 0x1a2b, 0x8c4c, 0x3f06, 0x0, 0x0);
        gbc.writeMem(0x551, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x15cd);
        EXPECT(gbc.pc(), 0x552);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 00B4
        gbc.setState(0x17b8, 0x9603, 0x4960, 0x82a1, 0x8014, 0x49a3, 0x0, 0x1);
        gbc.writeMem(0x17b8, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x9603);
        EXPECT(gbc.pc(), 0x17b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 00B5
        gbc.setState(0x3642, 0x8948, 0xc310, 0x3453, 0xd150, 0x6f34, 0x0, 0x1);
        gbc.writeMem(0x3642, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x8948);
        EXPECT(gbc.pc(), 0x3643);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 00B6
        gbc.setState(0x7269, 0xa6e7, 0x2730, 0x70b6, 0xe978, 0x2870, 0x1, 0x1);
        gbc.writeMem(0x7269, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xa6e7);
        EXPECT(gbc.pc(), 0x726a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 00B7
        gbc.setState(0x14bd, 0xfca, 0x3b40, 0x6500, 0x5a00, 0x9ddf, 0x1, 0x0);
        gbc.writeMem(0x14bd, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xfca);
        EXPECT(gbc.pc(), 0x14be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 00B8
        gbc.setState(0x1402, 0x98ce, 0x1ad0, 0x7bcf, 0xffe6, 0xe8e7, 0x1, 0x1);
        gbc.writeMem(0x1402, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x98ce);
        EXPECT(gbc.pc(), 0x1403);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 00B9
        gbc.setState(0x15ed, 0xb44e, 0xbcf0, 0xdf53, 0xf06f, 0xe8b2, 0x0, 0x0);
        gbc.writeMem(0x15ed, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xb44e);
        EXPECT(gbc.pc(), 0x15ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 00BA
        gbc.setState(0x3e66, 0xb909, 0x1060, 0xda4a, 0x91e7, 0xabbb, 0x0, 0x1);
        gbc.writeMem(0x3e66, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xb909);
        EXPECT(gbc.pc(), 0x3e67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 00BB
        gbc.setState(0xb68c, 0xf732, 0x6590, 0x8eb, 0xb7e, 0x6dbd, 0x0, 0x1);
        gbc.writeMem(0xb68c, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xf732);
        EXPECT(gbc.pc(), 0xb68d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb68c), 0x9f);
        // 9F 00BC
        gbc.setState(0x8bbc, 0x92f1, 0x2770, 0xa91c, 0xcb5a, 0x1aec, 0x0, 0x0);
        gbc.writeMem(0x8bbc, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x92f1);
        EXPECT(gbc.pc(), 0x8bbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bbc), 0x9f);
        // 9F 00BD
        gbc.setState(0x3673, 0x32c8, 0xc650, 0xbc23, 0x2d1c, 0xd857, 0x0, 0x0);
        gbc.writeMem(0x3673, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x32c8);
        EXPECT(gbc.pc(), 0x3674);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 00BE
        gbc.setState(0xef85, 0x7bbe, 0xd4b0, 0x47e2, 0xcd65, 0xaaa6, 0x0, 0x1);
        gbc.writeMem(0xef85, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x7bbe);
        EXPECT(gbc.pc(), 0xef86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef85), 0x9f);
        // 9F 00BF
        gbc.setState(0x5d50, 0xa111, 0x2cc0, 0x8bfe, 0xf6fa, 0x3fd2, 0x0, 0x1);
        gbc.writeMem(0x5d50, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xa111);
        EXPECT(gbc.pc(), 0x5d51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 00C0
        gbc.setState(0x80e0, 0x3ddb, 0x9000, 0x696f, 0xf4b8, 0x5a89, 0x0, 0x1);
        gbc.writeMem(0x80e0, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x3ddb);
        EXPECT(gbc.pc(), 0x80e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80e0), 0x9f);
        // 9F 00C1
        gbc.setState(0x5442, 0xe256, 0xfa80, 0x2dae, 0x27ac, 0x70d0, 0x0, 0x1);
        gbc.writeMem(0x5442, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xe256);
        EXPECT(gbc.pc(), 0x5443);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 00C2
        gbc.setState(0x5670, 0xb42f, 0x7af0, 0x9e5c, 0xa093, 0x1cec, 0x1, 0x1);
        gbc.writeMem(0x5670, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xb42f);
        EXPECT(gbc.pc(), 0x5671);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 00C3
        gbc.setState(0x3c6b, 0xc099, 0x20e0, 0x8da7, 0x973b, 0x1bb, 0x1, 0x0);
        gbc.writeMem(0x3c6b, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xc099);
        EXPECT(gbc.pc(), 0x3c6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 00C4
        gbc.setState(0xa4a7, 0xb92, 0x4dc0, 0x4c23, 0x8eb1, 0xede8, 0x1, 0x1);
        gbc.writeMem(0xa4a7, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xb92);
        EXPECT(gbc.pc(), 0xa4a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4a7), 0x9f);
        // 9F 00C5
        gbc.setState(0x7cf1, 0x860f, 0x8860, 0xa2fc, 0x526b, 0x42ee, 0x0, 0x1);
        gbc.writeMem(0x7cf1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x860f);
        EXPECT(gbc.pc(), 0x7cf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 00C6
        gbc.setState(0x6ead, 0xde64, 0x5060, 0x1e87, 0xd79b, 0xc8e7, 0x1, 0x0);
        gbc.writeMem(0x6ead, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xde64);
        EXPECT(gbc.pc(), 0x6eae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 00C7
        gbc.setState(0x273e, 0x8e0f, 0x4d0, 0x2073, 0x759a, 0x9d83, 0x0, 0x1);
        gbc.writeMem(0x273e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x8e0f);
        EXPECT(gbc.pc(), 0x273f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 00C8
        gbc.setState(0x3097, 0xd602, 0x30c0, 0x4f4b, 0x2682, 0xb4a8, 0x0, 0x0);
        gbc.writeMem(0x3097, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xd602);
        EXPECT(gbc.pc(), 0x3098);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 00C9
        gbc.setState(0x5292, 0x9d29, 0x4fd0, 0x9dd9, 0x2283, 0x316d, 0x1, 0x1);
        gbc.writeMem(0x5292, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x9d29);
        EXPECT(gbc.pc(), 0x5293);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 00CA
        gbc.setState(0x7db0, 0xca97, 0xcec0, 0x13bf, 0x87ee, 0xd13f, 0x0, 0x1);
        gbc.writeMem(0x7db0, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xca97);
        EXPECT(gbc.pc(), 0x7db1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 00CB
        gbc.setState(0x6db6, 0x34d2, 0x3280, 0xf3ba, 0xb976, 0xcc4, 0x1, 0x0);
        gbc.writeMem(0x6db6, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x34d2);
        EXPECT(gbc.pc(), 0x6db7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 00CC
        gbc.setState(0x18df, 0xf7d6, 0xa200, 0x72fa, 0xc00f, 0x4c34, 0x1, 0x0);
        gbc.writeMem(0x18df, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xf7d6);
        EXPECT(gbc.pc(), 0x18e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 00CD
        gbc.setState(0xa0d0, 0x2cf1, 0xbae0, 0xb0aa, 0x7a8f, 0xea81, 0x1, 0x0);
        gbc.writeMem(0xa0d0, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x2cf1);
        EXPECT(gbc.pc(), 0xa0d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0d0), 0x9f);
        // 9F 00CE
        gbc.setState(0x60d6, 0x79c5, 0x5520, 0xd360, 0xeee9, 0xa881, 0x0, 0x0);
        gbc.writeMem(0x60d6, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x79c5);
        EXPECT(gbc.pc(), 0x60d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 00D0
        gbc.setState(0x1de7, 0x6d5e, 0x3870, 0x6577, 0x817b, 0x8930, 0x1, 0x1);
        gbc.writeMem(0x1de7, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x6d5e);
        EXPECT(gbc.pc(), 0x1de8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 00D1
        gbc.setState(0x901d, 0x71ca, 0xad0, 0x7c8, 0x8606, 0xdbec, 0x1, 0x1);
        gbc.writeMem(0x901d, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x71ca);
        EXPECT(gbc.pc(), 0x901e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x901d), 0x9f);
        // 9F 00D2
        gbc.setState(0x3613, 0xf7f0, 0xdef0, 0x2e7f, 0x8f70, 0xbdab, 0x1, 0x1);
        gbc.writeMem(0x3613, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xf7f0);
        EXPECT(gbc.pc(), 0x3614);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 00D3
        gbc.setState(0x9a44, 0xd878, 0x3f50, 0xc94c, 0x64f9, 0xaf2, 0x0, 0x0);
        gbc.writeMem(0x9a44, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xd878);
        EXPECT(gbc.pc(), 0x9a45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a44), 0x9f);
        // 9F 00D4
        gbc.setState(0x2e09, 0x9b71, 0x3db0, 0x6f01, 0x8a1d, 0x79c, 0x0, 0x0);
        gbc.writeMem(0x2e09, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x9b71);
        EXPECT(gbc.pc(), 0x2e0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 00D5
        gbc.setState(0x1776, 0x9cf5, 0x7130, 0xe06c, 0xfb31, 0xac3a, 0x0, 0x0);
        gbc.writeMem(0x1776, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x9cf5);
        EXPECT(gbc.pc(), 0x1777);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 00D6
        gbc.setState(0x6976, 0x235b, 0x7060, 0x40a9, 0x5f9b, 0x5529, 0x1, 0x1);
        gbc.writeMem(0x6976, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x235b);
        EXPECT(gbc.pc(), 0x6977);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 00D7
        gbc.setState(0x8ef, 0xc669, 0x5390, 0x3929, 0xa90d, 0x1647, 0x1, 0x1);
        gbc.writeMem(0x8ef, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xc669);
        EXPECT(gbc.pc(), 0x8f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 00D9
        gbc.setState(0xcc86, 0x13f, 0xade0, 0x9784, 0xaf6b, 0xeb71, 0x0, 0x1);
        gbc.writeMem(0xcc86, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x13f);
        EXPECT(gbc.pc(), 0xcc87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc86), 0x9f);
        // 9F 00DA
        gbc.setState(0x7d3b, 0x518c, 0x70a0, 0x2bef, 0x83a, 0x27fc, 0x1, 0x1);
        gbc.writeMem(0x7d3b, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x518c);
        EXPECT(gbc.pc(), 0x7d3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 00DC
        gbc.setState(0xd81f, 0x32ed, 0xe200, 0x5629, 0xcc05, 0x8913, 0x0, 0x1);
        gbc.writeMem(0xd81f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x32ed);
        EXPECT(gbc.pc(), 0xd820);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd81f), 0x9f);
        // 9F 00DD
        gbc.setState(0xd54f, 0x8f97, 0xd8a0, 0x1931, 0xbb90, 0x77d7, 0x1, 0x1);
        gbc.writeMem(0xd54f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x8f97);
        EXPECT(gbc.pc(), 0xd550);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd54f), 0x9f);
        // 9F 00DE
        gbc.setState(0x3cbb, 0xa2c2, 0xa8d0, 0x5285, 0xf9dd, 0xfef7, 0x1, 0x0);
        gbc.writeMem(0x3cbb, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xa2c2);
        EXPECT(gbc.pc(), 0x3cbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 00E2
        gbc.setState(0xeb0a, 0xd72a, 0xb8f0, 0xeb21, 0x1b2b, 0xb6fd, 0x0, 0x0);
        gbc.writeMem(0xeb0a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xd72a);
        EXPECT(gbc.pc(), 0xeb0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb0a), 0x9f);
        // 9F 00E3
        gbc.setState(0x1cc6, 0x7bd, 0xf3b0, 0xdca6, 0xf8c4, 0x7947, 0x0, 0x1);
        gbc.writeMem(0x1cc6, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x7bd);
        EXPECT(gbc.pc(), 0x1cc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 00E4
        gbc.setState(0x95a8, 0x19a6, 0xcf70, 0x505a, 0xfb23, 0x326a, 0x1, 0x1);
        gbc.writeMem(0x95a8, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x19a6);
        EXPECT(gbc.pc(), 0x95a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95a8), 0x9f);
        // 9F 00E5
        gbc.setState(0x44af, 0x7b7c, 0x2850, 0x3308, 0xfa68, 0x8130, 0x0, 0x1);
        gbc.writeMem(0x44af, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x7b7c);
        EXPECT(gbc.pc(), 0x44b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 00E6
        gbc.setState(0x7660, 0xc048, 0x3220, 0x63d5, 0x5343, 0xff0a, 0x0, 0x0);
        gbc.writeMem(0x7660, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xc048);
        EXPECT(gbc.pc(), 0x7661);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 00E7
        gbc.setState(0x8fc2, 0x2e60, 0x9ca0, 0x9094, 0x96ac, 0xffa4, 0x0, 0x1);
        gbc.writeMem(0x8fc2, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x2e60);
        EXPECT(gbc.pc(), 0x8fc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fc2), 0x9f);
        // 9F 00E8
        gbc.setState(0x2109, 0xb998, 0xea70, 0x570c, 0xd3df, 0x2128, 0x1, 0x1);
        gbc.writeMem(0x2109, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xb998);
        EXPECT(gbc.pc(), 0x210a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 00E9
        gbc.setState(0x74b7, 0x6be2, 0x650, 0x2c4c, 0x921b, 0x5bf8, 0x1, 0x1);
        gbc.writeMem(0x74b7, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x6be2);
        EXPECT(gbc.pc(), 0x74b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 00EA
        gbc.setState(0xe063, 0x148, 0x98a0, 0x8945, 0xd90d, 0x48ad, 0x1, 0x0);
        gbc.writeMem(0xe063, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x148);
        EXPECT(gbc.pc(), 0xe064);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe063), 0x9f);
        // 9F 00EB
        gbc.setState(0x54fb, 0xca80, 0x9290, 0xacd1, 0x5d78, 0xa6df, 0x0, 0x1);
        gbc.writeMem(0x54fb, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xca80);
        EXPECT(gbc.pc(), 0x54fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 00EC
        gbc.setState(0x36c6, 0x4756, 0x7220, 0x684, 0xcac3, 0x4a58, 0x0, 0x1);
        gbc.writeMem(0x36c6, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x4756);
        EXPECT(gbc.pc(), 0x36c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 00ED
        gbc.setState(0x63bd, 0x4e70, 0x5c00, 0xc58a, 0x414c, 0xcf61, 0x0, 0x1);
        gbc.writeMem(0x63bd, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x4e70);
        EXPECT(gbc.pc(), 0x63be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 00EE
        gbc.setState(0x7cd9, 0x9c13, 0x5760, 0xaf47, 0x49f0, 0x63ba, 0x0, 0x0);
        gbc.writeMem(0x7cd9, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x9c13);
        EXPECT(gbc.pc(), 0x7cda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 00EF
        gbc.setState(0xa3c6, 0xf492, 0x1d00, 0x8bd3, 0xbde0, 0x1384, 0x1, 0x0);
        gbc.writeMem(0xa3c6, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xf492);
        EXPECT(gbc.pc(), 0xa3c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3c6), 0x9f);
        // 9F 00F0
        gbc.setState(0x2251, 0x6b3c, 0xdc70, 0x708e, 0x587, 0x354d, 0x1, 0x0);
        gbc.writeMem(0x2251, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x6b3c);
        EXPECT(gbc.pc(), 0x2252);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 00F1
        gbc.setState(0xd3ac, 0xf324, 0xc8f0, 0x5e56, 0xbe27, 0xe3a, 0x0, 0x0);
        gbc.writeMem(0xd3ac, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xf324);
        EXPECT(gbc.pc(), 0xd3ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3ac), 0x9f);
        // 9F 00F2
        gbc.setState(0x87ec, 0xe5b, 0xea80, 0x7e4f, 0x66a6, 0xa8df, 0x1, 0x0);
        gbc.writeMem(0x87ec, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xe5b);
        EXPECT(gbc.pc(), 0x87ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87ec), 0x9f);
        // 9F 00F3
        gbc.setState(0xb21a, 0x74c1, 0xc690, 0x503e, 0xb82a, 0xfbcf, 0x0, 0x0);
        gbc.writeMem(0xb21a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x74c1);
        EXPECT(gbc.pc(), 0xb21b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb21a), 0x9f);
        // 9F 00F4
        gbc.setState(0xc607, 0x698, 0xdf90, 0xa063, 0x2efb, 0xddf7, 0x1, 0x0);
        gbc.writeMem(0xc607, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x698);
        EXPECT(gbc.pc(), 0xc608);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc607), 0x9f);
        // 9F 00F5
        gbc.setState(0x9345, 0x928a, 0xe810, 0x3869, 0xec87, 0x3c8d, 0x0, 0x0);
        gbc.writeMem(0x9345, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x928a);
        EXPECT(gbc.pc(), 0x9346);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9345), 0x9f);
        // 9F 00F6
        gbc.setState(0x7eb3, 0xe4d0, 0x1c50, 0x3980, 0xb4f4, 0xbfc6, 0x0, 0x1);
        gbc.writeMem(0x7eb3, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xe4d0);
        EXPECT(gbc.pc(), 0x7eb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 00F7
        gbc.setState(0x7ff7, 0x172d, 0xc990, 0x87c1, 0x12a0, 0x2a5a, 0x0, 0x0);
        gbc.writeMem(0x7ff7, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x172d);
        EXPECT(gbc.pc(), 0x7ff8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 00F8
        gbc.setState(0x438f, 0xffd1, 0x6900, 0x5663, 0x2fe2, 0x563f, 0x0, 0x1);
        gbc.writeMem(0x438f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xffd1);
        EXPECT(gbc.pc(), 0x4390);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 00F9
        gbc.setState(0x32f, 0xb339, 0x5100, 0xd3a1, 0x9523, 0xa972, 0x1, 0x1);
        gbc.writeMem(0x32f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xb339);
        EXPECT(gbc.pc(), 0x330);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 00FA
        gbc.setState(0xb039, 0x8781, 0x85f0, 0x3e9e, 0xef9e, 0x4525, 0x1, 0x0);
        gbc.writeMem(0xb039, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x8781);
        EXPECT(gbc.pc(), 0xb03a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb039), 0x9f);
        // 9F 00FB
        gbc.setState(0xd550, 0xedbb, 0x3fa0, 0xe73a, 0xff86, 0xcb97, 0x0, 0x0);
        gbc.writeMem(0xd550, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xedbb);
        EXPECT(gbc.pc(), 0xd551);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd550), 0x9f);
        // 9F 00FC
        gbc.setState(0x5030, 0x86b6, 0x9690, 0xa92d, 0x60a2, 0xcff3, 0x0, 0x0);
        gbc.writeMem(0x5030, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x86b6);
        EXPECT(gbc.pc(), 0x5031);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 00FD
        gbc.setState(0xd53, 0x5771, 0x5b20, 0x6f5c, 0xe914, 0x498e, 0x1, 0x1);
        gbc.writeMem(0xd53, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x5771);
        EXPECT(gbc.pc(), 0xd54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 00FE
        gbc.setState(0x39fd, 0x4793, 0xf8f0, 0xf75f, 0x5b36, 0x1f7e, 0x0, 0x1);
        gbc.writeMem(0x39fd, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x4793);
        EXPECT(gbc.pc(), 0x39fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 00FF
        gbc.setState(0x9206, 0x232d, 0xc480, 0x200a, 0x2217, 0x318b, 0x1, 0x1);
        gbc.writeMem(0x9206, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x232d);
        EXPECT(gbc.pc(), 0x9207);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9206), 0x9f);
        // 9F 0100
        gbc.setState(0xd344, 0x9c3e, 0xb0, 0xdeae, 0x34e2, 0x39ee, 0x0, 0x1);
        gbc.writeMem(0xd344, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x9c3e);
        EXPECT(gbc.pc(), 0xd345);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd344), 0x9f);
        // 9F 0101
        gbc.setState(0x7730, 0x1db3, 0xf4a0, 0xbb61, 0x7b11, 0xecda, 0x1, 0x0);
        gbc.writeMem(0x7730, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x1db3);
        EXPECT(gbc.pc(), 0x7731);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0102
        gbc.setState(0x536b, 0x8299, 0x38a0, 0x4b28, 0xdeaf, 0xaf72, 0x1, 0x1);
        gbc.writeMem(0x536b, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x8299);
        EXPECT(gbc.pc(), 0x536c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0103
        gbc.setState(0x5eca, 0x3b5e, 0xcf10, 0x9293, 0xadec, 0x60e0, 0x0, 0x0);
        gbc.writeMem(0x5eca, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x3b5e);
        EXPECT(gbc.pc(), 0x5ecb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0104
        gbc.setState(0xe242, 0xfc51, 0xe120, 0xfb4, 0x898c, 0xdb37, 0x1, 0x0);
        gbc.writeMem(0xe242, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xfc51);
        EXPECT(gbc.pc(), 0xe243);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe242), 0x9f);
        // 9F 0105
        gbc.setState(0xe4aa, 0xb9b, 0x1d70, 0x656d, 0xb46d, 0xed6f, 0x1, 0x0);
        gbc.writeMem(0xe4aa, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xb9b);
        EXPECT(gbc.pc(), 0xe4ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4aa), 0x9f);
        // 9F 0106
        gbc.setState(0x5e2b, 0x2508, 0xca20, 0x9ee1, 0x11c8, 0x8463, 0x0, 0x1);
        gbc.writeMem(0x5e2b, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x2508);
        EXPECT(gbc.pc(), 0x5e2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0107
        gbc.setState(0x68d6, 0xd599, 0xd240, 0xf7d9, 0x3f5d, 0x48a7, 0x1, 0x0);
        gbc.writeMem(0x68d6, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xd599);
        EXPECT(gbc.pc(), 0x68d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0108
        gbc.setState(0xb5db, 0xd2e2, 0x5b20, 0x4c5b, 0x5c8a, 0xd1a6, 0x0, 0x1);
        gbc.writeMem(0xb5db, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xd2e2);
        EXPECT(gbc.pc(), 0xb5dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5db), 0x9f);
        // 9F 0109
        gbc.setState(0xbbb8, 0x8756, 0xbec0, 0xe1d0, 0x46b6, 0x3b6f, 0x1, 0x1);
        gbc.writeMem(0xbbb8, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x8756);
        EXPECT(gbc.pc(), 0xbbb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbb8), 0x9f);
        // 9F 010A
        gbc.setState(0x3c5a, 0x29c, 0x30e0, 0x6236, 0x9d38, 0x62c6, 0x0, 0x1);
        gbc.writeMem(0x3c5a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x29c);
        EXPECT(gbc.pc(), 0x3c5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 010B
        gbc.setState(0x8cd2, 0x226f, 0xc6c0, 0xbb65, 0x7ab1, 0x517f, 0x0, 0x1);
        gbc.writeMem(0x8cd2, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x226f);
        EXPECT(gbc.pc(), 0x8cd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cd2), 0x9f);
        // 9F 010C
        gbc.setState(0x76e1, 0x81d8, 0xf180, 0xb0ab, 0xde6c, 0x5e9d, 0x0, 0x0);
        gbc.writeMem(0x76e1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x81d8);
        EXPECT(gbc.pc(), 0x76e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 010D
        gbc.setState(0x1d70, 0x86a3, 0x1b0, 0xd8c5, 0x55a6, 0xeca9, 0x0, 0x0);
        gbc.writeMem(0x1d70, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x86a3);
        EXPECT(gbc.pc(), 0x1d71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 010E
        gbc.setState(0x3543, 0x21c5, 0xe170, 0x1bef, 0xfd5f, 0x46d1, 0x0, 0x1);
        gbc.writeMem(0x3543, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x21c5);
        EXPECT(gbc.pc(), 0x3544);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 010F
        gbc.setState(0x793a, 0x5340, 0x3440, 0xaae1, 0x258e, 0xfef3, 0x0, 0x1);
        gbc.writeMem(0x793a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x5340);
        EXPECT(gbc.pc(), 0x793b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0110
        gbc.setState(0x3ebb, 0xd6de, 0xc0, 0xec48, 0xa960, 0x8ac6, 0x1, 0x1);
        gbc.writeMem(0x3ebb, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xd6de);
        EXPECT(gbc.pc(), 0x3ebc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0111
        gbc.setState(0x3d07, 0xc326, 0x31c0, 0xa48c, 0x83e3, 0x4e55, 0x1, 0x1);
        gbc.writeMem(0x3d07, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xc326);
        EXPECT(gbc.pc(), 0x3d08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0112
        gbc.setState(0x7cd3, 0xe669, 0x68a0, 0x51b7, 0x9b29, 0xe1a0, 0x1, 0x1);
        gbc.writeMem(0x7cd3, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xe669);
        EXPECT(gbc.pc(), 0x7cd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0113
        gbc.setState(0x53dd, 0x3538, 0xc030, 0x8bdb, 0x2d4e, 0x982c, 0x1, 0x1);
        gbc.writeMem(0x53dd, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x3538);
        EXPECT(gbc.pc(), 0x53de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0114
        gbc.setState(0x71a0, 0xe568, 0xc330, 0x7d4c, 0xc57c, 0xd450, 0x0, 0x1);
        gbc.writeMem(0x71a0, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xe568);
        EXPECT(gbc.pc(), 0x71a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0115
        gbc.setState(0x5364, 0x2dce, 0x6cf0, 0xc220, 0x701f, 0x3336, 0x1, 0x0);
        gbc.writeMem(0x5364, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x2dce);
        EXPECT(gbc.pc(), 0x5365);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0116
        gbc.setState(0x9e9f, 0xd775, 0xbab0, 0x6fd8, 0xcec2, 0x42f4, 0x1, 0x1);
        gbc.writeMem(0x9e9f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xd775);
        EXPECT(gbc.pc(), 0x9ea0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e9f), 0x9f);
        // 9F 0117
        gbc.setState(0xe7ee, 0x5245, 0xb150, 0xb58a, 0xee78, 0xa5f7, 0x0, 0x1);
        gbc.writeMem(0xe7ee, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x5245);
        EXPECT(gbc.pc(), 0xe7ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7ee), 0x9f);
        // 9F 0118
        gbc.setState(0xec92, 0x4469, 0x48f0, 0x89d3, 0x39bf, 0x1711, 0x0, 0x0);
        gbc.writeMem(0xec92, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x4469);
        EXPECT(gbc.pc(), 0xec93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec92), 0x9f);
        // 9F 0119
        gbc.setState(0xc9e8, 0xa009, 0x74b0, 0xe891, 0x5f4d, 0x7967, 0x0, 0x0);
        gbc.writeMem(0xc9e8, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xa009);
        EXPECT(gbc.pc(), 0xc9e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9e8), 0x9f);
        // 9F 011A
        gbc.setState(0x8254, 0xb90b, 0x8e10, 0x700c, 0xa423, 0xdf47, 0x1, 0x1);
        gbc.writeMem(0x8254, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xb90b);
        EXPECT(gbc.pc(), 0x8255);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8254), 0x9f);
        // 9F 011B
        gbc.setState(0xaae5, 0xacbb, 0x9a40, 0x19be, 0xffd3, 0x5d75, 0x1, 0x0);
        gbc.writeMem(0xaae5, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xacbb);
        EXPECT(gbc.pc(), 0xaae6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaae5), 0x9f);
        // 9F 011C
        gbc.setState(0xe175, 0xab44, 0x6a70, 0xeffd, 0x41ca, 0xdcd1, 0x1, 0x1);
        gbc.writeMem(0xe175, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xab44);
        EXPECT(gbc.pc(), 0xe176);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe175), 0x9f);
        // 9F 011D
        gbc.setState(0xcdae, 0xfdfc, 0x5c70, 0x29c2, 0x53c5, 0xf7b, 0x0, 0x1);
        gbc.writeMem(0xcdae, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xfdfc);
        EXPECT(gbc.pc(), 0xcdaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdae), 0x9f);
        // 9F 011E
        gbc.setState(0xd9ee, 0xc49a, 0x2170, 0xdcd8, 0xd86b, 0x28cc, 0x1, 0x0);
        gbc.writeMem(0xd9ee, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xc49a);
        EXPECT(gbc.pc(), 0xd9ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9ee), 0x9f);
        // 9F 011F
        gbc.setState(0x4c0, 0xa318, 0xa780, 0x44b6, 0x1bb0, 0x5aa8, 0x1, 0x0);
        gbc.writeMem(0x4c0, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xa318);
        EXPECT(gbc.pc(), 0x4c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0120
        gbc.setState(0x18d0, 0x84f, 0x54d0, 0x6fb5, 0x3654, 0xb59d, 0x0, 0x0);
        gbc.writeMem(0x18d0, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x84f);
        EXPECT(gbc.pc(), 0x18d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0121
        gbc.setState(0xa336, 0x24a6, 0x1600, 0xdb72, 0x3c0b, 0xb424, 0x1, 0x1);
        gbc.writeMem(0xa336, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x24a6);
        EXPECT(gbc.pc(), 0xa337);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa336), 0x9f);
        // 9F 0122
        gbc.setState(0x1e57, 0xa4a9, 0x5280, 0xdbb7, 0x2320, 0x6a1a, 0x0, 0x0);
        gbc.writeMem(0x1e57, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xa4a9);
        EXPECT(gbc.pc(), 0x1e58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0123
        gbc.setState(0x7bb6, 0x7d79, 0x9ce0, 0xf47f, 0xedef, 0x346d, 0x0, 0x0);
        gbc.writeMem(0x7bb6, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x7d79);
        EXPECT(gbc.pc(), 0x7bb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0124
        gbc.setState(0x3cb2, 0xf699, 0xd760, 0x2a3e, 0xd677, 0xaf7b, 0x1, 0x0);
        gbc.writeMem(0x3cb2, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xf699);
        EXPECT(gbc.pc(), 0x3cb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0125
        gbc.setState(0x55ab, 0x7a20, 0x8760, 0xc4d1, 0xf480, 0x6e0f, 0x0, 0x1);
        gbc.writeMem(0x55ab, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x7a20);
        EXPECT(gbc.pc(), 0x55ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0126
        gbc.setState(0x5f92, 0x560f, 0x7580, 0xe700, 0x7971, 0xa3a3, 0x0, 0x1);
        gbc.writeMem(0x5f92, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x560f);
        EXPECT(gbc.pc(), 0x5f93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0127
        gbc.setState(0x4356, 0x878e, 0x7bc0, 0xfeb5, 0x241e, 0x7229, 0x1, 0x0);
        gbc.writeMem(0x4356, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x878e);
        EXPECT(gbc.pc(), 0x4357);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0128
        gbc.setState(0x3925, 0xecd1, 0x9de0, 0xb401, 0xcc5a, 0x9dc1, 0x1, 0x0);
        gbc.writeMem(0x3925, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xecd1);
        EXPECT(gbc.pc(), 0x3926);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0129
        gbc.setState(0x8e9c, 0x567b, 0x4900, 0xfd78, 0x1223, 0x4055, 0x0, 0x1);
        gbc.writeMem(0x8e9c, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x567b);
        EXPECT(gbc.pc(), 0x8e9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e9c), 0x9f);
        // 9F 012A
        gbc.setState(0x8a5d, 0x8123, 0x8cc0, 0xb97d, 0xc0fa, 0xe0e2, 0x0, 0x1);
        gbc.writeMem(0x8a5d, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x8123);
        EXPECT(gbc.pc(), 0x8a5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a5d), 0x9f);
        // 9F 012B
        gbc.setState(0x1f60, 0xf64d, 0xb060, 0xfb6c, 0xcb7d, 0xa80a, 0x1, 0x0);
        gbc.writeMem(0x1f60, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xf64d);
        EXPECT(gbc.pc(), 0x1f61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 012C
        gbc.setState(0x64a3, 0xbe45, 0xc550, 0x2e40, 0x840a, 0xbece, 0x0, 0x1);
        gbc.writeMem(0x64a3, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xbe45);
        EXPECT(gbc.pc(), 0x64a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 012D
        gbc.setState(0x9fa4, 0xa8b5, 0x32a0, 0x503c, 0xed40, 0xea4, 0x1, 0x1);
        gbc.writeMem(0x9fa4, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xa8b5);
        EXPECT(gbc.pc(), 0x9fa5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fa4), 0x9f);
        // 9F 012E
        gbc.setState(0x1a9a, 0x415d, 0xca60, 0xd36, 0x5aa7, 0xeece, 0x1, 0x0);
        gbc.writeMem(0x1a9a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x415d);
        EXPECT(gbc.pc(), 0x1a9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 012F
        gbc.setState(0x3580, 0xba45, 0x550, 0x36a9, 0x9e02, 0x9da2, 0x0, 0x0);
        gbc.writeMem(0x3580, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xba45);
        EXPECT(gbc.pc(), 0x3581);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0130
        gbc.setState(0x9734, 0xa58e, 0xf730, 0x79d2, 0x4b99, 0x2066, 0x1, 0x0);
        gbc.writeMem(0x9734, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xa58e);
        EXPECT(gbc.pc(), 0x9735);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9734), 0x9f);
        // 9F 0131
        gbc.setState(0x993b, 0xcf80, 0xf9d0, 0xb7d3, 0xf1d3, 0x946c, 0x1, 0x0);
        gbc.writeMem(0x993b, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xcf80);
        EXPECT(gbc.pc(), 0x993c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x993b), 0x9f);
        // 9F 0132
        gbc.setState(0x2e59, 0xa582, 0x7290, 0xbd59, 0xc979, 0x4df5, 0x1, 0x1);
        gbc.writeMem(0x2e59, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xa582);
        EXPECT(gbc.pc(), 0x2e5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0133
        gbc.setState(0x4f0, 0xe91a, 0xae0, 0xcff4, 0xad1b, 0x4e82, 0x1, 0x1);
        gbc.writeMem(0x4f0, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xe91a);
        EXPECT(gbc.pc(), 0x4f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0134
        gbc.setState(0x274f, 0xc9be, 0xb650, 0x16d9, 0x3e0c, 0xebb0, 0x1, 0x0);
        gbc.writeMem(0x274f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xc9be);
        EXPECT(gbc.pc(), 0x2750);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0135
        gbc.setState(0x8b3e, 0x24a9, 0x830, 0x199c, 0xbafc, 0x7d2c, 0x0, 0x0);
        gbc.writeMem(0x8b3e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x24a9);
        EXPECT(gbc.pc(), 0x8b3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b3e), 0x9f);
        // 9F 0137
        gbc.setState(0x1325, 0x8014, 0x49a0, 0xf3a2, 0x4b16, 0x1d25, 0x0, 0x1);
        gbc.writeMem(0x1325, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x8014);
        EXPECT(gbc.pc(), 0x1326);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0139
        gbc.setState(0x7ac3, 0xd61f, 0x5030, 0x9690, 0xfce9, 0x4b48, 0x0, 0x1);
        gbc.writeMem(0x7ac3, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xd61f);
        EXPECT(gbc.pc(), 0x7ac4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 013A
        gbc.setState(0xba2e, 0xcb32, 0xab0, 0x1a7a, 0x31f7, 0xffd9, 0x1, 0x1);
        gbc.writeMem(0xba2e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xcb32);
        EXPECT(gbc.pc(), 0xba2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba2e), 0x9f);
        // 9F 013B
        gbc.setState(0xaba, 0x852f, 0x2480, 0x417a, 0x4954, 0xdec9, 0x0, 0x1);
        gbc.writeMem(0xaba, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x852f);
        EXPECT(gbc.pc(), 0xabb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 013C
        gbc.setState(0x66d7, 0xceb9, 0x31b0, 0x5a94, 0x4770, 0xbc33, 0x1, 0x0);
        gbc.writeMem(0x66d7, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xceb9);
        EXPECT(gbc.pc(), 0x66d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 013D
        gbc.setState(0x743e, 0x201d, 0x1f20, 0x43b5, 0x3650, 0x147c, 0x1, 0x0);
        gbc.writeMem(0x743e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x201d);
        EXPECT(gbc.pc(), 0x743f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 013E
        gbc.setState(0x1daf, 0xdef7, 0x7fc0, 0x364, 0xe63a, 0x6538, 0x0, 0x0);
        gbc.writeMem(0x1daf, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xdef7);
        EXPECT(gbc.pc(), 0x1db0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0140
        gbc.setState(0x2d87, 0x2ec9, 0x4580, 0xeef0, 0x8a3f, 0xfc41, 0x1, 0x1);
        gbc.writeMem(0x2d87, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x2ec9);
        EXPECT(gbc.pc(), 0x2d88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0141
        gbc.setState(0x32d6, 0xc4de, 0x18f0, 0x3e07, 0xfae, 0xe08e, 0x1, 0x1);
        gbc.writeMem(0x32d6, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xc4de);
        EXPECT(gbc.pc(), 0x32d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0142
        gbc.setState(0x87f0, 0xefb5, 0x45d0, 0x708a, 0x5eaa, 0xe169, 0x1, 0x1);
        gbc.writeMem(0x87f0, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xefb5);
        EXPECT(gbc.pc(), 0x87f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87f0), 0x9f);
        // 9F 0143
        gbc.setState(0xb031, 0x66a2, 0x3550, 0x5d9d, 0x4d54, 0x275d, 0x1, 0x0);
        gbc.writeMem(0xb031, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x66a2);
        EXPECT(gbc.pc(), 0xb032);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb031), 0x9f);
        // 9F 0144
        gbc.setState(0xcb70, 0x4856, 0xb680, 0x76f4, 0xead1, 0xcb35, 0x0, 0x1);
        gbc.writeMem(0xcb70, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x4856);
        EXPECT(gbc.pc(), 0xcb71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb70), 0x9f);
        // 9F 0145
        gbc.setState(0xcaa3, 0x7027, 0x73c0, 0x75fa, 0xaab6, 0x39c2, 0x0, 0x1);
        gbc.writeMem(0xcaa3, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x7027);
        EXPECT(gbc.pc(), 0xcaa4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcaa3), 0x9f);
        // 9F 0146
        gbc.setState(0x69ff, 0x8602, 0x2570, 0x7326, 0x5e41, 0xc6b8, 0x1, 0x0);
        gbc.writeMem(0x69ff, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x8602);
        EXPECT(gbc.pc(), 0x6a00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0148
        gbc.setState(0x90e8, 0x1b5e, 0xcb90, 0x4b1b, 0x39cc, 0xe1ad, 0x1, 0x0);
        gbc.writeMem(0x90e8, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x1b5e);
        EXPECT(gbc.pc(), 0x90e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90e8), 0x9f);
        // 9F 0149
        gbc.setState(0x56bd, 0xf532, 0x2210, 0xde43, 0xecff, 0xf336, 0x1, 0x0);
        gbc.writeMem(0x56bd, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xf532);
        EXPECT(gbc.pc(), 0x56be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 014A
        gbc.setState(0x4732, 0x7a81, 0xdc80, 0xbb73, 0xd6d9, 0x9e5b, 0x0, 0x1);
        gbc.writeMem(0x4732, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x7a81);
        EXPECT(gbc.pc(), 0x4733);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 014B
        gbc.setState(0x617a, 0x3376, 0xeae0, 0xd342, 0x7e90, 0xe3cb, 0x1, 0x1);
        gbc.writeMem(0x617a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x3376);
        EXPECT(gbc.pc(), 0x617b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 014C
        gbc.setState(0x333b, 0xae77, 0x3e00, 0x7c1e, 0xd6bf, 0x443f, 0x1, 0x0);
        gbc.writeMem(0x333b, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xae77);
        EXPECT(gbc.pc(), 0x333c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 014D
        gbc.setState(0x875d, 0xb6ad, 0x9f40, 0x10de, 0x7226, 0xf285, 0x1, 0x1);
        gbc.writeMem(0x875d, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xb6ad);
        EXPECT(gbc.pc(), 0x875e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x875d), 0x9f);
        // 9F 014E
        gbc.setState(0x7f5c, 0x8ca5, 0x9090, 0xafc1, 0xe0cf, 0x3d9c, 0x0, 0x0);
        gbc.writeMem(0x7f5c, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x8ca5);
        EXPECT(gbc.pc(), 0x7f5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 014F
        gbc.setState(0x9fe, 0x4d6e, 0xeb60, 0xf7b7, 0xa26b, 0x4f62, 0x0, 0x0);
        gbc.writeMem(0x9fe, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x4d6e);
        EXPECT(gbc.pc(), 0x9ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0150
        gbc.setState(0x1024, 0x1d6c, 0xee30, 0x509b, 0xd402, 0x8ff9, 0x1, 0x1);
        gbc.writeMem(0x1024, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x1d6c);
        EXPECT(gbc.pc(), 0x1025);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0151
        gbc.setState(0x5118, 0x99d3, 0xbc50, 0x632, 0x63ff, 0xa6fd, 0x0, 0x0);
        gbc.writeMem(0x5118, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x99d3);
        EXPECT(gbc.pc(), 0x5119);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0152
        gbc.setState(0x9b48, 0x339d, 0xbfb0, 0xfbab, 0xed05, 0x1088, 0x1, 0x0);
        gbc.writeMem(0x9b48, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x339d);
        EXPECT(gbc.pc(), 0x9b49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b48), 0x9f);
        // 9F 0153
        gbc.setState(0x529a, 0x7298, 0x6ae0, 0x6cfa, 0x8f43, 0x1894, 0x1, 0x1);
        gbc.writeMem(0x529a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x7298);
        EXPECT(gbc.pc(), 0x529b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0154
        gbc.setState(0x26f8, 0xc28e, 0x6870, 0x26b8, 0x595f, 0x3c2c, 0x1, 0x0);
        gbc.writeMem(0x26f8, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xc28e);
        EXPECT(gbc.pc(), 0x26f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0155
        gbc.setState(0x37d7, 0x907e, 0x6e20, 0x63c0, 0xab68, 0xe64, 0x1, 0x1);
        gbc.writeMem(0x37d7, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x907e);
        EXPECT(gbc.pc(), 0x37d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0156
        gbc.setState(0x427a, 0xd951, 0xcb60, 0x3497, 0x388a, 0x4d3a, 0x0, 0x1);
        gbc.writeMem(0x427a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xd951);
        EXPECT(gbc.pc(), 0x427b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0157
        gbc.setState(0xe92c, 0x5cb6, 0xc810, 0xbdee, 0x60c9, 0x3da6, 0x1, 0x1);
        gbc.writeMem(0xe92c, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x5cb6);
        EXPECT(gbc.pc(), 0xe92d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe92c), 0x9f);
        // 9F 0158
        gbc.setState(0x7843, 0xe95d, 0x44c0, 0xbc54, 0xe669, 0x378d, 0x1, 0x1);
        gbc.writeMem(0x7843, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xe95d);
        EXPECT(gbc.pc(), 0x7844);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0159
        gbc.setState(0x48b8, 0x9dae, 0xe710, 0x135d, 0x9e87, 0x2783, 0x0, 0x1);
        gbc.writeMem(0x48b8, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x9dae);
        EXPECT(gbc.pc(), 0x48b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 015A
        gbc.setState(0x9319, 0x5297, 0x58a0, 0x4c32, 0x3c2d, 0x4dc8, 0x0, 0x0);
        gbc.writeMem(0x9319, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x5297);
        EXPECT(gbc.pc(), 0x931a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9319), 0x9f);
        // 9F 015B
        gbc.setState(0xabd8, 0x11dd, 0xd2a0, 0x1716, 0x2740, 0x2888, 0x1, 0x0);
        gbc.writeMem(0xabd8, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x11dd);
        EXPECT(gbc.pc(), 0xabd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabd8), 0x9f);
        // 9F 015C
        gbc.setState(0x87fa, 0x9199, 0x6d50, 0x2445, 0x4957, 0xc1fa, 0x0, 0x0);
        gbc.writeMem(0x87fa, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x9199);
        EXPECT(gbc.pc(), 0x87fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87fa), 0x9f);
        // 9F 015D
        gbc.setState(0xe785, 0x9d88, 0x3a60, 0xea5c, 0x35e8, 0xd2cd, 0x0, 0x1);
        gbc.writeMem(0xe785, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x9d88);
        EXPECT(gbc.pc(), 0xe786);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe785), 0x9f);
        // 9F 015E
        gbc.setState(0xe011, 0xea25, 0x7ea0, 0x133b, 0xc144, 0xa9d6, 0x1, 0x1);
        gbc.writeMem(0xe011, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xea25);
        EXPECT(gbc.pc(), 0xe012);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe011), 0x9f);
        // 9F 015F
        gbc.setState(0x4f91, 0xf84e, 0x89d0, 0x4e06, 0xc10f, 0x862d, 0x1, 0x1);
        gbc.writeMem(0x4f91, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xf84e);
        EXPECT(gbc.pc(), 0x4f92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0160
        gbc.setState(0x772c, 0xaa4, 0x30d0, 0x93f0, 0x505e, 0xfd62, 0x1, 0x1);
        gbc.writeMem(0x772c, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xaa4);
        EXPECT(gbc.pc(), 0x772d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0161
        gbc.setState(0xd84, 0xa03d, 0x19b0, 0x2c97, 0xa638, 0xf9de, 0x1, 0x0);
        gbc.writeMem(0xd84, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xa03d);
        EXPECT(gbc.pc(), 0xd85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0162
        gbc.setState(0xa656, 0x16e3, 0x1490, 0x6467, 0xc403, 0x6188, 0x0, 0x1);
        gbc.writeMem(0xa656, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x16e3);
        EXPECT(gbc.pc(), 0xa657);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa656), 0x9f);
        // 9F 0163
        gbc.setState(0x573, 0x5405, 0xaf00, 0x50e6, 0xd61e, 0x855d, 0x0, 0x0);
        gbc.writeMem(0x573, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x5405);
        EXPECT(gbc.pc(), 0x574);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0164
        gbc.setState(0x4e52, 0xf965, 0xe440, 0xfb6f, 0x3b6, 0x5b4, 0x1, 0x0);
        gbc.writeMem(0x4e52, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xf965);
        EXPECT(gbc.pc(), 0x4e53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0165
        gbc.setState(0x6c7b, 0x511, 0x97e0, 0xad11, 0x5d02, 0x8d85, 0x1, 0x0);
        gbc.writeMem(0x6c7b, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x511);
        EXPECT(gbc.pc(), 0x6c7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0166
        gbc.setState(0xe1c1, 0xd7e2, 0xa550, 0x91c3, 0xa358, 0x53b0, 0x1, 0x0);
        gbc.writeMem(0xe1c1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xd7e2);
        EXPECT(gbc.pc(), 0xe1c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1c1), 0x9f);
        // 9F 0167
        gbc.setState(0x1f7c, 0xacbf, 0x85c0, 0x4eb6, 0x755a, 0x3583, 0x0, 0x1);
        gbc.writeMem(0x1f7c, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xacbf);
        EXPECT(gbc.pc(), 0x1f7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0168
        gbc.setState(0x9def, 0x58f0, 0x2770, 0xba7b, 0x420f, 0x2fb0, 0x1, 0x1);
        gbc.writeMem(0x9def, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x58f0);
        EXPECT(gbc.pc(), 0x9df0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9def), 0x9f);
        // 9F 0169
        gbc.setState(0xbb3d, 0x69b2, 0xc5e0, 0x49d0, 0xe8cb, 0xdde4, 0x1, 0x0);
        gbc.writeMem(0xbb3d, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x69b2);
        EXPECT(gbc.pc(), 0xbb3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb3d), 0x9f);
        // 9F 016A
        gbc.setState(0x466f, 0x5e4d, 0x13d0, 0x7dd0, 0xc4d9, 0xdac4, 0x1, 0x0);
        gbc.writeMem(0x466f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x5e4d);
        EXPECT(gbc.pc(), 0x4670);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 016B
        gbc.setState(0x8c4, 0xf08b, 0x1c30, 0xb8b0, 0xcd34, 0xa875, 0x1, 0x1);
        gbc.writeMem(0x8c4, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xf08b);
        EXPECT(gbc.pc(), 0x8c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 016C
        gbc.setState(0xbacb, 0x758b, 0x6330, 0x344d, 0xc815, 0xbdab, 0x0, 0x1);
        gbc.writeMem(0xbacb, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x758b);
        EXPECT(gbc.pc(), 0xbacc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbacb), 0x9f);
        // 9F 016D
        gbc.setState(0xc8ee, 0x926b, 0x8bb0, 0x2857, 0xce5e, 0x5374, 0x0, 0x1);
        gbc.writeMem(0xc8ee, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x926b);
        EXPECT(gbc.pc(), 0xc8ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8ee), 0x9f);
        // 9F 016E
        gbc.setState(0x25dd, 0xc8b0, 0xc8b0, 0xd80c, 0x5fd0, 0xdd86, 0x0, 0x0);
        gbc.writeMem(0x25dd, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xc8b0);
        EXPECT(gbc.pc(), 0x25de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 016F
        gbc.setState(0x11a7, 0x2f48, 0x1c70, 0xafc1, 0x3398, 0x9b1, 0x1, 0x1);
        gbc.writeMem(0x11a7, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x2f48);
        EXPECT(gbc.pc(), 0x11a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0170
        gbc.setState(0xacff, 0x489b, 0xa4d0, 0xb432, 0x65a1, 0x3eb4, 0x1, 0x0);
        gbc.writeMem(0xacff, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x489b);
        EXPECT(gbc.pc(), 0xad00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacff), 0x9f);
        // 9F 0171
        gbc.setState(0x185c, 0x4c2b, 0x18b0, 0xe201, 0x7c1, 0xd738, 0x0, 0x1);
        gbc.writeMem(0x185c, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x4c2b);
        EXPECT(gbc.pc(), 0x185d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0172
        gbc.setState(0x2ea5, 0x5ddb, 0x9620, 0x2518, 0x69d9, 0xb, 0x0, 0x1);
        gbc.writeMem(0x2ea5, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x5ddb);
        EXPECT(gbc.pc(), 0x2ea6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0173
        gbc.setState(0x388a, 0x398b, 0x4540, 0x3132, 0x337b, 0x4de9, 0x0, 0x0);
        gbc.writeMem(0x388a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x398b);
        EXPECT(gbc.pc(), 0x388b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0174
        gbc.setState(0x5b81, 0xea93, 0xf750, 0x74ed, 0x43f, 0x90ec, 0x0, 0x0);
        gbc.writeMem(0x5b81, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xea93);
        EXPECT(gbc.pc(), 0x5b82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0175
        gbc.setState(0x1fde, 0xec06, 0xb300, 0x9ba6, 0x5548, 0x4676, 0x0, 0x1);
        gbc.writeMem(0x1fde, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xec06);
        EXPECT(gbc.pc(), 0x1fdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0176
        gbc.setState(0x7d42, 0x2dc, 0x7850, 0xe568, 0xda23, 0x1367, 0x0, 0x1);
        gbc.writeMem(0x7d42, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x2dc);
        EXPECT(gbc.pc(), 0x7d43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0177
        gbc.setState(0xbe87, 0x3cfc, 0xd140, 0x7a8d, 0xa511, 0x3cf4, 0x0, 0x0);
        gbc.writeMem(0xbe87, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x3cfc);
        EXPECT(gbc.pc(), 0xbe88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe87), 0x9f);
        // 9F 0178
        gbc.setState(0x962a, 0x22d9, 0x38b0, 0x4ac6, 0x9104, 0xbbf7, 0x0, 0x1);
        gbc.writeMem(0x962a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x22d9);
        EXPECT(gbc.pc(), 0x962b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x962a), 0x9f);
        // 9F 0179
        gbc.setState(0xe6f1, 0x18c5, 0x9d90, 0x530, 0xfbf, 0xe50a, 0x0, 0x1);
        gbc.writeMem(0xe6f1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x18c5);
        EXPECT(gbc.pc(), 0xe6f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6f1), 0x9f);
        // 9F 017A
        gbc.setState(0xa35b, 0xb7d9, 0x3120, 0xd259, 0x51d2, 0x6d0f, 0x0, 0x1);
        gbc.writeMem(0xa35b, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xb7d9);
        EXPECT(gbc.pc(), 0xa35c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa35b), 0x9f);
        // 9F 017B
        gbc.setState(0x197a, 0x1156, 0x3d0, 0x3a2a, 0x613f, 0x5b15, 0x0, 0x1);
        gbc.writeMem(0x197a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x1156);
        EXPECT(gbc.pc(), 0x197b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 017C
        gbc.setState(0x9c19, 0xb9ab, 0x8dd0, 0x191e, 0xfe5b, 0x7f94, 0x1, 0x0);
        gbc.writeMem(0x9c19, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xb9ab);
        EXPECT(gbc.pc(), 0x9c1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c19), 0x9f);
        // 9F 017E
        gbc.setState(0x7da5, 0x9199, 0x4120, 0x9343, 0xd10, 0x1db, 0x0, 0x1);
        gbc.writeMem(0x7da5, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x9199);
        EXPECT(gbc.pc(), 0x7da6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 017F
        gbc.setState(0x9972, 0x1326, 0x59a0, 0x5699, 0x265e, 0x15f0, 0x1, 0x0);
        gbc.writeMem(0x9972, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x1326);
        EXPECT(gbc.pc(), 0x9973);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9972), 0x9f);
        // 9F 0180
        gbc.setState(0x25c4, 0xb260, 0x3b60, 0x5199, 0x3f95, 0x47fc, 0x0, 0x0);
        gbc.writeMem(0x25c4, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xb260);
        EXPECT(gbc.pc(), 0x25c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0181
        gbc.setState(0xc9cb, 0x7557, 0x4ba0, 0x8d2a, 0xbeb8, 0xf14a, 0x0, 0x0);
        gbc.writeMem(0xc9cb, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x7557);
        EXPECT(gbc.pc(), 0xc9cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9cb), 0x9f);
        // 9F 0182
        gbc.setState(0xcd68, 0x4855, 0xb990, 0x6f0e, 0x5dff, 0x50cb, 0x0, 0x1);
        gbc.writeMem(0xcd68, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x4855);
        EXPECT(gbc.pc(), 0xcd69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd68), 0x9f);
        // 9F 0183
        gbc.setState(0xc480, 0x820d, 0x780, 0xcf3e, 0xade9, 0x153, 0x0, 0x0);
        gbc.writeMem(0xc480, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x820d);
        EXPECT(gbc.pc(), 0xc481);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc480), 0x9f);
        // 9F 0184
        gbc.setState(0x4fbb, 0x9446, 0x8d0, 0x9b6a, 0xd15f, 0x183d, 0x1, 0x0);
        gbc.writeMem(0x4fbb, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x9446);
        EXPECT(gbc.pc(), 0x4fbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0185
        gbc.setState(0xb569, 0x19aa, 0xc6d0, 0x4bf0, 0xce13, 0x2309, 0x0, 0x1);
        gbc.writeMem(0xb569, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x19aa);
        EXPECT(gbc.pc(), 0xb56a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb569), 0x9f);
        // 9F 0186
        gbc.setState(0x4baa, 0xe0ee, 0xbe80, 0x3858, 0x6d07, 0xd376, 0x1, 0x1);
        gbc.writeMem(0x4baa, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xe0ee);
        EXPECT(gbc.pc(), 0x4bab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0187
        gbc.setState(0xbc22, 0xb08c, 0x6e60, 0xe39d, 0x6fc1, 0x3bf8, 0x0, 0x1);
        gbc.writeMem(0xbc22, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xb08c);
        EXPECT(gbc.pc(), 0xbc23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc22), 0x9f);
        // 9F 0188
        gbc.setState(0x2c6e, 0xef6d, 0xaa0, 0xb115, 0xbf7e, 0xe666, 0x1, 0x0);
        gbc.writeMem(0x2c6e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xef6d);
        EXPECT(gbc.pc(), 0x2c6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0189
        gbc.setState(0x941d, 0x8a37, 0xa830, 0x7878, 0x6c82, 0x49c1, 0x1, 0x0);
        gbc.writeMem(0x941d, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x8a37);
        EXPECT(gbc.pc(), 0x941e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x941d), 0x9f);
        // 9F 018A
        gbc.setState(0x2d96, 0xba5a, 0x1fe0, 0xcbf3, 0xfcb8, 0xfdb4, 0x0, 0x0);
        gbc.writeMem(0x2d96, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xba5a);
        EXPECT(gbc.pc(), 0x2d97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 018B
        gbc.setState(0x946d, 0x35b3, 0xded0, 0x3498, 0x6a6e, 0xc98e, 0x1, 0x1);
        gbc.writeMem(0x946d, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x35b3);
        EXPECT(gbc.pc(), 0x946e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x946d), 0x9f);
        // 9F 018C
        gbc.setState(0x3644, 0xbecb, 0xed0, 0x6d5a, 0xdf44, 0xeae6, 0x0, 0x0);
        gbc.writeMem(0x3644, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xbecb);
        EXPECT(gbc.pc(), 0x3645);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 018E
        gbc.setState(0xee82, 0x5f59, 0x45f0, 0x99f, 0x34ca, 0x3b63, 0x0, 0x1);
        gbc.writeMem(0xee82, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x5f59);
        EXPECT(gbc.pc(), 0xee83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee82), 0x9f);
        // 9F 018F
        gbc.setState(0x6282, 0xb7d9, 0x60a0, 0xb9f3, 0xac3f, 0xaeae, 0x0, 0x0);
        gbc.writeMem(0x6282, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xb7d9);
        EXPECT(gbc.pc(), 0x6283);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0190
        gbc.setState(0x6386, 0x1417, 0xda80, 0x62ec, 0xdff6, 0x6b4, 0x1, 0x1);
        gbc.writeMem(0x6386, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x1417);
        EXPECT(gbc.pc(), 0x6387);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0191
        gbc.setState(0xbf30, 0x5d09, 0x2ea0, 0x1e8c, 0x7a6b, 0xe727, 0x1, 0x0);
        gbc.writeMem(0xbf30, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x5d09);
        EXPECT(gbc.pc(), 0xbf31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf30), 0x9f);
        // 9F 0192
        gbc.setState(0xaecb, 0x407c, 0x80f0, 0x6f91, 0x1150, 0x3bfb, 0x1, 0x1);
        gbc.writeMem(0xaecb, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x407c);
        EXPECT(gbc.pc(), 0xaecc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaecb), 0x9f);
        // 9F 0193
        gbc.setState(0x6f31, 0xa52, 0x6130, 0x3d2a, 0xdf3f, 0xd3e2, 0x1, 0x1);
        gbc.writeMem(0x6f31, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xa52);
        EXPECT(gbc.pc(), 0x6f32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0194
        gbc.setState(0x4f09, 0x1bd8, 0xa250, 0xbc7a, 0x3605, 0x5094, 0x1, 0x0);
        gbc.writeMem(0x4f09, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x1bd8);
        EXPECT(gbc.pc(), 0x4f0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0196
        gbc.setState(0x4d54, 0x8498, 0x2050, 0x342d, 0x4a57, 0x2c2c, 0x0, 0x0);
        gbc.writeMem(0x4d54, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x8498);
        EXPECT(gbc.pc(), 0x4d55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0197
        gbc.setState(0xa1fa, 0x11d1, 0xa60, 0xc438, 0x3d75, 0x824b, 0x1, 0x1);
        gbc.writeMem(0xa1fa, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x11d1);
        EXPECT(gbc.pc(), 0xa1fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1fa), 0x9f);
        // 9F 0198
        gbc.setState(0x3a83, 0x7fa, 0x5a80, 0xedd1, 0xb3f7, 0xf7a2, 0x1, 0x1);
        gbc.writeMem(0x3a83, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x7fa);
        EXPECT(gbc.pc(), 0x3a84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0199
        gbc.setState(0xd26, 0xfc16, 0x6560, 0x6271, 0xf22f, 0xc2d8, 0x1, 0x0);
        gbc.writeMem(0xd26, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xfc16);
        EXPECT(gbc.pc(), 0xd27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 019A
        gbc.setState(0xffd, 0xe106, 0xb890, 0xce38, 0xe54d, 0xa7a, 0x0, 0x1);
        gbc.writeMem(0xffd, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xe106);
        EXPECT(gbc.pc(), 0xffe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 019B
        gbc.setState(0x709, 0xa72d, 0x7b0, 0xfde2, 0x1cf6, 0x2198, 0x1, 0x1);
        gbc.writeMem(0x709, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xa72d);
        EXPECT(gbc.pc(), 0x70a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 019D
        gbc.setState(0xb128, 0x6815, 0xd7a0, 0xcd31, 0x6780, 0x2e55, 0x1, 0x0);
        gbc.writeMem(0xb128, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x6815);
        EXPECT(gbc.pc(), 0xb129);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb128), 0x9f);
        // 9F 019E
        gbc.setState(0x1ed, 0xb563, 0xb390, 0x2945, 0xa2a3, 0xdea4, 0x0, 0x0);
        gbc.writeMem(0x1ed, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xb563);
        EXPECT(gbc.pc(), 0x1ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 019F
        gbc.setState(0x45e0, 0x9e39, 0xd4f0, 0xef4e, 0x3461, 0x7336, 0x1, 0x0);
        gbc.writeMem(0x45e0, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x9e39);
        EXPECT(gbc.pc(), 0x45e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 01A0
        gbc.setState(0x52e9, 0x3d56, 0xa070, 0x86d0, 0x22c9, 0x94bd, 0x0, 0x1);
        gbc.writeMem(0x52e9, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x3d56);
        EXPECT(gbc.pc(), 0x52ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 01A1
        gbc.setState(0xc7ac, 0x8bf9, 0x1730, 0x87b4, 0x1fe7, 0x6ae4, 0x1, 0x0);
        gbc.writeMem(0xc7ac, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x8bf9);
        EXPECT(gbc.pc(), 0xc7ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7ac), 0x9f);
        // 9F 01A2
        gbc.setState(0x5b11, 0x30dc, 0x1ad0, 0xed92, 0xcecd, 0xcdb6, 0x1, 0x1);
        gbc.writeMem(0x5b11, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x30dc);
        EXPECT(gbc.pc(), 0x5b12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 01A3
        gbc.setState(0x7167, 0x96e1, 0xa590, 0xa0b9, 0x56f1, 0x60b1, 0x0, 0x1);
        gbc.writeMem(0x7167, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x96e1);
        EXPECT(gbc.pc(), 0x7168);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 01A4
        gbc.setState(0xacd0, 0x18c8, 0x2170, 0xf51, 0x66fb, 0x9ed7, 0x1, 0x1);
        gbc.writeMem(0xacd0, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x18c8);
        EXPECT(gbc.pc(), 0xacd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacd0), 0x9f);
        // 9F 01A5
        gbc.setState(0x4bba, 0xe416, 0x8680, 0xb3e5, 0x128c, 0x64f8, 0x0, 0x1);
        gbc.writeMem(0x4bba, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xe416);
        EXPECT(gbc.pc(), 0x4bbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 01A6
        gbc.setState(0xba3f, 0x1828, 0x60a0, 0x59a3, 0x4cb5, 0x1e82, 0x1, 0x1);
        gbc.writeMem(0xba3f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x1828);
        EXPECT(gbc.pc(), 0xba40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba3f), 0x9f);
        // 9F 01A7
        gbc.setState(0x113d, 0x764c, 0x200, 0x8a88, 0x271c, 0x4154, 0x0, 0x1);
        gbc.writeMem(0x113d, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x764c);
        EXPECT(gbc.pc(), 0x113e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 01A8
        gbc.setState(0x1535, 0x9392, 0x7160, 0x7592, 0x5735, 0x7955, 0x1, 0x0);
        gbc.writeMem(0x1535, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x9392);
        EXPECT(gbc.pc(), 0x1536);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 01A9
        gbc.setState(0x1405, 0x2134, 0xd590, 0x3c4e, 0xc74f, 0xc0c3, 0x1, 0x1);
        gbc.writeMem(0x1405, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x2134);
        EXPECT(gbc.pc(), 0x1406);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 01AA
        gbc.setState(0x5c73, 0x14d3, 0x2d80, 0x45d6, 0x2684, 0x60a0, 0x1, 0x1);
        gbc.writeMem(0x5c73, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x14d3);
        EXPECT(gbc.pc(), 0x5c74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 01AB
        gbc.setState(0x8bb1, 0x3f26, 0xfc30, 0xa7d4, 0xd435, 0x5da0, 0x1, 0x0);
        gbc.writeMem(0x8bb1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x3f26);
        EXPECT(gbc.pc(), 0x8bb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bb1), 0x9f);
        // 9F 01AC
        gbc.setState(0xd2ee, 0x4b8f, 0x1dc0, 0xef4, 0xd14c, 0xc706, 0x0, 0x1);
        gbc.writeMem(0xd2ee, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x4b8f);
        EXPECT(gbc.pc(), 0xd2ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2ee), 0x9f);
        // 9F 01AD
        gbc.setState(0x7c0c, 0x1a7d, 0xb4a0, 0x5c4, 0x6e83, 0x1df3, 0x1, 0x0);
        gbc.writeMem(0x7c0c, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x1a7d);
        EXPECT(gbc.pc(), 0x7c0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 01AE
        gbc.setState(0xd681, 0x8409, 0x9780, 0x595e, 0x1a8, 0x5d3f, 0x1, 0x0);
        gbc.writeMem(0xd681, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x8409);
        EXPECT(gbc.pc(), 0xd682);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd681), 0x9f);
        // 9F 01AF
        gbc.setState(0x46f7, 0xac0e, 0xa0f0, 0x7162, 0x4b4d, 0x6e77, 0x0, 0x0);
        gbc.writeMem(0x46f7, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xac0e);
        EXPECT(gbc.pc(), 0x46f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 01B0
        gbc.setState(0x3c95, 0x2b70, 0x93f0, 0x6ffe, 0xaf8a, 0x1d66, 0x0, 0x0);
        gbc.writeMem(0x3c95, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x2b70);
        EXPECT(gbc.pc(), 0x3c96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 01B1
        gbc.setState(0xcd5, 0x67d5, 0x8d40, 0x1609, 0x1597, 0x61ca, 0x0, 0x1);
        gbc.writeMem(0xcd5, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x67d5);
        EXPECT(gbc.pc(), 0xcd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 01B2
        gbc.setState(0x93f, 0x5bb2, 0x9db0, 0x7043, 0xc311, 0x1f5d, 0x0, 0x0);
        gbc.writeMem(0x93f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x5bb2);
        EXPECT(gbc.pc(), 0x940);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 01B4
        gbc.setState(0x150d, 0x7a61, 0x6680, 0xffee, 0x313, 0x20b3, 0x1, 0x1);
        gbc.writeMem(0x150d, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x7a61);
        EXPECT(gbc.pc(), 0x150e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 01B5
        gbc.setState(0x455, 0x8dbc, 0x1f00, 0x241e, 0x5a6b, 0x124f, 0x0, 0x0);
        gbc.writeMem(0x455, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x8dbc);
        EXPECT(gbc.pc(), 0x456);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 01B6
        gbc.setState(0xc92, 0x548b, 0x42b0, 0xb2b6, 0xcd41, 0x9d0c, 0x0, 0x0);
        gbc.writeMem(0xc92, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x548b);
        EXPECT(gbc.pc(), 0xc93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 01B7
        gbc.setState(0x965a, 0x4527, 0x740, 0xfdbd, 0x2471, 0xe22a, 0x1, 0x1);
        gbc.writeMem(0x965a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x4527);
        EXPECT(gbc.pc(), 0x965b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x965a), 0x9f);
        // 9F 01B8
        gbc.setState(0x90bd, 0x68ba, 0xc460, 0x8499, 0xade0, 0xd07a, 0x0, 0x0);
        gbc.writeMem(0x90bd, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x68ba);
        EXPECT(gbc.pc(), 0x90be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90bd), 0x9f);
        // 9F 01B9
        gbc.setState(0xb1e2, 0xcd53, 0xd4a0, 0xa91b, 0x96ad, 0x332e, 0x0, 0x0);
        gbc.writeMem(0xb1e2, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xcd53);
        EXPECT(gbc.pc(), 0xb1e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1e2), 0x9f);
        // 9F 01BB
        gbc.setState(0x24fd, 0xff93, 0xa3c0, 0x27f7, 0xc35a, 0x3dfd, 0x0, 0x0);
        gbc.writeMem(0x24fd, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xff93);
        EXPECT(gbc.pc(), 0x24fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 01BC
        gbc.setState(0x1802, 0x677a, 0xccc0, 0xb14f, 0x72a8, 0x8da5, 0x0, 0x0);
        gbc.writeMem(0x1802, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x677a);
        EXPECT(gbc.pc(), 0x1803);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 01BD
        gbc.setState(0xbc8f, 0x8185, 0xa820, 0xe286, 0xe780, 0xb8ae, 0x1, 0x1);
        gbc.writeMem(0xbc8f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x8185);
        EXPECT(gbc.pc(), 0xbc90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc8f), 0x9f);
        // 9F 01BE
        gbc.setState(0xc78a, 0x15a9, 0xb930, 0x63c2, 0xa1c3, 0x8507, 0x0, 0x1);
        gbc.writeMem(0xc78a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x15a9);
        EXPECT(gbc.pc(), 0xc78b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc78a), 0x9f);
        // 9F 01BF
        gbc.setState(0x93e4, 0x72b4, 0x8ce0, 0xea93, 0xdd7c, 0x1f32, 0x0, 0x0);
        gbc.writeMem(0x93e4, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x72b4);
        EXPECT(gbc.pc(), 0x93e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93e4), 0x9f);
        // 9F 01C0
        gbc.setState(0xc782, 0xfc12, 0x53b0, 0x6951, 0x8c79, 0x9b6f, 0x0, 0x1);
        gbc.writeMem(0xc782, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xfc12);
        EXPECT(gbc.pc(), 0xc783);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc782), 0x9f);
        // 9F 01C1
        gbc.setState(0xcea2, 0xeeaf, 0xa3d0, 0xa90c, 0x7e75, 0x7acd, 0x0, 0x1);
        gbc.writeMem(0xcea2, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xeeaf);
        EXPECT(gbc.pc(), 0xcea3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcea2), 0x9f);
        // 9F 01C2
        gbc.setState(0xa3d7, 0x819d, 0x90e0, 0x40b, 0x4950, 0x6011, 0x0, 0x0);
        gbc.writeMem(0xa3d7, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x819d);
        EXPECT(gbc.pc(), 0xa3d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3d7), 0x9f);
        // 9F 01C3
        gbc.setState(0x3502, 0xba26, 0x8790, 0x1950, 0x578d, 0xc76c, 0x0, 0x0);
        gbc.writeMem(0x3502, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xba26);
        EXPECT(gbc.pc(), 0x3503);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 01C4
        gbc.setState(0xa40e, 0x533, 0xae50, 0x8b9, 0xd349, 0x612d, 0x0, 0x0);
        gbc.writeMem(0xa40e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x533);
        EXPECT(gbc.pc(), 0xa40f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa40e), 0x9f);
        // 9F 01C5
        gbc.setState(0x97cd, 0x4e5a, 0x2610, 0x5e4c, 0x2205, 0x774a, 0x1, 0x1);
        gbc.writeMem(0x97cd, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x4e5a);
        EXPECT(gbc.pc(), 0x97ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97cd), 0x9f);
        // 9F 01C6
        gbc.setState(0xaaf8, 0xfb2b, 0xf3c0, 0x8599, 0x7bb0, 0x88cf, 0x1, 0x0);
        gbc.writeMem(0xaaf8, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xfb2b);
        EXPECT(gbc.pc(), 0xaaf9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaaf8), 0x9f);
        // 9F 01C7
        gbc.setState(0x22e6, 0x3db4, 0xc6c0, 0xcfb, 0x8865, 0x47c9, 0x1, 0x0);
        gbc.writeMem(0x22e6, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x3db4);
        EXPECT(gbc.pc(), 0x22e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 01C8
        gbc.setState(0x9244, 0xe2fb, 0x1620, 0x2651, 0x39aa, 0xdec8, 0x0, 0x0);
        gbc.writeMem(0x9244, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xe2fb);
        EXPECT(gbc.pc(), 0x9245);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9244), 0x9f);
        // 9F 01C9
        gbc.setState(0xc76e, 0x2f06, 0x20, 0xe1cc, 0xb3cf, 0x88b2, 0x0, 0x0);
        gbc.writeMem(0xc76e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x2f06);
        EXPECT(gbc.pc(), 0xc76f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc76e), 0x9f);
        // 9F 01CA
        gbc.setState(0xeee3, 0x317f, 0x23a0, 0x9007, 0x600d, 0x2cd3, 0x0, 0x1);
        gbc.writeMem(0xeee3, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x317f);
        EXPECT(gbc.pc(), 0xeee4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeee3), 0x9f);
        // 9F 01CB
        gbc.setState(0x2063, 0x1bc5, 0x7e10, 0x91e4, 0x3688, 0xa88b, 0x1, 0x0);
        gbc.writeMem(0x2063, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x1bc5);
        EXPECT(gbc.pc(), 0x2064);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 01CC
        gbc.setState(0x8909, 0x51a0, 0xe670, 0xf207, 0x267e, 0x56a9, 0x1, 0x0);
        gbc.writeMem(0x8909, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x51a0);
        EXPECT(gbc.pc(), 0x890a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8909), 0x9f);
        // 9F 01CD
        gbc.setState(0xddb5, 0xe262, 0x4190, 0x161, 0xef96, 0x3681, 0x0, 0x1);
        gbc.writeMem(0xddb5, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xe262);
        EXPECT(gbc.pc(), 0xddb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddb5), 0x9f);
        // 9F 01CE
        gbc.setState(0x7e64, 0x5ac3, 0xcbd0, 0x3ea2, 0xbf5f, 0x780f, 0x1, 0x0);
        gbc.writeMem(0x7e64, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x5ac3);
        EXPECT(gbc.pc(), 0x7e65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 01CF
        gbc.setState(0x70b7, 0xd15, 0x6630, 0xc2a7, 0x2607, 0x1530, 0x1, 0x1);
        gbc.writeMem(0x70b7, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xd15);
        EXPECT(gbc.pc(), 0x70b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 01D0
        gbc.setState(0x7949, 0x789, 0x63e0, 0x6653, 0xbf2e, 0x1508, 0x1, 0x0);
        gbc.writeMem(0x7949, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x789);
        EXPECT(gbc.pc(), 0x794a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 01D1
        gbc.setState(0x76da, 0xa477, 0xdbc0, 0xc554, 0x5631, 0x25c6, 0x0, 0x0);
        gbc.writeMem(0x76da, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xa477);
        EXPECT(gbc.pc(), 0x76db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 01D2
        gbc.setState(0x4958, 0xc8cc, 0xb820, 0x9e0, 0x4386, 0xd1e4, 0x0, 0x1);
        gbc.writeMem(0x4958, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xc8cc);
        EXPECT(gbc.pc(), 0x4959);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 01D3
        gbc.setState(0x88ed, 0xd965, 0x9f80, 0x7d97, 0x772e, 0xc75a, 0x1, 0x1);
        gbc.writeMem(0x88ed, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xd965);
        EXPECT(gbc.pc(), 0x88ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88ed), 0x9f);
        // 9F 01D4
        gbc.setState(0x538b, 0xe20, 0x16a0, 0x31ce, 0xf72, 0x26bd, 0x0, 0x0);
        gbc.writeMem(0x538b, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xe20);
        EXPECT(gbc.pc(), 0x538c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 01D5
        gbc.setState(0xd6f6, 0x9c53, 0xe430, 0xee89, 0x915, 0x17cd, 0x0, 0x1);
        gbc.writeMem(0xd6f6, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x9c53);
        EXPECT(gbc.pc(), 0xd6f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6f6), 0x9f);
        // 9F 01D6
        gbc.setState(0x81df, 0xf606, 0xc6b0, 0x295d, 0xdb0d, 0x78d4, 0x0, 0x1);
        gbc.writeMem(0x81df, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xf606);
        EXPECT(gbc.pc(), 0x81e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81df), 0x9f);
        // 9F 01D7
        gbc.setState(0x2e62, 0x22, 0x4340, 0x753, 0x2b65, 0x915e, 0x1, 0x1);
        gbc.writeMem(0x2e62, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x22);
        EXPECT(gbc.pc(), 0x2e63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 01D8
        gbc.setState(0x978b, 0xf3d2, 0xec80, 0x4201, 0x8ce3, 0x851f, 0x0, 0x1);
        gbc.writeMem(0x978b, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xf3d2);
        EXPECT(gbc.pc(), 0x978c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x978b), 0x9f);
        // 9F 01D9
        gbc.setState(0xccb9, 0xf6a8, 0xf630, 0xa54e, 0x4e76, 0x2b47, 0x0, 0x0);
        gbc.writeMem(0xccb9, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xf6a8);
        EXPECT(gbc.pc(), 0xccba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccb9), 0x9f);
        // 9F 01DA
        gbc.setState(0x732f, 0x205e, 0xe9b0, 0x7836, 0x1f4d, 0xc82b, 0x0, 0x0);
        gbc.writeMem(0x732f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x205e);
        EXPECT(gbc.pc(), 0x7330);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 01DB
        gbc.setState(0x85ba, 0xe103, 0x80a0, 0x90e5, 0x9b0c, 0x4df9, 0x0, 0x1);
        gbc.writeMem(0x85ba, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xe103);
        EXPECT(gbc.pc(), 0x85bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85ba), 0x9f);
        // 9F 01DC
        gbc.setState(0x9e60, 0xa96e, 0xd910, 0x191e, 0x36f, 0x1e00, 0x0, 0x1);
        gbc.writeMem(0x9e60, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xa96e);
        EXPECT(gbc.pc(), 0x9e61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e60), 0x9f);
        // 9F 01DD
        gbc.setState(0xe200, 0x4397, 0x8750, 0x11fa, 0xb525, 0x5fa9, 0x1, 0x0);
        gbc.writeMem(0xe200, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x4397);
        EXPECT(gbc.pc(), 0xe201);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe200), 0x9f);
        // 9F 01DE
        gbc.setState(0xdf43, 0xa8e9, 0xa530, 0x1531, 0xe09e, 0x4d0d, 0x1, 0x0);
        gbc.writeMem(0xdf43, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xa8e9);
        EXPECT(gbc.pc(), 0xdf44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf43), 0x9f);
        // 9F 01DF
        gbc.setState(0xbdf2, 0x5d43, 0x6230, 0xa416, 0xe33a, 0x577e, 0x0, 0x0);
        gbc.writeMem(0xbdf2, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x5d43);
        EXPECT(gbc.pc(), 0xbdf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdf2), 0x9f);
        // 9F 01E0
        gbc.setState(0xa077, 0x820a, 0xed60, 0x4b8d, 0xa2bc, 0x90c2, 0x0, 0x0);
        gbc.writeMem(0xa077, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x820a);
        EXPECT(gbc.pc(), 0xa078);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa077), 0x9f);
        // 9F 01E1
        gbc.setState(0xb729, 0x9b27, 0x5280, 0x3747, 0xadb3, 0xd1d9, 0x0, 0x0);
        gbc.writeMem(0xb729, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x9b27);
        EXPECT(gbc.pc(), 0xb72a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb729), 0x9f);
        // 9F 01E3
        gbc.setState(0x168f, 0xf792, 0x5890, 0x3b21, 0xa720, 0xb8e0, 0x0, 0x0);
        gbc.writeMem(0x168f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xf792);
        EXPECT(gbc.pc(), 0x1690);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 01E4
        gbc.setState(0xb6f9, 0x33b3, 0xec40, 0x856, 0xdb92, 0xcc41, 0x1, 0x0);
        gbc.writeMem(0xb6f9, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x33b3);
        EXPECT(gbc.pc(), 0xb6fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6f9), 0x9f);
        // 9F 01E5
        gbc.setState(0x32f, 0x77bf, 0xc0d0, 0xdb54, 0x8286, 0xaa3a, 0x0, 0x1);
        gbc.writeMem(0x32f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x77bf);
        EXPECT(gbc.pc(), 0x330);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 01E6
        gbc.setState(0x808c, 0x3f33, 0x5dd0, 0xc060, 0x3fe1, 0xdcbd, 0x0, 0x0);
        gbc.writeMem(0x808c, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x3f33);
        EXPECT(gbc.pc(), 0x808d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x808c), 0x9f);
        // 9F 01E7
        gbc.setState(0x7a18, 0x3e41, 0xffa0, 0xc48b, 0x88de, 0x993a, 0x1, 0x0);
        gbc.writeMem(0x7a18, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x3e41);
        EXPECT(gbc.pc(), 0x7a19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 01E8
        gbc.setState(0xa0d, 0x2da0, 0x5370, 0x601b, 0xd03, 0x8844, 0x1, 0x1);
        gbc.writeMem(0xa0d, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x2da0);
        EXPECT(gbc.pc(), 0xa0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 01E9
        gbc.setState(0x7505, 0xdb0e, 0xcb00, 0x17f9, 0x82e4, 0xa68a, 0x1, 0x1);
        gbc.writeMem(0x7505, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xdb0e);
        EXPECT(gbc.pc(), 0x7506);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 01EA
        gbc.setState(0xa99e, 0x6ad5, 0x1e70, 0xe861, 0xf82c, 0x312e, 0x0, 0x0);
        gbc.writeMem(0xa99e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x6ad5);
        EXPECT(gbc.pc(), 0xa99f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa99e), 0x9f);
        // 9F 01EB
        gbc.setState(0x35b6, 0x783d, 0x4690, 0x6884, 0x3019, 0xe1da, 0x0, 0x1);
        gbc.writeMem(0x35b6, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x783d);
        EXPECT(gbc.pc(), 0x35b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 01EC
        gbc.setState(0x20f8, 0xfc43, 0x8d50, 0x1d08, 0x9521, 0x2e96, 0x1, 0x0);
        gbc.writeMem(0x20f8, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xfc43);
        EXPECT(gbc.pc(), 0x20f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 01ED
        gbc.setState(0x9964, 0x4075, 0xff0, 0xe968, 0x39a8, 0x8995, 0x1, 0x1);
        gbc.writeMem(0x9964, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x4075);
        EXPECT(gbc.pc(), 0x9965);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9964), 0x9f);
        // 9F 01EF
        gbc.setState(0xa8a5, 0x1014, 0xfe50, 0x9ded, 0x93f0, 0xf49, 0x1, 0x1);
        gbc.writeMem(0xa8a5, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x1014);
        EXPECT(gbc.pc(), 0xa8a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8a5), 0x9f);
        // 9F 01F0
        gbc.setState(0x3a51, 0x8fec, 0x8f90, 0xb4e7, 0x4dde, 0x3c76, 0x1, 0x1);
        gbc.writeMem(0x3a51, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x8fec);
        EXPECT(gbc.pc(), 0x3a52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 01F1
        gbc.setState(0x8218, 0xbdb5, 0xa40, 0xee20, 0xb9e9, 0x8d3, 0x0, 0x0);
        gbc.writeMem(0x8218, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xbdb5);
        EXPECT(gbc.pc(), 0x8219);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8218), 0x9f);
        // 9F 01F2
        gbc.setState(0x7d14, 0x49a5, 0x9860, 0x9166, 0xc6f0, 0x15b7, 0x0, 0x1);
        gbc.writeMem(0x7d14, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x49a5);
        EXPECT(gbc.pc(), 0x7d15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 01F3
        gbc.setState(0x3965, 0xc7e7, 0x58c0, 0x4c8, 0x9d4, 0x617, 0x1, 0x1);
        gbc.writeMem(0x3965, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xc7e7);
        EXPECT(gbc.pc(), 0x3966);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 01F4
        gbc.setState(0xc11a, 0x6f2c, 0xe70, 0x9783, 0xf93, 0x8ba8, 0x1, 0x1);
        gbc.writeMem(0xc11a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x6f2c);
        EXPECT(gbc.pc(), 0xc11b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc11a), 0x9f);
        // 9F 01F5
        gbc.setState(0x488f, 0x29f2, 0x3620, 0x3607, 0x25ec, 0x30ca, 0x0, 0x0);
        gbc.writeMem(0x488f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x29f2);
        EXPECT(gbc.pc(), 0x4890);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 01F6
        gbc.setState(0x7285, 0x243d, 0x6b70, 0x3d2f, 0xe5c7, 0xd503, 0x0, 0x0);
        gbc.writeMem(0x7285, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x243d);
        EXPECT(gbc.pc(), 0x7286);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 01F8
        gbc.setState(0x338c, 0x8217, 0xce70, 0x2b7, 0x805, 0xc299, 0x1, 0x0);
        gbc.writeMem(0x338c, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x8217);
        EXPECT(gbc.pc(), 0x338d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 01F9
        gbc.setState(0x25cc, 0x965a, 0x8980, 0xe1f, 0x932b, 0x1529, 0x0, 0x1);
        gbc.writeMem(0x25cc, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x965a);
        EXPECT(gbc.pc(), 0x25cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 01FA
        gbc.setState(0x3a72, 0xee2b, 0x22e0, 0xa4a, 0x3497, 0x371, 0x0, 0x1);
        gbc.writeMem(0x3a72, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xee2b);
        EXPECT(gbc.pc(), 0x3a73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 01FB
        gbc.setState(0xf17, 0xbd2b, 0x47b0, 0xbcd4, 0xab8d, 0xd4a3, 0x1, 0x1);
        gbc.writeMem(0xf17, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xbd2b);
        EXPECT(gbc.pc(), 0xf18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 01FD
        gbc.setState(0xdd84, 0x8b12, 0x39a0, 0xec73, 0x1310, 0x39b0, 0x0, 0x1);
        gbc.writeMem(0xdd84, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x8b12);
        EXPECT(gbc.pc(), 0xdd85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd84), 0x9f);
        // 9F 01FE
        gbc.setState(0x355, 0x8f8b, 0xe720, 0x84c4, 0x6a32, 0x4aad, 0x0, 0x1);
        gbc.writeMem(0x355, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x8f8b);
        EXPECT(gbc.pc(), 0x356);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 01FF
        gbc.setState(0x1ec7, 0x30bf, 0x9220, 0xf3f3, 0xb292, 0xacb9, 0x1, 0x1);
        gbc.writeMem(0x1ec7, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x30bf);
        EXPECT(gbc.pc(), 0x1ec8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0200
        gbc.setState(0x2c08, 0xe589, 0xa330, 0x6cf2, 0xd7b3, 0x3670, 0x1, 0x0);
        gbc.writeMem(0x2c08, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xe589);
        EXPECT(gbc.pc(), 0x2c09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0201
        gbc.setState(0x9926, 0xd9b4, 0x23d0, 0x84de, 0xcfab, 0xf20b, 0x0, 0x1);
        gbc.writeMem(0x9926, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xd9b4);
        EXPECT(gbc.pc(), 0x9927);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9926), 0x9f);
        // 9F 0202
        gbc.setState(0xdbf, 0x1da6, 0x9be0, 0x921c, 0xe152, 0xa92c, 0x1, 0x0);
        gbc.writeMem(0xdbf, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x1da6);
        EXPECT(gbc.pc(), 0xdc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0204
        gbc.setState(0xd1f6, 0x87dd, 0x6ec0, 0x582d, 0xa482, 0xf560, 0x0, 0x0);
        gbc.writeMem(0xd1f6, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x87dd);
        EXPECT(gbc.pc(), 0xd1f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1f6), 0x9f);
        // 9F 0205
        gbc.setState(0x2f0c, 0x8963, 0x2280, 0xfc8a, 0xa73d, 0xe1b5, 0x0, 0x1);
        gbc.writeMem(0x2f0c, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x8963);
        EXPECT(gbc.pc(), 0x2f0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0206
        gbc.setState(0x7425, 0x3273, 0x1910, 0xc5ba, 0x4369, 0xab78, 0x0, 0x1);
        gbc.writeMem(0x7425, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x3273);
        EXPECT(gbc.pc(), 0x7426);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0207
        gbc.setState(0xd57c, 0xc04e, 0xed40, 0x9a18, 0x686a, 0x3d6a, 0x0, 0x1);
        gbc.writeMem(0xd57c, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xc04e);
        EXPECT(gbc.pc(), 0xd57d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd57c), 0x9f);
        // 9F 0208
        gbc.setState(0x51a9, 0xef2f, 0xb1f0, 0x8ba0, 0x325d, 0xcd4b, 0x1, 0x0);
        gbc.writeMem(0x51a9, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xef2f);
        EXPECT(gbc.pc(), 0x51aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0209
        gbc.setState(0x8ea1, 0x67a3, 0x510, 0x547d, 0xfc05, 0x8ff, 0x1, 0x0);
        gbc.writeMem(0x8ea1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x67a3);
        EXPECT(gbc.pc(), 0x8ea2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ea1), 0x9f);
        // 9F 020B
        gbc.setState(0x671a, 0xc263, 0x2200, 0xd1a3, 0xef02, 0xeb83, 0x0, 0x0);
        gbc.writeMem(0x671a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xc263);
        EXPECT(gbc.pc(), 0x671b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 020C
        gbc.setState(0xc03d, 0x1eb8, 0x79c0, 0xad5a, 0xc4c2, 0xc281, 0x1, 0x0);
        gbc.writeMem(0xc03d, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x1eb8);
        EXPECT(gbc.pc(), 0xc03e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc03d), 0x9f);
        // 9F 020D
        gbc.setState(0x2497, 0x20c9, 0xc10, 0x97a5, 0xccf, 0x6f02, 0x1, 0x1);
        gbc.writeMem(0x2497, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x20c9);
        EXPECT(gbc.pc(), 0x2498);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 020E
        gbc.setState(0x26a7, 0xe788, 0xcdc0, 0xa1e6, 0x2333, 0x5f86, 0x1, 0x1);
        gbc.writeMem(0x26a7, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xe788);
        EXPECT(gbc.pc(), 0x26a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0210
        gbc.setState(0x527e, 0xaae7, 0x4700, 0x5d13, 0xb273, 0x9a12, 0x1, 0x0);
        gbc.writeMem(0x527e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xaae7);
        EXPECT(gbc.pc(), 0x527f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0212
        gbc.setState(0x24f6, 0x8324, 0xb100, 0xa949, 0xbba2, 0x3bbe, 0x0, 0x1);
        gbc.writeMem(0x24f6, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x8324);
        EXPECT(gbc.pc(), 0x24f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0213
        gbc.setState(0x9d3e, 0x602e, 0x5c50, 0x94d, 0xdf0b, 0x5d96, 0x1, 0x0);
        gbc.writeMem(0x9d3e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x602e);
        EXPECT(gbc.pc(), 0x9d3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d3e), 0x9f);
        // 9F 0214
        gbc.setState(0x6d45, 0x119b, 0x11f0, 0xf2e4, 0xba21, 0x31e, 0x1, 0x0);
        gbc.writeMem(0x6d45, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x119b);
        EXPECT(gbc.pc(), 0x6d46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0215
        gbc.setState(0x2b3b, 0x60bd, 0x7ed0, 0xf085, 0xb1d2, 0x46da, 0x1, 0x0);
        gbc.writeMem(0x2b3b, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x60bd);
        EXPECT(gbc.pc(), 0x2b3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0216
        gbc.setState(0x55d2, 0x7c86, 0x52c0, 0xdae6, 0x8773, 0x8f12, 0x0, 0x1);
        gbc.writeMem(0x55d2, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x7c86);
        EXPECT(gbc.pc(), 0x55d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0217
        gbc.setState(0x7618, 0xd895, 0x48c0, 0xf116, 0x9a34, 0x34ad, 0x1, 0x0);
        gbc.writeMem(0x7618, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xd895);
        EXPECT(gbc.pc(), 0x7619);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0219
        gbc.setState(0xe982, 0x2ec9, 0x15d0, 0x1f1a, 0xe606, 0x6ec, 0x0, 0x1);
        gbc.writeMem(0xe982, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x2ec9);
        EXPECT(gbc.pc(), 0xe983);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe982), 0x9f);
        // 9F 021A
        gbc.setState(0x4cee, 0x4441, 0xb050, 0xd42d, 0xa6f, 0x125b, 0x0, 0x1);
        gbc.writeMem(0x4cee, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x4441);
        EXPECT(gbc.pc(), 0x4cef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 021B
        gbc.setState(0xadf2, 0xcde2, 0x9fd0, 0x3a59, 0x9396, 0x5c99, 0x0, 0x0);
        gbc.writeMem(0xadf2, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xcde2);
        EXPECT(gbc.pc(), 0xadf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadf2), 0x9f);
        // 9F 021C
        gbc.setState(0x989d, 0xe718, 0x7340, 0x3748, 0x489c, 0x1f47, 0x1, 0x1);
        gbc.writeMem(0x989d, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xe718);
        EXPECT(gbc.pc(), 0x989e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x989d), 0x9f);
        // 9F 021D
        gbc.setState(0x2f74, 0x83d3, 0x43a0, 0x347c, 0x880b, 0xcdbb, 0x1, 0x1);
        gbc.writeMem(0x2f74, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x83d3);
        EXPECT(gbc.pc(), 0x2f75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 021E
        gbc.setState(0x392e, 0x24ea, 0x8cf0, 0xb8a, 0x4448, 0x2a11, 0x0, 0x1);
        gbc.writeMem(0x392e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x24ea);
        EXPECT(gbc.pc(), 0x392f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 021F
        gbc.setState(0x8346, 0xd905, 0x1480, 0xa5de, 0x3487, 0x802d, 0x0, 0x0);
        gbc.writeMem(0x8346, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xd905);
        EXPECT(gbc.pc(), 0x8347);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8346), 0x9f);
        // 9F 0220
        gbc.setState(0xae9c, 0xc6d6, 0x13f0, 0xd4f2, 0x1707, 0xe393, 0x1, 0x1);
        gbc.writeMem(0xae9c, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xc6d6);
        EXPECT(gbc.pc(), 0xae9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae9c), 0x9f);
        // 9F 0221
        gbc.setState(0xb227, 0xdf84, 0x76d0, 0x42a6, 0x6844, 0xae6d, 0x1, 0x0);
        gbc.writeMem(0xb227, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xdf84);
        EXPECT(gbc.pc(), 0xb228);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb227), 0x9f);
        // 9F 0222
        gbc.setState(0xdafe, 0x1e76, 0x81c0, 0x4118, 0x498a, 0x501, 0x1, 0x1);
        gbc.writeMem(0xdafe, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x1e76);
        EXPECT(gbc.pc(), 0xdaff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdafe), 0x9f);
        // 9F 0223
        gbc.setState(0x626f, 0xdd47, 0xc7d0, 0x2c5f, 0xb904, 0xc45f, 0x1, 0x1);
        gbc.writeMem(0x626f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xdd47);
        EXPECT(gbc.pc(), 0x6270);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0224
        gbc.setState(0x2f26, 0x158e, 0xd200, 0xb949, 0xd6, 0xe89b, 0x0, 0x1);
        gbc.writeMem(0x2f26, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x158e);
        EXPECT(gbc.pc(), 0x2f27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0225
        gbc.setState(0xc135, 0x9230, 0x5050, 0x94a7, 0x3a32, 0xb850, 0x0, 0x0);
        gbc.writeMem(0xc135, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x9230);
        EXPECT(gbc.pc(), 0xc136);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc135), 0x9f);
        // 9F 0226
        gbc.setState(0x63c2, 0xd70f, 0x5c60, 0x9795, 0x86ad, 0x8fba, 0x1, 0x0);
        gbc.writeMem(0x63c2, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xd70f);
        EXPECT(gbc.pc(), 0x63c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0227
        gbc.setState(0x8ec1, 0x1951, 0xbc60, 0x7507, 0x448c, 0xe825, 0x1, 0x0);
        gbc.writeMem(0x8ec1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x1951);
        EXPECT(gbc.pc(), 0x8ec2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ec1), 0x9f);
        // 9F 0229
        gbc.setState(0x28f, 0xb168, 0xe370, 0x825, 0xee69, 0x2625, 0x1, 0x0);
        gbc.writeMem(0x28f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xb168);
        EXPECT(gbc.pc(), 0x290);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 022A
        gbc.setState(0x1238, 0x704e, 0x5bd0, 0x37b8, 0x8cd9, 0xa443, 0x1, 0x1);
        gbc.writeMem(0x1238, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x704e);
        EXPECT(gbc.pc(), 0x1239);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 022B
        gbc.setState(0x5d45, 0xdb3a, 0xfd0, 0x6a1f, 0xd693, 0x47c9, 0x0, 0x1);
        gbc.writeMem(0x5d45, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xdb3a);
        EXPECT(gbc.pc(), 0x5d46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 022C
        gbc.setState(0x3772, 0xbcb5, 0x72e0, 0xae9a, 0x2f43, 0x8fc8, 0x1, 0x1);
        gbc.writeMem(0x3772, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xbcb5);
        EXPECT(gbc.pc(), 0x3773);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 022D
        gbc.setState(0xe59f, 0x8936, 0xae50, 0x592f, 0x3584, 0xd8db, 0x1, 0x0);
        gbc.writeMem(0xe59f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x8936);
        EXPECT(gbc.pc(), 0xe5a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe59f), 0x9f);
        // 9F 022E
        gbc.setState(0x8a6f, 0xc5d4, 0x8d70, 0x194c, 0xbb0c, 0xa300, 0x0, 0x1);
        gbc.writeMem(0x8a6f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xc5d4);
        EXPECT(gbc.pc(), 0x8a70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a6f), 0x9f);
        // 9F 022F
        gbc.setState(0xeff0, 0xf8c3, 0x8e0, 0xf1fd, 0x951f, 0x96a6, 0x0, 0x0);
        gbc.writeMem(0xeff0, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xf8c3);
        EXPECT(gbc.pc(), 0xeff1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeff0), 0x9f);
        // 9F 0230
        gbc.setState(0x313e, 0x9622, 0x7770, 0x2778, 0x7f3f, 0x2eb6, 0x0, 0x1);
        gbc.writeMem(0x313e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x9622);
        EXPECT(gbc.pc(), 0x313f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0231
        gbc.setState(0x883, 0xff78, 0x8e60, 0xf032, 0x6fa0, 0x2519, 0x0, 0x0);
        gbc.writeMem(0x883, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xff78);
        EXPECT(gbc.pc(), 0x884);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0232
        gbc.setState(0x3aa4, 0xed78, 0x6850, 0x15f6, 0x15e2, 0xfe26, 0x0, 0x0);
        gbc.writeMem(0x3aa4, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xed78);
        EXPECT(gbc.pc(), 0x3aa5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0233
        gbc.setState(0x51aa, 0xfc0c, 0xd970, 0x7353, 0x73f7, 0xf9fe, 0x0, 0x1);
        gbc.writeMem(0x51aa, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xfc0c);
        EXPECT(gbc.pc(), 0x51ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0234
        gbc.setState(0xace0, 0x6a8a, 0x41e0, 0x8e0, 0x6f1e, 0xbe1c, 0x1, 0x0);
        gbc.writeMem(0xace0, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x6a8a);
        EXPECT(gbc.pc(), 0xace1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xace0), 0x9f);
        // 9F 0235
        gbc.setState(0x3c53, 0x28b2, 0x2b30, 0x8317, 0x5c44, 0x178, 0x0, 0x1);
        gbc.writeMem(0x3c53, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x28b2);
        EXPECT(gbc.pc(), 0x3c54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0236
        gbc.setState(0x13a9, 0xc688, 0x3760, 0x985f, 0x2b24, 0xc7f3, 0x0, 0x0);
        gbc.writeMem(0x13a9, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xc688);
        EXPECT(gbc.pc(), 0x13aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0237
        gbc.setState(0xab15, 0x3a3b, 0xe0d0, 0x1194, 0x9b2, 0x9289, 0x0, 0x0);
        gbc.writeMem(0xab15, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x3a3b);
        EXPECT(gbc.pc(), 0xab16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab15), 0x9f);
        // 9F 0238
        gbc.setState(0xcba1, 0x85d1, 0x4cd0, 0x7074, 0x7cf6, 0x94d, 0x0, 0x1);
        gbc.writeMem(0xcba1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x85d1);
        EXPECT(gbc.pc(), 0xcba2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcba1), 0x9f);
        // 9F 0239
        gbc.setState(0xcc51, 0x4f90, 0x89f0, 0xf400, 0xabee, 0xde0d, 0x0, 0x1);
        gbc.writeMem(0xcc51, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x4f90);
        EXPECT(gbc.pc(), 0xcc52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc51), 0x9f);
        // 9F 023A
        gbc.setState(0xc7e0, 0xa43a, 0x55e0, 0x2d49, 0x9c16, 0xfe10, 0x0, 0x0);
        gbc.writeMem(0xc7e0, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xa43a);
        EXPECT(gbc.pc(), 0xc7e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7e0), 0x9f);
        // 9F 023B
        gbc.setState(0x31a, 0xc63c, 0x4f30, 0x3de0, 0x694c, 0x4e09, 0x0, 0x0);
        gbc.writeMem(0x31a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xc63c);
        EXPECT(gbc.pc(), 0x31b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 023C
        gbc.setState(0x2673, 0x149b, 0x2060, 0xff4a, 0x571, 0x6ea8, 0x0, 0x0);
        gbc.writeMem(0x2673, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x149b);
        EXPECT(gbc.pc(), 0x2674);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 023D
        gbc.setState(0x5139, 0xf82, 0xc060, 0x77af, 0x136b, 0xe229, 0x1, 0x0);
        gbc.writeMem(0x5139, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xf82);
        EXPECT(gbc.pc(), 0x513a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 023E
        gbc.setState(0x5fd1, 0xd0d9, 0xd620, 0x7ccb, 0x5612, 0x50b6, 0x1, 0x0);
        gbc.writeMem(0x5fd1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xd0d9);
        EXPECT(gbc.pc(), 0x5fd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 023F
        gbc.setState(0xa3fa, 0x87b6, 0x5b10, 0x2cc3, 0x7c11, 0xcb01, 0x1, 0x1);
        gbc.writeMem(0xa3fa, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x87b6);
        EXPECT(gbc.pc(), 0xa3fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3fa), 0x9f);
        // 9F 0240
        gbc.setState(0x296e, 0xbf32, 0xc160, 0x1487, 0x9ab4, 0x7183, 0x0, 0x0);
        gbc.writeMem(0x296e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xbf32);
        EXPECT(gbc.pc(), 0x296f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0241
        gbc.setState(0xb33b, 0x485d, 0xfdc0, 0x9e2d, 0x6ffb, 0x17b, 0x0, 0x1);
        gbc.writeMem(0xb33b, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x485d);
        EXPECT(gbc.pc(), 0xb33c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb33b), 0x9f);
        // 9F 0242
        gbc.setState(0xc45f, 0x1395, 0x4ea0, 0x3f03, 0x6b2b, 0x7e92, 0x1, 0x1);
        gbc.writeMem(0xc45f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x1395);
        EXPECT(gbc.pc(), 0xc460);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc45f), 0x9f);
        // 9F 0243
        gbc.setState(0x2e52, 0xa9cf, 0x57e0, 0xdecd, 0x5276, 0x1cd5, 0x0, 0x1);
        gbc.writeMem(0x2e52, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xa9cf);
        EXPECT(gbc.pc(), 0x2e53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0244
        gbc.setState(0x7fd6, 0xcd87, 0x75b0, 0x96c3, 0xd34a, 0x9a15, 0x0, 0x0);
        gbc.writeMem(0x7fd6, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xcd87);
        EXPECT(gbc.pc(), 0x7fd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0245
        gbc.setState(0x8e66, 0x478c, 0x4150, 0x1ed6, 0x3373, 0xe3d5, 0x0, 0x0);
        gbc.writeMem(0x8e66, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x478c);
        EXPECT(gbc.pc(), 0x8e67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e66), 0x9f);
        // 9F 0246
        gbc.setState(0xeb04, 0xd4c5, 0xa3d0, 0x3418, 0x7505, 0xb5e1, 0x1, 0x1);
        gbc.writeMem(0xeb04, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xd4c5);
        EXPECT(gbc.pc(), 0xeb05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb04), 0x9f);
        // 9F 0247
        gbc.setState(0x1b78, 0x59c6, 0x31f0, 0x74f3, 0xd655, 0x66c3, 0x0, 0x0);
        gbc.writeMem(0x1b78, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x59c6);
        EXPECT(gbc.pc(), 0x1b79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0248
        gbc.setState(0x436b, 0x49ff, 0x1330, 0xa2df, 0xd02, 0x6735, 0x0, 0x1);
        gbc.writeMem(0x436b, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x49ff);
        EXPECT(gbc.pc(), 0x436c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0249
        gbc.setState(0x449a, 0x4cb5, 0x72e0, 0x4205, 0xa62a, 0xb91a, 0x0, 0x1);
        gbc.writeMem(0x449a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x4cb5);
        EXPECT(gbc.pc(), 0x449b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 024A
        gbc.setState(0xe6c4, 0x1d9c, 0xa40, 0x60bd, 0xae49, 0xde58, 0x1, 0x1);
        gbc.writeMem(0xe6c4, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x1d9c);
        EXPECT(gbc.pc(), 0xe6c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6c4), 0x9f);
        // 9F 024B
        gbc.setState(0x72dd, 0x7478, 0x3ce0, 0xfa5c, 0x40a2, 0x4603, 0x1, 0x0);
        gbc.writeMem(0x72dd, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x7478);
        EXPECT(gbc.pc(), 0x72de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 024C
        gbc.setState(0xab60, 0xc40a, 0xaff0, 0x7353, 0xff70, 0x8cde, 0x0, 0x0);
        gbc.writeMem(0xab60, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xc40a);
        EXPECT(gbc.pc(), 0xab61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab60), 0x9f);
        // 9F 024D
        gbc.setState(0x8856, 0x20a0, 0x89f0, 0xd0d1, 0x26c8, 0x46cf, 0x0, 0x1);
        gbc.writeMem(0x8856, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x20a0);
        EXPECT(gbc.pc(), 0x8857);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8856), 0x9f);
        // 9F 024E
        gbc.setState(0x3609, 0x58d, 0x9130, 0x673d, 0xd22b, 0xdc73, 0x1, 0x0);
        gbc.writeMem(0x3609, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x58d);
        EXPECT(gbc.pc(), 0x360a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 024F
        gbc.setState(0xe86a, 0x2437, 0xe430, 0xac6b, 0x10cc, 0x5beb, 0x0, 0x1);
        gbc.writeMem(0xe86a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x2437);
        EXPECT(gbc.pc(), 0xe86b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe86a), 0x9f);
        // 9F 0250
        gbc.setState(0x1ed5, 0xc66f, 0xd4f0, 0x3107, 0xf774, 0x39c9, 0x0, 0x1);
        gbc.writeMem(0x1ed5, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xc66f);
        EXPECT(gbc.pc(), 0x1ed6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0251
        gbc.setState(0x4203, 0xa25, 0xd730, 0x2242, 0x6c8b, 0xdf4f, 0x1, 0x0);
        gbc.writeMem(0x4203, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xa25);
        EXPECT(gbc.pc(), 0x4204);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0253
        gbc.setState(0xa86a, 0x1e22, 0x14b0, 0x81e7, 0x1b18, 0x86bc, 0x0, 0x0);
        gbc.writeMem(0xa86a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x1e22);
        EXPECT(gbc.pc(), 0xa86b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa86a), 0x9f);
        // 9F 0254
        gbc.setState(0x2fc5, 0x1ab8, 0xcce0, 0xa0bb, 0xe294, 0x6d70, 0x1, 0x0);
        gbc.writeMem(0x2fc5, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x1ab8);
        EXPECT(gbc.pc(), 0x2fc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0255
        gbc.setState(0x7496, 0x70d0, 0x9410, 0x8c25, 0xda74, 0x83b1, 0x1, 0x0);
        gbc.writeMem(0x7496, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x70d0);
        EXPECT(gbc.pc(), 0x7497);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0256
        gbc.setState(0xbcec, 0xae0e, 0xecc0, 0xb6eb, 0xd617, 0xaa13, 0x0, 0x1);
        gbc.writeMem(0xbcec, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xae0e);
        EXPECT(gbc.pc(), 0xbced);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcec), 0x9f);
        // 9F 0257
        gbc.setState(0xb75e, 0x44ed, 0xae10, 0x7053, 0xb62c, 0xb197, 0x0, 0x0);
        gbc.writeMem(0xb75e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x44ed);
        EXPECT(gbc.pc(), 0xb75f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb75e), 0x9f);
        // 9F 0258
        gbc.setState(0x98e5, 0x77e2, 0x9620, 0xdc7, 0x7952, 0x7e74, 0x1, 0x1);
        gbc.writeMem(0x98e5, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x77e2);
        EXPECT(gbc.pc(), 0x98e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98e5), 0x9f);
        // 9F 0259
        gbc.setState(0xe49b, 0x1231, 0x24c0, 0xac61, 0xde8f, 0x5d23, 0x0, 0x0);
        gbc.writeMem(0xe49b, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x1231);
        EXPECT(gbc.pc(), 0xe49c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe49b), 0x9f);
        // 9F 025A
        gbc.setState(0xdf2, 0xcbc9, 0x8950, 0x28b9, 0x70b3, 0x3d6a, 0x1, 0x1);
        gbc.writeMem(0xdf2, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xcbc9);
        EXPECT(gbc.pc(), 0xdf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 025B
        gbc.setState(0x15b, 0xdaad, 0x800, 0xa7d, 0x37fa, 0x777b, 0x0, 0x1);
        gbc.writeMem(0x15b, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xdaad);
        EXPECT(gbc.pc(), 0x15c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 025C
        gbc.setState(0x2550, 0x210e, 0x77b0, 0x2c39, 0xebbd, 0xe635, 0x0, 0x1);
        gbc.writeMem(0x2550, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x210e);
        EXPECT(gbc.pc(), 0x2551);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 025D
        gbc.setState(0x8769, 0x25a0, 0x87f0, 0x5d5f, 0xcb9c, 0xd2f7, 0x1, 0x0);
        gbc.writeMem(0x8769, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x25a0);
        EXPECT(gbc.pc(), 0x876a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8769), 0x9f);
        // 9F 025E
        gbc.setState(0xedd8, 0x3fb, 0x2d0, 0xeb75, 0x6176, 0x3e74, 0x1, 0x1);
        gbc.writeMem(0xedd8, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x3fb);
        EXPECT(gbc.pc(), 0xedd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedd8), 0x9f);
        // 9F 025F
        gbc.setState(0xcb78, 0xa15a, 0x7f80, 0xea91, 0xc3fb, 0xa368, 0x0, 0x0);
        gbc.writeMem(0xcb78, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xa15a);
        EXPECT(gbc.pc(), 0xcb79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb78), 0x9f);
        // 9F 0260
        gbc.setState(0x99c, 0x9263, 0x6e60, 0x61a8, 0x3943, 0x1dd2, 0x0, 0x0);
        gbc.writeMem(0x99c, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x9263);
        EXPECT(gbc.pc(), 0x99d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0261
        gbc.setState(0x4ed2, 0x5c8c, 0x5d60, 0x930e, 0xaf32, 0x8afe, 0x0, 0x1);
        gbc.writeMem(0x4ed2, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x5c8c);
        EXPECT(gbc.pc(), 0x4ed3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0262
        gbc.setState(0x41e4, 0xa048, 0xded0, 0x38b0, 0xf30, 0x1dda, 0x1, 0x0);
        gbc.writeMem(0x41e4, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xa048);
        EXPECT(gbc.pc(), 0x41e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0263
        gbc.setState(0xea86, 0xffe4, 0xa8d0, 0xf05a, 0x5dbc, 0x3e07, 0x1, 0x1);
        gbc.writeMem(0xea86, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xffe4);
        EXPECT(gbc.pc(), 0xea87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea86), 0x9f);
        // 9F 0264
        gbc.setState(0xb0c1, 0xc4f8, 0xa000, 0xb908, 0x56e1, 0x131f, 0x1, 0x0);
        gbc.writeMem(0xb0c1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xc4f8);
        EXPECT(gbc.pc(), 0xb0c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0c1), 0x9f);
        // 9F 0265
        gbc.setState(0xd446, 0x52d1, 0xfdc0, 0xef35, 0x295b, 0xb88d, 0x0, 0x1);
        gbc.writeMem(0xd446, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x52d1);
        EXPECT(gbc.pc(), 0xd447);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd446), 0x9f);
        // 9F 0266
        gbc.setState(0x5f61, 0xfe12, 0xf4c0, 0xdd08, 0xed8a, 0x30c6, 0x1, 0x1);
        gbc.writeMem(0x5f61, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xfe12);
        EXPECT(gbc.pc(), 0x5f62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0267
        gbc.setState(0xe0f9, 0xe24f, 0x6190, 0x9d4c, 0x1b2a, 0xaef1, 0x0, 0x1);
        gbc.writeMem(0xe0f9, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xe24f);
        EXPECT(gbc.pc(), 0xe0fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0f9), 0x9f);
        // 9F 0268
        gbc.setState(0x9219, 0x829b, 0xbd20, 0x727d, 0x46c1, 0x5e92, 0x0, 0x1);
        gbc.writeMem(0x9219, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x829b);
        EXPECT(gbc.pc(), 0x921a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9219), 0x9f);
        // 9F 0269
        gbc.setState(0x5cb2, 0xd52e, 0x7830, 0xb20b, 0xdcb0, 0xf264, 0x1, 0x0);
        gbc.writeMem(0x5cb2, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xd52e);
        EXPECT(gbc.pc(), 0x5cb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 026A
        gbc.setState(0xbd73, 0x95c, 0x91a0, 0x53e8, 0x538b, 0xe9a6, 0x1, 0x1);
        gbc.writeMem(0xbd73, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x95c);
        EXPECT(gbc.pc(), 0xbd74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd73), 0x9f);
        // 9F 026B
        gbc.setState(0xc4d6, 0xc1fe, 0x4cd0, 0x88b0, 0x8ba0, 0x23c5, 0x1, 0x1);
        gbc.writeMem(0xc4d6, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xc1fe);
        EXPECT(gbc.pc(), 0xc4d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4d6), 0x9f);
        // 9F 026C
        gbc.setState(0x86b1, 0xb887, 0x6690, 0x655, 0xb305, 0x2fa, 0x0, 0x0);
        gbc.writeMem(0x86b1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xb887);
        EXPECT(gbc.pc(), 0x86b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86b1), 0x9f);
        // 9F 026D
        gbc.setState(0xd1e9, 0x1602, 0xa760, 0x3922, 0x946c, 0x5805, 0x0, 0x1);
        gbc.writeMem(0xd1e9, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x1602);
        EXPECT(gbc.pc(), 0xd1ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1e9), 0x9f);
        // 9F 026E
        gbc.setState(0x4fcc, 0xbb18, 0x6d20, 0x83da, 0x2eb2, 0xf71e, 0x1, 0x0);
        gbc.writeMem(0x4fcc, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xbb18);
        EXPECT(gbc.pc(), 0x4fcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 026F
        gbc.setState(0xc30a, 0xf65d, 0xf2f0, 0x79e5, 0xb545, 0x49c8, 0x1, 0x1);
        gbc.writeMem(0xc30a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xf65d);
        EXPECT(gbc.pc(), 0xc30b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc30a), 0x9f);
        // 9F 0270
        gbc.setState(0x757a, 0x6821, 0x6c90, 0x2aae, 0xd6d9, 0x1c7d, 0x0, 0x1);
        gbc.writeMem(0x757a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x6821);
        EXPECT(gbc.pc(), 0x757b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0271
        gbc.setState(0x407f, 0xdce7, 0xb4e0, 0x0, 0x88d3, 0xc6d5, 0x1, 0x0);
        gbc.writeMem(0x407f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xdce7);
        EXPECT(gbc.pc(), 0x4080);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0272
        gbc.setState(0x7784, 0x53ba, 0xe6e0, 0xec02, 0x9b35, 0x6f0f, 0x1, 0x1);
        gbc.writeMem(0x7784, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x53ba);
        EXPECT(gbc.pc(), 0x7785);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0273
        gbc.setState(0xe3ba, 0x328f, 0xb670, 0x3c16, 0x724d, 0x1e24, 0x0, 0x0);
        gbc.writeMem(0xe3ba, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x328f);
        EXPECT(gbc.pc(), 0xe3bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3ba), 0x9f);
        // 9F 0274
        gbc.setState(0x54dd, 0xfee1, 0x6fd0, 0x489b, 0x9bd7, 0x2d51, 0x1, 0x1);
        gbc.writeMem(0x54dd, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xfee1);
        EXPECT(gbc.pc(), 0x54de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0275
        gbc.setState(0x3266, 0x15f5, 0x8bb0, 0x7b45, 0x8eca, 0xf1f4, 0x0, 0x0);
        gbc.writeMem(0x3266, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x15f5);
        EXPECT(gbc.pc(), 0x3267);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0276
        gbc.setState(0x86b1, 0x1a39, 0x1830, 0x79f, 0xd5c0, 0x9ad7, 0x0, 0x1);
        gbc.writeMem(0x86b1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x1a39);
        EXPECT(gbc.pc(), 0x86b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86b1), 0x9f);
        // 9F 0277
        gbc.setState(0xb43a, 0x65e9, 0x8a70, 0x1ece, 0x9680, 0x1f42, 0x0, 0x0);
        gbc.writeMem(0xb43a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x65e9);
        EXPECT(gbc.pc(), 0xb43b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb43a), 0x9f);
        // 9F 0278
        gbc.setState(0xd5fb, 0x6a91, 0xd070, 0x136, 0xa8f0, 0x8a68, 0x1, 0x1);
        gbc.writeMem(0xd5fb, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x6a91);
        EXPECT(gbc.pc(), 0xd5fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5fb), 0x9f);
        // 9F 0279
        gbc.setState(0xc22e, 0x4c9b, 0xe7e0, 0x621f, 0xcf0f, 0xd945, 0x1, 0x0);
        gbc.writeMem(0xc22e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x4c9b);
        EXPECT(gbc.pc(), 0xc22f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc22e), 0x9f);
        // 9F 027A
        gbc.setState(0xcd72, 0x81a3, 0xdb00, 0xae15, 0xacef, 0x58d1, 0x0, 0x1);
        gbc.writeMem(0xcd72, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x81a3);
        EXPECT(gbc.pc(), 0xcd73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd72), 0x9f);
        // 9F 027B
        gbc.setState(0x6486, 0x8a8d, 0xa6f0, 0xaa13, 0x7c, 0x646d, 0x1, 0x1);
        gbc.writeMem(0x6486, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x8a8d);
        EXPECT(gbc.pc(), 0x6487);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 027C
        gbc.setState(0xc857, 0xde8c, 0x48a0, 0x1e5e, 0xee8d, 0xb485, 0x1, 0x0);
        gbc.writeMem(0xc857, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xde8c);
        EXPECT(gbc.pc(), 0xc858);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc857), 0x9f);
        // 9F 027D
        gbc.setState(0x9e14, 0x95ef, 0x250, 0xc411, 0x5c93, 0xcb9f, 0x0, 0x1);
        gbc.writeMem(0x9e14, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x95ef);
        EXPECT(gbc.pc(), 0x9e15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e14), 0x9f);
        // 9F 027E
        gbc.setState(0x3a32, 0x89d6, 0x8c80, 0x5b8e, 0x96dc, 0x78fe, 0x1, 0x0);
        gbc.writeMem(0x3a32, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x89d6);
        EXPECT(gbc.pc(), 0x3a33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 027F
        gbc.setState(0x8025, 0x6379, 0xdc30, 0x3b45, 0xe5d3, 0x20bc, 0x1, 0x1);
        gbc.writeMem(0x8025, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x6379);
        EXPECT(gbc.pc(), 0x8026);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8025), 0x9f);
        // 9F 0280
        gbc.setState(0x4a30, 0x4591, 0x1090, 0x6e5b, 0x66ef, 0x5f94, 0x0, 0x1);
        gbc.writeMem(0x4a30, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x4591);
        EXPECT(gbc.pc(), 0x4a31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0281
        gbc.setState(0xb61d, 0x9f7e, 0x6340, 0xe8dc, 0x9463, 0xd0c0, 0x0, 0x1);
        gbc.writeMem(0xb61d, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x9f7e);
        EXPECT(gbc.pc(), 0xb61e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb61d), 0x9f);
        // 9F 0282
        gbc.setState(0x13c2, 0x352b, 0xcb00, 0x5b13, 0x1d30, 0xdf39, 0x1, 0x1);
        gbc.writeMem(0x13c2, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x352b);
        EXPECT(gbc.pc(), 0x13c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0283
        gbc.setState(0x6c6b, 0x5d94, 0x7ee0, 0x161b, 0x6ef8, 0xd1c9, 0x0, 0x1);
        gbc.writeMem(0x6c6b, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x5d94);
        EXPECT(gbc.pc(), 0x6c6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0284
        gbc.setState(0x63f9, 0x528e, 0xf7f0, 0x9785, 0x2c41, 0x761c, 0x0, 0x1);
        gbc.writeMem(0x63f9, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x528e);
        EXPECT(gbc.pc(), 0x63fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0285
        gbc.setState(0x6fd5, 0xdf13, 0x4db0, 0xeb00, 0x959d, 0x595c, 0x1, 0x0);
        gbc.writeMem(0x6fd5, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xdf13);
        EXPECT(gbc.pc(), 0x6fd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0286
        gbc.setState(0x4be5, 0x949c, 0x6400, 0x60b1, 0xadf9, 0xfe20, 0x1, 0x0);
        gbc.writeMem(0x4be5, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x949c);
        EXPECT(gbc.pc(), 0x4be6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0287
        gbc.setState(0x416d, 0x145f, 0x7200, 0x7c9d, 0x13d0, 0x9251, 0x0, 0x0);
        gbc.writeMem(0x416d, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x145f);
        EXPECT(gbc.pc(), 0x416e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0288
        gbc.setState(0x4d32, 0xdd04, 0xe930, 0x2ebc, 0x851b, 0x2954, 0x1, 0x1);
        gbc.writeMem(0x4d32, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xdd04);
        EXPECT(gbc.pc(), 0x4d33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0289
        gbc.setState(0xd355, 0x2ae4, 0x6410, 0xa71, 0x6869, 0xf420, 0x1, 0x0);
        gbc.writeMem(0xd355, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x2ae4);
        EXPECT(gbc.pc(), 0xd356);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd355), 0x9f);
        // 9F 028A
        gbc.setState(0x6380, 0xdcd7, 0x9c30, 0x4dc9, 0x6566, 0xa87f, 0x1, 0x1);
        gbc.writeMem(0x6380, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xdcd7);
        EXPECT(gbc.pc(), 0x6381);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 028B
        gbc.setState(0xeae1, 0xa615, 0xf790, 0xd6bd, 0xc0d5, 0xb422, 0x0, 0x1);
        gbc.writeMem(0xeae1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xa615);
        EXPECT(gbc.pc(), 0xeae2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeae1), 0x9f);
        // 9F 028C
        gbc.setState(0xb489, 0x60f1, 0x5100, 0xb6f3, 0x84b1, 0x2f4f, 0x0, 0x1);
        gbc.writeMem(0xb489, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x60f1);
        EXPECT(gbc.pc(), 0xb48a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb489), 0x9f);
        // 9F 028D
        gbc.setState(0x91a2, 0x5650, 0xbc80, 0x35, 0xeda, 0x51f2, 0x1, 0x0);
        gbc.writeMem(0x91a2, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x5650);
        EXPECT(gbc.pc(), 0x91a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91a2), 0x9f);
        // 9F 028E
        gbc.setState(0xbe31, 0x3c51, 0xb7a0, 0x57ff, 0x3b2c, 0x77d3, 0x1, 0x0);
        gbc.writeMem(0xbe31, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x3c51);
        EXPECT(gbc.pc(), 0xbe32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe31), 0x9f);
        // 9F 028F
        gbc.setState(0x13f4, 0xd3ba, 0x9f00, 0x3cc1, 0x8859, 0x7382, 0x0, 0x0);
        gbc.writeMem(0x13f4, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xd3ba);
        EXPECT(gbc.pc(), 0x13f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0290
        gbc.setState(0xe461, 0xa81f, 0x7a10, 0x3951, 0x5a8f, 0xd26c, 0x0, 0x1);
        gbc.writeMem(0xe461, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xa81f);
        EXPECT(gbc.pc(), 0xe462);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe461), 0x9f);
        // 9F 0291
        gbc.setState(0x2587, 0x1004, 0x3ce0, 0xb0df, 0xbf0c, 0x5bd5, 0x1, 0x0);
        gbc.writeMem(0x2587, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x1004);
        EXPECT(gbc.pc(), 0x2588);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0292
        gbc.setState(0xbe13, 0x84, 0x9f50, 0x7a36, 0x95e, 0x4ea9, 0x1, 0x0);
        gbc.writeMem(0xbe13, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x84);
        EXPECT(gbc.pc(), 0xbe14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe13), 0x9f);
        // 9F 0293
        gbc.setState(0x8473, 0xf251, 0xddc0, 0xa316, 0xdb59, 0x3cc6, 0x1, 0x1);
        gbc.writeMem(0x8473, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xf251);
        EXPECT(gbc.pc(), 0x8474);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8473), 0x9f);
        // 9F 0294
        gbc.setState(0x9c7e, 0xe5a6, 0xc3a0, 0xdb61, 0x5f30, 0xdcbb, 0x0, 0x0);
        gbc.writeMem(0x9c7e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xe5a6);
        EXPECT(gbc.pc(), 0x9c7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c7e), 0x9f);
        // 9F 0295
        gbc.setState(0x201a, 0xc40c, 0xac40, 0x1349, 0x825e, 0x107d, 0x0, 0x0);
        gbc.writeMem(0x201a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xc40c);
        EXPECT(gbc.pc(), 0x201b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0296
        gbc.setState(0x55b7, 0x8860, 0xf6d0, 0x254c, 0x5c91, 0x361d, 0x0, 0x1);
        gbc.writeMem(0x55b7, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x8860);
        EXPECT(gbc.pc(), 0x55b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0297
        gbc.setState(0xec3b, 0xacc0, 0x1ac0, 0xde3c, 0xdf64, 0x8f4e, 0x1, 0x1);
        gbc.writeMem(0xec3b, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xacc0);
        EXPECT(gbc.pc(), 0xec3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec3b), 0x9f);
        // 9F 0298
        gbc.setState(0x94a4, 0x4d24, 0xa6a0, 0xa040, 0x2f5c, 0xa4e8, 0x0, 0x1);
        gbc.writeMem(0x94a4, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x4d24);
        EXPECT(gbc.pc(), 0x94a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94a4), 0x9f);
        // 9F 0299
        gbc.setState(0x8ab6, 0x445a, 0x9930, 0x75ae, 0xf4ff, 0x7142, 0x0, 0x0);
        gbc.writeMem(0x8ab6, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x445a);
        EXPECT(gbc.pc(), 0x8ab7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ab6), 0x9f);
        // 9F 029A
        gbc.setState(0x7a3a, 0x861b, 0x50e0, 0x5d17, 0xaad5, 0xb2ee, 0x0, 0x1);
        gbc.writeMem(0x7a3a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x861b);
        EXPECT(gbc.pc(), 0x7a3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 029B
        gbc.setState(0xfeb, 0x8337, 0xfa0, 0x6269, 0xcd79, 0x5d01, 0x0, 0x1);
        gbc.writeMem(0xfeb, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x8337);
        EXPECT(gbc.pc(), 0xfec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 029C
        gbc.setState(0xee1a, 0x4f28, 0x1cd0, 0x1941, 0xd3c2, 0xe0a3, 0x0, 0x0);
        gbc.writeMem(0xee1a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x4f28);
        EXPECT(gbc.pc(), 0xee1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee1a), 0x9f);
        // 9F 029D
        gbc.setState(0x239, 0xb351, 0xcbe0, 0x6bc9, 0x1ab4, 0xea7c, 0x0, 0x0);
        gbc.writeMem(0x239, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xb351);
        EXPECT(gbc.pc(), 0x23a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 029E
        gbc.setState(0x7b2f, 0x12a3, 0xa640, 0xa7f7, 0x8ef8, 0x90dd, 0x0, 0x0);
        gbc.writeMem(0x7b2f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x12a3);
        EXPECT(gbc.pc(), 0x7b30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 02A0
        gbc.setState(0xca8d, 0xb62e, 0x5940, 0x8248, 0x3506, 0xa487, 0x1, 0x1);
        gbc.writeMem(0xca8d, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xb62e);
        EXPECT(gbc.pc(), 0xca8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca8d), 0x9f);
        // 9F 02A1
        gbc.setState(0x6439, 0x8cea, 0x3ee0, 0x720b, 0xe5c8, 0x4010, 0x1, 0x0);
        gbc.writeMem(0x6439, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x8cea);
        EXPECT(gbc.pc(), 0x643a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 02A2
        gbc.setState(0xaf4, 0x5238, 0x27c0, 0xd49f, 0xb5d3, 0xdc30, 0x1, 0x0);
        gbc.writeMem(0xaf4, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x5238);
        EXPECT(gbc.pc(), 0xaf5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 02A3
        gbc.setState(0x13a1, 0x5ae2, 0xf980, 0x1571, 0xfc03, 0x963c, 0x1, 0x1);
        gbc.writeMem(0x13a1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x5ae2);
        EXPECT(gbc.pc(), 0x13a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 02A4
        gbc.setState(0xd6f5, 0x355d, 0xd370, 0x7e32, 0x1cf4, 0xa960, 0x0, 0x1);
        gbc.writeMem(0xd6f5, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x355d);
        EXPECT(gbc.pc(), 0xd6f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6f5), 0x9f);
        // 9F 02A5
        gbc.setState(0x6e71, 0xd9df, 0x1750, 0xa499, 0x57c7, 0xf2bf, 0x1, 0x1);
        gbc.writeMem(0x6e71, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xd9df);
        EXPECT(gbc.pc(), 0x6e72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 02A6
        gbc.setState(0x7949, 0x7bea, 0xafe0, 0xb0a5, 0xe9ee, 0xd061, 0x0, 0x0);
        gbc.writeMem(0x7949, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x7bea);
        EXPECT(gbc.pc(), 0x794a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 02A7
        gbc.setState(0xa152, 0xf22d, 0x350, 0x9f05, 0x97d7, 0x972f, 0x0, 0x1);
        gbc.writeMem(0xa152, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xf22d);
        EXPECT(gbc.pc(), 0xa153);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa152), 0x9f);
        // 9F 02A8
        gbc.setState(0x1258, 0xd2d0, 0xc7a0, 0xdb75, 0xb14e, 0x1940, 0x1, 0x0);
        gbc.writeMem(0x1258, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xd2d0);
        EXPECT(gbc.pc(), 0x1259);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 02AA
        gbc.setState(0x1b91, 0x66d9, 0x5dd0, 0xe567, 0x3dad, 0xe0a, 0x1, 0x1);
        gbc.writeMem(0x1b91, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x66d9);
        EXPECT(gbc.pc(), 0x1b92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 02AB
        gbc.setState(0x5f96, 0x409e, 0x76c0, 0x7579, 0xa108, 0x51bb, 0x0, 0x0);
        gbc.writeMem(0x5f96, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x409e);
        EXPECT(gbc.pc(), 0x5f97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 02AC
        gbc.setState(0x2197, 0xaa4f, 0xaad0, 0xebd1, 0x4f56, 0xf5c6, 0x1, 0x1);
        gbc.writeMem(0x2197, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xaa4f);
        EXPECT(gbc.pc(), 0x2198);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 02AD
        gbc.setState(0xc6f, 0x2a77, 0xd370, 0x695a, 0x2e42, 0x26bf, 0x0, 0x1);
        gbc.writeMem(0xc6f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x2a77);
        EXPECT(gbc.pc(), 0xc70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 02AF
        gbc.setState(0x64b1, 0xc8b3, 0x3250, 0x356c, 0xb4ec, 0x4432, 0x1, 0x0);
        gbc.writeMem(0x64b1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xc8b3);
        EXPECT(gbc.pc(), 0x64b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 02B0
        gbc.setState(0xb76e, 0x454e, 0x2050, 0xa13, 0x3dc9, 0x1795, 0x0, 0x1);
        gbc.writeMem(0xb76e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x454e);
        EXPECT(gbc.pc(), 0xb76f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb76e), 0x9f);
        // 9F 02B1
        gbc.setState(0x885b, 0x1ddf, 0x7f20, 0x2a3b, 0xd3bb, 0xa2be, 0x0, 0x1);
        gbc.writeMem(0x885b, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x1ddf);
        EXPECT(gbc.pc(), 0x885c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x885b), 0x9f);
        // 9F 02B2
        gbc.setState(0xd3f1, 0xdc5d, 0xf4e0, 0xe42b, 0x3aa0, 0x3fc6, 0x1, 0x1);
        gbc.writeMem(0xd3f1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xdc5d);
        EXPECT(gbc.pc(), 0xd3f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3f1), 0x9f);
        // 9F 02B4
        gbc.setState(0xdf96, 0xb559, 0xbf90, 0x473c, 0x536, 0x2a0f, 0x0, 0x1);
        gbc.writeMem(0xdf96, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xb559);
        EXPECT(gbc.pc(), 0xdf97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf96), 0x9f);
        // 9F 02B5
        gbc.setState(0x4fd2, 0x3aaa, 0xe900, 0xeba6, 0x6f4d, 0x376c, 0x0, 0x1);
        gbc.writeMem(0x4fd2, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x3aaa);
        EXPECT(gbc.pc(), 0x4fd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 02B6
        gbc.setState(0x470b, 0x1a0, 0x9ef0, 0x2426, 0x1f58, 0xc084, 0x1, 0x0);
        gbc.writeMem(0x470b, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x1a0);
        EXPECT(gbc.pc(), 0x470c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 02B7
        gbc.setState(0xc05, 0xe0fa, 0x5000, 0xa336, 0xf32b, 0xb699, 0x0, 0x0);
        gbc.writeMem(0xc05, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xe0fa);
        EXPECT(gbc.pc(), 0xc06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 02B8
        gbc.setState(0x5f2f, 0x7728, 0x7af0, 0xc6, 0xcc67, 0xc525, 0x1, 0x1);
        gbc.writeMem(0x5f2f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x7728);
        EXPECT(gbc.pc(), 0x5f30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 02B9
        gbc.setState(0x8518, 0x937d, 0x83c0, 0xacd3, 0xec4f, 0x3084, 0x0, 0x1);
        gbc.writeMem(0x8518, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x937d);
        EXPECT(gbc.pc(), 0x8519);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8518), 0x9f);
        // 9F 02BA
        gbc.setState(0xd9b1, 0xd753, 0x170, 0xf4c4, 0x8ecb, 0xa21e, 0x1, 0x0);
        gbc.writeMem(0xd9b1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xd753);
        EXPECT(gbc.pc(), 0xd9b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9b1), 0x9f);
        // 9F 02BB
        gbc.setState(0x6608, 0x18a2, 0x1270, 0xe1d, 0x6eca, 0x1320, 0x0, 0x1);
        gbc.writeMem(0x6608, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x18a2);
        EXPECT(gbc.pc(), 0x6609);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 02BC
        gbc.setState(0x6665, 0xb8e5, 0x9220, 0xc5c, 0xb2c2, 0x47b, 0x1, 0x1);
        gbc.writeMem(0x6665, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xb8e5);
        EXPECT(gbc.pc(), 0x6666);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 02BD
        gbc.setState(0xc843, 0xfc8, 0xab00, 0x5088, 0xcd13, 0x7d89, 0x1, 0x1);
        gbc.writeMem(0xc843, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xfc8);
        EXPECT(gbc.pc(), 0xc844);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc843), 0x9f);
        // 9F 02BE
        gbc.setState(0xd189, 0x974e, 0x9bd0, 0xe3fe, 0x5d92, 0x8af4, 0x1, 0x0);
        gbc.writeMem(0xd189, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x974e);
        EXPECT(gbc.pc(), 0xd18a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd189), 0x9f);
        // 9F 02BF
        gbc.setState(0x1048, 0x56d4, 0xc470, 0xde99, 0x86b8, 0x3480, 0x0, 0x1);
        gbc.writeMem(0x1048, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x56d4);
        EXPECT(gbc.pc(), 0x1049);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 02C0
        gbc.setState(0x6bbf, 0xd4b2, 0x7280, 0xa29a, 0xd4a2, 0xe6bf, 0x0, 0x0);
        gbc.writeMem(0x6bbf, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xd4b2);
        EXPECT(gbc.pc(), 0x6bc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 02C1
        gbc.setState(0xad5e, 0x188, 0xb5e0, 0x833e, 0x3c2e, 0x210b, 0x1, 0x0);
        gbc.writeMem(0xad5e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x188);
        EXPECT(gbc.pc(), 0xad5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad5e), 0x9f);
        // 9F 02C2
        gbc.setState(0x313b, 0x47d, 0x1240, 0xbe6d, 0x8618, 0x62cc, 0x0, 0x1);
        gbc.writeMem(0x313b, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x47d);
        EXPECT(gbc.pc(), 0x313c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 02C3
        gbc.setState(0xa5a0, 0xcea, 0xabf0, 0x2bd7, 0x11c5, 0x8303, 0x0, 0x1);
        gbc.writeMem(0xa5a0, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xcea);
        EXPECT(gbc.pc(), 0xa5a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5a0), 0x9f);
        // 9F 02C4
        gbc.setState(0xdc0, 0xafe5, 0x5e00, 0xbfef, 0xce0f, 0xf9c4, 0x1, 0x0);
        gbc.writeMem(0xdc0, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xafe5);
        EXPECT(gbc.pc(), 0xdc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 02C5
        gbc.setState(0x834c, 0x1917, 0x8750, 0xc593, 0x9a6d, 0x3dd8, 0x1, 0x1);
        gbc.writeMem(0x834c, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x1917);
        EXPECT(gbc.pc(), 0x834d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x834c), 0x9f);
        // 9F 02C6
        gbc.setState(0x1b3c, 0xb0f1, 0x780, 0x191, 0xc3ed, 0x7778, 0x1, 0x1);
        gbc.writeMem(0x1b3c, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xb0f1);
        EXPECT(gbc.pc(), 0x1b3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 02C7
        gbc.setState(0x22b9, 0x382, 0xab70, 0x325b, 0xd5cb, 0x8c69, 0x1, 0x0);
        gbc.writeMem(0x22b9, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x382);
        EXPECT(gbc.pc(), 0x22ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 02C8
        gbc.setState(0x4de, 0xbade, 0x3a0, 0x7ef5, 0x6c30, 0xe983, 0x1, 0x0);
        gbc.writeMem(0x4de, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xbade);
        EXPECT(gbc.pc(), 0x4df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 02C9
        gbc.setState(0xb49a, 0xd0fe, 0x2100, 0x91b, 0x72c6, 0x8248, 0x0, 0x0);
        gbc.writeMem(0xb49a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xd0fe);
        EXPECT(gbc.pc(), 0xb49b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb49a), 0x9f);
        // 9F 02CA
        gbc.setState(0x3909, 0xbda4, 0xfa30, 0xca7b, 0xa626, 0x7c34, 0x0, 0x1);
        gbc.writeMem(0x3909, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xbda4);
        EXPECT(gbc.pc(), 0x390a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 02CB
        gbc.setState(0x2e8d, 0x78b5, 0xcf00, 0x2759, 0x37a7, 0xab85, 0x1, 0x0);
        gbc.writeMem(0x2e8d, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x78b5);
        EXPECT(gbc.pc(), 0x2e8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 02CC
        gbc.setState(0x863f, 0x7c5, 0x4190, 0x3e1b, 0xae3, 0x4eae, 0x0, 0x0);
        gbc.writeMem(0x863f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x7c5);
        EXPECT(gbc.pc(), 0x8640);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x863f), 0x9f);
        // 9F 02CD
        gbc.setState(0x9e8c, 0x10ae, 0xeb20, 0xed2f, 0x6848, 0x5679, 0x0, 0x0);
        gbc.writeMem(0x9e8c, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x10ae);
        EXPECT(gbc.pc(), 0x9e8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e8c), 0x9f);
        // 9F 02CE
        gbc.setState(0xd7ad, 0x7140, 0x1700, 0x44e2, 0xca22, 0xd5b1, 0x0, 0x1);
        gbc.writeMem(0xd7ad, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x7140);
        EXPECT(gbc.pc(), 0xd7ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7ad), 0x9f);
        // 9F 02CF
        gbc.setState(0xd3ab, 0xf755, 0x2860, 0x5741, 0x7508, 0x8c36, 0x1, 0x1);
        gbc.writeMem(0xd3ab, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xf755);
        EXPECT(gbc.pc(), 0xd3ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3ab), 0x9f);
        // 9F 02D0
        gbc.setState(0xd6ae, 0x82ee, 0xf990, 0x2b2b, 0x4fff, 0xbb0, 0x0, 0x0);
        gbc.writeMem(0xd6ae, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x82ee);
        EXPECT(gbc.pc(), 0xd6af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6ae), 0x9f);
        // 9F 02D1
        gbc.setState(0x6b15, 0x7df3, 0x7240, 0x60cf, 0x9059, 0xc3b6, 0x1, 0x0);
        gbc.writeMem(0x6b15, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x7df3);
        EXPECT(gbc.pc(), 0x6b16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 02D2
        gbc.setState(0xbca4, 0xaded, 0x5ea0, 0xd2dd, 0x7cf8, 0x3f3e, 0x0, 0x1);
        gbc.writeMem(0xbca4, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xaded);
        EXPECT(gbc.pc(), 0xbca5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbca4), 0x9f);
        // 9F 02D3
        gbc.setState(0x88f1, 0x3207, 0x69c0, 0x4743, 0x693c, 0x63ea, 0x1, 0x1);
        gbc.writeMem(0x88f1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x3207);
        EXPECT(gbc.pc(), 0x88f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88f1), 0x9f);
        // 9F 02D4
        gbc.setState(0xc68a, 0x1e5d, 0x8320, 0x1b04, 0x1c3a, 0x4520, 0x0, 0x1);
        gbc.writeMem(0xc68a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x1e5d);
        EXPECT(gbc.pc(), 0xc68b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc68a), 0x9f);
        // 9F 02D5
        gbc.setState(0x78b3, 0x9e1e, 0xb2d0, 0x3493, 0x5360, 0xc52f, 0x0, 0x1);
        gbc.writeMem(0x78b3, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x9e1e);
        EXPECT(gbc.pc(), 0x78b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 02D6
        gbc.setState(0x70c6, 0x63e4, 0xf340, 0xa6f9, 0x1943, 0xd110, 0x1, 0x1);
        gbc.writeMem(0x70c6, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x63e4);
        EXPECT(gbc.pc(), 0x70c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 02D7
        gbc.setState(0x354a, 0x64f5, 0xfe90, 0xf2f8, 0xd5f3, 0xc0d6, 0x0, 0x0);
        gbc.writeMem(0x354a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x64f5);
        EXPECT(gbc.pc(), 0x354b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 02D8
        gbc.setState(0xbf0, 0x5e57, 0xe790, 0x25a9, 0x1fe8, 0x1d2c, 0x0, 0x0);
        gbc.writeMem(0xbf0, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x5e57);
        EXPECT(gbc.pc(), 0xbf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 02D9
        gbc.setState(0x8e0b, 0x461d, 0xe100, 0xb5d8, 0x1d04, 0xb96d, 0x0, 0x1);
        gbc.writeMem(0x8e0b, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x461d);
        EXPECT(gbc.pc(), 0x8e0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e0b), 0x9f);
        // 9F 02DA
        gbc.setState(0x67be, 0x5d08, 0x4960, 0xdf87, 0xb641, 0x1f5a, 0x1, 0x0);
        gbc.writeMem(0x67be, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x5d08);
        EXPECT(gbc.pc(), 0x67bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 02DB
        gbc.setState(0x9dbd, 0x4299, 0x9140, 0x6cca, 0xb762, 0x5c7c, 0x1, 0x1);
        gbc.writeMem(0x9dbd, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x4299);
        EXPECT(gbc.pc(), 0x9dbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dbd), 0x9f);
        // 9F 02DC
        gbc.setState(0x3988, 0x477f, 0x9950, 0x51a7, 0xa964, 0x871e, 0x0, 0x1);
        gbc.writeMem(0x3988, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x477f);
        EXPECT(gbc.pc(), 0x3989);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 02DD
        gbc.setState(0x7a5, 0xaef7, 0x6dc0, 0xf8e6, 0x8edc, 0x6e04, 0x0, 0x0);
        gbc.writeMem(0x7a5, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xaef7);
        EXPECT(gbc.pc(), 0x7a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 02DE
        gbc.setState(0x8de4, 0xee1e, 0x5cf0, 0x8363, 0xfc9b, 0xbe6d, 0x1, 0x1);
        gbc.writeMem(0x8de4, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xee1e);
        EXPECT(gbc.pc(), 0x8de5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8de4), 0x9f);
        // 9F 02DF
        gbc.setState(0x184e, 0xeb8f, 0x35d0, 0xe05c, 0x53b6, 0x4788, 0x1, 0x0);
        gbc.writeMem(0x184e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xeb8f);
        EXPECT(gbc.pc(), 0x184f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 02E0
        gbc.setState(0x4978, 0x3c2a, 0x4ae0, 0x95f9, 0xc0dc, 0xe11d, 0x0, 0x0);
        gbc.writeMem(0x4978, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x3c2a);
        EXPECT(gbc.pc(), 0x4979);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 02E1
        gbc.setState(0xeb66, 0xdbb4, 0x8740, 0xc643, 0x4491, 0xbd6c, 0x1, 0x0);
        gbc.writeMem(0xeb66, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xdbb4);
        EXPECT(gbc.pc(), 0xeb67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb66), 0x9f);
        // 9F 02E2
        gbc.setState(0x1363, 0x4a4, 0x77b0, 0xcbfe, 0xa167, 0xaa72, 0x0, 0x1);
        gbc.writeMem(0x1363, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x4a4);
        EXPECT(gbc.pc(), 0x1364);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 02E3
        gbc.setState(0x655f, 0x53f, 0x2260, 0xeee5, 0xf7ef, 0xd81c, 0x1, 0x0);
        gbc.writeMem(0x655f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x53f);
        EXPECT(gbc.pc(), 0x6560);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 02E4
        gbc.setState(0x3226, 0xb518, 0x3350, 0x5f08, 0x8675, 0x713b, 0x0, 0x1);
        gbc.writeMem(0x3226, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xb518);
        EXPECT(gbc.pc(), 0x3227);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 02E5
        gbc.setState(0x5491, 0x2562, 0x4680, 0xa629, 0x14f0, 0xa31b, 0x1, 0x1);
        gbc.writeMem(0x5491, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x2562);
        EXPECT(gbc.pc(), 0x5492);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 02E6
        gbc.setState(0x672e, 0x616a, 0x3e00, 0xd272, 0xf9fc, 0x626, 0x1, 0x1);
        gbc.writeMem(0x672e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x616a);
        EXPECT(gbc.pc(), 0x672f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 02E7
        gbc.setState(0xae63, 0xc63a, 0x3b20, 0x11ca, 0x2d8a, 0xca4, 0x1, 0x0);
        gbc.writeMem(0xae63, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xc63a);
        EXPECT(gbc.pc(), 0xae64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae63), 0x9f);
        // 9F 02E8
        gbc.setState(0x6082, 0xa395, 0xd690, 0x744, 0x4829, 0xfb06, 0x0, 0x0);
        gbc.writeMem(0x6082, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xa395);
        EXPECT(gbc.pc(), 0x6083);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 02EA
        gbc.setState(0x1054, 0x79ea, 0xc670, 0xfefa, 0x9f4a, 0x2893, 0x1, 0x1);
        gbc.writeMem(0x1054, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x79ea);
        EXPECT(gbc.pc(), 0x1055);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 02EB
        gbc.setState(0x88ae, 0x4ae8, 0xb320, 0xfc03, 0x9b5e, 0x29a2, 0x1, 0x1);
        gbc.writeMem(0x88ae, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x4ae8);
        EXPECT(gbc.pc(), 0x88af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88ae), 0x9f);
        // 9F 02EC
        gbc.setState(0x1be7, 0xf9ef, 0x5730, 0x9e1b, 0xa630, 0xbcd0, 0x0, 0x1);
        gbc.writeMem(0x1be7, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xf9ef);
        EXPECT(gbc.pc(), 0x1be8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 02ED
        gbc.setState(0x43af, 0x351, 0xf790, 0x7ee2, 0x3587, 0x3a3a, 0x1, 0x0);
        gbc.writeMem(0x43af, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x351);
        EXPECT(gbc.pc(), 0x43b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 02EE
        gbc.setState(0xb502, 0x5472, 0xb530, 0xc062, 0x96aa, 0x4dd2, 0x0, 0x0);
        gbc.writeMem(0xb502, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x5472);
        EXPECT(gbc.pc(), 0xb503);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb502), 0x9f);
        // 9F 02EF
        gbc.setState(0x793, 0x45e6, 0xd6c0, 0x3f66, 0xdac2, 0x14b1, 0x0, 0x0);
        gbc.writeMem(0x793, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x45e6);
        EXPECT(gbc.pc(), 0x794);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 02F0
        gbc.setState(0xb061, 0x9f3, 0x5370, 0x8409, 0xeade, 0x265e, 0x0, 0x1);
        gbc.writeMem(0xb061, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x9f3);
        EXPECT(gbc.pc(), 0xb062);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb061), 0x9f);
        // 9F 02F1
        gbc.setState(0x3b42, 0x387, 0x7310, 0x9829, 0x3101, 0xf5c8, 0x0, 0x1);
        gbc.writeMem(0x3b42, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x387);
        EXPECT(gbc.pc(), 0x3b43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 02F2
        gbc.setState(0x6dae, 0xa805, 0xdcc0, 0xd22e, 0xa617, 0x81ae, 0x1, 0x0);
        gbc.writeMem(0x6dae, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xa805);
        EXPECT(gbc.pc(), 0x6daf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 02F3
        gbc.setState(0x43d7, 0xd686, 0xd990, 0x286f, 0x3274, 0x8ac1, 0x1, 0x0);
        gbc.writeMem(0x43d7, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xd686);
        EXPECT(gbc.pc(), 0x43d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 02F4
        gbc.setState(0xcd3e, 0xf08d, 0x7960, 0x3dce, 0x7cd3, 0xa90b, 0x1, 0x1);
        gbc.writeMem(0xcd3e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xf08d);
        EXPECT(gbc.pc(), 0xcd3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd3e), 0x9f);
        // 9F 02F5
        gbc.setState(0x3a99, 0x11d6, 0xaca0, 0xcd74, 0x9171, 0xe3, 0x1, 0x0);
        gbc.writeMem(0x3a99, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x11d6);
        EXPECT(gbc.pc(), 0x3a9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 02F6
        gbc.setState(0xe5ea, 0xc6b6, 0x4690, 0x3658, 0xf9d5, 0x66af, 0x0, 0x0);
        gbc.writeMem(0xe5ea, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xc6b6);
        EXPECT(gbc.pc(), 0xe5eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5ea), 0x9f);
        // 9F 02F7
        gbc.setState(0xe969, 0x42b0, 0x2720, 0xa9cd, 0x2d2a, 0x4c44, 0x0, 0x1);
        gbc.writeMem(0xe969, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x42b0);
        EXPECT(gbc.pc(), 0xe96a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe969), 0x9f);
        // 9F 02F8
        gbc.setState(0xbf5e, 0xb840, 0xbc50, 0x61d2, 0x71f1, 0x5ca7, 0x1, 0x0);
        gbc.writeMem(0xbf5e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xb840);
        EXPECT(gbc.pc(), 0xbf5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf5e), 0x9f);
        // 9F 02F9
        gbc.setState(0xef69, 0x3d34, 0xeb0, 0xc78e, 0xb516, 0x905, 0x1, 0x1);
        gbc.writeMem(0xef69, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x3d34);
        EXPECT(gbc.pc(), 0xef6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef69), 0x9f);
        // 9F 02FA
        gbc.setState(0x2dae, 0xf279, 0x9cd0, 0x1c74, 0xa3d3, 0x6a41, 0x0, 0x0);
        gbc.writeMem(0x2dae, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xf279);
        EXPECT(gbc.pc(), 0x2daf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 02FB
        gbc.setState(0x5f85, 0xaa3b, 0x3d90, 0xb44b, 0x4e2, 0x3c65, 0x1, 0x1);
        gbc.writeMem(0x5f85, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xaa3b);
        EXPECT(gbc.pc(), 0x5f86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 02FC
        gbc.setState(0xde21, 0xe9d9, 0x18c0, 0x4bce, 0x8120, 0x3914, 0x1, 0x1);
        gbc.writeMem(0xde21, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xe9d9);
        EXPECT(gbc.pc(), 0xde22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde21), 0x9f);
        // 9F 02FD
        gbc.setState(0x3dae, 0x92f9, 0x6c0, 0x8253, 0x59ce, 0x77e7, 0x0, 0x0);
        gbc.writeMem(0x3dae, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x92f9);
        EXPECT(gbc.pc(), 0x3daf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 02FE
        gbc.setState(0xa4a4, 0x2e5b, 0x97b0, 0x68a, 0xbfb6, 0xf41, 0x1, 0x1);
        gbc.writeMem(0xa4a4, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x2e5b);
        EXPECT(gbc.pc(), 0xa4a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4a4), 0x9f);
        // 9F 02FF
        gbc.setState(0xa2b6, 0xa56b, 0x21d0, 0x77f3, 0x5454, 0xae11, 0x0, 0x0);
        gbc.writeMem(0xa2b6, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xa56b);
        EXPECT(gbc.pc(), 0xa2b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2b6), 0x9f);
        // 9F 0300
        gbc.setState(0xe63, 0x70b9, 0xf1d0, 0xc515, 0x8922, 0xbaf8, 0x1, 0x0);
        gbc.writeMem(0xe63, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x70b9);
        EXPECT(gbc.pc(), 0xe64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0301
        gbc.setState(0x20b, 0xd27b, 0x1350, 0x30c8, 0x7bc, 0x522d, 0x1, 0x1);
        gbc.writeMem(0x20b, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xd27b);
        EXPECT(gbc.pc(), 0x20c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0303
        gbc.setState(0x6e3c, 0x5504, 0x83d0, 0x3ec5, 0x2ac1, 0x8566, 0x0, 0x1);
        gbc.writeMem(0x6e3c, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x5504);
        EXPECT(gbc.pc(), 0x6e3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0304
        gbc.setState(0x11ee, 0x710, 0xb5f0, 0x6368, 0xe0f5, 0x3f28, 0x0, 0x1);
        gbc.writeMem(0x11ee, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x710);
        EXPECT(gbc.pc(), 0x11ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0305
        gbc.setState(0xc460, 0xf845, 0x1990, 0x1465, 0xf777, 0x40d, 0x0, 0x1);
        gbc.writeMem(0xc460, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xf845);
        EXPECT(gbc.pc(), 0xc461);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc460), 0x9f);
        // 9F 0306
        gbc.setState(0xe4c1, 0x8e6d, 0x6df0, 0x5535, 0xba4d, 0xcd2f, 0x0, 0x0);
        gbc.writeMem(0xe4c1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x8e6d);
        EXPECT(gbc.pc(), 0xe4c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4c1), 0x9f);
        // 9F 0307
        gbc.setState(0xed84, 0xeed8, 0xb6d0, 0xd81c, 0xdc0d, 0x74a, 0x1, 0x1);
        gbc.writeMem(0xed84, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xeed8);
        EXPECT(gbc.pc(), 0xed85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed84), 0x9f);
        // 9F 0308
        gbc.setState(0x3a62, 0xcf10, 0x60b0, 0x59ff, 0xe04a, 0xef1b, 0x1, 0x1);
        gbc.writeMem(0x3a62, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xcf10);
        EXPECT(gbc.pc(), 0x3a63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0309
        gbc.setState(0x452e, 0xc571, 0x8110, 0x56e5, 0x565a, 0x7e25, 0x1, 0x1);
        gbc.writeMem(0x452e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xc571);
        EXPECT(gbc.pc(), 0x452f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 030A
        gbc.setState(0xdc7, 0xe899, 0x6380, 0x83d2, 0x21c2, 0xdbcf, 0x1, 0x0);
        gbc.writeMem(0xdc7, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xe899);
        EXPECT(gbc.pc(), 0xdc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 030B
        gbc.setState(0x1be6, 0xfb5, 0xa230, 0x3707, 0xd18c, 0xe37f, 0x1, 0x1);
        gbc.writeMem(0x1be6, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xfb5);
        EXPECT(gbc.pc(), 0x1be7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 030C
        gbc.setState(0xe29a, 0x85c7, 0xb1c0, 0xf22c, 0xdc5, 0x18c8, 0x1, 0x0);
        gbc.writeMem(0xe29a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x85c7);
        EXPECT(gbc.pc(), 0xe29b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe29a), 0x9f);
        // 9F 030D
        gbc.setState(0x779d, 0x61fe, 0x7d0, 0xa6b7, 0xc87d, 0x56f9, 0x1, 0x0);
        gbc.writeMem(0x779d, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x61fe);
        EXPECT(gbc.pc(), 0x779e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 030E
        gbc.setState(0x2cc2, 0x7661, 0x5300, 0x8eff, 0xd1de, 0x9b6f, 0x1, 0x1);
        gbc.writeMem(0x2cc2, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x7661);
        EXPECT(gbc.pc(), 0x2cc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 030F
        gbc.setState(0x3c11, 0xbddb, 0xaa0, 0x9f83, 0x17a6, 0x8dc4, 0x0, 0x1);
        gbc.writeMem(0x3c11, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xbddb);
        EXPECT(gbc.pc(), 0x3c12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0310
        gbc.setState(0x853, 0x589f, 0x5a0, 0x45d0, 0x3c9e, 0xe63c, 0x0, 0x1);
        gbc.writeMem(0x853, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x589f);
        EXPECT(gbc.pc(), 0x854);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0311
        gbc.setState(0xc12a, 0x3610, 0xe6f0, 0x5ada, 0xc07, 0xfada, 0x1, 0x1);
        gbc.writeMem(0xc12a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x3610);
        EXPECT(gbc.pc(), 0xc12b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc12a), 0x9f);
        // 9F 0312
        gbc.setState(0x5681, 0x6a4e, 0xd0f0, 0xcdd8, 0x6041, 0xce81, 0x1, 0x0);
        gbc.writeMem(0x5681, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x6a4e);
        EXPECT(gbc.pc(), 0x5682);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0313
        gbc.setState(0xa42f, 0x280c, 0xd560, 0x546e, 0x997d, 0xfc7, 0x1, 0x0);
        gbc.writeMem(0xa42f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x280c);
        EXPECT(gbc.pc(), 0xa430);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa42f), 0x9f);
        // 9F 0314
        gbc.setState(0xebca, 0x91b2, 0xdfa0, 0x748, 0x8098, 0x6e36, 0x1, 0x1);
        gbc.writeMem(0xebca, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x91b2);
        EXPECT(gbc.pc(), 0xebcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebca), 0x9f);
        // 9F 0316
        gbc.setState(0xccbf, 0xd865, 0x4210, 0xcca0, 0x1cac, 0x8ea0, 0x0, 0x1);
        gbc.writeMem(0xccbf, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xd865);
        EXPECT(gbc.pc(), 0xccc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccbf), 0x9f);
        // 9F 0317
        gbc.setState(0xfc1, 0x8d3, 0x1c20, 0x17ad, 0x4140, 0x7a25, 0x0, 0x1);
        gbc.writeMem(0xfc1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x8d3);
        EXPECT(gbc.pc(), 0xfc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0318
        gbc.setState(0x9839, 0xc74d, 0x6d40, 0xde0b, 0x9124, 0x3b05, 0x0, 0x1);
        gbc.writeMem(0x9839, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xc74d);
        EXPECT(gbc.pc(), 0x983a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9839), 0x9f);
        // 9F 0319
        gbc.setState(0x3560, 0xca8c, 0x2a30, 0xc51, 0x9f56, 0x6f9d, 0x1, 0x1);
        gbc.writeMem(0x3560, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xca8c);
        EXPECT(gbc.pc(), 0x3561);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 031A
        gbc.setState(0xcddd, 0x4b45, 0x94b0, 0x1107, 0x4998, 0x6de2, 0x1, 0x1);
        gbc.writeMem(0xcddd, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x4b45);
        EXPECT(gbc.pc(), 0xcdde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcddd), 0x9f);
        // 9F 031B
        gbc.setState(0xcf98, 0xc116, 0x1430, 0x3bfa, 0xb44d, 0xc402, 0x1, 0x0);
        gbc.writeMem(0xcf98, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xc116);
        EXPECT(gbc.pc(), 0xcf99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf98), 0x9f);
        // 9F 031C
        gbc.setState(0xee0d, 0x40bf, 0xcb30, 0x77e3, 0x14c4, 0x6167, 0x1, 0x1);
        gbc.writeMem(0xee0d, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x40bf);
        EXPECT(gbc.pc(), 0xee0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee0d), 0x9f);
        // 9F 031D
        gbc.setState(0xb185, 0xea7c, 0x1e40, 0x2461, 0xc5cd, 0xd7c, 0x1, 0x0);
        gbc.writeMem(0xb185, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xea7c);
        EXPECT(gbc.pc(), 0xb186);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb185), 0x9f);
        // 9F 031E
        gbc.setState(0x7d2c, 0x66d, 0xfaa0, 0xb2a8, 0x22f, 0xcd97, 0x0, 0x0);
        gbc.writeMem(0x7d2c, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x66d);
        EXPECT(gbc.pc(), 0x7d2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 031F
        gbc.setState(0xe573, 0xdffa, 0xea0, 0x8f95, 0x4a58, 0x265a, 0x0, 0x1);
        gbc.writeMem(0xe573, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xdffa);
        EXPECT(gbc.pc(), 0xe574);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe573), 0x9f);
        // 9F 0320
        gbc.setState(0xd5a5, 0x44af, 0x4960, 0xd459, 0x7b29, 0xfed5, 0x0, 0x1);
        gbc.writeMem(0xd5a5, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x44af);
        EXPECT(gbc.pc(), 0xd5a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5a5), 0x9f);
        // 9F 0321
        gbc.setState(0x476f, 0x407a, 0x9c60, 0x94e7, 0x5e9f, 0xb884, 0x0, 0x1);
        gbc.writeMem(0x476f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x407a);
        EXPECT(gbc.pc(), 0x4770);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0322
        gbc.setState(0xcc8f, 0xae00, 0xb710, 0x4a3c, 0x4ba6, 0x4e05, 0x0, 0x0);
        gbc.writeMem(0xcc8f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xae00);
        EXPECT(gbc.pc(), 0xcc90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc8f), 0x9f);
        // 9F 0323
        gbc.setState(0x5139, 0xd766, 0xe290, 0x727b, 0x6d8f, 0x7254, 0x0, 0x0);
        gbc.writeMem(0x5139, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xd766);
        EXPECT(gbc.pc(), 0x513a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0324
        gbc.setState(0x4dfc, 0xa9fc, 0x9cd0, 0xcffe, 0x576b, 0xdba1, 0x1, 0x0);
        gbc.writeMem(0x4dfc, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xa9fc);
        EXPECT(gbc.pc(), 0x4dfd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0325
        gbc.setState(0x6336, 0xcea0, 0x4f20, 0x3d39, 0x91f, 0xe007, 0x1, 0x1);
        gbc.writeMem(0x6336, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xcea0);
        EXPECT(gbc.pc(), 0x6337);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0326
        gbc.setState(0x9790, 0xa19, 0x30a0, 0xaf64, 0x97f9, 0x8af1, 0x1, 0x0);
        gbc.writeMem(0x9790, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xa19);
        EXPECT(gbc.pc(), 0x9791);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9790), 0x9f);
        // 9F 0327
        gbc.setState(0xc33e, 0xc43b, 0x5cf0, 0xfd5b, 0xbd52, 0x22b5, 0x0, 0x0);
        gbc.writeMem(0xc33e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xc43b);
        EXPECT(gbc.pc(), 0xc33f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc33e), 0x9f);
        // 9F 0329
        gbc.setState(0xcb3d, 0x2c21, 0x2fd0, 0xdedf, 0x70b, 0x9f4b, 0x1, 0x1);
        gbc.writeMem(0xcb3d, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x2c21);
        EXPECT(gbc.pc(), 0xcb3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb3d), 0x9f);
        // 9F 032A
        gbc.setState(0x5d42, 0x8660, 0x4220, 0xafae, 0x2ecf, 0x348, 0x0, 0x1);
        gbc.writeMem(0x5d42, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x8660);
        EXPECT(gbc.pc(), 0x5d43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 032B
        gbc.setState(0xb916, 0x939b, 0x4700, 0x89ec, 0x7fd5, 0xe35b, 0x0, 0x0);
        gbc.writeMem(0xb916, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x939b);
        EXPECT(gbc.pc(), 0xb917);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb916), 0x9f);
        // 9F 032C
        gbc.setState(0x8e09, 0x8c2a, 0x58b0, 0x1479, 0x49f0, 0x1171, 0x0, 0x0);
        gbc.writeMem(0x8e09, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x8c2a);
        EXPECT(gbc.pc(), 0x8e0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e09), 0x9f);
        // 9F 032D
        gbc.setState(0x277, 0xba9, 0xb8b0, 0x9185, 0xb070, 0xeded, 0x1, 0x1);
        gbc.writeMem(0x277, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xba9);
        EXPECT(gbc.pc(), 0x278);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 032F
        gbc.setState(0x5ad1, 0xa68f, 0xf6a0, 0x341c, 0x8704, 0xc808, 0x1, 0x0);
        gbc.writeMem(0x5ad1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xa68f);
        EXPECT(gbc.pc(), 0x5ad2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0331
        gbc.setState(0xbc06, 0x3c80, 0xea00, 0xa4de, 0x252, 0x36c, 0x0, 0x1);
        gbc.writeMem(0xbc06, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x3c80);
        EXPECT(gbc.pc(), 0xbc07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc06), 0x9f);
        // 9F 0333
        gbc.setState(0x92fb, 0x1039, 0x17b0, 0x3be0, 0xe34c, 0x745f, 0x0, 0x1);
        gbc.writeMem(0x92fb, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x1039);
        EXPECT(gbc.pc(), 0x92fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92fb), 0x9f);
        // 9F 0334
        gbc.setState(0x30f9, 0xa2b2, 0x7db0, 0x2662, 0x3562, 0x83bb, 0x0, 0x1);
        gbc.writeMem(0x30f9, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xa2b2);
        EXPECT(gbc.pc(), 0x30fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0335
        gbc.setState(0x7019, 0xadb5, 0x23f0, 0x1fd6, 0x75d6, 0x86a0, 0x1, 0x0);
        gbc.writeMem(0x7019, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xadb5);
        EXPECT(gbc.pc(), 0x701a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0336
        gbc.setState(0xbf54, 0xfad8, 0x6af0, 0x3869, 0xf1d3, 0x5129, 0x0, 0x0);
        gbc.writeMem(0xbf54, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xfad8);
        EXPECT(gbc.pc(), 0xbf55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf54), 0x9f);
        // 9F 0337
        gbc.setState(0xb7a6, 0x2344, 0xf7a0, 0x64c2, 0xc9fb, 0xf6db, 0x0, 0x0);
        gbc.writeMem(0xb7a6, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x2344);
        EXPECT(gbc.pc(), 0xb7a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7a6), 0x9f);
        // 9F 0338
        gbc.setState(0xde61, 0xb288, 0x4d30, 0xff1b, 0xb00d, 0xb1f9, 0x0, 0x0);
        gbc.writeMem(0xde61, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xb288);
        EXPECT(gbc.pc(), 0xde62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde61), 0x9f);
        // 9F 033A
        gbc.setState(0x4a18, 0xa898, 0x1730, 0x8d59, 0x7ebe, 0x818b, 0x0, 0x0);
        gbc.writeMem(0x4a18, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xa898);
        EXPECT(gbc.pc(), 0x4a19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 033B
        gbc.setState(0x6275, 0x1e52, 0xec60, 0x9e0a, 0xdd6a, 0x8b23, 0x1, 0x1);
        gbc.writeMem(0x6275, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x1e52);
        EXPECT(gbc.pc(), 0x6276);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 033C
        gbc.setState(0xc945, 0xf514, 0x1710, 0xc748, 0x62f5, 0x712e, 0x1, 0x1);
        gbc.writeMem(0xc945, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xf514);
        EXPECT(gbc.pc(), 0xc946);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc945), 0x9f);
        // 9F 033D
        gbc.setState(0x55fe, 0xc20a, 0x3c50, 0x25a4, 0xb592, 0xe710, 0x1, 0x1);
        gbc.writeMem(0x55fe, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xc20a);
        EXPECT(gbc.pc(), 0x55ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 033E
        gbc.setState(0x55d6, 0x6cf9, 0xa140, 0x6924, 0x543c, 0x105, 0x1, 0x0);
        gbc.writeMem(0x55d6, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x6cf9);
        EXPECT(gbc.pc(), 0x55d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 033F
        gbc.setState(0x7ab3, 0x42b7, 0xe4c0, 0x56c9, 0xba7, 0x8cfe, 0x0, 0x1);
        gbc.writeMem(0x7ab3, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x42b7);
        EXPECT(gbc.pc(), 0x7ab4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0340
        gbc.setState(0x3cb2, 0x8cba, 0x5a20, 0x386c, 0x47bd, 0xc4c4, 0x0, 0x0);
        gbc.writeMem(0x3cb2, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x8cba);
        EXPECT(gbc.pc(), 0x3cb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0341
        gbc.setState(0x3b75, 0x443d, 0x3880, 0xb72e, 0x61c5, 0x9205, 0x0, 0x0);
        gbc.writeMem(0x3b75, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x443d);
        EXPECT(gbc.pc(), 0x3b76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0342
        gbc.setState(0x9427, 0x4935, 0x6090, 0x2a83, 0x7571, 0xfad0, 0x1, 0x1);
        gbc.writeMem(0x9427, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x4935);
        EXPECT(gbc.pc(), 0x9428);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9427), 0x9f);
        // 9F 0343
        gbc.setState(0x1d49, 0xc0ef, 0x7b70, 0x8b49, 0xbee8, 0xaac6, 0x1, 0x0);
        gbc.writeMem(0x1d49, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xc0ef);
        EXPECT(gbc.pc(), 0x1d4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0344
        gbc.setState(0xa2af, 0x7e24, 0xfe50, 0x3e39, 0x3f84, 0x88e, 0x1, 0x0);
        gbc.writeMem(0xa2af, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x7e24);
        EXPECT(gbc.pc(), 0xa2b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2af), 0x9f);
        // 9F 0345
        gbc.setState(0x6acd, 0x4f50, 0x8e40, 0xd6b0, 0x4b53, 0xad06, 0x0, 0x0);
        gbc.writeMem(0x6acd, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x4f50);
        EXPECT(gbc.pc(), 0x6ace);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0346
        gbc.setState(0x8348, 0x777c, 0x41f0, 0x1d31, 0xfa61, 0xdd77, 0x0, 0x1);
        gbc.writeMem(0x8348, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x777c);
        EXPECT(gbc.pc(), 0x8349);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8348), 0x9f);
        // 9F 0347
        gbc.setState(0xa92f, 0x9f85, 0x8a90, 0xf010, 0x82a2, 0x5547, 0x1, 0x0);
        gbc.writeMem(0xa92f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x9f85);
        EXPECT(gbc.pc(), 0xa930);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa92f), 0x9f);
        // 9F 0348
        gbc.setState(0x171a, 0xf3f2, 0x32e0, 0x6d3a, 0xe402, 0xfc70, 0x0, 0x1);
        gbc.writeMem(0x171a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xf3f2);
        EXPECT(gbc.pc(), 0x171b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0349
        gbc.setState(0x40c6, 0xcdc2, 0xe2a0, 0x4cd0, 0x2ad1, 0x6fd0, 0x0, 0x1);
        gbc.writeMem(0x40c6, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xcdc2);
        EXPECT(gbc.pc(), 0x40c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 034A
        gbc.setState(0xd79c, 0x19, 0xf6c0, 0xd88f, 0x6217, 0xde1, 0x0, 0x0);
        gbc.writeMem(0xd79c, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x19);
        EXPECT(gbc.pc(), 0xd79d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd79c), 0x9f);
        // 9F 034B
        gbc.setState(0x5695, 0x1bd, 0x4600, 0x4102, 0x7fca, 0x8a7c, 0x0, 0x0);
        gbc.writeMem(0x5695, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x1bd);
        EXPECT(gbc.pc(), 0x5696);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 034C
        gbc.setState(0x2f36, 0xaaf3, 0x9270, 0x4963, 0x8a71, 0x7fe, 0x1, 0x0);
        gbc.writeMem(0x2f36, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xaaf3);
        EXPECT(gbc.pc(), 0x2f37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 034D
        gbc.setState(0x801e, 0x2bf2, 0xa6a0, 0xe7b2, 0xb961, 0x7de6, 0x1, 0x0);
        gbc.writeMem(0x801e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x2bf2);
        EXPECT(gbc.pc(), 0x801f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x801e), 0x9f);
        // 9F 034E
        gbc.setState(0x32ec, 0x1ced, 0x6bb0, 0xc1c4, 0x5207, 0x506, 0x0, 0x1);
        gbc.writeMem(0x32ec, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x1ced);
        EXPECT(gbc.pc(), 0x32ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 034F
        gbc.setState(0x6d99, 0x17d4, 0xbc00, 0x2b71, 0x6938, 0xed9, 0x1, 0x1);
        gbc.writeMem(0x6d99, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x17d4);
        EXPECT(gbc.pc(), 0x6d9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0350
        gbc.setState(0x5c1d, 0x3bdf, 0xb660, 0xb113, 0x3880, 0xbc19, 0x0, 0x1);
        gbc.writeMem(0x5c1d, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x3bdf);
        EXPECT(gbc.pc(), 0x5c1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0351
        gbc.setState(0x10ed, 0x622c, 0x3830, 0x85ac, 0xa075, 0xa738, 0x0, 0x0);
        gbc.writeMem(0x10ed, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x622c);
        EXPECT(gbc.pc(), 0x10ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0352
        gbc.setState(0xb426, 0x6187, 0x35e0, 0x4b81, 0x9f10, 0xb031, 0x0, 0x0);
        gbc.writeMem(0xb426, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x6187);
        EXPECT(gbc.pc(), 0xb427);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb426), 0x9f);
        // 9F 0353
        gbc.setState(0xa7b8, 0x5d4b, 0x5900, 0x9447, 0x3672, 0xca7b, 0x1, 0x0);
        gbc.writeMem(0xa7b8, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x5d4b);
        EXPECT(gbc.pc(), 0xa7b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7b8), 0x9f);
        // 9F 0354
        gbc.setState(0x2662, 0x4d4c, 0x95e0, 0xe463, 0xc046, 0xbfd4, 0x1, 0x1);
        gbc.writeMem(0x2662, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x4d4c);
        EXPECT(gbc.pc(), 0x2663);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0355
        gbc.setState(0x89be, 0xad2e, 0x5770, 0xd850, 0x69a4, 0x570d, 0x1, 0x1);
        gbc.writeMem(0x89be, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xad2e);
        EXPECT(gbc.pc(), 0x89bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89be), 0x9f);
        // 9F 0356
        gbc.setState(0xa77a, 0x96b, 0x5ae0, 0x6af4, 0x68e0, 0x35df, 0x0, 0x1);
        gbc.writeMem(0xa77a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x96b);
        EXPECT(gbc.pc(), 0xa77b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa77a), 0x9f);
        // 9F 0357
        gbc.setState(0x72d, 0x6ac3, 0x460, 0xca30, 0x27cb, 0x904c, 0x0, 0x0);
        gbc.writeMem(0x72d, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x6ac3);
        EXPECT(gbc.pc(), 0x72e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0358
        gbc.setState(0x6afe, 0xfed7, 0x6990, 0xade1, 0x6821, 0x90f, 0x0, 0x0);
        gbc.writeMem(0x6afe, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xfed7);
        EXPECT(gbc.pc(), 0x6aff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0359
        gbc.setState(0x5f93, 0xfe01, 0x4670, 0xfb11, 0xbc09, 0xc029, 0x1, 0x0);
        gbc.writeMem(0x5f93, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xfe01);
        EXPECT(gbc.pc(), 0x5f94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 035A
        gbc.setState(0xec7c, 0xe8c8, 0xae90, 0xb9c7, 0xc965, 0x358, 0x1, 0x1);
        gbc.writeMem(0xec7c, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xe8c8);
        EXPECT(gbc.pc(), 0xec7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec7c), 0x9f);
        // 9F 035B
        gbc.setState(0x9827, 0x9a62, 0xf970, 0xdc56, 0x4dc9, 0x47c1, 0x0, 0x1);
        gbc.writeMem(0x9827, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x9a62);
        EXPECT(gbc.pc(), 0x9828);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9827), 0x9f);
        // 9F 035C
        gbc.setState(0xb4df, 0xddb8, 0x7dd0, 0xc73a, 0xd7e8, 0x29aa, 0x0, 0x1);
        gbc.writeMem(0xb4df, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xddb8);
        EXPECT(gbc.pc(), 0xb4e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4df), 0x9f);
        // 9F 035D
        gbc.setState(0x273f, 0xcb27, 0x8940, 0x76e, 0x74f6, 0xbde1, 0x0, 0x1);
        gbc.writeMem(0x273f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xcb27);
        EXPECT(gbc.pc(), 0x2740);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 035F
        gbc.setState(0xa895, 0xc2b4, 0xbf0, 0x9af7, 0xcc21, 0x7653, 0x0, 0x0);
        gbc.writeMem(0xa895, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xc2b4);
        EXPECT(gbc.pc(), 0xa896);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa895), 0x9f);
        // 9F 0360
        gbc.setState(0x1582, 0xf2b, 0x1650, 0x2463, 0xafdb, 0x1af1, 0x0, 0x0);
        gbc.writeMem(0x1582, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xf2b);
        EXPECT(gbc.pc(), 0x1583);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0361
        gbc.setState(0x499c, 0x7ae2, 0x4e90, 0xb847, 0x3ca1, 0x1ed0, 0x1, 0x1);
        gbc.writeMem(0x499c, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x7ae2);
        EXPECT(gbc.pc(), 0x499d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0362
        gbc.setState(0x6841, 0x404b, 0xa9a0, 0x8a29, 0x6a07, 0xb27, 0x0, 0x0);
        gbc.writeMem(0x6841, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x404b);
        EXPECT(gbc.pc(), 0x6842);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0363
        gbc.setState(0x4017, 0x29d6, 0x63c0, 0xec49, 0xaf50, 0x58cb, 0x0, 0x0);
        gbc.writeMem(0x4017, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x29d6);
        EXPECT(gbc.pc(), 0x4018);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0364
        gbc.setState(0x288e, 0xf24b, 0xd5e0, 0xb9b4, 0x43ff, 0x85be, 0x0, 0x1);
        gbc.writeMem(0x288e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xf24b);
        EXPECT(gbc.pc(), 0x288f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0365
        gbc.setState(0x681a, 0x7cf6, 0xbb10, 0x822c, 0x3d20, 0x69e1, 0x0, 0x1);
        gbc.writeMem(0x681a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x7cf6);
        EXPECT(gbc.pc(), 0x681b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0366
        gbc.setState(0xeb1b, 0x252, 0x1e60, 0xea43, 0xe5e1, 0xac62, 0x0, 0x0);
        gbc.writeMem(0xeb1b, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x252);
        EXPECT(gbc.pc(), 0xeb1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb1b), 0x9f);
        // 9F 0367
        gbc.setState(0xd95a, 0x3d80, 0x56d0, 0xb4, 0x983f, 0x9c86, 0x0, 0x1);
        gbc.writeMem(0xd95a, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x3d80);
        EXPECT(gbc.pc(), 0xd95b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd95a), 0x9f);
        // 9F 0368
        gbc.setState(0x9526, 0x4d39, 0xbfb0, 0x795c, 0xe21b, 0xbd82, 0x1, 0x0);
        gbc.writeMem(0x9526, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x4d39);
        EXPECT(gbc.pc(), 0x9527);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9526), 0x9f);
        // 9F 0369
        gbc.setState(0x3e7e, 0xda8d, 0x1cd0, 0xe7ea, 0xef6c, 0x9bc4, 0x1, 0x0);
        gbc.writeMem(0x3e7e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xda8d);
        EXPECT(gbc.pc(), 0x3e7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 036A
        gbc.setState(0x750, 0x6a93, 0xaf20, 0xea2a, 0xe0d8, 0x26c8, 0x0, 0x0);
        gbc.writeMem(0x750, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x6a93);
        EXPECT(gbc.pc(), 0x751);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 036B
        gbc.setState(0x8e67, 0xebdc, 0xfad0, 0x2f78, 0x6837, 0x2724, 0x1, 0x1);
        gbc.writeMem(0x8e67, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xebdc);
        EXPECT(gbc.pc(), 0x8e68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e67), 0x9f);
        // 9F 036C
        gbc.setState(0xe979, 0xc658, 0xccd0, 0xdd14, 0xb5f5, 0x1cb7, 0x1, 0x0);
        gbc.writeMem(0xe979, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xc658);
        EXPECT(gbc.pc(), 0xe97a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe979), 0x9f);
        // 9F 036D
        gbc.setState(0xcd57, 0x3b5, 0x5460, 0xac2b, 0xfc97, 0x8d32, 0x1, 0x0);
        gbc.writeMem(0xcd57, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x3b5);
        EXPECT(gbc.pc(), 0xcd58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd57), 0x9f);
        // 9F 036E
        gbc.setState(0x4f97, 0x46eb, 0xf0d0, 0xf8b7, 0x730b, 0xf16, 0x1, 0x0);
        gbc.writeMem(0x4f97, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x46eb);
        EXPECT(gbc.pc(), 0x4f98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0370
        gbc.setState(0x9180, 0xb3da, 0x6ac0, 0xf23c, 0x85cc, 0x25af, 0x1, 0x0);
        gbc.writeMem(0x9180, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xb3da);
        EXPECT(gbc.pc(), 0x9181);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9180), 0x9f);
        // 9F 0371
        gbc.setState(0xb025, 0x26bf, 0x2090, 0xd6a0, 0x9f06, 0x2d0e, 0x1, 0x1);
        gbc.writeMem(0xb025, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x26bf);
        EXPECT(gbc.pc(), 0xb026);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb025), 0x9f);
        // 9F 0372
        gbc.setState(0x3b57, 0x585a, 0xc0e0, 0x3822, 0x96d8, 0xb868, 0x1, 0x0);
        gbc.writeMem(0x3b57, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x585a);
        EXPECT(gbc.pc(), 0x3b58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0373
        gbc.setState(0x920c, 0x8897, 0xa420, 0xc88, 0xd2c8, 0x1c72, 0x0, 0x1);
        gbc.writeMem(0x920c, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x8897);
        EXPECT(gbc.pc(), 0x920d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x920c), 0x9f);
        // 9F 0374
        gbc.setState(0xe7c7, 0x7bc9, 0x4430, 0x882d, 0x7af, 0x18d6, 0x1, 0x1);
        gbc.writeMem(0xe7c7, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x7bc9);
        EXPECT(gbc.pc(), 0xe7c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7c7), 0x9f);
        // 9F 0375
        gbc.setState(0x30b4, 0x2c30, 0x51b0, 0xda2b, 0x7d63, 0xf27a, 0x1, 0x0);
        gbc.writeMem(0x30b4, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x2c30);
        EXPECT(gbc.pc(), 0x30b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0376
        gbc.setState(0x2a28, 0x4375, 0xb1f0, 0x658a, 0x84ca, 0x83a2, 0x1, 0x1);
        gbc.writeMem(0x2a28, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x4375);
        EXPECT(gbc.pc(), 0x2a29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0377
        gbc.setState(0xb61, 0x72af, 0x1560, 0x85e9, 0x335c, 0x4fbf, 0x0, 0x1);
        gbc.writeMem(0xb61, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x72af);
        EXPECT(gbc.pc(), 0xb62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0378
        gbc.setState(0x2ef6, 0x7d67, 0xd510, 0xfab4, 0xb9dc, 0x462c, 0x0, 0x1);
        gbc.writeMem(0x2ef6, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x7d67);
        EXPECT(gbc.pc(), 0x2ef7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0379
        gbc.setState(0x5d5d, 0xdda9, 0x8090, 0xd5ca, 0xf7d2, 0xe065, 0x0, 0x1);
        gbc.writeMem(0x5d5d, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xdda9);
        EXPECT(gbc.pc(), 0x5d5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 037A
        gbc.setState(0xa7ee, 0x282b, 0xc410, 0xfb8f, 0x3803, 0x9497, 0x0, 0x1);
        gbc.writeMem(0xa7ee, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x282b);
        EXPECT(gbc.pc(), 0xa7ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7ee), 0x9f);
        // 9F 037D
        gbc.setState(0x485e, 0xd4bb, 0xbfa0, 0x80de, 0x57e2, 0x67a7, 0x1, 0x0);
        gbc.writeMem(0x485e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xd4bb);
        EXPECT(gbc.pc(), 0x485f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 037E
        gbc.setState(0x8307, 0x173f, 0x2520, 0x8d20, 0x16b0, 0x5cb2, 0x1, 0x1);
        gbc.writeMem(0x8307, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x173f);
        EXPECT(gbc.pc(), 0x8308);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8307), 0x9f);
        // 9F 037F
        gbc.setState(0xc963, 0x267f, 0xa590, 0x53f4, 0x47d1, 0xdabf, 0x0, 0x1);
        gbc.writeMem(0xc963, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x267f);
        EXPECT(gbc.pc(), 0xc964);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc963), 0x9f);
        // 9F 0380
        gbc.setState(0x6621, 0x4e7b, 0xe5c0, 0x1d8f, 0x4fcb, 0xd3e0, 0x0, 0x1);
        gbc.writeMem(0x6621, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x4e7b);
        EXPECT(gbc.pc(), 0x6622);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0381
        gbc.setState(0xb762, 0x180a, 0x1840, 0x5c97, 0x457e, 0xf568, 0x1, 0x0);
        gbc.writeMem(0xb762, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x180a);
        EXPECT(gbc.pc(), 0xb763);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb762), 0x9f);
        // 9F 0382
        gbc.setState(0xb308, 0xe586, 0xc760, 0x10ae, 0x481, 0x5b42, 0x0, 0x1);
        gbc.writeMem(0xb308, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xe586);
        EXPECT(gbc.pc(), 0xb309);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb308), 0x9f);
        // 9F 0383
        gbc.setState(0xa03, 0xdb44, 0x2e90, 0x2bad, 0xd59f, 0x5eb4, 0x0, 0x0);
        gbc.writeMem(0xa03, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xdb44);
        EXPECT(gbc.pc(), 0xa04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0384
        gbc.setState(0x5427, 0x616f, 0x2350, 0x2f7a, 0x2f6, 0x382c, 0x0, 0x0);
        gbc.writeMem(0x5427, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x616f);
        EXPECT(gbc.pc(), 0x5428);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0385
        gbc.setState(0x7308, 0x87ce, 0x2cc0, 0xa9f3, 0x57ec, 0xea07, 0x1, 0x0);
        gbc.writeMem(0x7308, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x87ce);
        EXPECT(gbc.pc(), 0x7309);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0386
        gbc.setState(0xf1d, 0xc2cc, 0x29f0, 0x8149, 0x805a, 0x8162, 0x1, 0x1);
        gbc.writeMem(0xf1d, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xc2cc);
        EXPECT(gbc.pc(), 0xf1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0387
        gbc.setState(0xc830, 0x868, 0x2720, 0x97eb, 0xa399, 0xedb5, 0x0, 0x0);
        gbc.writeMem(0xc830, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x868);
        EXPECT(gbc.pc(), 0xc831);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc830), 0x9f);
        // 9F 0388
        gbc.setState(0xb829, 0x787f, 0xaeb0, 0xf1de, 0x427d, 0x1c59, 0x1, 0x0);
        gbc.writeMem(0xb829, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x787f);
        EXPECT(gbc.pc(), 0xb82a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb829), 0x9f);
        // 9F 0389
        gbc.setState(0x6a29, 0x4387, 0xdb80, 0xf350, 0x7ef, 0x61c3, 0x0, 0x1);
        gbc.writeMem(0x6a29, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x4387);
        EXPECT(gbc.pc(), 0x6a2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 038A
        gbc.setState(0x4cb1, 0xbffe, 0x2de0, 0xf65, 0xa320, 0xfd15, 0x0, 0x1);
        gbc.writeMem(0x4cb1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xbffe);
        EXPECT(gbc.pc(), 0x4cb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 038B
        gbc.setState(0x35e, 0x7250, 0xfba0, 0x1652, 0x4194, 0x1eac, 0x1, 0x1);
        gbc.writeMem(0x35e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x7250);
        EXPECT(gbc.pc(), 0x35f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 038D
        gbc.setState(0xa731, 0xf975, 0x4040, 0x6482, 0xefa7, 0xf8eb, 0x1, 0x0);
        gbc.writeMem(0xa731, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xf975);
        EXPECT(gbc.pc(), 0xa732);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa731), 0x9f);
        // 9F 038E
        gbc.setState(0x4902, 0xdff, 0x5c10, 0xd51, 0x7fa8, 0x7c6e, 0x1, 0x0);
        gbc.writeMem(0x4902, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xdff);
        EXPECT(gbc.pc(), 0x4903);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 038F
        gbc.setState(0x3c19, 0x752c, 0xa190, 0xd414, 0x1f17, 0xf558, 0x1, 0x1);
        gbc.writeMem(0x3c19, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x752c);
        EXPECT(gbc.pc(), 0x3c1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0390
        gbc.setState(0xe2f0, 0x6be5, 0x4a50, 0xf61d, 0x837e, 0x7904, 0x1, 0x0);
        gbc.writeMem(0xe2f0, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x6be5);
        EXPECT(gbc.pc(), 0xe2f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2f0), 0x9f);
        // 9F 0392
        gbc.setState(0x1d32, 0x68a9, 0xd560, 0xf5, 0xc06a, 0x56bd, 0x0, 0x1);
        gbc.writeMem(0x1d32, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x68a9);
        EXPECT(gbc.pc(), 0x1d33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0393
        gbc.setState(0x47b1, 0x4628, 0x3b70, 0x203d, 0xc4f7, 0xd69c, 0x0, 0x1);
        gbc.writeMem(0x47b1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x4628);
        EXPECT(gbc.pc(), 0x47b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0394
        gbc.setState(0x4861, 0x6465, 0x9b0, 0xfa9, 0x79b0, 0xaedf, 0x1, 0x1);
        gbc.writeMem(0x4861, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x6465);
        EXPECT(gbc.pc(), 0x4862);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0395
        gbc.setState(0x3f1, 0x9db1, 0xae80, 0x5584, 0x8efe, 0x529c, 0x1, 0x0);
        gbc.writeMem(0x3f1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x9db1);
        EXPECT(gbc.pc(), 0x3f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 0396
        gbc.setState(0x8326, 0xbad6, 0x4420, 0x1f42, 0xe580, 0x7c36, 0x0, 0x0);
        gbc.writeMem(0x8326, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xbad6);
        EXPECT(gbc.pc(), 0x8327);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8326), 0x9f);
        // 9F 0397
        gbc.setState(0x2710, 0x68ef, 0x2230, 0xd6ca, 0x42b1, 0xec0d, 0x1, 0x1);
        gbc.writeMem(0x2710, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x68ef);
        EXPECT(gbc.pc(), 0x2711);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 0398
        gbc.setState(0x9569, 0x2cf7, 0x6470, 0x5b9d, 0x5f6e, 0x18cd, 0x1, 0x0);
        gbc.writeMem(0x9569, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x2cf7);
        EXPECT(gbc.pc(), 0x956a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9569), 0x9f);
        // 9F 039A
        gbc.setState(0xcd52, 0x2000, 0x2010, 0xd34, 0x68d3, 0x8936, 0x0, 0x0);
        gbc.writeMem(0xcd52, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x2000);
        EXPECT(gbc.pc(), 0xcd53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd52), 0x9f);
        // 9F 039B
        gbc.setState(0x16a2, 0xab66, 0xa590, 0xf536, 0x424b, 0x481e, 0x1, 0x0);
        gbc.writeMem(0x16a2, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xab66);
        EXPECT(gbc.pc(), 0x16a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 039D
        gbc.setState(0x9cff, 0x581c, 0x6a40, 0x3fd1, 0xfb4c, 0x3b90, 0x1, 0x1);
        gbc.writeMem(0x9cff, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x581c);
        EXPECT(gbc.pc(), 0x9d00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cff), 0x9f);
        // 9F 039E
        gbc.setState(0x464f, 0x67d1, 0xf3d0, 0x2efb, 0x305d, 0xdf1c, 0x0, 0x1);
        gbc.writeMem(0x464f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x67d1);
        EXPECT(gbc.pc(), 0x4650);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 039F
        gbc.setState(0x90c1, 0x5d6e, 0x8b40, 0x40f5, 0x6020, 0xc69a, 0x1, 0x1);
        gbc.writeMem(0x90c1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x5d6e);
        EXPECT(gbc.pc(), 0x90c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90c1), 0x9f);
        // 9F 03A0
        gbc.setState(0x7a6e, 0x6df8, 0xc270, 0x9bc4, 0x7736, 0x53da, 0x0, 0x0);
        gbc.writeMem(0x7a6e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x6df8);
        EXPECT(gbc.pc(), 0x7a6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 03A1
        gbc.setState(0x4380, 0xbc66, 0xf640, 0x2837, 0x71c, 0x20d4, 0x1, 0x0);
        gbc.writeMem(0x4380, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xbc66);
        EXPECT(gbc.pc(), 0x4381);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 03A2
        gbc.setState(0x93d1, 0x6b5, 0xe8f0, 0x5912, 0x4c39, 0xfa3b, 0x0, 0x0);
        gbc.writeMem(0x93d1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x6b5);
        EXPECT(gbc.pc(), 0x93d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93d1), 0x9f);
        // 9F 03A3
        gbc.setState(0x1508, 0x846d, 0xc330, 0x27c7, 0x8053, 0x2d90, 0x1, 0x1);
        gbc.writeMem(0x1508, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x846d);
        EXPECT(gbc.pc(), 0x1509);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 03A4
        gbc.setState(0xece, 0xb1ec, 0x25a0, 0x5887, 0x2497, 0xf4be, 0x0, 0x1);
        gbc.writeMem(0xece, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xb1ec);
        EXPECT(gbc.pc(), 0xecf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 03A5
        gbc.setState(0xd315, 0xad6, 0xc410, 0x9456, 0xe3ad, 0xb1ad, 0x1, 0x1);
        gbc.writeMem(0xd315, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xad6);
        EXPECT(gbc.pc(), 0xd316);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd315), 0x9f);
        // 9F 03A6
        gbc.setState(0x19c9, 0x17df, 0x8ea0, 0xf02e, 0xc06d, 0x7bc0, 0x1, 0x0);
        gbc.writeMem(0x19c9, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x17df);
        EXPECT(gbc.pc(), 0x19ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 03A7
        gbc.setState(0x3b81, 0x652c, 0x8980, 0x1e22, 0xad74, 0xd128, 0x1, 0x1);
        gbc.writeMem(0x3b81, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x652c);
        EXPECT(gbc.pc(), 0x3b82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 03AA
        gbc.setState(0xb9af, 0xdd3c, 0x5170, 0xe449, 0x4e1, 0xf3b2, 0x0, 0x1);
        gbc.writeMem(0xb9af, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xdd3c);
        EXPECT(gbc.pc(), 0xb9b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9af), 0x9f);
        // 9F 03AB
        gbc.setState(0xabfd, 0x7297, 0x33e0, 0xe77c, 0x3a77, 0xf582, 0x0, 0x1);
        gbc.writeMem(0xabfd, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x7297);
        EXPECT(gbc.pc(), 0xabfe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabfd), 0x9f);
        // 9F 03AC
        gbc.setState(0x465f, 0x34e4, 0xfe90, 0xc474, 0x652c, 0xc46a, 0x1, 0x0);
        gbc.writeMem(0x465f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x34e4);
        EXPECT(gbc.pc(), 0x4660);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 03AD
        gbc.setState(0xbc18, 0x412e, 0x4c90, 0xeb6c, 0x44f9, 0x70d2, 0x1, 0x0);
        gbc.writeMem(0xbc18, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x412e);
        EXPECT(gbc.pc(), 0xbc19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc18), 0x9f);
        // 9F 03AE
        gbc.setState(0x2306, 0x9bcd, 0xd910, 0x7142, 0xa2c7, 0x5598, 0x0, 0x1);
        gbc.writeMem(0x2306, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x9bcd);
        EXPECT(gbc.pc(), 0x2307);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 03B1
        gbc.setState(0x8b10, 0x87c4, 0x1f30, 0xc210, 0x20ad, 0x1928, 0x0, 0x1);
        gbc.writeMem(0x8b10, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x87c4);
        EXPECT(gbc.pc(), 0x8b11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b10), 0x9f);
        // 9F 03B2
        gbc.setState(0xb927, 0xdfff, 0xd870, 0x7619, 0xe1a4, 0x3907, 0x0, 0x0);
        gbc.writeMem(0xb927, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xdfff);
        EXPECT(gbc.pc(), 0xb928);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb927), 0x9f);
        // 9F 03B3
        gbc.setState(0x8fc2, 0xfe1c, 0xd9c0, 0xf9f6, 0xf621, 0x1138, 0x1, 0x1);
        gbc.writeMem(0x8fc2, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xfe1c);
        EXPECT(gbc.pc(), 0x8fc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fc2), 0x9f);
        // 9F 03B4
        gbc.setState(0x40d8, 0x5f7a, 0x8190, 0x7460, 0x99a8, 0x62c4, 0x1, 0x1);
        gbc.writeMem(0x40d8, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x5f7a);
        EXPECT(gbc.pc(), 0x40d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 03B5
        gbc.setState(0x6d2c, 0x83a1, 0xdaa0, 0x49e4, 0xa849, 0x1ed7, 0x1, 0x0);
        gbc.writeMem(0x6d2c, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x83a1);
        EXPECT(gbc.pc(), 0x6d2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 03B6
        gbc.setState(0xc61b, 0xcfbf, 0xa2c0, 0xf535, 0x8a0b, 0xe1de, 0x0, 0x1);
        gbc.writeMem(0xc61b, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xcfbf);
        EXPECT(gbc.pc(), 0xc61c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc61b), 0x9f);
        // 9F 03B7
        gbc.setState(0x18e3, 0x187f, 0x6000, 0xb5ed, 0x1030, 0x7bff, 0x0, 0x0);
        gbc.writeMem(0x18e3, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x187f);
        EXPECT(gbc.pc(), 0x18e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 03B8
        gbc.setState(0xb660, 0x7e9c, 0x92e0, 0x3e0d, 0x1a4c, 0x4323, 0x1, 0x1);
        gbc.writeMem(0xb660, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x7e9c);
        EXPECT(gbc.pc(), 0xb661);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb660), 0x9f);
        // 9F 03B9
        gbc.setState(0x2714, 0x1e60, 0xb460, 0x90ee, 0xcd40, 0x42ef, 0x0, 0x1);
        gbc.writeMem(0x2714, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x1e60);
        EXPECT(gbc.pc(), 0x2715);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 03BA
        gbc.setState(0x562b, 0x55a6, 0x7100, 0x9e6f, 0xccd6, 0x10e2, 0x1, 0x1);
        gbc.writeMem(0x562b, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x55a6);
        EXPECT(gbc.pc(), 0x562c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 03BB
        gbc.setState(0x40ae, 0x90bf, 0xdd90, 0x268b, 0x4a1f, 0xc02, 0x1, 0x1);
        gbc.writeMem(0x40ae, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x90bf);
        EXPECT(gbc.pc(), 0x40af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 03BC
        gbc.setState(0xa472, 0x3a8, 0x34c0, 0xc0c1, 0x1740, 0x1439, 0x0, 0x0);
        gbc.writeMem(0xa472, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x3a8);
        EXPECT(gbc.pc(), 0xa473);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa472), 0x9f);
        // 9F 03BD
        gbc.setState(0x1728, 0x3aec, 0x16a0, 0xc430, 0x723b, 0xc94e, 0x1, 0x0);
        gbc.writeMem(0x1728, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x3aec);
        EXPECT(gbc.pc(), 0x1729);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 03BE
        gbc.setState(0x44b1, 0xa8a, 0x79e0, 0xcb8f, 0xf32e, 0xe4ba, 0x0, 0x0);
        gbc.writeMem(0x44b1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xa8a);
        EXPECT(gbc.pc(), 0x44b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 03BF
        gbc.setState(0xd488, 0x35c2, 0x6ca0, 0xa2be, 0xdb1f, 0x2588, 0x1, 0x1);
        gbc.writeMem(0xd488, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x35c2);
        EXPECT(gbc.pc(), 0xd489);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd488), 0x9f);
        // 9F 03C0
        gbc.setState(0x9238, 0xe51, 0xfd90, 0xf38a, 0x1427, 0xfaf, 0x1, 0x0);
        gbc.writeMem(0x9238, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xe51);
        EXPECT(gbc.pc(), 0x9239);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9238), 0x9f);
        // 9F 03C1
        gbc.setState(0x8581, 0xdf28, 0xa100, 0x97ad, 0x3d03, 0x50c, 0x0, 0x0);
        gbc.writeMem(0x8581, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xdf28);
        EXPECT(gbc.pc(), 0x8582);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8581), 0x9f);
        // 9F 03C2
        gbc.setState(0x6195, 0x2ee7, 0xcfa0, 0x141f, 0x96e3, 0x6477, 0x1, 0x0);
        gbc.writeMem(0x6195, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x2ee7);
        EXPECT(gbc.pc(), 0x6196);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 03C3
        gbc.setState(0x9c9f, 0xe251, 0xd100, 0x3d0c, 0x4288, 0xc62f, 0x0, 0x1);
        gbc.writeMem(0x9c9f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xe251);
        EXPECT(gbc.pc(), 0x9ca0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c9f), 0x9f);
        // 9F 03C4
        gbc.setState(0x8408, 0xd571, 0xbc10, 0xfe0e, 0x881d, 0x8973, 0x0, 0x0);
        gbc.writeMem(0x8408, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xd571);
        EXPECT(gbc.pc(), 0x8409);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8408), 0x9f);
        // 9F 03C6
        gbc.setState(0x4dad, 0x537c, 0xaec0, 0x41fa, 0x378b, 0xb19, 0x1, 0x1);
        gbc.writeMem(0x4dad, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x537c);
        EXPECT(gbc.pc(), 0x4dae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 03C7
        gbc.setState(0x5bec, 0xc48d, 0x8270, 0x6a74, 0x5a46, 0xa029, 0x1, 0x1);
        gbc.writeMem(0x5bec, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xc48d);
        EXPECT(gbc.pc(), 0x5bed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 03C8
        gbc.setState(0x51cb, 0x2f35, 0xfbd0, 0x42ff, 0xf39b, 0x7753, 0x1, 0x0);
        gbc.writeMem(0x51cb, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x2f35);
        EXPECT(gbc.pc(), 0x51cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 03C9
        gbc.setState(0x4d02, 0xbb94, 0x6c30, 0xca03, 0xce29, 0xd39, 0x0, 0x0);
        gbc.writeMem(0x4d02, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xbb94);
        EXPECT(gbc.pc(), 0x4d03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 03CA
        gbc.setState(0x54ae, 0xf623, 0x830, 0x5d9d, 0xd5fb, 0xdb62, 0x0, 0x1);
        gbc.writeMem(0x54ae, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xf623);
        EXPECT(gbc.pc(), 0x54af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 03CB
        gbc.setState(0xbfb8, 0xf9f4, 0x4dd0, 0x8e3f, 0x1a48, 0x78b1, 0x0, 0x0);
        gbc.writeMem(0xbfb8, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xf9f4);
        EXPECT(gbc.pc(), 0xbfb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfb8), 0x9f);
        // 9F 03CD
        gbc.setState(0x187b, 0x4acb, 0x80f0, 0xad1f, 0x6039, 0x9fcd, 0x0, 0x0);
        gbc.writeMem(0x187b, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x4acb);
        EXPECT(gbc.pc(), 0x187c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 03CE
        gbc.setState(0x859, 0xed99, 0x17d0, 0x3a61, 0x8d4a, 0xced4, 0x1, 0x0);
        gbc.writeMem(0x859, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xed99);
        EXPECT(gbc.pc(), 0x85a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 03CF
        gbc.setState(0x4d21, 0xd8a7, 0x5290, 0x8f29, 0xb819, 0xc941, 0x1, 0x0);
        gbc.writeMem(0x4d21, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xd8a7);
        EXPECT(gbc.pc(), 0x4d22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 03D0
        gbc.setState(0x4dd8, 0x679e, 0x8bd0, 0xe3bc, 0x6a17, 0x7b1e, 0x1, 0x1);
        gbc.writeMem(0x4dd8, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x679e);
        EXPECT(gbc.pc(), 0x4dd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 03D4
        gbc.setState(0xbe50, 0xff3c, 0x5820, 0xd081, 0xb00c, 0xe99d, 0x1, 0x1);
        gbc.writeMem(0xbe50, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xff3c);
        EXPECT(gbc.pc(), 0xbe51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe50), 0x9f);
        // 9F 03D5
        gbc.setState(0x28bf, 0xbc89, 0x8160, 0x56e9, 0x991, 0x275b, 0x0, 0x1);
        gbc.writeMem(0x28bf, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xbc89);
        EXPECT(gbc.pc(), 0x28c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 03D6
        gbc.setState(0x49ac, 0x43ee, 0x5110, 0xe0d, 0xb4a1, 0x21dd, 0x0, 0x1);
        gbc.writeMem(0x49ac, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x43ee);
        EXPECT(gbc.pc(), 0x49ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 03D7
        gbc.setState(0x16dd, 0xbb76, 0x4390, 0xe943, 0x939c, 0xcf72, 0x1, 0x1);
        gbc.writeMem(0x16dd, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xbb76);
        EXPECT(gbc.pc(), 0x16de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 03D8
        gbc.setState(0x9316, 0xfe7f, 0x35f0, 0xfb8d, 0x9671, 0xe7cb, 0x1, 0x0);
        gbc.writeMem(0x9316, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xfe7f);
        EXPECT(gbc.pc(), 0x9317);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9316), 0x9f);
        // 9F 03D9
        gbc.setState(0xe276, 0x48c7, 0xe3e0, 0xc353, 0x2cd4, 0x79c9, 0x1, 0x1);
        gbc.writeMem(0xe276, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x48c7);
        EXPECT(gbc.pc(), 0xe277);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe276), 0x9f);
        // 9F 03DA
        gbc.setState(0x9ff9, 0x78b2, 0xbe20, 0x37cf, 0x7be1, 0xa0af, 0x0, 0x1);
        gbc.writeMem(0x9ff9, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x78b2);
        EXPECT(gbc.pc(), 0x9ffa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ff9), 0x9f);
        // 9F 03DB
        gbc.setState(0x722e, 0x10c3, 0xb6f0, 0x6fb8, 0xa93b, 0x6940, 0x0, 0x1);
        gbc.writeMem(0x722e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x10c3);
        EXPECT(gbc.pc(), 0x722f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 03DC
        gbc.setState(0x46cf, 0x6eaa, 0xc350, 0x5f3a, 0xa804, 0xc0e6, 0x1, 0x1);
        gbc.writeMem(0x46cf, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x6eaa);
        EXPECT(gbc.pc(), 0x46d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 03DD
        gbc.setState(0xe030, 0xa915, 0x3620, 0x9c27, 0xc8a0, 0x1ac9, 0x1, 0x0);
        gbc.writeMem(0xe030, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xa915);
        EXPECT(gbc.pc(), 0xe031);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe030), 0x9f);
        // 9F 03DE
        gbc.setState(0xe6b9, 0x3427, 0x9300, 0x1a32, 0x9585, 0x7fd8, 0x1, 0x0);
        gbc.writeMem(0xe6b9, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x3427);
        EXPECT(gbc.pc(), 0xe6ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6b9), 0x9f);
        // 9F 03DF
        gbc.setState(0x8ac, 0x834f, 0xb180, 0xd75b, 0x6d50, 0x7c80, 0x0, 0x0);
        gbc.writeMem(0x8ac, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x834f);
        EXPECT(gbc.pc(), 0x8ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 03E0
        gbc.setState(0xabe8, 0x86d1, 0x7cc0, 0x20eb, 0xef7e, 0xbc83, 0x0, 0x0);
        gbc.writeMem(0xabe8, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x86d1);
        EXPECT(gbc.pc(), 0xabe9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabe8), 0x9f);
        // 9F 03E1
        gbc.setState(0x8fd1, 0x835d, 0x8fd0, 0x433a, 0x2c67, 0xa56e, 0x0, 0x1);
        gbc.writeMem(0x8fd1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x835d);
        EXPECT(gbc.pc(), 0x8fd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fd1), 0x9f);
        // 9F 03E2
        gbc.setState(0x4a3e, 0x1ae2, 0x52f0, 0x1bea, 0x89f6, 0xd469, 0x1, 0x0);
        gbc.writeMem(0x4a3e, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x1ae2);
        EXPECT(gbc.pc(), 0x4a3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 03E3
        gbc.setState(0xd4d, 0x9ba7, 0x6590, 0x4fa6, 0xb37d, 0xd1f6, 0x0, 0x1);
        gbc.writeMem(0xd4d, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x9ba7);
        EXPECT(gbc.pc(), 0xd4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 03E4
        gbc.setState(0x69e1, 0xaa09, 0x7250, 0xfbee, 0x8530, 0xa4c8, 0x1, 0x1);
        gbc.writeMem(0x69e1, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xaa09);
        EXPECT(gbc.pc(), 0x69e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 9F 03E5
        gbc.setState(0x4b30, 0xb4c0, 0x7e0, 0x2d57, 0x5b6e, 0xb289, 0x0, 0x0);
        gbc.writeMem(0x4b30, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xb4c0);
        EXPECT(gbc.pc(), 0x4b31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 9F 03E6
        gbc.setState(0xc2e7, 0x3a75, 0x3bc0, 0x9ba5, 0xd588, 0x35e0, 0x0, 0x0);
        gbc.writeMem(0xc2e7, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x3a75);
        EXPECT(gbc.pc(), 0xc2e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2e7), 0x9f);
        // 9F 03E7
        gbc.setState(0xe9a4, 0xee71, 0x5d50, 0x7038, 0x3a47, 0x8df6, 0x0, 0x0);
        gbc.writeMem(0xe9a4, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xee71);
        EXPECT(gbc.pc(), 0xe9a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9a4), 0x9f);
    }
}
#endif
