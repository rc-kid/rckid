#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_c7)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_c7) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // C7 0002
        gbc.setState(0x5693, 0xf450, 0xa8b0, 0x85b8, 0xb57d, 0x525f, 0x1, 0x0);
        gbc.writeMem(0x5693, { 0xc7 });
        gbc.writeMem(0xf44e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xf44e);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf44e), 0x94);
        EXPECT(gbc.readMem(0xf44f), 0x56);
        // C7 0004
        gbc.setState(0x8ffb, 0xd6d9, 0x46e0, 0xd5b7, 0xc311, 0xddd1, 0x0, 0x0);
        gbc.writeMem(0x8ffb, { 0xc7 });
        gbc.writeMem(0xd6d7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xd6d7);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ffb), 0xc7);
        EXPECT(gbc.readMem(0xd6d7), 0xfc);
        EXPECT(gbc.readMem(0xd6d8), 0x8f);
        // C7 0005
        gbc.setState(0xce7d, 0xed67, 0x6b90, 0xddf, 0x2b7c, 0xfc97, 0x0, 0x0);
        gbc.writeMem(0xce7d, { 0xc7 });
        gbc.writeMem(0xed65, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xed65);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce7d), 0xc7);
        EXPECT(gbc.readMem(0xed65), 0x7e);
        EXPECT(gbc.readMem(0xed66), 0xce);
        // C7 0006
        gbc.setState(0xe4ee, 0xd833, 0x4750, 0xbdad, 0x4248, 0x9fe5, 0x1, 0x0);
        gbc.writeMem(0xd831, { 0x0, 0x0 });
        gbc.writeMem(0xe4ee, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xd831);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd831), 0xef);
        EXPECT(gbc.readMem(0xd832), 0xe4);
        EXPECT(gbc.readMem(0xe4ee), 0xc7);
        // C7 000C
        gbc.setState(0x1f59, 0xffe6, 0x7000, 0x8606, 0x72b2, 0x1666, 0x0, 0x1);
        gbc.writeMem(0x1f59, { 0xc7 });
        gbc.writeMem(0xffe4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xffe4);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffe4), 0x5a);
        EXPECT(gbc.readMem(0xffe5), 0x1f);
        // C7 000D
        gbc.setState(0x53ae, 0xac1b, 0x690, 0x8fc3, 0x75ba, 0x6cb6, 0x0, 0x0);
        gbc.writeMem(0x53ae, { 0xc7 });
        gbc.writeMem(0xac19, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xac19);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac19), 0xaf);
        EXPECT(gbc.readMem(0xac1a), 0x53);
        // C7 000E
        gbc.setState(0x1b24, 0xcf18, 0x5dc0, 0xe16f, 0x850, 0x3406, 0x1, 0x0);
        gbc.writeMem(0x1b24, { 0xc7 });
        gbc.writeMem(0xcf16, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xcf16);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf16), 0x25);
        EXPECT(gbc.readMem(0xcf17), 0x1b);
        // C7 0011
        gbc.setState(0x90db, 0xea77, 0x5e30, 0x728b, 0xc424, 0xb52d, 0x1, 0x1);
        gbc.writeMem(0x90db, { 0xc7 });
        gbc.writeMem(0xea75, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xea75);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90db), 0xc7);
        EXPECT(gbc.readMem(0xea75), 0xdc);
        EXPECT(gbc.readMem(0xea76), 0x90);
        // C7 0012
        gbc.setState(0xec57, 0xd527, 0x2d60, 0x39d0, 0x7c0d, 0x60df, 0x1, 0x1);
        gbc.writeMem(0xd525, { 0x0, 0x0 });
        gbc.writeMem(0xec57, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xd525);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd525), 0x58);
        EXPECT(gbc.readMem(0xd526), 0xec);
        EXPECT(gbc.readMem(0xec57), 0xc7);
        // C7 0013
        gbc.setState(0xaeaa, 0xf827, 0x3dc0, 0xfe2b, 0x5b96, 0x369b, 0x1, 0x1);
        gbc.writeMem(0xaeaa, { 0xc7 });
        gbc.writeMem(0xf825, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xf825);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaeaa), 0xc7);
        EXPECT(gbc.readMem(0xf825), 0xab);
        EXPECT(gbc.readMem(0xf826), 0xae);
        // C7 0017
        gbc.setState(0x41a9, 0xc120, 0x2380, 0x7dce, 0x3cce, 0x5340, 0x1, 0x1);
        gbc.writeMem(0x41a9, { 0xc7 });
        gbc.writeMem(0xc11e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xc11e);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc11e), 0xaa);
        EXPECT(gbc.readMem(0xc11f), 0x41);
        // C7 0018
        gbc.setState(0x9e6e, 0x91f7, 0x8720, 0xd81, 0x5b8e, 0x7386, 0x1, 0x0);
        gbc.writeMem(0x91f5, { 0x0, 0x0 });
        gbc.writeMem(0x9e6e, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x91f5);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91f5), 0x6f);
        EXPECT(gbc.readMem(0x91f6), 0x9e);
        EXPECT(gbc.readMem(0x9e6e), 0xc7);
        // C7 001C
        gbc.setState(0xab9f, 0xe918, 0x5950, 0x1c85, 0x79f6, 0xfc4d, 0x1, 0x1);
        gbc.writeMem(0xab9f, { 0xc7 });
        gbc.writeMem(0xe916, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xe916);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab9f), 0xc7);
        EXPECT(gbc.readMem(0xe916), 0xa0);
        EXPECT(gbc.readMem(0xe917), 0xab);
        // C7 001E
        gbc.setState(0x768a, 0xd8e9, 0x66e0, 0x6dfa, 0x9b6, 0xed6f, 0x1, 0x0);
        gbc.writeMem(0x768a, { 0xc7 });
        gbc.writeMem(0xd8e7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xd8e7);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8e7), 0x8b);
        EXPECT(gbc.readMem(0xd8e8), 0x76);
        // C7 0020
        gbc.setState(0x4a31, 0xdc4a, 0xebe0, 0xd17a, 0x8c8, 0xc84e, 0x1, 0x1);
        gbc.writeMem(0x4a31, { 0xc7 });
        gbc.writeMem(0xdc48, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xdc48);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc48), 0x32);
        EXPECT(gbc.readMem(0xdc49), 0x4a);
        // C7 0023
        gbc.setState(0x113b, 0xf4e3, 0xda90, 0xc177, 0x70e6, 0x8d35, 0x0, 0x0);
        gbc.writeMem(0x113b, { 0xc7 });
        gbc.writeMem(0xf4e1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xf4e1);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf4e1), 0x3c);
        EXPECT(gbc.readMem(0xf4e2), 0x11);
        // C7 0024
        gbc.setState(0xba67, 0xe7fe, 0x7330, 0x3dc5, 0x2663, 0x7b44, 0x0, 0x1);
        gbc.writeMem(0xba67, { 0xc7 });
        gbc.writeMem(0xe7fc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xe7fc);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba67), 0xc7);
        EXPECT(gbc.readMem(0xe7fc), 0x68);
        EXPECT(gbc.readMem(0xe7fd), 0xba);
        // C7 0026
        gbc.setState(0x2464, 0x8942, 0xb2e0, 0x398e, 0x2e87, 0x7f27, 0x0, 0x1);
        gbc.writeMem(0x2464, { 0xc7 });
        gbc.writeMem(0x8940, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x8940);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8940), 0x65);
        EXPECT(gbc.readMem(0x8941), 0x24);
        // C7 0029
        gbc.setState(0x264a, 0xc220, 0x6b50, 0x4f26, 0x22d0, 0x4bbc, 0x0, 0x0);
        gbc.writeMem(0x264a, { 0xc7 });
        gbc.writeMem(0xc21e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xc21e);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc21e), 0x4b);
        EXPECT(gbc.readMem(0xc21f), 0x26);
        // C7 002A
        gbc.setState(0x60bc, 0x828b, 0xc6d0, 0x3d0c, 0xaf64, 0xc307, 0x0, 0x0);
        gbc.writeMem(0x60bc, { 0xc7 });
        gbc.writeMem(0x8289, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x8289);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8289), 0xbd);
        EXPECT(gbc.readMem(0x828a), 0x60);
        // C7 002B
        gbc.setState(0x8bac, 0xccaa, 0xe2f0, 0x6df1, 0x6267, 0x478c, 0x0, 0x1);
        gbc.writeMem(0x8bac, { 0xc7 });
        gbc.writeMem(0xcca8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xcca8);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bac), 0xc7);
        EXPECT(gbc.readMem(0xcca8), 0xad);
        EXPECT(gbc.readMem(0xcca9), 0x8b);
        // C7 002C
        gbc.setState(0x67b2, 0xf403, 0x1960, 0x8502, 0x6482, 0xf055, 0x0, 0x1);
        gbc.writeMem(0x67b2, { 0xc7 });
        gbc.writeMem(0xf401, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xf401);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf401), 0xb3);
        EXPECT(gbc.readMem(0xf402), 0x67);
        // C7 002D
        gbc.setState(0xee14, 0x88a0, 0x8760, 0x7463, 0x9216, 0x99ec, 0x0, 0x0);
        gbc.writeMem(0x889e, { 0x0, 0x0 });
        gbc.writeMem(0xee14, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x889e);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x889e), 0x15);
        EXPECT(gbc.readMem(0x889f), 0xee);
        EXPECT(gbc.readMem(0xee14), 0xc7);
        // C7 002F
        gbc.setState(0x6575, 0xdf95, 0x1bf0, 0xe718, 0xc021, 0xf124, 0x0, 0x1);
        gbc.writeMem(0x6575, { 0xc7 });
        gbc.writeMem(0xdf93, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xdf93);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf93), 0x76);
        EXPECT(gbc.readMem(0xdf94), 0x65);
        // C7 0032
        gbc.setState(0xe182, 0xe7c9, 0xdaa0, 0x7c5b, 0xbef0, 0xd3, 0x0, 0x1);
        gbc.writeMem(0xe182, { 0xc7 });
        gbc.writeMem(0xe7c7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xe7c7);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe182), 0xc7);
        EXPECT(gbc.readMem(0xe7c7), 0x83);
        EXPECT(gbc.readMem(0xe7c8), 0xe1);
        // C7 0036
        gbc.setState(0x636d, 0xe4ad, 0x5e00, 0x179d, 0x455f, 0xecbb, 0x0, 0x0);
        gbc.writeMem(0x636d, { 0xc7 });
        gbc.writeMem(0xe4ab, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xe4ab);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4ab), 0x6e);
        EXPECT(gbc.readMem(0xe4ac), 0x63);
        // C7 0039
        gbc.setState(0x328, 0xc0c2, 0x7b80, 0x42a7, 0x6884, 0xab34, 0x0, 0x1);
        gbc.writeMem(0x328, { 0xc7 });
        gbc.writeMem(0xc0c0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xc0c0);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0c0), 0x29);
        EXPECT(gbc.readMem(0xc0c1), 0x3);
        // C7 003C
        gbc.setState(0x4dbe, 0xb5be, 0x5b20, 0x3051, 0x34f4, 0x50d0, 0x0, 0x1);
        gbc.writeMem(0x4dbe, { 0xc7 });
        gbc.writeMem(0xb5bc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xb5bc);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5bc), 0xbf);
        EXPECT(gbc.readMem(0xb5bd), 0x4d);
        // C7 003E
        gbc.setState(0x37f3, 0xf4ee, 0xcd90, 0x2ba2, 0x1742, 0x7baf, 0x1, 0x0);
        gbc.writeMem(0x37f3, { 0xc7 });
        gbc.writeMem(0xf4ec, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xf4ec);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf4ec), 0xf4);
        EXPECT(gbc.readMem(0xf4ed), 0x37);
        // C7 003F
        gbc.setState(0x83cc, 0x8b24, 0xcd50, 0x1606, 0x9ede, 0x2356, 0x0, 0x0);
        gbc.writeMem(0x83cc, { 0xc7 });
        gbc.writeMem(0x8b22, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x8b22);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83cc), 0xc7);
        EXPECT(gbc.readMem(0x8b22), 0xcd);
        EXPECT(gbc.readMem(0x8b23), 0x83);
        // C7 0044
        gbc.setState(0x28ec, 0x959c, 0xab80, 0x4d5, 0x7a29, 0xc1bb, 0x1, 0x0);
        gbc.writeMem(0x28ec, { 0xc7 });
        gbc.writeMem(0x959a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x959a);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x959a), 0xed);
        EXPECT(gbc.readMem(0x959b), 0x28);
        // C7 0049
        gbc.setState(0xa692, 0xd644, 0x7d10, 0x284, 0xba7b, 0xc536, 0x0, 0x1);
        gbc.writeMem(0xa692, { 0xc7 });
        gbc.writeMem(0xd642, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xd642);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa692), 0xc7);
        EXPECT(gbc.readMem(0xd642), 0x93);
        EXPECT(gbc.readMem(0xd643), 0xa6);
        // C7 004A
        gbc.setState(0x714d, 0xb97d, 0xaf10, 0x9cb9, 0x9b32, 0xc0a1, 0x1, 0x1);
        gbc.writeMem(0x714d, { 0xc7 });
        gbc.writeMem(0xb97b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xb97b);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb97b), 0x4e);
        EXPECT(gbc.readMem(0xb97c), 0x71);
        // C7 004C
        gbc.setState(0x74c2, 0xb8c4, 0x53f0, 0xefef, 0x2f24, 0x34c2, 0x1, 0x1);
        gbc.writeMem(0x74c2, { 0xc7 });
        gbc.writeMem(0xb8c2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xb8c2);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8c2), 0xc3);
        EXPECT(gbc.readMem(0xb8c3), 0x74);
        // C7 004D
        gbc.setState(0xecef, 0xacad, 0xd2f0, 0x7bfc, 0x7e6, 0x9b9e, 0x0, 0x0);
        gbc.writeMem(0xacab, { 0x0, 0x0 });
        gbc.writeMem(0xecef, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xacab);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacab), 0xf0);
        EXPECT(gbc.readMem(0xacac), 0xec);
        EXPECT(gbc.readMem(0xecef), 0xc7);
        // C7 004E
        gbc.setState(0x5fda, 0xb26c, 0x820, 0xf020, 0x4f8d, 0xfa6f, 0x1, 0x0);
        gbc.writeMem(0x5fda, { 0xc7 });
        gbc.writeMem(0xb26a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xb26a);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb26a), 0xdb);
        EXPECT(gbc.readMem(0xb26b), 0x5f);
        // C7 0050
        gbc.setState(0xfde, 0x9562, 0xe520, 0x37c5, 0x797f, 0xb0d6, 0x1, 0x0);
        gbc.writeMem(0xfde, { 0xc7 });
        gbc.writeMem(0x9560, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x9560);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9560), 0xdf);
        EXPECT(gbc.readMem(0x9561), 0xf);
        // C7 0052
        gbc.setState(0xaf44, 0xf6e0, 0x6e80, 0x570c, 0xa1f1, 0xc3ec, 0x1, 0x1);
        gbc.writeMem(0xaf44, { 0xc7 });
        gbc.writeMem(0xf6de, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xf6de);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf44), 0xc7);
        EXPECT(gbc.readMem(0xf6de), 0x45);
        EXPECT(gbc.readMem(0xf6df), 0xaf);
        // C7 0054
        gbc.setState(0xd24a, 0xa29c, 0x9cc0, 0x15f0, 0x9f86, 0x5afd, 0x1, 0x1);
        gbc.writeMem(0xa29a, { 0x0, 0x0 });
        gbc.writeMem(0xd24a, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xa29a);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa29a), 0x4b);
        EXPECT(gbc.readMem(0xa29b), 0xd2);
        EXPECT(gbc.readMem(0xd24a), 0xc7);
        // C7 0057
        gbc.setState(0xc715, 0xb8e8, 0xf6d0, 0xaeaf, 0xffd4, 0xc27e, 0x0, 0x0);
        gbc.writeMem(0xb8e6, { 0x0, 0x0 });
        gbc.writeMem(0xc715, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xb8e6);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8e6), 0x16);
        EXPECT(gbc.readMem(0xb8e7), 0xc7);
        EXPECT(gbc.readMem(0xc715), 0xc7);
        // C7 0059
        gbc.setState(0xc364, 0xf2df, 0xd540, 0xf071, 0x5434, 0x31d2, 0x1, 0x1);
        gbc.writeMem(0xc364, { 0xc7 });
        gbc.writeMem(0xf2dd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xf2dd);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc364), 0xc7);
        EXPECT(gbc.readMem(0xf2dd), 0x65);
        EXPECT(gbc.readMem(0xf2de), 0xc3);
        // C7 005C
        gbc.setState(0xde88, 0xfed2, 0xf920, 0xab28, 0xd11e, 0x7d9d, 0x1, 0x0);
        gbc.writeMem(0xde88, { 0xc7 });
        gbc.writeMem(0xfed0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xfed0);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde88), 0xc7);
        EXPECT(gbc.readMem(0xfed0), 0x89);
        EXPECT(gbc.readMem(0xfed1), 0xde);
        // C7 0060
        gbc.setState(0x3bc1, 0xf7b3, 0x9ec0, 0x3b4a, 0x773b, 0xd28c, 0x0, 0x0);
        gbc.writeMem(0x3bc1, { 0xc7 });
        gbc.writeMem(0xf7b1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xf7b1);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf7b1), 0xc2);
        EXPECT(gbc.readMem(0xf7b2), 0x3b);
        // C7 0062
        gbc.setState(0x980a, 0xb8a9, 0xd1c0, 0x4fff, 0x8936, 0x7662, 0x1, 0x1);
        gbc.writeMem(0x980a, { 0xc7 });
        gbc.writeMem(0xb8a7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xb8a7);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x980a), 0xc7);
        EXPECT(gbc.readMem(0xb8a7), 0xb);
        EXPECT(gbc.readMem(0xb8a8), 0x98);
        // C7 0065
        gbc.setState(0xc21c, 0xcde4, 0xac40, 0x8157, 0x819b, 0x502c, 0x1, 0x0);
        gbc.writeMem(0xc21c, { 0xc7 });
        gbc.writeMem(0xcde2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xcde2);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc21c), 0xc7);
        EXPECT(gbc.readMem(0xcde2), 0x1d);
        EXPECT(gbc.readMem(0xcde3), 0xc2);
        // C7 0066
        gbc.setState(0x5d09, 0xbf47, 0x3240, 0x1e12, 0x6250, 0xe78c, 0x1, 0x0);
        gbc.writeMem(0x5d09, { 0xc7 });
        gbc.writeMem(0xbf45, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xbf45);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf45), 0xa);
        EXPECT(gbc.readMem(0xbf46), 0x5d);
        // C7 0067
        gbc.setState(0x750b, 0xead1, 0xd950, 0xcf26, 0x750f, 0xe9ac, 0x0, 0x0);
        gbc.writeMem(0x750b, { 0xc7 });
        gbc.writeMem(0xeacf, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xeacf);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeacf), 0xc);
        EXPECT(gbc.readMem(0xead0), 0x75);
        // C7 0069
        gbc.setState(0xb9b1, 0x8324, 0xa880, 0x7f12, 0x18, 0xfec0, 0x1, 0x1);
        gbc.writeMem(0x8322, { 0x0, 0x0 });
        gbc.writeMem(0xb9b1, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x8322);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8322), 0xb2);
        EXPECT(gbc.readMem(0x8323), 0xb9);
        EXPECT(gbc.readMem(0xb9b1), 0xc7);
        // C7 006A
        gbc.setState(0xd755, 0xc796, 0x7690, 0x73aa, 0xd516, 0x95e, 0x1, 0x1);
        gbc.writeMem(0xc794, { 0x0, 0x0 });
        gbc.writeMem(0xd755, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xc794);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc794), 0x56);
        EXPECT(gbc.readMem(0xc795), 0xd7);
        EXPECT(gbc.readMem(0xd755), 0xc7);
        // C7 006B
        gbc.setState(0x842, 0xed94, 0x5050, 0xd8c3, 0xab46, 0x4a1a, 0x1, 0x0);
        gbc.writeMem(0x842, { 0xc7 });
        gbc.writeMem(0xed92, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xed92);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed92), 0x43);
        EXPECT(gbc.readMem(0xed93), 0x8);
        // C7 006D
        gbc.setState(0xa648, 0xd3c8, 0x8f20, 0xd710, 0x689f, 0x1560, 0x0, 0x1);
        gbc.writeMem(0xa648, { 0xc7 });
        gbc.writeMem(0xd3c6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xd3c6);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa648), 0xc7);
        EXPECT(gbc.readMem(0xd3c6), 0x49);
        EXPECT(gbc.readMem(0xd3c7), 0xa6);
        // C7 006E
        gbc.setState(0xa231, 0xf569, 0x2a00, 0x7ca8, 0x6bcf, 0x2cd3, 0x0, 0x1);
        gbc.writeMem(0xa231, { 0xc7 });
        gbc.writeMem(0xf567, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xf567);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa231), 0xc7);
        EXPECT(gbc.readMem(0xf567), 0x32);
        EXPECT(gbc.readMem(0xf568), 0xa2);
        // C7 006F
        gbc.setState(0x7ae6, 0x8f33, 0x8980, 0x2c7c, 0xd1d4, 0xf382, 0x1, 0x0);
        gbc.writeMem(0x7ae6, { 0xc7 });
        gbc.writeMem(0x8f31, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x8f31);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f31), 0xe7);
        EXPECT(gbc.readMem(0x8f32), 0x7a);
        // C7 0070
        gbc.setState(0x731a, 0x9500, 0x2b00, 0x841f, 0xc006, 0x1fe3, 0x0, 0x0);
        gbc.writeMem(0x731a, { 0xc7 });
        gbc.writeMem(0x94fe, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x94fe);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94fe), 0x1b);
        EXPECT(gbc.readMem(0x94ff), 0x73);
        // C7 0072
        gbc.setState(0xa100, 0xa686, 0x9790, 0x3008, 0x7fbd, 0xd1a5, 0x1, 0x1);
        gbc.writeMem(0xa100, { 0xc7 });
        gbc.writeMem(0xa684, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xa684);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa100), 0xc7);
        EXPECT(gbc.readMem(0xa684), 0x1);
        EXPECT(gbc.readMem(0xa685), 0xa1);
        // C7 0073
        gbc.setState(0x4a94, 0xf129, 0x30f0, 0x6442, 0x7cba, 0xb5a6, 0x1, 0x1);
        gbc.writeMem(0x4a94, { 0xc7 });
        gbc.writeMem(0xf127, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xf127);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf127), 0x95);
        EXPECT(gbc.readMem(0xf128), 0x4a);
        // C7 0077
        gbc.setState(0x23fc, 0xd15d, 0x13c0, 0xbf8d, 0x5729, 0x6f93, 0x1, 0x0);
        gbc.writeMem(0x23fc, { 0xc7 });
        gbc.writeMem(0xd15b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xd15b);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd15b), 0xfd);
        EXPECT(gbc.readMem(0xd15c), 0x23);
        // C7 0079
        gbc.setState(0x1ed8, 0xb472, 0xaca0, 0xf117, 0x1437, 0x63ac, 0x0, 0x0);
        gbc.writeMem(0x1ed8, { 0xc7 });
        gbc.writeMem(0xb470, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xb470);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb470), 0xd9);
        EXPECT(gbc.readMem(0xb471), 0x1e);
        // C7 007C
        gbc.setState(0x9c06, 0x826d, 0xfd00, 0xc43, 0x6090, 0x15, 0x0, 0x0);
        gbc.writeMem(0x826b, { 0x0, 0x0 });
        gbc.writeMem(0x9c06, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x826b);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x826b), 0x7);
        EXPECT(gbc.readMem(0x826c), 0x9c);
        EXPECT(gbc.readMem(0x9c06), 0xc7);
        // C7 007D
        gbc.setState(0xe0f3, 0xb215, 0x1610, 0x4fda, 0x7f56, 0xb0ad, 0x1, 0x1);
        gbc.writeMem(0xb213, { 0x0, 0x0 });
        gbc.writeMem(0xe0f3, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xb213);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb213), 0xf4);
        EXPECT(gbc.readMem(0xb214), 0xe0);
        EXPECT(gbc.readMem(0xe0f3), 0xc7);
        // C7 007F
        gbc.setState(0x9122, 0x8f9e, 0xdec0, 0x176b, 0x8504, 0x53d5, 0x0, 0x0);
        gbc.writeMem(0x8f9c, { 0x0, 0x0 });
        gbc.writeMem(0x9122, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x8f9c);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f9c), 0x23);
        EXPECT(gbc.readMem(0x8f9d), 0x91);
        EXPECT(gbc.readMem(0x9122), 0xc7);
        // C7 0082
        gbc.setState(0x4088, 0xde76, 0x8cc0, 0xc0d8, 0x679a, 0x18ee, 0x0, 0x1);
        gbc.writeMem(0x4088, { 0xc7 });
        gbc.writeMem(0xde74, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xde74);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde74), 0x89);
        EXPECT(gbc.readMem(0xde75), 0x40);
        // C7 0083
        gbc.setState(0x735a, 0x9887, 0xf920, 0x4a7b, 0xde55, 0xfb37, 0x0, 0x1);
        gbc.writeMem(0x735a, { 0xc7 });
        gbc.writeMem(0x9885, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x9885);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9885), 0x5b);
        EXPECT(gbc.readMem(0x9886), 0x73);
        // C7 0084
        gbc.setState(0xd2cd, 0xa328, 0xa040, 0xf2e4, 0xf744, 0x30c0, 0x1, 0x0);
        gbc.writeMem(0xa326, { 0x0, 0x0 });
        gbc.writeMem(0xd2cd, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xa326);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa326), 0xce);
        EXPECT(gbc.readMem(0xa327), 0xd2);
        EXPECT(gbc.readMem(0xd2cd), 0xc7);
        // C7 0087
        gbc.setState(0xe870, 0xd6d8, 0xb1d0, 0xcace, 0x82ca, 0xb9a8, 0x1, 0x1);
        gbc.writeMem(0xd6d6, { 0x0, 0x0 });
        gbc.writeMem(0xe870, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xd6d6);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6d6), 0x71);
        EXPECT(gbc.readMem(0xd6d7), 0xe8);
        EXPECT(gbc.readMem(0xe870), 0xc7);
        // C7 008A
        gbc.setState(0x9e6, 0x8e60, 0xa800, 0xb582, 0x2b0b, 0xfe53, 0x1, 0x1);
        gbc.writeMem(0x9e6, { 0xc7 });
        gbc.writeMem(0x8e5e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x8e5e);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e5e), 0xe7);
        EXPECT(gbc.readMem(0x8e5f), 0x9);
        // C7 008B
        gbc.setState(0x6c63, 0xe092, 0x5ff0, 0xf28f, 0x2514, 0xb2ca, 0x1, 0x1);
        gbc.writeMem(0x6c63, { 0xc7 });
        gbc.writeMem(0xe090, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xe090);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe090), 0x64);
        EXPECT(gbc.readMem(0xe091), 0x6c);
        // C7 008C
        gbc.setState(0x2584, 0xf064, 0x5cf0, 0x86be, 0x3667, 0xaa8f, 0x1, 0x1);
        gbc.writeMem(0x2584, { 0xc7 });
        gbc.writeMem(0xf062, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xf062);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf062), 0x85);
        EXPECT(gbc.readMem(0xf063), 0x25);
        // C7 008D
        gbc.setState(0xa8e7, 0xa5a1, 0xb70, 0x4711, 0xdbff, 0xba20, 0x0, 0x0);
        gbc.writeMem(0xa59f, { 0x0, 0x0 });
        gbc.writeMem(0xa8e7, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xa59f);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa59f), 0xe8);
        EXPECT(gbc.readMem(0xa5a0), 0xa8);
        EXPECT(gbc.readMem(0xa8e7), 0xc7);
        // C7 008E
        gbc.setState(0x49b7, 0xf54e, 0x9560, 0x2758, 0x6810, 0xcf19, 0x0, 0x1);
        gbc.writeMem(0x49b7, { 0xc7 });
        gbc.writeMem(0xf54c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xf54c);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf54c), 0xb8);
        EXPECT(gbc.readMem(0xf54d), 0x49);
        // C7 0091
        gbc.setState(0x3c8d, 0xa10f, 0x8730, 0x1839, 0xefe7, 0xb8bb, 0x1, 0x1);
        gbc.writeMem(0x3c8d, { 0xc7 });
        gbc.writeMem(0xa10d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xa10d);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa10d), 0x8e);
        EXPECT(gbc.readMem(0xa10e), 0x3c);
        // C7 0093
        gbc.setState(0xddd0, 0x8715, 0xba80, 0x8823, 0x9cdd, 0x42c5, 0x0, 0x1);
        gbc.writeMem(0x8713, { 0x0, 0x0 });
        gbc.writeMem(0xddd0, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x8713);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8713), 0xd1);
        EXPECT(gbc.readMem(0x8714), 0xdd);
        EXPECT(gbc.readMem(0xddd0), 0xc7);
        // C7 0095
        gbc.setState(0xb6d9, 0xfc2a, 0x4300, 0xa929, 0x130, 0x2098, 0x0, 0x1);
        gbc.writeMem(0xb6d9, { 0xc7 });
        gbc.writeMem(0xfc28, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xfc28);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6d9), 0xc7);
        EXPECT(gbc.readMem(0xfc28), 0xda);
        EXPECT(gbc.readMem(0xfc29), 0xb6);
        // C7 0096
        gbc.setState(0x84bf, 0x8d0d, 0x9b90, 0x69ab, 0xbcc, 0x109d, 0x1, 0x1);
        gbc.writeMem(0x84bf, { 0xc7 });
        gbc.writeMem(0x8d0b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x8d0b);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84bf), 0xc7);
        EXPECT(gbc.readMem(0x8d0b), 0xc0);
        EXPECT(gbc.readMem(0x8d0c), 0x84);
        // C7 009A
        gbc.setState(0x8daf, 0x9a25, 0x6500, 0x8e8f, 0x38b2, 0xc362, 0x1, 0x0);
        gbc.writeMem(0x8daf, { 0xc7 });
        gbc.writeMem(0x9a23, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x9a23);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8daf), 0xc7);
        EXPECT(gbc.readMem(0x9a23), 0xb0);
        EXPECT(gbc.readMem(0x9a24), 0x8d);
        // C7 00A0
        gbc.setState(0x17cd, 0xa9b7, 0x3610, 0x1652, 0x5780, 0x9d2d, 0x1, 0x0);
        gbc.writeMem(0x17cd, { 0xc7 });
        gbc.writeMem(0xa9b5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xa9b5);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9b5), 0xce);
        EXPECT(gbc.readMem(0xa9b6), 0x17);
        // C7 00A2
        gbc.setState(0xae3c, 0x949c, 0x2270, 0xa27e, 0x1173, 0x3c6f, 0x0, 0x1);
        gbc.writeMem(0x949a, { 0x0, 0x0 });
        gbc.writeMem(0xae3c, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x949a);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x949a), 0x3d);
        EXPECT(gbc.readMem(0x949b), 0xae);
        EXPECT(gbc.readMem(0xae3c), 0xc7);
        // C7 00A4
        gbc.setState(0x9b12, 0xabe2, 0x1b0, 0x6fc, 0xba34, 0x3170, 0x1, 0x0);
        gbc.writeMem(0x9b12, { 0xc7 });
        gbc.writeMem(0xabe0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xabe0);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b12), 0xc7);
        EXPECT(gbc.readMem(0xabe0), 0x13);
        EXPECT(gbc.readMem(0xabe1), 0x9b);
        // C7 00A5
        gbc.setState(0x4354, 0xd2c8, 0x7a30, 0x88ed, 0x76d4, 0x21a8, 0x1, 0x1);
        gbc.writeMem(0x4354, { 0xc7 });
        gbc.writeMem(0xd2c6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xd2c6);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2c6), 0x55);
        EXPECT(gbc.readMem(0xd2c7), 0x43);
        // C7 00A7
        gbc.setState(0x7016, 0xbd84, 0x8100, 0xaf11, 0x492, 0x5fa6, 0x1, 0x0);
        gbc.writeMem(0x7016, { 0xc7 });
        gbc.writeMem(0xbd82, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xbd82);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd82), 0x17);
        EXPECT(gbc.readMem(0xbd83), 0x70);
        // C7 00A9
        gbc.setState(0xdb69, 0xe5f7, 0x4800, 0xee16, 0xc7a2, 0xad7c, 0x1, 0x1);
        gbc.writeMem(0xdb69, { 0xc7 });
        gbc.writeMem(0xe5f5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xe5f5);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb69), 0xc7);
        EXPECT(gbc.readMem(0xe5f5), 0x6a);
        EXPECT(gbc.readMem(0xe5f6), 0xdb);
        // C7 00AB
        gbc.setState(0x6c98, 0xc57e, 0x93d0, 0xfb53, 0xdfaf, 0xcac8, 0x0, 0x0);
        gbc.writeMem(0x6c98, { 0xc7 });
        gbc.writeMem(0xc57c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xc57c);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc57c), 0x99);
        EXPECT(gbc.readMem(0xc57d), 0x6c);
        // C7 00AF
        gbc.setState(0xde08, 0xeb73, 0xbe20, 0x14c4, 0x8698, 0xfe0c, 0x1, 0x0);
        gbc.writeMem(0xde08, { 0xc7 });
        gbc.writeMem(0xeb71, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xeb71);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde08), 0xc7);
        EXPECT(gbc.readMem(0xeb71), 0x9);
        EXPECT(gbc.readMem(0xeb72), 0xde);
        // C7 00B6
        gbc.setState(0xca0b, 0xd3de, 0xd110, 0xb63b, 0x9bfb, 0xc6f6, 0x0, 0x0);
        gbc.writeMem(0xca0b, { 0xc7 });
        gbc.writeMem(0xd3dc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xd3dc);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca0b), 0xc7);
        EXPECT(gbc.readMem(0xd3dc), 0xc);
        EXPECT(gbc.readMem(0xd3dd), 0xca);
        // C7 00B8
        gbc.setState(0x761c, 0xab15, 0x4cc0, 0x89c, 0x73f5, 0xe5de, 0x0, 0x1);
        gbc.writeMem(0x761c, { 0xc7 });
        gbc.writeMem(0xab13, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xab13);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab13), 0x1d);
        EXPECT(gbc.readMem(0xab14), 0x76);
        // C7 00BB
        gbc.setState(0xab5d, 0xd1b3, 0xfd10, 0xe0a1, 0x17be, 0xfcd5, 0x1, 0x0);
        gbc.writeMem(0xab5d, { 0xc7 });
        gbc.writeMem(0xd1b1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xd1b1);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab5d), 0xc7);
        EXPECT(gbc.readMem(0xd1b1), 0x5e);
        EXPECT(gbc.readMem(0xd1b2), 0xab);
        // C7 00BD
        gbc.setState(0x5411, 0xe960, 0x2580, 0xc3a0, 0xd781, 0x4b8a, 0x1, 0x0);
        gbc.writeMem(0x5411, { 0xc7 });
        gbc.writeMem(0xe95e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xe95e);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe95e), 0x12);
        EXPECT(gbc.readMem(0xe95f), 0x54);
        // C7 00BE
        gbc.setState(0xbd5a, 0xa4ed, 0x52c0, 0x2489, 0x504, 0x9760, 0x0, 0x1);
        gbc.writeMem(0xa4eb, { 0x0, 0x0 });
        gbc.writeMem(0xbd5a, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xa4eb);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4eb), 0x5b);
        EXPECT(gbc.readMem(0xa4ec), 0xbd);
        EXPECT(gbc.readMem(0xbd5a), 0xc7);
        // C7 00C9
        gbc.setState(0x9d31, 0xe2bb, 0x3710, 0x881c, 0x2d9a, 0x3015, 0x1, 0x0);
        gbc.writeMem(0x9d31, { 0xc7 });
        gbc.writeMem(0xe2b9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xe2b9);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d31), 0xc7);
        EXPECT(gbc.readMem(0xe2b9), 0x32);
        EXPECT(gbc.readMem(0xe2ba), 0x9d);
        // C7 00CB
        gbc.setState(0x6cfc, 0xbdf4, 0xf840, 0x7f57, 0x243f, 0x5fe8, 0x0, 0x1);
        gbc.writeMem(0x6cfc, { 0xc7 });
        gbc.writeMem(0xbdf2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xbdf2);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdf2), 0xfd);
        EXPECT(gbc.readMem(0xbdf3), 0x6c);
        // C7 00CC
        gbc.setState(0xa55f, 0x9b89, 0x8600, 0xab16, 0xf444, 0xae11, 0x0, 0x0);
        gbc.writeMem(0x9b87, { 0x0, 0x0 });
        gbc.writeMem(0xa55f, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x9b87);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b87), 0x60);
        EXPECT(gbc.readMem(0x9b88), 0xa5);
        EXPECT(gbc.readMem(0xa55f), 0xc7);
        // C7 00CE
        gbc.setState(0x7cdb, 0xc012, 0x5000, 0x83d7, 0xb5f1, 0x636d, 0x0, 0x0);
        gbc.writeMem(0x7cdb, { 0xc7 });
        gbc.writeMem(0xc010, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xc010);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc010), 0xdc);
        EXPECT(gbc.readMem(0xc011), 0x7c);
        // C7 00CF
        gbc.setState(0xb9b6, 0xc0cb, 0xa6f0, 0x360e, 0xb978, 0x24b4, 0x1, 0x0);
        gbc.writeMem(0xb9b6, { 0xc7 });
        gbc.writeMem(0xc0c9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xc0c9);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9b6), 0xc7);
        EXPECT(gbc.readMem(0xc0c9), 0xb7);
        EXPECT(gbc.readMem(0xc0ca), 0xb9);
        // C7 00D1
        gbc.setState(0xeabd, 0xfe20, 0xfdb0, 0x7ad4, 0xa029, 0xca36, 0x0, 0x0);
        gbc.writeMem(0xeabd, { 0xc7 });
        gbc.writeMem(0xfe1e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xfe1e);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeabd), 0xc7);
        EXPECT(gbc.readMem(0xfe1e), 0xbe);
        EXPECT(gbc.readMem(0xfe1f), 0xea);
        // C7 00D2
        gbc.setState(0x5838, 0xb2d2, 0x1760, 0xf852, 0x4964, 0xe665, 0x1, 0x1);
        gbc.writeMem(0x5838, { 0xc7 });
        gbc.writeMem(0xb2d0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xb2d0);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2d0), 0x39);
        EXPECT(gbc.readMem(0xb2d1), 0x58);
        // C7 00D3
        gbc.setState(0x850e, 0xf3c4, 0x77a0, 0xbe72, 0xadaa, 0x2b8c, 0x1, 0x0);
        gbc.writeMem(0x850e, { 0xc7 });
        gbc.writeMem(0xf3c2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xf3c2);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x850e), 0xc7);
        EXPECT(gbc.readMem(0xf3c2), 0xf);
        EXPECT(gbc.readMem(0xf3c3), 0x85);
        // C7 00D7
        gbc.setState(0x7271, 0xacd0, 0x7a90, 0x8e3f, 0xfd85, 0x9747, 0x0, 0x1);
        gbc.writeMem(0x7271, { 0xc7 });
        gbc.writeMem(0xacce, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xacce);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacce), 0x72);
        EXPECT(gbc.readMem(0xaccf), 0x72);
        // C7 00D8
        gbc.setState(0xdae6, 0xe32f, 0xa9e0, 0x44ef, 0xe56d, 0x3813, 0x1, 0x1);
        gbc.writeMem(0xdae6, { 0xc7 });
        gbc.writeMem(0xe32d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xe32d);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdae6), 0xc7);
        EXPECT(gbc.readMem(0xe32d), 0xe7);
        EXPECT(gbc.readMem(0xe32e), 0xda);
        // C7 00D9
        gbc.setState(0xda7b, 0xdaff, 0x3c00, 0x38ee, 0x6e07, 0x7104, 0x0, 0x1);
        gbc.writeMem(0xda7b, { 0xc7 });
        gbc.writeMem(0xdafd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xdafd);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda7b), 0xc7);
        EXPECT(gbc.readMem(0xdafd), 0x7c);
        EXPECT(gbc.readMem(0xdafe), 0xda);
        // C7 00DB
        gbc.setState(0x7283, 0xb663, 0x2270, 0xa5ee, 0x969a, 0x479, 0x0, 0x1);
        gbc.writeMem(0x7283, { 0xc7 });
        gbc.writeMem(0xb661, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xb661);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb661), 0x84);
        EXPECT(gbc.readMem(0xb662), 0x72);
        // C7 00DD
        gbc.setState(0x2391, 0xb41f, 0xf2d0, 0x7406, 0x2cbd, 0x9b26, 0x1, 0x1);
        gbc.writeMem(0x2391, { 0xc7 });
        gbc.writeMem(0xb41d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xb41d);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb41d), 0x92);
        EXPECT(gbc.readMem(0xb41e), 0x23);
        // C7 00E0
        gbc.setState(0x1b97, 0x9889, 0xa4f0, 0xb73, 0x204f, 0xd0a8, 0x1, 0x1);
        gbc.writeMem(0x1b97, { 0xc7 });
        gbc.writeMem(0x9887, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x9887);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9887), 0x98);
        EXPECT(gbc.readMem(0x9888), 0x1b);
        // C7 00E2
        gbc.setState(0x8d28, 0xc724, 0xe070, 0xde59, 0x15ea, 0xe51e, 0x0, 0x0);
        gbc.writeMem(0x8d28, { 0xc7 });
        gbc.writeMem(0xc722, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xc722);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d28), 0xc7);
        EXPECT(gbc.readMem(0xc722), 0x29);
        EXPECT(gbc.readMem(0xc723), 0x8d);
        // C7 00E4
        gbc.setState(0x1909, 0x86d2, 0x66e0, 0x3220, 0x7dd4, 0x4cd2, 0x0, 0x0);
        gbc.writeMem(0x1909, { 0xc7 });
        gbc.writeMem(0x86d0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x86d0);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86d0), 0xa);
        EXPECT(gbc.readMem(0x86d1), 0x19);
        // C7 00E6
        gbc.setState(0x9f6f, 0xbeb1, 0x97f0, 0xb120, 0x7d5d, 0xfa97, 0x1, 0x1);
        gbc.writeMem(0x9f6f, { 0xc7 });
        gbc.writeMem(0xbeaf, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xbeaf);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f6f), 0xc7);
        EXPECT(gbc.readMem(0xbeaf), 0x70);
        EXPECT(gbc.readMem(0xbeb0), 0x9f);
        // C7 00E7
        gbc.setState(0x8f2c, 0xf183, 0xab40, 0xa551, 0x80f2, 0x997c, 0x1, 0x1);
        gbc.writeMem(0x8f2c, { 0xc7 });
        gbc.writeMem(0xf181, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xf181);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f2c), 0xc7);
        EXPECT(gbc.readMem(0xf181), 0x2d);
        EXPECT(gbc.readMem(0xf182), 0x8f);
        // C7 00EC
        gbc.setState(0xdc13, 0xa260, 0x5740, 0x1e3, 0x3143, 0x15f8, 0x0, 0x0);
        gbc.writeMem(0xa25e, { 0x0, 0x0 });
        gbc.writeMem(0xdc13, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xa25e);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa25e), 0x14);
        EXPECT(gbc.readMem(0xa25f), 0xdc);
        EXPECT(gbc.readMem(0xdc13), 0xc7);
        // C7 00EE
        gbc.setState(0xa768, 0xc1bc, 0x2330, 0x8f40, 0x5641, 0x6bcf, 0x1, 0x1);
        gbc.writeMem(0xa768, { 0xc7 });
        gbc.writeMem(0xc1ba, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xc1ba);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa768), 0xc7);
        EXPECT(gbc.readMem(0xc1ba), 0x69);
        EXPECT(gbc.readMem(0xc1bb), 0xa7);
        // C7 00EF
        gbc.setState(0xe14d, 0x8c51, 0x3520, 0x7963, 0xfa66, 0x8d0a, 0x0, 0x0);
        gbc.writeMem(0x8c4f, { 0x0, 0x0 });
        gbc.writeMem(0xe14d, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x8c4f);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c4f), 0x4e);
        EXPECT(gbc.readMem(0x8c50), 0xe1);
        EXPECT(gbc.readMem(0xe14d), 0xc7);
        // C7 00F1
        gbc.setState(0x111a, 0x80cc, 0x4f90, 0xccae, 0x1ca, 0x118b, 0x1, 0x0);
        gbc.writeMem(0x111a, { 0xc7 });
        gbc.writeMem(0x80ca, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x80ca);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80ca), 0x1b);
        EXPECT(gbc.readMem(0x80cb), 0x11);
        // C7 00F5
        gbc.setState(0x119a, 0xab80, 0xd610, 0xa3eb, 0xba1, 0xfbce, 0x1, 0x1);
        gbc.writeMem(0x119a, { 0xc7 });
        gbc.writeMem(0xab7e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xab7e);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab7e), 0x9b);
        EXPECT(gbc.readMem(0xab7f), 0x11);
        // C7 00F9
        gbc.setState(0xa0d1, 0xdf83, 0x2440, 0x9c47, 0x9385, 0xa804, 0x1, 0x1);
        gbc.writeMem(0xa0d1, { 0xc7 });
        gbc.writeMem(0xdf81, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xdf81);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0d1), 0xc7);
        EXPECT(gbc.readMem(0xdf81), 0xd2);
        EXPECT(gbc.readMem(0xdf82), 0xa0);
        // C7 00FA
        gbc.setState(0x910a, 0xb353, 0xefc0, 0xaad, 0xbf6b, 0xbf79, 0x1, 0x0);
        gbc.writeMem(0x910a, { 0xc7 });
        gbc.writeMem(0xb351, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xb351);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x910a), 0xc7);
        EXPECT(gbc.readMem(0xb351), 0xb);
        EXPECT(gbc.readMem(0xb352), 0x91);
        // C7 00FB
        gbc.setState(0x2162, 0x86f3, 0x5160, 0xcaeb, 0x5e51, 0x7180, 0x0, 0x0);
        gbc.writeMem(0x2162, { 0xc7 });
        gbc.writeMem(0x86f1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x86f1);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86f1), 0x63);
        EXPECT(gbc.readMem(0x86f2), 0x21);
        // C7 0100
        gbc.setState(0x31cc, 0xb03c, 0x1890, 0x8ff2, 0x133d, 0xa44a, 0x0, 0x1);
        gbc.writeMem(0x31cc, { 0xc7 });
        gbc.writeMem(0xb03a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xb03a);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb03a), 0xcd);
        EXPECT(gbc.readMem(0xb03b), 0x31);
        // C7 0102
        gbc.setState(0xb669, 0xd19b, 0x4550, 0x630, 0x2c89, 0x2589, 0x1, 0x1);
        gbc.writeMem(0xb669, { 0xc7 });
        gbc.writeMem(0xd199, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xd199);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb669), 0xc7);
        EXPECT(gbc.readMem(0xd199), 0x6a);
        EXPECT(gbc.readMem(0xd19a), 0xb6);
        // C7 0104
        gbc.setState(0x7cdb, 0xc6b0, 0x6750, 0x6707, 0x642a, 0xbba5, 0x1, 0x0);
        gbc.writeMem(0x7cdb, { 0xc7 });
        gbc.writeMem(0xc6ae, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xc6ae);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6ae), 0xdc);
        EXPECT(gbc.readMem(0xc6af), 0x7c);
        // C7 0106
        gbc.setState(0xb4b1, 0xc4f2, 0x4c00, 0x17ca, 0x86ab, 0x54f5, 0x0, 0x1);
        gbc.writeMem(0xb4b1, { 0xc7 });
        gbc.writeMem(0xc4f0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xc4f0);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4b1), 0xc7);
        EXPECT(gbc.readMem(0xc4f0), 0xb2);
        EXPECT(gbc.readMem(0xc4f1), 0xb4);
        // C7 0109
        gbc.setState(0xc971, 0xd188, 0x15d0, 0x8e44, 0x5916, 0x1c36, 0x1, 0x1);
        gbc.writeMem(0xc971, { 0xc7 });
        gbc.writeMem(0xd186, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xd186);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc971), 0xc7);
        EXPECT(gbc.readMem(0xd186), 0x72);
        EXPECT(gbc.readMem(0xd187), 0xc9);
        // C7 010C
        gbc.setState(0x42e1, 0xd714, 0x2e40, 0xdb56, 0xc797, 0x2088, 0x1, 0x0);
        gbc.writeMem(0x42e1, { 0xc7 });
        gbc.writeMem(0xd712, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xd712);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd712), 0xe2);
        EXPECT(gbc.readMem(0xd713), 0x42);
        // C7 010D
        gbc.setState(0x612f, 0xb595, 0xd430, 0x176c, 0x52a1, 0xd5ac, 0x1, 0x1);
        gbc.writeMem(0x612f, { 0xc7 });
        gbc.writeMem(0xb593, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xb593);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb593), 0x30);
        EXPECT(gbc.readMem(0xb594), 0x61);
        // C7 0111
        gbc.setState(0xcdd9, 0xaa9c, 0x1290, 0x4df1, 0x18eb, 0x2c81, 0x1, 0x1);
        gbc.writeMem(0xaa9a, { 0x0, 0x0 });
        gbc.writeMem(0xcdd9, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xaa9a);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa9a), 0xda);
        EXPECT(gbc.readMem(0xaa9b), 0xcd);
        EXPECT(gbc.readMem(0xcdd9), 0xc7);
        // C7 0113
        gbc.setState(0x30cf, 0xbf76, 0x3a60, 0x783b, 0x9354, 0xfa16, 0x1, 0x0);
        gbc.writeMem(0x30cf, { 0xc7 });
        gbc.writeMem(0xbf74, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xbf74);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf74), 0xd0);
        EXPECT(gbc.readMem(0xbf75), 0x30);
        // C7 0115
        gbc.setState(0x8263, 0xd878, 0x1860, 0x5ca7, 0xb783, 0xef70, 0x1, 0x1);
        gbc.writeMem(0x8263, { 0xc7 });
        gbc.writeMem(0xd876, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xd876);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8263), 0xc7);
        EXPECT(gbc.readMem(0xd876), 0x64);
        EXPECT(gbc.readMem(0xd877), 0x82);
        // C7 0117
        gbc.setState(0xcb38, 0xefc2, 0xb360, 0xf3ec, 0xa2a1, 0x6fa5, 0x0, 0x1);
        gbc.writeMem(0xcb38, { 0xc7 });
        gbc.writeMem(0xefc0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xefc0);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb38), 0xc7);
        EXPECT(gbc.readMem(0xefc0), 0x39);
        EXPECT(gbc.readMem(0xefc1), 0xcb);
        // C7 0118
        gbc.setState(0xb922, 0xb70a, 0x40a0, 0x47e6, 0x25fb, 0xdd07, 0x0, 0x0);
        gbc.writeMem(0xb708, { 0x0, 0x0 });
        gbc.writeMem(0xb922, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xb708);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb708), 0x23);
        EXPECT(gbc.readMem(0xb709), 0xb9);
        EXPECT(gbc.readMem(0xb922), 0xc7);
        // C7 0119
        gbc.setState(0xdebe, 0xf824, 0xc500, 0x6d64, 0xda06, 0xb4d1, 0x1, 0x0);
        gbc.writeMem(0xdebe, { 0xc7 });
        gbc.writeMem(0xf822, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xf822);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdebe), 0xc7);
        EXPECT(gbc.readMem(0xf822), 0xbf);
        EXPECT(gbc.readMem(0xf823), 0xde);
        // C7 011B
        gbc.setState(0x9c56, 0x9c12, 0xc0f0, 0x9fbc, 0xf0bc, 0x72d6, 0x1, 0x0);
        gbc.writeMem(0x9c10, { 0x0, 0x0 });
        gbc.writeMem(0x9c56, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x9c10);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c10), 0x57);
        EXPECT(gbc.readMem(0x9c11), 0x9c);
        EXPECT(gbc.readMem(0x9c56), 0xc7);
        // C7 0120
        gbc.setState(0xb558, 0xf940, 0x7910, 0xd77, 0x4375, 0xbd82, 0x0, 0x1);
        gbc.writeMem(0xb558, { 0xc7 });
        gbc.writeMem(0xf93e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xf93e);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb558), 0xc7);
        EXPECT(gbc.readMem(0xf93e), 0x59);
        EXPECT(gbc.readMem(0xf93f), 0xb5);
        // C7 0121
        gbc.setState(0xe80b, 0x8eb9, 0xd8a0, 0x7f7c, 0xc9b0, 0x5ce6, 0x0, 0x0);
        gbc.writeMem(0x8eb7, { 0x0, 0x0 });
        gbc.writeMem(0xe80b, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x8eb7);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8eb7), 0xc);
        EXPECT(gbc.readMem(0x8eb8), 0xe8);
        EXPECT(gbc.readMem(0xe80b), 0xc7);
        // C7 0122
        gbc.setState(0x8c8f, 0x870b, 0xe6f0, 0x6d51, 0x2f75, 0xe12e, 0x0, 0x0);
        gbc.writeMem(0x8709, { 0x0, 0x0 });
        gbc.writeMem(0x8c8f, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x8709);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8709), 0x90);
        EXPECT(gbc.readMem(0x870a), 0x8c);
        EXPECT(gbc.readMem(0x8c8f), 0xc7);
        // C7 0124
        gbc.setState(0x4e7c, 0xeabe, 0xa210, 0xbfdf, 0xf847, 0x5e2d, 0x1, 0x1);
        gbc.writeMem(0x4e7c, { 0xc7 });
        gbc.writeMem(0xeabc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xeabc);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeabc), 0x7d);
        EXPECT(gbc.readMem(0xeabd), 0x4e);
        // C7 0127
        gbc.setState(0x6cda, 0xe68e, 0x1230, 0xb103, 0x9457, 0x252b, 0x1, 0x1);
        gbc.writeMem(0x6cda, { 0xc7 });
        gbc.writeMem(0xe68c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xe68c);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe68c), 0xdb);
        EXPECT(gbc.readMem(0xe68d), 0x6c);
        // C7 0128
        gbc.setState(0x376c, 0xd91a, 0x1f80, 0x1bd4, 0xd612, 0xd0a5, 0x1, 0x1);
        gbc.writeMem(0x376c, { 0xc7 });
        gbc.writeMem(0xd918, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xd918);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd918), 0x6d);
        EXPECT(gbc.readMem(0xd919), 0x37);
        // C7 012A
        gbc.setState(0x8b82, 0x85b1, 0x7680, 0x2c9c, 0x59ab, 0x85c7, 0x1, 0x1);
        gbc.writeMem(0x85af, { 0x0, 0x0 });
        gbc.writeMem(0x8b82, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x85af);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85af), 0x83);
        EXPECT(gbc.readMem(0x85b0), 0x8b);
        EXPECT(gbc.readMem(0x8b82), 0xc7);
        // C7 012C
        gbc.setState(0x4e00, 0xbd63, 0x6740, 0x2102, 0x4f18, 0x6c07, 0x1, 0x0);
        gbc.writeMem(0x4e00, { 0xc7 });
        gbc.writeMem(0xbd61, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xbd61);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd61), 0x1);
        EXPECT(gbc.readMem(0xbd62), 0x4e);
        // C7 012E
        gbc.setState(0x416b, 0xb7ef, 0xc120, 0x8495, 0xae6a, 0x85f1, 0x0, 0x0);
        gbc.writeMem(0x416b, { 0xc7 });
        gbc.writeMem(0xb7ed, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xb7ed);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7ed), 0x6c);
        EXPECT(gbc.readMem(0xb7ee), 0x41);
        // C7 012F
        gbc.setState(0x4bb7, 0x8c3b, 0xbf00, 0x94ef, 0x138a, 0x56e7, 0x1, 0x0);
        gbc.writeMem(0x4bb7, { 0xc7 });
        gbc.writeMem(0x8c39, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x8c39);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c39), 0xb8);
        EXPECT(gbc.readMem(0x8c3a), 0x4b);
        // C7 0130
        gbc.setState(0x8166, 0x8348, 0xd920, 0x2e2a, 0x9527, 0x6866, 0x0, 0x1);
        gbc.writeMem(0x8166, { 0xc7 });
        gbc.writeMem(0x8346, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x8346);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8166), 0xc7);
        EXPECT(gbc.readMem(0x8346), 0x67);
        EXPECT(gbc.readMem(0x8347), 0x81);
        // C7 0132
        gbc.setState(0xce6a, 0xb16b, 0xc740, 0x601f, 0xf1db, 0x4e0a, 0x1, 0x1);
        gbc.writeMem(0xb169, { 0x0, 0x0 });
        gbc.writeMem(0xce6a, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xb169);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb169), 0x6b);
        EXPECT(gbc.readMem(0xb16a), 0xce);
        EXPECT(gbc.readMem(0xce6a), 0xc7);
        // C7 0134
        gbc.setState(0xcdb4, 0xf730, 0x7840, 0x7ebd, 0x40df, 0x51a, 0x1, 0x0);
        gbc.writeMem(0xcdb4, { 0xc7 });
        gbc.writeMem(0xf72e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xf72e);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdb4), 0xc7);
        EXPECT(gbc.readMem(0xf72e), 0xb5);
        EXPECT(gbc.readMem(0xf72f), 0xcd);
        // C7 0136
        gbc.setState(0xc76f, 0xa4bc, 0x15b0, 0x7d45, 0x9692, 0x5cad, 0x1, 0x0);
        gbc.writeMem(0xa4ba, { 0x0, 0x0 });
        gbc.writeMem(0xc76f, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xa4ba);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4ba), 0x70);
        EXPECT(gbc.readMem(0xa4bb), 0xc7);
        EXPECT(gbc.readMem(0xc76f), 0xc7);
        // C7 013A
        gbc.setState(0xcfbd, 0x9762, 0x7fc0, 0xf835, 0x5faa, 0xd8d2, 0x1, 0x1);
        gbc.writeMem(0x9760, { 0x0, 0x0 });
        gbc.writeMem(0xcfbd, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x9760);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9760), 0xbe);
        EXPECT(gbc.readMem(0x9761), 0xcf);
        EXPECT(gbc.readMem(0xcfbd), 0xc7);
        // C7 013E
        gbc.setState(0x6abb, 0xbae5, 0xb370, 0xb54d, 0x4cbf, 0xe48e, 0x0, 0x0);
        gbc.writeMem(0x6abb, { 0xc7 });
        gbc.writeMem(0xbae3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xbae3);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbae3), 0xbc);
        EXPECT(gbc.readMem(0xbae4), 0x6a);
        // C7 013F
        gbc.setState(0x69e4, 0xefbe, 0xce60, 0xc61d, 0x57e1, 0x4545, 0x1, 0x1);
        gbc.writeMem(0x69e4, { 0xc7 });
        gbc.writeMem(0xefbc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xefbc);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefbc), 0xe5);
        EXPECT(gbc.readMem(0xefbd), 0x69);
        // C7 0140
        gbc.setState(0x738d, 0xecbc, 0xef90, 0x399b, 0x9b85, 0x5901, 0x1, 0x1);
        gbc.writeMem(0x738d, { 0xc7 });
        gbc.writeMem(0xecba, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xecba);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecba), 0x8e);
        EXPECT(gbc.readMem(0xecbb), 0x73);
        // C7 0145
        gbc.setState(0x4274, 0xda3c, 0x2040, 0xcaf7, 0x95c7, 0x74f1, 0x1, 0x0);
        gbc.writeMem(0x4274, { 0xc7 });
        gbc.writeMem(0xda3a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xda3a);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda3a), 0x75);
        EXPECT(gbc.readMem(0xda3b), 0x42);
        // C7 0146
        gbc.setState(0x349a, 0xb48b, 0x2740, 0xe02f, 0x127e, 0x2aa0, 0x0, 0x1);
        gbc.writeMem(0x349a, { 0xc7 });
        gbc.writeMem(0xb489, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xb489);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb489), 0x9b);
        EXPECT(gbc.readMem(0xb48a), 0x34);
        // C7 0148
        gbc.setState(0xb2e5, 0xaed4, 0x1da0, 0xe8d1, 0x3303, 0x65f9, 0x0, 0x1);
        gbc.writeMem(0xaed2, { 0x0, 0x0 });
        gbc.writeMem(0xb2e5, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xaed2);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaed2), 0xe6);
        EXPECT(gbc.readMem(0xaed3), 0xb2);
        EXPECT(gbc.readMem(0xb2e5), 0xc7);
        // C7 014B
        gbc.setState(0xdc65, 0xbe5e, 0x2a80, 0x84fb, 0xd53, 0x8e77, 0x1, 0x0);
        gbc.writeMem(0xbe5c, { 0x0, 0x0 });
        gbc.writeMem(0xdc65, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xbe5c);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe5c), 0x66);
        EXPECT(gbc.readMem(0xbe5d), 0xdc);
        EXPECT(gbc.readMem(0xdc65), 0xc7);
        // C7 014C
        gbc.setState(0x6e4c, 0xe8eb, 0xf800, 0x741e, 0x9104, 0x9d2d, 0x1, 0x0);
        gbc.writeMem(0x6e4c, { 0xc7 });
        gbc.writeMem(0xe8e9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xe8e9);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8e9), 0x4d);
        EXPECT(gbc.readMem(0xe8ea), 0x6e);
        // C7 014F
        gbc.setState(0x46dd, 0xb32f, 0x6530, 0xc1c8, 0x1e47, 0xe4f2, 0x0, 0x1);
        gbc.writeMem(0x46dd, { 0xc7 });
        gbc.writeMem(0xb32d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xb32d);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb32d), 0xde);
        EXPECT(gbc.readMem(0xb32e), 0x46);
        // C7 0153
        gbc.setState(0x4e3a, 0xd219, 0xaa70, 0x24b5, 0x66c8, 0xb906, 0x0, 0x1);
        gbc.writeMem(0x4e3a, { 0xc7 });
        gbc.writeMem(0xd217, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xd217);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd217), 0x3b);
        EXPECT(gbc.readMem(0xd218), 0x4e);
        // C7 0155
        gbc.setState(0xccc9, 0xfe16, 0x2c40, 0xbf, 0x51c8, 0xc16f, 0x0, 0x1);
        gbc.writeMem(0xccc9, { 0xc7 });
        gbc.writeMem(0xfe14, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xfe14);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccc9), 0xc7);
        EXPECT(gbc.readMem(0xfe14), 0xca);
        EXPECT(gbc.readMem(0xfe15), 0xcc);
        // C7 0157
        gbc.setState(0xb1b4, 0xe569, 0xcbf0, 0xcced, 0x55fe, 0x5bd8, 0x1, 0x0);
        gbc.writeMem(0xb1b4, { 0xc7 });
        gbc.writeMem(0xe567, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xe567);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1b4), 0xc7);
        EXPECT(gbc.readMem(0xe567), 0xb5);
        EXPECT(gbc.readMem(0xe568), 0xb1);
        // C7 0158
        gbc.setState(0xe151, 0xdaad, 0x7100, 0x2aac, 0x1435, 0x5e4b, 0x0, 0x1);
        gbc.writeMem(0xdaab, { 0x0, 0x0 });
        gbc.writeMem(0xe151, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xdaab);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdaab), 0x52);
        EXPECT(gbc.readMem(0xdaac), 0xe1);
        EXPECT(gbc.readMem(0xe151), 0xc7);
        // C7 015A
        gbc.setState(0x7bfc, 0xd54e, 0xc5d0, 0xb983, 0x12b0, 0x96e4, 0x1, 0x1);
        gbc.writeMem(0x7bfc, { 0xc7 });
        gbc.writeMem(0xd54c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xd54c);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd54c), 0xfd);
        EXPECT(gbc.readMem(0xd54d), 0x7b);
        // C7 015C
        gbc.setState(0x5925, 0xc971, 0xd6d0, 0xaab7, 0xca6c, 0xff7d, 0x0, 0x1);
        gbc.writeMem(0x5925, { 0xc7 });
        gbc.writeMem(0xc96f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xc96f);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc96f), 0x26);
        EXPECT(gbc.readMem(0xc970), 0x59);
        // C7 0163
        gbc.setState(0xa9e1, 0xea21, 0xf9c0, 0xb1a4, 0x913d, 0xc0f2, 0x1, 0x1);
        gbc.writeMem(0xa9e1, { 0xc7 });
        gbc.writeMem(0xea1f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xea1f);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9e1), 0xc7);
        EXPECT(gbc.readMem(0xea1f), 0xe2);
        EXPECT(gbc.readMem(0xea20), 0xa9);
        // C7 0164
        gbc.setState(0x69c6, 0xfd79, 0x3ca0, 0x93, 0x6e44, 0xd351, 0x0, 0x1);
        gbc.writeMem(0x69c6, { 0xc7 });
        gbc.writeMem(0xfd77, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xfd77);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfd77), 0xc7);
        EXPECT(gbc.readMem(0xfd78), 0x69);
        // C7 0167
        gbc.setState(0xb850, 0x8ea9, 0x320, 0x3949, 0xc0b2, 0x71a0, 0x1, 0x1);
        gbc.writeMem(0x8ea7, { 0x0, 0x0 });
        gbc.writeMem(0xb850, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x8ea7);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ea7), 0x51);
        EXPECT(gbc.readMem(0x8ea8), 0xb8);
        EXPECT(gbc.readMem(0xb850), 0xc7);
        // C7 0168
        gbc.setState(0xdd37, 0xcf02, 0x4d50, 0xe4ca, 0xe14c, 0x6f9b, 0x1, 0x0);
        gbc.writeMem(0xcf00, { 0x0, 0x0 });
        gbc.writeMem(0xdd37, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xcf00);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf00), 0x38);
        EXPECT(gbc.readMem(0xcf01), 0xdd);
        EXPECT(gbc.readMem(0xdd37), 0xc7);
        // C7 0169
        gbc.setState(0x44ab, 0xf0ae, 0xea40, 0xa9e9, 0x24f4, 0x36a8, 0x0, 0x0);
        gbc.writeMem(0x44ab, { 0xc7 });
        gbc.writeMem(0xf0ac, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xf0ac);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf0ac), 0xac);
        EXPECT(gbc.readMem(0xf0ad), 0x44);
        // C7 016D
        gbc.setState(0xd7b2, 0xbbcc, 0x4a0, 0x852d, 0x2155, 0xb859, 0x1, 0x0);
        gbc.writeMem(0xbbca, { 0x0, 0x0 });
        gbc.writeMem(0xd7b2, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xbbca);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbca), 0xb3);
        EXPECT(gbc.readMem(0xbbcb), 0xd7);
        EXPECT(gbc.readMem(0xd7b2), 0xc7);
        // C7 016E
        gbc.setState(0x5131, 0xd0e0, 0xc020, 0xb4cb, 0xca9f, 0xcf84, 0x0, 0x1);
        gbc.writeMem(0x5131, { 0xc7 });
        gbc.writeMem(0xd0de, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xd0de);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0de), 0x32);
        EXPECT(gbc.readMem(0xd0df), 0x51);
        // C7 016F
        gbc.setState(0xb3e8, 0xd900, 0xbe70, 0xbea2, 0xef25, 0x5eae, 0x0, 0x0);
        gbc.writeMem(0xb3e8, { 0xc7 });
        gbc.writeMem(0xd8fe, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xd8fe);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3e8), 0xc7);
        EXPECT(gbc.readMem(0xd8fe), 0xe9);
        EXPECT(gbc.readMem(0xd8ff), 0xb3);
        // C7 0170
        gbc.setState(0xe407, 0x997d, 0x3370, 0xc05, 0x1f45, 0xb178, 0x1, 0x1);
        gbc.writeMem(0x997b, { 0x0, 0x0 });
        gbc.writeMem(0xe407, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x997b);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x997b), 0x8);
        EXPECT(gbc.readMem(0x997c), 0xe4);
        EXPECT(gbc.readMem(0xe407), 0xc7);
        // C7 0171
        gbc.setState(0x2e60, 0x8fce, 0x6d70, 0x6581, 0x419e, 0x6b39, 0x1, 0x0);
        gbc.writeMem(0x2e60, { 0xc7 });
        gbc.writeMem(0x8fcc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x8fcc);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fcc), 0x61);
        EXPECT(gbc.readMem(0x8fcd), 0x2e);
        // C7 0172
        gbc.setState(0x3e74, 0xe4e2, 0x8ca0, 0xbdf0, 0x4770, 0x6870, 0x1, 0x0);
        gbc.writeMem(0x3e74, { 0xc7 });
        gbc.writeMem(0xe4e0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xe4e0);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4e0), 0x75);
        EXPECT(gbc.readMem(0xe4e1), 0x3e);
        // C7 0175
        gbc.setState(0x4cf2, 0x8036, 0xb350, 0xe359, 0x8211, 0x9f77, 0x0, 0x1);
        gbc.writeMem(0x4cf2, { 0xc7 });
        gbc.writeMem(0x8034, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x8034);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8034), 0xf3);
        EXPECT(gbc.readMem(0x8035), 0x4c);
        // C7 0178
        gbc.setState(0x71b2, 0xbcd2, 0x4b90, 0xa7b2, 0x9b3b, 0x64f9, 0x0, 0x1);
        gbc.writeMem(0x71b2, { 0xc7 });
        gbc.writeMem(0xbcd0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xbcd0);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcd0), 0xb3);
        EXPECT(gbc.readMem(0xbcd1), 0x71);
        // C7 0179
        gbc.setState(0x8628, 0xab09, 0x200, 0xde4, 0xf4ba, 0xf08, 0x1, 0x1);
        gbc.writeMem(0x8628, { 0xc7 });
        gbc.writeMem(0xab07, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xab07);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8628), 0xc7);
        EXPECT(gbc.readMem(0xab07), 0x29);
        EXPECT(gbc.readMem(0xab08), 0x86);
        // C7 017B
        gbc.setState(0x5731, 0xb6e7, 0x75b0, 0xaafc, 0xfec6, 0x7240, 0x1, 0x0);
        gbc.writeMem(0x5731, { 0xc7 });
        gbc.writeMem(0xb6e5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xb6e5);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6e5), 0x32);
        EXPECT(gbc.readMem(0xb6e6), 0x57);
        // C7 017D
        gbc.setState(0xecb8, 0xa418, 0x53b0, 0x1af, 0x2386, 0x7ce3, 0x1, 0x0);
        gbc.writeMem(0xa416, { 0x0, 0x0 });
        gbc.writeMem(0xecb8, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xa416);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa416), 0xb9);
        EXPECT(gbc.readMem(0xa417), 0xec);
        EXPECT(gbc.readMem(0xecb8), 0xc7);
        // C7 017E
        gbc.setState(0x3bf4, 0xb779, 0x5410, 0xd415, 0x84b0, 0x2b83, 0x0, 0x1);
        gbc.writeMem(0x3bf4, { 0xc7 });
        gbc.writeMem(0xb777, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xb777);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb777), 0xf5);
        EXPECT(gbc.readMem(0xb778), 0x3b);
        // C7 0183
        gbc.setState(0x6676, 0xdf89, 0x8600, 0x7f9d, 0x984d, 0xa3b6, 0x0, 0x0);
        gbc.writeMem(0x6676, { 0xc7 });
        gbc.writeMem(0xdf87, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xdf87);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf87), 0x77);
        EXPECT(gbc.readMem(0xdf88), 0x66);
        // C7 0184
        gbc.setState(0x62c, 0xf006, 0x5a20, 0xcd9e, 0x3da6, 0xc0b1, 0x1, 0x1);
        gbc.writeMem(0x62c, { 0xc7 });
        gbc.writeMem(0xf004, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xf004);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf004), 0x2d);
        EXPECT(gbc.readMem(0xf005), 0x6);
        // C7 0187
        gbc.setState(0x4287, 0xc659, 0x30f0, 0x6a92, 0x8d84, 0xe4a1, 0x0, 0x1);
        gbc.writeMem(0x4287, { 0xc7 });
        gbc.writeMem(0xc657, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xc657);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc657), 0x88);
        EXPECT(gbc.readMem(0xc658), 0x42);
        // C7 018D
        gbc.setState(0x5870, 0xbf67, 0xb990, 0x695e, 0xbfa4, 0xacee, 0x1, 0x0);
        gbc.writeMem(0x5870, { 0xc7 });
        gbc.writeMem(0xbf65, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xbf65);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf65), 0x71);
        EXPECT(gbc.readMem(0xbf66), 0x58);
        // C7 018E
        gbc.setState(0xc9a9, 0xe01d, 0x5890, 0x62eb, 0xfcec, 0x4d2d, 0x0, 0x1);
        gbc.writeMem(0xc9a9, { 0xc7 });
        gbc.writeMem(0xe01b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xe01b);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9a9), 0xc7);
        EXPECT(gbc.readMem(0xe01b), 0xaa);
        EXPECT(gbc.readMem(0xe01c), 0xc9);
        // C7 0191
        gbc.setState(0x59c9, 0x9f2a, 0xa3c0, 0xb19, 0x51af, 0x8314, 0x1, 0x0);
        gbc.writeMem(0x59c9, { 0xc7 });
        gbc.writeMem(0x9f28, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x9f28);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f28), 0xca);
        EXPECT(gbc.readMem(0x9f29), 0x59);
        // C7 0192
        gbc.setState(0x8c96, 0xe4a2, 0x62c0, 0xd418, 0xa9d9, 0xca8d, 0x0, 0x0);
        gbc.writeMem(0x8c96, { 0xc7 });
        gbc.writeMem(0xe4a0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xe4a0);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c96), 0xc7);
        EXPECT(gbc.readMem(0xe4a0), 0x97);
        EXPECT(gbc.readMem(0xe4a1), 0x8c);
        // C7 0195
        gbc.setState(0x7e87, 0x9aa6, 0x11c0, 0x2d4c, 0xee5b, 0xa329, 0x0, 0x1);
        gbc.writeMem(0x7e87, { 0xc7 });
        gbc.writeMem(0x9aa4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x9aa4);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9aa4), 0x88);
        EXPECT(gbc.readMem(0x9aa5), 0x7e);
        // C7 0196
        gbc.setState(0xe308, 0xe552, 0x9830, 0x1c9d, 0xe6f7, 0xc75d, 0x1, 0x1);
        gbc.writeMem(0xe308, { 0xc7 });
        gbc.writeMem(0xe550, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xe550);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe308), 0xc7);
        EXPECT(gbc.readMem(0xe550), 0x9);
        EXPECT(gbc.readMem(0xe551), 0xe3);
        // C7 019C
        gbc.setState(0xbc6f, 0x8d1e, 0x1340, 0xcdb9, 0x9ae2, 0x2d5b, 0x1, 0x0);
        gbc.writeMem(0x8d1c, { 0x0, 0x0 });
        gbc.writeMem(0xbc6f, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x8d1c);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d1c), 0x70);
        EXPECT(gbc.readMem(0x8d1d), 0xbc);
        EXPECT(gbc.readMem(0xbc6f), 0xc7);
        // C7 01A1
        gbc.setState(0x6157, 0x8e2f, 0xae40, 0x9864, 0x2a01, 0x36cc, 0x1, 0x0);
        gbc.writeMem(0x6157, { 0xc7 });
        gbc.writeMem(0x8e2d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x8e2d);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e2d), 0x58);
        EXPECT(gbc.readMem(0x8e2e), 0x61);
        // C7 01A2
        gbc.setState(0x23ce, 0xb553, 0x7240, 0x8845, 0xb802, 0x35fd, 0x1, 0x0);
        gbc.writeMem(0x23ce, { 0xc7 });
        gbc.writeMem(0xb551, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xb551);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb551), 0xcf);
        EXPECT(gbc.readMem(0xb552), 0x23);
        // C7 01A4
        gbc.setState(0xe117, 0x86e1, 0x9a0, 0xa824, 0x72fe, 0xc874, 0x0, 0x1);
        gbc.writeMem(0x86df, { 0x0, 0x0 });
        gbc.writeMem(0xe117, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x86df);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86df), 0x18);
        EXPECT(gbc.readMem(0x86e0), 0xe1);
        EXPECT(gbc.readMem(0xe117), 0xc7);
        // C7 01A5
        gbc.setState(0xeea5, 0xa3b1, 0xbc30, 0xef1e, 0x912e, 0xb5e5, 0x0, 0x1);
        gbc.writeMem(0xa3af, { 0x0, 0x0 });
        gbc.writeMem(0xeea5, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xa3af);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3af), 0xa6);
        EXPECT(gbc.readMem(0xa3b0), 0xee);
        EXPECT(gbc.readMem(0xeea5), 0xc7);
        // C7 01A8
        gbc.setState(0xa792, 0x92ef, 0x1940, 0x6ecc, 0xa0cd, 0xb8a5, 0x0, 0x1);
        gbc.writeMem(0x92ed, { 0x0, 0x0 });
        gbc.writeMem(0xa792, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x92ed);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92ed), 0x93);
        EXPECT(gbc.readMem(0x92ee), 0xa7);
        EXPECT(gbc.readMem(0xa792), 0xc7);
        // C7 01AA
        gbc.setState(0x1a96, 0x88a7, 0x2e60, 0x3a92, 0xeb11, 0xb03a, 0x0, 0x1);
        gbc.writeMem(0x1a96, { 0xc7 });
        gbc.writeMem(0x88a5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x88a5);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88a5), 0x97);
        EXPECT(gbc.readMem(0x88a6), 0x1a);
        // C7 01AE
        gbc.setState(0x1108, 0x8a92, 0x1a00, 0x89b9, 0xa735, 0x5250, 0x0, 0x0);
        gbc.writeMem(0x1108, { 0xc7 });
        gbc.writeMem(0x8a90, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x8a90);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a90), 0x9);
        EXPECT(gbc.readMem(0x8a91), 0x11);
        // C7 01AF
        gbc.setState(0xae16, 0xa15f, 0xcbe0, 0x453c, 0x994a, 0x8f38, 0x1, 0x0);
        gbc.writeMem(0xa15d, { 0x0, 0x0 });
        gbc.writeMem(0xae16, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xa15d);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa15d), 0x17);
        EXPECT(gbc.readMem(0xa15e), 0xae);
        EXPECT(gbc.readMem(0xae16), 0xc7);
        // C7 01B1
        gbc.setState(0x261c, 0x9e92, 0xea50, 0xdc3c, 0x2b41, 0x7fb3, 0x0, 0x0);
        gbc.writeMem(0x261c, { 0xc7 });
        gbc.writeMem(0x9e90, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x9e90);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e90), 0x1d);
        EXPECT(gbc.readMem(0x9e91), 0x26);
        // C7 01B4
        gbc.setState(0xd96d, 0xa107, 0x3650, 0xe8c, 0x7a3a, 0xb36b, 0x1, 0x1);
        gbc.writeMem(0xa105, { 0x0, 0x0 });
        gbc.writeMem(0xd96d, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xa105);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa105), 0x6e);
        EXPECT(gbc.readMem(0xa106), 0xd9);
        EXPECT(gbc.readMem(0xd96d), 0xc7);
        // C7 01B8
        gbc.setState(0x739c, 0x97ea, 0x1c40, 0x9242, 0x1578, 0x757c, 0x0, 0x0);
        gbc.writeMem(0x739c, { 0xc7 });
        gbc.writeMem(0x97e8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x97e8);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97e8), 0x9d);
        EXPECT(gbc.readMem(0x97e9), 0x73);
        // C7 01BA
        gbc.setState(0x6ece, 0xd752, 0x76d0, 0xcb0a, 0x70b3, 0x6e8c, 0x0, 0x1);
        gbc.writeMem(0x6ece, { 0xc7 });
        gbc.writeMem(0xd750, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xd750);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd750), 0xcf);
        EXPECT(gbc.readMem(0xd751), 0x6e);
        // C7 01BC
        gbc.setState(0x7150, 0xc1a0, 0xd580, 0xb2cf, 0x57a1, 0xe2c3, 0x0, 0x1);
        gbc.writeMem(0x7150, { 0xc7 });
        gbc.writeMem(0xc19e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xc19e);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc19e), 0x51);
        EXPECT(gbc.readMem(0xc19f), 0x71);
        // C7 01BD
        gbc.setState(0x4f91, 0xad42, 0x46f0, 0x1549, 0xd908, 0x7cdf, 0x1, 0x1);
        gbc.writeMem(0x4f91, { 0xc7 });
        gbc.writeMem(0xad40, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xad40);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad40), 0x92);
        EXPECT(gbc.readMem(0xad41), 0x4f);
        // C7 01BF
        gbc.setState(0x2c74, 0xf156, 0x4170, 0x3379, 0x345c, 0x1793, 0x1, 0x1);
        gbc.writeMem(0x2c74, { 0xc7 });
        gbc.writeMem(0xf154, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xf154);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf154), 0x75);
        EXPECT(gbc.readMem(0xf155), 0x2c);
        // C7 01C0
        gbc.setState(0x177d, 0xf6d4, 0x6da0, 0x376, 0xb146, 0xde96, 0x0, 0x0);
        gbc.writeMem(0x177d, { 0xc7 });
        gbc.writeMem(0xf6d2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xf6d2);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf6d2), 0x7e);
        EXPECT(gbc.readMem(0xf6d3), 0x17);
        // C7 01C1
        gbc.setState(0x4b50, 0xa1f4, 0x77b0, 0x2da5, 0xe745, 0x458b, 0x0, 0x1);
        gbc.writeMem(0x4b50, { 0xc7 });
        gbc.writeMem(0xa1f2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xa1f2);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1f2), 0x51);
        EXPECT(gbc.readMem(0xa1f3), 0x4b);
        // C7 01C3
        gbc.setState(0xd5bc, 0xdd7b, 0xf1a0, 0x610d, 0x471a, 0xedce, 0x0, 0x1);
        gbc.writeMem(0xd5bc, { 0xc7 });
        gbc.writeMem(0xdd79, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xdd79);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5bc), 0xc7);
        EXPECT(gbc.readMem(0xdd79), 0xbd);
        EXPECT(gbc.readMem(0xdd7a), 0xd5);
        // C7 01C4
        gbc.setState(0x466e, 0x953a, 0xf160, 0xd2a9, 0xf25e, 0x815a, 0x1, 0x1);
        gbc.writeMem(0x466e, { 0xc7 });
        gbc.writeMem(0x9538, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x9538);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9538), 0x6f);
        EXPECT(gbc.readMem(0x9539), 0x46);
        // C7 01C5
        gbc.setState(0x27b8, 0xfa9a, 0x4d60, 0x16d8, 0x5873, 0x147d, 0x1, 0x1);
        gbc.writeMem(0x27b8, { 0xc7 });
        gbc.writeMem(0xfa98, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xfa98);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfa98), 0xb9);
        EXPECT(gbc.readMem(0xfa99), 0x27);
        // C7 01C8
        gbc.setState(0xb87, 0xaf40, 0x5ad0, 0xb902, 0xa14a, 0x93b7, 0x0, 0x1);
        gbc.writeMem(0xb87, { 0xc7 });
        gbc.writeMem(0xaf3e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xaf3e);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf3e), 0x88);
        EXPECT(gbc.readMem(0xaf3f), 0xb);
        // C7 01CA
        gbc.setState(0xee84, 0xae7d, 0xf120, 0x1f90, 0x9147, 0x9c88, 0x0, 0x1);
        gbc.writeMem(0xae7b, { 0x0, 0x0 });
        gbc.writeMem(0xee84, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xae7b);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae7b), 0x85);
        EXPECT(gbc.readMem(0xae7c), 0xee);
        EXPECT(gbc.readMem(0xee84), 0xc7);
        // C7 01CB
        gbc.setState(0x3bd8, 0x9eaf, 0xf960, 0xb87c, 0x5f79, 0xbca9, 0x0, 0x1);
        gbc.writeMem(0x3bd8, { 0xc7 });
        gbc.writeMem(0x9ead, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x9ead);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ead), 0xd9);
        EXPECT(gbc.readMem(0x9eae), 0x3b);
        // C7 01CC
        gbc.setState(0x2fb2, 0xcc00, 0x8fe0, 0x6b03, 0xbe9b, 0xbbaf, 0x1, 0x1);
        gbc.writeMem(0x2fb2, { 0xc7 });
        gbc.writeMem(0xcbfe, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xcbfe);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbfe), 0xb3);
        EXPECT(gbc.readMem(0xcbff), 0x2f);
        // C7 01CF
        gbc.setState(0xa826, 0xa56a, 0xfb90, 0x2370, 0x1f1b, 0x6e01, 0x1, 0x1);
        gbc.writeMem(0xa568, { 0x0, 0x0 });
        gbc.writeMem(0xa826, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xa568);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa568), 0x27);
        EXPECT(gbc.readMem(0xa569), 0xa8);
        EXPECT(gbc.readMem(0xa826), 0xc7);
        // C7 01D2
        gbc.setState(0x9624, 0xbcf9, 0x37d0, 0x87c9, 0x1ee5, 0x296a, 0x0, 0x0);
        gbc.writeMem(0x9624, { 0xc7 });
        gbc.writeMem(0xbcf7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xbcf7);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9624), 0xc7);
        EXPECT(gbc.readMem(0xbcf7), 0x25);
        EXPECT(gbc.readMem(0xbcf8), 0x96);
        // C7 01D4
        gbc.setState(0x428, 0x851a, 0x1ff0, 0x8bad, 0xacf5, 0x6d85, 0x1, 0x0);
        gbc.writeMem(0x428, { 0xc7 });
        gbc.writeMem(0x8518, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x8518);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8518), 0x29);
        EXPECT(gbc.readMem(0x8519), 0x4);
        // C7 01D5
        gbc.setState(0xb522, 0xac85, 0x7f70, 0xdb86, 0xc1ef, 0x3b0b, 0x1, 0x1);
        gbc.writeMem(0xac83, { 0x0, 0x0 });
        gbc.writeMem(0xb522, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xac83);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac83), 0x23);
        EXPECT(gbc.readMem(0xac84), 0xb5);
        EXPECT(gbc.readMem(0xb522), 0xc7);
        // C7 01D6
        gbc.setState(0xdba6, 0xbead, 0xf900, 0x4702, 0x92db, 0x4d12, 0x1, 0x0);
        gbc.writeMem(0xbeab, { 0x0, 0x0 });
        gbc.writeMem(0xdba6, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xbeab);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbeab), 0xa7);
        EXPECT(gbc.readMem(0xbeac), 0xdb);
        EXPECT(gbc.readMem(0xdba6), 0xc7);
        // C7 01DA
        gbc.setState(0xc91f, 0xfa20, 0xbde0, 0x9641, 0xa1a2, 0x5cdd, 0x0, 0x1);
        gbc.writeMem(0xc91f, { 0xc7 });
        gbc.writeMem(0xfa1e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xfa1e);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc91f), 0xc7);
        EXPECT(gbc.readMem(0xfa1e), 0x20);
        EXPECT(gbc.readMem(0xfa1f), 0xc9);
        // C7 01DE
        gbc.setState(0xbbc4, 0x8bf5, 0x2c80, 0x7fe1, 0xc755, 0x124f, 0x0, 0x0);
        gbc.writeMem(0x8bf3, { 0x0, 0x0 });
        gbc.writeMem(0xbbc4, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x8bf3);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bf3), 0xc5);
        EXPECT(gbc.readMem(0x8bf4), 0xbb);
        EXPECT(gbc.readMem(0xbbc4), 0xc7);
        // C7 01E1
        gbc.setState(0x561f, 0x9048, 0x290, 0x6a3, 0x816c, 0x4a78, 0x0, 0x1);
        gbc.writeMem(0x561f, { 0xc7 });
        gbc.writeMem(0x9046, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x9046);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9046), 0x20);
        EXPECT(gbc.readMem(0x9047), 0x56);
        // C7 01E2
        gbc.setState(0xd6bc, 0xefb6, 0x7150, 0xf312, 0x787a, 0xb1b8, 0x0, 0x0);
        gbc.writeMem(0xd6bc, { 0xc7 });
        gbc.writeMem(0xefb4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xefb4);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6bc), 0xc7);
        EXPECT(gbc.readMem(0xefb4), 0xbd);
        EXPECT(gbc.readMem(0xefb5), 0xd6);
        // C7 01E6
        gbc.setState(0x52f4, 0xc656, 0x2960, 0xedad, 0x1b32, 0xddec, 0x0, 0x1);
        gbc.writeMem(0x52f4, { 0xc7 });
        gbc.writeMem(0xc654, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xc654);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc654), 0xf5);
        EXPECT(gbc.readMem(0xc655), 0x52);
        // C7 01ED
        gbc.setState(0xd47, 0x923a, 0x70c0, 0x3a5a, 0x21fa, 0x6041, 0x0, 0x0);
        gbc.writeMem(0xd47, { 0xc7 });
        gbc.writeMem(0x9238, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x9238);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9238), 0x48);
        EXPECT(gbc.readMem(0x9239), 0xd);
        // C7 01EF
        gbc.setState(0xcc66, 0xf84a, 0xea0, 0xce3, 0x3593, 0x516c, 0x1, 0x0);
        gbc.writeMem(0xcc66, { 0xc7 });
        gbc.writeMem(0xf848, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xf848);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc66), 0xc7);
        EXPECT(gbc.readMem(0xf848), 0x67);
        EXPECT(gbc.readMem(0xf849), 0xcc);
        // C7 01F0
        gbc.setState(0x94e8, 0x9dc7, 0x8210, 0xc8bd, 0x395f, 0xd743, 0x1, 0x1);
        gbc.writeMem(0x94e8, { 0xc7 });
        gbc.writeMem(0x9dc5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x9dc5);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94e8), 0xc7);
        EXPECT(gbc.readMem(0x9dc5), 0xe9);
        EXPECT(gbc.readMem(0x9dc6), 0x94);
        // C7 01F2
        gbc.setState(0xdc8e, 0x8e1e, 0xa880, 0x792e, 0xd077, 0x7069, 0x0, 0x1);
        gbc.writeMem(0x8e1c, { 0x0, 0x0 });
        gbc.writeMem(0xdc8e, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x8e1c);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e1c), 0x8f);
        EXPECT(gbc.readMem(0x8e1d), 0xdc);
        EXPECT(gbc.readMem(0xdc8e), 0xc7);
        // C7 01F3
        gbc.setState(0xbff9, 0xb99a, 0xd670, 0xaeee, 0xdce1, 0x6272, 0x1, 0x1);
        gbc.writeMem(0xb998, { 0x0, 0x0 });
        gbc.writeMem(0xbff9, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xb998);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb998), 0xfa);
        EXPECT(gbc.readMem(0xb999), 0xbf);
        EXPECT(gbc.readMem(0xbff9), 0xc7);
        // C7 01F5
        gbc.setState(0x91e3, 0xdcac, 0xc660, 0x4138, 0x99cf, 0x5397, 0x1, 0x0);
        gbc.writeMem(0x91e3, { 0xc7 });
        gbc.writeMem(0xdcaa, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xdcaa);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91e3), 0xc7);
        EXPECT(gbc.readMem(0xdcaa), 0xe4);
        EXPECT(gbc.readMem(0xdcab), 0x91);
        // C7 01F6
        gbc.setState(0x42ec, 0x87e7, 0x20b0, 0x7052, 0xb1ac, 0x7e27, 0x0, 0x1);
        gbc.writeMem(0x42ec, { 0xc7 });
        gbc.writeMem(0x87e5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x87e5);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87e5), 0xed);
        EXPECT(gbc.readMem(0x87e6), 0x42);
        // C7 01F7
        gbc.setState(0x17a5, 0xb6f2, 0xd8f0, 0x5ae, 0x6ebc, 0x4ad6, 0x1, 0x1);
        gbc.writeMem(0x17a5, { 0xc7 });
        gbc.writeMem(0xb6f0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xb6f0);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6f0), 0xa6);
        EXPECT(gbc.readMem(0xb6f1), 0x17);
        // C7 01FC
        gbc.setState(0x2c18, 0xf27c, 0x22f0, 0x3036, 0x192, 0xf484, 0x0, 0x1);
        gbc.writeMem(0x2c18, { 0xc7 });
        gbc.writeMem(0xf27a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xf27a);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf27a), 0x19);
        EXPECT(gbc.readMem(0xf27b), 0x2c);
        // C7 01FD
        gbc.setState(0x6740, 0xdee5, 0xa9f0, 0x9082, 0x76f4, 0x35a6, 0x1, 0x0);
        gbc.writeMem(0x6740, { 0xc7 });
        gbc.writeMem(0xdee3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xdee3);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdee3), 0x41);
        EXPECT(gbc.readMem(0xdee4), 0x67);
        // C7 01FF
        gbc.setState(0xbe69, 0x85b5, 0xfee0, 0x37b1, 0xa6ab, 0x2663, 0x0, 0x0);
        gbc.writeMem(0x85b3, { 0x0, 0x0 });
        gbc.writeMem(0xbe69, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x85b3);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85b3), 0x6a);
        EXPECT(gbc.readMem(0x85b4), 0xbe);
        EXPECT(gbc.readMem(0xbe69), 0xc7);
        // C7 0202
        gbc.setState(0x9612, 0x90ea, 0x55b0, 0x47a3, 0x5e97, 0x161c, 0x0, 0x0);
        gbc.writeMem(0x90e8, { 0x0, 0x0 });
        gbc.writeMem(0x9612, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x90e8);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90e8), 0x13);
        EXPECT(gbc.readMem(0x90e9), 0x96);
        EXPECT(gbc.readMem(0x9612), 0xc7);
        // C7 0203
        gbc.setState(0xa8fe, 0xd731, 0x3f00, 0x9d8f, 0xbfae, 0x8b6e, 0x0, 0x0);
        gbc.writeMem(0xa8fe, { 0xc7 });
        gbc.writeMem(0xd72f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xd72f);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8fe), 0xc7);
        EXPECT(gbc.readMem(0xd72f), 0xff);
        EXPECT(gbc.readMem(0xd730), 0xa8);
        // C7 0206
        gbc.setState(0x14a0, 0xcf5d, 0x7ff0, 0x1c9e, 0xee33, 0xac41, 0x0, 0x1);
        gbc.writeMem(0x14a0, { 0xc7 });
        gbc.writeMem(0xcf5b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xcf5b);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf5b), 0xa1);
        EXPECT(gbc.readMem(0xcf5c), 0x14);
        // C7 0207
        gbc.setState(0x215e, 0xfb88, 0x5a90, 0xb93e, 0xf2b4, 0x303b, 0x0, 0x1);
        gbc.writeMem(0x215e, { 0xc7 });
        gbc.writeMem(0xfb86, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xfb86);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfb86), 0x5f);
        EXPECT(gbc.readMem(0xfb87), 0x21);
        // C7 020C
        gbc.setState(0xab5b, 0x9bbf, 0x62d0, 0x775c, 0x9b79, 0x1beb, 0x1, 0x1);
        gbc.writeMem(0x9bbd, { 0x0, 0x0 });
        gbc.writeMem(0xab5b, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x9bbd);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bbd), 0x5c);
        EXPECT(gbc.readMem(0x9bbe), 0xab);
        EXPECT(gbc.readMem(0xab5b), 0xc7);
        // C7 0210
        gbc.setState(0xb6e2, 0x84f9, 0x6ae0, 0x5321, 0xa5cd, 0xdfa3, 0x0, 0x0);
        gbc.writeMem(0x84f7, { 0x0, 0x0 });
        gbc.writeMem(0xb6e2, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x84f7);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84f7), 0xe3);
        EXPECT(gbc.readMem(0x84f8), 0xb6);
        EXPECT(gbc.readMem(0xb6e2), 0xc7);
        // C7 0211
        gbc.setState(0x37f1, 0xd7e0, 0x2780, 0x8edd, 0xbf3f, 0x4230, 0x1, 0x1);
        gbc.writeMem(0x37f1, { 0xc7 });
        gbc.writeMem(0xd7de, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xd7de);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7de), 0xf2);
        EXPECT(gbc.readMem(0xd7df), 0x37);
        // C7 0213
        gbc.setState(0xb1c7, 0xfe5b, 0x87b0, 0x7fd8, 0xa428, 0x96df, 0x0, 0x0);
        gbc.writeMem(0xb1c7, { 0xc7 });
        gbc.writeMem(0xfe59, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xfe59);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1c7), 0xc7);
        EXPECT(gbc.readMem(0xfe59), 0xc8);
        EXPECT(gbc.readMem(0xfe5a), 0xb1);
        // C7 0215
        gbc.setState(0xcb07, 0xb079, 0xa7f0, 0x7629, 0x85cf, 0x4b60, 0x0, 0x1);
        gbc.writeMem(0xb077, { 0x0, 0x0 });
        gbc.writeMem(0xcb07, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xb077);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb077), 0x8);
        EXPECT(gbc.readMem(0xb078), 0xcb);
        EXPECT(gbc.readMem(0xcb07), 0xc7);
        // C7 0216
        gbc.setState(0x60ea, 0xb95f, 0x8110, 0x906d, 0x9aa, 0xf9bc, 0x1, 0x0);
        gbc.writeMem(0x60ea, { 0xc7 });
        gbc.writeMem(0xb95d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xb95d);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb95d), 0xeb);
        EXPECT(gbc.readMem(0xb95e), 0x60);
        // C7 0219
        gbc.setState(0xce77, 0x816e, 0x9b40, 0x25de, 0x36c0, 0x9fcc, 0x0, 0x1);
        gbc.writeMem(0x816c, { 0x0, 0x0 });
        gbc.writeMem(0xce77, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x816c);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x816c), 0x78);
        EXPECT(gbc.readMem(0x816d), 0xce);
        EXPECT(gbc.readMem(0xce77), 0xc7);
        // C7 021C
        gbc.setState(0xda66, 0xa73e, 0xab60, 0xae6d, 0x41aa, 0x7f17, 0x1, 0x1);
        gbc.writeMem(0xa73c, { 0x0, 0x0 });
        gbc.writeMem(0xda66, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xa73c);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa73c), 0x67);
        EXPECT(gbc.readMem(0xa73d), 0xda);
        EXPECT(gbc.readMem(0xda66), 0xc7);
        // C7 0220
        gbc.setState(0xa2f5, 0x98b0, 0x2e20, 0xf508, 0x7c44, 0xe7cd, 0x0, 0x1);
        gbc.writeMem(0x98ae, { 0x0, 0x0 });
        gbc.writeMem(0xa2f5, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x98ae);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98ae), 0xf6);
        EXPECT(gbc.readMem(0x98af), 0xa2);
        EXPECT(gbc.readMem(0xa2f5), 0xc7);
        // C7 0222
        gbc.setState(0xdb65, 0xf48d, 0xa9a0, 0xe4f6, 0xb1d9, 0xfde5, 0x1, 0x0);
        gbc.writeMem(0xdb65, { 0xc7 });
        gbc.writeMem(0xf48b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xf48b);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb65), 0xc7);
        EXPECT(gbc.readMem(0xf48b), 0x66);
        EXPECT(gbc.readMem(0xf48c), 0xdb);
        // C7 0223
        gbc.setState(0xcb38, 0xc69e, 0x4ed0, 0x949, 0x5f32, 0x3253, 0x0, 0x1);
        gbc.writeMem(0xc69c, { 0x0, 0x0 });
        gbc.writeMem(0xcb38, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xc69c);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc69c), 0x39);
        EXPECT(gbc.readMem(0xc69d), 0xcb);
        EXPECT(gbc.readMem(0xcb38), 0xc7);
        // C7 0224
        gbc.setState(0xbb5c, 0xafe9, 0xcdb0, 0x2459, 0x271e, 0xc405, 0x1, 0x1);
        gbc.writeMem(0xafe7, { 0x0, 0x0 });
        gbc.writeMem(0xbb5c, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xafe7);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafe7), 0x5d);
        EXPECT(gbc.readMem(0xafe8), 0xbb);
        EXPECT(gbc.readMem(0xbb5c), 0xc7);
        // C7 0226
        gbc.setState(0x8b60, 0xdb2e, 0x33e0, 0xf524, 0x40e9, 0x3389, 0x1, 0x1);
        gbc.writeMem(0x8b60, { 0xc7 });
        gbc.writeMem(0xdb2c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xdb2c);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b60), 0xc7);
        EXPECT(gbc.readMem(0xdb2c), 0x61);
        EXPECT(gbc.readMem(0xdb2d), 0x8b);
        // C7 0227
        gbc.setState(0x7347, 0xe47c, 0xa000, 0xd8a4, 0x92ac, 0x1456, 0x0, 0x1);
        gbc.writeMem(0x7347, { 0xc7 });
        gbc.writeMem(0xe47a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xe47a);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe47a), 0x48);
        EXPECT(gbc.readMem(0xe47b), 0x73);
        // C7 0229
        gbc.setState(0x7871, 0x803e, 0xd5e0, 0x46cc, 0xb41f, 0x2c68, 0x0, 0x1);
        gbc.writeMem(0x7871, { 0xc7 });
        gbc.writeMem(0x803c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x803c);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x803c), 0x72);
        EXPECT(gbc.readMem(0x803d), 0x78);
        // C7 022A
        gbc.setState(0xec7e, 0xab24, 0x21f0, 0xd285, 0x1f4d, 0xa234, 0x0, 0x1);
        gbc.writeMem(0xab22, { 0x0, 0x0 });
        gbc.writeMem(0xec7e, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xab22);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab22), 0x7f);
        EXPECT(gbc.readMem(0xab23), 0xec);
        EXPECT(gbc.readMem(0xec7e), 0xc7);
        // C7 022B
        gbc.setState(0xaf41, 0xeffd, 0x4420, 0x72c0, 0x884f, 0x8c7f, 0x1, 0x1);
        gbc.writeMem(0xaf41, { 0xc7 });
        gbc.writeMem(0xeffb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xeffb);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf41), 0xc7);
        EXPECT(gbc.readMem(0xeffb), 0x42);
        EXPECT(gbc.readMem(0xeffc), 0xaf);
        // C7 0234
        gbc.setState(0xd236, 0xfec9, 0xabc0, 0x494c, 0xde5a, 0x6a4a, 0x0, 0x0);
        gbc.writeMem(0xd236, { 0xc7 });
        gbc.writeMem(0xfec7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xfec7);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd236), 0xc7);
        EXPECT(gbc.readMem(0xfec7), 0x37);
        EXPECT(gbc.readMem(0xfec8), 0xd2);
        // C7 0236
        gbc.setState(0x9d3f, 0xddb2, 0xa090, 0xc210, 0x8a91, 0x3805, 0x1, 0x1);
        gbc.writeMem(0x9d3f, { 0xc7 });
        gbc.writeMem(0xddb0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xddb0);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d3f), 0xc7);
        EXPECT(gbc.readMem(0xddb0), 0x40);
        EXPECT(gbc.readMem(0xddb1), 0x9d);
        // C7 0237
        gbc.setState(0x617d, 0xb2a8, 0x1290, 0x8e8b, 0x7f6f, 0xcfc2, 0x0, 0x1);
        gbc.writeMem(0x617d, { 0xc7 });
        gbc.writeMem(0xb2a6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xb2a6);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2a6), 0x7e);
        EXPECT(gbc.readMem(0xb2a7), 0x61);
        // C7 023A
        gbc.setState(0xc133, 0xac24, 0x2280, 0xa485, 0x1f8f, 0xb7eb, 0x0, 0x0);
        gbc.writeMem(0xac22, { 0x0, 0x0 });
        gbc.writeMem(0xc133, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xac22);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac22), 0x34);
        EXPECT(gbc.readMem(0xac23), 0xc1);
        EXPECT(gbc.readMem(0xc133), 0xc7);
        // C7 023E
        gbc.setState(0x32a6, 0xf065, 0x6a90, 0x2442, 0x5e4f, 0xb0f4, 0x1, 0x1);
        gbc.writeMem(0x32a6, { 0xc7 });
        gbc.writeMem(0xf063, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xf063);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf063), 0xa7);
        EXPECT(gbc.readMem(0xf064), 0x32);
        // C7 0243
        gbc.setState(0x1613, 0xd60c, 0xbdb0, 0x48d6, 0x8305, 0xf155, 0x1, 0x0);
        gbc.writeMem(0x1613, { 0xc7 });
        gbc.writeMem(0xd60a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xd60a);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd60a), 0x14);
        EXPECT(gbc.readMem(0xd60b), 0x16);
        // C7 0249
        gbc.setState(0x8515, 0xcbce, 0xd0, 0x1d1e, 0x6dd7, 0x2197, 0x0, 0x0);
        gbc.writeMem(0x8515, { 0xc7 });
        gbc.writeMem(0xcbcc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xcbcc);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8515), 0xc7);
        EXPECT(gbc.readMem(0xcbcc), 0x16);
        EXPECT(gbc.readMem(0xcbcd), 0x85);
        // C7 024E
        gbc.setState(0xa8d8, 0xbbdc, 0x6750, 0xeba, 0xf597, 0xc084, 0x0, 0x0);
        gbc.writeMem(0xa8d8, { 0xc7 });
        gbc.writeMem(0xbbda, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xbbda);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8d8), 0xc7);
        EXPECT(gbc.readMem(0xbbda), 0xd9);
        EXPECT(gbc.readMem(0xbbdb), 0xa8);
        // C7 024F
        gbc.setState(0xd44d, 0xd6cf, 0x2990, 0x8357, 0x3ab, 0xa8ab, 0x0, 0x1);
        gbc.writeMem(0xd44d, { 0xc7 });
        gbc.writeMem(0xd6cd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xd6cd);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd44d), 0xc7);
        EXPECT(gbc.readMem(0xd6cd), 0x4e);
        EXPECT(gbc.readMem(0xd6ce), 0xd4);
        // C7 0251
        gbc.setState(0x7a72, 0xfc58, 0x8690, 0x5101, 0x420b, 0x4cef, 0x1, 0x0);
        gbc.writeMem(0x7a72, { 0xc7 });
        gbc.writeMem(0xfc56, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xfc56);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfc56), 0x73);
        EXPECT(gbc.readMem(0xfc57), 0x7a);
        // C7 0253
        gbc.setState(0x6b3d, 0xd57e, 0xeeb0, 0xa89d, 0x276d, 0x6d51, 0x1, 0x1);
        gbc.writeMem(0x6b3d, { 0xc7 });
        gbc.writeMem(0xd57c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xd57c);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd57c), 0x3e);
        EXPECT(gbc.readMem(0xd57d), 0x6b);
        // C7 0254
        gbc.setState(0x92cf, 0x82ac, 0xf720, 0xa3f, 0xa574, 0x9c2b, 0x0, 0x0);
        gbc.writeMem(0x82aa, { 0x0, 0x0 });
        gbc.writeMem(0x92cf, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x82aa);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82aa), 0xd0);
        EXPECT(gbc.readMem(0x82ab), 0x92);
        EXPECT(gbc.readMem(0x92cf), 0xc7);
        // C7 0256
        gbc.setState(0x8e64, 0xa0f4, 0x6d30, 0x499b, 0x67a0, 0xba8e, 0x0, 0x0);
        gbc.writeMem(0x8e64, { 0xc7 });
        gbc.writeMem(0xa0f2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xa0f2);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e64), 0xc7);
        EXPECT(gbc.readMem(0xa0f2), 0x65);
        EXPECT(gbc.readMem(0xa0f3), 0x8e);
        // C7 0257
        gbc.setState(0x451b, 0xe029, 0x2d90, 0xdad9, 0x4120, 0xa198, 0x0, 0x1);
        gbc.writeMem(0x451b, { 0xc7 });
        gbc.writeMem(0xe027, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xe027);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe027), 0x1c);
        EXPECT(gbc.readMem(0xe028), 0x45);
        // C7 0259
        gbc.setState(0x9ae9, 0x855d, 0xaea0, 0xb6ce, 0xb626, 0x32dc, 0x0, 0x0);
        gbc.writeMem(0x855b, { 0x0, 0x0 });
        gbc.writeMem(0x9ae9, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x855b);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x855b), 0xea);
        EXPECT(gbc.readMem(0x855c), 0x9a);
        EXPECT(gbc.readMem(0x9ae9), 0xc7);
        // C7 025A
        gbc.setState(0xdabb, 0x9b7e, 0x69b0, 0x79ea, 0xeb0d, 0xfd10, 0x0, 0x1);
        gbc.writeMem(0x9b7c, { 0x0, 0x0 });
        gbc.writeMem(0xdabb, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x9b7c);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b7c), 0xbc);
        EXPECT(gbc.readMem(0x9b7d), 0xda);
        EXPECT(gbc.readMem(0xdabb), 0xc7);
        // C7 025B
        gbc.setState(0x6928, 0xf00f, 0x2b10, 0x71ef, 0x663a, 0xc87c, 0x0, 0x1);
        gbc.writeMem(0x6928, { 0xc7 });
        gbc.writeMem(0xf00d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xf00d);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf00d), 0x29);
        EXPECT(gbc.readMem(0xf00e), 0x69);
        // C7 025C
        gbc.setState(0xbc73, 0xf8ee, 0xa150, 0xe8e2, 0xecf4, 0xacfb, 0x1, 0x0);
        gbc.writeMem(0xbc73, { 0xc7 });
        gbc.writeMem(0xf8ec, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xf8ec);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc73), 0xc7);
        EXPECT(gbc.readMem(0xf8ec), 0x74);
        EXPECT(gbc.readMem(0xf8ed), 0xbc);
        // C7 025E
        gbc.setState(0x89a4, 0x97cb, 0xde50, 0xd6, 0x47ec, 0xf334, 0x1, 0x1);
        gbc.writeMem(0x89a4, { 0xc7 });
        gbc.writeMem(0x97c9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x97c9);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89a4), 0xc7);
        EXPECT(gbc.readMem(0x97c9), 0xa5);
        EXPECT(gbc.readMem(0x97ca), 0x89);
        // C7 0260
        gbc.setState(0xdaa6, 0x9e50, 0xcf00, 0x12e1, 0x37d0, 0xccce, 0x0, 0x1);
        gbc.writeMem(0x9e4e, { 0x0, 0x0 });
        gbc.writeMem(0xdaa6, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x9e4e);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e4e), 0xa7);
        EXPECT(gbc.readMem(0x9e4f), 0xda);
        EXPECT(gbc.readMem(0xdaa6), 0xc7);
        // C7 0261
        gbc.setState(0x3663, 0xd986, 0x8510, 0xe1ed, 0xd9d, 0xe7df, 0x0, 0x1);
        gbc.writeMem(0x3663, { 0xc7 });
        gbc.writeMem(0xd984, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xd984);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd984), 0x64);
        EXPECT(gbc.readMem(0xd985), 0x36);
        // C7 0262
        gbc.setState(0x4e97, 0xf6fa, 0x8150, 0x6d1d, 0x38db, 0x3c52, 0x1, 0x0);
        gbc.writeMem(0x4e97, { 0xc7 });
        gbc.writeMem(0xf6f8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xf6f8);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf6f8), 0x98);
        EXPECT(gbc.readMem(0xf6f9), 0x4e);
        // C7 0263
        gbc.setState(0x751c, 0xf6ad, 0x3750, 0xea5d, 0xd8ce, 0x3bc8, 0x0, 0x0);
        gbc.writeMem(0x751c, { 0xc7 });
        gbc.writeMem(0xf6ab, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xf6ab);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf6ab), 0x1d);
        EXPECT(gbc.readMem(0xf6ac), 0x75);
        // C7 0264
        gbc.setState(0x98d2, 0x9846, 0x1c10, 0x5c14, 0x6920, 0xfc0, 0x0, 0x1);
        gbc.writeMem(0x9844, { 0x0, 0x0 });
        gbc.writeMem(0x98d2, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x9844);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9844), 0xd3);
        EXPECT(gbc.readMem(0x9845), 0x98);
        EXPECT(gbc.readMem(0x98d2), 0xc7);
        // C7 0265
        gbc.setState(0xced8, 0xdc65, 0x3510, 0x8fe5, 0x52ce, 0x52ca, 0x0, 0x0);
        gbc.writeMem(0xced8, { 0xc7 });
        gbc.writeMem(0xdc63, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xdc63);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xced8), 0xc7);
        EXPECT(gbc.readMem(0xdc63), 0xd9);
        EXPECT(gbc.readMem(0xdc64), 0xce);
        // C7 0268
        gbc.setState(0x95b4, 0xbd4b, 0x7620, 0x7d56, 0xbc0, 0x7694, 0x1, 0x0);
        gbc.writeMem(0x95b4, { 0xc7 });
        gbc.writeMem(0xbd49, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xbd49);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95b4), 0xc7);
        EXPECT(gbc.readMem(0xbd49), 0xb5);
        EXPECT(gbc.readMem(0xbd4a), 0x95);
        // C7 0269
        gbc.setState(0xc8d2, 0xf734, 0x3c50, 0x618c, 0xc244, 0x3971, 0x0, 0x1);
        gbc.writeMem(0xc8d2, { 0xc7 });
        gbc.writeMem(0xf732, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xf732);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8d2), 0xc7);
        EXPECT(gbc.readMem(0xf732), 0xd3);
        EXPECT(gbc.readMem(0xf733), 0xc8);
        // C7 026A
        gbc.setState(0xcf4e, 0x8cad, 0xf200, 0x268c, 0xcf99, 0x7f35, 0x1, 0x1);
        gbc.writeMem(0x8cab, { 0x0, 0x0 });
        gbc.writeMem(0xcf4e, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x8cab);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cab), 0x4f);
        EXPECT(gbc.readMem(0x8cac), 0xcf);
        EXPECT(gbc.readMem(0xcf4e), 0xc7);
        // C7 026C
        gbc.setState(0x3c1c, 0xbfc7, 0x73e0, 0xa205, 0x94e7, 0xc520, 0x1, 0x1);
        gbc.writeMem(0x3c1c, { 0xc7 });
        gbc.writeMem(0xbfc5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xbfc5);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfc5), 0x1d);
        EXPECT(gbc.readMem(0xbfc6), 0x3c);
        // C7 026E
        gbc.setState(0xa08d, 0xb540, 0x8910, 0xd9d3, 0x4669, 0xda0e, 0x0, 0x1);
        gbc.writeMem(0xa08d, { 0xc7 });
        gbc.writeMem(0xb53e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xb53e);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa08d), 0xc7);
        EXPECT(gbc.readMem(0xb53e), 0x8e);
        EXPECT(gbc.readMem(0xb53f), 0xa0);
        // C7 0270
        gbc.setState(0x3bda, 0xd4bf, 0x4fe0, 0xd1af, 0x2a4c, 0xd181, 0x1, 0x0);
        gbc.writeMem(0x3bda, { 0xc7 });
        gbc.writeMem(0xd4bd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xd4bd);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4bd), 0xdb);
        EXPECT(gbc.readMem(0xd4be), 0x3b);
        // C7 0272
        gbc.setState(0xc0c9, 0x8847, 0xd960, 0x9971, 0xc5ed, 0xaf20, 0x0, 0x0);
        gbc.writeMem(0x8845, { 0x0, 0x0 });
        gbc.writeMem(0xc0c9, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x8845);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8845), 0xca);
        EXPECT(gbc.readMem(0x8846), 0xc0);
        EXPECT(gbc.readMem(0xc0c9), 0xc7);
        // C7 0273
        gbc.setState(0xe6e1, 0xc19d, 0xb190, 0x6c93, 0xf836, 0x9a2d, 0x0, 0x0);
        gbc.writeMem(0xc19b, { 0x0, 0x0 });
        gbc.writeMem(0xe6e1, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xc19b);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc19b), 0xe2);
        EXPECT(gbc.readMem(0xc19c), 0xe6);
        EXPECT(gbc.readMem(0xe6e1), 0xc7);
        // C7 027A
        gbc.setState(0x39e0, 0xff50, 0x7db0, 0x559f, 0x670d, 0xcce2, 0x1, 0x1);
        gbc.writeMem(0x39e0, { 0xc7 });
        gbc.writeMem(0xff4e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xff4e);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff4e), 0xe1);
        EXPECT(gbc.readMem(0xff4f), 0x39);
        // C7 027B
        gbc.setState(0x47b, 0xd834, 0x4970, 0x1e35, 0xfd38, 0xa109, 0x1, 0x1);
        gbc.writeMem(0x47b, { 0xc7 });
        gbc.writeMem(0xd832, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xd832);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd832), 0x7c);
        EXPECT(gbc.readMem(0xd833), 0x4);
        // C7 027C
        gbc.setState(0xba9f, 0x93ec, 0x2aa0, 0x4ea3, 0xd700, 0xff41, 0x0, 0x0);
        gbc.writeMem(0x93ea, { 0x0, 0x0 });
        gbc.writeMem(0xba9f, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x93ea);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93ea), 0xa0);
        EXPECT(gbc.readMem(0x93eb), 0xba);
        EXPECT(gbc.readMem(0xba9f), 0xc7);
        // C7 027F
        gbc.setState(0x12d8, 0xc21c, 0x9420, 0xfdc7, 0xb176, 0xf055, 0x1, 0x1);
        gbc.writeMem(0x12d8, { 0xc7 });
        gbc.writeMem(0xc21a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xc21a);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc21a), 0xd9);
        EXPECT(gbc.readMem(0xc21b), 0x12);
        // C7 0280
        gbc.setState(0x6dfb, 0xb59e, 0x6e80, 0xbcfd, 0xa6e6, 0x246, 0x0, 0x1);
        gbc.writeMem(0x6dfb, { 0xc7 });
        gbc.writeMem(0xb59c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xb59c);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb59c), 0xfc);
        EXPECT(gbc.readMem(0xb59d), 0x6d);
        // C7 0281
        gbc.setState(0x4a63, 0x900d, 0x95e0, 0x4ce6, 0x453c, 0x99e6, 0x1, 0x1);
        gbc.writeMem(0x4a63, { 0xc7 });
        gbc.writeMem(0x900b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x900b);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x900b), 0x64);
        EXPECT(gbc.readMem(0x900c), 0x4a);
        // C7 0283
        gbc.setState(0x1876, 0x993c, 0x4860, 0xe831, 0xe72e, 0x3105, 0x1, 0x0);
        gbc.writeMem(0x1876, { 0xc7 });
        gbc.writeMem(0x993a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x993a);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x993a), 0x77);
        EXPECT(gbc.readMem(0x993b), 0x18);
        // C7 0285
        gbc.setState(0xdcaf, 0xa7c9, 0xfc00, 0x4d27, 0x75e8, 0x73cf, 0x1, 0x1);
        gbc.writeMem(0xa7c7, { 0x0, 0x0 });
        gbc.writeMem(0xdcaf, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xa7c7);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7c7), 0xb0);
        EXPECT(gbc.readMem(0xa7c8), 0xdc);
        EXPECT(gbc.readMem(0xdcaf), 0xc7);
        // C7 0286
        gbc.setState(0x1e9b, 0xc198, 0xf710, 0x6659, 0x25f1, 0xbb12, 0x0, 0x0);
        gbc.writeMem(0x1e9b, { 0xc7 });
        gbc.writeMem(0xc196, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xc196);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc196), 0x9c);
        EXPECT(gbc.readMem(0xc197), 0x1e);
        // C7 0289
        gbc.setState(0xc702, 0xdf25, 0x2cb0, 0x58ae, 0x77a3, 0xb2ea, 0x0, 0x0);
        gbc.writeMem(0xc702, { 0xc7 });
        gbc.writeMem(0xdf23, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xdf23);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc702), 0xc7);
        EXPECT(gbc.readMem(0xdf23), 0x3);
        EXPECT(gbc.readMem(0xdf24), 0xc7);
        // C7 028C
        gbc.setState(0x92b5, 0x97e9, 0x3640, 0xbf6d, 0xf315, 0xa82f, 0x0, 0x0);
        gbc.writeMem(0x92b5, { 0xc7 });
        gbc.writeMem(0x97e7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x97e7);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92b5), 0xc7);
        EXPECT(gbc.readMem(0x97e7), 0xb6);
        EXPECT(gbc.readMem(0x97e8), 0x92);
        // C7 0290
        gbc.setState(0x320c, 0xb24e, 0xe230, 0x3a90, 0x204a, 0xd1bc, 0x1, 0x1);
        gbc.writeMem(0x320c, { 0xc7 });
        gbc.writeMem(0xb24c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xb24c);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb24c), 0xd);
        EXPECT(gbc.readMem(0xb24d), 0x32);
        // C7 0293
        gbc.setState(0x166d, 0xb6a7, 0x4430, 0xb5ec, 0x784, 0xe961, 0x1, 0x1);
        gbc.writeMem(0x166d, { 0xc7 });
        gbc.writeMem(0xb6a5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xb6a5);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6a5), 0x6e);
        EXPECT(gbc.readMem(0xb6a6), 0x16);
        // C7 0295
        gbc.setState(0xb12, 0xde26, 0xc1b0, 0xa825, 0xfdfb, 0x2f1, 0x1, 0x0);
        gbc.writeMem(0xb12, { 0xc7 });
        gbc.writeMem(0xde24, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xde24);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde24), 0x13);
        EXPECT(gbc.readMem(0xde25), 0xb);
        // C7 029B
        gbc.setState(0xbfed, 0xf3fd, 0xf750, 0x6e8c, 0x249e, 0x601b, 0x0, 0x1);
        gbc.writeMem(0xbfed, { 0xc7 });
        gbc.writeMem(0xf3fb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xf3fb);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfed), 0xc7);
        EXPECT(gbc.readMem(0xf3fb), 0xee);
        EXPECT(gbc.readMem(0xf3fc), 0xbf);
        // C7 029C
        gbc.setState(0x3c2, 0xb6e8, 0x4f70, 0x6e39, 0x5c79, 0xcd33, 0x1, 0x0);
        gbc.writeMem(0x3c2, { 0xc7 });
        gbc.writeMem(0xb6e6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xb6e6);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6e6), 0xc3);
        EXPECT(gbc.readMem(0xb6e7), 0x3);
        // C7 029D
        gbc.setState(0x83cb, 0xe020, 0xe690, 0x54be, 0x99b4, 0x1ca1, 0x0, 0x0);
        gbc.writeMem(0x83cb, { 0xc7 });
        gbc.writeMem(0xe01e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xe01e);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83cb), 0xc7);
        EXPECT(gbc.readMem(0xe01e), 0xcc);
        EXPECT(gbc.readMem(0xe01f), 0x83);
        // C7 029E
        gbc.setState(0x1bfe, 0xa6cf, 0xf210, 0xb451, 0x5c7d, 0x314f, 0x0, 0x1);
        gbc.writeMem(0x1bfe, { 0xc7 });
        gbc.writeMem(0xa6cd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xa6cd);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6cd), 0xff);
        EXPECT(gbc.readMem(0xa6ce), 0x1b);
        // C7 02A0
        gbc.setState(0x7521, 0xae25, 0x97f0, 0x8f6e, 0x6896, 0xe088, 0x0, 0x1);
        gbc.writeMem(0x7521, { 0xc7 });
        gbc.writeMem(0xae23, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xae23);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae23), 0x22);
        EXPECT(gbc.readMem(0xae24), 0x75);
        // C7 02A1
        gbc.setState(0xb272, 0xc3fa, 0x6040, 0xb551, 0xe724, 0x5fba, 0x0, 0x0);
        gbc.writeMem(0xb272, { 0xc7 });
        gbc.writeMem(0xc3f8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xc3f8);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb272), 0xc7);
        EXPECT(gbc.readMem(0xc3f8), 0x73);
        EXPECT(gbc.readMem(0xc3f9), 0xb2);
        // C7 02A2
        gbc.setState(0x6461, 0xf64c, 0xdd30, 0x23ab, 0xf2b4, 0xd877, 0x1, 0x1);
        gbc.writeMem(0x6461, { 0xc7 });
        gbc.writeMem(0xf64a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xf64a);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf64a), 0x62);
        EXPECT(gbc.readMem(0xf64b), 0x64);
        // C7 02A3
        gbc.setState(0x3c8b, 0x8266, 0x8400, 0xa42f, 0x7e75, 0x67d1, 0x1, 0x1);
        gbc.writeMem(0x3c8b, { 0xc7 });
        gbc.writeMem(0x8264, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x8264);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8264), 0x8c);
        EXPECT(gbc.readMem(0x8265), 0x3c);
        // C7 02A7
        gbc.setState(0x358, 0xfdf8, 0x3ca0, 0x9f0b, 0xeb41, 0x32e4, 0x0, 0x1);
        gbc.writeMem(0x358, { 0xc7 });
        gbc.writeMem(0xfdf6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xfdf6);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfdf6), 0x59);
        EXPECT(gbc.readMem(0xfdf7), 0x3);
        // C7 02A8
        gbc.setState(0x8a6, 0x8fe4, 0x22a0, 0x130e, 0xe33a, 0x3949, 0x0, 0x1);
        gbc.writeMem(0x8a6, { 0xc7 });
        gbc.writeMem(0x8fe2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x8fe2);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fe2), 0xa7);
        EXPECT(gbc.readMem(0x8fe3), 0x8);
        // C7 02AB
        gbc.setState(0x7a44, 0xc5b2, 0xe250, 0x1fad, 0x4d87, 0x1c60, 0x1, 0x0);
        gbc.writeMem(0x7a44, { 0xc7 });
        gbc.writeMem(0xc5b0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xc5b0);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5b0), 0x45);
        EXPECT(gbc.readMem(0xc5b1), 0x7a);
        // C7 02AE
        gbc.setState(0x3275, 0x996c, 0xd160, 0xc439, 0x68e7, 0xc19d, 0x1, 0x1);
        gbc.writeMem(0x3275, { 0xc7 });
        gbc.writeMem(0x996a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x996a);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x996a), 0x76);
        EXPECT(gbc.readMem(0x996b), 0x32);
        // C7 02AF
        gbc.setState(0x368e, 0xaf05, 0xc430, 0x2c71, 0xeb89, 0xd134, 0x0, 0x1);
        gbc.writeMem(0x368e, { 0xc7 });
        gbc.writeMem(0xaf03, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xaf03);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf03), 0x8f);
        EXPECT(gbc.readMem(0xaf04), 0x36);
        // C7 02B5
        gbc.setState(0x2102, 0xad7a, 0x1da0, 0xc43d, 0xdb17, 0x4698, 0x1, 0x0);
        gbc.writeMem(0x2102, { 0xc7 });
        gbc.writeMem(0xad78, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xad78);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad78), 0x3);
        EXPECT(gbc.readMem(0xad79), 0x21);
        // C7 02B6
        gbc.setState(0x7aa6, 0xb263, 0x1ac0, 0xd476, 0xd04f, 0xbec1, 0x0, 0x1);
        gbc.writeMem(0x7aa6, { 0xc7 });
        gbc.writeMem(0xb261, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xb261);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb261), 0xa7);
        EXPECT(gbc.readMem(0xb262), 0x7a);
        // C7 02B8
        gbc.setState(0xb16b, 0xfbba, 0x170, 0x5aaf, 0x8d1e, 0xea1a, 0x1, 0x1);
        gbc.writeMem(0xb16b, { 0xc7 });
        gbc.writeMem(0xfbb8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xfbb8);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb16b), 0xc7);
        EXPECT(gbc.readMem(0xfbb8), 0x6c);
        EXPECT(gbc.readMem(0xfbb9), 0xb1);
        // C7 02BD
        gbc.setState(0x490d, 0xbd5f, 0xc900, 0xc2d8, 0xf2, 0x8436, 0x1, 0x0);
        gbc.writeMem(0x490d, { 0xc7 });
        gbc.writeMem(0xbd5d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xbd5d);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd5d), 0xe);
        EXPECT(gbc.readMem(0xbd5e), 0x49);
        // C7 02C1
        gbc.setState(0x44b2, 0xeeb0, 0xcec0, 0xa2fb, 0x5315, 0x5dea, 0x1, 0x0);
        gbc.writeMem(0x44b2, { 0xc7 });
        gbc.writeMem(0xeeae, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xeeae);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeeae), 0xb3);
        EXPECT(gbc.readMem(0xeeaf), 0x44);
        // C7 02C2
        gbc.setState(0x91e7, 0x8189, 0x8900, 0x5fe6, 0xd918, 0x3e09, 0x0, 0x0);
        gbc.writeMem(0x8187, { 0x0, 0x0 });
        gbc.writeMem(0x91e7, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x8187);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8187), 0xe8);
        EXPECT(gbc.readMem(0x8188), 0x91);
        EXPECT(gbc.readMem(0x91e7), 0xc7);
        // C7 02C3
        gbc.setState(0x401b, 0xe298, 0x1400, 0xb686, 0x3853, 0xd7a3, 0x1, 0x1);
        gbc.writeMem(0x401b, { 0xc7 });
        gbc.writeMem(0xe296, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xe296);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe296), 0x1c);
        EXPECT(gbc.readMem(0xe297), 0x40);
        // C7 02C6
        gbc.setState(0x1d92, 0xb601, 0x65d0, 0x864e, 0xf282, 0x8fd0, 0x0, 0x1);
        gbc.writeMem(0x1d92, { 0xc7 });
        gbc.writeMem(0xb5ff, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xb5ff);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5ff), 0x93);
        EXPECT(gbc.readMem(0xb600), 0x1d);
        // C7 02C7
        gbc.setState(0x4314, 0xd1bc, 0x1130, 0x7cfc, 0x7a12, 0xe649, 0x0, 0x1);
        gbc.writeMem(0x4314, { 0xc7 });
        gbc.writeMem(0xd1ba, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xd1ba);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1ba), 0x15);
        EXPECT(gbc.readMem(0xd1bb), 0x43);
        // C7 02C9
        gbc.setState(0x3ec4, 0x85a8, 0xd760, 0xe53, 0x715f, 0xc44b, 0x1, 0x1);
        gbc.writeMem(0x3ec4, { 0xc7 });
        gbc.writeMem(0x85a6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x85a6);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85a6), 0xc5);
        EXPECT(gbc.readMem(0x85a7), 0x3e);
        // C7 02CA
        gbc.setState(0x2228, 0xae43, 0x9f00, 0xed0b, 0x437f, 0x735b, 0x0, 0x0);
        gbc.writeMem(0x2228, { 0xc7 });
        gbc.writeMem(0xae41, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xae41);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae41), 0x29);
        EXPECT(gbc.readMem(0xae42), 0x22);
        // C7 02CB
        gbc.setState(0xd0a7, 0xab88, 0x85e0, 0xf71a, 0x369b, 0x26ba, 0x0, 0x1);
        gbc.writeMem(0xab86, { 0x0, 0x0 });
        gbc.writeMem(0xd0a7, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xab86);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab86), 0xa8);
        EXPECT(gbc.readMem(0xab87), 0xd0);
        EXPECT(gbc.readMem(0xd0a7), 0xc7);
        // C7 02CC
        gbc.setState(0x839f, 0xc3dc, 0xf140, 0x56, 0x4860, 0xf5de, 0x1, 0x0);
        gbc.writeMem(0x839f, { 0xc7 });
        gbc.writeMem(0xc3da, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xc3da);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x839f), 0xc7);
        EXPECT(gbc.readMem(0xc3da), 0xa0);
        EXPECT(gbc.readMem(0xc3db), 0x83);
        // C7 02CD
        gbc.setState(0x3f68, 0x823a, 0xbc90, 0x7f57, 0x4eed, 0xbee, 0x0, 0x1);
        gbc.writeMem(0x3f68, { 0xc7 });
        gbc.writeMem(0x8238, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x8238);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8238), 0x69);
        EXPECT(gbc.readMem(0x8239), 0x3f);
        // C7 02D0
        gbc.setState(0xcbe1, 0xe8b3, 0xe440, 0xa484, 0xf8f6, 0x98d0, 0x1, 0x0);
        gbc.writeMem(0xcbe1, { 0xc7 });
        gbc.writeMem(0xe8b1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xe8b1);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbe1), 0xc7);
        EXPECT(gbc.readMem(0xe8b1), 0xe2);
        EXPECT(gbc.readMem(0xe8b2), 0xcb);
        // C7 02D1
        gbc.setState(0xa723, 0xd35b, 0x90f0, 0xa536, 0x2424, 0x790, 0x1, 0x0);
        gbc.writeMem(0xa723, { 0xc7 });
        gbc.writeMem(0xd359, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xd359);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa723), 0xc7);
        EXPECT(gbc.readMem(0xd359), 0x24);
        EXPECT(gbc.readMem(0xd35a), 0xa7);
        // C7 02D3
        gbc.setState(0x12f, 0xc291, 0x33a0, 0x4c5, 0xfac1, 0xbf04, 0x0, 0x1);
        gbc.writeMem(0x12f, { 0xc7 });
        gbc.writeMem(0xc28f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xc28f);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc28f), 0x30);
        EXPECT(gbc.readMem(0xc290), 0x1);
        // C7 02D4
        gbc.setState(0xe247, 0xf64a, 0x7c80, 0x3ff7, 0x49c6, 0xa5b, 0x1, 0x0);
        gbc.writeMem(0xe247, { 0xc7 });
        gbc.writeMem(0xf648, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xf648);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe247), 0xc7);
        EXPECT(gbc.readMem(0xf648), 0x48);
        EXPECT(gbc.readMem(0xf649), 0xe2);
        // C7 02D6
        gbc.setState(0x7eb2, 0xbfd4, 0x5fa0, 0x757c, 0xa5c2, 0x12fd, 0x0, 0x1);
        gbc.writeMem(0x7eb2, { 0xc7 });
        gbc.writeMem(0xbfd2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xbfd2);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfd2), 0xb3);
        EXPECT(gbc.readMem(0xbfd3), 0x7e);
        // C7 02DA
        gbc.setState(0xa0da, 0xe824, 0xa930, 0x4435, 0xfe9e, 0xdc24, 0x0, 0x1);
        gbc.writeMem(0xa0da, { 0xc7 });
        gbc.writeMem(0xe822, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xe822);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0da), 0xc7);
        EXPECT(gbc.readMem(0xe822), 0xdb);
        EXPECT(gbc.readMem(0xe823), 0xa0);
        // C7 02DC
        gbc.setState(0xc8ac, 0x88ba, 0xbaa0, 0x55e3, 0x1f36, 0x4791, 0x0, 0x0);
        gbc.writeMem(0x88b8, { 0x0, 0x0 });
        gbc.writeMem(0xc8ac, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x88b8);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88b8), 0xad);
        EXPECT(gbc.readMem(0x88b9), 0xc8);
        EXPECT(gbc.readMem(0xc8ac), 0xc7);
        // C7 02DF
        gbc.setState(0x4e78, 0xa7b3, 0xab40, 0xebac, 0xe0b6, 0x67f3, 0x0, 0x0);
        gbc.writeMem(0x4e78, { 0xc7 });
        gbc.writeMem(0xa7b1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xa7b1);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7b1), 0x79);
        EXPECT(gbc.readMem(0xa7b2), 0x4e);
        // C7 02E0
        gbc.setState(0x8e7b, 0xb24f, 0xeaa0, 0x2fd5, 0x863e, 0xe6ee, 0x0, 0x1);
        gbc.writeMem(0x8e7b, { 0xc7 });
        gbc.writeMem(0xb24d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xb24d);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e7b), 0xc7);
        EXPECT(gbc.readMem(0xb24d), 0x7c);
        EXPECT(gbc.readMem(0xb24e), 0x8e);
        // C7 02E1
        gbc.setState(0x5199, 0xf4c9, 0x3040, 0xaa26, 0xed12, 0x58e8, 0x0, 0x0);
        gbc.writeMem(0x5199, { 0xc7 });
        gbc.writeMem(0xf4c7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xf4c7);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf4c7), 0x9a);
        EXPECT(gbc.readMem(0xf4c8), 0x51);
        // C7 02E3
        gbc.setState(0x946b, 0x98f1, 0x4650, 0x6fd1, 0x2065, 0x8af1, 0x1, 0x1);
        gbc.writeMem(0x946b, { 0xc7 });
        gbc.writeMem(0x98ef, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x98ef);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x946b), 0xc7);
        EXPECT(gbc.readMem(0x98ef), 0x6c);
        EXPECT(gbc.readMem(0x98f0), 0x94);
        // C7 02E7
        gbc.setState(0x9f11, 0xaa15, 0x55f0, 0xc78a, 0xfd1b, 0x3ab7, 0x1, 0x0);
        gbc.writeMem(0x9f11, { 0xc7 });
        gbc.writeMem(0xaa13, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xaa13);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f11), 0xc7);
        EXPECT(gbc.readMem(0xaa13), 0x12);
        EXPECT(gbc.readMem(0xaa14), 0x9f);
        // C7 02E8
        gbc.setState(0xd9a5, 0xc164, 0x6370, 0xa2d4, 0x756f, 0xd2f6, 0x1, 0x0);
        gbc.writeMem(0xc162, { 0x0, 0x0 });
        gbc.writeMem(0xd9a5, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xc162);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc162), 0xa6);
        EXPECT(gbc.readMem(0xc163), 0xd9);
        EXPECT(gbc.readMem(0xd9a5), 0xc7);
        // C7 02EB
        gbc.setState(0x7531, 0xf403, 0xb4c0, 0x2f96, 0x5db0, 0xdef8, 0x1, 0x0);
        gbc.writeMem(0x7531, { 0xc7 });
        gbc.writeMem(0xf401, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xf401);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf401), 0x32);
        EXPECT(gbc.readMem(0xf402), 0x75);
        // C7 02EC
        gbc.setState(0x36e8, 0xeaf1, 0x38a0, 0x650c, 0xcc7a, 0x886b, 0x1, 0x0);
        gbc.writeMem(0x36e8, { 0xc7 });
        gbc.writeMem(0xeaef, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xeaef);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaef), 0xe9);
        EXPECT(gbc.readMem(0xeaf0), 0x36);
        // C7 02EF
        gbc.setState(0x9b43, 0x80dc, 0x70d0, 0xe6dd, 0xfa0c, 0x3a7b, 0x1, 0x0);
        gbc.writeMem(0x80da, { 0x0, 0x0 });
        gbc.writeMem(0x9b43, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x80da);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80da), 0x44);
        EXPECT(gbc.readMem(0x80db), 0x9b);
        EXPECT(gbc.readMem(0x9b43), 0xc7);
        // C7 02F1
        gbc.setState(0x5ee7, 0xd4f3, 0xa680, 0x710e, 0xde5f, 0x22f4, 0x0, 0x0);
        gbc.writeMem(0x5ee7, { 0xc7 });
        gbc.writeMem(0xd4f1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xd4f1);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4f1), 0xe8);
        EXPECT(gbc.readMem(0xd4f2), 0x5e);
        // C7 02F2
        gbc.setState(0x6e9d, 0xdb5d, 0x5940, 0xc0fa, 0xf8b4, 0xbc10, 0x1, 0x0);
        gbc.writeMem(0x6e9d, { 0xc7 });
        gbc.writeMem(0xdb5b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xdb5b);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb5b), 0x9e);
        EXPECT(gbc.readMem(0xdb5c), 0x6e);
        // C7 02F3
        gbc.setState(0xd880, 0xa58d, 0xfdb0, 0x64f, 0x4333, 0xf36c, 0x0, 0x0);
        gbc.writeMem(0xa58b, { 0x0, 0x0 });
        gbc.writeMem(0xd880, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xa58b);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa58b), 0x81);
        EXPECT(gbc.readMem(0xa58c), 0xd8);
        EXPECT(gbc.readMem(0xd880), 0xc7);
        // C7 02F7
        gbc.setState(0xa4ea, 0xa2f8, 0x9170, 0x9281, 0x982c, 0xbe6b, 0x1, 0x1);
        gbc.writeMem(0xa2f6, { 0x0, 0x0 });
        gbc.writeMem(0xa4ea, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xa2f6);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2f6), 0xeb);
        EXPECT(gbc.readMem(0xa2f7), 0xa4);
        EXPECT(gbc.readMem(0xa4ea), 0xc7);
        // C7 02F8
        gbc.setState(0x5de2, 0xb629, 0x62a0, 0x39de, 0xbd88, 0xf47f, 0x1, 0x0);
        gbc.writeMem(0x5de2, { 0xc7 });
        gbc.writeMem(0xb627, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xb627);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb627), 0xe3);
        EXPECT(gbc.readMem(0xb628), 0x5d);
        // C7 02FC
        gbc.setState(0x2dbc, 0xd467, 0x49a0, 0xb122, 0xe947, 0x798, 0x0, 0x1);
        gbc.writeMem(0x2dbc, { 0xc7 });
        gbc.writeMem(0xd465, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xd465);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd465), 0xbd);
        EXPECT(gbc.readMem(0xd466), 0x2d);
        // C7 02FD
        gbc.setState(0xd5a5, 0xfa5c, 0x1870, 0xe65e, 0xa463, 0xf474, 0x1, 0x0);
        gbc.writeMem(0xd5a5, { 0xc7 });
        gbc.writeMem(0xfa5a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xfa5a);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5a5), 0xc7);
        EXPECT(gbc.readMem(0xfa5a), 0xa6);
        EXPECT(gbc.readMem(0xfa5b), 0xd5);
        // C7 02FE
        gbc.setState(0xad34, 0xa267, 0xfc80, 0xca4b, 0x82d4, 0x10ee, 0x0, 0x1);
        gbc.writeMem(0xa265, { 0x0, 0x0 });
        gbc.writeMem(0xad34, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xa265);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa265), 0x35);
        EXPECT(gbc.readMem(0xa266), 0xad);
        EXPECT(gbc.readMem(0xad34), 0xc7);
        // C7 0301
        gbc.setState(0x365c, 0xcd9e, 0x5d40, 0x1209, 0xd6cf, 0x81f1, 0x0, 0x1);
        gbc.writeMem(0x365c, { 0xc7 });
        gbc.writeMem(0xcd9c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xcd9c);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd9c), 0x5d);
        EXPECT(gbc.readMem(0xcd9d), 0x36);
        // C7 0308
        gbc.setState(0xa4c, 0x886e, 0xa410, 0x1178, 0xa19f, 0xbd7e, 0x1, 0x1);
        gbc.writeMem(0xa4c, { 0xc7 });
        gbc.writeMem(0x886c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x886c);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x886c), 0x4d);
        EXPECT(gbc.readMem(0x886d), 0xa);
        // C7 0309
        gbc.setState(0x5d75, 0xb42c, 0x59a0, 0x7eaa, 0x60c3, 0x3d32, 0x1, 0x1);
        gbc.writeMem(0x5d75, { 0xc7 });
        gbc.writeMem(0xb42a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xb42a);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb42a), 0x76);
        EXPECT(gbc.readMem(0xb42b), 0x5d);
        // C7 0310
        gbc.setState(0xe27, 0xecd5, 0x2830, 0x1fcd, 0x4f4, 0x3ebe, 0x0, 0x0);
        gbc.writeMem(0xe27, { 0xc7 });
        gbc.writeMem(0xecd3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xecd3);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecd3), 0x28);
        EXPECT(gbc.readMem(0xecd4), 0xe);
        // C7 0313
        gbc.setState(0x7138, 0xd4ba, 0xc720, 0xba7f, 0x59ef, 0x5db9, 0x1, 0x1);
        gbc.writeMem(0x7138, { 0xc7 });
        gbc.writeMem(0xd4b8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xd4b8);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4b8), 0x39);
        EXPECT(gbc.readMem(0xd4b9), 0x71);
        // C7 0315
        gbc.setState(0x946f, 0xc56d, 0x8be0, 0x82ef, 0x77ad, 0x87, 0x0, 0x0);
        gbc.writeMem(0x946f, { 0xc7 });
        gbc.writeMem(0xc56b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xc56b);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x946f), 0xc7);
        EXPECT(gbc.readMem(0xc56b), 0x70);
        EXPECT(gbc.readMem(0xc56c), 0x94);
        // C7 0316
        gbc.setState(0xe5aa, 0xc0ea, 0xfe40, 0xc775, 0xb277, 0xa7fb, 0x0, 0x0);
        gbc.writeMem(0xc0e8, { 0x0, 0x0 });
        gbc.writeMem(0xe5aa, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xc0e8);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0e8), 0xab);
        EXPECT(gbc.readMem(0xc0e9), 0xe5);
        EXPECT(gbc.readMem(0xe5aa), 0xc7);
        // C7 0319
        gbc.setState(0x1444, 0xdd12, 0x4310, 0x453c, 0x5fe6, 0x9a34, 0x1, 0x0);
        gbc.writeMem(0x1444, { 0xc7 });
        gbc.writeMem(0xdd10, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xdd10);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd10), 0x45);
        EXPECT(gbc.readMem(0xdd11), 0x14);
        // C7 031A
        gbc.setState(0x21b9, 0xec68, 0x1420, 0xefb3, 0x72ce, 0xa615, 0x0, 0x1);
        gbc.writeMem(0x21b9, { 0xc7 });
        gbc.writeMem(0xec66, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xec66);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec66), 0xba);
        EXPECT(gbc.readMem(0xec67), 0x21);
        // C7 031D
        gbc.setState(0x1c6a, 0xbba0, 0x2680, 0xfa9c, 0x1c63, 0xcf17, 0x0, 0x0);
        gbc.writeMem(0x1c6a, { 0xc7 });
        gbc.writeMem(0xbb9e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xbb9e);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb9e), 0x6b);
        EXPECT(gbc.readMem(0xbb9f), 0x1c);
        // C7 031E
        gbc.setState(0x9950, 0xd82c, 0x9dd0, 0x1644, 0x6946, 0x44c5, 0x0, 0x0);
        gbc.writeMem(0x9950, { 0xc7 });
        gbc.writeMem(0xd82a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xd82a);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9950), 0xc7);
        EXPECT(gbc.readMem(0xd82a), 0x51);
        EXPECT(gbc.readMem(0xd82b), 0x99);
        // C7 031F
        gbc.setState(0x1933, 0xd3b4, 0xb700, 0x2664, 0x2ddb, 0xab97, 0x1, 0x0);
        gbc.writeMem(0x1933, { 0xc7 });
        gbc.writeMem(0xd3b2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xd3b2);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3b2), 0x34);
        EXPECT(gbc.readMem(0xd3b3), 0x19);
        // C7 0320
        gbc.setState(0xd2a3, 0xafda, 0xe890, 0x85be, 0xf712, 0x39a, 0x0, 0x1);
        gbc.writeMem(0xafd8, { 0x0, 0x0 });
        gbc.writeMem(0xd2a3, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xafd8);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafd8), 0xa4);
        EXPECT(gbc.readMem(0xafd9), 0xd2);
        EXPECT(gbc.readMem(0xd2a3), 0xc7);
        // C7 0321
        gbc.setState(0x67ab, 0xc52e, 0x940, 0xb6d0, 0x69ec, 0xac76, 0x0, 0x0);
        gbc.writeMem(0x67ab, { 0xc7 });
        gbc.writeMem(0xc52c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xc52c);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc52c), 0xac);
        EXPECT(gbc.readMem(0xc52d), 0x67);
        // C7 0322
        gbc.setState(0x2bff, 0xf0f5, 0xd980, 0x7127, 0xeda0, 0xbeb7, 0x1, 0x0);
        gbc.writeMem(0x2bff, { 0xc7 });
        gbc.writeMem(0xf0f3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xf0f3);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf0f3), 0x0);
        EXPECT(gbc.readMem(0xf0f4), 0x2c);
        // C7 0323
        gbc.setState(0xbd4f, 0xbd17, 0xfb00, 0x8abd, 0x15b6, 0x56da, 0x0, 0x1);
        gbc.writeMem(0xbd15, { 0x0, 0x0 });
        gbc.writeMem(0xbd4f, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xbd15);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd15), 0x50);
        EXPECT(gbc.readMem(0xbd16), 0xbd);
        EXPECT(gbc.readMem(0xbd4f), 0xc7);
        // C7 0329
        gbc.setState(0xd612, 0xfcdd, 0x4ef0, 0xf55d, 0xc013, 0x3eca, 0x0, 0x1);
        gbc.writeMem(0xd612, { 0xc7 });
        gbc.writeMem(0xfcdb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xfcdb);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd612), 0xc7);
        EXPECT(gbc.readMem(0xfcdb), 0x13);
        EXPECT(gbc.readMem(0xfcdc), 0xd6);
        // C7 032A
        gbc.setState(0x58fe, 0xdee8, 0x50e0, 0x58d5, 0x3e18, 0xd9d7, 0x1, 0x0);
        gbc.writeMem(0x58fe, { 0xc7 });
        gbc.writeMem(0xdee6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xdee6);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdee6), 0xff);
        EXPECT(gbc.readMem(0xdee7), 0x58);
        // C7 032E
        gbc.setState(0x9766, 0xf4a3, 0x1dc0, 0xd573, 0xf27f, 0x8027, 0x0, 0x0);
        gbc.writeMem(0x9766, { 0xc7 });
        gbc.writeMem(0xf4a1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xf4a1);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9766), 0xc7);
        EXPECT(gbc.readMem(0xf4a1), 0x67);
        EXPECT(gbc.readMem(0xf4a2), 0x97);
        // C7 0330
        gbc.setState(0x7cae, 0xb323, 0x92a0, 0x762f, 0x9e10, 0xc63d, 0x1, 0x0);
        gbc.writeMem(0x7cae, { 0xc7 });
        gbc.writeMem(0xb321, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xb321);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb321), 0xaf);
        EXPECT(gbc.readMem(0xb322), 0x7c);
        // C7 0333
        gbc.setState(0x1d24, 0xba03, 0x6650, 0x5c1d, 0x25da, 0x3d13, 0x0, 0x1);
        gbc.writeMem(0x1d24, { 0xc7 });
        gbc.writeMem(0xba01, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xba01);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba01), 0x25);
        EXPECT(gbc.readMem(0xba02), 0x1d);
        // C7 0334
        gbc.setState(0x9aea, 0x8a60, 0x1850, 0x6f5, 0x3a52, 0x361c, 0x0, 0x1);
        gbc.writeMem(0x8a5e, { 0x0, 0x0 });
        gbc.writeMem(0x9aea, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x8a5e);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a5e), 0xeb);
        EXPECT(gbc.readMem(0x8a5f), 0x9a);
        EXPECT(gbc.readMem(0x9aea), 0xc7);
        // C7 0335
        gbc.setState(0x8c78, 0xcdc6, 0xf840, 0x6730, 0x5c75, 0xc131, 0x0, 0x1);
        gbc.writeMem(0x8c78, { 0xc7 });
        gbc.writeMem(0xcdc4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xcdc4);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c78), 0xc7);
        EXPECT(gbc.readMem(0xcdc4), 0x79);
        EXPECT(gbc.readMem(0xcdc5), 0x8c);
        // C7 0336
        gbc.setState(0xabc1, 0xb7e2, 0x18e0, 0x2711, 0x3e5d, 0x2b28, 0x0, 0x1);
        gbc.writeMem(0xabc1, { 0xc7 });
        gbc.writeMem(0xb7e0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xb7e0);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabc1), 0xc7);
        EXPECT(gbc.readMem(0xb7e0), 0xc2);
        EXPECT(gbc.readMem(0xb7e1), 0xab);
        // C7 0337
        gbc.setState(0x5a29, 0xd837, 0x10, 0xbef8, 0x6cc0, 0x8075, 0x0, 0x1);
        gbc.writeMem(0x5a29, { 0xc7 });
        gbc.writeMem(0xd835, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xd835);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd835), 0x2a);
        EXPECT(gbc.readMem(0xd836), 0x5a);
        // C7 033B
        gbc.setState(0x50, 0xa851, 0xe9e0, 0x7b82, 0x5d7e, 0x956f, 0x0, 0x1);
        gbc.writeMem(0x50, { 0xc7 });
        gbc.writeMem(0xa84f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xa84f);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa84f), 0x51);
        EXPECT(gbc.readMem(0xa850), 0x0);
        // C7 033C
        gbc.setState(0x882d, 0xcf6a, 0x1f90, 0xb081, 0x597c, 0xa9c7, 0x0, 0x0);
        gbc.writeMem(0x882d, { 0xc7 });
        gbc.writeMem(0xcf68, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xcf68);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x882d), 0xc7);
        EXPECT(gbc.readMem(0xcf68), 0x2e);
        EXPECT(gbc.readMem(0xcf69), 0x88);
        // C7 033E
        gbc.setState(0x2828, 0xc914, 0x7000, 0xd914, 0x72df, 0x2760, 0x0, 0x0);
        gbc.writeMem(0x2828, { 0xc7 });
        gbc.writeMem(0xc912, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xc912);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc912), 0x29);
        EXPECT(gbc.readMem(0xc913), 0x28);
        // C7 033F
        gbc.setState(0xb6bf, 0x9f99, 0x8380, 0x7ec1, 0x8408, 0x5974, 0x0, 0x1);
        gbc.writeMem(0x9f97, { 0x0, 0x0 });
        gbc.writeMem(0xb6bf, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x9f97);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f97), 0xc0);
        EXPECT(gbc.readMem(0x9f98), 0xb6);
        EXPECT(gbc.readMem(0xb6bf), 0xc7);
        // C7 0340
        gbc.setState(0x5302, 0xee50, 0x6400, 0x326e, 0xbcd9, 0xd1b1, 0x1, 0x1);
        gbc.writeMem(0x5302, { 0xc7 });
        gbc.writeMem(0xee4e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xee4e);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee4e), 0x3);
        EXPECT(gbc.readMem(0xee4f), 0x53);
        // C7 0341
        gbc.setState(0xee17, 0xdbeb, 0xe5f0, 0xe6d1, 0x6993, 0x1518, 0x0, 0x0);
        gbc.writeMem(0xdbe9, { 0x0, 0x0 });
        gbc.writeMem(0xee17, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xdbe9);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbe9), 0x18);
        EXPECT(gbc.readMem(0xdbea), 0xee);
        EXPECT(gbc.readMem(0xee17), 0xc7);
        // C7 0343
        gbc.setState(0xc735, 0xad0a, 0x9df0, 0xc7a3, 0x1c40, 0xd0a3, 0x1, 0x1);
        gbc.writeMem(0xad08, { 0x0, 0x0 });
        gbc.writeMem(0xc735, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xad08);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad08), 0x36);
        EXPECT(gbc.readMem(0xad09), 0xc7);
        EXPECT(gbc.readMem(0xc735), 0xc7);
        // C7 0344
        gbc.setState(0x2d30, 0xd1e7, 0xa7f0, 0xc838, 0x28eb, 0x156e, 0x0, 0x1);
        gbc.writeMem(0x2d30, { 0xc7 });
        gbc.writeMem(0xd1e5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xd1e5);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1e5), 0x31);
        EXPECT(gbc.readMem(0xd1e6), 0x2d);
        // C7 0346
        gbc.setState(0x6f5, 0xf49e, 0x2350, 0xbf71, 0x147d, 0x8ae7, 0x0, 0x0);
        gbc.writeMem(0x6f5, { 0xc7 });
        gbc.writeMem(0xf49c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xf49c);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf49c), 0xf6);
        EXPECT(gbc.readMem(0xf49d), 0x6);
        // C7 034C
        gbc.setState(0x3227, 0xca35, 0x8b50, 0xfee1, 0x8b15, 0x843b, 0x0, 0x0);
        gbc.writeMem(0x3227, { 0xc7 });
        gbc.writeMem(0xca33, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xca33);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca33), 0x28);
        EXPECT(gbc.readMem(0xca34), 0x32);
        // C7 034E
        gbc.setState(0xa0eb, 0xed55, 0xbe0, 0xdcdc, 0xe4b8, 0x8d51, 0x0, 0x0);
        gbc.writeMem(0xa0eb, { 0xc7 });
        gbc.writeMem(0xed53, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xed53);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0eb), 0xc7);
        EXPECT(gbc.readMem(0xed53), 0xec);
        EXPECT(gbc.readMem(0xed54), 0xa0);
        // C7 034F
        gbc.setState(0x7389, 0xd41f, 0xcdc0, 0x9328, 0xf407, 0x4a2e, 0x1, 0x0);
        gbc.writeMem(0x7389, { 0xc7 });
        gbc.writeMem(0xd41d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xd41d);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd41d), 0x8a);
        EXPECT(gbc.readMem(0xd41e), 0x73);
        // C7 0351
        gbc.setState(0x67b6, 0xeb46, 0x54f0, 0xde61, 0xb908, 0x5ab9, 0x0, 0x0);
        gbc.writeMem(0x67b6, { 0xc7 });
        gbc.writeMem(0xeb44, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xeb44);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb44), 0xb7);
        EXPECT(gbc.readMem(0xeb45), 0x67);
        // C7 0352
        gbc.setState(0xf20, 0xfaaf, 0xc40, 0x307f, 0xa7ca, 0xeb1f, 0x1, 0x0);
        gbc.writeMem(0xf20, { 0xc7 });
        gbc.writeMem(0xfaad, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xfaad);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfaad), 0x21);
        EXPECT(gbc.readMem(0xfaae), 0xf);
        // C7 0353
        gbc.setState(0xa4b4, 0xd598, 0x7540, 0xab29, 0xd060, 0xb1a8, 0x0, 0x1);
        gbc.writeMem(0xa4b4, { 0xc7 });
        gbc.writeMem(0xd596, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xd596);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4b4), 0xc7);
        EXPECT(gbc.readMem(0xd596), 0xb5);
        EXPECT(gbc.readMem(0xd597), 0xa4);
        // C7 0354
        gbc.setState(0x980, 0x82ea, 0xa710, 0x8304, 0x36, 0x50cf, 0x0, 0x1);
        gbc.writeMem(0x980, { 0xc7 });
        gbc.writeMem(0x82e8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x82e8);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82e8), 0x81);
        EXPECT(gbc.readMem(0x82e9), 0x9);
        // C7 0355
        gbc.setState(0x8eba, 0xc43c, 0xf980, 0xb5ee, 0xe787, 0x2f38, 0x0, 0x1);
        gbc.writeMem(0x8eba, { 0xc7 });
        gbc.writeMem(0xc43a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xc43a);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8eba), 0xc7);
        EXPECT(gbc.readMem(0xc43a), 0xbb);
        EXPECT(gbc.readMem(0xc43b), 0x8e);
        // C7 0359
        gbc.setState(0x4800, 0x9a5b, 0xf470, 0x15d2, 0xb1a9, 0xa1, 0x1, 0x1);
        gbc.writeMem(0x4800, { 0xc7 });
        gbc.writeMem(0x9a59, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x9a59);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a59), 0x1);
        EXPECT(gbc.readMem(0x9a5a), 0x48);
        // C7 035A
        gbc.setState(0x80d7, 0xef5a, 0x1840, 0x51c, 0xc320, 0xbe2b, 0x0, 0x0);
        gbc.writeMem(0x80d7, { 0xc7 });
        gbc.writeMem(0xef58, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xef58);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80d7), 0xc7);
        EXPECT(gbc.readMem(0xef58), 0xd8);
        EXPECT(gbc.readMem(0xef59), 0x80);
        // C7 035E
        gbc.setState(0x19a9, 0xdaa2, 0xcf10, 0x97fd, 0x4b16, 0xf3c5, 0x0, 0x0);
        gbc.writeMem(0x19a9, { 0xc7 });
        gbc.writeMem(0xdaa0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xdaa0);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdaa0), 0xaa);
        EXPECT(gbc.readMem(0xdaa1), 0x19);
        // C7 0363
        gbc.setState(0xcb8a, 0xbb21, 0xb710, 0x4c4f, 0xf865, 0xfd03, 0x0, 0x1);
        gbc.writeMem(0xbb1f, { 0x0, 0x0 });
        gbc.writeMem(0xcb8a, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xbb1f);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb1f), 0x8b);
        EXPECT(gbc.readMem(0xbb20), 0xcb);
        EXPECT(gbc.readMem(0xcb8a), 0xc7);
        // C7 0364
        gbc.setState(0x5400, 0x93ba, 0xd130, 0x7492, 0x773f, 0x29b7, 0x1, 0x1);
        gbc.writeMem(0x5400, { 0xc7 });
        gbc.writeMem(0x93b8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x93b8);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93b8), 0x1);
        EXPECT(gbc.readMem(0x93b9), 0x54);
        // C7 0366
        gbc.setState(0xcb3, 0xc476, 0x30b0, 0xc9a4, 0xcc09, 0x328f, 0x0, 0x1);
        gbc.writeMem(0xcb3, { 0xc7 });
        gbc.writeMem(0xc474, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xc474);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc474), 0xb4);
        EXPECT(gbc.readMem(0xc475), 0xc);
        // C7 0367
        gbc.setState(0xc333, 0xb0e5, 0x4d50, 0x58e2, 0x5261, 0xfaa1, 0x0, 0x0);
        gbc.writeMem(0xb0e3, { 0x0, 0x0 });
        gbc.writeMem(0xc333, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xb0e3);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0e3), 0x34);
        EXPECT(gbc.readMem(0xb0e4), 0xc3);
        EXPECT(gbc.readMem(0xc333), 0xc7);
        // C7 0368
        gbc.setState(0x598a, 0xe611, 0x8270, 0xad9e, 0x8ac, 0x8ffe, 0x1, 0x1);
        gbc.writeMem(0x598a, { 0xc7 });
        gbc.writeMem(0xe60f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xe60f);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe60f), 0x8b);
        EXPECT(gbc.readMem(0xe610), 0x59);
        // C7 036B
        gbc.setState(0x6fe3, 0xe2c6, 0x86f0, 0x8eb5, 0x4e88, 0xfd5b, 0x1, 0x0);
        gbc.writeMem(0x6fe3, { 0xc7 });
        gbc.writeMem(0xe2c4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xe2c4);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2c4), 0xe4);
        EXPECT(gbc.readMem(0xe2c5), 0x6f);
        // C7 036C
        gbc.setState(0xdd41, 0xdb7d, 0xae40, 0xaedc, 0xacd1, 0x3834, 0x0, 0x0);
        gbc.writeMem(0xdb7b, { 0x0, 0x0 });
        gbc.writeMem(0xdd41, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xdb7b);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb7b), 0x42);
        EXPECT(gbc.readMem(0xdb7c), 0xdd);
        EXPECT(gbc.readMem(0xdd41), 0xc7);
        // C7 036E
        gbc.setState(0x4a9d, 0xa5d5, 0x1470, 0x4b28, 0x400a, 0xf8e2, 0x1, 0x1);
        gbc.writeMem(0x4a9d, { 0xc7 });
        gbc.writeMem(0xa5d3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xa5d3);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5d3), 0x9e);
        EXPECT(gbc.readMem(0xa5d4), 0x4a);
        // C7 0373
        gbc.setState(0xd1c0, 0x9fbd, 0xc8a0, 0x40e6, 0x3589, 0x2979, 0x0, 0x0);
        gbc.writeMem(0x9fbb, { 0x0, 0x0 });
        gbc.writeMem(0xd1c0, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x9fbb);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fbb), 0xc1);
        EXPECT(gbc.readMem(0x9fbc), 0xd1);
        EXPECT(gbc.readMem(0xd1c0), 0xc7);
        // C7 0375
        gbc.setState(0xcf42, 0xf7d4, 0x9850, 0x81c, 0x53fa, 0x2a4c, 0x0, 0x0);
        gbc.writeMem(0xcf42, { 0xc7 });
        gbc.writeMem(0xf7d2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xf7d2);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf42), 0xc7);
        EXPECT(gbc.readMem(0xf7d2), 0x43);
        EXPECT(gbc.readMem(0xf7d3), 0xcf);
        // C7 037A
        gbc.setState(0xb9c0, 0xf192, 0xf2a0, 0x1286, 0xeb86, 0x141e, 0x0, 0x1);
        gbc.writeMem(0xb9c0, { 0xc7 });
        gbc.writeMem(0xf190, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xf190);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9c0), 0xc7);
        EXPECT(gbc.readMem(0xf190), 0xc1);
        EXPECT(gbc.readMem(0xf191), 0xb9);
        // C7 037E
        gbc.setState(0x6427, 0xfe88, 0xd1b0, 0x4865, 0xbf1d, 0xce5f, 0x1, 0x0);
        gbc.writeMem(0x6427, { 0xc7 });
        gbc.writeMem(0xfe86, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xfe86);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfe86), 0x28);
        EXPECT(gbc.readMem(0xfe87), 0x64);
        // C7 0380
        gbc.setState(0x3b7a, 0xcaf5, 0x8250, 0x508d, 0x29a4, 0x2464, 0x1, 0x1);
        gbc.writeMem(0x3b7a, { 0xc7 });
        gbc.writeMem(0xcaf3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xcaf3);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcaf3), 0x7b);
        EXPECT(gbc.readMem(0xcaf4), 0x3b);
        // C7 0381
        gbc.setState(0xa2b, 0xab6e, 0x5ad0, 0x93c4, 0xf8d9, 0xf68a, 0x1, 0x1);
        gbc.writeMem(0xa2b, { 0xc7 });
        gbc.writeMem(0xab6c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xab6c);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab6c), 0x2c);
        EXPECT(gbc.readMem(0xab6d), 0xa);
        // C7 0383
        gbc.setState(0x4b76, 0x83ad, 0xd640, 0xec6, 0x2c8d, 0x7b56, 0x1, 0x0);
        gbc.writeMem(0x4b76, { 0xc7 });
        gbc.writeMem(0x83ab, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x83ab);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83ab), 0x77);
        EXPECT(gbc.readMem(0x83ac), 0x4b);
        // C7 0384
        gbc.setState(0x9d8d, 0xb889, 0x2d20, 0x4252, 0x3521, 0x1916, 0x0, 0x0);
        gbc.writeMem(0x9d8d, { 0xc7 });
        gbc.writeMem(0xb887, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xb887);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d8d), 0xc7);
        EXPECT(gbc.readMem(0xb887), 0x8e);
        EXPECT(gbc.readMem(0xb888), 0x9d);
        // C7 0385
        gbc.setState(0x6952, 0xce50, 0x6eb0, 0xa22d, 0xfd59, 0xf6ec, 0x1, 0x1);
        gbc.writeMem(0x6952, { 0xc7 });
        gbc.writeMem(0xce4e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xce4e);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce4e), 0x53);
        EXPECT(gbc.readMem(0xce4f), 0x69);
        // C7 0386
        gbc.setState(0x99f7, 0x9b14, 0x60e0, 0x8918, 0x83aa, 0x48de, 0x1, 0x0);
        gbc.writeMem(0x99f7, { 0xc7 });
        gbc.writeMem(0x9b12, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x9b12);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99f7), 0xc7);
        EXPECT(gbc.readMem(0x9b12), 0xf8);
        EXPECT(gbc.readMem(0x9b13), 0x99);
        // C7 0387
        gbc.setState(0x5c3a, 0xaf6e, 0xd9c0, 0xd973, 0xe343, 0x159b, 0x0, 0x1);
        gbc.writeMem(0x5c3a, { 0xc7 });
        gbc.writeMem(0xaf6c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xaf6c);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf6c), 0x3b);
        EXPECT(gbc.readMem(0xaf6d), 0x5c);
        // C7 038A
        gbc.setState(0x97ae, 0x842e, 0x87b0, 0x11f5, 0x771f, 0xbd3b, 0x0, 0x1);
        gbc.writeMem(0x842c, { 0x0, 0x0 });
        gbc.writeMem(0x97ae, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x842c);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x842c), 0xaf);
        EXPECT(gbc.readMem(0x842d), 0x97);
        EXPECT(gbc.readMem(0x97ae), 0xc7);
        // C7 038B
        gbc.setState(0x54e, 0xf673, 0x4fb0, 0x4342, 0x85e0, 0x428, 0x0, 0x0);
        gbc.writeMem(0x54e, { 0xc7 });
        gbc.writeMem(0xf671, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xf671);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf671), 0x4f);
        EXPECT(gbc.readMem(0xf672), 0x5);
        // C7 038E
        gbc.setState(0xd762, 0x8847, 0x6e20, 0xeca, 0x188d, 0xe911, 0x0, 0x0);
        gbc.writeMem(0x8845, { 0x0, 0x0 });
        gbc.writeMem(0xd762, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x8845);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8845), 0x63);
        EXPECT(gbc.readMem(0x8846), 0xd7);
        EXPECT(gbc.readMem(0xd762), 0xc7);
        // C7 039A
        gbc.setState(0xb654, 0xfb0b, 0xad10, 0x96bd, 0x7830, 0x8e7d, 0x1, 0x0);
        gbc.writeMem(0xb654, { 0xc7 });
        gbc.writeMem(0xfb09, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xfb09);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb654), 0xc7);
        EXPECT(gbc.readMem(0xfb09), 0x55);
        EXPECT(gbc.readMem(0xfb0a), 0xb6);
        // C7 039D
        gbc.setState(0x84fc, 0xd19e, 0x7ca0, 0x6ee8, 0x9f2, 0xcf2c, 0x1, 0x1);
        gbc.writeMem(0x84fc, { 0xc7 });
        gbc.writeMem(0xd19c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xd19c);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84fc), 0xc7);
        EXPECT(gbc.readMem(0xd19c), 0xfd);
        EXPECT(gbc.readMem(0xd19d), 0x84);
        // C7 039E
        gbc.setState(0x4ddb, 0x8eea, 0x8f00, 0x35ce, 0xbc2c, 0x1ceb, 0x1, 0x0);
        gbc.writeMem(0x4ddb, { 0xc7 });
        gbc.writeMem(0x8ee8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x8ee8);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ee8), 0xdc);
        EXPECT(gbc.readMem(0x8ee9), 0x4d);
        // C7 039F
        gbc.setState(0xb5b4, 0xa313, 0xbde0, 0x2dc4, 0xcf53, 0xdde3, 0x1, 0x0);
        gbc.writeMem(0xa311, { 0x0, 0x0 });
        gbc.writeMem(0xb5b4, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xa311);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa311), 0xb5);
        EXPECT(gbc.readMem(0xa312), 0xb5);
        EXPECT(gbc.readMem(0xb5b4), 0xc7);
        // C7 03A1
        gbc.setState(0x9622, 0xb557, 0x1d0, 0xf008, 0x787e, 0x265f, 0x0, 0x1);
        gbc.writeMem(0x9622, { 0xc7 });
        gbc.writeMem(0xb555, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xb555);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9622), 0xc7);
        EXPECT(gbc.readMem(0xb555), 0x23);
        EXPECT(gbc.readMem(0xb556), 0x96);
        // C7 03A2
        gbc.setState(0xad5, 0xfd41, 0x2250, 0x829a, 0x28a6, 0x404e, 0x0, 0x0);
        gbc.writeMem(0xad5, { 0xc7 });
        gbc.writeMem(0xfd3f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xfd3f);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfd3f), 0xd6);
        EXPECT(gbc.readMem(0xfd40), 0xa);
        // C7 03A3
        gbc.setState(0x9f76, 0xd52e, 0x1860, 0xc66b, 0x5549, 0x6778, 0x0, 0x0);
        gbc.writeMem(0x9f76, { 0xc7 });
        gbc.writeMem(0xd52c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xd52c);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f76), 0xc7);
        EXPECT(gbc.readMem(0xd52c), 0x77);
        EXPECT(gbc.readMem(0xd52d), 0x9f);
        // C7 03A7
        gbc.setState(0xe181, 0xba7e, 0x2730, 0xe699, 0xce40, 0xd144, 0x0, 0x1);
        gbc.writeMem(0xba7c, { 0x0, 0x0 });
        gbc.writeMem(0xe181, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xba7c);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba7c), 0x82);
        EXPECT(gbc.readMem(0xba7d), 0xe1);
        EXPECT(gbc.readMem(0xe181), 0xc7);
        // C7 03A8
        gbc.setState(0x9772, 0xf2bb, 0xc890, 0xf02, 0xf68b, 0x4261, 0x0, 0x0);
        gbc.writeMem(0x9772, { 0xc7 });
        gbc.writeMem(0xf2b9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xf2b9);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9772), 0xc7);
        EXPECT(gbc.readMem(0xf2b9), 0x73);
        EXPECT(gbc.readMem(0xf2ba), 0x97);
        // C7 03A9
        gbc.setState(0x9d6f, 0xb968, 0xe0d0, 0x1f7d, 0x45dd, 0x2df0, 0x0, 0x0);
        gbc.writeMem(0x9d6f, { 0xc7 });
        gbc.writeMem(0xb966, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xb966);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d6f), 0xc7);
        EXPECT(gbc.readMem(0xb966), 0x70);
        EXPECT(gbc.readMem(0xb967), 0x9d);
        // C7 03AA
        gbc.setState(0xcca8, 0xef35, 0x39a0, 0x7d7b, 0x9ff2, 0x7668, 0x1, 0x1);
        gbc.writeMem(0xcca8, { 0xc7 });
        gbc.writeMem(0xef33, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xef33);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcca8), 0xc7);
        EXPECT(gbc.readMem(0xef33), 0xa9);
        EXPECT(gbc.readMem(0xef34), 0xcc);
        // C7 03AB
        gbc.setState(0x8b8f, 0xecb0, 0xcc20, 0x8d42, 0xb76c, 0x3e0e, 0x0, 0x0);
        gbc.writeMem(0x8b8f, { 0xc7 });
        gbc.writeMem(0xecae, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xecae);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b8f), 0xc7);
        EXPECT(gbc.readMem(0xecae), 0x90);
        EXPECT(gbc.readMem(0xecaf), 0x8b);
        // C7 03AC
        gbc.setState(0x3f9c, 0xe5ce, 0x95e0, 0x3ccf, 0xa5f5, 0xa221, 0x0, 0x1);
        gbc.writeMem(0x3f9c, { 0xc7 });
        gbc.writeMem(0xe5cc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xe5cc);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5cc), 0x9d);
        EXPECT(gbc.readMem(0xe5cd), 0x3f);
        // C7 03B2
        gbc.setState(0x3149, 0x83a7, 0x1870, 0x1ebc, 0xc97c, 0xc95, 0x1, 0x1);
        gbc.writeMem(0x3149, { 0xc7 });
        gbc.writeMem(0x83a5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x83a5);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83a5), 0x4a);
        EXPECT(gbc.readMem(0x83a6), 0x31);
        // C7 03B3
        gbc.setState(0x1fb6, 0xe8f9, 0xa050, 0xa154, 0x7737, 0x9e0c, 0x0, 0x0);
        gbc.writeMem(0x1fb6, { 0xc7 });
        gbc.writeMem(0xe8f7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xe8f7);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8f7), 0xb7);
        EXPECT(gbc.readMem(0xe8f8), 0x1f);
        // C7 03B4
        gbc.setState(0xea19, 0xdcf8, 0xa0b0, 0x515f, 0x9adf, 0x5e2d, 0x0, 0x0);
        gbc.writeMem(0xdcf6, { 0x0, 0x0 });
        gbc.writeMem(0xea19, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xdcf6);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcf6), 0x1a);
        EXPECT(gbc.readMem(0xdcf7), 0xea);
        EXPECT(gbc.readMem(0xea19), 0xc7);
        // C7 03B5
        gbc.setState(0x2f8c, 0xd92c, 0xecc0, 0x5f54, 0x8c3c, 0x8187, 0x1, 0x1);
        gbc.writeMem(0x2f8c, { 0xc7 });
        gbc.writeMem(0xd92a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xd92a);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd92a), 0x8d);
        EXPECT(gbc.readMem(0xd92b), 0x2f);
        // C7 03B6
        gbc.setState(0x5afb, 0xa991, 0xa570, 0x98e9, 0x5b0f, 0x5039, 0x0, 0x1);
        gbc.writeMem(0x5afb, { 0xc7 });
        gbc.writeMem(0xa98f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xa98f);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa98f), 0xfc);
        EXPECT(gbc.readMem(0xa990), 0x5a);
        // C7 03B8
        gbc.setState(0x8faa, 0xe308, 0x2b50, 0x611b, 0xbdf1, 0xd6a5, 0x1, 0x0);
        gbc.writeMem(0x8faa, { 0xc7 });
        gbc.writeMem(0xe306, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xe306);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8faa), 0xc7);
        EXPECT(gbc.readMem(0xe306), 0xab);
        EXPECT(gbc.readMem(0xe307), 0x8f);
        // C7 03B9
        gbc.setState(0xbdaa, 0xf5b1, 0x7b30, 0x5785, 0x332b, 0xa862, 0x1, 0x1);
        gbc.writeMem(0xbdaa, { 0xc7 });
        gbc.writeMem(0xf5af, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xf5af);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdaa), 0xc7);
        EXPECT(gbc.readMem(0xf5af), 0xab);
        EXPECT(gbc.readMem(0xf5b0), 0xbd);
        // C7 03BB
        gbc.setState(0x5a67, 0xe0f2, 0xf850, 0x7b53, 0x4640, 0xe319, 0x0, 0x1);
        gbc.writeMem(0x5a67, { 0xc7 });
        gbc.writeMem(0xe0f0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xe0f0);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0f0), 0x68);
        EXPECT(gbc.readMem(0xe0f1), 0x5a);
        // C7 03BF
        gbc.setState(0xb7d4, 0x886e, 0x81d0, 0x80a1, 0x6185, 0x92e0, 0x1, 0x0);
        gbc.writeMem(0x886c, { 0x0, 0x0 });
        gbc.writeMem(0xb7d4, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x886c);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x886c), 0xd5);
        EXPECT(gbc.readMem(0x886d), 0xb7);
        EXPECT(gbc.readMem(0xb7d4), 0xc7);
        // C7 03C6
        gbc.setState(0xd84c, 0xdb4d, 0x8ba0, 0x8204, 0x789f, 0x889d, 0x1, 0x0);
        gbc.writeMem(0xd84c, { 0xc7 });
        gbc.writeMem(0xdb4b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xdb4b);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd84c), 0xc7);
        EXPECT(gbc.readMem(0xdb4b), 0x4d);
        EXPECT(gbc.readMem(0xdb4c), 0xd8);
        // C7 03C7
        gbc.setState(0x4287, 0xf34e, 0x1670, 0xc6f7, 0x6504, 0xfe0b, 0x0, 0x0);
        gbc.writeMem(0x4287, { 0xc7 });
        gbc.writeMem(0xf34c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xf34c);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf34c), 0x88);
        EXPECT(gbc.readMem(0xf34d), 0x42);
        // C7 03C9
        gbc.setState(0x1b2f, 0xd70a, 0x10c0, 0x441, 0x4317, 0x9b7b, 0x1, 0x1);
        gbc.writeMem(0x1b2f, { 0xc7 });
        gbc.writeMem(0xd708, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xd708);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd708), 0x30);
        EXPECT(gbc.readMem(0xd709), 0x1b);
        // C7 03CB
        gbc.setState(0x8f3d, 0xb3ab, 0x1ec0, 0xcd21, 0x221, 0xc15d, 0x0, 0x0);
        gbc.writeMem(0x8f3d, { 0xc7 });
        gbc.writeMem(0xb3a9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xb3a9);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f3d), 0xc7);
        EXPECT(gbc.readMem(0xb3a9), 0x3e);
        EXPECT(gbc.readMem(0xb3aa), 0x8f);
        // C7 03CC
        gbc.setState(0xeee, 0xe63c, 0x8820, 0x914, 0x548d, 0x1943, 0x0, 0x1);
        gbc.writeMem(0xeee, { 0xc7 });
        gbc.writeMem(0xe63a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xe63a);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe63a), 0xef);
        EXPECT(gbc.readMem(0xe63b), 0xe);
        // C7 03CD
        gbc.setState(0x30af, 0x8c06, 0xfaa0, 0x9d2d, 0x3902, 0xbf35, 0x1, 0x0);
        gbc.writeMem(0x30af, { 0xc7 });
        gbc.writeMem(0x8c04, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x8c04);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c04), 0xb0);
        EXPECT(gbc.readMem(0x8c05), 0x30);
        // C7 03CE
        gbc.setState(0x3474, 0x8340, 0xc310, 0xd3e9, 0x40c2, 0x3b0f, 0x1, 0x0);
        gbc.writeMem(0x3474, { 0xc7 });
        gbc.writeMem(0x833e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x833e);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x833e), 0x75);
        EXPECT(gbc.readMem(0x833f), 0x34);
        // C7 03CF
        gbc.setState(0x6d27, 0xa489, 0x2c90, 0x3ae, 0x8647, 0xf683, 0x0, 0x0);
        gbc.writeMem(0x6d27, { 0xc7 });
        gbc.writeMem(0xa487, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xa487);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa487), 0x28);
        EXPECT(gbc.readMem(0xa488), 0x6d);
        // C7 03D1
        gbc.setState(0xc42c, 0x8731, 0x9a70, 0xc3f, 0x81c5, 0x52be, 0x0, 0x0);
        gbc.writeMem(0x872f, { 0x0, 0x0 });
        gbc.writeMem(0xc42c, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x872f);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x872f), 0x2d);
        EXPECT(gbc.readMem(0x8730), 0xc4);
        EXPECT(gbc.readMem(0xc42c), 0xc7);
        // C7 03D4
        gbc.setState(0x91ca, 0xdc90, 0x8bd0, 0x9b9a, 0xff8b, 0x7154, 0x1, 0x0);
        gbc.writeMem(0x91ca, { 0xc7 });
        gbc.writeMem(0xdc8e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xdc8e);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91ca), 0xc7);
        EXPECT(gbc.readMem(0xdc8e), 0xcb);
        EXPECT(gbc.readMem(0xdc8f), 0x91);
        // C7 03D7
        gbc.setState(0xdfa7, 0xac33, 0xab60, 0xf9d, 0x35b0, 0xeee, 0x0, 0x1);
        gbc.writeMem(0xac31, { 0x0, 0x0 });
        gbc.writeMem(0xdfa7, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xac31);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac31), 0xa8);
        EXPECT(gbc.readMem(0xac32), 0xdf);
        EXPECT(gbc.readMem(0xdfa7), 0xc7);
        // C7 03D9
        gbc.setState(0xe1a, 0xf2b1, 0x9a60, 0x5f4c, 0x3a76, 0x8e9, 0x1, 0x1);
        gbc.writeMem(0xe1a, { 0xc7 });
        gbc.writeMem(0xf2af, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xf2af);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf2af), 0x1b);
        EXPECT(gbc.readMem(0xf2b0), 0xe);
        // C7 03DB
        gbc.setState(0x7a6a, 0xa999, 0xd020, 0x4e68, 0x5359, 0xbb8a, 0x1, 0x1);
        gbc.writeMem(0x7a6a, { 0xc7 });
        gbc.writeMem(0xa997, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xa997);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa997), 0x6b);
        EXPECT(gbc.readMem(0xa998), 0x7a);
        // C7 03DE
        gbc.setState(0xdb9, 0x99a9, 0xdab0, 0x501e, 0x4c66, 0xa16f, 0x1, 0x0);
        gbc.writeMem(0xdb9, { 0xc7 });
        gbc.writeMem(0x99a7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x99a7);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99a7), 0xba);
        EXPECT(gbc.readMem(0x99a8), 0xd);
        // C7 03DF
        gbc.setState(0x55a6, 0xd10a, 0xcb00, 0x8a23, 0xf43c, 0x5303, 0x1, 0x0);
        gbc.writeMem(0x55a6, { 0xc7 });
        gbc.writeMem(0xd108, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xd108);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd108), 0xa7);
        EXPECT(gbc.readMem(0xd109), 0x55);
        // C7 03E0
        gbc.setState(0xeb9, 0xffd6, 0xe8a0, 0xda56, 0x1d52, 0x5b1a, 0x1, 0x0);
        gbc.writeMem(0xeb9, { 0xc7 });
        gbc.writeMem(0xffd4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xffd4);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffd4), 0xba);
        EXPECT(gbc.readMem(0xffd5), 0xe);
        // C7 03E1
        gbc.setState(0x1acf, 0xafb1, 0x51d0, 0xb120, 0x256b, 0x5cf3, 0x0, 0x0);
        gbc.writeMem(0x1acf, { 0xc7 });
        gbc.writeMem(0xafaf, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xafaf);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafaf), 0xd0);
        EXPECT(gbc.readMem(0xafb0), 0x1a);
        // C7 03E6
        gbc.setState(0x777d, 0xbfd9, 0xe060, 0x709, 0xd514, 0x1f63, 0x1, 0x1);
        gbc.writeMem(0x777d, { 0xc7 });
        gbc.writeMem(0xbfd7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xbfd7);
        EXPECT(gbc.pc(), 0x0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfd7), 0x7e);
        EXPECT(gbc.readMem(0xbfd8), 0x77);
    }
}
#endif
