#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_46)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_46) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // 46 0000
        gbc.setState(0x2474, 0xdba9, 0x7980, 0x2117, 0xe314, 0x9bc3, 0x0, 0x1);
        gbc.writeMem(0x2474, { 0x46 });
        gbc.writeMem(0x9bc3, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xdba9);
        EXPECT(gbc.pc(), 0x2475);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bc3), 0x9);
        // 46 0001
        gbc.setState(0x5bb2, 0x3886, 0xc3c0, 0x9438, 0x4de4, 0x751, 0x1, 0x0);
        gbc.writeMem(0x751, { 0x50 });
        gbc.writeMem(0x5bb2, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x3886);
        EXPECT(gbc.pc(), 0x5bb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 0002
        gbc.setState(0x4796, 0x3320, 0x5860, 0x3a3c, 0xe67d, 0x54ae, 0x0, 0x1);
        gbc.writeMem(0x4796, { 0x46 });
        gbc.writeMem(0x54ae, { 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x3320);
        EXPECT(gbc.pc(), 0x4797);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 0003
        gbc.setState(0xd3b3, 0x68a6, 0x9740, 0x8b7e, 0x2f95, 0x7115, 0x1, 0x1);
        gbc.writeMem(0x7115, { 0x3c });
        gbc.writeMem(0xd3b3, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x68a6);
        EXPECT(gbc.pc(), 0xd3b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3b3), 0x46);
        // 46 0004
        gbc.setState(0xd877, 0xde9, 0x4f10, 0x84e6, 0x1b3c, 0xc152, 0x0, 0x0);
        gbc.writeMem(0xc152, { 0x75 });
        gbc.writeMem(0xd877, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xde9);
        EXPECT(gbc.pc(), 0xd878);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc152), 0x75);
        EXPECT(gbc.readMem(0xd877), 0x46);
        // 46 0005
        gbc.setState(0x645, 0x82d3, 0x7200, 0x6184, 0x782, 0x5aa8, 0x1, 0x1);
        gbc.writeMem(0x645, { 0x46 });
        gbc.writeMem(0x5aa8, { 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x82d3);
        EXPECT(gbc.pc(), 0x646);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 0006
        gbc.setState(0x22a8, 0xbcea, 0xca00, 0xb612, 0xf72e, 0xa274, 0x0, 0x1);
        gbc.writeMem(0x22a8, { 0x46 });
        gbc.writeMem(0xa274, { 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xbcea);
        EXPECT(gbc.pc(), 0x22a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa274), 0xe6);
        // 46 0007
        gbc.setState(0x4be1, 0x786b, 0xa860, 0x7ab5, 0x8519, 0x6a8a, 0x1, 0x0);
        gbc.writeMem(0x4be1, { 0x46 });
        gbc.writeMem(0x6a8a, { 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x786b);
        EXPECT(gbc.pc(), 0x4be2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 0009
        gbc.setState(0x9e3, 0x4be3, 0xc7d0, 0x6303, 0x46a, 0x3367, 0x1, 0x0);
        gbc.writeMem(0x9e3, { 0x46 });
        gbc.writeMem(0x3367, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x4be3);
        EXPECT(gbc.pc(), 0x9e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 000A
        gbc.setState(0x1820, 0x8a00, 0x28d0, 0xb9b, 0xf231, 0x31cb, 0x1, 0x0);
        gbc.writeMem(0x1820, { 0x46 });
        gbc.writeMem(0x31cb, { 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x8a00);
        EXPECT(gbc.pc(), 0x1821);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 000B
        gbc.setState(0xaf0c, 0xd817, 0xa030, 0x2b3c, 0xfb2a, 0xe76, 0x1, 0x0);
        gbc.writeMem(0xe76, { 0x58 });
        gbc.writeMem(0xaf0c, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xd817);
        EXPECT(gbc.pc(), 0xaf0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf0c), 0x46);
        // 46 000C
        gbc.setState(0xb2, 0xb977, 0x51f0, 0x27cd, 0x6891, 0x608a, 0x0, 0x0);
        gbc.writeMem(0xb2, { 0x46 });
        gbc.writeMem(0x608a, { 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xb977);
        EXPECT(gbc.pc(), 0xb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 000D
        gbc.setState(0xebc9, 0xa0ca, 0x5630, 0x413f, 0xc927, 0x4351, 0x0, 0x0);
        gbc.writeMem(0x4351, { 0x91 });
        gbc.writeMem(0xebc9, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xa0ca);
        EXPECT(gbc.pc(), 0xebca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebc9), 0x46);
        // 46 000E
        gbc.setState(0xdbb, 0x8189, 0x6180, 0x9996, 0xb514, 0x1735, 0x0, 0x0);
        gbc.writeMem(0xdbb, { 0x46 });
        gbc.writeMem(0x1735, { 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x8189);
        EXPECT(gbc.pc(), 0xdbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 000F
        gbc.setState(0x6263, 0x26ec, 0x11a0, 0xba96, 0x6fa5, 0xe77b, 0x1, 0x1);
        gbc.writeMem(0x6263, { 0x46 });
        gbc.writeMem(0xe77b, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x26ec);
        EXPECT(gbc.pc(), 0x6264);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe77b), 0x9c);
        // 46 0010
        gbc.setState(0xbf31, 0xd919, 0xead0, 0xcc74, 0xbd1, 0x5282, 0x0, 0x0);
        gbc.writeMem(0x5282, { 0x8d });
        gbc.writeMem(0xbf31, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xd919);
        EXPECT(gbc.pc(), 0xbf32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf31), 0x46);
        // 46 0011
        gbc.setState(0xa74c, 0x7c00, 0x17b0, 0x6a23, 0xf5e7, 0xb1e3, 0x1, 0x0);
        gbc.writeMem(0xa74c, { 0x46 });
        gbc.writeMem(0xb1e3, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x7c00);
        EXPECT(gbc.pc(), 0xa74d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa74c), 0x46);
        EXPECT(gbc.readMem(0xb1e3), 0x8b);
        // 46 0012
        gbc.setState(0x57cf, 0xd377, 0xb670, 0x4f9e, 0x81bc, 0x1a86, 0x1, 0x1);
        gbc.writeMem(0x1a86, { 0xd9 });
        gbc.writeMem(0x57cf, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xd377);
        EXPECT(gbc.pc(), 0x57d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 0013
        gbc.setState(0x1b7e, 0x9f20, 0x8690, 0xc49b, 0x93ef, 0x6556, 0x1, 0x1);
        gbc.writeMem(0x1b7e, { 0x46 });
        gbc.writeMem(0x6556, { 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x9f20);
        EXPECT(gbc.pc(), 0x1b7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 0014
        gbc.setState(0x93ca, 0xa06f, 0x2100, 0x7f26, 0xdbe7, 0xbc34, 0x1, 0x1);
        gbc.writeMem(0x93ca, { 0x46 });
        gbc.writeMem(0xbc34, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xa06f);
        EXPECT(gbc.pc(), 0x93cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93ca), 0x46);
        EXPECT(gbc.readMem(0xbc34), 0x94);
        // 46 0015
        gbc.setState(0x76bf, 0xe424, 0xc040, 0x59dd, 0x7f85, 0x8119, 0x0, 0x1);
        gbc.writeMem(0x76bf, { 0x46 });
        gbc.writeMem(0x8119, { 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xe424);
        EXPECT(gbc.pc(), 0x76c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8119), 0xab);
        // 46 0016
        gbc.setState(0xd98d, 0xfe96, 0x1490, 0x46e8, 0x9c49, 0xcdec, 0x0, 0x1);
        gbc.writeMem(0xcdec, { 0x47 });
        gbc.writeMem(0xd98d, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xfe96);
        EXPECT(gbc.pc(), 0xd98e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdec), 0x47);
        EXPECT(gbc.readMem(0xd98d), 0x46);
        // 46 0017
        gbc.setState(0xeb43, 0x9c2, 0xe460, 0x8ac5, 0x13ea, 0x8bbd, 0x1, 0x1);
        gbc.writeMem(0x8bbd, { 0x5b });
        gbc.writeMem(0xeb43, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x9c2);
        EXPECT(gbc.pc(), 0xeb44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bbd), 0x5b);
        EXPECT(gbc.readMem(0xeb43), 0x46);
        // 46 0018
        gbc.setState(0x4bb7, 0x39be, 0xa280, 0xab28, 0x3111, 0x3494, 0x0, 0x0);
        gbc.writeMem(0x3494, { 0x48 });
        gbc.writeMem(0x4bb7, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x39be);
        EXPECT(gbc.pc(), 0x4bb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 0019
        gbc.setState(0x8ca3, 0x3d7e, 0x4140, 0xb88b, 0xa6cd, 0x260d, 0x0, 0x1);
        gbc.writeMem(0x260d, { 0x65 });
        gbc.writeMem(0x8ca3, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x3d7e);
        EXPECT(gbc.pc(), 0x8ca4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ca3), 0x46);
        // 46 001A
        gbc.setState(0x8862, 0x7237, 0x76c0, 0xecaa, 0xa246, 0x30b7, 0x1, 0x0);
        gbc.writeMem(0x30b7, { 0xa4 });
        gbc.writeMem(0x8862, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x7237);
        EXPECT(gbc.pc(), 0x8863);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8862), 0x46);
        // 46 001B
        gbc.setState(0xa6f2, 0x410b, 0xe110, 0xf24e, 0x311, 0x5be9, 0x0, 0x0);
        gbc.writeMem(0x5be9, { 0xef });
        gbc.writeMem(0xa6f2, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x410b);
        EXPECT(gbc.pc(), 0xa6f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6f2), 0x46);
        // 46 001C
        gbc.setState(0xd4b9, 0xb5dd, 0x4dd0, 0x61b2, 0xe859, 0x1eeb, 0x0, 0x1);
        gbc.writeMem(0x1eeb, { 0xb7 });
        gbc.writeMem(0xd4b9, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xb5dd);
        EXPECT(gbc.pc(), 0xd4ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4b9), 0x46);
        // 46 001D
        gbc.setState(0x60a7, 0x2fa9, 0x7ba0, 0xbafd, 0x4fa9, 0xa9ab, 0x1, 0x1);
        gbc.writeMem(0x60a7, { 0x46 });
        gbc.writeMem(0xa9ab, { 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x2fa9);
        EXPECT(gbc.pc(), 0x60a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9ab), 0x4);
        // 46 001E
        gbc.setState(0x3a74, 0xff6f, 0x1610, 0x36c1, 0x322e, 0x6610, 0x1, 0x0);
        gbc.writeMem(0x3a74, { 0x46 });
        gbc.writeMem(0x6610, { 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xff6f);
        EXPECT(gbc.pc(), 0x3a75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 0020
        gbc.setState(0xe1a9, 0x56d3, 0xfb80, 0x3eb2, 0xd44a, 0x9c54, 0x1, 0x1);
        gbc.writeMem(0x9c54, { 0x62 });
        gbc.writeMem(0xe1a9, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x56d3);
        EXPECT(gbc.pc(), 0xe1aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c54), 0x62);
        EXPECT(gbc.readMem(0xe1a9), 0x46);
        // 46 0021
        gbc.setState(0xb8fe, 0x339d, 0xb110, 0x9802, 0x8b3d, 0xaf74, 0x1, 0x1);
        gbc.writeMem(0xaf74, { 0xab });
        gbc.writeMem(0xb8fe, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x339d);
        EXPECT(gbc.pc(), 0xb8ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf74), 0xab);
        EXPECT(gbc.readMem(0xb8fe), 0x46);
        // 46 0022
        gbc.setState(0xeca2, 0x2e97, 0x2940, 0x8622, 0xe417, 0x5a9a, 0x0, 0x0);
        gbc.writeMem(0x5a9a, { 0xad });
        gbc.writeMem(0xeca2, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x2e97);
        EXPECT(gbc.pc(), 0xeca3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeca2), 0x46);
        // 46 0024
        gbc.setState(0x9001, 0xe393, 0x4010, 0xdb6c, 0x9b67, 0x87b5, 0x0, 0x1);
        gbc.writeMem(0x87b5, { 0x20 });
        gbc.writeMem(0x9001, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xe393);
        EXPECT(gbc.pc(), 0x9002);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87b5), 0x20);
        EXPECT(gbc.readMem(0x9001), 0x46);
        // 46 0026
        gbc.setState(0xdde5, 0x4d52, 0xdcf0, 0x1b3f, 0xee5e, 0xf7a1, 0x0, 0x1);
        gbc.writeMem(0xdde5, { 0x46 });
        gbc.writeMem(0xf7a1, { 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x4d52);
        EXPECT(gbc.pc(), 0xdde6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdde5), 0x46);
        EXPECT(gbc.readMem(0xf7a1), 0x16);
        // 46 0027
        gbc.setState(0x4335, 0xda8a, 0x7130, 0x301, 0x2402, 0x57e2, 0x0, 0x0);
        gbc.writeMem(0x4335, { 0x46 });
        gbc.writeMem(0x57e2, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xda8a);
        EXPECT(gbc.pc(), 0x4336);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 0029
        gbc.setState(0xb78e, 0xaa1b, 0x9000, 0xdec7, 0x81a4, 0xbf3d, 0x1, 0x0);
        gbc.writeMem(0xb78e, { 0x46 });
        gbc.writeMem(0xbf3d, { 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xaa1b);
        EXPECT(gbc.pc(), 0xb78f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb78e), 0x46);
        EXPECT(gbc.readMem(0xbf3d), 0x88);
        // 46 002A
        gbc.setState(0x4d10, 0xa10b, 0xcac0, 0x106a, 0x384b, 0x547b, 0x0, 0x1);
        gbc.writeMem(0x4d10, { 0x46 });
        gbc.writeMem(0x547b, { 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xa10b);
        EXPECT(gbc.pc(), 0x4d11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 002B
        gbc.setState(0x7d38, 0x363, 0xa2d0, 0xa43, 0x2116, 0x9fe6, 0x0, 0x0);
        gbc.writeMem(0x7d38, { 0x46 });
        gbc.writeMem(0x9fe6, { 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x363);
        EXPECT(gbc.pc(), 0x7d39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fe6), 0x74);
        // 46 002C
        gbc.setState(0x7d02, 0x7f8, 0xfe60, 0xa03, 0xff96, 0x8c93, 0x1, 0x1);
        gbc.writeMem(0x7d02, { 0x46 });
        gbc.writeMem(0x8c93, { 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x7f8);
        EXPECT(gbc.pc(), 0x7d03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c93), 0xc3);
        // 46 002D
        gbc.setState(0x63aa, 0xced0, 0x17c0, 0xe683, 0x1441, 0x577e, 0x1, 0x0);
        gbc.writeMem(0x577e, { 0x3c });
        gbc.writeMem(0x63aa, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xced0);
        EXPECT(gbc.pc(), 0x63ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 002E
        gbc.setState(0xbe63, 0x2252, 0x88e0, 0x6dc8, 0x18a8, 0x18cc, 0x1, 0x1);
        gbc.writeMem(0x18cc, { 0xb5 });
        gbc.writeMem(0xbe63, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x2252);
        EXPECT(gbc.pc(), 0xbe64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe63), 0x46);
        // 46 002F
        gbc.setState(0xdfd1, 0x7a94, 0xfe0, 0x776, 0x9626, 0x539d, 0x0, 0x1);
        gbc.writeMem(0x539d, { 0xf5 });
        gbc.writeMem(0xdfd1, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x7a94);
        EXPECT(gbc.pc(), 0xdfd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfd1), 0x46);
        // 46 0030
        gbc.setState(0xb884, 0xc047, 0x8090, 0xedb1, 0x8c9e, 0x44c7, 0x1, 0x1);
        gbc.writeMem(0x44c7, { 0x6 });
        gbc.writeMem(0xb884, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xc047);
        EXPECT(gbc.pc(), 0xb885);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb884), 0x46);
        // 46 0031
        gbc.setState(0xa490, 0xaeec, 0x99e0, 0xb7d, 0x48d2, 0x178f, 0x1, 0x0);
        gbc.writeMem(0x178f, { 0x68 });
        gbc.writeMem(0xa490, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xaeec);
        EXPECT(gbc.pc(), 0xa491);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa490), 0x46);
        // 46 0032
        gbc.setState(0x6175, 0x3b6c, 0xcd10, 0xdf7a, 0xef8a, 0x83d7, 0x0, 0x0);
        gbc.writeMem(0x6175, { 0x46 });
        gbc.writeMem(0x83d7, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x3b6c);
        EXPECT(gbc.pc(), 0x6176);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83d7), 0xa3);
        // 46 0033
        gbc.setState(0x468a, 0x2703, 0xc960, 0xd0d8, 0x3e5, 0x7fa, 0x1, 0x0);
        gbc.writeMem(0x7fa, { 0xac });
        gbc.writeMem(0x468a, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x2703);
        EXPECT(gbc.pc(), 0x468b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 0034
        gbc.setState(0x5e63, 0xb2d4, 0x2c50, 0xb256, 0x36a0, 0x4939, 0x1, 0x0);
        gbc.writeMem(0x4939, { 0x9c });
        gbc.writeMem(0x5e63, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xb2d4);
        EXPECT(gbc.pc(), 0x5e64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 0035
        gbc.setState(0x657d, 0xbf21, 0x73e0, 0xb543, 0x9185, 0xf7f3, 0x0, 0x1);
        gbc.writeMem(0x657d, { 0x46 });
        gbc.writeMem(0xf7f3, { 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xbf21);
        EXPECT(gbc.pc(), 0x657e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf7f3), 0x21);
        // 46 0036
        gbc.setState(0x47ff, 0x285f, 0xdd90, 0xcc98, 0x3455, 0xcd1e, 0x0, 0x0);
        gbc.writeMem(0x47ff, { 0x46 });
        gbc.writeMem(0xcd1e, { 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x285f);
        EXPECT(gbc.pc(), 0x4800);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd1e), 0xbe);
        // 46 0037
        gbc.setState(0x5790, 0x6676, 0xe260, 0x3f6b, 0xb767, 0x77d2, 0x1, 0x0);
        gbc.writeMem(0x5790, { 0x46 });
        gbc.writeMem(0x77d2, { 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x6676);
        EXPECT(gbc.pc(), 0x5791);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 0038
        gbc.setState(0xaf4a, 0x3d82, 0x2d10, 0x5b88, 0x1d14, 0xa667, 0x0, 0x0);
        gbc.writeMem(0xa667, { 0x54 });
        gbc.writeMem(0xaf4a, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x3d82);
        EXPECT(gbc.pc(), 0xaf4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa667), 0x54);
        EXPECT(gbc.readMem(0xaf4a), 0x46);
        // 46 0039
        gbc.setState(0x8c54, 0x9f54, 0xd4a0, 0x6113, 0xfd69, 0x5448, 0x0, 0x0);
        gbc.writeMem(0x5448, { 0x79 });
        gbc.writeMem(0x8c54, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x9f54);
        EXPECT(gbc.pc(), 0x8c55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c54), 0x46);
        // 46 003A
        gbc.setState(0xaa28, 0xb0d, 0x6e0, 0x8a46, 0xebc6, 0xe27d, 0x0, 0x1);
        gbc.writeMem(0xaa28, { 0x46 });
        gbc.writeMem(0xe27d, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xb0d);
        EXPECT(gbc.pc(), 0xaa29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa28), 0x46);
        EXPECT(gbc.readMem(0xe27d), 0x77);
        // 46 003B
        gbc.setState(0xb0e0, 0x9bfe, 0x870, 0xa810, 0xbbb1, 0x1b0a, 0x1, 0x1);
        gbc.writeMem(0x1b0a, { 0x85 });
        gbc.writeMem(0xb0e0, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x9bfe);
        EXPECT(gbc.pc(), 0xb0e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0e0), 0x46);
        // 46 003C
        gbc.setState(0xdfd6, 0xdf6b, 0xdcd0, 0x2869, 0x1e6f, 0xa9da, 0x0, 0x1);
        gbc.writeMem(0xa9da, { 0xb9 });
        gbc.writeMem(0xdfd6, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xdf6b);
        EXPECT(gbc.pc(), 0xdfd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9da), 0xb9);
        EXPECT(gbc.readMem(0xdfd6), 0x46);
        // 46 003D
        gbc.setState(0x6963, 0x1195, 0xc420, 0xa809, 0xc686, 0x682d, 0x1, 0x0);
        gbc.writeMem(0x682d, { 0x65 });
        gbc.writeMem(0x6963, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x1195);
        EXPECT(gbc.pc(), 0x6964);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 003E
        gbc.setState(0x2aa1, 0xd40d, 0xda0, 0x91d, 0x4cf5, 0x7655, 0x1, 0x0);
        gbc.writeMem(0x2aa1, { 0x46 });
        gbc.writeMem(0x7655, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xd40d);
        EXPECT(gbc.pc(), 0x2aa2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 003F
        gbc.setState(0x677e, 0x1798, 0xd530, 0x72d1, 0x23d2, 0xc09f, 0x1, 0x1);
        gbc.writeMem(0x677e, { 0x46 });
        gbc.writeMem(0xc09f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x1798);
        EXPECT(gbc.pc(), 0x677f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc09f), 0x8b);
        // 46 0040
        gbc.setState(0x1d81, 0x60b0, 0x6b80, 0x2b05, 0x94f4, 0x54d, 0x1, 0x0);
        gbc.writeMem(0x54d, { 0xd2 });
        gbc.writeMem(0x1d81, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x60b0);
        EXPECT(gbc.pc(), 0x1d82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 0041
        gbc.setState(0x3345, 0x660d, 0x2ad0, 0xa8b4, 0x906c, 0xe2b8, 0x1, 0x0);
        gbc.writeMem(0x3345, { 0x46 });
        gbc.writeMem(0xe2b8, { 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x660d);
        EXPECT(gbc.pc(), 0x3346);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2b8), 0xd1);
        // 46 0042
        gbc.setState(0xa6d3, 0xeba3, 0xa680, 0xc90, 0x4381, 0xc7e5, 0x0, 0x1);
        gbc.writeMem(0xa6d3, { 0x46 });
        gbc.writeMem(0xc7e5, { 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xeba3);
        EXPECT(gbc.pc(), 0xa6d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6d3), 0x46);
        EXPECT(gbc.readMem(0xc7e5), 0x80);
        // 46 0043
        gbc.setState(0x8994, 0x7c6, 0x4f60, 0xa6ba, 0x1b9f, 0x38a7, 0x0, 0x1);
        gbc.writeMem(0x38a7, { 0xb });
        gbc.writeMem(0x8994, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x7c6);
        EXPECT(gbc.pc(), 0x8995);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8994), 0x46);
        // 46 0044
        gbc.setState(0x1abd, 0x43b2, 0x8a50, 0xdb35, 0x2c9c, 0x9d2, 0x1, 0x1);
        gbc.writeMem(0x9d2, { 0x24 });
        gbc.writeMem(0x1abd, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x43b2);
        EXPECT(gbc.pc(), 0x1abe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 0045
        gbc.setState(0x6d91, 0xab54, 0xcef0, 0x3152, 0x8045, 0x341a, 0x1, 0x1);
        gbc.writeMem(0x341a, { 0x3e });
        gbc.writeMem(0x6d91, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xab54);
        EXPECT(gbc.pc(), 0x6d92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 0046
        gbc.setState(0x12b1, 0x21e4, 0x7710, 0xf2e, 0x6a32, 0x835b, 0x0, 0x0);
        gbc.writeMem(0x12b1, { 0x46 });
        gbc.writeMem(0x835b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x21e4);
        EXPECT(gbc.pc(), 0x12b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x835b), 0x47);
        // 46 0047
        gbc.setState(0x1380, 0xfd6d, 0x7fb0, 0xf570, 0xaab2, 0x896c, 0x0, 0x1);
        gbc.writeMem(0x1380, { 0x46 });
        gbc.writeMem(0x896c, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xfd6d);
        EXPECT(gbc.pc(), 0x1381);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x896c), 0xe7);
        // 46 0048
        gbc.setState(0x3a5, 0x540b, 0xa0b0, 0xffa2, 0x8553, 0x7766, 0x1, 0x0);
        gbc.writeMem(0x3a5, { 0x46 });
        gbc.writeMem(0x7766, { 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x540b);
        EXPECT(gbc.pc(), 0x3a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 0049
        gbc.setState(0x41e1, 0x305c, 0x9560, 0x44e8, 0xe3a, 0x4e3c, 0x0, 0x0);
        gbc.writeMem(0x41e1, { 0x46 });
        gbc.writeMem(0x4e3c, { 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x305c);
        EXPECT(gbc.pc(), 0x41e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 004A
        gbc.setState(0xd334, 0x9ccb, 0x1b40, 0x3044, 0x3c3c, 0xcbd9, 0x1, 0x1);
        gbc.writeMem(0xcbd9, { 0x58 });
        gbc.writeMem(0xd334, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x9ccb);
        EXPECT(gbc.pc(), 0xd335);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbd9), 0x58);
        EXPECT(gbc.readMem(0xd334), 0x46);
        // 46 004B
        gbc.setState(0x511f, 0xab00, 0xf870, 0xb460, 0x78d4, 0x3b5, 0x0, 0x0);
        gbc.writeMem(0x3b5, { 0x5b });
        gbc.writeMem(0x511f, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xab00);
        EXPECT(gbc.pc(), 0x5120);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 004C
        gbc.setState(0x5b3d, 0xfb69, 0x8a30, 0x73c1, 0x24b, 0x6aa4, 0x0, 0x0);
        gbc.writeMem(0x5b3d, { 0x46 });
        gbc.writeMem(0x6aa4, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xfb69);
        EXPECT(gbc.pc(), 0x5b3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 004D
        gbc.setState(0xdfed, 0x7c00, 0x6630, 0x5fb4, 0x1aa0, 0x6e46, 0x0, 0x1);
        gbc.writeMem(0x6e46, { 0x19 });
        gbc.writeMem(0xdfed, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x7c00);
        EXPECT(gbc.pc(), 0xdfee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfed), 0x46);
        // 46 004E
        gbc.setState(0x1661, 0xb5a8, 0x7770, 0xbeff, 0x6049, 0xec40, 0x0, 0x1);
        gbc.writeMem(0x1661, { 0x46 });
        gbc.writeMem(0xec40, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xb5a8);
        EXPECT(gbc.pc(), 0x1662);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec40), 0x23);
        // 46 004F
        gbc.setState(0xdc9d, 0x7e85, 0x57e0, 0x540, 0x9d82, 0x8908, 0x1, 0x1);
        gbc.writeMem(0x8908, { 0x0 });
        gbc.writeMem(0xdc9d, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x7e85);
        EXPECT(gbc.pc(), 0xdc9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8908), 0x0);
        EXPECT(gbc.readMem(0xdc9d), 0x46);
        // 46 0050
        gbc.setState(0xcae4, 0xe999, 0xa560, 0xe2da, 0xad83, 0xe87c, 0x0, 0x1);
        gbc.writeMem(0xcae4, { 0x46 });
        gbc.writeMem(0xe87c, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xe999);
        EXPECT(gbc.pc(), 0xcae5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcae4), 0x46);
        EXPECT(gbc.readMem(0xe87c), 0xe9);
        // 46 0051
        gbc.setState(0x5867, 0xfce6, 0xf40, 0x21d0, 0x8329, 0xf8c3, 0x1, 0x0);
        gbc.writeMem(0x5867, { 0x46 });
        gbc.writeMem(0xf8c3, { 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xfce6);
        EXPECT(gbc.pc(), 0x5868);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf8c3), 0x45);
        // 46 0052
        gbc.setState(0x5d03, 0x8336, 0xfbe0, 0x211, 0xa78a, 0xb336, 0x1, 0x0);
        gbc.writeMem(0x5d03, { 0x46 });
        gbc.writeMem(0xb336, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x8336);
        EXPECT(gbc.pc(), 0x5d04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb336), 0x7f);
        // 46 0054
        gbc.setState(0x638a, 0xb81e, 0xfd80, 0x3fa1, 0x303e, 0xd527, 0x1, 0x1);
        gbc.writeMem(0x638a, { 0x46 });
        gbc.writeMem(0xd527, { 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xb81e);
        EXPECT(gbc.pc(), 0x638b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd527), 0xcf);
        // 46 0055
        gbc.setState(0x2228, 0x88cc, 0x1da0, 0x2026, 0x3728, 0x64d6, 0x0, 0x1);
        gbc.writeMem(0x2228, { 0x46 });
        gbc.writeMem(0x64d6, { 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x88cc);
        EXPECT(gbc.pc(), 0x2229);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 0056
        gbc.setState(0xc76, 0x573f, 0x6380, 0xf1c8, 0x6c51, 0x7499, 0x1, 0x1);
        gbc.writeMem(0xc76, { 0x46 });
        gbc.writeMem(0x7499, { 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x573f);
        EXPECT(gbc.pc(), 0xc77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 0057
        gbc.setState(0xeb3f, 0x4b27, 0x2070, 0x8e7e, 0x95bd, 0xd0e7, 0x0, 0x0);
        gbc.writeMem(0xd0e7, { 0xb9 });
        gbc.writeMem(0xeb3f, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x4b27);
        EXPECT(gbc.pc(), 0xeb40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0e7), 0xb9);
        EXPECT(gbc.readMem(0xeb3f), 0x46);
        // 46 0058
        gbc.setState(0x47c, 0x743e, 0x7bb0, 0x5a10, 0x740c, 0x4608, 0x0, 0x0);
        gbc.writeMem(0x47c, { 0x46 });
        gbc.writeMem(0x4608, { 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x743e);
        EXPECT(gbc.pc(), 0x47d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 0059
        gbc.setState(0x5d5b, 0xc780, 0xb990, 0x913d, 0xa515, 0x4b9d, 0x0, 0x0);
        gbc.writeMem(0x4b9d, { 0x23 });
        gbc.writeMem(0x5d5b, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xc780);
        EXPECT(gbc.pc(), 0x5d5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 005A
        gbc.setState(0x8fd6, 0xe812, 0x1f50, 0xdf97, 0x2ab9, 0x9435, 0x0, 0x1);
        gbc.writeMem(0x8fd6, { 0x46 });
        gbc.writeMem(0x9435, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xe812);
        EXPECT(gbc.pc(), 0x8fd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fd6), 0x46);
        EXPECT(gbc.readMem(0x9435), 0xfa);
        // 46 005B
        gbc.setState(0x58b7, 0x62c1, 0x10d0, 0xbb2b, 0xdd6c, 0x4f2c, 0x1, 0x0);
        gbc.writeMem(0x4f2c, { 0xf0 });
        gbc.writeMem(0x58b7, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x62c1);
        EXPECT(gbc.pc(), 0x58b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 005C
        gbc.setState(0x948a, 0x5464, 0x23f0, 0x4a1c, 0x1d36, 0xdf3a, 0x1, 0x0);
        gbc.writeMem(0x948a, { 0x46 });
        gbc.writeMem(0xdf3a, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x5464);
        EXPECT(gbc.pc(), 0x948b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x948a), 0x46);
        EXPECT(gbc.readMem(0xdf3a), 0xa6);
        // 46 005D
        gbc.setState(0x7287, 0xcbb5, 0x1e30, 0x4565, 0x5fad, 0xd27, 0x0, 0x1);
        gbc.writeMem(0xd27, { 0x48 });
        gbc.writeMem(0x7287, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xcbb5);
        EXPECT(gbc.pc(), 0x7288);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 005E
        gbc.setState(0xd02, 0x9b9f, 0x6300, 0x701d, 0xc928, 0xd442, 0x0, 0x0);
        gbc.writeMem(0xd02, { 0x46 });
        gbc.writeMem(0xd442, { 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x9b9f);
        EXPECT(gbc.pc(), 0xd03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd442), 0xe2);
        // 46 005F
        gbc.setState(0xb75e, 0xf158, 0xd2b0, 0xea67, 0xff90, 0x59f4, 0x0, 0x1);
        gbc.writeMem(0x59f4, { 0x7a });
        gbc.writeMem(0xb75e, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xf158);
        EXPECT(gbc.pc(), 0xb75f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb75e), 0x46);
        // 46 0061
        gbc.setState(0x35a0, 0x1dc5, 0x7d20, 0x84c4, 0xe91, 0x107c, 0x0, 0x0);
        gbc.writeMem(0x107c, { 0xc8 });
        gbc.writeMem(0x35a0, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x1dc5);
        EXPECT(gbc.pc(), 0x35a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 0062
        gbc.setState(0xc373, 0x60ea, 0xdde0, 0x6b4f, 0x61a4, 0xdd28, 0x0, 0x0);
        gbc.writeMem(0xc373, { 0x46 });
        gbc.writeMem(0xdd28, { 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x60ea);
        EXPECT(gbc.pc(), 0xc374);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc373), 0x46);
        EXPECT(gbc.readMem(0xdd28), 0xcc);
        // 46 0063
        gbc.setState(0xcd2b, 0xf7c8, 0xede0, 0xdc22, 0xab59, 0x731e, 0x1, 0x0);
        gbc.writeMem(0x731e, { 0xdd });
        gbc.writeMem(0xcd2b, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xf7c8);
        EXPECT(gbc.pc(), 0xcd2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd2b), 0x46);
        // 46 0064
        gbc.setState(0x891, 0x2af5, 0x61e0, 0x9a90, 0xef42, 0x10d7, 0x1, 0x0);
        gbc.writeMem(0x891, { 0x46 });
        gbc.writeMem(0x10d7, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x2af5);
        EXPECT(gbc.pc(), 0x892);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 0065
        gbc.setState(0x2826, 0x9c3a, 0xa220, 0x7f5f, 0x9520, 0x2cfb, 0x1, 0x1);
        gbc.writeMem(0x2826, { 0x46 });
        gbc.writeMem(0x2cfb, { 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x9c3a);
        EXPECT(gbc.pc(), 0x2827);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 0066
        gbc.setState(0xdab8, 0x5b33, 0xb660, 0x9cb6, 0xb077, 0x1947, 0x1, 0x1);
        gbc.writeMem(0x1947, { 0xc });
        gbc.writeMem(0xdab8, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x5b33);
        EXPECT(gbc.pc(), 0xdab9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdab8), 0x46);
        // 46 0067
        gbc.setState(0xde48, 0x3a59, 0x2e20, 0x6ca2, 0xeadc, 0xc355, 0x0, 0x0);
        gbc.writeMem(0xc355, { 0x6c });
        gbc.writeMem(0xde48, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x3a59);
        EXPECT(gbc.pc(), 0xde49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc355), 0x6c);
        EXPECT(gbc.readMem(0xde48), 0x46);
        // 46 0068
        gbc.setState(0x1d59, 0x89c8, 0xe580, 0xc18e, 0xe627, 0xd3e5, 0x1, 0x1);
        gbc.writeMem(0x1d59, { 0x46 });
        gbc.writeMem(0xd3e5, { 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x89c8);
        EXPECT(gbc.pc(), 0x1d5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3e5), 0x3b);
        // 46 0069
        gbc.setState(0x703d, 0xd3c3, 0x640, 0x37c1, 0x84e, 0xb2c, 0x1, 0x0);
        gbc.writeMem(0xb2c, { 0xda });
        gbc.writeMem(0x703d, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xd3c3);
        EXPECT(gbc.pc(), 0x703e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 006A
        gbc.setState(0x52f4, 0xd545, 0x64a0, 0x2024, 0x36ef, 0x3ba, 0x1, 0x0);
        gbc.writeMem(0x3ba, { 0xce });
        gbc.writeMem(0x52f4, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xd545);
        EXPECT(gbc.pc(), 0x52f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 006B
        gbc.setState(0xda07, 0xb8ce, 0x4550, 0x2a08, 0xac46, 0xb5b3, 0x0, 0x1);
        gbc.writeMem(0xb5b3, { 0x3d });
        gbc.writeMem(0xda07, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xb8ce);
        EXPECT(gbc.pc(), 0xda08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5b3), 0x3d);
        EXPECT(gbc.readMem(0xda07), 0x46);
        // 46 006C
        gbc.setState(0xb460, 0x8dc5, 0x2210, 0xa125, 0x7358, 0x5a00, 0x0, 0x0);
        gbc.writeMem(0x5a00, { 0xac });
        gbc.writeMem(0xb460, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x8dc5);
        EXPECT(gbc.pc(), 0xb461);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb460), 0x46);
        // 46 006D
        gbc.setState(0x3996, 0x9177, 0x14c0, 0xc49e, 0x5657, 0x5342, 0x1, 0x1);
        gbc.writeMem(0x3996, { 0x46 });
        gbc.writeMem(0x5342, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x9177);
        EXPECT(gbc.pc(), 0x3997);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 006E
        gbc.setState(0x4087, 0xf6cf, 0xab20, 0xdffd, 0xfa57, 0xc88f, 0x1, 0x1);
        gbc.writeMem(0x4087, { 0x46 });
        gbc.writeMem(0xc88f, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xf6cf);
        EXPECT(gbc.pc(), 0x4088);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc88f), 0xc9);
        // 46 006F
        gbc.setState(0x12fc, 0x31b3, 0xc630, 0x90a9, 0x86a, 0xf92d, 0x1, 0x0);
        gbc.writeMem(0x12fc, { 0x46 });
        gbc.writeMem(0xf92d, { 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x31b3);
        EXPECT(gbc.pc(), 0x12fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf92d), 0x56);
        // 46 0070
        gbc.setState(0xb2bc, 0x45d, 0xcc20, 0x399d, 0x4c2a, 0x1455, 0x1, 0x0);
        gbc.writeMem(0x1455, { 0x6e });
        gbc.writeMem(0xb2bc, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x45d);
        EXPECT(gbc.pc(), 0xb2bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2bc), 0x46);
        // 46 0071
        gbc.setState(0x22d8, 0x1a0e, 0xbb30, 0xe2a2, 0x7055, 0x87d2, 0x1, 0x1);
        gbc.writeMem(0x22d8, { 0x46 });
        gbc.writeMem(0x87d2, { 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x1a0e);
        EXPECT(gbc.pc(), 0x22d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87d2), 0x26);
        // 46 0072
        gbc.setState(0xd5e5, 0x15e4, 0xe010, 0x29a7, 0xb683, 0xbe5d, 0x0, 0x1);
        gbc.writeMem(0xbe5d, { 0x94 });
        gbc.writeMem(0xd5e5, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x15e4);
        EXPECT(gbc.pc(), 0xd5e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe5d), 0x94);
        EXPECT(gbc.readMem(0xd5e5), 0x46);
        // 46 0073
        gbc.setState(0x7ebe, 0xd23e, 0x5a00, 0x4b2a, 0x1198, 0x374d, 0x1, 0x1);
        gbc.writeMem(0x374d, { 0xd6 });
        gbc.writeMem(0x7ebe, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xd23e);
        EXPECT(gbc.pc(), 0x7ebf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 0074
        gbc.setState(0x9b58, 0x448a, 0x5c90, 0x27f6, 0xcfc, 0x2484, 0x0, 0x0);
        gbc.writeMem(0x2484, { 0x5e });
        gbc.writeMem(0x9b58, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x448a);
        EXPECT(gbc.pc(), 0x9b59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b58), 0x46);
        // 46 0075
        gbc.setState(0xe854, 0x3e13, 0x8a0, 0x938c, 0xcd2a, 0x69b5, 0x0, 0x1);
        gbc.writeMem(0x69b5, { 0x9d });
        gbc.writeMem(0xe854, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x3e13);
        EXPECT(gbc.pc(), 0xe855);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe854), 0x46);
        // 46 0077
        gbc.setState(0x20d4, 0x5fb9, 0x1480, 0xbed1, 0x93e7, 0x7f85, 0x0, 0x0);
        gbc.writeMem(0x20d4, { 0x46 });
        gbc.writeMem(0x7f85, { 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x5fb9);
        EXPECT(gbc.pc(), 0x20d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 0078
        gbc.setState(0x9734, 0x9a76, 0xf5f0, 0x2d00, 0x195, 0x4073, 0x1, 0x1);
        gbc.writeMem(0x4073, { 0x29 });
        gbc.writeMem(0x9734, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x9a76);
        EXPECT(gbc.pc(), 0x9735);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9734), 0x46);
        // 46 0079
        gbc.setState(0x306e, 0xcad5, 0x3340, 0x421b, 0xcfaa, 0x1410, 0x1, 0x0);
        gbc.writeMem(0x1410, { 0xb4 });
        gbc.writeMem(0x306e, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xcad5);
        EXPECT(gbc.pc(), 0x306f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 007A
        gbc.setState(0x68d2, 0x59b0, 0xaef0, 0x611b, 0x2742, 0xa4be, 0x1, 0x0);
        gbc.writeMem(0x68d2, { 0x46 });
        gbc.writeMem(0xa4be, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x59b0);
        EXPECT(gbc.pc(), 0x68d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4be), 0x52);
        // 46 007B
        gbc.setState(0x7bee, 0xc9fb, 0xca50, 0x7a00, 0x2deb, 0x604e, 0x1, 0x0);
        gbc.writeMem(0x604e, { 0xe9 });
        gbc.writeMem(0x7bee, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xc9fb);
        EXPECT(gbc.pc(), 0x7bef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 007C
        gbc.setState(0x4ced, 0x772d, 0x9d20, 0x9673, 0x44af, 0x5f96, 0x1, 0x1);
        gbc.writeMem(0x4ced, { 0x46 });
        gbc.writeMem(0x5f96, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x772d);
        EXPECT(gbc.pc(), 0x4cee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 007D
        gbc.setState(0xc4c8, 0xb42, 0x2ba0, 0xd880, 0xed4c, 0x1513, 0x1, 0x0);
        gbc.writeMem(0x1513, { 0x17 });
        gbc.writeMem(0xc4c8, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xb42);
        EXPECT(gbc.pc(), 0xc4c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4c8), 0x46);
        // 46 007E
        gbc.setState(0xd416, 0x9f21, 0xa660, 0x8c1c, 0xb44b, 0x2e3f, 0x0, 0x0);
        gbc.writeMem(0x2e3f, { 0xc });
        gbc.writeMem(0xd416, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x9f21);
        EXPECT(gbc.pc(), 0xd417);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd416), 0x46);
        // 46 007F
        gbc.setState(0xab65, 0x4f0e, 0x2560, 0x9ac3, 0xc0ce, 0xae8c, 0x1, 0x0);
        gbc.writeMem(0xab65, { 0x46 });
        gbc.writeMem(0xae8c, { 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x4f0e);
        EXPECT(gbc.pc(), 0xab66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab65), 0x46);
        EXPECT(gbc.readMem(0xae8c), 0xbf);
        // 46 0080
        gbc.setState(0x9233, 0xdbcc, 0x2340, 0xec6d, 0x6cb0, 0x27c8, 0x1, 0x0);
        gbc.writeMem(0x27c8, { 0xd4 });
        gbc.writeMem(0x9233, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xdbcc);
        EXPECT(gbc.pc(), 0x9234);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9233), 0x46);
        // 46 0081
        gbc.setState(0x7cce, 0x50aa, 0xbdc0, 0x850c, 0x75ff, 0x4db0, 0x1, 0x0);
        gbc.writeMem(0x4db0, { 0xcf });
        gbc.writeMem(0x7cce, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x50aa);
        EXPECT(gbc.pc(), 0x7ccf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 0082
        gbc.setState(0xee9d, 0x6cf8, 0xa130, 0xc507, 0xa6a7, 0xb7ba, 0x0, 0x0);
        gbc.writeMem(0xb7ba, { 0x66 });
        gbc.writeMem(0xee9d, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x6cf8);
        EXPECT(gbc.pc(), 0xee9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7ba), 0x66);
        EXPECT(gbc.readMem(0xee9d), 0x46);
        // 46 0083
        gbc.setState(0xb500, 0xdd2c, 0x6020, 0xe0af, 0xe70b, 0x106f, 0x1, 0x0);
        gbc.writeMem(0x106f, { 0x8f });
        gbc.writeMem(0xb500, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xdd2c);
        EXPECT(gbc.pc(), 0xb501);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb500), 0x46);
        // 46 0084
        gbc.setState(0x7fe8, 0xa5d2, 0x4700, 0xe77c, 0xde06, 0xe7e5, 0x1, 0x1);
        gbc.writeMem(0x7fe8, { 0x46 });
        gbc.writeMem(0xe7e5, { 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xa5d2);
        EXPECT(gbc.pc(), 0x7fe9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7e5), 0x17);
        // 46 0086
        gbc.setState(0x7ec1, 0x828a, 0xb6a0, 0x2d52, 0xd8eb, 0x110c, 0x0, 0x1);
        gbc.writeMem(0x110c, { 0x2d });
        gbc.writeMem(0x7ec1, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x828a);
        EXPECT(gbc.pc(), 0x7ec2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 0087
        gbc.setState(0x11e1, 0x3054, 0x860, 0x8a1, 0x66c5, 0xa33, 0x0, 0x1);
        gbc.writeMem(0xa33, { 0x80 });
        gbc.writeMem(0x11e1, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x3054);
        EXPECT(gbc.pc(), 0x11e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 0088
        gbc.setState(0xb1b1, 0xf7fe, 0x1770, 0x9340, 0x9bcd, 0xa5b7, 0x1, 0x1);
        gbc.writeMem(0xa5b7, { 0x28 });
        gbc.writeMem(0xb1b1, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xf7fe);
        EXPECT(gbc.pc(), 0xb1b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5b7), 0x28);
        EXPECT(gbc.readMem(0xb1b1), 0x46);
        // 46 0089
        gbc.setState(0x2f47, 0x38c3, 0x250, 0x4c56, 0x9872, 0x85fa, 0x1, 0x0);
        gbc.writeMem(0x2f47, { 0x46 });
        gbc.writeMem(0x85fa, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x38c3);
        EXPECT(gbc.pc(), 0x2f48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85fa), 0x8d);
        // 46 008A
        gbc.setState(0x5a05, 0x5a59, 0x8990, 0xb720, 0x8b31, 0x930d, 0x0, 0x1);
        gbc.writeMem(0x5a05, { 0x46 });
        gbc.writeMem(0x930d, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x5a59);
        EXPECT(gbc.pc(), 0x5a06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x930d), 0x5e);
        // 46 008B
        gbc.setState(0xdc8a, 0xa8af, 0x52d0, 0x48bd, 0xf36c, 0x70a3, 0x0, 0x1);
        gbc.writeMem(0x70a3, { 0x62 });
        gbc.writeMem(0xdc8a, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xa8af);
        EXPECT(gbc.pc(), 0xdc8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc8a), 0x46);
        // 46 008C
        gbc.setState(0xbd5, 0x1b9a, 0xb3d0, 0x116b, 0x308b, 0x70c, 0x1, 0x0);
        gbc.writeMem(0x70c, { 0x8b });
        gbc.writeMem(0xbd5, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x1b9a);
        EXPECT(gbc.pc(), 0xbd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 008D
        gbc.setState(0x1d49, 0x5b0e, 0xd60, 0x5aa5, 0xf9ae, 0x7cdc, 0x1, 0x1);
        gbc.writeMem(0x1d49, { 0x46 });
        gbc.writeMem(0x7cdc, { 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x5b0e);
        EXPECT(gbc.pc(), 0x1d4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 008E
        gbc.setState(0x8046, 0x9ae5, 0xddd0, 0x60ff, 0x2353, 0x9b11, 0x1, 0x0);
        gbc.writeMem(0x8046, { 0x46 });
        gbc.writeMem(0x9b11, { 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x9ae5);
        EXPECT(gbc.pc(), 0x8047);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8046), 0x46);
        EXPECT(gbc.readMem(0x9b11), 0x56);
        // 46 008F
        gbc.setState(0xc291, 0xac70, 0x6090, 0x8a2, 0x5add, 0x2622, 0x1, 0x1);
        gbc.writeMem(0x2622, { 0x2 });
        gbc.writeMem(0xc291, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xac70);
        EXPECT(gbc.pc(), 0xc292);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc291), 0x46);
        // 46 0090
        gbc.setState(0x9a04, 0xf1c8, 0x68e0, 0x1148, 0x1735, 0xd3b5, 0x1, 0x0);
        gbc.writeMem(0x9a04, { 0x46 });
        gbc.writeMem(0xd3b5, { 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xf1c8);
        EXPECT(gbc.pc(), 0x9a05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a04), 0x46);
        EXPECT(gbc.readMem(0xd3b5), 0x27);
        // 46 0091
        gbc.setState(0xaf70, 0x9517, 0xe850, 0x3f4e, 0xabe8, 0xb301, 0x1, 0x0);
        gbc.writeMem(0xaf70, { 0x46 });
        gbc.writeMem(0xb301, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x9517);
        EXPECT(gbc.pc(), 0xaf71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf70), 0x46);
        EXPECT(gbc.readMem(0xb301), 0xaa);
        // 46 0092
        gbc.setState(0xbdbb, 0x4f86, 0x7c40, 0x87c6, 0x7d43, 0x7be2, 0x1, 0x0);
        gbc.writeMem(0x7be2, { 0x41 });
        gbc.writeMem(0xbdbb, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x4f86);
        EXPECT(gbc.pc(), 0xbdbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdbb), 0x46);
        // 46 0093
        gbc.setState(0x87de, 0xcaa, 0xbf40, 0x3d1f, 0xed8, 0xedaa, 0x0, 0x0);
        gbc.writeMem(0x87de, { 0x46 });
        gbc.writeMem(0xedaa, { 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xcaa);
        EXPECT(gbc.pc(), 0x87df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87de), 0x46);
        EXPECT(gbc.readMem(0xedaa), 0x12);
        // 46 0094
        gbc.setState(0x4b5b, 0x9fdd, 0x24e0, 0xad59, 0xb90b, 0x5929, 0x1, 0x1);
        gbc.writeMem(0x4b5b, { 0x46 });
        gbc.writeMem(0x5929, { 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x9fdd);
        EXPECT(gbc.pc(), 0x4b5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 0096
        gbc.setState(0xc5de, 0x116e, 0x8dc0, 0x8e7, 0x468, 0x48d1, 0x0, 0x0);
        gbc.writeMem(0x48d1, { 0x98 });
        gbc.writeMem(0xc5de, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x116e);
        EXPECT(gbc.pc(), 0xc5df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5de), 0x46);
        // 46 0097
        gbc.setState(0x8027, 0x3117, 0xf7d0, 0x1d58, 0x2c7d, 0x785c, 0x1, 0x1);
        gbc.writeMem(0x785c, { 0x82 });
        gbc.writeMem(0x8027, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x3117);
        EXPECT(gbc.pc(), 0x8028);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8027), 0x46);
        // 46 0098
        gbc.setState(0xa834, 0x869a, 0x2d90, 0x1593, 0x72d7, 0x7ac, 0x1, 0x1);
        gbc.writeMem(0x7ac, { 0xc6 });
        gbc.writeMem(0xa834, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x869a);
        EXPECT(gbc.pc(), 0xa835);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa834), 0x46);
        // 46 009A
        gbc.setState(0xb8fe, 0x701b, 0xd580, 0xa1d2, 0x77eb, 0x542e, 0x1, 0x1);
        gbc.writeMem(0x542e, { 0x54 });
        gbc.writeMem(0xb8fe, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x701b);
        EXPECT(gbc.pc(), 0xb8ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8fe), 0x46);
        // 46 009B
        gbc.setState(0x561d, 0x3ca1, 0x51a0, 0x5b9, 0x8c46, 0xb22c, 0x0, 0x0);
        gbc.writeMem(0x561d, { 0x46 });
        gbc.writeMem(0xb22c, { 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x3ca1);
        EXPECT(gbc.pc(), 0x561e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb22c), 0xf1);
        // 46 009C
        gbc.setState(0x765c, 0x5a50, 0x9320, 0x14b6, 0x4dd7, 0x371f, 0x0, 0x1);
        gbc.writeMem(0x371f, { 0xe5 });
        gbc.writeMem(0x765c, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x5a50);
        EXPECT(gbc.pc(), 0x765d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 009D
        gbc.setState(0x7e1f, 0xe78c, 0xf230, 0xeeb5, 0x7b29, 0x6cc0, 0x0, 0x1);
        gbc.writeMem(0x6cc0, { 0x2f });
        gbc.writeMem(0x7e1f, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xe78c);
        EXPECT(gbc.pc(), 0x7e20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 009E
        gbc.setState(0x3b0c, 0x71b9, 0xcbb0, 0xea50, 0xf5d7, 0x670f, 0x0, 0x0);
        gbc.writeMem(0x3b0c, { 0x46 });
        gbc.writeMem(0x670f, { 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x71b9);
        EXPECT(gbc.pc(), 0x3b0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 009F
        gbc.setState(0x9a54, 0x26c4, 0xf680, 0x2325, 0xfb06, 0xb563, 0x1, 0x1);
        gbc.writeMem(0x9a54, { 0x46 });
        gbc.writeMem(0xb563, { 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x26c4);
        EXPECT(gbc.pc(), 0x9a55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a54), 0x46);
        EXPECT(gbc.readMem(0xb563), 0xfc);
        // 46 00A0
        gbc.setState(0xde78, 0xc3e, 0xda50, 0x951b, 0xaaef, 0xcca1, 0x1, 0x0);
        gbc.writeMem(0xcca1, { 0xd0 });
        gbc.writeMem(0xde78, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xc3e);
        EXPECT(gbc.pc(), 0xde79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcca1), 0xd0);
        EXPECT(gbc.readMem(0xde78), 0x46);
        // 46 00A1
        gbc.setState(0x195a, 0xb550, 0x7c80, 0x607a, 0x4be5, 0xdc94, 0x1, 0x0);
        gbc.writeMem(0x195a, { 0x46 });
        gbc.writeMem(0xdc94, { 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xb550);
        EXPECT(gbc.pc(), 0x195b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc94), 0x3e);
        // 46 00A2
        gbc.setState(0x2346, 0x5598, 0x1290, 0x89bd, 0xaac7, 0x8acc, 0x1, 0x1);
        gbc.writeMem(0x2346, { 0x46 });
        gbc.writeMem(0x8acc, { 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x5598);
        EXPECT(gbc.pc(), 0x2347);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8acc), 0x3b);
        // 46 00A3
        gbc.setState(0x7da, 0x4a62, 0x3930, 0x4c01, 0xdfb3, 0x412c, 0x1, 0x0);
        gbc.writeMem(0x7da, { 0x46 });
        gbc.writeMem(0x412c, { 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x4a62);
        EXPECT(gbc.pc(), 0x7db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 00A5
        gbc.setState(0x906c, 0xeff, 0xfbe0, 0x7369, 0x985, 0x9f2b, 0x1, 0x0);
        gbc.writeMem(0x906c, { 0x46 });
        gbc.writeMem(0x9f2b, { 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xeff);
        EXPECT(gbc.pc(), 0x906d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x906c), 0x46);
        EXPECT(gbc.readMem(0x9f2b), 0xc2);
        // 46 00A7
        gbc.setState(0x8862, 0x5471, 0xa0a0, 0xa5e7, 0xb196, 0x3e69, 0x0, 0x1);
        gbc.writeMem(0x3e69, { 0xa7 });
        gbc.writeMem(0x8862, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x5471);
        EXPECT(gbc.pc(), 0x8863);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8862), 0x46);
        // 46 00A8
        gbc.setState(0x7187, 0xd20f, 0xfa10, 0xeaeb, 0xb8e3, 0xead1, 0x1, 0x1);
        gbc.writeMem(0x7187, { 0x46 });
        gbc.writeMem(0xead1, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xd20f);
        EXPECT(gbc.pc(), 0x7188);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xead1), 0xb3);
        // 46 00A9
        gbc.setState(0xaa43, 0x845c, 0x7360, 0xdbe9, 0x49e1, 0x54fe, 0x0, 0x1);
        gbc.writeMem(0x54fe, { 0x3a });
        gbc.writeMem(0xaa43, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x845c);
        EXPECT(gbc.pc(), 0xaa44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa43), 0x46);
        // 46 00AA
        gbc.setState(0x447a, 0x33b, 0xfaf0, 0x8273, 0x189b, 0x51d4, 0x0, 0x0);
        gbc.writeMem(0x447a, { 0x46 });
        gbc.writeMem(0x51d4, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x33b);
        EXPECT(gbc.pc(), 0x447b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 00AB
        gbc.setState(0x2963, 0xe3d2, 0x64b0, 0x6256, 0xa67b, 0x1a95, 0x0, 0x0);
        gbc.writeMem(0x1a95, { 0xb7 });
        gbc.writeMem(0x2963, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xe3d2);
        EXPECT(gbc.pc(), 0x2964);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 00AC
        gbc.setState(0xa0bb, 0x194f, 0x1df0, 0x7980, 0xf0e1, 0xc8d8, 0x0, 0x0);
        gbc.writeMem(0xa0bb, { 0x46 });
        gbc.writeMem(0xc8d8, { 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x194f);
        EXPECT(gbc.pc(), 0xa0bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0bb), 0x46);
        EXPECT(gbc.readMem(0xc8d8), 0xcb);
        // 46 00AE
        gbc.setState(0x2be7, 0xbe4b, 0x2930, 0x7cd1, 0x1acc, 0xc9b1, 0x0, 0x0);
        gbc.writeMem(0x2be7, { 0x46 });
        gbc.writeMem(0xc9b1, { 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xbe4b);
        EXPECT(gbc.pc(), 0x2be8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9b1), 0xf2);
        // 46 00AF
        gbc.setState(0x7612, 0x8b61, 0x9ef0, 0xc377, 0x30db, 0x70b9, 0x0, 0x1);
        gbc.writeMem(0x70b9, { 0xa2 });
        gbc.writeMem(0x7612, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x8b61);
        EXPECT(gbc.pc(), 0x7613);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 00B0
        gbc.setState(0x394d, 0x6c54, 0x8ce0, 0x31dd, 0xd14e, 0x5eb6, 0x0, 0x1);
        gbc.writeMem(0x394d, { 0x46 });
        gbc.writeMem(0x5eb6, { 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x6c54);
        EXPECT(gbc.pc(), 0x394e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 00B1
        gbc.setState(0xdbe4, 0x109, 0x3ea0, 0xa9e5, 0x907e, 0x202d, 0x0, 0x0);
        gbc.writeMem(0x202d, { 0x17 });
        gbc.writeMem(0xdbe4, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x109);
        EXPECT(gbc.pc(), 0xdbe5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbe4), 0x46);
        // 46 00B2
        gbc.setState(0x5c11, 0x5d6b, 0x28d0, 0x3def, 0xb68b, 0x9a1a, 0x1, 0x0);
        gbc.writeMem(0x5c11, { 0x46 });
        gbc.writeMem(0x9a1a, { 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x5d6b);
        EXPECT(gbc.pc(), 0x5c12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a1a), 0xb9);
        // 46 00B3
        gbc.setState(0x14b1, 0x8e00, 0xc560, 0x5b44, 0xd0bd, 0x63b2, 0x1, 0x1);
        gbc.writeMem(0x14b1, { 0x46 });
        gbc.writeMem(0x63b2, { 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x8e00);
        EXPECT(gbc.pc(), 0x14b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 00B4
        gbc.setState(0x5803, 0xe69a, 0x7bc0, 0x3749, 0x1e1a, 0x97a6, 0x0, 0x1);
        gbc.writeMem(0x5803, { 0x46 });
        gbc.writeMem(0x97a6, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xe69a);
        EXPECT(gbc.pc(), 0x5804);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97a6), 0xb4);
        // 46 00B6
        gbc.setState(0x8984, 0x5112, 0xf420, 0xfa6, 0x9608, 0x1a8c, 0x1, 0x0);
        gbc.writeMem(0x1a8c, { 0x5e });
        gbc.writeMem(0x8984, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x5112);
        EXPECT(gbc.pc(), 0x8985);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8984), 0x46);
        // 46 00B7
        gbc.setState(0x6daf, 0xaa33, 0x9c60, 0x345, 0x42e, 0xa68a, 0x0, 0x1);
        gbc.writeMem(0x6daf, { 0x46 });
        gbc.writeMem(0xa68a, { 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xaa33);
        EXPECT(gbc.pc(), 0x6db0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa68a), 0x99);
        // 46 00B8
        gbc.setState(0xabae, 0x42cb, 0x6860, 0xf18e, 0x5fa1, 0x9cac, 0x1, 0x1);
        gbc.writeMem(0x9cac, { 0x21 });
        gbc.writeMem(0xabae, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x42cb);
        EXPECT(gbc.pc(), 0xabaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cac), 0x21);
        EXPECT(gbc.readMem(0xabae), 0x46);
        // 46 00B9
        gbc.setState(0x742, 0x3dc4, 0xfb50, 0x86e3, 0x26d2, 0xb7f8, 0x1, 0x1);
        gbc.writeMem(0x742, { 0x46 });
        gbc.writeMem(0xb7f8, { 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x3dc4);
        EXPECT(gbc.pc(), 0x743);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7f8), 0xa0);
        // 46 00BA
        gbc.setState(0xba55, 0xb92, 0x7d10, 0xc162, 0xae9f, 0xf447, 0x1, 0x1);
        gbc.writeMem(0xba55, { 0x46 });
        gbc.writeMem(0xf447, { 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xb92);
        EXPECT(gbc.pc(), 0xba56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba55), 0x46);
        EXPECT(gbc.readMem(0xf447), 0x98);
        // 46 00BB
        gbc.setState(0x27e2, 0x7b2d, 0xca90, 0x9bfe, 0x2293, 0x76f2, 0x1, 0x0);
        gbc.writeMem(0x27e2, { 0x46 });
        gbc.writeMem(0x76f2, { 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x7b2d);
        EXPECT(gbc.pc(), 0x27e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 00BC
        gbc.setState(0xcb88, 0xdd30, 0x7d0, 0x68c0, 0x2217, 0x901e, 0x0, 0x0);
        gbc.writeMem(0x901e, { 0x14 });
        gbc.writeMem(0xcb88, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xdd30);
        EXPECT(gbc.pc(), 0xcb89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x901e), 0x14);
        EXPECT(gbc.readMem(0xcb88), 0x46);
        // 46 00BD
        gbc.setState(0x978c, 0xe6, 0x32a0, 0x94c8, 0xaae8, 0x995f, 0x1, 0x0);
        gbc.writeMem(0x978c, { 0x46 });
        gbc.writeMem(0x995f, { 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xe6);
        EXPECT(gbc.pc(), 0x978d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x978c), 0x46);
        EXPECT(gbc.readMem(0x995f), 0xbc);
        // 46 00BF
        gbc.setState(0xe907, 0xc218, 0x9530, 0x62c, 0x2ef8, 0x73d, 0x1, 0x1);
        gbc.writeMem(0x73d, { 0x7d });
        gbc.writeMem(0xe907, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xc218);
        EXPECT(gbc.pc(), 0xe908);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe907), 0x46);
        // 46 00C0
        gbc.setState(0x235f, 0x236, 0x85b0, 0x1651, 0x5fe0, 0xe6e7, 0x1, 0x0);
        gbc.writeMem(0x235f, { 0x46 });
        gbc.writeMem(0xe6e7, { 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x236);
        EXPECT(gbc.pc(), 0x2360);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6e7), 0xbc);
        // 46 00C1
        gbc.setState(0x21b6, 0xd898, 0x3260, 0x5eb6, 0x6ad6, 0x5eeb, 0x1, 0x1);
        gbc.writeMem(0x21b6, { 0x46 });
        gbc.writeMem(0x5eeb, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xd898);
        EXPECT(gbc.pc(), 0x21b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 00C2
        gbc.setState(0x88cb, 0x7f81, 0x9d70, 0xc9f7, 0xb2c8, 0x3199, 0x0, 0x1);
        gbc.writeMem(0x3199, { 0xa8 });
        gbc.writeMem(0x88cb, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x7f81);
        EXPECT(gbc.pc(), 0x88cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88cb), 0x46);
        // 46 00C3
        gbc.setState(0x250f, 0x5d6b, 0xfa80, 0x21d4, 0x37b6, 0xae3e, 0x0, 0x1);
        gbc.writeMem(0x250f, { 0x46 });
        gbc.writeMem(0xae3e, { 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x5d6b);
        EXPECT(gbc.pc(), 0x2510);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae3e), 0x93);
        // 46 00C4
        gbc.setState(0xcdeb, 0xa47b, 0xd490, 0x9a8d, 0x7ddc, 0x171e, 0x1, 0x1);
        gbc.writeMem(0x171e, { 0xc8 });
        gbc.writeMem(0xcdeb, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xa47b);
        EXPECT(gbc.pc(), 0xcdec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdeb), 0x46);
        // 46 00C5
        gbc.setState(0x7368, 0x1ece, 0xe5c0, 0xe8fe, 0xed2c, 0xb71c, 0x0, 0x1);
        gbc.writeMem(0x7368, { 0x46 });
        gbc.writeMem(0xb71c, { 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x1ece);
        EXPECT(gbc.pc(), 0x7369);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb71c), 0x9b);
        // 46 00C6
        gbc.setState(0xc488, 0xefc4, 0x68a0, 0x4e83, 0x6653, 0xa96e, 0x0, 0x0);
        gbc.writeMem(0xa96e, { 0x2f });
        gbc.writeMem(0xc488, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xefc4);
        EXPECT(gbc.pc(), 0xc489);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa96e), 0x2f);
        EXPECT(gbc.readMem(0xc488), 0x46);
        // 46 00C7
        gbc.setState(0x51bb, 0xcfa3, 0xe780, 0xcc92, 0x152c, 0xf268, 0x0, 0x1);
        gbc.writeMem(0x51bb, { 0x46 });
        gbc.writeMem(0xf268, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xcfa3);
        EXPECT(gbc.pc(), 0x51bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf268), 0x24);
        // 46 00C8
        gbc.setState(0x4963, 0xb34d, 0x2b00, 0xe90d, 0xec43, 0x19ff, 0x0, 0x1);
        gbc.writeMem(0x19ff, { 0xc7 });
        gbc.writeMem(0x4963, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xb34d);
        EXPECT(gbc.pc(), 0x4964);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 00C9
        gbc.setState(0xc481, 0x1e37, 0x8a90, 0x1a09, 0x7c2f, 0xfe1, 0x1, 0x1);
        gbc.writeMem(0xfe1, { 0x25 });
        gbc.writeMem(0xc481, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x1e37);
        EXPECT(gbc.pc(), 0xc482);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc481), 0x46);
        // 46 00CA
        gbc.setState(0x5973, 0x431e, 0x5170, 0x7317, 0x6, 0xec1, 0x0, 0x1);
        gbc.writeMem(0xec1, { 0x75 });
        gbc.writeMem(0x5973, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x431e);
        EXPECT(gbc.pc(), 0x5974);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 00CB
        gbc.setState(0xddd1, 0xff43, 0x67f0, 0x1290, 0xea8b, 0x2db1, 0x1, 0x0);
        gbc.writeMem(0x2db1, { 0x2b });
        gbc.writeMem(0xddd1, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xff43);
        EXPECT(gbc.pc(), 0xddd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddd1), 0x46);
        // 46 00CC
        gbc.setState(0x1cca, 0xf5cc, 0xe8c0, 0x7251, 0xf2f7, 0x3c73, 0x0, 0x1);
        gbc.writeMem(0x1cca, { 0x46 });
        gbc.writeMem(0x3c73, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xf5cc);
        EXPECT(gbc.pc(), 0x1ccb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 00CD
        gbc.setState(0x4e57, 0x1b25, 0x2230, 0x1a46, 0x3cb1, 0x228f, 0x0, 0x1);
        gbc.writeMem(0x228f, { 0x35 });
        gbc.writeMem(0x4e57, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x1b25);
        EXPECT(gbc.pc(), 0x4e58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 00CE
        gbc.setState(0xbbd8, 0x4815, 0x6000, 0x360d, 0xef7f, 0x5ee7, 0x0, 0x1);
        gbc.writeMem(0x5ee7, { 0x42 });
        gbc.writeMem(0xbbd8, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x4815);
        EXPECT(gbc.pc(), 0xbbd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbd8), 0x46);
        // 46 00CF
        gbc.setState(0x3134, 0xc8f1, 0x2d50, 0x654c, 0x2082, 0x7937, 0x0, 0x1);
        gbc.writeMem(0x3134, { 0x46 });
        gbc.writeMem(0x7937, { 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xc8f1);
        EXPECT(gbc.pc(), 0x3135);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 00D0
        gbc.setState(0x2392, 0x7ef9, 0x1280, 0x8681, 0xea8e, 0x7550, 0x0, 0x1);
        gbc.writeMem(0x2392, { 0x46 });
        gbc.writeMem(0x7550, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x7ef9);
        EXPECT(gbc.pc(), 0x2393);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 00D1
        gbc.setState(0x8c01, 0x4fd2, 0xc100, 0x8595, 0x68ea, 0x2fb7, 0x1, 0x0);
        gbc.writeMem(0x2fb7, { 0xd2 });
        gbc.writeMem(0x8c01, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x4fd2);
        EXPECT(gbc.pc(), 0x8c02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c01), 0x46);
        // 46 00D2
        gbc.setState(0x64ab, 0x5ebc, 0x5a00, 0x493f, 0x3b0d, 0x5b7f, 0x1, 0x0);
        gbc.writeMem(0x5b7f, { 0x4a });
        gbc.writeMem(0x64ab, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x5ebc);
        EXPECT(gbc.pc(), 0x64ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 00D3
        gbc.setState(0x46da, 0x728a, 0xf0f0, 0x60ac, 0xb21b, 0xe646, 0x0, 0x0);
        gbc.writeMem(0x46da, { 0x46 });
        gbc.writeMem(0xe646, { 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x728a);
        EXPECT(gbc.pc(), 0x46db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe646), 0x43);
        // 46 00D5
        gbc.setState(0x3b74, 0x8448, 0x5280, 0x8fd6, 0x1221, 0x4a5a, 0x0, 0x1);
        gbc.writeMem(0x3b74, { 0x46 });
        gbc.writeMem(0x4a5a, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x8448);
        EXPECT(gbc.pc(), 0x3b75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 00D6
        gbc.setState(0x2667, 0x2a86, 0xae00, 0x8816, 0x58c3, 0x3d18, 0x0, 0x1);
        gbc.writeMem(0x2667, { 0x46 });
        gbc.writeMem(0x3d18, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x2a86);
        EXPECT(gbc.pc(), 0x2668);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 00D7
        gbc.setState(0x23d7, 0xd064, 0x6390, 0x39c1, 0x77d0, 0x3ac0, 0x1, 0x1);
        gbc.writeMem(0x23d7, { 0x46 });
        gbc.writeMem(0x3ac0, { 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xd064);
        EXPECT(gbc.pc(), 0x23d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 00D8
        gbc.setState(0xb3f3, 0xf3ef, 0x1280, 0xd03d, 0x4cc, 0x3069, 0x1, 0x1);
        gbc.writeMem(0x3069, { 0xb });
        gbc.writeMem(0xb3f3, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xf3ef);
        EXPECT(gbc.pc(), 0xb3f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3f3), 0x46);
        // 46 00D9
        gbc.setState(0x4d7c, 0x168, 0xbc50, 0xfd0d, 0x1219, 0x53a3, 0x1, 0x1);
        gbc.writeMem(0x4d7c, { 0x46 });
        gbc.writeMem(0x53a3, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x168);
        EXPECT(gbc.pc(), 0x4d7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 00DA
        gbc.setState(0xd831, 0x8ba7, 0xac30, 0x3b85, 0x6179, 0x14f2, 0x1, 0x1);
        gbc.writeMem(0x14f2, { 0x2c });
        gbc.writeMem(0xd831, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x8ba7);
        EXPECT(gbc.pc(), 0xd832);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd831), 0x46);
        // 46 00DB
        gbc.setState(0x8c54, 0x67d9, 0xba50, 0x5c1a, 0x364b, 0x484d, 0x1, 0x1);
        gbc.writeMem(0x484d, { 0xa4 });
        gbc.writeMem(0x8c54, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x67d9);
        EXPECT(gbc.pc(), 0x8c55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c54), 0x46);
        // 46 00DC
        gbc.setState(0xe616, 0x9523, 0x9030, 0x3501, 0x8b5, 0x588e, 0x1, 0x1);
        gbc.writeMem(0x588e, { 0x6c });
        gbc.writeMem(0xe616, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x9523);
        EXPECT(gbc.pc(), 0xe617);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe616), 0x46);
        // 46 00DD
        gbc.setState(0xd25e, 0xdac2, 0xbce0, 0x89e5, 0xa157, 0xc953, 0x0, 0x1);
        gbc.writeMem(0xc953, { 0x8e });
        gbc.writeMem(0xd25e, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xdac2);
        EXPECT(gbc.pc(), 0xd25f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc953), 0x8e);
        EXPECT(gbc.readMem(0xd25e), 0x46);
        // 46 00DE
        gbc.setState(0x1ea4, 0x6f29, 0x5370, 0x8922, 0x47b6, 0x5045, 0x1, 0x0);
        gbc.writeMem(0x1ea4, { 0x46 });
        gbc.writeMem(0x5045, { 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x6f29);
        EXPECT(gbc.pc(), 0x1ea5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 00DF
        gbc.setState(0x1ba8, 0x78ec, 0x9630, 0x5b9f, 0x8b31, 0x4298, 0x1, 0x1);
        gbc.writeMem(0x1ba8, { 0x46 });
        gbc.writeMem(0x4298, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x78ec);
        EXPECT(gbc.pc(), 0x1ba9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 00E0
        gbc.setState(0x9e85, 0x3a96, 0x60f0, 0xe257, 0xd71d, 0xe547, 0x0, 0x0);
        gbc.writeMem(0x9e85, { 0x46 });
        gbc.writeMem(0xe547, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x3a96);
        EXPECT(gbc.pc(), 0x9e86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e85), 0x46);
        EXPECT(gbc.readMem(0xe547), 0xb2);
        // 46 00E1
        gbc.setState(0x7df1, 0x29c1, 0xab60, 0x65f9, 0xa7d3, 0xe890, 0x1, 0x0);
        gbc.writeMem(0x7df1, { 0x46 });
        gbc.writeMem(0xe890, { 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x29c1);
        EXPECT(gbc.pc(), 0x7df2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe890), 0xe0);
        // 46 00E2
        gbc.setState(0x18d2, 0x55aa, 0xff60, 0x3ec3, 0x55cb, 0xf442, 0x0, 0x1);
        gbc.writeMem(0x18d2, { 0x46 });
        gbc.writeMem(0xf442, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x55aa);
        EXPECT(gbc.pc(), 0x18d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf442), 0x19);
        // 46 00E4
        gbc.setState(0xbeac, 0xf51e, 0x4990, 0xc9b6, 0x7cea, 0xa16c, 0x1, 0x1);
        gbc.writeMem(0xa16c, { 0xb0 });
        gbc.writeMem(0xbeac, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xf51e);
        EXPECT(gbc.pc(), 0xbead);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa16c), 0xb0);
        EXPECT(gbc.readMem(0xbeac), 0x46);
        // 46 00E5
        gbc.setState(0x9315, 0xd2e2, 0xa690, 0x6d0, 0x12e4, 0x90fc, 0x1, 0x1);
        gbc.writeMem(0x90fc, { 0x9c });
        gbc.writeMem(0x9315, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xd2e2);
        EXPECT(gbc.pc(), 0x9316);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90fc), 0x9c);
        EXPECT(gbc.readMem(0x9315), 0x46);
        // 46 00E6
        gbc.setState(0xc92e, 0xa5a, 0xc120, 0x3b9f, 0x3563, 0xe692, 0x0, 0x0);
        gbc.writeMem(0xc92e, { 0x46 });
        gbc.writeMem(0xe692, { 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xa5a);
        EXPECT(gbc.pc(), 0xc92f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc92e), 0x46);
        EXPECT(gbc.readMem(0xe692), 0xf6);
        // 46 00E7
        gbc.setState(0x5ae0, 0x3306, 0x5a0, 0x8f76, 0x552e, 0xba15, 0x0, 0x0);
        gbc.writeMem(0x5ae0, { 0x46 });
        gbc.writeMem(0xba15, { 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x3306);
        EXPECT(gbc.pc(), 0x5ae1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba15), 0x58);
        // 46 00E8
        gbc.setState(0x77cd, 0x724f, 0x3510, 0x2512, 0x3de3, 0x946f, 0x0, 0x0);
        gbc.writeMem(0x77cd, { 0x46 });
        gbc.writeMem(0x946f, { 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x724f);
        EXPECT(gbc.pc(), 0x77ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x946f), 0x12);
        // 46 00E9
        gbc.setState(0x96d1, 0x7657, 0x94b0, 0xc792, 0xef0e, 0x80f0, 0x0, 0x1);
        gbc.writeMem(0x80f0, { 0x40 });
        gbc.writeMem(0x96d1, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x7657);
        EXPECT(gbc.pc(), 0x96d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80f0), 0x40);
        EXPECT(gbc.readMem(0x96d1), 0x46);
        // 46 00EA
        gbc.setState(0x22d0, 0x4bf0, 0xf7a0, 0x1e34, 0x8467, 0xbfaf, 0x1, 0x0);
        gbc.writeMem(0x22d0, { 0x46 });
        gbc.writeMem(0xbfaf, { 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x4bf0);
        EXPECT(gbc.pc(), 0x22d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfaf), 0x70);
        // 46 00EB
        gbc.setState(0xb42c, 0xa804, 0xef90, 0x24ff, 0x1a21, 0x83e, 0x0, 0x1);
        gbc.writeMem(0x83e, { 0x79 });
        gbc.writeMem(0xb42c, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xa804);
        EXPECT(gbc.pc(), 0xb42d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb42c), 0x46);
        // 46 00EC
        gbc.setState(0xb4d7, 0x2c89, 0x1f80, 0xd630, 0x6977, 0x97f8, 0x1, 0x0);
        gbc.writeMem(0x97f8, { 0x4e });
        gbc.writeMem(0xb4d7, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x2c89);
        EXPECT(gbc.pc(), 0xb4d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97f8), 0x4e);
        EXPECT(gbc.readMem(0xb4d7), 0x46);
        // 46 00ED
        gbc.setState(0xa182, 0xfe07, 0xd4d0, 0x7844, 0x34c7, 0xf065, 0x0, 0x0);
        gbc.writeMem(0xa182, { 0x46 });
        gbc.writeMem(0xf065, { 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xfe07);
        EXPECT(gbc.pc(), 0xa183);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa182), 0x46);
        EXPECT(gbc.readMem(0xf065), 0x99);
        // 46 00EE
        gbc.setState(0xdb45, 0xac21, 0xad80, 0x774b, 0x9b47, 0x831b, 0x0, 0x1);
        gbc.writeMem(0x831b, { 0x1e });
        gbc.writeMem(0xdb45, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xac21);
        EXPECT(gbc.pc(), 0xdb46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x831b), 0x1e);
        EXPECT(gbc.readMem(0xdb45), 0x46);
        // 46 00EF
        gbc.setState(0x43e4, 0x2a62, 0xbd40, 0xf08, 0x37, 0x4d2f, 0x0, 0x0);
        gbc.writeMem(0x43e4, { 0x46 });
        gbc.writeMem(0x4d2f, { 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x2a62);
        EXPECT(gbc.pc(), 0x43e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 00F0
        gbc.setState(0x2318, 0xa706, 0x2d90, 0x1ee5, 0xd297, 0x7b86, 0x0, 0x0);
        gbc.writeMem(0x2318, { 0x46 });
        gbc.writeMem(0x7b86, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xa706);
        EXPECT(gbc.pc(), 0x2319);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 00F1
        gbc.setState(0x59ee, 0x9264, 0xc840, 0xb5b7, 0xc899, 0xa242, 0x1, 0x1);
        gbc.writeMem(0x59ee, { 0x46 });
        gbc.writeMem(0xa242, { 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x9264);
        EXPECT(gbc.pc(), 0x59ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa242), 0x80);
        // 46 00F2
        gbc.setState(0x2ff4, 0x24ff, 0x1f0, 0xecc6, 0xa735, 0x817c, 0x1, 0x1);
        gbc.writeMem(0x2ff4, { 0x46 });
        gbc.writeMem(0x817c, { 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x24ff);
        EXPECT(gbc.pc(), 0x2ff5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x817c), 0x50);
        // 46 00F3
        gbc.setState(0x49d5, 0x6b28, 0x6620, 0xfcb6, 0xa022, 0xcb71, 0x1, 0x0);
        gbc.writeMem(0x49d5, { 0x46 });
        gbc.writeMem(0xcb71, { 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x6b28);
        EXPECT(gbc.pc(), 0x49d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb71), 0x5c);
        // 46 00F4
        gbc.setState(0x20e2, 0x48dc, 0x8d10, 0x68c7, 0x92c5, 0x7ace, 0x0, 0x1);
        gbc.writeMem(0x20e2, { 0x46 });
        gbc.writeMem(0x7ace, { 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x48dc);
        EXPECT(gbc.pc(), 0x20e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 00F5
        gbc.setState(0x3be, 0x9183, 0x9e50, 0xca25, 0xb92f, 0x3133, 0x1, 0x1);
        gbc.writeMem(0x3be, { 0x46 });
        gbc.writeMem(0x3133, { 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x9183);
        EXPECT(gbc.pc(), 0x3bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 00F6
        gbc.setState(0x4d7c, 0x3f13, 0x9020, 0x223, 0x8f38, 0x3bff, 0x0, 0x0);
        gbc.writeMem(0x3bff, { 0x9b });
        gbc.writeMem(0x4d7c, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x3f13);
        EXPECT(gbc.pc(), 0x4d7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 00F7
        gbc.setState(0x2cda, 0x3dd8, 0xe220, 0xe230, 0xab73, 0xef90, 0x1, 0x1);
        gbc.writeMem(0x2cda, { 0x46 });
        gbc.writeMem(0xef90, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x3dd8);
        EXPECT(gbc.pc(), 0x2cdb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef90), 0xa5);
        // 46 00F8
        gbc.setState(0xd824, 0x9b7e, 0x9250, 0x2971, 0xd4f6, 0xa370, 0x0, 0x0);
        gbc.writeMem(0xa370, { 0x4f });
        gbc.writeMem(0xd824, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x9b7e);
        EXPECT(gbc.pc(), 0xd825);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa370), 0x4f);
        EXPECT(gbc.readMem(0xd824), 0x46);
        // 46 00F9
        gbc.setState(0xc750, 0x3d8e, 0x9a50, 0x8152, 0xab8, 0x659, 0x1, 0x1);
        gbc.writeMem(0x659, { 0x18 });
        gbc.writeMem(0xc750, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x3d8e);
        EXPECT(gbc.pc(), 0xc751);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc750), 0x46);
        // 46 00FA
        gbc.setState(0x77fc, 0x5229, 0xdb40, 0x9086, 0x409e, 0xc61a, 0x1, 0x0);
        gbc.writeMem(0x77fc, { 0x46 });
        gbc.writeMem(0xc61a, { 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x5229);
        EXPECT(gbc.pc(), 0x77fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc61a), 0xd0);
        // 46 00FB
        gbc.setState(0xb503, 0x5ed6, 0x9e0, 0x645f, 0x5dee, 0xb330, 0x0, 0x1);
        gbc.writeMem(0xb330, { 0xca });
        gbc.writeMem(0xb503, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x5ed6);
        EXPECT(gbc.pc(), 0xb504);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb330), 0xca);
        EXPECT(gbc.readMem(0xb503), 0x46);
        // 46 00FC
        gbc.setState(0x3466, 0x57d1, 0x8900, 0xa13f, 0x4046, 0x933a, 0x1, 0x0);
        gbc.writeMem(0x3466, { 0x46 });
        gbc.writeMem(0x933a, { 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x57d1);
        EXPECT(gbc.pc(), 0x3467);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x933a), 0x3d);
        // 46 00FD
        gbc.setState(0x596b, 0xdce4, 0x91a0, 0xfee0, 0xc4d, 0xb074, 0x1, 0x1);
        gbc.writeMem(0x596b, { 0x46 });
        gbc.writeMem(0xb074, { 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xdce4);
        EXPECT(gbc.pc(), 0x596c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb074), 0x15);
        // 46 00FE
        gbc.setState(0x6cf3, 0x7a38, 0x5c50, 0x9049, 0x5d65, 0x6489, 0x1, 0x0);
        gbc.writeMem(0x6489, { 0x4c });
        gbc.writeMem(0x6cf3, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x7a38);
        EXPECT(gbc.pc(), 0x6cf4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 00FF
        gbc.setState(0xa3c, 0x4abc, 0xa030, 0x75e6, 0x9cba, 0xfd65, 0x1, 0x0);
        gbc.writeMem(0xa3c, { 0x46 });
        gbc.writeMem(0xfd65, { 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x4abc);
        EXPECT(gbc.pc(), 0xa3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfd65), 0x87);
        // 46 0100
        gbc.setState(0xe8b2, 0xe8ce, 0x33d0, 0x4703, 0x7ebd, 0x2143, 0x0, 0x1);
        gbc.writeMem(0x2143, { 0x17 });
        gbc.writeMem(0xe8b2, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xe8ce);
        EXPECT(gbc.pc(), 0xe8b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8b2), 0x46);
        // 46 0101
        gbc.setState(0xe35b, 0xb67f, 0x8770, 0x8e6c, 0xea7c, 0x3305, 0x1, 0x1);
        gbc.writeMem(0x3305, { 0xd0 });
        gbc.writeMem(0xe35b, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xb67f);
        EXPECT(gbc.pc(), 0xe35c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe35b), 0x46);
        // 46 0102
        gbc.setState(0x8876, 0xe127, 0x8b50, 0x11ff, 0x9dc0, 0x3d03, 0x0, 0x0);
        gbc.writeMem(0x3d03, { 0xe });
        gbc.writeMem(0x8876, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xe127);
        EXPECT(gbc.pc(), 0x8877);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8876), 0x46);
        // 46 0104
        gbc.setState(0xbeb6, 0x35e9, 0x6b20, 0x39e5, 0x4911, 0x323c, 0x1, 0x1);
        gbc.writeMem(0x323c, { 0xcf });
        gbc.writeMem(0xbeb6, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x35e9);
        EXPECT(gbc.pc(), 0xbeb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbeb6), 0x46);
        // 46 0105
        gbc.setState(0x521c, 0xbff1, 0xe010, 0xe7b0, 0x94d9, 0x3ad6, 0x0, 0x1);
        gbc.writeMem(0x3ad6, { 0x67 });
        gbc.writeMem(0x521c, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xbff1);
        EXPECT(gbc.pc(), 0x521d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 0106
        gbc.setState(0xd86e, 0xe86a, 0x32b0, 0x4d92, 0x2edd, 0xe1aa, 0x0, 0x0);
        gbc.writeMem(0xd86e, { 0x46 });
        gbc.writeMem(0xe1aa, { 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xe86a);
        EXPECT(gbc.pc(), 0xd86f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd86e), 0x46);
        EXPECT(gbc.readMem(0xe1aa), 0x65);
        // 46 0108
        gbc.setState(0xc1d9, 0x90d0, 0xb0f0, 0xd189, 0x732e, 0x38, 0x1, 0x0);
        gbc.writeMem(0x38, { 0x9c });
        gbc.writeMem(0xc1d9, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x90d0);
        EXPECT(gbc.pc(), 0xc1da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1d9), 0x46);
        // 46 0109
        gbc.setState(0x61d2, 0xbf04, 0x24e0, 0x4d0a, 0x9a0a, 0xa4ed, 0x0, 0x1);
        gbc.writeMem(0x61d2, { 0x46 });
        gbc.writeMem(0xa4ed, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xbf04);
        EXPECT(gbc.pc(), 0x61d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4ed), 0x59);
        // 46 010A
        gbc.setState(0x713b, 0xed2c, 0x3a40, 0x73d9, 0x619d, 0x1f9e, 0x0, 0x1);
        gbc.writeMem(0x1f9e, { 0xd0 });
        gbc.writeMem(0x713b, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xed2c);
        EXPECT(gbc.pc(), 0x713c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 010B
        gbc.setState(0x38c3, 0x1a7e, 0xfa30, 0xea2a, 0x19c8, 0x288f, 0x0, 0x0);
        gbc.writeMem(0x288f, { 0xb4 });
        gbc.writeMem(0x38c3, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x1a7e);
        EXPECT(gbc.pc(), 0x38c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 010C
        gbc.setState(0x7ec3, 0xfca0, 0xa540, 0x9a98, 0x6543, 0x7eef, 0x1, 0x0);
        gbc.writeMem(0x7ec3, { 0x46 });
        gbc.writeMem(0x7eef, { 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xfca0);
        EXPECT(gbc.pc(), 0x7ec4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 010D
        gbc.setState(0x476e, 0x315e, 0x1400, 0x262d, 0x4f46, 0xa833, 0x0, 0x0);
        gbc.writeMem(0x476e, { 0x46 });
        gbc.writeMem(0xa833, { 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x315e);
        EXPECT(gbc.pc(), 0x476f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa833), 0x38);
        // 46 010E
        gbc.setState(0xaa2d, 0xcfbc, 0x2340, 0x652, 0xaf59, 0x9e85, 0x1, 0x0);
        gbc.writeMem(0x9e85, { 0x83 });
        gbc.writeMem(0xaa2d, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xcfbc);
        EXPECT(gbc.pc(), 0xaa2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e85), 0x83);
        EXPECT(gbc.readMem(0xaa2d), 0x46);
        // 46 010F
        gbc.setState(0x7136, 0x48e5, 0x6a40, 0x848f, 0xcc15, 0xb3d6, 0x0, 0x0);
        gbc.writeMem(0x7136, { 0x46 });
        gbc.writeMem(0xb3d6, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x48e5);
        EXPECT(gbc.pc(), 0x7137);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3d6), 0x30);
        // 46 0110
        gbc.setState(0x4ab0, 0xc7ca, 0x2a0, 0xa096, 0xcdef, 0x6380, 0x1, 0x1);
        gbc.writeMem(0x4ab0, { 0x46 });
        gbc.writeMem(0x6380, { 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xc7ca);
        EXPECT(gbc.pc(), 0x4ab1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 0111
        gbc.setState(0xbecf, 0x3b64, 0xe920, 0x6a6d, 0x7ef0, 0x2a2f, 0x0, 0x1);
        gbc.writeMem(0x2a2f, { 0x19 });
        gbc.writeMem(0xbecf, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x3b64);
        EXPECT(gbc.pc(), 0xbed0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbecf), 0x46);
        // 46 0112
        gbc.setState(0x3b51, 0xdc83, 0xb750, 0x59f9, 0x1c11, 0x44f4, 0x0, 0x0);
        gbc.writeMem(0x3b51, { 0x46 });
        gbc.writeMem(0x44f4, { 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xdc83);
        EXPECT(gbc.pc(), 0x3b52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 0113
        gbc.setState(0x3b82, 0x6293, 0xb680, 0xf266, 0x75e5, 0xf945, 0x1, 0x0);
        gbc.writeMem(0x3b82, { 0x46 });
        gbc.writeMem(0xf945, { 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x6293);
        EXPECT(gbc.pc(), 0x3b83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf945), 0xde);
        // 46 0114
        gbc.setState(0x8057, 0x6eac, 0x6d90, 0x4164, 0xdfd7, 0xbcb, 0x0, 0x1);
        gbc.writeMem(0xbcb, { 0xaa });
        gbc.writeMem(0x8057, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x6eac);
        EXPECT(gbc.pc(), 0x8058);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8057), 0x46);
        // 46 0115
        gbc.setState(0xa87a, 0xdb62, 0xecc0, 0x9ca9, 0x4e1e, 0x3f9b, 0x1, 0x0);
        gbc.writeMem(0x3f9b, { 0x46 });
        gbc.writeMem(0xa87a, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xdb62);
        EXPECT(gbc.pc(), 0xa87b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa87a), 0x46);
        // 46 0116
        gbc.setState(0x6adc, 0x5094, 0xbde0, 0x11c8, 0xfa5e, 0x3a5b, 0x0, 0x1);
        gbc.writeMem(0x3a5b, { 0x77 });
        gbc.writeMem(0x6adc, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x5094);
        EXPECT(gbc.pc(), 0x6add);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 0117
        gbc.setState(0xb2d9, 0xeca0, 0x480, 0x6267, 0x15a, 0x9a18, 0x1, 0x1);
        gbc.writeMem(0x9a18, { 0x4d });
        gbc.writeMem(0xb2d9, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xeca0);
        EXPECT(gbc.pc(), 0xb2da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a18), 0x4d);
        EXPECT(gbc.readMem(0xb2d9), 0x46);
        // 46 0118
        gbc.setState(0x1149, 0x31ab, 0x4cc0, 0xecb, 0x1819, 0x7780, 0x1, 0x0);
        gbc.writeMem(0x1149, { 0x46 });
        gbc.writeMem(0x7780, { 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x31ab);
        EXPECT(gbc.pc(), 0x114a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 0119
        gbc.setState(0x2406, 0xcaf7, 0x72f0, 0x2f7a, 0xd37a, 0x43e4, 0x1, 0x0);
        gbc.writeMem(0x2406, { 0x46 });
        gbc.writeMem(0x43e4, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xcaf7);
        EXPECT(gbc.pc(), 0x2407);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 011A
        gbc.setState(0xda97, 0xef2e, 0x47a0, 0x2da5, 0xaaaf, 0x1c59, 0x0, 0x1);
        gbc.writeMem(0x1c59, { 0x1d });
        gbc.writeMem(0xda97, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xef2e);
        EXPECT(gbc.pc(), 0xda98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda97), 0x46);
        // 46 011B
        gbc.setState(0xe03d, 0xa3e2, 0xc300, 0x9b9f, 0x288b, 0xf513, 0x1, 0x1);
        gbc.writeMem(0xe03d, { 0x46 });
        gbc.writeMem(0xf513, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xa3e2);
        EXPECT(gbc.pc(), 0xe03e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe03d), 0x46);
        EXPECT(gbc.readMem(0xf513), 0xf3);
        // 46 011C
        gbc.setState(0x2887, 0x6bf2, 0xc3d0, 0x28, 0x88c7, 0x350c, 0x0, 0x1);
        gbc.writeMem(0x2887, { 0x46 });
        gbc.writeMem(0x350c, { 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x6bf2);
        EXPECT(gbc.pc(), 0x2888);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 011E
        gbc.setState(0x88c9, 0x1ef8, 0xae0, 0xf2cc, 0x23de, 0x5bc5, 0x1, 0x0);
        gbc.writeMem(0x5bc5, { 0xe6 });
        gbc.writeMem(0x88c9, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x1ef8);
        EXPECT(gbc.pc(), 0x88ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88c9), 0x46);
        // 46 011F
        gbc.setState(0xbbb1, 0x607d, 0x6e60, 0x238c, 0x2022, 0xf97d, 0x0, 0x1);
        gbc.writeMem(0xbbb1, { 0x46 });
        gbc.writeMem(0xf97d, { 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x607d);
        EXPECT(gbc.pc(), 0xbbb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbb1), 0x46);
        EXPECT(gbc.readMem(0xf97d), 0xc6);
        // 46 0120
        gbc.setState(0xe472, 0x4ae8, 0x97f0, 0xee92, 0x38b5, 0x2c4, 0x0, 0x1);
        gbc.writeMem(0x2c4, { 0x61 });
        gbc.writeMem(0xe472, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x4ae8);
        EXPECT(gbc.pc(), 0xe473);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe472), 0x46);
        // 46 0121
        gbc.setState(0xc8af, 0xd35a, 0x8240, 0xf8f2, 0x5973, 0xc3c7, 0x1, 0x1);
        gbc.writeMem(0xc3c7, { 0x70 });
        gbc.writeMem(0xc8af, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xd35a);
        EXPECT(gbc.pc(), 0xc8b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3c7), 0x70);
        EXPECT(gbc.readMem(0xc8af), 0x46);
        // 46 0122
        gbc.setState(0x6b3f, 0x9898, 0x720, 0x7fde, 0x922d, 0xd2fa, 0x1, 0x0);
        gbc.writeMem(0x6b3f, { 0x46 });
        gbc.writeMem(0xd2fa, { 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x9898);
        EXPECT(gbc.pc(), 0x6b40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2fa), 0x29);
        // 46 0123
        gbc.setState(0xc532, 0x7dfe, 0x76d0, 0xf29d, 0x1175, 0x2082, 0x1, 0x1);
        gbc.writeMem(0x2082, { 0xd1 });
        gbc.writeMem(0xc532, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x7dfe);
        EXPECT(gbc.pc(), 0xc533);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc532), 0x46);
        // 46 0124
        gbc.setState(0x5e50, 0x1625, 0xc400, 0x8ab8, 0x8341, 0x70ca, 0x1, 0x1);
        gbc.writeMem(0x5e50, { 0x46 });
        gbc.writeMem(0x70ca, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x1625);
        EXPECT(gbc.pc(), 0x5e51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 0125
        gbc.setState(0xb597, 0xca68, 0x1b40, 0xe006, 0xb2a5, 0xf9ca, 0x0, 0x1);
        gbc.writeMem(0xb597, { 0x46 });
        gbc.writeMem(0xf9ca, { 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xca68);
        EXPECT(gbc.pc(), 0xb598);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb597), 0x46);
        EXPECT(gbc.readMem(0xf9ca), 0xf1);
        // 46 0126
        gbc.setState(0xb372, 0xd477, 0xa360, 0xf632, 0xc557, 0x8d00, 0x1, 0x1);
        gbc.writeMem(0x8d00, { 0xa5 });
        gbc.writeMem(0xb372, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xd477);
        EXPECT(gbc.pc(), 0xb373);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d00), 0xa5);
        EXPECT(gbc.readMem(0xb372), 0x46);
        // 46 0127
        gbc.setState(0x3cc8, 0x98c7, 0xaeb0, 0x9489, 0xde83, 0xab9f, 0x0, 0x0);
        gbc.writeMem(0x3cc8, { 0x46 });
        gbc.writeMem(0xab9f, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x98c7);
        EXPECT(gbc.pc(), 0x3cc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab9f), 0x95);
        // 46 0128
        gbc.setState(0xd88, 0x5fb4, 0x9f70, 0xec05, 0xc8bd, 0x7ca9, 0x1, 0x1);
        gbc.writeMem(0xd88, { 0x46 });
        gbc.writeMem(0x7ca9, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x5fb4);
        EXPECT(gbc.pc(), 0xd89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 0129
        gbc.setState(0x2138, 0xbd3f, 0x87d0, 0x8c5d, 0x6afc, 0x4233, 0x0, 0x0);
        gbc.writeMem(0x2138, { 0x46 });
        gbc.writeMem(0x4233, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xbd3f);
        EXPECT(gbc.pc(), 0x2139);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 012B
        gbc.setState(0xd53f, 0x249d, 0x23f0, 0xa181, 0x8467, 0x96f5, 0x0, 0x0);
        gbc.writeMem(0x96f5, { 0xa4 });
        gbc.writeMem(0xd53f, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x249d);
        EXPECT(gbc.pc(), 0xd540);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96f5), 0xa4);
        EXPECT(gbc.readMem(0xd53f), 0x46);
        // 46 012C
        gbc.setState(0x8951, 0x519a, 0x8bb0, 0x3b57, 0xf6ae, 0x4171, 0x1, 0x1);
        gbc.writeMem(0x4171, { 0xfd });
        gbc.writeMem(0x8951, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x519a);
        EXPECT(gbc.pc(), 0x8952);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8951), 0x46);
        // 46 012D
        gbc.setState(0x906a, 0x80a9, 0x2cc0, 0xfb3d, 0x7bc7, 0xad5b, 0x1, 0x1);
        gbc.writeMem(0x906a, { 0x46 });
        gbc.writeMem(0xad5b, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x80a9);
        EXPECT(gbc.pc(), 0x906b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x906a), 0x46);
        EXPECT(gbc.readMem(0xad5b), 0xdb);
        // 46 012E
        gbc.setState(0x11b0, 0x17ee, 0xeb00, 0x1593, 0xc144, 0xaa5b, 0x0, 0x0);
        gbc.writeMem(0x11b0, { 0x46 });
        gbc.writeMem(0xaa5b, { 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x17ee);
        EXPECT(gbc.pc(), 0x11b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa5b), 0xa0);
        // 46 012F
        gbc.setState(0x7f01, 0x8796, 0xcb00, 0x5436, 0x246d, 0x62e1, 0x0, 0x1);
        gbc.writeMem(0x62e1, { 0x20 });
        gbc.writeMem(0x7f01, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x8796);
        EXPECT(gbc.pc(), 0x7f02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 0130
        gbc.setState(0x2e96, 0xbda8, 0x15e0, 0xeff0, 0xcf99, 0xa573, 0x1, 0x0);
        gbc.writeMem(0x2e96, { 0x46 });
        gbc.writeMem(0xa573, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xbda8);
        EXPECT(gbc.pc(), 0x2e97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa573), 0xf5);
        // 46 0131
        gbc.setState(0x25f3, 0xc2b9, 0xd520, 0xd5dc, 0x3448, 0xe5e, 0x1, 0x0);
        gbc.writeMem(0xe5e, { 0x9d });
        gbc.writeMem(0x25f3, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xc2b9);
        EXPECT(gbc.pc(), 0x25f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 0132
        gbc.setState(0xc8a9, 0xc914, 0xeec0, 0x21aa, 0x46c8, 0x6a5b, 0x0, 0x1);
        gbc.writeMem(0x6a5b, { 0x35 });
        gbc.writeMem(0xc8a9, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xc914);
        EXPECT(gbc.pc(), 0xc8aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8a9), 0x46);
        // 46 0133
        gbc.setState(0x34e4, 0x85e5, 0xede0, 0xf6d8, 0x62ee, 0xf5b5, 0x1, 0x1);
        gbc.writeMem(0x34e4, { 0x46 });
        gbc.writeMem(0xf5b5, { 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x85e5);
        EXPECT(gbc.pc(), 0x34e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf5b5), 0x88);
        // 46 0134
        gbc.setState(0x4085, 0xf0db, 0x4a90, 0x76d9, 0xebaf, 0xde40, 0x0, 0x0);
        gbc.writeMem(0x4085, { 0x46 });
        gbc.writeMem(0xde40, { 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xf0db);
        EXPECT(gbc.pc(), 0x4086);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde40), 0xad);
        // 46 0135
        gbc.setState(0x3f6, 0x6445, 0x1240, 0xb763, 0x1c98, 0x96ea, 0x0, 0x1);
        gbc.writeMem(0x3f6, { 0x46 });
        gbc.writeMem(0x96ea, { 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x6445);
        EXPECT(gbc.pc(), 0x3f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96ea), 0x27);
        // 46 0136
        gbc.setState(0xad61, 0x4a9c, 0x1ce0, 0x4ddf, 0x451e, 0xe0a2, 0x0, 0x0);
        gbc.writeMem(0xad61, { 0x46 });
        gbc.writeMem(0xe0a2, { 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x4a9c);
        EXPECT(gbc.pc(), 0xad62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad61), 0x46);
        EXPECT(gbc.readMem(0xe0a2), 0x4);
        // 46 0137
        gbc.setState(0x3ba8, 0x455d, 0x3e50, 0x758, 0x4f64, 0xa9fa, 0x1, 0x0);
        gbc.writeMem(0x3ba8, { 0x46 });
        gbc.writeMem(0xa9fa, { 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x455d);
        EXPECT(gbc.pc(), 0x3ba9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9fa), 0x6a);
        // 46 0138
        gbc.setState(0x5111, 0x7cc0, 0xaeb0, 0x4adb, 0x7cdb, 0x35ef, 0x0, 0x1);
        gbc.writeMem(0x35ef, { 0xe5 });
        gbc.writeMem(0x5111, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x7cc0);
        EXPECT(gbc.pc(), 0x5112);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 0139
        gbc.setState(0x9554, 0x4336, 0xd90, 0xa842, 0x565d, 0xd1da, 0x1, 0x1);
        gbc.writeMem(0x9554, { 0x46 });
        gbc.writeMem(0xd1da, { 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x4336);
        EXPECT(gbc.pc(), 0x9555);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9554), 0x46);
        EXPECT(gbc.readMem(0xd1da), 0xe6);
        // 46 013A
        gbc.setState(0x5a07, 0xb383, 0x84f0, 0xf91a, 0x78bc, 0xe53e, 0x1, 0x0);
        gbc.writeMem(0x5a07, { 0x46 });
        gbc.writeMem(0xe53e, { 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xb383);
        EXPECT(gbc.pc(), 0x5a08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe53e), 0xbf);
        // 46 013C
        gbc.setState(0x3544, 0xaec7, 0x4c80, 0xa1a1, 0x58ea, 0x59cd, 0x1, 0x1);
        gbc.writeMem(0x3544, { 0x46 });
        gbc.writeMem(0x59cd, { 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xaec7);
        EXPECT(gbc.pc(), 0x3545);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 013E
        gbc.setState(0x4c91, 0x82e0, 0xd0b0, 0x840f, 0xd6bc, 0x49a4, 0x0, 0x1);
        gbc.writeMem(0x49a4, { 0xb1 });
        gbc.writeMem(0x4c91, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x82e0);
        EXPECT(gbc.pc(), 0x4c92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 013F
        gbc.setState(0xd85f, 0xf5de, 0x9350, 0xa776, 0xdc5a, 0x2ebb, 0x1, 0x1);
        gbc.writeMem(0x2ebb, { 0x32 });
        gbc.writeMem(0xd85f, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xf5de);
        EXPECT(gbc.pc(), 0xd860);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd85f), 0x46);
        // 46 0140
        gbc.setState(0xafd9, 0x6ba0, 0xfe70, 0xab68, 0x809d, 0x874d, 0x0, 0x0);
        gbc.writeMem(0x874d, { 0x7 });
        gbc.writeMem(0xafd9, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x6ba0);
        EXPECT(gbc.pc(), 0xafda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x874d), 0x7);
        EXPECT(gbc.readMem(0xafd9), 0x46);
        // 46 0141
        gbc.setState(0x9345, 0xef5, 0x28c0, 0x4d30, 0x38f7, 0xb758, 0x0, 0x0);
        gbc.writeMem(0x9345, { 0x46 });
        gbc.writeMem(0xb758, { 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xef5);
        EXPECT(gbc.pc(), 0x9346);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9345), 0x46);
        EXPECT(gbc.readMem(0xb758), 0x87);
        // 46 0142
        gbc.setState(0x490d, 0xc346, 0x3690, 0x8409, 0x6973, 0xa112, 0x0, 0x1);
        gbc.writeMem(0x490d, { 0x46 });
        gbc.writeMem(0xa112, { 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xc346);
        EXPECT(gbc.pc(), 0x490e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa112), 0x17);
        // 46 0143
        gbc.setState(0x7cd4, 0xb502, 0x2010, 0xcb6b, 0x8666, 0xa646, 0x1, 0x0);
        gbc.writeMem(0x7cd4, { 0x46 });
        gbc.writeMem(0xa646, { 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xb502);
        EXPECT(gbc.pc(), 0x7cd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa646), 0xa);
        // 46 0144
        gbc.setState(0xc042, 0xb26c, 0x6c90, 0x836, 0xb9cb, 0x8e99, 0x0, 0x1);
        gbc.writeMem(0x8e99, { 0xd9 });
        gbc.writeMem(0xc042, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xb26c);
        EXPECT(gbc.pc(), 0xc043);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e99), 0xd9);
        EXPECT(gbc.readMem(0xc042), 0x46);
        // 46 0145
        gbc.setState(0x5f94, 0xb46a, 0x67c0, 0xaed6, 0xed93, 0xba4, 0x1, 0x1);
        gbc.writeMem(0xba4, { 0x4f });
        gbc.writeMem(0x5f94, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xb46a);
        EXPECT(gbc.pc(), 0x5f95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 0146
        gbc.setState(0xbc97, 0xbdda, 0x9450, 0xe14c, 0x3692, 0x5120, 0x1, 0x1);
        gbc.writeMem(0x5120, { 0x57 });
        gbc.writeMem(0xbc97, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xbdda);
        EXPECT(gbc.pc(), 0xbc98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc97), 0x46);
        // 46 0147
        gbc.setState(0x8646, 0x9174, 0xd270, 0xb1b9, 0x1a70, 0xd510, 0x1, 0x0);
        gbc.writeMem(0x8646, { 0x46 });
        gbc.writeMem(0xd510, { 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x9174);
        EXPECT(gbc.pc(), 0x8647);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8646), 0x46);
        EXPECT(gbc.readMem(0xd510), 0xeb);
        // 46 0149
        gbc.setState(0xa3f1, 0x8052, 0x4c70, 0xfd73, 0x1b09, 0x413f, 0x0, 0x1);
        gbc.writeMem(0x413f, { 0xc2 });
        gbc.writeMem(0xa3f1, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x8052);
        EXPECT(gbc.pc(), 0xa3f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3f1), 0x46);
        // 46 014A
        gbc.setState(0x2cd3, 0xc400, 0x14f0, 0xf60a, 0xe1bb, 0xfff0, 0x0, 0x1);
        gbc.writeMem(0x2cd3, { 0x46 });
        gbc.writeMem(0xfff0, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xc400);
        EXPECT(gbc.pc(), 0x2cd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfff0), 0xc0);
        // 46 014B
        gbc.setState(0xba37, 0xdcf6, 0x80d0, 0x33f0, 0x353b, 0xf56c, 0x1, 0x0);
        gbc.writeMem(0xba37, { 0x46 });
        gbc.writeMem(0xf56c, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xdcf6);
        EXPECT(gbc.pc(), 0xba38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba37), 0x46);
        EXPECT(gbc.readMem(0xf56c), 0x94);
        // 46 014D
        gbc.setState(0xef3b, 0xc255, 0xf210, 0xa5d6, 0x1ea0, 0x9ea0, 0x0, 0x1);
        gbc.writeMem(0x9ea0, { 0xa4 });
        gbc.writeMem(0xef3b, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xc255);
        EXPECT(gbc.pc(), 0xef3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ea0), 0xa4);
        EXPECT(gbc.readMem(0xef3b), 0x46);
        // 46 014E
        gbc.setState(0x7d8b, 0x8eee, 0x6ee0, 0xeacb, 0xaafa, 0x162, 0x1, 0x0);
        gbc.writeMem(0x162, { 0x97 });
        gbc.writeMem(0x7d8b, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x8eee);
        EXPECT(gbc.pc(), 0x7d8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 014F
        gbc.setState(0xc739, 0x9170, 0xa630, 0xbb7, 0xc872, 0x48e0, 0x1, 0x0);
        gbc.writeMem(0x48e0, { 0x5e });
        gbc.writeMem(0xc739, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x9170);
        EXPECT(gbc.pc(), 0xc73a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc739), 0x46);
        // 46 0150
        gbc.setState(0x860, 0x991d, 0x1520, 0x3478, 0x878e, 0x126c, 0x0, 0x1);
        gbc.writeMem(0x860, { 0x46 });
        gbc.writeMem(0x126c, { 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x991d);
        EXPECT(gbc.pc(), 0x861);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 0151
        gbc.setState(0x6c4b, 0x15dc, 0xe870, 0xc636, 0x78d0, 0xe4aa, 0x0, 0x0);
        gbc.writeMem(0x6c4b, { 0x46 });
        gbc.writeMem(0xe4aa, { 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x15dc);
        EXPECT(gbc.pc(), 0x6c4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4aa), 0x9b);
        // 46 0152
        gbc.setState(0x6630, 0x12ef, 0xa710, 0xd987, 0x4926, 0x2cc0, 0x0, 0x0);
        gbc.writeMem(0x2cc0, { 0xa });
        gbc.writeMem(0x6630, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x12ef);
        EXPECT(gbc.pc(), 0x6631);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 0153
        gbc.setState(0xa3c5, 0x6c1b, 0x9180, 0x505b, 0xaf0a, 0xd9c5, 0x1, 0x0);
        gbc.writeMem(0xa3c5, { 0x46 });
        gbc.writeMem(0xd9c5, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x6c1b);
        EXPECT(gbc.pc(), 0xa3c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3c5), 0x46);
        EXPECT(gbc.readMem(0xd9c5), 0x9);
        // 46 0154
        gbc.setState(0xe39, 0xa8eb, 0x70, 0xe68c, 0x10f4, 0xcaab, 0x0, 0x1);
        gbc.writeMem(0xe39, { 0x46 });
        gbc.writeMem(0xcaab, { 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xa8eb);
        EXPECT(gbc.pc(), 0xe3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcaab), 0x29);
        // 46 0156
        gbc.setState(0xdc17, 0xa00b, 0x13f0, 0x66a6, 0xe6e9, 0x3a0a, 0x0, 0x0);
        gbc.writeMem(0x3a0a, { 0x5e });
        gbc.writeMem(0xdc17, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xa00b);
        EXPECT(gbc.pc(), 0xdc18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc17), 0x46);
        // 46 0157
        gbc.setState(0xd8f7, 0xaebd, 0xb1c0, 0x792c, 0x24be, 0xd536, 0x1, 0x0);
        gbc.writeMem(0xd536, { 0x7c });
        gbc.writeMem(0xd8f7, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xaebd);
        EXPECT(gbc.pc(), 0xd8f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd536), 0x7c);
        EXPECT(gbc.readMem(0xd8f7), 0x46);
        // 46 0158
        gbc.setState(0x56c6, 0x3b28, 0x2ec0, 0xac5e, 0xf2b7, 0x9603, 0x1, 0x1);
        gbc.writeMem(0x56c6, { 0x46 });
        gbc.writeMem(0x9603, { 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x3b28);
        EXPECT(gbc.pc(), 0x56c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9603), 0x69);
        // 46 0159
        gbc.setState(0xafe4, 0xc215, 0xfb0, 0xf7dc, 0xddc5, 0x1334, 0x1, 0x0);
        gbc.writeMem(0x1334, { 0x95 });
        gbc.writeMem(0xafe4, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xc215);
        EXPECT(gbc.pc(), 0xafe5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafe4), 0x46);
        // 46 015A
        gbc.setState(0x739a, 0x7e76, 0x7e10, 0x22, 0xf1b4, 0x7d92, 0x1, 0x1);
        gbc.writeMem(0x739a, { 0x46 });
        gbc.writeMem(0x7d92, { 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x7e76);
        EXPECT(gbc.pc(), 0x739b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 015B
        gbc.setState(0xc58d, 0xb262, 0x59d0, 0xe3c0, 0x8b8e, 0xe6c9, 0x0, 0x0);
        gbc.writeMem(0xc58d, { 0x46 });
        gbc.writeMem(0xe6c9, { 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xb262);
        EXPECT(gbc.pc(), 0xc58e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc58d), 0x46);
        EXPECT(gbc.readMem(0xe6c9), 0x5b);
        // 46 015D
        gbc.setState(0x1e73, 0x2326, 0xe610, 0xade4, 0xeaa8, 0x6277, 0x1, 0x1);
        gbc.writeMem(0x1e73, { 0x46 });
        gbc.writeMem(0x6277, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x2326);
        EXPECT(gbc.pc(), 0x1e74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 015E
        gbc.setState(0xabfe, 0x6051, 0x2340, 0xfcc8, 0xc5da, 0xf1e9, 0x1, 0x0);
        gbc.writeMem(0xabfe, { 0x46 });
        gbc.writeMem(0xf1e9, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x6051);
        EXPECT(gbc.pc(), 0xabff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabfe), 0x46);
        EXPECT(gbc.readMem(0xf1e9), 0xc7);
        // 46 015F
        gbc.setState(0x5faa, 0x9d62, 0x7c90, 0x13c4, 0xfbe9, 0x192e, 0x0, 0x1);
        gbc.writeMem(0x192e, { 0xef });
        gbc.writeMem(0x5faa, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x9d62);
        EXPECT(gbc.pc(), 0x5fab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 0160
        gbc.setState(0xd82e, 0x326, 0x5f40, 0xb36a, 0xa2af, 0x7fda, 0x0, 0x0);
        gbc.writeMem(0x7fda, { 0x4a });
        gbc.writeMem(0xd82e, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x326);
        EXPECT(gbc.pc(), 0xd82f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd82e), 0x46);
        // 46 0161
        gbc.setState(0x309f, 0x1147, 0xc850, 0x19f6, 0xc180, 0x496e, 0x1, 0x1);
        gbc.writeMem(0x309f, { 0x46 });
        gbc.writeMem(0x496e, { 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x1147);
        EXPECT(gbc.pc(), 0x30a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 0162
        gbc.setState(0x84cb, 0x27e, 0x4480, 0x525f, 0xd6a0, 0x56af, 0x1, 0x0);
        gbc.writeMem(0x56af, { 0x67 });
        gbc.writeMem(0x84cb, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x27e);
        EXPECT(gbc.pc(), 0x84cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84cb), 0x46);
        // 46 0163
        gbc.setState(0xda16, 0x5b6e, 0xd9f0, 0x64f6, 0x4c81, 0x6996, 0x1, 0x1);
        gbc.writeMem(0x6996, { 0x99 });
        gbc.writeMem(0xda16, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x5b6e);
        EXPECT(gbc.pc(), 0xda17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda16), 0x46);
        // 46 0164
        gbc.setState(0x976e, 0x86e5, 0x78c0, 0x4346, 0x4efa, 0x4beb, 0x1, 0x1);
        gbc.writeMem(0x4beb, { 0xc2 });
        gbc.writeMem(0x976e, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x86e5);
        EXPECT(gbc.pc(), 0x976f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x976e), 0x46);
        // 46 0165
        gbc.setState(0xea90, 0xe275, 0xf970, 0x58c1, 0x6aa5, 0x3055, 0x1, 0x0);
        gbc.writeMem(0x3055, { 0xd9 });
        gbc.writeMem(0xea90, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xe275);
        EXPECT(gbc.pc(), 0xea91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea90), 0x46);
        // 46 0166
        gbc.setState(0x4220, 0x604a, 0x37a0, 0x25fe, 0xb224, 0x9651, 0x1, 0x0);
        gbc.writeMem(0x4220, { 0x46 });
        gbc.writeMem(0x9651, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x604a);
        EXPECT(gbc.pc(), 0x4221);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9651), 0x86);
        // 46 0167
        gbc.setState(0x4957, 0xa2f5, 0x2050, 0x150a, 0xd779, 0x6f3b, 0x0, 0x1);
        gbc.writeMem(0x4957, { 0x46 });
        gbc.writeMem(0x6f3b, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xa2f5);
        EXPECT(gbc.pc(), 0x4958);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 0168
        gbc.setState(0x8a46, 0x374b, 0x97f0, 0xbd32, 0x73eb, 0xa297, 0x1, 0x1);
        gbc.writeMem(0x8a46, { 0x46 });
        gbc.writeMem(0xa297, { 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x374b);
        EXPECT(gbc.pc(), 0x8a47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a46), 0x46);
        EXPECT(gbc.readMem(0xa297), 0x9b);
        // 46 0169
        gbc.setState(0x8507, 0xd099, 0x6780, 0x6b92, 0xc50, 0xa24, 0x0, 0x1);
        gbc.writeMem(0xa24, { 0xae });
        gbc.writeMem(0x8507, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xd099);
        EXPECT(gbc.pc(), 0x8508);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8507), 0x46);
        // 46 016B
        gbc.setState(0xebce, 0x3d4f, 0xd040, 0x2637, 0x3b13, 0xba3b, 0x0, 0x1);
        gbc.writeMem(0xba3b, { 0x79 });
        gbc.writeMem(0xebce, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x3d4f);
        EXPECT(gbc.pc(), 0xebcf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba3b), 0x79);
        EXPECT(gbc.readMem(0xebce), 0x46);
        // 46 016C
        gbc.setState(0x8598, 0x8d3, 0x2da0, 0xbb10, 0x5385, 0x41a1, 0x1, 0x0);
        gbc.writeMem(0x41a1, { 0x4 });
        gbc.writeMem(0x8598, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x8d3);
        EXPECT(gbc.pc(), 0x8599);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8598), 0x46);
        // 46 016D
        gbc.setState(0x19d6, 0xdeeb, 0x47d0, 0xb977, 0x5683, 0x4490, 0x1, 0x1);
        gbc.writeMem(0x19d6, { 0x46 });
        gbc.writeMem(0x4490, { 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xdeeb);
        EXPECT(gbc.pc(), 0x19d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 016E
        gbc.setState(0xc444, 0x79ed, 0xf900, 0x867a, 0xe75c, 0x74d5, 0x1, 0x1);
        gbc.writeMem(0x74d5, { 0x73 });
        gbc.writeMem(0xc444, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x79ed);
        EXPECT(gbc.pc(), 0xc445);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc444), 0x46);
        // 46 016F
        gbc.setState(0xe207, 0x7d97, 0xe0c0, 0xcef3, 0xa05f, 0xb315, 0x1, 0x0);
        gbc.writeMem(0xb315, { 0x85 });
        gbc.writeMem(0xe207, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x7d97);
        EXPECT(gbc.pc(), 0xe208);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb315), 0x85);
        EXPECT(gbc.readMem(0xe207), 0x46);
        // 46 0170
        gbc.setState(0xaaf2, 0x408c, 0x2ba0, 0xb403, 0x8aaf, 0xfdb3, 0x0, 0x1);
        gbc.writeMem(0xaaf2, { 0x46 });
        gbc.writeMem(0xfdb3, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x408c);
        EXPECT(gbc.pc(), 0xaaf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaaf2), 0x46);
        EXPECT(gbc.readMem(0xfdb3), 0x73);
        // 46 0171
        gbc.setState(0x6342, 0xd0c0, 0x5fd0, 0x85a3, 0x4bac, 0xa859, 0x1, 0x1);
        gbc.writeMem(0x6342, { 0x46 });
        gbc.writeMem(0xa859, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xd0c0);
        EXPECT(gbc.pc(), 0x6343);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa859), 0xf9);
        // 46 0172
        gbc.setState(0x61fc, 0x4eda, 0xa9b0, 0xdc10, 0xe7cd, 0x1e8f, 0x0, 0x1);
        gbc.writeMem(0x1e8f, { 0xdf });
        gbc.writeMem(0x61fc, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x4eda);
        EXPECT(gbc.pc(), 0x61fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 0173
        gbc.setState(0x7393, 0x6a0b, 0xd460, 0xeb4e, 0x1c30, 0xe378, 0x1, 0x1);
        gbc.writeMem(0x7393, { 0x46 });
        gbc.writeMem(0xe378, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x6a0b);
        EXPECT(gbc.pc(), 0x7394);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe378), 0x4a);
        // 46 0174
        gbc.setState(0x774, 0x307, 0x53a0, 0x70bd, 0x8ddf, 0x1a12, 0x1, 0x1);
        gbc.writeMem(0x774, { 0x46 });
        gbc.writeMem(0x1a12, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x307);
        EXPECT(gbc.pc(), 0x775);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 0175
        gbc.setState(0xc948, 0x259e, 0xad70, 0x2aea, 0x9f33, 0x88c5, 0x1, 0x0);
        gbc.writeMem(0x88c5, { 0x8d });
        gbc.writeMem(0xc948, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x259e);
        EXPECT(gbc.pc(), 0xc949);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88c5), 0x8d);
        EXPECT(gbc.readMem(0xc948), 0x46);
        // 46 0176
        gbc.setState(0xd95a, 0xd4ff, 0xf900, 0xb8dd, 0xe6df, 0x1ef0, 0x0, 0x1);
        gbc.writeMem(0x1ef0, { 0x4c });
        gbc.writeMem(0xd95a, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xd4ff);
        EXPECT(gbc.pc(), 0xd95b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd95a), 0x46);
        // 46 0177
        gbc.setState(0x7370, 0x2021, 0x7e0, 0xcec1, 0x9a17, 0x8a00, 0x1, 0x1);
        gbc.writeMem(0x7370, { 0x46 });
        gbc.writeMem(0x8a00, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x2021);
        EXPECT(gbc.pc(), 0x7371);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a00), 0x9f);
        // 46 0178
        gbc.setState(0x8925, 0xa489, 0x9710, 0x5640, 0x6fa0, 0xaa78, 0x0, 0x1);
        gbc.writeMem(0x8925, { 0x46 });
        gbc.writeMem(0xaa78, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xa489);
        EXPECT(gbc.pc(), 0x8926);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8925), 0x46);
        EXPECT(gbc.readMem(0xaa78), 0xa7);
        // 46 0179
        gbc.setState(0x8872, 0xc192, 0x52a0, 0xacc6, 0xbd82, 0x71ef, 0x1, 0x0);
        gbc.writeMem(0x71ef, { 0x37 });
        gbc.writeMem(0x8872, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xc192);
        EXPECT(gbc.pc(), 0x8873);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8872), 0x46);
        // 46 017A
        gbc.setState(0x805e, 0xb9e9, 0x2630, 0xbfc5, 0x73fb, 0xf5d7, 0x0, 0x0);
        gbc.writeMem(0x805e, { 0x46 });
        gbc.writeMem(0xf5d7, { 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xb9e9);
        EXPECT(gbc.pc(), 0x805f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x805e), 0x46);
        EXPECT(gbc.readMem(0xf5d7), 0x6d);
        // 46 017B
        gbc.setState(0x854c, 0x5cb8, 0x58e0, 0x698c, 0xb9c7, 0x58e7, 0x0, 0x1);
        gbc.writeMem(0x58e7, { 0x8 });
        gbc.writeMem(0x854c, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x5cb8);
        EXPECT(gbc.pc(), 0x854d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x854c), 0x46);
        // 46 017C
        gbc.setState(0x9e2e, 0x5689, 0x91f0, 0xaaaf, 0xfce1, 0x61d9, 0x0, 0x0);
        gbc.writeMem(0x61d9, { 0x18 });
        gbc.writeMem(0x9e2e, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x5689);
        EXPECT(gbc.pc(), 0x9e2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e2e), 0x46);
        // 46 017D
        gbc.setState(0x85a3, 0x7385, 0xcfd0, 0x54e7, 0x8bb3, 0xbb79, 0x1, 0x0);
        gbc.writeMem(0x85a3, { 0x46 });
        gbc.writeMem(0xbb79, { 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x7385);
        EXPECT(gbc.pc(), 0x85a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85a3), 0x46);
        EXPECT(gbc.readMem(0xbb79), 0xde);
        // 46 017E
        gbc.setState(0xe5dc, 0x2d1d, 0xb6c0, 0x5f0d, 0x6f95, 0xcf00, 0x1, 0x1);
        gbc.writeMem(0xcf00, { 0xa3 });
        gbc.writeMem(0xe5dc, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x2d1d);
        EXPECT(gbc.pc(), 0xe5dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf00), 0xa3);
        EXPECT(gbc.readMem(0xe5dc), 0x46);
        // 46 017F
        gbc.setState(0xb5af, 0x5cf5, 0xa410, 0xed7, 0xc0b3, 0x7f81, 0x0, 0x0);
        gbc.writeMem(0x7f81, { 0xaf });
        gbc.writeMem(0xb5af, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x5cf5);
        EXPECT(gbc.pc(), 0xb5b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5af), 0x46);
        // 46 0180
        gbc.setState(0x6537, 0x356b, 0x2eb0, 0xdacf, 0xcb60, 0xedca, 0x1, 0x1);
        gbc.writeMem(0x6537, { 0x46 });
        gbc.writeMem(0xedca, { 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x356b);
        EXPECT(gbc.pc(), 0x6538);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedca), 0x58);
        // 46 0181
        gbc.setState(0x632c, 0xc415, 0xadf0, 0xcf1b, 0x27ce, 0x5ad0, 0x0, 0x0);
        gbc.writeMem(0x5ad0, { 0x59 });
        gbc.writeMem(0x632c, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xc415);
        EXPECT(gbc.pc(), 0x632d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 0182
        gbc.setState(0x5a20, 0x4aac, 0xf960, 0x67ab, 0x69c6, 0x7e9, 0x0, 0x0);
        gbc.writeMem(0x7e9, { 0xda });
        gbc.writeMem(0x5a20, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x4aac);
        EXPECT(gbc.pc(), 0x5a21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 0183
        gbc.setState(0x5f4, 0x1e42, 0x1110, 0xf526, 0xf799, 0xc742, 0x0, 0x0);
        gbc.writeMem(0x5f4, { 0x46 });
        gbc.writeMem(0xc742, { 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x1e42);
        EXPECT(gbc.pc(), 0x5f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc742), 0x9e);
        // 46 0184
        gbc.setState(0x48ca, 0x5919, 0x9b00, 0xf625, 0xe65e, 0xc3da, 0x1, 0x0);
        gbc.writeMem(0x48ca, { 0x46 });
        gbc.writeMem(0xc3da, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x5919);
        EXPECT(gbc.pc(), 0x48cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3da), 0xd);
        // 46 0185
        gbc.setState(0x12eb, 0x17ba, 0x82d0, 0xfe27, 0xfb37, 0xcb3f, 0x0, 0x0);
        gbc.writeMem(0x12eb, { 0x46 });
        gbc.writeMem(0xcb3f, { 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x17ba);
        EXPECT(gbc.pc(), 0x12ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb3f), 0x55);
        // 46 0187
        gbc.setState(0x9e62, 0x8f91, 0x3610, 0x56e5, 0xde65, 0xb8f2, 0x1, 0x1);
        gbc.writeMem(0x9e62, { 0x46 });
        gbc.writeMem(0xb8f2, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x8f91);
        EXPECT(gbc.pc(), 0x9e63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e62), 0x46);
        EXPECT(gbc.readMem(0xb8f2), 0x4d);
        // 46 0188
        gbc.setState(0xe770, 0x275d, 0x8220, 0xbf25, 0x98af, 0xa7a7, 0x1, 0x0);
        gbc.writeMem(0xa7a7, { 0x4c });
        gbc.writeMem(0xe770, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x275d);
        EXPECT(gbc.pc(), 0xe771);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7a7), 0x4c);
        EXPECT(gbc.readMem(0xe770), 0x46);
        // 46 0189
        gbc.setState(0xafcb, 0xf55a, 0xe080, 0xa01, 0xbc22, 0x6523, 0x0, 0x0);
        gbc.writeMem(0x6523, { 0xc0 });
        gbc.writeMem(0xafcb, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xf55a);
        EXPECT(gbc.pc(), 0xafcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafcb), 0x46);
        // 46 018A
        gbc.setState(0x6486, 0xdbf1, 0x4330, 0xad2a, 0x8934, 0x993f, 0x1, 0x1);
        gbc.writeMem(0x6486, { 0x46 });
        gbc.writeMem(0x993f, { 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xdbf1);
        EXPECT(gbc.pc(), 0x6487);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x993f), 0xba);
        // 46 018B
        gbc.setState(0x733f, 0x562f, 0x5d70, 0x5512, 0xad86, 0x678e, 0x0, 0x0);
        gbc.writeMem(0x678e, { 0x91 });
        gbc.writeMem(0x733f, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x562f);
        EXPECT(gbc.pc(), 0x7340);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 018C
        gbc.setState(0x186, 0xabc4, 0xfdf0, 0xb2ab, 0xce0c, 0x7981, 0x1, 0x1);
        gbc.writeMem(0x186, { 0x46 });
        gbc.writeMem(0x7981, { 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xabc4);
        EXPECT(gbc.pc(), 0x187);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 018D
        gbc.setState(0x6b75, 0x8d18, 0x1ce0, 0x4681, 0x4f1e, 0x3a8, 0x0, 0x0);
        gbc.writeMem(0x3a8, { 0xda });
        gbc.writeMem(0x6b75, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x8d18);
        EXPECT(gbc.pc(), 0x6b76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 018E
        gbc.setState(0xdc5c, 0xbbc1, 0x3a20, 0x5bdd, 0xf73a, 0x619a, 0x1, 0x1);
        gbc.writeMem(0x619a, { 0x98 });
        gbc.writeMem(0xdc5c, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xbbc1);
        EXPECT(gbc.pc(), 0xdc5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc5c), 0x46);
        // 46 018F
        gbc.setState(0xbea1, 0x146a, 0xca80, 0x8c12, 0xb20b, 0xa9bd, 0x1, 0x1);
        gbc.writeMem(0xa9bd, { 0x42 });
        gbc.writeMem(0xbea1, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x146a);
        EXPECT(gbc.pc(), 0xbea2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9bd), 0x42);
        EXPECT(gbc.readMem(0xbea1), 0x46);
        // 46 0190
        gbc.setState(0x4fc6, 0x274, 0xf450, 0xb518, 0x7404, 0x2f07, 0x1, 0x1);
        gbc.writeMem(0x2f07, { 0x8b });
        gbc.writeMem(0x4fc6, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x274);
        EXPECT(gbc.pc(), 0x4fc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 0191
        gbc.setState(0x14a1, 0x9e4d, 0xd3e0, 0xf560, 0x21d1, 0x7333, 0x1, 0x0);
        gbc.writeMem(0x14a1, { 0x46 });
        gbc.writeMem(0x7333, { 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x9e4d);
        EXPECT(gbc.pc(), 0x14a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 0192
        gbc.setState(0xa6a5, 0x1077, 0xf910, 0x78d, 0xa216, 0x3488, 0x1, 0x0);
        gbc.writeMem(0x3488, { 0xf8 });
        gbc.writeMem(0xa6a5, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x1077);
        EXPECT(gbc.pc(), 0xa6a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6a5), 0x46);
        // 46 0193
        gbc.setState(0x8598, 0xbf3, 0x9bd0, 0x4b7f, 0x7543, 0xc405, 0x1, 0x0);
        gbc.writeMem(0x8598, { 0x46 });
        gbc.writeMem(0xc405, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xbf3);
        EXPECT(gbc.pc(), 0x8599);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8598), 0x46);
        EXPECT(gbc.readMem(0xc405), 0x59);
        // 46 0194
        gbc.setState(0x1a35, 0x33fc, 0x11a0, 0xe60c, 0xb331, 0x3c83, 0x0, 0x0);
        gbc.writeMem(0x1a35, { 0x46 });
        gbc.writeMem(0x3c83, { 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x33fc);
        EXPECT(gbc.pc(), 0x1a36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 0195
        gbc.setState(0xe35a, 0xed28, 0x2ac0, 0x4d1c, 0x4b6e, 0x2595, 0x1, 0x0);
        gbc.writeMem(0x2595, { 0x4a });
        gbc.writeMem(0xe35a, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xed28);
        EXPECT(gbc.pc(), 0xe35b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe35a), 0x46);
        // 46 0196
        gbc.setState(0xea9f, 0x905, 0x4ea0, 0x9ffd, 0xbcd4, 0xcafd, 0x1, 0x0);
        gbc.writeMem(0xcafd, { 0x5a });
        gbc.writeMem(0xea9f, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x905);
        EXPECT(gbc.pc(), 0xeaa0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcafd), 0x5a);
        EXPECT(gbc.readMem(0xea9f), 0x46);
        // 46 0197
        gbc.setState(0x6897, 0xbf13, 0xc690, 0x1d5, 0xf274, 0x4c9d, 0x1, 0x1);
        gbc.writeMem(0x4c9d, { 0xcb });
        gbc.writeMem(0x6897, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xbf13);
        EXPECT(gbc.pc(), 0x6898);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 0198
        gbc.setState(0xc38b, 0xd40f, 0x5ca0, 0xea0, 0x5e18, 0xa85d, 0x0, 0x1);
        gbc.writeMem(0xa85d, { 0xe3 });
        gbc.writeMem(0xc38b, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xd40f);
        EXPECT(gbc.pc(), 0xc38c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa85d), 0xe3);
        EXPECT(gbc.readMem(0xc38b), 0x46);
        // 46 0199
        gbc.setState(0x22e9, 0xcab9, 0x7ed0, 0x8fed, 0xcc23, 0x23f4, 0x0, 0x1);
        gbc.writeMem(0x22e9, { 0x46 });
        gbc.writeMem(0x23f4, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xcab9);
        EXPECT(gbc.pc(), 0x22ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 019A
        gbc.setState(0xa388, 0x1154, 0x20c0, 0x344, 0xf71a, 0xa3f9, 0x0, 0x0);
        gbc.writeMem(0xa388, { 0x46 });
        gbc.writeMem(0xa3f9, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x1154);
        EXPECT(gbc.pc(), 0xa389);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa388), 0x46);
        EXPECT(gbc.readMem(0xa3f9), 0xbb);
        // 46 019B
        gbc.setState(0x22c3, 0x94f5, 0xab10, 0xa4bd, 0xbee2, 0x11f6, 0x0, 0x1);
        gbc.writeMem(0x11f6, { 0x8e });
        gbc.writeMem(0x22c3, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x94f5);
        EXPECT(gbc.pc(), 0x22c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 019C
        gbc.setState(0x5212, 0x4cf9, 0xc790, 0x41b8, 0x78cc, 0xd308, 0x0, 0x1);
        gbc.writeMem(0x5212, { 0x46 });
        gbc.writeMem(0xd308, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x4cf9);
        EXPECT(gbc.pc(), 0x5213);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd308), 0xb4);
        // 46 019D
        gbc.setState(0x5a8b, 0xe0b6, 0x7c70, 0xc265, 0xc707, 0xba6a, 0x0, 0x1);
        gbc.writeMem(0x5a8b, { 0x46 });
        gbc.writeMem(0xba6a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xe0b6);
        EXPECT(gbc.pc(), 0x5a8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba6a), 0x8b);
        // 46 019E
        gbc.setState(0x4ee4, 0xa935, 0x9e20, 0x17db, 0x9298, 0xcccf, 0x0, 0x0);
        gbc.writeMem(0x4ee4, { 0x46 });
        gbc.writeMem(0xcccf, { 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xa935);
        EXPECT(gbc.pc(), 0x4ee5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcccf), 0x4e);
        // 46 019F
        gbc.setState(0x83dd, 0x8c7f, 0x75e0, 0x84b8, 0xea8f, 0xb53d, 0x1, 0x1);
        gbc.writeMem(0x83dd, { 0x46 });
        gbc.writeMem(0xb53d, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x8c7f);
        EXPECT(gbc.pc(), 0x83de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83dd), 0x46);
        EXPECT(gbc.readMem(0xb53d), 0x37);
        // 46 01A0
        gbc.setState(0xc760, 0xd595, 0xd8a0, 0x605e, 0xdcde, 0xde75, 0x0, 0x1);
        gbc.writeMem(0xc760, { 0x46 });
        gbc.writeMem(0xde75, { 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xd595);
        EXPECT(gbc.pc(), 0xc761);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc760), 0x46);
        EXPECT(gbc.readMem(0xde75), 0x42);
        // 46 01A1
        gbc.setState(0x99d7, 0x86ab, 0x2620, 0xad72, 0x6b1a, 0x3104, 0x0, 0x1);
        gbc.writeMem(0x3104, { 0x65 });
        gbc.writeMem(0x99d7, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x86ab);
        EXPECT(gbc.pc(), 0x99d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99d7), 0x46);
        // 46 01A2
        gbc.setState(0xdb3, 0x2d4, 0x5310, 0xe3f2, 0x1d8, 0x695a, 0x0, 0x0);
        gbc.writeMem(0xdb3, { 0x46 });
        gbc.writeMem(0x695a, { 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x2d4);
        EXPECT(gbc.pc(), 0xdb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 01A3
        gbc.setState(0x8214, 0x4a2b, 0xdc10, 0x5ab7, 0x52a1, 0x920b, 0x0, 0x1);
        gbc.writeMem(0x8214, { 0x46 });
        gbc.writeMem(0x920b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x4a2b);
        EXPECT(gbc.pc(), 0x8215);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8214), 0x46);
        EXPECT(gbc.readMem(0x920b), 0xb4);
        // 46 01A4
        gbc.setState(0x86c8, 0xca7f, 0x9ba0, 0x7b0a, 0x1110, 0xd6be, 0x0, 0x0);
        gbc.writeMem(0x86c8, { 0x46 });
        gbc.writeMem(0xd6be, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xca7f);
        EXPECT(gbc.pc(), 0x86c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86c8), 0x46);
        EXPECT(gbc.readMem(0xd6be), 0x40);
        // 46 01A5
        gbc.setState(0x9e55, 0x30fb, 0xb3e0, 0x66b5, 0xcdeb, 0x45ab, 0x0, 0x1);
        gbc.writeMem(0x45ab, { 0x1f });
        gbc.writeMem(0x9e55, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x30fb);
        EXPECT(gbc.pc(), 0x9e56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e55), 0x46);
        // 46 01A6
        gbc.setState(0xd508, 0xcfee, 0xb120, 0x53c, 0x850e, 0xc168, 0x0, 0x1);
        gbc.writeMem(0xc168, { 0x7c });
        gbc.writeMem(0xd508, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xcfee);
        EXPECT(gbc.pc(), 0xd509);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc168), 0x7c);
        EXPECT(gbc.readMem(0xd508), 0x46);
        // 46 01A7
        gbc.setState(0x9c9e, 0x69e5, 0x2040, 0x93b0, 0x8172, 0x948e, 0x1, 0x1);
        gbc.writeMem(0x948e, { 0x3b });
        gbc.writeMem(0x9c9e, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x69e5);
        EXPECT(gbc.pc(), 0x9c9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x948e), 0x3b);
        EXPECT(gbc.readMem(0x9c9e), 0x46);
        // 46 01A8
        gbc.setState(0xb7de, 0x52f, 0x1370, 0x8a34, 0xbbf6, 0x2d28, 0x1, 0x0);
        gbc.writeMem(0x2d28, { 0x91 });
        gbc.writeMem(0xb7de, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x52f);
        EXPECT(gbc.pc(), 0xb7df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7de), 0x46);
        // 46 01A9
        gbc.setState(0x34c8, 0x2fea, 0x5090, 0x9e28, 0x3ae3, 0xe975, 0x0, 0x1);
        gbc.writeMem(0x34c8, { 0x46 });
        gbc.writeMem(0xe975, { 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x2fea);
        EXPECT(gbc.pc(), 0x34c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe975), 0xac);
        // 46 01AA
        gbc.setState(0xe629, 0xd157, 0x1c10, 0xf87c, 0xd5ef, 0x8c14, 0x1, 0x1);
        gbc.writeMem(0x8c14, { 0x3a });
        gbc.writeMem(0xe629, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xd157);
        EXPECT(gbc.pc(), 0xe62a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c14), 0x3a);
        EXPECT(gbc.readMem(0xe629), 0x46);
        // 46 01AB
        gbc.setState(0x3c6b, 0xe1b6, 0xa5c0, 0x755b, 0x2b7b, 0x1fe4, 0x1, 0x1);
        gbc.writeMem(0x1fe4, { 0x98 });
        gbc.writeMem(0x3c6b, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xe1b6);
        EXPECT(gbc.pc(), 0x3c6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 01AC
        gbc.setState(0x8a9b, 0x4f43, 0x7d40, 0x3b8d, 0xbfdc, 0xd7f3, 0x1, 0x0);
        gbc.writeMem(0x8a9b, { 0x46 });
        gbc.writeMem(0xd7f3, { 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x4f43);
        EXPECT(gbc.pc(), 0x8a9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a9b), 0x46);
        EXPECT(gbc.readMem(0xd7f3), 0x26);
        // 46 01AD
        gbc.setState(0x61a7, 0x7c1b, 0x50d0, 0x1e6b, 0x8334, 0xcb08, 0x1, 0x0);
        gbc.writeMem(0x61a7, { 0x46 });
        gbc.writeMem(0xcb08, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x7c1b);
        EXPECT(gbc.pc(), 0x61a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb08), 0xe7);
        // 46 01AE
        gbc.setState(0x7bb0, 0x8779, 0x4b30, 0x930a, 0x5d9c, 0x9e73, 0x1, 0x1);
        gbc.writeMem(0x7bb0, { 0x46 });
        gbc.writeMem(0x9e73, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x8779);
        EXPECT(gbc.pc(), 0x7bb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e73), 0xc0);
        // 46 01AF
        gbc.setState(0x7d13, 0x52b8, 0x4d70, 0x59f1, 0x5607, 0x26f9, 0x0, 0x0);
        gbc.writeMem(0x26f9, { 0xd5 });
        gbc.writeMem(0x7d13, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x52b8);
        EXPECT(gbc.pc(), 0x7d14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 01B0
        gbc.setState(0x8700, 0x8eb4, 0xd640, 0x1c67, 0x7751, 0xf259, 0x1, 0x1);
        gbc.writeMem(0x8700, { 0x46 });
        gbc.writeMem(0xf259, { 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x8eb4);
        EXPECT(gbc.pc(), 0x8701);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8700), 0x46);
        EXPECT(gbc.readMem(0xf259), 0xa0);
        // 46 01B1
        gbc.setState(0x27dc, 0x5a6e, 0xe750, 0x21f7, 0x448c, 0x3008, 0x1, 0x0);
        gbc.writeMem(0x27dc, { 0x46 });
        gbc.writeMem(0x3008, { 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x5a6e);
        EXPECT(gbc.pc(), 0x27dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 01B2
        gbc.setState(0x9a9d, 0xff0e, 0xa300, 0xb680, 0xeb2c, 0xa60a, 0x1, 0x1);
        gbc.writeMem(0x9a9d, { 0x46 });
        gbc.writeMem(0xa60a, { 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xff0e);
        EXPECT(gbc.pc(), 0x9a9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a9d), 0x46);
        EXPECT(gbc.readMem(0xa60a), 0xc2);
        // 46 01B3
        gbc.setState(0x4691, 0x2608, 0x1310, 0xa7de, 0x606a, 0x19b7, 0x0, 0x0);
        gbc.writeMem(0x19b7, { 0x86 });
        gbc.writeMem(0x4691, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x2608);
        EXPECT(gbc.pc(), 0x4692);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 01B5
        gbc.setState(0xc469, 0xda52, 0x3830, 0x14da, 0xdb0d, 0x85cd, 0x0, 0x1);
        gbc.writeMem(0x85cd, { 0x1 });
        gbc.writeMem(0xc469, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xda52);
        EXPECT(gbc.pc(), 0xc46a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85cd), 0x1);
        EXPECT(gbc.readMem(0xc469), 0x46);
        // 46 01B6
        gbc.setState(0xe9f3, 0x51c5, 0x5ce0, 0x317, 0xddf9, 0x5d92, 0x0, 0x0);
        gbc.writeMem(0x5d92, { 0x5c });
        gbc.writeMem(0xe9f3, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x51c5);
        EXPECT(gbc.pc(), 0xe9f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9f3), 0x46);
        // 46 01B7
        gbc.setState(0x4d04, 0xf61, 0xb7f0, 0xa7e5, 0x386, 0xf5f5, 0x1, 0x1);
        gbc.writeMem(0x4d04, { 0x46 });
        gbc.writeMem(0xf5f5, { 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xf61);
        EXPECT(gbc.pc(), 0x4d05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf5f5), 0xac);
        // 46 01B8
        gbc.setState(0x5967, 0x1749, 0xb460, 0xd695, 0xee64, 0x53b4, 0x0, 0x1);
        gbc.writeMem(0x53b4, { 0x93 });
        gbc.writeMem(0x5967, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x1749);
        EXPECT(gbc.pc(), 0x5968);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 01B9
        gbc.setState(0xe8b8, 0xcb10, 0x3450, 0xc2d8, 0x3aab, 0x390a, 0x0, 0x0);
        gbc.writeMem(0x390a, { 0xfd });
        gbc.writeMem(0xe8b8, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xcb10);
        EXPECT(gbc.pc(), 0xe8b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8b8), 0x46);
        // 46 01BA
        gbc.setState(0x2713, 0x2620, 0xb80, 0xa217, 0x2388, 0xe5e8, 0x0, 0x1);
        gbc.writeMem(0x2713, { 0x46 });
        gbc.writeMem(0xe5e8, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x2620);
        EXPECT(gbc.pc(), 0x2714);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5e8), 0x63);
        // 46 01BB
        gbc.setState(0x248f, 0x155b, 0xc3d0, 0x2e6e, 0x18dc, 0x4b2f, 0x0, 0x0);
        gbc.writeMem(0x248f, { 0x46 });
        gbc.writeMem(0x4b2f, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x155b);
        EXPECT(gbc.pc(), 0x2490);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 01BC
        gbc.setState(0xaf37, 0x866c, 0xbee0, 0x354a, 0xcd84, 0x87c1, 0x0, 0x1);
        gbc.writeMem(0x87c1, { 0xb5 });
        gbc.writeMem(0xaf37, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x866c);
        EXPECT(gbc.pc(), 0xaf38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87c1), 0xb5);
        EXPECT(gbc.readMem(0xaf37), 0x46);
        // 46 01BD
        gbc.setState(0x93ab, 0xb6b2, 0xa230, 0x3597, 0x35c9, 0xa0ce, 0x0, 0x1);
        gbc.writeMem(0x93ab, { 0x46 });
        gbc.writeMem(0xa0ce, { 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xb6b2);
        EXPECT(gbc.pc(), 0x93ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93ab), 0x46);
        EXPECT(gbc.readMem(0xa0ce), 0xfe);
        // 46 01BE
        gbc.setState(0x6934, 0x792, 0xda20, 0xeba0, 0x66bf, 0xe52f, 0x1, 0x1);
        gbc.writeMem(0x6934, { 0x46 });
        gbc.writeMem(0xe52f, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x792);
        EXPECT(gbc.pc(), 0x6935);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe52f), 0x22);
        // 46 01BF
        gbc.setState(0xa92c, 0x5a22, 0xc1d0, 0x4f0, 0x1871, 0x5fae, 0x0, 0x1);
        gbc.writeMem(0x5fae, { 0xd });
        gbc.writeMem(0xa92c, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x5a22);
        EXPECT(gbc.pc(), 0xa92d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa92c), 0x46);
        // 46 01C0
        gbc.setState(0xc151, 0xe052, 0x70f0, 0xb9d2, 0xf8d7, 0x572a, 0x0, 0x0);
        gbc.writeMem(0x572a, { 0xb4 });
        gbc.writeMem(0xc151, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xe052);
        EXPECT(gbc.pc(), 0xc152);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc151), 0x46);
        // 46 01C1
        gbc.setState(0x6fa0, 0x1a53, 0x3ed0, 0x32a4, 0x1caa, 0xf14f, 0x1, 0x0);
        gbc.writeMem(0x6fa0, { 0x46 });
        gbc.writeMem(0xf14f, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x1a53);
        EXPECT(gbc.pc(), 0x6fa1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf14f), 0xd5);
        // 46 01C2
        gbc.setState(0x91c8, 0xa880, 0xf9f0, 0x10f1, 0xb304, 0x2feb, 0x0, 0x0);
        gbc.writeMem(0x2feb, { 0x3f });
        gbc.writeMem(0x91c8, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xa880);
        EXPECT(gbc.pc(), 0x91c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91c8), 0x46);
        // 46 01C3
        gbc.setState(0x3bfa, 0xa8f3, 0x15a0, 0x2104, 0xffbd, 0xdd8c, 0x1, 0x0);
        gbc.writeMem(0x3bfa, { 0x46 });
        gbc.writeMem(0xdd8c, { 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xa8f3);
        EXPECT(gbc.pc(), 0x3bfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd8c), 0x27);
        // 46 01C5
        gbc.setState(0x3606, 0xaf0c, 0xb2e0, 0xefa9, 0x6011, 0x531c, 0x0, 0x0);
        gbc.writeMem(0x3606, { 0x46 });
        gbc.writeMem(0x531c, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xaf0c);
        EXPECT(gbc.pc(), 0x3607);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 01C6
        gbc.setState(0x5337, 0xc49, 0x9840, 0x7f67, 0x56e7, 0xb342, 0x0, 0x1);
        gbc.writeMem(0x5337, { 0x46 });
        gbc.writeMem(0xb342, { 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xc49);
        EXPECT(gbc.pc(), 0x5338);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb342), 0xdc);
        // 46 01C7
        gbc.setState(0x8962, 0xdcfb, 0xa630, 0xcb6d, 0x5fd4, 0x62fc, 0x0, 0x0);
        gbc.writeMem(0x62fc, { 0x73 });
        gbc.writeMem(0x8962, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xdcfb);
        EXPECT(gbc.pc(), 0x8963);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8962), 0x46);
        // 46 01C8
        gbc.setState(0x701, 0x7704, 0xa580, 0x3f07, 0x8c8e, 0xf862, 0x0, 0x0);
        gbc.writeMem(0x701, { 0x46 });
        gbc.writeMem(0xf862, { 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x7704);
        EXPECT(gbc.pc(), 0x702);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf862), 0x17);
        // 46 01CA
        gbc.setState(0xee15, 0xf942, 0x1f80, 0xd1d8, 0x1775, 0xdec3, 0x1, 0x1);
        gbc.writeMem(0xdec3, { 0xd7 });
        gbc.writeMem(0xee15, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xf942);
        EXPECT(gbc.pc(), 0xee16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdec3), 0xd7);
        EXPECT(gbc.readMem(0xee15), 0x46);
        // 46 01CB
        gbc.setState(0x7dd6, 0xc5c2, 0x2400, 0x77b0, 0x1e9e, 0x8398, 0x1, 0x1);
        gbc.writeMem(0x7dd6, { 0x46 });
        gbc.writeMem(0x8398, { 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xc5c2);
        EXPECT(gbc.pc(), 0x7dd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8398), 0x1a);
        // 46 01CC
        gbc.setState(0x4b1f, 0x34c7, 0xa7b0, 0xf55f, 0x70b2, 0xd1b1, 0x1, 0x0);
        gbc.writeMem(0x4b1f, { 0x46 });
        gbc.writeMem(0xd1b1, { 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x34c7);
        EXPECT(gbc.pc(), 0x4b20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1b1), 0x7a);
        // 46 01CD
        gbc.setState(0x8ff, 0x9441, 0x13c0, 0x776, 0x80ab, 0x8adc, 0x1, 0x1);
        gbc.writeMem(0x8ff, { 0x46 });
        gbc.writeMem(0x8adc, { 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x9441);
        EXPECT(gbc.pc(), 0x900);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8adc), 0xd3);
        // 46 01CE
        gbc.setState(0x5f77, 0xf3bf, 0xdf10, 0xe4e1, 0xc794, 0x6047, 0x1, 0x0);
        gbc.writeMem(0x5f77, { 0x46 });
        gbc.writeMem(0x6047, { 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xf3bf);
        EXPECT(gbc.pc(), 0x5f78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 01CF
        gbc.setState(0x5c5d, 0x57b2, 0x7d30, 0x9367, 0xa619, 0x439f, 0x0, 0x0);
        gbc.writeMem(0x439f, { 0x5e });
        gbc.writeMem(0x5c5d, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x57b2);
        EXPECT(gbc.pc(), 0x5c5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 01D0
        gbc.setState(0xc437, 0x49f4, 0xb20, 0x275a, 0x6eca, 0x40e0, 0x0, 0x0);
        gbc.writeMem(0x40e0, { 0x70 });
        gbc.writeMem(0xc437, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x49f4);
        EXPECT(gbc.pc(), 0xc438);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc437), 0x46);
        // 46 01D1
        gbc.setState(0x3eea, 0xece6, 0xac40, 0xf2e7, 0x4025, 0xbc64, 0x1, 0x0);
        gbc.writeMem(0x3eea, { 0x46 });
        gbc.writeMem(0xbc64, { 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xece6);
        EXPECT(gbc.pc(), 0x3eeb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc64), 0x53);
        // 46 01D2
        gbc.setState(0xa890, 0x5e23, 0x47b0, 0xed88, 0x44a0, 0x747d, 0x1, 0x0);
        gbc.writeMem(0x747d, { 0x93 });
        gbc.writeMem(0xa890, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x5e23);
        EXPECT(gbc.pc(), 0xa891);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa890), 0x46);
        // 46 01D3
        gbc.setState(0x4488, 0x77b6, 0x5580, 0xcb8a, 0xf853, 0xa3ee, 0x1, 0x0);
        gbc.writeMem(0x4488, { 0x46 });
        gbc.writeMem(0xa3ee, { 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x77b6);
        EXPECT(gbc.pc(), 0x4489);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3ee), 0x5d);
        // 46 01D4
        gbc.setState(0x84bc, 0xca55, 0xee30, 0xce02, 0x21b2, 0xd05b, 0x1, 0x0);
        gbc.writeMem(0x84bc, { 0x46 });
        gbc.writeMem(0xd05b, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xca55);
        EXPECT(gbc.pc(), 0x84bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84bc), 0x46);
        EXPECT(gbc.readMem(0xd05b), 0x30);
        // 46 01D5
        gbc.setState(0xd38, 0x5fb7, 0xbc10, 0x8e2d, 0xdc7, 0x81c7, 0x0, 0x1);
        gbc.writeMem(0xd38, { 0x46 });
        gbc.writeMem(0x81c7, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x5fb7);
        EXPECT(gbc.pc(), 0xd39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81c7), 0xf3);
        // 46 01D6
        gbc.setState(0x1c43, 0x434b, 0x1990, 0x731b, 0x83d8, 0x20bd, 0x1, 0x0);
        gbc.writeMem(0x1c43, { 0x46 });
        gbc.writeMem(0x20bd, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x434b);
        EXPECT(gbc.pc(), 0x1c44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 01D8
        gbc.setState(0x3599, 0x465, 0xcb40, 0x1d95, 0xe0e6, 0x801b, 0x0, 0x1);
        gbc.writeMem(0x3599, { 0x46 });
        gbc.writeMem(0x801b, { 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x465);
        EXPECT(gbc.pc(), 0x359a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x801b), 0x5d);
        // 46 01D9
        gbc.setState(0xc269, 0xc224, 0x50, 0xef17, 0xafb2, 0x33ed, 0x1, 0x1);
        gbc.writeMem(0x33ed, { 0x4a });
        gbc.writeMem(0xc269, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xc224);
        EXPECT(gbc.pc(), 0xc26a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc269), 0x46);
        // 46 01DA
        gbc.setState(0xbf23, 0x1a2e, 0x3df0, 0x1417, 0x1de, 0xff26, 0x0, 0x0);
        gbc.writeMem(0xbf23, { 0x46 });
        gbc.writeMem(0xff26, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x1a2e);
        EXPECT(gbc.pc(), 0xbf24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf23), 0x46);
        EXPECT(gbc.readMem(0xff26), 0x57);
        // 46 01DB
        gbc.setState(0x8e30, 0xc98a, 0xfcc0, 0x4eaf, 0x4336, 0x7896, 0x0, 0x1);
        gbc.writeMem(0x7896, { 0x4f });
        gbc.writeMem(0x8e30, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xc98a);
        EXPECT(gbc.pc(), 0x8e31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e30), 0x46);
        // 46 01DC
        gbc.setState(0xe73b, 0x38a9, 0xd390, 0xbe01, 0x4560, 0x64f1, 0x0, 0x1);
        gbc.writeMem(0x64f1, { 0xa8 });
        gbc.writeMem(0xe73b, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x38a9);
        EXPECT(gbc.pc(), 0xe73c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe73b), 0x46);
        // 46 01DD
        gbc.setState(0x4a8b, 0x14d7, 0xc900, 0x169f, 0xb025, 0xdd3, 0x1, 0x1);
        gbc.writeMem(0xdd3, { 0xcd });
        gbc.writeMem(0x4a8b, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x14d7);
        EXPECT(gbc.pc(), 0x4a8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 01DE
        gbc.setState(0xe41b, 0x13d2, 0x7050, 0x57a9, 0xc4a0, 0x850, 0x1, 0x0);
        gbc.writeMem(0x850, { 0xc6 });
        gbc.writeMem(0xe41b, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x13d2);
        EXPECT(gbc.pc(), 0xe41c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe41b), 0x46);
        // 46 01DF
        gbc.setState(0x5acc, 0xe491, 0xf7c0, 0x6a26, 0x2f22, 0x76d3, 0x0, 0x1);
        gbc.writeMem(0x5acc, { 0x46 });
        gbc.writeMem(0x76d3, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xe491);
        EXPECT(gbc.pc(), 0x5acd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 01E0
        gbc.setState(0x69a4, 0x6252, 0x6ed0, 0x2013, 0xff60, 0x737d, 0x1, 0x0);
        gbc.writeMem(0x69a4, { 0x46 });
        gbc.writeMem(0x737d, { 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x6252);
        EXPECT(gbc.pc(), 0x69a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 01E1
        gbc.setState(0x3e4e, 0xd47b, 0xde60, 0xe1cb, 0x9c16, 0xc64b, 0x0, 0x0);
        gbc.writeMem(0x3e4e, { 0x46 });
        gbc.writeMem(0xc64b, { 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xd47b);
        EXPECT(gbc.pc(), 0x3e4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc64b), 0xd4);
        // 46 01E2
        gbc.setState(0xd1c4, 0x4779, 0x790, 0x735e, 0xb68c, 0xe30c, 0x0, 0x0);
        gbc.writeMem(0xd1c4, { 0x46 });
        gbc.writeMem(0xe30c, { 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x4779);
        EXPECT(gbc.pc(), 0xd1c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1c4), 0x46);
        EXPECT(gbc.readMem(0xe30c), 0xe6);
        // 46 01E3
        gbc.setState(0xd1e7, 0x4a6, 0xdd00, 0xc336, 0x50fc, 0x5711, 0x1, 0x1);
        gbc.writeMem(0x5711, { 0x87 });
        gbc.writeMem(0xd1e7, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x4a6);
        EXPECT(gbc.pc(), 0xd1e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1e7), 0x46);
        // 46 01E4
        gbc.setState(0xa51b, 0x2320, 0xb040, 0xd2de, 0xbfa1, 0x5842, 0x0, 0x1);
        gbc.writeMem(0x5842, { 0x6b });
        gbc.writeMem(0xa51b, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x2320);
        EXPECT(gbc.pc(), 0xa51c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa51b), 0x46);
        // 46 01E5
        gbc.setState(0xb7d, 0xd91b, 0x4b40, 0xe87a, 0xcf76, 0x27ab, 0x0, 0x1);
        gbc.writeMem(0xb7d, { 0x46 });
        gbc.writeMem(0x27ab, { 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xd91b);
        EXPECT(gbc.pc(), 0xb7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 01E6
        gbc.setState(0xede0, 0x2252, 0x3b30, 0x7253, 0xd33f, 0x1d03, 0x0, 0x0);
        gbc.writeMem(0x1d03, { 0xb });
        gbc.writeMem(0xede0, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x2252);
        EXPECT(gbc.pc(), 0xede1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xede0), 0x46);
        // 46 01E7
        gbc.setState(0x436c, 0x1485, 0x2de0, 0xcbc1, 0xcef0, 0x1363, 0x0, 0x0);
        gbc.writeMem(0x1363, { 0x88 });
        gbc.writeMem(0x436c, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x1485);
        EXPECT(gbc.pc(), 0x436d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 01E8
        gbc.setState(0x7733, 0x1423, 0x4080, 0xfe41, 0xfb3a, 0x9b14, 0x1, 0x0);
        gbc.writeMem(0x7733, { 0x46 });
        gbc.writeMem(0x9b14, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x1423);
        EXPECT(gbc.pc(), 0x7734);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b14), 0xbb);
        // 46 01E9
        gbc.setState(0xa7c, 0xa114, 0xaec0, 0x9970, 0x2d41, 0x4981, 0x1, 0x0);
        gbc.writeMem(0xa7c, { 0x46 });
        gbc.writeMem(0x4981, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xa114);
        EXPECT(gbc.pc(), 0xa7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 01EA
        gbc.setState(0xe66, 0x178, 0x12e0, 0xea98, 0x8172, 0xc4ae, 0x0, 0x1);
        gbc.writeMem(0xe66, { 0x46 });
        gbc.writeMem(0xc4ae, { 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x178);
        EXPECT(gbc.pc(), 0xe67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4ae), 0xc2);
        // 46 01EB
        gbc.setState(0xc7f5, 0x6375, 0x7040, 0x8174, 0x33f2, 0x9df5, 0x0, 0x1);
        gbc.writeMem(0x9df5, { 0x25 });
        gbc.writeMem(0xc7f5, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x6375);
        EXPECT(gbc.pc(), 0xc7f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9df5), 0x25);
        EXPECT(gbc.readMem(0xc7f5), 0x46);
        // 46 01EC
        gbc.setState(0x6357, 0xecc1, 0xaf50, 0x4fe4, 0xfae7, 0x3039, 0x1, 0x0);
        gbc.writeMem(0x3039, { 0x5b });
        gbc.writeMem(0x6357, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xecc1);
        EXPECT(gbc.pc(), 0x6358);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 01ED
        gbc.setState(0xb2af, 0x5bb9, 0x5e10, 0x4b2e, 0x3f96, 0x58cd, 0x1, 0x0);
        gbc.writeMem(0x58cd, { 0x86 });
        gbc.writeMem(0xb2af, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x5bb9);
        EXPECT(gbc.pc(), 0xb2b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2af), 0x46);
        // 46 01EE
        gbc.setState(0xbd36, 0x9c3b, 0x47f0, 0xaf56, 0x61c4, 0xa43f, 0x1, 0x1);
        gbc.writeMem(0xa43f, { 0xa9 });
        gbc.writeMem(0xbd36, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x9c3b);
        EXPECT(gbc.pc(), 0xbd37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa43f), 0xa9);
        EXPECT(gbc.readMem(0xbd36), 0x46);
        // 46 01EF
        gbc.setState(0x2be0, 0xb5cb, 0x2750, 0xb93c, 0x7028, 0x70b3, 0x0, 0x0);
        gbc.writeMem(0x2be0, { 0x46 });
        gbc.writeMem(0x70b3, { 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xb5cb);
        EXPECT(gbc.pc(), 0x2be1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 01F0
        gbc.setState(0xabf1, 0x8be5, 0x64a0, 0xfc0b, 0x52b5, 0x1b00, 0x0, 0x0);
        gbc.writeMem(0x1b00, { 0x4c });
        gbc.writeMem(0xabf1, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x8be5);
        EXPECT(gbc.pc(), 0xabf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabf1), 0x46);
        // 46 01F1
        gbc.setState(0xd7d3, 0xd7b5, 0xf270, 0xfaca, 0x6181, 0x1f6d, 0x1, 0x1);
        gbc.writeMem(0x1f6d, { 0x39 });
        gbc.writeMem(0xd7d3, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xd7b5);
        EXPECT(gbc.pc(), 0xd7d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7d3), 0x46);
        // 46 01F2
        gbc.setState(0x3501, 0x5b93, 0xae60, 0xad79, 0x9b49, 0x3052, 0x0, 0x0);
        gbc.writeMem(0x3052, { 0xef });
        gbc.writeMem(0x3501, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x5b93);
        EXPECT(gbc.pc(), 0x3502);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 01F3
        gbc.setState(0x102b, 0x6548, 0xbd90, 0x9e98, 0x56e7, 0x5c9f, 0x1, 0x1);
        gbc.writeMem(0x102b, { 0x46 });
        gbc.writeMem(0x5c9f, { 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x6548);
        EXPECT(gbc.pc(), 0x102c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 01F4
        gbc.setState(0x1353, 0x3a9a, 0x6b0, 0xa413, 0x18a6, 0xf6de, 0x0, 0x0);
        gbc.writeMem(0x1353, { 0x46 });
        gbc.writeMem(0xf6de, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x3a9a);
        EXPECT(gbc.pc(), 0x1354);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf6de), 0x4f);
        // 46 01F5
        gbc.setState(0x453f, 0xf544, 0x62e0, 0xf023, 0x1369, 0x84, 0x0, 0x0);
        gbc.writeMem(0x84, { 0x23 });
        gbc.writeMem(0x453f, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xf544);
        EXPECT(gbc.pc(), 0x4540);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 01F6
        gbc.setState(0xe522, 0xbd90, 0x8490, 0x313d, 0xef70, 0xd647, 0x1, 0x0);
        gbc.writeMem(0xd647, { 0xa1 });
        gbc.writeMem(0xe522, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xbd90);
        EXPECT(gbc.pc(), 0xe523);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd647), 0xa1);
        EXPECT(gbc.readMem(0xe522), 0x46);
        // 46 01F8
        gbc.setState(0xecd3, 0xa3b4, 0xb230, 0xcf5e, 0xa551, 0xce9d, 0x1, 0x0);
        gbc.writeMem(0xce9d, { 0xfd });
        gbc.writeMem(0xecd3, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xa3b4);
        EXPECT(gbc.pc(), 0xecd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce9d), 0xfd);
        EXPECT(gbc.readMem(0xecd3), 0x46);
        // 46 01F9
        gbc.setState(0x156d, 0xe33a, 0xf880, 0x1b7d, 0x83d5, 0xa66d, 0x1, 0x1);
        gbc.writeMem(0x156d, { 0x46 });
        gbc.writeMem(0xa66d, { 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xe33a);
        EXPECT(gbc.pc(), 0x156e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa66d), 0xfc);
        // 46 01FA
        gbc.setState(0x5714, 0x3ea5, 0xa330, 0x76f, 0x9230, 0xc19c, 0x1, 0x0);
        gbc.writeMem(0x5714, { 0x46 });
        gbc.writeMem(0xc19c, { 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x3ea5);
        EXPECT(gbc.pc(), 0x5715);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc19c), 0x6);
        // 46 01FB
        gbc.setState(0x1b3b, 0x8db0, 0x7710, 0xe626, 0x32b, 0xaa00, 0x0, 0x1);
        gbc.writeMem(0x1b3b, { 0x46 });
        gbc.writeMem(0xaa00, { 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x8db0);
        EXPECT(gbc.pc(), 0x1b3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa00), 0x50);
        // 46 01FC
        gbc.setState(0xe0e2, 0xaa, 0x25a0, 0x79ca, 0x4b93, 0xfab1, 0x1, 0x1);
        gbc.writeMem(0xe0e2, { 0x46 });
        gbc.writeMem(0xfab1, { 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xaa);
        EXPECT(gbc.pc(), 0xe0e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0e2), 0x46);
        EXPECT(gbc.readMem(0xfab1), 0xc5);
        // 46 01FD
        gbc.setState(0xa71d, 0x474c, 0x8500, 0xa40a, 0x6265, 0x9442, 0x0, 0x0);
        gbc.writeMem(0x9442, { 0xbc });
        gbc.writeMem(0xa71d, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x474c);
        EXPECT(gbc.pc(), 0xa71e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9442), 0xbc);
        EXPECT(gbc.readMem(0xa71d), 0x46);
        // 46 01FE
        gbc.setState(0x5fc8, 0xaac3, 0x9ce0, 0xb1ea, 0x9c4f, 0x70b2, 0x0, 0x1);
        gbc.writeMem(0x5fc8, { 0x46 });
        gbc.writeMem(0x70b2, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xaac3);
        EXPECT(gbc.pc(), 0x5fc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 01FF
        gbc.setState(0x2383, 0x1e4c, 0x2450, 0x309a, 0xf803, 0x4e7f, 0x1, 0x1);
        gbc.writeMem(0x2383, { 0x46 });
        gbc.writeMem(0x4e7f, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x1e4c);
        EXPECT(gbc.pc(), 0x2384);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 0200
        gbc.setState(0x20cf, 0x9ac0, 0x1ca0, 0xf9d3, 0xbd59, 0x736f, 0x0, 0x0);
        gbc.writeMem(0x20cf, { 0x46 });
        gbc.writeMem(0x736f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x9ac0);
        EXPECT(gbc.pc(), 0x20d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 0201
        gbc.setState(0x7a7e, 0x1472, 0x34f0, 0x3b53, 0x8ed0, 0x87bc, 0x1, 0x0);
        gbc.writeMem(0x7a7e, { 0x46 });
        gbc.writeMem(0x87bc, { 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x1472);
        EXPECT(gbc.pc(), 0x7a7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87bc), 0xc6);
        // 46 0202
        gbc.setState(0x1d4a, 0x4670, 0x6dd0, 0x4ed6, 0x4ac7, 0xe7c9, 0x0, 0x0);
        gbc.writeMem(0x1d4a, { 0x46 });
        gbc.writeMem(0xe7c9, { 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x4670);
        EXPECT(gbc.pc(), 0x1d4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7c9), 0x8e);
        // 46 0203
        gbc.setState(0xa0c4, 0xfd95, 0x2f30, 0x967d, 0xf10a, 0xa9c9, 0x1, 0x1);
        gbc.writeMem(0xa0c4, { 0x46 });
        gbc.writeMem(0xa9c9, { 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xfd95);
        EXPECT(gbc.pc(), 0xa0c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0c4), 0x46);
        EXPECT(gbc.readMem(0xa9c9), 0x9b);
        // 46 0204
        gbc.setState(0x8083, 0xa533, 0x1f60, 0x2dc8, 0x2ff, 0x8d43, 0x1, 0x1);
        gbc.writeMem(0x8083, { 0x46 });
        gbc.writeMem(0x8d43, { 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xa533);
        EXPECT(gbc.pc(), 0x8084);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8083), 0x46);
        EXPECT(gbc.readMem(0x8d43), 0xd8);
        // 46 0205
        gbc.setState(0x338e, 0xda9d, 0x9880, 0xcb8e, 0xd03c, 0x9d77, 0x0, 0x0);
        gbc.writeMem(0x338e, { 0x46 });
        gbc.writeMem(0x9d77, { 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xda9d);
        EXPECT(gbc.pc(), 0x338f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d77), 0xe);
        // 46 0206
        gbc.setState(0x2b91, 0xa55, 0x37c0, 0x747c, 0xc30d, 0x99c6, 0x0, 0x1);
        gbc.writeMem(0x2b91, { 0x46 });
        gbc.writeMem(0x99c6, { 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xa55);
        EXPECT(gbc.pc(), 0x2b92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99c6), 0x41);
        // 46 0207
        gbc.setState(0x1480, 0xca97, 0x6470, 0x507a, 0xac51, 0x1cf, 0x1, 0x1);
        gbc.writeMem(0x1cf, { 0x52 });
        gbc.writeMem(0x1480, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xca97);
        EXPECT(gbc.pc(), 0x1481);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 0208
        gbc.setState(0x4ac2, 0x24a9, 0x5cf0, 0x9d97, 0x4c56, 0x7520, 0x0, 0x0);
        gbc.writeMem(0x4ac2, { 0x46 });
        gbc.writeMem(0x7520, { 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x24a9);
        EXPECT(gbc.pc(), 0x4ac3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 020A
        gbc.setState(0xec41, 0x1c50, 0xa440, 0x52b1, 0xf109, 0x1f25, 0x1, 0x0);
        gbc.writeMem(0x1f25, { 0x92 });
        gbc.writeMem(0xec41, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x1c50);
        EXPECT(gbc.pc(), 0xec42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec41), 0x46);
        // 46 020B
        gbc.setState(0x93cd, 0xd30b, 0x8670, 0x8f56, 0x22d7, 0x2809, 0x0, 0x1);
        gbc.writeMem(0x2809, { 0xb });
        gbc.writeMem(0x93cd, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xd30b);
        EXPECT(gbc.pc(), 0x93ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93cd), 0x46);
        // 46 020C
        gbc.setState(0xc798, 0x2541, 0x3f50, 0xf379, 0x3df5, 0xbd2, 0x0, 0x0);
        gbc.writeMem(0xbd2, { 0x76 });
        gbc.writeMem(0xc798, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x2541);
        EXPECT(gbc.pc(), 0xc799);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc798), 0x46);
        // 46 020D
        gbc.setState(0x1286, 0xa359, 0xd910, 0x8971, 0xd9a9, 0xabcd, 0x0, 0x0);
        gbc.writeMem(0x1286, { 0x46 });
        gbc.writeMem(0xabcd, { 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xa359);
        EXPECT(gbc.pc(), 0x1287);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabcd), 0x70);
        // 46 020E
        gbc.setState(0xb6e1, 0xb6e1, 0x2090, 0x4040, 0xec19, 0xf8bb, 0x1, 0x1);
        gbc.writeMem(0xb6e1, { 0x46 });
        gbc.writeMem(0xf8bb, { 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xb6e1);
        EXPECT(gbc.pc(), 0xb6e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6e1), 0x46);
        EXPECT(gbc.readMem(0xf8bb), 0xea);
        // 46 020F
        gbc.setState(0x2c79, 0xc7dc, 0xef40, 0xf6dd, 0xc4f9, 0x7424, 0x0, 0x0);
        gbc.writeMem(0x2c79, { 0x46 });
        gbc.writeMem(0x7424, { 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xc7dc);
        EXPECT(gbc.pc(), 0x2c7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 0210
        gbc.setState(0xcfd3, 0x678, 0x1870, 0x81f3, 0xe8d4, 0xf150, 0x1, 0x0);
        gbc.writeMem(0xcfd3, { 0x46 });
        gbc.writeMem(0xf150, { 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x678);
        EXPECT(gbc.pc(), 0xcfd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfd3), 0x46);
        EXPECT(gbc.readMem(0xf150), 0x99);
        // 46 0211
        gbc.setState(0x9724, 0xd414, 0xc280, 0xaf9d, 0x6c9d, 0xf345, 0x1, 0x1);
        gbc.writeMem(0x9724, { 0x46 });
        gbc.writeMem(0xf345, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xd414);
        EXPECT(gbc.pc(), 0x9725);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9724), 0x46);
        EXPECT(gbc.readMem(0xf345), 0xe5);
        // 46 0212
        gbc.setState(0xbf6, 0xe6d6, 0xace0, 0xd01e, 0xad48, 0x5ced, 0x1, 0x0);
        gbc.writeMem(0xbf6, { 0x46 });
        gbc.writeMem(0x5ced, { 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xe6d6);
        EXPECT(gbc.pc(), 0xbf7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 0213
        gbc.setState(0x3775, 0x2682, 0xcc10, 0x512a, 0xca56, 0xa049, 0x1, 0x0);
        gbc.writeMem(0x3775, { 0x46 });
        gbc.writeMem(0xa049, { 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x2682);
        EXPECT(gbc.pc(), 0x3776);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa049), 0x29);
        // 46 0214
        gbc.setState(0x8cdc, 0x88ac, 0x6320, 0xef3a, 0x9b2d, 0x5b05, 0x0, 0x1);
        gbc.writeMem(0x5b05, { 0x5d });
        gbc.writeMem(0x8cdc, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x88ac);
        EXPECT(gbc.pc(), 0x8cdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cdc), 0x46);
        // 46 0216
        gbc.setState(0x9457, 0x3fb, 0x98a0, 0xb3d0, 0x61e4, 0xe5c2, 0x1, 0x0);
        gbc.writeMem(0x9457, { 0x46 });
        gbc.writeMem(0xe5c2, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x3fb);
        EXPECT(gbc.pc(), 0x9458);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9457), 0x46);
        EXPECT(gbc.readMem(0xe5c2), 0x79);
        // 46 0217
        gbc.setState(0x87ec, 0x44ce, 0xf8c0, 0x1e99, 0xfe1e, 0xd518, 0x0, 0x1);
        gbc.writeMem(0x87ec, { 0x46 });
        gbc.writeMem(0xd518, { 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x44ce);
        EXPECT(gbc.pc(), 0x87ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87ec), 0x46);
        EXPECT(gbc.readMem(0xd518), 0xae);
        // 46 0218
        gbc.setState(0x5944, 0x7841, 0x2010, 0x9e55, 0x981f, 0xb03f, 0x1, 0x1);
        gbc.writeMem(0x5944, { 0x46 });
        gbc.writeMem(0xb03f, { 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x7841);
        EXPECT(gbc.pc(), 0x5945);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb03f), 0x67);
        // 46 0219
        gbc.setState(0xc610, 0xaba5, 0x2ac0, 0xeb87, 0xd3d6, 0xe2a8, 0x0, 0x0);
        gbc.writeMem(0xc610, { 0x46 });
        gbc.writeMem(0xe2a8, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xaba5);
        EXPECT(gbc.pc(), 0xc611);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc610), 0x46);
        EXPECT(gbc.readMem(0xe2a8), 0x2a);
        // 46 021A
        gbc.setState(0x803, 0x291b, 0xa3a0, 0x5174, 0xe23d, 0x7773, 0x0, 0x1);
        gbc.writeMem(0x803, { 0x46 });
        gbc.writeMem(0x7773, { 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x291b);
        EXPECT(gbc.pc(), 0x804);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 021B
        gbc.setState(0x3003, 0x7bed, 0xd7c0, 0x1543, 0x9133, 0x1bed, 0x1, 0x1);
        gbc.writeMem(0x1bed, { 0x7a });
        gbc.writeMem(0x3003, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x7bed);
        EXPECT(gbc.pc(), 0x3004);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 021C
        gbc.setState(0x688f, 0x8f1f, 0xf530, 0x560f, 0x76a5, 0x5a00, 0x0, 0x0);
        gbc.writeMem(0x5a00, { 0xac });
        gbc.writeMem(0x688f, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x8f1f);
        EXPECT(gbc.pc(), 0x6890);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 021E
        gbc.setState(0xaef2, 0xe226, 0x4250, 0x7b18, 0xdba5, 0x66d3, 0x0, 0x1);
        gbc.writeMem(0x66d3, { 0x70 });
        gbc.writeMem(0xaef2, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xe226);
        EXPECT(gbc.pc(), 0xaef3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaef2), 0x46);
        // 46 0220
        gbc.setState(0x7b67, 0x6c01, 0x2270, 0x7161, 0x8e8f, 0xc77d, 0x0, 0x0);
        gbc.writeMem(0x7b67, { 0x46 });
        gbc.writeMem(0xc77d, { 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x6c01);
        EXPECT(gbc.pc(), 0x7b68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc77d), 0xe4);
        // 46 0221
        gbc.setState(0xe346, 0x4fa7, 0x3970, 0x12c0, 0x1665, 0x8c67, 0x0, 0x1);
        gbc.writeMem(0x8c67, { 0x5f });
        gbc.writeMem(0xe346, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x4fa7);
        EXPECT(gbc.pc(), 0xe347);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c67), 0x5f);
        EXPECT(gbc.readMem(0xe346), 0x46);
        // 46 0222
        gbc.setState(0x98e2, 0x13a5, 0x5c90, 0xe1ef, 0x9677, 0x46c0, 0x0, 0x1);
        gbc.writeMem(0x46c0, { 0x1c });
        gbc.writeMem(0x98e2, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x13a5);
        EXPECT(gbc.pc(), 0x98e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98e2), 0x46);
        // 46 0223
        gbc.setState(0x952a, 0x31ee, 0x33e0, 0x2268, 0x6e57, 0x6dbf, 0x0, 0x0);
        gbc.writeMem(0x6dbf, { 0x5f });
        gbc.writeMem(0x952a, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x31ee);
        EXPECT(gbc.pc(), 0x952b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x952a), 0x46);
        // 46 0224
        gbc.setState(0xe00d, 0x43b3, 0x2ef0, 0xb9ac, 0x25a6, 0x561c, 0x1, 0x1);
        gbc.writeMem(0x561c, { 0x4d });
        gbc.writeMem(0xe00d, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x43b3);
        EXPECT(gbc.pc(), 0xe00e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe00d), 0x46);
        // 46 0225
        gbc.setState(0x5fd6, 0x4a1f, 0xb6e0, 0x7e09, 0x2a05, 0x47bc, 0x0, 0x0);
        gbc.writeMem(0x47bc, { 0x38 });
        gbc.writeMem(0x5fd6, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x4a1f);
        EXPECT(gbc.pc(), 0x5fd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 0226
        gbc.setState(0x36b2, 0x57ef, 0xad0, 0xdbb8, 0xae82, 0xea19, 0x0, 0x0);
        gbc.writeMem(0x36b2, { 0x46 });
        gbc.writeMem(0xea19, { 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x57ef);
        EXPECT(gbc.pc(), 0x36b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea19), 0xcb);
        // 46 0227
        gbc.setState(0xce53, 0x4c4, 0x9500, 0xa0fc, 0x3b0b, 0x6baa, 0x0, 0x1);
        gbc.writeMem(0x6baa, { 0x46 });
        gbc.writeMem(0xce53, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x4c4);
        EXPECT(gbc.pc(), 0xce54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce53), 0x46);
        // 46 0228
        gbc.setState(0xb0ce, 0x4db9, 0x6ec0, 0x974a, 0x9e41, 0x95e7, 0x1, 0x1);
        gbc.writeMem(0x95e7, { 0x19 });
        gbc.writeMem(0xb0ce, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x4db9);
        EXPECT(gbc.pc(), 0xb0cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95e7), 0x19);
        EXPECT(gbc.readMem(0xb0ce), 0x46);
        // 46 0229
        gbc.setState(0x78fd, 0x84fe, 0x58e0, 0xcae0, 0x1511, 0x2d0b, 0x0, 0x1);
        gbc.writeMem(0x2d0b, { 0x36 });
        gbc.writeMem(0x78fd, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x84fe);
        EXPECT(gbc.pc(), 0x78fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 022A
        gbc.setState(0x36a1, 0x5137, 0xd4e0, 0x2a06, 0x150, 0xdd59, 0x0, 0x0);
        gbc.writeMem(0x36a1, { 0x46 });
        gbc.writeMem(0xdd59, { 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x5137);
        EXPECT(gbc.pc(), 0x36a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd59), 0xf8);
        // 46 022B
        gbc.setState(0x5e97, 0x5ff3, 0x41c0, 0x1720, 0x9825, 0xb26c, 0x1, 0x0);
        gbc.writeMem(0x5e97, { 0x46 });
        gbc.writeMem(0xb26c, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x5ff3);
        EXPECT(gbc.pc(), 0x5e98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb26c), 0xa3);
        // 46 022C
        gbc.setState(0x14ef, 0x72f7, 0x4640, 0xedba, 0x78a9, 0x1c9c, 0x0, 0x1);
        gbc.writeMem(0x14ef, { 0x46 });
        gbc.writeMem(0x1c9c, { 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x72f7);
        EXPECT(gbc.pc(), 0x14f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 022D
        gbc.setState(0x4fca, 0x6721, 0xbce0, 0x4bb7, 0x2182, 0x474f, 0x1, 0x0);
        gbc.writeMem(0x474f, { 0x92 });
        gbc.writeMem(0x4fca, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x6721);
        EXPECT(gbc.pc(), 0x4fcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 022E
        gbc.setState(0x642c, 0x5f93, 0x9c70, 0x7efd, 0x4fe2, 0xfd8b, 0x1, 0x1);
        gbc.writeMem(0x642c, { 0x46 });
        gbc.writeMem(0xfd8b, { 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x5f93);
        EXPECT(gbc.pc(), 0x642d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfd8b), 0xb6);
        // 46 0230
        gbc.setState(0xd48e, 0x4418, 0xe5b0, 0x3ffb, 0x289c, 0x8733, 0x1, 0x1);
        gbc.writeMem(0x8733, { 0x9a });
        gbc.writeMem(0xd48e, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x4418);
        EXPECT(gbc.pc(), 0xd48f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8733), 0x9a);
        EXPECT(gbc.readMem(0xd48e), 0x46);
        // 46 0232
        gbc.setState(0xcb49, 0xed28, 0x1480, 0x96fc, 0x6473, 0xc0a5, 0x0, 0x0);
        gbc.writeMem(0xc0a5, { 0x51 });
        gbc.writeMem(0xcb49, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xed28);
        EXPECT(gbc.pc(), 0xcb4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0a5), 0x51);
        EXPECT(gbc.readMem(0xcb49), 0x46);
        // 46 0233
        gbc.setState(0xc849, 0xc43c, 0x3b0, 0x67dc, 0xba6, 0x6edb, 0x0, 0x0);
        gbc.writeMem(0x6edb, { 0x58 });
        gbc.writeMem(0xc849, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xc43c);
        EXPECT(gbc.pc(), 0xc84a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc849), 0x46);
        // 46 0234
        gbc.setState(0xcad8, 0x66b0, 0xb6e0, 0xb0a4, 0xac7c, 0x4aa8, 0x0, 0x0);
        gbc.writeMem(0x4aa8, { 0x9a });
        gbc.writeMem(0xcad8, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x66b0);
        EXPECT(gbc.pc(), 0xcad9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcad8), 0x46);
        // 46 0235
        gbc.setState(0x964f, 0xb811, 0x7ce0, 0x8581, 0xa832, 0x6714, 0x1, 0x1);
        gbc.writeMem(0x6714, { 0x7f });
        gbc.writeMem(0x964f, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xb811);
        EXPECT(gbc.pc(), 0x9650);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x964f), 0x46);
        // 46 0236
        gbc.setState(0xc615, 0x4691, 0xa5a0, 0x9a1d, 0x6d75, 0xdb71, 0x0, 0x1);
        gbc.writeMem(0xc615, { 0x46 });
        gbc.writeMem(0xdb71, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x4691);
        EXPECT(gbc.pc(), 0xc616);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc615), 0x46);
        EXPECT(gbc.readMem(0xdb71), 0xf4);
        // 46 0237
        gbc.setState(0x858c, 0x6f3b, 0x3ad0, 0xb0ab, 0x5574, 0xeadb, 0x1, 0x1);
        gbc.writeMem(0x858c, { 0x46 });
        gbc.writeMem(0xeadb, { 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x6f3b);
        EXPECT(gbc.pc(), 0x858d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x858c), 0x46);
        EXPECT(gbc.readMem(0xeadb), 0x13);
        // 46 0238
        gbc.setState(0xc38c, 0x75a5, 0x15b0, 0xaabd, 0x69bb, 0xd57d, 0x0, 0x0);
        gbc.writeMem(0xc38c, { 0x46 });
        gbc.writeMem(0xd57d, { 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x75a5);
        EXPECT(gbc.pc(), 0xc38d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc38c), 0x46);
        EXPECT(gbc.readMem(0xd57d), 0xab);
        // 46 0239
        gbc.setState(0xa9fd, 0xb5c9, 0xd20, 0x70c9, 0x293f, 0x3859, 0x0, 0x0);
        gbc.writeMem(0x3859, { 0x2f });
        gbc.writeMem(0xa9fd, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xb5c9);
        EXPECT(gbc.pc(), 0xa9fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9fd), 0x46);
        // 46 023A
        gbc.setState(0x1855, 0x535d, 0x4200, 0x33e9, 0x10dc, 0x6b2, 0x1, 0x1);
        gbc.writeMem(0x6b2, { 0xf4 });
        gbc.writeMem(0x1855, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x535d);
        EXPECT(gbc.pc(), 0x1856);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 023B
        gbc.setState(0x13d9, 0xdbfb, 0xfd80, 0x2ae6, 0x8ae, 0x6488, 0x0, 0x0);
        gbc.writeMem(0x13d9, { 0x46 });
        gbc.writeMem(0x6488, { 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xdbfb);
        EXPECT(gbc.pc(), 0x13da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 023C
        gbc.setState(0x319c, 0x7bf9, 0xf030, 0x4950, 0x6fbc, 0x5993, 0x1, 0x0);
        gbc.writeMem(0x319c, { 0x46 });
        gbc.writeMem(0x5993, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x7bf9);
        EXPECT(gbc.pc(), 0x319d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 023D
        gbc.setState(0xd18d, 0xdb92, 0xdd90, 0x97f, 0x6c38, 0x2064, 0x0, 0x1);
        gbc.writeMem(0x2064, { 0xe5 });
        gbc.writeMem(0xd18d, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xdb92);
        EXPECT(gbc.pc(), 0xd18e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd18d), 0x46);
        // 46 023E
        gbc.setState(0x590, 0x9cbe, 0x63e0, 0x8a3c, 0xfd43, 0x297e, 0x0, 0x1);
        gbc.writeMem(0x590, { 0x46 });
        gbc.writeMem(0x297e, { 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x9cbe);
        EXPECT(gbc.pc(), 0x591);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 023F
        gbc.setState(0x14ba, 0x9230, 0x9530, 0x9d56, 0xa78b, 0xc528, 0x0, 0x1);
        gbc.writeMem(0x14ba, { 0x46 });
        gbc.writeMem(0xc528, { 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x9230);
        EXPECT(gbc.pc(), 0x14bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc528), 0x6f);
        // 46 0240
        gbc.setState(0x14f5, 0x88a6, 0x8370, 0xe6d1, 0xfc8d, 0xc624, 0x1, 0x0);
        gbc.writeMem(0x14f5, { 0x46 });
        gbc.writeMem(0xc624, { 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x88a6);
        EXPECT(gbc.pc(), 0x14f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc624), 0xb8);
        // 46 0241
        gbc.setState(0xd192, 0x1a59, 0x230, 0x598f, 0xf240, 0xbe4f, 0x0, 0x1);
        gbc.writeMem(0xbe4f, { 0xc });
        gbc.writeMem(0xd192, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x1a59);
        EXPECT(gbc.pc(), 0xd193);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe4f), 0xc);
        EXPECT(gbc.readMem(0xd192), 0x46);
        // 46 0242
        gbc.setState(0xeda9, 0xbb88, 0x9240, 0x9c9f, 0xe779, 0xdcd1, 0x0, 0x1);
        gbc.writeMem(0xdcd1, { 0xd7 });
        gbc.writeMem(0xeda9, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xbb88);
        EXPECT(gbc.pc(), 0xedaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcd1), 0xd7);
        EXPECT(gbc.readMem(0xeda9), 0x46);
        // 46 0243
        gbc.setState(0x8449, 0x75df, 0x8900, 0x9c78, 0x79b6, 0x5a52, 0x0, 0x1);
        gbc.writeMem(0x5a52, { 0xaa });
        gbc.writeMem(0x8449, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x75df);
        EXPECT(gbc.pc(), 0x844a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8449), 0x46);
        // 46 0244
        gbc.setState(0xb3d6, 0x4fd, 0x6d60, 0xd63, 0x987d, 0x2d28, 0x0, 0x0);
        gbc.writeMem(0x2d28, { 0x91 });
        gbc.writeMem(0xb3d6, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x4fd);
        EXPECT(gbc.pc(), 0xb3d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3d6), 0x46);
        // 46 0245
        gbc.setState(0xbf8d, 0xd34f, 0x4220, 0xe69c, 0x7a41, 0xe239, 0x1, 0x0);
        gbc.writeMem(0xbf8d, { 0x46 });
        gbc.writeMem(0xe239, { 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xd34f);
        EXPECT(gbc.pc(), 0xbf8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf8d), 0x46);
        EXPECT(gbc.readMem(0xe239), 0x1f);
        // 46 0246
        gbc.setState(0x84ba, 0x7ba7, 0xed0, 0xa5f2, 0x2bac, 0xd3c0, 0x0, 0x1);
        gbc.writeMem(0x84ba, { 0x46 });
        gbc.writeMem(0xd3c0, { 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x7ba7);
        EXPECT(gbc.pc(), 0x84bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84ba), 0x46);
        EXPECT(gbc.readMem(0xd3c0), 0x14);
        // 46 0247
        gbc.setState(0xe274, 0x1476, 0x4180, 0xe1ea, 0x4bb2, 0xfae0, 0x0, 0x0);
        gbc.writeMem(0xe274, { 0x46 });
        gbc.writeMem(0xfae0, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x1476);
        EXPECT(gbc.pc(), 0xe275);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe274), 0x46);
        EXPECT(gbc.readMem(0xfae0), 0x7f);
        // 46 0248
        gbc.setState(0x9b85, 0xcc2c, 0x2ec0, 0xf64e, 0xe392, 0xa355, 0x1, 0x0);
        gbc.writeMem(0x9b85, { 0x46 });
        gbc.writeMem(0xa355, { 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xcc2c);
        EXPECT(gbc.pc(), 0x9b86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b85), 0x46);
        EXPECT(gbc.readMem(0xa355), 0x1f);
        // 46 0249
        gbc.setState(0x3140, 0x98f6, 0xd620, 0x65f2, 0xd0f1, 0x9e00, 0x0, 0x0);
        gbc.writeMem(0x3140, { 0x46 });
        gbc.writeMem(0x9e00, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x98f6);
        EXPECT(gbc.pc(), 0x3141);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e00), 0x11);
        // 46 024A
        gbc.setState(0x7aa9, 0xfdd5, 0x8a70, 0x20e8, 0x604, 0xaa8c, 0x0, 0x0);
        gbc.writeMem(0x7aa9, { 0x46 });
        gbc.writeMem(0xaa8c, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xfdd5);
        EXPECT(gbc.pc(), 0x7aaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa8c), 0x24);
        // 46 024B
        gbc.setState(0x6ea2, 0x7ef3, 0x2010, 0xa6bb, 0xd4a4, 0xef01, 0x0, 0x0);
        gbc.writeMem(0x6ea2, { 0x46 });
        gbc.writeMem(0xef01, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x7ef3);
        EXPECT(gbc.pc(), 0x6ea3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef01), 0xb1);
        // 46 024C
        gbc.setState(0x41c1, 0xa8ca, 0x97d0, 0x4f2b, 0xa8c9, 0xbc6d, 0x1, 0x0);
        gbc.writeMem(0x41c1, { 0x46 });
        gbc.writeMem(0xbc6d, { 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xa8ca);
        EXPECT(gbc.pc(), 0x41c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc6d), 0xdd);
        // 46 024E
        gbc.setState(0x2894, 0x6b87, 0xcaf0, 0xcdf6, 0x5b3a, 0xa115, 0x0, 0x1);
        gbc.writeMem(0x2894, { 0x46 });
        gbc.writeMem(0xa115, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x6b87);
        EXPECT(gbc.pc(), 0x2895);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa115), 0x66);
        // 46 024F
        gbc.setState(0x1528, 0x8295, 0x74b0, 0x5bb1, 0x8832, 0x15, 0x1, 0x1);
        gbc.writeMem(0x15, { 0x33 });
        gbc.writeMem(0x1528, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x8295);
        EXPECT(gbc.pc(), 0x1529);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 0250
        gbc.setState(0xa9ab, 0xae44, 0x78c0, 0xa89e, 0xc3ca, 0x4e3b, 0x0, 0x1);
        gbc.writeMem(0x4e3b, { 0x6c });
        gbc.writeMem(0xa9ab, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xae44);
        EXPECT(gbc.pc(), 0xa9ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9ab), 0x46);
        // 46 0251
        gbc.setState(0x9001, 0xe449, 0x380, 0xf0b3, 0xd921, 0x47fe, 0x1, 0x0);
        gbc.writeMem(0x47fe, { 0x28 });
        gbc.writeMem(0x9001, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xe449);
        EXPECT(gbc.pc(), 0x9002);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9001), 0x46);
        // 46 0252
        gbc.setState(0xa3e, 0xb584, 0x6410, 0x754f, 0xf359, 0xd8f1, 0x0, 0x0);
        gbc.writeMem(0xa3e, { 0x46 });
        gbc.writeMem(0xd8f1, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xb584);
        EXPECT(gbc.pc(), 0xa3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8f1), 0x7e);
        // 46 0253
        gbc.setState(0xca21, 0x88d5, 0x3100, 0xcd2c, 0xf858, 0xe9c, 0x1, 0x1);
        gbc.writeMem(0xe9c, { 0x1 });
        gbc.writeMem(0xca21, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x88d5);
        EXPECT(gbc.pc(), 0xca22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca21), 0x46);
        // 46 0255
        gbc.setState(0xc346, 0x2ac3, 0x1990, 0x89c1, 0x925d, 0x7005, 0x0, 0x0);
        gbc.writeMem(0x7005, { 0xef });
        gbc.writeMem(0xc346, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x2ac3);
        EXPECT(gbc.pc(), 0xc347);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc346), 0x46);
        // 46 0256
        gbc.setState(0x9b39, 0xf8a7, 0x9480, 0x2255, 0xf1cc, 0xc6e8, 0x0, 0x0);
        gbc.writeMem(0x9b39, { 0x46 });
        gbc.writeMem(0xc6e8, { 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xf8a7);
        EXPECT(gbc.pc(), 0x9b3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b39), 0x46);
        EXPECT(gbc.readMem(0xc6e8), 0xf1);
        // 46 0257
        gbc.setState(0x3e8b, 0x9792, 0x8880, 0x6f29, 0x6185, 0x27d3, 0x1, 0x0);
        gbc.writeMem(0x27d3, { 0x4b });
        gbc.writeMem(0x3e8b, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x9792);
        EXPECT(gbc.pc(), 0x3e8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 0258
        gbc.setState(0xaf43, 0x789f, 0x7ca0, 0x8a5, 0x7f8d, 0x9e79, 0x1, 0x0);
        gbc.writeMem(0x9e79, { 0x68 });
        gbc.writeMem(0xaf43, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x789f);
        EXPECT(gbc.pc(), 0xaf44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e79), 0x68);
        EXPECT(gbc.readMem(0xaf43), 0x46);
        // 46 0259
        gbc.setState(0xb1e8, 0xdeeb, 0xf4d0, 0x6bdf, 0xe683, 0xd710, 0x1, 0x1);
        gbc.writeMem(0xb1e8, { 0x46 });
        gbc.writeMem(0xd710, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xdeeb);
        EXPECT(gbc.pc(), 0xb1e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1e8), 0x46);
        EXPECT(gbc.readMem(0xd710), 0xa8);
        // 46 025A
        gbc.setState(0x67e2, 0x895c, 0xa520, 0xbda, 0xabb9, 0x7a54, 0x1, 0x1);
        gbc.writeMem(0x67e2, { 0x46 });
        gbc.writeMem(0x7a54, { 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x895c);
        EXPECT(gbc.pc(), 0x67e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 025B
        gbc.setState(0xc92d, 0x977b, 0xa40, 0xed54, 0x2eea, 0x87ef, 0x1, 0x0);
        gbc.writeMem(0x87ef, { 0xa3 });
        gbc.writeMem(0xc92d, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x977b);
        EXPECT(gbc.pc(), 0xc92e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87ef), 0xa3);
        EXPECT(gbc.readMem(0xc92d), 0x46);
        // 46 025C
        gbc.setState(0xa60f, 0xf855, 0xf160, 0x37cc, 0xf288, 0x54be, 0x0, 0x1);
        gbc.writeMem(0x54be, { 0x61 });
        gbc.writeMem(0xa60f, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xf855);
        EXPECT(gbc.pc(), 0xa610);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa60f), 0x46);
        // 46 025D
        gbc.setState(0x3d33, 0xdf1, 0x1240, 0x88fb, 0x22be, 0x5d92, 0x1, 0x1);
        gbc.writeMem(0x3d33, { 0x46 });
        gbc.writeMem(0x5d92, { 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xdf1);
        EXPECT(gbc.pc(), 0x3d34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 025E
        gbc.setState(0x9282, 0x3f4d, 0x9de0, 0x6fbc, 0xcfa, 0xa1d8, 0x1, 0x0);
        gbc.writeMem(0x9282, { 0x46 });
        gbc.writeMem(0xa1d8, { 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x3f4d);
        EXPECT(gbc.pc(), 0x9283);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9282), 0x46);
        EXPECT(gbc.readMem(0xa1d8), 0x8c);
        // 46 025F
        gbc.setState(0xe7c9, 0x8a97, 0xdee0, 0x7542, 0x6094, 0x1184, 0x0, 0x0);
        gbc.writeMem(0x1184, { 0x8d });
        gbc.writeMem(0xe7c9, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x8a97);
        EXPECT(gbc.pc(), 0xe7ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7c9), 0x46);
        // 46 0260
        gbc.setState(0x2357, 0x5e01, 0xb670, 0xcc44, 0x4757, 0xfd29, 0x1, 0x1);
        gbc.writeMem(0x2357, { 0x46 });
        gbc.writeMem(0xfd29, { 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x5e01);
        EXPECT(gbc.pc(), 0x2358);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfd29), 0x93);
        // 46 0261
        gbc.setState(0xb345, 0xf88c, 0x8970, 0x1b2a, 0x9047, 0xdad4, 0x1, 0x0);
        gbc.writeMem(0xb345, { 0x46 });
        gbc.writeMem(0xdad4, { 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xf88c);
        EXPECT(gbc.pc(), 0xb346);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb345), 0x46);
        EXPECT(gbc.readMem(0xdad4), 0xfe);
        // 46 0262
        gbc.setState(0xbec0, 0xbe18, 0x97f0, 0x8e9c, 0x651a, 0x4833, 0x1, 0x0);
        gbc.writeMem(0x4833, { 0x7f });
        gbc.writeMem(0xbec0, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xbe18);
        EXPECT(gbc.pc(), 0xbec1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbec0), 0x46);
        // 46 0263
        gbc.setState(0xe06d, 0x617f, 0xe9a0, 0x8957, 0x3db8, 0x59a5, 0x1, 0x1);
        gbc.writeMem(0x59a5, { 0xcc });
        gbc.writeMem(0xe06d, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x617f);
        EXPECT(gbc.pc(), 0xe06e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe06d), 0x46);
        // 46 0264
        gbc.setState(0x47ff, 0x97a4, 0x8ad0, 0x2774, 0xfc57, 0x8b7d, 0x1, 0x0);
        gbc.writeMem(0x47ff, { 0x46 });
        gbc.writeMem(0x8b7d, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x97a4);
        EXPECT(gbc.pc(), 0x4800);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b7d), 0x46);
        // 46 0265
        gbc.setState(0x12e2, 0xa42b, 0xaa70, 0x3005, 0xe2c3, 0xa0d0, 0x1, 0x1);
        gbc.writeMem(0x12e2, { 0x46 });
        gbc.writeMem(0xa0d0, { 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xa42b);
        EXPECT(gbc.pc(), 0x12e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0d0), 0xae);
        // 46 0266
        gbc.setState(0x1bdc, 0x15cf, 0xeba0, 0x4dad, 0xd62b, 0xdcdb, 0x1, 0x1);
        gbc.writeMem(0x1bdc, { 0x46 });
        gbc.writeMem(0xdcdb, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x15cf);
        EXPECT(gbc.pc(), 0x1bdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcdb), 0xb3);
        // 46 0267
        gbc.setState(0x618d, 0x5f86, 0xb860, 0x6743, 0x9340, 0x7cb, 0x1, 0x0);
        gbc.writeMem(0x7cb, { 0x6d });
        gbc.writeMem(0x618d, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x5f86);
        EXPECT(gbc.pc(), 0x618e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 0268
        gbc.setState(0x6fc, 0xa314, 0xa880, 0x9a76, 0xf870, 0xbe16, 0x0, 0x0);
        gbc.writeMem(0x6fc, { 0x46 });
        gbc.writeMem(0xbe16, { 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xa314);
        EXPECT(gbc.pc(), 0x6fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe16), 0xf7);
        // 46 0269
        gbc.setState(0xdf4f, 0xbe59, 0x7780, 0x4d71, 0x8b27, 0x3945, 0x0, 0x0);
        gbc.writeMem(0x3945, { 0x9f });
        gbc.writeMem(0xdf4f, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xbe59);
        EXPECT(gbc.pc(), 0xdf50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf4f), 0x46);
        // 46 026A
        gbc.setState(0x226e, 0x3fa, 0x52f0, 0xbc1f, 0x5274, 0xe728, 0x1, 0x0);
        gbc.writeMem(0x226e, { 0x46 });
        gbc.writeMem(0xe728, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x3fa);
        EXPECT(gbc.pc(), 0x226f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe728), 0xe5);
        // 46 026B
        gbc.setState(0x74a4, 0xb41b, 0x6fc0, 0x9056, 0x72a7, 0xa1c5, 0x0, 0x0);
        gbc.writeMem(0x74a4, { 0x46 });
        gbc.writeMem(0xa1c5, { 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xb41b);
        EXPECT(gbc.pc(), 0x74a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1c5), 0x91);
        // 46 026C
        gbc.setState(0x8845, 0x74df, 0xb970, 0xf03b, 0x8830, 0x6c83, 0x0, 0x0);
        gbc.writeMem(0x6c83, { 0x91 });
        gbc.writeMem(0x8845, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x74df);
        EXPECT(gbc.pc(), 0x8846);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8845), 0x46);
        // 46 026D
        gbc.setState(0x6914, 0x2d70, 0x6240, 0xf15e, 0x1c80, 0x36e8, 0x1, 0x0);
        gbc.writeMem(0x36e8, { 0x3b });
        gbc.writeMem(0x6914, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x2d70);
        EXPECT(gbc.pc(), 0x6915);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 026E
        gbc.setState(0x3abb, 0xaa14, 0x3030, 0x61c1, 0x8289, 0xdea7, 0x1, 0x0);
        gbc.writeMem(0x3abb, { 0x46 });
        gbc.writeMem(0xdea7, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xaa14);
        EXPECT(gbc.pc(), 0x3abc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdea7), 0xc0);
        // 46 026F
        gbc.setState(0xa71e, 0xb2f, 0x3880, 0x4111, 0x123b, 0x8db, 0x0, 0x1);
        gbc.writeMem(0x8db, { 0x1a });
        gbc.writeMem(0xa71e, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xb2f);
        EXPECT(gbc.pc(), 0xa71f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa71e), 0x46);
        // 46 0271
        gbc.setState(0xd3d9, 0x4542, 0x8c60, 0xc142, 0x8e2e, 0x6371, 0x0, 0x0);
        gbc.writeMem(0x6371, { 0x50 });
        gbc.writeMem(0xd3d9, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x4542);
        EXPECT(gbc.pc(), 0xd3da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3d9), 0x46);
        // 46 0272
        gbc.setState(0x3e01, 0xde59, 0xe840, 0xdb2, 0xf72d, 0xf60a, 0x0, 0x0);
        gbc.writeMem(0x3e01, { 0x46 });
        gbc.writeMem(0xf60a, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xde59);
        EXPECT(gbc.pc(), 0x3e02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf60a), 0x9);
        // 46 0273
        gbc.setState(0x97aa, 0xd1e5, 0x54b0, 0xecfc, 0xe10a, 0x5a11, 0x0, 0x1);
        gbc.writeMem(0x5a11, { 0x96 });
        gbc.writeMem(0x97aa, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xd1e5);
        EXPECT(gbc.pc(), 0x97ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97aa), 0x46);
        // 46 0274
        gbc.setState(0xb489, 0x7f24, 0xdf0, 0xec73, 0xbf3c, 0x81fa, 0x0, 0x1);
        gbc.writeMem(0x81fa, { 0x65 });
        gbc.writeMem(0xb489, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x7f24);
        EXPECT(gbc.pc(), 0xb48a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81fa), 0x65);
        EXPECT(gbc.readMem(0xb489), 0x46);
        // 46 0275
        gbc.setState(0x2b10, 0x2b4a, 0x8210, 0xe747, 0xbeb8, 0xe5a2, 0x1, 0x1);
        gbc.writeMem(0x2b10, { 0x46 });
        gbc.writeMem(0xe5a2, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x2b4a);
        EXPECT(gbc.pc(), 0x2b11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5a2), 0xa9);
        // 46 0276
        gbc.setState(0x59c5, 0x545, 0xc930, 0xb401, 0xb81d, 0x8ffb, 0x0, 0x1);
        gbc.writeMem(0x59c5, { 0x46 });
        gbc.writeMem(0x8ffb, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x545);
        EXPECT(gbc.pc(), 0x59c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ffb), 0x95);
        // 46 0277
        gbc.setState(0x6317, 0x24fe, 0xe460, 0xc80d, 0x9bb5, 0xd74d, 0x0, 0x1);
        gbc.writeMem(0x6317, { 0x46 });
        gbc.writeMem(0xd74d, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x24fe);
        EXPECT(gbc.pc(), 0x6318);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd74d), 0x37);
        // 46 0278
        gbc.setState(0xeb94, 0x7b4c, 0xb410, 0x3e48, 0x9e44, 0xea36, 0x0, 0x1);
        gbc.writeMem(0xea36, { 0xad });
        gbc.writeMem(0xeb94, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x7b4c);
        EXPECT(gbc.pc(), 0xeb95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea36), 0xad);
        EXPECT(gbc.readMem(0xeb94), 0x46);
        // 46 0279
        gbc.setState(0x6764, 0x4394, 0xd630, 0x794b, 0xc15, 0x2dde, 0x0, 0x1);
        gbc.writeMem(0x2dde, { 0xe2 });
        gbc.writeMem(0x6764, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x4394);
        EXPECT(gbc.pc(), 0x6765);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 027A
        gbc.setState(0x262b, 0xec34, 0xe920, 0x550c, 0x24e9, 0xfd47, 0x1, 0x0);
        gbc.writeMem(0x262b, { 0x46 });
        gbc.writeMem(0xfd47, { 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xec34);
        EXPECT(gbc.pc(), 0x262c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfd47), 0xaf);
        // 46 027B
        gbc.setState(0xaa28, 0xdf22, 0x9f00, 0x10c6, 0xd6ac, 0x1722, 0x1, 0x0);
        gbc.writeMem(0x1722, { 0x5f });
        gbc.writeMem(0xaa28, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xdf22);
        EXPECT(gbc.pc(), 0xaa29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa28), 0x46);
        // 46 027C
        gbc.setState(0xd27a, 0x49f5, 0x9070, 0xb80e, 0x411d, 0xe2b2, 0x0, 0x0);
        gbc.writeMem(0xd27a, { 0x46 });
        gbc.writeMem(0xe2b2, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x49f5);
        EXPECT(gbc.pc(), 0xd27b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd27a), 0x46);
        EXPECT(gbc.readMem(0xe2b2), 0xa5);
        // 46 027D
        gbc.setState(0xa23f, 0x96e6, 0xb8f0, 0x6466, 0x2571, 0xa0f, 0x0, 0x1);
        gbc.writeMem(0xa0f, { 0x4a });
        gbc.writeMem(0xa23f, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x96e6);
        EXPECT(gbc.pc(), 0xa240);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa23f), 0x46);
        // 46 027E
        gbc.setState(0x9a27, 0xdf0a, 0x6a80, 0xa92b, 0x4404, 0xf703, 0x1, 0x1);
        gbc.writeMem(0x9a27, { 0x46 });
        gbc.writeMem(0xf703, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xdf0a);
        EXPECT(gbc.pc(), 0x9a28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a27), 0x46);
        EXPECT(gbc.readMem(0xf703), 0x5a);
        // 46 027F
        gbc.setState(0x502d, 0xc753, 0x400, 0x6c4d, 0x324c, 0x84dc, 0x1, 0x1);
        gbc.writeMem(0x502d, { 0x46 });
        gbc.writeMem(0x84dc, { 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xc753);
        EXPECT(gbc.pc(), 0x502e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84dc), 0xcd);
        // 46 0280
        gbc.setState(0x52f7, 0x7350, 0x2220, 0x8e0, 0xf4aa, 0xa48e, 0x1, 0x1);
        gbc.writeMem(0x52f7, { 0x46 });
        gbc.writeMem(0xa48e, { 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x7350);
        EXPECT(gbc.pc(), 0x52f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa48e), 0xd2);
        // 46 0281
        gbc.setState(0xd2cf, 0x915c, 0x1710, 0x14a2, 0xeac5, 0xf86b, 0x1, 0x0);
        gbc.writeMem(0xd2cf, { 0x46 });
        gbc.writeMem(0xf86b, { 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x915c);
        EXPECT(gbc.pc(), 0xd2d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2cf), 0x46);
        EXPECT(gbc.readMem(0xf86b), 0xbe);
        // 46 0282
        gbc.setState(0xb97b, 0xc9de, 0x9320, 0xebef, 0x73c4, 0xda12, 0x1, 0x0);
        gbc.writeMem(0xb97b, { 0x46 });
        gbc.writeMem(0xda12, { 0xc8 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xc9de);
        EXPECT(gbc.pc(), 0xb97c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb97b), 0x46);
        EXPECT(gbc.readMem(0xda12), 0xc8);
        // 46 0283
        gbc.setState(0x4764, 0x8d18, 0x6ea0, 0xf172, 0x8652, 0xb2e8, 0x1, 0x0);
        gbc.writeMem(0x4764, { 0x46 });
        gbc.writeMem(0xb2e8, { 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x8d18);
        EXPECT(gbc.pc(), 0x4765);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2e8), 0x26);
        // 46 0284
        gbc.setState(0xc9fb, 0xc717, 0x7fe0, 0x33cc, 0x566b, 0xb5fa, 0x0, 0x0);
        gbc.writeMem(0xb5fa, { 0x40 });
        gbc.writeMem(0xc9fb, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xc717);
        EXPECT(gbc.pc(), 0xc9fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5fa), 0x40);
        EXPECT(gbc.readMem(0xc9fb), 0x46);
        // 46 0285
        gbc.setState(0x4c04, 0xd69c, 0xe810, 0xdf37, 0x26d4, 0x1d6a, 0x0, 0x0);
        gbc.writeMem(0x1d6a, { 0x2c });
        gbc.writeMem(0x4c04, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xd69c);
        EXPECT(gbc.pc(), 0x4c05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 0286
        gbc.setState(0xa1c1, 0x73c7, 0xc8e0, 0x7112, 0x8002, 0x408b, 0x0, 0x1);
        gbc.writeMem(0x408b, { 0xa9 });
        gbc.writeMem(0xa1c1, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x73c7);
        EXPECT(gbc.pc(), 0xa1c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1c1), 0x46);
        // 46 0287
        gbc.setState(0xbf54, 0x6f6c, 0x47f0, 0xbb89, 0x6c09, 0x98d9, 0x1, 0x1);
        gbc.writeMem(0x98d9, { 0xb3 });
        gbc.writeMem(0xbf54, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x6f6c);
        EXPECT(gbc.pc(), 0xbf55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98d9), 0xb3);
        EXPECT(gbc.readMem(0xbf54), 0x46);
        // 46 0288
        gbc.setState(0xcb5e, 0x7b1e, 0xbd50, 0x52c8, 0xfbe9, 0xe5b0, 0x0, 0x0);
        gbc.writeMem(0xcb5e, { 0x46 });
        gbc.writeMem(0xe5b0, { 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x7b1e);
        EXPECT(gbc.pc(), 0xcb5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb5e), 0x46);
        EXPECT(gbc.readMem(0xe5b0), 0x7);
        // 46 0289
        gbc.setState(0x2d38, 0x1c92, 0x7dd0, 0xbda7, 0xce3f, 0x424e, 0x0, 0x0);
        gbc.writeMem(0x2d38, { 0x46 });
        gbc.writeMem(0x424e, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x1c92);
        EXPECT(gbc.pc(), 0x2d39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 028A
        gbc.setState(0x243f, 0xa5d8, 0xd0c0, 0xcbac, 0xf0f, 0xc93f, 0x1, 0x1);
        gbc.writeMem(0x243f, { 0x46 });
        gbc.writeMem(0xc93f, { 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xa5d8);
        EXPECT(gbc.pc(), 0x2440);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc93f), 0x91);
        // 46 028B
        gbc.setState(0xd992, 0x1ce0, 0x1170, 0xcbca, 0x43f3, 0x52fc, 0x1, 0x1);
        gbc.writeMem(0x52fc, { 0x82 });
        gbc.writeMem(0xd992, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x1ce0);
        EXPECT(gbc.pc(), 0xd993);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd992), 0x46);
        // 46 028C
        gbc.setState(0x1744, 0xe104, 0x7000, 0xff94, 0xdca1, 0xa51a, 0x0, 0x1);
        gbc.writeMem(0x1744, { 0x46 });
        gbc.writeMem(0xa51a, { 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xe104);
        EXPECT(gbc.pc(), 0x1745);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa51a), 0x3d);
        // 46 028D
        gbc.setState(0x3a3d, 0xf420, 0xd670, 0x5f62, 0xd2d6, 0xce54, 0x1, 0x1);
        gbc.writeMem(0x3a3d, { 0x46 });
        gbc.writeMem(0xce54, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xf420);
        EXPECT(gbc.pc(), 0x3a3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce54), 0xa9);
        // 46 028E
        gbc.setState(0x24e4, 0xc500, 0xb00, 0xe368, 0xf2bf, 0xbda2, 0x1, 0x0);
        gbc.writeMem(0x24e4, { 0x46 });
        gbc.writeMem(0xbda2, { 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xc500);
        EXPECT(gbc.pc(), 0x24e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbda2), 0xa1);
        // 46 028F
        gbc.setState(0x5e5, 0xd78c, 0xa550, 0xd17b, 0x64f3, 0x732d, 0x0, 0x0);
        gbc.writeMem(0x5e5, { 0x46 });
        gbc.writeMem(0x732d, { 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xd78c);
        EXPECT(gbc.pc(), 0x5e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 0290
        gbc.setState(0xdfff, 0xa992, 0xfee0, 0xdf24, 0xf198, 0xd107, 0x1, 0x1);
        gbc.writeMem(0xd107, { 0xa4 });
        gbc.writeMem(0xdfff, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xa992);
        EXPECT(gbc.pc(), 0xe000);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd107), 0xa4);
        EXPECT(gbc.readMem(0xdfff), 0x46);
        // 46 0291
        gbc.setState(0x8522, 0x926, 0x3980, 0x379b, 0x7cb, 0x66d0, 0x1, 0x1);
        gbc.writeMem(0x66d0, { 0xad });
        gbc.writeMem(0x8522, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x926);
        EXPECT(gbc.pc(), 0x8523);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8522), 0x46);
        // 46 0292
        gbc.setState(0x73ff, 0xa80f, 0x7150, 0xc10a, 0x82ca, 0xa7e3, 0x1, 0x1);
        gbc.writeMem(0x73ff, { 0x46 });
        gbc.writeMem(0xa7e3, { 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xa80f);
        EXPECT(gbc.pc(), 0x7400);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7e3), 0x45);
        // 46 0293
        gbc.setState(0x32fe, 0xbc4e, 0xfc20, 0x9d33, 0x1f5c, 0x8d6e, 0x0, 0x1);
        gbc.writeMem(0x32fe, { 0x46 });
        gbc.writeMem(0x8d6e, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xbc4e);
        EXPECT(gbc.pc(), 0x32ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d6e), 0x57);
        // 46 0294
        gbc.setState(0x2b9d, 0xa9d7, 0xf4a0, 0xa54b, 0x4743, 0xf982, 0x0, 0x1);
        gbc.writeMem(0x2b9d, { 0x46 });
        gbc.writeMem(0xf982, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xa9d7);
        EXPECT(gbc.pc(), 0x2b9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf982), 0x19);
        // 46 0295
        gbc.setState(0x7766, 0x35fb, 0xdab0, 0xd120, 0x51a8, 0x7682, 0x1, 0x0);
        gbc.writeMem(0x7682, { 0x78 });
        gbc.writeMem(0x7766, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x35fb);
        EXPECT(gbc.pc(), 0x7767);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 0296
        gbc.setState(0x1e4d, 0x22bb, 0x2460, 0xa359, 0xd3aa, 0x89c4, 0x0, 0x0);
        gbc.writeMem(0x1e4d, { 0x46 });
        gbc.writeMem(0x89c4, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x22bb);
        EXPECT(gbc.pc(), 0x1e4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89c4), 0x9c);
        // 46 0298
        gbc.setState(0x6313, 0x3ecd, 0xb720, 0x3712, 0xce1e, 0x7257, 0x1, 0x1);
        gbc.writeMem(0x6313, { 0x46 });
        gbc.writeMem(0x7257, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x3ecd);
        EXPECT(gbc.pc(), 0x6314);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 0299
        gbc.setState(0xebf2, 0x75eb, 0x1790, 0x4d14, 0x8c47, 0xf27c, 0x0, 0x1);
        gbc.writeMem(0xebf2, { 0x46 });
        gbc.writeMem(0xf27c, { 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x75eb);
        EXPECT(gbc.pc(), 0xebf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebf2), 0x46);
        EXPECT(gbc.readMem(0xf27c), 0x15);
        // 46 029A
        gbc.setState(0x8bdb, 0x7658, 0x2ca0, 0xbdf5, 0x2c83, 0x7eb1, 0x1, 0x1);
        gbc.writeMem(0x7eb1, { 0xc3 });
        gbc.writeMem(0x8bdb, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x7658);
        EXPECT(gbc.pc(), 0x8bdc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bdb), 0x46);
        // 46 029B
        gbc.setState(0xbae6, 0x1434, 0x5970, 0xf693, 0xe55d, 0xa0d7, 0x1, 0x0);
        gbc.writeMem(0xa0d7, { 0xdb });
        gbc.writeMem(0xbae6, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x1434);
        EXPECT(gbc.pc(), 0xbae7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0d7), 0xdb);
        EXPECT(gbc.readMem(0xbae6), 0x46);
        // 46 029C
        gbc.setState(0xc84f, 0xaf58, 0x3ec0, 0x45ce, 0xe269, 0xcf59, 0x0, 0x0);
        gbc.writeMem(0xc84f, { 0x46 });
        gbc.writeMem(0xcf59, { 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xaf58);
        EXPECT(gbc.pc(), 0xc850);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc84f), 0x46);
        EXPECT(gbc.readMem(0xcf59), 0x6e);
        // 46 029D
        gbc.setState(0x94ff, 0xd790, 0x7200, 0x7b7d, 0x4a33, 0x10b6, 0x1, 0x0);
        gbc.writeMem(0x10b6, { 0xa7 });
        gbc.writeMem(0x94ff, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xd790);
        EXPECT(gbc.pc(), 0x9500);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94ff), 0x46);
        // 46 029E
        gbc.setState(0xc20f, 0xc9ff, 0xeb00, 0xb84c, 0xe3d3, 0xf0b5, 0x0, 0x1);
        gbc.writeMem(0xc20f, { 0x46 });
        gbc.writeMem(0xf0b5, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xc9ff);
        EXPECT(gbc.pc(), 0xc210);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc20f), 0x46);
        EXPECT(gbc.readMem(0xf0b5), 0xc7);
        // 46 029F
        gbc.setState(0x892c, 0xfc53, 0x6c10, 0x8d8, 0xc43c, 0x10c9, 0x0, 0x1);
        gbc.writeMem(0x10c9, { 0xb7 });
        gbc.writeMem(0x892c, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xfc53);
        EXPECT(gbc.pc(), 0x892d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x892c), 0x46);
        // 46 02A0
        gbc.setState(0x57ce, 0xb9b0, 0x73b0, 0xdcae, 0xf0ec, 0x9c1d, 0x1, 0x0);
        gbc.writeMem(0x57ce, { 0x46 });
        gbc.writeMem(0x9c1d, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xb9b0);
        EXPECT(gbc.pc(), 0x57cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c1d), 0x73);
        // 46 02A1
        gbc.setState(0x99a0, 0xfbcd, 0x5dd0, 0x9be5, 0x410e, 0x609a, 0x0, 0x0);
        gbc.writeMem(0x609a, { 0x23 });
        gbc.writeMem(0x99a0, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xfbcd);
        EXPECT(gbc.pc(), 0x99a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99a0), 0x46);
        // 46 02A2
        gbc.setState(0xb217, 0x2902, 0x2ab0, 0x366f, 0xc43a, 0xb9ef, 0x1, 0x0);
        gbc.writeMem(0xb217, { 0x46 });
        gbc.writeMem(0xb9ef, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x2902);
        EXPECT(gbc.pc(), 0xb218);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb217), 0x46);
        EXPECT(gbc.readMem(0xb9ef), 0x23);
        // 46 02A3
        gbc.setState(0xa673, 0x2a99, 0x190, 0x9f1b, 0xb638, 0xa2e6, 0x1, 0x0);
        gbc.writeMem(0xa2e6, { 0x2 });
        gbc.writeMem(0xa673, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x2a99);
        EXPECT(gbc.pc(), 0xa674);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2e6), 0x2);
        EXPECT(gbc.readMem(0xa673), 0x46);
        // 46 02A4
        gbc.setState(0x428d, 0x26b9, 0x2680, 0xdbde, 0xfe4d, 0x5c64, 0x1, 0x0);
        gbc.writeMem(0x428d, { 0x46 });
        gbc.writeMem(0x5c64, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x26b9);
        EXPECT(gbc.pc(), 0x428e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 02A5
        gbc.setState(0xbcd8, 0x4018, 0x4cb0, 0xf982, 0xcfb, 0xdaeb, 0x1, 0x0);
        gbc.writeMem(0xbcd8, { 0x46 });
        gbc.writeMem(0xdaeb, { 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x4018);
        EXPECT(gbc.pc(), 0xbcd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcd8), 0x46);
        EXPECT(gbc.readMem(0xdaeb), 0x42);
        // 46 02A6
        gbc.setState(0x1a12, 0x18e5, 0x47e0, 0x858b, 0xcf81, 0xc389, 0x1, 0x1);
        gbc.writeMem(0x1a12, { 0x46 });
        gbc.writeMem(0xc389, { 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x18e5);
        EXPECT(gbc.pc(), 0x1a13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc389), 0xc3);
        // 46 02A7
        gbc.setState(0x36e5, 0xc7f6, 0x12f0, 0xd8e, 0x2902, 0x305e, 0x1, 0x0);
        gbc.writeMem(0x305e, { 0x56 });
        gbc.writeMem(0x36e5, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xc7f6);
        EXPECT(gbc.pc(), 0x36e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 02A9
        gbc.setState(0xc5ae, 0xa434, 0x2950, 0xf346, 0x2ba9, 0xa94e, 0x1, 0x0);
        gbc.writeMem(0xa94e, { 0xa5 });
        gbc.writeMem(0xc5ae, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xa434);
        EXPECT(gbc.pc(), 0xc5af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa94e), 0xa5);
        EXPECT(gbc.readMem(0xc5ae), 0x46);
        // 46 02AA
        gbc.setState(0xb47b, 0x64b0, 0x85e0, 0x2025, 0x71db, 0x1481, 0x0, 0x1);
        gbc.writeMem(0x1481, { 0xd1 });
        gbc.writeMem(0xb47b, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x64b0);
        EXPECT(gbc.pc(), 0xb47c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb47b), 0x46);
        // 46 02AB
        gbc.setState(0xa0ef, 0x5ba, 0x7c80, 0x2050, 0x2774, 0x6c87, 0x0, 0x1);
        gbc.writeMem(0x6c87, { 0xc3 });
        gbc.writeMem(0xa0ef, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x5ba);
        EXPECT(gbc.pc(), 0xa0f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0ef), 0x46);
        // 46 02AC
        gbc.setState(0x7f64, 0x9ab7, 0xa6b0, 0xd1a3, 0xebb3, 0xfd82, 0x0, 0x0);
        gbc.writeMem(0x7f64, { 0x46 });
        gbc.writeMem(0xfd82, { 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x9ab7);
        EXPECT(gbc.pc(), 0x7f65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfd82), 0xf1);
        // 46 02AD
        gbc.setState(0x5243, 0x3d71, 0x2a10, 0x79f6, 0x7264, 0xeff0, 0x1, 0x1);
        gbc.writeMem(0x5243, { 0x46 });
        gbc.writeMem(0xeff0, { 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x3d71);
        EXPECT(gbc.pc(), 0x5244);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeff0), 0xc4);
        // 46 02AE
        gbc.setState(0xc5f2, 0x4056, 0xc7a0, 0x350d, 0xb586, 0xf10, 0x1, 0x0);
        gbc.writeMem(0xf10, { 0xd9 });
        gbc.writeMem(0xc5f2, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x4056);
        EXPECT(gbc.pc(), 0xc5f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5f2), 0x46);
        // 46 02AF
        gbc.setState(0x44f7, 0x2206, 0x68e0, 0xbe33, 0x6ffa, 0x4246, 0x0, 0x1);
        gbc.writeMem(0x4246, { 0x98 });
        gbc.writeMem(0x44f7, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x2206);
        EXPECT(gbc.pc(), 0x44f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 02B0
        gbc.setState(0x14a5, 0xdf7c, 0xc2f0, 0xb6ec, 0x2d77, 0xbb9a, 0x1, 0x1);
        gbc.writeMem(0x14a5, { 0x46 });
        gbc.writeMem(0xbb9a, { 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xdf7c);
        EXPECT(gbc.pc(), 0x14a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb9a), 0x64);
        // 46 02B1
        gbc.setState(0x531c, 0x4811, 0xea30, 0xc97a, 0x6a7c, 0x5c3d, 0x0, 0x1);
        gbc.writeMem(0x531c, { 0x46 });
        gbc.writeMem(0x5c3d, { 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x4811);
        EXPECT(gbc.pc(), 0x531d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 02B2
        gbc.setState(0x6e8a, 0x5a20, 0xda0, 0xafcf, 0x7a3e, 0xdb25, 0x0, 0x0);
        gbc.writeMem(0x6e8a, { 0x46 });
        gbc.writeMem(0xdb25, { 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x5a20);
        EXPECT(gbc.pc(), 0x6e8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb25), 0x6f);
        // 46 02B3
        gbc.setState(0x341b, 0xd66b, 0x1c80, 0xc59, 0xd255, 0x52ef, 0x1, 0x1);
        gbc.writeMem(0x341b, { 0x46 });
        gbc.writeMem(0x52ef, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xd66b);
        EXPECT(gbc.pc(), 0x341c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 02B4
        gbc.setState(0xc747, 0x8716, 0xf8c0, 0xbc6a, 0x2cfe, 0xb500, 0x1, 0x1);
        gbc.writeMem(0xb500, { 0x9 });
        gbc.writeMem(0xc747, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x8716);
        EXPECT(gbc.pc(), 0xc748);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb500), 0x9);
        EXPECT(gbc.readMem(0xc747), 0x46);
        // 46 02B5
        gbc.setState(0xcd40, 0x4e95, 0xfb70, 0x49ed, 0x48cc, 0xd095, 0x1, 0x0);
        gbc.writeMem(0xcd40, { 0x46 });
        gbc.writeMem(0xd095, { 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x4e95);
        EXPECT(gbc.pc(), 0xcd41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd40), 0x46);
        EXPECT(gbc.readMem(0xd095), 0x2f);
        // 46 02B6
        gbc.setState(0x74d6, 0x96e3, 0x5d10, 0x78ee, 0xea57, 0x2b38, 0x1, 0x1);
        gbc.writeMem(0x2b38, { 0x53 });
        gbc.writeMem(0x74d6, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x96e3);
        EXPECT(gbc.pc(), 0x74d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 02B7
        gbc.setState(0xc7b0, 0xff63, 0x4c30, 0x3fa7, 0xce3d, 0x6b6e, 0x1, 0x0);
        gbc.writeMem(0x6b6e, { 0x3f });
        gbc.writeMem(0xc7b0, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xff63);
        EXPECT(gbc.pc(), 0xc7b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7b0), 0x46);
        // 46 02B8
        gbc.setState(0x48c2, 0x5b64, 0x62b0, 0x75bb, 0x904c, 0x4e3f, 0x0, 0x1);
        gbc.writeMem(0x48c2, { 0x46 });
        gbc.writeMem(0x4e3f, { 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x5b64);
        EXPECT(gbc.pc(), 0x48c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 02B9
        gbc.setState(0xda23, 0x39eb, 0xd1c0, 0x583e, 0x9074, 0xf4fd, 0x0, 0x0);
        gbc.writeMem(0xda23, { 0x46 });
        gbc.writeMem(0xf4fd, { 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x39eb);
        EXPECT(gbc.pc(), 0xda24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda23), 0x46);
        EXPECT(gbc.readMem(0xf4fd), 0xb6);
        // 46 02BB
        gbc.setState(0xdf10, 0x2388, 0xf0b0, 0xc13c, 0xddbd, 0xb920, 0x0, 0x1);
        gbc.writeMem(0xb920, { 0xd });
        gbc.writeMem(0xdf10, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x2388);
        EXPECT(gbc.pc(), 0xdf11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb920), 0xd);
        EXPECT(gbc.readMem(0xdf10), 0x46);
        // 46 02BC
        gbc.setState(0x7cb9, 0x954b, 0x9100, 0xea9a, 0x2209, 0xbd59, 0x1, 0x1);
        gbc.writeMem(0x7cb9, { 0x46 });
        gbc.writeMem(0xbd59, { 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x954b);
        EXPECT(gbc.pc(), 0x7cba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd59), 0x56);
        // 46 02BD
        gbc.setState(0x9cf0, 0xf690, 0xa9f0, 0x64e7, 0x4a00, 0x7d41, 0x0, 0x0);
        gbc.writeMem(0x7d41, { 0xdd });
        gbc.writeMem(0x9cf0, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xf690);
        EXPECT(gbc.pc(), 0x9cf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cf0), 0x46);
        // 46 02BE
        gbc.setState(0xefe2, 0x7efc, 0x240, 0x262, 0x8700, 0xa414, 0x1, 0x0);
        gbc.writeMem(0xa414, { 0x69 });
        gbc.writeMem(0xefe2, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x7efc);
        EXPECT(gbc.pc(), 0xefe3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa414), 0x69);
        EXPECT(gbc.readMem(0xefe2), 0x46);
        // 46 02BF
        gbc.setState(0x3bb3, 0x1cec, 0xb030, 0xb59c, 0x9589, 0x6be6, 0x0, 0x1);
        gbc.writeMem(0x3bb3, { 0x46 });
        gbc.writeMem(0x6be6, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x1cec);
        EXPECT(gbc.pc(), 0x3bb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 02C0
        gbc.setState(0x458f, 0x40f9, 0x4500, 0x4b44, 0xe681, 0xe3bc, 0x1, 0x1);
        gbc.writeMem(0x458f, { 0x46 });
        gbc.writeMem(0xe3bc, { 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x40f9);
        EXPECT(gbc.pc(), 0x4590);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3bc), 0x82);
        // 46 02C1
        gbc.setState(0x2141, 0x3cd0, 0xf130, 0x2e0, 0x444c, 0x5438, 0x0, 0x1);
        gbc.writeMem(0x2141, { 0x46 });
        gbc.writeMem(0x5438, { 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x3cd0);
        EXPECT(gbc.pc(), 0x2142);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 02C3
        gbc.setState(0xd042, 0xaf5a, 0xcf00, 0xc951, 0x7c39, 0xd1c9, 0x0, 0x0);
        gbc.writeMem(0xd042, { 0x46 });
        gbc.writeMem(0xd1c9, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xaf5a);
        EXPECT(gbc.pc(), 0xd043);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd042), 0x46);
        EXPECT(gbc.readMem(0xd1c9), 0x52);
        // 46 02C4
        gbc.setState(0x9cfb, 0x8206, 0x4ce0, 0xb71d, 0x100e, 0xf348, 0x1, 0x1);
        gbc.writeMem(0x9cfb, { 0x46 });
        gbc.writeMem(0xf348, { 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x8206);
        EXPECT(gbc.pc(), 0x9cfc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cfb), 0x46);
        EXPECT(gbc.readMem(0xf348), 0x28);
        // 46 02C5
        gbc.setState(0x57cc, 0x2488, 0xcca0, 0xde20, 0xa31a, 0x5533, 0x1, 0x1);
        gbc.writeMem(0x5533, { 0x1d });
        gbc.writeMem(0x57cc, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x2488);
        EXPECT(gbc.pc(), 0x57cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 02C6
        gbc.setState(0xeb2e, 0x11a0, 0xcd40, 0x724d, 0xf1d5, 0xcbfb, 0x0, 0x0);
        gbc.writeMem(0xcbfb, { 0xe5 });
        gbc.writeMem(0xeb2e, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x11a0);
        EXPECT(gbc.pc(), 0xeb2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbfb), 0xe5);
        EXPECT(gbc.readMem(0xeb2e), 0x46);
        // 46 02C7
        gbc.setState(0x84c0, 0x53b6, 0x62e0, 0x1518, 0x8443, 0x56c5, 0x1, 0x0);
        gbc.writeMem(0x56c5, { 0x2a });
        gbc.writeMem(0x84c0, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x53b6);
        EXPECT(gbc.pc(), 0x84c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84c0), 0x46);
        // 46 02C8
        gbc.setState(0xe7f7, 0x45f2, 0x5b30, 0x895c, 0xe3f2, 0xa29, 0x1, 0x0);
        gbc.writeMem(0xa29, { 0xeb });
        gbc.writeMem(0xe7f7, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x45f2);
        EXPECT(gbc.pc(), 0xe7f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7f7), 0x46);
        // 46 02C9
        gbc.setState(0xa607, 0x3b78, 0xcf00, 0xdb09, 0xe3ec, 0x9932, 0x0, 0x0);
        gbc.writeMem(0x9932, { 0x3c });
        gbc.writeMem(0xa607, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x3b78);
        EXPECT(gbc.pc(), 0xa608);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9932), 0x3c);
        EXPECT(gbc.readMem(0xa607), 0x46);
        // 46 02CA
        gbc.setState(0x3583, 0xe9de, 0x9be0, 0x5a6d, 0x7290, 0x899a, 0x1, 0x1);
        gbc.writeMem(0x3583, { 0x46 });
        gbc.writeMem(0x899a, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xe9de);
        EXPECT(gbc.pc(), 0x3584);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x899a), 0x37);
        // 46 02CB
        gbc.setState(0x4036, 0x663c, 0x1740, 0x4254, 0x5027, 0x45d, 0x1, 0x0);
        gbc.writeMem(0x45d, { 0xa5 });
        gbc.writeMem(0x4036, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x663c);
        EXPECT(gbc.pc(), 0x4037);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 02CD
        gbc.setState(0xb8ca, 0xae9a, 0x1270, 0x98e0, 0x9235, 0xe515, 0x0, 0x1);
        gbc.writeMem(0xb8ca, { 0x46 });
        gbc.writeMem(0xe515, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xae9a);
        EXPECT(gbc.pc(), 0xb8cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8ca), 0x46);
        EXPECT(gbc.readMem(0xe515), 0x19);
        // 46 02CE
        gbc.setState(0xd13, 0xb501, 0xc470, 0xcc48, 0x71fd, 0x4e1b, 0x1, 0x0);
        gbc.writeMem(0xd13, { 0x46 });
        gbc.writeMem(0x4e1b, { 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xb501);
        EXPECT(gbc.pc(), 0xd14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 02CF
        gbc.setState(0x4325, 0x7db0, 0xa950, 0x1b7, 0x32c5, 0xe05, 0x1, 0x0);
        gbc.writeMem(0xe05, { 0x8b });
        gbc.writeMem(0x4325, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x7db0);
        EXPECT(gbc.pc(), 0x4326);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 02D0
        gbc.setState(0xd349, 0x5c6b, 0xc4b0, 0xcd81, 0x4ed4, 0xab53, 0x1, 0x1);
        gbc.writeMem(0xab53, { 0xda });
        gbc.writeMem(0xd349, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x5c6b);
        EXPECT(gbc.pc(), 0xd34a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab53), 0xda);
        EXPECT(gbc.readMem(0xd349), 0x46);
        // 46 02D2
        gbc.setState(0x78d0, 0xcb00, 0x1900, 0x4d17, 0x5c14, 0xad8d, 0x1, 0x0);
        gbc.writeMem(0x78d0, { 0x46 });
        gbc.writeMem(0xad8d, { 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xcb00);
        EXPECT(gbc.pc(), 0x78d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad8d), 0x64);
        // 46 02D3
        gbc.setState(0x2209, 0xe621, 0xff10, 0x82b9, 0x8abb, 0xba50, 0x1, 0x1);
        gbc.writeMem(0x2209, { 0x46 });
        gbc.writeMem(0xba50, { 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xe621);
        EXPECT(gbc.pc(), 0x220a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba50), 0x1f);
        // 46 02D4
        gbc.setState(0x6603, 0xcfa2, 0x9960, 0xd5da, 0x7f45, 0x6f09, 0x1, 0x1);
        gbc.writeMem(0x6603, { 0x46 });
        gbc.writeMem(0x6f09, { 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xcfa2);
        EXPECT(gbc.pc(), 0x6604);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 02D5
        gbc.setState(0x7c24, 0x4f4a, 0xf750, 0x6ee9, 0x4510, 0xe957, 0x1, 0x1);
        gbc.writeMem(0x7c24, { 0x46 });
        gbc.writeMem(0xe957, { 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x4f4a);
        EXPECT(gbc.pc(), 0x7c25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe957), 0x55);
        // 46 02D6
        gbc.setState(0xa471, 0x2187, 0x6590, 0xf968, 0xabde, 0xda56, 0x0, 0x0);
        gbc.writeMem(0xa471, { 0x46 });
        gbc.writeMem(0xda56, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x2187);
        EXPECT(gbc.pc(), 0xa472);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa471), 0x46);
        EXPECT(gbc.readMem(0xda56), 0xaa);
        // 46 02D7
        gbc.setState(0xde48, 0xa5bf, 0x130, 0xfb86, 0x2c8b, 0x123d, 0x1, 0x1);
        gbc.writeMem(0x123d, { 0x8d });
        gbc.writeMem(0xde48, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xa5bf);
        EXPECT(gbc.pc(), 0xde49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde48), 0x46);
        // 46 02D8
        gbc.setState(0x9f36, 0x2352, 0xdf00, 0x3772, 0xb0d3, 0xb869, 0x1, 0x1);
        gbc.writeMem(0x9f36, { 0x46 });
        gbc.writeMem(0xb869, { 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x2352);
        EXPECT(gbc.pc(), 0x9f37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f36), 0x46);
        EXPECT(gbc.readMem(0xb869), 0x50);
        // 46 02D9
        gbc.setState(0x468b, 0x3a80, 0x9a70, 0xa9ee, 0xe8e6, 0x2d23, 0x1, 0x1);
        gbc.writeMem(0x2d23, { 0xfb });
        gbc.writeMem(0x468b, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x3a80);
        EXPECT(gbc.pc(), 0x468c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 02DA
        gbc.setState(0x96b4, 0x5cab, 0xde30, 0x47d0, 0x3d5d, 0xfb8b, 0x0, 0x0);
        gbc.writeMem(0x96b4, { 0x46 });
        gbc.writeMem(0xfb8b, { 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x5cab);
        EXPECT(gbc.pc(), 0x96b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96b4), 0x46);
        EXPECT(gbc.readMem(0xfb8b), 0x72);
        // 46 02DB
        gbc.setState(0x7a3d, 0x336, 0x9660, 0x3ac4, 0xac03, 0xd7ec, 0x0, 0x1);
        gbc.writeMem(0x7a3d, { 0x46 });
        gbc.writeMem(0xd7ec, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x336);
        EXPECT(gbc.pc(), 0x7a3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7ec), 0xf0);
        // 46 02DC
        gbc.setState(0x18d1, 0x5a80, 0xcc0, 0x36ae, 0xc63, 0x33b8, 0x0, 0x1);
        gbc.writeMem(0x18d1, { 0x46 });
        gbc.writeMem(0x33b8, { 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x5a80);
        EXPECT(gbc.pc(), 0x18d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 02DD
        gbc.setState(0x4e49, 0x19b4, 0xc8a0, 0x2b46, 0x140b, 0x8f73, 0x0, 0x1);
        gbc.writeMem(0x4e49, { 0x46 });
        gbc.writeMem(0x8f73, { 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x19b4);
        EXPECT(gbc.pc(), 0x4e4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f73), 0xdd);
        // 46 02DE
        gbc.setState(0x199b, 0xf54e, 0x8170, 0x3ca, 0x19a8, 0x8a68, 0x0, 0x1);
        gbc.writeMem(0x199b, { 0x46 });
        gbc.writeMem(0x8a68, { 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xf54e);
        EXPECT(gbc.pc(), 0x199c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a68), 0xf2);
        // 46 02DF
        gbc.setState(0x91ec, 0xbfde, 0x85c0, 0xcffe, 0xd64f, 0x68db, 0x1, 0x0);
        gbc.writeMem(0x68db, { 0x1 });
        gbc.writeMem(0x91ec, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xbfde);
        EXPECT(gbc.pc(), 0x91ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91ec), 0x46);
        // 46 02E0
        gbc.setState(0xd63f, 0x8569, 0xc030, 0x6add, 0xfc68, 0x1f26, 0x1, 0x0);
        gbc.writeMem(0x1f26, { 0x23 });
        gbc.writeMem(0xd63f, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x8569);
        EXPECT(gbc.pc(), 0xd640);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd63f), 0x46);
        // 46 02E1
        gbc.setState(0xea13, 0x1b01, 0x6590, 0x731a, 0x1c32, 0x4c90, 0x1, 0x0);
        gbc.writeMem(0x4c90, { 0x8c });
        gbc.writeMem(0xea13, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x1b01);
        EXPECT(gbc.pc(), 0xea14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea13), 0x46);
        // 46 02E2
        gbc.setState(0x4b5d, 0x7c62, 0x4500, 0xa597, 0x8dc2, 0xbfb4, 0x0, 0x0);
        gbc.writeMem(0x4b5d, { 0x46 });
        gbc.writeMem(0xbfb4, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x7c62);
        EXPECT(gbc.pc(), 0x4b5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfb4), 0x94);
        // 46 02E3
        gbc.setState(0x29f6, 0xd59c, 0x6830, 0xf389, 0x27c8, 0x880c, 0x1, 0x1);
        gbc.writeMem(0x29f6, { 0x46 });
        gbc.writeMem(0x880c, { 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xd59c);
        EXPECT(gbc.pc(), 0x29f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x880c), 0x82);
        // 46 02E4
        gbc.setState(0xe30, 0xf580, 0x3050, 0x53cc, 0x4c1b, 0x8cca, 0x0, 0x1);
        gbc.writeMem(0xe30, { 0x46 });
        gbc.writeMem(0x8cca, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xf580);
        EXPECT(gbc.pc(), 0xe31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cca), 0xdf);
        // 46 02E5
        gbc.setState(0xcac, 0xf186, 0xfdd0, 0xcd60, 0x57de, 0x32b6, 0x1, 0x0);
        gbc.writeMem(0xcac, { 0x46 });
        gbc.writeMem(0x32b6, { 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xf186);
        EXPECT(gbc.pc(), 0xcad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 02E6
        gbc.setState(0xeb26, 0x9301, 0x33c0, 0x3d31, 0xdda5, 0xee43, 0x0, 0x0);
        gbc.writeMem(0xeb26, { 0x46 });
        gbc.writeMem(0xee43, { 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x9301);
        EXPECT(gbc.pc(), 0xeb27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb26), 0x46);
        EXPECT(gbc.readMem(0xee43), 0xc6);
        // 46 02E7
        gbc.setState(0xaf53, 0xc799, 0x5ff0, 0xd708, 0xa39d, 0xc4f8, 0x0, 0x1);
        gbc.writeMem(0xaf53, { 0x46 });
        gbc.writeMem(0xc4f8, { 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xc799);
        EXPECT(gbc.pc(), 0xaf54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf53), 0x46);
        EXPECT(gbc.readMem(0xc4f8), 0x50);
        // 46 02E8
        gbc.setState(0x454c, 0xd5de, 0xc140, 0xdd41, 0xf4ef, 0xfcfd, 0x1, 0x1);
        gbc.writeMem(0x454c, { 0x46 });
        gbc.writeMem(0xfcfd, { 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xd5de);
        EXPECT(gbc.pc(), 0x454d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfcfd), 0xf6);
        // 46 02E9
        gbc.setState(0x1d47, 0xefc1, 0x7b10, 0x67cd, 0x2b7b, 0x5d72, 0x1, 0x0);
        gbc.writeMem(0x1d47, { 0x46 });
        gbc.writeMem(0x5d72, { 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xefc1);
        EXPECT(gbc.pc(), 0x1d48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 02EA
        gbc.setState(0x5585, 0x4b89, 0x57b0, 0x9f9c, 0x5a1f, 0x8c5e, 0x1, 0x1);
        gbc.writeMem(0x5585, { 0x46 });
        gbc.writeMem(0x8c5e, { 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x4b89);
        EXPECT(gbc.pc(), 0x5586);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c5e), 0x72);
        // 46 02EB
        gbc.setState(0x6171, 0xff01, 0xeb10, 0xe7c9, 0xfcf, 0xd125, 0x0, 0x0);
        gbc.writeMem(0x6171, { 0x46 });
        gbc.writeMem(0xd125, { 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xff01);
        EXPECT(gbc.pc(), 0x6172);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd125), 0x9d);
        // 46 02EC
        gbc.setState(0x708e, 0xa9f, 0x84e0, 0x3517, 0xcd6c, 0xfcec, 0x0, 0x1);
        gbc.writeMem(0x708e, { 0x46 });
        gbc.writeMem(0xfcec, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xa9f);
        EXPECT(gbc.pc(), 0x708f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfcec), 0x57);
        // 46 02EE
        gbc.setState(0xc74c, 0x741e, 0x2900, 0x5984, 0x1066, 0xb7ce, 0x0, 0x0);
        gbc.writeMem(0xb7ce, { 0x53 });
        gbc.writeMem(0xc74c, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x741e);
        EXPECT(gbc.pc(), 0xc74d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7ce), 0x53);
        EXPECT(gbc.readMem(0xc74c), 0x46);
        // 46 02EF
        gbc.setState(0xb8f8, 0x60ae, 0x5410, 0x5757, 0xd20d, 0x56f1, 0x0, 0x0);
        gbc.writeMem(0x56f1, { 0xab });
        gbc.writeMem(0xb8f8, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x60ae);
        EXPECT(gbc.pc(), 0xb8f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8f8), 0x46);
        // 46 02F0
        gbc.setState(0x812a, 0x7efe, 0x2140, 0x2c49, 0xc82c, 0xe4a7, 0x0, 0x0);
        gbc.writeMem(0x812a, { 0x46 });
        gbc.writeMem(0xe4a7, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x7efe);
        EXPECT(gbc.pc(), 0x812b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x812a), 0x46);
        EXPECT(gbc.readMem(0xe4a7), 0xd);
        // 46 02F1
        gbc.setState(0x17f4, 0x7586, 0xac0, 0xa186, 0xdf3c, 0xb60e, 0x0, 0x1);
        gbc.writeMem(0x17f4, { 0x46 });
        gbc.writeMem(0xb60e, { 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x7586);
        EXPECT(gbc.pc(), 0x17f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb60e), 0xac);
        // 46 02F2
        gbc.setState(0xce96, 0xce7d, 0xf1f0, 0xadb9, 0x9fc, 0x31b, 0x1, 0x0);
        gbc.writeMem(0x31b, { 0xa9 });
        gbc.writeMem(0xce96, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xce7d);
        EXPECT(gbc.pc(), 0xce97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce96), 0x46);
        // 46 02F3
        gbc.setState(0xadc5, 0x362c, 0x93b0, 0x3890, 0x8ca3, 0x913a, 0x1, 0x1);
        gbc.writeMem(0x913a, { 0xf1 });
        gbc.writeMem(0xadc5, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x362c);
        EXPECT(gbc.pc(), 0xadc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x913a), 0xf1);
        EXPECT(gbc.readMem(0xadc5), 0x46);
        // 46 02F4
        gbc.setState(0x7822, 0x1848, 0x6100, 0x95d7, 0x9a23, 0xe68a, 0x0, 0x1);
        gbc.writeMem(0x7822, { 0x46 });
        gbc.writeMem(0xe68a, { 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x1848);
        EXPECT(gbc.pc(), 0x7823);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe68a), 0xda);
        // 46 02F5
        gbc.setState(0x817e, 0x258f, 0xee00, 0x3319, 0x2353, 0x51eb, 0x1, 0x0);
        gbc.writeMem(0x51eb, { 0xa4 });
        gbc.writeMem(0x817e, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x258f);
        EXPECT(gbc.pc(), 0x817f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x817e), 0x46);
        // 46 02F6
        gbc.setState(0xd60c, 0x56f6, 0xfde0, 0x5d8c, 0xde7e, 0x9013, 0x0, 0x1);
        gbc.writeMem(0x9013, { 0x1f });
        gbc.writeMem(0xd60c, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x56f6);
        EXPECT(gbc.pc(), 0xd60d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9013), 0x1f);
        EXPECT(gbc.readMem(0xd60c), 0x46);
        // 46 02F7
        gbc.setState(0xc44b, 0xa229, 0xb720, 0xf7d0, 0x4df8, 0xd7f3, 0x0, 0x1);
        gbc.writeMem(0xc44b, { 0x46 });
        gbc.writeMem(0xd7f3, { 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xa229);
        EXPECT(gbc.pc(), 0xc44c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc44b), 0x46);
        EXPECT(gbc.readMem(0xd7f3), 0x26);
        // 46 02F8
        gbc.setState(0xb97a, 0xad80, 0x3c0, 0xcb9a, 0x5f76, 0x46b2, 0x0, 0x0);
        gbc.writeMem(0x46b2, { 0x42 });
        gbc.writeMem(0xb97a, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xad80);
        EXPECT(gbc.pc(), 0xb97b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb97a), 0x46);
        // 46 02F9
        gbc.setState(0x4ef4, 0xf33a, 0x3690, 0x444e, 0x3cee, 0x2952, 0x1, 0x0);
        gbc.writeMem(0x2952, { 0xe7 });
        gbc.writeMem(0x4ef4, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xf33a);
        EXPECT(gbc.pc(), 0x4ef5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 02FB
        gbc.setState(0x9181, 0xa275, 0xab60, 0xbf0a, 0x3126, 0x8a47, 0x1, 0x1);
        gbc.writeMem(0x8a47, { 0xaf });
        gbc.writeMem(0x9181, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xa275);
        EXPECT(gbc.pc(), 0x9182);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a47), 0xaf);
        EXPECT(gbc.readMem(0x9181), 0x46);
        // 46 02FC
        gbc.setState(0xefc2, 0x75cf, 0xbb0, 0x9eab, 0x240d, 0x142a, 0x1, 0x1);
        gbc.writeMem(0x142a, { 0x1a });
        gbc.writeMem(0xefc2, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x75cf);
        EXPECT(gbc.pc(), 0xefc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefc2), 0x46);
        // 46 02FD
        gbc.setState(0x8800, 0xe6b3, 0xff40, 0x2666, 0xcfa5, 0xbcfb, 0x0, 0x0);
        gbc.writeMem(0x8800, { 0x46 });
        gbc.writeMem(0xbcfb, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xe6b3);
        EXPECT(gbc.pc(), 0x8801);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8800), 0x46);
        EXPECT(gbc.readMem(0xbcfb), 0x9c);
        // 46 02FE
        gbc.setState(0x8c67, 0x92ba, 0xb20, 0x9cfb, 0x81a0, 0xae3f, 0x0, 0x0);
        gbc.writeMem(0x8c67, { 0x46 });
        gbc.writeMem(0xae3f, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x92ba);
        EXPECT(gbc.pc(), 0x8c68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c67), 0x46);
        EXPECT(gbc.readMem(0xae3f), 0x5e);
        // 46 02FF
        gbc.setState(0x6da1, 0xde04, 0xf4c0, 0x4a48, 0x5212, 0x122c, 0x0, 0x0);
        gbc.writeMem(0x122c, { 0x7a });
        gbc.writeMem(0x6da1, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xde04);
        EXPECT(gbc.pc(), 0x6da2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 0300
        gbc.setState(0x47dd, 0xefe6, 0xf3f0, 0xd954, 0x7438, 0x3a16, 0x0, 0x1);
        gbc.writeMem(0x3a16, { 0x6b });
        gbc.writeMem(0x47dd, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xefe6);
        EXPECT(gbc.pc(), 0x47de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 0301
        gbc.setState(0x932b, 0x751e, 0x4040, 0x2848, 0xe54c, 0xca47, 0x0, 0x1);
        gbc.writeMem(0x932b, { 0x46 });
        gbc.writeMem(0xca47, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x751e);
        EXPECT(gbc.pc(), 0x932c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x932b), 0x46);
        EXPECT(gbc.readMem(0xca47), 0x4c);
        // 46 0302
        gbc.setState(0x5bb5, 0x8764, 0xaff0, 0x4881, 0x9c8, 0x7fe0, 0x0, 0x1);
        gbc.writeMem(0x5bb5, { 0x46 });
        gbc.writeMem(0x7fe0, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x8764);
        EXPECT(gbc.pc(), 0x5bb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 0303
        gbc.setState(0x5f8d, 0x89e0, 0xca90, 0xfb2e, 0xb510, 0x7487, 0x0, 0x1);
        gbc.writeMem(0x5f8d, { 0x46 });
        gbc.writeMem(0x7487, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x89e0);
        EXPECT(gbc.pc(), 0x5f8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 0305
        gbc.setState(0x907e, 0x4de6, 0xcc10, 0xa40f, 0xa7ca, 0x6783, 0x1, 0x0);
        gbc.writeMem(0x6783, { 0x5d });
        gbc.writeMem(0x907e, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x4de6);
        EXPECT(gbc.pc(), 0x907f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x907e), 0x46);
        // 46 0306
        gbc.setState(0xca79, 0x7ebf, 0xd4a0, 0x52c2, 0x70fb, 0x73ca, 0x1, 0x1);
        gbc.writeMem(0x73ca, { 0xb6 });
        gbc.writeMem(0xca79, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x7ebf);
        EXPECT(gbc.pc(), 0xca7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca79), 0x46);
        // 46 0307
        gbc.setState(0x5534, 0xb71, 0x4060, 0x9ee, 0x7252, 0xcea4, 0x0, 0x1);
        gbc.writeMem(0x5534, { 0x46 });
        gbc.writeMem(0xcea4, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xb71);
        EXPECT(gbc.pc(), 0x5535);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcea4), 0x9);
        // 46 0308
        gbc.setState(0xc7eb, 0x8d86, 0xac80, 0xfa4e, 0xfa48, 0x8362, 0x0, 0x1);
        gbc.writeMem(0x8362, { 0x7e });
        gbc.writeMem(0xc7eb, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x8d86);
        EXPECT(gbc.pc(), 0xc7ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8362), 0x7e);
        EXPECT(gbc.readMem(0xc7eb), 0x46);
        // 46 0309
        gbc.setState(0x980, 0x374b, 0x3e20, 0x758b, 0x399c, 0x9e04, 0x1, 0x0);
        gbc.writeMem(0x980, { 0x46 });
        gbc.writeMem(0x9e04, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x374b);
        EXPECT(gbc.pc(), 0x981);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e04), 0x9c);
        // 46 030A
        gbc.setState(0x2180, 0xe0c, 0xa0e0, 0x5b9, 0xa5ab, 0xbff, 0x0, 0x0);
        gbc.writeMem(0xbff, { 0xc3 });
        gbc.writeMem(0x2180, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xe0c);
        EXPECT(gbc.pc(), 0x2181);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 030B
        gbc.setState(0xec36, 0x718f, 0x8c40, 0x580d, 0x1fce, 0xc98c, 0x0, 0x1);
        gbc.writeMem(0xc98c, { 0xa3 });
        gbc.writeMem(0xec36, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x718f);
        EXPECT(gbc.pc(), 0xec37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc98c), 0xa3);
        EXPECT(gbc.readMem(0xec36), 0x46);
        // 46 030C
        gbc.setState(0x1606, 0x8bf7, 0x2b40, 0xde95, 0x156c, 0xc730, 0x0, 0x0);
        gbc.writeMem(0x1606, { 0x46 });
        gbc.writeMem(0xc730, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x8bf7);
        EXPECT(gbc.pc(), 0x1607);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc730), 0x30);
        // 46 030D
        gbc.setState(0x748c, 0x820b, 0xbeb0, 0xd10f, 0xb731, 0xb024, 0x0, 0x0);
        gbc.writeMem(0x748c, { 0x46 });
        gbc.writeMem(0xb024, { 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x820b);
        EXPECT(gbc.pc(), 0x748d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb024), 0x6c);
        // 46 030E
        gbc.setState(0xb116, 0x5297, 0xf960, 0xa580, 0xb5fb, 0x7f13, 0x1, 0x0);
        gbc.writeMem(0x7f13, { 0xf7 });
        gbc.writeMem(0xb116, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x5297);
        EXPECT(gbc.pc(), 0xb117);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb116), 0x46);
        // 46 030F
        gbc.setState(0x68db, 0x82aa, 0x3d50, 0x33f4, 0xda89, 0xe2ca, 0x1, 0x1);
        gbc.writeMem(0x68db, { 0x46 });
        gbc.writeMem(0xe2ca, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x82aa);
        EXPECT(gbc.pc(), 0x68dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2ca), 0xc7);
        // 46 0310
        gbc.setState(0xc806, 0x5cb1, 0x5620, 0xe64a, 0xa5f3, 0xa1c5, 0x0, 0x0);
        gbc.writeMem(0xa1c5, { 0x91 });
        gbc.writeMem(0xc806, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x5cb1);
        EXPECT(gbc.pc(), 0xc807);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1c5), 0x91);
        EXPECT(gbc.readMem(0xc806), 0x46);
        // 46 0311
        gbc.setState(0xc576, 0xc3b7, 0x9670, 0xc612, 0xa323, 0x525, 0x1, 0x0);
        gbc.writeMem(0x525, { 0x5a });
        gbc.writeMem(0xc576, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xc3b7);
        EXPECT(gbc.pc(), 0xc577);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc576), 0x46);
        // 46 0312
        gbc.setState(0x348b, 0xe6f9, 0x7c80, 0xed44, 0x833e, 0xb5ed, 0x1, 0x0);
        gbc.writeMem(0x348b, { 0x46 });
        gbc.writeMem(0xb5ed, { 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xe6f9);
        EXPECT(gbc.pc(), 0x348c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5ed), 0xc2);
        // 46 0313
        gbc.setState(0x1761, 0x3337, 0xd2b0, 0xc3e7, 0xad5d, 0x9425, 0x0, 0x1);
        gbc.writeMem(0x1761, { 0x46 });
        gbc.writeMem(0x9425, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x3337);
        EXPECT(gbc.pc(), 0x1762);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9425), 0x84);
        // 46 0314
        gbc.setState(0x1577, 0xd934, 0xdd30, 0x72f, 0x3411, 0x44cb, 0x1, 0x1);
        gbc.writeMem(0x1577, { 0x46 });
        gbc.writeMem(0x44cb, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xd934);
        EXPECT(gbc.pc(), 0x1578);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 0315
        gbc.setState(0xdb61, 0x48bc, 0x43b0, 0xb4cf, 0xd8cb, 0xec28, 0x0, 0x0);
        gbc.writeMem(0xdb61, { 0x46 });
        gbc.writeMem(0xec28, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x48bc);
        EXPECT(gbc.pc(), 0xdb62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb61), 0x46);
        EXPECT(gbc.readMem(0xec28), 0x66);
        // 46 0316
        gbc.setState(0xc581, 0x6adf, 0x5fc0, 0xd72f, 0x5ace, 0x25dc, 0x0, 0x1);
        gbc.writeMem(0x25dc, { 0x4e });
        gbc.writeMem(0xc581, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x6adf);
        EXPECT(gbc.pc(), 0xc582);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc581), 0x46);
        // 46 0317
        gbc.setState(0x4055, 0xaaf6, 0x2640, 0xff4b, 0xd63c, 0x6091, 0x0, 0x0);
        gbc.writeMem(0x4055, { 0x46 });
        gbc.writeMem(0x6091, { 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xaaf6);
        EXPECT(gbc.pc(), 0x4056);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 0318
        gbc.setState(0x492e, 0xce03, 0x32c0, 0xd79e, 0xe350, 0xc128, 0x0, 0x0);
        gbc.writeMem(0x492e, { 0x46 });
        gbc.writeMem(0xc128, { 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xce03);
        EXPECT(gbc.pc(), 0x492f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc128), 0xa0);
        // 46 0319
        gbc.setState(0x1a6f, 0x7c60, 0xb7f0, 0x811f, 0xed1d, 0xdb9, 0x1, 0x1);
        gbc.writeMem(0xdb9, { 0xca });
        gbc.writeMem(0x1a6f, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x7c60);
        EXPECT(gbc.pc(), 0x1a70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 031A
        gbc.setState(0x9d87, 0x124, 0x940, 0x22cb, 0xddb1, 0x48e9, 0x0, 0x1);
        gbc.writeMem(0x48e9, { 0x2c });
        gbc.writeMem(0x9d87, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x124);
        EXPECT(gbc.pc(), 0x9d88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d87), 0x46);
        // 46 031B
        gbc.setState(0x76de, 0x9281, 0x4210, 0x6469, 0x6f7f, 0x8335, 0x1, 0x1);
        gbc.writeMem(0x76de, { 0x46 });
        gbc.writeMem(0x8335, { 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x9281);
        EXPECT(gbc.pc(), 0x76df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8335), 0x42);
        // 46 031C
        gbc.setState(0xe4f, 0x871e, 0xf5b0, 0x9d2c, 0x3a89, 0x140a, 0x0, 0x1);
        gbc.writeMem(0xe4f, { 0x46 });
        gbc.writeMem(0x140a, { 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x871e);
        EXPECT(gbc.pc(), 0xe50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 031D
        gbc.setState(0xa207, 0x4b25, 0xe7a0, 0x212f, 0x2b5b, 0x72cc, 0x1, 0x1);
        gbc.writeMem(0x72cc, { 0xad });
        gbc.writeMem(0xa207, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x4b25);
        EXPECT(gbc.pc(), 0xa208);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa207), 0x46);
        // 46 031E
        gbc.setState(0xbf18, 0x2c72, 0x74a0, 0x8bb2, 0x3fbf, 0x1cc3, 0x0, 0x1);
        gbc.writeMem(0x1cc3, { 0xe3 });
        gbc.writeMem(0xbf18, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x2c72);
        EXPECT(gbc.pc(), 0xbf19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf18), 0x46);
        // 46 031F
        gbc.setState(0x3da, 0xc02, 0xd600, 0x7130, 0x8871, 0xd455, 0x1, 0x1);
        gbc.writeMem(0x3da, { 0x46 });
        gbc.writeMem(0xd455, { 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xc02);
        EXPECT(gbc.pc(), 0x3db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd455), 0x43);
        // 46 0320
        gbc.setState(0x6c33, 0xc23, 0xf410, 0x5597, 0xaa5f, 0xc34e, 0x1, 0x1);
        gbc.writeMem(0x6c33, { 0x46 });
        gbc.writeMem(0xc34e, { 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xc23);
        EXPECT(gbc.pc(), 0x6c34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc34e), 0xdc);
        // 46 0321
        gbc.setState(0x20ae, 0xd20e, 0xfd0, 0xbaff, 0xbb72, 0xbcdd, 0x1, 0x0);
        gbc.writeMem(0x20ae, { 0x46 });
        gbc.writeMem(0xbcdd, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xd20e);
        EXPECT(gbc.pc(), 0x20af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcdd), 0xa4);
        // 46 0322
        gbc.setState(0xb80e, 0xb36b, 0x9e30, 0x680a, 0x557c, 0xc5fc, 0x1, 0x1);
        gbc.writeMem(0xb80e, { 0x46 });
        gbc.writeMem(0xc5fc, { 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xb36b);
        EXPECT(gbc.pc(), 0xb80f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb80e), 0x46);
        EXPECT(gbc.readMem(0xc5fc), 0x82);
        // 46 0323
        gbc.setState(0xbf4c, 0x27f5, 0xa080, 0xfa56, 0x80ef, 0x8678, 0x0, 0x1);
        gbc.writeMem(0x8678, { 0xf0 });
        gbc.writeMem(0xbf4c, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x27f5);
        EXPECT(gbc.pc(), 0xbf4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8678), 0xf0);
        EXPECT(gbc.readMem(0xbf4c), 0x46);
        // 46 0324
        gbc.setState(0x4163, 0xf1f6, 0x35f0, 0x39da, 0x8731, 0x25fd, 0x0, 0x0);
        gbc.writeMem(0x25fd, { 0xe7 });
        gbc.writeMem(0x4163, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xf1f6);
        EXPECT(gbc.pc(), 0x4164);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 0325
        gbc.setState(0xb3ac, 0x8de3, 0xd8a0, 0xdc8f, 0xed93, 0xadac, 0x1, 0x1);
        gbc.writeMem(0xadac, { 0x1e });
        gbc.writeMem(0xb3ac, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x8de3);
        EXPECT(gbc.pc(), 0xb3ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadac), 0x1e);
        EXPECT(gbc.readMem(0xb3ac), 0x46);
        // 46 0326
        gbc.setState(0xc1bd, 0x9300, 0x1360, 0xd054, 0xe1cb, 0xfbbd, 0x1, 0x1);
        gbc.writeMem(0xc1bd, { 0x46 });
        gbc.writeMem(0xfbbd, { 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x9300);
        EXPECT(gbc.pc(), 0xc1be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1bd), 0x46);
        EXPECT(gbc.readMem(0xfbbd), 0x55);
        // 46 0327
        gbc.setState(0xda12, 0x8a6f, 0xf0d0, 0x69dc, 0x69f0, 0x1e3, 0x0, 0x0);
        gbc.writeMem(0x1e3, { 0x53 });
        gbc.writeMem(0xda12, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x8a6f);
        EXPECT(gbc.pc(), 0xda13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda12), 0x46);
        // 46 0328
        gbc.setState(0x937d, 0x5c63, 0xb000, 0x2893, 0x8802, 0x7714, 0x0, 0x1);
        gbc.writeMem(0x7714, { 0xa5 });
        gbc.writeMem(0x937d, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x5c63);
        EXPECT(gbc.pc(), 0x937e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x937d), 0x46);
        // 46 0329
        gbc.setState(0x4442, 0x3a36, 0x28f0, 0x783f, 0x7699, 0xa7e0, 0x0, 0x0);
        gbc.writeMem(0x4442, { 0x46 });
        gbc.writeMem(0xa7e0, { 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x3a36);
        EXPECT(gbc.pc(), 0x4443);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7e0), 0xce);
        // 46 032A
        gbc.setState(0xa36c, 0x31ea, 0x2540, 0x4530, 0x413f, 0x5b99, 0x0, 0x0);
        gbc.writeMem(0x5b99, { 0xeb });
        gbc.writeMem(0xa36c, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x31ea);
        EXPECT(gbc.pc(), 0xa36d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa36c), 0x46);
        // 46 032B
        gbc.setState(0x5f12, 0xa985, 0x76f0, 0xfd08, 0x7359, 0xe3d0, 0x1, 0x1);
        gbc.writeMem(0x5f12, { 0x46 });
        gbc.writeMem(0xe3d0, { 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xa985);
        EXPECT(gbc.pc(), 0x5f13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3d0), 0x85);
        // 46 032C
        gbc.setState(0x1cd4, 0xf829, 0xed00, 0x197c, 0x4ab2, 0xf309, 0x0, 0x1);
        gbc.writeMem(0x1cd4, { 0x46 });
        gbc.writeMem(0xf309, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xf829);
        EXPECT(gbc.pc(), 0x1cd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf309), 0x9c);
        // 46 032D
        gbc.setState(0x11fb, 0xc9f, 0x26c0, 0x243f, 0x999d, 0x5483, 0x1, 0x0);
        gbc.writeMem(0x11fb, { 0x46 });
        gbc.writeMem(0x5483, { 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xc9f);
        EXPECT(gbc.pc(), 0x11fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 032E
        gbc.setState(0x55db, 0x7d1c, 0x5e10, 0xcb13, 0xb4a0, 0xb077, 0x0, 0x1);
        gbc.writeMem(0x55db, { 0x46 });
        gbc.writeMem(0xb077, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x7d1c);
        EXPECT(gbc.pc(), 0x55dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb077), 0xbb);
        // 46 032F
        gbc.setState(0xd260, 0x95b0, 0x9d90, 0xb809, 0x87fd, 0x53a2, 0x0, 0x1);
        gbc.writeMem(0x53a2, { 0x69 });
        gbc.writeMem(0xd260, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x95b0);
        EXPECT(gbc.pc(), 0xd261);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd260), 0x46);
        // 46 0330
        gbc.setState(0x9c56, 0x754f, 0xfdb0, 0x1745, 0xdd37, 0xbe2e, 0x1, 0x0);
        gbc.writeMem(0x9c56, { 0x46 });
        gbc.writeMem(0xbe2e, { 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x754f);
        EXPECT(gbc.pc(), 0x9c57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c56), 0x46);
        EXPECT(gbc.readMem(0xbe2e), 0xef);
        // 46 0331
        gbc.setState(0x4d88, 0x5a77, 0x20, 0xe149, 0x6b83, 0x72cc, 0x1, 0x0);
        gbc.writeMem(0x4d88, { 0x46 });
        gbc.writeMem(0x72cc, { 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x5a77);
        EXPECT(gbc.pc(), 0x4d89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 0332
        gbc.setState(0x916e, 0x4116, 0x2cc0, 0x8b4f, 0xf30a, 0xb968, 0x1, 0x1);
        gbc.writeMem(0x916e, { 0x46 });
        gbc.writeMem(0xb968, { 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x4116);
        EXPECT(gbc.pc(), 0x916f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x916e), 0x46);
        EXPECT(gbc.readMem(0xb968), 0x5d);
        // 46 0333
        gbc.setState(0xfc1, 0xfb9, 0x82d0, 0x8f44, 0xbd57, 0x8225, 0x1, 0x1);
        gbc.writeMem(0xfc1, { 0x46 });
        gbc.writeMem(0x8225, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xfb9);
        EXPECT(gbc.pc(), 0xfc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8225), 0x9);
        // 46 0334
        gbc.setState(0x3445, 0x48e4, 0x9c80, 0x9e3d, 0xdc69, 0x7ab, 0x0, 0x1);
        gbc.writeMem(0x7ab, { 0x57 });
        gbc.writeMem(0x3445, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x48e4);
        EXPECT(gbc.pc(), 0x3446);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 0335
        gbc.setState(0xd407, 0x5616, 0x2c50, 0x1fc, 0x9d29, 0x1aa4, 0x0, 0x1);
        gbc.writeMem(0x1aa4, { 0x55 });
        gbc.writeMem(0xd407, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x5616);
        EXPECT(gbc.pc(), 0xd408);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd407), 0x46);
        // 46 0336
        gbc.setState(0x23cd, 0x3cb5, 0xd6f0, 0x19e8, 0x6110, 0x423d, 0x1, 0x1);
        gbc.writeMem(0x23cd, { 0x46 });
        gbc.writeMem(0x423d, { 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x3cb5);
        EXPECT(gbc.pc(), 0x23ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 0337
        gbc.setState(0xc935, 0xbfad, 0xf9b0, 0x41f, 0xf55d, 0xc374, 0x1, 0x0);
        gbc.writeMem(0xc374, { 0x70 });
        gbc.writeMem(0xc935, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xbfad);
        EXPECT(gbc.pc(), 0xc936);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc374), 0x70);
        EXPECT(gbc.readMem(0xc935), 0x46);
        // 46 0338
        gbc.setState(0xe3cd, 0x6a4d, 0x4a70, 0x667d, 0xedd1, 0xafe, 0x0, 0x0);
        gbc.writeMem(0xafe, { 0xf6 });
        gbc.writeMem(0xe3cd, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x6a4d);
        EXPECT(gbc.pc(), 0xe3ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3cd), 0x46);
        // 46 0339
        gbc.setState(0xe329, 0x5281, 0x6fe0, 0xa519, 0xfba8, 0x86ce, 0x0, 0x1);
        gbc.writeMem(0x86ce, { 0xc });
        gbc.writeMem(0xe329, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x5281);
        EXPECT(gbc.pc(), 0xe32a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86ce), 0xc);
        EXPECT(gbc.readMem(0xe329), 0x46);
        // 46 033B
        gbc.setState(0xd578, 0x8e98, 0x7ae0, 0x4e40, 0xd498, 0xc9bf, 0x1, 0x0);
        gbc.writeMem(0xc9bf, { 0xdc });
        gbc.writeMem(0xd578, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x8e98);
        EXPECT(gbc.pc(), 0xd579);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9bf), 0xdc);
        EXPECT(gbc.readMem(0xd578), 0x46);
        // 46 033C
        gbc.setState(0x6ff2, 0x4ac2, 0xc30, 0xeae2, 0x75a4, 0x51d, 0x1, 0x0);
        gbc.writeMem(0x51d, { 0xb8 });
        gbc.writeMem(0x6ff2, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x4ac2);
        EXPECT(gbc.pc(), 0x6ff3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 033D
        gbc.setState(0xbc01, 0xcf73, 0x8f10, 0x8105, 0xc4e3, 0x4bda, 0x1, 0x1);
        gbc.writeMem(0x4bda, { 0xb7 });
        gbc.writeMem(0xbc01, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xcf73);
        EXPECT(gbc.pc(), 0xbc02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc01), 0x46);
        // 46 033E
        gbc.setState(0x3f9f, 0x1b6e, 0x4640, 0xc9df, 0x40e5, 0x2a0d, 0x1, 0x1);
        gbc.writeMem(0x2a0d, { 0xdc });
        gbc.writeMem(0x3f9f, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x1b6e);
        EXPECT(gbc.pc(), 0x3fa0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 033F
        gbc.setState(0xe275, 0xc00a, 0xee00, 0xfedf, 0x2954, 0xb59b, 0x1, 0x0);
        gbc.writeMem(0xb59b, { 0x59 });
        gbc.writeMem(0xe275, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xc00a);
        EXPECT(gbc.pc(), 0xe276);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb59b), 0x59);
        EXPECT(gbc.readMem(0xe275), 0x46);
        // 46 0340
        gbc.setState(0x5cef, 0x9a96, 0x7450, 0xf0e3, 0x7306, 0xfa7, 0x0, 0x1);
        gbc.writeMem(0xfa7, { 0x55 });
        gbc.writeMem(0x5cef, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x9a96);
        EXPECT(gbc.pc(), 0x5cf0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 0341
        gbc.setState(0x5af1, 0x98c1, 0x7e40, 0x2a1, 0xb89c, 0xd53b, 0x0, 0x1);
        gbc.writeMem(0x5af1, { 0x46 });
        gbc.writeMem(0xd53b, { 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x98c1);
        EXPECT(gbc.pc(), 0x5af2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd53b), 0x3e);
        // 46 0342
        gbc.setState(0xd0bb, 0x553c, 0xf690, 0x3bfe, 0xd7a2, 0x5733, 0x0, 0x0);
        gbc.writeMem(0x5733, { 0x24 });
        gbc.writeMem(0xd0bb, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x553c);
        EXPECT(gbc.pc(), 0xd0bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0bb), 0x46);
        // 46 0343
        gbc.setState(0x903e, 0xd730, 0x51e0, 0xed9f, 0x7a3a, 0x2448, 0x1, 0x0);
        gbc.writeMem(0x2448, { 0x21 });
        gbc.writeMem(0x903e, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xd730);
        EXPECT(gbc.pc(), 0x903f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x903e), 0x46);
        // 46 0344
        gbc.setState(0xca85, 0xcaf8, 0xb570, 0x4ac5, 0xe101, 0xdacf, 0x1, 0x1);
        gbc.writeMem(0xca85, { 0x46 });
        gbc.writeMem(0xdacf, { 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xcaf8);
        EXPECT(gbc.pc(), 0xca86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca85), 0x46);
        EXPECT(gbc.readMem(0xdacf), 0x3c);
        // 46 0345
        gbc.setState(0x7787, 0xea2c, 0xbad0, 0xc45c, 0xc3dc, 0x71d4, 0x0, 0x1);
        gbc.writeMem(0x71d4, { 0xf });
        gbc.writeMem(0x7787, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xea2c);
        EXPECT(gbc.pc(), 0x7788);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 0346
        gbc.setState(0x8162, 0x19b2, 0x4fb0, 0x7f8f, 0x9f5c, 0xd736, 0x1, 0x0);
        gbc.writeMem(0x8162, { 0x46 });
        gbc.writeMem(0xd736, { 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x19b2);
        EXPECT(gbc.pc(), 0x8163);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8162), 0x46);
        EXPECT(gbc.readMem(0xd736), 0x7);
        // 46 0347
        gbc.setState(0x9302, 0xe6ff, 0xa440, 0x8a1c, 0xd28f, 0xc52, 0x1, 0x1);
        gbc.writeMem(0xc52, { 0xbf });
        gbc.writeMem(0x9302, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xe6ff);
        EXPECT(gbc.pc(), 0x9303);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9302), 0x46);
        // 46 0348
        gbc.setState(0x99f6, 0x2e1c, 0x5590, 0x1176, 0x1bac, 0x1067, 0x1, 0x1);
        gbc.writeMem(0x1067, { 0xa9 });
        gbc.writeMem(0x99f6, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x2e1c);
        EXPECT(gbc.pc(), 0x99f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99f6), 0x46);
        // 46 0349
        gbc.setState(0x14bf, 0x6595, 0x6420, 0x459b, 0x5ddc, 0x402c, 0x1, 0x0);
        gbc.writeMem(0x14bf, { 0x46 });
        gbc.writeMem(0x402c, { 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x6595);
        EXPECT(gbc.pc(), 0x14c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 034A
        gbc.setState(0x889, 0x20a6, 0xbc0, 0xcb33, 0xae30, 0xf74f, 0x1, 0x0);
        gbc.writeMem(0x889, { 0x46 });
        gbc.writeMem(0xf74f, { 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x20a6);
        EXPECT(gbc.pc(), 0x88a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf74f), 0x3d);
        // 46 034B
        gbc.setState(0x25e2, 0xec1c, 0xa040, 0x7355, 0x2c55, 0x45b, 0x1, 0x1);
        gbc.writeMem(0x45b, { 0x2d });
        gbc.writeMem(0x25e2, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xec1c);
        EXPECT(gbc.pc(), 0x25e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 034C
        gbc.setState(0x7526, 0xcae6, 0xa800, 0x3e6b, 0xc23e, 0xca64, 0x1, 0x1);
        gbc.writeMem(0x7526, { 0x46 });
        gbc.writeMem(0xca64, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xcae6);
        EXPECT(gbc.pc(), 0x7527);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca64), 0xd5);
        // 46 034D
        gbc.setState(0xdea2, 0xcf8c, 0xe820, 0x3564, 0x8356, 0x3c02, 0x1, 0x1);
        gbc.writeMem(0x3c02, { 0xe0 });
        gbc.writeMem(0xdea2, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xcf8c);
        EXPECT(gbc.pc(), 0xdea3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdea2), 0x46);
        // 46 034E
        gbc.setState(0x3781, 0x6a73, 0xb660, 0x89c5, 0x6950, 0x375b, 0x1, 0x1);
        gbc.writeMem(0x375b, { 0x35 });
        gbc.writeMem(0x3781, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x6a73);
        EXPECT(gbc.pc(), 0x3782);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 034F
        gbc.setState(0xa045, 0x231b, 0xbcd0, 0xd452, 0x404c, 0x2cd1, 0x0, 0x0);
        gbc.writeMem(0x2cd1, { 0x31 });
        gbc.writeMem(0xa045, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x231b);
        EXPECT(gbc.pc(), 0xa046);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa045), 0x46);
        // 46 0350
        gbc.setState(0xa7c6, 0x19f3, 0x2860, 0xf77f, 0x6e7e, 0x7078, 0x1, 0x0);
        gbc.writeMem(0x7078, { 0x2 });
        gbc.writeMem(0xa7c6, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x19f3);
        EXPECT(gbc.pc(), 0xa7c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7c6), 0x46);
        // 46 0351
        gbc.setState(0xdff8, 0xe1fc, 0x1ac0, 0x3797, 0xcf02, 0xe67f, 0x1, 0x1);
        gbc.writeMem(0xdff8, { 0x46 });
        gbc.writeMem(0xe67f, { 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xe1fc);
        EXPECT(gbc.pc(), 0xdff9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdff8), 0x46);
        EXPECT(gbc.readMem(0xe67f), 0x12);
        // 46 0352
        gbc.setState(0x6af0, 0x1fee, 0x46f0, 0x33c0, 0x919f, 0x3737, 0x1, 0x0);
        gbc.writeMem(0x3737, { 0x2e });
        gbc.writeMem(0x6af0, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x1fee);
        EXPECT(gbc.pc(), 0x6af1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 0353
        gbc.setState(0x12ba, 0x1345, 0x7ca0, 0x6d4b, 0xf524, 0xf120, 0x0, 0x1);
        gbc.writeMem(0x12ba, { 0x46 });
        gbc.writeMem(0xf120, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x1345);
        EXPECT(gbc.pc(), 0x12bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf120), 0x95);
        // 46 0354
        gbc.setState(0xce18, 0xc3b6, 0xebe0, 0xf29, 0x70b9, 0xfca6, 0x0, 0x1);
        gbc.writeMem(0xce18, { 0x46 });
        gbc.writeMem(0xfca6, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xc3b6);
        EXPECT(gbc.pc(), 0xce19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce18), 0x46);
        EXPECT(gbc.readMem(0xfca6), 0xec);
        // 46 0356
        gbc.setState(0x39b8, 0x25b2, 0x5de0, 0x83dd, 0xd203, 0x32a4, 0x1, 0x0);
        gbc.writeMem(0x32a4, { 0xd8 });
        gbc.writeMem(0x39b8, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x25b2);
        EXPECT(gbc.pc(), 0x39b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 0357
        gbc.setState(0x203, 0x57a3, 0x60, 0x308f, 0x11d6, 0x5d22, 0x0, 0x0);
        gbc.writeMem(0x203, { 0x46 });
        gbc.writeMem(0x5d22, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x57a3);
        EXPECT(gbc.pc(), 0x204);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 0358
        gbc.setState(0x84f7, 0x4e20, 0xc1a0, 0x290c, 0xb0bc, 0x1ea0, 0x0, 0x0);
        gbc.writeMem(0x1ea0, { 0xee });
        gbc.writeMem(0x84f7, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x4e20);
        EXPECT(gbc.pc(), 0x84f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84f7), 0x46);
        // 46 0359
        gbc.setState(0x5e1b, 0xeb2f, 0x3c70, 0x343b, 0xaf39, 0x3c7b, 0x1, 0x1);
        gbc.writeMem(0x3c7b, { 0xf3 });
        gbc.writeMem(0x5e1b, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xeb2f);
        EXPECT(gbc.pc(), 0x5e1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 035C
        gbc.setState(0x60d8, 0x8c39, 0x3750, 0x419c, 0xbfa9, 0xd360, 0x1, 0x0);
        gbc.writeMem(0x60d8, { 0x46 });
        gbc.writeMem(0xd360, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x8c39);
        EXPECT(gbc.pc(), 0x60d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd360), 0x7e);
        // 46 035D
        gbc.setState(0xe776, 0xbe7f, 0xb3d0, 0x969c, 0x4f6e, 0x68d0, 0x1, 0x0);
        gbc.writeMem(0x68d0, { 0x86 });
        gbc.writeMem(0xe776, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xbe7f);
        EXPECT(gbc.pc(), 0xe777);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe776), 0x46);
        // 46 035E
        gbc.setState(0x60e9, 0x4ca8, 0xab10, 0x87d8, 0x5630, 0xba6c, 0x1, 0x1);
        gbc.writeMem(0x60e9, { 0x46 });
        gbc.writeMem(0xba6c, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x4ca8);
        EXPECT(gbc.pc(), 0x60ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba6c), 0x4a);
        // 46 035F
        gbc.setState(0x665d, 0xc2ab, 0xaf20, 0x6717, 0xdaad, 0x13c7, 0x0, 0x0);
        gbc.writeMem(0x13c7, { 0xb7 });
        gbc.writeMem(0x665d, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xc2ab);
        EXPECT(gbc.pc(), 0x665e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 0360
        gbc.setState(0xbce7, 0xa01c, 0xd7b0, 0xe781, 0xe032, 0xa38b, 0x1, 0x0);
        gbc.writeMem(0xa38b, { 0xdc });
        gbc.writeMem(0xbce7, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xa01c);
        EXPECT(gbc.pc(), 0xbce8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa38b), 0xdc);
        EXPECT(gbc.readMem(0xbce7), 0x46);
        // 46 0361
        gbc.setState(0xe75a, 0xdc45, 0xa920, 0x19f6, 0x8c56, 0x92f6, 0x0, 0x0);
        gbc.writeMem(0x92f6, { 0x3c });
        gbc.writeMem(0xe75a, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xdc45);
        EXPECT(gbc.pc(), 0xe75b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92f6), 0x3c);
        EXPECT(gbc.readMem(0xe75a), 0x46);
        // 46 0362
        gbc.setState(0xc7cc, 0xa966, 0x73a0, 0x8f18, 0xe278, 0x8e27, 0x1, 0x0);
        gbc.writeMem(0x8e27, { 0x71 });
        gbc.writeMem(0xc7cc, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xa966);
        EXPECT(gbc.pc(), 0xc7cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e27), 0x71);
        EXPECT(gbc.readMem(0xc7cc), 0x46);
        // 46 0363
        gbc.setState(0xb5ba, 0x5012, 0x7290, 0xec48, 0xeb95, 0xbc47, 0x0, 0x0);
        gbc.writeMem(0xb5ba, { 0x46 });
        gbc.writeMem(0xbc47, { 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x5012);
        EXPECT(gbc.pc(), 0xb5bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5ba), 0x46);
        EXPECT(gbc.readMem(0xbc47), 0xe2);
        // 46 0364
        gbc.setState(0x21fd, 0x7505, 0x1180, 0x6cea, 0xb96a, 0x182a, 0x0, 0x0);
        gbc.writeMem(0x182a, { 0x5b });
        gbc.writeMem(0x21fd, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x7505);
        EXPECT(gbc.pc(), 0x21fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 0365
        gbc.setState(0x9eae, 0x60c, 0x91f0, 0x9e68, 0xa4c2, 0x19cc, 0x0, 0x0);
        gbc.writeMem(0x19cc, { 0x4a });
        gbc.writeMem(0x9eae, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x60c);
        EXPECT(gbc.pc(), 0x9eaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9eae), 0x46);
        // 46 0366
        gbc.setState(0xd6e5, 0x98d3, 0x830, 0x432b, 0x3a90, 0x3fd5, 0x1, 0x1);
        gbc.writeMem(0x3fd5, { 0x37 });
        gbc.writeMem(0xd6e5, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x98d3);
        EXPECT(gbc.pc(), 0xd6e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6e5), 0x46);
        // 46 0367
        gbc.setState(0x1c43, 0x4527, 0xc9c0, 0x3cfa, 0x9928, 0x86b4, 0x0, 0x1);
        gbc.writeMem(0x1c43, { 0x46 });
        gbc.writeMem(0x86b4, { 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x4527);
        EXPECT(gbc.pc(), 0x1c44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86b4), 0xf7);
        // 46 0368
        gbc.setState(0xc478, 0x47dd, 0xff10, 0x14aa, 0xe9e7, 0x77e, 0x1, 0x0);
        gbc.writeMem(0x77e, { 0x21 });
        gbc.writeMem(0xc478, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x47dd);
        EXPECT(gbc.pc(), 0xc479);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc478), 0x46);
        // 46 0369
        gbc.setState(0xcde7, 0xfbba, 0x8810, 0x9738, 0xb34d, 0x941d, 0x1, 0x1);
        gbc.writeMem(0x941d, { 0xab });
        gbc.writeMem(0xcde7, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xfbba);
        EXPECT(gbc.pc(), 0xcde8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x941d), 0xab);
        EXPECT(gbc.readMem(0xcde7), 0x46);
        // 46 036A
        gbc.setState(0x6b1a, 0x7d92, 0xd020, 0x99d9, 0x69a3, 0x58e2, 0x0, 0x0);
        gbc.writeMem(0x58e2, { 0x21 });
        gbc.writeMem(0x6b1a, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x7d92);
        EXPECT(gbc.pc(), 0x6b1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 036B
        gbc.setState(0x779c, 0xd69, 0x4850, 0x22f6, 0xfff5, 0x1049, 0x0, 0x0);
        gbc.writeMem(0x1049, { 0xa1 });
        gbc.writeMem(0x779c, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xd69);
        EXPECT(gbc.pc(), 0x779d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 036C
        gbc.setState(0xec4a, 0xa23b, 0x4ae0, 0x2905, 0x77b2, 0x9917, 0x1, 0x0);
        gbc.writeMem(0x9917, { 0x3b });
        gbc.writeMem(0xec4a, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xa23b);
        EXPECT(gbc.pc(), 0xec4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9917), 0x3b);
        EXPECT(gbc.readMem(0xec4a), 0x46);
        // 46 036D
        gbc.setState(0x7efb, 0x3a7f, 0xd930, 0x42ea, 0xb148, 0xadbb, 0x1, 0x1);
        gbc.writeMem(0x7efb, { 0x46 });
        gbc.writeMem(0xadbb, { 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x3a7f);
        EXPECT(gbc.pc(), 0x7efc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadbb), 0x35);
        // 46 036E
        gbc.setState(0x6d5, 0x441b, 0x1450, 0xaa9b, 0xc986, 0x7586, 0x0, 0x0);
        gbc.writeMem(0x6d5, { 0x46 });
        gbc.writeMem(0x7586, { 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x441b);
        EXPECT(gbc.pc(), 0x6d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 036F
        gbc.setState(0x8712, 0x1159, 0x2ac0, 0x8398, 0xe3d4, 0x5d2e, 0x1, 0x0);
        gbc.writeMem(0x5d2e, { 0xb6 });
        gbc.writeMem(0x8712, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x1159);
        EXPECT(gbc.pc(), 0x8713);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8712), 0x46);
        // 46 0370
        gbc.setState(0x2526, 0xa89d, 0x9900, 0xc52a, 0x6c95, 0x142d, 0x0, 0x0);
        gbc.writeMem(0x142d, { 0xd5 });
        gbc.writeMem(0x2526, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xa89d);
        EXPECT(gbc.pc(), 0x2527);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 0371
        gbc.setState(0x40, 0x7052, 0xf290, 0x56a2, 0x6f6c, 0x937e, 0x1, 0x1);
        gbc.writeMem(0x40, { 0x46 });
        gbc.writeMem(0x937e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x7052);
        EXPECT(gbc.pc(), 0x41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x937e), 0x6b);
        // 46 0372
        gbc.setState(0x889, 0xb253, 0x25d0, 0x435f, 0x4ec6, 0x2569, 0x0, 0x1);
        gbc.writeMem(0x889, { 0x46 });
        gbc.writeMem(0x2569, { 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xb253);
        EXPECT(gbc.pc(), 0x88a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 0373
        gbc.setState(0xbcd4, 0x45e1, 0x9440, 0xf4e7, 0xe55a, 0xff80, 0x0, 0x1);
        gbc.writeMem(0xbcd4, { 0x46 });
        gbc.writeMem(0xff80, { 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x45e1);
        EXPECT(gbc.pc(), 0xbcd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcd4), 0x46);
        EXPECT(gbc.readMem(0xff80), 0x8e);
        // 46 0374
        gbc.setState(0x39d8, 0xf7f0, 0xafa0, 0x1d89, 0x6b9e, 0x1fcf, 0x1, 0x0);
        gbc.writeMem(0x1fcf, { 0xd1 });
        gbc.writeMem(0x39d8, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xf7f0);
        EXPECT(gbc.pc(), 0x39d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 0375
        gbc.setState(0xcd32, 0x3b24, 0x6f80, 0x6bf1, 0x6588, 0xc5d0, 0x1, 0x1);
        gbc.writeMem(0xc5d0, { 0x9f });
        gbc.writeMem(0xcd32, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x3b24);
        EXPECT(gbc.pc(), 0xcd33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5d0), 0x9f);
        EXPECT(gbc.readMem(0xcd32), 0x46);
        // 46 0376
        gbc.setState(0x1629, 0xd4ee, 0x11e0, 0x410a, 0xf21e, 0x3a02, 0x1, 0x0);
        gbc.writeMem(0x1629, { 0x46 });
        gbc.writeMem(0x3a02, { 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xd4ee);
        EXPECT(gbc.pc(), 0x162a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 0377
        gbc.setState(0x15d0, 0x4684, 0xee70, 0x8c23, 0x92d1, 0x160a, 0x1, 0x0);
        gbc.writeMem(0x15d0, { 0x46 });
        gbc.writeMem(0x160a, { 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x4684);
        EXPECT(gbc.pc(), 0x15d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 0378
        gbc.setState(0x5881, 0x9f95, 0x34a0, 0x98de, 0x93a8, 0xacf5, 0x1, 0x0);
        gbc.writeMem(0x5881, { 0x46 });
        gbc.writeMem(0xacf5, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x9f95);
        EXPECT(gbc.pc(), 0x5882);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacf5), 0x95);
        // 46 0379
        gbc.setState(0x24e3, 0x53d2, 0x7d70, 0x3016, 0x4851, 0x1092, 0x0, 0x0);
        gbc.writeMem(0x1092, { 0x84 });
        gbc.writeMem(0x24e3, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x53d2);
        EXPECT(gbc.pc(), 0x24e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 037A
        gbc.setState(0x5cdc, 0x9bb1, 0xaa10, 0xcff0, 0x5b62, 0x171, 0x0, 0x1);
        gbc.writeMem(0x171, { 0xc1 });
        gbc.writeMem(0x5cdc, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x9bb1);
        EXPECT(gbc.pc(), 0x5cdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 037B
        gbc.setState(0xe70f, 0x7f47, 0xe7f0, 0x3f17, 0xb9e, 0x4a93, 0x1, 0x0);
        gbc.writeMem(0x4a93, { 0x62 });
        gbc.writeMem(0xe70f, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x7f47);
        EXPECT(gbc.pc(), 0xe710);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe70f), 0x46);
        // 46 037C
        gbc.setState(0x5957, 0xa877, 0x8030, 0xc21c, 0x266d, 0x994c, 0x1, 0x0);
        gbc.writeMem(0x5957, { 0x46 });
        gbc.writeMem(0x994c, { 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xa877);
        EXPECT(gbc.pc(), 0x5958);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x994c), 0x80);
        // 46 037D
        gbc.setState(0xe233, 0xf111, 0x3d40, 0xde34, 0xc16b, 0x76df, 0x1, 0x1);
        gbc.writeMem(0x76df, { 0xc3 });
        gbc.writeMem(0xe233, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xf111);
        EXPECT(gbc.pc(), 0xe234);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe233), 0x46);
        // 46 037E
        gbc.setState(0x1202, 0xe0bf, 0x67b0, 0xe60c, 0x347f, 0xe5b7, 0x1, 0x1);
        gbc.writeMem(0x1202, { 0x46 });
        gbc.writeMem(0xe5b7, { 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xe0bf);
        EXPECT(gbc.pc(), 0x1203);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5b7), 0xcb);
        // 46 037F
        gbc.setState(0x1e78, 0x6aac, 0xcfc0, 0xd811, 0x8647, 0x476c, 0x1, 0x1);
        gbc.writeMem(0x1e78, { 0x46 });
        gbc.writeMem(0x476c, { 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x6aac);
        EXPECT(gbc.pc(), 0x1e79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 0380
        gbc.setState(0x9eb2, 0x370d, 0xd210, 0x7b41, 0x54f1, 0x8d50, 0x1, 0x0);
        gbc.writeMem(0x8d50, { 0xe3 });
        gbc.writeMem(0x9eb2, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x370d);
        EXPECT(gbc.pc(), 0x9eb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d50), 0xe3);
        EXPECT(gbc.readMem(0x9eb2), 0x46);
        // 46 0381
        gbc.setState(0xac87, 0x9ae, 0xfa30, 0xc5e5, 0x6e83, 0xee11, 0x0, 0x1);
        gbc.writeMem(0xac87, { 0x46 });
        gbc.writeMem(0xee11, { 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x9ae);
        EXPECT(gbc.pc(), 0xac88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac87), 0x46);
        EXPECT(gbc.readMem(0xee11), 0x2e);
        // 46 0382
        gbc.setState(0xe0ae, 0xab78, 0x840, 0x9fb8, 0x8c01, 0xbebc, 0x1, 0x1);
        gbc.writeMem(0xbebc, { 0xda });
        gbc.writeMem(0xe0ae, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xab78);
        EXPECT(gbc.pc(), 0xe0af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbebc), 0xda);
        EXPECT(gbc.readMem(0xe0ae), 0x46);
        // 46 0383
        gbc.setState(0x4454, 0x6033, 0x5450, 0xa3f1, 0xc285, 0x50f5, 0x0, 0x1);
        gbc.writeMem(0x4454, { 0x46 });
        gbc.writeMem(0x50f5, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x6033);
        EXPECT(gbc.pc(), 0x4455);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 0384
        gbc.setState(0xb47a, 0x7ad9, 0xaf00, 0xbd39, 0xf55f, 0x981, 0x0, 0x0);
        gbc.writeMem(0x981, { 0x86 });
        gbc.writeMem(0xb47a, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x7ad9);
        EXPECT(gbc.pc(), 0xb47b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb47a), 0x46);
        // 46 0385
        gbc.setState(0x8fb0, 0xce58, 0xefd0, 0xef5d, 0x365c, 0xaab5, 0x1, 0x1);
        gbc.writeMem(0x8fb0, { 0x46 });
        gbc.writeMem(0xaab5, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xce58);
        EXPECT(gbc.pc(), 0x8fb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fb0), 0x46);
        EXPECT(gbc.readMem(0xaab5), 0xa9);
        // 46 0386
        gbc.setState(0x47c7, 0xb86d, 0x4480, 0x802e, 0x2c05, 0xa764, 0x0, 0x1);
        gbc.writeMem(0x47c7, { 0x46 });
        gbc.writeMem(0xa764, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xb86d);
        EXPECT(gbc.pc(), 0x47c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa764), 0xf4);
        // 46 0387
        gbc.setState(0x6dd4, 0xa1ad, 0x95d0, 0x592b, 0x7358, 0xb5d8, 0x0, 0x1);
        gbc.writeMem(0x6dd4, { 0x46 });
        gbc.writeMem(0xb5d8, { 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xa1ad);
        EXPECT(gbc.pc(), 0x6dd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5d8), 0x91);
        // 46 0388
        gbc.setState(0xadea, 0x5c49, 0xd870, 0x1c51, 0xf57c, 0xf070, 0x0, 0x1);
        gbc.writeMem(0xadea, { 0x46 });
        gbc.writeMem(0xf070, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x5c49);
        EXPECT(gbc.pc(), 0xadeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadea), 0x46);
        EXPECT(gbc.readMem(0xf070), 0x9);
        // 46 0389
        gbc.setState(0xcb4d, 0xd0a7, 0xbab0, 0x953d, 0xeb2d, 0x89d1, 0x0, 0x1);
        gbc.writeMem(0x89d1, { 0x19 });
        gbc.writeMem(0xcb4d, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xd0a7);
        EXPECT(gbc.pc(), 0xcb4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89d1), 0x19);
        EXPECT(gbc.readMem(0xcb4d), 0x46);
        // 46 038A
        gbc.setState(0xcef6, 0x64e1, 0xe8d0, 0xf5f7, 0x6694, 0x28c1, 0x1, 0x1);
        gbc.writeMem(0x28c1, { 0x75 });
        gbc.writeMem(0xcef6, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x64e1);
        EXPECT(gbc.pc(), 0xcef7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcef6), 0x46);
        // 46 038B
        gbc.setState(0x98e4, 0x1789, 0x3380, 0x9ba3, 0xcd5e, 0x310, 0x0, 0x0);
        gbc.writeMem(0x310, { 0xb2 });
        gbc.writeMem(0x98e4, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x1789);
        EXPECT(gbc.pc(), 0x98e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98e4), 0x46);
        // 46 038C
        gbc.setState(0x90d8, 0xcad6, 0xcc0, 0xa0b0, 0xd86, 0xedfc, 0x1, 0x1);
        gbc.writeMem(0x90d8, { 0x46 });
        gbc.writeMem(0xedfc, { 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xcad6);
        EXPECT(gbc.pc(), 0x90d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90d8), 0x46);
        EXPECT(gbc.readMem(0xedfc), 0xab);
        // 46 038D
        gbc.setState(0xe802, 0x88d, 0xd030, 0x521b, 0xbc, 0x81e5, 0x0, 0x1);
        gbc.writeMem(0x81e5, { 0xf5 });
        gbc.writeMem(0xe802, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x88d);
        EXPECT(gbc.pc(), 0xe803);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81e5), 0xf5);
        EXPECT(gbc.readMem(0xe802), 0x46);
        // 46 038E
        gbc.setState(0x5e5f, 0x4234, 0x9510, 0x4c98, 0xa22a, 0x3cb2, 0x0, 0x0);
        gbc.writeMem(0x3cb2, { 0x81 });
        gbc.writeMem(0x5e5f, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x4234);
        EXPECT(gbc.pc(), 0x5e60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 038F
        gbc.setState(0x2ac1, 0x32c5, 0xdab0, 0x61be, 0x4410, 0x56c8, 0x1, 0x0);
        gbc.writeMem(0x2ac1, { 0x46 });
        gbc.writeMem(0x56c8, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x32c5);
        EXPECT(gbc.pc(), 0x2ac2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 0390
        gbc.setState(0x8486, 0xbb16, 0x2d60, 0x6d31, 0x8ac6, 0x9f5, 0x0, 0x1);
        gbc.writeMem(0x9f5, { 0x15 });
        gbc.writeMem(0x8486, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xbb16);
        EXPECT(gbc.pc(), 0x8487);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8486), 0x46);
        // 46 0391
        gbc.setState(0x2de9, 0xd91d, 0xc570, 0xfa37, 0xfe7b, 0xbde1, 0x1, 0x0);
        gbc.writeMem(0x2de9, { 0x46 });
        gbc.writeMem(0xbde1, { 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xd91d);
        EXPECT(gbc.pc(), 0x2dea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbde1), 0xd8);
        // 46 0392
        gbc.setState(0xd41b, 0xf0da, 0x6960, 0x1576, 0xc6b9, 0x1c56, 0x0, 0x1);
        gbc.writeMem(0x1c56, { 0x43 });
        gbc.writeMem(0xd41b, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xf0da);
        EXPECT(gbc.pc(), 0xd41c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd41b), 0x46);
        // 46 0393
        gbc.setState(0xccd4, 0xf613, 0xe200, 0x479d, 0x6040, 0x330a, 0x1, 0x1);
        gbc.writeMem(0x330a, { 0xc3 });
        gbc.writeMem(0xccd4, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xf613);
        EXPECT(gbc.pc(), 0xccd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccd4), 0x46);
        // 46 0394
        gbc.setState(0x6c12, 0x3dc7, 0xec90, 0xd3dc, 0x1f34, 0x3c56, 0x1, 0x0);
        gbc.writeMem(0x3c56, { 0x1f });
        gbc.writeMem(0x6c12, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x3dc7);
        EXPECT(gbc.pc(), 0x6c13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 0395
        gbc.setState(0x3a1c, 0x7448, 0xb350, 0x91aa, 0x9a4c, 0x1663, 0x0, 0x0);
        gbc.writeMem(0x1663, { 0x23 });
        gbc.writeMem(0x3a1c, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x7448);
        EXPECT(gbc.pc(), 0x3a1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 0396
        gbc.setState(0x9fbf, 0x2c7f, 0x4340, 0xd7cd, 0x8042, 0x1c3d, 0x0, 0x0);
        gbc.writeMem(0x1c3d, { 0x29 });
        gbc.writeMem(0x9fbf, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x2c7f);
        EXPECT(gbc.pc(), 0x9fc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fbf), 0x46);
        // 46 0397
        gbc.setState(0x702b, 0x1140, 0x5170, 0x45d4, 0xd7e, 0xf895, 0x1, 0x1);
        gbc.writeMem(0x702b, { 0x46 });
        gbc.writeMem(0xf895, { 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x1140);
        EXPECT(gbc.pc(), 0x702c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf895), 0x13);
        // 46 0398
        gbc.setState(0x856, 0xd452, 0x97c0, 0xeba2, 0x8960, 0xb864, 0x0, 0x1);
        gbc.writeMem(0x856, { 0x46 });
        gbc.writeMem(0xb864, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xd452);
        EXPECT(gbc.pc(), 0x857);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb864), 0x0);
        // 46 0399
        gbc.setState(0x7028, 0xb5a7, 0xc470, 0x2e6b, 0xe91f, 0xc8e, 0x1, 0x1);
        gbc.writeMem(0xc8e, { 0x2 });
        gbc.writeMem(0x7028, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xb5a7);
        EXPECT(gbc.pc(), 0x7029);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 039A
        gbc.setState(0x46b3, 0x824b, 0xe4b0, 0x904e, 0x4681, 0x7228, 0x1, 0x1);
        gbc.writeMem(0x46b3, { 0x46 });
        gbc.writeMem(0x7228, { 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x824b);
        EXPECT(gbc.pc(), 0x46b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 039B
        gbc.setState(0xa47a, 0xbc99, 0x2c10, 0x99ee, 0x6b1e, 0x4c3f, 0x1, 0x0);
        gbc.writeMem(0x4c3f, { 0xd1 });
        gbc.writeMem(0xa47a, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xbc99);
        EXPECT(gbc.pc(), 0xa47b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa47a), 0x46);
        // 46 039C
        gbc.setState(0x9e1, 0xc7e5, 0xafa0, 0xfcd3, 0xfe32, 0x7bec, 0x1, 0x1);
        gbc.writeMem(0x9e1, { 0x46 });
        gbc.writeMem(0x7bec, { 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xc7e5);
        EXPECT(gbc.pc(), 0x9e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 039D
        gbc.setState(0x5d71, 0x7461, 0xa390, 0xf072, 0xef90, 0x9af, 0x0, 0x1);
        gbc.writeMem(0x9af, { 0xe7 });
        gbc.writeMem(0x5d71, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x7461);
        EXPECT(gbc.pc(), 0x5d72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 039E
        gbc.setState(0x6eba, 0xe310, 0xf9f0, 0xe63c, 0x5522, 0xc764, 0x1, 0x0);
        gbc.writeMem(0x6eba, { 0x46 });
        gbc.writeMem(0xc764, { 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xe310);
        EXPECT(gbc.pc(), 0x6ebb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc764), 0x3e);
        // 46 039F
        gbc.setState(0xd95e, 0xe4ff, 0xb610, 0xba06, 0x2c9b, 0xabcb, 0x0, 0x1);
        gbc.writeMem(0xabcb, { 0x1f });
        gbc.writeMem(0xd95e, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xe4ff);
        EXPECT(gbc.pc(), 0xd95f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabcb), 0x1f);
        EXPECT(gbc.readMem(0xd95e), 0x46);
        // 46 03A0
        gbc.setState(0x855, 0xaf00, 0xa170, 0xbbc7, 0x5011, 0x21b4, 0x0, 0x0);
        gbc.writeMem(0x855, { 0x46 });
        gbc.writeMem(0x21b4, { 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xaf00);
        EXPECT(gbc.pc(), 0x856);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 03A1
        gbc.setState(0x1ca7, 0x5c55, 0x8c90, 0xe009, 0xb90, 0x55cc, 0x1, 0x1);
        gbc.writeMem(0x1ca7, { 0x46 });
        gbc.writeMem(0x55cc, { 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x5c55);
        EXPECT(gbc.pc(), 0x1ca8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 03A3
        gbc.setState(0x1134, 0xb1ba, 0x5190, 0xd156, 0xc2ba, 0x295b, 0x0, 0x1);
        gbc.writeMem(0x1134, { 0x46 });
        gbc.writeMem(0x295b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xb1ba);
        EXPECT(gbc.pc(), 0x1135);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 03A4
        gbc.setState(0x87f5, 0xb503, 0xe4c0, 0x501, 0xbb32, 0x4f8c, 0x0, 0x0);
        gbc.writeMem(0x4f8c, { 0x82 });
        gbc.writeMem(0x87f5, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xb503);
        EXPECT(gbc.pc(), 0x87f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87f5), 0x46);
        // 46 03A5
        gbc.setState(0x501, 0x8bbc, 0x9a00, 0x1d0e, 0x7e50, 0xaaa9, 0x0, 0x0);
        gbc.writeMem(0x501, { 0x46 });
        gbc.writeMem(0xaaa9, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x8bbc);
        EXPECT(gbc.pc(), 0x502);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaaa9), 0xa8);
        // 46 03A6
        gbc.setState(0x97ff, 0xbd85, 0x53a0, 0x78d5, 0x179f, 0x80e6, 0x1, 0x0);
        gbc.writeMem(0x80e6, { 0x86 });
        gbc.writeMem(0x97ff, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xbd85);
        EXPECT(gbc.pc(), 0x9800);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80e6), 0x86);
        EXPECT(gbc.readMem(0x97ff), 0x46);
        // 46 03A7
        gbc.setState(0x3ab5, 0xffdd, 0x7c0, 0x2203, 0x1d81, 0x91cc, 0x0, 0x1);
        gbc.writeMem(0x3ab5, { 0x46 });
        gbc.writeMem(0x91cc, { 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xffdd);
        EXPECT(gbc.pc(), 0x3ab6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91cc), 0x70);
        // 46 03A8
        gbc.setState(0x77cd, 0xb38e, 0xd410, 0x9ec8, 0xc0ed, 0x4e06, 0x1, 0x0);
        gbc.writeMem(0x4e06, { 0xc0 });
        gbc.writeMem(0x77cd, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xb38e);
        EXPECT(gbc.pc(), 0x77ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 46 03A9
        gbc.setState(0x54cd, 0x9b52, 0xd200, 0x277, 0x797, 0xd696, 0x1, 0x0);
        gbc.writeMem(0x54cd, { 0x46 });
        gbc.writeMem(0xd696, { 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x9b52);
        EXPECT(gbc.pc(), 0x54ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd696), 0x6f);
        // 46 03AA
        gbc.setState(0x95f4, 0x8acd, 0xa430, 0xa0c8, 0x570d, 0x1d9, 0x1, 0x0);
        gbc.writeMem(0x1d9, { 0x46 });
        gbc.writeMem(0x95f4, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x8acd);
        EXPECT(gbc.pc(), 0x95f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95f4), 0x46);
        // 46 03AB
        gbc.setState(0x490f, 0xc1fe, 0xb040, 0xfceb, 0x2fe2, 0x49d5, 0x0, 0x0);
        gbc.writeMem(0x490f, { 0x46 });
        gbc.writeMem(0x49d5, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xc1fe);
        EXPECT(gbc.pc(), 0x4910);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 03AC
        gbc.setState(0x7200, 0x1092, 0x9350, 0xa240, 0x683b, 0xf1c9, 0x0, 0x0);
        gbc.writeMem(0x7200, { 0x46 });
        gbc.writeMem(0xf1c9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x1092);
        EXPECT(gbc.pc(), 0x7201);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf1c9), 0x4f);
        // 46 03AD
        gbc.setState(0xe4b5, 0x3df1, 0x1810, 0xa0, 0x1c79, 0x600, 0x0, 0x1);
        gbc.writeMem(0x600, { 0xf8 });
        gbc.writeMem(0xe4b5, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x3df1);
        EXPECT(gbc.pc(), 0xe4b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4b5), 0x46);
        // 46 03AE
        gbc.setState(0x4702, 0x747c, 0x6300, 0x14dd, 0xec0b, 0x3cea, 0x0, 0x0);
        gbc.writeMem(0x3cea, { 0x60 });
        gbc.writeMem(0x4702, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x747c);
        EXPECT(gbc.pc(), 0x4703);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 03AF
        gbc.setState(0x692b, 0x22b1, 0x2400, 0x505b, 0x43db, 0x8020, 0x0, 0x1);
        gbc.writeMem(0x692b, { 0x46 });
        gbc.writeMem(0x8020, { 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x22b1);
        EXPECT(gbc.pc(), 0x692c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8020), 0x68);
        // 46 03B0
        gbc.setState(0xbbaa, 0xe2b2, 0xb1d0, 0x271b, 0x63fa, 0x5dbf, 0x1, 0x0);
        gbc.writeMem(0x5dbf, { 0x77 });
        gbc.writeMem(0xbbaa, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xe2b2);
        EXPECT(gbc.pc(), 0xbbab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbaa), 0x46);
        // 46 03B1
        gbc.setState(0xa507, 0xe01d, 0x1580, 0x5474, 0x6007, 0x68fa, 0x0, 0x1);
        gbc.writeMem(0x68fa, { 0x3b });
        gbc.writeMem(0xa507, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xe01d);
        EXPECT(gbc.pc(), 0xa508);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa507), 0x46);
        // 46 03B2
        gbc.setState(0xd9f2, 0x12c7, 0x5b80, 0x5180, 0xbcc3, 0x5b96, 0x1, 0x1);
        gbc.writeMem(0x5b96, { 0x1d });
        gbc.writeMem(0xd9f2, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x12c7);
        EXPECT(gbc.pc(), 0xd9f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9f2), 0x46);
        // 46 03B3
        gbc.setState(0xb066, 0x1a9, 0xda50, 0xca3e, 0x14fb, 0xad4b, 0x0, 0x1);
        gbc.writeMem(0xad4b, { 0xc });
        gbc.writeMem(0xb066, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x1a9);
        EXPECT(gbc.pc(), 0xb067);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad4b), 0xc);
        EXPECT(gbc.readMem(0xb066), 0x46);
        // 46 03B4
        gbc.setState(0xed19, 0x556d, 0xbfc0, 0xd570, 0x3abe, 0xb8c2, 0x0, 0x0);
        gbc.writeMem(0xb8c2, { 0x65 });
        gbc.writeMem(0xed19, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x556d);
        EXPECT(gbc.pc(), 0xed1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8c2), 0x65);
        EXPECT(gbc.readMem(0xed19), 0x46);
        // 46 03B5
        gbc.setState(0xad2e, 0x987e, 0xb440, 0xbc0f, 0xe2a2, 0x259e, 0x1, 0x1);
        gbc.writeMem(0x259e, { 0xd7 });
        gbc.writeMem(0xad2e, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x987e);
        EXPECT(gbc.pc(), 0xad2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad2e), 0x46);
        // 46 03B6
        gbc.setState(0x19dd, 0x9167, 0x4bf0, 0x8545, 0x7f82, 0x7af5, 0x1, 0x0);
        gbc.writeMem(0x19dd, { 0x46 });
        gbc.writeMem(0x7af5, { 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x9167);
        EXPECT(gbc.pc(), 0x19de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 03B7
        gbc.setState(0xc0d5, 0x40cd, 0x3060, 0x363a, 0x7545, 0xcd0f, 0x1, 0x0);
        gbc.writeMem(0xc0d5, { 0x46 });
        gbc.writeMem(0xcd0f, { 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x40cd);
        EXPECT(gbc.pc(), 0xc0d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0d5), 0x46);
        EXPECT(gbc.readMem(0xcd0f), 0x69);
        // 46 03B8
        gbc.setState(0xd55b, 0x6248, 0x4660, 0x7ede, 0x7f13, 0x267c, 0x1, 0x0);
        gbc.writeMem(0x267c, { 0xb6 });
        gbc.writeMem(0xd55b, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x6248);
        EXPECT(gbc.pc(), 0xd55c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd55b), 0x46);
        // 46 03B9
        gbc.setState(0x5c2b, 0x4752, 0x61f0, 0x20c4, 0x63f3, 0xb363, 0x1, 0x0);
        gbc.writeMem(0x5c2b, { 0x46 });
        gbc.writeMem(0xb363, { 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x4752);
        EXPECT(gbc.pc(), 0x5c2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb363), 0xe2);
        // 46 03BA
        gbc.setState(0x3a30, 0x6af6, 0xf0e0, 0x65ad, 0x2b19, 0x2082, 0x1, 0x0);
        gbc.writeMem(0x2082, { 0xd1 });
        gbc.writeMem(0x3a30, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x6af6);
        EXPECT(gbc.pc(), 0x3a31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 03BB
        gbc.setState(0x4ff3, 0x71e6, 0x71e0, 0xd8d1, 0xc715, 0xa62e, 0x1, 0x1);
        gbc.writeMem(0x4ff3, { 0x46 });
        gbc.writeMem(0xa62e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x71e6);
        EXPECT(gbc.pc(), 0x4ff4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa62e), 0xa9);
        // 46 03BC
        gbc.setState(0x1eb0, 0xff58, 0xc9e0, 0xff0f, 0x1c73, 0x9846, 0x0, 0x1);
        gbc.writeMem(0x1eb0, { 0x46 });
        gbc.writeMem(0x9846, { 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xff58);
        EXPECT(gbc.pc(), 0x1eb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9846), 0x90);
        // 46 03BD
        gbc.setState(0x10d4, 0x843, 0x1260, 0xe239, 0x18f3, 0x26e9, 0x1, 0x1);
        gbc.writeMem(0x10d4, { 0x46 });
        gbc.writeMem(0x26e9, { 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x843);
        EXPECT(gbc.pc(), 0x10d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 03BF
        gbc.setState(0x514d, 0x7e1, 0x93e0, 0xff6e, 0xb48b, 0xa714, 0x1, 0x1);
        gbc.writeMem(0x514d, { 0x46 });
        gbc.writeMem(0xa714, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x7e1);
        EXPECT(gbc.pc(), 0x514e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa714), 0xa2);
        // 46 03C0
        gbc.setState(0x866a, 0x4138, 0xc990, 0xae2a, 0x2b88, 0x91ab, 0x1, 0x1);
        gbc.writeMem(0x866a, { 0x46 });
        gbc.writeMem(0x91ab, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x4138);
        EXPECT(gbc.pc(), 0x866b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x866a), 0x46);
        EXPECT(gbc.readMem(0x91ab), 0x7f);
        // 46 03C1
        gbc.setState(0x1627, 0x1a9b, 0x3d0, 0xe727, 0xfdc2, 0xa24b, 0x1, 0x1);
        gbc.writeMem(0x1627, { 0x46 });
        gbc.writeMem(0xa24b, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x1a9b);
        EXPECT(gbc.pc(), 0x1628);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa24b), 0xb2);
        // 46 03C2
        gbc.setState(0xd5f1, 0x29e0, 0x3b80, 0x8577, 0x3b10, 0xd3c1, 0x0, 0x0);
        gbc.writeMem(0xd3c1, { 0xd0 });
        gbc.writeMem(0xd5f1, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x29e0);
        EXPECT(gbc.pc(), 0xd5f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3c1), 0xd0);
        EXPECT(gbc.readMem(0xd5f1), 0x46);
        // 46 03C3
        gbc.setState(0x5d, 0x9198, 0x32e0, 0xf7f6, 0xd49b, 0x3616, 0x0, 0x0);
        gbc.writeMem(0x5d, { 0x46 });
        gbc.writeMem(0x3616, { 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x9198);
        EXPECT(gbc.pc(), 0x5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 03C4
        gbc.setState(0xd795, 0x37f2, 0x2b40, 0x6f14, 0xaf3b, 0x8acd, 0x1, 0x0);
        gbc.writeMem(0x8acd, { 0x17 });
        gbc.writeMem(0xd795, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x37f2);
        EXPECT(gbc.pc(), 0xd796);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8acd), 0x17);
        EXPECT(gbc.readMem(0xd795), 0x46);
        // 46 03C5
        gbc.setState(0x67cd, 0xb954, 0x8250, 0xb312, 0x9e93, 0xf96e, 0x0, 0x0);
        gbc.writeMem(0x67cd, { 0x46 });
        gbc.writeMem(0xf96e, { 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xb954);
        EXPECT(gbc.pc(), 0x67ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf96e), 0x4e);
        // 46 03C6
        gbc.setState(0xec04, 0xb5be, 0x6ea0, 0x5005, 0xf24b, 0x1117, 0x1, 0x0);
        gbc.writeMem(0x1117, { 0xea });
        gbc.writeMem(0xec04, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xb5be);
        EXPECT(gbc.pc(), 0xec05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec04), 0x46);
        // 46 03C7
        gbc.setState(0x2910, 0x533e, 0x42f0, 0x24a7, 0xde7a, 0xdf1e, 0x0, 0x0);
        gbc.writeMem(0x2910, { 0x46 });
        gbc.writeMem(0xdf1e, { 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x533e);
        EXPECT(gbc.pc(), 0x2911);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf1e), 0x71);
        // 46 03C8
        gbc.setState(0xb3a5, 0x12ec, 0x1c80, 0xb9b5, 0x251a, 0xa839, 0x0, 0x1);
        gbc.writeMem(0xa839, { 0xe6 });
        gbc.writeMem(0xb3a5, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x12ec);
        EXPECT(gbc.pc(), 0xb3a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa839), 0xe6);
        EXPECT(gbc.readMem(0xb3a5), 0x46);
        // 46 03C9
        gbc.setState(0x6eea, 0x1b72, 0x8c20, 0xc8f7, 0x274b, 0x87d2, 0x0, 0x0);
        gbc.writeMem(0x6eea, { 0x46 });
        gbc.writeMem(0x87d2, { 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x1b72);
        EXPECT(gbc.pc(), 0x6eeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87d2), 0x26);
        // 46 03CA
        gbc.setState(0xd86d, 0x1f1, 0xb050, 0x43e1, 0xddf2, 0x8848, 0x1, 0x1);
        gbc.writeMem(0x8848, { 0x2b });
        gbc.writeMem(0xd86d, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x1f1);
        EXPECT(gbc.pc(), 0xd86e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8848), 0x2b);
        EXPECT(gbc.readMem(0xd86d), 0x46);
        // 46 03CB
        gbc.setState(0x10f2, 0x577c, 0x7660, 0xcfa3, 0xf9e5, 0x372c, 0x1, 0x1);
        gbc.writeMem(0x10f2, { 0x46 });
        gbc.writeMem(0x372c, { 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x577c);
        EXPECT(gbc.pc(), 0x10f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 03CC
        gbc.setState(0xc311, 0x5d86, 0xa760, 0x6e2a, 0x7dac, 0x655e, 0x1, 0x1);
        gbc.writeMem(0x655e, { 0x1 });
        gbc.writeMem(0xc311, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x5d86);
        EXPECT(gbc.pc(), 0xc312);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc311), 0x46);
        // 46 03CD
        gbc.setState(0x6c11, 0x49a9, 0x1f10, 0x23fa, 0xf749, 0xb268, 0x1, 0x1);
        gbc.writeMem(0x6c11, { 0x46 });
        gbc.writeMem(0xb268, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x49a9);
        EXPECT(gbc.pc(), 0x6c12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb268), 0x11);
        // 46 03CE
        gbc.setState(0xe89f, 0x304, 0xf310, 0xae32, 0x1a45, 0xf141, 0x1, 0x0);
        gbc.writeMem(0xe89f, { 0x46 });
        gbc.writeMem(0xf141, { 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x304);
        EXPECT(gbc.pc(), 0xe8a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe89f), 0x46);
        EXPECT(gbc.readMem(0xf141), 0x34);
        // 46 03CF
        gbc.setState(0xad98, 0xce05, 0xaec0, 0xf1d9, 0x9bef, 0x8f69, 0x1, 0x0);
        gbc.writeMem(0x8f69, { 0x9e });
        gbc.writeMem(0xad98, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xce05);
        EXPECT(gbc.pc(), 0xad99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f69), 0x9e);
        EXPECT(gbc.readMem(0xad98), 0x46);
        // 46 03D0
        gbc.setState(0x8c7c, 0xe8e0, 0x64d0, 0x7f85, 0x1dd5, 0xc0ec, 0x0, 0x1);
        gbc.writeMem(0x8c7c, { 0x46 });
        gbc.writeMem(0xc0ec, { 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xe8e0);
        EXPECT(gbc.pc(), 0x8c7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c7c), 0x46);
        EXPECT(gbc.readMem(0xc0ec), 0x7c);
        // 46 03D1
        gbc.setState(0xebe7, 0xad15, 0x90a0, 0xce52, 0x940f, 0xd0a6, 0x0, 0x0);
        gbc.writeMem(0xd0a6, { 0x6a });
        gbc.writeMem(0xebe7, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xad15);
        EXPECT(gbc.pc(), 0xebe8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0a6), 0x6a);
        EXPECT(gbc.readMem(0xebe7), 0x46);
        // 46 03D2
        gbc.setState(0x536a, 0x91cd, 0x3cb0, 0xfaf0, 0xb697, 0x22b4, 0x1, 0x1);
        gbc.writeMem(0x22b4, { 0xfb });
        gbc.writeMem(0x536a, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x91cd);
        EXPECT(gbc.pc(), 0x536b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 03D3
        gbc.setState(0x5f2c, 0x70e3, 0xc420, 0xa074, 0x1e38, 0x3da8, 0x0, 0x0);
        gbc.writeMem(0x3da8, { 0x3d });
        gbc.writeMem(0x5f2c, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x70e3);
        EXPECT(gbc.pc(), 0x5f2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 03D5
        gbc.setState(0xb7bf, 0x8663, 0xcb20, 0x97e, 0xd690, 0xc941, 0x0, 0x0);
        gbc.writeMem(0xb7bf, { 0x46 });
        gbc.writeMem(0xc941, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x8663);
        EXPECT(gbc.pc(), 0xb7c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7bf), 0x46);
        EXPECT(gbc.readMem(0xc941), 0x6b);
        // 46 03D6
        gbc.setState(0x71d, 0xcd54, 0xa30, 0xa550, 0xd1d3, 0x7286, 0x1, 0x1);
        gbc.writeMem(0x71d, { 0x46 });
        gbc.writeMem(0x7286, { 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xcd54);
        EXPECT(gbc.pc(), 0x71e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 03D7
        gbc.setState(0x459b, 0x458, 0xf200, 0x8a74, 0x14a6, 0xe9cd, 0x0, 0x0);
        gbc.writeMem(0x459b, { 0x46 });
        gbc.writeMem(0xe9cd, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x458);
        EXPECT(gbc.pc(), 0x459c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9cd), 0xd);
        // 46 03D8
        gbc.setState(0x2b2, 0x9367, 0xb560, 0x35d0, 0x6106, 0x746, 0x0, 0x1);
        gbc.writeMem(0x2b2, { 0x46 });
        gbc.writeMem(0x746, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x9367);
        EXPECT(gbc.pc(), 0x2b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 03DA
        gbc.setState(0x760c, 0x5741, 0xba00, 0x52ae, 0x2fcc, 0x62ba, 0x0, 0x1);
        gbc.writeMem(0x62ba, { 0xef });
        gbc.writeMem(0x760c, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x5741);
        EXPECT(gbc.pc(), 0x760d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 46 03DB
        gbc.setState(0x13d9, 0x59e3, 0x9830, 0x8710, 0x7a25, 0xadae, 0x0, 0x0);
        gbc.writeMem(0x13d9, { 0x46 });
        gbc.writeMem(0xadae, { 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x59e3);
        EXPECT(gbc.pc(), 0x13da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadae), 0xc6);
        // 46 03DC
        gbc.setState(0x2bf2, 0x65e4, 0x6cd0, 0x7e6c, 0xe1e4, 0xac32, 0x0, 0x1);
        gbc.writeMem(0x2bf2, { 0x46 });
        gbc.writeMem(0xac32, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x65e4);
        EXPECT(gbc.pc(), 0x2bf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac32), 0x76);
        // 46 03DD
        gbc.setState(0xbdc7, 0xa939, 0x53a0, 0xd10, 0xfb8a, 0xb3b3, 0x0, 0x1);
        gbc.writeMem(0xb3b3, { 0x13 });
        gbc.writeMem(0xbdc7, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xa939);
        EXPECT(gbc.pc(), 0xbdc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3b3), 0x13);
        EXPECT(gbc.readMem(0xbdc7), 0x46);
        // 46 03DE
        gbc.setState(0x8d7d, 0x25ff, 0x1380, 0xcdc1, 0x79c4, 0x36aa, 0x0, 0x0);
        gbc.writeMem(0x36aa, { 0x3a });
        gbc.writeMem(0x8d7d, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x25ff);
        EXPECT(gbc.pc(), 0x8d7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d7d), 0x46);
        // 46 03DF
        gbc.setState(0xeebb, 0x391c, 0xea70, 0x6d2a, 0x204b, 0x3927, 0x1, 0x0);
        gbc.writeMem(0x3927, { 0x92 });
        gbc.writeMem(0xeebb, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x391c);
        EXPECT(gbc.pc(), 0xeebc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeebb), 0x46);
        // 46 03E0
        gbc.setState(0xae1e, 0x56f8, 0xc0f0, 0xc7bf, 0x25dc, 0xab37, 0x1, 0x0);
        gbc.writeMem(0xab37, { 0x86 });
        gbc.writeMem(0xae1e, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x56f8);
        EXPECT(gbc.pc(), 0xae1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab37), 0x86);
        EXPECT(gbc.readMem(0xae1e), 0x46);
        // 46 03E1
        gbc.setState(0x4b9d, 0x12d6, 0x98a0, 0xe389, 0xcf9b, 0x3a9b, 0x1, 0x0);
        gbc.writeMem(0x3a9b, { 0xec });
        gbc.writeMem(0x4b9d, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x12d6);
        EXPECT(gbc.pc(), 0x4b9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 46 03E2
        gbc.setState(0x74, 0xbf31, 0xd430, 0xd083, 0x89df, 0x69e4, 0x0, 0x0);
        gbc.writeMem(0x74, { 0x46 });
        gbc.writeMem(0x69e4, { 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xbf31);
        EXPECT(gbc.pc(), 0x75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 46 03E3
        gbc.setState(0xbbfc, 0x9658, 0x97a0, 0x2d1a, 0xd4d4, 0xdf19, 0x0, 0x1);
        gbc.writeMem(0xbbfc, { 0x46 });
        gbc.writeMem(0xdf19, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x9658);
        EXPECT(gbc.pc(), 0xbbfd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbfc), 0x46);
        EXPECT(gbc.readMem(0xdf19), 0x11);
        // 46 03E4
        gbc.setState(0x6be5, 0x5c85, 0xc1e0, 0xa76e, 0xccc, 0xa269, 0x1, 0x1);
        gbc.writeMem(0x6be5, { 0x46 });
        gbc.writeMem(0xa269, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x5c85);
        EXPECT(gbc.pc(), 0x6be6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa269), 0x4d);
        // 46 03E5
        gbc.setState(0x6847, 0xfc4d, 0xfba0, 0x409a, 0xa853, 0xc815, 0x0, 0x1);
        gbc.writeMem(0x6847, { 0x46 });
        gbc.writeMem(0xc815, { 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xfc4d);
        EXPECT(gbc.pc(), 0x6848);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc815), 0x69);
        // 46 03E6
        gbc.setState(0x26c6, 0x3f0, 0x5c0, 0x182a, 0xb894, 0x850a, 0x1, 0x0);
        gbc.writeMem(0x26c6, { 0x46 });
        gbc.writeMem(0x850a, { 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x3f0);
        EXPECT(gbc.pc(), 0x26c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x850a), 0x92);
        // 46 03E7
        gbc.setState(0x2226, 0x4815, 0x8cf0, 0xb1b2, 0x24e6, 0x7786, 0x0, 0x0);
        gbc.writeMem(0x2226, { 0x46 });
        gbc.writeMem(0x7786, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x4815);
        EXPECT(gbc.pc(), 0x2227);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
    }
}
#endif
