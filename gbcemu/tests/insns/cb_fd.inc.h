    TEST(gbcemu, opcode_cb_fd) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB FD 0000
        gbc.setState(0xb29c, 0x669, 0x8e30, 0x4e7, 0x62e1, 0x2494, 0x0, 0x0);
        gbc.writeMem(0xb29c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x669, gbc.sp());
        EXPECT(0xb29e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb29c));
        EXPECT(0xfd, gbc.readMem(0xb29d));
        // CB FD 0001
        gbc.setState(0x5434, 0x68a2, 0x6130, 0x8db3, 0x66be, 0xacb7, 0x1, 0x1);
        gbc.writeMem(0x5434, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x68a2, gbc.sp());
        EXPECT(0x5436, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0002
        gbc.setState(0x487c, 0xe193, 0xefe0, 0xb19c, 0x9b00, 0x8fa9, 0x0, 0x0);
        gbc.writeMem(0x487c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0xe193, gbc.sp());
        EXPECT(0x487e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0003
        gbc.setState(0xe468, 0x7319, 0x4760, 0x49af, 0x1529, 0x8318, 0x1, 0x1);
        gbc.writeMem(0xe468, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x7319, gbc.sp());
        EXPECT(0xe46a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe468));
        EXPECT(0xfd, gbc.readMem(0xe469));
        // CB FD 0004
        gbc.setState(0x778d, 0xa9ff, 0x1f10, 0xbc3c, 0x497d, 0xb16f, 0x1, 0x1);
        gbc.writeMem(0x778d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xa9ff, gbc.sp());
        EXPECT(0x778f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0007
        gbc.setState(0x7fde, 0x63df, 0xb560, 0xf770, 0x35a3, 0x9c47, 0x1, 0x0);
        gbc.writeMem(0x7fde, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x63df, gbc.sp());
        EXPECT(0x7fe0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 000A
        gbc.setState(0xd481, 0x9123, 0x520, 0x71ce, 0x7b2e, 0xc723, 0x1, 0x0);
        gbc.writeMem(0xd481, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x9123, gbc.sp());
        EXPECT(0xd483, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd481));
        EXPECT(0xfd, gbc.readMem(0xd482));
        // CB FD 000B
        gbc.setState(0xc981, 0x3a5c, 0x4b10, 0x53bd, 0xa4bd, 0x40e3, 0x1, 0x0);
        gbc.writeMem(0xc981, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x3a5c, gbc.sp());
        EXPECT(0xc983, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc981));
        EXPECT(0xfd, gbc.readMem(0xc982));
        // CB FD 000C
        gbc.setState(0xdfc5, 0xd6f5, 0x3330, 0xb225, 0xcdee, 0xd4a6, 0x1, 0x1);
        gbc.writeMem(0xdfc5, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0xd6f5, gbc.sp());
        EXPECT(0xdfc7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdfc5));
        EXPECT(0xfd, gbc.readMem(0xdfc6));
        // CB FD 000D
        gbc.setState(0x9443, 0xf221, 0x560, 0xadc, 0x5a7d, 0xa70, 0x0, 0x1);
        gbc.writeMem(0x9443, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0xf221, gbc.sp());
        EXPECT(0x9445, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9443));
        EXPECT(0xfd, gbc.readMem(0x9444));
        // CB FD 000E
        gbc.setState(0x388e, 0x3ebc, 0x80e0, 0xef89, 0x4506, 0x5bbd, 0x1, 0x1);
        gbc.writeMem(0x388e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x3ebc, gbc.sp());
        EXPECT(0x3890, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 000F
        gbc.setState(0x5ade, 0xc704, 0x5ef0, 0xa919, 0xc1f0, 0xfb0, 0x1, 0x0);
        gbc.writeMem(0x5ade, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xc704, gbc.sp());
        EXPECT(0x5ae0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0010
        gbc.setState(0x9c9f, 0x77f9, 0xf4d0, 0x2a8e, 0x11a2, 0x741e, 0x1, 0x1);
        gbc.writeMem(0x9c9f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x77f9, gbc.sp());
        EXPECT(0x9ca1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c9f));
        EXPECT(0xfd, gbc.readMem(0x9ca0));
        // CB FD 0011
        gbc.setState(0xb2a0, 0x2f05, 0x15c0, 0x8858, 0x3b71, 0x80d0, 0x0, 0x1);
        gbc.writeMem(0xb2a0, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x2f05, gbc.sp());
        EXPECT(0xb2a2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb2a0));
        EXPECT(0xfd, gbc.readMem(0xb2a1));
        // CB FD 0012
        gbc.setState(0x1f5e, 0x29d7, 0x4c00, 0xe1c, 0xc2e, 0xff27, 0x1, 0x1);
        gbc.writeMem(0x1f5e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x29d7, gbc.sp());
        EXPECT(0x1f60, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0013
        gbc.setState(0x2150, 0x9ecb, 0xc850, 0x6cb3, 0xafe0, 0xd3a3, 0x1, 0x0);
        gbc.writeMem(0x2150, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x9ecb, gbc.sp());
        EXPECT(0x2152, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0014
        gbc.setState(0xcb4c, 0x5e0f, 0x8af0, 0xdac4, 0x5a72, 0xf1cf, 0x1, 0x0);
        gbc.writeMem(0xcb4c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x5e0f, gbc.sp());
        EXPECT(0xcb4e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcb4c));
        EXPECT(0xfd, gbc.readMem(0xcb4d));
        // CB FD 0015
        gbc.setState(0x6b67, 0xaf41, 0x3e60, 0xc495, 0xb28a, 0x6c08, 0x1, 0x1);
        gbc.writeMem(0x6b67, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xaf41, gbc.sp());
        EXPECT(0x6b69, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0017
        gbc.setState(0xe5c7, 0x109, 0x9f30, 0x4dc4, 0xb2f, 0xa822, 0x0, 0x0);
        gbc.writeMem(0xe5c7, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0x109, gbc.sp());
        EXPECT(0xe5c9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe5c7));
        EXPECT(0xfd, gbc.readMem(0xe5c8));
        // CB FD 0018
        gbc.setState(0x457a, 0x9ca4, 0xe0d0, 0x6752, 0x6733, 0xa1fd, 0x0, 0x0);
        gbc.writeMem(0x457a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x9ca4, gbc.sp());
        EXPECT(0x457c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0019
        gbc.setState(0x83f5, 0x23ba, 0x4360, 0x82ed, 0x3095, 0xd0d2, 0x1, 0x1);
        gbc.writeMem(0x83f5, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x23ba, gbc.sp());
        EXPECT(0x83f7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x83f5));
        EXPECT(0xfd, gbc.readMem(0x83f6));
        // CB FD 001A
        gbc.setState(0x7442, 0x9c6e, 0x9610, 0x1a10, 0x5841, 0x831c, 0x0, 0x0);
        gbc.writeMem(0x7442, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x9c6e, gbc.sp());
        EXPECT(0x7444, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 001B
        gbc.setState(0x63d7, 0xdcb, 0x5740, 0xefc8, 0xa727, 0x488c, 0x1, 0x0);
        gbc.writeMem(0x63d7, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xdcb, gbc.sp());
        EXPECT(0x63d9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 001C
        gbc.setState(0x2df6, 0xe5fd, 0xe060, 0x44c0, 0x7558, 0x5fb6, 0x0, 0x1);
        gbc.writeMem(0x2df6, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0xe5fd, gbc.sp());
        EXPECT(0x2df8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 001D
        gbc.setState(0x4a1f, 0x7914, 0xb8e0, 0xb575, 0xd8e2, 0x4897, 0x1, 0x1);
        gbc.writeMem(0x4a1f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x7914, gbc.sp());
        EXPECT(0x4a21, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 001E
        gbc.setState(0x9d9a, 0x1b2e, 0xfb00, 0x2f2a, 0xb628, 0x3493, 0x1, 0x1);
        gbc.writeMem(0x9d9a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x1b2e, gbc.sp());
        EXPECT(0x9d9c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d9a));
        EXPECT(0xfd, gbc.readMem(0x9d9b));
        // CB FD 001F
        gbc.setState(0x3cae, 0xa28c, 0xa510, 0xf1f2, 0xcb9b, 0x3269, 0x0, 0x1);
        gbc.writeMem(0x3cae, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0xa28c, gbc.sp());
        EXPECT(0x3cb0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0020
        gbc.setState(0x278b, 0xe63a, 0x5f40, 0xf507, 0x1890, 0x6b24, 0x1, 0x1);
        gbc.writeMem(0x278b, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xe63a, gbc.sp());
        EXPECT(0x278d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0021
        gbc.setState(0x6131, 0xb0ed, 0x39c0, 0x391e, 0x3ef7, 0xd73e, 0x1, 0x0);
        gbc.writeMem(0x6131, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xb0ed, gbc.sp());
        EXPECT(0x6133, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0022
        gbc.setState(0xa445, 0xa68d, 0xc9b0, 0x5eda, 0xa1d6, 0x9061, 0x1, 0x1);
        gbc.writeMem(0xa445, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0xa68d, gbc.sp());
        EXPECT(0xa447, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa445));
        EXPECT(0xfd, gbc.readMem(0xa446));
        // CB FD 0024
        gbc.setState(0xc320, 0x27d0, 0x11f0, 0xb08c, 0xb58d, 0x120c, 0x1, 0x1);
        gbc.writeMem(0xc320, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x27d0, gbc.sp());
        EXPECT(0xc322, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc320));
        EXPECT(0xfd, gbc.readMem(0xc321));
        // CB FD 0025
        gbc.setState(0xe8e5, 0xf16, 0x5960, 0x5210, 0xb1f1, 0xe570, 0x0, 0x1);
        gbc.writeMem(0xe8e5, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0xf16, gbc.sp());
        EXPECT(0xe8e7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe8e5));
        EXPECT(0xfd, gbc.readMem(0xe8e6));
        // CB FD 0026
        gbc.setState(0x86c3, 0x64d2, 0x6630, 0x9b0f, 0x7872, 0xfd52, 0x1, 0x1);
        gbc.writeMem(0x86c3, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x64d2, gbc.sp());
        EXPECT(0x86c5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x86c3));
        EXPECT(0xfd, gbc.readMem(0x86c4));
        // CB FD 0027
        gbc.setState(0xd989, 0x738f, 0x5820, 0xa9cf, 0x17ca, 0x3e17, 0x1, 0x1);
        gbc.writeMem(0xd989, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x738f, gbc.sp());
        EXPECT(0xd98b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd989));
        EXPECT(0xfd, gbc.readMem(0xd98a));
        // CB FD 0029
        gbc.setState(0x3a94, 0x11b9, 0xe800, 0x8930, 0x9862, 0x4b68, 0x0, 0x1);
        gbc.writeMem(0x3a94, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x11b9, gbc.sp());
        EXPECT(0x3a96, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 002A
        gbc.setState(0x59b0, 0x6d85, 0x8790, 0xec44, 0x31b2, 0xddf8, 0x0, 0x1);
        gbc.writeMem(0x59b0, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x6d85, gbc.sp());
        EXPECT(0x59b2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 002B
        gbc.setState(0x949d, 0x47ee, 0xb50, 0xc8f8, 0xeb60, 0xc738, 0x0, 0x1);
        gbc.writeMem(0x949d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x47ee, gbc.sp());
        EXPECT(0x949f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x949d));
        EXPECT(0xfd, gbc.readMem(0x949e));
        // CB FD 002C
        gbc.setState(0x7f2c, 0xaf1, 0x5980, 0x6cea, 0xc696, 0xe5dc, 0x1, 0x1);
        gbc.writeMem(0x7f2c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0xaf1, gbc.sp());
        EXPECT(0x7f2e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 002D
        gbc.setState(0xc65, 0x6a23, 0x2a10, 0x33d0, 0xf324, 0x9047, 0x0, 0x0);
        gbc.writeMem(0xc65, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x6a23, gbc.sp());
        EXPECT(0xc67, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 002E
        gbc.setState(0x3762, 0xe910, 0x6110, 0x13eb, 0x58a8, 0xa029, 0x1, 0x1);
        gbc.writeMem(0x3762, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0xe910, gbc.sp());
        EXPECT(0x3764, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 002F
        gbc.setState(0xdc0a, 0x7a5f, 0x8990, 0xe4d8, 0x7dd1, 0x4286, 0x0, 0x0);
        gbc.writeMem(0xdc0a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x7a5f, gbc.sp());
        EXPECT(0xdc0c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc0a));
        EXPECT(0xfd, gbc.readMem(0xdc0b));
        // CB FD 0030
        gbc.setState(0xc85c, 0xf3e6, 0x1970, 0x8f77, 0xe6, 0x7935, 0x0, 0x0);
        gbc.writeMem(0xc85c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0xf3e6, gbc.sp());
        EXPECT(0xc85e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc85c));
        EXPECT(0xfd, gbc.readMem(0xc85d));
        // CB FD 0031
        gbc.setState(0xc573, 0x99b5, 0xb950, 0x7e48, 0x8319, 0xe8f7, 0x0, 0x0);
        gbc.writeMem(0xc573, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x99b5, gbc.sp());
        EXPECT(0xc575, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc573));
        EXPECT(0xfd, gbc.readMem(0xc574));
        // CB FD 0032
        gbc.setState(0x19c8, 0xe28b, 0x4660, 0x8670, 0x45d7, 0x72e4, 0x1, 0x1);
        gbc.writeMem(0x19c8, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0xe28b, gbc.sp());
        EXPECT(0x19ca, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0033
        gbc.setState(0x73e9, 0xfbef, 0x4280, 0x31db, 0xa38d, 0x95e6, 0x1, 0x1);
        gbc.writeMem(0x73e9, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0xfbef, gbc.sp());
        EXPECT(0x73eb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0034
        gbc.setState(0xcb2f, 0x85e3, 0xd540, 0x394c, 0xd9da, 0x5e31, 0x0, 0x0);
        gbc.writeMem(0xcb2f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x85e3, gbc.sp());
        EXPECT(0xcb31, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcb2f));
        EXPECT(0xfd, gbc.readMem(0xcb30));
        // CB FD 0035
        gbc.setState(0xaaf0, 0x8851, 0x9f10, 0x56d4, 0x2d52, 0x8222, 0x0, 0x0);
        gbc.writeMem(0xaaf0, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0x8851, gbc.sp());
        EXPECT(0xaaf2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaaf0));
        EXPECT(0xfd, gbc.readMem(0xaaf1));
        // CB FD 0036
        gbc.setState(0x175c, 0x65c0, 0x4af0, 0x5180, 0xcaeb, 0xa440, 0x0, 0x1);
        gbc.writeMem(0x175c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x65c0, gbc.sp());
        EXPECT(0x175e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0037
        gbc.setState(0xb724, 0x9dec, 0x1790, 0xd579, 0x1dab, 0x8b02, 0x0, 0x0);
        gbc.writeMem(0xb724, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x9dec, gbc.sp());
        EXPECT(0xb726, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb724));
        EXPECT(0xfd, gbc.readMem(0xb725));
        // CB FD 0038
        gbc.setState(0x3292, 0xa070, 0xcef0, 0x3ea8, 0x5211, 0xb5da, 0x0, 0x0);
        gbc.writeMem(0x3292, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0xa070, gbc.sp());
        EXPECT(0x3294, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0039
        gbc.setState(0x860e, 0x34fa, 0x5020, 0xc816, 0x98b0, 0xb95b, 0x0, 0x0);
        gbc.writeMem(0x860e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x34fa, gbc.sp());
        EXPECT(0x8610, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x860e));
        EXPECT(0xfd, gbc.readMem(0x860f));
        // CB FD 003A
        gbc.setState(0x543, 0xa3ad, 0xb800, 0x7637, 0xd6d8, 0x95a8, 0x1, 0x0);
        gbc.writeMem(0x543, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xa3ad, gbc.sp());
        EXPECT(0x545, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 003B
        gbc.setState(0x30d5, 0xcc8d, 0x400, 0x86de, 0xd1a1, 0x738d, 0x0, 0x0);
        gbc.writeMem(0x30d5, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xcc8d, gbc.sp());
        EXPECT(0x30d7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 003C
        gbc.setState(0xe6b5, 0x3e7, 0x1ca0, 0xf04c, 0xb0b3, 0xd6c3, 0x1, 0x0);
        gbc.writeMem(0xe6b5, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x3e7, gbc.sp());
        EXPECT(0xe6b7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe6b5));
        EXPECT(0xfd, gbc.readMem(0xe6b6));
        // CB FD 003D
        gbc.setState(0xa6f5, 0xb02b, 0x8610, 0x5f0e, 0x56d6, 0xc249, 0x0, 0x1);
        gbc.writeMem(0xa6f5, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0xb02b, gbc.sp());
        EXPECT(0xa6f7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa6f5));
        EXPECT(0xfd, gbc.readMem(0xa6f6));
        // CB FD 003E
        gbc.setState(0x56fe, 0x9c07, 0xf430, 0x6f13, 0xfc0c, 0xbfa6, 0x0, 0x0);
        gbc.writeMem(0x56fe, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x9c07, gbc.sp());
        EXPECT(0x5700, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0040
        gbc.setState(0x7ece, 0x71f3, 0xdaf0, 0xcd7b, 0x12e1, 0xc78b, 0x0, 0x1);
        gbc.writeMem(0x7ece, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x71f3, gbc.sp());
        EXPECT(0x7ed0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0041
        gbc.setState(0x11d9, 0x7f26, 0x35c0, 0x2505, 0x6aa9, 0xa8c9, 0x1, 0x0);
        gbc.writeMem(0x11d9, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x7f26, gbc.sp());
        EXPECT(0x11db, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0042
        gbc.setState(0x4f68, 0xa9a0, 0xbd70, 0x899b, 0xec8e, 0xbed9, 0x0, 0x1);
        gbc.writeMem(0x4f68, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0xa9a0, gbc.sp());
        EXPECT(0x4f6a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0043
        gbc.setState(0x4092, 0x3545, 0xb80, 0xaec7, 0xccb3, 0x4044, 0x1, 0x0);
        gbc.writeMem(0x4092, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x3545, gbc.sp());
        EXPECT(0x4094, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0044
        gbc.setState(0x8bf7, 0x5a8b, 0x5b40, 0xc031, 0x7863, 0x66a9, 0x0, 0x1);
        gbc.writeMem(0x8bf7, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x5a8b, gbc.sp());
        EXPECT(0x8bf9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8bf7));
        EXPECT(0xfd, gbc.readMem(0x8bf8));
        // CB FD 0045
        gbc.setState(0x8afa, 0x432e, 0x4d0, 0xc80, 0xd4e5, 0x1234, 0x0, 0x1);
        gbc.writeMem(0x8afa, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x432e, gbc.sp());
        EXPECT(0x8afc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8afa));
        EXPECT(0xfd, gbc.readMem(0x8afb));
        // CB FD 0046
        gbc.setState(0x387d, 0xa8c2, 0xdcd0, 0x7201, 0xc648, 0x728e, 0x0, 0x0);
        gbc.writeMem(0x387d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0xa8c2, gbc.sp());
        EXPECT(0x387f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0047
        gbc.setState(0x1434, 0xfa96, 0x2df0, 0xef3e, 0xabea, 0xe950, 0x0, 0x1);
        gbc.writeMem(0x1434, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0xfa96, gbc.sp());
        EXPECT(0x1436, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0048
        gbc.setState(0xa94a, 0xff1a, 0x6940, 0x2979, 0xab7c, 0x5572, 0x0, 0x1);
        gbc.writeMem(0xa94a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0xff1a, gbc.sp());
        EXPECT(0xa94c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa94a));
        EXPECT(0xfd, gbc.readMem(0xa94b));
        // CB FD 0049
        gbc.setState(0xdcf9, 0xe3b5, 0xd190, 0xdb3e, 0x2ebe, 0xd0ce, 0x0, 0x0);
        gbc.writeMem(0xdcf9, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0xe3b5, gbc.sp());
        EXPECT(0xdcfb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdcf9));
        EXPECT(0xfd, gbc.readMem(0xdcfa));
        // CB FD 004A
        gbc.setState(0xe116, 0xa68e, 0xfd0, 0x9011, 0x7a99, 0x49db, 0x0, 0x0);
        gbc.writeMem(0xe116, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0xa68e, gbc.sp());
        EXPECT(0xe118, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe116));
        EXPECT(0xfd, gbc.readMem(0xe117));
        // CB FD 004B
        gbc.setState(0x1ded, 0x4e38, 0xdfa0, 0x5c23, 0xccc5, 0x433, 0x0, 0x0);
        gbc.writeMem(0x1ded, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x4e38, gbc.sp());
        EXPECT(0x1def, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 004C
        gbc.setState(0xab4f, 0x291, 0x1b70, 0xcd7d, 0xb9, 0x569e, 0x1, 0x1);
        gbc.writeMem(0xab4f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x291, gbc.sp());
        EXPECT(0xab51, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab4f));
        EXPECT(0xfd, gbc.readMem(0xab50));
        // CB FD 004D
        gbc.setState(0x134f, 0xc2be, 0x7b70, 0x395f, 0x5db1, 0xcb35, 0x0, 0x0);
        gbc.writeMem(0x134f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0xc2be, gbc.sp());
        EXPECT(0x1351, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 004E
        gbc.setState(0x192d, 0x35c4, 0x5e00, 0xa129, 0xdbe8, 0xe71d, 0x0, 0x1);
        gbc.writeMem(0x192d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x35c4, gbc.sp());
        EXPECT(0x192f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 004F
        gbc.setState(0x205e, 0x4610, 0xef20, 0x404e, 0xa2b6, 0x35d5, 0x0, 0x1);
        gbc.writeMem(0x205e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x4610, gbc.sp());
        EXPECT(0x2060, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0051
        gbc.setState(0x5311, 0xd3a7, 0x2950, 0xed1b, 0x376a, 0x80a1, 0x1, 0x1);
        gbc.writeMem(0x5311, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0xd3a7, gbc.sp());
        EXPECT(0x5313, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0052
        gbc.setState(0xbfa, 0x7c69, 0x5b50, 0xb904, 0x85e3, 0x2b0a, 0x1, 0x0);
        gbc.writeMem(0xbfa, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x7c69, gbc.sp());
        EXPECT(0xbfc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0053
        gbc.setState(0x63cb, 0x7a33, 0x4230, 0x4d95, 0x45e5, 0x4aac, 0x0, 0x1);
        gbc.writeMem(0x63cb, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x7a33, gbc.sp());
        EXPECT(0x63cd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0054
        gbc.setState(0x81da, 0xcb71, 0xcbc0, 0xbf3f, 0x7319, 0x463d, 0x0, 0x1);
        gbc.writeMem(0x81da, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xcb71, gbc.sp());
        EXPECT(0x81dc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x81da));
        EXPECT(0xfd, gbc.readMem(0x81db));
        // CB FD 0055
        gbc.setState(0x780b, 0x9708, 0xc5e0, 0xc8d8, 0x4c5f, 0x6a2e, 0x0, 0x0);
        gbc.writeMem(0x780b, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x9708, gbc.sp());
        EXPECT(0x780d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0056
        gbc.setState(0xe6e, 0xc95e, 0x2470, 0x526d, 0x39ca, 0xfdea, 0x0, 0x1);
        gbc.writeMem(0xe6e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0xc95e, gbc.sp());
        EXPECT(0xe70, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0057
        gbc.setState(0xec92, 0xd45d, 0xcde0, 0xea64, 0xd72f, 0xbb77, 0x0, 0x0);
        gbc.writeMem(0xec92, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0xd45d, gbc.sp());
        EXPECT(0xec94, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xec92));
        EXPECT(0xfd, gbc.readMem(0xec93));
        // CB FD 0058
        gbc.setState(0xe83e, 0x3a57, 0x1ca0, 0x86a, 0x72c, 0xc57b, 0x1, 0x1);
        gbc.writeMem(0xe83e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x3a57, gbc.sp());
        EXPECT(0xe840, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe83e));
        EXPECT(0xfd, gbc.readMem(0xe83f));
        // CB FD 0059
        gbc.setState(0xa0f5, 0xd004, 0x8b50, 0xa18d, 0xb9b2, 0x7a2c, 0x0, 0x0);
        gbc.writeMem(0xa0f5, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xd004, gbc.sp());
        EXPECT(0xa0f7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa0f5));
        EXPECT(0xfd, gbc.readMem(0xa0f6));
        // CB FD 005A
        gbc.setState(0x851f, 0x82cb, 0xa0c0, 0x2209, 0x1823, 0x4dc8, 0x1, 0x1);
        gbc.writeMem(0x851f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x82cb, gbc.sp());
        EXPECT(0x8521, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x851f));
        EXPECT(0xfd, gbc.readMem(0x8520));
        // CB FD 005C
        gbc.setState(0x86cf, 0xc3c, 0xb270, 0x7bc, 0x5696, 0x79aa, 0x1, 0x1);
        gbc.writeMem(0x86cf, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xc3c, gbc.sp());
        EXPECT(0x86d1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x86cf));
        EXPECT(0xfd, gbc.readMem(0x86d0));
        // CB FD 005D
        gbc.setState(0xbec9, 0xf215, 0x8c40, 0x3163, 0x60c6, 0x7910, 0x0, 0x1);
        gbc.writeMem(0xbec9, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0xf215, gbc.sp());
        EXPECT(0xbecb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbec9));
        EXPECT(0xfd, gbc.readMem(0xbeca));
        // CB FD 005E
        gbc.setState(0x8e6d, 0xe0f5, 0xa550, 0xdac9, 0x673e, 0xba4f, 0x0, 0x0);
        gbc.writeMem(0x8e6d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xe0f5, gbc.sp());
        EXPECT(0x8e6f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e6d));
        EXPECT(0xfd, gbc.readMem(0x8e6e));
        // CB FD 005F
        gbc.setState(0x4a71, 0x64a8, 0xb080, 0x3e83, 0x3402, 0x6dea, 0x0, 0x1);
        gbc.writeMem(0x4a71, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x64a8, gbc.sp());
        EXPECT(0x4a73, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0060
        gbc.setState(0x3c8f, 0x523b, 0x2280, 0x372a, 0x3ab8, 0x25eb, 0x1, 0x1);
        gbc.writeMem(0x3c8f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x523b, gbc.sp());
        EXPECT(0x3c91, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0061
        gbc.setState(0x691c, 0x1e92, 0x7560, 0x19c4, 0x993c, 0x3815, 0x1, 0x0);
        gbc.writeMem(0x691c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x1e92, gbc.sp());
        EXPECT(0x691e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0062
        gbc.setState(0xc27d, 0xf6b, 0xdb70, 0x6154, 0xf636, 0xe5f4, 0x0, 0x0);
        gbc.writeMem(0xc27d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xf6b, gbc.sp());
        EXPECT(0xc27f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc27d));
        EXPECT(0xfd, gbc.readMem(0xc27e));
        // CB FD 0063
        gbc.setState(0xb662, 0x7a31, 0x90c0, 0x8752, 0x48ec, 0x6b85, 0x1, 0x1);
        gbc.writeMem(0xb662, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0x7a31, gbc.sp());
        EXPECT(0xb664, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb662));
        EXPECT(0xfd, gbc.readMem(0xb663));
        // CB FD 0064
        gbc.setState(0xd3e8, 0x83ba, 0x5390, 0x2a6e, 0xf178, 0x20db, 0x0, 0x0);
        gbc.writeMem(0xd3e8, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x83ba, gbc.sp());
        EXPECT(0xd3ea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd3e8));
        EXPECT(0xfd, gbc.readMem(0xd3e9));
        // CB FD 0065
        gbc.setState(0x7fc7, 0x4e93, 0x8050, 0xef1e, 0xdaa4, 0xbdae, 0x0, 0x1);
        gbc.writeMem(0x7fc7, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x4e93, gbc.sp());
        EXPECT(0x7fc9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0066
        gbc.setState(0x1200, 0x8af3, 0xd520, 0x3f82, 0x2d05, 0xcd4, 0x1, 0x0);
        gbc.writeMem(0x1200, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x8af3, gbc.sp());
        EXPECT(0x1202, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0067
        gbc.setState(0xb0bd, 0x3ce1, 0x29d0, 0x2197, 0x1b75, 0xc6cf, 0x0, 0x1);
        gbc.writeMem(0xb0bd, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x3ce1, gbc.sp());
        EXPECT(0xb0bf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb0bd));
        EXPECT(0xfd, gbc.readMem(0xb0be));
        // CB FD 0068
        gbc.setState(0x298, 0xc463, 0x5aa0, 0xbf8e, 0x38f, 0xbd9, 0x0, 0x1);
        gbc.writeMem(0x298, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0xc463, gbc.sp());
        EXPECT(0x29a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0069
        gbc.setState(0xcb1c, 0xd5f1, 0x8000, 0x8f84, 0x858d, 0x1a5c, 0x0, 0x1);
        gbc.writeMem(0xcb1c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0xd5f1, gbc.sp());
        EXPECT(0xcb1e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcb1c));
        EXPECT(0xfd, gbc.readMem(0xcb1d));
        // CB FD 006A
        gbc.setState(0x466e, 0xcf50, 0x28b0, 0xeaeb, 0x910a, 0x632c, 0x1, 0x1);
        gbc.writeMem(0x466e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xcf50, gbc.sp());
        EXPECT(0x4670, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 006B
        gbc.setState(0x3a92, 0xae, 0x9060, 0xf565, 0x993, 0x5d05, 0x0, 0x0);
        gbc.writeMem(0x3a92, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xae, gbc.sp());
        EXPECT(0x3a94, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 006C
        gbc.setState(0xb695, 0x810d, 0x7d40, 0xe0de, 0x8435, 0x12e2, 0x1, 0x0);
        gbc.writeMem(0xb695, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x810d, gbc.sp());
        EXPECT(0xb697, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb695));
        EXPECT(0xfd, gbc.readMem(0xb696));
        // CB FD 006D
        gbc.setState(0x90a4, 0xba28, 0x37d0, 0x9800, 0x6a13, 0xd725, 0x0, 0x0);
        gbc.writeMem(0x90a4, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0xba28, gbc.sp());
        EXPECT(0x90a6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x90a4));
        EXPECT(0xfd, gbc.readMem(0x90a5));
        // CB FD 006E
        gbc.setState(0xb20e, 0x7edd, 0x8c60, 0x472f, 0x1a2f, 0x7e4d, 0x1, 0x0);
        gbc.writeMem(0xb20e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0x7edd, gbc.sp());
        EXPECT(0xb210, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb20e));
        EXPECT(0xfd, gbc.readMem(0xb20f));
        // CB FD 006F
        gbc.setState(0x2d8b, 0x7441, 0xf970, 0x1dfd, 0x82c, 0xb86e, 0x0, 0x1);
        gbc.writeMem(0x2d8b, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x7441, gbc.sp());
        EXPECT(0x2d8d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0070
        gbc.setState(0x9885, 0xdd74, 0x4d10, 0x9a78, 0x32ef, 0x9917, 0x0, 0x1);
        gbc.writeMem(0x9885, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xdd74, gbc.sp());
        EXPECT(0x9887, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9885));
        EXPECT(0xfd, gbc.readMem(0x9886));
        // CB FD 0071
        gbc.setState(0x3936, 0x5dc7, 0xacc0, 0x526a, 0xd3c, 0x1552, 0x1, 0x0);
        gbc.writeMem(0x3936, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x5dc7, gbc.sp());
        EXPECT(0x3938, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0073
        gbc.setState(0x3e47, 0x7b38, 0x8640, 0xe40c, 0x88ab, 0x2715, 0x1, 0x0);
        gbc.writeMem(0x3e47, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x7b38, gbc.sp());
        EXPECT(0x3e49, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0074
        gbc.setState(0x9577, 0xdbff, 0x3990, 0x5ed7, 0x39c5, 0x2c63, 0x1, 0x1);
        gbc.writeMem(0x9577, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xdbff, gbc.sp());
        EXPECT(0x9579, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9577));
        EXPECT(0xfd, gbc.readMem(0x9578));
        // CB FD 0075
        gbc.setState(0x3f92, 0x3520, 0x61e0, 0x25c0, 0x36d3, 0x28ed, 0x1, 0x1);
        gbc.writeMem(0x3f92, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x3520, gbc.sp());
        EXPECT(0x3f94, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0077
        gbc.setState(0x3510, 0xbcfc, 0x23d0, 0x478b, 0xe8f4, 0x2438, 0x0, 0x1);
        gbc.writeMem(0x3510, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0xbcfc, gbc.sp());
        EXPECT(0x3512, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0079
        gbc.setState(0x46f3, 0xdeb3, 0xc6f0, 0x452d, 0x375b, 0xab7f, 0x1, 0x0);
        gbc.writeMem(0x46f3, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0xdeb3, gbc.sp());
        EXPECT(0x46f5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 007A
        gbc.setState(0x1e50, 0x374d, 0xf4a0, 0x2a00, 0xc41a, 0x54f5, 0x1, 0x0);
        gbc.writeMem(0x1e50, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x374d, gbc.sp());
        EXPECT(0x1e52, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 007B
        gbc.setState(0x829a, 0x7952, 0xbd30, 0x3244, 0x4537, 0x17b5, 0x0, 0x0);
        gbc.writeMem(0x829a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x7952, gbc.sp());
        EXPECT(0x829c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x829a));
        EXPECT(0xfd, gbc.readMem(0x829b));
        // CB FD 007C
        gbc.setState(0x2446, 0x2ca8, 0xdae0, 0x19c6, 0x68fa, 0x750a, 0x1, 0x1);
        gbc.writeMem(0x2446, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x2ca8, gbc.sp());
        EXPECT(0x2448, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 007D
        gbc.setState(0x1394, 0x8b74, 0xf240, 0x2ac3, 0x6d75, 0x622c, 0x1, 0x0);
        gbc.writeMem(0x1394, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x8b74, gbc.sp());
        EXPECT(0x1396, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 007E
        gbc.setState(0xeec3, 0xf282, 0x8b0, 0x7ad3, 0xf4b3, 0xd762, 0x0, 0x0);
        gbc.writeMem(0xeec3, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0xf282, gbc.sp());
        EXPECT(0xeec5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeec3));
        EXPECT(0xfd, gbc.readMem(0xeec4));
        // CB FD 007F
        gbc.setState(0x9f29, 0xace, 0x2f50, 0x8425, 0x2580, 0xa857, 0x1, 0x1);
        gbc.writeMem(0x9f29, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xace, gbc.sp());
        EXPECT(0x9f2b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f29));
        EXPECT(0xfd, gbc.readMem(0x9f2a));
        // CB FD 0081
        gbc.setState(0x85d6, 0x1d12, 0x3bf0, 0x4ac2, 0xe8ef, 0x20aa, 0x1, 0x0);
        gbc.writeMem(0x85d6, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x1d12, gbc.sp());
        EXPECT(0x85d8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x85d6));
        EXPECT(0xfd, gbc.readMem(0x85d7));
        // CB FD 0082
        gbc.setState(0x10f9, 0x4bd3, 0x23f0, 0x2c0d, 0xaba6, 0x18ec, 0x0, 0x0);
        gbc.writeMem(0x10f9, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0x4bd3, gbc.sp());
        EXPECT(0x10fb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0083
        gbc.setState(0x6ab1, 0x134, 0x4910, 0x93a8, 0xaf5, 0xad16, 0x1, 0x0);
        gbc.writeMem(0x6ab1, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x134, gbc.sp());
        EXPECT(0x6ab3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0084
        gbc.setState(0x4498, 0x2a99, 0xff70, 0x8edc, 0x1c86, 0x7a58, 0x0, 0x0);
        gbc.writeMem(0x4498, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x2a99, gbc.sp());
        EXPECT(0x449a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0085
        gbc.setState(0x3ccd, 0x95b0, 0x5320, 0xddeb, 0xb924, 0x99a3, 0x1, 0x1);
        gbc.writeMem(0x3ccd, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x95b0, gbc.sp());
        EXPECT(0x3ccf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0086
        gbc.setState(0xbd5c, 0x7bbf, 0xce50, 0x6ffc, 0x302b, 0x1c98, 0x0, 0x1);
        gbc.writeMem(0xbd5c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x7bbf, gbc.sp());
        EXPECT(0xbd5e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd5c));
        EXPECT(0xfd, gbc.readMem(0xbd5d));
        // CB FD 0087
        gbc.setState(0xe88f, 0x5fbc, 0xf70, 0x15b6, 0x40b, 0xb7cb, 0x1, 0x0);
        gbc.writeMem(0xe88f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x5fbc, gbc.sp());
        EXPECT(0xe891, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe88f));
        EXPECT(0xfd, gbc.readMem(0xe890));
        // CB FD 0088
        gbc.setState(0x457d, 0xf4f4, 0x18c0, 0x5746, 0x590e, 0xdee4, 0x0, 0x1);
        gbc.writeMem(0x457d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0xf4f4, gbc.sp());
        EXPECT(0x457f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0089
        gbc.setState(0xd97, 0xbca7, 0x76b0, 0x647c, 0xfb16, 0x4e34, 0x1, 0x0);
        gbc.writeMem(0xd97, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0xbca7, gbc.sp());
        EXPECT(0xd99, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 008A
        gbc.setState(0xb3b7, 0xd3be, 0x80d0, 0xa799, 0x3c62, 0xc956, 0x1, 0x0);
        gbc.writeMem(0xb3b7, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0xd3be, gbc.sp());
        EXPECT(0xb3b9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb3b7));
        EXPECT(0xfd, gbc.readMem(0xb3b8));
        // CB FD 008B
        gbc.setState(0x9c1d, 0x9b6a, 0x8c20, 0xd1fe, 0x7e91, 0xd57b, 0x1, 0x1);
        gbc.writeMem(0x9c1d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x9b6a, gbc.sp());
        EXPECT(0x9c1f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c1d));
        EXPECT(0xfd, gbc.readMem(0x9c1e));
        // CB FD 008C
        gbc.setState(0xdca3, 0x8e6b, 0xb1a0, 0x1f91, 0x5e89, 0x2054, 0x1, 0x1);
        gbc.writeMem(0xdca3, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x8e6b, gbc.sp());
        EXPECT(0xdca5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdca3));
        EXPECT(0xfd, gbc.readMem(0xdca4));
        // CB FD 008D
        gbc.setState(0xc054, 0x8b9f, 0x3580, 0x50f8, 0xffe0, 0xc41a, 0x1, 0x0);
        gbc.writeMem(0xc054, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x8b9f, gbc.sp());
        EXPECT(0xc056, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc054));
        EXPECT(0xfd, gbc.readMem(0xc055));
        // CB FD 008E
        gbc.setState(0x1e59, 0x1374, 0x1360, 0xe4, 0x7ad, 0xf934, 0x1, 0x0);
        gbc.writeMem(0x1e59, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x1374, gbc.sp());
        EXPECT(0x1e5b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 008F
        gbc.setState(0xc51e, 0x1d54, 0xbc10, 0x3381, 0xd2d, 0x64e8, 0x1, 0x0);
        gbc.writeMem(0xc51e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x1d54, gbc.sp());
        EXPECT(0xc520, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc51e));
        EXPECT(0xfd, gbc.readMem(0xc51f));
        // CB FD 0090
        gbc.setState(0x1c6c, 0x9878, 0x76f0, 0xed29, 0x8cd3, 0xc89c, 0x1, 0x1);
        gbc.writeMem(0x1c6c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x9878, gbc.sp());
        EXPECT(0x1c6e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0091
        gbc.setState(0x80a, 0x1f58, 0x7680, 0x72ce, 0x6f79, 0x18, 0x0, 0x0);
        gbc.writeMem(0x80a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x1f58, gbc.sp());
        EXPECT(0x80c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0092
        gbc.setState(0x14b8, 0x55bd, 0x6d20, 0xa3ca, 0xf411, 0x947e, 0x1, 0x1);
        gbc.writeMem(0x14b8, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x55bd, gbc.sp());
        EXPECT(0x14ba, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0093
        gbc.setState(0x7022, 0xe32f, 0x2230, 0xb202, 0xa3e3, 0x96f4, 0x0, 0x0);
        gbc.writeMem(0x7022, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xe32f, gbc.sp());
        EXPECT(0x7024, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0094
        gbc.setState(0xa0ec, 0xb494, 0x75f0, 0x91fa, 0xd800, 0x4e55, 0x0, 0x1);
        gbc.writeMem(0xa0ec, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0xb494, gbc.sp());
        EXPECT(0xa0ee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa0ec));
        EXPECT(0xfd, gbc.readMem(0xa0ed));
        // CB FD 0095
        gbc.setState(0x8924, 0x9998, 0x3ad0, 0x7e01, 0x674b, 0x7c0f, 0x0, 0x1);
        gbc.writeMem(0x8924, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x9998, gbc.sp());
        EXPECT(0x8926, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8924));
        EXPECT(0xfd, gbc.readMem(0x8925));
        // CB FD 0096
        gbc.setState(0x80ce, 0x3af0, 0x13b0, 0x2788, 0x7ca3, 0xffe6, 0x1, 0x0);
        gbc.writeMem(0x80ce, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x3af0, gbc.sp());
        EXPECT(0x80d0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x80ce));
        EXPECT(0xfd, gbc.readMem(0x80cf));
        // CB FD 0098
        gbc.setState(0x7600, 0x9681, 0xae60, 0x16a2, 0xf127, 0x6d4a, 0x1, 0x0);
        gbc.writeMem(0x7600, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x9681, gbc.sp());
        EXPECT(0x7602, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0099
        gbc.setState(0x609e, 0xa467, 0x4d50, 0xfbcf, 0x9bd9, 0xcb0d, 0x0, 0x1);
        gbc.writeMem(0x609e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xa467, gbc.sp());
        EXPECT(0x60a0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 009A
        gbc.setState(0xa658, 0x265b, 0xa7e0, 0xd47e, 0xf1f8, 0x7028, 0x1, 0x1);
        gbc.writeMem(0xa658, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x265b, gbc.sp());
        EXPECT(0xa65a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa658));
        EXPECT(0xfd, gbc.readMem(0xa659));
        // CB FD 009B
        gbc.setState(0xe106, 0xd126, 0x90e0, 0xc2bd, 0xc9ac, 0x2ba4, 0x1, 0x1);
        gbc.writeMem(0xe106, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xd126, gbc.sp());
        EXPECT(0xe108, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe106));
        EXPECT(0xfd, gbc.readMem(0xe107));
        // CB FD 009C
        gbc.setState(0xc7f2, 0x9940, 0xc050, 0xf7eb, 0xbb81, 0x7b7b, 0x0, 0x0);
        gbc.writeMem(0xc7f2, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x9940, gbc.sp());
        EXPECT(0xc7f4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc7f2));
        EXPECT(0xfd, gbc.readMem(0xc7f3));
        // CB FD 009D
        gbc.setState(0xc58, 0xd9ac, 0x4d30, 0x45ab, 0x901b, 0x9036, 0x1, 0x0);
        gbc.writeMem(0xc58, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0xd9ac, gbc.sp());
        EXPECT(0xc5a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 009E
        gbc.setState(0x8d09, 0xe3fc, 0x8560, 0xe2f0, 0xf4e1, 0xfa92, 0x0, 0x1);
        gbc.writeMem(0x8d09, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0xe3fc, gbc.sp());
        EXPECT(0x8d0b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8d09));
        EXPECT(0xfd, gbc.readMem(0x8d0a));
        // CB FD 009F
        gbc.setState(0x21e, 0x3418, 0x7ec0, 0xb6f, 0x4f3, 0xbe16, 0x1, 0x1);
        gbc.writeMem(0x21e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x3418, gbc.sp());
        EXPECT(0x220, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 00A0
        gbc.setState(0x3a6f, 0x90a, 0x9bc0, 0xc394, 0x76da, 0x7ccb, 0x1, 0x1);
        gbc.writeMem(0x3a6f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x90a, gbc.sp());
        EXPECT(0x3a71, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 00A1
        gbc.setState(0xa13c, 0xdd83, 0xbe20, 0x4377, 0xc866, 0x2dee, 0x1, 0x1);
        gbc.writeMem(0xa13c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0xdd83, gbc.sp());
        EXPECT(0xa13e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa13c));
        EXPECT(0xfd, gbc.readMem(0xa13d));
        // CB FD 00A2
        gbc.setState(0x1e60, 0xa6be, 0xb2b0, 0xd6e8, 0x8078, 0xbe1, 0x0, 0x0);
        gbc.writeMem(0x1e60, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0xa6be, gbc.sp());
        EXPECT(0x1e62, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 00A3
        gbc.setState(0x9331, 0xd312, 0x9180, 0xeb2, 0x1d72, 0xd3a0, 0x1, 0x1);
        gbc.writeMem(0x9331, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xd312, gbc.sp());
        EXPECT(0x9333, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9331));
        EXPECT(0xfd, gbc.readMem(0x9332));
        // CB FD 00A4
        gbc.setState(0xb9b7, 0xf23b, 0xf6c0, 0x87a0, 0x9409, 0x3fb2, 0x0, 0x1);
        gbc.writeMem(0xb9b7, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0xf23b, gbc.sp());
        EXPECT(0xb9b9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb9b7));
        EXPECT(0xfd, gbc.readMem(0xb9b8));
        // CB FD 00A6
        gbc.setState(0xedb8, 0x1494, 0x98e0, 0xa813, 0x8418, 0xed8, 0x1, 0x0);
        gbc.writeMem(0xedb8, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x1494, gbc.sp());
        EXPECT(0xedba, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xedb8));
        EXPECT(0xfd, gbc.readMem(0xedb9));
        // CB FD 00A7
        gbc.setState(0x953d, 0x2fb, 0x5bf0, 0x197f, 0x8412, 0x3ee1, 0x1, 0x0);
        gbc.writeMem(0x953d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x2fb, gbc.sp());
        EXPECT(0x953f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x953d));
        EXPECT(0xfd, gbc.readMem(0x953e));
        // CB FD 00A8
        gbc.setState(0x20ed, 0xee1e, 0x2440, 0x6ded, 0x8743, 0xb2e1, 0x1, 0x0);
        gbc.writeMem(0x20ed, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0xee1e, gbc.sp());
        EXPECT(0x20ef, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 00A9
        gbc.setState(0x2592, 0x590b, 0x2d10, 0x5350, 0x8833, 0xdb74, 0x1, 0x0);
        gbc.writeMem(0x2592, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x590b, gbc.sp());
        EXPECT(0x2594, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 00AA
        gbc.setState(0xa80d, 0x864e, 0x5c0, 0xcc4, 0x70ad, 0xbc94, 0x0, 0x0);
        gbc.writeMem(0xa80d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x864e, gbc.sp());
        EXPECT(0xa80f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa80d));
        EXPECT(0xfd, gbc.readMem(0xa80e));
        // CB FD 00AB
        gbc.setState(0xd64e, 0x35f7, 0x7340, 0xf26b, 0x11ae, 0x83cc, 0x1, 0x1);
        gbc.writeMem(0xd64e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x35f7, gbc.sp());
        EXPECT(0xd650, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd64e));
        EXPECT(0xfd, gbc.readMem(0xd64f));
        // CB FD 00AC
        gbc.setState(0xdb69, 0xe2aa, 0xea60, 0xf2e3, 0x9769, 0x136b, 0x1, 0x1);
        gbc.writeMem(0xdb69, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0xe2aa, gbc.sp());
        EXPECT(0xdb6b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb69));
        EXPECT(0xfd, gbc.readMem(0xdb6a));
        // CB FD 00AD
        gbc.setState(0xd1c3, 0x3189, 0x8520, 0xd30b, 0xc2a2, 0x2908, 0x1, 0x0);
        gbc.writeMem(0xd1c3, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0x3189, gbc.sp());
        EXPECT(0xd1c5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd1c3));
        EXPECT(0xfd, gbc.readMem(0xd1c4));
        // CB FD 00AF
        gbc.setState(0x2ed5, 0x3d8d, 0x5ca0, 0xcb2, 0x4e98, 0x2dbc, 0x0, 0x0);
        gbc.writeMem(0x2ed5, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x3d8d, gbc.sp());
        EXPECT(0x2ed7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 00B0
        gbc.setState(0x5aac, 0x60e4, 0x2980, 0x7dbe, 0x9c8f, 0xf853, 0x1, 0x0);
        gbc.writeMem(0x5aac, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x60e4, gbc.sp());
        EXPECT(0x5aae, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 00B1
        gbc.setState(0xbff6, 0x701c, 0x69b0, 0x7877, 0x95cc, 0x155c, 0x1, 0x1);
        gbc.writeMem(0xbff6, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x701c, gbc.sp());
        EXPECT(0xbff8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbff6));
        EXPECT(0xfd, gbc.readMem(0xbff7));
        // CB FD 00B2
        gbc.setState(0xe1ab, 0x94ca, 0xb5d0, 0xe0ae, 0x8c73, 0x6f9a, 0x0, 0x0);
        gbc.writeMem(0xe1ab, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x94ca, gbc.sp());
        EXPECT(0xe1ad, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe1ab));
        EXPECT(0xfd, gbc.readMem(0xe1ac));
        // CB FD 00B3
        gbc.setState(0xc03d, 0x9556, 0x6540, 0x1aa3, 0x9e72, 0x7aa1, 0x0, 0x0);
        gbc.writeMem(0xc03d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x9556, gbc.sp());
        EXPECT(0xc03f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc03d));
        EXPECT(0xfd, gbc.readMem(0xc03e));
        // CB FD 00B4
        gbc.setState(0x605c, 0x1714, 0xbc70, 0xd95f, 0x99c8, 0x5e3, 0x0, 0x0);
        gbc.writeMem(0x605c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x1714, gbc.sp());
        EXPECT(0x605e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 00B5
        gbc.setState(0xe62c, 0xfe32, 0x1ca0, 0x90ed, 0xef42, 0xfe45, 0x1, 0x1);
        gbc.writeMem(0xe62c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0xfe32, gbc.sp());
        EXPECT(0xe62e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe62c));
        EXPECT(0xfd, gbc.readMem(0xe62d));
        // CB FD 00B6
        gbc.setState(0x8f90, 0x36f3, 0xc0, 0xd93c, 0xfa59, 0x7548, 0x0, 0x1);
        gbc.writeMem(0x8f90, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x36f3, gbc.sp());
        EXPECT(0x8f92, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f90));
        EXPECT(0xfd, gbc.readMem(0x8f91));
        // CB FD 00B7
        gbc.setState(0xd62c, 0xb301, 0xf460, 0x3a14, 0x25a8, 0xa09e, 0x0, 0x0);
        gbc.writeMem(0xd62c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0xb301, gbc.sp());
        EXPECT(0xd62e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd62c));
        EXPECT(0xfd, gbc.readMem(0xd62d));
        // CB FD 00B8
        gbc.setState(0x3662, 0x9948, 0xbdf0, 0xe8be, 0x8327, 0xe86f, 0x0, 0x0);
        gbc.writeMem(0x3662, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x9948, gbc.sp());
        EXPECT(0x3664, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 00B9
        gbc.setState(0xba35, 0x53f1, 0xff60, 0x63fb, 0xcd2f, 0x215c, 0x0, 0x0);
        gbc.writeMem(0xba35, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x53f1, gbc.sp());
        EXPECT(0xba37, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xba35));
        EXPECT(0xfd, gbc.readMem(0xba36));
        // CB FD 00BA
        gbc.setState(0x45f8, 0x1f05, 0xbe70, 0xd8e, 0xa52e, 0xb311, 0x0, 0x0);
        gbc.writeMem(0x45f8, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x1f05, gbc.sp());
        EXPECT(0x45fa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 00BB
        gbc.setState(0xcf57, 0x8be2, 0xb9a0, 0xd898, 0xc5ec, 0x8f4e, 0x1, 0x1);
        gbc.writeMem(0xcf57, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x8be2, gbc.sp());
        EXPECT(0xcf59, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf57));
        EXPECT(0xfd, gbc.readMem(0xcf58));
        // CB FD 00BC
        gbc.setState(0x632b, 0x42c1, 0xcfe0, 0xe97c, 0xacc5, 0xc60, 0x0, 0x0);
        gbc.writeMem(0x632b, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x42c1, gbc.sp());
        EXPECT(0x632d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 00BD
        gbc.setState(0x7367, 0x83b6, 0xb8a0, 0x10, 0x9d87, 0x648e, 0x0, 0x1);
        gbc.writeMem(0x7367, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x83b6, gbc.sp());
        EXPECT(0x7369, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 00BF
        gbc.setState(0x4d13, 0x9b3e, 0x3ec0, 0xc795, 0x6f1a, 0xa920, 0x1, 0x1);
        gbc.writeMem(0x4d13, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0x9b3e, gbc.sp());
        EXPECT(0x4d15, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 00C0
        gbc.setState(0xe4fb, 0x4c4e, 0x4390, 0xf9c6, 0xca9b, 0xe438, 0x0, 0x1);
        gbc.writeMem(0xe4fb, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x4c4e, gbc.sp());
        EXPECT(0xe4fd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe4fb));
        EXPECT(0xfd, gbc.readMem(0xe4fc));
        // CB FD 00C1
        gbc.setState(0xca2, 0xfc5c, 0xcd00, 0xdbed, 0xddc8, 0x7518, 0x1, 0x0);
        gbc.writeMem(0xca2, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xfc5c, gbc.sp());
        EXPECT(0xca4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 00C3
        gbc.setState(0xaa16, 0xa24c, 0xa0, 0x39bf, 0xa8ae, 0xc564, 0x1, 0x0);
        gbc.writeMem(0xaa16, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0xa24c, gbc.sp());
        EXPECT(0xaa18, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa16));
        EXPECT(0xfd, gbc.readMem(0xaa17));
        // CB FD 00C4
        gbc.setState(0x82ab, 0x2bf8, 0x4300, 0xd08d, 0x162b, 0x6063, 0x1, 0x0);
        gbc.writeMem(0x82ab, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x2bf8, gbc.sp());
        EXPECT(0x82ad, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x82ab));
        EXPECT(0xfd, gbc.readMem(0x82ac));
        // CB FD 00C5
        gbc.setState(0x5da0, 0x1242, 0x3100, 0x7e11, 0xbb40, 0x2ab2, 0x0, 0x1);
        gbc.writeMem(0x5da0, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x1242, gbc.sp());
        EXPECT(0x5da2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 00C6
        gbc.setState(0xdafa, 0xf10a, 0x2e60, 0xdfa1, 0xe46b, 0xd4e4, 0x1, 0x0);
        gbc.writeMem(0xdafa, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0xf10a, gbc.sp());
        EXPECT(0xdafc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdafa));
        EXPECT(0xfd, gbc.readMem(0xdafb));
        // CB FD 00C7
        gbc.setState(0x6f41, 0xa416, 0x96d0, 0x4e59, 0x9fdf, 0x7a30, 0x1, 0x1);
        gbc.writeMem(0x6f41, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xa416, gbc.sp());
        EXPECT(0x6f43, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 00C8
        gbc.setState(0xd080, 0x1fec, 0xabc0, 0xb974, 0x97aa, 0xee75, 0x0, 0x0);
        gbc.writeMem(0xd080, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x1fec, gbc.sp());
        EXPECT(0xd082, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd080));
        EXPECT(0xfd, gbc.readMem(0xd081));
        // CB FD 00CA
        gbc.setState(0x1c88, 0x5fd9, 0x5010, 0xdfde, 0xa0cb, 0x7ee2, 0x1, 0x1);
        gbc.writeMem(0x1c88, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x5fd9, gbc.sp());
        EXPECT(0x1c8a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 00CB
        gbc.setState(0xc0cf, 0x457c, 0x860, 0xc3c6, 0x9766, 0x6e50, 0x1, 0x0);
        gbc.writeMem(0xc0cf, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x457c, gbc.sp());
        EXPECT(0xc0d1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc0cf));
        EXPECT(0xfd, gbc.readMem(0xc0d0));
        // CB FD 00CC
        gbc.setState(0x29e7, 0x6d20, 0x1c90, 0xdb6c, 0xa48, 0x6a00, 0x0, 0x1);
        gbc.writeMem(0x29e7, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x6d20, gbc.sp());
        EXPECT(0x29e9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 00CD
        gbc.setState(0x2ab7, 0xae8e, 0x30e0, 0x756c, 0x8e3a, 0x2bc1, 0x1, 0x0);
        gbc.writeMem(0x2ab7, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xae8e, gbc.sp());
        EXPECT(0x2ab9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 00CE
        gbc.setState(0x85cb, 0x566d, 0x57b0, 0x9d5f, 0xcd46, 0x7dbd, 0x1, 0x0);
        gbc.writeMem(0x85cb, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x566d, gbc.sp());
        EXPECT(0x85cd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x85cb));
        EXPECT(0xfd, gbc.readMem(0x85cc));
        // CB FD 00CF
        gbc.setState(0x505f, 0x4d91, 0xbed0, 0xb3ac, 0x5ad8, 0xc24a, 0x0, 0x0);
        gbc.writeMem(0x505f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x4d91, gbc.sp());
        EXPECT(0x5061, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 00D0
        gbc.setState(0x1751, 0xaf8e, 0xfd10, 0x8625, 0xdcb, 0x64af, 0x1, 0x0);
        gbc.writeMem(0x1751, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0xaf8e, gbc.sp());
        EXPECT(0x1753, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 00D1
        gbc.setState(0x305e, 0x9595, 0x83a0, 0x4515, 0x1c45, 0x3a04, 0x1, 0x1);
        gbc.writeMem(0x305e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x9595, gbc.sp());
        EXPECT(0x3060, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 00D2
        gbc.setState(0xad5, 0x9714, 0x55d0, 0xd7f, 0x6e4b, 0xe180, 0x1, 0x1);
        gbc.writeMem(0xad5, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x9714, gbc.sp());
        EXPECT(0xad7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 00D3
        gbc.setState(0x8142, 0x9934, 0x9aa0, 0x4285, 0x7006, 0xd175, 0x0, 0x0);
        gbc.writeMem(0x8142, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x9934, gbc.sp());
        EXPECT(0x8144, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8142));
        EXPECT(0xfd, gbc.readMem(0x8143));
        // CB FD 00D4
        gbc.setState(0xc435, 0x321b, 0x9070, 0x82c9, 0x2d0e, 0xbaae, 0x1, 0x0);
        gbc.writeMem(0xc435, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x321b, gbc.sp());
        EXPECT(0xc437, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc435));
        EXPECT(0xfd, gbc.readMem(0xc436));
        // CB FD 00D5
        gbc.setState(0x290a, 0x4c18, 0xcc80, 0x8990, 0x94ff, 0x549f, 0x0, 0x1);
        gbc.writeMem(0x290a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x4c18, gbc.sp());
        EXPECT(0x290c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 00D6
        gbc.setState(0xebce, 0x4c4e, 0xf6a0, 0x9557, 0xc500, 0x5301, 0x1, 0x0);
        gbc.writeMem(0xebce, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x4c4e, gbc.sp());
        EXPECT(0xebd0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xebce));
        EXPECT(0xfd, gbc.readMem(0xebcf));
        // CB FD 00D7
        gbc.setState(0x512e, 0x6dcf, 0x4380, 0xe15a, 0xba1b, 0xa201, 0x1, 0x1);
        gbc.writeMem(0x512e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x6dcf, gbc.sp());
        EXPECT(0x5130, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 00D8
        gbc.setState(0xbb60, 0xf635, 0x7240, 0xc116, 0xd335, 0x138c, 0x0, 0x0);
        gbc.writeMem(0xbb60, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xf635, gbc.sp());
        EXPECT(0xbb62, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbb60));
        EXPECT(0xfd, gbc.readMem(0xbb61));
        // CB FD 00D9
        gbc.setState(0x477c, 0x9f84, 0x1a00, 0xc7d0, 0xc5ea, 0x96, 0x1, 0x1);
        gbc.writeMem(0x477c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x9f84, gbc.sp());
        EXPECT(0x477e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 00DA
        gbc.setState(0xb175, 0xaff6, 0x1390, 0x13c1, 0x4ca9, 0x90e2, 0x0, 0x0);
        gbc.writeMem(0xb175, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0xaff6, gbc.sp());
        EXPECT(0xb177, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb175));
        EXPECT(0xfd, gbc.readMem(0xb176));
        // CB FD 00DB
        gbc.setState(0x8a9b, 0x96c8, 0x2510, 0x6f60, 0x8cf2, 0xd76a, 0x0, 0x1);
        gbc.writeMem(0x8a9b, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x96c8, gbc.sp());
        EXPECT(0x8a9d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a9b));
        EXPECT(0xfd, gbc.readMem(0x8a9c));
        // CB FD 00DC
        gbc.setState(0xc89d, 0x77c4, 0xa890, 0x9cf6, 0x5a, 0xaa1a, 0x0, 0x1);
        gbc.writeMem(0xc89d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x77c4, gbc.sp());
        EXPECT(0xc89f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc89d));
        EXPECT(0xfd, gbc.readMem(0xc89e));
        // CB FD 00DD
        gbc.setState(0x8671, 0x437c, 0xa060, 0xf37a, 0x7229, 0xc8ff, 0x1, 0x0);
        gbc.writeMem(0x8671, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x437c, gbc.sp());
        EXPECT(0x8673, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8671));
        EXPECT(0xfd, gbc.readMem(0x8672));
        // CB FD 00DE
        gbc.setState(0x6b1b, 0x11e1, 0xfa70, 0x5e71, 0xd827, 0x6804, 0x0, 0x1);
        gbc.writeMem(0x6b1b, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x11e1, gbc.sp());
        EXPECT(0x6b1d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 00DF
        gbc.setState(0x90be, 0xc64, 0xcc10, 0xca15, 0x1343, 0x4ab9, 0x1, 0x0);
        gbc.writeMem(0x90be, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xc64, gbc.sp());
        EXPECT(0x90c0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x90be));
        EXPECT(0xfd, gbc.readMem(0x90bf));
        // CB FD 00E0
        gbc.setState(0x6e5a, 0xd517, 0x61a0, 0xb407, 0x536b, 0xc808, 0x0, 0x0);
        gbc.writeMem(0x6e5a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xd517, gbc.sp());
        EXPECT(0x6e5c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 00E1
        gbc.setState(0x7e73, 0xb57a, 0x2b10, 0x6d62, 0x2663, 0x8ce8, 0x1, 0x0);
        gbc.writeMem(0x7e73, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0xb57a, gbc.sp());
        EXPECT(0x7e75, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 00E2
        gbc.setState(0x434c, 0xbf63, 0xd7d0, 0x5e01, 0x3f08, 0xeecf, 0x1, 0x1);
        gbc.writeMem(0x434c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xbf63, gbc.sp());
        EXPECT(0x434e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 00E3
        gbc.setState(0x4b09, 0x8ac, 0xfe80, 0x2f78, 0xb764, 0x8341, 0x0, 0x0);
        gbc.writeMem(0x4b09, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x8ac, gbc.sp());
        EXPECT(0x4b0b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 00E4
        gbc.setState(0x255e, 0x6138, 0x5340, 0x7fd0, 0xe003, 0x4a23, 0x0, 0x0);
        gbc.writeMem(0x255e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x6138, gbc.sp());
        EXPECT(0x2560, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 00E5
        gbc.setState(0xebcd, 0x5ae6, 0x3c10, 0xfff4, 0xd59d, 0x3144, 0x1, 0x0);
        gbc.writeMem(0xebcd, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x5ae6, gbc.sp());
        EXPECT(0xebcf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xebcd));
        EXPECT(0xfd, gbc.readMem(0xebce));
        // CB FD 00E6
        gbc.setState(0x38ec, 0xd300, 0x59c0, 0xa86c, 0xbaf9, 0x489, 0x0, 0x0);
        gbc.writeMem(0x38ec, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xd300, gbc.sp());
        EXPECT(0x38ee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 00E7
        gbc.setState(0xef, 0x183d, 0x8b00, 0x430e, 0x67d2, 0x4308, 0x1, 0x0);
        gbc.writeMem(0xef, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0x183d, gbc.sp());
        EXPECT(0xf1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 00E8
        gbc.setState(0x611b, 0x5740, 0xab10, 0x5e51, 0xe18c, 0xec66, 0x0, 0x1);
        gbc.writeMem(0x611b, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x5740, gbc.sp());
        EXPECT(0x611d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 00E9
        gbc.setState(0xecdf, 0xd7bb, 0x3230, 0xddb8, 0x8b9c, 0xb657, 0x1, 0x0);
        gbc.writeMem(0xecdf, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xd7bb, gbc.sp());
        EXPECT(0xece1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xecdf));
        EXPECT(0xfd, gbc.readMem(0xece0));
        // CB FD 00EA
        gbc.setState(0x1e28, 0x985c, 0xdbf0, 0xf39, 0x46e9, 0x9623, 0x0, 0x1);
        gbc.writeMem(0x1e28, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x985c, gbc.sp());
        EXPECT(0x1e2a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 00EB
        gbc.setState(0x9b62, 0xc654, 0xfdf0, 0x4a68, 0xc5f6, 0x2f63, 0x1, 0x1);
        gbc.writeMem(0x9b62, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xc654, gbc.sp());
        EXPECT(0x9b64, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b62));
        EXPECT(0xfd, gbc.readMem(0x9b63));
        // CB FD 00EC
        gbc.setState(0x2674, 0xc49e, 0x8730, 0xa40c, 0x2acd, 0x7e44, 0x0, 0x0);
        gbc.writeMem(0x2674, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0xc49e, gbc.sp());
        EXPECT(0x2676, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 00EE
        gbc.setState(0x8083, 0xe754, 0x5ab0, 0xd799, 0x53cd, 0x3ad8, 0x1, 0x0);
        gbc.writeMem(0x8083, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0xe754, gbc.sp());
        EXPECT(0x8085, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8083));
        EXPECT(0xfd, gbc.readMem(0x8084));
        // CB FD 00EF
        gbc.setState(0x227f, 0xafe2, 0x3350, 0x803f, 0x59fe, 0xc6cf, 0x1, 0x0);
        gbc.writeMem(0x227f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xafe2, gbc.sp());
        EXPECT(0x2281, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 00F0
        gbc.setState(0x1a66, 0xefc, 0xc2e0, 0x5452, 0x2bee, 0x39d6, 0x0, 0x1);
        gbc.writeMem(0x1a66, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0xefc, gbc.sp());
        EXPECT(0x1a68, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 00F1
        gbc.setState(0x642d, 0x1267, 0x3aa0, 0x1d58, 0xbabe, 0xa96d, 0x0, 0x1);
        gbc.writeMem(0x642d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x1267, gbc.sp());
        EXPECT(0x642f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 00F2
        gbc.setState(0x2b43, 0x821c, 0xb780, 0x5a2e, 0xebc4, 0xf681, 0x1, 0x1);
        gbc.writeMem(0x2b43, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x821c, gbc.sp());
        EXPECT(0x2b45, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 00F3
        gbc.setState(0x8f6f, 0xc256, 0xfd20, 0x9d74, 0xf372, 0x4cf7, 0x0, 0x1);
        gbc.writeMem(0x8f6f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0xc256, gbc.sp());
        EXPECT(0x8f71, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f6f));
        EXPECT(0xfd, gbc.readMem(0x8f70));
        // CB FD 00F4
        gbc.setState(0x2af0, 0x7ac7, 0xfda0, 0xe987, 0xe4d0, 0xc29e, 0x1, 0x1);
        gbc.writeMem(0x2af0, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x7ac7, gbc.sp());
        EXPECT(0x2af2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 00F5
        gbc.setState(0xc102, 0x42c9, 0x8810, 0xf3e2, 0x2da6, 0xfeeb, 0x1, 0x1);
        gbc.writeMem(0xc102, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x42c9, gbc.sp());
        EXPECT(0xc104, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc102));
        EXPECT(0xfd, gbc.readMem(0xc103));
        // CB FD 00F6
        gbc.setState(0xc9e3, 0xca78, 0x3cf0, 0x735c, 0xafca, 0x671b, 0x1, 0x1);
        gbc.writeMem(0xc9e3, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0xca78, gbc.sp());
        EXPECT(0xc9e5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc9e3));
        EXPECT(0xfd, gbc.readMem(0xc9e4));
        // CB FD 00F7
        gbc.setState(0x6c7c, 0x6f87, 0xd620, 0x5778, 0x6d7, 0x1039, 0x1, 0x1);
        gbc.writeMem(0x6c7c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x6f87, gbc.sp());
        EXPECT(0x6c7e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 00F8
        gbc.setState(0x6067, 0xa043, 0xf4f0, 0x8420, 0x6931, 0xdbde, 0x0, 0x0);
        gbc.writeMem(0x6067, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0xa043, gbc.sp());
        EXPECT(0x6069, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 00F9
        gbc.setState(0x4792, 0xc35, 0x65f0, 0xebb1, 0xe58a, 0xc083, 0x1, 0x1);
        gbc.writeMem(0x4792, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0xc35, gbc.sp());
        EXPECT(0x4794, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 00FA
        gbc.setState(0x53d, 0xefe6, 0xe830, 0x964f, 0x8975, 0xb918, 0x1, 0x1);
        gbc.writeMem(0x53d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xefe6, gbc.sp());
        EXPECT(0x53f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 00FB
        gbc.setState(0xbfe6, 0xee9d, 0x8bb0, 0xf6ab, 0x995, 0x13d9, 0x0, 0x1);
        gbc.writeMem(0xbfe6, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0xee9d, gbc.sp());
        EXPECT(0xbfe8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbfe6));
        EXPECT(0xfd, gbc.readMem(0xbfe7));
        // CB FD 00FC
        gbc.setState(0xafea, 0x21af, 0x6c90, 0x43ee, 0x8d9c, 0x37d4, 0x1, 0x1);
        gbc.writeMem(0xafea, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x21af, gbc.sp());
        EXPECT(0xafec, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xafea));
        EXPECT(0xfd, gbc.readMem(0xafeb));
        // CB FD 00FD
        gbc.setState(0x2ef8, 0x7fea, 0xb9d0, 0x4690, 0x9722, 0xb21d, 0x1, 0x0);
        gbc.writeMem(0x2ef8, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x7fea, gbc.sp());
        EXPECT(0x2efa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 00FE
        gbc.setState(0x56f1, 0xbcde, 0x8dc0, 0x58e1, 0x13d3, 0xf44, 0x0, 0x0);
        gbc.writeMem(0x56f1, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0xbcde, gbc.sp());
        EXPECT(0x56f3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 00FF
        gbc.setState(0xba7, 0xfbc2, 0xa770, 0xd029, 0x56a9, 0x24f, 0x1, 0x0);
        gbc.writeMem(0xba7, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xfbc2, gbc.sp());
        EXPECT(0xba9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0100
        gbc.setState(0xd552, 0x6394, 0x73a0, 0xca63, 0x7769, 0xd22c, 0x1, 0x0);
        gbc.writeMem(0xd552, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x6394, gbc.sp());
        EXPECT(0xd554, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd552));
        EXPECT(0xfd, gbc.readMem(0xd553));
        // CB FD 0101
        gbc.setState(0x3534, 0xfe59, 0xd030, 0x2d78, 0x3b56, 0xf9f, 0x1, 0x1);
        gbc.writeMem(0x3534, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0xfe59, gbc.sp());
        EXPECT(0x3536, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0102
        gbc.setState(0x41f2, 0x40ec, 0xb10, 0x8f14, 0x36fe, 0x42cd, 0x1, 0x1);
        gbc.writeMem(0x41f2, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0x40ec, gbc.sp());
        EXPECT(0x41f4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0103
        gbc.setState(0x535d, 0x4e7, 0xd990, 0x9670, 0xd212, 0xfdbe, 0x1, 0x1);
        gbc.writeMem(0x535d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x4e7, gbc.sp());
        EXPECT(0x535f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0104
        gbc.setState(0x54c, 0x3299, 0xbdb0, 0xdc3f, 0x75f6, 0xaff7, 0x1, 0x0);
        gbc.writeMem(0x54c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x3299, gbc.sp());
        EXPECT(0x54e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0105
        gbc.setState(0x6188, 0xfbd3, 0xba20, 0x48ad, 0xb8b1, 0x71de, 0x0, 0x1);
        gbc.writeMem(0x6188, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0xfbd3, gbc.sp());
        EXPECT(0x618a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0106
        gbc.setState(0x6b09, 0xa133, 0xaf20, 0xff04, 0x863d, 0x462, 0x0, 0x1);
        gbc.writeMem(0x6b09, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0xa133, gbc.sp());
        EXPECT(0x6b0b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0107
        gbc.setState(0xc910, 0xee11, 0x4060, 0xc1, 0xd280, 0xd96c, 0x0, 0x1);
        gbc.writeMem(0xc910, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0xee11, gbc.sp());
        EXPECT(0xc912, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc910));
        EXPECT(0xfd, gbc.readMem(0xc911));
        // CB FD 0108
        gbc.setState(0x7fbf, 0xfe3f, 0x71b0, 0x4a02, 0x7eed, 0x7c82, 0x0, 0x1);
        gbc.writeMem(0x7fbf, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xfe3f, gbc.sp());
        EXPECT(0x7fc1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 010A
        gbc.setState(0x72fc, 0x275b, 0xb7f0, 0x2f04, 0x47ae, 0xec4, 0x1, 0x1);
        gbc.writeMem(0x72fc, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x275b, gbc.sp());
        EXPECT(0x72fe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 010B
        gbc.setState(0x6508, 0xe4dc, 0xb5d0, 0x9cbf, 0x601d, 0x150b, 0x0, 0x1);
        gbc.writeMem(0x6508, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0xe4dc, gbc.sp());
        EXPECT(0x650a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 010C
        gbc.setState(0x9533, 0x4a79, 0x2e00, 0xdb25, 0xa72f, 0x5fcc, 0x0, 0x1);
        gbc.writeMem(0x9533, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x4a79, gbc.sp());
        EXPECT(0x9535, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9533));
        EXPECT(0xfd, gbc.readMem(0x9534));
        // CB FD 010D
        gbc.setState(0x569, 0x678d, 0x9750, 0x6dd, 0x2b4, 0xb18d, 0x1, 0x0);
        gbc.writeMem(0x569, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x678d, gbc.sp());
        EXPECT(0x56b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 010E
        gbc.setState(0xd3c9, 0x4ddc, 0x4a40, 0xf2f0, 0x92fe, 0xfd6c, 0x0, 0x0);
        gbc.writeMem(0xd3c9, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0x4ddc, gbc.sp());
        EXPECT(0xd3cb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd3c9));
        EXPECT(0xfd, gbc.readMem(0xd3ca));
        // CB FD 010F
        gbc.setState(0x8eba, 0x1010, 0xb0c0, 0x1cbb, 0xcdab, 0x597, 0x0, 0x1);
        gbc.writeMem(0x8eba, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x1010, gbc.sp());
        EXPECT(0x8ebc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8eba));
        EXPECT(0xfd, gbc.readMem(0x8ebb));
        // CB FD 0110
        gbc.setState(0xbabc, 0x5d25, 0xa8a0, 0xe3e9, 0xd1f1, 0xb790, 0x0, 0x0);
        gbc.writeMem(0xbabc, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x5d25, gbc.sp());
        EXPECT(0xbabe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbabc));
        EXPECT(0xfd, gbc.readMem(0xbabd));
        // CB FD 0111
        gbc.setState(0x6490, 0x5b99, 0x8d60, 0xbb1e, 0xe406, 0x402d, 0x1, 0x0);
        gbc.writeMem(0x6490, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x5b99, gbc.sp());
        EXPECT(0x6492, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0112
        gbc.setState(0x4449, 0x488a, 0x600, 0xf3a6, 0x21b3, 0x7b9, 0x1, 0x0);
        gbc.writeMem(0x4449, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x488a, gbc.sp());
        EXPECT(0x444b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0113
        gbc.setState(0x63b4, 0x4bae, 0x6f40, 0x2e51, 0xde49, 0x756e, 0x1, 0x0);
        gbc.writeMem(0x63b4, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x4bae, gbc.sp());
        EXPECT(0x63b6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0114
        gbc.setState(0x1002, 0x7341, 0xd470, 0xec0c, 0xbdb2, 0x67d8, 0x1, 0x1);
        gbc.writeMem(0x1002, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x7341, gbc.sp());
        EXPECT(0x1004, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0115
        gbc.setState(0x321d, 0x8cd9, 0xb230, 0xcbae, 0x3dc4, 0x52f, 0x0, 0x0);
        gbc.writeMem(0x321d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x8cd9, gbc.sp());
        EXPECT(0x321f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0116
        gbc.setState(0x1c11, 0x3ede, 0x5f30, 0xf2e0, 0xb6b8, 0x811c, 0x0, 0x1);
        gbc.writeMem(0x1c11, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x3ede, gbc.sp());
        EXPECT(0x1c13, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0117
        gbc.setState(0x6a6b, 0x6788, 0x9bc0, 0x9adc, 0x7e6b, 0x9e60, 0x1, 0x1);
        gbc.writeMem(0x6a6b, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x6788, gbc.sp());
        EXPECT(0x6a6d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0118
        gbc.setState(0xcec1, 0x8441, 0x3cc0, 0xa9c2, 0x4f27, 0xcee2, 0x1, 0x1);
        gbc.writeMem(0xcec1, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x8441, gbc.sp());
        EXPECT(0xcec3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcec1));
        EXPECT(0xfd, gbc.readMem(0xcec2));
        // CB FD 0119
        gbc.setState(0xa83, 0x76f3, 0xce0, 0xef23, 0x5acf, 0xdfb4, 0x1, 0x1);
        gbc.writeMem(0xa83, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x76f3, gbc.sp());
        EXPECT(0xa85, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 011A
        gbc.setState(0x1815, 0xb649, 0x2ea0, 0xbe5d, 0x9957, 0xb78b, 0x0, 0x0);
        gbc.writeMem(0x1815, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0xb649, gbc.sp());
        EXPECT(0x1817, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 011B
        gbc.setState(0x13cd, 0x21a4, 0xd8a0, 0x8392, 0xe289, 0x9a78, 0x0, 0x0);
        gbc.writeMem(0x13cd, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x21a4, gbc.sp());
        EXPECT(0x13cf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 011C
        gbc.setState(0x5d1c, 0x59a1, 0xa390, 0x609b, 0x3137, 0xae7f, 0x1, 0x0);
        gbc.writeMem(0x5d1c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x59a1, gbc.sp());
        EXPECT(0x5d1e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 011D
        gbc.setState(0x1dfb, 0x666a, 0x5590, 0xb967, 0xc241, 0xcb4d, 0x1, 0x1);
        gbc.writeMem(0x1dfb, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0x666a, gbc.sp());
        EXPECT(0x1dfd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 011E
        gbc.setState(0xbeff, 0x7840, 0x94e0, 0x519c, 0x1537, 0xc559, 0x0, 0x1);
        gbc.writeMem(0xbeff, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x7840, gbc.sp());
        EXPECT(0xbf01, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbeff));
        EXPECT(0xfd, gbc.readMem(0xbf00));
        // CB FD 011F
        gbc.setState(0x8, 0x8599, 0xdf60, 0xcca6, 0x6b46, 0x2ff, 0x0, 0x1);
        gbc.writeMem(0x8, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x8599, gbc.sp());
        EXPECT(0xa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0120
        gbc.setState(0x9bee, 0x6d87, 0xe1d0, 0x408, 0xcce8, 0xdc53, 0x0, 0x0);
        gbc.writeMem(0x9bee, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x6d87, gbc.sp());
        EXPECT(0x9bf0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9bee));
        EXPECT(0xfd, gbc.readMem(0x9bef));
        // CB FD 0121
        gbc.setState(0x342b, 0x68d2, 0x4870, 0x6fa5, 0x3271, 0x9dfc, 0x0, 0x0);
        gbc.writeMem(0x342b, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x68d2, gbc.sp());
        EXPECT(0x342d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0122
        gbc.setState(0x8353, 0xd495, 0x6a80, 0x3708, 0xddab, 0x253f, 0x1, 0x1);
        gbc.writeMem(0x8353, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0xd495, gbc.sp());
        EXPECT(0x8355, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8353));
        EXPECT(0xfd, gbc.readMem(0x8354));
        // CB FD 0123
        gbc.setState(0x5aee, 0x1d24, 0x8610, 0x4c1, 0x5f4d, 0x83c8, 0x1, 0x0);
        gbc.writeMem(0x5aee, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x1d24, gbc.sp());
        EXPECT(0x5af0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0124
        gbc.setState(0x7199, 0x40e5, 0x2600, 0xcd9c, 0x1060, 0x8f71, 0x1, 0x1);
        gbc.writeMem(0x7199, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x40e5, gbc.sp());
        EXPECT(0x719b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0125
        gbc.setState(0x7885, 0x93fe, 0x52f0, 0x90f9, 0x5e52, 0xcf04, 0x1, 0x1);
        gbc.writeMem(0x7885, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x93fe, gbc.sp());
        EXPECT(0x7887, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0126
        gbc.setState(0x6b5c, 0x50c1, 0xee00, 0xbd43, 0x784b, 0xfddc, 0x0, 0x1);
        gbc.writeMem(0x6b5c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x50c1, gbc.sp());
        EXPECT(0x6b5e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0127
        gbc.setState(0xa120, 0x30cb, 0x4e80, 0xe6e1, 0x62dd, 0x68c1, 0x0, 0x1);
        gbc.writeMem(0xa120, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x30cb, gbc.sp());
        EXPECT(0xa122, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa120));
        EXPECT(0xfd, gbc.readMem(0xa121));
        // CB FD 0128
        gbc.setState(0x874a, 0x4bc1, 0xebe0, 0x6574, 0xf0c2, 0xad29, 0x1, 0x0);
        gbc.writeMem(0x874a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x4bc1, gbc.sp());
        EXPECT(0x874c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x874a));
        EXPECT(0xfd, gbc.readMem(0x874b));
        // CB FD 0129
        gbc.setState(0x359c, 0xb88d, 0x37d0, 0xd14b, 0xe93, 0x3a9b, 0x0, 0x0);
        gbc.writeMem(0x359c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0xb88d, gbc.sp());
        EXPECT(0x359e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 012A
        gbc.setState(0xb2aa, 0x607d, 0xf370, 0x18ce, 0x4e97, 0xac51, 0x1, 0x0);
        gbc.writeMem(0xb2aa, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0x607d, gbc.sp());
        EXPECT(0xb2ac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb2aa));
        EXPECT(0xfd, gbc.readMem(0xb2ab));
        // CB FD 012B
        gbc.setState(0xcabe, 0xaa88, 0x3c10, 0xa577, 0xa952, 0x4c21, 0x1, 0x0);
        gbc.writeMem(0xcabe, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0xaa88, gbc.sp());
        EXPECT(0xcac0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcabe));
        EXPECT(0xfd, gbc.readMem(0xcabf));
        // CB FD 012C
        gbc.setState(0x5b15, 0x82db, 0x9b30, 0x8656, 0x2feb, 0xcd4b, 0x1, 0x1);
        gbc.writeMem(0x5b15, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x82db, gbc.sp());
        EXPECT(0x5b17, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 012D
        gbc.setState(0x7838, 0x6d53, 0x4c20, 0x9bf9, 0xc7ae, 0xf5ad, 0x1, 0x1);
        gbc.writeMem(0x7838, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x6d53, gbc.sp());
        EXPECT(0x783a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 012E
        gbc.setState(0xa1a3, 0xe096, 0xd3d0, 0xc057, 0x902f, 0x4666, 0x0, 0x1);
        gbc.writeMem(0xa1a3, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0xe096, gbc.sp());
        EXPECT(0xa1a5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa1a3));
        EXPECT(0xfd, gbc.readMem(0xa1a4));
        // CB FD 012F
        gbc.setState(0x425c, 0x6367, 0xad50, 0x67b1, 0xa2b5, 0x935e, 0x1, 0x1);
        gbc.writeMem(0x425c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x6367, gbc.sp());
        EXPECT(0x425e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0130
        gbc.setState(0x971d, 0x8da, 0x28b0, 0x61e, 0xc440, 0x97c9, 0x0, 0x0);
        gbc.writeMem(0x971d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x8da, gbc.sp());
        EXPECT(0x971f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x971d));
        EXPECT(0xfd, gbc.readMem(0x971e));
        // CB FD 0132
        gbc.setState(0x9b15, 0xd879, 0xad00, 0x97d1, 0x5c7c, 0xb4cf, 0x0, 0x1);
        gbc.writeMem(0x9b15, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xd879, gbc.sp());
        EXPECT(0x9b17, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b15));
        EXPECT(0xfd, gbc.readMem(0x9b16));
        // CB FD 0133
        gbc.setState(0xd7d5, 0x8755, 0xff50, 0x2626, 0x41ae, 0x7cfa, 0x0, 0x0);
        gbc.writeMem(0xd7d5, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0x8755, gbc.sp());
        EXPECT(0xd7d7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd7d5));
        EXPECT(0xfd, gbc.readMem(0xd7d6));
        // CB FD 0134
        gbc.setState(0xd97a, 0x24a8, 0x4b40, 0xb3ca, 0x98a0, 0x89f8, 0x0, 0x1);
        gbc.writeMem(0xd97a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x24a8, gbc.sp());
        EXPECT(0xd97c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd97a));
        EXPECT(0xfd, gbc.readMem(0xd97b));
        // CB FD 0135
        gbc.setState(0x21bd, 0xb092, 0xd3b0, 0xdceb, 0x5ae8, 0xdb3a, 0x1, 0x1);
        gbc.writeMem(0x21bd, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0xb092, gbc.sp());
        EXPECT(0x21bf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0136
        gbc.setState(0xd7f2, 0x535f, 0x6f50, 0xdd55, 0xe2cd, 0xefac, 0x1, 0x1);
        gbc.writeMem(0xd7f2, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x535f, gbc.sp());
        EXPECT(0xd7f4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd7f2));
        EXPECT(0xfd, gbc.readMem(0xd7f3));
        // CB FD 0137
        gbc.setState(0x6c02, 0x885a, 0x9fa0, 0xed2, 0xe0e1, 0x2568, 0x1, 0x1);
        gbc.writeMem(0x6c02, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x885a, gbc.sp());
        EXPECT(0x6c04, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0138
        gbc.setState(0xc7df, 0x7b7, 0x76c0, 0xeab3, 0xe283, 0x9a0e, 0x0, 0x0);
        gbc.writeMem(0xc7df, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x7b7, gbc.sp());
        EXPECT(0xc7e1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc7df));
        EXPECT(0xfd, gbc.readMem(0xc7e0));
        // CB FD 0139
        gbc.setState(0x35c2, 0xfce0, 0xe7a0, 0x83fc, 0x8cdd, 0x3fea, 0x0, 0x1);
        gbc.writeMem(0x35c2, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0xfce0, gbc.sp());
        EXPECT(0x35c4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 013A
        gbc.setState(0x1328, 0x2a1d, 0xe30, 0xc027, 0x6e8b, 0x34ef, 0x0, 0x1);
        gbc.writeMem(0x1328, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x2a1d, gbc.sp());
        EXPECT(0x132a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 013B
        gbc.setState(0xc3ce, 0xbd4b, 0x1330, 0xe06, 0xa0b, 0x9a98, 0x0, 0x0);
        gbc.writeMem(0xc3ce, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xbd4b, gbc.sp());
        EXPECT(0xc3d0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc3ce));
        EXPECT(0xfd, gbc.readMem(0xc3cf));
        // CB FD 013C
        gbc.setState(0x80c1, 0x9b0a, 0xa8f0, 0x2365, 0x2011, 0xe838, 0x1, 0x0);
        gbc.writeMem(0x80c1, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x9b0a, gbc.sp());
        EXPECT(0x80c3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x80c1));
        EXPECT(0xfd, gbc.readMem(0x80c2));
        // CB FD 013E
        gbc.setState(0xc0e7, 0xb270, 0x5a10, 0x1a1e, 0x2257, 0x2dae, 0x1, 0x1);
        gbc.writeMem(0xc0e7, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0xb270, gbc.sp());
        EXPECT(0xc0e9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc0e7));
        EXPECT(0xfd, gbc.readMem(0xc0e8));
        // CB FD 013F
        gbc.setState(0xc32, 0xfb17, 0xd060, 0xdddb, 0x7306, 0x403d, 0x0, 0x0);
        gbc.writeMem(0xc32, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xfb17, gbc.sp());
        EXPECT(0xc34, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0140
        gbc.setState(0xb348, 0x528a, 0xeaa0, 0xcfe4, 0x9c12, 0x20be, 0x0, 0x1);
        gbc.writeMem(0xb348, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x528a, gbc.sp());
        EXPECT(0xb34a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb348));
        EXPECT(0xfd, gbc.readMem(0xb349));
        // CB FD 0141
        gbc.setState(0x1b09, 0x2129, 0x19e0, 0x1e96, 0xc860, 0x8018, 0x1, 0x1);
        gbc.writeMem(0x1b09, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x2129, gbc.sp());
        EXPECT(0x1b0b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0142
        gbc.setState(0x3bfa, 0x1946, 0x3340, 0xd8c1, 0x1b9b, 0x3e50, 0x0, 0x0);
        gbc.writeMem(0x3bfa, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x1946, gbc.sp());
        EXPECT(0x3bfc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0143
        gbc.setState(0x7d38, 0x901d, 0xa420, 0xa78e, 0x63b3, 0x1867, 0x1, 0x0);
        gbc.writeMem(0x7d38, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0x901d, gbc.sp());
        EXPECT(0x7d3a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0144
        gbc.setState(0xc03d, 0x2897, 0x2a20, 0xec5f, 0xa4a6, 0xce24, 0x1, 0x0);
        gbc.writeMem(0xc03d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x2897, gbc.sp());
        EXPECT(0xc03f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc03d));
        EXPECT(0xfd, gbc.readMem(0xc03e));
        // CB FD 0145
        gbc.setState(0x7f30, 0xcc8c, 0x50d0, 0x3de5, 0x5565, 0x109, 0x1, 0x0);
        gbc.writeMem(0x7f30, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xcc8c, gbc.sp());
        EXPECT(0x7f32, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0146
        gbc.setState(0x6485, 0x529a, 0x2bb0, 0xaa3e, 0x24f6, 0xe387, 0x0, 0x0);
        gbc.writeMem(0x6485, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x529a, gbc.sp());
        EXPECT(0x6487, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0147
        gbc.setState(0xece4, 0x6999, 0xfe40, 0xedb5, 0x8ade, 0x7e3c, 0x1, 0x0);
        gbc.writeMem(0xece4, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x6999, gbc.sp());
        EXPECT(0xece6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xece4));
        EXPECT(0xfd, gbc.readMem(0xece5));
        // CB FD 0148
        gbc.setState(0x7ff1, 0x3ca9, 0xc4d0, 0xf4d5, 0x8fdf, 0xd067, 0x1, 0x1);
        gbc.writeMem(0x7ff1, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0x3ca9, gbc.sp());
        EXPECT(0x7ff3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0149
        gbc.setState(0xbad5, 0x4430, 0x3e70, 0xc491, 0x6b1a, 0x35e9, 0x0, 0x0);
        gbc.writeMem(0xbad5, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x4430, gbc.sp());
        EXPECT(0xbad7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbad5));
        EXPECT(0xfd, gbc.readMem(0xbad6));
        // CB FD 014A
        gbc.setState(0x2669, 0x92e1, 0x4c70, 0x3d68, 0x5eac, 0xbe03, 0x0, 0x0);
        gbc.writeMem(0x2669, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x92e1, gbc.sp());
        EXPECT(0x266b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 014B
        gbc.setState(0x7092, 0x5983, 0x1340, 0xb470, 0xf5cb, 0x149a, 0x0, 0x0);
        gbc.writeMem(0x7092, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x5983, gbc.sp());
        EXPECT(0x7094, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 014C
        gbc.setState(0x67a5, 0xdd0c, 0xf400, 0xfd73, 0x304a, 0x29b9, 0x0, 0x0);
        gbc.writeMem(0x67a5, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xdd0c, gbc.sp());
        EXPECT(0x67a7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 014E
        gbc.setState(0xc2e7, 0x6631, 0xe30, 0x246b, 0xd208, 0xc693, 0x1, 0x1);
        gbc.writeMem(0xc2e7, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x6631, gbc.sp());
        EXPECT(0xc2e9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc2e7));
        EXPECT(0xfd, gbc.readMem(0xc2e8));
        // CB FD 014F
        gbc.setState(0xa996, 0x2e35, 0x2ff0, 0x7b60, 0xb4e4, 0x70db, 0x1, 0x0);
        gbc.writeMem(0xa996, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x2e35, gbc.sp());
        EXPECT(0xa998, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa996));
        EXPECT(0xfd, gbc.readMem(0xa997));
        // CB FD 0150
        gbc.setState(0x3d21, 0x60d0, 0x450, 0x9977, 0xe76d, 0x3b49, 0x1, 0x1);
        gbc.writeMem(0x3d21, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x60d0, gbc.sp());
        EXPECT(0x3d23, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0151
        gbc.setState(0x728d, 0x94d1, 0xffb0, 0x2bac, 0xb69a, 0x582, 0x0, 0x0);
        gbc.writeMem(0x728d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x94d1, gbc.sp());
        EXPECT(0x728f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0152
        gbc.setState(0x4bb8, 0xe272, 0xacb0, 0xaa4, 0x663e, 0x8666, 0x0, 0x0);
        gbc.writeMem(0x4bb8, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0xe272, gbc.sp());
        EXPECT(0x4bba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0153
        gbc.setState(0xb235, 0x3fae, 0xcd30, 0xe96b, 0xdb7e, 0xb10, 0x0, 0x0);
        gbc.writeMem(0xb235, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x3fae, gbc.sp());
        EXPECT(0xb237, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb235));
        EXPECT(0xfd, gbc.readMem(0xb236));
        // CB FD 0154
        gbc.setState(0x8706, 0xa478, 0x97f0, 0x9a56, 0x13d, 0x30fb, 0x1, 0x1);
        gbc.writeMem(0x8706, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0xa478, gbc.sp());
        EXPECT(0x8708, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8706));
        EXPECT(0xfd, gbc.readMem(0x8707));
        // CB FD 0155
        gbc.setState(0xcc8c, 0xd9a3, 0x7730, 0xc2ec, 0xd5f0, 0x1344, 0x0, 0x0);
        gbc.writeMem(0xcc8c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0xd9a3, gbc.sp());
        EXPECT(0xcc8e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcc8c));
        EXPECT(0xfd, gbc.readMem(0xcc8d));
        // CB FD 0156
        gbc.setState(0x3678, 0x5f6e, 0x1d80, 0x104b, 0x7614, 0xfa40, 0x1, 0x1);
        gbc.writeMem(0x3678, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x5f6e, gbc.sp());
        EXPECT(0x367a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0157
        gbc.setState(0x559e, 0xa1ed, 0x8710, 0x53f9, 0xa9c7, 0x6c7, 0x0, 0x0);
        gbc.writeMem(0x559e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0xa1ed, gbc.sp());
        EXPECT(0x55a0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0158
        gbc.setState(0x5c47, 0xacde, 0x38e0, 0xae6f, 0x93c3, 0x6709, 0x1, 0x1);
        gbc.writeMem(0x5c47, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xacde, gbc.sp());
        EXPECT(0x5c49, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0159
        gbc.setState(0xd904, 0xd1ea, 0x4ca0, 0x7cb4, 0xd94c, 0xe9b0, 0x0, 0x0);
        gbc.writeMem(0xd904, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xd1ea, gbc.sp());
        EXPECT(0xd906, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd904));
        EXPECT(0xfd, gbc.readMem(0xd905));
        // CB FD 015A
        gbc.setState(0xc2b6, 0x1ae3, 0xcde0, 0x6687, 0x8324, 0xdffb, 0x1, 0x0);
        gbc.writeMem(0xc2b6, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x1ae3, gbc.sp());
        EXPECT(0xc2b8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc2b6));
        EXPECT(0xfd, gbc.readMem(0xc2b7));
        // CB FD 015B
        gbc.setState(0x53d5, 0xa574, 0x6690, 0x88ed, 0xcbcd, 0xe6d3, 0x0, 0x1);
        gbc.writeMem(0x53d5, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0xa574, gbc.sp());
        EXPECT(0x53d7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 015D
        gbc.setState(0x7398, 0xf67, 0x180, 0x2d2d, 0x355, 0x5527, 0x0, 0x0);
        gbc.writeMem(0x7398, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0xf67, gbc.sp());
        EXPECT(0x739a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 015F
        gbc.setState(0x60aa, 0x5818, 0xc2b0, 0xd73e, 0x132b, 0x5fdd, 0x0, 0x1);
        gbc.writeMem(0x60aa, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x5818, gbc.sp());
        EXPECT(0x60ac, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0160
        gbc.setState(0x306e, 0xdafd, 0x6ec0, 0xf8b1, 0xf5a, 0xf0b0, 0x1, 0x0);
        gbc.writeMem(0x306e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xdafd, gbc.sp());
        EXPECT(0x3070, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0161
        gbc.setState(0xb579, 0xc772, 0xd720, 0xa13, 0xfe07, 0x968f, 0x0, 0x1);
        gbc.writeMem(0xb579, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0xc772, gbc.sp());
        EXPECT(0xb57b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb579));
        EXPECT(0xfd, gbc.readMem(0xb57a));
        // CB FD 0162
        gbc.setState(0x1020, 0x8099, 0xfaf0, 0x9b73, 0x4bbf, 0x82d3, 0x1, 0x0);
        gbc.writeMem(0x1020, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x8099, gbc.sp());
        EXPECT(0x1022, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0163
        gbc.setState(0x7bb, 0xc7d, 0x1dc0, 0xf876, 0xe9b1, 0xbe9c, 0x0, 0x0);
        gbc.writeMem(0x7bb, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0xc7d, gbc.sp());
        EXPECT(0x7bd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0164
        gbc.setState(0xdb93, 0xa7ab, 0x39b0, 0x47f4, 0x803d, 0x7f46, 0x0, 0x0);
        gbc.writeMem(0xdb93, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0xa7ab, gbc.sp());
        EXPECT(0xdb95, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb93));
        EXPECT(0xfd, gbc.readMem(0xdb94));
        // CB FD 0165
        gbc.setState(0x7517, 0x17cc, 0xf270, 0xf6a3, 0x3313, 0xd6fa, 0x0, 0x1);
        gbc.writeMem(0x7517, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0x17cc, gbc.sp());
        EXPECT(0x7519, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0166
        gbc.setState(0xbd7, 0x37d1, 0x2a20, 0x3001, 0x66d5, 0xf90a, 0x1, 0x1);
        gbc.writeMem(0xbd7, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x37d1, gbc.sp());
        EXPECT(0xbd9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0167
        gbc.setState(0xd8b3, 0x8887, 0x33a0, 0xe485, 0x67b4, 0xa976, 0x0, 0x0);
        gbc.writeMem(0xd8b3, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x8887, gbc.sp());
        EXPECT(0xd8b5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd8b3));
        EXPECT(0xfd, gbc.readMem(0xd8b4));
        // CB FD 0169
        gbc.setState(0xb372, 0x1c0f, 0x6100, 0xa9e4, 0x6d04, 0x526d, 0x0, 0x0);
        gbc.writeMem(0xb372, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x1c0f, gbc.sp());
        EXPECT(0xb374, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb372));
        EXPECT(0xfd, gbc.readMem(0xb373));
        // CB FD 016A
        gbc.setState(0xbd67, 0x8eab, 0x4d80, 0xbe2a, 0xa238, 0xb792, 0x1, 0x1);
        gbc.writeMem(0xbd67, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x8eab, gbc.sp());
        EXPECT(0xbd69, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd67));
        EXPECT(0xfd, gbc.readMem(0xbd68));
        // CB FD 016B
        gbc.setState(0x9a88, 0x5a61, 0xec30, 0x7828, 0x9e6a, 0xffc1, 0x1, 0x0);
        gbc.writeMem(0x9a88, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x5a61, gbc.sp());
        EXPECT(0x9a8a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9a88));
        EXPECT(0xfd, gbc.readMem(0x9a89));
        // CB FD 016C
        gbc.setState(0xd626, 0x1cbf, 0xfeb0, 0xbf04, 0x7d8, 0xb5a8, 0x1, 0x0);
        gbc.writeMem(0xd626, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x1cbf, gbc.sp());
        EXPECT(0xd628, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd626));
        EXPECT(0xfd, gbc.readMem(0xd627));
        // CB FD 016D
        gbc.setState(0xd8c8, 0x990b, 0xa990, 0x77b8, 0x3ebf, 0x409f, 0x1, 0x0);
        gbc.writeMem(0xd8c8, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x990b, gbc.sp());
        EXPECT(0xd8ca, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd8c8));
        EXPECT(0xfd, gbc.readMem(0xd8c9));
        // CB FD 016E
        gbc.setState(0x855e, 0x6d1, 0x84e0, 0xdbbb, 0x1e9c, 0xeae0, 0x0, 0x1);
        gbc.writeMem(0x855e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x6d1, gbc.sp());
        EXPECT(0x8560, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x855e));
        EXPECT(0xfd, gbc.readMem(0x855f));
        // CB FD 016F
        gbc.setState(0xe885, 0xee75, 0xc120, 0xec8a, 0x5ebe, 0x6f92, 0x1, 0x0);
        gbc.writeMem(0xe885, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0xee75, gbc.sp());
        EXPECT(0xe887, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe885));
        EXPECT(0xfd, gbc.readMem(0xe886));
        // CB FD 0170
        gbc.setState(0x6ad4, 0xca09, 0x2310, 0xa80d, 0x208b, 0xc42d, 0x0, 0x1);
        gbc.writeMem(0x6ad4, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xca09, gbc.sp());
        EXPECT(0x6ad6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0171
        gbc.setState(0x4d7a, 0x506a, 0xe9f0, 0x97e1, 0x9618, 0x77ac, 0x1, 0x0);
        gbc.writeMem(0x4d7a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x506a, gbc.sp());
        EXPECT(0x4d7c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0172
        gbc.setState(0x54c9, 0xa1a, 0x7a00, 0xaa0a, 0xc148, 0x43a3, 0x1, 0x1);
        gbc.writeMem(0x54c9, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0xa1a, gbc.sp());
        EXPECT(0x54cb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0173
        gbc.setState(0x3264, 0xe035, 0x85d0, 0xd970, 0xa29a, 0xae8a, 0x1, 0x0);
        gbc.writeMem(0x3264, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0xe035, gbc.sp());
        EXPECT(0x3266, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0174
        gbc.setState(0xbcfa, 0x5ab8, 0x5dc0, 0x1845, 0xa25f, 0x3a5b, 0x0, 0x1);
        gbc.writeMem(0xbcfa, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x5ab8, gbc.sp());
        EXPECT(0xbcfc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbcfa));
        EXPECT(0xfd, gbc.readMem(0xbcfb));
        // CB FD 0175
        gbc.setState(0xaa4a, 0x5d27, 0xbb80, 0xbaa9, 0x7836, 0xe1cb, 0x0, 0x1);
        gbc.writeMem(0xaa4a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x5d27, gbc.sp());
        EXPECT(0xaa4c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa4a));
        EXPECT(0xfd, gbc.readMem(0xaa4b));
        // CB FD 0176
        gbc.setState(0x58e, 0x483e, 0x4960, 0x9275, 0x1650, 0xb3c8, 0x1, 0x0);
        gbc.writeMem(0x58e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x483e, gbc.sp());
        EXPECT(0x590, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0177
        gbc.setState(0x79a9, 0xb09b, 0x3430, 0x10f7, 0xbd9f, 0x8671, 0x0, 0x1);
        gbc.writeMem(0x79a9, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0xb09b, gbc.sp());
        EXPECT(0x79ab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0178
        gbc.setState(0x73e2, 0x2424, 0x4660, 0x42c7, 0xcf6f, 0xfeaa, 0x1, 0x1);
        gbc.writeMem(0x73e2, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x2424, gbc.sp());
        EXPECT(0x73e4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0179
        gbc.setState(0xe181, 0x156d, 0xfe80, 0x96e2, 0xfc9f, 0x118f, 0x1, 0x0);
        gbc.writeMem(0xe181, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x156d, gbc.sp());
        EXPECT(0xe183, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe181));
        EXPECT(0xfd, gbc.readMem(0xe182));
        // CB FD 017A
        gbc.setState(0x7168, 0x5b24, 0x2940, 0x4c32, 0x8db, 0xb574, 0x1, 0x0);
        gbc.writeMem(0x7168, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x5b24, gbc.sp());
        EXPECT(0x716a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 017B
        gbc.setState(0xdce2, 0x3734, 0xc730, 0xeaf6, 0x11ac, 0xfcea, 0x0, 0x0);
        gbc.writeMem(0xdce2, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x3734, gbc.sp());
        EXPECT(0xdce4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdce2));
        EXPECT(0xfd, gbc.readMem(0xdce3));
        // CB FD 017C
        gbc.setState(0xe7a1, 0xd015, 0xec0, 0x8b5a, 0x9bd0, 0xbc2f, 0x0, 0x0);
        gbc.writeMem(0xe7a1, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0xd015, gbc.sp());
        EXPECT(0xe7a3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe7a1));
        EXPECT(0xfd, gbc.readMem(0xe7a2));
        // CB FD 017D
        gbc.setState(0xa657, 0x88c0, 0x92a0, 0xa58, 0x4ac9, 0x1ea, 0x0, 0x0);
        gbc.writeMem(0xa657, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x88c0, gbc.sp());
        EXPECT(0xa659, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa657));
        EXPECT(0xfd, gbc.readMem(0xa658));
        // CB FD 017E
        gbc.setState(0x7c77, 0x900f, 0x1ba0, 0xd008, 0x525, 0xa2f9, 0x1, 0x1);
        gbc.writeMem(0x7c77, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0x900f, gbc.sp());
        EXPECT(0x7c79, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 017F
        gbc.setState(0x93ae, 0x2087, 0x3090, 0xd896, 0xe9db, 0xa0e5, 0x1, 0x1);
        gbc.writeMem(0x93ae, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x2087, gbc.sp());
        EXPECT(0x93b0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x93ae));
        EXPECT(0xfd, gbc.readMem(0x93af));
        // CB FD 0180
        gbc.setState(0x6557, 0x9802, 0xe8f0, 0xdb51, 0xfcfc, 0x86ba, 0x1, 0x0);
        gbc.writeMem(0x6557, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x9802, gbc.sp());
        EXPECT(0x6559, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0181
        gbc.setState(0x253f, 0x9cac, 0xfff0, 0x6d3f, 0x93a0, 0x79b0, 0x0, 0x1);
        gbc.writeMem(0x253f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x9cac, gbc.sp());
        EXPECT(0x2541, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0182
        gbc.setState(0x560d, 0xce5, 0x7630, 0xf91c, 0x61fc, 0xf39a, 0x1, 0x0);
        gbc.writeMem(0x560d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0xce5, gbc.sp());
        EXPECT(0x560f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0183
        gbc.setState(0x401f, 0x2138, 0xf990, 0xf722, 0xc038, 0xf2a3, 0x1, 0x0);
        gbc.writeMem(0x401f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x2138, gbc.sp());
        EXPECT(0x4021, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0184
        gbc.setState(0x7d6a, 0xfd40, 0xa390, 0x38cd, 0xdabc, 0xd5ff, 0x0, 0x0);
        gbc.writeMem(0x7d6a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0xfd40, gbc.sp());
        EXPECT(0x7d6c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0185
        gbc.setState(0x93ca, 0xc46a, 0x2e30, 0x7217, 0x8e1e, 0xab, 0x1, 0x1);
        gbc.writeMem(0x93ca, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0xc46a, gbc.sp());
        EXPECT(0x93cc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x93ca));
        EXPECT(0xfd, gbc.readMem(0x93cb));
        // CB FD 0186
        gbc.setState(0xac94, 0x5290, 0xc5a0, 0xd58c, 0x33f7, 0xf3be, 0x1, 0x0);
        gbc.writeMem(0xac94, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x5290, gbc.sp());
        EXPECT(0xac96, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac94));
        EXPECT(0xfd, gbc.readMem(0xac95));
        // CB FD 0187
        gbc.setState(0x746d, 0x8b39, 0xf560, 0x9bca, 0x5ecf, 0x7bb0, 0x1, 0x1);
        gbc.writeMem(0x746d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x8b39, gbc.sp());
        EXPECT(0x746f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0189
        gbc.setState(0x65b3, 0x8aee, 0xd3a0, 0x1db4, 0x637, 0xb476, 0x1, 0x1);
        gbc.writeMem(0x65b3, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x8aee, gbc.sp());
        EXPECT(0x65b5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 018A
        gbc.setState(0x3e95, 0x236f, 0xf330, 0x2cbc, 0x27bc, 0xd1bc, 0x1, 0x1);
        gbc.writeMem(0x3e95, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x236f, gbc.sp());
        EXPECT(0x3e97, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 018B
        gbc.setState(0xadf5, 0x83d1, 0xea10, 0xe0d2, 0xc076, 0x796e, 0x1, 0x1);
        gbc.writeMem(0xadf5, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x83d1, gbc.sp());
        EXPECT(0xadf7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xadf5));
        EXPECT(0xfd, gbc.readMem(0xadf6));
        // CB FD 018C
        gbc.setState(0xe3c7, 0x7555, 0xbac0, 0x2f84, 0x3759, 0x4378, 0x1, 0x1);
        gbc.writeMem(0xe3c7, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x7555, gbc.sp());
        EXPECT(0xe3c9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe3c7));
        EXPECT(0xfd, gbc.readMem(0xe3c8));
        // CB FD 018D
        gbc.setState(0x85a1, 0xc1e8, 0x92a0, 0x93ef, 0x9765, 0xa296, 0x0, 0x0);
        gbc.writeMem(0x85a1, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xc1e8, gbc.sp());
        EXPECT(0x85a3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x85a1));
        EXPECT(0xfd, gbc.readMem(0x85a2));
        // CB FD 018E
        gbc.setState(0xe097, 0xeac6, 0xb500, 0x35ee, 0x7852, 0xb5d, 0x1, 0x0);
        gbc.writeMem(0xe097, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0xeac6, gbc.sp());
        EXPECT(0xe099, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe097));
        EXPECT(0xfd, gbc.readMem(0xe098));
        // CB FD 018F
        gbc.setState(0x413d, 0x6f06, 0x3030, 0x52a5, 0x56ee, 0x1811, 0x1, 0x1);
        gbc.writeMem(0x413d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x6f06, gbc.sp());
        EXPECT(0x413f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0190
        gbc.setState(0x7ece, 0x9e18, 0x2ce0, 0x55c6, 0xd98, 0x5279, 0x1, 0x1);
        gbc.writeMem(0x7ece, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0x9e18, gbc.sp());
        EXPECT(0x7ed0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0191
        gbc.setState(0x205c, 0x1864, 0xf6e0, 0x26ab, 0x9288, 0x61c5, 0x0, 0x1);
        gbc.writeMem(0x205c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x1864, gbc.sp());
        EXPECT(0x205e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0192
        gbc.setState(0x6455, 0x311b, 0x41e0, 0x26ca, 0x12f5, 0xefd4, 0x1, 0x0);
        gbc.writeMem(0x6455, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x311b, gbc.sp());
        EXPECT(0x6457, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0193
        gbc.setState(0x3c2, 0xd1eb, 0xdb40, 0xd53a, 0xd715, 0x63d4, 0x0, 0x0);
        gbc.writeMem(0x3c2, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0xd1eb, gbc.sp());
        EXPECT(0x3c4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0194
        gbc.setState(0x25d3, 0x56e5, 0xa320, 0xa5ce, 0x8aca, 0x1d72, 0x1, 0x0);
        gbc.writeMem(0x25d3, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x56e5, gbc.sp());
        EXPECT(0x25d5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0195
        gbc.setState(0x41fa, 0x32bb, 0x7db0, 0x9c77, 0x5ab5, 0xd4cd, 0x0, 0x0);
        gbc.writeMem(0x41fa, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0x32bb, gbc.sp());
        EXPECT(0x41fc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0196
        gbc.setState(0x2a95, 0xae75, 0xab50, 0x6a1e, 0xa60b, 0xb74c, 0x0, 0x1);
        gbc.writeMem(0x2a95, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xae75, gbc.sp());
        EXPECT(0x2a97, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0197
        gbc.setState(0x2b0b, 0x3a3c, 0x5910, 0x36e0, 0x83e5, 0x9814, 0x0, 0x1);
        gbc.writeMem(0x2b0b, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x3a3c, gbc.sp());
        EXPECT(0x2b0d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0198
        gbc.setState(0xe3c0, 0x4a68, 0xb490, 0x9118, 0x46e6, 0x5db4, 0x1, 0x0);
        gbc.writeMem(0xe3c0, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x4a68, gbc.sp());
        EXPECT(0xe3c2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe3c0));
        EXPECT(0xfd, gbc.readMem(0xe3c1));
        // CB FD 0199
        gbc.setState(0xc38c, 0xaec7, 0x1e70, 0x49e6, 0xeaef, 0x5a51, 0x1, 0x0);
        gbc.writeMem(0xc38c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0xaec7, gbc.sp());
        EXPECT(0xc38e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc38c));
        EXPECT(0xfd, gbc.readMem(0xc38d));
        // CB FD 019A
        gbc.setState(0x6cc7, 0x7e03, 0x6940, 0x12c3, 0x38f9, 0x8369, 0x0, 0x1);
        gbc.writeMem(0x6cc7, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x7e03, gbc.sp());
        EXPECT(0x6cc9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 019B
        gbc.setState(0x8a2a, 0xb327, 0x2490, 0x8d88, 0x825c, 0x6db5, 0x0, 0x0);
        gbc.writeMem(0x8a2a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0xb327, gbc.sp());
        EXPECT(0x8a2c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a2a));
        EXPECT(0xfd, gbc.readMem(0x8a2b));
        // CB FD 019C
        gbc.setState(0x1749, 0xe527, 0xb3e0, 0xfb4f, 0xeeee, 0x38f8, 0x0, 0x0);
        gbc.writeMem(0x1749, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0xe527, gbc.sp());
        EXPECT(0x174b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 019E
        gbc.setState(0xe312, 0xf665, 0xb050, 0x9bb0, 0xe01, 0xb483, 0x1, 0x0);
        gbc.writeMem(0xe312, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0xf665, gbc.sp());
        EXPECT(0xe314, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe312));
        EXPECT(0xfd, gbc.readMem(0xe313));
        // CB FD 019F
        gbc.setState(0x43eb, 0xff0b, 0x8300, 0xcc54, 0xbf1c, 0xb864, 0x1, 0x1);
        gbc.writeMem(0x43eb, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0xff0b, gbc.sp());
        EXPECT(0x43ed, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 01A0
        gbc.setState(0xb048, 0xc912, 0xfb90, 0xb753, 0x4225, 0x1aae, 0x1, 0x1);
        gbc.writeMem(0xb048, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0xc912, gbc.sp());
        EXPECT(0xb04a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb048));
        EXPECT(0xfd, gbc.readMem(0xb049));
        // CB FD 01A1
        gbc.setState(0x5a67, 0xe6c7, 0xce60, 0xf98, 0x9f99, 0x3dd, 0x1, 0x0);
        gbc.writeMem(0x5a67, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0xe6c7, gbc.sp());
        EXPECT(0x5a69, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 01A2
        gbc.setState(0xdf8c, 0x3b0d, 0xc9d0, 0x398d, 0xc65d, 0x125c, 0x0, 0x1);
        gbc.writeMem(0xdf8c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x3b0d, gbc.sp());
        EXPECT(0xdf8e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdf8c));
        EXPECT(0xfd, gbc.readMem(0xdf8d));
        // CB FD 01A4
        gbc.setState(0x84a6, 0xf62, 0x87b0, 0xcb9f, 0x6eae, 0x25fe, 0x0, 0x0);
        gbc.writeMem(0x84a6, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0xf62, gbc.sp());
        EXPECT(0x84a8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84a6));
        EXPECT(0xfd, gbc.readMem(0x84a7));
        // CB FD 01A5
        gbc.setState(0xe80d, 0x9b33, 0xe8a0, 0xcb99, 0xb0ed, 0xb2a7, 0x0, 0x1);
        gbc.writeMem(0xe80d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x9b33, gbc.sp());
        EXPECT(0xe80f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe80d));
        EXPECT(0xfd, gbc.readMem(0xe80e));
        // CB FD 01A6
        gbc.setState(0xcd18, 0x7f6e, 0x9080, 0xe35a, 0x291b, 0xacd5, 0x1, 0x1);
        gbc.writeMem(0xcd18, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x7f6e, gbc.sp());
        EXPECT(0xcd1a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd18));
        EXPECT(0xfd, gbc.readMem(0xcd19));
        // CB FD 01A7
        gbc.setState(0x39f0, 0xa0dd, 0x2530, 0xf9f2, 0x409, 0x6680, 0x1, 0x1);
        gbc.writeMem(0x39f0, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0xa0dd, gbc.sp());
        EXPECT(0x39f2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 01A8
        gbc.setState(0xc18b, 0xbe5b, 0xbb30, 0x693d, 0xb995, 0x3c13, 0x0, 0x0);
        gbc.writeMem(0xc18b, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0xbe5b, gbc.sp());
        EXPECT(0xc18d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc18b));
        EXPECT(0xfd, gbc.readMem(0xc18c));
        // CB FD 01A9
        gbc.setState(0xec9, 0x86d8, 0x660, 0xcd54, 0x532d, 0x8034, 0x0, 0x1);
        gbc.writeMem(0xec9, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x86d8, gbc.sp());
        EXPECT(0xecb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 01AA
        gbc.setState(0x8678, 0x4a23, 0x8330, 0x1c09, 0x287c, 0xa068, 0x1, 0x0);
        gbc.writeMem(0x8678, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x4a23, gbc.sp());
        EXPECT(0x867a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8678));
        EXPECT(0xfd, gbc.readMem(0x8679));
        // CB FD 01AB
        gbc.setState(0x6363, 0x8901, 0x4d70, 0xb70d, 0xe616, 0x24cb, 0x1, 0x0);
        gbc.writeMem(0x6363, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x8901, gbc.sp());
        EXPECT(0x6365, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 01AC
        gbc.setState(0x615e, 0xb302, 0xc560, 0x2c2b, 0x97ef, 0x81c6, 0x0, 0x1);
        gbc.writeMem(0x615e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0xb302, gbc.sp());
        EXPECT(0x6160, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 01AD
        gbc.setState(0xa115, 0x3264, 0x5ce0, 0x562f, 0x336d, 0xd3ce, 0x0, 0x0);
        gbc.writeMem(0xa115, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x3264, gbc.sp());
        EXPECT(0xa117, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa115));
        EXPECT(0xfd, gbc.readMem(0xa116));
        // CB FD 01AE
        gbc.setState(0x7629, 0x2d73, 0xd9d0, 0xda14, 0x8235, 0xf8f3, 0x0, 0x0);
        gbc.writeMem(0x7629, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x2d73, gbc.sp());
        EXPECT(0x762b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 01AF
        gbc.setState(0x78dd, 0x5104, 0xc60, 0xc1e4, 0x70f, 0xe75f, 0x1, 0x1);
        gbc.writeMem(0x78dd, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x5104, gbc.sp());
        EXPECT(0x78df, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 01B0
        gbc.setState(0x111a, 0x654c, 0x3bf0, 0xee32, 0xf407, 0xd1f8, 0x1, 0x1);
        gbc.writeMem(0x111a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x654c, gbc.sp());
        EXPECT(0x111c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 01B1
        gbc.setState(0x9e4e, 0x3cc3, 0x3330, 0xc752, 0xcaab, 0xcdc7, 0x1, 0x1);
        gbc.writeMem(0x9e4e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x3cc3, gbc.sp());
        EXPECT(0x9e50, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9e4e));
        EXPECT(0xfd, gbc.readMem(0x9e4f));
        // CB FD 01B2
        gbc.setState(0xd69b, 0x6e8c, 0xda20, 0x7f5, 0x53be, 0x47c0, 0x0, 0x0);
        gbc.writeMem(0xd69b, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x6e8c, gbc.sp());
        EXPECT(0xd69d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd69b));
        EXPECT(0xfd, gbc.readMem(0xd69c));
        // CB FD 01B3
        gbc.setState(0x10f, 0xaf89, 0x75e0, 0x51e7, 0xe7d0, 0xb853, 0x1, 0x0);
        gbc.writeMem(0x10f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0xaf89, gbc.sp());
        EXPECT(0x111, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 01B4
        gbc.setState(0xdc08, 0xc6f7, 0xc560, 0xa6cb, 0x494a, 0x42ba, 0x0, 0x1);
        gbc.writeMem(0xdc08, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0xc6f7, gbc.sp());
        EXPECT(0xdc0a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc08));
        EXPECT(0xfd, gbc.readMem(0xdc09));
        // CB FD 01B5
        gbc.setState(0xdaf2, 0x42ae, 0x3440, 0x11a1, 0x9bcd, 0x71ea, 0x1, 0x1);
        gbc.writeMem(0xdaf2, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x42ae, gbc.sp());
        EXPECT(0xdaf4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdaf2));
        EXPECT(0xfd, gbc.readMem(0xdaf3));
        // CB FD 01B6
        gbc.setState(0x273b, 0x29d2, 0x1740, 0x397c, 0x3d26, 0x4e3c, 0x1, 0x0);
        gbc.writeMem(0x273b, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x29d2, gbc.sp());
        EXPECT(0x273d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 01B7
        gbc.setState(0xc17a, 0x6404, 0xd770, 0x69d5, 0xdc35, 0x359f, 0x1, 0x0);
        gbc.writeMem(0xc17a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x6404, gbc.sp());
        EXPECT(0xc17c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc17a));
        EXPECT(0xfd, gbc.readMem(0xc17b));
        // CB FD 01B8
        gbc.setState(0x83b9, 0xa7de, 0x64f0, 0x2eec, 0xc08f, 0xe7cc, 0x0, 0x0);
        gbc.writeMem(0x83b9, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xa7de, gbc.sp());
        EXPECT(0x83bb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x83b9));
        EXPECT(0xfd, gbc.readMem(0x83ba));
        // CB FD 01B9
        gbc.setState(0x266d, 0x2f59, 0x6e0, 0x1b3b, 0xe056, 0x2d18, 0x0, 0x0);
        gbc.writeMem(0x266d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x2f59, gbc.sp());
        EXPECT(0x266f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 01BA
        gbc.setState(0x53, 0x82a4, 0xd0d0, 0x90f3, 0x4b48, 0x55d2, 0x1, 0x0);
        gbc.writeMem(0x53, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x82a4, gbc.sp());
        EXPECT(0x55, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 01BB
        gbc.setState(0x9365, 0x2172, 0x4e60, 0x29d3, 0x5724, 0x4d3b, 0x1, 0x1);
        gbc.writeMem(0x9365, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x2172, gbc.sp());
        EXPECT(0x9367, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9365));
        EXPECT(0xfd, gbc.readMem(0x9366));
        // CB FD 01BC
        gbc.setState(0xddf9, 0xff40, 0xaf70, 0x7459, 0x3fb1, 0xcf98, 0x0, 0x1);
        gbc.writeMem(0xddf9, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xff40, gbc.sp());
        EXPECT(0xddfb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xddf9));
        EXPECT(0xfd, gbc.readMem(0xddfa));
        // CB FD 01BD
        gbc.setState(0x283f, 0x7576, 0xf490, 0x41d6, 0x9e97, 0x7f0, 0x1, 0x0);
        gbc.writeMem(0x283f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x7576, gbc.sp());
        EXPECT(0x2841, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 01BE
        gbc.setState(0xa254, 0x58ba, 0x3a0, 0x7831, 0x353, 0xb453, 0x1, 0x0);
        gbc.writeMem(0xa254, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x58ba, gbc.sp());
        EXPECT(0xa256, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa254));
        EXPECT(0xfd, gbc.readMem(0xa255));
        // CB FD 01BF
        gbc.setState(0xb177, 0x55ea, 0x9e90, 0xb266, 0xec67, 0x8b2, 0x0, 0x1);
        gbc.writeMem(0xb177, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x55ea, gbc.sp());
        EXPECT(0xb179, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb177));
        EXPECT(0xfd, gbc.readMem(0xb178));
        // CB FD 01C1
        gbc.setState(0xdb8d, 0xb076, 0xe0a0, 0x3d90, 0x4353, 0xdc53, 0x1, 0x1);
        gbc.writeMem(0xdb8d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0xb076, gbc.sp());
        EXPECT(0xdb8f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb8d));
        EXPECT(0xfd, gbc.readMem(0xdb8e));
        // CB FD 01C2
        gbc.setState(0x7ca9, 0x7cca, 0xa380, 0xb446, 0xe8, 0xa66e, 0x1, 0x0);
        gbc.writeMem(0x7ca9, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x7cca, gbc.sp());
        EXPECT(0x7cab, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 01C3
        gbc.setState(0x2911, 0x80a5, 0x3400, 0xedaa, 0xa0a2, 0xe232, 0x1, 0x0);
        gbc.writeMem(0x2911, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x80a5, gbc.sp());
        EXPECT(0x2913, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 01C4
        gbc.setState(0xec3a, 0x471a, 0xeb30, 0xd8be, 0xcdb, 0xa3b3, 0x0, 0x1);
        gbc.writeMem(0xec3a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x471a, gbc.sp());
        EXPECT(0xec3c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xec3a));
        EXPECT(0xfd, gbc.readMem(0xec3b));
        // CB FD 01C5
        gbc.setState(0xc580, 0xdbab, 0xd980, 0xe82f, 0xd637, 0x4e76, 0x0, 0x1);
        gbc.writeMem(0xc580, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0xdbab, gbc.sp());
        EXPECT(0xc582, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc580));
        EXPECT(0xfd, gbc.readMem(0xc581));
        // CB FD 01C6
        gbc.setState(0xb8be, 0x7549, 0x1c40, 0x10cd, 0x1d46, 0x7bb6, 0x1, 0x0);
        gbc.writeMem(0xb8be, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x7549, gbc.sp());
        EXPECT(0xb8c0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb8be));
        EXPECT(0xfd, gbc.readMem(0xb8bf));
        // CB FD 01C7
        gbc.setState(0xc8ad, 0x7cf6, 0x6260, 0x32f7, 0x3533, 0xccf0, 0x1, 0x0);
        gbc.writeMem(0xc8ad, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x7cf6, gbc.sp());
        EXPECT(0xc8af, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc8ad));
        EXPECT(0xfd, gbc.readMem(0xc8ae));
        // CB FD 01C9
        gbc.setState(0xdf90, 0xe3d0, 0xb0f0, 0x60a7, 0x319, 0x6a16, 0x0, 0x0);
        gbc.writeMem(0xdf90, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xe3d0, gbc.sp());
        EXPECT(0xdf92, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdf90));
        EXPECT(0xfd, gbc.readMem(0xdf91));
        // CB FD 01CA
        gbc.setState(0x6a7d, 0x7e97, 0xfee0, 0x8af5, 0x4b2a, 0xe618, 0x0, 0x0);
        gbc.writeMem(0x6a7d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x7e97, gbc.sp());
        EXPECT(0x6a7f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 01CB
        gbc.setState(0x13ee, 0x8ca2, 0x6030, 0x201, 0x8e4a, 0xf9f7, 0x1, 0x1);
        gbc.writeMem(0x13ee, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x8ca2, gbc.sp());
        EXPECT(0x13f0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 01CC
        gbc.setState(0xf2d, 0x47eb, 0x7660, 0x66f7, 0x1ad9, 0x2e19, 0x1, 0x1);
        gbc.writeMem(0xf2d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x47eb, gbc.sp());
        EXPECT(0xf2f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 01CD
        gbc.setState(0xe0c1, 0xbc38, 0xe080, 0x11af, 0x44eb, 0xe9cf, 0x0, 0x1);
        gbc.writeMem(0xe0c1, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xbc38, gbc.sp());
        EXPECT(0xe0c3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe0c1));
        EXPECT(0xfd, gbc.readMem(0xe0c2));
        // CB FD 01CE
        gbc.setState(0x4a43, 0x8dbf, 0x7800, 0x8054, 0xdaf2, 0x5058, 0x1, 0x1);
        gbc.writeMem(0x4a43, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x8dbf, gbc.sp());
        EXPECT(0x4a45, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 01CF
        gbc.setState(0x48aa, 0x2249, 0x2f30, 0xad78, 0xd35a, 0xb060, 0x1, 0x1);
        gbc.writeMem(0x48aa, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x2249, gbc.sp());
        EXPECT(0x48ac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 01D0
        gbc.setState(0xcfa1, 0x8f0f, 0x9f90, 0xceb5, 0xb0ce, 0xd09, 0x0, 0x1);
        gbc.writeMem(0xcfa1, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x8f0f, gbc.sp());
        EXPECT(0xcfa3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcfa1));
        EXPECT(0xfd, gbc.readMem(0xcfa2));
        // CB FD 01D1
        gbc.setState(0x318f, 0x959, 0x48d0, 0x9bff, 0xbef7, 0x7c27, 0x0, 0x0);
        gbc.writeMem(0x318f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x959, gbc.sp());
        EXPECT(0x3191, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 01D2
        gbc.setState(0x96a1, 0xaf7b, 0x9cb0, 0x66df, 0x2c1e, 0x440d, 0x0, 0x0);
        gbc.writeMem(0x96a1, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xaf7b, gbc.sp());
        EXPECT(0x96a3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x96a1));
        EXPECT(0xfd, gbc.readMem(0x96a2));
        // CB FD 01D3
        gbc.setState(0x5c88, 0xc4da, 0x4e70, 0x2fd3, 0x3d59, 0x4179, 0x0, 0x1);
        gbc.writeMem(0x5c88, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0xc4da, gbc.sp());
        EXPECT(0x5c8a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 01D5
        gbc.setState(0x4d67, 0x5b43, 0x6300, 0xe3f1, 0xf039, 0x8a26, 0x0, 0x0);
        gbc.writeMem(0x4d67, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x5b43, gbc.sp());
        EXPECT(0x4d69, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 01D6
        gbc.setState(0xd104, 0xb09, 0x5d40, 0xd6d3, 0xe5f0, 0xed22, 0x0, 0x0);
        gbc.writeMem(0xd104, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0xb09, gbc.sp());
        EXPECT(0xd106, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd104));
        EXPECT(0xfd, gbc.readMem(0xd105));
        // CB FD 01D7
        gbc.setState(0xe26e, 0x2e8b, 0x8250, 0x645e, 0x8755, 0x5a2d, 0x0, 0x0);
        gbc.writeMem(0xe26e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x2e8b, gbc.sp());
        EXPECT(0xe270, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe26e));
        EXPECT(0xfd, gbc.readMem(0xe26f));
        // CB FD 01D8
        gbc.setState(0xc6d9, 0xc0f3, 0xbe0, 0x6ff7, 0x3aea, 0x4fa4, 0x1, 0x1);
        gbc.writeMem(0xc6d9, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xc0f3, gbc.sp());
        EXPECT(0xc6db, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc6d9));
        EXPECT(0xfd, gbc.readMem(0xc6da));
        // CB FD 01D9
        gbc.setState(0x8b5a, 0x2e53, 0x1290, 0x10cb, 0xad52, 0x3f20, 0x1, 0x1);
        gbc.writeMem(0x8b5a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0x2e53, gbc.sp());
        EXPECT(0x8b5c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b5a));
        EXPECT(0xfd, gbc.readMem(0x8b5b));
        // CB FD 01DA
        gbc.setState(0x11db, 0xdbef, 0xbd70, 0x2dbe, 0xab96, 0x9d5b, 0x1, 0x0);
        gbc.writeMem(0x11db, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0xdbef, gbc.sp());
        EXPECT(0x11dd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 01DB
        gbc.setState(0x3041, 0x328e, 0x8810, 0x3de1, 0xcea6, 0x6898, 0x0, 0x0);
        gbc.writeMem(0x3041, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x328e, gbc.sp());
        EXPECT(0x3043, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 01DC
        gbc.setState(0xacfa, 0x5847, 0x1010, 0x6589, 0x909e, 0xb67, 0x1, 0x0);
        gbc.writeMem(0xacfa, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0x5847, gbc.sp());
        EXPECT(0xacfc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xacfa));
        EXPECT(0xfd, gbc.readMem(0xacfb));
        // CB FD 01DD
        gbc.setState(0xbe24, 0x252d, 0x5b20, 0x98, 0x2228, 0x85e, 0x0, 0x1);
        gbc.writeMem(0xbe24, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x252d, gbc.sp());
        EXPECT(0xbe26, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe24));
        EXPECT(0xfd, gbc.readMem(0xbe25));
        // CB FD 01DE
        gbc.setState(0x8739, 0x7d4, 0x6a30, 0xf8ed, 0x9528, 0x38b, 0x0, 0x0);
        gbc.writeMem(0x8739, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x7d4, gbc.sp());
        EXPECT(0x873b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8739));
        EXPECT(0xfd, gbc.readMem(0x873a));
        // CB FD 01DF
        gbc.setState(0xe82e, 0x52f7, 0x8060, 0xbfb6, 0x3fb9, 0xc9ba, 0x0, 0x0);
        gbc.writeMem(0xe82e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x52f7, gbc.sp());
        EXPECT(0xe830, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe82e));
        EXPECT(0xfd, gbc.readMem(0xe82f));
        // CB FD 01E0
        gbc.setState(0x79fa, 0x430e, 0x6920, 0xd73, 0xc269, 0xaa92, 0x0, 0x0);
        gbc.writeMem(0x79fa, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x430e, gbc.sp());
        EXPECT(0x79fc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 01E1
        gbc.setState(0x21af, 0x4d6f, 0x8960, 0xf741, 0x5975, 0xab27, 0x1, 0x0);
        gbc.writeMem(0x21af, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x4d6f, gbc.sp());
        EXPECT(0x21b1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 01E2
        gbc.setState(0x34b3, 0xbaa4, 0xbb90, 0xe864, 0x4ee1, 0xc4e1, 0x0, 0x0);
        gbc.writeMem(0x34b3, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0xbaa4, gbc.sp());
        EXPECT(0x34b5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 01E3
        gbc.setState(0xbc2c, 0x2796, 0xe740, 0x246b, 0xff31, 0xc72d, 0x1, 0x0);
        gbc.writeMem(0xbc2c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x2796, gbc.sp());
        EXPECT(0xbc2e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbc2c));
        EXPECT(0xfd, gbc.readMem(0xbc2d));
        // CB FD 01E4
        gbc.setState(0x3409, 0x11fd, 0x6380, 0xb319, 0xff1c, 0xa2c5, 0x0, 0x1);
        gbc.writeMem(0x3409, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x11fd, gbc.sp());
        EXPECT(0x340b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 01E5
        gbc.setState(0xaa32, 0x6818, 0xbd00, 0xf0f5, 0xfa55, 0xc4b1, 0x0, 0x1);
        gbc.writeMem(0xaa32, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x6818, gbc.sp());
        EXPECT(0xaa34, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa32));
        EXPECT(0xfd, gbc.readMem(0xaa33));
        // CB FD 01E6
        gbc.setState(0x4aa7, 0x525d, 0xc270, 0xea7a, 0xddb3, 0xedf8, 0x1, 0x1);
        gbc.writeMem(0x4aa7, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x525d, gbc.sp());
        EXPECT(0x4aa9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 01E7
        gbc.setState(0xd305, 0x192d, 0x6ce0, 0xd59f, 0xf216, 0xea42, 0x1, 0x1);
        gbc.writeMem(0xd305, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0x192d, gbc.sp());
        EXPECT(0xd307, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd305));
        EXPECT(0xfd, gbc.readMem(0xd306));
        // CB FD 01E8
        gbc.setState(0x7c90, 0x9ff8, 0xbe0, 0x3d14, 0xa0ad, 0x9019, 0x1, 0x0);
        gbc.writeMem(0x7c90, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x9ff8, gbc.sp());
        EXPECT(0x7c92, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 01E9
        gbc.setState(0xdb69, 0x2a92, 0xc5f0, 0x3602, 0xeeda, 0x8bb5, 0x0, 0x1);
        gbc.writeMem(0xdb69, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x2a92, gbc.sp());
        EXPECT(0xdb6b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb69));
        EXPECT(0xfd, gbc.readMem(0xdb6a));
        // CB FD 01EA
        gbc.setState(0x171c, 0xe56c, 0xdf60, 0xfe24, 0xcf91, 0xe118, 0x1, 0x0);
        gbc.writeMem(0x171c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xe56c, gbc.sp());
        EXPECT(0x171e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 01EB
        gbc.setState(0x634c, 0x51fe, 0x7750, 0xf45d, 0x1f44, 0x9d91, 0x1, 0x1);
        gbc.writeMem(0x634c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x51fe, gbc.sp());
        EXPECT(0x634e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 01EC
        gbc.setState(0x9cc4, 0x1b54, 0x48a0, 0x10de, 0x67bc, 0x15ca, 0x0, 0x0);
        gbc.writeMem(0x9cc4, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x1b54, gbc.sp());
        EXPECT(0x9cc6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9cc4));
        EXPECT(0xfd, gbc.readMem(0x9cc5));
        // CB FD 01ED
        gbc.setState(0xe656, 0xe93f, 0xfb50, 0xe10f, 0x6b96, 0x7c02, 0x0, 0x0);
        gbc.writeMem(0xe656, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xe93f, gbc.sp());
        EXPECT(0xe658, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe656));
        EXPECT(0xfd, gbc.readMem(0xe657));
        // CB FD 01EE
        gbc.setState(0x319c, 0x2f9d, 0xd420, 0x4b27, 0x737f, 0x5e80, 0x0, 0x0);
        gbc.writeMem(0x319c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x2f9d, gbc.sp());
        EXPECT(0x319e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 01EF
        gbc.setState(0xed1c, 0x6c5, 0x2830, 0x8db9, 0xe670, 0xfae4, 0x0, 0x0);
        gbc.writeMem(0xed1c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0x6c5, gbc.sp());
        EXPECT(0xed1e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xed1c));
        EXPECT(0xfd, gbc.readMem(0xed1d));
        // CB FD 01F0
        gbc.setState(0x12d9, 0xa30c, 0xf750, 0xb4ed, 0x88fa, 0x8a6a, 0x0, 0x0);
        gbc.writeMem(0x12d9, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0xa30c, gbc.sp());
        EXPECT(0x12db, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 01F1
        gbc.setState(0xbb97, 0x2fdb, 0x21d0, 0x62c4, 0x7d7c, 0xca60, 0x1, 0x1);
        gbc.writeMem(0xbb97, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x2fdb, gbc.sp());
        EXPECT(0xbb99, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbb97));
        EXPECT(0xfd, gbc.readMem(0xbb98));
        // CB FD 01F2
        gbc.setState(0x9f92, 0x1c44, 0x52b0, 0x504, 0x972a, 0x5ba5, 0x0, 0x0);
        gbc.writeMem(0x9f92, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x1c44, gbc.sp());
        EXPECT(0x9f94, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f92));
        EXPECT(0xfd, gbc.readMem(0x9f93));
        // CB FD 01F3
        gbc.setState(0xedbb, 0xb0e0, 0xf010, 0x59e9, 0xc8f8, 0x823c, 0x0, 0x0);
        gbc.writeMem(0xedbb, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0xb0e0, gbc.sp());
        EXPECT(0xedbd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xedbb));
        EXPECT(0xfd, gbc.readMem(0xedbc));
        // CB FD 01F4
        gbc.setState(0x8a68, 0xb23d, 0x65e0, 0x4c15, 0x3259, 0x9fd6, 0x0, 0x0);
        gbc.writeMem(0x8a68, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0xb23d, gbc.sp());
        EXPECT(0x8a6a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a68));
        EXPECT(0xfd, gbc.readMem(0x8a69));
        // CB FD 01F5
        gbc.setState(0x58a1, 0xdd0b, 0xd3c0, 0xb2ee, 0xcfa7, 0xcd25, 0x0, 0x0);
        gbc.writeMem(0x58a1, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0xdd0b, gbc.sp());
        EXPECT(0x58a3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 01F6
        gbc.setState(0xaf4, 0x51e5, 0x4200, 0x65a0, 0x5310, 0xe10f, 0x1, 0x1);
        gbc.writeMem(0xaf4, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x51e5, gbc.sp());
        EXPECT(0xaf6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 01F7
        gbc.setState(0x91c6, 0x679e, 0xa9a0, 0xa277, 0xa045, 0x7e6, 0x0, 0x0);
        gbc.writeMem(0x91c6, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x679e, gbc.sp());
        EXPECT(0x91c8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x91c6));
        EXPECT(0xfd, gbc.readMem(0x91c7));
        // CB FD 01F8
        gbc.setState(0xeb15, 0x2536, 0x5190, 0x6732, 0xb96a, 0x4e41, 0x0, 0x0);
        gbc.writeMem(0xeb15, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x2536, gbc.sp());
        EXPECT(0xeb17, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb15));
        EXPECT(0xfd, gbc.readMem(0xeb16));
        // CB FD 01F9
        gbc.setState(0xef04, 0xddd3, 0x5b10, 0x8df, 0xf2c4, 0xae00, 0x0, 0x1);
        gbc.writeMem(0xef04, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0xddd3, gbc.sp());
        EXPECT(0xef06, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xef04));
        EXPECT(0xfd, gbc.readMem(0xef05));
        // CB FD 01FA
        gbc.setState(0x73c2, 0x4635, 0x7f40, 0xa6e9, 0x8e52, 0xa2da, 0x0, 0x0);
        gbc.writeMem(0x73c2, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x4635, gbc.sp());
        EXPECT(0x73c4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 01FB
        gbc.setState(0x852b, 0x6980, 0x2a80, 0xfe3, 0x48cd, 0x1f09, 0x0, 0x0);
        gbc.writeMem(0x852b, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x6980, gbc.sp());
        EXPECT(0x852d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x852b));
        EXPECT(0xfd, gbc.readMem(0x852c));
        // CB FD 01FC
        gbc.setState(0x556c, 0xd985, 0x540, 0x4958, 0x14c4, 0xac23, 0x1, 0x0);
        gbc.writeMem(0x556c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0xd985, gbc.sp());
        EXPECT(0x556e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 01FD
        gbc.setState(0xa3c6, 0x7b26, 0xa350, 0xfaed, 0x92ab, 0x14cc, 0x1, 0x0);
        gbc.writeMem(0xa3c6, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x7b26, gbc.sp());
        EXPECT(0xa3c8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa3c6));
        EXPECT(0xfd, gbc.readMem(0xa3c7));
        // CB FD 01FE
        gbc.setState(0x1ba9, 0xe1d, 0x8bd0, 0x1910, 0x6302, 0x1efe, 0x0, 0x1);
        gbc.writeMem(0x1ba9, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0xe1d, gbc.sp());
        EXPECT(0x1bab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 01FF
        gbc.setState(0xb0af, 0xb235, 0xbfe0, 0x3246, 0xb4c3, 0xde17, 0x0, 0x1);
        gbc.writeMem(0xb0af, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xb235, gbc.sp());
        EXPECT(0xb0b1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb0af));
        EXPECT(0xfd, gbc.readMem(0xb0b0));
        // CB FD 0201
        gbc.setState(0x7223, 0x60d, 0x5190, 0x7612, 0x71e, 0x2a95, 0x1, 0x0);
        gbc.writeMem(0x7223, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x60d, gbc.sp());
        EXPECT(0x7225, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0202
        gbc.setState(0x607, 0xda93, 0xe070, 0x2c26, 0xeb5d, 0x5340, 0x1, 0x0);
        gbc.writeMem(0x607, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0xda93, gbc.sp());
        EXPECT(0x609, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0203
        gbc.setState(0x56e2, 0x5674, 0xac50, 0x9dfd, 0x5d6e, 0x8cf9, 0x0, 0x1);
        gbc.writeMem(0x56e2, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0x5674, gbc.sp());
        EXPECT(0x56e4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0204
        gbc.setState(0xa545, 0x8ceb, 0xb660, 0xbd6d, 0xc6b1, 0xba86, 0x1, 0x0);
        gbc.writeMem(0xa545, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x8ceb, gbc.sp());
        EXPECT(0xa547, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa545));
        EXPECT(0xfd, gbc.readMem(0xa546));
        // CB FD 0205
        gbc.setState(0x41bf, 0x9d9b, 0x2430, 0x5e9f, 0x1c27, 0x7603, 0x1, 0x1);
        gbc.writeMem(0x41bf, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x9d9b, gbc.sp());
        EXPECT(0x41c1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0206
        gbc.setState(0xcdf5, 0x11ac, 0xf8b0, 0xb39a, 0xd6b2, 0xefdd, 0x1, 0x0);
        gbc.writeMem(0xcdf5, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x11ac, gbc.sp());
        EXPECT(0xcdf7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcdf5));
        EXPECT(0xfd, gbc.readMem(0xcdf6));
        // CB FD 0207
        gbc.setState(0xdd9b, 0x6eef, 0xecd0, 0xcb87, 0x7483, 0x934f, 0x1, 0x0);
        gbc.writeMem(0xdd9b, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x6eef, gbc.sp());
        EXPECT(0xdd9d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdd9b));
        EXPECT(0xfd, gbc.readMem(0xdd9c));
        // CB FD 0208
        gbc.setState(0xe513, 0xeed0, 0x9440, 0xaad, 0xc058, 0x877e, 0x1, 0x0);
        gbc.writeMem(0xe513, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0xeed0, gbc.sp());
        EXPECT(0xe515, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe513));
        EXPECT(0xfd, gbc.readMem(0xe514));
        // CB FD 0209
        gbc.setState(0x9912, 0xb332, 0xa7e0, 0x448f, 0x5c9f, 0x540, 0x0, 0x1);
        gbc.writeMem(0x9912, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0xb332, gbc.sp());
        EXPECT(0x9914, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9912));
        EXPECT(0xfd, gbc.readMem(0x9913));
        // CB FD 020A
        gbc.setState(0x16fd, 0x6766, 0xb610, 0xc3c8, 0xbb13, 0x4711, 0x1, 0x0);
        gbc.writeMem(0x16fd, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x6766, gbc.sp());
        EXPECT(0x16ff, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 020B
        gbc.setState(0x923f, 0x5e67, 0x2a50, 0x4634, 0x228, 0x94b7, 0x1, 0x1);
        gbc.writeMem(0x923f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x5e67, gbc.sp());
        EXPECT(0x9241, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x923f));
        EXPECT(0xfd, gbc.readMem(0x9240));
        // CB FD 020C
        gbc.setState(0xe4c, 0x757b, 0xd6b0, 0x969a, 0xa446, 0xa476, 0x1, 0x1);
        gbc.writeMem(0xe4c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x757b, gbc.sp());
        EXPECT(0xe4e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 020D
        gbc.setState(0x6d4c, 0x4cee, 0x97e0, 0xcad3, 0xede, 0xe127, 0x0, 0x0);
        gbc.writeMem(0x6d4c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x4cee, gbc.sp());
        EXPECT(0x6d4e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 020E
        gbc.setState(0x8faa, 0x81b5, 0x4730, 0x8239, 0x4ed4, 0x9218, 0x0, 0x0);
        gbc.writeMem(0x8faa, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x81b5, gbc.sp());
        EXPECT(0x8fac, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8faa));
        EXPECT(0xfd, gbc.readMem(0x8fab));
        // CB FD 020F
        gbc.setState(0x7b7e, 0x8bb5, 0xe2a0, 0xf5cc, 0x7aed, 0x2fda, 0x0, 0x0);
        gbc.writeMem(0x7b7e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x8bb5, gbc.sp());
        EXPECT(0x7b80, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0212
        gbc.setState(0xb1df, 0xd192, 0xce90, 0xe1ff, 0x9857, 0x2396, 0x0, 0x0);
        gbc.writeMem(0xb1df, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xd192, gbc.sp());
        EXPECT(0xb1e1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb1df));
        EXPECT(0xfd, gbc.readMem(0xb1e0));
        // CB FD 0213
        gbc.setState(0x3d4a, 0x960c, 0xfcb0, 0x5bdc, 0xb1f, 0xe1a6, 0x0, 0x1);
        gbc.writeMem(0x3d4a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x960c, gbc.sp());
        EXPECT(0x3d4c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0214
        gbc.setState(0xe406, 0x8993, 0x1800, 0xaf54, 0x25ae, 0x82bf, 0x1, 0x1);
        gbc.writeMem(0xe406, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x8993, gbc.sp());
        EXPECT(0xe408, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe406));
        EXPECT(0xfd, gbc.readMem(0xe407));
        // CB FD 0215
        gbc.setState(0xc204, 0xca98, 0x70d0, 0x631b, 0x7313, 0xe5f6, 0x0, 0x0);
        gbc.writeMem(0xc204, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0xca98, gbc.sp());
        EXPECT(0xc206, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc204));
        EXPECT(0xfd, gbc.readMem(0xc205));
        // CB FD 0216
        gbc.setState(0x781e, 0x2808, 0x2100, 0x47f8, 0xc510, 0x3b7a, 0x1, 0x0);
        gbc.writeMem(0x781e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0x2808, gbc.sp());
        EXPECT(0x7820, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0217
        gbc.setState(0x25e6, 0x983a, 0x8b0, 0x9dc8, 0x7446, 0x4b5f, 0x0, 0x0);
        gbc.writeMem(0x25e6, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x983a, gbc.sp());
        EXPECT(0x25e8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0218
        gbc.setState(0xcd78, 0xffa7, 0x4720, 0x39, 0x174d, 0xfc6c, 0x0, 0x1);
        gbc.writeMem(0xcd78, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0xffa7, gbc.sp());
        EXPECT(0xcd7a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd78));
        EXPECT(0xfd, gbc.readMem(0xcd79));
        // CB FD 0219
        gbc.setState(0x13f7, 0xf2df, 0x6a60, 0xfcb1, 0xdd05, 0x8a21, 0x1, 0x1);
        gbc.writeMem(0x13f7, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0xf2df, gbc.sp());
        EXPECT(0x13f9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 021A
        gbc.setState(0xc344, 0x168b, 0xed90, 0x2842, 0x4408, 0x903d, 0x0, 0x0);
        gbc.writeMem(0xc344, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x168b, gbc.sp());
        EXPECT(0xc346, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc344));
        EXPECT(0xfd, gbc.readMem(0xc345));
        // CB FD 021B
        gbc.setState(0xddcf, 0xd8cf, 0xbc60, 0x973d, 0x4b0f, 0xba50, 0x1, 0x0);
        gbc.writeMem(0xddcf, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0xd8cf, gbc.sp());
        EXPECT(0xddd1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xddcf));
        EXPECT(0xfd, gbc.readMem(0xddd0));
        // CB FD 021C
        gbc.setState(0x1531, 0xb297, 0x52b0, 0x307e, 0xf2f1, 0x86ac, 0x1, 0x0);
        gbc.writeMem(0x1531, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xb297, gbc.sp());
        EXPECT(0x1533, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 021D
        gbc.setState(0x293c, 0xda72, 0xd210, 0x650e, 0x1ca5, 0x7e67, 0x1, 0x0);
        gbc.writeMem(0x293c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0xda72, gbc.sp());
        EXPECT(0x293e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 021E
        gbc.setState(0xa347, 0x91eb, 0x6160, 0x3e15, 0x8002, 0xf2b0, 0x1, 0x0);
        gbc.writeMem(0xa347, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x91eb, gbc.sp());
        EXPECT(0xa349, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa347));
        EXPECT(0xfd, gbc.readMem(0xa348));
        // CB FD 021F
        gbc.setState(0x76fe, 0xdfab, 0x5740, 0xcffe, 0xa781, 0x4d68, 0x0, 0x0);
        gbc.writeMem(0x76fe, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0xdfab, gbc.sp());
        EXPECT(0x7700, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0220
        gbc.setState(0xe66e, 0x8aa, 0x1bd0, 0xa36b, 0x539b, 0x5b05, 0x0, 0x1);
        gbc.writeMem(0xe66e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0x8aa, gbc.sp());
        EXPECT(0xe670, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe66e));
        EXPECT(0xfd, gbc.readMem(0xe66f));
        // CB FD 0221
        gbc.setState(0x8819, 0xb1b, 0x8ef0, 0xbce2, 0x1f61, 0xb207, 0x1, 0x0);
        gbc.writeMem(0x8819, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0xb1b, gbc.sp());
        EXPECT(0x881b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8819));
        EXPECT(0xfd, gbc.readMem(0x881a));
        // CB FD 0222
        gbc.setState(0xcf58, 0x6f91, 0xab50, 0x206, 0xc974, 0x74b6, 0x1, 0x1);
        gbc.writeMem(0xcf58, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x6f91, gbc.sp());
        EXPECT(0xcf5a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf58));
        EXPECT(0xfd, gbc.readMem(0xcf59));
        // CB FD 0223
        gbc.setState(0xb1bc, 0x75d1, 0x3c40, 0xc361, 0x4844, 0x9462, 0x1, 0x1);
        gbc.writeMem(0xb1bc, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x75d1, gbc.sp());
        EXPECT(0xb1be, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb1bc));
        EXPECT(0xfd, gbc.readMem(0xb1bd));
        // CB FD 0224
        gbc.setState(0x2154, 0x8568, 0x2900, 0xaab2, 0xc23f, 0xabbd, 0x1, 0x0);
        gbc.writeMem(0x2154, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x8568, gbc.sp());
        EXPECT(0x2156, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0225
        gbc.setState(0x57a6, 0xd898, 0xb350, 0xd693, 0x90ae, 0xe46b, 0x0, 0x1);
        gbc.writeMem(0x57a6, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0xd898, gbc.sp());
        EXPECT(0x57a8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0226
        gbc.setState(0xec0a, 0x1753, 0x6580, 0x1274, 0xad11, 0x293c, 0x1, 0x1);
        gbc.writeMem(0xec0a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x1753, gbc.sp());
        EXPECT(0xec0c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xec0a));
        EXPECT(0xfd, gbc.readMem(0xec0b));
        // CB FD 0227
        gbc.setState(0xe8e8, 0xe5d3, 0x340, 0xae35, 0x17ba, 0x324e, 0x0, 0x0);
        gbc.writeMem(0xe8e8, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0xe5d3, gbc.sp());
        EXPECT(0xe8ea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe8e8));
        EXPECT(0xfd, gbc.readMem(0xe8e9));
        // CB FD 0228
        gbc.setState(0xca5e, 0x5034, 0x8420, 0x9dc5, 0xa2d8, 0x2425, 0x1, 0x0);
        gbc.writeMem(0xca5e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x5034, gbc.sp());
        EXPECT(0xca60, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xca5e));
        EXPECT(0xfd, gbc.readMem(0xca5f));
        // CB FD 0229
        gbc.setState(0xb01b, 0xeade, 0xf3d0, 0x4372, 0xf17c, 0x5d8d, 0x0, 0x0);
        gbc.writeMem(0xb01b, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xeade, gbc.sp());
        EXPECT(0xb01d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb01b));
        EXPECT(0xfd, gbc.readMem(0xb01c));
        // CB FD 022A
        gbc.setState(0xebfb, 0x64c5, 0x1b30, 0x6d91, 0xf7b7, 0x1d7f, 0x0, 0x1);
        gbc.writeMem(0xebfb, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x64c5, gbc.sp());
        EXPECT(0xebfd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xebfb));
        EXPECT(0xfd, gbc.readMem(0xebfc));
        // CB FD 022B
        gbc.setState(0x6d73, 0xab07, 0x1390, 0x3e2d, 0xce42, 0x50c0, 0x0, 0x1);
        gbc.writeMem(0x6d73, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0xab07, gbc.sp());
        EXPECT(0x6d75, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 022C
        gbc.setState(0x2c62, 0x5f5b, 0x2dd0, 0x506, 0xefbc, 0xa70b, 0x0, 0x1);
        gbc.writeMem(0x2c62, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x5f5b, gbc.sp());
        EXPECT(0x2c64, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 022D
        gbc.setState(0x6432, 0xb587, 0x9de0, 0xb4cc, 0x75af, 0xaa57, 0x0, 0x1);
        gbc.writeMem(0x6432, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xb587, gbc.sp());
        EXPECT(0x6434, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 022E
        gbc.setState(0x141b, 0xecf3, 0x39c0, 0xaf83, 0x1067, 0x35, 0x0, 0x0);
        gbc.writeMem(0x141b, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0xecf3, gbc.sp());
        EXPECT(0x141d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 022F
        gbc.setState(0xf68, 0x97c8, 0x77c0, 0x306c, 0x71e7, 0xa28f, 0x1, 0x1);
        gbc.writeMem(0xf68, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x97c8, gbc.sp());
        EXPECT(0xf6a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0230
        gbc.setState(0x784b, 0xda83, 0xd5e0, 0xf0cf, 0x468f, 0x9646, 0x1, 0x1);
        gbc.writeMem(0x784b, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0xda83, gbc.sp());
        EXPECT(0x784d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0231
        gbc.setState(0x55d4, 0xcd04, 0xe450, 0x7ce9, 0x884, 0xc70, 0x1, 0x1);
        gbc.writeMem(0x55d4, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0xcd04, gbc.sp());
        EXPECT(0x55d6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0232
        gbc.setState(0x3162, 0x9150, 0x4060, 0x2470, 0xbf12, 0xb9e0, 0x0, 0x1);
        gbc.writeMem(0x3162, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x9150, gbc.sp());
        EXPECT(0x3164, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0233
        gbc.setState(0x394b, 0xba70, 0x6440, 0x661e, 0x4982, 0xbf69, 0x1, 0x1);
        gbc.writeMem(0x394b, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0xba70, gbc.sp());
        EXPECT(0x394d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0234
        gbc.setState(0xd0eb, 0x8c37, 0x7e30, 0xc926, 0xd0b7, 0x8de3, 0x0, 0x0);
        gbc.writeMem(0xd0eb, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x8c37, gbc.sp());
        EXPECT(0xd0ed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd0eb));
        EXPECT(0xfd, gbc.readMem(0xd0ec));
        // CB FD 0235
        gbc.setState(0x70d4, 0x3ded, 0x6f80, 0x3f9b, 0xff1d, 0x284, 0x0, 0x0);
        gbc.writeMem(0x70d4, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x3ded, gbc.sp());
        EXPECT(0x70d6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0236
        gbc.setState(0x474c, 0x84ad, 0xd900, 0x3db5, 0x493e, 0xd08e, 0x0, 0x0);
        gbc.writeMem(0x474c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x84ad, gbc.sp());
        EXPECT(0x474e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0237
        gbc.setState(0xbaec, 0x5f61, 0xd1d0, 0x310d, 0xf9db, 0x69dd, 0x1, 0x1);
        gbc.writeMem(0xbaec, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x5f61, gbc.sp());
        EXPECT(0xbaee, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbaec));
        EXPECT(0xfd, gbc.readMem(0xbaed));
        // CB FD 0238
        gbc.setState(0x9e9c, 0xf47d, 0x2650, 0x69e7, 0xd456, 0xf609, 0x0, 0x1);
        gbc.writeMem(0x9e9c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xf47d, gbc.sp());
        EXPECT(0x9e9e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9e9c));
        EXPECT(0xfd, gbc.readMem(0x9e9d));
        // CB FD 0239
        gbc.setState(0x2819, 0x656c, 0xef20, 0x7d8e, 0x3dd4, 0xea3d, 0x1, 0x0);
        gbc.writeMem(0x2819, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x656c, gbc.sp());
        EXPECT(0x281b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 023A
        gbc.setState(0x488c, 0xa39d, 0xa450, 0x7672, 0x2bbe, 0xc6a0, 0x1, 0x1);
        gbc.writeMem(0x488c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xa39d, gbc.sp());
        EXPECT(0x488e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 023B
        gbc.setState(0x4967, 0xe8db, 0x57c0, 0x39ef, 0x33c4, 0x6704, 0x1, 0x0);
        gbc.writeMem(0x4967, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0xe8db, gbc.sp());
        EXPECT(0x4969, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 023C
        gbc.setState(0x3c0d, 0x6283, 0xdf00, 0x98f7, 0x272e, 0xb028, 0x1, 0x0);
        gbc.writeMem(0x3c0d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x6283, gbc.sp());
        EXPECT(0x3c0f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 023D
        gbc.setState(0xee76, 0x86e7, 0x5bd0, 0x79ff, 0xfd43, 0x6696, 0x0, 0x1);
        gbc.writeMem(0xee76, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x86e7, gbc.sp());
        EXPECT(0xee78, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xee76));
        EXPECT(0xfd, gbc.readMem(0xee77));
        // CB FD 023E
        gbc.setState(0xd753, 0x397c, 0x7100, 0x9154, 0x5195, 0x3259, 0x1, 0x0);
        gbc.writeMem(0xd753, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x397c, gbc.sp());
        EXPECT(0xd755, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd753));
        EXPECT(0xfd, gbc.readMem(0xd754));
        // CB FD 023F
        gbc.setState(0x536f, 0x9177, 0x1eb0, 0x9496, 0xea82, 0xf82f, 0x1, 0x0);
        gbc.writeMem(0x536f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x9177, gbc.sp());
        EXPECT(0x5371, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0240
        gbc.setState(0x9ef1, 0x4e87, 0x3db0, 0xedc5, 0xac5f, 0x2d20, 0x0, 0x1);
        gbc.writeMem(0x9ef1, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0x4e87, gbc.sp());
        EXPECT(0x9ef3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9ef1));
        EXPECT(0xfd, gbc.readMem(0x9ef2));
        // CB FD 0241
        gbc.setState(0xebf4, 0x6e10, 0xd6e0, 0xd8ad, 0x1c0e, 0x9d32, 0x0, 0x0);
        gbc.writeMem(0xebf4, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x6e10, gbc.sp());
        EXPECT(0xebf6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xebf4));
        EXPECT(0xfd, gbc.readMem(0xebf5));
        // CB FD 0242
        gbc.setState(0x6435, 0x3fac, 0xe100, 0xf223, 0xba68, 0x315f, 0x0, 0x1);
        gbc.writeMem(0x6435, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x3fac, gbc.sp());
        EXPECT(0x6437, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0243
        gbc.setState(0x3bd9, 0x902d, 0xfe10, 0xe513, 0xeef9, 0x3906, 0x0, 0x1);
        gbc.writeMem(0x3bd9, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x902d, gbc.sp());
        EXPECT(0x3bdb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0244
        gbc.setState(0xc388, 0xbfbd, 0x4be0, 0x827b, 0xc410, 0x12fd, 0x0, 0x0);
        gbc.writeMem(0xc388, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0xbfbd, gbc.sp());
        EXPECT(0xc38a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc388));
        EXPECT(0xfd, gbc.readMem(0xc389));
        // CB FD 0245
        gbc.setState(0x7ade, 0xe77d, 0x2100, 0xbff2, 0xf88a, 0x2da7, 0x0, 0x0);
        gbc.writeMem(0x7ade, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0xe77d, gbc.sp());
        EXPECT(0x7ae0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0246
        gbc.setState(0xd2b4, 0xe348, 0x4da0, 0x26fd, 0x912f, 0x8db9, 0x1, 0x1);
        gbc.writeMem(0xd2b4, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xe348, gbc.sp());
        EXPECT(0xd2b6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd2b4));
        EXPECT(0xfd, gbc.readMem(0xd2b5));
        // CB FD 0247
        gbc.setState(0xed33, 0xe887, 0x6a30, 0xfb2c, 0x678f, 0x7bdf, 0x1, 0x1);
        gbc.writeMem(0xed33, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0xe887, gbc.sp());
        EXPECT(0xed35, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xed33));
        EXPECT(0xfd, gbc.readMem(0xed34));
        // CB FD 0248
        gbc.setState(0x1dab, 0xf38a, 0x8080, 0x894e, 0x98cd, 0xfdc0, 0x0, 0x0);
        gbc.writeMem(0x1dab, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0xf38a, gbc.sp());
        EXPECT(0x1dad, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0249
        gbc.setState(0x3848, 0x88c0, 0xd890, 0xee39, 0x9c37, 0xe2b9, 0x0, 0x0);
        gbc.writeMem(0x3848, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x88c0, gbc.sp());
        EXPECT(0x384a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 024A
        gbc.setState(0x7a2a, 0x33b1, 0xed00, 0xcd51, 0xed33, 0x50c9, 0x0, 0x1);
        gbc.writeMem(0x7a2a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x33b1, gbc.sp());
        EXPECT(0x7a2c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 024B
        gbc.setState(0xdc37, 0xa8b7, 0xc8c0, 0x3693, 0xdebc, 0xd0e0, 0x1, 0x0);
        gbc.writeMem(0xdc37, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0xa8b7, gbc.sp());
        EXPECT(0xdc39, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc37));
        EXPECT(0xfd, gbc.readMem(0xdc38));
        // CB FD 024C
        gbc.setState(0x8977, 0x941d, 0x4520, 0x2751, 0x6fcd, 0x8118, 0x0, 0x1);
        gbc.writeMem(0x8977, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x941d, gbc.sp());
        EXPECT(0x8979, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8977));
        EXPECT(0xfd, gbc.readMem(0x8978));
        // CB FD 024D
        gbc.setState(0xafac, 0x4fc8, 0x6a20, 0x8932, 0x37b1, 0x603b, 0x1, 0x0);
        gbc.writeMem(0xafac, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x4fc8, gbc.sp());
        EXPECT(0xafae, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xafac));
        EXPECT(0xfd, gbc.readMem(0xafad));
        // CB FD 024F
        gbc.setState(0x1af, 0x366c, 0x8cb0, 0x283a, 0xe879, 0x1eef, 0x0, 0x1);
        gbc.writeMem(0x1af, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x366c, gbc.sp());
        EXPECT(0x1b1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0251
        gbc.setState(0xac11, 0x9763, 0xcf80, 0x7d34, 0xbdc8, 0xb7c3, 0x1, 0x0);
        gbc.writeMem(0xac11, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x9763, gbc.sp());
        EXPECT(0xac13, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac11));
        EXPECT(0xfd, gbc.readMem(0xac12));
        // CB FD 0252
        gbc.setState(0x258b, 0xaba3, 0xef60, 0xc110, 0xe211, 0x9a75, 0x0, 0x1);
        gbc.writeMem(0x258b, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0xaba3, gbc.sp());
        EXPECT(0x258d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0253
        gbc.setState(0xb0f8, 0x41b5, 0xf600, 0x1aac, 0x1fab, 0x339b, 0x1, 0x0);
        gbc.writeMem(0xb0f8, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x41b5, gbc.sp());
        EXPECT(0xb0fa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb0f8));
        EXPECT(0xfd, gbc.readMem(0xb0f9));
        // CB FD 0254
        gbc.setState(0xd01a, 0x197c, 0xb8e0, 0x5956, 0x5c35, 0xf955, 0x1, 0x0);
        gbc.writeMem(0xd01a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x197c, gbc.sp());
        EXPECT(0xd01c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd01a));
        EXPECT(0xfd, gbc.readMem(0xd01b));
        // CB FD 0255
        gbc.setState(0xbf8e, 0x638d, 0xe2f0, 0x6b2f, 0xf573, 0x918e, 0x0, 0x1);
        gbc.writeMem(0xbf8e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x638d, gbc.sp());
        EXPECT(0xbf90, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbf8e));
        EXPECT(0xfd, gbc.readMem(0xbf8f));
        // CB FD 0256
        gbc.setState(0x9bc4, 0xdf37, 0x69d0, 0x52a8, 0x369e, 0xa544, 0x1, 0x1);
        gbc.writeMem(0x9bc4, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0xdf37, gbc.sp());
        EXPECT(0x9bc6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9bc4));
        EXPECT(0xfd, gbc.readMem(0x9bc5));
        // CB FD 0257
        gbc.setState(0x86c0, 0x771e, 0x77d0, 0x3bb5, 0x744b, 0xc20f, 0x0, 0x1);
        gbc.writeMem(0x86c0, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x771e, gbc.sp());
        EXPECT(0x86c2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x86c0));
        EXPECT(0xfd, gbc.readMem(0x86c1));
        // CB FD 0258
        gbc.setState(0xa53d, 0x1246, 0xe430, 0x92b1, 0x103f, 0xb20c, 0x1, 0x1);
        gbc.writeMem(0xa53d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x1246, gbc.sp());
        EXPECT(0xa53f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa53d));
        EXPECT(0xfd, gbc.readMem(0xa53e));
        // CB FD 0259
        gbc.setState(0x3860, 0x3bfc, 0x2930, 0x69b2, 0xf8d5, 0x237c, 0x1, 0x1);
        gbc.writeMem(0x3860, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x3bfc, gbc.sp());
        EXPECT(0x3862, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 025A
        gbc.setState(0xc7f3, 0xa6bc, 0xa7e0, 0xc99f, 0x4835, 0xe3f7, 0x1, 0x1);
        gbc.writeMem(0xc7f3, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0xa6bc, gbc.sp());
        EXPECT(0xc7f5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc7f3));
        EXPECT(0xfd, gbc.readMem(0xc7f4));
        // CB FD 025B
        gbc.setState(0x53c8, 0xc7ac, 0x3e00, 0x9c46, 0xbe1b, 0xd09e, 0x1, 0x1);
        gbc.writeMem(0x53c8, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0xc7ac, gbc.sp());
        EXPECT(0x53ca, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 025C
        gbc.setState(0x2d38, 0x6544, 0x2620, 0xfd9f, 0x4e80, 0x7d3d, 0x1, 0x0);
        gbc.writeMem(0x2d38, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x6544, gbc.sp());
        EXPECT(0x2d3a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 025E
        gbc.setState(0x8a9c, 0x68d9, 0x5430, 0x4494, 0xe7cc, 0x79dc, 0x0, 0x0);
        gbc.writeMem(0x8a9c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x68d9, gbc.sp());
        EXPECT(0x8a9e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a9c));
        EXPECT(0xfd, gbc.readMem(0x8a9d));
        // CB FD 025F
        gbc.setState(0xb4a8, 0xfdc, 0xbdb0, 0x5033, 0xe086, 0x53e0, 0x0, 0x1);
        gbc.writeMem(0xb4a8, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0xfdc, gbc.sp());
        EXPECT(0xb4aa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb4a8));
        EXPECT(0xfd, gbc.readMem(0xb4a9));
        // CB FD 0261
        gbc.setState(0xcd47, 0x5133, 0x3ee0, 0x8789, 0xc69c, 0xe81a, 0x0, 0x1);
        gbc.writeMem(0xcd47, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x5133, gbc.sp());
        EXPECT(0xcd49, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd47));
        EXPECT(0xfd, gbc.readMem(0xcd48));
        // CB FD 0262
        gbc.setState(0x177c, 0x2bdc, 0x6490, 0x4158, 0x98af, 0x7d14, 0x1, 0x0);
        gbc.writeMem(0x177c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x2bdc, gbc.sp());
        EXPECT(0x177e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0263
        gbc.setState(0xa228, 0x5e6c, 0xf0, 0xafad, 0x1c12, 0x272b, 0x1, 0x0);
        gbc.writeMem(0xa228, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x5e6c, gbc.sp());
        EXPECT(0xa22a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa228));
        EXPECT(0xfd, gbc.readMem(0xa229));
        // CB FD 0264
        gbc.setState(0xa24c, 0x7dec, 0x3c80, 0x8b87, 0xa0f3, 0x7430, 0x0, 0x0);
        gbc.writeMem(0xa24c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x7dec, gbc.sp());
        EXPECT(0xa24e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa24c));
        EXPECT(0xfd, gbc.readMem(0xa24d));
        // CB FD 0265
        gbc.setState(0x4f12, 0x9b14, 0x2b10, 0x894a, 0x2031, 0x2fc7, 0x1, 0x0);
        gbc.writeMem(0x4f12, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x9b14, gbc.sp());
        EXPECT(0x4f14, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0266
        gbc.setState(0x4925, 0xf974, 0xcb90, 0xa0e5, 0x6a27, 0xfa4a, 0x0, 0x1);
        gbc.writeMem(0x4925, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0xf974, gbc.sp());
        EXPECT(0x4927, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0267
        gbc.setState(0xbdb3, 0x36fd, 0xbf30, 0x2505, 0x4c7b, 0x9a40, 0x0, 0x1);
        gbc.writeMem(0xbdb3, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x36fd, gbc.sp());
        EXPECT(0xbdb5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbdb3));
        EXPECT(0xfd, gbc.readMem(0xbdb4));
        // CB FD 0268
        gbc.setState(0xbb99, 0xab19, 0x3cd0, 0x9c66, 0x733a, 0x40fe, 0x0, 0x0);
        gbc.writeMem(0xbb99, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0xab19, gbc.sp());
        EXPECT(0xbb9b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbb99));
        EXPECT(0xfd, gbc.readMem(0xbb9a));
        // CB FD 0269
        gbc.setState(0x8089, 0x4d8d, 0x14a0, 0xc5ee, 0x9845, 0xe76d, 0x1, 0x0);
        gbc.writeMem(0x8089, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x4d8d, gbc.sp());
        EXPECT(0x808b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8089));
        EXPECT(0xfd, gbc.readMem(0x808a));
        // CB FD 026A
        gbc.setState(0xe687, 0xcab8, 0x6200, 0xaa08, 0x2110, 0xf68f, 0x0, 0x1);
        gbc.writeMem(0xe687, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0xcab8, gbc.sp());
        EXPECT(0xe689, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe687));
        EXPECT(0xfd, gbc.readMem(0xe688));
        // CB FD 026B
        gbc.setState(0x2b53, 0xd518, 0xe2d0, 0xd8a0, 0xb3b2, 0x8eaf, 0x1, 0x1);
        gbc.writeMem(0x2b53, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0xd518, gbc.sp());
        EXPECT(0x2b55, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 026C
        gbc.setState(0x95, 0x8467, 0xa920, 0x5497, 0x28c3, 0x6eb7, 0x0, 0x0);
        gbc.writeMem(0x95, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x8467, gbc.sp());
        EXPECT(0x97, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 026D
        gbc.setState(0xe6cc, 0x5632, 0x7ef0, 0xe70a, 0xdc85, 0x2b21, 0x1, 0x1);
        gbc.writeMem(0xe6cc, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x5632, gbc.sp());
        EXPECT(0xe6ce, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe6cc));
        EXPECT(0xfd, gbc.readMem(0xe6cd));
        // CB FD 026E
        gbc.setState(0x34d0, 0xc8c5, 0x4090, 0xd69a, 0xd8b, 0xf6ec, 0x1, 0x1);
        gbc.writeMem(0x34d0, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0xc8c5, gbc.sp());
        EXPECT(0x34d2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 026F
        gbc.setState(0xe732, 0xde4d, 0x5080, 0xf2bf, 0x4073, 0xeff6, 0x0, 0x0);
        gbc.writeMem(0xe732, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0xde4d, gbc.sp());
        EXPECT(0xe734, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe732));
        EXPECT(0xfd, gbc.readMem(0xe733));
        // CB FD 0270
        gbc.setState(0x6eb4, 0xe834, 0xa290, 0x338c, 0x3350, 0xa6eb, 0x0, 0x1);
        gbc.writeMem(0x6eb4, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0xe834, gbc.sp());
        EXPECT(0x6eb6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0271
        gbc.setState(0x644, 0x980d, 0xb220, 0x95c3, 0x13c2, 0x8e39, 0x1, 0x1);
        gbc.writeMem(0x644, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x980d, gbc.sp());
        EXPECT(0x646, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0272
        gbc.setState(0x898a, 0x1620, 0x2d0, 0xf135, 0x2ea4, 0xd40d, 0x1, 0x1);
        gbc.writeMem(0x898a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x1620, gbc.sp());
        EXPECT(0x898c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x898a));
        EXPECT(0xfd, gbc.readMem(0x898b));
        // CB FD 0273
        gbc.setState(0x3e0b, 0x6d5a, 0xf9f0, 0x8147, 0x3b01, 0xf5c5, 0x1, 0x1);
        gbc.writeMem(0x3e0b, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x6d5a, gbc.sp());
        EXPECT(0x3e0d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0274
        gbc.setState(0x9902, 0x6114, 0x8480, 0x60f, 0x3ad, 0x6118, 0x1, 0x1);
        gbc.writeMem(0x9902, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x6114, gbc.sp());
        EXPECT(0x9904, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9902));
        EXPECT(0xfd, gbc.readMem(0x9903));
        // CB FD 0275
        gbc.setState(0xcc5f, 0xd6a7, 0x5cb0, 0x9ea, 0xd203, 0xa1f2, 0x1, 0x1);
        gbc.writeMem(0xcc5f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0xd6a7, gbc.sp());
        EXPECT(0xcc61, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcc5f));
        EXPECT(0xfd, gbc.readMem(0xcc60));
        // CB FD 0276
        gbc.setState(0xed0f, 0xbd3a, 0x5830, 0x7528, 0xc1ca, 0xaafb, 0x0, 0x1);
        gbc.writeMem(0xed0f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0xbd3a, gbc.sp());
        EXPECT(0xed11, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xed0f));
        EXPECT(0xfd, gbc.readMem(0xed10));
        // CB FD 0277
        gbc.setState(0x34c8, 0xcdf6, 0x7130, 0xc53e, 0x1111, 0xee6e, 0x0, 0x0);
        gbc.writeMem(0x34c8, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0xcdf6, gbc.sp());
        EXPECT(0x34ca, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0278
        gbc.setState(0x2d19, 0xe4e8, 0x1850, 0xbdf8, 0xebda, 0xa4e7, 0x1, 0x1);
        gbc.writeMem(0x2d19, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0xe4e8, gbc.sp());
        EXPECT(0x2d1b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0279
        gbc.setState(0xb4da, 0xc322, 0x8770, 0xab5a, 0x5570, 0x1c0f, 0x1, 0x1);
        gbc.writeMem(0xb4da, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0xc322, gbc.sp());
        EXPECT(0xb4dc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb4da));
        EXPECT(0xfd, gbc.readMem(0xb4db));
        // CB FD 027A
        gbc.setState(0x8a24, 0xf605, 0xfc10, 0x21ec, 0x8a76, 0x95f5, 0x1, 0x0);
        gbc.writeMem(0x8a24, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0xf605, gbc.sp());
        EXPECT(0x8a26, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a24));
        EXPECT(0xfd, gbc.readMem(0x8a25));
        // CB FD 027B
        gbc.setState(0x3762, 0x9c55, 0x26e0, 0x52b4, 0xdf82, 0x9b70, 0x1, 0x1);
        gbc.writeMem(0x3762, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x9c55, gbc.sp());
        EXPECT(0x3764, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 027C
        gbc.setState(0x4995, 0x27a6, 0x22f0, 0xe99b, 0x72d8, 0x7660, 0x0, 0x0);
        gbc.writeMem(0x4995, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x27a6, gbc.sp());
        EXPECT(0x4997, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 027E
        gbc.setState(0x5dca, 0x9807, 0xe690, 0xb90d, 0x1ba1, 0x302c, 0x0, 0x1);
        gbc.writeMem(0x5dca, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x9807, gbc.sp());
        EXPECT(0x5dcc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 027F
        gbc.setState(0x9bce, 0x8b0, 0xeca0, 0xf892, 0x1d57, 0xc9bc, 0x0, 0x1);
        gbc.writeMem(0x9bce, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x8b0, gbc.sp());
        EXPECT(0x9bd0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9bce));
        EXPECT(0xfd, gbc.readMem(0x9bcf));
        // CB FD 0280
        gbc.setState(0x3125, 0xf0f, 0x3750, 0x6823, 0xb61c, 0x832f, 0x0, 0x0);
        gbc.writeMem(0x3125, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0xf0f, gbc.sp());
        EXPECT(0x3127, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0282
        gbc.setState(0xacf, 0x8732, 0x4370, 0x511d, 0x5ffc, 0x77d0, 0x1, 0x1);
        gbc.writeMem(0xacf, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x8732, gbc.sp());
        EXPECT(0xad1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0283
        gbc.setState(0x7cad, 0x8be8, 0xa060, 0x3ec0, 0x5af, 0xc69c, 0x0, 0x0);
        gbc.writeMem(0x7cad, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x8be8, gbc.sp());
        EXPECT(0x7caf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0284
        gbc.setState(0xb146, 0xb956, 0x4f80, 0xaf53, 0x4232, 0x19a1, 0x0, 0x1);
        gbc.writeMem(0xb146, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0xb956, gbc.sp());
        EXPECT(0xb148, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb146));
        EXPECT(0xfd, gbc.readMem(0xb147));
        // CB FD 0285
        gbc.setState(0x16f0, 0x9c6a, 0x7990, 0x658e, 0x41bb, 0x91c9, 0x1, 0x1);
        gbc.writeMem(0x16f0, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x9c6a, gbc.sp());
        EXPECT(0x16f2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0286
        gbc.setState(0x839a, 0x2ee4, 0xc920, 0xfebb, 0xe9c4, 0x9445, 0x1, 0x1);
        gbc.writeMem(0x839a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x2ee4, gbc.sp());
        EXPECT(0x839c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x839a));
        EXPECT(0xfd, gbc.readMem(0x839b));
        // CB FD 0288
        gbc.setState(0x8b70, 0xb20e, 0x6140, 0x982e, 0x595f, 0x8e51, 0x1, 0x0);
        gbc.writeMem(0x8b70, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0xb20e, gbc.sp());
        EXPECT(0x8b72, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b70));
        EXPECT(0xfd, gbc.readMem(0x8b71));
        // CB FD 0289
        gbc.setState(0xade8, 0xce5a, 0xd9a0, 0xb89e, 0x894d, 0xde95, 0x1, 0x0);
        gbc.writeMem(0xade8, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0xce5a, gbc.sp());
        EXPECT(0xadea, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xade8));
        EXPECT(0xfd, gbc.readMem(0xade9));
        // CB FD 028B
        gbc.setState(0x68c3, 0x944c, 0x8570, 0x10b5, 0xc903, 0x9482, 0x0, 0x0);
        gbc.writeMem(0x68c3, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x944c, gbc.sp());
        EXPECT(0x68c5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 028C
        gbc.setState(0x6cd5, 0x7c43, 0x1640, 0xa94, 0x31e0, 0x6188, 0x0, 0x1);
        gbc.writeMem(0x6cd5, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0x7c43, gbc.sp());
        EXPECT(0x6cd7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 028E
        gbc.setState(0xaf64, 0x30e, 0xf60, 0xb09f, 0x65f9, 0xc319, 0x0, 0x0);
        gbc.writeMem(0xaf64, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x30e, gbc.sp());
        EXPECT(0xaf66, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaf64));
        EXPECT(0xfd, gbc.readMem(0xaf65));
        // CB FD 028F
        gbc.setState(0x707c, 0xfaab, 0x80f0, 0xa445, 0x119b, 0xeebd, 0x1, 0x1);
        gbc.writeMem(0x707c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xfaab, gbc.sp());
        EXPECT(0x707e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0290
        gbc.setState(0xd32c, 0x8890, 0x3510, 0x82ca, 0x2f35, 0x1947, 0x1, 0x0);
        gbc.writeMem(0xd32c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x8890, gbc.sp());
        EXPECT(0xd32e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd32c));
        EXPECT(0xfd, gbc.readMem(0xd32d));
        // CB FD 0291
        gbc.setState(0x3840, 0x8b3f, 0x6c00, 0x26a3, 0xcb06, 0xa5c, 0x0, 0x1);
        gbc.writeMem(0x3840, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x8b3f, gbc.sp());
        EXPECT(0x3842, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0292
        gbc.setState(0x3219, 0x3215, 0x7630, 0x1124, 0xc976, 0x71fd, 0x0, 0x0);
        gbc.writeMem(0x3219, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x3215, gbc.sp());
        EXPECT(0x321b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0293
        gbc.setState(0x2ec9, 0x20a4, 0x87c0, 0x7f3f, 0xf1f1, 0x6f34, 0x0, 0x1);
        gbc.writeMem(0x2ec9, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x20a4, gbc.sp());
        EXPECT(0x2ecb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0294
        gbc.setState(0xce06, 0x1850, 0xaf80, 0xbe8e, 0x32cc, 0x73b6, 0x0, 0x0);
        gbc.writeMem(0xce06, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x1850, gbc.sp());
        EXPECT(0xce08, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xce06));
        EXPECT(0xfd, gbc.readMem(0xce07));
        // CB FD 0295
        gbc.setState(0xeae9, 0xea3f, 0x6990, 0xbe9, 0xb5a5, 0xe68e, 0x0, 0x0);
        gbc.writeMem(0xeae9, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0xea3f, gbc.sp());
        EXPECT(0xeaeb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeae9));
        EXPECT(0xfd, gbc.readMem(0xeaea));
        // CB FD 0296
        gbc.setState(0x359f, 0x4ad, 0x1730, 0xd9b4, 0x87bb, 0x95cf, 0x1, 0x0);
        gbc.writeMem(0x359f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x4ad, gbc.sp());
        EXPECT(0x35a1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0297
        gbc.setState(0xa061, 0x9e0a, 0x1300, 0x7a13, 0xe81a, 0x74b2, 0x1, 0x0);
        gbc.writeMem(0xa061, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x9e0a, gbc.sp());
        EXPECT(0xa063, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa061));
        EXPECT(0xfd, gbc.readMem(0xa062));
        // CB FD 0298
        gbc.setState(0x1836, 0x7d72, 0x15c0, 0xd0f5, 0xf429, 0x84c5, 0x0, 0x1);
        gbc.writeMem(0x1836, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x7d72, gbc.sp());
        EXPECT(0x1838, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0299
        gbc.setState(0x4a9f, 0x2159, 0x8800, 0xadfe, 0x49c4, 0xf3a0, 0x0, 0x0);
        gbc.writeMem(0x4a9f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0x2159, gbc.sp());
        EXPECT(0x4aa1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 029A
        gbc.setState(0x3d0d, 0x7774, 0xba90, 0xc490, 0x20a0, 0x65e7, 0x0, 0x1);
        gbc.writeMem(0x3d0d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0x7774, gbc.sp());
        EXPECT(0x3d0f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 029B
        gbc.setState(0xd075, 0x7128, 0x2810, 0x98d3, 0x6ac4, 0x20ab, 0x1, 0x0);
        gbc.writeMem(0xd075, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x7128, gbc.sp());
        EXPECT(0xd077, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd075));
        EXPECT(0xfd, gbc.readMem(0xd076));
        // CB FD 029C
        gbc.setState(0xcca5, 0xf2cc, 0xacb0, 0xf35d, 0x7b37, 0xe300, 0x0, 0x1);
        gbc.writeMem(0xcca5, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0xf2cc, gbc.sp());
        EXPECT(0xcca7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcca5));
        EXPECT(0xfd, gbc.readMem(0xcca6));
        // CB FD 029E
        gbc.setState(0xb9b5, 0xd051, 0x97c0, 0x96bd, 0x1a4d, 0xc8c7, 0x0, 0x0);
        gbc.writeMem(0xb9b5, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0xd051, gbc.sp());
        EXPECT(0xb9b7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb9b5));
        EXPECT(0xfd, gbc.readMem(0xb9b6));
        // CB FD 029F
        gbc.setState(0xd9cd, 0x845a, 0x4ba0, 0xd02b, 0x5b6, 0xb625, 0x1, 0x1);
        gbc.writeMem(0xd9cd, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x845a, gbc.sp());
        EXPECT(0xd9cf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd9cd));
        EXPECT(0xfd, gbc.readMem(0xd9ce));
        // CB FD 02A0
        gbc.setState(0x823d, 0xdb23, 0xd460, 0x8212, 0x21d8, 0x241d, 0x1, 0x0);
        gbc.writeMem(0x823d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0xdb23, gbc.sp());
        EXPECT(0x823f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x823d));
        EXPECT(0xfd, gbc.readMem(0x823e));
        // CB FD 02A1
        gbc.setState(0xbace, 0xcd35, 0xde70, 0x4d88, 0xfa8, 0xe9e7, 0x0, 0x0);
        gbc.writeMem(0xbace, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0xcd35, gbc.sp());
        EXPECT(0xbad0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbace));
        EXPECT(0xfd, gbc.readMem(0xbacf));
        // CB FD 02A2
        gbc.setState(0x19d1, 0x1fa0, 0xad10, 0x18d6, 0xe480, 0xead9, 0x1, 0x0);
        gbc.writeMem(0x19d1, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x1fa0, gbc.sp());
        EXPECT(0x19d3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 02A3
        gbc.setState(0xf5, 0xe1d1, 0xf4d0, 0x856, 0x1bbe, 0x21fe, 0x1, 0x1);
        gbc.writeMem(0xf5, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0xe1d1, gbc.sp());
        EXPECT(0xf7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 02A4
        gbc.setState(0xddff, 0xaacc, 0xe5f0, 0xdab, 0xbb53, 0x9d42, 0x0, 0x1);
        gbc.writeMem(0xddff, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0xaacc, gbc.sp());
        EXPECT(0xde01, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xddff));
        EXPECT(0xfd, gbc.readMem(0xde00));
        // CB FD 02A5
        gbc.setState(0xbf4a, 0xb44d, 0xd530, 0x4077, 0xaa1b, 0x8b73, 0x1, 0x1);
        gbc.writeMem(0xbf4a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0xb44d, gbc.sp());
        EXPECT(0xbf4c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbf4a));
        EXPECT(0xfd, gbc.readMem(0xbf4b));
        // CB FD 02A6
        gbc.setState(0x5649, 0xc124, 0x32d0, 0x34c9, 0xf623, 0xa1a1, 0x0, 0x0);
        gbc.writeMem(0x5649, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0xc124, gbc.sp());
        EXPECT(0x564b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 02A7
        gbc.setState(0x45fc, 0x445a, 0x7690, 0x13b3, 0x1de, 0x5ff8, 0x0, 0x0);
        gbc.writeMem(0x45fc, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x445a, gbc.sp());
        EXPECT(0x45fe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 02A8
        gbc.setState(0x431d, 0xa95e, 0x1050, 0x92f7, 0xb246, 0xc12b, 0x1, 0x0);
        gbc.writeMem(0x431d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0xa95e, gbc.sp());
        EXPECT(0x431f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 02A9
        gbc.setState(0x87db, 0x2e88, 0x5a20, 0x73a, 0x3a94, 0x6f5a, 0x1, 0x0);
        gbc.writeMem(0x87db, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x2e88, gbc.sp());
        EXPECT(0x87dd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x87db));
        EXPECT(0xfd, gbc.readMem(0x87dc));
        // CB FD 02AA
        gbc.setState(0xab3a, 0x221a, 0x6a10, 0xcf6b, 0xff17, 0x3e67, 0x1, 0x1);
        gbc.writeMem(0xab3a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0x221a, gbc.sp());
        EXPECT(0xab3c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab3a));
        EXPECT(0xfd, gbc.readMem(0xab3b));
        // CB FD 02AC
        gbc.setState(0x6b29, 0x9ff7, 0xe850, 0x2d71, 0xb89a, 0xafcc, 0x1, 0x0);
        gbc.writeMem(0x6b29, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x9ff7, gbc.sp());
        EXPECT(0x6b2b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 02AD
        gbc.setState(0x9b50, 0x2a0c, 0x7160, 0x16f7, 0x4f14, 0x6df1, 0x0, 0x0);
        gbc.writeMem(0x9b50, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x2a0c, gbc.sp());
        EXPECT(0x9b52, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b50));
        EXPECT(0xfd, gbc.readMem(0x9b51));
        // CB FD 02AE
        gbc.setState(0xb6ea, 0x7e71, 0xd530, 0x8aac, 0xc677, 0xd0c9, 0x0, 0x1);
        gbc.writeMem(0xb6ea, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x7e71, gbc.sp());
        EXPECT(0xb6ec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb6ea));
        EXPECT(0xfd, gbc.readMem(0xb6eb));
        // CB FD 02AF
        gbc.setState(0x4a, 0xa131, 0x2030, 0xf0c5, 0xa1a3, 0xe0de, 0x1, 0x1);
        gbc.writeMem(0x4a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0xa131, gbc.sp());
        EXPECT(0x4c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 02B1
        gbc.setState(0x84a7, 0xcb03, 0xe810, 0xccc2, 0x6c21, 0x1214, 0x0, 0x1);
        gbc.writeMem(0x84a7, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0xcb03, gbc.sp());
        EXPECT(0x84a9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84a7));
        EXPECT(0xfd, gbc.readMem(0x84a8));
        // CB FD 02B2
        gbc.setState(0xcec, 0xc3d0, 0x6f10, 0x88d1, 0xa6a1, 0x7ab7, 0x1, 0x1);
        gbc.writeMem(0xcec, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0xc3d0, gbc.sp());
        EXPECT(0xcee, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 02B3
        gbc.setState(0xad45, 0x5b5f, 0xbb20, 0x9e8a, 0x19ca, 0x3643, 0x0, 0x0);
        gbc.writeMem(0xad45, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x5b5f, gbc.sp());
        EXPECT(0xad47, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xad45));
        EXPECT(0xfd, gbc.readMem(0xad46));
        // CB FD 02B4
        gbc.setState(0x7899, 0xbf42, 0xd580, 0x9c35, 0x986c, 0x32c1, 0x0, 0x0);
        gbc.writeMem(0x7899, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xbf42, gbc.sp());
        EXPECT(0x789b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 02B5
        gbc.setState(0x503c, 0x6936, 0x7b20, 0x336d, 0x8e2d, 0x31bf, 0x1, 0x0);
        gbc.writeMem(0x503c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x6936, gbc.sp());
        EXPECT(0x503e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 02B6
        gbc.setState(0x8557, 0xcd03, 0xc740, 0x30da, 0x65c8, 0xe21, 0x0, 0x0);
        gbc.writeMem(0x8557, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0xcd03, gbc.sp());
        EXPECT(0x8559, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8557));
        EXPECT(0xfd, gbc.readMem(0x8558));
        // CB FD 02B7
        gbc.setState(0x8b2f, 0xa604, 0x9e40, 0x3feb, 0x2723, 0x656e, 0x0, 0x0);
        gbc.writeMem(0x8b2f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0xa604, gbc.sp());
        EXPECT(0x8b31, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b2f));
        EXPECT(0xfd, gbc.readMem(0x8b30));
        // CB FD 02B8
        gbc.setState(0x1dbd, 0x95e6, 0x7ae0, 0x18fd, 0x9462, 0x6a28, 0x0, 0x1);
        gbc.writeMem(0x1dbd, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x95e6, gbc.sp());
        EXPECT(0x1dbf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 02B9
        gbc.setState(0x5f23, 0x6656, 0x37a0, 0x8fac, 0x199d, 0x3e91, 0x0, 0x1);
        gbc.writeMem(0x5f23, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x6656, gbc.sp());
        EXPECT(0x5f25, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 02BA
        gbc.setState(0x2f23, 0x2c5a, 0x8170, 0x58e7, 0xc6bb, 0xfd9f, 0x1, 0x0);
        gbc.writeMem(0x2f23, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x2c5a, gbc.sp());
        EXPECT(0x2f25, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 02BB
        gbc.setState(0xab07, 0xf72f, 0x5960, 0xdfe7, 0xf057, 0xb7c3, 0x0, 0x0);
        gbc.writeMem(0xab07, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xf72f, gbc.sp());
        EXPECT(0xab09, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab07));
        EXPECT(0xfd, gbc.readMem(0xab08));
        // CB FD 02BC
        gbc.setState(0x3447, 0xe7a7, 0xb1e0, 0xbbf6, 0x5b31, 0xe9c8, 0x0, 0x0);
        gbc.writeMem(0x3447, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0xe7a7, gbc.sp());
        EXPECT(0x3449, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 02BD
        gbc.setState(0x1091, 0x10d, 0x22b0, 0xbc6c, 0x23dc, 0xb2b2, 0x1, 0x1);
        gbc.writeMem(0x1091, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x10d, gbc.sp());
        EXPECT(0x1093, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 02BE
        gbc.setState(0xd680, 0xaaeb, 0xec10, 0x4c77, 0x71d5, 0x9124, 0x1, 0x0);
        gbc.writeMem(0xd680, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xaaeb, gbc.sp());
        EXPECT(0xd682, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd680));
        EXPECT(0xfd, gbc.readMem(0xd681));
        // CB FD 02BF
        gbc.setState(0x158a, 0xa, 0x22f0, 0xe1c6, 0x7ca5, 0x4f4f, 0x0, 0x0);
        gbc.writeMem(0x158a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xa, gbc.sp());
        EXPECT(0x158c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 02C1
        gbc.setState(0x6cc1, 0x955a, 0x3f20, 0x5f14, 0x9b44, 0xbebe, 0x1, 0x0);
        gbc.writeMem(0x6cc1, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x955a, gbc.sp());
        EXPECT(0x6cc3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 02C2
        gbc.setState(0x448c, 0x829d, 0xb760, 0xdab0, 0x1418, 0xb5f5, 0x1, 0x1);
        gbc.writeMem(0x448c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x829d, gbc.sp());
        EXPECT(0x448e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 02C3
        gbc.setState(0x93f4, 0x7a36, 0xe130, 0x584c, 0x62d4, 0xa672, 0x1, 0x0);
        gbc.writeMem(0x93f4, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x7a36, gbc.sp());
        EXPECT(0x93f6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x93f4));
        EXPECT(0xfd, gbc.readMem(0x93f5));
        // CB FD 02C4
        gbc.setState(0xd6d9, 0x2195, 0x7870, 0x1056, 0xf1b7, 0x4b85, 0x0, 0x0);
        gbc.writeMem(0xd6d9, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0x2195, gbc.sp());
        EXPECT(0xd6db, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd6d9));
        EXPECT(0xfd, gbc.readMem(0xd6da));
        // CB FD 02C5
        gbc.setState(0x20a1, 0x1059, 0xadd0, 0xe7c6, 0x631b, 0x5132, 0x0, 0x1);
        gbc.writeMem(0x20a1, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x1059, gbc.sp());
        EXPECT(0x20a3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 02C6
        gbc.setState(0xc8b8, 0xf33f, 0x3710, 0xfa56, 0xad02, 0x9fb5, 0x1, 0x0);
        gbc.writeMem(0xc8b8, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0xf33f, gbc.sp());
        EXPECT(0xc8ba, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc8b8));
        EXPECT(0xfd, gbc.readMem(0xc8b9));
        // CB FD 02C7
        gbc.setState(0x86db, 0xab73, 0x56b0, 0x8bb4, 0x46bd, 0x9dc2, 0x1, 0x1);
        gbc.writeMem(0x86db, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0xab73, gbc.sp());
        EXPECT(0x86dd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x86db));
        EXPECT(0xfd, gbc.readMem(0x86dc));
        // CB FD 02C8
        gbc.setState(0xaa19, 0x923b, 0xd170, 0xe632, 0x243f, 0x7189, 0x0, 0x0);
        gbc.writeMem(0xaa19, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x923b, gbc.sp());
        EXPECT(0xaa1b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa19));
        EXPECT(0xfd, gbc.readMem(0xaa1a));
        // CB FD 02C9
        gbc.setState(0x129d, 0xf972, 0x3730, 0x93a4, 0xe6e0, 0xb63d, 0x1, 0x0);
        gbc.writeMem(0x129d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xf972, gbc.sp());
        EXPECT(0x129f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 02CA
        gbc.setState(0x1534, 0xf029, 0xbb50, 0xa0c9, 0xb356, 0x73c4, 0x0, 0x1);
        gbc.writeMem(0x1534, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0xf029, gbc.sp());
        EXPECT(0x1536, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 02CB
        gbc.setState(0x82c, 0xb678, 0x9410, 0x547b, 0x157a, 0xf4ad, 0x1, 0x0);
        gbc.writeMem(0x82c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xb678, gbc.sp());
        EXPECT(0x82e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 02CC
        gbc.setState(0xc08f, 0xcff4, 0x4830, 0xd2a9, 0x1f08, 0x77ed, 0x0, 0x1);
        gbc.writeMem(0xc08f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0xcff4, gbc.sp());
        EXPECT(0xc091, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc08f));
        EXPECT(0xfd, gbc.readMem(0xc090));
        // CB FD 02CD
        gbc.setState(0x909f, 0x66ca, 0xf180, 0xe9e1, 0x8ebf, 0x1f3a, 0x1, 0x1);
        gbc.writeMem(0x909f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x66ca, gbc.sp());
        EXPECT(0x90a1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x909f));
        EXPECT(0xfd, gbc.readMem(0x90a0));
        // CB FD 02CE
        gbc.setState(0x5a72, 0x88b4, 0x830, 0xf50b, 0x321e, 0x1b7e, 0x0, 0x0);
        gbc.writeMem(0x5a72, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x88b4, gbc.sp());
        EXPECT(0x5a74, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 02CF
        gbc.setState(0x9897, 0xc03f, 0xaf50, 0x1641, 0x7265, 0xc755, 0x0, 0x1);
        gbc.writeMem(0x9897, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0xc03f, gbc.sp());
        EXPECT(0x9899, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9897));
        EXPECT(0xfd, gbc.readMem(0x9898));
        // CB FD 02D0
        gbc.setState(0x257, 0x4656, 0x12c0, 0xd198, 0xd05a, 0xc7cd, 0x1, 0x0);
        gbc.writeMem(0x257, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0x4656, gbc.sp());
        EXPECT(0x259, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 02D2
        gbc.setState(0xfa3, 0xf46c, 0x6050, 0xd717, 0xac0a, 0xe87f, 0x1, 0x0);
        gbc.writeMem(0xfa3, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0xf46c, gbc.sp());
        EXPECT(0xfa5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 02D3
        gbc.setState(0xf0d, 0xaee6, 0xa360, 0x8023, 0xe6a9, 0xcb5c, 0x0, 0x1);
        gbc.writeMem(0xf0d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0xaee6, gbc.sp());
        EXPECT(0xf0f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 02D4
        gbc.setState(0x939f, 0xe517, 0x34a0, 0x4f9c, 0x5296, 0x34a6, 0x1, 0x0);
        gbc.writeMem(0x939f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0xe517, gbc.sp());
        EXPECT(0x93a1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x939f));
        EXPECT(0xfd, gbc.readMem(0x93a0));
        // CB FD 02D5
        gbc.setState(0x4310, 0x585e, 0x5360, 0xdf31, 0x88af, 0x2b60, 0x0, 0x0);
        gbc.writeMem(0x4310, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x585e, gbc.sp());
        EXPECT(0x4312, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 02D6
        gbc.setState(0x309c, 0xe344, 0x3680, 0x7c90, 0xbf5, 0x5c34, 0x1, 0x0);
        gbc.writeMem(0x309c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0xe344, gbc.sp());
        EXPECT(0x309e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 02D7
        gbc.setState(0x2ab6, 0xce69, 0xb730, 0x4fde, 0xc9ad, 0x3830, 0x1, 0x0);
        gbc.writeMem(0x2ab6, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xce69, gbc.sp());
        EXPECT(0x2ab8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 02D8
        gbc.setState(0x41be, 0xf87d, 0x8840, 0xea8e, 0x1fb6, 0xeed1, 0x0, 0x0);
        gbc.writeMem(0x41be, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0xf87d, gbc.sp());
        EXPECT(0x41c0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 02D9
        gbc.setState(0xd730, 0x6941, 0x3b70, 0x1d4f, 0x1eb1, 0xd141, 0x1, 0x0);
        gbc.writeMem(0xd730, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x6941, gbc.sp());
        EXPECT(0xd732, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd730));
        EXPECT(0xfd, gbc.readMem(0xd731));
        // CB FD 02DA
        gbc.setState(0x770, 0xa0d6, 0x7e40, 0xee9, 0xefd0, 0xc862, 0x1, 0x1);
        gbc.writeMem(0x770, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0xa0d6, gbc.sp());
        EXPECT(0x772, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 02DB
        gbc.setState(0xd0f3, 0xbf88, 0x3040, 0xa01d, 0xcbb4, 0x895c, 0x1, 0x0);
        gbc.writeMem(0xd0f3, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0xbf88, gbc.sp());
        EXPECT(0xd0f5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd0f3));
        EXPECT(0xfd, gbc.readMem(0xd0f4));
        // CB FD 02DC
        gbc.setState(0x566d, 0xcc53, 0xd530, 0xe14f, 0xe06f, 0x91b, 0x1, 0x0);
        gbc.writeMem(0x566d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0xcc53, gbc.sp());
        EXPECT(0x566f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 02DD
        gbc.setState(0x6e96, 0x916e, 0xa930, 0x371f, 0x8a58, 0x81b6, 0x0, 0x0);
        gbc.writeMem(0x6e96, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x916e, gbc.sp());
        EXPECT(0x6e98, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 02DE
        gbc.setState(0xc11b, 0x3719, 0x8400, 0x5cf, 0xbcac, 0x6659, 0x1, 0x0);
        gbc.writeMem(0xc11b, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x3719, gbc.sp());
        EXPECT(0xc11d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc11b));
        EXPECT(0xfd, gbc.readMem(0xc11c));
        // CB FD 02DF
        gbc.setState(0x59bd, 0xe031, 0xd520, 0xd04e, 0xe44e, 0x6156, 0x1, 0x0);
        gbc.writeMem(0x59bd, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0xe031, gbc.sp());
        EXPECT(0x59bf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 02E0
        gbc.setState(0x899d, 0xb2b5, 0x8e00, 0xc33c, 0xb91d, 0xe7f2, 0x1, 0x1);
        gbc.writeMem(0x899d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0xb2b5, gbc.sp());
        EXPECT(0x899f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x899d));
        EXPECT(0xfd, gbc.readMem(0x899e));
        // CB FD 02E1
        gbc.setState(0xa71b, 0xc491, 0x6210, 0x26dc, 0x5313, 0xf6bc, 0x1, 0x0);
        gbc.writeMem(0xa71b, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0xc491, gbc.sp());
        EXPECT(0xa71d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa71b));
        EXPECT(0xfd, gbc.readMem(0xa71c));
        // CB FD 02E2
        gbc.setState(0x64cf, 0x1691, 0x3160, 0xd3f3, 0xc7e3, 0xae4f, 0x1, 0x0);
        gbc.writeMem(0x64cf, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x1691, gbc.sp());
        EXPECT(0x64d1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 02E3
        gbc.setState(0x89fe, 0x3aa, 0xc510, 0xf0c4, 0x6010, 0xdea8, 0x0, 0x1);
        gbc.writeMem(0x89fe, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x3aa, gbc.sp());
        EXPECT(0x8a00, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x89fe));
        EXPECT(0xfd, gbc.readMem(0x89ff));
        // CB FD 02E4
        gbc.setState(0x5904, 0xfdfe, 0xa1c0, 0x2ad1, 0x5d0d, 0x6542, 0x0, 0x1);
        gbc.writeMem(0x5904, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0xfdfe, gbc.sp());
        EXPECT(0x5906, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 02E5
        gbc.setState(0xcdbf, 0xa7ff, 0x11e0, 0x5dfc, 0x4dbf, 0x932e, 0x0, 0x1);
        gbc.writeMem(0xcdbf, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0xa7ff, gbc.sp());
        EXPECT(0xcdc1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcdbf));
        EXPECT(0xfd, gbc.readMem(0xcdc0));
        // CB FD 02E6
        gbc.setState(0xa0e9, 0x5a3a, 0x5ad0, 0x85f6, 0x7532, 0x1284, 0x1, 0x0);
        gbc.writeMem(0xa0e9, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x5a3a, gbc.sp());
        EXPECT(0xa0eb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa0e9));
        EXPECT(0xfd, gbc.readMem(0xa0ea));
        // CB FD 02E7
        gbc.setState(0xd3af, 0x7e68, 0xc780, 0x7e0a, 0x27, 0xe0cc, 0x0, 0x0);
        gbc.writeMem(0xd3af, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x7e68, gbc.sp());
        EXPECT(0xd3b1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd3af));
        EXPECT(0xfd, gbc.readMem(0xd3b0));
        // CB FD 02E8
        gbc.setState(0x2319, 0x69f9, 0x8d30, 0x5289, 0x1cec, 0x2fcf, 0x1, 0x0);
        gbc.writeMem(0x2319, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x69f9, gbc.sp());
        EXPECT(0x231b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 02E9
        gbc.setState(0x7d45, 0x1d94, 0x34c0, 0x92bd, 0xb413, 0xd5fd, 0x0, 0x1);
        gbc.writeMem(0x7d45, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x1d94, gbc.sp());
        EXPECT(0x7d47, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 02EA
        gbc.setState(0x339f, 0x1312, 0xc370, 0xf412, 0x1403, 0xda51, 0x0, 0x0);
        gbc.writeMem(0x339f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0x1312, gbc.sp());
        EXPECT(0x33a1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 02EB
        gbc.setState(0x10ba, 0x9f68, 0xc7e0, 0xa63e, 0x5313, 0xdea4, 0x0, 0x1);
        gbc.writeMem(0x10ba, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x9f68, gbc.sp());
        EXPECT(0x10bc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 02EC
        gbc.setState(0x7fa6, 0xdf6d, 0xd0e0, 0xe2f0, 0xdd85, 0x2bbe, 0x0, 0x0);
        gbc.writeMem(0x7fa6, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xdf6d, gbc.sp());
        EXPECT(0x7fa8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 02ED
        gbc.setState(0x5fca, 0x717f, 0x8b00, 0x2c73, 0xe67c, 0x1be8, 0x0, 0x1);
        gbc.writeMem(0x5fca, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x717f, gbc.sp());
        EXPECT(0x5fcc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 02EE
        gbc.setState(0xc35e, 0xdf71, 0xb3c0, 0xbf17, 0x5ec2, 0x15c8, 0x0, 0x1);
        gbc.writeMem(0xc35e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0xdf71, gbc.sp());
        EXPECT(0xc360, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc35e));
        EXPECT(0xfd, gbc.readMem(0xc35f));
        // CB FD 02EF
        gbc.setState(0x7429, 0x75ec, 0x9b30, 0x293c, 0x2bba, 0x90a3, 0x0, 0x1);
        gbc.writeMem(0x7429, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x75ec, gbc.sp());
        EXPECT(0x742b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 02F0
        gbc.setState(0xa181, 0x6dca, 0xbe70, 0x30ea, 0xb4c7, 0x7710, 0x0, 0x1);
        gbc.writeMem(0xa181, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x6dca, gbc.sp());
        EXPECT(0xa183, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa181));
        EXPECT(0xfd, gbc.readMem(0xa182));
        // CB FD 02F1
        gbc.setState(0x9581, 0x232e, 0x4f90, 0x5c40, 0x3501, 0x55f0, 0x0, 0x1);
        gbc.writeMem(0x9581, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x232e, gbc.sp());
        EXPECT(0x9583, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9581));
        EXPECT(0xfd, gbc.readMem(0x9582));
        // CB FD 02F2
        gbc.setState(0xb9b5, 0x1cb4, 0x8910, 0x18a9, 0xc2ba, 0x46dc, 0x1, 0x1);
        gbc.writeMem(0xb9b5, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x1cb4, gbc.sp());
        EXPECT(0xb9b7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb9b5));
        EXPECT(0xfd, gbc.readMem(0xb9b6));
        // CB FD 02F4
        gbc.setState(0x978, 0xcfc8, 0x610, 0x6d63, 0xa39b, 0xa0d0, 0x0, 0x1);
        gbc.writeMem(0x978, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0xcfc8, gbc.sp());
        EXPECT(0x97a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 02F5
        gbc.setState(0xdd29, 0xa1e3, 0x99b0, 0x5d30, 0x4805, 0xd091, 0x1, 0x1);
        gbc.writeMem(0xdd29, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0xa1e3, gbc.sp());
        EXPECT(0xdd2b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdd29));
        EXPECT(0xfd, gbc.readMem(0xdd2a));
        // CB FD 02F6
        gbc.setState(0xcec6, 0x5068, 0xb580, 0x6cda, 0x850a, 0x9d99, 0x0, 0x0);
        gbc.writeMem(0xcec6, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x5068, gbc.sp());
        EXPECT(0xcec8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcec6));
        EXPECT(0xfd, gbc.readMem(0xcec7));
        // CB FD 02F7
        gbc.setState(0xbe9, 0x131, 0x29c0, 0xef51, 0xcab4, 0x50bc, 0x0, 0x0);
        gbc.writeMem(0xbe9, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x131, gbc.sp());
        EXPECT(0xbeb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 02F8
        gbc.setState(0xebc7, 0xf51, 0x5be0, 0x72d2, 0x1f04, 0x409, 0x0, 0x1);
        gbc.writeMem(0xebc7, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xf51, gbc.sp());
        EXPECT(0xebc9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xebc7));
        EXPECT(0xfd, gbc.readMem(0xebc8));
        // CB FD 02F9
        gbc.setState(0xa271, 0xcd2e, 0xc880, 0xd26b, 0x3b2c, 0x33f0, 0x1, 0x0);
        gbc.writeMem(0xa271, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0xcd2e, gbc.sp());
        EXPECT(0xa273, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa271));
        EXPECT(0xfd, gbc.readMem(0xa272));
        // CB FD 02FA
        gbc.setState(0xdced, 0xbfd3, 0x4c70, 0xfb0a, 0x8bf8, 0xd39b, 0x0, 0x0);
        gbc.writeMem(0xdced, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0xbfd3, gbc.sp());
        EXPECT(0xdcef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdced));
        EXPECT(0xfd, gbc.readMem(0xdcee));
        // CB FD 02FB
        gbc.setState(0x9370, 0xc2, 0xb10, 0xe68f, 0x1324, 0x692a, 0x0, 0x1);
        gbc.writeMem(0x9370, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xc2, gbc.sp());
        EXPECT(0x9372, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9370));
        EXPECT(0xfd, gbc.readMem(0x9371));
        // CB FD 02FC
        gbc.setState(0xc73, 0x778a, 0x9990, 0x7477, 0x683a, 0x2bca, 0x0, 0x1);
        gbc.writeMem(0xc73, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x778a, gbc.sp());
        EXPECT(0xc75, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 02FD
        gbc.setState(0x1143, 0xe0b9, 0xaca0, 0x95cf, 0x75dc, 0xfe3b, 0x1, 0x0);
        gbc.writeMem(0x1143, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0xe0b9, gbc.sp());
        EXPECT(0x1145, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 02FE
        gbc.setState(0xcab5, 0x923c, 0xa8d0, 0x9724, 0x80e7, 0x8e75, 0x1, 0x0);
        gbc.writeMem(0xcab5, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x923c, gbc.sp());
        EXPECT(0xcab7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcab5));
        EXPECT(0xfd, gbc.readMem(0xcab6));
        // CB FD 0300
        gbc.setState(0xcf83, 0x6187, 0x8240, 0xd62e, 0x391c, 0xe96b, 0x0, 0x0);
        gbc.writeMem(0xcf83, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x6187, gbc.sp());
        EXPECT(0xcf85, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf83));
        EXPECT(0xfd, gbc.readMem(0xcf84));
        // CB FD 0301
        gbc.setState(0xa247, 0xeace, 0x2940, 0x4a2f, 0xe22c, 0x13e7, 0x0, 0x0);
        gbc.writeMem(0xa247, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0xeace, gbc.sp());
        EXPECT(0xa249, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa247));
        EXPECT(0xfd, gbc.readMem(0xa248));
        // CB FD 0302
        gbc.setState(0x25d9, 0xb6a0, 0x1680, 0xf083, 0x374c, 0x87e, 0x1, 0x0);
        gbc.writeMem(0x25d9, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0xb6a0, gbc.sp());
        EXPECT(0x25db, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0303
        gbc.setState(0x239a, 0xe257, 0xba50, 0x3e53, 0xf2e9, 0xb1f6, 0x0, 0x1);
        gbc.writeMem(0x239a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0xe257, gbc.sp());
        EXPECT(0x239c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0304
        gbc.setState(0x9236, 0xc3ed, 0x89e0, 0x55c5, 0x6168, 0x37e0, 0x1, 0x1);
        gbc.writeMem(0x9236, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0xc3ed, gbc.sp());
        EXPECT(0x9238, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9236));
        EXPECT(0xfd, gbc.readMem(0x9237));
        // CB FD 0305
        gbc.setState(0xb85, 0x6452, 0xf030, 0xecd, 0x1e0c, 0xe90b, 0x0, 0x0);
        gbc.writeMem(0xb85, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x6452, gbc.sp());
        EXPECT(0xb87, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0306
        gbc.setState(0x21e3, 0x3c89, 0xe00, 0x83c2, 0x85d0, 0xdd5f, 0x0, 0x0);
        gbc.writeMem(0x21e3, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x3c89, gbc.sp());
        EXPECT(0x21e5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0307
        gbc.setState(0x5b3a, 0x2def, 0x9700, 0xe9e0, 0xffc5, 0x8094, 0x0, 0x0);
        gbc.writeMem(0x5b3a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x2def, gbc.sp());
        EXPECT(0x5b3c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0308
        gbc.setState(0x185, 0xda71, 0xa100, 0xa982, 0x4d5a, 0x957f, 0x1, 0x1);
        gbc.writeMem(0x185, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0xda71, gbc.sp());
        EXPECT(0x187, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0309
        gbc.setState(0xe34d, 0xc2a3, 0x6540, 0xfde1, 0xe8c0, 0xf034, 0x0, 0x1);
        gbc.writeMem(0xe34d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0xc2a3, gbc.sp());
        EXPECT(0xe34f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe34d));
        EXPECT(0xfd, gbc.readMem(0xe34e));
        // CB FD 030A
        gbc.setState(0x159c, 0x4976, 0xe380, 0xfcba, 0x4a46, 0x33be, 0x1, 0x0);
        gbc.writeMem(0x159c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x4976, gbc.sp());
        EXPECT(0x159e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 030B
        gbc.setState(0x3e07, 0x9b23, 0xdee0, 0x48d8, 0xe708, 0xc1ed, 0x1, 0x1);
        gbc.writeMem(0x3e07, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x9b23, gbc.sp());
        EXPECT(0x3e09, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 030C
        gbc.setState(0x7be6, 0x84c0, 0xd160, 0xbaa9, 0x1e80, 0x69e2, 0x0, 0x1);
        gbc.writeMem(0x7be6, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x84c0, gbc.sp());
        EXPECT(0x7be8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 030D
        gbc.setState(0x704, 0x60c0, 0x9b60, 0xb671, 0xa4ea, 0x6938, 0x0, 0x1);
        gbc.writeMem(0x704, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x60c0, gbc.sp());
        EXPECT(0x706, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 030E
        gbc.setState(0x9673, 0xa009, 0x4c30, 0x1569, 0x858a, 0x1f15, 0x0, 0x0);
        gbc.writeMem(0x9673, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0xa009, gbc.sp());
        EXPECT(0x9675, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9673));
        EXPECT(0xfd, gbc.readMem(0x9674));
        // CB FD 030F
        gbc.setState(0x5f2a, 0xc654, 0x29b0, 0xdbb1, 0x5e75, 0x7412, 0x0, 0x1);
        gbc.writeMem(0x5f2a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0xc654, gbc.sp());
        EXPECT(0x5f2c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0310
        gbc.setState(0x7fce, 0x6786, 0x2430, 0xd0ed, 0x1591, 0xea65, 0x0, 0x1);
        gbc.writeMem(0x7fce, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x6786, gbc.sp());
        EXPECT(0x7fd0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0311
        gbc.setState(0xa7e1, 0xf452, 0xdb30, 0x2abf, 0x1abe, 0xc81a, 0x0, 0x1);
        gbc.writeMem(0xa7e1, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0xf452, gbc.sp());
        EXPECT(0xa7e3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa7e1));
        EXPECT(0xfd, gbc.readMem(0xa7e2));
        // CB FD 0312
        gbc.setState(0xaada, 0x5a97, 0x7930, 0xb54b, 0xceeb, 0xa461, 0x0, 0x0);
        gbc.writeMem(0xaada, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x5a97, gbc.sp());
        EXPECT(0xaadc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaada));
        EXPECT(0xfd, gbc.readMem(0xaadb));
        // CB FD 0313
        gbc.setState(0xbe12, 0xd86, 0xd490, 0xc948, 0x8489, 0x3af2, 0x1, 0x0);
        gbc.writeMem(0xbe12, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0xd86, gbc.sp());
        EXPECT(0xbe14, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe12));
        EXPECT(0xfd, gbc.readMem(0xbe13));
        // CB FD 0314
        gbc.setState(0x237, 0x40b6, 0x7780, 0x3155, 0x4015, 0x1229, 0x1, 0x1);
        gbc.writeMem(0x237, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x40b6, gbc.sp());
        EXPECT(0x239, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0315
        gbc.setState(0xedad, 0x2244, 0xe550, 0x8fa6, 0xf638, 0x9c2b, 0x0, 0x0);
        gbc.writeMem(0xedad, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x2244, gbc.sp());
        EXPECT(0xedaf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xedad));
        EXPECT(0xfd, gbc.readMem(0xedae));
        // CB FD 0318
        gbc.setState(0xc3b1, 0x62b3, 0x4980, 0xfe09, 0xc4bb, 0x4495, 0x1, 0x1);
        gbc.writeMem(0xc3b1, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x62b3, gbc.sp());
        EXPECT(0xc3b3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc3b1));
        EXPECT(0xfd, gbc.readMem(0xc3b2));
        // CB FD 0319
        gbc.setState(0xb2c2, 0x67b1, 0x7ce0, 0x7784, 0x2891, 0x6fa, 0x1, 0x0);
        gbc.writeMem(0xb2c2, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0x67b1, gbc.sp());
        EXPECT(0xb2c4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb2c2));
        EXPECT(0xfd, gbc.readMem(0xb2c3));
        // CB FD 031A
        gbc.setState(0x70fb, 0x1da5, 0xef40, 0x7732, 0xe8de, 0xcbc2, 0x1, 0x0);
        gbc.writeMem(0x70fb, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0x1da5, gbc.sp());
        EXPECT(0x70fd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 031C
        gbc.setState(0x75de, 0x1c09, 0x8620, 0x9a8a, 0x7a66, 0xbb7, 0x0, 0x1);
        gbc.writeMem(0x75de, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x1c09, gbc.sp());
        EXPECT(0x75e0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 031D
        gbc.setState(0x99c3, 0xbf3a, 0x24c0, 0xcd56, 0x65fe, 0x6d2b, 0x0, 0x1);
        gbc.writeMem(0x99c3, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0xbf3a, gbc.sp());
        EXPECT(0x99c5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x99c3));
        EXPECT(0xfd, gbc.readMem(0x99c4));
        // CB FD 031E
        gbc.setState(0x70ec, 0x14f3, 0x17f0, 0x51ac, 0xd41e, 0x2ee, 0x0, 0x1);
        gbc.writeMem(0x70ec, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x14f3, gbc.sp());
        EXPECT(0x70ee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 031F
        gbc.setState(0x84ee, 0xe1fc, 0x9400, 0xad8, 0x237d, 0x712c, 0x0, 0x1);
        gbc.writeMem(0x84ee, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xe1fc, gbc.sp());
        EXPECT(0x84f0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84ee));
        EXPECT(0xfd, gbc.readMem(0x84ef));
        // CB FD 0320
        gbc.setState(0xb946, 0xa6f2, 0xf500, 0xd7e3, 0x7e81, 0x175a, 0x0, 0x1);
        gbc.writeMem(0xb946, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0xa6f2, gbc.sp());
        EXPECT(0xb948, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb946));
        EXPECT(0xfd, gbc.readMem(0xb947));
        // CB FD 0321
        gbc.setState(0x8531, 0xc8d0, 0x9560, 0x8e33, 0x8ec7, 0x8550, 0x0, 0x1);
        gbc.writeMem(0x8531, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0xc8d0, gbc.sp());
        EXPECT(0x8533, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8531));
        EXPECT(0xfd, gbc.readMem(0x8532));
        // CB FD 0323
        gbc.setState(0x6553, 0x69f0, 0x90b0, 0xb44e, 0x775a, 0xae73, 0x1, 0x0);
        gbc.writeMem(0x6553, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x69f0, gbc.sp());
        EXPECT(0x6555, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0324
        gbc.setState(0xb058, 0xbde4, 0x370, 0xf9fc, 0x9abf, 0xba42, 0x1, 0x1);
        gbc.writeMem(0xb058, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0xbde4, gbc.sp());
        EXPECT(0xb05a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb058));
        EXPECT(0xfd, gbc.readMem(0xb059));
        // CB FD 0326
        gbc.setState(0x4195, 0xf521, 0x3df0, 0x8f61, 0xf383, 0x329, 0x1, 0x1);
        gbc.writeMem(0x4195, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0xf521, gbc.sp());
        EXPECT(0x4197, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0327
        gbc.setState(0xeb88, 0x5039, 0x1cf0, 0x71d4, 0x5394, 0x61b0, 0x1, 0x0);
        gbc.writeMem(0xeb88, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x5039, gbc.sp());
        EXPECT(0xeb8a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb88));
        EXPECT(0xfd, gbc.readMem(0xeb89));
        // CB FD 0328
        gbc.setState(0xd0c2, 0xc189, 0xaa0, 0x1521, 0xc10, 0xbb1a, 0x1, 0x1);
        gbc.writeMem(0xd0c2, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0xc189, gbc.sp());
        EXPECT(0xd0c4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd0c2));
        EXPECT(0xfd, gbc.readMem(0xd0c3));
        // CB FD 0329
        gbc.setState(0xdc44, 0xc2b7, 0xf2a0, 0x38c3, 0x1d85, 0x70fe, 0x1, 0x0);
        gbc.writeMem(0xdc44, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0xc2b7, gbc.sp());
        EXPECT(0xdc46, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc44));
        EXPECT(0xfd, gbc.readMem(0xdc45));
        // CB FD 032A
        gbc.setState(0x238b, 0x14ec, 0x67d0, 0x13a3, 0xd7db, 0xe6dd, 0x0, 0x0);
        gbc.writeMem(0x238b, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x14ec, gbc.sp());
        EXPECT(0x238d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 032B
        gbc.setState(0x4008, 0x9ccc, 0xb5b0, 0x62be, 0x2c9d, 0xf69b, 0x1, 0x0);
        gbc.writeMem(0x4008, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x9ccc, gbc.sp());
        EXPECT(0x400a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 032C
        gbc.setState(0x989, 0x2569, 0x8d00, 0xa9db, 0xa62d, 0xd355, 0x0, 0x0);
        gbc.writeMem(0x989, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x2569, gbc.sp());
        EXPECT(0x98b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 032E
        gbc.setState(0xc8a5, 0x35c0, 0xa170, 0x4204, 0x7a3b, 0x73db, 0x0, 0x0);
        gbc.writeMem(0xc8a5, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x35c0, gbc.sp());
        EXPECT(0xc8a7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc8a5));
        EXPECT(0xfd, gbc.readMem(0xc8a6));
        // CB FD 032F
        gbc.setState(0x866b, 0xa61d, 0x7b20, 0x59aa, 0xa541, 0xad83, 0x1, 0x1);
        gbc.writeMem(0x866b, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0xa61d, gbc.sp());
        EXPECT(0x866d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x866b));
        EXPECT(0xfd, gbc.readMem(0x866c));
        // CB FD 0330
        gbc.setState(0x7b25, 0x29c0, 0xa060, 0x3ed, 0x3177, 0x92cb, 0x1, 0x1);
        gbc.writeMem(0x7b25, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x29c0, gbc.sp());
        EXPECT(0x7b27, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0331
        gbc.setState(0x1714, 0x41d2, 0x41f0, 0x5c01, 0xf962, 0x2a17, 0x1, 0x1);
        gbc.writeMem(0x1714, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x41d2, gbc.sp());
        EXPECT(0x1716, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0332
        gbc.setState(0x2fbe, 0xa6ec, 0x4cf0, 0xa7a2, 0x21bd, 0xaba9, 0x1, 0x1);
        gbc.writeMem(0x2fbe, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0xa6ec, gbc.sp());
        EXPECT(0x2fc0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0333
        gbc.setState(0xa4a1, 0xc223, 0x4c90, 0x4bfc, 0xd3d3, 0x42d7, 0x1, 0x1);
        gbc.writeMem(0xa4a1, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xc223, gbc.sp());
        EXPECT(0xa4a3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa4a1));
        EXPECT(0xfd, gbc.readMem(0xa4a2));
        // CB FD 0335
        gbc.setState(0x73bf, 0xfe3c, 0x17d0, 0x52a1, 0x8da7, 0x4d33, 0x1, 0x1);
        gbc.writeMem(0x73bf, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0xfe3c, gbc.sp());
        EXPECT(0x73c1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0336
        gbc.setState(0x7a50, 0xb72e, 0xf5c0, 0xb765, 0x2cfa, 0x5234, 0x1, 0x1);
        gbc.writeMem(0x7a50, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0xb72e, gbc.sp());
        EXPECT(0x7a52, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0338
        gbc.setState(0x205b, 0xba9a, 0x7bc0, 0x560a, 0xd920, 0x729f, 0x0, 0x1);
        gbc.writeMem(0x205b, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0xba9a, gbc.sp());
        EXPECT(0x205d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 033A
        gbc.setState(0x77bb, 0x367b, 0x1850, 0x8f67, 0x5103, 0x901d, 0x0, 0x0);
        gbc.writeMem(0x77bb, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x367b, gbc.sp());
        EXPECT(0x77bd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 033B
        gbc.setState(0xccc9, 0xf9da, 0xbf10, 0xdcca, 0x1d, 0xc9de, 0x1, 0x0);
        gbc.writeMem(0xccc9, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0xf9da, gbc.sp());
        EXPECT(0xcccb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xccc9));
        EXPECT(0xfd, gbc.readMem(0xccca));
        // CB FD 033C
        gbc.setState(0xa37b, 0xd6a, 0x1c80, 0x5cbd, 0x70fc, 0x74d0, 0x0, 0x1);
        gbc.writeMem(0xa37b, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0xd6a, gbc.sp());
        EXPECT(0xa37d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa37b));
        EXPECT(0xfd, gbc.readMem(0xa37c));
        // CB FD 033D
        gbc.setState(0x295, 0x86a0, 0xee10, 0xaee, 0xd618, 0xb911, 0x1, 0x1);
        gbc.writeMem(0x295, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x86a0, gbc.sp());
        EXPECT(0x297, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 033E
        gbc.setState(0x7081, 0xf254, 0x7360, 0x37e6, 0x9913, 0xff3b, 0x1, 0x1);
        gbc.writeMem(0x7081, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0xf254, gbc.sp());
        EXPECT(0x7083, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 033F
        gbc.setState(0x79fc, 0xef79, 0xa400, 0x6ab9, 0x9f78, 0x62f2, 0x0, 0x0);
        gbc.writeMem(0x79fc, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0xef79, gbc.sp());
        EXPECT(0x79fe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0340
        gbc.setState(0x769c, 0x3f99, 0xfd90, 0xbd23, 0x68d9, 0x7ee7, 0x1, 0x1);
        gbc.writeMem(0x769c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0x3f99, gbc.sp());
        EXPECT(0x769e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0341
        gbc.setState(0x1c20, 0xfc49, 0xa960, 0x7735, 0x203d, 0xeb8b, 0x0, 0x1);
        gbc.writeMem(0x1c20, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0xfc49, gbc.sp());
        EXPECT(0x1c22, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0342
        gbc.setState(0xaa99, 0x40f1, 0x7080, 0x61a6, 0x64eb, 0x3b37, 0x0, 0x1);
        gbc.writeMem(0xaa99, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x40f1, gbc.sp());
        EXPECT(0xaa9b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa99));
        EXPECT(0xfd, gbc.readMem(0xaa9a));
        // CB FD 0343
        gbc.setState(0xc4d4, 0xe590, 0xe460, 0x4b3b, 0x9011, 0x261, 0x1, 0x0);
        gbc.writeMem(0xc4d4, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0xe590, gbc.sp());
        EXPECT(0xc4d6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc4d4));
        EXPECT(0xfd, gbc.readMem(0xc4d5));
        // CB FD 0344
        gbc.setState(0x7662, 0x52ae, 0xf460, 0x53b2, 0xabf7, 0xc710, 0x0, 0x0);
        gbc.writeMem(0x7662, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x52ae, gbc.sp());
        EXPECT(0x7664, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0345
        gbc.setState(0x26ca, 0x1d63, 0xf420, 0x7b45, 0x6517, 0x794, 0x1, 0x0);
        gbc.writeMem(0x26ca, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x1d63, gbc.sp());
        EXPECT(0x26cc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0346
        gbc.setState(0x456, 0x4084, 0xcf90, 0xefb, 0xb554, 0x4f5, 0x0, 0x0);
        gbc.writeMem(0x456, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x4084, gbc.sp());
        EXPECT(0x458, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0347
        gbc.setState(0xa9c3, 0xb3a2, 0x430, 0x17ee, 0xfb63, 0x2677, 0x1, 0x0);
        gbc.writeMem(0xa9c3, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0xb3a2, gbc.sp());
        EXPECT(0xa9c5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa9c3));
        EXPECT(0xfd, gbc.readMem(0xa9c4));
        // CB FD 0348
        gbc.setState(0x81a7, 0x4e1e, 0x42e0, 0xf85c, 0x1fe, 0x474e, 0x1, 0x1);
        gbc.writeMem(0x81a7, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x4e1e, gbc.sp());
        EXPECT(0x81a9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x81a7));
        EXPECT(0xfd, gbc.readMem(0x81a8));
        // CB FD 0349
        gbc.setState(0x64bb, 0x9c87, 0x39a0, 0xb25c, 0x2401, 0x40ea, 0x1, 0x1);
        gbc.writeMem(0x64bb, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x9c87, gbc.sp());
        EXPECT(0x64bd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 034A
        gbc.setState(0x85c6, 0xcc13, 0x55e0, 0xbcfc, 0x7785, 0xc49a, 0x0, 0x1);
        gbc.writeMem(0x85c6, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0xcc13, gbc.sp());
        EXPECT(0x85c8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x85c6));
        EXPECT(0xfd, gbc.readMem(0x85c7));
        // CB FD 034B
        gbc.setState(0xac61, 0x336f, 0x8f0, 0x7b8c, 0xa805, 0x5953, 0x0, 0x1);
        gbc.writeMem(0xac61, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x336f, gbc.sp());
        EXPECT(0xac63, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac61));
        EXPECT(0xfd, gbc.readMem(0xac62));
        // CB FD 034C
        gbc.setState(0x32f6, 0xf8f, 0x780, 0x2e24, 0xdfbf, 0xaf4b, 0x0, 0x0);
        gbc.writeMem(0x32f6, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0xf8f, gbc.sp());
        EXPECT(0x32f8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 034D
        gbc.setState(0x9da3, 0xa474, 0xd110, 0x826a, 0xa215, 0xf4b9, 0x1, 0x0);
        gbc.writeMem(0x9da3, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xa474, gbc.sp());
        EXPECT(0x9da5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9da3));
        EXPECT(0xfd, gbc.readMem(0x9da4));
        // CB FD 034E
        gbc.setState(0x7357, 0x803d, 0xd660, 0x2770, 0x3e3b, 0xf753, 0x1, 0x0);
        gbc.writeMem(0x7357, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x803d, gbc.sp());
        EXPECT(0x7359, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 034F
        gbc.setState(0xdd1, 0xc8b2, 0x7910, 0x2fc, 0x7fc9, 0xff04, 0x1, 0x1);
        gbc.writeMem(0xdd1, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0xc8b2, gbc.sp());
        EXPECT(0xdd3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0350
        gbc.setState(0x9863, 0x6c7b, 0xadd0, 0x24f6, 0x5bc3, 0x8df6, 0x0, 0x0);
        gbc.writeMem(0x9863, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x6c7b, gbc.sp());
        EXPECT(0x9865, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9863));
        EXPECT(0xfd, gbc.readMem(0x9864));
        // CB FD 0351
        gbc.setState(0xc134, 0x2652, 0x27a0, 0x34b8, 0x3692, 0x7686, 0x1, 0x0);
        gbc.writeMem(0xc134, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x2652, gbc.sp());
        EXPECT(0xc136, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc134));
        EXPECT(0xfd, gbc.readMem(0xc135));
        // CB FD 0352
        gbc.setState(0x1c80, 0xa3e1, 0x3480, 0xfd71, 0x7d67, 0xc021, 0x0, 0x0);
        gbc.writeMem(0x1c80, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0xa3e1, gbc.sp());
        EXPECT(0x1c82, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0353
        gbc.setState(0xb372, 0xa88f, 0x7790, 0x4d96, 0xe8ce, 0xffb7, 0x0, 0x1);
        gbc.writeMem(0xb372, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0xa88f, gbc.sp());
        EXPECT(0xb374, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb372));
        EXPECT(0xfd, gbc.readMem(0xb373));
        // CB FD 0354
        gbc.setState(0x7f85, 0xce68, 0xc700, 0x372b, 0x272d, 0xc799, 0x1, 0x1);
        gbc.writeMem(0x7f85, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0xce68, gbc.sp());
        EXPECT(0x7f87, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0355
        gbc.setState(0x9d60, 0xaa5f, 0xe6e0, 0xaf2b, 0x750b, 0x7c3c, 0x1, 0x1);
        gbc.writeMem(0x9d60, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0xaa5f, gbc.sp());
        EXPECT(0x9d62, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d60));
        EXPECT(0xfd, gbc.readMem(0x9d61));
        // CB FD 0356
        gbc.setState(0xc38e, 0xeb58, 0xecb0, 0x48e0, 0xadee, 0x858f, 0x1, 0x0);
        gbc.writeMem(0xc38e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0xeb58, gbc.sp());
        EXPECT(0xc390, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc38e));
        EXPECT(0xfd, gbc.readMem(0xc38f));
        // CB FD 0357
        gbc.setState(0xd12f, 0xa2b, 0x90a0, 0x9eba, 0x2e9e, 0x8df7, 0x0, 0x0);
        gbc.writeMem(0xd12f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0xa2b, gbc.sp());
        EXPECT(0xd131, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd12f));
        EXPECT(0xfd, gbc.readMem(0xd130));
        // CB FD 0358
        gbc.setState(0xbafc, 0x634d, 0x5780, 0xca35, 0x3511, 0xcf0f, 0x1, 0x0);
        gbc.writeMem(0xbafc, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x634d, gbc.sp());
        EXPECT(0xbafe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbafc));
        EXPECT(0xfd, gbc.readMem(0xbafd));
        // CB FD 0359
        gbc.setState(0x732e, 0x34a2, 0x2460, 0xc88a, 0xcd5c, 0xcc, 0x0, 0x1);
        gbc.writeMem(0x732e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x34a2, gbc.sp());
        EXPECT(0x7330, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 035A
        gbc.setState(0xbbf5, 0xfab4, 0x6f90, 0x198f, 0x5f2, 0xc00f, 0x0, 0x1);
        gbc.writeMem(0xbbf5, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0xfab4, gbc.sp());
        EXPECT(0xbbf7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbbf5));
        EXPECT(0xfd, gbc.readMem(0xbbf6));
        // CB FD 035B
        gbc.setState(0x958, 0xeb65, 0x3450, 0x132f, 0x67e9, 0x5bc7, 0x1, 0x0);
        gbc.writeMem(0x958, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0xeb65, gbc.sp());
        EXPECT(0x95a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 035C
        gbc.setState(0x425f, 0xd6c5, 0xc960, 0x9459, 0x71ed, 0x5d5f, 0x1, 0x0);
        gbc.writeMem(0x425f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0xd6c5, gbc.sp());
        EXPECT(0x4261, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 035D
        gbc.setState(0xa3be, 0x87e2, 0xeb40, 0x2b13, 0xfd71, 0xdc97, 0x1, 0x0);
        gbc.writeMem(0xa3be, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x87e2, gbc.sp());
        EXPECT(0xa3c0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa3be));
        EXPECT(0xfd, gbc.readMem(0xa3bf));
        // CB FD 035E
        gbc.setState(0xe05f, 0x39ba, 0x5580, 0x6e41, 0x85c1, 0x9fb6, 0x0, 0x0);
        gbc.writeMem(0xe05f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x39ba, gbc.sp());
        EXPECT(0xe061, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe05f));
        EXPECT(0xfd, gbc.readMem(0xe060));
        // CB FD 035F
        gbc.setState(0xf23, 0x165f, 0x4aa0, 0x2f09, 0x553e, 0x53ef, 0x1, 0x0);
        gbc.writeMem(0xf23, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x165f, gbc.sp());
        EXPECT(0xf25, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0360
        gbc.setState(0xc560, 0x9f5f, 0x28b0, 0xf3b, 0xc30a, 0x74c1, 0x1, 0x0);
        gbc.writeMem(0xc560, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x9f5f, gbc.sp());
        EXPECT(0xc562, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc560));
        EXPECT(0xfd, gbc.readMem(0xc561));
        // CB FD 0361
        gbc.setState(0xcc10, 0x8c28, 0xcea0, 0x3463, 0x9ad3, 0x44b8, 0x0, 0x1);
        gbc.writeMem(0xcc10, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x8c28, gbc.sp());
        EXPECT(0xcc12, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcc10));
        EXPECT(0xfd, gbc.readMem(0xcc11));
        // CB FD 0362
        gbc.setState(0x5a52, 0xe848, 0xc000, 0xbdf5, 0x63e3, 0x8467, 0x0, 0x1);
        gbc.writeMem(0x5a52, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0xe848, gbc.sp());
        EXPECT(0x5a54, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0363
        gbc.setState(0x624d, 0x1b0b, 0x5b60, 0x3183, 0x298a, 0xd839, 0x0, 0x1);
        gbc.writeMem(0x624d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x1b0b, gbc.sp());
        EXPECT(0x624f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0364
        gbc.setState(0x4, 0x612d, 0x18b0, 0x914, 0xed54, 0x6476, 0x1, 0x1);
        gbc.writeMem(0x4, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x612d, gbc.sp());
        EXPECT(0x6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0365
        gbc.setState(0x5a9, 0x718d, 0xe760, 0x252, 0x8f60, 0xf1cb, 0x0, 0x1);
        gbc.writeMem(0x5a9, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x718d, gbc.sp());
        EXPECT(0x5ab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0367
        gbc.setState(0xd548, 0x2bf7, 0xc440, 0x8cc9, 0xb99, 0x8ee2, 0x1, 0x1);
        gbc.writeMem(0xd548, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x2bf7, gbc.sp());
        EXPECT(0xd54a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd548));
        EXPECT(0xfd, gbc.readMem(0xd549));
        // CB FD 0368
        gbc.setState(0xee9e, 0x8d99, 0x78c0, 0x5e81, 0xb4df, 0xc737, 0x0, 0x1);
        gbc.writeMem(0xee9e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x8d99, gbc.sp());
        EXPECT(0xeea0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xee9e));
        EXPECT(0xfd, gbc.readMem(0xee9f));
        // CB FD 0369
        gbc.setState(0xce18, 0xdb0c, 0xc120, 0xcd4c, 0xcdd2, 0x33a4, 0x1, 0x1);
        gbc.writeMem(0xce18, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xdb0c, gbc.sp());
        EXPECT(0xce1a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xce18));
        EXPECT(0xfd, gbc.readMem(0xce19));
        // CB FD 036A
        gbc.setState(0xa06a, 0xe8a3, 0xaa20, 0x4605, 0x5176, 0xb6a8, 0x1, 0x0);
        gbc.writeMem(0xa06a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xe8a3, gbc.sp());
        EXPECT(0xa06c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa06a));
        EXPECT(0xfd, gbc.readMem(0xa06b));
        // CB FD 036B
        gbc.setState(0xb579, 0x6a0e, 0xefa0, 0x673a, 0x4f77, 0xcba7, 0x0, 0x1);
        gbc.writeMem(0xb579, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x6a0e, gbc.sp());
        EXPECT(0xb57b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb579));
        EXPECT(0xfd, gbc.readMem(0xb57a));
        // CB FD 036C
        gbc.setState(0x26dc, 0x56c6, 0x4a60, 0x6022, 0xa699, 0x2938, 0x0, 0x0);
        gbc.writeMem(0x26dc, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x56c6, gbc.sp());
        EXPECT(0x26de, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 036D
        gbc.setState(0x181f, 0x5445, 0xcb80, 0x799c, 0x8935, 0xcd6f, 0x0, 0x0);
        gbc.writeMem(0x181f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x5445, gbc.sp());
        EXPECT(0x1821, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 036E
        gbc.setState(0x5b66, 0x1492, 0x110, 0xfedd, 0xa542, 0x8d6c, 0x0, 0x1);
        gbc.writeMem(0x5b66, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0x1492, gbc.sp());
        EXPECT(0x5b68, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 036F
        gbc.setState(0xcccc, 0xe0ae, 0xaa0, 0xaef5, 0x91e5, 0xa2f4, 0x0, 0x1);
        gbc.writeMem(0xcccc, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xe0ae, gbc.sp());
        EXPECT(0xccce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcccc));
        EXPECT(0xfd, gbc.readMem(0xcccd));
        // CB FD 0370
        gbc.setState(0x6db0, 0x2356, 0x500, 0xf3c5, 0xa457, 0x2430, 0x1, 0x1);
        gbc.writeMem(0x6db0, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x2356, gbc.sp());
        EXPECT(0x6db2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0371
        gbc.setState(0x295a, 0xb84c, 0xee70, 0xa373, 0x76d1, 0xc508, 0x1, 0x1);
        gbc.writeMem(0x295a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xb84c, gbc.sp());
        EXPECT(0x295c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0372
        gbc.setState(0x2087, 0x870a, 0xf6c0, 0xce8a, 0xa818, 0xdaaf, 0x1, 0x1);
        gbc.writeMem(0x2087, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x870a, gbc.sp());
        EXPECT(0x2089, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0373
        gbc.setState(0x79da, 0xc7a4, 0xc190, 0x5663, 0x8247, 0xd73d, 0x0, 0x1);
        gbc.writeMem(0x79da, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xc7a4, gbc.sp());
        EXPECT(0x79dc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0374
        gbc.setState(0xae7a, 0x231d, 0x8c70, 0xef10, 0x53e9, 0x2336, 0x0, 0x0);
        gbc.writeMem(0xae7a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x231d, gbc.sp());
        EXPECT(0xae7c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xae7a));
        EXPECT(0xfd, gbc.readMem(0xae7b));
        // CB FD 0375
        gbc.setState(0xb0ec, 0x4562, 0x4ba0, 0x5e86, 0x17eb, 0xb132, 0x1, 0x0);
        gbc.writeMem(0xb0ec, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x4562, gbc.sp());
        EXPECT(0xb0ee, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb0ec));
        EXPECT(0xfd, gbc.readMem(0xb0ed));
        // CB FD 0376
        gbc.setState(0x4421, 0xd990, 0x58f0, 0xa034, 0x889f, 0xc909, 0x0, 0x1);
        gbc.writeMem(0x4421, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xd990, gbc.sp());
        EXPECT(0x4423, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0377
        gbc.setState(0x2df0, 0xffb4, 0xe120, 0xc630, 0xd798, 0x35cc, 0x1, 0x1);
        gbc.writeMem(0x2df0, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xffb4, gbc.sp());
        EXPECT(0x2df2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0378
        gbc.setState(0x5f0, 0xb6dc, 0xe190, 0x477f, 0x1d04, 0x176a, 0x1, 0x1);
        gbc.writeMem(0x5f0, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0xb6dc, gbc.sp());
        EXPECT(0x5f2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0379
        gbc.setState(0xda44, 0xfb89, 0x88c0, 0x5011, 0xe60e, 0x41c1, 0x1, 0x0);
        gbc.writeMem(0xda44, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xfb89, gbc.sp());
        EXPECT(0xda46, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xda44));
        EXPECT(0xfd, gbc.readMem(0xda45));
        // CB FD 037A
        gbc.setState(0x6b1c, 0xa84e, 0xfa00, 0x5be3, 0xee73, 0x266f, 0x1, 0x0);
        gbc.writeMem(0x6b1c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xa84e, gbc.sp());
        EXPECT(0x6b1e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 037B
        gbc.setState(0xd3b1, 0xbf7b, 0xcb70, 0x200d, 0xd9e4, 0x3f0c, 0x0, 0x1);
        gbc.writeMem(0xd3b1, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xbf7b, gbc.sp());
        EXPECT(0xd3b3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd3b1));
        EXPECT(0xfd, gbc.readMem(0xd3b2));
        // CB FD 037C
        gbc.setState(0x72a, 0x5453, 0x170, 0x96d7, 0x2d4d, 0x679e, 0x0, 0x1);
        gbc.writeMem(0x72a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x5453, gbc.sp());
        EXPECT(0x72c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 037D
        gbc.setState(0xe31, 0x649a, 0x55b0, 0x8f5a, 0x95b0, 0x8e0c, 0x0, 0x1);
        gbc.writeMem(0xe31, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x649a, gbc.sp());
        EXPECT(0xe33, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 037E
        gbc.setState(0x80d4, 0xa1cc, 0xd80, 0x85b1, 0xd09e, 0xa212, 0x1, 0x1);
        gbc.writeMem(0x80d4, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0xa1cc, gbc.sp());
        EXPECT(0x80d6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x80d4));
        EXPECT(0xfd, gbc.readMem(0x80d5));
        // CB FD 037F
        gbc.setState(0x2408, 0x1f7b, 0x48b0, 0x8897, 0x89b9, 0xaf00, 0x1, 0x1);
        gbc.writeMem(0x2408, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x1f7b, gbc.sp());
        EXPECT(0x240a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0380
        gbc.setState(0x772, 0x9ccb, 0xfd00, 0x5e68, 0x2407, 0xb400, 0x0, 0x1);
        gbc.writeMem(0x772, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x9ccb, gbc.sp());
        EXPECT(0x774, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0381
        gbc.setState(0xcf8e, 0xa65c, 0x1400, 0xa7c1, 0xbdb1, 0xc8be, 0x1, 0x0);
        gbc.writeMem(0xcf8e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xa65c, gbc.sp());
        EXPECT(0xcf90, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf8e));
        EXPECT(0xfd, gbc.readMem(0xcf8f));
        // CB FD 0382
        gbc.setState(0xb6ba, 0x2bd9, 0xeba0, 0xa354, 0x7514, 0x5105, 0x1, 0x0);
        gbc.writeMem(0xb6ba, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0x2bd9, gbc.sp());
        EXPECT(0xb6bc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb6ba));
        EXPECT(0xfd, gbc.readMem(0xb6bb));
        // CB FD 0384
        gbc.setState(0xa318, 0x38a1, 0x31e0, 0xe8da, 0x5d66, 0xce60, 0x0, 0x1);
        gbc.writeMem(0xa318, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x38a1, gbc.sp());
        EXPECT(0xa31a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa318));
        EXPECT(0xfd, gbc.readMem(0xa319));
        // CB FD 0385
        gbc.setState(0x904e, 0x2a48, 0xa700, 0x41a8, 0x9433, 0x4847, 0x1, 0x0);
        gbc.writeMem(0x904e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x2a48, gbc.sp());
        EXPECT(0x9050, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x904e));
        EXPECT(0xfd, gbc.readMem(0x904f));
        // CB FD 0386
        gbc.setState(0x1043, 0x52d5, 0xbf20, 0x2548, 0x5edc, 0x9e55, 0x0, 0x0);
        gbc.writeMem(0x1043, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x52d5, gbc.sp());
        EXPECT(0x1045, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0387
        gbc.setState(0xebb1, 0x1f77, 0xd970, 0x233e, 0x744e, 0xb1ec, 0x0, 0x0);
        gbc.writeMem(0xebb1, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0x1f77, gbc.sp());
        EXPECT(0xebb3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xebb1));
        EXPECT(0xfd, gbc.readMem(0xebb2));
        // CB FD 0388
        gbc.setState(0x9897, 0x1d03, 0x9e70, 0xd18, 0xf14c, 0xda8a, 0x1, 0x1);
        gbc.writeMem(0x9897, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x1d03, gbc.sp());
        EXPECT(0x9899, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9897));
        EXPECT(0xfd, gbc.readMem(0x9898));
        // CB FD 0389
        gbc.setState(0x9e73, 0xa75e, 0xccf0, 0x3ff6, 0x13e0, 0xe75, 0x1, 0x1);
        gbc.writeMem(0x9e73, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0xa75e, gbc.sp());
        EXPECT(0x9e75, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9e73));
        EXPECT(0xfd, gbc.readMem(0x9e74));
        // CB FD 038A
        gbc.setState(0x6783, 0x7ff9, 0xf90, 0x3a5f, 0xb3d0, 0x4a06, 0x0, 0x0);
        gbc.writeMem(0x6783, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x7ff9, gbc.sp());
        EXPECT(0x6785, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 038B
        gbc.setState(0x5f9, 0x6311, 0x1520, 0x2831, 0xf8ce, 0xe5c5, 0x0, 0x0);
        gbc.writeMem(0x5f9, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x6311, gbc.sp());
        EXPECT(0x5fb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 038C
        gbc.setState(0x790b, 0x98b9, 0x32b0, 0xc216, 0x2ec1, 0x931b, 0x1, 0x0);
        gbc.writeMem(0x790b, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x98b9, gbc.sp());
        EXPECT(0x790d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 038D
        gbc.setState(0x50a2, 0x3892, 0xe810, 0x3a64, 0x2c88, 0xc6f2, 0x1, 0x0);
        gbc.writeMem(0x50a2, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x3892, gbc.sp());
        EXPECT(0x50a4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 038E
        gbc.setState(0xa194, 0x60f6, 0x9a70, 0x4718, 0x3403, 0x4c7a, 0x0, 0x1);
        gbc.writeMem(0xa194, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0x60f6, gbc.sp());
        EXPECT(0xa196, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa194));
        EXPECT(0xfd, gbc.readMem(0xa195));
        // CB FD 038F
        gbc.setState(0xa4c1, 0x6437, 0x10b0, 0x96b0, 0x4960, 0x6443, 0x0, 0x0);
        gbc.writeMem(0xa4c1, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x6437, gbc.sp());
        EXPECT(0xa4c3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa4c1));
        EXPECT(0xfd, gbc.readMem(0xa4c2));
        // CB FD 0390
        gbc.setState(0x881c, 0xe471, 0x8040, 0xcdd9, 0x15f2, 0x5e30, 0x0, 0x0);
        gbc.writeMem(0x881c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xe471, gbc.sp());
        EXPECT(0x881e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x881c));
        EXPECT(0xfd, gbc.readMem(0x881d));
        // CB FD 0392
        gbc.setState(0x7c9, 0xe570, 0x4c60, 0xbabf, 0xdda0, 0x2509, 0x0, 0x1);
        gbc.writeMem(0x7c9, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xe570, gbc.sp());
        EXPECT(0x7cb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 0393
        gbc.setState(0x86d6, 0x5ab4, 0xcfb0, 0x3191, 0x5373, 0x299e, 0x1, 0x0);
        gbc.writeMem(0x86d6, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x5ab4, gbc.sp());
        EXPECT(0x86d8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x86d6));
        EXPECT(0xfd, gbc.readMem(0x86d7));
        // CB FD 0394
        gbc.setState(0xcf9d, 0x1de3, 0x1640, 0x3556, 0x9a2e, 0x136e, 0x0, 0x1);
        gbc.writeMem(0xcf9d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x1de3, gbc.sp());
        EXPECT(0xcf9f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf9d));
        EXPECT(0xfd, gbc.readMem(0xcf9e));
        // CB FD 0395
        gbc.setState(0x884a, 0xa267, 0xe320, 0x77dc, 0x4364, 0x35ef, 0x1, 0x1);
        gbc.writeMem(0x884a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xa267, gbc.sp());
        EXPECT(0x884c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x884a));
        EXPECT(0xfd, gbc.readMem(0x884b));
        // CB FD 0396
        gbc.setState(0x7a16, 0xedae, 0xab90, 0xc088, 0x6b5, 0xe149, 0x1, 0x0);
        gbc.writeMem(0x7a16, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0xedae, gbc.sp());
        EXPECT(0x7a18, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 0398
        gbc.setState(0xbdad, 0x7842, 0x6140, 0x1522, 0xe681, 0x18da, 0x1, 0x0);
        gbc.writeMem(0xbdad, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x7842, gbc.sp());
        EXPECT(0xbdaf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbdad));
        EXPECT(0xfd, gbc.readMem(0xbdae));
        // CB FD 0399
        gbc.setState(0x70ad, 0xca79, 0xb010, 0x5874, 0xaafd, 0x1c8, 0x0, 0x1);
        gbc.writeMem(0x70ad, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0xca79, gbc.sp());
        EXPECT(0x70af, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 039B
        gbc.setState(0x77b5, 0x76d1, 0x6480, 0x286, 0xb43, 0xb414, 0x1, 0x0);
        gbc.writeMem(0x77b5, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x76d1, gbc.sp());
        EXPECT(0x77b7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 039C
        gbc.setState(0xdc91, 0x3306, 0x1b00, 0x96a9, 0xe8f8, 0x9913, 0x0, 0x0);
        gbc.writeMem(0xdc91, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x3306, gbc.sp());
        EXPECT(0xdc93, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc91));
        EXPECT(0xfd, gbc.readMem(0xdc92));
        // CB FD 039D
        gbc.setState(0x7a27, 0xf31, 0x3b0, 0x8abd, 0x51d2, 0xe13, 0x1, 0x1);
        gbc.writeMem(0x7a27, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0xf31, gbc.sp());
        EXPECT(0x7a29, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 039E
        gbc.setState(0x856a, 0xd6f1, 0x55f0, 0xfc07, 0x3036, 0xa56a, 0x0, 0x0);
        gbc.writeMem(0x856a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0xd6f1, gbc.sp());
        EXPECT(0x856c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x856a));
        EXPECT(0xfd, gbc.readMem(0x856b));
        // CB FD 039F
        gbc.setState(0xc54, 0xc6c6, 0x92d0, 0x8bde, 0x3c7d, 0x99, 0x0, 0x1);
        gbc.writeMem(0xc54, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0xc6c6, gbc.sp());
        EXPECT(0xc56, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 03A0
        gbc.setState(0x548f, 0x2eaf, 0x16d0, 0x2f3f, 0x371, 0x5b3e, 0x0, 0x1);
        gbc.writeMem(0x548f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x2eaf, gbc.sp());
        EXPECT(0x5491, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 03A1
        gbc.setState(0x5228, 0xe213, 0x1950, 0xe33a, 0x9147, 0x8842, 0x1, 0x0);
        gbc.writeMem(0x5228, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0xe213, gbc.sp());
        EXPECT(0x522a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 03A2
        gbc.setState(0x58a4, 0x752f, 0x540, 0x69b1, 0x2401, 0x6db8, 0x1, 0x0);
        gbc.writeMem(0x58a4, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x752f, gbc.sp());
        EXPECT(0x58a6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 03A3
        gbc.setState(0x158c, 0xfdf8, 0xc60, 0xb256, 0x7239, 0x95bf, 0x1, 0x0);
        gbc.writeMem(0x158c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0xfdf8, gbc.sp());
        EXPECT(0x158e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 03A4
        gbc.setState(0xb9ce, 0xe44f, 0x1e00, 0x9c18, 0xcdd3, 0xcee8, 0x1, 0x1);
        gbc.writeMem(0xb9ce, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0xe44f, gbc.sp());
        EXPECT(0xb9d0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb9ce));
        EXPECT(0xfd, gbc.readMem(0xb9cf));
        // CB FD 03A5
        gbc.setState(0x3988, 0xac89, 0x5750, 0x2133, 0x1c13, 0x5479, 0x0, 0x1);
        gbc.writeMem(0x3988, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0xac89, gbc.sp());
        EXPECT(0x398a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 03A6
        gbc.setState(0x1785, 0x2102, 0x2460, 0xbda7, 0x5f5b, 0xbefa, 0x0, 0x0);
        gbc.writeMem(0x1785, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0x2102, gbc.sp());
        EXPECT(0x1787, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 03A7
        gbc.setState(0xb64a, 0x38bd, 0xa610, 0x8ba2, 0x8b48, 0x969b, 0x1, 0x0);
        gbc.writeMem(0xb64a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x38bd, gbc.sp());
        EXPECT(0xb64c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb64a));
        EXPECT(0xfd, gbc.readMem(0xb64b));
        // CB FD 03A8
        gbc.setState(0x97a9, 0x4ef5, 0xacd0, 0xcd34, 0x9d46, 0xac6b, 0x0, 0x1);
        gbc.writeMem(0x97a9, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x4ef5, gbc.sp());
        EXPECT(0x97ab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x97a9));
        EXPECT(0xfd, gbc.readMem(0x97aa));
        // CB FD 03A9
        gbc.setState(0x60b4, 0x7742, 0xf180, 0x7c38, 0xcb32, 0xf2c5, 0x1, 0x0);
        gbc.writeMem(0x60b4, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x7742, gbc.sp());
        EXPECT(0x60b6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 03AA
        gbc.setState(0xaa53, 0x8ced, 0x76c0, 0x7f17, 0xbcec, 0x875c, 0x1, 0x0);
        gbc.writeMem(0xaa53, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x8ced, gbc.sp());
        EXPECT(0xaa55, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa53));
        EXPECT(0xfd, gbc.readMem(0xaa54));
        // CB FD 03AB
        gbc.setState(0x328a, 0x6742, 0xa7e0, 0x26ac, 0x1b67, 0xef12, 0x1, 0x0);
        gbc.writeMem(0x328a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x6742, gbc.sp());
        EXPECT(0x328c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 03AC
        gbc.setState(0x2c94, 0xb121, 0xc670, 0xffa9, 0x739f, 0xe15c, 0x0, 0x1);
        gbc.writeMem(0x2c94, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0xb121, gbc.sp());
        EXPECT(0x2c96, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 03AD
        gbc.setState(0x89b5, 0x477e, 0x7270, 0xbe1, 0x4940, 0x1756, 0x1, 0x0);
        gbc.writeMem(0x89b5, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x477e, gbc.sp());
        EXPECT(0x89b7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x89b5));
        EXPECT(0xfd, gbc.readMem(0x89b6));
        // CB FD 03AE
        gbc.setState(0x6680, 0xcd49, 0x2440, 0x3f2c, 0x85af, 0xde09, 0x0, 0x0);
        gbc.writeMem(0x6680, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xcd49, gbc.sp());
        EXPECT(0x6682, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 03AF
        gbc.setState(0x6205, 0x1518, 0x7600, 0x5f2c, 0x2bff, 0xc5d, 0x0, 0x0);
        gbc.writeMem(0x6205, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x1518, gbc.sp());
        EXPECT(0x6207, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 03B0
        gbc.setState(0x3d30, 0x24f5, 0x1e00, 0x2c15, 0x6baf, 0xbeb0, 0x1, 0x1);
        gbc.writeMem(0x3d30, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x24f5, gbc.sp());
        EXPECT(0x3d32, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 03B1
        gbc.setState(0x6c2b, 0x6441, 0xc2e0, 0x6887, 0xdabb, 0x8c5f, 0x0, 0x0);
        gbc.writeMem(0x6c2b, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x6441, gbc.sp());
        EXPECT(0x6c2d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 03B2
        gbc.setState(0x4fc1, 0xd08a, 0x6e00, 0x25f7, 0x5554, 0xd074, 0x0, 0x0);
        gbc.writeMem(0x4fc1, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xd08a, gbc.sp());
        EXPECT(0x4fc3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 03B3
        gbc.setState(0x71d1, 0xf4ea, 0x4cc0, 0x234a, 0x716a, 0xb0e7, 0x0, 0x1);
        gbc.writeMem(0x71d1, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0xf4ea, gbc.sp());
        EXPECT(0x71d3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 03B4
        gbc.setState(0xe970, 0x4b1e, 0x8230, 0x54c3, 0x2eca, 0xfbec, 0x0, 0x1);
        gbc.writeMem(0xe970, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0x4b1e, gbc.sp());
        EXPECT(0xe972, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe970));
        EXPECT(0xfd, gbc.readMem(0xe971));
        // CB FD 03B5
        gbc.setState(0xe7f, 0x7054, 0x4900, 0x2dfb, 0x11ce, 0x4fe8, 0x1, 0x0);
        gbc.writeMem(0xe7f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x7054, gbc.sp());
        EXPECT(0xe81, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 03B6
        gbc.setState(0x8fce, 0xc097, 0x2340, 0xac76, 0x32d3, 0xfa70, 0x0, 0x1);
        gbc.writeMem(0x8fce, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0xc097, gbc.sp());
        EXPECT(0x8fd0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8fce));
        EXPECT(0xfd, gbc.readMem(0x8fcf));
        // CB FD 03B7
        gbc.setState(0x1ea5, 0xc0ac, 0xa830, 0xe6cb, 0xba7a, 0xa380, 0x0, 0x0);
        gbc.writeMem(0x1ea5, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0xc0ac, gbc.sp());
        EXPECT(0x1ea7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 03B8
        gbc.setState(0x1f99, 0x31, 0x300, 0xa167, 0x341e, 0xc5cc, 0x1, 0x1);
        gbc.writeMem(0x1f99, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x31, gbc.sp());
        EXPECT(0x1f9b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 03B9
        gbc.setState(0x9eb7, 0x6bb1, 0x1a80, 0xc5d, 0x9f46, 0xff33, 0x1, 0x0);
        gbc.writeMem(0x9eb7, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x6bb1, gbc.sp());
        EXPECT(0x9eb9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9eb7));
        EXPECT(0xfd, gbc.readMem(0x9eb8));
        // CB FD 03BA
        gbc.setState(0x60b1, 0x71ef, 0x8240, 0x1ea, 0xa16f, 0x6468, 0x1, 0x0);
        gbc.writeMem(0x60b1, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x71ef, gbc.sp());
        EXPECT(0x60b3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 03BB
        gbc.setState(0xb218, 0xa08, 0xc300, 0x606, 0x3542, 0xd85d, 0x1, 0x0);
        gbc.writeMem(0xb218, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0xa08, gbc.sp());
        EXPECT(0xb21a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb218));
        EXPECT(0xfd, gbc.readMem(0xb219));
        // CB FD 03BC
        gbc.setState(0x2f0e, 0xdb8b, 0xf390, 0xb2e3, 0xc67, 0x7cc1, 0x0, 0x1);
        gbc.writeMem(0x2f0e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xdb8b, gbc.sp());
        EXPECT(0x2f10, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 03BD
        gbc.setState(0x195f, 0xbee3, 0xb7e0, 0x20e, 0xccfe, 0xeae8, 0x1, 0x0);
        gbc.writeMem(0x195f, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0xbee3, gbc.sp());
        EXPECT(0x1961, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 03BE
        gbc.setState(0x419a, 0xb64c, 0x5f70, 0x48c9, 0xd2bc, 0x4ceb, 0x1, 0x0);
        gbc.writeMem(0x419a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0xb64c, gbc.sp());
        EXPECT(0x419c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 03BF
        gbc.setState(0xc400, 0x1562, 0x11e0, 0x69db, 0xaee6, 0x3d3c, 0x1, 0x0);
        gbc.writeMem(0xc400, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x1562, gbc.sp());
        EXPECT(0xc402, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc400));
        EXPECT(0xfd, gbc.readMem(0xc401));
        // CB FD 03C0
        gbc.setState(0x87c3, 0xec0b, 0xafd0, 0x22fb, 0xae6f, 0xf38a, 0x1, 0x0);
        gbc.writeMem(0x87c3, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0xec0b, gbc.sp());
        EXPECT(0x87c5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x87c3));
        EXPECT(0xfd, gbc.readMem(0x87c4));
        // CB FD 03C1
        gbc.setState(0x64fd, 0xb614, 0xbc40, 0x40d3, 0xff5a, 0xab2c, 0x1, 0x1);
        gbc.writeMem(0x64fd, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xb614, gbc.sp());
        EXPECT(0x64ff, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 03C2
        gbc.setState(0x5436, 0x851, 0xc810, 0xf231, 0xe1f6, 0x88ee, 0x0, 0x1);
        gbc.writeMem(0x5436, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x851, gbc.sp());
        EXPECT(0x5438, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 03C3
        gbc.setState(0xd61e, 0x7a1f, 0x1dc0, 0x4393, 0x66f0, 0x8c69, 0x1, 0x1);
        gbc.writeMem(0xd61e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x7a1f, gbc.sp());
        EXPECT(0xd620, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd61e));
        EXPECT(0xfd, gbc.readMem(0xd61f));
        // CB FD 03C4
        gbc.setState(0x3c57, 0x96ea, 0xc2e0, 0xeb8a, 0xa219, 0xf378, 0x0, 0x1);
        gbc.writeMem(0x3c57, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x96ea, gbc.sp());
        EXPECT(0x3c59, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 03C5
        gbc.setState(0x4cb4, 0x5c42, 0x55f0, 0xa09e, 0xafd5, 0xe128, 0x1, 0x1);
        gbc.writeMem(0x4cb4, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x5c42, gbc.sp());
        EXPECT(0x4cb6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 03C6
        gbc.setState(0xccf9, 0x138b, 0x6260, 0x68f2, 0x6ac2, 0x1be6, 0x1, 0x0);
        gbc.writeMem(0xccf9, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x138b, gbc.sp());
        EXPECT(0xccfb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xccf9));
        EXPECT(0xfd, gbc.readMem(0xccfa));
        // CB FD 03C7
        gbc.setState(0x34df, 0xda0c, 0xf730, 0xd97c, 0xdc0f, 0xd8d2, 0x0, 0x0);
        gbc.writeMem(0x34df, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0xda0c, gbc.sp());
        EXPECT(0x34e1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 03C9
        gbc.setState(0xb60b, 0xebe2, 0x3be0, 0x42c5, 0x7700, 0xcdd7, 0x0, 0x0);
        gbc.writeMem(0xb60b, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xebe2, gbc.sp());
        EXPECT(0xb60d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb60b));
        EXPECT(0xfd, gbc.readMem(0xb60c));
        // CB FD 03CA
        gbc.setState(0xaaa4, 0x6123, 0x5fc0, 0x590d, 0x7853, 0xa35a, 0x1, 0x0);
        gbc.writeMem(0xaaa4, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x6123, gbc.sp());
        EXPECT(0xaaa6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaaa4));
        EXPECT(0xfd, gbc.readMem(0xaaa5));
        // CB FD 03CB
        gbc.setState(0x374a, 0xa9e5, 0xe290, 0xd970, 0x3f02, 0x84c0, 0x0, 0x0);
        gbc.writeMem(0x374a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0xa9e5, gbc.sp());
        EXPECT(0x374c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 03CC
        gbc.setState(0xe274, 0xb683, 0x7ec0, 0xad2f, 0xa7d4, 0x258d, 0x0, 0x0);
        gbc.writeMem(0xe274, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xb683, gbc.sp());
        EXPECT(0xe276, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe274));
        EXPECT(0xfd, gbc.readMem(0xe275));
        // CB FD 03CD
        gbc.setState(0xcb87, 0xa8cd, 0x63f0, 0xfc1d, 0xe04a, 0x81d7, 0x0, 0x0);
        gbc.writeMem(0xcb87, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xa8cd, gbc.sp());
        EXPECT(0xcb89, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcb87));
        EXPECT(0xfd, gbc.readMem(0xcb88));
        // CB FD 03CF
        gbc.setState(0x2c19, 0x75d6, 0x6d0, 0xed69, 0x179d, 0x2d07, 0x0, 0x0);
        gbc.writeMem(0x2c19, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x75d6, gbc.sp());
        EXPECT(0x2c1b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 03D0
        gbc.setState(0x136e, 0xf92, 0x35c0, 0x232, 0xed46, 0xa9f2, 0x1, 0x1);
        gbc.writeMem(0x136e, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0xf92, gbc.sp());
        EXPECT(0x1370, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 03D1
        gbc.setState(0x1eec, 0xe17b, 0x25d0, 0xefc8, 0x3ba2, 0x86fd, 0x1, 0x1);
        gbc.writeMem(0x1eec, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0xe17b, gbc.sp());
        EXPECT(0x1eee, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 03D2
        gbc.setState(0x8122, 0xdc02, 0x4f30, 0x402f, 0x286f, 0xfad, 0x0, 0x1);
        gbc.writeMem(0x8122, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xdc02, gbc.sp());
        EXPECT(0x8124, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8122));
        EXPECT(0xfd, gbc.readMem(0x8123));
        // CB FD 03D3
        gbc.setState(0x3672, 0xf0cd, 0x180, 0xca0d, 0x9392, 0xe917, 0x1, 0x1);
        gbc.writeMem(0x3672, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xf0cd, gbc.sp());
        EXPECT(0x3674, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 03D4
        gbc.setState(0xce6a, 0x7a55, 0x8c60, 0xb8e, 0xac0a, 0x311, 0x1, 0x0);
        gbc.writeMem(0xce6a, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x7a55, gbc.sp());
        EXPECT(0xce6c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xce6a));
        EXPECT(0xfd, gbc.readMem(0xce6b));
        // CB FD 03D5
        gbc.setState(0xae18, 0xc71f, 0xeef0, 0x3b54, 0x1ae4, 0xe9c2, 0x0, 0x0);
        gbc.writeMem(0xae18, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0xc71f, gbc.sp());
        EXPECT(0xae1a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xae18));
        EXPECT(0xfd, gbc.readMem(0xae19));
        // CB FD 03D6
        gbc.setState(0x281d, 0xabe1, 0xf330, 0xd907, 0xd80b, 0x54bf, 0x1, 0x1);
        gbc.writeMem(0x281d, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0xabe1, gbc.sp());
        EXPECT(0x281f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 03D7
        gbc.setState(0x241c, 0xaa39, 0xe0, 0xf8eb, 0xfb6a, 0x2aea, 0x1, 0x0);
        gbc.writeMem(0x241c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0xaa39, gbc.sp());
        EXPECT(0x241e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 03D8
        gbc.setState(0x9ca6, 0x7cfd, 0xb420, 0x854e, 0xa1db, 0xab5d, 0x1, 0x1);
        gbc.writeMem(0x9ca6, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x7cfd, gbc.sp());
        EXPECT(0x9ca8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9ca6));
        EXPECT(0xfd, gbc.readMem(0x9ca7));
        // CB FD 03D9
        gbc.setState(0x5f49, 0xc26e, 0x8580, 0x4849, 0xc3b0, 0xfd82, 0x1, 0x1);
        gbc.writeMem(0x5f49, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xc26e, gbc.sp());
        EXPECT(0x5f4b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 03DA
        gbc.setState(0x66a5, 0x3b04, 0x96b0, 0xca47, 0x1ab4, 0xd769, 0x1, 0x1);
        gbc.writeMem(0x66a5, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x3b04, gbc.sp());
        EXPECT(0x66a7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 03DB
        gbc.setState(0x8f24, 0x71fa, 0x6780, 0xf26c, 0x25e5, 0xb0b5, 0x1, 0x0);
        gbc.writeMem(0x8f24, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x71fa, gbc.sp());
        EXPECT(0x8f26, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f24));
        EXPECT(0xfd, gbc.readMem(0x8f25));
        // CB FD 03DC
        gbc.setState(0xd75c, 0xf32a, 0x1520, 0x61be, 0xc8dd, 0xf378, 0x1, 0x0);
        gbc.writeMem(0xd75c, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0xf32a, gbc.sp());
        EXPECT(0xd75e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd75c));
        EXPECT(0xfd, gbc.readMem(0xd75d));
        // CB FD 03DD
        gbc.setState(0x6ef9, 0xad80, 0x5790, 0xc4ca, 0x14fb, 0x1722, 0x0, 0x1);
        gbc.writeMem(0x6ef9, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0xad80, gbc.sp());
        EXPECT(0x6efb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 03DE
        gbc.setState(0x2b07, 0x615f, 0xb890, 0x5ecb, 0x4779, 0x5c89, 0x0, 0x1);
        gbc.writeMem(0x2b07, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x615f, gbc.sp());
        EXPECT(0x2b09, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 03DF
        gbc.setState(0x2caf, 0xb7c5, 0xcb70, 0xed9, 0xe3ce, 0x2868, 0x0, 0x1);
        gbc.writeMem(0x2caf, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0xb7c5, gbc.sp());
        EXPECT(0x2cb1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 03E0
        gbc.setState(0x77d5, 0xd3cc, 0xb6b0, 0x88a1, 0xdc81, 0x7b2d, 0x0, 0x1);
        gbc.writeMem(0x77d5, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xd3cc, gbc.sp());
        EXPECT(0x77d7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 03E1
        gbc.setState(0xd037, 0x158, 0x3960, 0x545b, 0x93ca, 0x7edb, 0x1, 0x0);
        gbc.writeMem(0xd037, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x158, gbc.sp());
        EXPECT(0xd039, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd037));
        EXPECT(0xfd, gbc.readMem(0xd038));
        // CB FD 03E2
        gbc.setState(0x4708, 0xf75c, 0x24b0, 0x1a36, 0x274f, 0x1fbf, 0x0, 0x0);
        gbc.writeMem(0x4708, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0xf75c, gbc.sp());
        EXPECT(0x470a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 03E3
        gbc.setState(0x6646, 0x2366, 0x99e0, 0xbc4b, 0xc0b9, 0xd9b1, 0x1, 0x1);
        gbc.writeMem(0x6646, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x2366, gbc.sp());
        EXPECT(0x6648, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 03E4
        gbc.setState(0x2970, 0x2dc4, 0xe950, 0x1f21, 0xd121, 0xe544, 0x0, 0x0);
        gbc.writeMem(0x2970, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x2dc4, gbc.sp());
        EXPECT(0x2972, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 03E5
        gbc.setState(0x5644, 0xe526, 0x4a70, 0xeeee, 0x2089, 0x10a3, 0x1, 0x1);
        gbc.writeMem(0x5644, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0xe526, gbc.sp());
        EXPECT(0x5646, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB FD 03E6
        gbc.setState(0x5748, 0x9cdb, 0xe9a0, 0xbfae, 0x44ad, 0x58d9, 0x0, 0x0);
        gbc.writeMem(0x5748, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x9cdb, gbc.sp());
        EXPECT(0x574a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB FD 03E7
        gbc.setState(0xecae, 0x6f02, 0xb590, 0x8758, 0xb1a2, 0x3fae, 0x1, 0x0);
        gbc.writeMem(0xecae, { 0xcb, 0xfd });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x6f02, gbc.sp());
        EXPECT(0xecb0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xecae));
        EXPECT(0xfd, gbc.readMem(0xecaf));
    }
