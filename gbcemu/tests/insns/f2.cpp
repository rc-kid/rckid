#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_f2)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_f2) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // F2 0000
        gbc.setState(0x70d, 0x28f2, 0x58c0, 0x3f7, 0x77af, 0xb34c, 0x1, 0x0);
        gbc.writeMem(0x70d, { 0xf2 });
        gbc.writeMem(0xfff7, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x28f2);
        EXPECT(gbc.pc(), 0x70e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfff7), 0x2a);
        // F2 0001
        gbc.setState(0xa28e, 0xb393, 0xbea0, 0x63ec, 0x7c03, 0xa4e1, 0x1, 0x1);
        gbc.writeMem(0xa28e, { 0xf2 });
        gbc.writeMem(0xffec, { 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xb393);
        EXPECT(gbc.pc(), 0xa28f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa28e), 0xf2);
        EXPECT(gbc.readMem(0xffec), 0x9d);
        // F2 0002
        gbc.setState(0x656e, 0x15f9, 0x7d60, 0x2844, 0x5ea, 0xcc4e, 0x1, 0x1);
        gbc.writeMem(0x656e, { 0xf2 });
        gbc.writeMem(0xff44, { 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x15f9);
        EXPECT(gbc.pc(), 0x656f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff44), 0x93);
        // F2 0003
        gbc.setState(0x3bfb, 0xe22e, 0xd2a0, 0x1ac4, 0x9bef, 0x6e6a, 0x1, 0x0);
        gbc.writeMem(0x3bfb, { 0xf2 });
        gbc.writeMem(0xffc4, { 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xe22e);
        EXPECT(gbc.pc(), 0x3bfc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffc4), 0x9d);
        // F2 0004
        gbc.setState(0xdac4, 0x6492, 0xc480, 0xb0aa, 0x379b, 0xbe78, 0x0, 0x0);
        gbc.writeMem(0xdac4, { 0xf2 });
        gbc.writeMem(0xffaa, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x6492);
        EXPECT(gbc.pc(), 0xdac5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdac4), 0xf2);
        EXPECT(gbc.readMem(0xffaa), 0x24);
        // F2 0005
        gbc.setState(0x8fdf, 0x75f6, 0xb2e0, 0xc09b, 0xfdc0, 0x1625, 0x0, 0x0);
        gbc.writeMem(0x8fdf, { 0xf2 });
        gbc.writeMem(0xff9b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x75f6);
        EXPECT(gbc.pc(), 0x8fe0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fdf), 0xf2);
        EXPECT(gbc.readMem(0xff9b), 0xfb);
        // F2 0006
        gbc.setState(0x4f45, 0xf6f7, 0x1290, 0x9a9b, 0xa435, 0xd85c, 0x1, 0x1);
        gbc.writeMem(0x4f45, { 0xf2 });
        gbc.writeMem(0xff9b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xf6f7);
        EXPECT(gbc.pc(), 0x4f46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff9b), 0xfb);
        // F2 0007
        gbc.setState(0x407a, 0x9c7b, 0xfa0, 0x385f, 0x1e12, 0x28ea, 0x1, 0x1);
        gbc.writeMem(0x407a, { 0xf2 });
        gbc.writeMem(0xff5f, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x9c7b);
        EXPECT(gbc.pc(), 0x407b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff5f), 0x11);
        // F2 0008
        gbc.setState(0xeff0, 0xdd93, 0x10e0, 0x6c46, 0xfd1f, 0xb5a2, 0x0, 0x0);
        gbc.writeMem(0xeff0, { 0xf2 });
        gbc.writeMem(0xff46, { 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xdd93);
        EXPECT(gbc.pc(), 0xeff1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeff0), 0xf2);
        EXPECT(gbc.readMem(0xff46), 0xbc);
        // F2 0009
        gbc.setState(0x9ba7, 0x1cab, 0x3800, 0x2b22, 0x14cf, 0xfe0, 0x1, 0x1);
        gbc.writeMem(0x9ba7, { 0xf2 });
        gbc.writeMem(0xff22, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x1cab);
        EXPECT(gbc.pc(), 0x9ba8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ba7), 0xf2);
        EXPECT(gbc.readMem(0xff22), 0x77);
        // F2 000A
        gbc.setState(0xcc99, 0x290c, 0xfed0, 0x3805, 0x73d6, 0xb0ef, 0x1, 0x0);
        gbc.writeMem(0xcc99, { 0xf2 });
        gbc.writeMem(0xff05, { 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x290c);
        EXPECT(gbc.pc(), 0xcc9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc99), 0xf2);
        EXPECT(gbc.readMem(0xff05), 0x83);
        // F2 000B
        gbc.setState(0x86d3, 0x7f36, 0x89b0, 0x6d8e, 0x2280, 0xa39, 0x1, 0x0);
        gbc.writeMem(0x86d3, { 0xf2 });
        gbc.writeMem(0xff8e, { 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x7f36);
        EXPECT(gbc.pc(), 0x86d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86d3), 0xf2);
        EXPECT(gbc.readMem(0xff8e), 0xe3);
        // F2 000C
        gbc.setState(0xe225, 0xb99c, 0x65f0, 0x5898, 0x2875, 0x4c68, 0x1, 0x1);
        gbc.writeMem(0xe225, { 0xf2 });
        gbc.writeMem(0xff98, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xb99c);
        EXPECT(gbc.pc(), 0xe226);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe225), 0xf2);
        EXPECT(gbc.readMem(0xff98), 0x95);
        // F2 000D
        gbc.setState(0x153b, 0x79c4, 0xc200, 0x5e25, 0xf497, 0x5e2e, 0x0, 0x1);
        gbc.writeMem(0x153b, { 0xf2 });
        gbc.writeMem(0xff25, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x79c4);
        EXPECT(gbc.pc(), 0x153c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff25), 0xa9);
        // F2 000E
        gbc.setState(0x181a, 0x5658, 0x7110, 0xe646, 0x3e54, 0x4407, 0x1, 0x1);
        gbc.writeMem(0x181a, { 0xf2 });
        gbc.writeMem(0xff46, { 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x5658);
        EXPECT(gbc.pc(), 0x181b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff46), 0xbc);
        // F2 000F
        gbc.setState(0x4924, 0x6635, 0xc720, 0xa674, 0x3f4, 0x3614, 0x0, 0x1);
        gbc.writeMem(0x4924, { 0xf2 });
        gbc.writeMem(0xff74, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x6635);
        EXPECT(gbc.pc(), 0x4925);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff74), 0x76);
        // F2 0010
        gbc.setState(0x180e, 0xfe04, 0xb350, 0xb549, 0x5b8a, 0x669f, 0x0, 0x1);
        gbc.writeMem(0x180e, { 0xf2 });
        gbc.writeMem(0xff49, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xfe04);
        EXPECT(gbc.pc(), 0x180f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff49), 0xf0);
        // F2 0011
        gbc.setState(0x7b9f, 0x2d7d, 0x9710, 0x6531, 0x752c, 0x936, 0x1, 0x1);
        gbc.writeMem(0x7b9f, { 0xf2 });
        gbc.writeMem(0xff31, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x2d7d);
        EXPECT(gbc.pc(), 0x7ba0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff31), 0x40);
        // F2 0012
        gbc.setState(0xd5f4, 0x5bda, 0x9820, 0x8c54, 0xc4cb, 0xadc5, 0x1, 0x0);
        gbc.writeMem(0xd5f4, { 0xf2 });
        gbc.writeMem(0xff54, { 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x5bda);
        EXPECT(gbc.pc(), 0xd5f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5f4), 0xf2);
        EXPECT(gbc.readMem(0xff54), 0xa1);
        // F2 0013
        gbc.setState(0x8ee0, 0xefef, 0xb220, 0x5aee, 0x322, 0xb0ed, 0x1, 0x0);
        gbc.writeMem(0x8ee0, { 0xf2 });
        gbc.writeMem(0xffee, { 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xefef);
        EXPECT(gbc.pc(), 0x8ee1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ee0), 0xf2);
        EXPECT(gbc.readMem(0xffee), 0xca);
        // F2 0014
        gbc.setState(0xde3f, 0xbb4d, 0xa250, 0xe485, 0x2f0, 0xb0f3, 0x1, 0x0);
        gbc.writeMem(0xde3f, { 0xf2 });
        gbc.writeMem(0xff85, { 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xbb4d);
        EXPECT(gbc.pc(), 0xde40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde3f), 0xf2);
        EXPECT(gbc.readMem(0xff85), 0x9e);
        // F2 0015
        gbc.setState(0xeff2, 0x128, 0xab80, 0x3ccb, 0xf358, 0xb33, 0x0, 0x1);
        gbc.writeMem(0xeff2, { 0xf2 });
        gbc.writeMem(0xffcb, { 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x128);
        EXPECT(gbc.pc(), 0xeff3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeff2), 0xf2);
        EXPECT(gbc.readMem(0xffcb), 0x64);
        // F2 0016
        gbc.setState(0x21c1, 0x1a3e, 0xa6d0, 0xcf82, 0x6fe, 0x3a36, 0x1, 0x0);
        gbc.writeMem(0x21c1, { 0xf2 });
        gbc.writeMem(0xff82, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x1a3e);
        EXPECT(gbc.pc(), 0x21c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff82), 0x5e);
        // F2 0019
        gbc.setState(0xbea0, 0x5516, 0x2d10, 0x6111, 0x6d64, 0xb001, 0x1, 0x1);
        gbc.writeMem(0xbea0, { 0xf2 });
        gbc.writeMem(0xff11, { 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x5516);
        EXPECT(gbc.pc(), 0xbea1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbea0), 0xf2);
        EXPECT(gbc.readMem(0xff11), 0x48);
        // F2 001A
        gbc.setState(0xda91, 0x18c5, 0x8ba0, 0x99a8, 0x20e7, 0xc060, 0x1, 0x0);
        gbc.writeMem(0xda91, { 0xf2 });
        gbc.writeMem(0xffa8, { 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x18c5);
        EXPECT(gbc.pc(), 0xda92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda91), 0xf2);
        EXPECT(gbc.readMem(0xffa8), 0x85);
        // F2 001C
        gbc.setState(0xed2, 0x3370, 0x3a00, 0x9e9f, 0x8d76, 0x884f, 0x1, 0x1);
        gbc.writeMem(0xed2, { 0xf2 });
        gbc.writeMem(0xff9f, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x3370);
        EXPECT(gbc.pc(), 0xed3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff9f), 0xe7);
        // F2 001E
        gbc.setState(0xf2c, 0x3866, 0x83c0, 0x241, 0x9504, 0x5112, 0x1, 0x1);
        gbc.writeMem(0xf2c, { 0xf2 });
        gbc.writeMem(0xff41, { 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x3866);
        EXPECT(gbc.pc(), 0xf2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff41), 0x4);
        // F2 001F
        gbc.setState(0x41d4, 0xfa21, 0xc390, 0x5b6d, 0x73b2, 0x2080, 0x1, 0x0);
        gbc.writeMem(0x41d4, { 0xf2 });
        gbc.writeMem(0xff6d, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xfa21);
        EXPECT(gbc.pc(), 0x41d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff6d), 0x95);
        // F2 0020
        gbc.setState(0x97a1, 0x70c, 0xa320, 0xa109, 0xa3cb, 0xfd6d, 0x0, 0x1);
        gbc.writeMem(0x97a1, { 0xf2 });
        gbc.writeMem(0xff09, { 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x70c);
        EXPECT(gbc.pc(), 0x97a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97a1), 0xf2);
        EXPECT(gbc.readMem(0xff09), 0x53);
        // F2 0021
        gbc.setState(0x6ce4, 0x77f7, 0xa680, 0xa742, 0x2734, 0xf56d, 0x0, 0x0);
        gbc.writeMem(0x6ce4, { 0xf2 });
        gbc.writeMem(0xff42, { 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x77f7);
        EXPECT(gbc.pc(), 0x6ce5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff42), 0x50);
        // F2 0022
        gbc.setState(0x6712, 0xbde5, 0x3b00, 0xa96c, 0x8303, 0x4b53, 0x1, 0x1);
        gbc.writeMem(0x6712, { 0xf2 });
        gbc.writeMem(0xff6c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xbde5);
        EXPECT(gbc.pc(), 0x6713);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff6c), 0xa8);
        // F2 0023
        gbc.setState(0x10ea, 0x967c, 0x4f50, 0x264b, 0x681e, 0x7580, 0x0, 0x1);
        gbc.writeMem(0x10ea, { 0xf2 });
        gbc.writeMem(0xff4b, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x967c);
        EXPECT(gbc.pc(), 0x10eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff4b), 0xdf);
        // F2 0025
        gbc.setState(0xf28, 0x5183, 0xec60, 0xf70b, 0x3a83, 0xa94f, 0x1, 0x0);
        gbc.writeMem(0xf28, { 0xf2 });
        gbc.writeMem(0xff0b, { 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x5183);
        EXPECT(gbc.pc(), 0xf29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff0b), 0xea);
        // F2 0026
        gbc.setState(0xc321, 0xa75, 0xfe00, 0x9864, 0x3ae6, 0x9916, 0x0, 0x1);
        gbc.writeMem(0xc321, { 0xf2 });
        gbc.writeMem(0xff64, { 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xa75);
        EXPECT(gbc.pc(), 0xc322);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc321), 0xf2);
        EXPECT(gbc.readMem(0xff64), 0x87);
        // F2 0028
        gbc.setState(0x2f24, 0xbcaa, 0xbe70, 0x82b, 0x3c12, 0xead5, 0x0, 0x0);
        gbc.writeMem(0x2f24, { 0xf2 });
        gbc.writeMem(0xff2b, { 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xbcaa);
        EXPECT(gbc.pc(), 0x2f25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff2b), 0xd4);
        // F2 0029
        gbc.setState(0xb0c1, 0x40ee, 0x3b00, 0xdad6, 0xf5a1, 0xff4f, 0x0, 0x0);
        gbc.writeMem(0xb0c1, { 0xf2 });
        gbc.writeMem(0xffd6, { 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x40ee);
        EXPECT(gbc.pc(), 0xb0c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0c1), 0xf2);
        EXPECT(gbc.readMem(0xffd6), 0xdc);
        // F2 002B
        gbc.setState(0xe655, 0x3d7, 0x87a0, 0x47ee, 0x72b9, 0xaee8, 0x0, 0x1);
        gbc.writeMem(0xe655, { 0xf2 });
        gbc.writeMem(0xffee, { 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x3d7);
        EXPECT(gbc.pc(), 0xe656);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe655), 0xf2);
        EXPECT(gbc.readMem(0xffee), 0xca);
        // F2 002C
        gbc.setState(0xa9a9, 0x32e2, 0x1c80, 0x4b2c, 0x947, 0x41fb, 0x1, 0x0);
        gbc.writeMem(0xa9a9, { 0xf2 });
        gbc.writeMem(0xff2c, { 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x32e2);
        EXPECT(gbc.pc(), 0xa9aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9a9), 0xf2);
        EXPECT(gbc.readMem(0xff2c), 0xe8);
        // F2 002D
        gbc.setState(0x1d4, 0xb7e5, 0xd7f0, 0x6aab, 0x5143, 0xc25d, 0x1, 0x1);
        gbc.writeMem(0x1d4, { 0xf2 });
        gbc.writeMem(0xffab, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xb7e5);
        EXPECT(gbc.pc(), 0x1d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffab), 0xe7);
        // F2 002E
        gbc.setState(0x869b, 0x33b8, 0x4400, 0x6f, 0x26e6, 0x63c8, 0x0, 0x1);
        gbc.writeMem(0x869b, { 0xf2 });
        gbc.writeMem(0xff6f, { 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x33b8);
        EXPECT(gbc.pc(), 0x869c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x869b), 0xf2);
        EXPECT(gbc.readMem(0xff6f), 0xc1);
        // F2 002F
        gbc.setState(0xbdbd, 0xafe, 0x44e0, 0xef73, 0x51a3, 0x9771, 0x0, 0x1);
        gbc.writeMem(0xbdbd, { 0xf2 });
        gbc.writeMem(0xff73, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xafe);
        EXPECT(gbc.pc(), 0xbdbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdbd), 0xf2);
        EXPECT(gbc.readMem(0xff73), 0x39);
        // F2 0031
        gbc.setState(0x7d8c, 0x47f8, 0xbfd0, 0x5cdd, 0xd8aa, 0xe189, 0x1, 0x0);
        gbc.writeMem(0x7d8c, { 0xf2 });
        gbc.writeMem(0xffdd, { 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x47f8);
        EXPECT(gbc.pc(), 0x7d8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffdd), 0xc4);
        // F2 0032
        gbc.setState(0x7443, 0x1c2f, 0xf170, 0x7af0, 0x695f, 0xcb8, 0x1, 0x0);
        gbc.writeMem(0x7443, { 0xf2 });
        gbc.writeMem(0xfff0, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x1c2f);
        EXPECT(gbc.pc(), 0x7444);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfff0), 0xc0);
        // F2 0033
        gbc.setState(0x7715, 0x38bb, 0xed50, 0xbbc5, 0x6071, 0x2400, 0x0, 0x0);
        gbc.writeMem(0x7715, { 0xf2 });
        gbc.writeMem(0xffc5, { 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x38bb);
        EXPECT(gbc.pc(), 0x7716);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffc5), 0xe1);
        // F2 0034
        gbc.setState(0x38e1, 0xc51b, 0xdc60, 0x4c5a, 0x846a, 0x6a6d, 0x0, 0x0);
        gbc.writeMem(0x38e1, { 0xf2 });
        gbc.writeMem(0xff5a, { 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xc51b);
        EXPECT(gbc.pc(), 0x38e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff5a), 0x6a);
        // F2 0035
        gbc.setState(0x3fc4, 0xaa9, 0x1bc0, 0x56b7, 0x6bc9, 0x9085, 0x0, 0x0);
        gbc.writeMem(0x3fc4, { 0xf2 });
        gbc.writeMem(0xffb7, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xaa9);
        EXPECT(gbc.pc(), 0x3fc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffb7), 0x66);
        // F2 0036
        gbc.setState(0x1dc7, 0x4055, 0xe890, 0x3a10, 0x171d, 0x17c8, 0x1, 0x1);
        gbc.writeMem(0x1dc7, { 0xf2 });
        gbc.writeMem(0xff10, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x4055);
        EXPECT(gbc.pc(), 0x1dc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff10), 0xb7);
        // F2 0037
        gbc.setState(0x6038, 0x96b5, 0xa4f0, 0x2e6b, 0x311b, 0x8393, 0x0, 0x0);
        gbc.writeMem(0x6038, { 0xf2 });
        gbc.writeMem(0xff6b, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x96b5);
        EXPECT(gbc.pc(), 0x6039);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff6b), 0x86);
        // F2 0039
        gbc.setState(0x486f, 0xc96b, 0xe850, 0x6af8, 0x6ec, 0x6f58, 0x1, 0x1);
        gbc.writeMem(0x486f, { 0xf2 });
        gbc.writeMem(0xfff8, { 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xc96b);
        EXPECT(gbc.pc(), 0x4870);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfff8), 0xf8);
        // F2 003A
        gbc.setState(0x9436, 0xc0c4, 0xda10, 0x8d52, 0xef3, 0x9d09, 0x0, 0x0);
        gbc.writeMem(0x9436, { 0xf2 });
        gbc.writeMem(0xff52, { 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xc0c4);
        EXPECT(gbc.pc(), 0x9437);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9436), 0xf2);
        EXPECT(gbc.readMem(0xff52), 0xa);
        // F2 003B
        gbc.setState(0xda34, 0x9e01, 0x880, 0x77f8, 0xe78a, 0x4c68, 0x0, 0x0);
        gbc.writeMem(0xda34, { 0xf2 });
        gbc.writeMem(0xfff8, { 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x9e01);
        EXPECT(gbc.pc(), 0xda35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda34), 0xf2);
        EXPECT(gbc.readMem(0xfff8), 0xf8);
        // F2 003C
        gbc.setState(0x9147, 0xe9da, 0xb790, 0x8d3a, 0x8fd9, 0x976b, 0x0, 0x0);
        gbc.writeMem(0x9147, { 0xf2 });
        gbc.writeMem(0xff3a, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xe9da);
        EXPECT(gbc.pc(), 0x9148);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9147), 0xf2);
        EXPECT(gbc.readMem(0xff3a), 0xf0);
        // F2 003D
        gbc.setState(0x7689, 0x8633, 0xd680, 0x4280, 0xa9c5, 0x176f, 0x1, 0x1);
        gbc.writeMem(0x7689, { 0xf2 });
        gbc.writeMem(0xff80, { 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x8633);
        EXPECT(gbc.pc(), 0x768a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff80), 0x8e);
        // F2 003E
        gbc.setState(0x8d2e, 0x7f89, 0x1680, 0xafad, 0x28c5, 0x4986, 0x0, 0x1);
        gbc.writeMem(0x8d2e, { 0xf2 });
        gbc.writeMem(0xffad, { 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x7f89);
        EXPECT(gbc.pc(), 0x8d2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d2e), 0xf2);
        EXPECT(gbc.readMem(0xffad), 0xb9);
        // F2 003F
        gbc.setState(0x28ab, 0x3d1f, 0x9350, 0x6785, 0x652e, 0x118b, 0x1, 0x1);
        gbc.writeMem(0x28ab, { 0xf2 });
        gbc.writeMem(0xff85, { 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x3d1f);
        EXPECT(gbc.pc(), 0x28ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff85), 0x9e);
        // F2 0040
        gbc.setState(0xa866, 0xe203, 0x1620, 0xe98, 0x78c4, 0x9b0a, 0x1, 0x0);
        gbc.writeMem(0xa866, { 0xf2 });
        gbc.writeMem(0xff98, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xe203);
        EXPECT(gbc.pc(), 0xa867);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa866), 0xf2);
        EXPECT(gbc.readMem(0xff98), 0x95);
        // F2 0041
        gbc.setState(0xb1d8, 0x96a, 0x3740, 0xad2e, 0x7c51, 0xfb7f, 0x0, 0x0);
        gbc.writeMem(0xb1d8, { 0xf2 });
        gbc.writeMem(0xff2e, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x96a);
        EXPECT(gbc.pc(), 0xb1d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1d8), 0xf2);
        EXPECT(gbc.readMem(0xff2e), 0x86);
        // F2 0042
        gbc.setState(0x882f, 0x4809, 0x8cc0, 0x7152, 0x59b6, 0x6237, 0x1, 0x1);
        gbc.writeMem(0x882f, { 0xf2 });
        gbc.writeMem(0xff52, { 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x4809);
        EXPECT(gbc.pc(), 0x8830);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x882f), 0xf2);
        EXPECT(gbc.readMem(0xff52), 0xa);
        // F2 0043
        gbc.setState(0x12ed, 0xa715, 0xe670, 0x9abe, 0x7de6, 0x9f5b, 0x0, 0x1);
        gbc.writeMem(0x12ed, { 0xf2 });
        gbc.writeMem(0xffbe, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xa715);
        EXPECT(gbc.pc(), 0x12ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffbe), 0xdb);
        // F2 0044
        gbc.setState(0x993d, 0xd947, 0xfb70, 0x5247, 0x50b5, 0x9f76, 0x0, 0x0);
        gbc.writeMem(0x993d, { 0xf2 });
        gbc.writeMem(0xff47, { 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xd947);
        EXPECT(gbc.pc(), 0x993e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x993d), 0xf2);
        EXPECT(gbc.readMem(0xff47), 0x98);
        // F2 0045
        gbc.setState(0xa17e, 0xecec, 0xbfb0, 0x710d, 0x3b87, 0x9dec, 0x0, 0x1);
        gbc.writeMem(0xa17e, { 0xf2 });
        gbc.writeMem(0xff0d, { 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xecec);
        EXPECT(gbc.pc(), 0xa17f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa17e), 0xf2);
        EXPECT(gbc.readMem(0xff0d), 0xa0);
        // F2 0046
        gbc.setState(0xa5ff, 0xfd3f, 0xa740, 0x5faa, 0x5eb6, 0xd74d, 0x1, 0x0);
        gbc.writeMem(0xa5ff, { 0xf2 });
        gbc.writeMem(0xffaa, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xfd3f);
        EXPECT(gbc.pc(), 0xa600);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5ff), 0xf2);
        EXPECT(gbc.readMem(0xffaa), 0x24);
        // F2 0047
        gbc.setState(0xacbb, 0x9a48, 0x8280, 0xfef4, 0x647b, 0x1705, 0x0, 0x0);
        gbc.writeMem(0xacbb, { 0xf2 });
        gbc.writeMem(0xfff4, { 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x9a48);
        EXPECT(gbc.pc(), 0xacbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacbb), 0xf2);
        EXPECT(gbc.readMem(0xfff4), 0xcf);
        // F2 0048
        gbc.setState(0x72be, 0x94f, 0x2900, 0x7d3, 0xca5d, 0xdb09, 0x1, 0x0);
        gbc.writeMem(0x72be, { 0xf2 });
        gbc.writeMem(0xffd3, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x94f);
        EXPECT(gbc.pc(), 0x72bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffd3), 0xbb);
        // F2 004A
        gbc.setState(0xbc86, 0x98d0, 0x2880, 0x7d9a, 0x5303, 0x1b25, 0x1, 0x0);
        gbc.writeMem(0xbc86, { 0xf2 });
        gbc.writeMem(0xff9a, { 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x98d0);
        EXPECT(gbc.pc(), 0xbc87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc86), 0xf2);
        EXPECT(gbc.readMem(0xff9a), 0x2f);
        // F2 004B
        gbc.setState(0xe719, 0xb0bd, 0x25b0, 0xc326, 0xa2d3, 0xe9fd, 0x1, 0x1);
        gbc.writeMem(0xe719, { 0xf2 });
        gbc.writeMem(0xff26, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xb0bd);
        EXPECT(gbc.pc(), 0xe71a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe719), 0xf2);
        EXPECT(gbc.readMem(0xff26), 0x57);
        // F2 004C
        gbc.setState(0xb6a9, 0x5d2c, 0x7b70, 0xf1bf, 0x8b7c, 0xaffc, 0x0, 0x0);
        gbc.writeMem(0xb6a9, { 0xf2 });
        gbc.writeMem(0xffbf, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x5d2c);
        EXPECT(gbc.pc(), 0xb6aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6a9), 0xf2);
        EXPECT(gbc.readMem(0xffbf), 0xec);
        // F2 004D
        gbc.setState(0x36f9, 0x2ac1, 0x65c0, 0x260d, 0x4b3a, 0xafd2, 0x1, 0x0);
        gbc.writeMem(0x36f9, { 0xf2 });
        gbc.writeMem(0xff0d, { 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x2ac1);
        EXPECT(gbc.pc(), 0x36fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff0d), 0xa0);
        // F2 004E
        gbc.setState(0xc007, 0x83ca, 0x14e0, 0x7456, 0x53fd, 0x25ff, 0x1, 0x0);
        gbc.writeMem(0xc007, { 0xf2 });
        gbc.writeMem(0xff56, { 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x83ca);
        EXPECT(gbc.pc(), 0xc008);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc007), 0xf2);
        EXPECT(gbc.readMem(0xff56), 0x31);
        // F2 004F
        gbc.setState(0x3a91, 0x709, 0x9720, 0xdd23, 0xab05, 0x9438, 0x1, 0x1);
        gbc.writeMem(0x3a91, { 0xf2 });
        gbc.writeMem(0xff23, { 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x709);
        EXPECT(gbc.pc(), 0x3a92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff23), 0x45);
        // F2 0050
        gbc.setState(0x7a25, 0x2e3e, 0x4090, 0xaeb, 0x9e53, 0x10ed, 0x1, 0x0);
        gbc.writeMem(0x7a25, { 0xf2 });
        gbc.writeMem(0xffeb, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x2e3e);
        EXPECT(gbc.pc(), 0x7a26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffeb), 0xbb);
        // F2 0052
        gbc.setState(0x227d, 0x83dd, 0xc680, 0x45af, 0xab35, 0xfe70, 0x0, 0x1);
        gbc.writeMem(0x227d, { 0xf2 });
        gbc.writeMem(0xffaf, { 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x83dd);
        EXPECT(gbc.pc(), 0x227e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffaf), 0x51);
        // F2 0053
        gbc.setState(0x137b, 0xac35, 0xeb60, 0xdf37, 0xa3e0, 0xbef5, 0x1, 0x0);
        gbc.writeMem(0x137b, { 0xf2 });
        gbc.writeMem(0xff37, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xac35);
        EXPECT(gbc.pc(), 0x137c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff37), 0x7e);
        // F2 0054
        gbc.setState(0x75b1, 0x309f, 0xdc00, 0x7edd, 0x8573, 0x4746, 0x0, 0x1);
        gbc.writeMem(0x75b1, { 0xf2 });
        gbc.writeMem(0xffdd, { 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x309f);
        EXPECT(gbc.pc(), 0x75b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffdd), 0xc4);
        // F2 0055
        gbc.setState(0x2b10, 0x6a4a, 0x2630, 0x3ce3, 0xae3f, 0xb547, 0x1, 0x0);
        gbc.writeMem(0x2b10, { 0xf2 });
        gbc.writeMem(0xffe3, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x6a4a);
        EXPECT(gbc.pc(), 0x2b11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffe3), 0xf3);
        // F2 0056
        gbc.setState(0x9c9, 0xe3c4, 0x6a40, 0xd5dd, 0x8b8, 0x9cc0, 0x1, 0x0);
        gbc.writeMem(0x9c9, { 0xf2 });
        gbc.writeMem(0xffdd, { 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xe3c4);
        EXPECT(gbc.pc(), 0x9ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffdd), 0xc4);
        // F2 0057
        gbc.setState(0xa00f, 0x1c78, 0x1970, 0x44b4, 0x79c6, 0xd3c8, 0x1, 0x0);
        gbc.writeMem(0xa00f, { 0xf2 });
        gbc.writeMem(0xffb4, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x1c78);
        EXPECT(gbc.pc(), 0xa010);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa00f), 0xf2);
        EXPECT(gbc.readMem(0xffb4), 0xec);
        // F2 0058
        gbc.setState(0xc877, 0xbd11, 0x2c50, 0x1906, 0x29dd, 0xa5a6, 0x0, 0x1);
        gbc.writeMem(0xc877, { 0xf2 });
        gbc.writeMem(0xff06, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xbd11);
        EXPECT(gbc.pc(), 0xc878);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc877), 0xf2);
        EXPECT(gbc.readMem(0xff06), 0xf4);
        // F2 0059
        gbc.setState(0x2f69, 0x783e, 0x5dc0, 0xe95b, 0x5f1b, 0x5f69, 0x1, 0x1);
        gbc.writeMem(0x2f69, { 0xf2 });
        gbc.writeMem(0xff5b, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x783e);
        EXPECT(gbc.pc(), 0x2f6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff5b), 0xff);
        // F2 005A
        gbc.setState(0x888f, 0xe655, 0x8710, 0xfef2, 0xad87, 0x4e8, 0x0, 0x1);
        gbc.writeMem(0x888f, { 0xf2 });
        gbc.writeMem(0xfff2, { 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xe655);
        EXPECT(gbc.pc(), 0x8890);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x888f), 0xf2);
        EXPECT(gbc.readMem(0xfff2), 0x98);
        // F2 005B
        gbc.setState(0x863a, 0xde19, 0x60e0, 0x705b, 0x65d0, 0xda28, 0x0, 0x1);
        gbc.writeMem(0x863a, { 0xf2 });
        gbc.writeMem(0xff5b, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xde19);
        EXPECT(gbc.pc(), 0x863b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x863a), 0xf2);
        EXPECT(gbc.readMem(0xff5b), 0xff);
        // F2 005C
        gbc.setState(0x1769, 0x5e49, 0x9c50, 0x3867, 0xb50, 0xa902, 0x0, 0x0);
        gbc.writeMem(0x1769, { 0xf2 });
        gbc.writeMem(0xff67, { 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x5e49);
        EXPECT(gbc.pc(), 0x176a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff67), 0x27);
        // F2 005D
        gbc.setState(0x344b, 0x8092, 0x8aa0, 0xa3ba, 0xbd2d, 0x8e67, 0x1, 0x1);
        gbc.writeMem(0x344b, { 0xf2 });
        gbc.writeMem(0xffba, { 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x8092);
        EXPECT(gbc.pc(), 0x344c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffba), 0x88);
        // F2 005E
        gbc.setState(0x1cc9, 0xd7dc, 0x3680, 0x8d51, 0xb8f7, 0xb79a, 0x1, 0x1);
        gbc.writeMem(0x1cc9, { 0xf2 });
        gbc.writeMem(0xff51, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xd7dc);
        EXPECT(gbc.pc(), 0x1cca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff51), 0x4c);
        // F2 005F
        gbc.setState(0xc903, 0xe852, 0x18e0, 0x10c5, 0xfc82, 0xd081, 0x1, 0x1);
        gbc.writeMem(0xc903, { 0xf2 });
        gbc.writeMem(0xffc5, { 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xe852);
        EXPECT(gbc.pc(), 0xc904);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc903), 0xf2);
        EXPECT(gbc.readMem(0xffc5), 0xe1);
        // F2 0060
        gbc.setState(0x9810, 0xbf6e, 0x2d0, 0xc1b3, 0x723c, 0x4f69, 0x0, 0x1);
        gbc.writeMem(0x9810, { 0xf2 });
        gbc.writeMem(0xffb3, { 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xbf6e);
        EXPECT(gbc.pc(), 0x9811);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9810), 0xf2);
        EXPECT(gbc.readMem(0xffb3), 0x6);
        // F2 0061
        gbc.setState(0xd238, 0xaa19, 0x390, 0x164c, 0xdfc8, 0x1836, 0x0, 0x0);
        gbc.writeMem(0xd238, { 0xf2 });
        gbc.writeMem(0xff4c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xaa19);
        EXPECT(gbc.pc(), 0xd239);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd238), 0xf2);
        EXPECT(gbc.readMem(0xff4c), 0x5a);
        // F2 0062
        gbc.setState(0x861f, 0xde70, 0x6c80, 0x8793, 0x9d7e, 0xdefb, 0x1, 0x0);
        gbc.writeMem(0x861f, { 0xf2 });
        gbc.writeMem(0xff93, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xde70);
        EXPECT(gbc.pc(), 0x8620);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x861f), 0xf2);
        EXPECT(gbc.readMem(0xff93), 0x63);
        // F2 0063
        gbc.setState(0x6a28, 0x7d28, 0x9c0, 0x49d9, 0x22b7, 0x792d, 0x1, 0x0);
        gbc.writeMem(0x6a28, { 0xf2 });
        gbc.writeMem(0xffd9, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x7d28);
        EXPECT(gbc.pc(), 0x6a29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffd9), 0xa3);
        // F2 0064
        gbc.setState(0xb8a1, 0xbe26, 0x7550, 0x8c10, 0x4d14, 0xf761, 0x0, 0x0);
        gbc.writeMem(0xb8a1, { 0xf2 });
        gbc.writeMem(0xff10, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xbe26);
        EXPECT(gbc.pc(), 0xb8a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8a1), 0xf2);
        EXPECT(gbc.readMem(0xff10), 0xb7);
        // F2 0065
        gbc.setState(0x2720, 0x1fe9, 0x87f0, 0x422e, 0xc362, 0xcc5, 0x1, 0x1);
        gbc.writeMem(0x2720, { 0xf2 });
        gbc.writeMem(0xff2e, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x1fe9);
        EXPECT(gbc.pc(), 0x2721);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff2e), 0x86);
        // F2 0066
        gbc.setState(0x5a26, 0xd041, 0x25b0, 0x82cb, 0x49, 0xc805, 0x0, 0x1);
        gbc.writeMem(0x5a26, { 0xf2 });
        gbc.writeMem(0xffcb, { 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xd041);
        EXPECT(gbc.pc(), 0x5a27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffcb), 0x64);
        // F2 0067
        gbc.setState(0xacb4, 0x65c1, 0x86b0, 0x532a, 0xe279, 0x6f92, 0x1, 0x0);
        gbc.writeMem(0xacb4, { 0xf2 });
        gbc.writeMem(0xff2a, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x65c1);
        EXPECT(gbc.pc(), 0xacb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacb4), 0xf2);
        EXPECT(gbc.readMem(0xff2a), 0x9c);
        // F2 0068
        gbc.setState(0xdf95, 0x4a05, 0xf940, 0x48b1, 0x551, 0x8421, 0x0, 0x0);
        gbc.writeMem(0xdf95, { 0xf2 });
        gbc.writeMem(0xffb1, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x4a05);
        EXPECT(gbc.pc(), 0xdf96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf95), 0xf2);
        EXPECT(gbc.readMem(0xffb1), 0x63);
        // F2 0069
        gbc.setState(0xd594, 0xfc5b, 0xfda0, 0x1e71, 0x5a46, 0x8c22, 0x0, 0x0);
        gbc.writeMem(0xd594, { 0xf2 });
        gbc.writeMem(0xff71, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xfc5b);
        EXPECT(gbc.pc(), 0xd595);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd594), 0xf2);
        EXPECT(gbc.readMem(0xff71), 0x4f);
        // F2 006A
        gbc.setState(0x91b3, 0x9882, 0x3090, 0xfd27, 0xd49b, 0xfaf, 0x0, 0x1);
        gbc.writeMem(0x91b3, { 0xf2 });
        gbc.writeMem(0xff27, { 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x9882);
        EXPECT(gbc.pc(), 0x91b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91b3), 0xf2);
        EXPECT(gbc.readMem(0xff27), 0x3c);
        // F2 006B
        gbc.setState(0xb636, 0x398d, 0x3ad0, 0x5728, 0x6a8e, 0xda75, 0x0, 0x1);
        gbc.writeMem(0xb636, { 0xf2 });
        gbc.writeMem(0xff28, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x398d);
        EXPECT(gbc.pc(), 0xb637);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb636), 0xf2);
        EXPECT(gbc.readMem(0xff28), 0x95);
        // F2 006C
        gbc.setState(0x7857, 0x3b05, 0xeaa0, 0x7fb7, 0x73cd, 0x456b, 0x1, 0x1);
        gbc.writeMem(0x7857, { 0xf2 });
        gbc.writeMem(0xffb7, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x3b05);
        EXPECT(gbc.pc(), 0x7858);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffb7), 0x66);
        // F2 006D
        gbc.setState(0x7edc, 0xf1ec, 0x2c20, 0x7e78, 0x4034, 0x1a50, 0x0, 0x0);
        gbc.writeMem(0x7edc, { 0xf2 });
        gbc.writeMem(0xff78, { 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xf1ec);
        EXPECT(gbc.pc(), 0x7edd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff78), 0x9e);
        // F2 006E
        gbc.setState(0x32c3, 0xdcc1, 0xd0c0, 0x3ffc, 0x8fef, 0x8bdf, 0x0, 0x1);
        gbc.writeMem(0x32c3, { 0xf2 });
        gbc.writeMem(0xfffc, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xdcc1);
        EXPECT(gbc.pc(), 0x32c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfffc), 0x8b);
        // F2 006F
        gbc.setState(0x52af, 0xea73, 0x720, 0xa009, 0xc242, 0x1ac7, 0x0, 0x1);
        gbc.writeMem(0x52af, { 0xf2 });
        gbc.writeMem(0xff09, { 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xea73);
        EXPECT(gbc.pc(), 0x52b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff09), 0x53);
        // F2 0070
        gbc.setState(0x5465, 0x1303, 0x5c10, 0x628a, 0xc640, 0x49b7, 0x1, 0x0);
        gbc.writeMem(0x5465, { 0xf2 });
        gbc.writeMem(0xff8a, { 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x1303);
        EXPECT(gbc.pc(), 0x5466);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff8a), 0xed);
        // F2 0071
        gbc.setState(0x5aa2, 0xbd75, 0xb270, 0x711f, 0x6c93, 0x0, 0x0, 0x0);
        gbc.writeMem(0x5aa2, { 0xf2 });
        gbc.writeMem(0xff1f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xbd75);
        EXPECT(gbc.pc(), 0x5aa3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff1f), 0x8b);
        // F2 0072
        gbc.setState(0xe934, 0xe26b, 0x82a0, 0xa9fb, 0x6a7f, 0x348c, 0x0, 0x0);
        gbc.writeMem(0xe934, { 0xf2 });
        gbc.writeMem(0xfffb, { 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xe26b);
        EXPECT(gbc.pc(), 0xe935);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe934), 0xf2);
        EXPECT(gbc.readMem(0xfffb), 0x5f);
        // F2 0073
        gbc.setState(0xefda, 0xbf86, 0xd300, 0xc4f2, 0x5d59, 0x6185, 0x0, 0x1);
        gbc.writeMem(0xefda, { 0xf2 });
        gbc.writeMem(0xfff2, { 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xbf86);
        EXPECT(gbc.pc(), 0xefdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefda), 0xf2);
        EXPECT(gbc.readMem(0xfff2), 0x98);
        // F2 0074
        gbc.setState(0xeafd, 0x1007, 0xa390, 0xa665, 0x5ac1, 0x754b, 0x0, 0x0);
        gbc.writeMem(0xeafd, { 0xf2 });
        gbc.writeMem(0xff65, { 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x1007);
        EXPECT(gbc.pc(), 0xeafe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeafd), 0xf2);
        EXPECT(gbc.readMem(0xff65), 0xae);
        // F2 0075
        gbc.setState(0xb64, 0x6c2, 0xe770, 0x8235, 0xecf9, 0x7055, 0x1, 0x0);
        gbc.writeMem(0xb64, { 0xf2 });
        gbc.writeMem(0xff35, { 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x6c2);
        EXPECT(gbc.pc(), 0xb65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff35), 0x4e);
        // F2 0076
        gbc.setState(0x180b, 0xa2c5, 0x1480, 0xeae2, 0x9b6d, 0x5fe4, 0x1, 0x1);
        gbc.writeMem(0x180b, { 0xf2 });
        gbc.writeMem(0xffe2, { 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xa2c5);
        EXPECT(gbc.pc(), 0x180c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffe2), 0xce);
        // F2 0077
        gbc.setState(0xb52f, 0xf964, 0x3430, 0x7b0b, 0xdb4d, 0x700d, 0x0, 0x1);
        gbc.writeMem(0xb52f, { 0xf2 });
        gbc.writeMem(0xff0b, { 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xf964);
        EXPECT(gbc.pc(), 0xb530);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb52f), 0xf2);
        EXPECT(gbc.readMem(0xff0b), 0xea);
        // F2 0078
        gbc.setState(0x296b, 0x47fd, 0xc4c0, 0x98af, 0x5310, 0xfdbd, 0x1, 0x0);
        gbc.writeMem(0x296b, { 0xf2 });
        gbc.writeMem(0xffaf, { 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x47fd);
        EXPECT(gbc.pc(), 0x296c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffaf), 0x51);
        // F2 0079
        gbc.setState(0xd7ad, 0x8c99, 0x6a30, 0xe770, 0x127, 0x3c2, 0x0, 0x0);
        gbc.writeMem(0xd7ad, { 0xf2 });
        gbc.writeMem(0xff70, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x8c99);
        EXPECT(gbc.pc(), 0xd7ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7ad), 0xf2);
        EXPECT(gbc.readMem(0xff70), 0xff);
        // F2 007A
        gbc.setState(0x3701, 0x5ce0, 0xc810, 0xf131, 0xded8, 0x54d0, 0x0, 0x1);
        gbc.writeMem(0x3701, { 0xf2 });
        gbc.writeMem(0xff31, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x5ce0);
        EXPECT(gbc.pc(), 0x3702);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff31), 0x40);
        // F2 007B
        gbc.setState(0x4731, 0x1269, 0x19c0, 0xf144, 0x2f7e, 0x62a1, 0x1, 0x1);
        gbc.writeMem(0x4731, { 0xf2 });
        gbc.writeMem(0xff44, { 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x1269);
        EXPECT(gbc.pc(), 0x4732);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff44), 0x93);
        // F2 007C
        gbc.setState(0xb841, 0x4220, 0xb8b0, 0x93dd, 0xaa80, 0x303a, 0x0, 0x1);
        gbc.writeMem(0xb841, { 0xf2 });
        gbc.writeMem(0xffdd, { 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x4220);
        EXPECT(gbc.pc(), 0xb842);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb841), 0xf2);
        EXPECT(gbc.readMem(0xffdd), 0xc4);
        // F2 007D
        gbc.setState(0x15fd, 0xa04d, 0x3410, 0xef5b, 0x2ebc, 0xe7b7, 0x0, 0x1);
        gbc.writeMem(0x15fd, { 0xf2 });
        gbc.writeMem(0xff5b, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xa04d);
        EXPECT(gbc.pc(), 0x15fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff5b), 0xff);
        // F2 007E
        gbc.setState(0xe6a8, 0x5bcf, 0xc740, 0x9e3f, 0xd353, 0xf8e2, 0x1, 0x0);
        gbc.writeMem(0xe6a8, { 0xf2 });
        gbc.writeMem(0xff3f, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x5bcf);
        EXPECT(gbc.pc(), 0xe6a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6a8), 0xf2);
        EXPECT(gbc.readMem(0xff3f), 0xa4);
        // F2 007F
        gbc.setState(0xb99f, 0xdb44, 0xfc20, 0x84b, 0xc533, 0x945, 0x1, 0x0);
        gbc.writeMem(0xb99f, { 0xf2 });
        gbc.writeMem(0xff4b, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xdb44);
        EXPECT(gbc.pc(), 0xb9a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb99f), 0xf2);
        EXPECT(gbc.readMem(0xff4b), 0xdf);
        // F2 0080
        gbc.setState(0x89da, 0xeca5, 0x6b40, 0xa374, 0xea26, 0xe375, 0x1, 0x1);
        gbc.writeMem(0x89da, { 0xf2 });
        gbc.writeMem(0xff74, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xeca5);
        EXPECT(gbc.pc(), 0x89db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89da), 0xf2);
        EXPECT(gbc.readMem(0xff74), 0x76);
        // F2 0081
        gbc.setState(0xc165, 0xcbbf, 0xbab0, 0x143c, 0x3e63, 0xc88a, 0x0, 0x0);
        gbc.writeMem(0xc165, { 0xf2 });
        gbc.writeMem(0xff3c, { 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xcbbf);
        EXPECT(gbc.pc(), 0xc166);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc165), 0xf2);
        EXPECT(gbc.readMem(0xff3c), 0xfd);
        // F2 0082
        gbc.setState(0x7a78, 0xd820, 0xe530, 0x357c, 0x2351, 0x789a, 0x1, 0x0);
        gbc.writeMem(0x7a78, { 0xf2 });
        gbc.writeMem(0xff7c, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xd820);
        EXPECT(gbc.pc(), 0x7a79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff7c), 0x9c);
        // F2 0083
        gbc.setState(0xc327, 0x4368, 0x1cc0, 0x2767, 0x29f7, 0x753d, 0x1, 0x0);
        gbc.writeMem(0xc327, { 0xf2 });
        gbc.writeMem(0xff67, { 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x4368);
        EXPECT(gbc.pc(), 0xc328);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc327), 0xf2);
        EXPECT(gbc.readMem(0xff67), 0x27);
        // F2 0084
        gbc.setState(0xca07, 0x6af2, 0x3600, 0x974a, 0xfb1b, 0xba3b, 0x1, 0x1);
        gbc.writeMem(0xca07, { 0xf2 });
        gbc.writeMem(0xff4a, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x6af2);
        EXPECT(gbc.pc(), 0xca08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca07), 0xf2);
        EXPECT(gbc.readMem(0xff4a), 0x7e);
        // F2 0085
        gbc.setState(0xa3c1, 0xc829, 0x1d00, 0xcc94, 0xd290, 0xc4e1, 0x0, 0x0);
        gbc.writeMem(0xa3c1, { 0xf2 });
        gbc.writeMem(0xff94, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xc829);
        EXPECT(gbc.pc(), 0xa3c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3c1), 0xf2);
        EXPECT(gbc.readMem(0xff94), 0x59);
        // F2 0086
        gbc.setState(0x2332, 0x9661, 0xcb00, 0x526a, 0x91b0, 0xa99f, 0x1, 0x0);
        gbc.writeMem(0x2332, { 0xf2 });
        gbc.writeMem(0xff6a, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x9661);
        EXPECT(gbc.pc(), 0x2333);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff6a), 0x79);
        // F2 0087
        gbc.setState(0x34aa, 0x34e0, 0xa680, 0x2e61, 0x695b, 0x6751, 0x1, 0x1);
        gbc.writeMem(0x34aa, { 0xf2 });
        gbc.writeMem(0xff61, { 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x34e0);
        EXPECT(gbc.pc(), 0x34ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff61), 0x20);
        // F2 0088
        gbc.setState(0x315b, 0x7e51, 0xc120, 0xbc45, 0x8cd3, 0xe44e, 0x1, 0x0);
        gbc.writeMem(0x315b, { 0xf2 });
        gbc.writeMem(0xff45, { 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x7e51);
        EXPECT(gbc.pc(), 0x315c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff45), 0xd4);
        // F2 0089
        gbc.setState(0xba03, 0xca3a, 0xb50, 0xf9b1, 0x7863, 0xd98a, 0x0, 0x0);
        gbc.writeMem(0xba03, { 0xf2 });
        gbc.writeMem(0xffb1, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xca3a);
        EXPECT(gbc.pc(), 0xba04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba03), 0xf2);
        EXPECT(gbc.readMem(0xffb1), 0x63);
        // F2 008A
        gbc.setState(0x3fc2, 0xdb84, 0xce80, 0x44c, 0x5cbd, 0xc002, 0x1, 0x0);
        gbc.writeMem(0x3fc2, { 0xf2 });
        gbc.writeMem(0xff4c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xdb84);
        EXPECT(gbc.pc(), 0x3fc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff4c), 0x5a);
        // F2 008B
        gbc.setState(0xd82, 0x93a, 0x4540, 0xdae2, 0xd5ca, 0x1a37, 0x0, 0x1);
        gbc.writeMem(0xd82, { 0xf2 });
        gbc.writeMem(0xffe2, { 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x93a);
        EXPECT(gbc.pc(), 0xd83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffe2), 0xce);
        // F2 008C
        gbc.setState(0x7f27, 0xba5, 0xcaf0, 0x2780, 0x7407, 0xae3, 0x0, 0x0);
        gbc.writeMem(0x7f27, { 0xf2 });
        gbc.writeMem(0xff80, { 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xba5);
        EXPECT(gbc.pc(), 0x7f28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff80), 0x8e);
        // F2 008D
        gbc.setState(0xdb04, 0xd8b9, 0x6840, 0x1e85, 0xb4f8, 0xec62, 0x0, 0x1);
        gbc.writeMem(0xdb04, { 0xf2 });
        gbc.writeMem(0xff85, { 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xd8b9);
        EXPECT(gbc.pc(), 0xdb05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb04), 0xf2);
        EXPECT(gbc.readMem(0xff85), 0x9e);
        // F2 008E
        gbc.setState(0x9fba, 0x3001, 0x7010, 0x794b, 0xe633, 0x45fd, 0x1, 0x1);
        gbc.writeMem(0x9fba, { 0xf2 });
        gbc.writeMem(0xff4b, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x3001);
        EXPECT(gbc.pc(), 0x9fbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fba), 0xf2);
        EXPECT(gbc.readMem(0xff4b), 0xdf);
        // F2 008F
        gbc.setState(0x4c34, 0x624c, 0x42f0, 0xa69, 0x9894, 0x6940, 0x0, 0x1);
        gbc.writeMem(0x4c34, { 0xf2 });
        gbc.writeMem(0xff69, { 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x624c);
        EXPECT(gbc.pc(), 0x4c35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff69), 0x9e);
        // F2 0090
        gbc.setState(0xbf89, 0xce1e, 0x24d0, 0x7204, 0x8722, 0xd6c7, 0x0, 0x1);
        gbc.writeMem(0xbf89, { 0xf2 });
        gbc.writeMem(0xff04, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xce1e);
        EXPECT(gbc.pc(), 0xbf8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf89), 0xf2);
        EXPECT(gbc.readMem(0xff04), 0x59);
        // F2 0091
        gbc.setState(0x6f79, 0x63fb, 0x7b70, 0x59e4, 0xca26, 0xba81, 0x1, 0x1);
        gbc.writeMem(0x6f79, { 0xf2 });
        gbc.writeMem(0xffe4, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x63fb);
        EXPECT(gbc.pc(), 0x6f7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffe4), 0xf);
        // F2 0092
        gbc.setState(0xa10b, 0xc4b9, 0x5d0, 0x565e, 0x6aa0, 0xf8c3, 0x0, 0x0);
        gbc.writeMem(0xa10b, { 0xf2 });
        gbc.writeMem(0xff5e, { 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xc4b9);
        EXPECT(gbc.pc(), 0xa10c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa10b), 0xf2);
        EXPECT(gbc.readMem(0xff5e), 0x62);
        // F2 0093
        gbc.setState(0x858b, 0x60f9, 0x9e80, 0xf99e, 0xb71c, 0xec27, 0x1, 0x1);
        gbc.writeMem(0x858b, { 0xf2 });
        gbc.writeMem(0xff9e, { 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x60f9);
        EXPECT(gbc.pc(), 0x858c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x858b), 0xf2);
        EXPECT(gbc.readMem(0xff9e), 0xde);
        // F2 0094
        gbc.setState(0x1272, 0xa970, 0x6b20, 0xb380, 0x3e51, 0x6fb, 0x1, 0x0);
        gbc.writeMem(0x1272, { 0xf2 });
        gbc.writeMem(0xff80, { 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xa970);
        EXPECT(gbc.pc(), 0x1273);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff80), 0x8e);
        // F2 0095
        gbc.setState(0x139a, 0x9b77, 0xa920, 0xe7f0, 0xfa4e, 0x7149, 0x1, 0x0);
        gbc.writeMem(0x139a, { 0xf2 });
        gbc.writeMem(0xfff0, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x9b77);
        EXPECT(gbc.pc(), 0x139b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfff0), 0xc0);
        // F2 0096
        gbc.setState(0xb41d, 0x7c16, 0xa3b0, 0x12ac, 0x67b4, 0xc112, 0x0, 0x0);
        gbc.writeMem(0xb41d, { 0xf2 });
        gbc.writeMem(0xffac, { 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x7c16);
        EXPECT(gbc.pc(), 0xb41e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb41d), 0xf2);
        EXPECT(gbc.readMem(0xffac), 0x36);
        // F2 0097
        gbc.setState(0x18a0, 0x58d0, 0x5f60, 0xaf84, 0x3f, 0xde84, 0x1, 0x0);
        gbc.writeMem(0x18a0, { 0xf2 });
        gbc.writeMem(0xff84, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x58d0);
        EXPECT(gbc.pc(), 0x18a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff84), 0xb7);
        // F2 0098
        gbc.setState(0xbd96, 0x266c, 0xf0e0, 0x2019, 0x4133, 0xe708, 0x1, 0x0);
        gbc.writeMem(0xbd96, { 0xf2 });
        gbc.writeMem(0xff19, { 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x266c);
        EXPECT(gbc.pc(), 0xbd97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd96), 0xf2);
        EXPECT(gbc.readMem(0xff19), 0xe1);
        // F2 0099
        gbc.setState(0x9458, 0xcbcc, 0xa870, 0x8411, 0x4a96, 0x59ba, 0x0, 0x0);
        gbc.writeMem(0x9458, { 0xf2 });
        gbc.writeMem(0xff11, { 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xcbcc);
        EXPECT(gbc.pc(), 0x9459);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9458), 0xf2);
        EXPECT(gbc.readMem(0xff11), 0x48);
        // F2 009A
        gbc.setState(0x8acf, 0xebfd, 0x60e0, 0x4d3b, 0x7129, 0xade3, 0x0, 0x0);
        gbc.writeMem(0x8acf, { 0xf2 });
        gbc.writeMem(0xff3b, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xebfd);
        EXPECT(gbc.pc(), 0x8ad0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8acf), 0xf2);
        EXPECT(gbc.readMem(0xff3b), 0xb2);
        // F2 009B
        gbc.setState(0x389e, 0xff71, 0x3800, 0x5e96, 0x67fe, 0xdd5, 0x0, 0x1);
        gbc.writeMem(0x389e, { 0xf2 });
        gbc.writeMem(0xff96, { 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xff71);
        EXPECT(gbc.pc(), 0x389f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff96), 0x72);
        // F2 009C
        gbc.setState(0xe905, 0x14a6, 0x5d30, 0x8dcd, 0x9711, 0x5106, 0x0, 0x1);
        gbc.writeMem(0xe905, { 0xf2 });
        gbc.writeMem(0xffcd, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x14a6);
        EXPECT(gbc.pc(), 0xe906);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe905), 0xf2);
        EXPECT(gbc.readMem(0xffcd), 0x10);
        // F2 009D
        gbc.setState(0xda3f, 0x198e, 0xf1b0, 0xb5db, 0xe80b, 0xbea5, 0x1, 0x1);
        gbc.writeMem(0xda3f, { 0xf2 });
        gbc.writeMem(0xffdb, { 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x198e);
        EXPECT(gbc.pc(), 0xda40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda3f), 0xf2);
        EXPECT(gbc.readMem(0xffdb), 0x1e);
        // F2 009E
        gbc.setState(0x617d, 0xeef7, 0xdf00, 0x6710, 0xc389, 0xa0b2, 0x0, 0x1);
        gbc.writeMem(0x617d, { 0xf2 });
        gbc.writeMem(0xff10, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xeef7);
        EXPECT(gbc.pc(), 0x617e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff10), 0xb7);
        // F2 009F
        gbc.setState(0x7ebe, 0xb961, 0x9bd0, 0x696c, 0xd78b, 0x888e, 0x0, 0x0);
        gbc.writeMem(0x7ebe, { 0xf2 });
        gbc.writeMem(0xff6c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xb961);
        EXPECT(gbc.pc(), 0x7ebf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff6c), 0xa8);
        // F2 00A0
        gbc.setState(0x456c, 0x4a5d, 0x93d0, 0x945f, 0x4852, 0x9192, 0x1, 0x0);
        gbc.writeMem(0x456c, { 0xf2 });
        gbc.writeMem(0xff5f, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x4a5d);
        EXPECT(gbc.pc(), 0x456d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff5f), 0x11);
        // F2 00A1
        gbc.setState(0x2b6b, 0x9162, 0x1fd0, 0x28f9, 0xe6b2, 0xb89f, 0x1, 0x1);
        gbc.writeMem(0x2b6b, { 0xf2 });
        gbc.writeMem(0xfff9, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x9162);
        EXPECT(gbc.pc(), 0x2b6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfff9), 0x10);
        // F2 00A2
        gbc.setState(0x3191, 0xfd03, 0xcff0, 0xce6, 0x9a14, 0x14da, 0x1, 0x0);
        gbc.writeMem(0x3191, { 0xf2 });
        gbc.writeMem(0xffe6, { 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xfd03);
        EXPECT(gbc.pc(), 0x3192);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffe6), 0x2c);
        // F2 00A3
        gbc.setState(0xcdcd, 0x1aee, 0xfc20, 0xeb31, 0x48d0, 0xf34d, 0x0, 0x0);
        gbc.writeMem(0xcdcd, { 0xf2 });
        gbc.writeMem(0xff31, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x1aee);
        EXPECT(gbc.pc(), 0xcdce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdcd), 0xf2);
        EXPECT(gbc.readMem(0xff31), 0x40);
        // F2 00A5
        gbc.setState(0x4342, 0xa4eb, 0x1d60, 0xd692, 0xbf4, 0xbfb9, 0x1, 0x1);
        gbc.writeMem(0x4342, { 0xf2 });
        gbc.writeMem(0xff92, { 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xa4eb);
        EXPECT(gbc.pc(), 0x4343);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff92), 0x1f);
        // F2 00A6
        gbc.setState(0x2b00, 0xacd3, 0x5630, 0x2567, 0x82ae, 0x9b0e, 0x0, 0x1);
        gbc.writeMem(0x2b00, { 0xf2 });
        gbc.writeMem(0xff67, { 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xacd3);
        EXPECT(gbc.pc(), 0x2b01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff67), 0x27);
        // F2 00A7
        gbc.setState(0x6e9f, 0x7451, 0x590, 0x584e, 0x7004, 0x6c25, 0x1, 0x0);
        gbc.writeMem(0x6e9f, { 0xf2 });
        gbc.writeMem(0xff4e, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x7451);
        EXPECT(gbc.pc(), 0x6ea0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff4e), 0xf);
        // F2 00A8
        gbc.setState(0x3112, 0x4789, 0xa500, 0xac1b, 0x4b94, 0xf32f, 0x0, 0x0);
        gbc.writeMem(0x3112, { 0xf2 });
        gbc.writeMem(0xff1b, { 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x4789);
        EXPECT(gbc.pc(), 0x3113);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff1b), 0xee);
        // F2 00A9
        gbc.setState(0xc6b4, 0xadaf, 0x6b30, 0xe999, 0x407a, 0xd45a, 0x0, 0x0);
        gbc.writeMem(0xc6b4, { 0xf2 });
        gbc.writeMem(0xff99, { 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xadaf);
        EXPECT(gbc.pc(), 0xc6b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6b4), 0xf2);
        EXPECT(gbc.readMem(0xff99), 0x3d);
        // F2 00AA
        gbc.setState(0x4648, 0x3924, 0xa70, 0xf3ed, 0x665c, 0x121e, 0x1, 0x0);
        gbc.writeMem(0x4648, { 0xf2 });
        gbc.writeMem(0xffed, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x3924);
        EXPECT(gbc.pc(), 0x4649);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffed), 0xa9);
        // F2 00AB
        gbc.setState(0x55f9, 0x1204, 0x7bd0, 0xee81, 0xdc43, 0xa67d, 0x1, 0x0);
        gbc.writeMem(0x55f9, { 0xf2 });
        gbc.writeMem(0xff81, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x1204);
        EXPECT(gbc.pc(), 0x55fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff81), 0x19);
        // F2 00AC
        gbc.setState(0xc31f, 0x5c53, 0xdf90, 0xb9eb, 0x62ba, 0xd902, 0x0, 0x1);
        gbc.writeMem(0xc31f, { 0xf2 });
        gbc.writeMem(0xffeb, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x5c53);
        EXPECT(gbc.pc(), 0xc320);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc31f), 0xf2);
        EXPECT(gbc.readMem(0xffeb), 0xbb);
        // F2 00AD
        gbc.setState(0xefa6, 0x4c42, 0x3b50, 0xb10e, 0xcc74, 0x507a, 0x1, 0x1);
        gbc.writeMem(0xefa6, { 0xf2 });
        gbc.writeMem(0xff0e, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x4c42);
        EXPECT(gbc.pc(), 0xefa7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefa6), 0xf2);
        EXPECT(gbc.readMem(0xff0e), 0xa6);
        // F2 00AE
        gbc.setState(0x36b, 0xcb13, 0x65d0, 0x3915, 0xc6a5, 0x5ec4, 0x1, 0x0);
        gbc.writeMem(0x36b, { 0xf2 });
        gbc.writeMem(0xff15, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xcb13);
        EXPECT(gbc.pc(), 0x36c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff15), 0xdb);
        // F2 00AF
        gbc.setState(0x13c6, 0x7b79, 0xa50, 0x8481, 0xa94f, 0x7468, 0x0, 0x0);
        gbc.writeMem(0x13c6, { 0xf2 });
        gbc.writeMem(0xff81, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x7b79);
        EXPECT(gbc.pc(), 0x13c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff81), 0x19);
        // F2 00B0
        gbc.setState(0x29a0, 0xca20, 0xd4e0, 0x598a, 0xdde4, 0x5fc0, 0x1, 0x1);
        gbc.writeMem(0x29a0, { 0xf2 });
        gbc.writeMem(0xff8a, { 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xca20);
        EXPECT(gbc.pc(), 0x29a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff8a), 0xed);
        // F2 00B1
        gbc.setState(0xed8, 0xa603, 0x1980, 0x63cc, 0x9777, 0x4c7d, 0x1, 0x1);
        gbc.writeMem(0xed8, { 0xf2 });
        gbc.writeMem(0xffcc, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xa603);
        EXPECT(gbc.pc(), 0xed9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffcc), 0x8d);
        // F2 00B2
        gbc.setState(0x32fe, 0x5831, 0xc3d0, 0x75b1, 0x86e2, 0x32f5, 0x1, 0x1);
        gbc.writeMem(0x32fe, { 0xf2 });
        gbc.writeMem(0xffb1, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x5831);
        EXPECT(gbc.pc(), 0x32ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffb1), 0x63);
        // F2 00B3
        gbc.setState(0x7b91, 0xb49f, 0x6eb0, 0xdcda, 0xf010, 0x60c7, 0x1, 0x0);
        gbc.writeMem(0x7b91, { 0xf2 });
        gbc.writeMem(0xffda, { 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xb49f);
        EXPECT(gbc.pc(), 0x7b92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffda), 0x7);
        // F2 00B4
        gbc.setState(0xe723, 0x1f41, 0xcd00, 0xd0cf, 0x93de, 0x90d7, 0x0, 0x1);
        gbc.writeMem(0xe723, { 0xf2 });
        gbc.writeMem(0xffcf, { 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x1f41);
        EXPECT(gbc.pc(), 0xe724);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe723), 0xf2);
        EXPECT(gbc.readMem(0xffcf), 0x8a);
        // F2 00B5
        gbc.setState(0x3117, 0xc584, 0x6d50, 0x6dd7, 0x7a8a, 0xfdd9, 0x0, 0x0);
        gbc.writeMem(0x3117, { 0xf2 });
        gbc.writeMem(0xffd7, { 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xc584);
        EXPECT(gbc.pc(), 0x3118);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffd7), 0x96);
        // F2 00B6
        gbc.setState(0x9f33, 0x1713, 0xbef0, 0xe0ac, 0x6002, 0xd109, 0x1, 0x0);
        gbc.writeMem(0x9f33, { 0xf2 });
        gbc.writeMem(0xffac, { 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x1713);
        EXPECT(gbc.pc(), 0x9f34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f33), 0xf2);
        EXPECT(gbc.readMem(0xffac), 0x36);
        // F2 00B7
        gbc.setState(0x2f1f, 0x74e2, 0xc4f0, 0xd323, 0xe693, 0x8bfd, 0x0, 0x0);
        gbc.writeMem(0x2f1f, { 0xf2 });
        gbc.writeMem(0xff23, { 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x74e2);
        EXPECT(gbc.pc(), 0x2f20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff23), 0x45);
        // F2 00B8
        gbc.setState(0x5240, 0xa1e0, 0xfd0, 0xe45f, 0x589e, 0x5a95, 0x0, 0x1);
        gbc.writeMem(0x5240, { 0xf2 });
        gbc.writeMem(0xff5f, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xa1e0);
        EXPECT(gbc.pc(), 0x5241);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff5f), 0x11);
        // F2 00B9
        gbc.setState(0x17ef, 0x85ea, 0x1100, 0xb75b, 0x38fb, 0xb6c1, 0x0, 0x0);
        gbc.writeMem(0x17ef, { 0xf2 });
        gbc.writeMem(0xff5b, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x85ea);
        EXPECT(gbc.pc(), 0x17f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff5b), 0xff);
        // F2 00BA
        gbc.setState(0x5480, 0xfe35, 0xfc00, 0x8c4, 0x77aa, 0x28b8, 0x1, 0x0);
        gbc.writeMem(0x5480, { 0xf2 });
        gbc.writeMem(0xffc4, { 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xfe35);
        EXPECT(gbc.pc(), 0x5481);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffc4), 0x9d);
        // F2 00BB
        gbc.setState(0xbcb, 0xf177, 0x8870, 0x68ed, 0xdf34, 0x3a1f, 0x0, 0x1);
        gbc.writeMem(0xbcb, { 0xf2 });
        gbc.writeMem(0xffed, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xf177);
        EXPECT(gbc.pc(), 0xbcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffed), 0xa9);
        // F2 00BC
        gbc.setState(0x2622, 0xde69, 0xc260, 0xe787, 0x605e, 0xe979, 0x0, 0x0);
        gbc.writeMem(0x2622, { 0xf2 });
        gbc.writeMem(0xff87, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xde69);
        EXPECT(gbc.pc(), 0x2623);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff87), 0xb1);
        // F2 00BE
        gbc.setState(0x6b1b, 0x24f4, 0x2990, 0x894e, 0xde22, 0xf88f, 0x1, 0x1);
        gbc.writeMem(0x6b1b, { 0xf2 });
        gbc.writeMem(0xff4e, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x24f4);
        EXPECT(gbc.pc(), 0x6b1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff4e), 0xf);
        // F2 00BF
        gbc.setState(0x3b99, 0xbc7f, 0x3cc0, 0x5938, 0x7fdc, 0x3d16, 0x1, 0x1);
        gbc.writeMem(0x3b99, { 0xf2 });
        gbc.writeMem(0xff38, { 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xbc7f);
        EXPECT(gbc.pc(), 0x3b9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff38), 0xcc);
        // F2 00C0
        gbc.setState(0x5e0c, 0xe1cd, 0x2830, 0x28d7, 0xa78b, 0xcf33, 0x0, 0x1);
        gbc.writeMem(0x5e0c, { 0xf2 });
        gbc.writeMem(0xffd7, { 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xe1cd);
        EXPECT(gbc.pc(), 0x5e0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffd7), 0x96);
        // F2 00C1
        gbc.setState(0xbd49, 0x51a0, 0xd2a0, 0xdc0b, 0xc074, 0x6543, 0x1, 0x1);
        gbc.writeMem(0xbd49, { 0xf2 });
        gbc.writeMem(0xff0b, { 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x51a0);
        EXPECT(gbc.pc(), 0xbd4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd49), 0xf2);
        EXPECT(gbc.readMem(0xff0b), 0xea);
        // F2 00C2
        gbc.setState(0xd023, 0xd163, 0xf530, 0xccf0, 0xb4bb, 0xa652, 0x0, 0x1);
        gbc.writeMem(0xd023, { 0xf2 });
        gbc.writeMem(0xfff0, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xd163);
        EXPECT(gbc.pc(), 0xd024);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd023), 0xf2);
        EXPECT(gbc.readMem(0xfff0), 0xc0);
        // F2 00C3
        gbc.setState(0x8beb, 0xdba9, 0x38b0, 0x627b, 0x80b4, 0x7a74, 0x1, 0x1);
        gbc.writeMem(0x8beb, { 0xf2 });
        gbc.writeMem(0xff7b, { 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xdba9);
        EXPECT(gbc.pc(), 0x8bec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8beb), 0xf2);
        EXPECT(gbc.readMem(0xff7b), 0x6);
        // F2 00C4
        gbc.setState(0x1708, 0x6b07, 0xad0, 0xce0, 0x360d, 0x2966, 0x1, 0x1);
        gbc.writeMem(0x1708, { 0xf2 });
        gbc.writeMem(0xffe0, { 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x6b07);
        EXPECT(gbc.pc(), 0x1709);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffe0), 0x75);
        // F2 00C5
        gbc.setState(0x1fed, 0x9a61, 0xcea0, 0x6620, 0x3dfa, 0xd057, 0x1, 0x0);
        gbc.writeMem(0x1fed, { 0xf2 });
        gbc.writeMem(0xff20, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x9a61);
        EXPECT(gbc.pc(), 0x1fee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff20), 0xec);
        // F2 00C6
        gbc.setState(0x87d2, 0xc57, 0xb3a0, 0xbc86, 0xdcf5, 0x4f5, 0x1, 0x0);
        gbc.writeMem(0x87d2, { 0xf2 });
        gbc.writeMem(0xff86, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xc57);
        EXPECT(gbc.pc(), 0x87d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87d2), 0xf2);
        EXPECT(gbc.readMem(0xff86), 0x5e);
        // F2 00C7
        gbc.setState(0x3c47, 0xf988, 0xcb20, 0xd7d0, 0x5430, 0x38c0, 0x0, 0x1);
        gbc.writeMem(0x3c47, { 0xf2 });
        gbc.writeMem(0xffd0, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xf988);
        EXPECT(gbc.pc(), 0x3c48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffd0), 0x63);
        // F2 00C8
        gbc.setState(0x9092, 0x1d68, 0x890, 0x942a, 0xb5fd, 0xb003, 0x0, 0x1);
        gbc.writeMem(0x9092, { 0xf2 });
        gbc.writeMem(0xff2a, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x1d68);
        EXPECT(gbc.pc(), 0x9093);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9092), 0xf2);
        EXPECT(gbc.readMem(0xff2a), 0x9c);
        // F2 00C9
        gbc.setState(0x28da, 0x18a0, 0x51f0, 0x6987, 0x5523, 0x7daa, 0x0, 0x0);
        gbc.writeMem(0x28da, { 0xf2 });
        gbc.writeMem(0xff87, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x18a0);
        EXPECT(gbc.pc(), 0x28db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff87), 0xb1);
        // F2 00CA
        gbc.setState(0x6d5c, 0x46d2, 0xcd20, 0x3422, 0x5cd, 0x4fa6, 0x1, 0x0);
        gbc.writeMem(0x6d5c, { 0xf2 });
        gbc.writeMem(0xff22, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x46d2);
        EXPECT(gbc.pc(), 0x6d5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff22), 0x77);
        // F2 00CB
        gbc.setState(0x9fb7, 0xfa33, 0x20b0, 0xe651, 0x1d82, 0xebdd, 0x0, 0x1);
        gbc.writeMem(0x9fb7, { 0xf2 });
        gbc.writeMem(0xff51, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xfa33);
        EXPECT(gbc.pc(), 0x9fb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fb7), 0xf2);
        EXPECT(gbc.readMem(0xff51), 0x4c);
        // F2 00CC
        gbc.setState(0x3b05, 0x5d56, 0x39a0, 0x8a2c, 0x38b8, 0xbe13, 0x0, 0x1);
        gbc.writeMem(0x3b05, { 0xf2 });
        gbc.writeMem(0xff2c, { 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x5d56);
        EXPECT(gbc.pc(), 0x3b06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff2c), 0xe8);
        // F2 00CD
        gbc.setState(0xbdb9, 0x8b32, 0x7f80, 0xacc0, 0x8f5c, 0x1371, 0x1, 0x1);
        gbc.writeMem(0xbdb9, { 0xf2 });
        gbc.writeMem(0xffc0, { 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x8b32);
        EXPECT(gbc.pc(), 0xbdba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdb9), 0xf2);
        EXPECT(gbc.readMem(0xffc0), 0xdd);
        // F2 00CE
        gbc.setState(0xeb78, 0x60d5, 0xc2e0, 0x42e4, 0x8318, 0x8837, 0x0, 0x1);
        gbc.writeMem(0xeb78, { 0xf2 });
        gbc.writeMem(0xffe4, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x60d5);
        EXPECT(gbc.pc(), 0xeb79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb78), 0xf2);
        EXPECT(gbc.readMem(0xffe4), 0xf);
        // F2 00CF
        gbc.setState(0x7867, 0x9f61, 0xd810, 0x1b6d, 0xf32, 0xb12c, 0x1, 0x1);
        gbc.writeMem(0x7867, { 0xf2 });
        gbc.writeMem(0xff6d, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x9f61);
        EXPECT(gbc.pc(), 0x7868);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff6d), 0x95);
        // F2 00D0
        gbc.setState(0x2152, 0x81e4, 0xa180, 0xd3c9, 0xf475, 0x777f, 0x0, 0x0);
        gbc.writeMem(0x2152, { 0xf2 });
        gbc.writeMem(0xffc9, { 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x81e4);
        EXPECT(gbc.pc(), 0x2153);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffc9), 0x93);
        // F2 00D1
        gbc.setState(0x287, 0x4cf3, 0x6870, 0x1c63, 0x9879, 0x66f4, 0x0, 0x1);
        gbc.writeMem(0x287, { 0xf2 });
        gbc.writeMem(0xff63, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x4cf3);
        EXPECT(gbc.pc(), 0x288);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff63), 0x30);
        // F2 00D2
        gbc.setState(0xc214, 0x47e2, 0xaf00, 0xc5dc, 0x1762, 0x30d6, 0x0, 0x1);
        gbc.writeMem(0xc214, { 0xf2 });
        gbc.writeMem(0xffdc, { 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x47e2);
        EXPECT(gbc.pc(), 0xc215);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc214), 0xf2);
        EXPECT(gbc.readMem(0xffdc), 0xcb);
        // F2 00D3
        gbc.setState(0x8d0, 0xb21f, 0xd130, 0xb274, 0x4e09, 0x9704, 0x1, 0x0);
        gbc.writeMem(0x8d0, { 0xf2 });
        gbc.writeMem(0xff74, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xb21f);
        EXPECT(gbc.pc(), 0x8d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff74), 0x76);
        // F2 00D4
        gbc.setState(0x4faf, 0xa7f, 0x3100, 0x4ad4, 0xb901, 0xc330, 0x0, 0x0);
        gbc.writeMem(0x4faf, { 0xf2 });
        gbc.writeMem(0xffd4, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xa7f);
        EXPECT(gbc.pc(), 0x4fb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffd4), 0x9f);
        // F2 00D5
        gbc.setState(0xb0ec, 0xf586, 0xfa30, 0x471c, 0xd5ad, 0x45fd, 0x1, 0x0);
        gbc.writeMem(0xb0ec, { 0xf2 });
        gbc.writeMem(0xff1c, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xf586);
        EXPECT(gbc.pc(), 0xb0ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0ec), 0xf2);
        EXPECT(gbc.readMem(0xff1c), 0x94);
        // F2 00D6
        gbc.setState(0x6281, 0xd78, 0xb7e0, 0x7071, 0xd4f3, 0xce54, 0x0, 0x0);
        gbc.writeMem(0x6281, { 0xf2 });
        gbc.writeMem(0xff71, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xd78);
        EXPECT(gbc.pc(), 0x6282);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff71), 0x4f);
        // F2 00D7
        gbc.setState(0x9b73, 0x599d, 0xb1b0, 0x7fd3, 0x968, 0xa60c, 0x1, 0x1);
        gbc.writeMem(0x9b73, { 0xf2 });
        gbc.writeMem(0xffd3, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x599d);
        EXPECT(gbc.pc(), 0x9b74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b73), 0xf2);
        EXPECT(gbc.readMem(0xffd3), 0xbb);
        // F2 00D8
        gbc.setState(0xec67, 0x2bfb, 0xb9b0, 0x2fc8, 0x131b, 0x44bf, 0x0, 0x0);
        gbc.writeMem(0xec67, { 0xf2 });
        gbc.writeMem(0xffc8, { 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x2bfb);
        EXPECT(gbc.pc(), 0xec68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec67), 0xf2);
        EXPECT(gbc.readMem(0xffc8), 0x7a);
        // F2 00D9
        gbc.setState(0x8542, 0xf80b, 0x1020, 0x96e5, 0xc4e0, 0xea9, 0x1, 0x1);
        gbc.writeMem(0x8542, { 0xf2 });
        gbc.writeMem(0xffe5, { 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xf80b);
        EXPECT(gbc.pc(), 0x8543);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8542), 0xf2);
        EXPECT(gbc.readMem(0xffe5), 0x8c);
        // F2 00DB
        gbc.setState(0x52c0, 0x2c9f, 0x1680, 0x7aff, 0x5699, 0x5c36, 0x1, 0x1);
        gbc.writeMem(0x52c0, { 0xf2 });
        gbc.writeMem(0xffff, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x2c9f);
        EXPECT(gbc.pc(), 0x52c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffff), 0x11);
        // F2 00DC
        gbc.setState(0x377f, 0x3f58, 0x1fe0, 0x346f, 0x1332, 0x304, 0x0, 0x1);
        gbc.writeMem(0x377f, { 0xf2 });
        gbc.writeMem(0xff6f, { 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x3f58);
        EXPECT(gbc.pc(), 0x3780);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff6f), 0xc1);
        // F2 00DD
        gbc.setState(0xdc58, 0xb8ce, 0x4760, 0x3cbf, 0x9765, 0x4342, 0x0, 0x1);
        gbc.writeMem(0xdc58, { 0xf2 });
        gbc.writeMem(0xffbf, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xb8ce);
        EXPECT(gbc.pc(), 0xdc59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc58), 0xf2);
        EXPECT(gbc.readMem(0xffbf), 0xec);
        // F2 00DE
        gbc.setState(0x4f61, 0x8f49, 0xeb50, 0x59a2, 0x3e3a, 0xd33d, 0x0, 0x0);
        gbc.writeMem(0x4f61, { 0xf2 });
        gbc.writeMem(0xffa2, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x8f49);
        EXPECT(gbc.pc(), 0x4f62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffa2), 0xfb);
        // F2 00DF
        gbc.setState(0x36c8, 0x424a, 0x38a0, 0x5779, 0xe736, 0xd0a2, 0x0, 0x1);
        gbc.writeMem(0x36c8, { 0xf2 });
        gbc.writeMem(0xff79, { 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x424a);
        EXPECT(gbc.pc(), 0x36c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff79), 0x18);
        // F2 00E0
        gbc.setState(0xe58d, 0x62f1, 0xec10, 0x6d49, 0xe14a, 0xa149, 0x1, 0x0);
        gbc.writeMem(0xe58d, { 0xf2 });
        gbc.writeMem(0xff49, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x62f1);
        EXPECT(gbc.pc(), 0xe58e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe58d), 0xf2);
        EXPECT(gbc.readMem(0xff49), 0xf0);
        // F2 00E1
        gbc.setState(0x4c5b, 0x11c5, 0x6e30, 0xeea2, 0xb213, 0x4009, 0x0, 0x1);
        gbc.writeMem(0x4c5b, { 0xf2 });
        gbc.writeMem(0xffa2, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x11c5);
        EXPECT(gbc.pc(), 0x4c5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffa2), 0xfb);
        // F2 00E2
        gbc.setState(0x2f98, 0xe91b, 0xca30, 0x76ea, 0x7200, 0xe3cd, 0x1, 0x1);
        gbc.writeMem(0x2f98, { 0xf2 });
        gbc.writeMem(0xffea, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xe91b);
        EXPECT(gbc.pc(), 0x2f99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffea), 0x9f);
        // F2 00E3
        gbc.setState(0xda6, 0xfd4d, 0x110, 0x7a24, 0x29e1, 0xdf2a, 0x0, 0x0);
        gbc.writeMem(0xda6, { 0xf2 });
        gbc.writeMem(0xff24, { 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xfd4d);
        EXPECT(gbc.pc(), 0xda7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff24), 0x2c);
        // F2 00E4
        gbc.setState(0x3f51, 0xc1c, 0x4bd0, 0x2862, 0x698b, 0xbb76, 0x0, 0x0);
        gbc.writeMem(0x3f51, { 0xf2 });
        gbc.writeMem(0xff62, { 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xc1c);
        EXPECT(gbc.pc(), 0x3f52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff62), 0x1a);
        // F2 00E5
        gbc.setState(0x594e, 0x34d5, 0xbe50, 0x25b0, 0xae2a, 0x20b7, 0x0, 0x0);
        gbc.writeMem(0x594e, { 0xf2 });
        gbc.writeMem(0xffb0, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x34d5);
        EXPECT(gbc.pc(), 0x594f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffb0), 0x95);
        // F2 00E6
        gbc.setState(0xc564, 0xe000, 0x6240, 0x1fa2, 0x17b9, 0xf86c, 0x1, 0x1);
        gbc.writeMem(0xc564, { 0xf2 });
        gbc.writeMem(0xffa2, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xe000);
        EXPECT(gbc.pc(), 0xc565);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc564), 0xf2);
        EXPECT(gbc.readMem(0xffa2), 0xfb);
        // F2 00E7
        gbc.setState(0x29a9, 0x3bf0, 0xd390, 0xad55, 0x3780, 0xbd4e, 0x1, 0x0);
        gbc.writeMem(0x29a9, { 0xf2 });
        gbc.writeMem(0xff55, { 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x3bf0);
        EXPECT(gbc.pc(), 0x29aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff55), 0x21);
        // F2 00E8
        gbc.setState(0x1036, 0xfff1, 0xe860, 0x405e, 0xca88, 0xc5b6, 0x0, 0x0);
        gbc.writeMem(0x1036, { 0xf2 });
        gbc.writeMem(0xff5e, { 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xfff1);
        EXPECT(gbc.pc(), 0x1037);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff5e), 0x62);
        // F2 00E9
        gbc.setState(0xe40d, 0x2811, 0xa510, 0x3063, 0x2de7, 0x55cb, 0x0, 0x1);
        gbc.writeMem(0xe40d, { 0xf2 });
        gbc.writeMem(0xff63, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x2811);
        EXPECT(gbc.pc(), 0xe40e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe40d), 0xf2);
        EXPECT(gbc.readMem(0xff63), 0x30);
        // F2 00EA
        gbc.setState(0x3214, 0x97b6, 0x3aa0, 0xf3c5, 0x7e96, 0xb56d, 0x1, 0x1);
        gbc.writeMem(0x3214, { 0xf2 });
        gbc.writeMem(0xffc5, { 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x97b6);
        EXPECT(gbc.pc(), 0x3215);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffc5), 0xe1);
        // F2 00EB
        gbc.setState(0x49ac, 0xf9fc, 0x1810, 0xff04, 0xb4e4, 0xc06a, 0x0, 0x0);
        gbc.writeMem(0x49ac, { 0xf2 });
        gbc.writeMem(0xff04, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xf9fc);
        EXPECT(gbc.pc(), 0x49ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff04), 0x59);
        // F2 00EC
        gbc.setState(0x65b3, 0x73b9, 0x76a0, 0xd8b5, 0x5810, 0x1561, 0x0, 0x0);
        gbc.writeMem(0x65b3, { 0xf2 });
        gbc.writeMem(0xffb5, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x73b9);
        EXPECT(gbc.pc(), 0x65b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffb5), 0x1b);
        // F2 00ED
        gbc.setState(0x2880, 0xa6b7, 0xa280, 0x22f4, 0x8b70, 0xe768, 0x0, 0x1);
        gbc.writeMem(0x2880, { 0xf2 });
        gbc.writeMem(0xfff4, { 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xa6b7);
        EXPECT(gbc.pc(), 0x2881);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfff4), 0xcf);
        // F2 00EE
        gbc.setState(0x621d, 0xf492, 0x4d60, 0xdf28, 0x6458, 0x7ed2, 0x0, 0x0);
        gbc.writeMem(0x621d, { 0xf2 });
        gbc.writeMem(0xff28, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xf492);
        EXPECT(gbc.pc(), 0x621e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff28), 0x95);
        // F2 00EF
        gbc.setState(0x49b6, 0xde04, 0x95c0, 0xdbb8, 0xecc8, 0x9656, 0x0, 0x1);
        gbc.writeMem(0x49b6, { 0xf2 });
        gbc.writeMem(0xffb8, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xde04);
        EXPECT(gbc.pc(), 0x49b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffb8), 0x10);
        // F2 00F1
        gbc.setState(0x4cfd, 0x878b, 0x7d0, 0xd5af, 0xbbb6, 0x6069, 0x0, 0x0);
        gbc.writeMem(0x4cfd, { 0xf2 });
        gbc.writeMem(0xffaf, { 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x878b);
        EXPECT(gbc.pc(), 0x4cfe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffaf), 0x51);
        // F2 00F2
        gbc.setState(0x249e, 0x95c3, 0xe710, 0xd00a, 0xe0a9, 0x5ec4, 0x0, 0x0);
        gbc.writeMem(0x249e, { 0xf2 });
        gbc.writeMem(0xff0a, { 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x95c3);
        EXPECT(gbc.pc(), 0x249f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff0a), 0xeb);
        // F2 00F3
        gbc.setState(0x5e4d, 0x2164, 0x2310, 0xcb1c, 0xce60, 0xc52, 0x0, 0x0);
        gbc.writeMem(0x5e4d, { 0xf2 });
        gbc.writeMem(0xff1c, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x2164);
        EXPECT(gbc.pc(), 0x5e4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff1c), 0x94);
        // F2 00F4
        gbc.setState(0x3ec6, 0x8161, 0xedb0, 0x4c03, 0xa5cf, 0xe61d, 0x0, 0x0);
        gbc.writeMem(0x3ec6, { 0xf2 });
        gbc.writeMem(0xff03, { 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x8161);
        EXPECT(gbc.pc(), 0x3ec7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff03), 0x61);
        // F2 00F5
        gbc.setState(0xa30e, 0x5864, 0x4120, 0x6c03, 0xe574, 0x63cb, 0x1, 0x1);
        gbc.writeMem(0xa30e, { 0xf2 });
        gbc.writeMem(0xff03, { 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x5864);
        EXPECT(gbc.pc(), 0xa30f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa30e), 0xf2);
        EXPECT(gbc.readMem(0xff03), 0x61);
        // F2 00F6
        gbc.setState(0xbd1b, 0xa129, 0x7ec0, 0xdde5, 0x1f62, 0xdd18, 0x1, 0x0);
        gbc.writeMem(0xbd1b, { 0xf2 });
        gbc.writeMem(0xffe5, { 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xa129);
        EXPECT(gbc.pc(), 0xbd1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd1b), 0xf2);
        EXPECT(gbc.readMem(0xffe5), 0x8c);
        // F2 00F7
        gbc.setState(0x4b65, 0x9319, 0xdf30, 0x28e6, 0x3565, 0xc75e, 0x1, 0x1);
        gbc.writeMem(0x4b65, { 0xf2 });
        gbc.writeMem(0xffe6, { 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x9319);
        EXPECT(gbc.pc(), 0x4b66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffe6), 0x2c);
        // F2 00F8
        gbc.setState(0xbd67, 0xd8b0, 0x1550, 0xf1eb, 0xd73a, 0x4e10, 0x1, 0x1);
        gbc.writeMem(0xbd67, { 0xf2 });
        gbc.writeMem(0xffeb, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xd8b0);
        EXPECT(gbc.pc(), 0xbd68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd67), 0xf2);
        EXPECT(gbc.readMem(0xffeb), 0xbb);
        // F2 00F9
        gbc.setState(0xe506, 0xd9a3, 0xf0f0, 0xbc11, 0xc351, 0xda88, 0x1, 0x0);
        gbc.writeMem(0xe506, { 0xf2 });
        gbc.writeMem(0xff11, { 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xd9a3);
        EXPECT(gbc.pc(), 0xe507);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe506), 0xf2);
        EXPECT(gbc.readMem(0xff11), 0x48);
        // F2 00FA
        gbc.setState(0x619, 0x88a1, 0x2ae0, 0x4ab6, 0x742a, 0x5b3d, 0x0, 0x0);
        gbc.writeMem(0x619, { 0xf2 });
        gbc.writeMem(0xffb6, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x88a1);
        EXPECT(gbc.pc(), 0x61a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffb6), 0x46);
        // F2 00FC
        gbc.setState(0x9bb2, 0x1735, 0xdd40, 0x9f27, 0x8f0a, 0xe0ed, 0x1, 0x0);
        gbc.writeMem(0x9bb2, { 0xf2 });
        gbc.writeMem(0xff27, { 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x1735);
        EXPECT(gbc.pc(), 0x9bb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bb2), 0xf2);
        EXPECT(gbc.readMem(0xff27), 0x3c);
        // F2 00FD
        gbc.setState(0x8957, 0xffaa, 0x8eb0, 0x19f5, 0xb0ba, 0xc8dc, 0x0, 0x1);
        gbc.writeMem(0x8957, { 0xf2 });
        gbc.writeMem(0xfff5, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xffaa);
        EXPECT(gbc.pc(), 0x8958);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8957), 0xf2);
        EXPECT(gbc.readMem(0xfff5), 0x37);
        // F2 00FE
        gbc.setState(0xae70, 0x5030, 0xc30, 0xffd0, 0xba86, 0xd1d6, 0x1, 0x0);
        gbc.writeMem(0xae70, { 0xf2 });
        gbc.writeMem(0xffd0, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x5030);
        EXPECT(gbc.pc(), 0xae71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae70), 0xf2);
        EXPECT(gbc.readMem(0xffd0), 0x63);
        // F2 00FF
        gbc.setState(0xbe75, 0x6065, 0x9220, 0x1949, 0x6693, 0x3d14, 0x0, 0x0);
        gbc.writeMem(0xbe75, { 0xf2 });
        gbc.writeMem(0xff49, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x6065);
        EXPECT(gbc.pc(), 0xbe76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe75), 0xf2);
        EXPECT(gbc.readMem(0xff49), 0xf0);
        // F2 0100
        gbc.setState(0x34e2, 0x996f, 0x18a0, 0x46ec, 0xa53f, 0x70bc, 0x0, 0x0);
        gbc.writeMem(0x34e2, { 0xf2 });
        gbc.writeMem(0xffec, { 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x996f);
        EXPECT(gbc.pc(), 0x34e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffec), 0x9d);
        // F2 0101
        gbc.setState(0xc991, 0x8553, 0x4450, 0xc9ab, 0x5249, 0x7109, 0x0, 0x1);
        gbc.writeMem(0xc991, { 0xf2 });
        gbc.writeMem(0xffab, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x8553);
        EXPECT(gbc.pc(), 0xc992);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc991), 0xf2);
        EXPECT(gbc.readMem(0xffab), 0xe7);
        // F2 0102
        gbc.setState(0x803c, 0xab8b, 0x7d0, 0xb344, 0x44f8, 0x94d, 0x1, 0x1);
        gbc.writeMem(0x803c, { 0xf2 });
        gbc.writeMem(0xff44, { 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xab8b);
        EXPECT(gbc.pc(), 0x803d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x803c), 0xf2);
        EXPECT(gbc.readMem(0xff44), 0x93);
        // F2 0103
        gbc.setState(0xbb4e, 0x4e1a, 0x7240, 0xa476, 0xfa68, 0x6c0, 0x1, 0x1);
        gbc.writeMem(0xbb4e, { 0xf2 });
        gbc.writeMem(0xff76, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x4e1a);
        EXPECT(gbc.pc(), 0xbb4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb4e), 0xf2);
        EXPECT(gbc.readMem(0xff76), 0x23);
        // F2 0104
        gbc.setState(0x9b3a, 0x6e8c, 0x8be0, 0x411a, 0x2e99, 0x4e9b, 0x1, 0x1);
        gbc.writeMem(0x9b3a, { 0xf2 });
        gbc.writeMem(0xff1a, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x6e8c);
        EXPECT(gbc.pc(), 0x9b3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b3a), 0xf2);
        EXPECT(gbc.readMem(0xff1a), 0x76);
        // F2 0105
        gbc.setState(0xce3a, 0x1c23, 0xe550, 0x3df6, 0xcffa, 0x9809, 0x1, 0x1);
        gbc.writeMem(0xce3a, { 0xf2 });
        gbc.writeMem(0xfff6, { 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x1c23);
        EXPECT(gbc.pc(), 0xce3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce3a), 0xf2);
        EXPECT(gbc.readMem(0xfff6), 0x3b);
        // F2 0106
        gbc.setState(0x4579, 0x407f, 0xa580, 0xe76b, 0xb85c, 0xecb, 0x0, 0x0);
        gbc.writeMem(0x4579, { 0xf2 });
        gbc.writeMem(0xff6b, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x407f);
        EXPECT(gbc.pc(), 0x457a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff6b), 0x86);
        // F2 0107
        gbc.setState(0xc716, 0xf2e3, 0xc2b0, 0x6f9a, 0x27c0, 0x2b84, 0x0, 0x0);
        gbc.writeMem(0xc716, { 0xf2 });
        gbc.writeMem(0xff9a, { 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xf2e3);
        EXPECT(gbc.pc(), 0xc717);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc716), 0xf2);
        EXPECT(gbc.readMem(0xff9a), 0x2f);
        // F2 0108
        gbc.setState(0xdeb4, 0x1fa2, 0x9760, 0x75ce, 0x4f8b, 0x2392, 0x0, 0x0);
        gbc.writeMem(0xdeb4, { 0xf2 });
        gbc.writeMem(0xffce, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x1fa2);
        EXPECT(gbc.pc(), 0xdeb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdeb4), 0xf2);
        EXPECT(gbc.readMem(0xffce), 0x8d);
        // F2 0109
        gbc.setState(0xa640, 0x1492, 0x4000, 0x8d00, 0x95b0, 0xb3f0, 0x0, 0x0);
        gbc.writeMem(0xa640, { 0xf2 });
        gbc.writeMem(0xff00, { 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x1492);
        EXPECT(gbc.pc(), 0xa641);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa640), 0xf2);
        EXPECT(gbc.readMem(0xff00), 0x3a);
        // F2 010A
        gbc.setState(0x3f98, 0xb737, 0x6820, 0x893e, 0x1ed8, 0x9fff, 0x0, 0x1);
        gbc.writeMem(0x3f98, { 0xf2 });
        gbc.writeMem(0xff3e, { 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xb737);
        EXPECT(gbc.pc(), 0x3f99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff3e), 0x55);
        // F2 010B
        gbc.setState(0x607d, 0x90b9, 0xfbd0, 0xe384, 0xbff1, 0x3ab3, 0x0, 0x0);
        gbc.writeMem(0x607d, { 0xf2 });
        gbc.writeMem(0xff84, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x90b9);
        EXPECT(gbc.pc(), 0x607e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff84), 0xb7);
        // F2 010C
        gbc.setState(0x202a, 0xd4, 0x4ae0, 0x8b5a, 0x1541, 0xbf1d, 0x1, 0x1);
        gbc.writeMem(0x202a, { 0xf2 });
        gbc.writeMem(0xff5a, { 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xd4);
        EXPECT(gbc.pc(), 0x202b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff5a), 0x6a);
        // F2 010D
        gbc.setState(0x3421, 0xb2d7, 0x4dd0, 0x954c, 0x396e, 0xbf44, 0x0, 0x1);
        gbc.writeMem(0x3421, { 0xf2 });
        gbc.writeMem(0xff4c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xb2d7);
        EXPECT(gbc.pc(), 0x3422);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff4c), 0x5a);
        // F2 010E
        gbc.setState(0x63df, 0xa253, 0xd850, 0xa95b, 0x4265, 0xa159, 0x0, 0x0);
        gbc.writeMem(0x63df, { 0xf2 });
        gbc.writeMem(0xff5b, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xa253);
        EXPECT(gbc.pc(), 0x63e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff5b), 0xff);
        // F2 010F
        gbc.setState(0xb99b, 0x3ffd, 0x55e0, 0x4b10, 0x6b4, 0x1eb7, 0x1, 0x1);
        gbc.writeMem(0xb99b, { 0xf2 });
        gbc.writeMem(0xff10, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x3ffd);
        EXPECT(gbc.pc(), 0xb99c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb99b), 0xf2);
        EXPECT(gbc.readMem(0xff10), 0xb7);
        // F2 0110
        gbc.setState(0xad6a, 0x7469, 0x1900, 0x6d3c, 0x28ad, 0x4824, 0x0, 0x0);
        gbc.writeMem(0xad6a, { 0xf2 });
        gbc.writeMem(0xff3c, { 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x7469);
        EXPECT(gbc.pc(), 0xad6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad6a), 0xf2);
        EXPECT(gbc.readMem(0xff3c), 0xfd);
        // F2 0111
        gbc.setState(0x4031, 0x19b1, 0x8d00, 0x6bf9, 0x552d, 0xba9, 0x1, 0x1);
        gbc.writeMem(0x4031, { 0xf2 });
        gbc.writeMem(0xfff9, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x19b1);
        EXPECT(gbc.pc(), 0x4032);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfff9), 0x10);
        // F2 0112
        gbc.setState(0x2e77, 0xd29, 0xd8e0, 0xdd5b, 0xcac5, 0xe3d4, 0x0, 0x1);
        gbc.writeMem(0x2e77, { 0xf2 });
        gbc.writeMem(0xff5b, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xd29);
        EXPECT(gbc.pc(), 0x2e78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff5b), 0xff);
        // F2 0113
        gbc.setState(0x63e0, 0xd44c, 0x6fa0, 0x5cba, 0xb7aa, 0x1a1b, 0x0, 0x1);
        gbc.writeMem(0x63e0, { 0xf2 });
        gbc.writeMem(0xffba, { 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xd44c);
        EXPECT(gbc.pc(), 0x63e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffba), 0x88);
        // F2 0114
        gbc.setState(0x64ab, 0xa0ee, 0x8220, 0x4fb5, 0x7c62, 0x3616, 0x1, 0x0);
        gbc.writeMem(0x64ab, { 0xf2 });
        gbc.writeMem(0xffb5, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xa0ee);
        EXPECT(gbc.pc(), 0x64ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffb5), 0x1b);
        // F2 0115
        gbc.setState(0x1f35, 0x6a2e, 0x5e10, 0x42a7, 0xd192, 0x74ca, 0x1, 0x1);
        gbc.writeMem(0x1f35, { 0xf2 });
        gbc.writeMem(0xffa7, { 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x6a2e);
        EXPECT(gbc.pc(), 0x1f36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffa7), 0xb5);
        // F2 0116
        gbc.setState(0x526d, 0xdd71, 0xaaa0, 0xee8, 0x49fa, 0x2df6, 0x1, 0x0);
        gbc.writeMem(0x526d, { 0xf2 });
        gbc.writeMem(0xffe8, { 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xdd71);
        EXPECT(gbc.pc(), 0x526e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffe8), 0x25);
        // F2 0117
        gbc.setState(0x4f6f, 0xbfa4, 0x2d80, 0x2606, 0x638b, 0x77f3, 0x0, 0x0);
        gbc.writeMem(0x4f6f, { 0xf2 });
        gbc.writeMem(0xff06, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xbfa4);
        EXPECT(gbc.pc(), 0x4f70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff06), 0xf4);
        // F2 0118
        gbc.setState(0x11a7, 0x3f02, 0x3140, 0x3cf7, 0x7036, 0xdc10, 0x0, 0x1);
        gbc.writeMem(0x11a7, { 0xf2 });
        gbc.writeMem(0xfff7, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x3f02);
        EXPECT(gbc.pc(), 0x11a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfff7), 0x2a);
        // F2 0119
        gbc.setState(0x11f5, 0xfbcb, 0xc190, 0x995e, 0xa883, 0x883, 0x0, 0x0);
        gbc.writeMem(0x11f5, { 0xf2 });
        gbc.writeMem(0xff5e, { 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xfbcb);
        EXPECT(gbc.pc(), 0x11f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff5e), 0x62);
        // F2 011A
        gbc.setState(0x7de1, 0xc980, 0xf420, 0x4949, 0x5d0d, 0x240, 0x0, 0x1);
        gbc.writeMem(0x7de1, { 0xf2 });
        gbc.writeMem(0xff49, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xc980);
        EXPECT(gbc.pc(), 0x7de2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff49), 0xf0);
        // F2 011B
        gbc.setState(0x27c3, 0xbdb9, 0xcae0, 0xefb8, 0xdb27, 0x901e, 0x1, 0x0);
        gbc.writeMem(0x27c3, { 0xf2 });
        gbc.writeMem(0xffb8, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xbdb9);
        EXPECT(gbc.pc(), 0x27c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffb8), 0x10);
        // F2 011C
        gbc.setState(0xcd6c, 0xcd7d, 0xa630, 0xf84b, 0x6000, 0x257a, 0x1, 0x1);
        gbc.writeMem(0xcd6c, { 0xf2 });
        gbc.writeMem(0xff4b, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xcd7d);
        EXPECT(gbc.pc(), 0xcd6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd6c), 0xf2);
        EXPECT(gbc.readMem(0xff4b), 0xdf);
        // F2 011D
        gbc.setState(0x35d0, 0x7752, 0x9e0, 0x8998, 0x7285, 0xf9b9, 0x0, 0x1);
        gbc.writeMem(0x35d0, { 0xf2 });
        gbc.writeMem(0xff98, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x7752);
        EXPECT(gbc.pc(), 0x35d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff98), 0x95);
        // F2 011E
        gbc.setState(0x4e69, 0x5e63, 0xcd0, 0xe985, 0x6d2f, 0x279, 0x1, 0x0);
        gbc.writeMem(0x4e69, { 0xf2 });
        gbc.writeMem(0xff85, { 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x5e63);
        EXPECT(gbc.pc(), 0x4e6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff85), 0x9e);
        // F2 011F
        gbc.setState(0x936b, 0xc565, 0x8850, 0xee7d, 0xd6e1, 0x4c87, 0x0, 0x0);
        gbc.writeMem(0x936b, { 0xf2 });
        gbc.writeMem(0xff7d, { 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xc565);
        EXPECT(gbc.pc(), 0x936c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x936b), 0xf2);
        EXPECT(gbc.readMem(0xff7d), 0xed);
        // F2 0120
        gbc.setState(0xef52, 0x1a09, 0xc950, 0x7223, 0xda98, 0xa188, 0x0, 0x0);
        gbc.writeMem(0xef52, { 0xf2 });
        gbc.writeMem(0xff23, { 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x1a09);
        EXPECT(gbc.pc(), 0xef53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef52), 0xf2);
        EXPECT(gbc.readMem(0xff23), 0x45);
        // F2 0122
        gbc.setState(0xbf76, 0x3476, 0xe050, 0xb6fa, 0x9add, 0xba9d, 0x0, 0x0);
        gbc.writeMem(0xbf76, { 0xf2 });
        gbc.writeMem(0xfffa, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x3476);
        EXPECT(gbc.pc(), 0xbf77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf76), 0xf2);
        EXPECT(gbc.readMem(0xfffa), 0xd5);
        // F2 0123
        gbc.setState(0xbd8f, 0x361d, 0x33f0, 0x48ed, 0xabb7, 0xfdc5, 0x0, 0x1);
        gbc.writeMem(0xbd8f, { 0xf2 });
        gbc.writeMem(0xffed, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x361d);
        EXPECT(gbc.pc(), 0xbd90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd8f), 0xf2);
        EXPECT(gbc.readMem(0xffed), 0xa9);
        // F2 0124
        gbc.setState(0xb432, 0xb958, 0x2fe0, 0x8134, 0x576f, 0xca26, 0x0, 0x0);
        gbc.writeMem(0xb432, { 0xf2 });
        gbc.writeMem(0xff34, { 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xb958);
        EXPECT(gbc.pc(), 0xb433);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb432), 0xf2);
        EXPECT(gbc.readMem(0xff34), 0xcb);
        // F2 0125
        gbc.setState(0xc51, 0x6ea8, 0x3c00, 0xafbf, 0x3158, 0x2956, 0x1, 0x0);
        gbc.writeMem(0xc51, { 0xf2 });
        gbc.writeMem(0xffbf, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x6ea8);
        EXPECT(gbc.pc(), 0xc52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffbf), 0xec);
        // F2 0126
        gbc.setState(0x5ba, 0x5a53, 0x7e50, 0x516d, 0x4282, 0xdac9, 0x1, 0x1);
        gbc.writeMem(0x5ba, { 0xf2 });
        gbc.writeMem(0xff6d, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x5a53);
        EXPECT(gbc.pc(), 0x5bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff6d), 0x95);
        // F2 0127
        gbc.setState(0x24c6, 0xe38, 0x3b20, 0xc009, 0x6e17, 0x19df, 0x0, 0x0);
        gbc.writeMem(0x24c6, { 0xf2 });
        gbc.writeMem(0xff09, { 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xe38);
        EXPECT(gbc.pc(), 0x24c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff09), 0x53);
        // F2 0128
        gbc.setState(0x4b54, 0xdbba, 0x68a0, 0xac31, 0x50a3, 0x75d1, 0x1, 0x0);
        gbc.writeMem(0x4b54, { 0xf2 });
        gbc.writeMem(0xff31, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xdbba);
        EXPECT(gbc.pc(), 0x4b55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff31), 0x40);
        // F2 0129
        gbc.setState(0x2192, 0x8f7, 0x1e0, 0x1ee0, 0x4ef1, 0x17e2, 0x0, 0x0);
        gbc.writeMem(0x2192, { 0xf2 });
        gbc.writeMem(0xffe0, { 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x8f7);
        EXPECT(gbc.pc(), 0x2193);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffe0), 0x75);
        // F2 012A
        gbc.setState(0xa0f8, 0xe55b, 0x46f0, 0x1ad2, 0xaef, 0xb02e, 0x0, 0x1);
        gbc.writeMem(0xa0f8, { 0xf2 });
        gbc.writeMem(0xffd2, { 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xe55b);
        EXPECT(gbc.pc(), 0xa0f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0f8), 0xf2);
        EXPECT(gbc.readMem(0xffd2), 0x31);
        // F2 012B
        gbc.setState(0xef72, 0x6583, 0x6ed0, 0x1700, 0xc4c4, 0x88a5, 0x1, 0x1);
        gbc.writeMem(0xef72, { 0xf2 });
        gbc.writeMem(0xff00, { 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x6583);
        EXPECT(gbc.pc(), 0xef73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef72), 0xf2);
        EXPECT(gbc.readMem(0xff00), 0x3a);
        // F2 012C
        gbc.setState(0xeb9f, 0xfe17, 0x3c00, 0xb039, 0x376e, 0x547c, 0x0, 0x0);
        gbc.writeMem(0xeb9f, { 0xf2 });
        gbc.writeMem(0xff39, { 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xfe17);
        EXPECT(gbc.pc(), 0xeba0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb9f), 0xf2);
        EXPECT(gbc.readMem(0xff39), 0xc3);
        // F2 012D
        gbc.setState(0x7f8e, 0x9310, 0x5f50, 0x3f4b, 0xfa47, 0x5eba, 0x0, 0x1);
        gbc.writeMem(0x7f8e, { 0xf2 });
        gbc.writeMem(0xff4b, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x9310);
        EXPECT(gbc.pc(), 0x7f8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff4b), 0xdf);
        // F2 012E
        gbc.setState(0xbfcc, 0xa4dd, 0x4f90, 0x8d2, 0xfb80, 0x3a73, 0x1, 0x1);
        gbc.writeMem(0xbfcc, { 0xf2 });
        gbc.writeMem(0xffd2, { 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xa4dd);
        EXPECT(gbc.pc(), 0xbfcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfcc), 0xf2);
        EXPECT(gbc.readMem(0xffd2), 0x31);
        // F2 012F
        gbc.setState(0x4a51, 0x7818, 0x1b0, 0x45bb, 0x6215, 0x238d, 0x0, 0x0);
        gbc.writeMem(0x4a51, { 0xf2 });
        gbc.writeMem(0xffbb, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x7818);
        EXPECT(gbc.pc(), 0x4a52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffbb), 0x22);
        // F2 0130
        gbc.setState(0x4599, 0x7cf2, 0x9d60, 0xb634, 0xa07a, 0x70b6, 0x0, 0x1);
        gbc.writeMem(0x4599, { 0xf2 });
        gbc.writeMem(0xff34, { 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x7cf2);
        EXPECT(gbc.pc(), 0x459a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff34), 0xcb);
        // F2 0132
        gbc.setState(0x91b, 0xb287, 0x67b0, 0xf41f, 0x5871, 0x70f2, 0x0, 0x1);
        gbc.writeMem(0x91b, { 0xf2 });
        gbc.writeMem(0xff1f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xb287);
        EXPECT(gbc.pc(), 0x91c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff1f), 0x8b);
        // F2 0133
        gbc.setState(0x18c2, 0x98e4, 0x5970, 0xe9d1, 0x3a0b, 0xf523, 0x0, 0x0);
        gbc.writeMem(0x18c2, { 0xf2 });
        gbc.writeMem(0xffd1, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x98e4);
        EXPECT(gbc.pc(), 0x18c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffd1), 0x4d);
        // F2 0134
        gbc.setState(0xb3d6, 0x167a, 0x8520, 0x7a8, 0xdee, 0xffff, 0x0, 0x1);
        gbc.writeMem(0xb3d6, { 0xf2 });
        gbc.writeMem(0xffa8, { 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x167a);
        EXPECT(gbc.pc(), 0xb3d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3d6), 0xf2);
        EXPECT(gbc.readMem(0xffa8), 0x85);
        // F2 0135
        gbc.setState(0x7237, 0x3dab, 0x3a70, 0xd0bb, 0xa4d1, 0x7e23, 0x0, 0x0);
        gbc.writeMem(0x7237, { 0xf2 });
        gbc.writeMem(0xffbb, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x3dab);
        EXPECT(gbc.pc(), 0x7238);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffbb), 0x22);
        // F2 0136
        gbc.setState(0x3afe, 0x9203, 0xc8b0, 0x4d20, 0x801f, 0x2960, 0x1, 0x0);
        gbc.writeMem(0x3afe, { 0xf2 });
        gbc.writeMem(0xff20, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x9203);
        EXPECT(gbc.pc(), 0x3aff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff20), 0xec);
        // F2 0137
        gbc.setState(0x4428, 0x2cd5, 0x8170, 0xc5a5, 0x95d9, 0xcdd, 0x0, 0x0);
        gbc.writeMem(0x4428, { 0xf2 });
        gbc.writeMem(0xffa5, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x2cd5);
        EXPECT(gbc.pc(), 0x4429);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffa5), 0x9);
        // F2 0138
        gbc.setState(0x61eb, 0xa536, 0x40c0, 0x667f, 0xe0e5, 0x12cd, 0x0, 0x0);
        gbc.writeMem(0x61eb, { 0xf2 });
        gbc.writeMem(0xff7f, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xa536);
        EXPECT(gbc.pc(), 0x61ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff7f), 0x9);
        // F2 0139
        gbc.setState(0x8bcd, 0x6a57, 0x24e0, 0xad94, 0x1ae3, 0x7633, 0x1, 0x1);
        gbc.writeMem(0x8bcd, { 0xf2 });
        gbc.writeMem(0xff94, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x6a57);
        EXPECT(gbc.pc(), 0x8bce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bcd), 0xf2);
        EXPECT(gbc.readMem(0xff94), 0x59);
        // F2 013A
        gbc.setState(0x5e42, 0xcc22, 0xb910, 0x5b77, 0x227c, 0x6d0d, 0x0, 0x0);
        gbc.writeMem(0x5e42, { 0xf2 });
        gbc.writeMem(0xff77, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xcc22);
        EXPECT(gbc.pc(), 0x5e43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff77), 0x52);
        // F2 013B
        gbc.setState(0x4824, 0xdab6, 0x1560, 0xbb0f, 0xa507, 0xebc8, 0x0, 0x1);
        gbc.writeMem(0x4824, { 0xf2 });
        gbc.writeMem(0xff0f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xdab6);
        EXPECT(gbc.pc(), 0x4825);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff0f), 0x9f);
        // F2 013C
        gbc.setState(0x1c5, 0x8ec6, 0x7920, 0xdd99, 0x654f, 0xac54, 0x0, 0x0);
        gbc.writeMem(0x1c5, { 0xf2 });
        gbc.writeMem(0xff99, { 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x8ec6);
        EXPECT(gbc.pc(), 0x1c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff99), 0x3d);
        // F2 013E
        gbc.setState(0xe00f, 0x4f4f, 0xcf70, 0x5b99, 0x3179, 0x1473, 0x0, 0x0);
        gbc.writeMem(0xe00f, { 0xf2 });
        gbc.writeMem(0xff99, { 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x4f4f);
        EXPECT(gbc.pc(), 0xe010);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe00f), 0xf2);
        EXPECT(gbc.readMem(0xff99), 0x3d);
        // F2 0141
        gbc.setState(0x65e9, 0xa0d3, 0x7050, 0xb0d9, 0x586a, 0x1caf, 0x1, 0x0);
        gbc.writeMem(0x65e9, { 0xf2 });
        gbc.writeMem(0xffd9, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xa0d3);
        EXPECT(gbc.pc(), 0x65ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffd9), 0xa3);
        // F2 0142
        gbc.setState(0xbfbf, 0x5808, 0x5e0, 0xa8be, 0x993c, 0xe34c, 0x1, 0x1);
        gbc.writeMem(0xbfbf, { 0xf2 });
        gbc.writeMem(0xffbe, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x5808);
        EXPECT(gbc.pc(), 0xbfc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfbf), 0xf2);
        EXPECT(gbc.readMem(0xffbe), 0xdb);
        // F2 0143
        gbc.setState(0xa462, 0x9443, 0x6240, 0x9f17, 0x7c3f, 0xdc96, 0x1, 0x1);
        gbc.writeMem(0xa462, { 0xf2 });
        gbc.writeMem(0xff17, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x9443);
        EXPECT(gbc.pc(), 0xa463);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa462), 0xf2);
        EXPECT(gbc.readMem(0xff17), 0x9);
        // F2 0144
        gbc.setState(0xc975, 0xd00a, 0x7300, 0xb93d, 0x33e3, 0x5434, 0x0, 0x0);
        gbc.writeMem(0xc975, { 0xf2 });
        gbc.writeMem(0xff3d, { 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xd00a);
        EXPECT(gbc.pc(), 0xc976);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc975), 0xf2);
        EXPECT(gbc.readMem(0xff3d), 0xcb);
        // F2 0145
        gbc.setState(0x303e, 0xc1e0, 0xb710, 0xccca, 0x4a2d, 0xf4e, 0x1, 0x1);
        gbc.writeMem(0x303e, { 0xf2 });
        gbc.writeMem(0xffca, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xc1e0);
        EXPECT(gbc.pc(), 0x303f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffca), 0x9);
        // F2 0146
        gbc.setState(0xbead, 0x732d, 0xd50, 0xd2f4, 0x8fce, 0x2177, 0x1, 0x0);
        gbc.writeMem(0xbead, { 0xf2 });
        gbc.writeMem(0xfff4, { 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x732d);
        EXPECT(gbc.pc(), 0xbeae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbead), 0xf2);
        EXPECT(gbc.readMem(0xfff4), 0xcf);
        // F2 0147
        gbc.setState(0x50bf, 0x8b18, 0xa200, 0xe063, 0x8c23, 0x11ef, 0x1, 0x1);
        gbc.writeMem(0x50bf, { 0xf2 });
        gbc.writeMem(0xff63, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x8b18);
        EXPECT(gbc.pc(), 0x50c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff63), 0x30);
        // F2 0148
        gbc.setState(0x40b5, 0x5f9a, 0x55f0, 0x90b, 0x7ce5, 0x9ff4, 0x1, 0x0);
        gbc.writeMem(0x40b5, { 0xf2 });
        gbc.writeMem(0xff0b, { 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x5f9a);
        EXPECT(gbc.pc(), 0x40b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff0b), 0xea);
        // F2 0149
        gbc.setState(0xe25a, 0x4f5b, 0xa010, 0x540d, 0x796b, 0xa3fe, 0x1, 0x1);
        gbc.writeMem(0xe25a, { 0xf2 });
        gbc.writeMem(0xff0d, { 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x4f5b);
        EXPECT(gbc.pc(), 0xe25b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe25a), 0xf2);
        EXPECT(gbc.readMem(0xff0d), 0xa0);
        // F2 014A
        gbc.setState(0x682b, 0x50e6, 0xf070, 0xb5e1, 0x2877, 0xcb61, 0x0, 0x0);
        gbc.writeMem(0x682b, { 0xf2 });
        gbc.writeMem(0xffe1, { 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x50e6);
        EXPECT(gbc.pc(), 0x682c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffe1), 0x88);
        // F2 014B
        gbc.setState(0x378a, 0x2f41, 0xff0, 0x38fd, 0xe2a9, 0x50da, 0x0, 0x1);
        gbc.writeMem(0x378a, { 0xf2 });
        gbc.writeMem(0xfffd, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x2f41);
        EXPECT(gbc.pc(), 0x378b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfffd), 0xb7);
        // F2 014C
        gbc.setState(0x2fbc, 0xdb61, 0x7540, 0x21c1, 0x2fd9, 0x2441, 0x0, 0x1);
        gbc.writeMem(0x2fbc, { 0xf2 });
        gbc.writeMem(0xffc1, { 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xdb61);
        EXPECT(gbc.pc(), 0x2fbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffc1), 0xa1);
        // F2 014D
        gbc.setState(0x3df2, 0x486d, 0x37e0, 0xd78b, 0xd466, 0x438a, 0x0, 0x0);
        gbc.writeMem(0x3df2, { 0xf2 });
        gbc.writeMem(0xff8b, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x486d);
        EXPECT(gbc.pc(), 0x3df3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff8b), 0x23);
        // F2 014E
        gbc.setState(0x623e, 0x9da0, 0x8720, 0xab60, 0xf5ad, 0x50fb, 0x1, 0x0);
        gbc.writeMem(0x623e, { 0xf2 });
        gbc.writeMem(0xff60, { 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x9da0);
        EXPECT(gbc.pc(), 0x623f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff60), 0x82);
        // F2 014F
        gbc.setState(0x35ac, 0x9571, 0xc770, 0x7b2, 0xc9dc, 0x7ef2, 0x1, 0x0);
        gbc.writeMem(0x35ac, { 0xf2 });
        gbc.writeMem(0xffb2, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x9571);
        EXPECT(gbc.pc(), 0x35ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffb2), 0x11);
        // F2 0150
        gbc.setState(0x88ef, 0x11b1, 0xc0b0, 0x4e5e, 0xa365, 0x7ac4, 0x1, 0x1);
        gbc.writeMem(0x88ef, { 0xf2 });
        gbc.writeMem(0xff5e, { 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x11b1);
        EXPECT(gbc.pc(), 0x88f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88ef), 0xf2);
        EXPECT(gbc.readMem(0xff5e), 0x62);
        // F2 0151
        gbc.setState(0x2b16, 0x6a2c, 0xe8d0, 0x883f, 0x2695, 0x7575, 0x1, 0x0);
        gbc.writeMem(0x2b16, { 0xf2 });
        gbc.writeMem(0xff3f, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x6a2c);
        EXPECT(gbc.pc(), 0x2b17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff3f), 0xa4);
        // F2 0152
        gbc.setState(0x4c52, 0x324, 0xfa70, 0x4895, 0x8635, 0xd53b, 0x0, 0x0);
        gbc.writeMem(0x4c52, { 0xf2 });
        gbc.writeMem(0xff95, { 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x324);
        EXPECT(gbc.pc(), 0x4c53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff95), 0x33);
        // F2 0153
        gbc.setState(0x173a, 0xe9b9, 0xa260, 0x868f, 0xbd52, 0x49a4, 0x0, 0x0);
        gbc.writeMem(0x173a, { 0xf2 });
        gbc.writeMem(0xff8f, { 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xe9b9);
        EXPECT(gbc.pc(), 0x173b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff8f), 0x1c);
        // F2 0154
        gbc.setState(0xb26, 0xa4be, 0xdb00, 0x341c, 0x342, 0xbc9b, 0x1, 0x1);
        gbc.writeMem(0xb26, { 0xf2 });
        gbc.writeMem(0xff1c, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xa4be);
        EXPECT(gbc.pc(), 0xb27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff1c), 0x94);
        // F2 0155
        gbc.setState(0x8287, 0x3c3, 0xcf80, 0xc00a, 0x7b08, 0x77f1, 0x0, 0x1);
        gbc.writeMem(0x8287, { 0xf2 });
        gbc.writeMem(0xff0a, { 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x3c3);
        EXPECT(gbc.pc(), 0x8288);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8287), 0xf2);
        EXPECT(gbc.readMem(0xff0a), 0xeb);
        // F2 0156
        gbc.setState(0xe67a, 0xf190, 0x8900, 0xa1f9, 0xdba0, 0x369c, 0x1, 0x1);
        gbc.writeMem(0xe67a, { 0xf2 });
        gbc.writeMem(0xfff9, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xf190);
        EXPECT(gbc.pc(), 0xe67b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe67a), 0xf2);
        EXPECT(gbc.readMem(0xfff9), 0x10);
        // F2 0157
        gbc.setState(0x42f4, 0x114b, 0x1070, 0x6453, 0xc0fe, 0xa255, 0x1, 0x1);
        gbc.writeMem(0x42f4, { 0xf2 });
        gbc.writeMem(0xff53, { 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x114b);
        EXPECT(gbc.pc(), 0x42f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff53), 0xd2);
        // F2 0158
        gbc.setState(0x81b2, 0xec29, 0x3370, 0x70f0, 0xfd4e, 0xca42, 0x0, 0x0);
        gbc.writeMem(0x81b2, { 0xf2 });
        gbc.writeMem(0xfff0, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xec29);
        EXPECT(gbc.pc(), 0x81b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81b2), 0xf2);
        EXPECT(gbc.readMem(0xfff0), 0xc0);
        // F2 0159
        gbc.setState(0x8ea4, 0xb23d, 0xc320, 0x2589, 0x7deb, 0x7b38, 0x1, 0x1);
        gbc.writeMem(0x8ea4, { 0xf2 });
        gbc.writeMem(0xff89, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xb23d);
        EXPECT(gbc.pc(), 0x8ea5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ea4), 0xf2);
        EXPECT(gbc.readMem(0xff89), 0xd);
        // F2 015A
        gbc.setState(0x6aa7, 0xf1bf, 0x5250, 0x2526, 0xb893, 0x5710, 0x0, 0x1);
        gbc.writeMem(0x6aa7, { 0xf2 });
        gbc.writeMem(0xff26, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xf1bf);
        EXPECT(gbc.pc(), 0x6aa8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff26), 0x57);
        // F2 015B
        gbc.setState(0x816, 0xfa06, 0x1d30, 0x7d83, 0x461e, 0x892f, 0x1, 0x1);
        gbc.writeMem(0x816, { 0xf2 });
        gbc.writeMem(0xff83, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xfa06);
        EXPECT(gbc.pc(), 0x817);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff83), 0x52);
        // F2 015C
        gbc.setState(0x1d83, 0xa230, 0x17e0, 0x83d3, 0x1e1, 0x3b74, 0x0, 0x1);
        gbc.writeMem(0x1d83, { 0xf2 });
        gbc.writeMem(0xffd3, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xa230);
        EXPECT(gbc.pc(), 0x1d84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffd3), 0xbb);
        // F2 015D
        gbc.setState(0xb9cb, 0xb4c4, 0x9320, 0x1bd4, 0x2351, 0xcf1e, 0x1, 0x1);
        gbc.writeMem(0xb9cb, { 0xf2 });
        gbc.writeMem(0xffd4, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xb4c4);
        EXPECT(gbc.pc(), 0xb9cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9cb), 0xf2);
        EXPECT(gbc.readMem(0xffd4), 0x9f);
        // F2 015E
        gbc.setState(0x7e4e, 0x1496, 0x4110, 0xa9c, 0x85d5, 0xc166, 0x0, 0x0);
        gbc.writeMem(0x7e4e, { 0xf2 });
        gbc.writeMem(0xff9c, { 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x1496);
        EXPECT(gbc.pc(), 0x7e4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff9c), 0xb6);
        // F2 015F
        gbc.setState(0xa075, 0xd967, 0xb130, 0xadca, 0x3f27, 0x7aad, 0x1, 0x0);
        gbc.writeMem(0xa075, { 0xf2 });
        gbc.writeMem(0xffca, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xd967);
        EXPECT(gbc.pc(), 0xa076);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa075), 0xf2);
        EXPECT(gbc.readMem(0xffca), 0x9);
        // F2 0160
        gbc.setState(0xdadc, 0xd879, 0x7e80, 0xf9f0, 0x483, 0xdb14, 0x1, 0x0);
        gbc.writeMem(0xdadc, { 0xf2 });
        gbc.writeMem(0xfff0, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xd879);
        EXPECT(gbc.pc(), 0xdadd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdadc), 0xf2);
        EXPECT(gbc.readMem(0xfff0), 0xc0);
        // F2 0161
        gbc.setState(0xc6d5, 0x2118, 0xffa0, 0x9b99, 0xa114, 0x853d, 0x1, 0x1);
        gbc.writeMem(0xc6d5, { 0xf2 });
        gbc.writeMem(0xff99, { 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x2118);
        EXPECT(gbc.pc(), 0xc6d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6d5), 0xf2);
        EXPECT(gbc.readMem(0xff99), 0x3d);
        // F2 0162
        gbc.setState(0x56ad, 0x6f7c, 0x810, 0x4ac4, 0xd0f1, 0xab13, 0x1, 0x1);
        gbc.writeMem(0x56ad, { 0xf2 });
        gbc.writeMem(0xffc4, { 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x6f7c);
        EXPECT(gbc.pc(), 0x56ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffc4), 0x9d);
        // F2 0163
        gbc.setState(0xb9d4, 0x2610, 0x92c0, 0x6945, 0xa55b, 0x39d3, 0x1, 0x0);
        gbc.writeMem(0xb9d4, { 0xf2 });
        gbc.writeMem(0xff45, { 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x2610);
        EXPECT(gbc.pc(), 0xb9d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9d4), 0xf2);
        EXPECT(gbc.readMem(0xff45), 0xd4);
        // F2 0164
        gbc.setState(0x8b2a, 0x9867, 0x7f30, 0x2bf0, 0x9627, 0xfbcc, 0x1, 0x0);
        gbc.writeMem(0x8b2a, { 0xf2 });
        gbc.writeMem(0xfff0, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x9867);
        EXPECT(gbc.pc(), 0x8b2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b2a), 0xf2);
        EXPECT(gbc.readMem(0xfff0), 0xc0);
        // F2 0165
        gbc.setState(0xc38a, 0x7227, 0x83b0, 0x332f, 0x8775, 0x6bb4, 0x1, 0x0);
        gbc.writeMem(0xc38a, { 0xf2 });
        gbc.writeMem(0xff2f, { 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x7227);
        EXPECT(gbc.pc(), 0xc38b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc38a), 0xf2);
        EXPECT(gbc.readMem(0xff2f), 0x91);
        // F2 0166
        gbc.setState(0xb749, 0x23d, 0xa510, 0x3923, 0xc000, 0x2f93, 0x1, 0x0);
        gbc.writeMem(0xb749, { 0xf2 });
        gbc.writeMem(0xff23, { 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x23d);
        EXPECT(gbc.pc(), 0xb74a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb749), 0xf2);
        EXPECT(gbc.readMem(0xff23), 0x45);
        // F2 0168
        gbc.setState(0xe74, 0x9f8f, 0x4560, 0x2e46, 0xd5b8, 0xc814, 0x1, 0x0);
        gbc.writeMem(0xe74, { 0xf2 });
        gbc.writeMem(0xff46, { 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x9f8f);
        EXPECT(gbc.pc(), 0xe75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff46), 0xbc);
        // F2 0169
        gbc.setState(0x5b31, 0xed5a, 0xb0a0, 0xf7a8, 0x9445, 0x4b91, 0x0, 0x1);
        gbc.writeMem(0x5b31, { 0xf2 });
        gbc.writeMem(0xffa8, { 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xed5a);
        EXPECT(gbc.pc(), 0x5b32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffa8), 0x85);
        // F2 016A
        gbc.setState(0x5b, 0xd444, 0x94c0, 0x1b0e, 0x40fb, 0x9c11, 0x1, 0x0);
        gbc.writeMem(0x5b, { 0xf2 });
        gbc.writeMem(0xff0e, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xd444);
        EXPECT(gbc.pc(), 0x5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff0e), 0xa6);
        // F2 016B
        gbc.setState(0xaf23, 0xda81, 0x1b80, 0x15ec, 0x96da, 0xe1db, 0x1, 0x0);
        gbc.writeMem(0xaf23, { 0xf2 });
        gbc.writeMem(0xffec, { 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xda81);
        EXPECT(gbc.pc(), 0xaf24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf23), 0xf2);
        EXPECT(gbc.readMem(0xffec), 0x9d);
        // F2 016C
        gbc.setState(0x667d, 0xb4c0, 0x5630, 0x6e14, 0xdfbf, 0x14dd, 0x1, 0x1);
        gbc.writeMem(0x667d, { 0xf2 });
        gbc.writeMem(0xff14, { 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xb4c0);
        EXPECT(gbc.pc(), 0x667e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff14), 0xae);
        // F2 016D
        gbc.setState(0x6286, 0x1753, 0xbf30, 0x4ad, 0x93a9, 0xe56f, 0x0, 0x1);
        gbc.writeMem(0x6286, { 0xf2 });
        gbc.writeMem(0xffad, { 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x1753);
        EXPECT(gbc.pc(), 0x6287);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffad), 0xb9);
        // F2 016E
        gbc.setState(0x3bf7, 0x2f61, 0xf70, 0x491c, 0x790e, 0xf9d, 0x0, 0x0);
        gbc.writeMem(0x3bf7, { 0xf2 });
        gbc.writeMem(0xff1c, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x2f61);
        EXPECT(gbc.pc(), 0x3bf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff1c), 0x94);
        // F2 016F
        gbc.setState(0x20f6, 0xc61d, 0x99e0, 0xa3d4, 0x7503, 0xedfb, 0x1, 0x1);
        gbc.writeMem(0x20f6, { 0xf2 });
        gbc.writeMem(0xffd4, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xc61d);
        EXPECT(gbc.pc(), 0x20f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffd4), 0x9f);
        // F2 0170
        gbc.setState(0xad9d, 0xcaf9, 0x94e0, 0xa6f1, 0xefa4, 0xe4f6, 0x0, 0x1);
        gbc.writeMem(0xad9d, { 0xf2 });
        gbc.writeMem(0xfff1, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xcaf9);
        EXPECT(gbc.pc(), 0xad9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad9d), 0xf2);
        EXPECT(gbc.readMem(0xfff1), 0x77);
        // F2 0171
        gbc.setState(0x343d, 0x3da3, 0xecf0, 0x9f13, 0x4c2f, 0x12d0, 0x1, 0x1);
        gbc.writeMem(0x343d, { 0xf2 });
        gbc.writeMem(0xff13, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x3da3);
        EXPECT(gbc.pc(), 0x343e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff13), 0xc0);
        // F2 0172
        gbc.setState(0x16cd, 0x10da, 0xb5d0, 0x1a22, 0xb32c, 0xfe35, 0x1, 0x0);
        gbc.writeMem(0x16cd, { 0xf2 });
        gbc.writeMem(0xff22, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x10da);
        EXPECT(gbc.pc(), 0x16ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff22), 0x77);
        // F2 0173
        gbc.setState(0xb9c6, 0xabb1, 0x6020, 0x7a07, 0xdb29, 0x4f36, 0x0, 0x1);
        gbc.writeMem(0xb9c6, { 0xf2 });
        gbc.writeMem(0xff07, { 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xabb1);
        EXPECT(gbc.pc(), 0xb9c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9c6), 0xf2);
        EXPECT(gbc.readMem(0xff07), 0x13);
        // F2 0174
        gbc.setState(0x9b71, 0xce58, 0xfa10, 0x51e1, 0xbc26, 0xaa8f, 0x0, 0x1);
        gbc.writeMem(0x9b71, { 0xf2 });
        gbc.writeMem(0xffe1, { 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xce58);
        EXPECT(gbc.pc(), 0x9b72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b71), 0xf2);
        EXPECT(gbc.readMem(0xffe1), 0x88);
        // F2 0176
        gbc.setState(0x1be0, 0xd75d, 0xde00, 0x28a1, 0x27c7, 0x19a4, 0x1, 0x1);
        gbc.writeMem(0x1be0, { 0xf2 });
        gbc.writeMem(0xffa1, { 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xd75d);
        EXPECT(gbc.pc(), 0x1be1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffa1), 0xd0);
        // F2 0177
        gbc.setState(0xe97e, 0x199e, 0xb2c0, 0x15df, 0xf373, 0xfbc5, 0x0, 0x0);
        gbc.writeMem(0xe97e, { 0xf2 });
        gbc.writeMem(0xffdf, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x199e);
        EXPECT(gbc.pc(), 0xe97f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe97e), 0xf2);
        EXPECT(gbc.readMem(0xffdf), 0xd);
        // F2 0178
        gbc.setState(0x5e9b, 0x6944, 0x9c70, 0x45cd, 0x84ac, 0xb59d, 0x1, 0x1);
        gbc.writeMem(0x5e9b, { 0xf2 });
        gbc.writeMem(0xffcd, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x6944);
        EXPECT(gbc.pc(), 0x5e9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffcd), 0x10);
        // F2 0179
        gbc.setState(0x130d, 0xf02f, 0x2660, 0x4a9b, 0x7524, 0xa4a5, 0x1, 0x1);
        gbc.writeMem(0x130d, { 0xf2 });
        gbc.writeMem(0xff9b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xf02f);
        EXPECT(gbc.pc(), 0x130e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff9b), 0xfb);
        // F2 017A
        gbc.setState(0x2aab, 0x4381, 0x340, 0x664e, 0xd1b, 0x11ff, 0x1, 0x1);
        gbc.writeMem(0x2aab, { 0xf2 });
        gbc.writeMem(0xff4e, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x4381);
        EXPECT(gbc.pc(), 0x2aac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff4e), 0xf);
        // F2 017B
        gbc.setState(0x50b5, 0x8909, 0x87e0, 0xd7c6, 0x977a, 0x8bc6, 0x1, 0x0);
        gbc.writeMem(0x50b5, { 0xf2 });
        gbc.writeMem(0xffc6, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x8909);
        EXPECT(gbc.pc(), 0x50b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffc6), 0x37);
        // F2 017C
        gbc.setState(0x2d34, 0x21bd, 0xded0, 0xf91a, 0x4514, 0x4370, 0x1, 0x0);
        gbc.writeMem(0x2d34, { 0xf2 });
        gbc.writeMem(0xff1a, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x21bd);
        EXPECT(gbc.pc(), 0x2d35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff1a), 0x76);
        // F2 017D
        gbc.setState(0x8087, 0xa1f2, 0xd8c0, 0x7c42, 0x696b, 0x8ebe, 0x0, 0x0);
        gbc.writeMem(0x8087, { 0xf2 });
        gbc.writeMem(0xff42, { 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xa1f2);
        EXPECT(gbc.pc(), 0x8088);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8087), 0xf2);
        EXPECT(gbc.readMem(0xff42), 0x50);
        // F2 017E
        gbc.setState(0x4ec4, 0xa972, 0x1510, 0x468e, 0x6bdf, 0x8ac4, 0x1, 0x0);
        gbc.writeMem(0x4ec4, { 0xf2 });
        gbc.writeMem(0xff8e, { 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xa972);
        EXPECT(gbc.pc(), 0x4ec5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff8e), 0xe3);
        // F2 017F
        gbc.setState(0xa456, 0x74f8, 0x10f0, 0xf841, 0x2e66, 0xf0b7, 0x0, 0x0);
        gbc.writeMem(0xa456, { 0xf2 });
        gbc.writeMem(0xff41, { 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x74f8);
        EXPECT(gbc.pc(), 0xa457);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa456), 0xf2);
        EXPECT(gbc.readMem(0xff41), 0x4);
        // F2 0180
        gbc.setState(0x7e79, 0x5171, 0x2140, 0x230f, 0x8d56, 0xbc7a, 0x1, 0x1);
        gbc.writeMem(0x7e79, { 0xf2 });
        gbc.writeMem(0xff0f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x5171);
        EXPECT(gbc.pc(), 0x7e7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff0f), 0x9f);
        // F2 0181
        gbc.setState(0xb158, 0xaf72, 0x1110, 0x4166, 0x2d80, 0x9a5, 0x1, 0x0);
        gbc.writeMem(0xb158, { 0xf2 });
        gbc.writeMem(0xff66, { 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xaf72);
        EXPECT(gbc.pc(), 0xb159);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb158), 0xf2);
        EXPECT(gbc.readMem(0xff66), 0x2c);
        // F2 0183
        gbc.setState(0x1705, 0xd88, 0x230, 0x22dc, 0x35c4, 0x40f2, 0x0, 0x0);
        gbc.writeMem(0x1705, { 0xf2 });
        gbc.writeMem(0xffdc, { 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xd88);
        EXPECT(gbc.pc(), 0x1706);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffdc), 0xcb);
        // F2 0184
        gbc.setState(0xc257, 0x2b0d, 0xda10, 0x36b4, 0x3ff7, 0xe879, 0x1, 0x0);
        gbc.writeMem(0xc257, { 0xf2 });
        gbc.writeMem(0xffb4, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x2b0d);
        EXPECT(gbc.pc(), 0xc258);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc257), 0xf2);
        EXPECT(gbc.readMem(0xffb4), 0xec);
        // F2 0185
        gbc.setState(0x4e92, 0x903, 0x2600, 0x7248, 0xdd04, 0x6e71, 0x0, 0x1);
        gbc.writeMem(0x4e92, { 0xf2 });
        gbc.writeMem(0xff48, { 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x903);
        EXPECT(gbc.pc(), 0x4e93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff48), 0xad);
        // F2 0186
        gbc.setState(0x273d, 0x73d7, 0x81f0, 0x3b37, 0x9c40, 0x7886, 0x1, 0x0);
        gbc.writeMem(0x273d, { 0xf2 });
        gbc.writeMem(0xff37, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x73d7);
        EXPECT(gbc.pc(), 0x273e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff37), 0x7e);
        // F2 0187
        gbc.setState(0xb402, 0x78c8, 0x6d50, 0x8c6e, 0x9ebc, 0x43d8, 0x1, 0x1);
        gbc.writeMem(0xb402, { 0xf2 });
        gbc.writeMem(0xff6e, { 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x78c8);
        EXPECT(gbc.pc(), 0xb403);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb402), 0xf2);
        EXPECT(gbc.readMem(0xff6e), 0x4);
        // F2 0188
        gbc.setState(0x885c, 0xbead, 0x6100, 0x20ef, 0x9550, 0x9345, 0x1, 0x1);
        gbc.writeMem(0x885c, { 0xf2 });
        gbc.writeMem(0xffef, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xbead);
        EXPECT(gbc.pc(), 0x885d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x885c), 0xf2);
        EXPECT(gbc.readMem(0xffef), 0xdb);
        // F2 0189
        gbc.setState(0x6e47, 0xb523, 0xaa80, 0xb790, 0x4d6, 0x8c2, 0x0, 0x0);
        gbc.writeMem(0x6e47, { 0xf2 });
        gbc.writeMem(0xff90, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xb523);
        EXPECT(gbc.pc(), 0x6e48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff90), 0x2a);
        // F2 018A
        gbc.setState(0x16fb, 0x62b6, 0x7780, 0xee3a, 0xf9f7, 0xdfc, 0x1, 0x0);
        gbc.writeMem(0x16fb, { 0xf2 });
        gbc.writeMem(0xff3a, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x62b6);
        EXPECT(gbc.pc(), 0x16fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff3a), 0xf0);
        // F2 018B
        gbc.setState(0x1afe, 0x9827, 0x3e10, 0x9ce8, 0x5567, 0x72ee, 0x1, 0x0);
        gbc.writeMem(0x1afe, { 0xf2 });
        gbc.writeMem(0xffe8, { 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x9827);
        EXPECT(gbc.pc(), 0x1aff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffe8), 0x25);
        // F2 018C
        gbc.setState(0x3488, 0x52af, 0x9780, 0xbf38, 0x7296, 0xbe81, 0x0, 0x1);
        gbc.writeMem(0x3488, { 0xf2 });
        gbc.writeMem(0xff38, { 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x52af);
        EXPECT(gbc.pc(), 0x3489);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff38), 0xcc);
        // F2 018D
        gbc.setState(0x83d7, 0xad2a, 0x7c10, 0xfcb, 0x72a9, 0x2dbc, 0x1, 0x0);
        gbc.writeMem(0x83d7, { 0xf2 });
        gbc.writeMem(0xffcb, { 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xad2a);
        EXPECT(gbc.pc(), 0x83d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83d7), 0xf2);
        EXPECT(gbc.readMem(0xffcb), 0x64);
        // F2 018E
        gbc.setState(0xc75f, 0x6004, 0xca60, 0x5b0b, 0x39c1, 0xc316, 0x1, 0x1);
        gbc.writeMem(0xc75f, { 0xf2 });
        gbc.writeMem(0xff0b, { 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x6004);
        EXPECT(gbc.pc(), 0xc760);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc75f), 0xf2);
        EXPECT(gbc.readMem(0xff0b), 0xea);
        // F2 018F
        gbc.setState(0x5828, 0xcab5, 0x2330, 0xd712, 0xc2a4, 0xbd6, 0x1, 0x1);
        gbc.writeMem(0x5828, { 0xf2 });
        gbc.writeMem(0xff12, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xcab5);
        EXPECT(gbc.pc(), 0x5829);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff12), 0x52);
        // F2 0190
        gbc.setState(0x9c93, 0x9df0, 0x74f0, 0xdbb8, 0x2c5, 0x1621, 0x0, 0x1);
        gbc.writeMem(0x9c93, { 0xf2 });
        gbc.writeMem(0xffb8, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x9df0);
        EXPECT(gbc.pc(), 0x9c94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c93), 0xf2);
        EXPECT(gbc.readMem(0xffb8), 0x10);
        // F2 0191
        gbc.setState(0x3fe2, 0xc365, 0x5730, 0x8236, 0x102, 0xbdce, 0x1, 0x0);
        gbc.writeMem(0x3fe2, { 0xf2 });
        gbc.writeMem(0xff36, { 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xc365);
        EXPECT(gbc.pc(), 0x3fe3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff36), 0xea);
        // F2 0192
        gbc.setState(0xd4e8, 0x7a6e, 0x870, 0xe824, 0xb12f, 0xa6fb, 0x1, 0x1);
        gbc.writeMem(0xd4e8, { 0xf2 });
        gbc.writeMem(0xff24, { 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x7a6e);
        EXPECT(gbc.pc(), 0xd4e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4e8), 0xf2);
        EXPECT(gbc.readMem(0xff24), 0x2c);
        // F2 0193
        gbc.setState(0xd21e, 0xd0c7, 0xd540, 0x18cb, 0xa426, 0x884a, 0x1, 0x1);
        gbc.writeMem(0xd21e, { 0xf2 });
        gbc.writeMem(0xffcb, { 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xd0c7);
        EXPECT(gbc.pc(), 0xd21f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd21e), 0xf2);
        EXPECT(gbc.readMem(0xffcb), 0x64);
        // F2 0194
        gbc.setState(0x2ea0, 0x3c9f, 0x54e0, 0x705a, 0xe6d1, 0xd320, 0x0, 0x1);
        gbc.writeMem(0x2ea0, { 0xf2 });
        gbc.writeMem(0xff5a, { 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x3c9f);
        EXPECT(gbc.pc(), 0x2ea1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff5a), 0x6a);
        // F2 0196
        gbc.setState(0x7df, 0x6b79, 0x7170, 0xd2b8, 0x3cab, 0x2eaa, 0x0, 0x0);
        gbc.writeMem(0x7df, { 0xf2 });
        gbc.writeMem(0xffb8, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x6b79);
        EXPECT(gbc.pc(), 0x7e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffb8), 0x10);
        // F2 0197
        gbc.setState(0x35fb, 0x8614, 0xc300, 0x2a9c, 0xe96d, 0xf1ef, 0x1, 0x0);
        gbc.writeMem(0x35fb, { 0xf2 });
        gbc.writeMem(0xff9c, { 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x8614);
        EXPECT(gbc.pc(), 0x35fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff9c), 0xb6);
        // F2 0198
        gbc.setState(0xc856, 0x7059, 0x17c0, 0x8e0d, 0x214, 0x2e6d, 0x1, 0x1);
        gbc.writeMem(0xc856, { 0xf2 });
        gbc.writeMem(0xff0d, { 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x7059);
        EXPECT(gbc.pc(), 0xc857);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc856), 0xf2);
        EXPECT(gbc.readMem(0xff0d), 0xa0);
        // F2 0199
        gbc.setState(0x1f36, 0xbd45, 0x5f40, 0x8d72, 0x7fb0, 0x1c7f, 0x1, 0x0);
        gbc.writeMem(0x1f36, { 0xf2 });
        gbc.writeMem(0xff72, { 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xbd45);
        EXPECT(gbc.pc(), 0x1f37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff72), 0xc2);
        // F2 019A
        gbc.setState(0x6659, 0x7966, 0x7730, 0x309a, 0x2e8a, 0x3340, 0x0, 0x0);
        gbc.writeMem(0x6659, { 0xf2 });
        gbc.writeMem(0xff9a, { 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x7966);
        EXPECT(gbc.pc(), 0x665a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff9a), 0x2f);
        // F2 019B
        gbc.setState(0x949a, 0xe11e, 0x750, 0xfa84, 0x982b, 0xce22, 0x1, 0x0);
        gbc.writeMem(0x949a, { 0xf2 });
        gbc.writeMem(0xff84, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xe11e);
        EXPECT(gbc.pc(), 0x949b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x949a), 0xf2);
        EXPECT(gbc.readMem(0xff84), 0xb7);
        // F2 019D
        gbc.setState(0x484d, 0xc133, 0x6590, 0xfa1a, 0x54cd, 0x488, 0x0, 0x1);
        gbc.writeMem(0x484d, { 0xf2 });
        gbc.writeMem(0xff1a, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xc133);
        EXPECT(gbc.pc(), 0x484e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff1a), 0x76);
        // F2 019E
        gbc.setState(0x8ce6, 0xa3c1, 0xd240, 0xeab5, 0x7691, 0xe163, 0x1, 0x0);
        gbc.writeMem(0x8ce6, { 0xf2 });
        gbc.writeMem(0xffb5, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xa3c1);
        EXPECT(gbc.pc(), 0x8ce7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ce6), 0xf2);
        EXPECT(gbc.readMem(0xffb5), 0x1b);
        // F2 019F
        gbc.setState(0x38de, 0x4f51, 0x28b0, 0xc51f, 0x23d6, 0xfbd7, 0x1, 0x1);
        gbc.writeMem(0x38de, { 0xf2 });
        gbc.writeMem(0xff1f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x4f51);
        EXPECT(gbc.pc(), 0x38df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff1f), 0x8b);
        // F2 01A0
        gbc.setState(0x6adf, 0xda08, 0x62b0, 0xccb0, 0x90d6, 0x5b70, 0x0, 0x1);
        gbc.writeMem(0x6adf, { 0xf2 });
        gbc.writeMem(0xffb0, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xda08);
        EXPECT(gbc.pc(), 0x6ae0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffb0), 0x95);
        // F2 01A1
        gbc.setState(0xa060, 0x22ef, 0x7240, 0x73ca, 0x218, 0x9f21, 0x0, 0x1);
        gbc.writeMem(0xa060, { 0xf2 });
        gbc.writeMem(0xffca, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x22ef);
        EXPECT(gbc.pc(), 0xa061);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa060), 0xf2);
        EXPECT(gbc.readMem(0xffca), 0x9);
        // F2 01A2
        gbc.setState(0xc49d, 0x8ad7, 0x1820, 0xbcb4, 0x94b0, 0xff2, 0x0, 0x0);
        gbc.writeMem(0xc49d, { 0xf2 });
        gbc.writeMem(0xffb4, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x8ad7);
        EXPECT(gbc.pc(), 0xc49e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc49d), 0xf2);
        EXPECT(gbc.readMem(0xffb4), 0xec);
        // F2 01A3
        gbc.setState(0x1de8, 0x83c0, 0x63e0, 0x3c70, 0xebc6, 0x1f60, 0x1, 0x1);
        gbc.writeMem(0x1de8, { 0xf2 });
        gbc.writeMem(0xff70, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x83c0);
        EXPECT(gbc.pc(), 0x1de9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff70), 0xff);
        // F2 01A4
        gbc.setState(0x7bba, 0x2d08, 0xc720, 0x1c82, 0x9f90, 0x6092, 0x0, 0x0);
        gbc.writeMem(0x7bba, { 0xf2 });
        gbc.writeMem(0xff82, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x2d08);
        EXPECT(gbc.pc(), 0x7bbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff82), 0x5e);
        // F2 01A6
        gbc.setState(0xc172, 0xd0d, 0x86c0, 0x3d6c, 0x7981, 0xfceb, 0x0, 0x1);
        gbc.writeMem(0xc172, { 0xf2 });
        gbc.writeMem(0xff6c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xd0d);
        EXPECT(gbc.pc(), 0xc173);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc172), 0xf2);
        EXPECT(gbc.readMem(0xff6c), 0xa8);
        // F2 01A7
        gbc.setState(0x9112, 0x1067, 0x600, 0xbdcb, 0x1f20, 0x751, 0x1, 0x0);
        gbc.writeMem(0x9112, { 0xf2 });
        gbc.writeMem(0xffcb, { 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x1067);
        EXPECT(gbc.pc(), 0x9113);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9112), 0xf2);
        EXPECT(gbc.readMem(0xffcb), 0x64);
        // F2 01A8
        gbc.setState(0xbec3, 0x8c50, 0xbbb0, 0x8179, 0xde6e, 0x3953, 0x0, 0x1);
        gbc.writeMem(0xbec3, { 0xf2 });
        gbc.writeMem(0xff79, { 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x8c50);
        EXPECT(gbc.pc(), 0xbec4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbec3), 0xf2);
        EXPECT(gbc.readMem(0xff79), 0x18);
        // F2 01A9
        gbc.setState(0xc538, 0x1126, 0x4620, 0xb234, 0xcedb, 0x7ec1, 0x0, 0x1);
        gbc.writeMem(0xc538, { 0xf2 });
        gbc.writeMem(0xff34, { 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x1126);
        EXPECT(gbc.pc(), 0xc539);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc538), 0xf2);
        EXPECT(gbc.readMem(0xff34), 0xcb);
        // F2 01AA
        gbc.setState(0x2ce3, 0x599d, 0xdac0, 0x2320, 0x1bb6, 0xf5d1, 0x0, 0x1);
        gbc.writeMem(0x2ce3, { 0xf2 });
        gbc.writeMem(0xff20, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x599d);
        EXPECT(gbc.pc(), 0x2ce4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff20), 0xec);
        // F2 01AB
        gbc.setState(0x5224, 0x6014, 0xb840, 0x62a3, 0x7639, 0xcfb3, 0x0, 0x0);
        gbc.writeMem(0x5224, { 0xf2 });
        gbc.writeMem(0xffa3, { 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x6014);
        EXPECT(gbc.pc(), 0x5225);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffa3), 0x7);
        // F2 01AC
        gbc.setState(0x8252, 0xc32, 0x5dc0, 0x1e9a, 0x570a, 0x6d23, 0x1, 0x1);
        gbc.writeMem(0x8252, { 0xf2 });
        gbc.writeMem(0xff9a, { 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xc32);
        EXPECT(gbc.pc(), 0x8253);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8252), 0xf2);
        EXPECT(gbc.readMem(0xff9a), 0x2f);
        // F2 01AD
        gbc.setState(0xa9e1, 0x213c, 0x3cd0, 0x769f, 0xe615, 0x2794, 0x1, 0x1);
        gbc.writeMem(0xa9e1, { 0xf2 });
        gbc.writeMem(0xff9f, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x213c);
        EXPECT(gbc.pc(), 0xa9e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9e1), 0xf2);
        EXPECT(gbc.readMem(0xff9f), 0xe7);
        // F2 01AE
        gbc.setState(0x805b, 0x2cb7, 0x7dc0, 0x38e7, 0xefcc, 0x8c2d, 0x0, 0x1);
        gbc.writeMem(0x805b, { 0xf2 });
        gbc.writeMem(0xffe7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x2cb7);
        EXPECT(gbc.pc(), 0x805c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x805b), 0xf2);
        EXPECT(gbc.readMem(0xffe7), 0xe9);
        // F2 01B0
        gbc.setState(0x181e, 0x4438, 0x20, 0x9f3e, 0xa386, 0x1e15, 0x0, 0x1);
        gbc.writeMem(0x181e, { 0xf2 });
        gbc.writeMem(0xff3e, { 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x4438);
        EXPECT(gbc.pc(), 0x181f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff3e), 0x55);
        // F2 01B2
        gbc.setState(0xdba8, 0xd928, 0x9560, 0xf3d3, 0x75a6, 0xfe9f, 0x0, 0x1);
        gbc.writeMem(0xdba8, { 0xf2 });
        gbc.writeMem(0xffd3, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xd928);
        EXPECT(gbc.pc(), 0xdba9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdba8), 0xf2);
        EXPECT(gbc.readMem(0xffd3), 0xbb);
        // F2 01B3
        gbc.setState(0x6629, 0x19be, 0x5910, 0xe929, 0xa563, 0x4633, 0x1, 0x1);
        gbc.writeMem(0x6629, { 0xf2 });
        gbc.writeMem(0xff29, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x19be);
        EXPECT(gbc.pc(), 0x662a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff29), 0xa2);
        // F2 01B4
        gbc.setState(0x43b4, 0x917a, 0xcc60, 0x40e0, 0xa831, 0x99e1, 0x0, 0x1);
        gbc.writeMem(0x43b4, { 0xf2 });
        gbc.writeMem(0xffe0, { 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x917a);
        EXPECT(gbc.pc(), 0x43b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffe0), 0x75);
        // F2 01B5
        gbc.setState(0xa156, 0xe03d, 0x2840, 0xe3ae, 0x356f, 0x668, 0x0, 0x1);
        gbc.writeMem(0xa156, { 0xf2 });
        gbc.writeMem(0xffae, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xe03d);
        EXPECT(gbc.pc(), 0xa157);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa156), 0xf2);
        EXPECT(gbc.readMem(0xffae), 0x79);
        // F2 01B6
        gbc.setState(0xc11b, 0xe28a, 0xaf20, 0x7d39, 0x13bb, 0xbed3, 0x0, 0x0);
        gbc.writeMem(0xc11b, { 0xf2 });
        gbc.writeMem(0xff39, { 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xe28a);
        EXPECT(gbc.pc(), 0xc11c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc11b), 0xf2);
        EXPECT(gbc.readMem(0xff39), 0xc3);
        // F2 01B7
        gbc.setState(0x79d, 0x4970, 0xafa0, 0x852a, 0xb3d4, 0xe4de, 0x1, 0x0);
        gbc.writeMem(0x79d, { 0xf2 });
        gbc.writeMem(0xff2a, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x4970);
        EXPECT(gbc.pc(), 0x79e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff2a), 0x9c);
        // F2 01B8
        gbc.setState(0x394e, 0x9790, 0x6b10, 0x84f2, 0xd16, 0x72ec, 0x0, 0x0);
        gbc.writeMem(0x394e, { 0xf2 });
        gbc.writeMem(0xfff2, { 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x9790);
        EXPECT(gbc.pc(), 0x394f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfff2), 0x98);
        // F2 01B9
        gbc.setState(0x5ef3, 0xa291, 0xca10, 0x71e6, 0x6f04, 0x1fa3, 0x1, 0x1);
        gbc.writeMem(0x5ef3, { 0xf2 });
        gbc.writeMem(0xffe6, { 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xa291);
        EXPECT(gbc.pc(), 0x5ef4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffe6), 0x2c);
        // F2 01BA
        gbc.setState(0x3ea, 0x6a43, 0xa150, 0x8014, 0xb71b, 0x5caf, 0x0, 0x1);
        gbc.writeMem(0x3ea, { 0xf2 });
        gbc.writeMem(0xff14, { 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x6a43);
        EXPECT(gbc.pc(), 0x3eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff14), 0xae);
        // F2 01BB
        gbc.setState(0x9224, 0x2665, 0xb770, 0xd312, 0xfb62, 0xa87, 0x0, 0x1);
        gbc.writeMem(0x9224, { 0xf2 });
        gbc.writeMem(0xff12, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x2665);
        EXPECT(gbc.pc(), 0x9225);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9224), 0xf2);
        EXPECT(gbc.readMem(0xff12), 0x52);
        // F2 01BD
        gbc.setState(0x7108, 0x86eb, 0xe1c0, 0x9def, 0x3a4b, 0x7e73, 0x1, 0x0);
        gbc.writeMem(0x7108, { 0xf2 });
        gbc.writeMem(0xffef, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x86eb);
        EXPECT(gbc.pc(), 0x7109);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffef), 0xdb);
        // F2 01BE
        gbc.setState(0x3aa0, 0xc7cb, 0x7170, 0x4b18, 0xfbee, 0xf581, 0x0, 0x0);
        gbc.writeMem(0x3aa0, { 0xf2 });
        gbc.writeMem(0xff18, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xc7cb);
        EXPECT(gbc.pc(), 0x3aa1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff18), 0x2);
        // F2 01BF
        gbc.setState(0x5603, 0x706f, 0xe0a0, 0xaba1, 0xf156, 0x1cbd, 0x0, 0x1);
        gbc.writeMem(0x5603, { 0xf2 });
        gbc.writeMem(0xffa1, { 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x706f);
        EXPECT(gbc.pc(), 0x5604);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffa1), 0xd0);
        // F2 01C0
        gbc.setState(0xa8ca, 0x8eb5, 0xd5c0, 0xdff7, 0xe14a, 0x5e00, 0x0, 0x0);
        gbc.writeMem(0xa8ca, { 0xf2 });
        gbc.writeMem(0xfff7, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x8eb5);
        EXPECT(gbc.pc(), 0xa8cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8ca), 0xf2);
        EXPECT(gbc.readMem(0xfff7), 0x2a);
        // F2 01C1
        gbc.setState(0x68ea, 0xff6a, 0x4890, 0x1d88, 0x4121, 0x51fe, 0x1, 0x1);
        gbc.writeMem(0x68ea, { 0xf2 });
        gbc.writeMem(0xff88, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xff6a);
        EXPECT(gbc.pc(), 0x68eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff88), 0x49);
        // F2 01C2
        gbc.setState(0xddd6, 0x3b5d, 0xf860, 0xd482, 0xacf5, 0xc44f, 0x0, 0x1);
        gbc.writeMem(0xddd6, { 0xf2 });
        gbc.writeMem(0xff82, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x3b5d);
        EXPECT(gbc.pc(), 0xddd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddd6), 0xf2);
        EXPECT(gbc.readMem(0xff82), 0x5e);
        // F2 01C3
        gbc.setState(0xc939, 0x6e4c, 0x6810, 0xcce, 0x95, 0xb87a, 0x0, 0x1);
        gbc.writeMem(0xc939, { 0xf2 });
        gbc.writeMem(0xffce, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x6e4c);
        EXPECT(gbc.pc(), 0xc93a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc939), 0xf2);
        EXPECT(gbc.readMem(0xffce), 0x8d);
        // F2 01C4
        gbc.setState(0x41e7, 0x3462, 0xacc0, 0x5645, 0x3054, 0x5bb8, 0x0, 0x0);
        gbc.writeMem(0x41e7, { 0xf2 });
        gbc.writeMem(0xff45, { 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x3462);
        EXPECT(gbc.pc(), 0x41e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff45), 0xd4);
        // F2 01C5
        gbc.setState(0x791, 0x5b87, 0xbb30, 0x8df7, 0xe287, 0x63a2, 0x0, 0x1);
        gbc.writeMem(0x791, { 0xf2 });
        gbc.writeMem(0xfff7, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x5b87);
        EXPECT(gbc.pc(), 0x792);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfff7), 0x2a);
        // F2 01C6
        gbc.setState(0xc77c, 0xc7ec, 0x5f40, 0x6939, 0x5b64, 0x8324, 0x0, 0x0);
        gbc.writeMem(0xc77c, { 0xf2 });
        gbc.writeMem(0xff39, { 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xc7ec);
        EXPECT(gbc.pc(), 0xc77d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc77c), 0xf2);
        EXPECT(gbc.readMem(0xff39), 0xc3);
        // F2 01C7
        gbc.setState(0x5383, 0x85e3, 0x4800, 0x74ff, 0x6431, 0x32ec, 0x1, 0x1);
        gbc.writeMem(0x5383, { 0xf2 });
        gbc.writeMem(0xffff, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x85e3);
        EXPECT(gbc.pc(), 0x5384);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffff), 0x11);
        // F2 01C8
        gbc.setState(0x4b37, 0xb69c, 0xbd20, 0xdfd2, 0x5ea5, 0x30c6, 0x1, 0x0);
        gbc.writeMem(0x4b37, { 0xf2 });
        gbc.writeMem(0xffd2, { 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xb69c);
        EXPECT(gbc.pc(), 0x4b38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffd2), 0x31);
        // F2 01C9
        gbc.setState(0x78df, 0x34c1, 0x3d50, 0x8f88, 0x3520, 0x18ec, 0x1, 0x1);
        gbc.writeMem(0x78df, { 0xf2 });
        gbc.writeMem(0xff88, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x34c1);
        EXPECT(gbc.pc(), 0x78e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff88), 0x49);
        // F2 01CA
        gbc.setState(0xeedd, 0x663e, 0x1d20, 0x53aa, 0x595f, 0xeb34, 0x1, 0x1);
        gbc.writeMem(0xeedd, { 0xf2 });
        gbc.writeMem(0xffaa, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x663e);
        EXPECT(gbc.pc(), 0xeede);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeedd), 0xf2);
        EXPECT(gbc.readMem(0xffaa), 0x24);
        // F2 01CB
        gbc.setState(0xe875, 0x5fd0, 0xf6d0, 0x74b0, 0x7daf, 0xeb2, 0x0, 0x1);
        gbc.writeMem(0xe875, { 0xf2 });
        gbc.writeMem(0xffb0, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x5fd0);
        EXPECT(gbc.pc(), 0xe876);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe875), 0xf2);
        EXPECT(gbc.readMem(0xffb0), 0x95);
        // F2 01CC
        gbc.setState(0x8ea7, 0xe9ae, 0xa80, 0xd52d, 0xd69d, 0xbef2, 0x0, 0x0);
        gbc.writeMem(0x8ea7, { 0xf2 });
        gbc.writeMem(0xff2d, { 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xe9ae);
        EXPECT(gbc.pc(), 0x8ea8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ea7), 0xf2);
        EXPECT(gbc.readMem(0xff2d), 0xe0);
        // F2 01CD
        gbc.setState(0xc999, 0x4305, 0x4f50, 0xc1e1, 0xe846, 0xfc9a, 0x1, 0x1);
        gbc.writeMem(0xc999, { 0xf2 });
        gbc.writeMem(0xffe1, { 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x4305);
        EXPECT(gbc.pc(), 0xc99a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc999), 0xf2);
        EXPECT(gbc.readMem(0xffe1), 0x88);
        // F2 01CE
        gbc.setState(0x6ada, 0x5806, 0x4f10, 0xc3c, 0x19bf, 0xe182, 0x1, 0x0);
        gbc.writeMem(0x6ada, { 0xf2 });
        gbc.writeMem(0xff3c, { 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x5806);
        EXPECT(gbc.pc(), 0x6adb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff3c), 0xfd);
        // F2 01CF
        gbc.setState(0xa0e2, 0x59c7, 0x8970, 0x612f, 0x44e, 0x9465, 0x0, 0x0);
        gbc.writeMem(0xa0e2, { 0xf2 });
        gbc.writeMem(0xff2f, { 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x59c7);
        EXPECT(gbc.pc(), 0xa0e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0e2), 0xf2);
        EXPECT(gbc.readMem(0xff2f), 0x91);
        // F2 01D0
        gbc.setState(0x5dee, 0x7c73, 0xf7a0, 0xb000, 0xb618, 0xa665, 0x0, 0x0);
        gbc.writeMem(0x5dee, { 0xf2 });
        gbc.writeMem(0xff00, { 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x7c73);
        EXPECT(gbc.pc(), 0x5def);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff00), 0x3a);
        // F2 01D1
        gbc.setState(0x59d5, 0xb05f, 0x4020, 0x9970, 0x5e05, 0x63b8, 0x1, 0x1);
        gbc.writeMem(0x59d5, { 0xf2 });
        gbc.writeMem(0xff70, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xb05f);
        EXPECT(gbc.pc(), 0x59d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff70), 0xff);
        // F2 01D2
        gbc.setState(0xcfd9, 0xe3e1, 0x6e0, 0xe629, 0x2805, 0x81dc, 0x0, 0x1);
        gbc.writeMem(0xcfd9, { 0xf2 });
        gbc.writeMem(0xff29, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xe3e1);
        EXPECT(gbc.pc(), 0xcfda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfd9), 0xf2);
        EXPECT(gbc.readMem(0xff29), 0xa2);
        // F2 01D3
        gbc.setState(0x9983, 0xbccd, 0x7170, 0xb06, 0xb7df, 0x5fd3, 0x0, 0x0);
        gbc.writeMem(0x9983, { 0xf2 });
        gbc.writeMem(0xff06, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xbccd);
        EXPECT(gbc.pc(), 0x9984);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9983), 0xf2);
        EXPECT(gbc.readMem(0xff06), 0xf4);
        // F2 01D4
        gbc.setState(0x8670, 0xaf47, 0x63b0, 0xa2ff, 0xb21f, 0x3c1, 0x0, 0x1);
        gbc.writeMem(0x8670, { 0xf2 });
        gbc.writeMem(0xffff, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xaf47);
        EXPECT(gbc.pc(), 0x8671);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8670), 0xf2);
        EXPECT(gbc.readMem(0xffff), 0x11);
        // F2 01D5
        gbc.setState(0xe7f4, 0xe56e, 0xbc0, 0x4f42, 0xe9ec, 0xd4ee, 0x1, 0x0);
        gbc.writeMem(0xe7f4, { 0xf2 });
        gbc.writeMem(0xff42, { 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xe56e);
        EXPECT(gbc.pc(), 0xe7f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7f4), 0xf2);
        EXPECT(gbc.readMem(0xff42), 0x50);
        // F2 01D6
        gbc.setState(0x622b, 0x6c73, 0x74b0, 0x8baf, 0xa2a6, 0x90d2, 0x1, 0x1);
        gbc.writeMem(0x622b, { 0xf2 });
        gbc.writeMem(0xffaf, { 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x6c73);
        EXPECT(gbc.pc(), 0x622c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffaf), 0x51);
        // F2 01D7
        gbc.setState(0x4a55, 0xd4a7, 0x9b30, 0x93d6, 0xec63, 0xfd84, 0x1, 0x1);
        gbc.writeMem(0x4a55, { 0xf2 });
        gbc.writeMem(0xffd6, { 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xd4a7);
        EXPECT(gbc.pc(), 0x4a56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffd6), 0xdc);
        // F2 01D8
        gbc.setState(0xa2c5, 0x7d66, 0x37c0, 0x86b0, 0x50b5, 0x3c76, 0x0, 0x0);
        gbc.writeMem(0xa2c5, { 0xf2 });
        gbc.writeMem(0xffb0, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x7d66);
        EXPECT(gbc.pc(), 0xa2c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2c5), 0xf2);
        EXPECT(gbc.readMem(0xffb0), 0x95);
        // F2 01D9
        gbc.setState(0xc8a, 0xe9d7, 0x2770, 0x1695, 0x5d14, 0xf0a2, 0x0, 0x1);
        gbc.writeMem(0xc8a, { 0xf2 });
        gbc.writeMem(0xff95, { 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xe9d7);
        EXPECT(gbc.pc(), 0xc8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff95), 0x33);
        // F2 01DA
        gbc.setState(0xe63e, 0x90c5, 0x4de0, 0x8ae1, 0xfb58, 0x4af9, 0x1, 0x0);
        gbc.writeMem(0xe63e, { 0xf2 });
        gbc.writeMem(0xffe1, { 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x90c5);
        EXPECT(gbc.pc(), 0xe63f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe63e), 0xf2);
        EXPECT(gbc.readMem(0xffe1), 0x88);
        // F2 01DB
        gbc.setState(0x3c29, 0x4de9, 0xe980, 0xad2b, 0x6cdd, 0x2f9b, 0x1, 0x0);
        gbc.writeMem(0x3c29, { 0xf2 });
        gbc.writeMem(0xff2b, { 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x4de9);
        EXPECT(gbc.pc(), 0x3c2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff2b), 0xd4);
        // F2 01DC
        gbc.setState(0x27db, 0xfb06, 0x8680, 0x7c63, 0xdade, 0x5e46, 0x0, 0x1);
        gbc.writeMem(0x27db, { 0xf2 });
        gbc.writeMem(0xff63, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xfb06);
        EXPECT(gbc.pc(), 0x27dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff63), 0x30);
        // F2 01DD
        gbc.setState(0x595d, 0xa3e7, 0x47a0, 0xe90c, 0x7d3d, 0x78a, 0x0, 0x1);
        gbc.writeMem(0x595d, { 0xf2 });
        gbc.writeMem(0xff0c, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xa3e7);
        EXPECT(gbc.pc(), 0x595e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff0c), 0x94);
        // F2 01DE
        gbc.setState(0xc130, 0x6566, 0xec20, 0x2e4c, 0x533d, 0x2355, 0x1, 0x1);
        gbc.writeMem(0xc130, { 0xf2 });
        gbc.writeMem(0xff4c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x6566);
        EXPECT(gbc.pc(), 0xc131);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc130), 0xf2);
        EXPECT(gbc.readMem(0xff4c), 0x5a);
        // F2 01DF
        gbc.setState(0xb6cb, 0x351b, 0xe400, 0x8e7d, 0x2568, 0xbe33, 0x0, 0x0);
        gbc.writeMem(0xb6cb, { 0xf2 });
        gbc.writeMem(0xff7d, { 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x351b);
        EXPECT(gbc.pc(), 0xb6cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6cb), 0xf2);
        EXPECT(gbc.readMem(0xff7d), 0xed);
        // F2 01E0
        gbc.setState(0x5fde, 0xb389, 0x97e0, 0xc7d7, 0xf5a4, 0x2b3f, 0x0, 0x0);
        gbc.writeMem(0x5fde, { 0xf2 });
        gbc.writeMem(0xffd7, { 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xb389);
        EXPECT(gbc.pc(), 0x5fdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffd7), 0x96);
        // F2 01E1
        gbc.setState(0x982a, 0x7529, 0x5660, 0x3986, 0xcd70, 0xc552, 0x1, 0x0);
        gbc.writeMem(0x982a, { 0xf2 });
        gbc.writeMem(0xff86, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x7529);
        EXPECT(gbc.pc(), 0x982b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x982a), 0xf2);
        EXPECT(gbc.readMem(0xff86), 0x5e);
        // F2 01E2
        gbc.setState(0xe7f1, 0x7f20, 0x2ff0, 0xb2a4, 0xcd61, 0x2547, 0x0, 0x1);
        gbc.writeMem(0xe7f1, { 0xf2 });
        gbc.writeMem(0xffa4, { 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x7f20);
        EXPECT(gbc.pc(), 0xe7f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7f1), 0xf2);
        EXPECT(gbc.readMem(0xffa4), 0xb8);
        // F2 01E3
        gbc.setState(0x2cb1, 0xccb5, 0x2d00, 0xb993, 0xc9d1, 0x610b, 0x0, 0x0);
        gbc.writeMem(0x2cb1, { 0xf2 });
        gbc.writeMem(0xff93, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xccb5);
        EXPECT(gbc.pc(), 0x2cb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff93), 0x63);
        // F2 01E4
        gbc.setState(0xb218, 0x9d88, 0xa10, 0xcd5, 0xc41a, 0xfe7, 0x0, 0x0);
        gbc.writeMem(0xb218, { 0xf2 });
        gbc.writeMem(0xffd5, { 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x9d88);
        EXPECT(gbc.pc(), 0xb219);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb218), 0xf2);
        EXPECT(gbc.readMem(0xffd5), 0xc);
        // F2 01E5
        gbc.setState(0xc577, 0x320, 0xd3a0, 0x8a0f, 0x266f, 0x6c2a, 0x1, 0x1);
        gbc.writeMem(0xc577, { 0xf2 });
        gbc.writeMem(0xff0f, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x320);
        EXPECT(gbc.pc(), 0xc578);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc577), 0xf2);
        EXPECT(gbc.readMem(0xff0f), 0x9f);
        // F2 01E6
        gbc.setState(0xe156, 0x22e0, 0x6a50, 0xabef, 0xec0c, 0x39dd, 0x0, 0x1);
        gbc.writeMem(0xe156, { 0xf2 });
        gbc.writeMem(0xffef, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x22e0);
        EXPECT(gbc.pc(), 0xe157);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe156), 0xf2);
        EXPECT(gbc.readMem(0xffef), 0xdb);
        // F2 01E7
        gbc.setState(0xa68c, 0xf896, 0xaff0, 0xe31d, 0x992b, 0xfde, 0x0, 0x0);
        gbc.writeMem(0xa68c, { 0xf2 });
        gbc.writeMem(0xff1d, { 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xf896);
        EXPECT(gbc.pc(), 0xa68d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa68c), 0xf2);
        EXPECT(gbc.readMem(0xff1d), 0xcd);
        // F2 01E8
        gbc.setState(0x490, 0x39b6, 0x97f0, 0x223b, 0x2908, 0xcee0, 0x1, 0x1);
        gbc.writeMem(0x490, { 0xf2 });
        gbc.writeMem(0xff3b, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x39b6);
        EXPECT(gbc.pc(), 0x491);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff3b), 0xb2);
        // F2 01E9
        gbc.setState(0x840d, 0x4fe1, 0x57c0, 0xb074, 0x59da, 0xd34b, 0x0, 0x1);
        gbc.writeMem(0x840d, { 0xf2 });
        gbc.writeMem(0xff74, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x4fe1);
        EXPECT(gbc.pc(), 0x840e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x840d), 0xf2);
        EXPECT(gbc.readMem(0xff74), 0x76);
        // F2 01EA
        gbc.setState(0x5232, 0xa964, 0x5b10, 0xab95, 0x225d, 0x2128, 0x0, 0x0);
        gbc.writeMem(0x5232, { 0xf2 });
        gbc.writeMem(0xff95, { 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xa964);
        EXPECT(gbc.pc(), 0x5233);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff95), 0x33);
        // F2 01EB
        gbc.setState(0x913a, 0x98fa, 0x2060, 0xbdfa, 0x9295, 0x7335, 0x0, 0x0);
        gbc.writeMem(0x913a, { 0xf2 });
        gbc.writeMem(0xfffa, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x98fa);
        EXPECT(gbc.pc(), 0x913b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x913a), 0xf2);
        EXPECT(gbc.readMem(0xfffa), 0xd5);
        // F2 01EC
        gbc.setState(0x1ea0, 0x2aec, 0xa8c0, 0x58ea, 0x887d, 0x3fa0, 0x0, 0x1);
        gbc.writeMem(0x1ea0, { 0xf2 });
        gbc.writeMem(0xffea, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x2aec);
        EXPECT(gbc.pc(), 0x1ea1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffea), 0x9f);
        // F2 01ED
        gbc.setState(0xc618, 0xb83f, 0x6110, 0xe314, 0xeea6, 0x2c22, 0x1, 0x1);
        gbc.writeMem(0xc618, { 0xf2 });
        gbc.writeMem(0xff14, { 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xb83f);
        EXPECT(gbc.pc(), 0xc619);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc618), 0xf2);
        EXPECT(gbc.readMem(0xff14), 0xae);
        // F2 01EE
        gbc.setState(0x8fdd, 0xb6ca, 0x7bb0, 0xba5a, 0x3f0b, 0x1ae7, 0x0, 0x1);
        gbc.writeMem(0x8fdd, { 0xf2 });
        gbc.writeMem(0xff5a, { 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xb6ca);
        EXPECT(gbc.pc(), 0x8fde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fdd), 0xf2);
        EXPECT(gbc.readMem(0xff5a), 0x6a);
        // F2 01EF
        gbc.setState(0xd771, 0x61c6, 0x6230, 0xad68, 0x67b4, 0x63c2, 0x0, 0x1);
        gbc.writeMem(0xd771, { 0xf2 });
        gbc.writeMem(0xff68, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x61c6);
        EXPECT(gbc.pc(), 0xd772);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd771), 0xf2);
        EXPECT(gbc.readMem(0xff68), 0xa2);
        // F2 01F0
        gbc.setState(0x14a0, 0x1b86, 0xf600, 0xb682, 0xbdea, 0x85ee, 0x1, 0x1);
        gbc.writeMem(0x14a0, { 0xf2 });
        gbc.writeMem(0xff82, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x1b86);
        EXPECT(gbc.pc(), 0x14a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff82), 0x5e);
        // F2 01F2
        gbc.setState(0xd1fd, 0x6fed, 0xcf60, 0x4ee1, 0x9ce1, 0x6c0f, 0x1, 0x1);
        gbc.writeMem(0xd1fd, { 0xf2 });
        gbc.writeMem(0xffe1, { 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x6fed);
        EXPECT(gbc.pc(), 0xd1fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1fd), 0xf2);
        EXPECT(gbc.readMem(0xffe1), 0x88);
        // F2 01F3
        gbc.setState(0xdc74, 0xdbe8, 0x8e50, 0xbe91, 0x8909, 0x906e, 0x0, 0x1);
        gbc.writeMem(0xdc74, { 0xf2 });
        gbc.writeMem(0xff91, { 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xdbe8);
        EXPECT(gbc.pc(), 0xdc75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc74), 0xf2);
        EXPECT(gbc.readMem(0xff91), 0xb8);
        // F2 01F4
        gbc.setState(0xb4a1, 0x73c0, 0xa260, 0x1766, 0xd4b9, 0x9ab7, 0x1, 0x1);
        gbc.writeMem(0xb4a1, { 0xf2 });
        gbc.writeMem(0xff66, { 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x73c0);
        EXPECT(gbc.pc(), 0xb4a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4a1), 0xf2);
        EXPECT(gbc.readMem(0xff66), 0x2c);
        // F2 01F6
        gbc.setState(0x26dd, 0x720b, 0xd670, 0xcdc6, 0x766b, 0x5939, 0x1, 0x0);
        gbc.writeMem(0x26dd, { 0xf2 });
        gbc.writeMem(0xffc6, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x720b);
        EXPECT(gbc.pc(), 0x26de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffc6), 0x37);
        // F2 01F7
        gbc.setState(0x783, 0xfa95, 0xceb0, 0xd97b, 0xb905, 0x656a, 0x0, 0x0);
        gbc.writeMem(0x783, { 0xf2 });
        gbc.writeMem(0xff7b, { 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xfa95);
        EXPECT(gbc.pc(), 0x784);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff7b), 0x6);
        // F2 01F8
        gbc.setState(0xecb2, 0x98d5, 0x2fc0, 0x97df, 0xcdd4, 0xaaf8, 0x1, 0x0);
        gbc.writeMem(0xecb2, { 0xf2 });
        gbc.writeMem(0xffdf, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x98d5);
        EXPECT(gbc.pc(), 0xecb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecb2), 0xf2);
        EXPECT(gbc.readMem(0xffdf), 0xd);
        // F2 01F9
        gbc.setState(0x4ef2, 0xcf3, 0xe930, 0x4255, 0x6f9a, 0xcda, 0x1, 0x0);
        gbc.writeMem(0x4ef2, { 0xf2 });
        gbc.writeMem(0xff55, { 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xcf3);
        EXPECT(gbc.pc(), 0x4ef3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff55), 0x21);
        // F2 01FA
        gbc.setState(0x968b, 0xf05c, 0xd180, 0x7cbc, 0x7dbc, 0xf3ca, 0x0, 0x0);
        gbc.writeMem(0x968b, { 0xf2 });
        gbc.writeMem(0xffbc, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xf05c);
        EXPECT(gbc.pc(), 0x968c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x968b), 0xf2);
        EXPECT(gbc.readMem(0xffbc), 0x4d);
        // F2 01FB
        gbc.setState(0x1ef9, 0x5b36, 0x8420, 0xb077, 0x3df5, 0xe2b1, 0x1, 0x1);
        gbc.writeMem(0x1ef9, { 0xf2 });
        gbc.writeMem(0xff77, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x5b36);
        EXPECT(gbc.pc(), 0x1efa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff77), 0x52);
        // F2 01FD
        gbc.setState(0x7b6f, 0xefef, 0x40f0, 0xd9af, 0x8954, 0x6bdb, 0x1, 0x0);
        gbc.writeMem(0x7b6f, { 0xf2 });
        gbc.writeMem(0xffaf, { 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xefef);
        EXPECT(gbc.pc(), 0x7b70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffaf), 0x51);
        // F2 01FE
        gbc.setState(0x3e, 0xa587, 0xbd00, 0xb392, 0xcd6f, 0x8f77, 0x1, 0x0);
        gbc.writeMem(0x3e, { 0xf2 });
        gbc.writeMem(0xff92, { 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xa587);
        EXPECT(gbc.pc(), 0x3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff92), 0x1f);
        // F2 01FF
        gbc.setState(0x58a5, 0x92c2, 0x2680, 0x3ea6, 0x5eb, 0xe4d6, 0x1, 0x1);
        gbc.writeMem(0x58a5, { 0xf2 });
        gbc.writeMem(0xffa6, { 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x92c2);
        EXPECT(gbc.pc(), 0x58a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffa6), 0xf1);
        // F2 0200
        gbc.setState(0xbb03, 0xad46, 0xd1f0, 0xe62f, 0x5dd7, 0xfece, 0x1, 0x0);
        gbc.writeMem(0xbb03, { 0xf2 });
        gbc.writeMem(0xff2f, { 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xad46);
        EXPECT(gbc.pc(), 0xbb04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb03), 0xf2);
        EXPECT(gbc.readMem(0xff2f), 0x91);
        // F2 0201
        gbc.setState(0x6342, 0x27fd, 0x93f0, 0xeebf, 0xe4e5, 0x9930, 0x0, 0x0);
        gbc.writeMem(0x6342, { 0xf2 });
        gbc.writeMem(0xffbf, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x27fd);
        EXPECT(gbc.pc(), 0x6343);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffbf), 0xec);
        // F2 0202
        gbc.setState(0x4de6, 0xbd2a, 0xb550, 0x9b71, 0x2e5a, 0xab8b, 0x0, 0x1);
        gbc.writeMem(0x4de6, { 0xf2 });
        gbc.writeMem(0xff71, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xbd2a);
        EXPECT(gbc.pc(), 0x4de7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff71), 0x4f);
        // F2 0203
        gbc.setState(0x1a93, 0x3c0a, 0xc1b0, 0x61e5, 0xa95c, 0x3cf9, 0x1, 0x1);
        gbc.writeMem(0x1a93, { 0xf2 });
        gbc.writeMem(0xffe5, { 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x3c0a);
        EXPECT(gbc.pc(), 0x1a94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffe5), 0x8c);
        // F2 0204
        gbc.setState(0xb045, 0x16f7, 0x5930, 0x78ef, 0xfc1a, 0xf691, 0x1, 0x0);
        gbc.writeMem(0xb045, { 0xf2 });
        gbc.writeMem(0xffef, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x16f7);
        EXPECT(gbc.pc(), 0xb046);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb045), 0xf2);
        EXPECT(gbc.readMem(0xffef), 0xdb);
        // F2 0205
        gbc.setState(0xa509, 0x25fa, 0x3830, 0x86bc, 0x5bc2, 0x7a35, 0x0, 0x1);
        gbc.writeMem(0xa509, { 0xf2 });
        gbc.writeMem(0xffbc, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x25fa);
        EXPECT(gbc.pc(), 0xa50a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa509), 0xf2);
        EXPECT(gbc.readMem(0xffbc), 0x4d);
        // F2 0206
        gbc.setState(0xe864, 0x7ec2, 0x68f0, 0xc1f7, 0xf7f9, 0x94cb, 0x1, 0x1);
        gbc.writeMem(0xe864, { 0xf2 });
        gbc.writeMem(0xfff7, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x7ec2);
        EXPECT(gbc.pc(), 0xe865);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe864), 0xf2);
        EXPECT(gbc.readMem(0xfff7), 0x2a);
        // F2 0207
        gbc.setState(0xe80f, 0xb1c8, 0xb500, 0x5a58, 0xee3d, 0x99e2, 0x1, 0x0);
        gbc.writeMem(0xe80f, { 0xf2 });
        gbc.writeMem(0xff58, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xb1c8);
        EXPECT(gbc.pc(), 0xe810);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe80f), 0xf2);
        EXPECT(gbc.readMem(0xff58), 0x10);
        // F2 0208
        gbc.setState(0x8fbf, 0xd140, 0x8650, 0x1c2d, 0x4ca7, 0xc39e, 0x0, 0x0);
        gbc.writeMem(0x8fbf, { 0xf2 });
        gbc.writeMem(0xff2d, { 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xd140);
        EXPECT(gbc.pc(), 0x8fc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fbf), 0xf2);
        EXPECT(gbc.readMem(0xff2d), 0xe0);
        // F2 0209
        gbc.setState(0xf16, 0x3005, 0x1380, 0x7df5, 0x7ab8, 0x424f, 0x0, 0x1);
        gbc.writeMem(0xf16, { 0xf2 });
        gbc.writeMem(0xfff5, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x3005);
        EXPECT(gbc.pc(), 0xf17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfff5), 0x37);
        // F2 020A
        gbc.setState(0x73b6, 0xe01, 0xb910, 0xf1ca, 0x3ab6, 0x2d31, 0x1, 0x0);
        gbc.writeMem(0x73b6, { 0xf2 });
        gbc.writeMem(0xffca, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xe01);
        EXPECT(gbc.pc(), 0x73b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffca), 0x9);
        // F2 020B
        gbc.setState(0xe98f, 0x702, 0x5c80, 0x3efa, 0x4a08, 0xc6cf, 0x0, 0x1);
        gbc.writeMem(0xe98f, { 0xf2 });
        gbc.writeMem(0xfffa, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x702);
        EXPECT(gbc.pc(), 0xe990);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe98f), 0xf2);
        EXPECT(gbc.readMem(0xfffa), 0xd5);
        // F2 020C
        gbc.setState(0x7574, 0x6826, 0x9060, 0xc66e, 0x776e, 0x24b0, 0x1, 0x1);
        gbc.writeMem(0x7574, { 0xf2 });
        gbc.writeMem(0xff6e, { 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x6826);
        EXPECT(gbc.pc(), 0x7575);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff6e), 0x4);
        // F2 020D
        gbc.setState(0xb10b, 0x2c8c, 0x8b80, 0x5ac, 0x310a, 0xd19, 0x1, 0x1);
        gbc.writeMem(0xb10b, { 0xf2 });
        gbc.writeMem(0xffac, { 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x2c8c);
        EXPECT(gbc.pc(), 0xb10c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb10b), 0xf2);
        EXPECT(gbc.readMem(0xffac), 0x36);
        // F2 020E
        gbc.setState(0x9f6b, 0x28ee, 0x5c0, 0xc86f, 0xf1ac, 0x765, 0x0, 0x0);
        gbc.writeMem(0x9f6b, { 0xf2 });
        gbc.writeMem(0xff6f, { 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x28ee);
        EXPECT(gbc.pc(), 0x9f6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f6b), 0xf2);
        EXPECT(gbc.readMem(0xff6f), 0xc1);
        // F2 020F
        gbc.setState(0x6db7, 0x302e, 0xe2e0, 0xbba0, 0x620c, 0xdb51, 0x0, 0x0);
        gbc.writeMem(0x6db7, { 0xf2 });
        gbc.writeMem(0xffa0, { 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x302e);
        EXPECT(gbc.pc(), 0x6db8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffa0), 0x33);
        // F2 0210
        gbc.setState(0x9d26, 0x2344, 0x6020, 0x1b2a, 0x7294, 0xb68f, 0x0, 0x1);
        gbc.writeMem(0x9d26, { 0xf2 });
        gbc.writeMem(0xff2a, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x2344);
        EXPECT(gbc.pc(), 0x9d27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d26), 0xf2);
        EXPECT(gbc.readMem(0xff2a), 0x9c);
        // F2 0211
        gbc.setState(0x2af7, 0x6eb8, 0x6fc0, 0x7253, 0xf7b8, 0x70a2, 0x0, 0x1);
        gbc.writeMem(0x2af7, { 0xf2 });
        gbc.writeMem(0xff53, { 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x6eb8);
        EXPECT(gbc.pc(), 0x2af8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff53), 0xd2);
        // F2 0212
        gbc.setState(0xb1e7, 0x921a, 0x1c40, 0xbb53, 0x1bab, 0xc204, 0x0, 0x1);
        gbc.writeMem(0xb1e7, { 0xf2 });
        gbc.writeMem(0xff53, { 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x921a);
        EXPECT(gbc.pc(), 0xb1e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1e7), 0xf2);
        EXPECT(gbc.readMem(0xff53), 0xd2);
        // F2 0213
        gbc.setState(0xc169, 0x662e, 0xad10, 0x2bf5, 0x5c5a, 0x4c10, 0x0, 0x0);
        gbc.writeMem(0xc169, { 0xf2 });
        gbc.writeMem(0xfff5, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x662e);
        EXPECT(gbc.pc(), 0xc16a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc169), 0xf2);
        EXPECT(gbc.readMem(0xfff5), 0x37);
        // F2 0214
        gbc.setState(0xb94c, 0x5a68, 0x9560, 0x4a0e, 0x2487, 0x260b, 0x1, 0x0);
        gbc.writeMem(0xb94c, { 0xf2 });
        gbc.writeMem(0xff0e, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x5a68);
        EXPECT(gbc.pc(), 0xb94d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb94c), 0xf2);
        EXPECT(gbc.readMem(0xff0e), 0xa6);
        // F2 0215
        gbc.setState(0x3903, 0x7564, 0x33a0, 0x1dd0, 0xdfb6, 0xaa63, 0x1, 0x0);
        gbc.writeMem(0x3903, { 0xf2 });
        gbc.writeMem(0xffd0, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x7564);
        EXPECT(gbc.pc(), 0x3904);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffd0), 0x63);
        // F2 0216
        gbc.setState(0x248c, 0xdbff, 0x2bc0, 0x744f, 0xfc93, 0x8d9d, 0x0, 0x1);
        gbc.writeMem(0x248c, { 0xf2 });
        gbc.writeMem(0xff4f, { 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xdbff);
        EXPECT(gbc.pc(), 0x248d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff4f), 0x97);
        // F2 0217
        gbc.setState(0xe552, 0x87fd, 0x2550, 0xbcf1, 0xce7a, 0x39cf, 0x1, 0x1);
        gbc.writeMem(0xe552, { 0xf2 });
        gbc.writeMem(0xfff1, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x87fd);
        EXPECT(gbc.pc(), 0xe553);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe552), 0xf2);
        EXPECT(gbc.readMem(0xfff1), 0x77);
        // F2 0218
        gbc.setState(0x66e6, 0xc441, 0xea20, 0x9e33, 0xaa79, 0x8dbb, 0x1, 0x1);
        gbc.writeMem(0x66e6, { 0xf2 });
        gbc.writeMem(0xff33, { 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xc441);
        EXPECT(gbc.pc(), 0x66e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff33), 0x28);
        // F2 0219
        gbc.setState(0x198d, 0xf268, 0xc6b0, 0x132d, 0x46c0, 0x88ce, 0x0, 0x0);
        gbc.writeMem(0x198d, { 0xf2 });
        gbc.writeMem(0xff2d, { 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xf268);
        EXPECT(gbc.pc(), 0x198e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff2d), 0xe0);
        // F2 021A
        gbc.setState(0x4888, 0x9955, 0x3a10, 0x9b83, 0xc261, 0x2b7f, 0x1, 0x1);
        gbc.writeMem(0x4888, { 0xf2 });
        gbc.writeMem(0xff83, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x9955);
        EXPECT(gbc.pc(), 0x4889);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff83), 0x52);
        // F2 021B
        gbc.setState(0xcab3, 0x2ac0, 0x3270, 0xdb6c, 0xe819, 0x519d, 0x0, 0x0);
        gbc.writeMem(0xcab3, { 0xf2 });
        gbc.writeMem(0xff6c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x2ac0);
        EXPECT(gbc.pc(), 0xcab4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcab3), 0xf2);
        EXPECT(gbc.readMem(0xff6c), 0xa8);
        // F2 021C
        gbc.setState(0x7f66, 0x455c, 0xd3e0, 0x4ef0, 0x7c8b, 0xe9f6, 0x0, 0x1);
        gbc.writeMem(0x7f66, { 0xf2 });
        gbc.writeMem(0xfff0, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x455c);
        EXPECT(gbc.pc(), 0x7f67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfff0), 0xc0);
        // F2 021D
        gbc.setState(0xc533, 0x25ff, 0x84e0, 0x74b7, 0x9f9b, 0x62cb, 0x1, 0x1);
        gbc.writeMem(0xc533, { 0xf2 });
        gbc.writeMem(0xffb7, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x25ff);
        EXPECT(gbc.pc(), 0xc534);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc533), 0xf2);
        EXPECT(gbc.readMem(0xffb7), 0x66);
        // F2 021E
        gbc.setState(0x3128, 0x9d42, 0x9c0, 0x82e8, 0xd3a0, 0x9b9e, 0x1, 0x0);
        gbc.writeMem(0x3128, { 0xf2 });
        gbc.writeMem(0xffe8, { 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x9d42);
        EXPECT(gbc.pc(), 0x3129);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffe8), 0x25);
        // F2 021F
        gbc.setState(0x1ed0, 0x68c3, 0x13b0, 0x200a, 0x856, 0x9593, 0x1, 0x0);
        gbc.writeMem(0x1ed0, { 0xf2 });
        gbc.writeMem(0xff0a, { 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x68c3);
        EXPECT(gbc.pc(), 0x1ed1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff0a), 0xeb);
        // F2 0220
        gbc.setState(0x5a8c, 0xad95, 0xe5d0, 0xfaf7, 0xdd72, 0xd2c2, 0x1, 0x1);
        gbc.writeMem(0x5a8c, { 0xf2 });
        gbc.writeMem(0xfff7, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xad95);
        EXPECT(gbc.pc(), 0x5a8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfff7), 0x2a);
        // F2 0221
        gbc.setState(0xc265, 0x785, 0xf900, 0x91c2, 0xd124, 0x1679, 0x1, 0x0);
        gbc.writeMem(0xc265, { 0xf2 });
        gbc.writeMem(0xffc2, { 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x785);
        EXPECT(gbc.pc(), 0xc266);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc265), 0xf2);
        EXPECT(gbc.readMem(0xffc2), 0x1d);
        // F2 0222
        gbc.setState(0x6fe1, 0x5e2d, 0x66d0, 0xe88e, 0xa073, 0x16f, 0x0, 0x1);
        gbc.writeMem(0x6fe1, { 0xf2 });
        gbc.writeMem(0xff8e, { 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x5e2d);
        EXPECT(gbc.pc(), 0x6fe2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff8e), 0xe3);
        // F2 0223
        gbc.setState(0x53e3, 0x86ee, 0x1a00, 0xee3e, 0xfc5e, 0xce65, 0x0, 0x1);
        gbc.writeMem(0x53e3, { 0xf2 });
        gbc.writeMem(0xff3e, { 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x86ee);
        EXPECT(gbc.pc(), 0x53e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff3e), 0x55);
        // F2 0224
        gbc.setState(0xcf43, 0xfa93, 0x1f20, 0xbc12, 0xe7f7, 0x2d0d, 0x0, 0x1);
        gbc.writeMem(0xcf43, { 0xf2 });
        gbc.writeMem(0xff12, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xfa93);
        EXPECT(gbc.pc(), 0xcf44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf43), 0xf2);
        EXPECT(gbc.readMem(0xff12), 0x52);
        // F2 0225
        gbc.setState(0xd28f, 0x5408, 0xe560, 0xd035, 0xc9dc, 0xa137, 0x1, 0x0);
        gbc.writeMem(0xd28f, { 0xf2 });
        gbc.writeMem(0xff35, { 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x5408);
        EXPECT(gbc.pc(), 0xd290);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd28f), 0xf2);
        EXPECT(gbc.readMem(0xff35), 0x4e);
        // F2 0226
        gbc.setState(0x5351, 0x2315, 0x4eb0, 0xdb5b, 0x899e, 0x6c26, 0x1, 0x1);
        gbc.writeMem(0x5351, { 0xf2 });
        gbc.writeMem(0xff5b, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x2315);
        EXPECT(gbc.pc(), 0x5352);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff5b), 0xff);
        // F2 0227
        gbc.setState(0x7f87, 0x1c33, 0x8ea0, 0x5581, 0x1d2, 0x7a6, 0x1, 0x0);
        gbc.writeMem(0x7f87, { 0xf2 });
        gbc.writeMem(0xff81, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x1c33);
        EXPECT(gbc.pc(), 0x7f88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff81), 0x19);
        // F2 0228
        gbc.setState(0xae5f, 0xab95, 0xe2b0, 0x954c, 0xfd2a, 0x8699, 0x0, 0x1);
        gbc.writeMem(0xae5f, { 0xf2 });
        gbc.writeMem(0xff4c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xab95);
        EXPECT(gbc.pc(), 0xae60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae5f), 0xf2);
        EXPECT(gbc.readMem(0xff4c), 0x5a);
        // F2 0229
        gbc.setState(0x5171, 0xdf0c, 0x3650, 0x605d, 0xc302, 0x3e39, 0x1, 0x0);
        gbc.writeMem(0x5171, { 0xf2 });
        gbc.writeMem(0xff5d, { 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xdf0c);
        EXPECT(gbc.pc(), 0x5172);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff5d), 0x1a);
        // F2 022A
        gbc.setState(0x9931, 0x775d, 0x8d20, 0x2829, 0xf93d, 0x1fa4, 0x0, 0x1);
        gbc.writeMem(0x9931, { 0xf2 });
        gbc.writeMem(0xff29, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x775d);
        EXPECT(gbc.pc(), 0x9932);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9931), 0xf2);
        EXPECT(gbc.readMem(0xff29), 0xa2);
        // F2 022B
        gbc.setState(0xd976, 0x6498, 0x9630, 0x56a5, 0xf3df, 0x6617, 0x1, 0x0);
        gbc.writeMem(0xd976, { 0xf2 });
        gbc.writeMem(0xffa5, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x6498);
        EXPECT(gbc.pc(), 0xd977);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd976), 0xf2);
        EXPECT(gbc.readMem(0xffa5), 0x9);
        // F2 022C
        gbc.setState(0x6809, 0x80c8, 0xe960, 0xbffd, 0x15bb, 0x8ce, 0x1, 0x1);
        gbc.writeMem(0x6809, { 0xf2 });
        gbc.writeMem(0xfffd, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x80c8);
        EXPECT(gbc.pc(), 0x680a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfffd), 0xb7);
        // F2 022D
        gbc.setState(0x9e8c, 0x9606, 0xc9a0, 0xfd13, 0x9a99, 0x54e4, 0x1, 0x0);
        gbc.writeMem(0x9e8c, { 0xf2 });
        gbc.writeMem(0xff13, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x9606);
        EXPECT(gbc.pc(), 0x9e8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e8c), 0xf2);
        EXPECT(gbc.readMem(0xff13), 0xc0);
        // F2 022E
        gbc.setState(0xc127, 0xfa22, 0x3ae0, 0xd95a, 0x9754, 0x5c31, 0x0, 0x0);
        gbc.writeMem(0xc127, { 0xf2 });
        gbc.writeMem(0xff5a, { 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xfa22);
        EXPECT(gbc.pc(), 0xc128);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc127), 0xf2);
        EXPECT(gbc.readMem(0xff5a), 0x6a);
        // F2 022F
        gbc.setState(0xb981, 0xcab7, 0x1a10, 0x46f9, 0x7b1f, 0xffc7, 0x1, 0x0);
        gbc.writeMem(0xb981, { 0xf2 });
        gbc.writeMem(0xfff9, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xcab7);
        EXPECT(gbc.pc(), 0xb982);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb981), 0xf2);
        EXPECT(gbc.readMem(0xfff9), 0x10);
        // F2 0230
        gbc.setState(0x25e3, 0x9a25, 0x7a30, 0x6b97, 0x7930, 0xa44f, 0x1, 0x0);
        gbc.writeMem(0x25e3, { 0xf2 });
        gbc.writeMem(0xff97, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x9a25);
        EXPECT(gbc.pc(), 0x25e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff97), 0xfa);
        // F2 0231
        gbc.setState(0x5f10, 0x52a2, 0x860, 0xb6eb, 0x13e3, 0x8b4b, 0x1, 0x0);
        gbc.writeMem(0x5f10, { 0xf2 });
        gbc.writeMem(0xffeb, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x52a2);
        EXPECT(gbc.pc(), 0x5f11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffeb), 0xbb);
        // F2 0232
        gbc.setState(0xb62f, 0x2024, 0x9c30, 0x6837, 0xcedb, 0xfeb0, 0x0, 0x0);
        gbc.writeMem(0xb62f, { 0xf2 });
        gbc.writeMem(0xff37, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x2024);
        EXPECT(gbc.pc(), 0xb630);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb62f), 0xf2);
        EXPECT(gbc.readMem(0xff37), 0x7e);
        // F2 0233
        gbc.setState(0x9d64, 0xcd30, 0x6d20, 0x5822, 0xb0b2, 0xdec7, 0x0, 0x1);
        gbc.writeMem(0x9d64, { 0xf2 });
        gbc.writeMem(0xff22, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xcd30);
        EXPECT(gbc.pc(), 0x9d65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d64), 0xf2);
        EXPECT(gbc.readMem(0xff22), 0x77);
        // F2 0234
        gbc.setState(0xdc45, 0x6bf, 0xd860, 0xa616, 0x71f4, 0xa610, 0x1, 0x0);
        gbc.writeMem(0xdc45, { 0xf2 });
        gbc.writeMem(0xff16, { 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x6bf);
        EXPECT(gbc.pc(), 0xdc46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc45), 0xf2);
        EXPECT(gbc.readMem(0xff16), 0xad);
        // F2 0235
        gbc.setState(0xaf43, 0xb1a4, 0x4980, 0x5c32, 0x1e09, 0x7a79, 0x0, 0x1);
        gbc.writeMem(0xaf43, { 0xf2 });
        gbc.writeMem(0xff32, { 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xb1a4);
        EXPECT(gbc.pc(), 0xaf44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf43), 0xf2);
        EXPECT(gbc.readMem(0xff32), 0x92);
        // F2 0236
        gbc.setState(0x2c02, 0x3013, 0x9f00, 0xe380, 0x88db, 0xec3c, 0x1, 0x1);
        gbc.writeMem(0x2c02, { 0xf2 });
        gbc.writeMem(0xff80, { 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x3013);
        EXPECT(gbc.pc(), 0x2c03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff80), 0x8e);
        // F2 0237
        gbc.setState(0xb8c2, 0xf13, 0xa060, 0xbec8, 0x86e7, 0x9c46, 0x0, 0x1);
        gbc.writeMem(0xb8c2, { 0xf2 });
        gbc.writeMem(0xffc8, { 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xf13);
        EXPECT(gbc.pc(), 0xb8c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8c2), 0xf2);
        EXPECT(gbc.readMem(0xffc8), 0x7a);
        // F2 0238
        gbc.setState(0x9654, 0x9ed2, 0xc000, 0xbb2d, 0x964d, 0x1f6c, 0x1, 0x0);
        gbc.writeMem(0x9654, { 0xf2 });
        gbc.writeMem(0xff2d, { 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x9ed2);
        EXPECT(gbc.pc(), 0x9655);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9654), 0xf2);
        EXPECT(gbc.readMem(0xff2d), 0xe0);
        // F2 0239
        gbc.setState(0x526a, 0xe750, 0xdbf0, 0x844e, 0xa23b, 0xca22, 0x0, 0x1);
        gbc.writeMem(0x526a, { 0xf2 });
        gbc.writeMem(0xff4e, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xe750);
        EXPECT(gbc.pc(), 0x526b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff4e), 0xf);
        // F2 023A
        gbc.setState(0x186f, 0x6165, 0x7970, 0xdc0c, 0xffe2, 0x6f50, 0x1, 0x0);
        gbc.writeMem(0x186f, { 0xf2 });
        gbc.writeMem(0xff0c, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x6165);
        EXPECT(gbc.pc(), 0x1870);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff0c), 0x94);
        // F2 023B
        gbc.setState(0x1f9f, 0x74a0, 0x3030, 0x12cc, 0xc2d2, 0x3959, 0x0, 0x0);
        gbc.writeMem(0x1f9f, { 0xf2 });
        gbc.writeMem(0xffcc, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x74a0);
        EXPECT(gbc.pc(), 0x1fa0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffcc), 0x8d);
        // F2 023C
        gbc.setState(0xeccf, 0x6540, 0xfe50, 0x6979, 0x4cdf, 0x4896, 0x0, 0x0);
        gbc.writeMem(0xeccf, { 0xf2 });
        gbc.writeMem(0xff79, { 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x6540);
        EXPECT(gbc.pc(), 0xecd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeccf), 0xf2);
        EXPECT(gbc.readMem(0xff79), 0x18);
        // F2 023E
        gbc.setState(0x5eb9, 0x1767, 0x30c0, 0xb9ff, 0x6b83, 0x780c, 0x1, 0x1);
        gbc.writeMem(0x5eb9, { 0xf2 });
        gbc.writeMem(0xffff, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x1767);
        EXPECT(gbc.pc(), 0x5eba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffff), 0x11);
        // F2 023F
        gbc.setState(0xdeab, 0x64b2, 0x14d0, 0xc6c3, 0x433a, 0x6cf2, 0x1, 0x1);
        gbc.writeMem(0xdeab, { 0xf2 });
        gbc.writeMem(0xffc3, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x64b2);
        EXPECT(gbc.pc(), 0xdeac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdeab), 0xf2);
        EXPECT(gbc.readMem(0xffc3), 0x19);
        // F2 0240
        gbc.setState(0xa510, 0x73a8, 0x47c0, 0xca98, 0x5ed5, 0x3b85, 0x1, 0x1);
        gbc.writeMem(0xa510, { 0xf2 });
        gbc.writeMem(0xff98, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x73a8);
        EXPECT(gbc.pc(), 0xa511);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa510), 0xf2);
        EXPECT(gbc.readMem(0xff98), 0x95);
        // F2 0241
        gbc.setState(0xa0f9, 0xf86a, 0xdc50, 0x2ef1, 0x483f, 0xc951, 0x0, 0x0);
        gbc.writeMem(0xa0f9, { 0xf2 });
        gbc.writeMem(0xfff1, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xf86a);
        EXPECT(gbc.pc(), 0xa0fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0f9), 0xf2);
        EXPECT(gbc.readMem(0xfff1), 0x77);
        // F2 0242
        gbc.setState(0xc990, 0x72de, 0x41c0, 0xa016, 0x40da, 0xea10, 0x1, 0x1);
        gbc.writeMem(0xc990, { 0xf2 });
        gbc.writeMem(0xff16, { 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x72de);
        EXPECT(gbc.pc(), 0xc991);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc990), 0xf2);
        EXPECT(gbc.readMem(0xff16), 0xad);
        // F2 0243
        gbc.setState(0x5c3a, 0xdb11, 0x57f0, 0x6774, 0xfbde, 0xe2fa, 0x0, 0x0);
        gbc.writeMem(0x5c3a, { 0xf2 });
        gbc.writeMem(0xff74, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xdb11);
        EXPECT(gbc.pc(), 0x5c3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff74), 0x76);
        // F2 0244
        gbc.setState(0xec2e, 0x725a, 0x9e60, 0xfb4a, 0x77e2, 0x82f6, 0x0, 0x0);
        gbc.writeMem(0xec2e, { 0xf2 });
        gbc.writeMem(0xff4a, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x725a);
        EXPECT(gbc.pc(), 0xec2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec2e), 0xf2);
        EXPECT(gbc.readMem(0xff4a), 0x7e);
        // F2 0245
        gbc.setState(0x778d, 0x368a, 0xe470, 0xcbe2, 0xfc1c, 0xd6d6, 0x1, 0x1);
        gbc.writeMem(0x778d, { 0xf2 });
        gbc.writeMem(0xffe2, { 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x368a);
        EXPECT(gbc.pc(), 0x778e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffe2), 0xce);
        // F2 0246
        gbc.setState(0x1fc9, 0x13a5, 0x3c30, 0x9bfa, 0x6b64, 0x68bc, 0x1, 0x0);
        gbc.writeMem(0x1fc9, { 0xf2 });
        gbc.writeMem(0xfffa, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x13a5);
        EXPECT(gbc.pc(), 0x1fca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfffa), 0xd5);
        // F2 0247
        gbc.setState(0x671d, 0x6995, 0x6190, 0xf768, 0x8058, 0x236f, 0x0, 0x1);
        gbc.writeMem(0x671d, { 0xf2 });
        gbc.writeMem(0xff68, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x6995);
        EXPECT(gbc.pc(), 0x671e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff68), 0xa2);
        // F2 0248
        gbc.setState(0xd51b, 0xda5, 0x4b50, 0x93aa, 0xa000, 0xca8, 0x0, 0x0);
        gbc.writeMem(0xd51b, { 0xf2 });
        gbc.writeMem(0xffaa, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xda5);
        EXPECT(gbc.pc(), 0xd51c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd51b), 0xf2);
        EXPECT(gbc.readMem(0xffaa), 0x24);
        // F2 0249
        gbc.setState(0x79d9, 0xb940, 0xba60, 0x4441, 0xf9da, 0xbd6d, 0x0, 0x1);
        gbc.writeMem(0x79d9, { 0xf2 });
        gbc.writeMem(0xff41, { 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xb940);
        EXPECT(gbc.pc(), 0x79da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff41), 0x4);
        // F2 024A
        gbc.setState(0xe204, 0x9bf8, 0x8bf0, 0xe349, 0x42cc, 0x2631, 0x1, 0x0);
        gbc.writeMem(0xe204, { 0xf2 });
        gbc.writeMem(0xff49, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x9bf8);
        EXPECT(gbc.pc(), 0xe205);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe204), 0xf2);
        EXPECT(gbc.readMem(0xff49), 0xf0);
        // F2 024B
        gbc.setState(0xe343, 0x3995, 0xbf20, 0x7ee3, 0xf474, 0x8036, 0x0, 0x1);
        gbc.writeMem(0xe343, { 0xf2 });
        gbc.writeMem(0xffe3, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x3995);
        EXPECT(gbc.pc(), 0xe344);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe343), 0xf2);
        EXPECT(gbc.readMem(0xffe3), 0xf3);
        // F2 024C
        gbc.setState(0x1081, 0xf850, 0xbd20, 0x660d, 0xdbe3, 0xb06b, 0x0, 0x0);
        gbc.writeMem(0x1081, { 0xf2 });
        gbc.writeMem(0xff0d, { 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xf850);
        EXPECT(gbc.pc(), 0x1082);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff0d), 0xa0);
        // F2 024D
        gbc.setState(0x1573, 0xef87, 0xb890, 0xe9c, 0xed32, 0xd52a, 0x0, 0x1);
        gbc.writeMem(0x1573, { 0xf2 });
        gbc.writeMem(0xff9c, { 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xef87);
        EXPECT(gbc.pc(), 0x1574);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff9c), 0xb6);
        // F2 024E
        gbc.setState(0x2550, 0x4383, 0xc980, 0xfea8, 0x29e4, 0x3a05, 0x1, 0x0);
        gbc.writeMem(0x2550, { 0xf2 });
        gbc.writeMem(0xffa8, { 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x4383);
        EXPECT(gbc.pc(), 0x2551);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffa8), 0x85);
        // F2 024F
        gbc.setState(0xa32b, 0x3f3d, 0x2fa0, 0xaa39, 0xfc87, 0x14b8, 0x0, 0x0);
        gbc.writeMem(0xa32b, { 0xf2 });
        gbc.writeMem(0xff39, { 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x3f3d);
        EXPECT(gbc.pc(), 0xa32c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa32b), 0xf2);
        EXPECT(gbc.readMem(0xff39), 0xc3);
        // F2 0250
        gbc.setState(0x920b, 0xec61, 0xf010, 0xc699, 0xb4ba, 0x302a, 0x0, 0x0);
        gbc.writeMem(0x920b, { 0xf2 });
        gbc.writeMem(0xff99, { 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xec61);
        EXPECT(gbc.pc(), 0x920c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x920b), 0xf2);
        EXPECT(gbc.readMem(0xff99), 0x3d);
        // F2 0251
        gbc.setState(0xafce, 0x15ae, 0x2310, 0x11bd, 0x9e8f, 0xb102, 0x1, 0x0);
        gbc.writeMem(0xafce, { 0xf2 });
        gbc.writeMem(0xffbd, { 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x15ae);
        EXPECT(gbc.pc(), 0xafcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafce), 0xf2);
        EXPECT(gbc.readMem(0xffbd), 0x3d);
        // F2 0252
        gbc.setState(0xc455, 0x27d8, 0xb170, 0xf584, 0x5f1, 0xfe3d, 0x0, 0x0);
        gbc.writeMem(0xc455, { 0xf2 });
        gbc.writeMem(0xff84, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x27d8);
        EXPECT(gbc.pc(), 0xc456);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc455), 0xf2);
        EXPECT(gbc.readMem(0xff84), 0xb7);
        // F2 0253
        gbc.setState(0x8f63, 0xac0a, 0xcb30, 0xa7ef, 0xed55, 0x7c5, 0x0, 0x0);
        gbc.writeMem(0x8f63, { 0xf2 });
        gbc.writeMem(0xffef, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xac0a);
        EXPECT(gbc.pc(), 0x8f64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f63), 0xf2);
        EXPECT(gbc.readMem(0xffef), 0xdb);
        // F2 0254
        gbc.setState(0x8e52, 0x3986, 0x8450, 0x29e, 0xc4dc, 0xa72a, 0x0, 0x1);
        gbc.writeMem(0x8e52, { 0xf2 });
        gbc.writeMem(0xff9e, { 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x3986);
        EXPECT(gbc.pc(), 0x8e53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e52), 0xf2);
        EXPECT(gbc.readMem(0xff9e), 0xde);
        // F2 0255
        gbc.setState(0xaf4b, 0x915, 0x6610, 0x3b46, 0x2ae4, 0xde0f, 0x0, 0x1);
        gbc.writeMem(0xaf4b, { 0xf2 });
        gbc.writeMem(0xff46, { 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x915);
        EXPECT(gbc.pc(), 0xaf4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf4b), 0xf2);
        EXPECT(gbc.readMem(0xff46), 0xbc);
        // F2 0256
        gbc.setState(0x4c58, 0x2787, 0x48b0, 0xf6f3, 0x4bb5, 0x6ec6, 0x0, 0x1);
        gbc.writeMem(0x4c58, { 0xf2 });
        gbc.writeMem(0xfff3, { 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x2787);
        EXPECT(gbc.pc(), 0x4c59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfff3), 0x48);
        // F2 0257
        gbc.setState(0xb3c3, 0xd5ac, 0x8b20, 0x8004, 0xbd81, 0x6373, 0x1, 0x1);
        gbc.writeMem(0xb3c3, { 0xf2 });
        gbc.writeMem(0xff04, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xd5ac);
        EXPECT(gbc.pc(), 0xb3c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3c3), 0xf2);
        EXPECT(gbc.readMem(0xff04), 0x59);
        // F2 0258
        gbc.setState(0xdde, 0x829a, 0xd40, 0x74a9, 0xd87a, 0x61f7, 0x1, 0x0);
        gbc.writeMem(0xdde, { 0xf2 });
        gbc.writeMem(0xffa9, { 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x829a);
        EXPECT(gbc.pc(), 0xddf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffa9), 0x61);
        // F2 0259
        gbc.setState(0x2061, 0x5f66, 0x63f0, 0xe259, 0x7534, 0x877b, 0x0, 0x0);
        gbc.writeMem(0x2061, { 0xf2 });
        gbc.writeMem(0xff59, { 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x5f66);
        EXPECT(gbc.pc(), 0x2062);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff59), 0xda);
        // F2 025A
        gbc.setState(0xdf2a, 0x5226, 0x3830, 0x1ca8, 0xe7e3, 0xc211, 0x0, 0x1);
        gbc.writeMem(0xdf2a, { 0xf2 });
        gbc.writeMem(0xffa8, { 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x5226);
        EXPECT(gbc.pc(), 0xdf2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf2a), 0xf2);
        EXPECT(gbc.readMem(0xffa8), 0x85);
        // F2 025B
        gbc.setState(0x94b6, 0x8c1f, 0xffb0, 0x548b, 0x1015, 0x91b0, 0x1, 0x1);
        gbc.writeMem(0x94b6, { 0xf2 });
        gbc.writeMem(0xff8b, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x8c1f);
        EXPECT(gbc.pc(), 0x94b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94b6), 0xf2);
        EXPECT(gbc.readMem(0xff8b), 0x23);
        // F2 025C
        gbc.setState(0xa75e, 0xd938, 0x1530, 0xf563, 0x1262, 0x9059, 0x1, 0x0);
        gbc.writeMem(0xa75e, { 0xf2 });
        gbc.writeMem(0xff63, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xd938);
        EXPECT(gbc.pc(), 0xa75f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa75e), 0xf2);
        EXPECT(gbc.readMem(0xff63), 0x30);
        // F2 025D
        gbc.setState(0x13c, 0x2dd9, 0x2fd0, 0x4cb1, 0xdd7d, 0x8194, 0x1, 0x1);
        gbc.writeMem(0x13c, { 0xf2 });
        gbc.writeMem(0xffb1, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x2dd9);
        EXPECT(gbc.pc(), 0x13d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffb1), 0x63);
        // F2 025E
        gbc.setState(0x8ec6, 0x5c7d, 0xde20, 0xcb25, 0xd94c, 0xf3, 0x0, 0x1);
        gbc.writeMem(0x8ec6, { 0xf2 });
        gbc.writeMem(0xff25, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x5c7d);
        EXPECT(gbc.pc(), 0x8ec7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ec6), 0xf2);
        EXPECT(gbc.readMem(0xff25), 0xa9);
        // F2 025F
        gbc.setState(0xad1d, 0xc2a, 0x8bf0, 0x283b, 0xa601, 0x8722, 0x0, 0x1);
        gbc.writeMem(0xad1d, { 0xf2 });
        gbc.writeMem(0xff3b, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xc2a);
        EXPECT(gbc.pc(), 0xad1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad1d), 0xf2);
        EXPECT(gbc.readMem(0xff3b), 0xb2);
        // F2 0260
        gbc.setState(0xe4d3, 0x6b3a, 0x12e0, 0x139d, 0xe09, 0x8895, 0x1, 0x0);
        gbc.writeMem(0xe4d3, { 0xf2 });
        gbc.writeMem(0xff9d, { 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x6b3a);
        EXPECT(gbc.pc(), 0xe4d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4d3), 0xf2);
        EXPECT(gbc.readMem(0xff9d), 0xc);
        // F2 0262
        gbc.setState(0x3a90, 0x7353, 0xdc0, 0xf542, 0xdaaa, 0x35b3, 0x0, 0x1);
        gbc.writeMem(0x3a90, { 0xf2 });
        gbc.writeMem(0xff42, { 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x7353);
        EXPECT(gbc.pc(), 0x3a91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff42), 0x50);
        // F2 0263
        gbc.setState(0x84d2, 0x5388, 0x59d0, 0xb9f, 0x9936, 0x941f, 0x1, 0x1);
        gbc.writeMem(0x84d2, { 0xf2 });
        gbc.writeMem(0xff9f, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x5388);
        EXPECT(gbc.pc(), 0x84d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84d2), 0xf2);
        EXPECT(gbc.readMem(0xff9f), 0xe7);
        // F2 0264
        gbc.setState(0x531b, 0x652e, 0xb9c0, 0xe618, 0xa9cc, 0xe446, 0x1, 0x1);
        gbc.writeMem(0x531b, { 0xf2 });
        gbc.writeMem(0xff18, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x652e);
        EXPECT(gbc.pc(), 0x531c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff18), 0x2);
        // F2 0265
        gbc.setState(0xcbcd, 0xb77d, 0x2960, 0xa627, 0x85fc, 0x59a8, 0x0, 0x0);
        gbc.writeMem(0xcbcd, { 0xf2 });
        gbc.writeMem(0xff27, { 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xb77d);
        EXPECT(gbc.pc(), 0xcbce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbcd), 0xf2);
        EXPECT(gbc.readMem(0xff27), 0x3c);
        // F2 0266
        gbc.setState(0x3c29, 0x1ae4, 0x7580, 0xb567, 0xbab4, 0xbc22, 0x1, 0x1);
        gbc.writeMem(0x3c29, { 0xf2 });
        gbc.writeMem(0xff67, { 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x1ae4);
        EXPECT(gbc.pc(), 0x3c2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff67), 0x27);
        // F2 0267
        gbc.setState(0xcec9, 0x7d5f, 0x6fd0, 0xbd5d, 0xd623, 0xb99b, 0x1, 0x0);
        gbc.writeMem(0xcec9, { 0xf2 });
        gbc.writeMem(0xff5d, { 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x7d5f);
        EXPECT(gbc.pc(), 0xceca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcec9), 0xf2);
        EXPECT(gbc.readMem(0xff5d), 0x1a);
        // F2 0268
        gbc.setState(0xa276, 0x2755, 0x9040, 0xdedf, 0x8448, 0xe38a, 0x1, 0x1);
        gbc.writeMem(0xa276, { 0xf2 });
        gbc.writeMem(0xffdf, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x2755);
        EXPECT(gbc.pc(), 0xa277);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa276), 0xf2);
        EXPECT(gbc.readMem(0xffdf), 0xd);
        // F2 0269
        gbc.setState(0x4c3e, 0x90f6, 0x72b0, 0x23c6, 0xbc55, 0x6433, 0x1, 0x0);
        gbc.writeMem(0x4c3e, { 0xf2 });
        gbc.writeMem(0xffc6, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x90f6);
        EXPECT(gbc.pc(), 0x4c3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffc6), 0x37);
        // F2 026A
        gbc.setState(0xcdc5, 0xb5f, 0x4c90, 0x8ecb, 0x7217, 0xe0c0, 0x0, 0x1);
        gbc.writeMem(0xcdc5, { 0xf2 });
        gbc.writeMem(0xffcb, { 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xb5f);
        EXPECT(gbc.pc(), 0xcdc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdc5), 0xf2);
        EXPECT(gbc.readMem(0xffcb), 0x64);
        // F2 026B
        gbc.setState(0x5bf7, 0x330f, 0x4c20, 0xea34, 0x9e0e, 0xc8de, 0x1, 0x1);
        gbc.writeMem(0x5bf7, { 0xf2 });
        gbc.writeMem(0xff34, { 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x330f);
        EXPECT(gbc.pc(), 0x5bf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff34), 0xcb);
        // F2 026C
        gbc.setState(0x88d8, 0x4bba, 0xc680, 0xd7db, 0xc74c, 0x5158, 0x1, 0x0);
        gbc.writeMem(0x88d8, { 0xf2 });
        gbc.writeMem(0xffdb, { 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x4bba);
        EXPECT(gbc.pc(), 0x88d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88d8), 0xf2);
        EXPECT(gbc.readMem(0xffdb), 0x1e);
        // F2 026D
        gbc.setState(0x2b6d, 0x51cd, 0x8ba0, 0xa06, 0x1da9, 0xa610, 0x1, 0x0);
        gbc.writeMem(0x2b6d, { 0xf2 });
        gbc.writeMem(0xff06, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x51cd);
        EXPECT(gbc.pc(), 0x2b6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff06), 0xf4);
        // F2 026E
        gbc.setState(0xc065, 0x29b9, 0xfd60, 0x4462, 0x47c4, 0xf2db, 0x1, 0x0);
        gbc.writeMem(0xc065, { 0xf2 });
        gbc.writeMem(0xff62, { 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x29b9);
        EXPECT(gbc.pc(), 0xc066);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc065), 0xf2);
        EXPECT(gbc.readMem(0xff62), 0x1a);
        // F2 026F
        gbc.setState(0x6b2, 0x4cb9, 0xc910, 0xa06e, 0x751c, 0xf64a, 0x0, 0x0);
        gbc.writeMem(0x6b2, { 0xf2 });
        gbc.writeMem(0xff6e, { 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x4cb9);
        EXPECT(gbc.pc(), 0x6b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff6e), 0x4);
        // F2 0270
        gbc.setState(0x3fe4, 0x2075, 0x62d0, 0x228, 0xb12c, 0x461a, 0x1, 0x1);
        gbc.writeMem(0x3fe4, { 0xf2 });
        gbc.writeMem(0xff28, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x2075);
        EXPECT(gbc.pc(), 0x3fe5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff28), 0x95);
        // F2 0271
        gbc.setState(0xec5a, 0x2913, 0x9230, 0x806c, 0x413e, 0xba69, 0x1, 0x0);
        gbc.writeMem(0xec5a, { 0xf2 });
        gbc.writeMem(0xff6c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x2913);
        EXPECT(gbc.pc(), 0xec5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec5a), 0xf2);
        EXPECT(gbc.readMem(0xff6c), 0xa8);
        // F2 0273
        gbc.setState(0x96a2, 0x8c89, 0xac20, 0x2d45, 0x1700, 0xc324, 0x1, 0x0);
        gbc.writeMem(0x96a2, { 0xf2 });
        gbc.writeMem(0xff45, { 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x8c89);
        EXPECT(gbc.pc(), 0x96a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96a2), 0xf2);
        EXPECT(gbc.readMem(0xff45), 0xd4);
        // F2 0274
        gbc.setState(0x2579, 0x8932, 0x7360, 0x44bd, 0xafef, 0xdc0f, 0x0, 0x0);
        gbc.writeMem(0x2579, { 0xf2 });
        gbc.writeMem(0xffbd, { 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x8932);
        EXPECT(gbc.pc(), 0x257a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffbd), 0x3d);
        // F2 0275
        gbc.setState(0xd83d, 0x8e28, 0x8e60, 0x72d4, 0x5636, 0x1a2f, 0x0, 0x0);
        gbc.writeMem(0xd83d, { 0xf2 });
        gbc.writeMem(0xffd4, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x8e28);
        EXPECT(gbc.pc(), 0xd83e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd83d), 0xf2);
        EXPECT(gbc.readMem(0xffd4), 0x9f);
        // F2 0276
        gbc.setState(0x2ce9, 0x933c, 0xe120, 0x9a38, 0x20b0, 0x8956, 0x0, 0x1);
        gbc.writeMem(0x2ce9, { 0xf2 });
        gbc.writeMem(0xff38, { 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x933c);
        EXPECT(gbc.pc(), 0x2cea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff38), 0xcc);
        // F2 0277
        gbc.setState(0xb795, 0xe2c6, 0xfe30, 0x618f, 0x2f6, 0x1664, 0x1, 0x1);
        gbc.writeMem(0xb795, { 0xf2 });
        gbc.writeMem(0xff8f, { 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xe2c6);
        EXPECT(gbc.pc(), 0xb796);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb795), 0xf2);
        EXPECT(gbc.readMem(0xff8f), 0x1c);
        // F2 0278
        gbc.setState(0x332b, 0x71b3, 0x8550, 0xd3a8, 0x63a3, 0xfded, 0x0, 0x0);
        gbc.writeMem(0x332b, { 0xf2 });
        gbc.writeMem(0xffa8, { 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x71b3);
        EXPECT(gbc.pc(), 0x332c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffa8), 0x85);
        // F2 0279
        gbc.setState(0x282d, 0x1f29, 0x3430, 0xcb6b, 0x6b9d, 0x9a29, 0x0, 0x1);
        gbc.writeMem(0x282d, { 0xf2 });
        gbc.writeMem(0xff6b, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x1f29);
        EXPECT(gbc.pc(), 0x282e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff6b), 0x86);
        // F2 027A
        gbc.setState(0x6ef2, 0xccdc, 0xe1f0, 0xad82, 0x962e, 0x6acd, 0x1, 0x1);
        gbc.writeMem(0x6ef2, { 0xf2 });
        gbc.writeMem(0xff82, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xccdc);
        EXPECT(gbc.pc(), 0x6ef3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff82), 0x5e);
        // F2 027B
        gbc.setState(0x824e, 0xeb9f, 0x1b60, 0xbf26, 0xa280, 0xc562, 0x1, 0x0);
        gbc.writeMem(0x824e, { 0xf2 });
        gbc.writeMem(0xff26, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xeb9f);
        EXPECT(gbc.pc(), 0x824f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x824e), 0xf2);
        EXPECT(gbc.readMem(0xff26), 0x57);
        // F2 027C
        gbc.setState(0xe540, 0x8d01, 0xff90, 0x8ecc, 0x6c3a, 0x33ff, 0x1, 0x0);
        gbc.writeMem(0xe540, { 0xf2 });
        gbc.writeMem(0xffcc, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x8d01);
        EXPECT(gbc.pc(), 0xe541);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe540), 0xf2);
        EXPECT(gbc.readMem(0xffcc), 0x8d);
        // F2 027D
        gbc.setState(0xbba0, 0x4b0f, 0xf400, 0xf59e, 0xa4e9, 0xe824, 0x1, 0x0);
        gbc.writeMem(0xbba0, { 0xf2 });
        gbc.writeMem(0xff9e, { 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x4b0f);
        EXPECT(gbc.pc(), 0xbba1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbba0), 0xf2);
        EXPECT(gbc.readMem(0xff9e), 0xde);
        // F2 027E
        gbc.setState(0xd1e9, 0x3f2b, 0x62a0, 0x65e5, 0x401c, 0x31f6, 0x0, 0x0);
        gbc.writeMem(0xd1e9, { 0xf2 });
        gbc.writeMem(0xffe5, { 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x3f2b);
        EXPECT(gbc.pc(), 0xd1ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1e9), 0xf2);
        EXPECT(gbc.readMem(0xffe5), 0x8c);
        // F2 027F
        gbc.setState(0x4bd3, 0x271e, 0x4df0, 0x8c21, 0x9680, 0x86e, 0x1, 0x0);
        gbc.writeMem(0x4bd3, { 0xf2 });
        gbc.writeMem(0xff21, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x271e);
        EXPECT(gbc.pc(), 0x4bd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff21), 0xd5);
        // F2 0280
        gbc.setState(0x222b, 0xa5b7, 0x2bf0, 0xcd9c, 0x3440, 0x27cb, 0x0, 0x1);
        gbc.writeMem(0x222b, { 0xf2 });
        gbc.writeMem(0xff9c, { 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xa5b7);
        EXPECT(gbc.pc(), 0x222c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff9c), 0xb6);
        // F2 0281
        gbc.setState(0xda02, 0xdd2, 0xe70, 0x1920, 0x5247, 0xedb8, 0x1, 0x1);
        gbc.writeMem(0xda02, { 0xf2 });
        gbc.writeMem(0xff20, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xdd2);
        EXPECT(gbc.pc(), 0xda03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda02), 0xf2);
        EXPECT(gbc.readMem(0xff20), 0xec);
        // F2 0282
        gbc.setState(0x7269, 0xd449, 0x94d0, 0x8eff, 0x649d, 0x6c21, 0x0, 0x1);
        gbc.writeMem(0x7269, { 0xf2 });
        gbc.writeMem(0xffff, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xd449);
        EXPECT(gbc.pc(), 0x726a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffff), 0x11);
        // F2 0283
        gbc.setState(0x132d, 0x7684, 0x2ce0, 0xc5f2, 0xe91c, 0xc70, 0x1, 0x1);
        gbc.writeMem(0x132d, { 0xf2 });
        gbc.writeMem(0xfff2, { 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x7684);
        EXPECT(gbc.pc(), 0x132e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfff2), 0x98);
        // F2 0284
        gbc.setState(0x8453, 0x2651, 0x4f00, 0xa6d0, 0x97a1, 0xf5d3, 0x0, 0x1);
        gbc.writeMem(0x8453, { 0xf2 });
        gbc.writeMem(0xffd0, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x2651);
        EXPECT(gbc.pc(), 0x8454);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8453), 0xf2);
        EXPECT(gbc.readMem(0xffd0), 0x63);
        // F2 0285
        gbc.setState(0x74fe, 0xdeb1, 0xe3c0, 0xa69, 0x8b5, 0x28b5, 0x1, 0x1);
        gbc.writeMem(0x74fe, { 0xf2 });
        gbc.writeMem(0xff69, { 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xdeb1);
        EXPECT(gbc.pc(), 0x74ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff69), 0x9e);
        // F2 0286
        gbc.setState(0x6fb6, 0x6a7e, 0xc8a0, 0xad67, 0x8050, 0x8188, 0x0, 0x0);
        gbc.writeMem(0x6fb6, { 0xf2 });
        gbc.writeMem(0xff67, { 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x6a7e);
        EXPECT(gbc.pc(), 0x6fb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff67), 0x27);
        // F2 0287
        gbc.setState(0x9a6c, 0xa068, 0x6560, 0x6ee6, 0xe86, 0x850e, 0x0, 0x1);
        gbc.writeMem(0x9a6c, { 0xf2 });
        gbc.writeMem(0xffe6, { 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xa068);
        EXPECT(gbc.pc(), 0x9a6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a6c), 0xf2);
        EXPECT(gbc.readMem(0xffe6), 0x2c);
        // F2 0288
        gbc.setState(0x9fb3, 0x4bb6, 0xefe0, 0x9a0b, 0x6fa5, 0xe4a8, 0x1, 0x0);
        gbc.writeMem(0x9fb3, { 0xf2 });
        gbc.writeMem(0xff0b, { 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x4bb6);
        EXPECT(gbc.pc(), 0x9fb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fb3), 0xf2);
        EXPECT(gbc.readMem(0xff0b), 0xea);
        // F2 0289
        gbc.setState(0x31b6, 0x1e02, 0xd30, 0xc609, 0x6041, 0x7093, 0x1, 0x1);
        gbc.writeMem(0x31b6, { 0xf2 });
        gbc.writeMem(0xff09, { 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x1e02);
        EXPECT(gbc.pc(), 0x31b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff09), 0x53);
        // F2 028A
        gbc.setState(0x7cc8, 0x2612, 0xc7d0, 0x7745, 0x5f3e, 0x2107, 0x1, 0x0);
        gbc.writeMem(0x7cc8, { 0xf2 });
        gbc.writeMem(0xff45, { 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x2612);
        EXPECT(gbc.pc(), 0x7cc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff45), 0xd4);
        // F2 028B
        gbc.setState(0x6040, 0xd2ca, 0x9720, 0x7c15, 0x490c, 0xc3a2, 0x0, 0x1);
        gbc.writeMem(0x6040, { 0xf2 });
        gbc.writeMem(0xff15, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xd2ca);
        EXPECT(gbc.pc(), 0x6041);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff15), 0xdb);
        // F2 028C
        gbc.setState(0x2d09, 0xa257, 0xebd0, 0xf313, 0xb8b8, 0x562, 0x0, 0x0);
        gbc.writeMem(0x2d09, { 0xf2 });
        gbc.writeMem(0xff13, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xa257);
        EXPECT(gbc.pc(), 0x2d0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff13), 0xc0);
        // F2 028D
        gbc.setState(0x1b7, 0xef6, 0x8650, 0xff53, 0xf2ed, 0x686a, 0x1, 0x1);
        gbc.writeMem(0x1b7, { 0xf2 });
        gbc.writeMem(0xff53, { 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xef6);
        EXPECT(gbc.pc(), 0x1b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff53), 0xd2);
        // F2 028E
        gbc.setState(0x3636, 0x72f5, 0x67b0, 0x3a57, 0xe080, 0x3e18, 0x1, 0x1);
        gbc.writeMem(0x3636, { 0xf2 });
        gbc.writeMem(0xff57, { 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x72f5);
        EXPECT(gbc.pc(), 0x3637);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff57), 0xf1);
        // F2 028F
        gbc.setState(0x9c5e, 0xe39a, 0xb2c0, 0xe7ec, 0x71a2, 0x19ad, 0x1, 0x1);
        gbc.writeMem(0x9c5e, { 0xf2 });
        gbc.writeMem(0xffec, { 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xe39a);
        EXPECT(gbc.pc(), 0x9c5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c5e), 0xf2);
        EXPECT(gbc.readMem(0xffec), 0x9d);
        // F2 0290
        gbc.setState(0xbee2, 0x4910, 0xf180, 0x106a, 0x3899, 0x81bb, 0x0, 0x0);
        gbc.writeMem(0xbee2, { 0xf2 });
        gbc.writeMem(0xff6a, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x4910);
        EXPECT(gbc.pc(), 0xbee3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbee2), 0xf2);
        EXPECT(gbc.readMem(0xff6a), 0x79);
        // F2 0291
        gbc.setState(0xb0bd, 0x5c85, 0x8b40, 0x158b, 0xe321, 0x4e1d, 0x0, 0x1);
        gbc.writeMem(0xb0bd, { 0xf2 });
        gbc.writeMem(0xff8b, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x5c85);
        EXPECT(gbc.pc(), 0xb0be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0bd), 0xf2);
        EXPECT(gbc.readMem(0xff8b), 0x23);
        // F2 0293
        gbc.setState(0x6f3d, 0x2d4e, 0x81f0, 0x2ec5, 0x36a0, 0xf599, 0x1, 0x1);
        gbc.writeMem(0x6f3d, { 0xf2 });
        gbc.writeMem(0xffc5, { 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x2d4e);
        EXPECT(gbc.pc(), 0x6f3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffc5), 0xe1);
        // F2 0294
        gbc.setState(0x8f67, 0xe06c, 0x5620, 0x157f, 0x58b8, 0xe335, 0x0, 0x1);
        gbc.writeMem(0x8f67, { 0xf2 });
        gbc.writeMem(0xff7f, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xe06c);
        EXPECT(gbc.pc(), 0x8f68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f67), 0xf2);
        EXPECT(gbc.readMem(0xff7f), 0x9);
        // F2 0295
        gbc.setState(0xad0d, 0x4c39, 0xa750, 0xf9a5, 0xcb97, 0x87a0, 0x0, 0x1);
        gbc.writeMem(0xad0d, { 0xf2 });
        gbc.writeMem(0xffa5, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x4c39);
        EXPECT(gbc.pc(), 0xad0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad0d), 0xf2);
        EXPECT(gbc.readMem(0xffa5), 0x9);
        // F2 0296
        gbc.setState(0x30c1, 0xbdb2, 0x7870, 0x4c42, 0x26de, 0x926c, 0x1, 0x1);
        gbc.writeMem(0x30c1, { 0xf2 });
        gbc.writeMem(0xff42, { 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xbdb2);
        EXPECT(gbc.pc(), 0x30c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff42), 0x50);
        // F2 0297
        gbc.setState(0x6cc0, 0x70b1, 0xfb60, 0x10ad, 0x5fc2, 0x9273, 0x1, 0x0);
        gbc.writeMem(0x6cc0, { 0xf2 });
        gbc.writeMem(0xffad, { 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x70b1);
        EXPECT(gbc.pc(), 0x6cc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffad), 0xb9);
        // F2 0298
        gbc.setState(0x273b, 0x2a92, 0x2610, 0x6ce3, 0x634a, 0x4314, 0x0, 0x0);
        gbc.writeMem(0x273b, { 0xf2 });
        gbc.writeMem(0xffe3, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x2a92);
        EXPECT(gbc.pc(), 0x273c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffe3), 0xf3);
        // F2 0299
        gbc.setState(0xc569, 0x4ef4, 0x7f0, 0x384a, 0x38be, 0xca96, 0x0, 0x1);
        gbc.writeMem(0xc569, { 0xf2 });
        gbc.writeMem(0xff4a, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x4ef4);
        EXPECT(gbc.pc(), 0xc56a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc569), 0xf2);
        EXPECT(gbc.readMem(0xff4a), 0x7e);
        // F2 029A
        gbc.setState(0xe24e, 0x52c8, 0xad40, 0x70b9, 0xecd1, 0x8f34, 0x1, 0x0);
        gbc.writeMem(0xe24e, { 0xf2 });
        gbc.writeMem(0xffb9, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x52c8);
        EXPECT(gbc.pc(), 0xe24f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe24e), 0xf2);
        EXPECT(gbc.readMem(0xffb9), 0xff);
        // F2 029B
        gbc.setState(0x2adc, 0x8a39, 0x5d30, 0xe1dc, 0xc7e2, 0x2df7, 0x0, 0x1);
        gbc.writeMem(0x2adc, { 0xf2 });
        gbc.writeMem(0xffdc, { 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x8a39);
        EXPECT(gbc.pc(), 0x2add);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffdc), 0xcb);
        // F2 029D
        gbc.setState(0xb687, 0x1fda, 0xfe50, 0x182b, 0x47d0, 0x6b58, 0x1, 0x0);
        gbc.writeMem(0xb687, { 0xf2 });
        gbc.writeMem(0xff2b, { 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x1fda);
        EXPECT(gbc.pc(), 0xb688);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb687), 0xf2);
        EXPECT(gbc.readMem(0xff2b), 0xd4);
        // F2 029E
        gbc.setState(0x1e1, 0xe70a, 0xb980, 0x64e7, 0x5855, 0x9e3, 0x0, 0x0);
        gbc.writeMem(0x1e1, { 0xf2 });
        gbc.writeMem(0xffe7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xe70a);
        EXPECT(gbc.pc(), 0x1e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffe7), 0xe9);
        // F2 029F
        gbc.setState(0xecd8, 0x4f53, 0xa2d0, 0x356a, 0x84dc, 0xe2d5, 0x0, 0x1);
        gbc.writeMem(0xecd8, { 0xf2 });
        gbc.writeMem(0xff6a, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x4f53);
        EXPECT(gbc.pc(), 0xecd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecd8), 0xf2);
        EXPECT(gbc.readMem(0xff6a), 0x79);
        // F2 02A0
        gbc.setState(0xba2a, 0x3635, 0x6410, 0xc04e, 0x5dbf, 0x5e8d, 0x1, 0x0);
        gbc.writeMem(0xba2a, { 0xf2 });
        gbc.writeMem(0xff4e, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x3635);
        EXPECT(gbc.pc(), 0xba2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba2a), 0xf2);
        EXPECT(gbc.readMem(0xff4e), 0xf);
        // F2 02A1
        gbc.setState(0xc902, 0x2222, 0x8300, 0xac9c, 0x922, 0xe630, 0x0, 0x0);
        gbc.writeMem(0xc902, { 0xf2 });
        gbc.writeMem(0xff9c, { 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x2222);
        EXPECT(gbc.pc(), 0xc903);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc902), 0xf2);
        EXPECT(gbc.readMem(0xff9c), 0xb6);
        // F2 02A2
        gbc.setState(0x72d4, 0xc1ee, 0x9c80, 0xab3d, 0x94f2, 0xbf1d, 0x0, 0x1);
        gbc.writeMem(0x72d4, { 0xf2 });
        gbc.writeMem(0xff3d, { 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xc1ee);
        EXPECT(gbc.pc(), 0x72d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff3d), 0xcb);
        // F2 02A3
        gbc.setState(0x61db, 0x2b57, 0x48f0, 0xd457, 0x1502, 0x2605, 0x0, 0x0);
        gbc.writeMem(0x61db, { 0xf2 });
        gbc.writeMem(0xff57, { 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x2b57);
        EXPECT(gbc.pc(), 0x61dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff57), 0xf1);
        // F2 02A4
        gbc.setState(0x38b5, 0x79e0, 0xbae0, 0x9698, 0x9491, 0x9c01, 0x1, 0x1);
        gbc.writeMem(0x38b5, { 0xf2 });
        gbc.writeMem(0xff98, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x79e0);
        EXPECT(gbc.pc(), 0x38b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff98), 0x95);
        // F2 02A5
        gbc.setState(0x6458, 0x3ad6, 0xc310, 0xf205, 0x47d2, 0xcd00, 0x0, 0x1);
        gbc.writeMem(0x6458, { 0xf2 });
        gbc.writeMem(0xff05, { 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x3ad6);
        EXPECT(gbc.pc(), 0x6459);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff05), 0x83);
        // F2 02A6
        gbc.setState(0xeb4a, 0x7162, 0x60f0, 0xcfbe, 0xbfd4, 0x44b7, 0x1, 0x0);
        gbc.writeMem(0xeb4a, { 0xf2 });
        gbc.writeMem(0xffbe, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x7162);
        EXPECT(gbc.pc(), 0xeb4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb4a), 0xf2);
        EXPECT(gbc.readMem(0xffbe), 0xdb);
        // F2 02A7
        gbc.setState(0xc7f3, 0xd174, 0xb40, 0xba3c, 0x8593, 0x13a8, 0x0, 0x1);
        gbc.writeMem(0xc7f3, { 0xf2 });
        gbc.writeMem(0xff3c, { 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xd174);
        EXPECT(gbc.pc(), 0xc7f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7f3), 0xf2);
        EXPECT(gbc.readMem(0xff3c), 0xfd);
        // F2 02A8
        gbc.setState(0xc131, 0x7cf4, 0xe860, 0xd5c1, 0xf700, 0xc1e, 0x1, 0x0);
        gbc.writeMem(0xc131, { 0xf2 });
        gbc.writeMem(0xffc1, { 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x7cf4);
        EXPECT(gbc.pc(), 0xc132);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc131), 0xf2);
        EXPECT(gbc.readMem(0xffc1), 0xa1);
        // F2 02A9
        gbc.setState(0xc6df, 0x7003, 0xdc10, 0x5a18, 0xb191, 0x4db3, 0x0, 0x0);
        gbc.writeMem(0xc6df, { 0xf2 });
        gbc.writeMem(0xff18, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x7003);
        EXPECT(gbc.pc(), 0xc6e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6df), 0xf2);
        EXPECT(gbc.readMem(0xff18), 0x2);
        // F2 02AA
        gbc.setState(0xe46f, 0x8aa6, 0x9cd0, 0x48a3, 0x91b9, 0x4cb2, 0x1, 0x0);
        gbc.writeMem(0xe46f, { 0xf2 });
        gbc.writeMem(0xffa3, { 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x8aa6);
        EXPECT(gbc.pc(), 0xe470);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe46f), 0xf2);
        EXPECT(gbc.readMem(0xffa3), 0x7);
        // F2 02AB
        gbc.setState(0x5138, 0xa169, 0xd480, 0xb85c, 0x691d, 0x576c, 0x1, 0x0);
        gbc.writeMem(0x5138, { 0xf2 });
        gbc.writeMem(0xff5c, { 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xa169);
        EXPECT(gbc.pc(), 0x5139);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff5c), 0xc3);
        // F2 02AC
        gbc.setState(0x3fe1, 0x1ff4, 0x8b70, 0xc7d6, 0xed32, 0x25c8, 0x1, 0x0);
        gbc.writeMem(0x3fe1, { 0xf2 });
        gbc.writeMem(0xffd6, { 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x1ff4);
        EXPECT(gbc.pc(), 0x3fe2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffd6), 0xdc);
        // F2 02AD
        gbc.setState(0xd0cc, 0xd426, 0xaef0, 0xa464, 0xa2bd, 0x6d4d, 0x1, 0x1);
        gbc.writeMem(0xd0cc, { 0xf2 });
        gbc.writeMem(0xff64, { 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xd426);
        EXPECT(gbc.pc(), 0xd0cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0cc), 0xf2);
        EXPECT(gbc.readMem(0xff64), 0x87);
        // F2 02AE
        gbc.setState(0xad0d, 0x19d, 0x7790, 0x27cd, 0x609f, 0x6cde, 0x0, 0x0);
        gbc.writeMem(0xad0d, { 0xf2 });
        gbc.writeMem(0xffcd, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x19d);
        EXPECT(gbc.pc(), 0xad0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad0d), 0xf2);
        EXPECT(gbc.readMem(0xffcd), 0x10);
        // F2 02AF
        gbc.setState(0xa3f5, 0xe998, 0xcca0, 0xa857, 0x44be, 0xc557, 0x0, 0x1);
        gbc.writeMem(0xa3f5, { 0xf2 });
        gbc.writeMem(0xff57, { 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xe998);
        EXPECT(gbc.pc(), 0xa3f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3f5), 0xf2);
        EXPECT(gbc.readMem(0xff57), 0xf1);
        // F2 02B0
        gbc.setState(0xc71e, 0x3b40, 0x8c40, 0x1e5d, 0x5155, 0xb4fc, 0x0, 0x0);
        gbc.writeMem(0xc71e, { 0xf2 });
        gbc.writeMem(0xff5d, { 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x3b40);
        EXPECT(gbc.pc(), 0xc71f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc71e), 0xf2);
        EXPECT(gbc.readMem(0xff5d), 0x1a);
        // F2 02B1
        gbc.setState(0x5230, 0x7d6e, 0x7070, 0xa5fd, 0xc, 0xa890, 0x0, 0x1);
        gbc.writeMem(0x5230, { 0xf2 });
        gbc.writeMem(0xfffd, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x7d6e);
        EXPECT(gbc.pc(), 0x5231);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfffd), 0xb7);
        // F2 02B2
        gbc.setState(0x703e, 0xfb88, 0x93e0, 0x2bc8, 0x44ff, 0xc305, 0x0, 0x0);
        gbc.writeMem(0x703e, { 0xf2 });
        gbc.writeMem(0xffc8, { 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xfb88);
        EXPECT(gbc.pc(), 0x703f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffc8), 0x7a);
        // F2 02B3
        gbc.setState(0x2e66, 0x9986, 0x81d0, 0x903f, 0xe4a4, 0x66dc, 0x1, 0x1);
        gbc.writeMem(0x2e66, { 0xf2 });
        gbc.writeMem(0xff3f, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x9986);
        EXPECT(gbc.pc(), 0x2e67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff3f), 0xa4);
        // F2 02B4
        gbc.setState(0xc79f, 0xd70, 0x8640, 0x8faa, 0x87b1, 0x54fd, 0x1, 0x1);
        gbc.writeMem(0xc79f, { 0xf2 });
        gbc.writeMem(0xffaa, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xd70);
        EXPECT(gbc.pc(), 0xc7a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc79f), 0xf2);
        EXPECT(gbc.readMem(0xffaa), 0x24);
        // F2 02B5
        gbc.setState(0xd170, 0xe75b, 0xf840, 0xa055, 0xcbf9, 0x6bb, 0x1, 0x0);
        gbc.writeMem(0xd170, { 0xf2 });
        gbc.writeMem(0xff55, { 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xe75b);
        EXPECT(gbc.pc(), 0xd171);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd170), 0xf2);
        EXPECT(gbc.readMem(0xff55), 0x21);
        // F2 02B6
        gbc.setState(0x2f18, 0x2050, 0xdf50, 0x9b25, 0x42bf, 0xc212, 0x1, 0x0);
        gbc.writeMem(0x2f18, { 0xf2 });
        gbc.writeMem(0xff25, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x2050);
        EXPECT(gbc.pc(), 0x2f19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff25), 0xa9);
        // F2 02B7
        gbc.setState(0xe2bf, 0x3ed1, 0x9a10, 0x4046, 0x22e6, 0xc099, 0x0, 0x0);
        gbc.writeMem(0xe2bf, { 0xf2 });
        gbc.writeMem(0xff46, { 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x3ed1);
        EXPECT(gbc.pc(), 0xe2c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2bf), 0xf2);
        EXPECT(gbc.readMem(0xff46), 0xbc);
        // F2 02B8
        gbc.setState(0x7569, 0x85db, 0xe00, 0x7d70, 0xe540, 0xc71, 0x1, 0x0);
        gbc.writeMem(0x7569, { 0xf2 });
        gbc.writeMem(0xff70, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x85db);
        EXPECT(gbc.pc(), 0x756a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff70), 0xff);
        // F2 02B9
        gbc.setState(0x1657, 0xe73b, 0x9880, 0x6965, 0x5130, 0x2a77, 0x0, 0x0);
        gbc.writeMem(0x1657, { 0xf2 });
        gbc.writeMem(0xff65, { 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xe73b);
        EXPECT(gbc.pc(), 0x1658);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff65), 0xae);
        // F2 02BA
        gbc.setState(0x8d0a, 0xc54c, 0x9280, 0x87f4, 0x6989, 0x3a73, 0x0, 0x1);
        gbc.writeMem(0x8d0a, { 0xf2 });
        gbc.writeMem(0xfff4, { 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xc54c);
        EXPECT(gbc.pc(), 0x8d0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d0a), 0xf2);
        EXPECT(gbc.readMem(0xfff4), 0xcf);
        // F2 02BB
        gbc.setState(0xb573, 0xd954, 0xc4d0, 0xb81f, 0xf03b, 0xea02, 0x0, 0x1);
        gbc.writeMem(0xb573, { 0xf2 });
        gbc.writeMem(0xff1f, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xd954);
        EXPECT(gbc.pc(), 0xb574);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb573), 0xf2);
        EXPECT(gbc.readMem(0xff1f), 0x8b);
        // F2 02BC
        gbc.setState(0x24c5, 0x19d0, 0x4150, 0xc0be, 0x929, 0xc1d, 0x0, 0x0);
        gbc.writeMem(0x24c5, { 0xf2 });
        gbc.writeMem(0xffbe, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x19d0);
        EXPECT(gbc.pc(), 0x24c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffbe), 0xdb);
        // F2 02BD
        gbc.setState(0xd9c1, 0x72e3, 0xe420, 0xe2be, 0x2d3e, 0x16d3, 0x0, 0x0);
        gbc.writeMem(0xd9c1, { 0xf2 });
        gbc.writeMem(0xffbe, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x72e3);
        EXPECT(gbc.pc(), 0xd9c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9c1), 0xf2);
        EXPECT(gbc.readMem(0xffbe), 0xdb);
        // F2 02BE
        gbc.setState(0x9e6e, 0x9b0c, 0xfab0, 0xed0c, 0xa050, 0x6ec6, 0x1, 0x0);
        gbc.writeMem(0x9e6e, { 0xf2 });
        gbc.writeMem(0xff0c, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x9b0c);
        EXPECT(gbc.pc(), 0x9e6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e6e), 0xf2);
        EXPECT(gbc.readMem(0xff0c), 0x94);
        // F2 02BF
        gbc.setState(0x7ccb, 0x9f68, 0xf4d0, 0x2cce, 0xd59d, 0xb142, 0x0, 0x0);
        gbc.writeMem(0x7ccb, { 0xf2 });
        gbc.writeMem(0xffce, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x9f68);
        EXPECT(gbc.pc(), 0x7ccc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffce), 0x8d);
        // F2 02C0
        gbc.setState(0xd781, 0x8404, 0x8450, 0xb289, 0x7522, 0x4b56, 0x1, 0x1);
        gbc.writeMem(0xd781, { 0xf2 });
        gbc.writeMem(0xff89, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x8404);
        EXPECT(gbc.pc(), 0xd782);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd781), 0xf2);
        EXPECT(gbc.readMem(0xff89), 0xd);
        // F2 02C1
        gbc.setState(0x230, 0x7d3d, 0x720, 0x2c89, 0xb700, 0xdf8c, 0x0, 0x0);
        gbc.writeMem(0x230, { 0xf2 });
        gbc.writeMem(0xff89, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x7d3d);
        EXPECT(gbc.pc(), 0x231);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff89), 0xd);
        // F2 02C2
        gbc.setState(0x986, 0xf83, 0xe8b0, 0xd874, 0xc947, 0x7b22, 0x0, 0x0);
        gbc.writeMem(0x986, { 0xf2 });
        gbc.writeMem(0xff74, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xf83);
        EXPECT(gbc.pc(), 0x987);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff74), 0x76);
        // F2 02C3
        gbc.setState(0x7097, 0xd0b4, 0xb2d0, 0x2845, 0xe76e, 0x347d, 0x1, 0x0);
        gbc.writeMem(0x7097, { 0xf2 });
        gbc.writeMem(0xff45, { 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xd0b4);
        EXPECT(gbc.pc(), 0x7098);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff45), 0xd4);
        // F2 02C4
        gbc.setState(0x3e0b, 0x35f5, 0x7930, 0x86c3, 0xfe30, 0xe8d0, 0x0, 0x1);
        gbc.writeMem(0x3e0b, { 0xf2 });
        gbc.writeMem(0xffc3, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x35f5);
        EXPECT(gbc.pc(), 0x3e0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffc3), 0x19);
        // F2 02C5
        gbc.setState(0x29a4, 0x6ff9, 0x7df0, 0xc4c3, 0x2a19, 0x5b28, 0x1, 0x1);
        gbc.writeMem(0x29a4, { 0xf2 });
        gbc.writeMem(0xffc3, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x6ff9);
        EXPECT(gbc.pc(), 0x29a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffc3), 0x19);
        // F2 02C6
        gbc.setState(0x196e, 0x98bd, 0x8650, 0xbbfa, 0xe1e6, 0xc6a3, 0x1, 0x0);
        gbc.writeMem(0x196e, { 0xf2 });
        gbc.writeMem(0xfffa, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x98bd);
        EXPECT(gbc.pc(), 0x196f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfffa), 0xd5);
        // F2 02C7
        gbc.setState(0xbde0, 0xfbeb, 0x4810, 0x7061, 0x886a, 0xb5e1, 0x1, 0x1);
        gbc.writeMem(0xbde0, { 0xf2 });
        gbc.writeMem(0xff61, { 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xfbeb);
        EXPECT(gbc.pc(), 0xbde1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbde0), 0xf2);
        EXPECT(gbc.readMem(0xff61), 0x20);
        // F2 02C8
        gbc.setState(0xedb0, 0xa4d3, 0x7a10, 0x305c, 0xdee7, 0x752c, 0x0, 0x1);
        gbc.writeMem(0xedb0, { 0xf2 });
        gbc.writeMem(0xff5c, { 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xa4d3);
        EXPECT(gbc.pc(), 0xedb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedb0), 0xf2);
        EXPECT(gbc.readMem(0xff5c), 0xc3);
        // F2 02C9
        gbc.setState(0xab42, 0xd1c, 0x1f60, 0x4d59, 0x746a, 0x2871, 0x1, 0x0);
        gbc.writeMem(0xab42, { 0xf2 });
        gbc.writeMem(0xff59, { 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xd1c);
        EXPECT(gbc.pc(), 0xab43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab42), 0xf2);
        EXPECT(gbc.readMem(0xff59), 0xda);
        // F2 02CA
        gbc.setState(0x6553, 0x383, 0xc260, 0x1165, 0x632c, 0x1e25, 0x0, 0x0);
        gbc.writeMem(0x6553, { 0xf2 });
        gbc.writeMem(0xff65, { 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x383);
        EXPECT(gbc.pc(), 0x6554);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff65), 0xae);
        // F2 02CC
        gbc.setState(0x8951, 0x73ba, 0xf160, 0x9bb3, 0x65fa, 0x5fbe, 0x0, 0x1);
        gbc.writeMem(0x8951, { 0xf2 });
        gbc.writeMem(0xffb3, { 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x73ba);
        EXPECT(gbc.pc(), 0x8952);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8951), 0xf2);
        EXPECT(gbc.readMem(0xffb3), 0x6);
        // F2 02CD
        gbc.setState(0x39ba, 0x97dd, 0xe510, 0xc0a7, 0x2ec7, 0x2752, 0x0, 0x0);
        gbc.writeMem(0x39ba, { 0xf2 });
        gbc.writeMem(0xffa7, { 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x97dd);
        EXPECT(gbc.pc(), 0x39bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffa7), 0xb5);
        // F2 02CF
        gbc.setState(0x9ca9, 0x79d0, 0x8ea0, 0xc522, 0x51b0, 0xd055, 0x0, 0x1);
        gbc.writeMem(0x9ca9, { 0xf2 });
        gbc.writeMem(0xff22, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x79d0);
        EXPECT(gbc.pc(), 0x9caa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ca9), 0xf2);
        EXPECT(gbc.readMem(0xff22), 0x77);
        // F2 02D0
        gbc.setState(0xe5c8, 0x88e1, 0x18b0, 0x112f, 0x8dc2, 0xf07f, 0x1, 0x0);
        gbc.writeMem(0xe5c8, { 0xf2 });
        gbc.writeMem(0xff2f, { 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x88e1);
        EXPECT(gbc.pc(), 0xe5c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5c8), 0xf2);
        EXPECT(gbc.readMem(0xff2f), 0x91);
        // F2 02D1
        gbc.setState(0x69ee, 0x12ba, 0x9f20, 0x19cb, 0x1cc5, 0x4297, 0x1, 0x1);
        gbc.writeMem(0x69ee, { 0xf2 });
        gbc.writeMem(0xffcb, { 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x12ba);
        EXPECT(gbc.pc(), 0x69ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffcb), 0x64);
        // F2 02D2
        gbc.setState(0xd1b8, 0xa775, 0xf990, 0x1b00, 0x71de, 0x6e0a, 0x1, 0x1);
        gbc.writeMem(0xd1b8, { 0xf2 });
        gbc.writeMem(0xff00, { 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xa775);
        EXPECT(gbc.pc(), 0xd1b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1b8), 0xf2);
        EXPECT(gbc.readMem(0xff00), 0x3a);
        // F2 02D3
        gbc.setState(0x7922, 0x2870, 0xe160, 0x738c, 0xb548, 0xf282, 0x0, 0x1);
        gbc.writeMem(0x7922, { 0xf2 });
        gbc.writeMem(0xff8c, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x2870);
        EXPECT(gbc.pc(), 0x7923);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff8c), 0x44);
        // F2 02D4
        gbc.setState(0x3ebf, 0x64f3, 0x1d80, 0x57dd, 0x9a09, 0xef99, 0x1, 0x0);
        gbc.writeMem(0x3ebf, { 0xf2 });
        gbc.writeMem(0xffdd, { 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x64f3);
        EXPECT(gbc.pc(), 0x3ec0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffdd), 0xc4);
        // F2 02D5
        gbc.setState(0x80e6, 0x6012, 0xee00, 0x5bc5, 0xa0fb, 0xd928, 0x1, 0x0);
        gbc.writeMem(0x80e6, { 0xf2 });
        gbc.writeMem(0xffc5, { 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x6012);
        EXPECT(gbc.pc(), 0x80e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80e6), 0xf2);
        EXPECT(gbc.readMem(0xffc5), 0xe1);
        // F2 02D6
        gbc.setState(0x82cd, 0xffe8, 0xa450, 0xf3fc, 0xc5c8, 0x2d79, 0x1, 0x0);
        gbc.writeMem(0x82cd, { 0xf2 });
        gbc.writeMem(0xfffc, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xffe8);
        EXPECT(gbc.pc(), 0x82ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82cd), 0xf2);
        EXPECT(gbc.readMem(0xfffc), 0x8b);
        // F2 02D7
        gbc.setState(0x61e7, 0x148e, 0xdd0, 0xfd75, 0x8473, 0x7755, 0x1, 0x0);
        gbc.writeMem(0x61e7, { 0xf2 });
        gbc.writeMem(0xff75, { 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x148e);
        EXPECT(gbc.pc(), 0x61e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff75), 0x1);
        // F2 02D8
        gbc.setState(0x3c4f, 0x45d1, 0xa940, 0x4e6a, 0x2917, 0xa335, 0x0, 0x1);
        gbc.writeMem(0x3c4f, { 0xf2 });
        gbc.writeMem(0xff6a, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x45d1);
        EXPECT(gbc.pc(), 0x3c50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff6a), 0x79);
        // F2 02D9
        gbc.setState(0x9827, 0x9d42, 0x5cb0, 0x824e, 0xeac3, 0x7fb0, 0x0, 0x1);
        gbc.writeMem(0x9827, { 0xf2 });
        gbc.writeMem(0xff4e, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x9d42);
        EXPECT(gbc.pc(), 0x9828);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9827), 0xf2);
        EXPECT(gbc.readMem(0xff4e), 0xf);
        // F2 02DA
        gbc.setState(0xcedf, 0xbac0, 0x19c0, 0xe8a, 0x8091, 0x78aa, 0x1, 0x0);
        gbc.writeMem(0xcedf, { 0xf2 });
        gbc.writeMem(0xff8a, { 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xbac0);
        EXPECT(gbc.pc(), 0xcee0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcedf), 0xf2);
        EXPECT(gbc.readMem(0xff8a), 0xed);
        // F2 02DB
        gbc.setState(0xc288, 0x43ee, 0x9930, 0x2700, 0x6413, 0x216a, 0x1, 0x1);
        gbc.writeMem(0xc288, { 0xf2 });
        gbc.writeMem(0xff00, { 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x43ee);
        EXPECT(gbc.pc(), 0xc289);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc288), 0xf2);
        EXPECT(gbc.readMem(0xff00), 0x3a);
        // F2 02DC
        gbc.setState(0x3ecd, 0xf144, 0x8a50, 0x2e5d, 0x908e, 0xcfa9, 0x0, 0x1);
        gbc.writeMem(0x3ecd, { 0xf2 });
        gbc.writeMem(0xff5d, { 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xf144);
        EXPECT(gbc.pc(), 0x3ece);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff5d), 0x1a);
        // F2 02DD
        gbc.setState(0xcb5c, 0x52b5, 0x24e0, 0x3c50, 0xe784, 0x6017, 0x0, 0x0);
        gbc.writeMem(0xcb5c, { 0xf2 });
        gbc.writeMem(0xff50, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x52b5);
        EXPECT(gbc.pc(), 0xcb5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb5c), 0xf2);
        EXPECT(gbc.readMem(0xff50), 0x4a);
        // F2 02DE
        gbc.setState(0x3326, 0x1b4b, 0x8850, 0xca92, 0x935c, 0x930d, 0x0, 0x0);
        gbc.writeMem(0x3326, { 0xf2 });
        gbc.writeMem(0xff92, { 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x1b4b);
        EXPECT(gbc.pc(), 0x3327);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff92), 0x1f);
        // F2 02DF
        gbc.setState(0x3c2a, 0xb119, 0x75a0, 0x840d, 0xf10f, 0x5507, 0x0, 0x1);
        gbc.writeMem(0x3c2a, { 0xf2 });
        gbc.writeMem(0xff0d, { 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xb119);
        EXPECT(gbc.pc(), 0x3c2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff0d), 0xa0);
        // F2 02E0
        gbc.setState(0xd1db, 0x4eb8, 0x3d70, 0xf720, 0x538b, 0x1fff, 0x1, 0x1);
        gbc.writeMem(0xd1db, { 0xf2 });
        gbc.writeMem(0xff20, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x4eb8);
        EXPECT(gbc.pc(), 0xd1dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1db), 0xf2);
        EXPECT(gbc.readMem(0xff20), 0xec);
        // F2 02E1
        gbc.setState(0x3723, 0x7405, 0x5280, 0xa52d, 0xc83b, 0x4df1, 0x0, 0x0);
        gbc.writeMem(0x3723, { 0xf2 });
        gbc.writeMem(0xff2d, { 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x7405);
        EXPECT(gbc.pc(), 0x3724);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff2d), 0xe0);
        // F2 02E2
        gbc.setState(0x1325, 0x8340, 0x7b10, 0x94c1, 0xc84f, 0x792e, 0x1, 0x0);
        gbc.writeMem(0x1325, { 0xf2 });
        gbc.writeMem(0xffc1, { 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x8340);
        EXPECT(gbc.pc(), 0x1326);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffc1), 0xa1);
        // F2 02E3
        gbc.setState(0xe3ef, 0x82cd, 0x8c00, 0xd48b, 0xfa31, 0xef85, 0x1, 0x1);
        gbc.writeMem(0xe3ef, { 0xf2 });
        gbc.writeMem(0xff8b, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x82cd);
        EXPECT(gbc.pc(), 0xe3f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3ef), 0xf2);
        EXPECT(gbc.readMem(0xff8b), 0x23);
        // F2 02E4
        gbc.setState(0xa63e, 0xec6a, 0xc1c0, 0x45e0, 0x4b43, 0xa58, 0x1, 0x1);
        gbc.writeMem(0xa63e, { 0xf2 });
        gbc.writeMem(0xffe0, { 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xec6a);
        EXPECT(gbc.pc(), 0xa63f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa63e), 0xf2);
        EXPECT(gbc.readMem(0xffe0), 0x75);
        // F2 02E5
        gbc.setState(0x66b2, 0xb57f, 0x8dd0, 0x8ee, 0x9d7, 0x8252, 0x0, 0x1);
        gbc.writeMem(0x66b2, { 0xf2 });
        gbc.writeMem(0xffee, { 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xb57f);
        EXPECT(gbc.pc(), 0x66b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffee), 0xca);
        // F2 02E6
        gbc.setState(0x6ccb, 0xce62, 0x96c0, 0x3cb4, 0x2296, 0xeee4, 0x1, 0x0);
        gbc.writeMem(0x6ccb, { 0xf2 });
        gbc.writeMem(0xffb4, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xce62);
        EXPECT(gbc.pc(), 0x6ccc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffb4), 0xec);
        // F2 02E7
        gbc.setState(0x5738, 0xb3a5, 0xaf40, 0x7659, 0x48f6, 0x23a6, 0x0, 0x0);
        gbc.writeMem(0x5738, { 0xf2 });
        gbc.writeMem(0xff59, { 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xb3a5);
        EXPECT(gbc.pc(), 0x5739);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff59), 0xda);
        // F2 02E8
        gbc.setState(0xa276, 0xc408, 0xa7b0, 0x3614, 0x8b19, 0xb2bf, 0x1, 0x0);
        gbc.writeMem(0xa276, { 0xf2 });
        gbc.writeMem(0xff14, { 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xc408);
        EXPECT(gbc.pc(), 0xa277);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa276), 0xf2);
        EXPECT(gbc.readMem(0xff14), 0xae);
        // F2 02E9
        gbc.setState(0x2744, 0xab24, 0x54e0, 0x20, 0x88c0, 0xa06b, 0x0, 0x1);
        gbc.writeMem(0x2744, { 0xf2 });
        gbc.writeMem(0xff20, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xab24);
        EXPECT(gbc.pc(), 0x2745);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff20), 0xec);
        // F2 02EA
        gbc.setState(0x8a99, 0x2cbc, 0xa250, 0x185, 0xf691, 0x2f0f, 0x1, 0x0);
        gbc.writeMem(0x8a99, { 0xf2 });
        gbc.writeMem(0xff85, { 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x2cbc);
        EXPECT(gbc.pc(), 0x8a9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a99), 0xf2);
        EXPECT(gbc.readMem(0xff85), 0x9e);
        // F2 02EB
        gbc.setState(0x24bb, 0x6049, 0xbd70, 0xf624, 0xcce, 0x66e5, 0x1, 0x1);
        gbc.writeMem(0x24bb, { 0xf2 });
        gbc.writeMem(0xff24, { 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x6049);
        EXPECT(gbc.pc(), 0x24bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff24), 0x2c);
        // F2 02EC
        gbc.setState(0x5841, 0xa505, 0xc720, 0xb5a8, 0x3038, 0x7aaa, 0x0, 0x0);
        gbc.writeMem(0x5841, { 0xf2 });
        gbc.writeMem(0xffa8, { 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xa505);
        EXPECT(gbc.pc(), 0x5842);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffa8), 0x85);
        // F2 02ED
        gbc.setState(0x9f6b, 0xb4db, 0x23a0, 0xe94, 0x3ac2, 0xd455, 0x1, 0x0);
        gbc.writeMem(0x9f6b, { 0xf2 });
        gbc.writeMem(0xff94, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xb4db);
        EXPECT(gbc.pc(), 0x9f6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f6b), 0xf2);
        EXPECT(gbc.readMem(0xff94), 0x59);
        // F2 02EE
        gbc.setState(0x6c5f, 0xcb6e, 0x1860, 0x609f, 0xd194, 0x1e54, 0x0, 0x1);
        gbc.writeMem(0x6c5f, { 0xf2 });
        gbc.writeMem(0xff9f, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xcb6e);
        EXPECT(gbc.pc(), 0x6c60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff9f), 0xe7);
        // F2 02EF
        gbc.setState(0x34ce, 0x5eec, 0x8670, 0x7a92, 0x9bf8, 0x970, 0x0, 0x0);
        gbc.writeMem(0x34ce, { 0xf2 });
        gbc.writeMem(0xff92, { 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x5eec);
        EXPECT(gbc.pc(), 0x34cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff92), 0x1f);
        // F2 02F0
        gbc.setState(0xaae9, 0xa71e, 0x130, 0x25b7, 0xe33c, 0x1072, 0x1, 0x1);
        gbc.writeMem(0xaae9, { 0xf2 });
        gbc.writeMem(0xffb7, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xa71e);
        EXPECT(gbc.pc(), 0xaaea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaae9), 0xf2);
        EXPECT(gbc.readMem(0xffb7), 0x66);
        // F2 02F1
        gbc.setState(0x9f6f, 0xd610, 0x22a0, 0xfabc, 0x4b07, 0xb098, 0x0, 0x0);
        gbc.writeMem(0x9f6f, { 0xf2 });
        gbc.writeMem(0xffbc, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xd610);
        EXPECT(gbc.pc(), 0x9f70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f6f), 0xf2);
        EXPECT(gbc.readMem(0xffbc), 0x4d);
        // F2 02F2
        gbc.setState(0x2d16, 0x708c, 0x2910, 0xc815, 0xd36f, 0x2b77, 0x0, 0x1);
        gbc.writeMem(0x2d16, { 0xf2 });
        gbc.writeMem(0xff15, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x708c);
        EXPECT(gbc.pc(), 0x2d17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff15), 0xdb);
        // F2 02F3
        gbc.setState(0x9443, 0xb6a1, 0x9c80, 0x221d, 0xade8, 0xbb64, 0x0, 0x0);
        gbc.writeMem(0x9443, { 0xf2 });
        gbc.writeMem(0xff1d, { 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xb6a1);
        EXPECT(gbc.pc(), 0x9444);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9443), 0xf2);
        EXPECT(gbc.readMem(0xff1d), 0xcd);
        // F2 02F4
        gbc.setState(0x82d4, 0x6637, 0x790, 0xa57f, 0x6ba6, 0x7453, 0x0, 0x1);
        gbc.writeMem(0x82d4, { 0xf2 });
        gbc.writeMem(0xff7f, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x6637);
        EXPECT(gbc.pc(), 0x82d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82d4), 0xf2);
        EXPECT(gbc.readMem(0xff7f), 0x9);
        // F2 02F5
        gbc.setState(0x31c3, 0x40e5, 0x7af0, 0xcb97, 0x59fc, 0xae2e, 0x1, 0x0);
        gbc.writeMem(0x31c3, { 0xf2 });
        gbc.writeMem(0xff97, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x40e5);
        EXPECT(gbc.pc(), 0x31c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff97), 0xfa);
        // F2 02F6
        gbc.setState(0x4e04, 0x9307, 0x31e0, 0x8978, 0x4331, 0x9a3f, 0x1, 0x1);
        gbc.writeMem(0x4e04, { 0xf2 });
        gbc.writeMem(0xff78, { 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x9307);
        EXPECT(gbc.pc(), 0x4e05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff78), 0x9e);
        // F2 02F7
        gbc.setState(0xbeec, 0x519b, 0x5660, 0x22b2, 0x38ae, 0x91df, 0x1, 0x1);
        gbc.writeMem(0xbeec, { 0xf2 });
        gbc.writeMem(0xffb2, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x519b);
        EXPECT(gbc.pc(), 0xbeed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbeec), 0xf2);
        EXPECT(gbc.readMem(0xffb2), 0x11);
        // F2 02F8
        gbc.setState(0x22bc, 0xcbe4, 0x59f0, 0x2353, 0x55e, 0x1e05, 0x0, 0x1);
        gbc.writeMem(0x22bc, { 0xf2 });
        gbc.writeMem(0xff53, { 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xcbe4);
        EXPECT(gbc.pc(), 0x22bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff53), 0xd2);
        // F2 02F9
        gbc.setState(0xb745, 0xbfa7, 0x300, 0x99bc, 0xf874, 0x93ba, 0x0, 0x0);
        gbc.writeMem(0xb745, { 0xf2 });
        gbc.writeMem(0xffbc, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xbfa7);
        EXPECT(gbc.pc(), 0xb746);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb745), 0xf2);
        EXPECT(gbc.readMem(0xffbc), 0x4d);
        // F2 02FA
        gbc.setState(0x7f27, 0x8369, 0xe850, 0xf988, 0xcfc3, 0x29da, 0x1, 0x1);
        gbc.writeMem(0x7f27, { 0xf2 });
        gbc.writeMem(0xff88, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x8369);
        EXPECT(gbc.pc(), 0x7f28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff88), 0x49);
        // F2 02FB
        gbc.setState(0x4bea, 0x8907, 0x2810, 0xff4, 0x619, 0xfd35, 0x1, 0x1);
        gbc.writeMem(0x4bea, { 0xf2 });
        gbc.writeMem(0xfff4, { 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x8907);
        EXPECT(gbc.pc(), 0x4beb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfff4), 0xcf);
        // F2 02FC
        gbc.setState(0x2210, 0xab2, 0x6980, 0x30f7, 0xf49e, 0xda0e, 0x0, 0x0);
        gbc.writeMem(0x2210, { 0xf2 });
        gbc.writeMem(0xfff7, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xab2);
        EXPECT(gbc.pc(), 0x2211);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfff7), 0x2a);
        // F2 02FD
        gbc.setState(0x8a6e, 0xbf38, 0x9390, 0x2, 0x6e25, 0x6189, 0x0, 0x1);
        gbc.writeMem(0x8a6e, { 0xf2 });
        gbc.writeMem(0xff02, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xbf38);
        EXPECT(gbc.pc(), 0x8a6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a6e), 0xf2);
        EXPECT(gbc.readMem(0xff02), 0x37);
        // F2 02FF
        gbc.setState(0x9069, 0x5710, 0x68a0, 0x6103, 0xa94a, 0xfade, 0x1, 0x0);
        gbc.writeMem(0x9069, { 0xf2 });
        gbc.writeMem(0xff03, { 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x5710);
        EXPECT(gbc.pc(), 0x906a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9069), 0xf2);
        EXPECT(gbc.readMem(0xff03), 0x61);
        // F2 0300
        gbc.setState(0xa172, 0x2921, 0x6020, 0x5571, 0x4781, 0x6720, 0x0, 0x0);
        gbc.writeMem(0xa172, { 0xf2 });
        gbc.writeMem(0xff71, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x2921);
        EXPECT(gbc.pc(), 0xa173);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa172), 0xf2);
        EXPECT(gbc.readMem(0xff71), 0x4f);
        // F2 0301
        gbc.setState(0xdefd, 0xde26, 0xdfa0, 0x90e8, 0xee73, 0x3484, 0x1, 0x1);
        gbc.writeMem(0xdefd, { 0xf2 });
        gbc.writeMem(0xffe8, { 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xde26);
        EXPECT(gbc.pc(), 0xdefe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdefd), 0xf2);
        EXPECT(gbc.readMem(0xffe8), 0x25);
        // F2 0302
        gbc.setState(0x996d, 0xcd21, 0xb3b0, 0x8d5a, 0x605d, 0x2f6a, 0x0, 0x1);
        gbc.writeMem(0x996d, { 0xf2 });
        gbc.writeMem(0xff5a, { 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xcd21);
        EXPECT(gbc.pc(), 0x996e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x996d), 0xf2);
        EXPECT(gbc.readMem(0xff5a), 0x6a);
        // F2 0303
        gbc.setState(0x4ee1, 0x8d77, 0x52c0, 0x9c33, 0x7c89, 0x955a, 0x1, 0x0);
        gbc.writeMem(0x4ee1, { 0xf2 });
        gbc.writeMem(0xff33, { 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x8d77);
        EXPECT(gbc.pc(), 0x4ee2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff33), 0x28);
        // F2 0304
        gbc.setState(0x2ffd, 0x3faf, 0xb9c0, 0xf0b6, 0x57a7, 0xb94b, 0x1, 0x1);
        gbc.writeMem(0x2ffd, { 0xf2 });
        gbc.writeMem(0xffb6, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x3faf);
        EXPECT(gbc.pc(), 0x2ffe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffb6), 0x46);
        // F2 0305
        gbc.setState(0x4adb, 0xa3db, 0x73e0, 0x64b9, 0x43b7, 0x9a4f, 0x0, 0x1);
        gbc.writeMem(0x4adb, { 0xf2 });
        gbc.writeMem(0xffb9, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xa3db);
        EXPECT(gbc.pc(), 0x4adc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffb9), 0xff);
        // F2 0306
        gbc.setState(0x1e3a, 0xf567, 0xbe10, 0x5b00, 0xc77, 0xb910, 0x0, 0x1);
        gbc.writeMem(0x1e3a, { 0xf2 });
        gbc.writeMem(0xff00, { 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xf567);
        EXPECT(gbc.pc(), 0x1e3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff00), 0x3a);
        // F2 0307
        gbc.setState(0xb646, 0x1a3, 0xa0d0, 0x3064, 0xfb20, 0xeca1, 0x0, 0x1);
        gbc.writeMem(0xb646, { 0xf2 });
        gbc.writeMem(0xff64, { 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x1a3);
        EXPECT(gbc.pc(), 0xb647);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb646), 0xf2);
        EXPECT(gbc.readMem(0xff64), 0x87);
        // F2 0308
        gbc.setState(0x3360, 0xb4f7, 0x1a20, 0xfbbb, 0x9f96, 0x479e, 0x1, 0x1);
        gbc.writeMem(0x3360, { 0xf2 });
        gbc.writeMem(0xffbb, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xb4f7);
        EXPECT(gbc.pc(), 0x3361);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffbb), 0x22);
        // F2 0309
        gbc.setState(0x5192, 0x7b87, 0x8e10, 0xd0c0, 0x28e0, 0xa08e, 0x0, 0x1);
        gbc.writeMem(0x5192, { 0xf2 });
        gbc.writeMem(0xffc0, { 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x7b87);
        EXPECT(gbc.pc(), 0x5193);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffc0), 0xdd);
        // F2 030A
        gbc.setState(0xa005, 0x7efe, 0xe500, 0x55d8, 0xe3a8, 0xa2c9, 0x0, 0x0);
        gbc.writeMem(0xa005, { 0xf2 });
        gbc.writeMem(0xffd8, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x7efe);
        EXPECT(gbc.pc(), 0xa006);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa005), 0xf2);
        EXPECT(gbc.readMem(0xffd8), 0x3);
        // F2 030B
        gbc.setState(0x7913, 0xc02c, 0x8a40, 0xbb9d, 0x7379, 0x22a2, 0x0, 0x1);
        gbc.writeMem(0x7913, { 0xf2 });
        gbc.writeMem(0xff9d, { 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xc02c);
        EXPECT(gbc.pc(), 0x7914);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff9d), 0xc);
        // F2 030C
        gbc.setState(0x42d5, 0xadd, 0x11b0, 0x2ca, 0x3bf3, 0xa5b0, 0x0, 0x0);
        gbc.writeMem(0x42d5, { 0xf2 });
        gbc.writeMem(0xffca, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xadd);
        EXPECT(gbc.pc(), 0x42d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffca), 0x9);
        // F2 030D
        gbc.setState(0x4887, 0xd22e, 0xc210, 0x3ec7, 0x439e, 0xa050, 0x1, 0x1);
        gbc.writeMem(0x4887, { 0xf2 });
        gbc.writeMem(0xffc7, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xd22e);
        EXPECT(gbc.pc(), 0x4888);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffc7), 0xf5);
        // F2 030E
        gbc.setState(0x41f9, 0x2d20, 0xb050, 0x3013, 0x4b96, 0xed44, 0x1, 0x1);
        gbc.writeMem(0x41f9, { 0xf2 });
        gbc.writeMem(0xff13, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x2d20);
        EXPECT(gbc.pc(), 0x41fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff13), 0xc0);
        // F2 030F
        gbc.setState(0xe29f, 0x5637, 0xd800, 0xa066, 0xf053, 0x27b0, 0x1, 0x0);
        gbc.writeMem(0xe29f, { 0xf2 });
        gbc.writeMem(0xff66, { 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x5637);
        EXPECT(gbc.pc(), 0xe2a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe29f), 0xf2);
        EXPECT(gbc.readMem(0xff66), 0x2c);
        // F2 0310
        gbc.setState(0x52a4, 0x54a9, 0x5300, 0xd44, 0xe6ab, 0xb70b, 0x1, 0x0);
        gbc.writeMem(0x52a4, { 0xf2 });
        gbc.writeMem(0xff44, { 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x54a9);
        EXPECT(gbc.pc(), 0x52a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff44), 0x93);
        // F2 0311
        gbc.setState(0x46dd, 0x4144, 0x6f0, 0x12d1, 0x4f43, 0x3f49, 0x1, 0x0);
        gbc.writeMem(0x46dd, { 0xf2 });
        gbc.writeMem(0xffd1, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x4144);
        EXPECT(gbc.pc(), 0x46de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffd1), 0x4d);
        // F2 0312
        gbc.setState(0x37b8, 0xd17b, 0x7500, 0x6c5d, 0x47b9, 0x89bb, 0x0, 0x0);
        gbc.writeMem(0x37b8, { 0xf2 });
        gbc.writeMem(0xff5d, { 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xd17b);
        EXPECT(gbc.pc(), 0x37b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff5d), 0x1a);
        // F2 0313
        gbc.setState(0x967d, 0x4fb3, 0x8600, 0xd4a, 0x5798, 0x998f, 0x0, 0x0);
        gbc.writeMem(0x967d, { 0xf2 });
        gbc.writeMem(0xff4a, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x4fb3);
        EXPECT(gbc.pc(), 0x967e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x967d), 0xf2);
        EXPECT(gbc.readMem(0xff4a), 0x7e);
        // F2 0314
        gbc.setState(0x5bd8, 0x1ec5, 0x9410, 0x78fd, 0x73e1, 0x58f4, 0x0, 0x1);
        gbc.writeMem(0x5bd8, { 0xf2 });
        gbc.writeMem(0xfffd, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x1ec5);
        EXPECT(gbc.pc(), 0x5bd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfffd), 0xb7);
        // F2 0315
        gbc.setState(0x301b, 0xc939, 0x8800, 0xc4dc, 0x6857, 0xc649, 0x1, 0x1);
        gbc.writeMem(0x301b, { 0xf2 });
        gbc.writeMem(0xffdc, { 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xc939);
        EXPECT(gbc.pc(), 0x301c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffdc), 0xcb);
        // F2 0316
        gbc.setState(0xe237, 0x81d2, 0x4850, 0x7f5e, 0x9183, 0x9dcc, 0x1, 0x0);
        gbc.writeMem(0xe237, { 0xf2 });
        gbc.writeMem(0xff5e, { 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x81d2);
        EXPECT(gbc.pc(), 0xe238);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe237), 0xf2);
        EXPECT(gbc.readMem(0xff5e), 0x62);
        // F2 0317
        gbc.setState(0x8446, 0xf443, 0x4c70, 0xcfdf, 0xfb8d, 0x5d52, 0x0, 0x1);
        gbc.writeMem(0x8446, { 0xf2 });
        gbc.writeMem(0xffdf, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xf443);
        EXPECT(gbc.pc(), 0x8447);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8446), 0xf2);
        EXPECT(gbc.readMem(0xffdf), 0xd);
        // F2 0318
        gbc.setState(0xc6f6, 0x2e3f, 0x67c0, 0x8ede, 0x126, 0xfb31, 0x0, 0x1);
        gbc.writeMem(0xc6f6, { 0xf2 });
        gbc.writeMem(0xffde, { 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x2e3f);
        EXPECT(gbc.pc(), 0xc6f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6f6), 0xf2);
        EXPECT(gbc.readMem(0xffde), 0x87);
        // F2 0319
        gbc.setState(0x5a10, 0x75a4, 0x4580, 0x2bc3, 0xdc44, 0x6fb0, 0x1, 0x1);
        gbc.writeMem(0x5a10, { 0xf2 });
        gbc.writeMem(0xffc3, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x75a4);
        EXPECT(gbc.pc(), 0x5a11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffc3), 0x19);
        // F2 031A
        gbc.setState(0xb0f6, 0x858c, 0x5960, 0x6ea, 0x5bab, 0x7677, 0x1, 0x1);
        gbc.writeMem(0xb0f6, { 0xf2 });
        gbc.writeMem(0xffea, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x858c);
        EXPECT(gbc.pc(), 0xb0f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0f6), 0xf2);
        EXPECT(gbc.readMem(0xffea), 0x9f);
        // F2 031C
        gbc.setState(0x4d74, 0xdbea, 0x6c80, 0x3aae, 0x9f11, 0x4d19, 0x0, 0x1);
        gbc.writeMem(0x4d74, { 0xf2 });
        gbc.writeMem(0xffae, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xdbea);
        EXPECT(gbc.pc(), 0x4d75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffae), 0x79);
        // F2 031D
        gbc.setState(0x7775, 0x84c3, 0x8e50, 0xb6db, 0x190b, 0xd96, 0x1, 0x1);
        gbc.writeMem(0x7775, { 0xf2 });
        gbc.writeMem(0xffdb, { 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x84c3);
        EXPECT(gbc.pc(), 0x7776);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffdb), 0x1e);
        // F2 031E
        gbc.setState(0xb99a, 0x6552, 0xbde0, 0xdcd4, 0x105e, 0xf81e, 0x0, 0x1);
        gbc.writeMem(0xb99a, { 0xf2 });
        gbc.writeMem(0xffd4, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x6552);
        EXPECT(gbc.pc(), 0xb99b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb99a), 0xf2);
        EXPECT(gbc.readMem(0xffd4), 0x9f);
        // F2 031F
        gbc.setState(0x1bef, 0x7053, 0xe730, 0xd0c1, 0xf285, 0x8740, 0x1, 0x0);
        gbc.writeMem(0x1bef, { 0xf2 });
        gbc.writeMem(0xffc1, { 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x7053);
        EXPECT(gbc.pc(), 0x1bf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffc1), 0xa1);
        // F2 0320
        gbc.setState(0x4b74, 0x9f11, 0x5020, 0x8d95, 0x7454, 0x6b7d, 0x0, 0x1);
        gbc.writeMem(0x4b74, { 0xf2 });
        gbc.writeMem(0xff95, { 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x9f11);
        EXPECT(gbc.pc(), 0x4b75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff95), 0x33);
        // F2 0321
        gbc.setState(0x25e0, 0x34e2, 0x210, 0x332c, 0xe514, 0xd295, 0x1, 0x0);
        gbc.writeMem(0x25e0, { 0xf2 });
        gbc.writeMem(0xff2c, { 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x34e2);
        EXPECT(gbc.pc(), 0x25e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff2c), 0xe8);
        // F2 0322
        gbc.setState(0xdcd2, 0x9a00, 0xef20, 0x7ab8, 0x66cf, 0x16b9, 0x1, 0x1);
        gbc.writeMem(0xdcd2, { 0xf2 });
        gbc.writeMem(0xffb8, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x9a00);
        EXPECT(gbc.pc(), 0xdcd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcd2), 0xf2);
        EXPECT(gbc.readMem(0xffb8), 0x10);
        // F2 0323
        gbc.setState(0x1e79, 0x6514, 0x51a0, 0xd88, 0xfc9a, 0x774a, 0x1, 0x0);
        gbc.writeMem(0x1e79, { 0xf2 });
        gbc.writeMem(0xff88, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x6514);
        EXPECT(gbc.pc(), 0x1e7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff88), 0x49);
        // F2 0324
        gbc.setState(0x463, 0xb9ca, 0x86b0, 0xd7ed, 0x536c, 0x61e, 0x0, 0x0);
        gbc.writeMem(0x463, { 0xf2 });
        gbc.writeMem(0xffed, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xb9ca);
        EXPECT(gbc.pc(), 0x464);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffed), 0xa9);
        // F2 0325
        gbc.setState(0xc7e, 0xc316, 0xafc0, 0xb73a, 0xc5da, 0xfbe1, 0x1, 0x1);
        gbc.writeMem(0xc7e, { 0xf2 });
        gbc.writeMem(0xff3a, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xc316);
        EXPECT(gbc.pc(), 0xc7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff3a), 0xf0);
        // F2 0326
        gbc.setState(0xad8d, 0x67e5, 0xe840, 0x20c2, 0xb4ec, 0x4959, 0x1, 0x1);
        gbc.writeMem(0xad8d, { 0xf2 });
        gbc.writeMem(0xffc2, { 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x67e5);
        EXPECT(gbc.pc(), 0xad8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad8d), 0xf2);
        EXPECT(gbc.readMem(0xffc2), 0x1d);
        // F2 0327
        gbc.setState(0x6487, 0xd8ff, 0x6110, 0xb7e1, 0x7e8a, 0x6fc8, 0x1, 0x1);
        gbc.writeMem(0x6487, { 0xf2 });
        gbc.writeMem(0xffe1, { 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xd8ff);
        EXPECT(gbc.pc(), 0x6488);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffe1), 0x88);
        // F2 0328
        gbc.setState(0x417f, 0x708e, 0x8670, 0xbc59, 0xf163, 0x38a, 0x1, 0x1);
        gbc.writeMem(0x417f, { 0xf2 });
        gbc.writeMem(0xff59, { 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x708e);
        EXPECT(gbc.pc(), 0x4180);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff59), 0xda);
        // F2 0329
        gbc.setState(0xee14, 0x754d, 0x54c0, 0xf8d5, 0x5204, 0xfde9, 0x1, 0x1);
        gbc.writeMem(0xee14, { 0xf2 });
        gbc.writeMem(0xffd5, { 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x754d);
        EXPECT(gbc.pc(), 0xee15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee14), 0xf2);
        EXPECT(gbc.readMem(0xffd5), 0xc);
        // F2 032A
        gbc.setState(0x9c62, 0xfd41, 0xe210, 0x3fc, 0x305c, 0x5603, 0x1, 0x0);
        gbc.writeMem(0x9c62, { 0xf2 });
        gbc.writeMem(0xfffc, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xfd41);
        EXPECT(gbc.pc(), 0x9c63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c62), 0xf2);
        EXPECT(gbc.readMem(0xfffc), 0x8b);
        // F2 032B
        gbc.setState(0xd65c, 0xeaf2, 0x1250, 0xf441, 0x87c7, 0x14d3, 0x0, 0x1);
        gbc.writeMem(0xd65c, { 0xf2 });
        gbc.writeMem(0xff41, { 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xeaf2);
        EXPECT(gbc.pc(), 0xd65d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd65c), 0xf2);
        EXPECT(gbc.readMem(0xff41), 0x4);
        // F2 032C
        gbc.setState(0x9f1f, 0x55f2, 0xf650, 0xb55f, 0x9b45, 0xbe8b, 0x1, 0x0);
        gbc.writeMem(0x9f1f, { 0xf2 });
        gbc.writeMem(0xff5f, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x55f2);
        EXPECT(gbc.pc(), 0x9f20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f1f), 0xf2);
        EXPECT(gbc.readMem(0xff5f), 0x11);
        // F2 032D
        gbc.setState(0x6281, 0x2168, 0xfd60, 0x5b15, 0xcbfe, 0x18b4, 0x1, 0x1);
        gbc.writeMem(0x6281, { 0xf2 });
        gbc.writeMem(0xff15, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x2168);
        EXPECT(gbc.pc(), 0x6282);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff15), 0xdb);
        // F2 032E
        gbc.setState(0x3666, 0xdd6a, 0xa740, 0x1ec7, 0x318a, 0xe78f, 0x1, 0x1);
        gbc.writeMem(0x3666, { 0xf2 });
        gbc.writeMem(0xffc7, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xdd6a);
        EXPECT(gbc.pc(), 0x3667);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffc7), 0xf5);
        // F2 032F
        gbc.setState(0x1323, 0xdd, 0x3b50, 0x1300, 0x90da, 0xf452, 0x0, 0x0);
        gbc.writeMem(0x1323, { 0xf2 });
        gbc.writeMem(0xff00, { 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xdd);
        EXPECT(gbc.pc(), 0x1324);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff00), 0x3a);
        // F2 0330
        gbc.setState(0x92dc, 0xa3ec, 0xebd0, 0x501a, 0x3331, 0xeeee, 0x0, 0x0);
        gbc.writeMem(0x92dc, { 0xf2 });
        gbc.writeMem(0xff1a, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xa3ec);
        EXPECT(gbc.pc(), 0x92dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92dc), 0xf2);
        EXPECT(gbc.readMem(0xff1a), 0x76);
        // F2 0331
        gbc.setState(0x807f, 0x379e, 0x49a0, 0x7da1, 0x84a8, 0x8834, 0x0, 0x0);
        gbc.writeMem(0x807f, { 0xf2 });
        gbc.writeMem(0xffa1, { 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x379e);
        EXPECT(gbc.pc(), 0x8080);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x807f), 0xf2);
        EXPECT(gbc.readMem(0xffa1), 0xd0);
        // F2 0332
        gbc.setState(0xc45e, 0xe7e7, 0x3e20, 0xe472, 0x27a0, 0x27dc, 0x0, 0x1);
        gbc.writeMem(0xc45e, { 0xf2 });
        gbc.writeMem(0xff72, { 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xe7e7);
        EXPECT(gbc.pc(), 0xc45f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc45e), 0xf2);
        EXPECT(gbc.readMem(0xff72), 0xc2);
        // F2 0333
        gbc.setState(0x2387, 0x7b25, 0xaae0, 0xe63a, 0x2ef7, 0xb0bf, 0x0, 0x1);
        gbc.writeMem(0x2387, { 0xf2 });
        gbc.writeMem(0xff3a, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x7b25);
        EXPECT(gbc.pc(), 0x2388);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff3a), 0xf0);
        // F2 0334
        gbc.setState(0x4444, 0x4079, 0x6770, 0x6c02, 0x449f, 0xe990, 0x0, 0x1);
        gbc.writeMem(0x4444, { 0xf2 });
        gbc.writeMem(0xff02, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x4079);
        EXPECT(gbc.pc(), 0x4445);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff02), 0x37);
        // F2 0335
        gbc.setState(0x660b, 0xc43f, 0xa5d0, 0xd304, 0xc16c, 0x2aca, 0x0, 0x0);
        gbc.writeMem(0x660b, { 0xf2 });
        gbc.writeMem(0xff04, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xc43f);
        EXPECT(gbc.pc(), 0x660c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff04), 0x59);
        // F2 0336
        gbc.setState(0x292d, 0xc6af, 0x6b90, 0xda9a, 0x5606, 0x87da, 0x0, 0x1);
        gbc.writeMem(0x292d, { 0xf2 });
        gbc.writeMem(0xff9a, { 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xc6af);
        EXPECT(gbc.pc(), 0x292e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff9a), 0x2f);
        // F2 0337
        gbc.setState(0xeb54, 0x6e89, 0xa450, 0xe1a6, 0xfeb2, 0x1eb6, 0x0, 0x1);
        gbc.writeMem(0xeb54, { 0xf2 });
        gbc.writeMem(0xffa6, { 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x6e89);
        EXPECT(gbc.pc(), 0xeb55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb54), 0xf2);
        EXPECT(gbc.readMem(0xffa6), 0xf1);
        // F2 0338
        gbc.setState(0x527e, 0x9082, 0x7a70, 0x9a8b, 0x31a7, 0x2f67, 0x0, 0x1);
        gbc.writeMem(0x527e, { 0xf2 });
        gbc.writeMem(0xff8b, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x9082);
        EXPECT(gbc.pc(), 0x527f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff8b), 0x23);
        // F2 0339
        gbc.setState(0x3116, 0x68c9, 0xe740, 0xd455, 0xc306, 0x67d, 0x1, 0x0);
        gbc.writeMem(0x3116, { 0xf2 });
        gbc.writeMem(0xff55, { 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x68c9);
        EXPECT(gbc.pc(), 0x3117);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff55), 0x21);
        // F2 033A
        gbc.setState(0xd303, 0x58e7, 0x77d0, 0x1d58, 0x724c, 0xde45, 0x1, 0x0);
        gbc.writeMem(0xd303, { 0xf2 });
        gbc.writeMem(0xff58, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x58e7);
        EXPECT(gbc.pc(), 0xd304);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd303), 0xf2);
        EXPECT(gbc.readMem(0xff58), 0x10);
        // F2 033B
        gbc.setState(0x7104, 0x2113, 0x5ae0, 0x24d3, 0x3a2c, 0x20ba, 0x0, 0x0);
        gbc.writeMem(0x7104, { 0xf2 });
        gbc.writeMem(0xffd3, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x2113);
        EXPECT(gbc.pc(), 0x7105);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffd3), 0xbb);
        // F2 033C
        gbc.setState(0x11ef, 0xe79c, 0x6f90, 0xd383, 0x9534, 0x281b, 0x1, 0x0);
        gbc.writeMem(0x11ef, { 0xf2 });
        gbc.writeMem(0xff83, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xe79c);
        EXPECT(gbc.pc(), 0x11f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff83), 0x52);
        // F2 033D
        gbc.setState(0xa94, 0xf949, 0x8350, 0x22e8, 0xa7db, 0xf77d, 0x1, 0x1);
        gbc.writeMem(0xa94, { 0xf2 });
        gbc.writeMem(0xffe8, { 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xf949);
        EXPECT(gbc.pc(), 0xa95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffe8), 0x25);
        // F2 033E
        gbc.setState(0x8a29, 0x8828, 0x4cb0, 0xd046, 0x1f, 0xbaf5, 0x1, 0x1);
        gbc.writeMem(0x8a29, { 0xf2 });
        gbc.writeMem(0xff46, { 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x8828);
        EXPECT(gbc.pc(), 0x8a2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a29), 0xf2);
        EXPECT(gbc.readMem(0xff46), 0xbc);
        // F2 033F
        gbc.setState(0x9bff, 0x890f, 0xe120, 0x2a6c, 0x3383, 0x7580, 0x0, 0x1);
        gbc.writeMem(0x9bff, { 0xf2 });
        gbc.writeMem(0xff6c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x890f);
        EXPECT(gbc.pc(), 0x9c00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bff), 0xf2);
        EXPECT(gbc.readMem(0xff6c), 0xa8);
        // F2 0340
        gbc.setState(0x56bd, 0xc8d7, 0xe610, 0x6add, 0x85a6, 0x976d, 0x0, 0x0);
        gbc.writeMem(0x56bd, { 0xf2 });
        gbc.writeMem(0xffdd, { 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xc8d7);
        EXPECT(gbc.pc(), 0x56be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffdd), 0xc4);
        // F2 0341
        gbc.setState(0xc029, 0x33cf, 0x10f0, 0xfff4, 0xba8d, 0xc229, 0x0, 0x0);
        gbc.writeMem(0xc029, { 0xf2 });
        gbc.writeMem(0xfff4, { 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x33cf);
        EXPECT(gbc.pc(), 0xc02a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc029), 0xf2);
        EXPECT(gbc.readMem(0xfff4), 0xcf);
        // F2 0342
        gbc.setState(0xa2b8, 0x8902, 0xa170, 0x2c71, 0x71da, 0xa991, 0x0, 0x0);
        gbc.writeMem(0xa2b8, { 0xf2 });
        gbc.writeMem(0xff71, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x8902);
        EXPECT(gbc.pc(), 0xa2b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2b8), 0xf2);
        EXPECT(gbc.readMem(0xff71), 0x4f);
        // F2 0343
        gbc.setState(0x4024, 0xa2d9, 0xca80, 0x86f2, 0xb685, 0xe60f, 0x0, 0x0);
        gbc.writeMem(0x4024, { 0xf2 });
        gbc.writeMem(0xfff2, { 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xa2d9);
        EXPECT(gbc.pc(), 0x4025);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfff2), 0x98);
        // F2 0344
        gbc.setState(0x97f8, 0xf24d, 0xf390, 0x4d3f, 0x341c, 0xeb53, 0x1, 0x0);
        gbc.writeMem(0x97f8, { 0xf2 });
        gbc.writeMem(0xff3f, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xf24d);
        EXPECT(gbc.pc(), 0x97f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97f8), 0xf2);
        EXPECT(gbc.readMem(0xff3f), 0xa4);
        // F2 0346
        gbc.setState(0xcd91, 0x37c5, 0xe680, 0x80fd, 0x12c, 0x6261, 0x0, 0x1);
        gbc.writeMem(0xcd91, { 0xf2 });
        gbc.writeMem(0xfffd, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x37c5);
        EXPECT(gbc.pc(), 0xcd92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd91), 0xf2);
        EXPECT(gbc.readMem(0xfffd), 0xb7);
        // F2 0347
        gbc.setState(0xcfa2, 0xdcfd, 0x1070, 0xa930, 0x9482, 0xdb48, 0x1, 0x1);
        gbc.writeMem(0xcfa2, { 0xf2 });
        gbc.writeMem(0xff30, { 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xdcfd);
        EXPECT(gbc.pc(), 0xcfa3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfa2), 0xf2);
        EXPECT(gbc.readMem(0xff30), 0xab);
        // F2 0348
        gbc.setState(0x183a, 0xf72b, 0x2880, 0x6764, 0x948b, 0x4777, 0x1, 0x0);
        gbc.writeMem(0x183a, { 0xf2 });
        gbc.writeMem(0xff64, { 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xf72b);
        EXPECT(gbc.pc(), 0x183b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff64), 0x87);
        // F2 0349
        gbc.setState(0x5bb1, 0x6193, 0xf720, 0x9ff7, 0xd3a8, 0x839e, 0x1, 0x0);
        gbc.writeMem(0x5bb1, { 0xf2 });
        gbc.writeMem(0xfff7, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x6193);
        EXPECT(gbc.pc(), 0x5bb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfff7), 0x2a);
        // F2 034B
        gbc.setState(0x5d0c, 0xd92a, 0x3100, 0xc0d9, 0x1b55, 0x23cf, 0x1, 0x0);
        gbc.writeMem(0x5d0c, { 0xf2 });
        gbc.writeMem(0xffd9, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xd92a);
        EXPECT(gbc.pc(), 0x5d0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffd9), 0xa3);
        // F2 034C
        gbc.setState(0x6bd9, 0xb127, 0xad40, 0x26db, 0xc2ca, 0xcb53, 0x0, 0x1);
        gbc.writeMem(0x6bd9, { 0xf2 });
        gbc.writeMem(0xffdb, { 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xb127);
        EXPECT(gbc.pc(), 0x6bda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffdb), 0x1e);
        // F2 034D
        gbc.setState(0xa3b2, 0xe79d, 0xf0a0, 0x9bab, 0x92d6, 0x7e8f, 0x1, 0x0);
        gbc.writeMem(0xa3b2, { 0xf2 });
        gbc.writeMem(0xffab, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xe79d);
        EXPECT(gbc.pc(), 0xa3b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3b2), 0xf2);
        EXPECT(gbc.readMem(0xffab), 0xe7);
        // F2 034E
        gbc.setState(0x38ec, 0x4b58, 0x72c0, 0x4e9f, 0x22c5, 0xfc54, 0x1, 0x0);
        gbc.writeMem(0x38ec, { 0xf2 });
        gbc.writeMem(0xff9f, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x4b58);
        EXPECT(gbc.pc(), 0x38ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff9f), 0xe7);
        // F2 034F
        gbc.setState(0x1c80, 0x729, 0x3cd0, 0x9f46, 0x7db6, 0x19f2, 0x1, 0x0);
        gbc.writeMem(0x1c80, { 0xf2 });
        gbc.writeMem(0xff46, { 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x729);
        EXPECT(gbc.pc(), 0x1c81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff46), 0xbc);
        // F2 0350
        gbc.setState(0xdf73, 0x5d4f, 0x92d0, 0x578e, 0xc498, 0x5f61, 0x0, 0x0);
        gbc.writeMem(0xdf73, { 0xf2 });
        gbc.writeMem(0xff8e, { 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x5d4f);
        EXPECT(gbc.pc(), 0xdf74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf73), 0xf2);
        EXPECT(gbc.readMem(0xff8e), 0xe3);
        // F2 0351
        gbc.setState(0xdafb, 0x138e, 0x3540, 0xf229, 0xda9e, 0x24af, 0x1, 0x1);
        gbc.writeMem(0xdafb, { 0xf2 });
        gbc.writeMem(0xff29, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x138e);
        EXPECT(gbc.pc(), 0xdafc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdafb), 0xf2);
        EXPECT(gbc.readMem(0xff29), 0xa2);
        // F2 0352
        gbc.setState(0x5b48, 0x5373, 0xbf30, 0xbb6, 0x15eb, 0xce2b, 0x0, 0x0);
        gbc.writeMem(0x5b48, { 0xf2 });
        gbc.writeMem(0xffb6, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x5373);
        EXPECT(gbc.pc(), 0x5b49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffb6), 0x46);
        // F2 0353
        gbc.setState(0x93e3, 0xfebf, 0xc4c0, 0x3421, 0x58ba, 0xd8e0, 0x0, 0x0);
        gbc.writeMem(0x93e3, { 0xf2 });
        gbc.writeMem(0xff21, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xfebf);
        EXPECT(gbc.pc(), 0x93e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93e3), 0xf2);
        EXPECT(gbc.readMem(0xff21), 0xd5);
        // F2 0354
        gbc.setState(0x4198, 0xef3b, 0xd470, 0x7f8c, 0x52ba, 0xfa46, 0x0, 0x0);
        gbc.writeMem(0x4198, { 0xf2 });
        gbc.writeMem(0xff8c, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xef3b);
        EXPECT(gbc.pc(), 0x4199);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff8c), 0x44);
        // F2 0355
        gbc.setState(0xd76, 0x539, 0xb530, 0x8500, 0x325, 0xfb46, 0x1, 0x1);
        gbc.writeMem(0xd76, { 0xf2 });
        gbc.writeMem(0xff00, { 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x539);
        EXPECT(gbc.pc(), 0xd77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff00), 0x3a);
        // F2 0356
        gbc.setState(0x9504, 0x416f, 0xbbc0, 0xc7e0, 0x8595, 0x4a50, 0x0, 0x0);
        gbc.writeMem(0x9504, { 0xf2 });
        gbc.writeMem(0xffe0, { 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x416f);
        EXPECT(gbc.pc(), 0x9505);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9504), 0xf2);
        EXPECT(gbc.readMem(0xffe0), 0x75);
        // F2 0357
        gbc.setState(0xcb14, 0xd15b, 0xc130, 0x13a, 0x5762, 0xb47, 0x0, 0x1);
        gbc.writeMem(0xcb14, { 0xf2 });
        gbc.writeMem(0xff3a, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xd15b);
        EXPECT(gbc.pc(), 0xcb15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb14), 0xf2);
        EXPECT(gbc.readMem(0xff3a), 0xf0);
        // F2 0358
        gbc.setState(0xadf7, 0xb88b, 0xa250, 0xf5bd, 0x271d, 0x1bc8, 0x1, 0x1);
        gbc.writeMem(0xadf7, { 0xf2 });
        gbc.writeMem(0xffbd, { 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xb88b);
        EXPECT(gbc.pc(), 0xadf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadf7), 0xf2);
        EXPECT(gbc.readMem(0xffbd), 0x3d);
        // F2 0359
        gbc.setState(0xce78, 0x858, 0x2560, 0x1de8, 0x6e6c, 0xe583, 0x1, 0x0);
        gbc.writeMem(0xce78, { 0xf2 });
        gbc.writeMem(0xffe8, { 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x858);
        EXPECT(gbc.pc(), 0xce79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce78), 0xf2);
        EXPECT(gbc.readMem(0xffe8), 0x25);
        // F2 035A
        gbc.setState(0xe301, 0xb43, 0x2180, 0x5f3e, 0x2039, 0xd390, 0x0, 0x0);
        gbc.writeMem(0xe301, { 0xf2 });
        gbc.writeMem(0xff3e, { 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xb43);
        EXPECT(gbc.pc(), 0xe302);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe301), 0xf2);
        EXPECT(gbc.readMem(0xff3e), 0x55);
        // F2 035B
        gbc.setState(0x3240, 0x14ff, 0x5b20, 0x3633, 0x3b32, 0xba64, 0x0, 0x1);
        gbc.writeMem(0x3240, { 0xf2 });
        gbc.writeMem(0xff33, { 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x14ff);
        EXPECT(gbc.pc(), 0x3241);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff33), 0x28);
        // F2 035C
        gbc.setState(0xd00d, 0x5521, 0x9820, 0x3570, 0xcc8e, 0x29f8, 0x0, 0x1);
        gbc.writeMem(0xd00d, { 0xf2 });
        gbc.writeMem(0xff70, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x5521);
        EXPECT(gbc.pc(), 0xd00e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd00d), 0xf2);
        EXPECT(gbc.readMem(0xff70), 0xff);
        // F2 035D
        gbc.setState(0x202f, 0x4f6a, 0xb580, 0xa9b1, 0xde9d, 0xcf01, 0x1, 0x1);
        gbc.writeMem(0x202f, { 0xf2 });
        gbc.writeMem(0xffb1, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x4f6a);
        EXPECT(gbc.pc(), 0x2030);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffb1), 0x63);
        // F2 035E
        gbc.setState(0xaef3, 0xcbf, 0x3c60, 0xef05, 0x5eec, 0x21b7, 0x0, 0x1);
        gbc.writeMem(0xaef3, { 0xf2 });
        gbc.writeMem(0xff05, { 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xcbf);
        EXPECT(gbc.pc(), 0xaef4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaef3), 0xf2);
        EXPECT(gbc.readMem(0xff05), 0x83);
        // F2 035F
        gbc.setState(0x205c, 0x43d5, 0x90, 0xc981, 0xfb23, 0x84a8, 0x1, 0x1);
        gbc.writeMem(0x205c, { 0xf2 });
        gbc.writeMem(0xff81, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x43d5);
        EXPECT(gbc.pc(), 0x205d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff81), 0x19);
        // F2 0360
        gbc.setState(0x89db, 0x62a1, 0x6910, 0x73fd, 0xb4b2, 0x416e, 0x0, 0x0);
        gbc.writeMem(0x89db, { 0xf2 });
        gbc.writeMem(0xfffd, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x62a1);
        EXPECT(gbc.pc(), 0x89dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89db), 0xf2);
        EXPECT(gbc.readMem(0xfffd), 0xb7);
        // F2 0361
        gbc.setState(0xec0d, 0xad45, 0x7330, 0x9703, 0x4b7f, 0x9f8, 0x1, 0x1);
        gbc.writeMem(0xec0d, { 0xf2 });
        gbc.writeMem(0xff03, { 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xad45);
        EXPECT(gbc.pc(), 0xec0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec0d), 0xf2);
        EXPECT(gbc.readMem(0xff03), 0x61);
        // F2 0362
        gbc.setState(0x6a81, 0x8387, 0xbed0, 0xa81e, 0x2d1e, 0x3149, 0x1, 0x1);
        gbc.writeMem(0x6a81, { 0xf2 });
        gbc.writeMem(0xff1e, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x8387);
        EXPECT(gbc.pc(), 0x6a82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff1e), 0x73);
        // F2 0363
        gbc.setState(0xc733, 0x94d4, 0x3f0, 0x3d8, 0x3dc6, 0xdcc1, 0x0, 0x0);
        gbc.writeMem(0xc733, { 0xf2 });
        gbc.writeMem(0xffd8, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x94d4);
        EXPECT(gbc.pc(), 0xc734);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc733), 0xf2);
        EXPECT(gbc.readMem(0xffd8), 0x3);
        // F2 0364
        gbc.setState(0xeec8, 0x5b0f, 0xb450, 0x95aa, 0xebea, 0xb9c1, 0x1, 0x0);
        gbc.writeMem(0xeec8, { 0xf2 });
        gbc.writeMem(0xffaa, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x5b0f);
        EXPECT(gbc.pc(), 0xeec9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeec8), 0xf2);
        EXPECT(gbc.readMem(0xffaa), 0x24);
        // F2 0365
        gbc.setState(0x878f, 0xc037, 0x85e0, 0xb8aa, 0x4a3b, 0xb731, 0x0, 0x0);
        gbc.writeMem(0x878f, { 0xf2 });
        gbc.writeMem(0xffaa, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xc037);
        EXPECT(gbc.pc(), 0x8790);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x878f), 0xf2);
        EXPECT(gbc.readMem(0xffaa), 0x24);
        // F2 0366
        gbc.setState(0xe343, 0x23bc, 0x6640, 0x5a5c, 0x1feb, 0x3d6b, 0x0, 0x0);
        gbc.writeMem(0xe343, { 0xf2 });
        gbc.writeMem(0xff5c, { 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x23bc);
        EXPECT(gbc.pc(), 0xe344);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe343), 0xf2);
        EXPECT(gbc.readMem(0xff5c), 0xc3);
        // F2 0367
        gbc.setState(0x801b, 0xb8c8, 0x1a90, 0xda91, 0x9149, 0x3f14, 0x0, 0x0);
        gbc.writeMem(0x801b, { 0xf2 });
        gbc.writeMem(0xff91, { 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xb8c8);
        EXPECT(gbc.pc(), 0x801c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x801b), 0xf2);
        EXPECT(gbc.readMem(0xff91), 0xb8);
        // F2 0368
        gbc.setState(0xad34, 0x9a82, 0x6140, 0xde78, 0x4a11, 0x9bd9, 0x1, 0x1);
        gbc.writeMem(0xad34, { 0xf2 });
        gbc.writeMem(0xff78, { 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x9a82);
        EXPECT(gbc.pc(), 0xad35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad34), 0xf2);
        EXPECT(gbc.readMem(0xff78), 0x9e);
        // F2 0369
        gbc.setState(0x787c, 0x130b, 0x3770, 0xb823, 0x46e2, 0xa8ed, 0x0, 0x1);
        gbc.writeMem(0x787c, { 0xf2 });
        gbc.writeMem(0xff23, { 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x130b);
        EXPECT(gbc.pc(), 0x787d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff23), 0x45);
        // F2 036A
        gbc.setState(0x2d08, 0x80c8, 0xe3f0, 0x16d9, 0xc630, 0x56a7, 0x0, 0x1);
        gbc.writeMem(0x2d08, { 0xf2 });
        gbc.writeMem(0xffd9, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x80c8);
        EXPECT(gbc.pc(), 0x2d09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffd9), 0xa3);
        // F2 036B
        gbc.setState(0x6afb, 0xdb41, 0xe490, 0xb92e, 0x36bf, 0x7243, 0x0, 0x1);
        gbc.writeMem(0x6afb, { 0xf2 });
        gbc.writeMem(0xff2e, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xdb41);
        EXPECT(gbc.pc(), 0x6afc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff2e), 0x86);
        // F2 036C
        gbc.setState(0x6b94, 0x2827, 0x61e0, 0x2c11, 0xfec6, 0xd283, 0x1, 0x0);
        gbc.writeMem(0x6b94, { 0xf2 });
        gbc.writeMem(0xff11, { 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x2827);
        EXPECT(gbc.pc(), 0x6b95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff11), 0x48);
        // F2 036D
        gbc.setState(0x4dae, 0xa6cb, 0x2d00, 0x8b1, 0x9157, 0xb638, 0x0, 0x0);
        gbc.writeMem(0x4dae, { 0xf2 });
        gbc.writeMem(0xffb1, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xa6cb);
        EXPECT(gbc.pc(), 0x4daf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffb1), 0x63);
        // F2 036E
        gbc.setState(0x217e, 0xdbad, 0xf980, 0x36e8, 0x8f11, 0x63e9, 0x0, 0x0);
        gbc.writeMem(0x217e, { 0xf2 });
        gbc.writeMem(0xffe8, { 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xdbad);
        EXPECT(gbc.pc(), 0x217f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffe8), 0x25);
        // F2 036F
        gbc.setState(0x8128, 0xe268, 0xe2f0, 0x9a6c, 0x27a5, 0x430d, 0x0, 0x0);
        gbc.writeMem(0x8128, { 0xf2 });
        gbc.writeMem(0xff6c, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xe268);
        EXPECT(gbc.pc(), 0x8129);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8128), 0xf2);
        EXPECT(gbc.readMem(0xff6c), 0xa8);
        // F2 0370
        gbc.setState(0xc165, 0xd8d7, 0x2830, 0x5dd9, 0x39b9, 0x8377, 0x1, 0x0);
        gbc.writeMem(0xc165, { 0xf2 });
        gbc.writeMem(0xffd9, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xd8d7);
        EXPECT(gbc.pc(), 0xc166);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc165), 0xf2);
        EXPECT(gbc.readMem(0xffd9), 0xa3);
        // F2 0371
        gbc.setState(0xc13c, 0x744e, 0x5100, 0xb81d, 0x122b, 0xac2b, 0x0, 0x0);
        gbc.writeMem(0xc13c, { 0xf2 });
        gbc.writeMem(0xff1d, { 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x744e);
        EXPECT(gbc.pc(), 0xc13d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc13c), 0xf2);
        EXPECT(gbc.readMem(0xff1d), 0xcd);
        // F2 0372
        gbc.setState(0xb0f4, 0x454c, 0x7a50, 0xd1b3, 0xe428, 0x8dce, 0x1, 0x0);
        gbc.writeMem(0xb0f4, { 0xf2 });
        gbc.writeMem(0xffb3, { 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x454c);
        EXPECT(gbc.pc(), 0xb0f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0f4), 0xf2);
        EXPECT(gbc.readMem(0xffb3), 0x6);
        // F2 0373
        gbc.setState(0x984, 0x73f3, 0x9a60, 0x7389, 0x8e8, 0xf844, 0x1, 0x0);
        gbc.writeMem(0x984, { 0xf2 });
        gbc.writeMem(0xff89, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x73f3);
        EXPECT(gbc.pc(), 0x985);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff89), 0xd);
        // F2 0374
        gbc.setState(0xe5f6, 0x41ba, 0xa020, 0x6ccd, 0xba4f, 0xa4a7, 0x0, 0x1);
        gbc.writeMem(0xe5f6, { 0xf2 });
        gbc.writeMem(0xffcd, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x41ba);
        EXPECT(gbc.pc(), 0xe5f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5f6), 0xf2);
        EXPECT(gbc.readMem(0xffcd), 0x10);
        // F2 0375
        gbc.setState(0xcda6, 0xee01, 0xb460, 0x9022, 0xec33, 0x8889, 0x1, 0x0);
        gbc.writeMem(0xcda6, { 0xf2 });
        gbc.writeMem(0xff22, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xee01);
        EXPECT(gbc.pc(), 0xcda7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcda6), 0xf2);
        EXPECT(gbc.readMem(0xff22), 0x77);
        // F2 0376
        gbc.setState(0x783e, 0xd1ac, 0xaa40, 0x3aef, 0x1077, 0xeae6, 0x1, 0x0);
        gbc.writeMem(0x783e, { 0xf2 });
        gbc.writeMem(0xffef, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xd1ac);
        EXPECT(gbc.pc(), 0x783f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffef), 0xdb);
        // F2 0377
        gbc.setState(0x9cea, 0xe422, 0xc7c0, 0x7c79, 0x5502, 0x397b, 0x1, 0x0);
        gbc.writeMem(0x9cea, { 0xf2 });
        gbc.writeMem(0xff79, { 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xe422);
        EXPECT(gbc.pc(), 0x9ceb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cea), 0xf2);
        EXPECT(gbc.readMem(0xff79), 0x18);
        // F2 0379
        gbc.setState(0x85b6, 0x4a1, 0x55d0, 0xdfad, 0x2dd2, 0xfb63, 0x0, 0x0);
        gbc.writeMem(0x85b6, { 0xf2 });
        gbc.writeMem(0xffad, { 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x4a1);
        EXPECT(gbc.pc(), 0x85b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85b6), 0xf2);
        EXPECT(gbc.readMem(0xffad), 0xb9);
        // F2 037A
        gbc.setState(0xc5da, 0x3385, 0x86b0, 0x6f09, 0x50c0, 0x9fcc, 0x0, 0x0);
        gbc.writeMem(0xc5da, { 0xf2 });
        gbc.writeMem(0xff09, { 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x3385);
        EXPECT(gbc.pc(), 0xc5db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5da), 0xf2);
        EXPECT(gbc.readMem(0xff09), 0x53);
        // F2 037B
        gbc.setState(0xb13e, 0xc3c3, 0x6300, 0x4888, 0xe4cd, 0x8c7f, 0x0, 0x1);
        gbc.writeMem(0xb13e, { 0xf2 });
        gbc.writeMem(0xff88, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xc3c3);
        EXPECT(gbc.pc(), 0xb13f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb13e), 0xf2);
        EXPECT(gbc.readMem(0xff88), 0x49);
        // F2 037C
        gbc.setState(0x4de4, 0x57e6, 0xc3c0, 0x8556, 0xd63d, 0xf04f, 0x0, 0x1);
        gbc.writeMem(0x4de4, { 0xf2 });
        gbc.writeMem(0xff56, { 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x57e6);
        EXPECT(gbc.pc(), 0x4de5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff56), 0x31);
        // F2 037D
        gbc.setState(0x6124, 0xc001, 0x25c0, 0xfc2d, 0xcd09, 0xc52c, 0x1, 0x1);
        gbc.writeMem(0x6124, { 0xf2 });
        gbc.writeMem(0xff2d, { 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xc001);
        EXPECT(gbc.pc(), 0x6125);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff2d), 0xe0);
        // F2 037E
        gbc.setState(0x3d58, 0xdd2e, 0x4730, 0x1429, 0x8cb6, 0x191e, 0x1, 0x0);
        gbc.writeMem(0x3d58, { 0xf2 });
        gbc.writeMem(0xff29, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xdd2e);
        EXPECT(gbc.pc(), 0x3d59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff29), 0xa2);
        // F2 037F
        gbc.setState(0x83cd, 0x563d, 0x7420, 0x8c00, 0x6665, 0x7b31, 0x0, 0x0);
        gbc.writeMem(0x83cd, { 0xf2 });
        gbc.writeMem(0xff00, { 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x563d);
        EXPECT(gbc.pc(), 0x83ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83cd), 0xf2);
        EXPECT(gbc.readMem(0xff00), 0x3a);
        // F2 0380
        gbc.setState(0xa29e, 0xb998, 0x7670, 0x3651, 0x4735, 0x34a2, 0x0, 0x0);
        gbc.writeMem(0xa29e, { 0xf2 });
        gbc.writeMem(0xff51, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xb998);
        EXPECT(gbc.pc(), 0xa29f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa29e), 0xf2);
        EXPECT(gbc.readMem(0xff51), 0x4c);
        // F2 0381
        gbc.setState(0x2b77, 0x4b0d, 0x2700, 0x7f3a, 0xab5d, 0x1dae, 0x0, 0x1);
        gbc.writeMem(0x2b77, { 0xf2 });
        gbc.writeMem(0xff3a, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x4b0d);
        EXPECT(gbc.pc(), 0x2b78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff3a), 0xf0);
        // F2 0382
        gbc.setState(0x7dc, 0x2113, 0xb50, 0xf410, 0x3737, 0x59f3, 0x1, 0x1);
        gbc.writeMem(0x7dc, { 0xf2 });
        gbc.writeMem(0xff10, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x2113);
        EXPECT(gbc.pc(), 0x7dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff10), 0xb7);
        // F2 0383
        gbc.setState(0x9154, 0x7165, 0xcc30, 0xa15e, 0x8b5b, 0xe673, 0x0, 0x0);
        gbc.writeMem(0x9154, { 0xf2 });
        gbc.writeMem(0xff5e, { 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x7165);
        EXPECT(gbc.pc(), 0x9155);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9154), 0xf2);
        EXPECT(gbc.readMem(0xff5e), 0x62);
        // F2 0384
        gbc.setState(0x30f8, 0x6cfd, 0xfd70, 0x71c, 0x1fbc, 0x8c6, 0x0, 0x1);
        gbc.writeMem(0x30f8, { 0xf2 });
        gbc.writeMem(0xff1c, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x6cfd);
        EXPECT(gbc.pc(), 0x30f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff1c), 0x94);
        // F2 0385
        gbc.setState(0x6147, 0x329e, 0x36e0, 0xd5b2, 0x16a8, 0xb5dc, 0x1, 0x1);
        gbc.writeMem(0x6147, { 0xf2 });
        gbc.writeMem(0xffb2, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x329e);
        EXPECT(gbc.pc(), 0x6148);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffb2), 0x11);
        // F2 0386
        gbc.setState(0xb798, 0x865, 0xc780, 0x109c, 0xe5d3, 0x645a, 0x0, 0x1);
        gbc.writeMem(0xb798, { 0xf2 });
        gbc.writeMem(0xff9c, { 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x865);
        EXPECT(gbc.pc(), 0xb799);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb798), 0xf2);
        EXPECT(gbc.readMem(0xff9c), 0xb6);
        // F2 0387
        gbc.setState(0x6a69, 0x81e7, 0xa6e0, 0xa9cc, 0xaffa, 0x9d85, 0x1, 0x1);
        gbc.writeMem(0x6a69, { 0xf2 });
        gbc.writeMem(0xffcc, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x81e7);
        EXPECT(gbc.pc(), 0x6a6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffcc), 0x8d);
        // F2 0388
        gbc.setState(0xa8a8, 0x7287, 0xc960, 0xf1fc, 0x725d, 0xd3de, 0x1, 0x1);
        gbc.writeMem(0xa8a8, { 0xf2 });
        gbc.writeMem(0xfffc, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x7287);
        EXPECT(gbc.pc(), 0xa8a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8a8), 0xf2);
        EXPECT(gbc.readMem(0xfffc), 0x8b);
        // F2 0389
        gbc.setState(0x7da8, 0x382c, 0xa00, 0xa7a5, 0x4a64, 0x39e7, 0x1, 0x1);
        gbc.writeMem(0x7da8, { 0xf2 });
        gbc.writeMem(0xffa5, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x382c);
        EXPECT(gbc.pc(), 0x7da9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffa5), 0x9);
        // F2 038A
        gbc.setState(0x99dd, 0x8ee9, 0x8c10, 0x7be8, 0xe181, 0xe635, 0x1, 0x0);
        gbc.writeMem(0x99dd, { 0xf2 });
        gbc.writeMem(0xffe8, { 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x8ee9);
        EXPECT(gbc.pc(), 0x99de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99dd), 0xf2);
        EXPECT(gbc.readMem(0xffe8), 0x25);
        // F2 038C
        gbc.setState(0x671d, 0x919a, 0xfeb0, 0xaff3, 0x720, 0xf2b1, 0x0, 0x1);
        gbc.writeMem(0x671d, { 0xf2 });
        gbc.writeMem(0xfff3, { 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x919a);
        EXPECT(gbc.pc(), 0x671e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfff3), 0x48);
        // F2 038D
        gbc.setState(0x8e18, 0x2b63, 0xadc0, 0xd882, 0x1ca3, 0xcb7c, 0x1, 0x0);
        gbc.writeMem(0x8e18, { 0xf2 });
        gbc.writeMem(0xff82, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x2b63);
        EXPECT(gbc.pc(), 0x8e19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e18), 0xf2);
        EXPECT(gbc.readMem(0xff82), 0x5e);
        // F2 038E
        gbc.setState(0x630a, 0xe4b8, 0x35d0, 0x7caa, 0xb73d, 0x9a7a, 0x0, 0x1);
        gbc.writeMem(0x630a, { 0xf2 });
        gbc.writeMem(0xffaa, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xe4b8);
        EXPECT(gbc.pc(), 0x630b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffaa), 0x24);
        // F2 038F
        gbc.setState(0xb6c2, 0xb5b2, 0xca80, 0xbe83, 0xc10e, 0x89a8, 0x1, 0x0);
        gbc.writeMem(0xb6c2, { 0xf2 });
        gbc.writeMem(0xff83, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xb5b2);
        EXPECT(gbc.pc(), 0xb6c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6c2), 0xf2);
        EXPECT(gbc.readMem(0xff83), 0x52);
        // F2 0391
        gbc.setState(0xe276, 0x6b26, 0x1640, 0xd2b4, 0x7404, 0x333a, 0x0, 0x1);
        gbc.writeMem(0xe276, { 0xf2 });
        gbc.writeMem(0xffb4, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x6b26);
        EXPECT(gbc.pc(), 0xe277);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe276), 0xf2);
        EXPECT(gbc.readMem(0xffb4), 0xec);
        // F2 0392
        gbc.setState(0xb077, 0x2f31, 0x2e70, 0x1979, 0x5661, 0xc512, 0x1, 0x0);
        gbc.writeMem(0xb077, { 0xf2 });
        gbc.writeMem(0xff79, { 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x2f31);
        EXPECT(gbc.pc(), 0xb078);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb077), 0xf2);
        EXPECT(gbc.readMem(0xff79), 0x18);
        // F2 0393
        gbc.setState(0x3f87, 0x9def, 0x6910, 0xa21a, 0x1916, 0x1a4c, 0x0, 0x1);
        gbc.writeMem(0x3f87, { 0xf2 });
        gbc.writeMem(0xff1a, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x9def);
        EXPECT(gbc.pc(), 0x3f88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff1a), 0x76);
        // F2 0394
        gbc.setState(0x52d6, 0xcfbb, 0xfb70, 0x190e, 0x1554, 0x24f9, 0x0, 0x0);
        gbc.writeMem(0x52d6, { 0xf2 });
        gbc.writeMem(0xff0e, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xcfbb);
        EXPECT(gbc.pc(), 0x52d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff0e), 0xa6);
        // F2 0395
        gbc.setState(0xa4d3, 0xab18, 0xec10, 0xd781, 0xaab6, 0xe34, 0x1, 0x0);
        gbc.writeMem(0xa4d3, { 0xf2 });
        gbc.writeMem(0xff81, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xab18);
        EXPECT(gbc.pc(), 0xa4d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4d3), 0xf2);
        EXPECT(gbc.readMem(0xff81), 0x19);
        // F2 0396
        gbc.setState(0x7299, 0xdb0f, 0x5ee0, 0x326, 0xd24d, 0x58a7, 0x0, 0x0);
        gbc.writeMem(0x7299, { 0xf2 });
        gbc.writeMem(0xff26, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xdb0f);
        EXPECT(gbc.pc(), 0x729a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff26), 0x57);
        // F2 0397
        gbc.setState(0x9638, 0x2a1, 0xe300, 0x1c4a, 0xd4c4, 0x1c59, 0x0, 0x1);
        gbc.writeMem(0x9638, { 0xf2 });
        gbc.writeMem(0xff4a, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x2a1);
        EXPECT(gbc.pc(), 0x9639);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9638), 0xf2);
        EXPECT(gbc.readMem(0xff4a), 0x7e);
        // F2 0398
        gbc.setState(0x65ee, 0xe420, 0x7890, 0x9a43, 0x4b89, 0xf0de, 0x1, 0x0);
        gbc.writeMem(0x65ee, { 0xf2 });
        gbc.writeMem(0xff43, { 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xe420);
        EXPECT(gbc.pc(), 0x65ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff43), 0x51);
        // F2 0399
        gbc.setState(0xcbd3, 0x2978, 0xe3a0, 0x61b1, 0x96a9, 0x9f26, 0x1, 0x1);
        gbc.writeMem(0xcbd3, { 0xf2 });
        gbc.writeMem(0xffb1, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x2978);
        EXPECT(gbc.pc(), 0xcbd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbd3), 0xf2);
        EXPECT(gbc.readMem(0xffb1), 0x63);
        // F2 039A
        gbc.setState(0x40b9, 0xb847, 0x5740, 0xbf79, 0xf170, 0xde0e, 0x1, 0x0);
        gbc.writeMem(0x40b9, { 0xf2 });
        gbc.writeMem(0xff79, { 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xb847);
        EXPECT(gbc.pc(), 0x40ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff79), 0x18);
        // F2 039B
        gbc.setState(0x20e, 0xc987, 0x9490, 0xaea3, 0x8f0c, 0xfe4, 0x1, 0x1);
        gbc.writeMem(0x20e, { 0xf2 });
        gbc.writeMem(0xffa3, { 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xc987);
        EXPECT(gbc.pc(), 0x20f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffa3), 0x7);
        // F2 039C
        gbc.setState(0xd087, 0x5668, 0x59f0, 0x703, 0x5e07, 0x553, 0x0, 0x0);
        gbc.writeMem(0xd087, { 0xf2 });
        gbc.writeMem(0xff03, { 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x5668);
        EXPECT(gbc.pc(), 0xd088);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd087), 0xf2);
        EXPECT(gbc.readMem(0xff03), 0x61);
        // F2 039D
        gbc.setState(0x7298, 0x1e12, 0x60f0, 0x3f42, 0x2a4e, 0x451c, 0x1, 0x0);
        gbc.writeMem(0x7298, { 0xf2 });
        gbc.writeMem(0xff42, { 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x1e12);
        EXPECT(gbc.pc(), 0x7299);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff42), 0x50);
        // F2 039E
        gbc.setState(0xda23, 0x12ab, 0xd740, 0x3fa0, 0x1dd5, 0x3631, 0x0, 0x0);
        gbc.writeMem(0xda23, { 0xf2 });
        gbc.writeMem(0xffa0, { 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x12ab);
        EXPECT(gbc.pc(), 0xda24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda23), 0xf2);
        EXPECT(gbc.readMem(0xffa0), 0x33);
        // F2 039F
        gbc.setState(0x34e4, 0xd9f1, 0x58c0, 0xe275, 0x4910, 0x6bb5, 0x1, 0x0);
        gbc.writeMem(0x34e4, { 0xf2 });
        gbc.writeMem(0xff75, { 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xd9f1);
        EXPECT(gbc.pc(), 0x34e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff75), 0x1);
        // F2 03A0
        gbc.setState(0x8099, 0x1d68, 0xb160, 0x7d39, 0xda11, 0xd333, 0x0, 0x1);
        gbc.writeMem(0x8099, { 0xf2 });
        gbc.writeMem(0xff39, { 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x1d68);
        EXPECT(gbc.pc(), 0x809a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8099), 0xf2);
        EXPECT(gbc.readMem(0xff39), 0xc3);
        // F2 03A1
        gbc.setState(0x48f4, 0xabc4, 0x4230, 0x100c, 0x6984, 0xa90e, 0x1, 0x1);
        gbc.writeMem(0x48f4, { 0xf2 });
        gbc.writeMem(0xff0c, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xabc4);
        EXPECT(gbc.pc(), 0x48f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff0c), 0x94);
        // F2 03A2
        gbc.setState(0x4065, 0x212e, 0x2650, 0x2e2f, 0x61ed, 0x74c6, 0x0, 0x0);
        gbc.writeMem(0x4065, { 0xf2 });
        gbc.writeMem(0xff2f, { 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x212e);
        EXPECT(gbc.pc(), 0x4066);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff2f), 0x91);
        // F2 03A3
        gbc.setState(0x1b4b, 0xfb71, 0x5b30, 0xf31e, 0x4972, 0x93b1, 0x0, 0x1);
        gbc.writeMem(0x1b4b, { 0xf2 });
        gbc.writeMem(0xff1e, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xfb71);
        EXPECT(gbc.pc(), 0x1b4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff1e), 0x73);
        // F2 03A4
        gbc.setState(0xa208, 0xe92, 0x3a00, 0x41fb, 0x9778, 0xedc3, 0x0, 0x1);
        gbc.writeMem(0xa208, { 0xf2 });
        gbc.writeMem(0xfffb, { 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xe92);
        EXPECT(gbc.pc(), 0xa209);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa208), 0xf2);
        EXPECT(gbc.readMem(0xfffb), 0x5f);
        // F2 03A5
        gbc.setState(0x81fc, 0x203b, 0x3110, 0xa6f0, 0x6c2e, 0xbb57, 0x1, 0x1);
        gbc.writeMem(0x81fc, { 0xf2 });
        gbc.writeMem(0xfff0, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x203b);
        EXPECT(gbc.pc(), 0x81fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81fc), 0xf2);
        EXPECT(gbc.readMem(0xfff0), 0xc0);
        // F2 03A6
        gbc.setState(0xad25, 0x70f3, 0x9db0, 0xb80c, 0x995e, 0xd65e, 0x0, 0x0);
        gbc.writeMem(0xad25, { 0xf2 });
        gbc.writeMem(0xff0c, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x70f3);
        EXPECT(gbc.pc(), 0xad26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad25), 0xf2);
        EXPECT(gbc.readMem(0xff0c), 0x94);
        // F2 03A7
        gbc.setState(0x8705, 0x9d0a, 0xa7b0, 0xd714, 0x857d, 0x6cb7, 0x0, 0x1);
        gbc.writeMem(0x8705, { 0xf2 });
        gbc.writeMem(0xff14, { 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x9d0a);
        EXPECT(gbc.pc(), 0x8706);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8705), 0xf2);
        EXPECT(gbc.readMem(0xff14), 0xae);
        // F2 03A8
        gbc.setState(0x721a, 0xbdfe, 0x4a40, 0xca01, 0x4c82, 0x938a, 0x1, 0x1);
        gbc.writeMem(0x721a, { 0xf2 });
        gbc.writeMem(0xff01, { 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xbdfe);
        EXPECT(gbc.pc(), 0x721b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff01), 0x80);
        // F2 03A9
        gbc.setState(0x4cf1, 0x8578, 0x6670, 0xfe05, 0x7250, 0x2253, 0x0, 0x0);
        gbc.writeMem(0x4cf1, { 0xf2 });
        gbc.writeMem(0xff05, { 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x8578);
        EXPECT(gbc.pc(), 0x4cf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff05), 0x83);
        // F2 03AA
        gbc.setState(0x8780, 0x6182, 0x9420, 0x75cd, 0x6a7a, 0x292f, 0x0, 0x0);
        gbc.writeMem(0x8780, { 0xf2 });
        gbc.writeMem(0xffcd, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x6182);
        EXPECT(gbc.pc(), 0x8781);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8780), 0xf2);
        EXPECT(gbc.readMem(0xffcd), 0x10);
        // F2 03AB
        gbc.setState(0xb81c, 0x851, 0xa020, 0x2c3b, 0x5493, 0x8bdc, 0x0, 0x1);
        gbc.writeMem(0xb81c, { 0xf2 });
        gbc.writeMem(0xff3b, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x851);
        EXPECT(gbc.pc(), 0xb81d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb81c), 0xf2);
        EXPECT(gbc.readMem(0xff3b), 0xb2);
        // F2 03AC
        gbc.setState(0x5b8e, 0x712f, 0x990, 0xd987, 0x135c, 0x5208, 0x0, 0x0);
        gbc.writeMem(0x5b8e, { 0xf2 });
        gbc.writeMem(0xff87, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x712f);
        EXPECT(gbc.pc(), 0x5b8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff87), 0xb1);
        // F2 03AD
        gbc.setState(0x9e7, 0x7609, 0x40b0, 0xa867, 0xf93, 0x4df2, 0x0, 0x0);
        gbc.writeMem(0x9e7, { 0xf2 });
        gbc.writeMem(0xff67, { 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x7609);
        EXPECT(gbc.pc(), 0x9e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff67), 0x27);
        // F2 03AE
        gbc.setState(0x8b9e, 0xff96, 0xa0b0, 0x10e7, 0x298, 0x8dbc, 0x0, 0x1);
        gbc.writeMem(0x8b9e, { 0xf2 });
        gbc.writeMem(0xffe7, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xff96);
        EXPECT(gbc.pc(), 0x8b9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b9e), 0xf2);
        EXPECT(gbc.readMem(0xffe7), 0xe9);
        // F2 03B0
        gbc.setState(0x77ca, 0x13, 0x40e0, 0xa952, 0x4fb7, 0x5e4a, 0x1, 0x1);
        gbc.writeMem(0x77ca, { 0xf2 });
        gbc.writeMem(0xff52, { 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x13);
        EXPECT(gbc.pc(), 0x77cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff52), 0xa);
        // F2 03B1
        gbc.setState(0x2abe, 0x696d, 0x8430, 0xf921, 0x3e3c, 0xab6d, 0x1, 0x0);
        gbc.writeMem(0x2abe, { 0xf2 });
        gbc.writeMem(0xff21, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x696d);
        EXPECT(gbc.pc(), 0x2abf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff21), 0xd5);
        // F2 03B2
        gbc.setState(0x7320, 0x95e0, 0x2bf0, 0xe0d6, 0xc94a, 0x1267, 0x0, 0x1);
        gbc.writeMem(0x7320, { 0xf2 });
        gbc.writeMem(0xffd6, { 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x95e0);
        EXPECT(gbc.pc(), 0x7321);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffd6), 0xdc);
        // F2 03B3
        gbc.setState(0x914c, 0xc0db, 0xce50, 0x9a30, 0x794c, 0xc5b0, 0x0, 0x1);
        gbc.writeMem(0x914c, { 0xf2 });
        gbc.writeMem(0xff30, { 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xc0db);
        EXPECT(gbc.pc(), 0x914d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x914c), 0xf2);
        EXPECT(gbc.readMem(0xff30), 0xab);
        // F2 03B4
        gbc.setState(0x8323, 0xdcd2, 0xdef0, 0xccaa, 0xab4e, 0x9c1b, 0x0, 0x1);
        gbc.writeMem(0x8323, { 0xf2 });
        gbc.writeMem(0xffaa, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xdcd2);
        EXPECT(gbc.pc(), 0x8324);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8323), 0xf2);
        EXPECT(gbc.readMem(0xffaa), 0x24);
        // F2 03B5
        gbc.setState(0x5c50, 0xb6ee, 0x5810, 0xeb82, 0x2a28, 0x6e0b, 0x1, 0x0);
        gbc.writeMem(0x5c50, { 0xf2 });
        gbc.writeMem(0xff82, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xb6ee);
        EXPECT(gbc.pc(), 0x5c51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff82), 0x5e);
        // F2 03B6
        gbc.setState(0x1333, 0x2f4e, 0x8d0, 0xf9a, 0xbd7b, 0xbd26, 0x0, 0x1);
        gbc.writeMem(0x1333, { 0xf2 });
        gbc.writeMem(0xff9a, { 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x2f4e);
        EXPECT(gbc.pc(), 0x1334);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff9a), 0x2f);
        // F2 03B7
        gbc.setState(0x44b0, 0x20fa, 0x7420, 0xcd71, 0xca3d, 0x1b45, 0x0, 0x1);
        gbc.writeMem(0x44b0, { 0xf2 });
        gbc.writeMem(0xff71, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x20fa);
        EXPECT(gbc.pc(), 0x44b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff71), 0x4f);
        // F2 03B8
        gbc.setState(0xe044, 0x5883, 0xb500, 0x9303, 0xb84d, 0xc7f, 0x1, 0x1);
        gbc.writeMem(0xe044, { 0xf2 });
        gbc.writeMem(0xff03, { 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x5883);
        EXPECT(gbc.pc(), 0xe045);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe044), 0xf2);
        EXPECT(gbc.readMem(0xff03), 0x61);
        // F2 03B9
        gbc.setState(0x8ce, 0xb282, 0xfe30, 0xab34, 0x193, 0x3fe0, 0x1, 0x1);
        gbc.writeMem(0x8ce, { 0xf2 });
        gbc.writeMem(0xff34, { 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xb282);
        EXPECT(gbc.pc(), 0x8cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff34), 0xcb);
        // F2 03BA
        gbc.setState(0xc2e6, 0xaa97, 0x9680, 0xb1de, 0x5786, 0x733a, 0x1, 0x0);
        gbc.writeMem(0xc2e6, { 0xf2 });
        gbc.writeMem(0xffde, { 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xaa97);
        EXPECT(gbc.pc(), 0xc2e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2e6), 0xf2);
        EXPECT(gbc.readMem(0xffde), 0x87);
        // F2 03BB
        gbc.setState(0x31a, 0x9ecd, 0x4540, 0x69ad, 0x2b66, 0xc20, 0x0, 0x1);
        gbc.writeMem(0x31a, { 0xf2 });
        gbc.writeMem(0xffad, { 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x9ecd);
        EXPECT(gbc.pc(), 0x31b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffad), 0xb9);
        // F2 03BC
        gbc.setState(0xc151, 0xbc18, 0xc4b0, 0xdeef, 0xc254, 0x445b, 0x1, 0x1);
        gbc.writeMem(0xc151, { 0xf2 });
        gbc.writeMem(0xffef, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xbc18);
        EXPECT(gbc.pc(), 0xc152);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc151), 0xf2);
        EXPECT(gbc.readMem(0xffef), 0xdb);
        // F2 03BD
        gbc.setState(0xa9a4, 0xab9, 0xfbb0, 0x6742, 0x14d3, 0x7259, 0x0, 0x0);
        gbc.writeMem(0xa9a4, { 0xf2 });
        gbc.writeMem(0xff42, { 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xab9);
        EXPECT(gbc.pc(), 0xa9a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9a4), 0xf2);
        EXPECT(gbc.readMem(0xff42), 0x50);
        // F2 03BE
        gbc.setState(0x1ce8, 0xf397, 0x8fb0, 0x90aa, 0xf7f7, 0x2d95, 0x0, 0x0);
        gbc.writeMem(0x1ce8, { 0xf2 });
        gbc.writeMem(0xffaa, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xf397);
        EXPECT(gbc.pc(), 0x1ce9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffaa), 0x24);
        // F2 03BF
        gbc.setState(0x716a, 0x602d, 0xb790, 0x88b9, 0x5125, 0xd63b, 0x1, 0x1);
        gbc.writeMem(0x716a, { 0xf2 });
        gbc.writeMem(0xffb9, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x602d);
        EXPECT(gbc.pc(), 0x716b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffb9), 0xff);
        // F2 03C0
        gbc.setState(0x2361, 0xf6fe, 0x5f40, 0xcc26, 0xa87e, 0x93c7, 0x1, 0x1);
        gbc.writeMem(0x2361, { 0xf2 });
        gbc.writeMem(0xff26, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xf6fe);
        EXPECT(gbc.pc(), 0x2362);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff26), 0x57);
        // F2 03C1
        gbc.setState(0xbceb, 0xd732, 0x8910, 0x445c, 0x7ee3, 0x6704, 0x0, 0x1);
        gbc.writeMem(0xbceb, { 0xf2 });
        gbc.writeMem(0xff5c, { 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xd732);
        EXPECT(gbc.pc(), 0xbcec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbceb), 0xf2);
        EXPECT(gbc.readMem(0xff5c), 0xc3);
        // F2 03C2
        gbc.setState(0x27e2, 0x8381, 0xe240, 0xc5b, 0x4aa5, 0xe971, 0x1, 0x0);
        gbc.writeMem(0x27e2, { 0xf2 });
        gbc.writeMem(0xff5b, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x8381);
        EXPECT(gbc.pc(), 0x27e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff5b), 0xff);
        // F2 03C3
        gbc.setState(0xe287, 0xa3b5, 0xdd50, 0x617, 0x741d, 0x3d6f, 0x1, 0x1);
        gbc.writeMem(0xe287, { 0xf2 });
        gbc.writeMem(0xff17, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xa3b5);
        EXPECT(gbc.pc(), 0xe288);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe287), 0xf2);
        EXPECT(gbc.readMem(0xff17), 0x9);
        // F2 03C4
        gbc.setState(0x6af1, 0x2f32, 0xd0b0, 0xa387, 0xe423, 0x9c89, 0x0, 0x0);
        gbc.writeMem(0x6af1, { 0xf2 });
        gbc.writeMem(0xff87, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x2f32);
        EXPECT(gbc.pc(), 0x6af2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff87), 0xb1);
        // F2 03C5
        gbc.setState(0xd24d, 0xd3a7, 0xdca0, 0xdafc, 0x19f6, 0xd403, 0x0, 0x1);
        gbc.writeMem(0xd24d, { 0xf2 });
        gbc.writeMem(0xfffc, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xd3a7);
        EXPECT(gbc.pc(), 0xd24e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd24d), 0xf2);
        EXPECT(gbc.readMem(0xfffc), 0x8b);
        // F2 03C6
        gbc.setState(0x4142, 0xd1f2, 0xfd00, 0xd088, 0xa71, 0xf977, 0x0, 0x1);
        gbc.writeMem(0x4142, { 0xf2 });
        gbc.writeMem(0xff88, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xd1f2);
        EXPECT(gbc.pc(), 0x4143);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff88), 0x49);
        // F2 03C8
        gbc.setState(0x6439, 0x2a98, 0x2010, 0x868c, 0xd5aa, 0xd9a9, 0x0, 0x1);
        gbc.writeMem(0x6439, { 0xf2 });
        gbc.writeMem(0xff8c, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x2a98);
        EXPECT(gbc.pc(), 0x643a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff8c), 0x44);
        // F2 03C9
        gbc.setState(0x90c3, 0x55fb, 0x6800, 0x8533, 0xa1e5, 0x1966, 0x1, 0x1);
        gbc.writeMem(0x90c3, { 0xf2 });
        gbc.writeMem(0xff33, { 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x55fb);
        EXPECT(gbc.pc(), 0x90c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90c3), 0xf2);
        EXPECT(gbc.readMem(0xff33), 0x28);
        // F2 03CA
        gbc.setState(0x328a, 0x1e19, 0xd8f0, 0xcd9b, 0x898b, 0xa49, 0x1, 0x1);
        gbc.writeMem(0x328a, { 0xf2 });
        gbc.writeMem(0xff9b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x1e19);
        EXPECT(gbc.pc(), 0x328b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff9b), 0xfb);
        // F2 03CB
        gbc.setState(0xbf34, 0xc87f, 0x9ec0, 0x9257, 0x2125, 0x947d, 0x0, 0x0);
        gbc.writeMem(0xbf34, { 0xf2 });
        gbc.writeMem(0xff57, { 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xc87f);
        EXPECT(gbc.pc(), 0xbf35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf34), 0xf2);
        EXPECT(gbc.readMem(0xff57), 0xf1);
        // F2 03CC
        gbc.setState(0x83dd, 0x6941, 0x33c0, 0x11aa, 0x20de, 0x7210, 0x1, 0x0);
        gbc.writeMem(0x83dd, { 0xf2 });
        gbc.writeMem(0xffaa, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x6941);
        EXPECT(gbc.pc(), 0x83de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83dd), 0xf2);
        EXPECT(gbc.readMem(0xffaa), 0x24);
        // F2 03CD
        gbc.setState(0xcef, 0x64d6, 0x40d0, 0xc81a, 0x8d62, 0x1fda, 0x1, 0x1);
        gbc.writeMem(0xcef, { 0xf2 });
        gbc.writeMem(0xff1a, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x64d6);
        EXPECT(gbc.pc(), 0xcf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff1a), 0x76);
        // F2 03CF
        gbc.setState(0xed13, 0xf63e, 0x8470, 0x65a4, 0x5e8a, 0xb9d5, 0x0, 0x1);
        gbc.writeMem(0xed13, { 0xf2 });
        gbc.writeMem(0xffa4, { 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xf63e);
        EXPECT(gbc.pc(), 0xed14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed13), 0xf2);
        EXPECT(gbc.readMem(0xffa4), 0xb8);
        // F2 03D0
        gbc.setState(0x27dd, 0x26cb, 0x4190, 0xae90, 0x7175, 0x1c99, 0x0, 0x0);
        gbc.writeMem(0x27dd, { 0xf2 });
        gbc.writeMem(0xff90, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x26cb);
        EXPECT(gbc.pc(), 0x27de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff90), 0x2a);
        // F2 03D1
        gbc.setState(0xdf7a, 0x68e0, 0x49b0, 0xf167, 0xf249, 0xf450, 0x0, 0x1);
        gbc.writeMem(0xdf7a, { 0xf2 });
        gbc.writeMem(0xff67, { 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x68e0);
        EXPECT(gbc.pc(), 0xdf7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf7a), 0xf2);
        EXPECT(gbc.readMem(0xff67), 0x27);
        // F2 03D2
        gbc.setState(0x5254, 0x368d, 0xc810, 0x8584, 0x6241, 0xba6e, 0x1, 0x1);
        gbc.writeMem(0x5254, { 0xf2 });
        gbc.writeMem(0xff84, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x368d);
        EXPECT(gbc.pc(), 0x5255);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff84), 0xb7);
        // F2 03D3
        gbc.setState(0x4add, 0xf21a, 0x6540, 0x67b9, 0x759f, 0xf5ff, 0x0, 0x1);
        gbc.writeMem(0x4add, { 0xf2 });
        gbc.writeMem(0xffb9, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xf21a);
        EXPECT(gbc.pc(), 0x4ade);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xffb9), 0xff);
        // F2 03D4
        gbc.setState(0x2387, 0xaebc, 0xec20, 0x7ffe, 0x40f2, 0xdb51, 0x1, 0x0);
        gbc.writeMem(0x2387, { 0xf2 });
        gbc.writeMem(0xfffe, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xaebc);
        EXPECT(gbc.pc(), 0x2388);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfffe), 0x1b);
        // F2 03D5
        gbc.setState(0x5332, 0x25ac, 0x2630, 0x5b41, 0xf250, 0x3f88, 0x1, 0x0);
        gbc.writeMem(0x5332, { 0xf2 });
        gbc.writeMem(0xff41, { 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x25ac);
        EXPECT(gbc.pc(), 0x5333);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff41), 0x4);
        // F2 03D6
        gbc.setState(0xb8bc, 0xaea6, 0x92c0, 0xfd3b, 0xed74, 0x2f3d, 0x1, 0x1);
        gbc.writeMem(0xb8bc, { 0xf2 });
        gbc.writeMem(0xff3b, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xaea6);
        EXPECT(gbc.pc(), 0xb8bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8bc), 0xf2);
        EXPECT(gbc.readMem(0xff3b), 0xb2);
        // F2 03D7
        gbc.setState(0xc074, 0x688f, 0x1520, 0xc1cf, 0xb446, 0xa4c5, 0x1, 0x0);
        gbc.writeMem(0xc074, { 0xf2 });
        gbc.writeMem(0xffcf, { 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x688f);
        EXPECT(gbc.pc(), 0xc075);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc074), 0xf2);
        EXPECT(gbc.readMem(0xffcf), 0x8a);
        // F2 03D8
        gbc.setState(0xd592, 0xb086, 0xd460, 0xb93d, 0xedc0, 0x1978, 0x1, 0x1);
        gbc.writeMem(0xd592, { 0xf2 });
        gbc.writeMem(0xff3d, { 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xb086);
        EXPECT(gbc.pc(), 0xd593);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd592), 0xf2);
        EXPECT(gbc.readMem(0xff3d), 0xcb);
        // F2 03D9
        gbc.setState(0xbddd, 0xca32, 0xd8e0, 0x14a9, 0xa52c, 0xe360, 0x1, 0x0);
        gbc.writeMem(0xbddd, { 0xf2 });
        gbc.writeMem(0xffa9, { 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xca32);
        EXPECT(gbc.pc(), 0xbdde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbddd), 0xf2);
        EXPECT(gbc.readMem(0xffa9), 0x61);
        // F2 03DA
        gbc.setState(0x7eea, 0xb90d, 0x90e0, 0xc425, 0x4e9e, 0xeb02, 0x1, 0x1);
        gbc.writeMem(0x7eea, { 0xf2 });
        gbc.writeMem(0xff25, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xb90d);
        EXPECT(gbc.pc(), 0x7eeb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff25), 0xa9);
        // F2 03DB
        gbc.setState(0xadbf, 0x3399, 0xc1c0, 0x6f57, 0xfe53, 0x8bf5, 0x1, 0x0);
        gbc.writeMem(0xadbf, { 0xf2 });
        gbc.writeMem(0xff57, { 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x3399);
        EXPECT(gbc.pc(), 0xadc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadbf), 0xf2);
        EXPECT(gbc.readMem(0xff57), 0xf1);
        // F2 03DC
        gbc.setState(0x98f0, 0x8e99, 0x58f0, 0x35e5, 0x8fd, 0xb877, 0x0, 0x0);
        gbc.writeMem(0x98f0, { 0xf2 });
        gbc.writeMem(0xffe5, { 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x8e99);
        EXPECT(gbc.pc(), 0x98f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98f0), 0xf2);
        EXPECT(gbc.readMem(0xffe5), 0x8c);
        // F2 03DD
        gbc.setState(0xec88, 0x6c90, 0x24d0, 0x7504, 0xf796, 0x2740, 0x0, 0x0);
        gbc.writeMem(0xec88, { 0xf2 });
        gbc.writeMem(0xff04, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x6c90);
        EXPECT(gbc.pc(), 0xec89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec88), 0xf2);
        EXPECT(gbc.readMem(0xff04), 0x59);
        // F2 03DE
        gbc.setState(0xd75b, 0x7497, 0x9f00, 0x431e, 0xcf54, 0xe6c7, 0x1, 0x1);
        gbc.writeMem(0xd75b, { 0xf2 });
        gbc.writeMem(0xff1e, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x7497);
        EXPECT(gbc.pc(), 0xd75c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd75b), 0xf2);
        EXPECT(gbc.readMem(0xff1e), 0x73);
        // F2 03DF
        gbc.setState(0x113c, 0x1b10, 0xc750, 0x4030, 0xc69c, 0x6e6d, 0x1, 0x1);
        gbc.writeMem(0x113c, { 0xf2 });
        gbc.writeMem(0xff30, { 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x1b10);
        EXPECT(gbc.pc(), 0x113d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff30), 0xab);
        // F2 03E1
        gbc.setState(0xdd4, 0x761a, 0xb010, 0x4812, 0x96ff, 0x1f8, 0x1, 0x0);
        gbc.writeMem(0xdd4, { 0xf2 });
        gbc.writeMem(0xff12, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x761a);
        EXPECT(gbc.pc(), 0xdd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff12), 0x52);
        // F2 03E3
        gbc.setState(0xda6f, 0x20ed, 0x1c30, 0xb664, 0xef0a, 0xbd4e, 0x1, 0x1);
        gbc.writeMem(0xda6f, { 0xf2 });
        gbc.writeMem(0xff64, { 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x20ed);
        EXPECT(gbc.pc(), 0xda70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda6f), 0xf2);
        EXPECT(gbc.readMem(0xff64), 0x87);
        // F2 03E4
        gbc.setState(0xd412, 0x85d2, 0xe3a0, 0xaaf5, 0x82e2, 0xdda2, 0x1, 0x1);
        gbc.writeMem(0xd412, { 0xf2 });
        gbc.writeMem(0xfff5, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x85d2);
        EXPECT(gbc.pc(), 0xd413);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd412), 0xf2);
        EXPECT(gbc.readMem(0xfff5), 0x37);
        // F2 03E5
        gbc.setState(0xa5ec, 0x6d86, 0x1950, 0x63ea, 0x1403, 0xa97e, 0x1, 0x1);
        gbc.writeMem(0xa5ec, { 0xf2 });
        gbc.writeMem(0xffea, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x6d86);
        EXPECT(gbc.pc(), 0xa5ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5ec), 0xf2);
        EXPECT(gbc.readMem(0xffea), 0x9f);
        // F2 03E6
        gbc.setState(0xb427, 0x86a, 0x68d0, 0x7a06, 0x84db, 0xf095, 0x1, 0x0);
        gbc.writeMem(0xb427, { 0xf2 });
        gbc.writeMem(0xff06, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x86a);
        EXPECT(gbc.pc(), 0xb428);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb427), 0xf2);
        EXPECT(gbc.readMem(0xff06), 0xf4);
        // F2 03E7
        gbc.setState(0xe1e3, 0x8f53, 0xc570, 0xd8be, 0x6c0f, 0xa57a, 0x1, 0x0);
        gbc.writeMem(0xe1e3, { 0xf2 });
        gbc.writeMem(0xffbe, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x8f53);
        EXPECT(gbc.pc(), 0xe1e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1e3), 0xf2);
        EXPECT(gbc.readMem(0xffbe), 0xdb);
    }
}
#endif
