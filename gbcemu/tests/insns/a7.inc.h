    TEST(gbcemu, opcode_a7) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // A7 0000
        gbc.setState(0x1a7d, 0x96a9, 0x10, 0x2fe0, 0x389c, 0x75fc, 0x1, 0x1);
        gbc.writeMem(0x1a7d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x96a9);
        EXPECT(gbc.pc(), 0x1a7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0001
        gbc.setState(0x67ef, 0x741c, 0x8320, 0x18ee, 0xdd9f, 0x9d73, 0x0, 0x0);
        gbc.writeMem(0x67ef, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x741c);
        EXPECT(gbc.pc(), 0x67f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0002
        gbc.setState(0x1d7b, 0xad6d, 0xbe90, 0x9f66, 0x1a15, 0x79e9, 0x0, 0x1);
        gbc.writeMem(0x1d7b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xad6d);
        EXPECT(gbc.pc(), 0x1d7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0003
        gbc.setState(0xbc8, 0xc4cb, 0x4090, 0x5fad, 0x5fca, 0x3267, 0x0, 0x1);
        gbc.writeMem(0xbc8, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xc4cb);
        EXPECT(gbc.pc(), 0xbc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0004
        gbc.setState(0x3260, 0xf211, 0x41c0, 0xf6a3, 0x3444, 0xee5b, 0x0, 0x1);
        gbc.writeMem(0x3260, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xf211);
        EXPECT(gbc.pc(), 0x3261);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0005
        gbc.setState(0xd08, 0xce4f, 0x4eb0, 0xd06c, 0xed4, 0xc3bf, 0x1, 0x0);
        gbc.writeMem(0xd08, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xce4f);
        EXPECT(gbc.pc(), 0xd09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0006
        gbc.setState(0x104e, 0xee6e, 0x92d0, 0x8043, 0x9d8f, 0xfe20, 0x1, 0x1);
        gbc.writeMem(0x104e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xee6e);
        EXPECT(gbc.pc(), 0x104f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0007
        gbc.setState(0x18d1, 0x60ac, 0xf5a0, 0x1d43, 0xab8a, 0x9dcb, 0x0, 0x0);
        gbc.writeMem(0x18d1, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x60ac);
        EXPECT(gbc.pc(), 0x18d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0008
        gbc.setState(0x7116, 0x8634, 0x3670, 0xb3e5, 0x889, 0xdee, 0x1, 0x0);
        gbc.writeMem(0x7116, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x8634);
        EXPECT(gbc.pc(), 0x7117);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 000A
        gbc.setState(0x1bd1, 0x3eac, 0xeec0, 0x7e7e, 0x55c1, 0xbc93, 0x1, 0x0);
        gbc.writeMem(0x1bd1, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x3eac);
        EXPECT(gbc.pc(), 0x1bd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 000B
        gbc.setState(0x7c8e, 0x6e35, 0xbbd0, 0xeabd, 0xf390, 0x366a, 0x1, 0x1);
        gbc.writeMem(0x7c8e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x6e35);
        EXPECT(gbc.pc(), 0x7c8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 000C
        gbc.setState(0x1050, 0x2a91, 0xafd0, 0x2b04, 0xd5db, 0x3496, 0x1, 0x1);
        gbc.writeMem(0x1050, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x2a91);
        EXPECT(gbc.pc(), 0x1051);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 000E
        gbc.setState(0xdcf0, 0x3c86, 0x61e0, 0x3b42, 0x418c, 0x4f26, 0x1, 0x1);
        gbc.writeMem(0xdcf0, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x3c86);
        EXPECT(gbc.pc(), 0xdcf1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcf0), 0xa7);
        // A7 000F
        gbc.setState(0x1178, 0x1dee, 0xb0d0, 0x7f50, 0x566b, 0xd03d, 0x1, 0x1);
        gbc.writeMem(0x1178, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x1dee);
        EXPECT(gbc.pc(), 0x1179);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0010
        gbc.setState(0xdce1, 0x8a2d, 0x9920, 0x6cfd, 0x96ef, 0x1452, 0x0, 0x0);
        gbc.writeMem(0xdce1, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x8a2d);
        EXPECT(gbc.pc(), 0xdce2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdce1), 0xa7);
        // A7 0011
        gbc.setState(0x29cc, 0xf008, 0xe240, 0x452a, 0xd3c5, 0x67ee, 0x1, 0x0);
        gbc.writeMem(0x29cc, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xf008);
        EXPECT(gbc.pc(), 0x29cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0012
        gbc.setState(0x6623, 0x23f7, 0x7530, 0x656a, 0xd748, 0x23de, 0x1, 0x1);
        gbc.writeMem(0x6623, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x23f7);
        EXPECT(gbc.pc(), 0x6624);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0013
        gbc.setState(0x47c5, 0xda97, 0x9fa0, 0x1665, 0x5a9f, 0xc80d, 0x1, 0x1);
        gbc.writeMem(0x47c5, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xda97);
        EXPECT(gbc.pc(), 0x47c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0014
        gbc.setState(0x1c84, 0xa447, 0x2b50, 0x1a8b, 0x4003, 0xc07b, 0x0, 0x1);
        gbc.writeMem(0x1c84, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xa447);
        EXPECT(gbc.pc(), 0x1c85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0015
        gbc.setState(0x4d7e, 0x75a9, 0xa530, 0x3eda, 0x1456, 0x6215, 0x1, 0x1);
        gbc.writeMem(0x4d7e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x75a9);
        EXPECT(gbc.pc(), 0x4d7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0016
        gbc.setState(0xe6a, 0xa362, 0xe2e0, 0xeeae, 0xd7c, 0xedf3, 0x0, 0x0);
        gbc.writeMem(0xe6a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xa362);
        EXPECT(gbc.pc(), 0xe6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0017
        gbc.setState(0x7eaa, 0x2598, 0x9fc0, 0xfb04, 0x7df3, 0x8ceb, 0x1, 0x1);
        gbc.writeMem(0x7eaa, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x2598);
        EXPECT(gbc.pc(), 0x7eab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0018
        gbc.setState(0xb57c, 0x3487, 0xb3e0, 0xfb32, 0x54ee, 0xbe4e, 0x1, 0x1);
        gbc.writeMem(0xb57c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x3487);
        EXPECT(gbc.pc(), 0xb57d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb57c), 0xa7);
        // A7 0019
        gbc.setState(0x15ce, 0x9c8f, 0xdc10, 0x2284, 0x1b88, 0x7b40, 0x0, 0x1);
        gbc.writeMem(0x15ce, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x9c8f);
        EXPECT(gbc.pc(), 0x15cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 001A
        gbc.setState(0xde70, 0x9473, 0xdee0, 0x362a, 0x107d, 0x2971, 0x1, 0x1);
        gbc.writeMem(0xde70, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x9473);
        EXPECT(gbc.pc(), 0xde71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde70), 0xa7);
        // A7 001B
        gbc.setState(0x7b4, 0xf316, 0x5c10, 0xfed0, 0x8f3e, 0x931f, 0x1, 0x0);
        gbc.writeMem(0x7b4, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xf316);
        EXPECT(gbc.pc(), 0x7b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 001C
        gbc.setState(0x4595, 0x1dfe, 0xdae0, 0x18cb, 0x4d9d, 0x8e38, 0x1, 0x1);
        gbc.writeMem(0x4595, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x1dfe);
        EXPECT(gbc.pc(), 0x4596);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 001D
        gbc.setState(0x971a, 0x41cd, 0x67b0, 0xacd1, 0x10bc, 0xf6d6, 0x0, 0x1);
        gbc.writeMem(0x971a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x41cd);
        EXPECT(gbc.pc(), 0x971b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x971a), 0xa7);
        // A7 001E
        gbc.setState(0x6a54, 0x8f3f, 0xe4a0, 0xe37c, 0xcfbc, 0x2c6e, 0x1, 0x0);
        gbc.writeMem(0x6a54, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x8f3f);
        EXPECT(gbc.pc(), 0x6a55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 001F
        gbc.setState(0x43b2, 0x8ba7, 0x9ca0, 0x356, 0xe556, 0xc436, 0x1, 0x1);
        gbc.writeMem(0x43b2, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x8ba7);
        EXPECT(gbc.pc(), 0x43b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0020
        gbc.setState(0xab5f, 0x6909, 0xe630, 0x7400, 0x6c29, 0x760c, 0x1, 0x1);
        gbc.writeMem(0xab5f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x6909);
        EXPECT(gbc.pc(), 0xab60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab5f), 0xa7);
        // A7 0021
        gbc.setState(0x24a1, 0x9fac, 0xf010, 0x9823, 0x5e10, 0x681a, 0x1, 0x0);
        gbc.writeMem(0x24a1, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x9fac);
        EXPECT(gbc.pc(), 0x24a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0022
        gbc.setState(0x309c, 0xbe54, 0x9ef0, 0x9c33, 0x28e3, 0xf2f6, 0x0, 0x0);
        gbc.writeMem(0x309c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xbe54);
        EXPECT(gbc.pc(), 0x309d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0023
        gbc.setState(0xbabc, 0xe458, 0x5020, 0x383b, 0x8869, 0xecdf, 0x1, 0x0);
        gbc.writeMem(0xbabc, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xe458);
        EXPECT(gbc.pc(), 0xbabd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbabc), 0xa7);
        // A7 0024
        gbc.setState(0x905e, 0x3834, 0xeaf0, 0x7140, 0xf07c, 0xcd19, 0x1, 0x1);
        gbc.writeMem(0x905e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x3834);
        EXPECT(gbc.pc(), 0x905f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x905e), 0xa7);
        // A7 0025
        gbc.setState(0xa5fe, 0xe271, 0x62a0, 0xe97c, 0xb7a3, 0x2e8d, 0x1, 0x0);
        gbc.writeMem(0xa5fe, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xe271);
        EXPECT(gbc.pc(), 0xa5ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5fe), 0xa7);
        // A7 0026
        gbc.setState(0x5f2c, 0x6295, 0x2580, 0x9780, 0xb893, 0x7749, 0x1, 0x0);
        gbc.writeMem(0x5f2c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x6295);
        EXPECT(gbc.pc(), 0x5f2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0027
        gbc.setState(0xc53, 0x595a, 0xcc40, 0x544b, 0x1361, 0xe6b5, 0x0, 0x1);
        gbc.writeMem(0xc53, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x595a);
        EXPECT(gbc.pc(), 0xc54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0028
        gbc.setState(0xe17, 0x33a6, 0xbef0, 0x3da6, 0x448, 0xdfd1, 0x0, 0x1);
        gbc.writeMem(0xe17, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x33a6);
        EXPECT(gbc.pc(), 0xe18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 002A
        gbc.setState(0xe7f8, 0xa435, 0x1da0, 0x96fa, 0x82d3, 0x70e, 0x0, 0x0);
        gbc.writeMem(0xe7f8, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xa435);
        EXPECT(gbc.pc(), 0xe7f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7f8), 0xa7);
        // A7 002B
        gbc.setState(0x3b0d, 0xb97a, 0x57c0, 0x58be, 0x881, 0x18a2, 0x1, 0x1);
        gbc.writeMem(0x3b0d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xb97a);
        EXPECT(gbc.pc(), 0x3b0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 002C
        gbc.setState(0x3c73, 0xae1a, 0x6920, 0x62ae, 0xadee, 0xb1c4, 0x1, 0x1);
        gbc.writeMem(0x3c73, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xae1a);
        EXPECT(gbc.pc(), 0x3c74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 002D
        gbc.setState(0x54eb, 0xa97d, 0x8c0, 0xf848, 0x236e, 0xbb02, 0x1, 0x0);
        gbc.writeMem(0x54eb, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xa97d);
        EXPECT(gbc.pc(), 0x54ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 002E
        gbc.setState(0xb870, 0xa56f, 0x5fd0, 0x13e7, 0xbede, 0xfcd3, 0x1, 0x0);
        gbc.writeMem(0xb870, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xa56f);
        EXPECT(gbc.pc(), 0xb871);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb870), 0xa7);
        // A7 002F
        gbc.setState(0x696b, 0x2325, 0x6bd0, 0x1e4e, 0x4fbc, 0x15d2, 0x1, 0x1);
        gbc.writeMem(0x696b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x2325);
        EXPECT(gbc.pc(), 0x696c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0030
        gbc.setState(0x62d9, 0x6a21, 0x2b60, 0xa282, 0xe474, 0x29e7, 0x1, 0x1);
        gbc.writeMem(0x62d9, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x6a21);
        EXPECT(gbc.pc(), 0x62da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0031
        gbc.setState(0x7818, 0x1cb4, 0x7c0, 0xf524, 0xfc9f, 0x3913, 0x0, 0x1);
        gbc.writeMem(0x7818, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x1cb4);
        EXPECT(gbc.pc(), 0x7819);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0033
        gbc.setState(0xb35a, 0xef4f, 0x6e00, 0xc24a, 0x41b, 0x4a2a, 0x0, 0x1);
        gbc.writeMem(0xb35a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xef4f);
        EXPECT(gbc.pc(), 0xb35b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb35a), 0xa7);
        // A7 0034
        gbc.setState(0x59e5, 0xf9cc, 0x1eb0, 0xa88f, 0xfa33, 0xd715, 0x0, 0x1);
        gbc.writeMem(0x59e5, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xf9cc);
        EXPECT(gbc.pc(), 0x59e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0036
        gbc.setState(0x28f6, 0xdfbe, 0xc6c0, 0xe568, 0x69cc, 0xd291, 0x0, 0x1);
        gbc.writeMem(0x28f6, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xdfbe);
        EXPECT(gbc.pc(), 0x28f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0037
        gbc.setState(0x790d, 0xb6d0, 0x6bd0, 0xaf3c, 0x5756, 0xbe95, 0x0, 0x1);
        gbc.writeMem(0x790d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xb6d0);
        EXPECT(gbc.pc(), 0x790e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0038
        gbc.setState(0x28ef, 0x7884, 0x1790, 0x3a9, 0xfb9d, 0xcf25, 0x0, 0x0);
        gbc.writeMem(0x28ef, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x7884);
        EXPECT(gbc.pc(), 0x28f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0039
        gbc.setState(0x3ad1, 0x5796, 0xbb00, 0x6490, 0xfd9d, 0x7ce4, 0x1, 0x1);
        gbc.writeMem(0x3ad1, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x5796);
        EXPECT(gbc.pc(), 0x3ad2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 003A
        gbc.setState(0xc932, 0x9a34, 0x8440, 0x67a1, 0x3c64, 0x759c, 0x1, 0x1);
        gbc.writeMem(0xc932, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x9a34);
        EXPECT(gbc.pc(), 0xc933);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc932), 0xa7);
        // A7 003B
        gbc.setState(0xa88a, 0xad82, 0xf180, 0xb84a, 0xdc18, 0x3c0, 0x0, 0x1);
        gbc.writeMem(0xa88a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xad82);
        EXPECT(gbc.pc(), 0xa88b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa88a), 0xa7);
        // A7 003C
        gbc.setState(0x2c53, 0xe718, 0x9d20, 0x9fec, 0xfe06, 0xe22c, 0x0, 0x1);
        gbc.writeMem(0x2c53, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xe718);
        EXPECT(gbc.pc(), 0x2c54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 003D
        gbc.setState(0xb476, 0x37c7, 0x5f90, 0xc100, 0x7099, 0x8c7a, 0x1, 0x0);
        gbc.writeMem(0xb476, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x37c7);
        EXPECT(gbc.pc(), 0xb477);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb476), 0xa7);
        // A7 003E
        gbc.setState(0x118a, 0x3524, 0x40d0, 0x3fb1, 0x7b71, 0xb56c, 0x1, 0x0);
        gbc.writeMem(0x118a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x3524);
        EXPECT(gbc.pc(), 0x118b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0040
        gbc.setState(0x7460, 0x4ec0, 0x6950, 0x8650, 0xb514, 0x5934, 0x0, 0x1);
        gbc.writeMem(0x7460, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x4ec0);
        EXPECT(gbc.pc(), 0x7461);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0041
        gbc.setState(0x9f36, 0x75e4, 0x2570, 0xd43, 0xc3a6, 0xea7c, 0x0, 0x0);
        gbc.writeMem(0x9f36, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x75e4);
        EXPECT(gbc.pc(), 0x9f37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f36), 0xa7);
        // A7 0042
        gbc.setState(0xa0d8, 0x32de, 0x45e0, 0x8bc3, 0xdf0a, 0x2c05, 0x0, 0x0);
        gbc.writeMem(0xa0d8, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x32de);
        EXPECT(gbc.pc(), 0xa0d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0d8), 0xa7);
        // A7 0043
        gbc.setState(0x334e, 0xa8e1, 0xbd50, 0xde38, 0x11ff, 0x4ed5, 0x0, 0x1);
        gbc.writeMem(0x334e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xa8e1);
        EXPECT(gbc.pc(), 0x334f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0044
        gbc.setState(0x8a0f, 0x3e84, 0x12c0, 0xb527, 0xb975, 0x3712, 0x0, 0x0);
        gbc.writeMem(0x8a0f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x3e84);
        EXPECT(gbc.pc(), 0x8a10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a0f), 0xa7);
        // A7 0046
        gbc.setState(0x1317, 0xd6a8, 0xfe40, 0x207f, 0x715b, 0x9452, 0x0, 0x1);
        gbc.writeMem(0x1317, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xd6a8);
        EXPECT(gbc.pc(), 0x1318);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0047
        gbc.setState(0x1657, 0x583e, 0x9680, 0x2c1b, 0xa6c3, 0x7260, 0x1, 0x0);
        gbc.writeMem(0x1657, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x583e);
        EXPECT(gbc.pc(), 0x1658);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0048
        gbc.setState(0x6d3c, 0xbd04, 0xe960, 0xb13d, 0x8269, 0xd962, 0x1, 0x0);
        gbc.writeMem(0x6d3c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xbd04);
        EXPECT(gbc.pc(), 0x6d3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0049
        gbc.setState(0xd0e3, 0x9ad2, 0xe2a0, 0x54f2, 0x5bba, 0x3394, 0x1, 0x0);
        gbc.writeMem(0xd0e3, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x9ad2);
        EXPECT(gbc.pc(), 0xd0e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0e3), 0xa7);
        // A7 004A
        gbc.setState(0x7df8, 0x3a92, 0xc840, 0xa31, 0xc417, 0x7052, 0x1, 0x1);
        gbc.writeMem(0x7df8, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x3a92);
        EXPECT(gbc.pc(), 0x7df9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 004B
        gbc.setState(0xbf28, 0x8006, 0xe80, 0xbdf4, 0x9813, 0x2c29, 0x0, 0x0);
        gbc.writeMem(0xbf28, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x8006);
        EXPECT(gbc.pc(), 0xbf29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf28), 0xa7);
        // A7 004C
        gbc.setState(0xa0e, 0xb523, 0xbc90, 0x62e0, 0x696d, 0x9f8, 0x1, 0x1);
        gbc.writeMem(0xa0e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xb523);
        EXPECT(gbc.pc(), 0xa0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 004D
        gbc.setState(0x6bfe, 0x3319, 0xa6e0, 0x7ed9, 0x3fbd, 0x229a, 0x0, 0x1);
        gbc.writeMem(0x6bfe, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x3319);
        EXPECT(gbc.pc(), 0x6bff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 004E
        gbc.setState(0xea9a, 0xf30c, 0x98d0, 0xf6e4, 0x93a8, 0xb184, 0x0, 0x0);
        gbc.writeMem(0xea9a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xf30c);
        EXPECT(gbc.pc(), 0xea9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea9a), 0xa7);
        // A7 004F
        gbc.setState(0x1d1, 0x620d, 0x24e0, 0x5532, 0xe62c, 0x2f47, 0x1, 0x0);
        gbc.writeMem(0x1d1, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x620d);
        EXPECT(gbc.pc(), 0x1d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0050
        gbc.setState(0x1310, 0xd25, 0x5ec0, 0xdc87, 0x5f64, 0x9724, 0x0, 0x1);
        gbc.writeMem(0x1310, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xd25);
        EXPECT(gbc.pc(), 0x1311);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0051
        gbc.setState(0x77c4, 0xbb67, 0x7930, 0xfcbb, 0x4474, 0xb156, 0x0, 0x0);
        gbc.writeMem(0x77c4, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xbb67);
        EXPECT(gbc.pc(), 0x77c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0052
        gbc.setState(0x8570, 0x43bf, 0x3d50, 0x7515, 0xc33b, 0x3c53, 0x0, 0x0);
        gbc.writeMem(0x8570, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x43bf);
        EXPECT(gbc.pc(), 0x8571);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8570), 0xa7);
        // A7 0053
        gbc.setState(0x3577, 0x5f3f, 0x5cc0, 0x501a, 0x8b89, 0xbb08, 0x1, 0x1);
        gbc.writeMem(0x3577, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x5f3f);
        EXPECT(gbc.pc(), 0x3578);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0055
        gbc.setState(0x612, 0xfa63, 0x300, 0x405c, 0x7f40, 0x15f5, 0x0, 0x1);
        gbc.writeMem(0x612, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xfa63);
        EXPECT(gbc.pc(), 0x613);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0056
        gbc.setState(0xc80, 0x9172, 0x77f0, 0x1079, 0xbe62, 0xc71c, 0x1, 0x0);
        gbc.writeMem(0xc80, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x9172);
        EXPECT(gbc.pc(), 0xc81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0057
        gbc.setState(0x501, 0x5e5a, 0x4bb0, 0xb92d, 0xbc80, 0x7e30, 0x1, 0x1);
        gbc.writeMem(0x501, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x5e5a);
        EXPECT(gbc.pc(), 0x502);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0058
        gbc.setState(0x82c2, 0x1260, 0x49b0, 0x31e4, 0xb72e, 0x2206, 0x1, 0x0);
        gbc.writeMem(0x82c2, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x1260);
        EXPECT(gbc.pc(), 0x82c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82c2), 0xa7);
        // A7 0059
        gbc.setState(0x1afa, 0x3f80, 0x7c20, 0xa1ab, 0x7b16, 0x7f68, 0x0, 0x1);
        gbc.writeMem(0x1afa, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x3f80);
        EXPECT(gbc.pc(), 0x1afb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 005A
        gbc.setState(0xe28e, 0x27c, 0xc070, 0x2bb4, 0xa253, 0x6407, 0x1, 0x1);
        gbc.writeMem(0xe28e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x27c);
        EXPECT(gbc.pc(), 0xe28f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe28e), 0xa7);
        // A7 005B
        gbc.setState(0x66f9, 0x7370, 0xcee0, 0x3521, 0xf451, 0x821d, 0x0, 0x1);
        gbc.writeMem(0x66f9, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x7370);
        EXPECT(gbc.pc(), 0x66fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 005C
        gbc.setState(0xe170, 0xa0cb, 0x70a0, 0xaf98, 0x573c, 0x469e, 0x0, 0x1);
        gbc.writeMem(0xe170, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xa0cb);
        EXPECT(gbc.pc(), 0xe171);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe170), 0xa7);
        // A7 005D
        gbc.setState(0x6330, 0xa785, 0xf680, 0x9997, 0x4561, 0xe8c8, 0x1, 0x1);
        gbc.writeMem(0x6330, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xa785);
        EXPECT(gbc.pc(), 0x6331);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 005E
        gbc.setState(0xa4f5, 0x5fc3, 0x4ac0, 0x3ad3, 0xeaa7, 0x48d0, 0x0, 0x1);
        gbc.writeMem(0xa4f5, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x5fc3);
        EXPECT(gbc.pc(), 0xa4f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4f5), 0xa7);
        // A7 005F
        gbc.setState(0x9162, 0x3411, 0xcbf0, 0x7f23, 0xfa76, 0x6238, 0x1, 0x0);
        gbc.writeMem(0x9162, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x3411);
        EXPECT(gbc.pc(), 0x9163);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9162), 0xa7);
        // A7 0060
        gbc.setState(0xcde5, 0x6677, 0xc70, 0x84b9, 0x129a, 0xa564, 0x0, 0x1);
        gbc.writeMem(0xcde5, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x6677);
        EXPECT(gbc.pc(), 0xcde6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcde5), 0xa7);
        // A7 0061
        gbc.setState(0xb11f, 0x3283, 0xc060, 0x5c5f, 0x5916, 0x86f0, 0x1, 0x1);
        gbc.writeMem(0xb11f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x3283);
        EXPECT(gbc.pc(), 0xb120);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb11f), 0xa7);
        // A7 0062
        gbc.setState(0x5bd0, 0xd47, 0xd080, 0xeb2a, 0xff1f, 0x57a7, 0x0, 0x1);
        gbc.writeMem(0x5bd0, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xd47);
        EXPECT(gbc.pc(), 0x5bd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0063
        gbc.setState(0x8131, 0x3140, 0xc3d0, 0x3b50, 0xfb64, 0x8f62, 0x1, 0x0);
        gbc.writeMem(0x8131, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x3140);
        EXPECT(gbc.pc(), 0x8132);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8131), 0xa7);
        // A7 0064
        gbc.setState(0x1df6, 0x71f7, 0xb080, 0x9906, 0xfd38, 0xa143, 0x1, 0x1);
        gbc.writeMem(0x1df6, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x71f7);
        EXPECT(gbc.pc(), 0x1df7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0066
        gbc.setState(0xc57a, 0x550b, 0xe480, 0x3d29, 0xbc47, 0xc8f9, 0x1, 0x0);
        gbc.writeMem(0xc57a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x550b);
        EXPECT(gbc.pc(), 0xc57b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc57a), 0xa7);
        // A7 0067
        gbc.setState(0xc528, 0x950b, 0x920, 0xbbd3, 0xee67, 0x745f, 0x1, 0x1);
        gbc.writeMem(0xc528, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x950b);
        EXPECT(gbc.pc(), 0xc529);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc528), 0xa7);
        // A7 0068
        gbc.setState(0xa81f, 0x9f46, 0xa100, 0xa87c, 0x27a2, 0xd317, 0x0, 0x1);
        gbc.writeMem(0xa81f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x9f46);
        EXPECT(gbc.pc(), 0xa820);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa81f), 0xa7);
        // A7 0069
        gbc.setState(0x3610, 0xa700, 0xd010, 0xae1e, 0x43d4, 0x88c7, 0x0, 0x1);
        gbc.writeMem(0x3610, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xa700);
        EXPECT(gbc.pc(), 0x3611);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 006A
        gbc.setState(0xd967, 0xd91c, 0xfcb0, 0xcb55, 0x156, 0xe7b3, 0x0, 0x1);
        gbc.writeMem(0xd967, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xd91c);
        EXPECT(gbc.pc(), 0xd968);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd967), 0xa7);
        // A7 006B
        gbc.setState(0x39d4, 0xe8a1, 0xee20, 0x61fa, 0x208b, 0xe3be, 0x1, 0x0);
        gbc.writeMem(0x39d4, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xe8a1);
        EXPECT(gbc.pc(), 0x39d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 006D
        gbc.setState(0x4bb7, 0x8281, 0xb370, 0x127, 0x8462, 0xc9a5, 0x1, 0x1);
        gbc.writeMem(0x4bb7, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x8281);
        EXPECT(gbc.pc(), 0x4bb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 006E
        gbc.setState(0x69ab, 0xb0df, 0x5260, 0x8e1c, 0x3f69, 0x73aa, 0x0, 0x1);
        gbc.writeMem(0x69ab, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xb0df);
        EXPECT(gbc.pc(), 0x69ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 006F
        gbc.setState(0xecdc, 0x7821, 0x46d0, 0xb4f5, 0x7cce, 0xa0ec, 0x0, 0x1);
        gbc.writeMem(0xecdc, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x7821);
        EXPECT(gbc.pc(), 0xecdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecdc), 0xa7);
        // A7 0070
        gbc.setState(0xc5d6, 0x4452, 0x80e0, 0x2b66, 0xcd53, 0x3324, 0x1, 0x0);
        gbc.writeMem(0xc5d6, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x4452);
        EXPECT(gbc.pc(), 0xc5d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5d6), 0xa7);
        // A7 0071
        gbc.setState(0x68b5, 0x850c, 0x4120, 0xec29, 0x4767, 0xead8, 0x0, 0x0);
        gbc.writeMem(0x68b5, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x850c);
        EXPECT(gbc.pc(), 0x68b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0072
        gbc.setState(0x89cc, 0x1b4e, 0x80e0, 0xa1f0, 0x44cc, 0x311a, 0x1, 0x1);
        gbc.writeMem(0x89cc, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x1b4e);
        EXPECT(gbc.pc(), 0x89cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89cc), 0xa7);
        // A7 0074
        gbc.setState(0xa006, 0x85fd, 0xea30, 0x98a4, 0xef34, 0x52bf, 0x0, 0x1);
        gbc.writeMem(0xa006, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x85fd);
        EXPECT(gbc.pc(), 0xa007);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa006), 0xa7);
        // A7 0075
        gbc.setState(0x8fc7, 0xccca, 0x9d50, 0x2248, 0x4ed2, 0x7240, 0x0, 0x0);
        gbc.writeMem(0x8fc7, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xccca);
        EXPECT(gbc.pc(), 0x8fc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fc7), 0xa7);
        // A7 0076
        gbc.setState(0xb032, 0xc8e5, 0x7530, 0x6ff8, 0x68c0, 0xbbd9, 0x1, 0x0);
        gbc.writeMem(0xb032, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xc8e5);
        EXPECT(gbc.pc(), 0xb033);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb032), 0xa7);
        // A7 0077
        gbc.setState(0x6161, 0xe65f, 0xbea0, 0xa72d, 0x7a6f, 0x28eb, 0x0, 0x1);
        gbc.writeMem(0x6161, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xe65f);
        EXPECT(gbc.pc(), 0x6162);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0078
        gbc.setState(0xaad6, 0x8daa, 0x92d0, 0x7b87, 0xb2cf, 0xe7e3, 0x0, 0x1);
        gbc.writeMem(0xaad6, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x8daa);
        EXPECT(gbc.pc(), 0xaad7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaad6), 0xa7);
        // A7 0079
        gbc.setState(0x1108, 0xbfe2, 0x2840, 0xdede, 0x567a, 0xa66a, 0x1, 0x0);
        gbc.writeMem(0x1108, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xbfe2);
        EXPECT(gbc.pc(), 0x1109);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 007A
        gbc.setState(0x8597, 0xce97, 0xa530, 0xcf61, 0xc78f, 0x5e2e, 0x0, 0x1);
        gbc.writeMem(0x8597, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xce97);
        EXPECT(gbc.pc(), 0x8598);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8597), 0xa7);
        // A7 007B
        gbc.setState(0x23ea, 0x7bb1, 0xdc20, 0x7d02, 0x19f5, 0xf468, 0x1, 0x0);
        gbc.writeMem(0x23ea, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x7bb1);
        EXPECT(gbc.pc(), 0x23eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 007C
        gbc.setState(0x9621, 0xe63d, 0x4160, 0xeb33, 0x1a46, 0x9c41, 0x0, 0x0);
        gbc.writeMem(0x9621, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xe63d);
        EXPECT(gbc.pc(), 0x9622);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9621), 0xa7);
        // A7 007D
        gbc.setState(0xcfc8, 0xf94b, 0xf180, 0x3fa1, 0xccd4, 0x7030, 0x0, 0x0);
        gbc.writeMem(0xcfc8, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xf94b);
        EXPECT(gbc.pc(), 0xcfc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfc8), 0xa7);
        // A7 007E
        gbc.setState(0x6576, 0x421b, 0x4b90, 0xe6d4, 0xd45c, 0xd2ba, 0x1, 0x0);
        gbc.writeMem(0x6576, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x421b);
        EXPECT(gbc.pc(), 0x6577);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 007F
        gbc.setState(0x578, 0xa996, 0xa150, 0x8263, 0x136b, 0xc7da, 0x0, 0x0);
        gbc.writeMem(0x578, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xa996);
        EXPECT(gbc.pc(), 0x579);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0080
        gbc.setState(0x8e40, 0x9a34, 0x9430, 0x2176, 0x57b, 0xa951, 0x0, 0x1);
        gbc.writeMem(0x8e40, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x9a34);
        EXPECT(gbc.pc(), 0x8e41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e40), 0xa7);
        // A7 0081
        gbc.setState(0xc59a, 0x2cf3, 0x9760, 0x309f, 0xdc1a, 0xc6d4, 0x1, 0x0);
        gbc.writeMem(0xc59a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x2cf3);
        EXPECT(gbc.pc(), 0xc59b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc59a), 0xa7);
        // A7 0082
        gbc.setState(0x1e07, 0xc610, 0x8790, 0xdbfb, 0x3e64, 0x5d12, 0x0, 0x1);
        gbc.writeMem(0x1e07, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xc610);
        EXPECT(gbc.pc(), 0x1e08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0083
        gbc.setState(0x2af, 0x5716, 0x820, 0xd4f4, 0x1f85, 0x2d1d, 0x1, 0x1);
        gbc.writeMem(0x2af, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x5716);
        EXPECT(gbc.pc(), 0x2b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0084
        gbc.setState(0x7e48, 0x3565, 0xeac0, 0x3c03, 0x7835, 0xe1f6, 0x1, 0x1);
        gbc.writeMem(0x7e48, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x3565);
        EXPECT(gbc.pc(), 0x7e49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0085
        gbc.setState(0xb449, 0xed97, 0xfd30, 0xf0e, 0x64f3, 0xafce, 0x1, 0x1);
        gbc.writeMem(0xb449, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xed97);
        EXPECT(gbc.pc(), 0xb44a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb449), 0xa7);
        // A7 0086
        gbc.setState(0xcf55, 0xcb64, 0x3c60, 0xe8e6, 0xdc65, 0x61e7, 0x0, 0x1);
        gbc.writeMem(0xcf55, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xcb64);
        EXPECT(gbc.pc(), 0xcf56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf55), 0xa7);
        // A7 0087
        gbc.setState(0xbb4e, 0xb72c, 0xa490, 0x9df4, 0x9ad5, 0x62a0, 0x0, 0x1);
        gbc.writeMem(0xbb4e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xb72c);
        EXPECT(gbc.pc(), 0xbb4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb4e), 0xa7);
        // A7 0088
        gbc.setState(0x9a85, 0x3284, 0xad10, 0xa658, 0xa602, 0x41a9, 0x0, 0x1);
        gbc.writeMem(0x9a85, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x3284);
        EXPECT(gbc.pc(), 0x9a86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a85), 0xa7);
        // A7 0089
        gbc.setState(0xbea6, 0x5eca, 0x1ed0, 0x6f41, 0xfff1, 0x9061, 0x1, 0x1);
        gbc.writeMem(0xbea6, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x5eca);
        EXPECT(gbc.pc(), 0xbea7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbea6), 0xa7);
        // A7 008A
        gbc.setState(0x30b6, 0x3cbf, 0x7a10, 0xb7c3, 0xd15d, 0x19a6, 0x1, 0x1);
        gbc.writeMem(0x30b6, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x3cbf);
        EXPECT(gbc.pc(), 0x30b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 008B
        gbc.setState(0x860a, 0x63bf, 0x8d40, 0x180, 0x9832, 0x31fd, 0x1, 0x1);
        gbc.writeMem(0x860a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x63bf);
        EXPECT(gbc.pc(), 0x860b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x860a), 0xa7);
        // A7 008C
        gbc.setState(0xd1c3, 0x1416, 0xfe50, 0xe3c1, 0xfe7f, 0x304a, 0x0, 0x0);
        gbc.writeMem(0xd1c3, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x1416);
        EXPECT(gbc.pc(), 0xd1c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1c3), 0xa7);
        // A7 008E
        gbc.setState(0x35f6, 0xa076, 0x8f00, 0x6d3b, 0xcd63, 0xa7a, 0x1, 0x1);
        gbc.writeMem(0x35f6, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xa076);
        EXPECT(gbc.pc(), 0x35f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 008F
        gbc.setState(0xde89, 0xe6ca, 0xa460, 0x2a57, 0x9bcc, 0x6bef, 0x1, 0x1);
        gbc.writeMem(0xde89, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xe6ca);
        EXPECT(gbc.pc(), 0xde8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde89), 0xa7);
        // A7 0090
        gbc.setState(0x4f57, 0x1587, 0x66a0, 0xda8e, 0xc33b, 0xb8e5, 0x0, 0x1);
        gbc.writeMem(0x4f57, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x1587);
        EXPECT(gbc.pc(), 0x4f58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0091
        gbc.setState(0x6f1e, 0xebc9, 0x1a80, 0xbfc3, 0x1741, 0x8f38, 0x0, 0x0);
        gbc.writeMem(0x6f1e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xebc9);
        EXPECT(gbc.pc(), 0x6f1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0092
        gbc.setState(0x76b0, 0xd68e, 0x25a0, 0xa3d7, 0x74ae, 0xcd9c, 0x1, 0x1);
        gbc.writeMem(0x76b0, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xd68e);
        EXPECT(gbc.pc(), 0x76b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0093
        gbc.setState(0x2191, 0x3c8c, 0xbf80, 0x6e8a, 0xf177, 0xb6d4, 0x1, 0x1);
        gbc.writeMem(0x2191, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x3c8c);
        EXPECT(gbc.pc(), 0x2192);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0094
        gbc.setState(0x27f4, 0xd627, 0x8fd0, 0x3d12, 0xdde8, 0x967d, 0x1, 0x1);
        gbc.writeMem(0x27f4, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xd627);
        EXPECT(gbc.pc(), 0x27f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0095
        gbc.setState(0x2871, 0x557b, 0x2a40, 0xee71, 0xb319, 0x6e05, 0x0, 0x1);
        gbc.writeMem(0x2871, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x557b);
        EXPECT(gbc.pc(), 0x2872);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0096
        gbc.setState(0xc1b3, 0x62ac, 0x9920, 0xad4f, 0xfa0d, 0x8609, 0x0, 0x0);
        gbc.writeMem(0xc1b3, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x62ac);
        EXPECT(gbc.pc(), 0xc1b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1b3), 0xa7);
        // A7 0097
        gbc.setState(0xc591, 0x1397, 0x2730, 0x8990, 0xb313, 0xb38b, 0x1, 0x1);
        gbc.writeMem(0xc591, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x1397);
        EXPECT(gbc.pc(), 0xc592);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc591), 0xa7);
        // A7 0098
        gbc.setState(0x28c7, 0x6fe1, 0xd130, 0x6a60, 0xaacb, 0x53a7, 0x0, 0x0);
        gbc.writeMem(0x28c7, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x6fe1);
        EXPECT(gbc.pc(), 0x28c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0099
        gbc.setState(0xd7a2, 0xb35, 0x8db0, 0x19aa, 0x9f58, 0xab00, 0x1, 0x0);
        gbc.writeMem(0xd7a2, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xb35);
        EXPECT(gbc.pc(), 0xd7a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7a2), 0xa7);
        // A7 009A
        gbc.setState(0x4a6f, 0x22d6, 0x21d0, 0x3fe, 0xfaf1, 0x3816, 0x1, 0x1);
        gbc.writeMem(0x4a6f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x22d6);
        EXPECT(gbc.pc(), 0x4a70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 009C
        gbc.setState(0xe9b4, 0x2aa9, 0x4c90, 0xe608, 0x747e, 0x24fd, 0x1, 0x0);
        gbc.writeMem(0xe9b4, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x2aa9);
        EXPECT(gbc.pc(), 0xe9b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9b4), 0xa7);
        // A7 009D
        gbc.setState(0x28d9, 0xfe8, 0x3d20, 0x987b, 0x2e59, 0xd527, 0x0, 0x0);
        gbc.writeMem(0x28d9, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xfe8);
        EXPECT(gbc.pc(), 0x28da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 009E
        gbc.setState(0x57b3, 0x5817, 0x26d0, 0x8baa, 0x182d, 0xbb5d, 0x1, 0x0);
        gbc.writeMem(0x57b3, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x5817);
        EXPECT(gbc.pc(), 0x57b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 009F
        gbc.setState(0xb147, 0x26bf, 0x6bb0, 0xbdaf, 0x79da, 0xf572, 0x1, 0x1);
        gbc.writeMem(0xb147, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x26bf);
        EXPECT(gbc.pc(), 0xb148);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb147), 0xa7);
        // A7 00A0
        gbc.setState(0xc16b, 0x475c, 0x7860, 0x1b3e, 0xd866, 0xb71, 0x0, 0x0);
        gbc.writeMem(0xc16b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x475c);
        EXPECT(gbc.pc(), 0xc16c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc16b), 0xa7);
        // A7 00A1
        gbc.setState(0xc110, 0xfac6, 0xc2b0, 0x223a, 0xefb3, 0x5c30, 0x0, 0x1);
        gbc.writeMem(0xc110, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xfac6);
        EXPECT(gbc.pc(), 0xc111);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc110), 0xa7);
        // A7 00A2
        gbc.setState(0x1e16, 0xfc5c, 0x2bd0, 0x7c23, 0x825d, 0xe94f, 0x0, 0x1);
        gbc.writeMem(0x1e16, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xfc5c);
        EXPECT(gbc.pc(), 0x1e17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00A3
        gbc.setState(0x1130, 0xaef3, 0x4180, 0x60e9, 0x7da1, 0xe6e0, 0x0, 0x1);
        gbc.writeMem(0x1130, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xaef3);
        EXPECT(gbc.pc(), 0x1131);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00A5
        gbc.setState(0xa2bc, 0xb5fc, 0xc490, 0xdb06, 0x7ec0, 0xdb43, 0x1, 0x1);
        gbc.writeMem(0xa2bc, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xb5fc);
        EXPECT(gbc.pc(), 0xa2bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2bc), 0xa7);
        // A7 00A7
        gbc.setState(0x7ac2, 0xec62, 0x55f0, 0x52a, 0xa579, 0x17ea, 0x1, 0x1);
        gbc.writeMem(0x7ac2, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xec62);
        EXPECT(gbc.pc(), 0x7ac3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00A8
        gbc.setState(0xb37e, 0x2740, 0x5770, 0xd2a, 0x0, 0x6928, 0x1, 0x0);
        gbc.writeMem(0xb37e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x2740);
        EXPECT(gbc.pc(), 0xb37f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb37e), 0xa7);
        // A7 00A9
        gbc.setState(0x4ecd, 0xa61a, 0x8ae0, 0xa194, 0xc0d9, 0x7c0b, 0x0, 0x1);
        gbc.writeMem(0x4ecd, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xa61a);
        EXPECT(gbc.pc(), 0x4ece);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00AA
        gbc.setState(0xd096, 0xd066, 0x3d90, 0xfbca, 0x451a, 0xb0a0, 0x0, 0x1);
        gbc.writeMem(0xd096, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xd066);
        EXPECT(gbc.pc(), 0xd097);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd096), 0xa7);
        // A7 00AB
        gbc.setState(0xdac6, 0x6a29, 0xba20, 0x8aab, 0x15c1, 0x6ea3, 0x1, 0x0);
        gbc.writeMem(0xdac6, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x6a29);
        EXPECT(gbc.pc(), 0xdac7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdac6), 0xa7);
        // A7 00AC
        gbc.setState(0x7916, 0x7cab, 0x9be0, 0xd6c2, 0x690d, 0x1796, 0x1, 0x0);
        gbc.writeMem(0x7916, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x7cab);
        EXPECT(gbc.pc(), 0x7917);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00AD
        gbc.setState(0x54b5, 0xfbd2, 0xf330, 0x4cd5, 0xeaf2, 0x48b8, 0x0, 0x0);
        gbc.writeMem(0x54b5, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xfbd2);
        EXPECT(gbc.pc(), 0x54b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00AE
        gbc.setState(0x3f51, 0xdd0b, 0x32c0, 0xf3df, 0xc788, 0x243d, 0x0, 0x1);
        gbc.writeMem(0x3f51, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xdd0b);
        EXPECT(gbc.pc(), 0x3f52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00AF
        gbc.setState(0x328a, 0x4b92, 0xc4e0, 0xc0ee, 0xa41d, 0xaf42, 0x0, 0x0);
        gbc.writeMem(0x328a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x4b92);
        EXPECT(gbc.pc(), 0x328b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00B0
        gbc.setState(0x83be, 0x15cd, 0x7c70, 0xafcb, 0xb7f8, 0x7e90, 0x1, 0x1);
        gbc.writeMem(0x83be, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x15cd);
        EXPECT(gbc.pc(), 0x83bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83be), 0xa7);
        // A7 00B1
        gbc.setState(0x4da8, 0xb669, 0xa950, 0xc31a, 0x34a5, 0xab9, 0x0, 0x1);
        gbc.writeMem(0x4da8, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xb669);
        EXPECT(gbc.pc(), 0x4da9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00B2
        gbc.setState(0x9ef2, 0x5ea8, 0xbf60, 0xef2b, 0xd6a0, 0x252b, 0x0, 0x1);
        gbc.writeMem(0x9ef2, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x5ea8);
        EXPECT(gbc.pc(), 0x9ef3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ef2), 0xa7);
        // A7 00B3
        gbc.setState(0x899f, 0x854e, 0xba50, 0x5e55, 0x5a38, 0x8b87, 0x0, 0x1);
        gbc.writeMem(0x899f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x854e);
        EXPECT(gbc.pc(), 0x89a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x899f), 0xa7);
        // A7 00B4
        gbc.setState(0x7a49, 0x3d4d, 0x4070, 0xa735, 0x80cb, 0x84a7, 0x0, 0x0);
        gbc.writeMem(0x7a49, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x3d4d);
        EXPECT(gbc.pc(), 0x7a4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00B5
        gbc.setState(0xc5b0, 0x110f, 0x5630, 0xbbe, 0xe396, 0x35d3, 0x1, 0x0);
        gbc.writeMem(0xc5b0, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x110f);
        EXPECT(gbc.pc(), 0xc5b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5b0), 0xa7);
        // A7 00B6
        gbc.setState(0xbf66, 0x8243, 0x8f0, 0xf823, 0x3ef6, 0xffe6, 0x1, 0x0);
        gbc.writeMem(0xbf66, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x8243);
        EXPECT(gbc.pc(), 0xbf67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf66), 0xa7);
        // A7 00B7
        gbc.setState(0x777c, 0x1795, 0x2990, 0x9251, 0x331c, 0x6d3f, 0x1, 0x0);
        gbc.writeMem(0x777c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x1795);
        EXPECT(gbc.pc(), 0x777d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00B8
        gbc.setState(0x5f29, 0x66ad, 0x6460, 0x3d18, 0xe67b, 0x8327, 0x1, 0x0);
        gbc.writeMem(0x5f29, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x66ad);
        EXPECT(gbc.pc(), 0x5f2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00BA
        gbc.setState(0x8a47, 0x2698, 0x9610, 0x6eef, 0x1887, 0x815, 0x1, 0x0);
        gbc.writeMem(0x8a47, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x2698);
        EXPECT(gbc.pc(), 0x8a48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a47), 0xa7);
        // A7 00BB
        gbc.setState(0xb679, 0xc8b4, 0xa420, 0x7905, 0x4ade, 0x7731, 0x1, 0x0);
        gbc.writeMem(0xb679, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xc8b4);
        EXPECT(gbc.pc(), 0xb67a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb679), 0xa7);
        // A7 00BC
        gbc.setState(0xb1a6, 0x5027, 0x6690, 0xe0a6, 0xdf6, 0x7007, 0x0, 0x0);
        gbc.writeMem(0xb1a6, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x5027);
        EXPECT(gbc.pc(), 0xb1a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1a6), 0xa7);
        // A7 00BD
        gbc.setState(0xc470, 0x3022, 0x86a0, 0x49a9, 0x5690, 0xb73c, 0x1, 0x1);
        gbc.writeMem(0xc470, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x3022);
        EXPECT(gbc.pc(), 0xc471);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc470), 0xa7);
        // A7 00BE
        gbc.setState(0x8b62, 0x5f1e, 0x2800, 0x464b, 0xce3, 0x3f94, 0x1, 0x1);
        gbc.writeMem(0x8b62, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x5f1e);
        EXPECT(gbc.pc(), 0x8b63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b62), 0xa7);
        // A7 00BF
        gbc.setState(0xa264, 0xa849, 0x4420, 0xc958, 0xdb92, 0xdfea, 0x1, 0x0);
        gbc.writeMem(0xa264, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xa849);
        EXPECT(gbc.pc(), 0xa265);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa264), 0xa7);
        // A7 00C0
        gbc.setState(0x5560, 0x1314, 0x6480, 0x7ebd, 0xc708, 0x1885, 0x1, 0x0);
        gbc.writeMem(0x5560, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x1314);
        EXPECT(gbc.pc(), 0x5561);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00C1
        gbc.setState(0x1e30, 0xd66e, 0x7fb0, 0xbd8e, 0x6347, 0x3f7b, 0x0, 0x1);
        gbc.writeMem(0x1e30, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xd66e);
        EXPECT(gbc.pc(), 0x1e31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00C2
        gbc.setState(0x6a14, 0x2b, 0xce40, 0x229c, 0x9736, 0xe2d3, 0x0, 0x0);
        gbc.writeMem(0x6a14, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x2b);
        EXPECT(gbc.pc(), 0x6a15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00C3
        gbc.setState(0x262b, 0x7e11, 0x6b60, 0xe5c7, 0x29a9, 0x212f, 0x1, 0x1);
        gbc.writeMem(0x262b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x7e11);
        EXPECT(gbc.pc(), 0x262c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00C4
        gbc.setState(0x4007, 0x830f, 0xfdf0, 0xfc52, 0xbf01, 0x67b5, 0x0, 0x0);
        gbc.writeMem(0x4007, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x830f);
        EXPECT(gbc.pc(), 0x4008);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00C5
        gbc.setState(0x9c0d, 0x5804, 0xa5b0, 0xd929, 0x984e, 0xc959, 0x0, 0x1);
        gbc.writeMem(0x9c0d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x5804);
        EXPECT(gbc.pc(), 0x9c0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c0d), 0xa7);
        // A7 00C6
        gbc.setState(0xc3e, 0xb394, 0xa930, 0xe972, 0xb6c5, 0xe326, 0x1, 0x0);
        gbc.writeMem(0xc3e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xb394);
        EXPECT(gbc.pc(), 0xc3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00C7
        gbc.setState(0x4598, 0xe6ea, 0x4090, 0x8f42, 0x86a4, 0x100e, 0x0, 0x0);
        gbc.writeMem(0x4598, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xe6ea);
        EXPECT(gbc.pc(), 0x4599);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00C8
        gbc.setState(0xb43d, 0x5452, 0x94a0, 0x73d2, 0xa460, 0x817c, 0x1, 0x1);
        gbc.writeMem(0xb43d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x5452);
        EXPECT(gbc.pc(), 0xb43e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb43d), 0xa7);
        // A7 00C9
        gbc.setState(0x1329, 0x8817, 0x41c0, 0x2ae0, 0xfc26, 0xf1b0, 0x1, 0x1);
        gbc.writeMem(0x1329, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x8817);
        EXPECT(gbc.pc(), 0x132a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00CA
        gbc.setState(0x1a49, 0x24bc, 0x32d0, 0xc693, 0xa193, 0x607e, 0x0, 0x0);
        gbc.writeMem(0x1a49, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x24bc);
        EXPECT(gbc.pc(), 0x1a4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00CB
        gbc.setState(0x9454, 0x4a7e, 0x3350, 0x3a40, 0xc1c1, 0x78bd, 0x1, 0x0);
        gbc.writeMem(0x9454, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x4a7e);
        EXPECT(gbc.pc(), 0x9455);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9454), 0xa7);
        // A7 00CC
        gbc.setState(0x7adf, 0xb214, 0xbdc0, 0x4e47, 0xab33, 0x4e92, 0x0, 0x0);
        gbc.writeMem(0x7adf, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xb214);
        EXPECT(gbc.pc(), 0x7ae0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00CD
        gbc.setState(0x2f2a, 0x20e7, 0x270, 0xa48e, 0x22dd, 0xccf7, 0x1, 0x0);
        gbc.writeMem(0x2f2a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x20e7);
        EXPECT(gbc.pc(), 0x2f2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00CE
        gbc.setState(0x583f, 0xd7fd, 0xd9d0, 0xaaa1, 0xc3fc, 0x6939, 0x1, 0x1);
        gbc.writeMem(0x583f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xd7fd);
        EXPECT(gbc.pc(), 0x5840);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00CF
        gbc.setState(0x9060, 0xc682, 0xb2d0, 0xdc15, 0xab67, 0xc44f, 0x0, 0x1);
        gbc.writeMem(0x9060, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xc682);
        EXPECT(gbc.pc(), 0x9061);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9060), 0xa7);
        // A7 00D0
        gbc.setState(0xe586, 0x5eaf, 0x5280, 0xfaeb, 0xd98e, 0xbe38, 0x1, 0x1);
        gbc.writeMem(0xe586, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x5eaf);
        EXPECT(gbc.pc(), 0xe587);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe586), 0xa7);
        // A7 00D1
        gbc.setState(0xecce, 0x5e34, 0x1b30, 0xb3c4, 0x9962, 0xfcb2, 0x0, 0x0);
        gbc.writeMem(0xecce, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x5e34);
        EXPECT(gbc.pc(), 0xeccf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecce), 0xa7);
        // A7 00D2
        gbc.setState(0x390b, 0x653f, 0xed20, 0x7113, 0x6f42, 0xaa9a, 0x0, 0x0);
        gbc.writeMem(0x390b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x653f);
        EXPECT(gbc.pc(), 0x390c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00D3
        gbc.setState(0xaa78, 0xb94d, 0xcc10, 0xbab7, 0x480c, 0x5e25, 0x0, 0x0);
        gbc.writeMem(0xaa78, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xb94d);
        EXPECT(gbc.pc(), 0xaa79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa78), 0xa7);
        // A7 00D4
        gbc.setState(0xaa72, 0x8c69, 0x7750, 0x69d6, 0x684d, 0x1d29, 0x0, 0x1);
        gbc.writeMem(0xaa72, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x8c69);
        EXPECT(gbc.pc(), 0xaa73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa72), 0xa7);
        // A7 00D5
        gbc.setState(0x5d0a, 0xdc29, 0xc4e0, 0xd630, 0xb1cf, 0x576, 0x0, 0x0);
        gbc.writeMem(0x5d0a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xdc29);
        EXPECT(gbc.pc(), 0x5d0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00D6
        gbc.setState(0x9bd1, 0xc16f, 0x20c0, 0xc3e0, 0x7ad, 0x82b8, 0x1, 0x0);
        gbc.writeMem(0x9bd1, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xc16f);
        EXPECT(gbc.pc(), 0x9bd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bd1), 0xa7);
        // A7 00D7
        gbc.setState(0x4b1a, 0xf583, 0x38d0, 0xb19b, 0xf4cc, 0xe885, 0x0, 0x1);
        gbc.writeMem(0x4b1a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xf583);
        EXPECT(gbc.pc(), 0x4b1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00D8
        gbc.setState(0x8feb, 0xb361, 0x4830, 0x32cb, 0x3296, 0x311a, 0x1, 0x1);
        gbc.writeMem(0x8feb, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xb361);
        EXPECT(gbc.pc(), 0x8fec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8feb), 0xa7);
        // A7 00D9
        gbc.setState(0xea65, 0x317c, 0x3510, 0xf5cc, 0x7206, 0x6c51, 0x0, 0x0);
        gbc.writeMem(0xea65, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x317c);
        EXPECT(gbc.pc(), 0xea66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea65), 0xa7);
        // A7 00DA
        gbc.setState(0x885d, 0x4bc4, 0xa60, 0x2b84, 0xd54e, 0x80ba, 0x1, 0x1);
        gbc.writeMem(0x885d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x4bc4);
        EXPECT(gbc.pc(), 0x885e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x885d), 0xa7);
        // A7 00DB
        gbc.setState(0x6aa, 0x54d1, 0x81d0, 0x1e5, 0x30f3, 0x2fd7, 0x0, 0x0);
        gbc.writeMem(0x6aa, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x54d1);
        EXPECT(gbc.pc(), 0x6ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00DC
        gbc.setState(0x3d1c, 0xcf3e, 0x30e0, 0xd339, 0x9c3a, 0xfe69, 0x1, 0x0);
        gbc.writeMem(0x3d1c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xcf3e);
        EXPECT(gbc.pc(), 0x3d1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00DE
        gbc.setState(0xa121, 0x9789, 0xed90, 0x5b00, 0xe8d, 0xaed5, 0x0, 0x1);
        gbc.writeMem(0xa121, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x9789);
        EXPECT(gbc.pc(), 0xa122);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa121), 0xa7);
        // A7 00DF
        gbc.setState(0xc990, 0xd90, 0xa8b0, 0x9b9, 0x5bcd, 0xc493, 0x0, 0x1);
        gbc.writeMem(0xc990, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xd90);
        EXPECT(gbc.pc(), 0xc991);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc990), 0xa7);
        // A7 00E0
        gbc.setState(0x584f, 0x695f, 0xf790, 0x6ecb, 0xabec, 0x7b, 0x1, 0x1);
        gbc.writeMem(0x584f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x695f);
        EXPECT(gbc.pc(), 0x5850);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00E2
        gbc.setState(0xd1c6, 0x2c0c, 0x4120, 0xff2b, 0x46a1, 0x7506, 0x1, 0x1);
        gbc.writeMem(0xd1c6, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x2c0c);
        EXPECT(gbc.pc(), 0xd1c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1c6), 0xa7);
        // A7 00E3
        gbc.setState(0xd60a, 0x76c8, 0x4d00, 0x40b0, 0xe3a3, 0x18c9, 0x1, 0x1);
        gbc.writeMem(0xd60a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x76c8);
        EXPECT(gbc.pc(), 0xd60b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd60a), 0xa7);
        // A7 00E4
        gbc.setState(0x860a, 0xe49c, 0x3760, 0x6eb8, 0xa14f, 0x8272, 0x0, 0x1);
        gbc.writeMem(0x860a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xe49c);
        EXPECT(gbc.pc(), 0x860b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x860a), 0xa7);
        // A7 00E5
        gbc.setState(0xab16, 0xbc9a, 0x9220, 0x896, 0x445f, 0x1846, 0x1, 0x0);
        gbc.writeMem(0xab16, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xbc9a);
        EXPECT(gbc.pc(), 0xab17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab16), 0xa7);
        // A7 00E6
        gbc.setState(0xa346, 0x48, 0xf150, 0x6e8b, 0xd8d2, 0xbf81, 0x0, 0x1);
        gbc.writeMem(0xa346, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x48);
        EXPECT(gbc.pc(), 0xa347);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa346), 0xa7);
        // A7 00E7
        gbc.setState(0xdb4c, 0xadc7, 0xef80, 0xc143, 0x972f, 0x47ca, 0x0, 0x1);
        gbc.writeMem(0xdb4c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xadc7);
        EXPECT(gbc.pc(), 0xdb4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb4c), 0xa7);
        // A7 00E9
        gbc.setState(0x6494, 0x7cb4, 0x5120, 0x8fb8, 0x1b15, 0x35ee, 0x1, 0x1);
        gbc.writeMem(0x6494, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x7cb4);
        EXPECT(gbc.pc(), 0x6495);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00EA
        gbc.setState(0xd681, 0xca6f, 0xc4e0, 0x4ccd, 0xda97, 0x44e4, 0x1, 0x1);
        gbc.writeMem(0xd681, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xca6f);
        EXPECT(gbc.pc(), 0xd682);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd681), 0xa7);
        // A7 00EC
        gbc.setState(0x58db, 0x96a8, 0xad80, 0x1056, 0x57d5, 0xe9b8, 0x0, 0x1);
        gbc.writeMem(0x58db, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x96a8);
        EXPECT(gbc.pc(), 0x58dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00ED
        gbc.setState(0x2015, 0x3e77, 0x6210, 0x8d, 0x658c, 0x132f, 0x0, 0x0);
        gbc.writeMem(0x2015, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x3e77);
        EXPECT(gbc.pc(), 0x2016);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00EE
        gbc.setState(0xb96a, 0x1673, 0xe060, 0x8d5, 0x94e5, 0xb160, 0x1, 0x1);
        gbc.writeMem(0xb96a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x1673);
        EXPECT(gbc.pc(), 0xb96b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb96a), 0xa7);
        // A7 00F0
        gbc.setState(0x9799, 0x6f5b, 0xcf60, 0xa08e, 0x300c, 0x2e2f, 0x0, 0x1);
        gbc.writeMem(0x9799, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x6f5b);
        EXPECT(gbc.pc(), 0x979a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9799), 0xa7);
        // A7 00F1
        gbc.setState(0x893, 0x1f6e, 0xfe0, 0x662d, 0xce87, 0xdfc7, 0x1, 0x1);
        gbc.writeMem(0x893, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x1f6e);
        EXPECT(gbc.pc(), 0x894);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00F2
        gbc.setState(0x87e1, 0xa063, 0x2130, 0x940f, 0xace0, 0xd292, 0x0, 0x0);
        gbc.writeMem(0x87e1, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xa063);
        EXPECT(gbc.pc(), 0x87e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87e1), 0xa7);
        // A7 00F3
        gbc.setState(0xdf5b, 0x716a, 0x2e40, 0xf453, 0x405, 0xe376, 0x0, 0x1);
        gbc.writeMem(0xdf5b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x716a);
        EXPECT(gbc.pc(), 0xdf5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf5b), 0xa7);
        // A7 00F4
        gbc.setState(0xedef, 0xe88f, 0xede0, 0xdb11, 0x67c8, 0xfe3b, 0x0, 0x0);
        gbc.writeMem(0xedef, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xe88f);
        EXPECT(gbc.pc(), 0xedf0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedef), 0xa7);
        // A7 00F5
        gbc.setState(0x18af, 0x9fa, 0xa7e0, 0xa2bd, 0xb74b, 0x58d1, 0x1, 0x1);
        gbc.writeMem(0x18af, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x9fa);
        EXPECT(gbc.pc(), 0x18b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00F6
        gbc.setState(0x2a2b, 0x21ba, 0x5210, 0x69ca, 0x8d3e, 0xce18, 0x1, 0x1);
        gbc.writeMem(0x2a2b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x21ba);
        EXPECT(gbc.pc(), 0x2a2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00F7
        gbc.setState(0xd97b, 0x12a2, 0x95f0, 0x3110, 0x5a20, 0x9802, 0x0, 0x1);
        gbc.writeMem(0xd97b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x12a2);
        EXPECT(gbc.pc(), 0xd97c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd97b), 0xa7);
        // A7 00F8
        gbc.setState(0xc575, 0xf0c, 0x33b0, 0xe2f, 0xfae4, 0x1c1e, 0x1, 0x1);
        gbc.writeMem(0xc575, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xf0c);
        EXPECT(gbc.pc(), 0xc576);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc575), 0xa7);
        // A7 00F9
        gbc.setState(0x8ee5, 0x7ea5, 0xd100, 0xe40e, 0xf8d9, 0x5b3c, 0x1, 0x1);
        gbc.writeMem(0x8ee5, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x7ea5);
        EXPECT(gbc.pc(), 0x8ee6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ee5), 0xa7);
        // A7 00FA
        gbc.setState(0x1891, 0xa87a, 0xa240, 0x329a, 0xd300, 0x550f, 0x0, 0x0);
        gbc.writeMem(0x1891, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xa87a);
        EXPECT(gbc.pc(), 0x1892);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00FB
        gbc.setState(0x6c66, 0x3622, 0xdb50, 0xf2a2, 0x78ef, 0x46c3, 0x1, 0x1);
        gbc.writeMem(0x6c66, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x3622);
        EXPECT(gbc.pc(), 0x6c67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00FC
        gbc.setState(0x2ae2, 0x4c0a, 0xe9e0, 0x9e70, 0x60f6, 0x5013, 0x0, 0x0);
        gbc.writeMem(0x2ae2, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x4c0a);
        EXPECT(gbc.pc(), 0x2ae3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00FD
        gbc.setState(0x521e, 0xfa42, 0x2f20, 0xd63f, 0xacf2, 0x8100, 0x1, 0x1);
        gbc.writeMem(0x521e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xfa42);
        EXPECT(gbc.pc(), 0x521f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 00FE
        gbc.setState(0xa975, 0xa01c, 0x9840, 0xe70a, 0x57a4, 0x12e9, 0x0, 0x1);
        gbc.writeMem(0xa975, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xa01c);
        EXPECT(gbc.pc(), 0xa976);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa975), 0xa7);
        // A7 00FF
        gbc.setState(0x8792, 0xf31f, 0xf350, 0x7947, 0x90f4, 0x5843, 0x1, 0x1);
        gbc.writeMem(0x8792, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xf31f);
        EXPECT(gbc.pc(), 0x8793);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8792), 0xa7);
        // A7 0100
        gbc.setState(0xb5bf, 0x7f1, 0x6b30, 0x3f98, 0x2473, 0x93de, 0x0, 0x0);
        gbc.writeMem(0xb5bf, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x7f1);
        EXPECT(gbc.pc(), 0xb5c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5bf), 0xa7);
        // A7 0101
        gbc.setState(0x75eb, 0x1921, 0x5e10, 0xd4f0, 0x3070, 0x9055, 0x0, 0x1);
        gbc.writeMem(0x75eb, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x1921);
        EXPECT(gbc.pc(), 0x75ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0102
        gbc.setState(0x1fbe, 0xc72, 0xe4f0, 0x946f, 0x2fe2, 0x738f, 0x0, 0x1);
        gbc.writeMem(0x1fbe, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xc72);
        EXPECT(gbc.pc(), 0x1fbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0103
        gbc.setState(0x9f10, 0x7f7, 0x7420, 0x496e, 0x9c1f, 0x2c8, 0x1, 0x0);
        gbc.writeMem(0x9f10, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x7f7);
        EXPECT(gbc.pc(), 0x9f11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f10), 0xa7);
        // A7 0104
        gbc.setState(0xa6ee, 0xeff6, 0x48c0, 0xbfe2, 0xdc81, 0x708f, 0x1, 0x1);
        gbc.writeMem(0xa6ee, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xeff6);
        EXPECT(gbc.pc(), 0xa6ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6ee), 0xa7);
        // A7 0105
        gbc.setState(0xee26, 0xccc, 0xae0, 0x6251, 0x45ac, 0xc21a, 0x0, 0x1);
        gbc.writeMem(0xee26, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xccc);
        EXPECT(gbc.pc(), 0xee27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee26), 0xa7);
        // A7 0107
        gbc.setState(0x8a70, 0x671, 0x5730, 0x8441, 0x9d1d, 0x4ee3, 0x1, 0x0);
        gbc.writeMem(0x8a70, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x671);
        EXPECT(gbc.pc(), 0x8a71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a70), 0xa7);
        // A7 0108
        gbc.setState(0x19df, 0x4a4b, 0xfc70, 0x4d86, 0x1ed4, 0x4b07, 0x0, 0x0);
        gbc.writeMem(0x19df, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x4a4b);
        EXPECT(gbc.pc(), 0x19e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0109
        gbc.setState(0x56b3, 0x409b, 0xdce0, 0xb2bf, 0xad61, 0x8e00, 0x0, 0x1);
        gbc.writeMem(0x56b3, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x409b);
        EXPECT(gbc.pc(), 0x56b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 010A
        gbc.setState(0xd106, 0x7517, 0x0, 0xe9bd, 0x183a, 0x8f7b, 0x1, 0x0);
        gbc.writeMem(0xd106, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x7517);
        EXPECT(gbc.pc(), 0xd107);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd106), 0xa7);
        // A7 010B
        gbc.setState(0x6c26, 0x7532, 0xc570, 0xcb91, 0xc8c2, 0xc054, 0x1, 0x1);
        gbc.writeMem(0x6c26, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x7532);
        EXPECT(gbc.pc(), 0x6c27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 010C
        gbc.setState(0xa4ec, 0x9d32, 0xea10, 0x23bc, 0x824b, 0xf589, 0x1, 0x1);
        gbc.writeMem(0xa4ec, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x9d32);
        EXPECT(gbc.pc(), 0xa4ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4ec), 0xa7);
        // A7 010D
        gbc.setState(0xc01c, 0xac52, 0x4f50, 0xe226, 0x6983, 0xb1a0, 0x1, 0x0);
        gbc.writeMem(0xc01c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xac52);
        EXPECT(gbc.pc(), 0xc01d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc01c), 0xa7);
        // A7 010E
        gbc.setState(0x5262, 0x85c5, 0x44f0, 0xa6db, 0x81, 0x8eb, 0x0, 0x0);
        gbc.writeMem(0x5262, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x85c5);
        EXPECT(gbc.pc(), 0x5263);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 010F
        gbc.setState(0xa33f, 0x26d5, 0x83a0, 0x72de, 0x78cb, 0xd339, 0x1, 0x1);
        gbc.writeMem(0xa33f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x26d5);
        EXPECT(gbc.pc(), 0xa340);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa33f), 0xa7);
        // A7 0110
        gbc.setState(0x7458, 0x8380, 0xe80, 0x18e0, 0x11f5, 0x37c3, 0x1, 0x1);
        gbc.writeMem(0x7458, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x8380);
        EXPECT(gbc.pc(), 0x7459);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0111
        gbc.setState(0xc6a6, 0x4738, 0x5f60, 0x7ac1, 0xc00e, 0x2a9a, 0x1, 0x0);
        gbc.writeMem(0xc6a6, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x4738);
        EXPECT(gbc.pc(), 0xc6a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6a6), 0xa7);
        // A7 0112
        gbc.setState(0x8bda, 0xb7ba, 0x3eb0, 0xa73d, 0xe9ae, 0x4cfb, 0x0, 0x1);
        gbc.writeMem(0x8bda, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xb7ba);
        EXPECT(gbc.pc(), 0x8bdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bda), 0xa7);
        // A7 0113
        gbc.setState(0xd7a2, 0x7f45, 0xaf20, 0x20b6, 0xabe3, 0x968f, 0x1, 0x0);
        gbc.writeMem(0xd7a2, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x7f45);
        EXPECT(gbc.pc(), 0xd7a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7a2), 0xa7);
        // A7 0115
        gbc.setState(0xde24, 0xe6a9, 0xe010, 0x974, 0x53e1, 0x16bf, 0x1, 0x0);
        gbc.writeMem(0xde24, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xe6a9);
        EXPECT(gbc.pc(), 0xde25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde24), 0xa7);
        // A7 0116
        gbc.setState(0x2847, 0x4f9b, 0xb050, 0x8251, 0xf4f2, 0x2283, 0x0, 0x0);
        gbc.writeMem(0x2847, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x4f9b);
        EXPECT(gbc.pc(), 0x2848);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0117
        gbc.setState(0x3ddc, 0xc1dc, 0x7470, 0x9ad7, 0x6e4b, 0xb66e, 0x1, 0x0);
        gbc.writeMem(0x3ddc, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xc1dc);
        EXPECT(gbc.pc(), 0x3ddd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0118
        gbc.setState(0x3076, 0xb797, 0xc110, 0x4a6, 0x55f9, 0x8499, 0x0, 0x1);
        gbc.writeMem(0x3076, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xb797);
        EXPECT(gbc.pc(), 0x3077);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0119
        gbc.setState(0x96d8, 0xb6f9, 0x53f0, 0x9251, 0xddf4, 0xc6d7, 0x0, 0x1);
        gbc.writeMem(0x96d8, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xb6f9);
        EXPECT(gbc.pc(), 0x96d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96d8), 0xa7);
        // A7 011A
        gbc.setState(0x39e5, 0x9c1f, 0x2560, 0xc77c, 0x1dc0, 0xe8b7, 0x0, 0x1);
        gbc.writeMem(0x39e5, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x9c1f);
        EXPECT(gbc.pc(), 0x39e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 011B
        gbc.setState(0xa452, 0xcf58, 0x7aa0, 0xbceb, 0x7815, 0xfdc9, 0x1, 0x1);
        gbc.writeMem(0xa452, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xcf58);
        EXPECT(gbc.pc(), 0xa453);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa452), 0xa7);
        // A7 011C
        gbc.setState(0xd96a, 0xdf31, 0xb390, 0x5a76, 0xe924, 0x9a4a, 0x1, 0x0);
        gbc.writeMem(0xd96a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xdf31);
        EXPECT(gbc.pc(), 0xd96b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd96a), 0xa7);
        // A7 011D
        gbc.setState(0xc91a, 0x5e52, 0xac30, 0xb4c3, 0xc991, 0x566e, 0x0, 0x0);
        gbc.writeMem(0xc91a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x5e52);
        EXPECT(gbc.pc(), 0xc91b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc91a), 0xa7);
        // A7 011E
        gbc.setState(0xc8c8, 0xf52b, 0x1bd0, 0x3ceb, 0x6d28, 0x64aa, 0x1, 0x1);
        gbc.writeMem(0xc8c8, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xf52b);
        EXPECT(gbc.pc(), 0xc8c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8c8), 0xa7);
        // A7 011F
        gbc.setState(0x6262, 0xc335, 0x2d90, 0x3d5e, 0xb019, 0xf076, 0x0, 0x0);
        gbc.writeMem(0x6262, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xc335);
        EXPECT(gbc.pc(), 0x6263);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0120
        gbc.setState(0x39c5, 0xf72c, 0x9cb0, 0x4cf7, 0x13d8, 0xda5d, 0x1, 0x0);
        gbc.writeMem(0x39c5, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xf72c);
        EXPECT(gbc.pc(), 0x39c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0121
        gbc.setState(0x336b, 0x8fef, 0x3c80, 0xbec5, 0x4a6a, 0x212, 0x0, 0x1);
        gbc.writeMem(0x336b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x8fef);
        EXPECT(gbc.pc(), 0x336c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0122
        gbc.setState(0x2754, 0x585f, 0x8b70, 0x8f1b, 0x9dc9, 0x8f14, 0x1, 0x1);
        gbc.writeMem(0x2754, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x585f);
        EXPECT(gbc.pc(), 0x2755);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0123
        gbc.setState(0x31aa, 0x4b2e, 0x44a0, 0x3fa3, 0xf277, 0x834c, 0x0, 0x0);
        gbc.writeMem(0x31aa, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x4b2e);
        EXPECT(gbc.pc(), 0x31ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0124
        gbc.setState(0xc1ff, 0xfa15, 0xdf50, 0x8e67, 0xe091, 0x16bb, 0x1, 0x1);
        gbc.writeMem(0xc1ff, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xfa15);
        EXPECT(gbc.pc(), 0xc200);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1ff), 0xa7);
        // A7 0125
        gbc.setState(0x6c10, 0xa8c3, 0x3980, 0x1906, 0x790b, 0x89f9, 0x1, 0x1);
        gbc.writeMem(0x6c10, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xa8c3);
        EXPECT(gbc.pc(), 0x6c11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0126
        gbc.setState(0x286a, 0x77be, 0xa450, 0xd0da, 0x3b2a, 0x7443, 0x1, 0x0);
        gbc.writeMem(0x286a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x77be);
        EXPECT(gbc.pc(), 0x286b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0128
        gbc.setState(0x84ab, 0xa85e, 0xf6e0, 0x8267, 0x985f, 0xb980, 0x1, 0x1);
        gbc.writeMem(0x84ab, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xa85e);
        EXPECT(gbc.pc(), 0x84ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84ab), 0xa7);
        // A7 012A
        gbc.setState(0xcade, 0xec38, 0x2ef0, 0x8aff, 0x30aa, 0xe460, 0x1, 0x1);
        gbc.writeMem(0xcade, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xec38);
        EXPECT(gbc.pc(), 0xcadf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcade), 0xa7);
        // A7 012B
        gbc.setState(0x56e5, 0x27c1, 0xa370, 0xc67a, 0x4656, 0xcdef, 0x1, 0x0);
        gbc.writeMem(0x56e5, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x27c1);
        EXPECT(gbc.pc(), 0x56e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 012C
        gbc.setState(0x9f08, 0xc0c1, 0xcdf0, 0xc82e, 0xac74, 0x63f5, 0x0, 0x1);
        gbc.writeMem(0x9f08, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xc0c1);
        EXPECT(gbc.pc(), 0x9f09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f08), 0xa7);
        // A7 012D
        gbc.setState(0xa4cb, 0xf77e, 0x1f50, 0x2fc7, 0x863e, 0x2d9, 0x1, 0x1);
        gbc.writeMem(0xa4cb, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xf77e);
        EXPECT(gbc.pc(), 0xa4cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4cb), 0xa7);
        // A7 012E
        gbc.setState(0x5d88, 0xfcc3, 0xd60, 0x2bdd, 0x4808, 0x550e, 0x1, 0x0);
        gbc.writeMem(0x5d88, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xfcc3);
        EXPECT(gbc.pc(), 0x5d89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 012F
        gbc.setState(0x4c2a, 0x63c6, 0x5640, 0xad48, 0x77a2, 0x44f8, 0x0, 0x1);
        gbc.writeMem(0x4c2a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x63c6);
        EXPECT(gbc.pc(), 0x4c2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0130
        gbc.setState(0xa734, 0xc108, 0x8280, 0x82fc, 0xbe63, 0xb5e3, 0x0, 0x0);
        gbc.writeMem(0xa734, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xc108);
        EXPECT(gbc.pc(), 0xa735);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa734), 0xa7);
        // A7 0131
        gbc.setState(0xc0bd, 0x9c62, 0xe600, 0x2def, 0xe0e9, 0xad11, 0x1, 0x1);
        gbc.writeMem(0xc0bd, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x9c62);
        EXPECT(gbc.pc(), 0xc0be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0bd), 0xa7);
        // A7 0132
        gbc.setState(0x8029, 0xc028, 0x8140, 0x40d3, 0x8c76, 0xd496, 0x0, 0x0);
        gbc.writeMem(0x8029, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xc028);
        EXPECT(gbc.pc(), 0x802a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8029), 0xa7);
        // A7 0133
        gbc.setState(0xaa9b, 0xb47e, 0xa880, 0x3137, 0x6d82, 0x7e38, 0x0, 0x1);
        gbc.writeMem(0xaa9b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xb47e);
        EXPECT(gbc.pc(), 0xaa9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa9b), 0xa7);
        // A7 0134
        gbc.setState(0x96f6, 0x4c98, 0x5e40, 0xe05d, 0x1bba, 0x2948, 0x0, 0x0);
        gbc.writeMem(0x96f6, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x4c98);
        EXPECT(gbc.pc(), 0x96f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96f6), 0xa7);
        // A7 0135
        gbc.setState(0x3dec, 0x5f19, 0x9150, 0x27b, 0x2349, 0x299a, 0x0, 0x0);
        gbc.writeMem(0x3dec, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x5f19);
        EXPECT(gbc.pc(), 0x3ded);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0136
        gbc.setState(0x3478, 0xe4a9, 0x5e20, 0xb578, 0x90bc, 0xd935, 0x1, 0x0);
        gbc.writeMem(0x3478, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xe4a9);
        EXPECT(gbc.pc(), 0x3479);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0137
        gbc.setState(0x50bc, 0x440, 0xb570, 0x6f51, 0xa582, 0xde52, 0x0, 0x1);
        gbc.writeMem(0x50bc, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x440);
        EXPECT(gbc.pc(), 0x50bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0138
        gbc.setState(0x98c4, 0x59d1, 0x50d0, 0x5fc5, 0xfbdc, 0x4090, 0x1, 0x0);
        gbc.writeMem(0x98c4, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x59d1);
        EXPECT(gbc.pc(), 0x98c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98c4), 0xa7);
        // A7 0139
        gbc.setState(0x7dc, 0x880b, 0x5da0, 0xcc91, 0x6bfd, 0x9565, 0x0, 0x1);
        gbc.writeMem(0x7dc, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x880b);
        EXPECT(gbc.pc(), 0x7dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 013A
        gbc.setState(0x7ac2, 0x802e, 0xc3c0, 0x6a91, 0x6d96, 0x422d, 0x1, 0x0);
        gbc.writeMem(0x7ac2, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x802e);
        EXPECT(gbc.pc(), 0x7ac3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 013B
        gbc.setState(0x60f3, 0x31ed, 0x3c50, 0xff37, 0xbe31, 0x22d4, 0x0, 0x0);
        gbc.writeMem(0x60f3, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x31ed);
        EXPECT(gbc.pc(), 0x60f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 013C
        gbc.setState(0xb371, 0xa39d, 0xff70, 0x9f5b, 0x4f6c, 0x26a1, 0x0, 0x1);
        gbc.writeMem(0xb371, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xa39d);
        EXPECT(gbc.pc(), 0xb372);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb371), 0xa7);
        // A7 013D
        gbc.setState(0x3a1a, 0x5fbd, 0x8840, 0xb382, 0xeb7d, 0x585f, 0x0, 0x0);
        gbc.writeMem(0x3a1a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x5fbd);
        EXPECT(gbc.pc(), 0x3a1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 013E
        gbc.setState(0x8fb2, 0x343d, 0x8e70, 0x9ca8, 0xed30, 0x5a46, 0x0, 0x1);
        gbc.writeMem(0x8fb2, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x343d);
        EXPECT(gbc.pc(), 0x8fb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fb2), 0xa7);
        // A7 013F
        gbc.setState(0x4e3e, 0x70fe, 0xd960, 0x4b40, 0x9584, 0x64ef, 0x1, 0x1);
        gbc.writeMem(0x4e3e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x70fe);
        EXPECT(gbc.pc(), 0x4e3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0140
        gbc.setState(0xc9a0, 0x455c, 0xbb70, 0x930f, 0xda23, 0x1ad5, 0x1, 0x0);
        gbc.writeMem(0xc9a0, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x455c);
        EXPECT(gbc.pc(), 0xc9a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9a0), 0xa7);
        // A7 0141
        gbc.setState(0x30c7, 0x837b, 0xa8b0, 0x2229, 0xe5ce, 0x6338, 0x0, 0x0);
        gbc.writeMem(0x30c7, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x837b);
        EXPECT(gbc.pc(), 0x30c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0142
        gbc.setState(0xba9d, 0x4281, 0xf8e0, 0x5e07, 0xefac, 0x65b7, 0x0, 0x0);
        gbc.writeMem(0xba9d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x4281);
        EXPECT(gbc.pc(), 0xba9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba9d), 0xa7);
        // A7 0143
        gbc.setState(0x16fd, 0x5ad6, 0xd040, 0xa6ba, 0xd5ff, 0x14a7, 0x1, 0x0);
        gbc.writeMem(0x16fd, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x5ad6);
        EXPECT(gbc.pc(), 0x16fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0144
        gbc.setState(0x307f, 0xc22f, 0x12a0, 0x61e6, 0xed3c, 0xd77a, 0x0, 0x1);
        gbc.writeMem(0x307f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xc22f);
        EXPECT(gbc.pc(), 0x3080);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0145
        gbc.setState(0xcc2a, 0x2be, 0x7510, 0x337a, 0x9d07, 0x7b6d, 0x0, 0x1);
        gbc.writeMem(0xcc2a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x2be);
        EXPECT(gbc.pc(), 0xcc2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc2a), 0xa7);
        // A7 0146
        gbc.setState(0xb264, 0x30f0, 0xcfb0, 0xb6c9, 0x3859, 0x67bc, 0x1, 0x1);
        gbc.writeMem(0xb264, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x30f0);
        EXPECT(gbc.pc(), 0xb265);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb264), 0xa7);
        // A7 0147
        gbc.setState(0x4a3, 0x203d, 0x9230, 0xf955, 0xeb61, 0x157d, 0x1, 0x1);
        gbc.writeMem(0x4a3, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x203d);
        EXPECT(gbc.pc(), 0x4a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0148
        gbc.setState(0x202b, 0xd640, 0x9630, 0x8674, 0xc925, 0x387f, 0x0, 0x0);
        gbc.writeMem(0x202b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xd640);
        EXPECT(gbc.pc(), 0x202c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0149
        gbc.setState(0xee33, 0x5962, 0xfc80, 0x2fe8, 0xd8e1, 0x5386, 0x0, 0x0);
        gbc.writeMem(0xee33, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x5962);
        EXPECT(gbc.pc(), 0xee34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee33), 0xa7);
        // A7 014A
        gbc.setState(0xd0b8, 0x48a1, 0x9d0, 0x1283, 0xc366, 0x8270, 0x0, 0x0);
        gbc.writeMem(0xd0b8, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x48a1);
        EXPECT(gbc.pc(), 0xd0b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0b8), 0xa7);
        // A7 014B
        gbc.setState(0x1b7a, 0x988d, 0xfc70, 0x2b96, 0x2148, 0xad56, 0x1, 0x1);
        gbc.writeMem(0x1b7a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x988d);
        EXPECT(gbc.pc(), 0x1b7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 014C
        gbc.setState(0xa1b9, 0xa0fa, 0xc990, 0xf931, 0xdb6a, 0x5d17, 0x1, 0x0);
        gbc.writeMem(0xa1b9, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xa0fa);
        EXPECT(gbc.pc(), 0xa1ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1b9), 0xa7);
        // A7 014D
        gbc.setState(0x9ff8, 0x2ac2, 0xe8a0, 0x185b, 0x11f, 0x3cba, 0x1, 0x0);
        gbc.writeMem(0x9ff8, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x2ac2);
        EXPECT(gbc.pc(), 0x9ff9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ff8), 0xa7);
        // A7 014E
        gbc.setState(0x6b6d, 0xd98d, 0xc690, 0x7037, 0xeeb5, 0x681d, 0x1, 0x1);
        gbc.writeMem(0x6b6d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xd98d);
        EXPECT(gbc.pc(), 0x6b6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 014F
        gbc.setState(0xce75, 0xf97, 0x720, 0x4f1, 0x56ea, 0x222b, 0x1, 0x0);
        gbc.writeMem(0xce75, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xf97);
        EXPECT(gbc.pc(), 0xce76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce75), 0xa7);
        // A7 0150
        gbc.setState(0x950d, 0x9b07, 0x4fa0, 0xdd46, 0x408a, 0xc871, 0x1, 0x1);
        gbc.writeMem(0x950d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x9b07);
        EXPECT(gbc.pc(), 0x950e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x950d), 0xa7);
        // A7 0151
        gbc.setState(0x4a02, 0xd5e9, 0x760, 0x3a2b, 0x41a9, 0xf980, 0x1, 0x1);
        gbc.writeMem(0x4a02, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xd5e9);
        EXPECT(gbc.pc(), 0x4a03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0152
        gbc.setState(0x3e40, 0xd67a, 0x5490, 0xacca, 0x4aa0, 0x611f, 0x0, 0x1);
        gbc.writeMem(0x3e40, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xd67a);
        EXPECT(gbc.pc(), 0x3e41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0153
        gbc.setState(0x57b4, 0xa349, 0x8b90, 0xa7ef, 0x1604, 0xde50, 0x1, 0x1);
        gbc.writeMem(0x57b4, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xa349);
        EXPECT(gbc.pc(), 0x57b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0154
        gbc.setState(0xe823, 0x40dd, 0x3ce0, 0xe17e, 0xdaaa, 0xa4fb, 0x0, 0x1);
        gbc.writeMem(0xe823, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x40dd);
        EXPECT(gbc.pc(), 0xe824);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe823), 0xa7);
        // A7 0155
        gbc.setState(0xd249, 0x4b9d, 0xc060, 0x594f, 0x1675, 0xc0e0, 0x0, 0x0);
        gbc.writeMem(0xd249, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x4b9d);
        EXPECT(gbc.pc(), 0xd24a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd249), 0xa7);
        // A7 0156
        gbc.setState(0xabfc, 0x4c91, 0xcec0, 0x5c85, 0x3b90, 0x491e, 0x1, 0x1);
        gbc.writeMem(0xabfc, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x4c91);
        EXPECT(gbc.pc(), 0xabfd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabfc), 0xa7);
        // A7 0159
        gbc.setState(0x5cfe, 0x71fe, 0xd980, 0x2d6c, 0xd601, 0x867, 0x1, 0x1);
        gbc.writeMem(0x5cfe, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x71fe);
        EXPECT(gbc.pc(), 0x5cff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 015A
        gbc.setState(0x177, 0xa4d3, 0x2ee0, 0xe04f, 0x75a1, 0x8574, 0x1, 0x0);
        gbc.writeMem(0x177, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xa4d3);
        EXPECT(gbc.pc(), 0x178);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 015B
        gbc.setState(0x7f6f, 0x97c2, 0x9c70, 0x5bcd, 0x9fb5, 0x63b2, 0x0, 0x0);
        gbc.writeMem(0x7f6f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x97c2);
        EXPECT(gbc.pc(), 0x7f70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 015C
        gbc.setState(0xb6a2, 0x19a0, 0xcb40, 0x2a0f, 0x486c, 0x880e, 0x0, 0x1);
        gbc.writeMem(0xb6a2, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x19a0);
        EXPECT(gbc.pc(), 0xb6a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6a2), 0xa7);
        // A7 015D
        gbc.setState(0xa8d7, 0x1ce3, 0x19a0, 0x83ef, 0x30b, 0x9907, 0x1, 0x0);
        gbc.writeMem(0xa8d7, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x1ce3);
        EXPECT(gbc.pc(), 0xa8d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8d7), 0xa7);
        // A7 015E
        gbc.setState(0x2da9, 0xd317, 0x2180, 0x7ed2, 0x6ae6, 0xd24b, 0x1, 0x0);
        gbc.writeMem(0x2da9, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xd317);
        EXPECT(gbc.pc(), 0x2daa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 015F
        gbc.setState(0x4ec3, 0xa585, 0xa110, 0xd32, 0xca2a, 0x2842, 0x0, 0x0);
        gbc.writeMem(0x4ec3, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xa585);
        EXPECT(gbc.pc(), 0x4ec4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0160
        gbc.setState(0x6d83, 0xfb79, 0xe840, 0x7652, 0x6cdd, 0x5f79, 0x0, 0x1);
        gbc.writeMem(0x6d83, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xfb79);
        EXPECT(gbc.pc(), 0x6d84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0161
        gbc.setState(0xfbf, 0x13d7, 0x9180, 0x5003, 0xb692, 0xe612, 0x1, 0x1);
        gbc.writeMem(0xfbf, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x13d7);
        EXPECT(gbc.pc(), 0xfc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0162
        gbc.setState(0x442a, 0x5f15, 0x40b0, 0xc398, 0x2f1e, 0x1a2a, 0x0, 0x1);
        gbc.writeMem(0x442a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x5f15);
        EXPECT(gbc.pc(), 0x442b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0163
        gbc.setState(0x1f29, 0x777f, 0x8a20, 0x358d, 0x6178, 0x3199, 0x0, 0x0);
        gbc.writeMem(0x1f29, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x777f);
        EXPECT(gbc.pc(), 0x1f2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0164
        gbc.setState(0xe1b5, 0xb414, 0xbfc0, 0xefd2, 0x2606, 0x4c74, 0x1, 0x1);
        gbc.writeMem(0xe1b5, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xb414);
        EXPECT(gbc.pc(), 0xe1b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1b5), 0xa7);
        // A7 0165
        gbc.setState(0x6f7c, 0x87fb, 0x330, 0x3f55, 0x4e1a, 0xab5e, 0x0, 0x0);
        gbc.writeMem(0x6f7c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x87fb);
        EXPECT(gbc.pc(), 0x6f7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0166
        gbc.setState(0xed29, 0xbf6d, 0x30e0, 0x9e31, 0xa73f, 0xd264, 0x0, 0x1);
        gbc.writeMem(0xed29, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xbf6d);
        EXPECT(gbc.pc(), 0xed2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed29), 0xa7);
        // A7 0167
        gbc.setState(0x5359, 0xfa49, 0x9900, 0xf1e2, 0xd07d, 0xf1d2, 0x0, 0x0);
        gbc.writeMem(0x5359, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xfa49);
        EXPECT(gbc.pc(), 0x535a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0168
        gbc.setState(0xe7d9, 0x7c56, 0xc70, 0x4a26, 0x6b59, 0xf678, 0x0, 0x1);
        gbc.writeMem(0xe7d9, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x7c56);
        EXPECT(gbc.pc(), 0xe7da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7d9), 0xa7);
        // A7 0169
        gbc.setState(0x9014, 0x415a, 0xc870, 0x2249, 0xf139, 0xa2a6, 0x1, 0x1);
        gbc.writeMem(0x9014, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x415a);
        EXPECT(gbc.pc(), 0x9015);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9014), 0xa7);
        // A7 016A
        gbc.setState(0x701b, 0xccef, 0xc2e0, 0x38df, 0x99b7, 0xc3e1, 0x1, 0x1);
        gbc.writeMem(0x701b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xccef);
        EXPECT(gbc.pc(), 0x701c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 016C
        gbc.setState(0xe91d, 0xa44b, 0xb5a0, 0xe92a, 0xa2a, 0xef75, 0x0, 0x0);
        gbc.writeMem(0xe91d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xa44b);
        EXPECT(gbc.pc(), 0xe91e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe91d), 0xa7);
        // A7 016D
        gbc.setState(0xc933, 0xac51, 0x0, 0x2237, 0x45c1, 0x5585, 0x1, 0x1);
        gbc.writeMem(0xc933, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xac51);
        EXPECT(gbc.pc(), 0xc934);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc933), 0xa7);
        // A7 016F
        gbc.setState(0xb6cd, 0x69d6, 0x930, 0xa1fe, 0x659c, 0x3468, 0x1, 0x1);
        gbc.writeMem(0xb6cd, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x69d6);
        EXPECT(gbc.pc(), 0xb6ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6cd), 0xa7);
        // A7 0170
        gbc.setState(0xb8f4, 0x494b, 0x6a90, 0x85ed, 0x526, 0xb606, 0x0, 0x1);
        gbc.writeMem(0xb8f4, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x494b);
        EXPECT(gbc.pc(), 0xb8f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8f4), 0xa7);
        // A7 0171
        gbc.setState(0x4d9b, 0x34b, 0x8700, 0x823f, 0xa70d, 0x3e6c, 0x1, 0x0);
        gbc.writeMem(0x4d9b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x34b);
        EXPECT(gbc.pc(), 0x4d9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0172
        gbc.setState(0xecdc, 0x483c, 0x110, 0xa437, 0xabeb, 0xde1d, 0x0, 0x0);
        gbc.writeMem(0xecdc, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x483c);
        EXPECT(gbc.pc(), 0xecdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecdc), 0xa7);
        // A7 0173
        gbc.setState(0x4536, 0xd5f3, 0x9c0, 0x82c6, 0xb264, 0x586b, 0x0, 0x1);
        gbc.writeMem(0x4536, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xd5f3);
        EXPECT(gbc.pc(), 0x4537);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0174
        gbc.setState(0x3586, 0x768, 0x94a0, 0x71e4, 0x753f, 0x71ac, 0x0, 0x1);
        gbc.writeMem(0x3586, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x768);
        EXPECT(gbc.pc(), 0x3587);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0175
        gbc.setState(0x165b, 0xa083, 0x1210, 0x6eaf, 0xa519, 0xaeb6, 0x1, 0x1);
        gbc.writeMem(0x165b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xa083);
        EXPECT(gbc.pc(), 0x165c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0176
        gbc.setState(0xee5c, 0x8c07, 0x5f0, 0x368d, 0x5171, 0xe9a0, 0x1, 0x0);
        gbc.writeMem(0xee5c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x8c07);
        EXPECT(gbc.pc(), 0xee5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee5c), 0xa7);
        // A7 0177
        gbc.setState(0xd8f8, 0xe8f5, 0xcd30, 0xd3bf, 0x9c43, 0x4363, 0x1, 0x0);
        gbc.writeMem(0xd8f8, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xe8f5);
        EXPECT(gbc.pc(), 0xd8f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8f8), 0xa7);
        // A7 0178
        gbc.setState(0xdca, 0xfb49, 0xaf50, 0x58f4, 0x866e, 0x622c, 0x1, 0x1);
        gbc.writeMem(0xdca, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xfb49);
        EXPECT(gbc.pc(), 0xdcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0179
        gbc.setState(0x2c7, 0xa6a4, 0xe320, 0xc7d3, 0x5561, 0x597b, 0x1, 0x1);
        gbc.writeMem(0x2c7, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xa6a4);
        EXPECT(gbc.pc(), 0x2c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 017A
        gbc.setState(0x3d68, 0xcd1c, 0xb070, 0x50d3, 0x2b8f, 0xdc98, 0x0, 0x1);
        gbc.writeMem(0x3d68, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xcd1c);
        EXPECT(gbc.pc(), 0x3d69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 017B
        gbc.setState(0x17f2, 0xe355, 0xa180, 0xe8ba, 0xfcad, 0xaaec, 0x1, 0x0);
        gbc.writeMem(0x17f2, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xe355);
        EXPECT(gbc.pc(), 0x17f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 017C
        gbc.setState(0x9953, 0x3f82, 0x3810, 0x2a4d, 0xf5c5, 0x25da, 0x0, 0x0);
        gbc.writeMem(0x9953, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x3f82);
        EXPECT(gbc.pc(), 0x9954);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9953), 0xa7);
        // A7 017D
        gbc.setState(0xb55f, 0x9b, 0x4000, 0x932, 0x445a, 0x6493, 0x1, 0x0);
        gbc.writeMem(0xb55f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x9b);
        EXPECT(gbc.pc(), 0xb560);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb55f), 0xa7);
        // A7 017E
        gbc.setState(0xd69e, 0x1175, 0xf1d0, 0xdc42, 0x29fe, 0x5df5, 0x1, 0x1);
        gbc.writeMem(0xd69e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x1175);
        EXPECT(gbc.pc(), 0xd69f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd69e), 0xa7);
        // A7 017F
        gbc.setState(0xc3ee, 0x46e0, 0x6210, 0xbddd, 0x6d39, 0x22eb, 0x0, 0x0);
        gbc.writeMem(0xc3ee, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x46e0);
        EXPECT(gbc.pc(), 0xc3ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3ee), 0xa7);
        // A7 0180
        gbc.setState(0x5d60, 0xf607, 0xa970, 0x734a, 0x988, 0xa5d6, 0x1, 0x0);
        gbc.writeMem(0x5d60, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xf607);
        EXPECT(gbc.pc(), 0x5d61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0181
        gbc.setState(0xa133, 0x9da5, 0x1710, 0x3ad, 0x2b46, 0x6549, 0x1, 0x1);
        gbc.writeMem(0xa133, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x9da5);
        EXPECT(gbc.pc(), 0xa134);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa133), 0xa7);
        // A7 0182
        gbc.setState(0xc36, 0x6ae5, 0x3500, 0x2a94, 0x27d1, 0x2034, 0x0, 0x1);
        gbc.writeMem(0xc36, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x6ae5);
        EXPECT(gbc.pc(), 0xc37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0183
        gbc.setState(0x35e3, 0xd795, 0xc020, 0x3a04, 0x6bcb, 0x270a, 0x1, 0x0);
        gbc.writeMem(0x35e3, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xd795);
        EXPECT(gbc.pc(), 0x35e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0184
        gbc.setState(0xee01, 0xef50, 0x9be0, 0x35e5, 0xbc4c, 0xa028, 0x1, 0x1);
        gbc.writeMem(0xee01, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xef50);
        EXPECT(gbc.pc(), 0xee02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee01), 0xa7);
        // A7 0185
        gbc.setState(0xc8ab, 0x47ea, 0x2320, 0x7a3e, 0x5601, 0x1c7d, 0x0, 0x1);
        gbc.writeMem(0xc8ab, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x47ea);
        EXPECT(gbc.pc(), 0xc8ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8ab), 0xa7);
        // A7 0186
        gbc.setState(0xa05e, 0xe698, 0xd1e0, 0x65bd, 0xbe2c, 0xa966, 0x1, 0x1);
        gbc.writeMem(0xa05e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xe698);
        EXPECT(gbc.pc(), 0xa05f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa05e), 0xa7);
        // A7 0187
        gbc.setState(0x2881, 0x392b, 0xa720, 0xdd74, 0xc274, 0xcba0, 0x0, 0x1);
        gbc.writeMem(0x2881, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x392b);
        EXPECT(gbc.pc(), 0x2882);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0188
        gbc.setState(0x4b9d, 0x8218, 0x8130, 0xa146, 0xc085, 0xeaaa, 0x1, 0x0);
        gbc.writeMem(0x4b9d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x8218);
        EXPECT(gbc.pc(), 0x4b9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0189
        gbc.setState(0x693, 0xd04d, 0x4c0, 0xbc3a, 0xacd6, 0x6ca7, 0x1, 0x1);
        gbc.writeMem(0x693, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xd04d);
        EXPECT(gbc.pc(), 0x694);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 018A
        gbc.setState(0x78ed, 0xb323, 0xb30, 0x57cb, 0x6225, 0x4a84, 0x1, 0x1);
        gbc.writeMem(0x78ed, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xb323);
        EXPECT(gbc.pc(), 0x78ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 018B
        gbc.setState(0x6032, 0x6f08, 0xe4d0, 0x21ae, 0x1b16, 0xb580, 0x0, 0x1);
        gbc.writeMem(0x6032, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x6f08);
        EXPECT(gbc.pc(), 0x6033);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 018C
        gbc.setState(0x8a48, 0xf7b3, 0xebf0, 0xf9f4, 0x82db, 0x270e, 0x0, 0x0);
        gbc.writeMem(0x8a48, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xf7b3);
        EXPECT(gbc.pc(), 0x8a49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a48), 0xa7);
        // A7 018D
        gbc.setState(0x5f01, 0x2bcd, 0xb840, 0x60d5, 0x2407, 0xde18, 0x1, 0x0);
        gbc.writeMem(0x5f01, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x2bcd);
        EXPECT(gbc.pc(), 0x5f02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 018E
        gbc.setState(0x8d9c, 0x89b0, 0x87c0, 0x78ba, 0xfbb1, 0x28eb, 0x1, 0x0);
        gbc.writeMem(0x8d9c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x89b0);
        EXPECT(gbc.pc(), 0x8d9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d9c), 0xa7);
        // A7 018F
        gbc.setState(0x4257, 0x910d, 0xf330, 0x418e, 0x6910, 0x9e1a, 0x0, 0x0);
        gbc.writeMem(0x4257, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x910d);
        EXPECT(gbc.pc(), 0x4258);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0190
        gbc.setState(0xa3e4, 0xa67a, 0x3250, 0x211a, 0xb379, 0x15d3, 0x1, 0x1);
        gbc.writeMem(0xa3e4, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xa67a);
        EXPECT(gbc.pc(), 0xa3e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3e4), 0xa7);
        // A7 0191
        gbc.setState(0x6432, 0x28b6, 0x2f70, 0xc265, 0xe423, 0xc328, 0x1, 0x1);
        gbc.writeMem(0x6432, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x28b6);
        EXPECT(gbc.pc(), 0x6433);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0192
        gbc.setState(0x2774, 0x6d80, 0x1b30, 0x75f9, 0x1ea0, 0xadbc, 0x0, 0x1);
        gbc.writeMem(0x2774, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x6d80);
        EXPECT(gbc.pc(), 0x2775);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0193
        gbc.setState(0xe705, 0x76b2, 0xa000, 0x15d5, 0x958b, 0x7f70, 0x1, 0x1);
        gbc.writeMem(0xe705, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x76b2);
        EXPECT(gbc.pc(), 0xe706);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe705), 0xa7);
        // A7 0194
        gbc.setState(0x40d2, 0xffc7, 0xfe10, 0xdc15, 0xecdc, 0xe90, 0x1, 0x0);
        gbc.writeMem(0x40d2, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xffc7);
        EXPECT(gbc.pc(), 0x40d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0195
        gbc.setState(0x6227, 0x1eda, 0x4090, 0x13d9, 0xf98a, 0x8f1f, 0x1, 0x0);
        gbc.writeMem(0x6227, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x1eda);
        EXPECT(gbc.pc(), 0x6228);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0196
        gbc.setState(0xd5c3, 0x7812, 0x9ec0, 0x4267, 0x1d90, 0x8860, 0x1, 0x0);
        gbc.writeMem(0xd5c3, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x7812);
        EXPECT(gbc.pc(), 0xd5c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5c3), 0xa7);
        // A7 0197
        gbc.setState(0xe0dd, 0x2bd8, 0xc540, 0xd146, 0x499b, 0x441d, 0x1, 0x0);
        gbc.writeMem(0xe0dd, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x2bd8);
        EXPECT(gbc.pc(), 0xe0de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0dd), 0xa7);
        // A7 0198
        gbc.setState(0x5fcb, 0x38e7, 0x1cc0, 0xdfd6, 0x7b28, 0xfcc, 0x0, 0x1);
        gbc.writeMem(0x5fcb, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x38e7);
        EXPECT(gbc.pc(), 0x5fcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0199
        gbc.setState(0xc4f7, 0x25b1, 0x4e40, 0x6451, 0x7304, 0x1cb5, 0x0, 0x1);
        gbc.writeMem(0xc4f7, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x25b1);
        EXPECT(gbc.pc(), 0xc4f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4f7), 0xa7);
        // A7 019B
        gbc.setState(0x90b4, 0x49b6, 0x4c10, 0xbc0d, 0x8d9, 0x707e, 0x0, 0x1);
        gbc.writeMem(0x90b4, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x49b6);
        EXPECT(gbc.pc(), 0x90b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90b4), 0xa7);
        // A7 019C
        gbc.setState(0x1c29, 0xbd43, 0x44d0, 0x6884, 0x9418, 0xde84, 0x1, 0x0);
        gbc.writeMem(0x1c29, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xbd43);
        EXPECT(gbc.pc(), 0x1c2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 019D
        gbc.setState(0x2cc7, 0xd22d, 0xb1b0, 0x56ae, 0x244a, 0x22dd, 0x0, 0x1);
        gbc.writeMem(0x2cc7, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xd22d);
        EXPECT(gbc.pc(), 0x2cc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 019E
        gbc.setState(0x4997, 0x8a12, 0x4630, 0xcf0c, 0x1b6c, 0x8139, 0x0, 0x0);
        gbc.writeMem(0x4997, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x8a12);
        EXPECT(gbc.pc(), 0x4998);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 019F
        gbc.setState(0x6dfe, 0xcfa2, 0x8240, 0x1c0f, 0xe6c6, 0xf9b0, 0x1, 0x0);
        gbc.writeMem(0x6dfe, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xcfa2);
        EXPECT(gbc.pc(), 0x6dff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01A0
        gbc.setState(0x542c, 0x57de, 0xa560, 0xfa1f, 0x68c7, 0x2a23, 0x1, 0x1);
        gbc.writeMem(0x542c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x57de);
        EXPECT(gbc.pc(), 0x542d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01A1
        gbc.setState(0xc756, 0xf69b, 0x42c0, 0x3a0a, 0x4b29, 0x808b, 0x1, 0x0);
        gbc.writeMem(0xc756, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xf69b);
        EXPECT(gbc.pc(), 0xc757);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc756), 0xa7);
        // A7 01A2
        gbc.setState(0x5746, 0x1a75, 0x8bc0, 0xd768, 0xb39d, 0xce87, 0x1, 0x1);
        gbc.writeMem(0x5746, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x1a75);
        EXPECT(gbc.pc(), 0x5747);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01A3
        gbc.setState(0x8d86, 0x20c5, 0x4c20, 0x1840, 0x2906, 0xdb9b, 0x0, 0x0);
        gbc.writeMem(0x8d86, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x20c5);
        EXPECT(gbc.pc(), 0x8d87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d86), 0xa7);
        // A7 01A4
        gbc.setState(0x5c71, 0x5e06, 0x2250, 0xad9b, 0x266, 0x44d8, 0x1, 0x1);
        gbc.writeMem(0x5c71, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x5e06);
        EXPECT(gbc.pc(), 0x5c72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01A5
        gbc.setState(0xe224, 0xc65e, 0x5d80, 0xbfc3, 0x4070, 0xa1c9, 0x1, 0x1);
        gbc.writeMem(0xe224, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xc65e);
        EXPECT(gbc.pc(), 0xe225);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe224), 0xa7);
        // A7 01A6
        gbc.setState(0xc16, 0x85e7, 0xd740, 0x28b3, 0x2c81, 0xda, 0x1, 0x1);
        gbc.writeMem(0xc16, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x85e7);
        EXPECT(gbc.pc(), 0xc17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01A7
        gbc.setState(0x89cb, 0xabb2, 0x38b0, 0x18f3, 0xbce0, 0x39e5, 0x0, 0x1);
        gbc.writeMem(0x89cb, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xabb2);
        EXPECT(gbc.pc(), 0x89cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89cb), 0xa7);
        // A7 01A8
        gbc.setState(0xb2a6, 0x825b, 0xb0f0, 0x5a21, 0x291c, 0x4eb8, 0x1, 0x0);
        gbc.writeMem(0xb2a6, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x825b);
        EXPECT(gbc.pc(), 0xb2a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2a6), 0xa7);
        // A7 01A9
        gbc.setState(0x6ea9, 0xe376, 0x6550, 0xb564, 0xfd04, 0x70da, 0x0, 0x0);
        gbc.writeMem(0x6ea9, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xe376);
        EXPECT(gbc.pc(), 0x6eaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01AA
        gbc.setState(0x2164, 0xbb67, 0x8490, 0x9690, 0xccae, 0x8d9c, 0x1, 0x0);
        gbc.writeMem(0x2164, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xbb67);
        EXPECT(gbc.pc(), 0x2165);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01AB
        gbc.setState(0x41b2, 0x1f5e, 0x44b0, 0x8491, 0x7733, 0x21ae, 0x1, 0x1);
        gbc.writeMem(0x41b2, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x1f5e);
        EXPECT(gbc.pc(), 0x41b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01AC
        gbc.setState(0x77da, 0x4316, 0x9410, 0x93b5, 0x74, 0xe5e4, 0x1, 0x0);
        gbc.writeMem(0x77da, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x4316);
        EXPECT(gbc.pc(), 0x77db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01AD
        gbc.setState(0x5614, 0x69bb, 0xab90, 0x9175, 0xf42e, 0x3004, 0x0, 0x0);
        gbc.writeMem(0x5614, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x69bb);
        EXPECT(gbc.pc(), 0x5615);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01AE
        gbc.setState(0xac86, 0xb6f9, 0xbce0, 0x4c1e, 0xbc19, 0x9a26, 0x1, 0x0);
        gbc.writeMem(0xac86, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xb6f9);
        EXPECT(gbc.pc(), 0xac87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac86), 0xa7);
        // A7 01AF
        gbc.setState(0x1adb, 0x9ded, 0xdfd0, 0x2c61, 0xf01, 0xf2f9, 0x0, 0x0);
        gbc.writeMem(0x1adb, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x9ded);
        EXPECT(gbc.pc(), 0x1adc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01B0
        gbc.setState(0xe8f8, 0x6b6c, 0xca90, 0x8f27, 0xea4e, 0x459a, 0x1, 0x0);
        gbc.writeMem(0xe8f8, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x6b6c);
        EXPECT(gbc.pc(), 0xe8f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8f8), 0xa7);
        // A7 01B1
        gbc.setState(0xe1b7, 0xd6e0, 0xfe70, 0xe27f, 0x1df0, 0xe163, 0x1, 0x1);
        gbc.writeMem(0xe1b7, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xd6e0);
        EXPECT(gbc.pc(), 0xe1b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1b7), 0xa7);
        // A7 01B2
        gbc.setState(0x1107, 0x580, 0x6af0, 0x323a, 0x123f, 0xbf9d, 0x1, 0x1);
        gbc.writeMem(0x1107, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x580);
        EXPECT(gbc.pc(), 0x1108);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01B3
        gbc.setState(0x767, 0x99, 0x4a30, 0xad01, 0xcaaf, 0x68c0, 0x0, 0x0);
        gbc.writeMem(0x767, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x99);
        EXPECT(gbc.pc(), 0x768);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01B4
        gbc.setState(0x7f62, 0xb1ea, 0xbcf0, 0x63f5, 0xbded, 0xc12e, 0x0, 0x1);
        gbc.writeMem(0x7f62, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xb1ea);
        EXPECT(gbc.pc(), 0x7f63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01B5
        gbc.setState(0x9e94, 0x1dde, 0x41c0, 0x677b, 0x732e, 0x998d, 0x0, 0x0);
        gbc.writeMem(0x9e94, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x1dde);
        EXPECT(gbc.pc(), 0x9e95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e94), 0xa7);
        // A7 01B6
        gbc.setState(0xc9f7, 0x6c7a, 0x7fb0, 0xbd45, 0x7032, 0xf155, 0x0, 0x0);
        gbc.writeMem(0xc9f7, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x6c7a);
        EXPECT(gbc.pc(), 0xc9f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9f7), 0xa7);
        // A7 01B7
        gbc.setState(0xb665, 0x42de, 0x9570, 0x71fb, 0x7a8a, 0x9980, 0x0, 0x0);
        gbc.writeMem(0xb665, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x42de);
        EXPECT(gbc.pc(), 0xb666);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb665), 0xa7);
        // A7 01B8
        gbc.setState(0xce82, 0x39be, 0x7f30, 0x27b5, 0x62a, 0x5fb1, 0x1, 0x1);
        gbc.writeMem(0xce82, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x39be);
        EXPECT(gbc.pc(), 0xce83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce82), 0xa7);
        // A7 01B9
        gbc.setState(0x8322, 0xa12, 0x8290, 0xdbca, 0xdc8f, 0x8f8a, 0x0, 0x1);
        gbc.writeMem(0x8322, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xa12);
        EXPECT(gbc.pc(), 0x8323);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8322), 0xa7);
        // A7 01BA
        gbc.setState(0xc6cd, 0xe14, 0x6b10, 0x15a3, 0xd965, 0xb82a, 0x1, 0x1);
        gbc.writeMem(0xc6cd, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xe14);
        EXPECT(gbc.pc(), 0xc6ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6cd), 0xa7);
        // A7 01BB
        gbc.setState(0x7b3d, 0x4943, 0x4280, 0x3b1d, 0x53b5, 0x6747, 0x1, 0x0);
        gbc.writeMem(0x7b3d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x4943);
        EXPECT(gbc.pc(), 0x7b3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01BC
        gbc.setState(0x10e4, 0x6855, 0xddb0, 0x52d6, 0x672b, 0xd76d, 0x0, 0x0);
        gbc.writeMem(0x10e4, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x6855);
        EXPECT(gbc.pc(), 0x10e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01BD
        gbc.setState(0x89ce, 0x6319, 0x42f0, 0xeb3a, 0x528, 0x9816, 0x1, 0x0);
        gbc.writeMem(0x89ce, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x6319);
        EXPECT(gbc.pc(), 0x89cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89ce), 0xa7);
        // A7 01BE
        gbc.setState(0x69c1, 0xd5e1, 0x77e0, 0xf3ca, 0x2f1c, 0xe01a, 0x1, 0x0);
        gbc.writeMem(0x69c1, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xd5e1);
        EXPECT(gbc.pc(), 0x69c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01BF
        gbc.setState(0xd5ff, 0xea2e, 0x2740, 0x9f2d, 0x9e30, 0x8fff, 0x0, 0x1);
        gbc.writeMem(0xd5ff, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xea2e);
        EXPECT(gbc.pc(), 0xd600);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5ff), 0xa7);
        // A7 01C0
        gbc.setState(0x1b3, 0xcee6, 0x7180, 0x3ac8, 0xbb95, 0x14c4, 0x0, 0x0);
        gbc.writeMem(0x1b3, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xcee6);
        EXPECT(gbc.pc(), 0x1b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01C1
        gbc.setState(0x5cc6, 0xb6c0, 0x64f0, 0x780b, 0x3d4f, 0x33d4, 0x1, 0x0);
        gbc.writeMem(0x5cc6, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xb6c0);
        EXPECT(gbc.pc(), 0x5cc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01C2
        gbc.setState(0x8e37, 0xda8e, 0x4b40, 0x4ce8, 0xb23b, 0x41c9, 0x1, 0x0);
        gbc.writeMem(0x8e37, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xda8e);
        EXPECT(gbc.pc(), 0x8e38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e37), 0xa7);
        // A7 01C3
        gbc.setState(0xc91f, 0xaae2, 0x3c30, 0x7471, 0xc2ee, 0x410c, 0x0, 0x0);
        gbc.writeMem(0xc91f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xaae2);
        EXPECT(gbc.pc(), 0xc920);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc91f), 0xa7);
        // A7 01C4
        gbc.setState(0x9026, 0xedea, 0xf000, 0x6a6d, 0xa8c0, 0xcdd2, 0x1, 0x1);
        gbc.writeMem(0x9026, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xedea);
        EXPECT(gbc.pc(), 0x9027);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9026), 0xa7);
        // A7 01C5
        gbc.setState(0x86f9, 0x13da, 0x55c0, 0x9a29, 0x5957, 0x8783, 0x0, 0x0);
        gbc.writeMem(0x86f9, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x13da);
        EXPECT(gbc.pc(), 0x86fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86f9), 0xa7);
        // A7 01C6
        gbc.setState(0x237e, 0xb48, 0x53f0, 0x3d94, 0x13bb, 0x4349, 0x0, 0x0);
        gbc.writeMem(0x237e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xb48);
        EXPECT(gbc.pc(), 0x237f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01C7
        gbc.setState(0xe716, 0x1d8, 0xa6c0, 0x9077, 0x16d2, 0x4c46, 0x0, 0x1);
        gbc.writeMem(0xe716, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x1d8);
        EXPECT(gbc.pc(), 0xe717);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe716), 0xa7);
        // A7 01C8
        gbc.setState(0x13d5, 0x627d, 0x67d0, 0x7a39, 0x5bf3, 0x817c, 0x1, 0x0);
        gbc.writeMem(0x13d5, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x627d);
        EXPECT(gbc.pc(), 0x13d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01C9
        gbc.setState(0xc6c5, 0x9c2d, 0x3570, 0x4a87, 0xf3c5, 0x1697, 0x1, 0x1);
        gbc.writeMem(0xc6c5, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x9c2d);
        EXPECT(gbc.pc(), 0xc6c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6c5), 0xa7);
        // A7 01CB
        gbc.setState(0xe5f3, 0x4347, 0x6060, 0x860e, 0xd751, 0x3275, 0x1, 0x1);
        gbc.writeMem(0xe5f3, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x4347);
        EXPECT(gbc.pc(), 0xe5f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5f3), 0xa7);
        // A7 01CC
        gbc.setState(0xad58, 0xd06e, 0x1df0, 0x3aec, 0x821, 0x1da7, 0x1, 0x0);
        gbc.writeMem(0xad58, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xd06e);
        EXPECT(gbc.pc(), 0xad59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad58), 0xa7);
        // A7 01CD
        gbc.setState(0x148, 0x871f, 0xd060, 0xf9f5, 0xc930, 0xbd45, 0x1, 0x0);
        gbc.writeMem(0x148, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x871f);
        EXPECT(gbc.pc(), 0x149);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01CE
        gbc.setState(0x2642, 0x3732, 0x770, 0xbe26, 0xfab0, 0x6cf7, 0x0, 0x0);
        gbc.writeMem(0x2642, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x3732);
        EXPECT(gbc.pc(), 0x2643);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01CF
        gbc.setState(0x74d, 0x41fe, 0x8550, 0x66ae, 0x47aa, 0x4c2e, 0x1, 0x1);
        gbc.writeMem(0x74d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x41fe);
        EXPECT(gbc.pc(), 0x74e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01D0
        gbc.setState(0x6b52, 0x6852, 0xc9c0, 0xb229, 0xfa32, 0xcefe, 0x0, 0x0);
        gbc.writeMem(0x6b52, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x6852);
        EXPECT(gbc.pc(), 0x6b53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01D1
        gbc.setState(0xd70b, 0x1cf0, 0xc040, 0xcd8, 0x18fe, 0xc29a, 0x1, 0x1);
        gbc.writeMem(0xd70b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x1cf0);
        EXPECT(gbc.pc(), 0xd70c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd70b), 0xa7);
        // A7 01D2
        gbc.setState(0xe509, 0xb757, 0x16f0, 0xdc5c, 0x3893, 0x9b9b, 0x1, 0x0);
        gbc.writeMem(0xe509, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xb757);
        EXPECT(gbc.pc(), 0xe50a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe509), 0xa7);
        // A7 01D3
        gbc.setState(0x5341, 0xd59a, 0xabe0, 0x638e, 0x8d9a, 0x6b70, 0x0, 0x0);
        gbc.writeMem(0x5341, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xd59a);
        EXPECT(gbc.pc(), 0x5342);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01D4
        gbc.setState(0xe370, 0x2498, 0x9800, 0x4a88, 0x3a8, 0xd1d6, 0x0, 0x1);
        gbc.writeMem(0xe370, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x2498);
        EXPECT(gbc.pc(), 0xe371);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe370), 0xa7);
        // A7 01D5
        gbc.setState(0x1dbd, 0x9a1a, 0xe240, 0xb02e, 0x9472, 0x816, 0x1, 0x1);
        gbc.writeMem(0x1dbd, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x9a1a);
        EXPECT(gbc.pc(), 0x1dbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01D6
        gbc.setState(0x26a6, 0x8163, 0x7170, 0x8487, 0x5011, 0x8094, 0x1, 0x0);
        gbc.writeMem(0x26a6, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x8163);
        EXPECT(gbc.pc(), 0x26a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01D7
        gbc.setState(0xf0f, 0x2f21, 0x15b0, 0x275d, 0xdd96, 0x3165, 0x1, 0x0);
        gbc.writeMem(0xf0f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x2f21);
        EXPECT(gbc.pc(), 0xf10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01D8
        gbc.setState(0xd9fc, 0xa46b, 0x7980, 0x528d, 0xa930, 0xe390, 0x0, 0x0);
        gbc.writeMem(0xd9fc, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xa46b);
        EXPECT(gbc.pc(), 0xd9fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9fc), 0xa7);
        // A7 01D9
        gbc.setState(0x9c36, 0xb75, 0x5ed0, 0x7b00, 0x9d6f, 0xcd07, 0x1, 0x0);
        gbc.writeMem(0x9c36, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xb75);
        EXPECT(gbc.pc(), 0x9c37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c36), 0xa7);
        // A7 01DA
        gbc.setState(0xe062, 0x5b52, 0xced0, 0x7def, 0x4517, 0x653a, 0x1, 0x1);
        gbc.writeMem(0xe062, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x5b52);
        EXPECT(gbc.pc(), 0xe063);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe062), 0xa7);
        // A7 01DB
        gbc.setState(0x23fd, 0x4c3, 0xe090, 0x90a2, 0xaf9e, 0x22d, 0x0, 0x1);
        gbc.writeMem(0x23fd, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x4c3);
        EXPECT(gbc.pc(), 0x23fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01DC
        gbc.setState(0x66a6, 0x4c52, 0xc390, 0xed7d, 0xa7b7, 0xab02, 0x0, 0x0);
        gbc.writeMem(0x66a6, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x4c52);
        EXPECT(gbc.pc(), 0x66a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01DD
        gbc.setState(0x69ed, 0x95fe, 0x8ea0, 0x49f6, 0x5ab7, 0x4f4a, 0x0, 0x0);
        gbc.writeMem(0x69ed, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x95fe);
        EXPECT(gbc.pc(), 0x69ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01DE
        gbc.setState(0x856b, 0x931c, 0x2ff0, 0x147c, 0x6b3a, 0xcbe4, 0x0, 0x0);
        gbc.writeMem(0x856b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x931c);
        EXPECT(gbc.pc(), 0x856c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x856b), 0xa7);
        // A7 01DF
        gbc.setState(0x6190, 0x41bd, 0xec10, 0x583d, 0xe8bc, 0x79b9, 0x0, 0x0);
        gbc.writeMem(0x6190, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x41bd);
        EXPECT(gbc.pc(), 0x6191);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01E0
        gbc.setState(0xae20, 0x55fb, 0xbe40, 0x4fec, 0x210f, 0x8308, 0x1, 0x0);
        gbc.writeMem(0xae20, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x55fb);
        EXPECT(gbc.pc(), 0xae21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae20), 0xa7);
        // A7 01E1
        gbc.setState(0x5b75, 0x3bdc, 0x6ec0, 0x4415, 0x3f77, 0xb275, 0x0, 0x1);
        gbc.writeMem(0x5b75, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x3bdc);
        EXPECT(gbc.pc(), 0x5b76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01E2
        gbc.setState(0x305d, 0xc4f9, 0xbff0, 0x5940, 0xf354, 0x374, 0x0, 0x0);
        gbc.writeMem(0x305d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xc4f9);
        EXPECT(gbc.pc(), 0x305e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01E3
        gbc.setState(0x4b98, 0x7a4, 0xf320, 0x6c7b, 0x371f, 0xe765, 0x0, 0x1);
        gbc.writeMem(0x4b98, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x7a4);
        EXPECT(gbc.pc(), 0x4b99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01E4
        gbc.setState(0x5ca6, 0x9449, 0x4ef0, 0x87f4, 0x9558, 0x3141, 0x1, 0x0);
        gbc.writeMem(0x5ca6, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x9449);
        EXPECT(gbc.pc(), 0x5ca7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01E5
        gbc.setState(0xe51f, 0x9e2f, 0xb620, 0xd9c7, 0x5f0a, 0xfc29, 0x0, 0x0);
        gbc.writeMem(0xe51f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x9e2f);
        EXPECT(gbc.pc(), 0xe520);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe51f), 0xa7);
        // A7 01E6
        gbc.setState(0x3cc9, 0x1025, 0x5ce0, 0x306f, 0xacf8, 0x29ea, 0x1, 0x0);
        gbc.writeMem(0x3cc9, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x1025);
        EXPECT(gbc.pc(), 0x3cca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01E7
        gbc.setState(0x4363, 0xc740, 0xfd50, 0x6c15, 0xa770, 0x46d3, 0x1, 0x0);
        gbc.writeMem(0x4363, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xc740);
        EXPECT(gbc.pc(), 0x4364);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01E8
        gbc.setState(0xa773, 0x8988, 0x26c0, 0x3547, 0x2a8f, 0x2a46, 0x1, 0x1);
        gbc.writeMem(0xa773, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x8988);
        EXPECT(gbc.pc(), 0xa774);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa773), 0xa7);
        // A7 01E9
        gbc.setState(0xead8, 0x1413, 0xf00, 0x53e2, 0x7ab8, 0xf8f4, 0x0, 0x1);
        gbc.writeMem(0xead8, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x1413);
        EXPECT(gbc.pc(), 0xead9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xead8), 0xa7);
        // A7 01EA
        gbc.setState(0xbc5, 0x2592, 0xa010, 0x37f4, 0x8aa2, 0x56e8, 0x1, 0x1);
        gbc.writeMem(0xbc5, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x2592);
        EXPECT(gbc.pc(), 0xbc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01EB
        gbc.setState(0x3dcb, 0xdc31, 0x39d0, 0x360c, 0xcdc3, 0xa51b, 0x0, 0x0);
        gbc.writeMem(0x3dcb, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xdc31);
        EXPECT(gbc.pc(), 0x3dcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01EC
        gbc.setState(0xeae2, 0xf950, 0xc0c0, 0x3d4c, 0x52b9, 0xd7a8, 0x0, 0x0);
        gbc.writeMem(0xeae2, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xf950);
        EXPECT(gbc.pc(), 0xeae3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeae2), 0xa7);
        // A7 01ED
        gbc.setState(0x2a66, 0xe4b, 0x8320, 0xdd7, 0xf02e, 0xa3a1, 0x1, 0x1);
        gbc.writeMem(0x2a66, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xe4b);
        EXPECT(gbc.pc(), 0x2a67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01EE
        gbc.setState(0x4f4a, 0xf893, 0xaad0, 0xedda, 0xc0bd, 0x6bf5, 0x0, 0x1);
        gbc.writeMem(0x4f4a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xf893);
        EXPECT(gbc.pc(), 0x4f4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01EF
        gbc.setState(0x4f61, 0xbb64, 0xeb70, 0xa1ce, 0xed3e, 0x7286, 0x0, 0x0);
        gbc.writeMem(0x4f61, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xbb64);
        EXPECT(gbc.pc(), 0x4f62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01F0
        gbc.setState(0x4fde, 0x34fc, 0xf720, 0x3715, 0x7192, 0x49f1, 0x0, 0x0);
        gbc.writeMem(0x4fde, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x34fc);
        EXPECT(gbc.pc(), 0x4fdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01F1
        gbc.setState(0xb180, 0x1bf2, 0xf4f0, 0x31b3, 0x7deb, 0x7e25, 0x0, 0x0);
        gbc.writeMem(0xb180, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x1bf2);
        EXPECT(gbc.pc(), 0xb181);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb180), 0xa7);
        // A7 01F2
        gbc.setState(0x328d, 0x34d8, 0x34e0, 0xdbd8, 0x4912, 0x9388, 0x0, 0x0);
        gbc.writeMem(0x328d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x34d8);
        EXPECT(gbc.pc(), 0x328e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01F3
        gbc.setState(0xbdf7, 0x8055, 0x2d10, 0x4d10, 0x372a, 0x9c81, 0x1, 0x0);
        gbc.writeMem(0xbdf7, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x8055);
        EXPECT(gbc.pc(), 0xbdf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdf7), 0xa7);
        // A7 01F4
        gbc.setState(0xae04, 0x42e1, 0x860, 0xfd07, 0x6bcf, 0xca5f, 0x0, 0x1);
        gbc.writeMem(0xae04, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x42e1);
        EXPECT(gbc.pc(), 0xae05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae04), 0xa7);
        // A7 01F5
        gbc.setState(0x2b06, 0x681f, 0x6110, 0x7bcb, 0x21e2, 0x841b, 0x1, 0x0);
        gbc.writeMem(0x2b06, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x681f);
        EXPECT(gbc.pc(), 0x2b07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01F6
        gbc.setState(0xc4cb, 0x5ca9, 0x2fe0, 0x7ed2, 0x1e3e, 0x1e86, 0x0, 0x1);
        gbc.writeMem(0xc4cb, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x5ca9);
        EXPECT(gbc.pc(), 0xc4cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4cb), 0xa7);
        // A7 01F7
        gbc.setState(0x5840, 0x7c0e, 0x7820, 0x4fcd, 0x3b3f, 0x8c31, 0x0, 0x1);
        gbc.writeMem(0x5840, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x7c0e);
        EXPECT(gbc.pc(), 0x5841);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01F9
        gbc.setState(0x3f0d, 0xf511, 0xf440, 0x8723, 0x6da2, 0xa5b6, 0x1, 0x1);
        gbc.writeMem(0x3f0d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xf511);
        EXPECT(gbc.pc(), 0x3f0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01FA
        gbc.setState(0x8564, 0x7e31, 0xa780, 0xc316, 0xddc4, 0xbc86, 0x0, 0x1);
        gbc.writeMem(0x8564, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x7e31);
        EXPECT(gbc.pc(), 0x8565);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8564), 0xa7);
        // A7 01FB
        gbc.setState(0x5991, 0xfd97, 0x6190, 0xb553, 0x22f, 0x6794, 0x1, 0x0);
        gbc.writeMem(0x5991, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xfd97);
        EXPECT(gbc.pc(), 0x5992);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01FC
        gbc.setState(0x3120, 0xb772, 0x5d30, 0x7705, 0x5bca, 0x32c5, 0x1, 0x0);
        gbc.writeMem(0x3120, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xb772);
        EXPECT(gbc.pc(), 0x3121);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 01FD
        gbc.setState(0xd4f6, 0x22cf, 0xa520, 0xf0a2, 0xd5ab, 0xa44e, 0x0, 0x1);
        gbc.writeMem(0xd4f6, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x22cf);
        EXPECT(gbc.pc(), 0xd4f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4f6), 0xa7);
        // A7 01FE
        gbc.setState(0xeb1a, 0x76b6, 0xe650, 0x65a5, 0xa6f5, 0x4bbb, 0x1, 0x0);
        gbc.writeMem(0xeb1a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x76b6);
        EXPECT(gbc.pc(), 0xeb1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb1a), 0xa7);
        // A7 01FF
        gbc.setState(0xc5fd, 0xa188, 0x5a00, 0x18f1, 0xf8c8, 0xa1df, 0x1, 0x0);
        gbc.writeMem(0xc5fd, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xa188);
        EXPECT(gbc.pc(), 0xc5fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5fd), 0xa7);
        // A7 0200
        gbc.setState(0x493b, 0x1cf6, 0x82a0, 0xc7c8, 0x79b0, 0x663e, 0x0, 0x1);
        gbc.writeMem(0x493b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x1cf6);
        EXPECT(gbc.pc(), 0x493c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0201
        gbc.setState(0xc326, 0xa9ec, 0x9490, 0x14b9, 0xe071, 0x7142, 0x0, 0x1);
        gbc.writeMem(0xc326, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xa9ec);
        EXPECT(gbc.pc(), 0xc327);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc326), 0xa7);
        // A7 0202
        gbc.setState(0x6a1b, 0x8c38, 0x43b0, 0x7c0f, 0xe7d, 0x2ea, 0x1, 0x1);
        gbc.writeMem(0x6a1b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x8c38);
        EXPECT(gbc.pc(), 0x6a1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0203
        gbc.setState(0x7a7b, 0x3879, 0xfbd0, 0xf218, 0x6a90, 0x90c7, 0x1, 0x1);
        gbc.writeMem(0x7a7b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x3879);
        EXPECT(gbc.pc(), 0x7a7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0204
        gbc.setState(0x5a6e, 0xa388, 0x49c0, 0x8e75, 0x9e5c, 0x9d8d, 0x1, 0x1);
        gbc.writeMem(0x5a6e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xa388);
        EXPECT(gbc.pc(), 0x5a6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0205
        gbc.setState(0x94ae, 0x2f37, 0xc760, 0x6369, 0x4ed6, 0x3a22, 0x1, 0x0);
        gbc.writeMem(0x94ae, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x2f37);
        EXPECT(gbc.pc(), 0x94af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94ae), 0xa7);
        // A7 0206
        gbc.setState(0x625, 0xa0d5, 0x3c30, 0xd9c3, 0x2a5d, 0xd31c, 0x0, 0x1);
        gbc.writeMem(0x625, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xa0d5);
        EXPECT(gbc.pc(), 0x626);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0207
        gbc.setState(0xd4e8, 0x6a7f, 0xa920, 0x96d3, 0xa740, 0x7008, 0x1, 0x1);
        gbc.writeMem(0xd4e8, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x6a7f);
        EXPECT(gbc.pc(), 0xd4e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4e8), 0xa7);
        // A7 0208
        gbc.setState(0x9f1e, 0x480b, 0x6270, 0x9401, 0xc9e, 0x9fa1, 0x1, 0x1);
        gbc.writeMem(0x9f1e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x480b);
        EXPECT(gbc.pc(), 0x9f1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f1e), 0xa7);
        // A7 0209
        gbc.setState(0x5307, 0xccec, 0xfb40, 0x6cf1, 0x585, 0xafdb, 0x1, 0x1);
        gbc.writeMem(0x5307, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xccec);
        EXPECT(gbc.pc(), 0x5308);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 020A
        gbc.setState(0xe75f, 0x7c92, 0xaac0, 0x2d66, 0xf660, 0x285e, 0x1, 0x1);
        gbc.writeMem(0xe75f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x7c92);
        EXPECT(gbc.pc(), 0xe760);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe75f), 0xa7);
        // A7 020B
        gbc.setState(0x8d7a, 0x202d, 0xa3a0, 0xb408, 0x88c7, 0x8789, 0x0, 0x1);
        gbc.writeMem(0x8d7a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x202d);
        EXPECT(gbc.pc(), 0x8d7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d7a), 0xa7);
        // A7 020C
        gbc.setState(0x1c94, 0x696b, 0x3150, 0x5b06, 0x5f21, 0xc4ea, 0x1, 0x0);
        gbc.writeMem(0x1c94, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x696b);
        EXPECT(gbc.pc(), 0x1c95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 020E
        gbc.setState(0x9097, 0x687d, 0xf6d0, 0x477d, 0xd43c, 0x37a1, 0x1, 0x0);
        gbc.writeMem(0x9097, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x687d);
        EXPECT(gbc.pc(), 0x9098);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9097), 0xa7);
        // A7 020F
        gbc.setState(0xd62b, 0x5e2e, 0xbfe0, 0x56ef, 0x7ea1, 0x4d7e, 0x1, 0x1);
        gbc.writeMem(0xd62b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x5e2e);
        EXPECT(gbc.pc(), 0xd62c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd62b), 0xa7);
        // A7 0210
        gbc.setState(0x14ec, 0x7920, 0x4920, 0x86df, 0x69b8, 0xfef8, 0x1, 0x0);
        gbc.writeMem(0x14ec, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x7920);
        EXPECT(gbc.pc(), 0x14ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0211
        gbc.setState(0xb3ad, 0x17e0, 0x67e0, 0x2a13, 0xe35d, 0x208f, 0x1, 0x0);
        gbc.writeMem(0xb3ad, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x17e0);
        EXPECT(gbc.pc(), 0xb3ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3ad), 0xa7);
        // A7 0212
        gbc.setState(0xab71, 0xec41, 0xcc10, 0x2ff7, 0xcd19, 0x873d, 0x1, 0x1);
        gbc.writeMem(0xab71, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xec41);
        EXPECT(gbc.pc(), 0xab72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab71), 0xa7);
        // A7 0213
        gbc.setState(0xacd0, 0x98b1, 0x2cf0, 0xaa18, 0x2405, 0x3a1d, 0x0, 0x1);
        gbc.writeMem(0xacd0, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x98b1);
        EXPECT(gbc.pc(), 0xacd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacd0), 0xa7);
        // A7 0214
        gbc.setState(0xd9ce, 0x2b67, 0x8400, 0x212c, 0xd2b, 0xac64, 0x0, 0x1);
        gbc.writeMem(0xd9ce, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x2b67);
        EXPECT(gbc.pc(), 0xd9cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9ce), 0xa7);
        // A7 0215
        gbc.setState(0x132f, 0xce5d, 0xf720, 0xc223, 0x412, 0xa8e1, 0x1, 0x0);
        gbc.writeMem(0x132f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xce5d);
        EXPECT(gbc.pc(), 0x1330);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0216
        gbc.setState(0x9813, 0xefdd, 0x650, 0xa4dd, 0x3929, 0x2102, 0x1, 0x0);
        gbc.writeMem(0x9813, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xefdd);
        EXPECT(gbc.pc(), 0x9814);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9813), 0xa7);
        // A7 0217
        gbc.setState(0x266c, 0xd3cd, 0xd320, 0x13b2, 0xe7a7, 0x73a1, 0x1, 0x1);
        gbc.writeMem(0x266c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xd3cd);
        EXPECT(gbc.pc(), 0x266d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0218
        gbc.setState(0x910e, 0x434a, 0xfc50, 0xacb3, 0x8baa, 0x9dea, 0x0, 0x0);
        gbc.writeMem(0x910e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x434a);
        EXPECT(gbc.pc(), 0x910f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x910e), 0xa7);
        // A7 0219
        gbc.setState(0xb3c6, 0x270a, 0x9920, 0x5003, 0xa0e1, 0xa2e7, 0x0, 0x0);
        gbc.writeMem(0xb3c6, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x270a);
        EXPECT(gbc.pc(), 0xb3c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3c6), 0xa7);
        // A7 021A
        gbc.setState(0x5630, 0xa204, 0x190, 0xffc6, 0xf4fc, 0x69a4, 0x1, 0x1);
        gbc.writeMem(0x5630, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xa204);
        EXPECT(gbc.pc(), 0x5631);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 021B
        gbc.setState(0x4ae4, 0x1128, 0x20f0, 0x269f, 0x1932, 0xb12b, 0x0, 0x0);
        gbc.writeMem(0x4ae4, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x1128);
        EXPECT(gbc.pc(), 0x4ae5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 021C
        gbc.setState(0xcc34, 0xed32, 0xd150, 0x7f7d, 0xca8c, 0xea36, 0x0, 0x0);
        gbc.writeMem(0xcc34, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xed32);
        EXPECT(gbc.pc(), 0xcc35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc34), 0xa7);
        // A7 021D
        gbc.setState(0x44d6, 0x96fc, 0xd2b0, 0x8ac7, 0xe100, 0xa27d, 0x0, 0x0);
        gbc.writeMem(0x44d6, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x96fc);
        EXPECT(gbc.pc(), 0x44d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 021E
        gbc.setState(0x177b, 0xc041, 0xd7b0, 0xf0f5, 0x7bf6, 0xb673, 0x0, 0x0);
        gbc.writeMem(0x177b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xc041);
        EXPECT(gbc.pc(), 0x177c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 021F
        gbc.setState(0xd8ae, 0xe960, 0xf960, 0xae0c, 0x8268, 0xd157, 0x0, 0x0);
        gbc.writeMem(0xd8ae, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xe960);
        EXPECT(gbc.pc(), 0xd8af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8ae), 0xa7);
        // A7 0220
        gbc.setState(0x73be, 0xe043, 0xc80, 0xb339, 0x469c, 0x6be7, 0x1, 0x1);
        gbc.writeMem(0x73be, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xe043);
        EXPECT(gbc.pc(), 0x73bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0221
        gbc.setState(0x9927, 0xac9a, 0x5050, 0xfbb8, 0xc58d, 0x450e, 0x0, 0x1);
        gbc.writeMem(0x9927, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xac9a);
        EXPECT(gbc.pc(), 0x9928);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9927), 0xa7);
        // A7 0222
        gbc.setState(0x5538, 0x6eb, 0x2de0, 0xf6a8, 0xc350, 0x67a0, 0x0, 0x1);
        gbc.writeMem(0x5538, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x6eb);
        EXPECT(gbc.pc(), 0x5539);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0223
        gbc.setState(0x9453, 0x9516, 0xae90, 0x92d3, 0x1f50, 0x35fc, 0x1, 0x1);
        gbc.writeMem(0x9453, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x9516);
        EXPECT(gbc.pc(), 0x9454);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9453), 0xa7);
        // A7 0224
        gbc.setState(0x5b48, 0xe84b, 0xa3b0, 0x3f54, 0x9f1, 0xb575, 0x1, 0x1);
        gbc.writeMem(0x5b48, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xe84b);
        EXPECT(gbc.pc(), 0x5b49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0225
        gbc.setState(0x305c, 0xef2c, 0x95a0, 0xb40f, 0x3701, 0x3eb8, 0x0, 0x1);
        gbc.writeMem(0x305c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xef2c);
        EXPECT(gbc.pc(), 0x305d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0226
        gbc.setState(0x9b28, 0x92d, 0xc390, 0xe897, 0x3223, 0xe6f2, 0x1, 0x0);
        gbc.writeMem(0x9b28, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x92d);
        EXPECT(gbc.pc(), 0x9b29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b28), 0xa7);
        // A7 0227
        gbc.setState(0xbca7, 0x4d9a, 0xa380, 0xf8ef, 0xfd3d, 0xd81f, 0x0, 0x1);
        gbc.writeMem(0xbca7, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x4d9a);
        EXPECT(gbc.pc(), 0xbca8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbca7), 0xa7);
        // A7 0228
        gbc.setState(0x778a, 0xca9f, 0xc100, 0xd3a8, 0xdbbe, 0x281f, 0x0, 0x1);
        gbc.writeMem(0x778a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xca9f);
        EXPECT(gbc.pc(), 0x778b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0229
        gbc.setState(0x4f18, 0xd7a, 0x30e0, 0x3126, 0x3270, 0x2461, 0x1, 0x0);
        gbc.writeMem(0x4f18, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xd7a);
        EXPECT(gbc.pc(), 0x4f19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 022A
        gbc.setState(0x6c1f, 0x44e8, 0x55f0, 0xfa8d, 0x21bc, 0xf70d, 0x0, 0x0);
        gbc.writeMem(0x6c1f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x44e8);
        EXPECT(gbc.pc(), 0x6c20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 022B
        gbc.setState(0xb958, 0xd6d1, 0x1560, 0xcae8, 0x9d13, 0x2267, 0x1, 0x0);
        gbc.writeMem(0xb958, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xd6d1);
        EXPECT(gbc.pc(), 0xb959);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb958), 0xa7);
        // A7 022C
        gbc.setState(0xbd6, 0x982e, 0x90b0, 0xed99, 0x761d, 0x4c47, 0x1, 0x0);
        gbc.writeMem(0xbd6, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x982e);
        EXPECT(gbc.pc(), 0xbd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 022D
        gbc.setState(0x1428, 0xf72b, 0x50b0, 0xd1b4, 0x1af4, 0xfc06, 0x0, 0x0);
        gbc.writeMem(0x1428, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xf72b);
        EXPECT(gbc.pc(), 0x1429);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 022E
        gbc.setState(0x979e, 0xaa40, 0x5b0, 0x3a81, 0xe879, 0xa9e4, 0x1, 0x0);
        gbc.writeMem(0x979e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xaa40);
        EXPECT(gbc.pc(), 0x979f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x979e), 0xa7);
        // A7 022F
        gbc.setState(0x58bc, 0x5e28, 0x3790, 0xc533, 0xdfda, 0xc6e3, 0x1, 0x0);
        gbc.writeMem(0x58bc, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x5e28);
        EXPECT(gbc.pc(), 0x58bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0230
        gbc.setState(0xce12, 0x18b6, 0x19a0, 0xe649, 0x1748, 0x5552, 0x0, 0x1);
        gbc.writeMem(0xce12, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x18b6);
        EXPECT(gbc.pc(), 0xce13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce12), 0xa7);
        // A7 0231
        gbc.setState(0xd13f, 0x14ca, 0x1490, 0x343, 0x81d6, 0x5d58, 0x1, 0x0);
        gbc.writeMem(0xd13f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x14ca);
        EXPECT(gbc.pc(), 0xd140);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd13f), 0xa7);
        // A7 0232
        gbc.setState(0x78c2, 0xa95f, 0x5930, 0x3fd6, 0xa0fc, 0xf196, 0x0, 0x1);
        gbc.writeMem(0x78c2, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xa95f);
        EXPECT(gbc.pc(), 0x78c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0233
        gbc.setState(0xad52, 0x6752, 0x3a50, 0x97c8, 0x2134, 0x96c, 0x1, 0x1);
        gbc.writeMem(0xad52, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x6752);
        EXPECT(gbc.pc(), 0xad53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad52), 0xa7);
        // A7 0235
        gbc.setState(0xac48, 0x92ea, 0xf520, 0xe4bd, 0x1c60, 0x269c, 0x1, 0x0);
        gbc.writeMem(0xac48, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x92ea);
        EXPECT(gbc.pc(), 0xac49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac48), 0xa7);
        // A7 0236
        gbc.setState(0x4e5c, 0x9f5a, 0x2f0, 0xa685, 0x1bb2, 0x98c9, 0x0, 0x0);
        gbc.writeMem(0x4e5c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x9f5a);
        EXPECT(gbc.pc(), 0x4e5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0237
        gbc.setState(0xb8fb, 0x307c, 0x3a0, 0xa783, 0xf93c, 0x7496, 0x1, 0x0);
        gbc.writeMem(0xb8fb, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x307c);
        EXPECT(gbc.pc(), 0xb8fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8fb), 0xa7);
        // A7 0238
        gbc.setState(0xa20c, 0xec34, 0x70, 0x8514, 0x5a7f, 0xfd9c, 0x0, 0x0);
        gbc.writeMem(0xa20c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xec34);
        EXPECT(gbc.pc(), 0xa20d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa20c), 0xa7);
        // A7 0239
        gbc.setState(0xe634, 0xd4cc, 0x8450, 0x3cbd, 0xa832, 0xeb59, 0x0, 0x1);
        gbc.writeMem(0xe634, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xd4cc);
        EXPECT(gbc.pc(), 0xe635);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe634), 0xa7);
        // A7 023A
        gbc.setState(0xa57a, 0x9400, 0x8b90, 0xa56b, 0x6e9d, 0xac62, 0x0, 0x0);
        gbc.writeMem(0xa57a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x9400);
        EXPECT(gbc.pc(), 0xa57b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa57a), 0xa7);
        // A7 023B
        gbc.setState(0x7cf7, 0xa2b8, 0x9740, 0x8d66, 0x3dc6, 0x81a0, 0x1, 0x1);
        gbc.writeMem(0x7cf7, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xa2b8);
        EXPECT(gbc.pc(), 0x7cf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 023D
        gbc.setState(0x2b65, 0xd30e, 0xf180, 0x9bca, 0x520c, 0x475f, 0x1, 0x0);
        gbc.writeMem(0x2b65, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xd30e);
        EXPECT(gbc.pc(), 0x2b66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 023E
        gbc.setState(0x1252, 0x72d7, 0x3d80, 0xf457, 0x1d12, 0x4c91, 0x1, 0x0);
        gbc.writeMem(0x1252, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x72d7);
        EXPECT(gbc.pc(), 0x1253);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 023F
        gbc.setState(0x5708, 0x7695, 0xbc50, 0x855f, 0x2c0f, 0xfe46, 0x1, 0x1);
        gbc.writeMem(0x5708, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x7695);
        EXPECT(gbc.pc(), 0x5709);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0240
        gbc.setState(0xc735, 0xea8c, 0x1b90, 0x66bc, 0x1dae, 0x68dd, 0x1, 0x0);
        gbc.writeMem(0xc735, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xea8c);
        EXPECT(gbc.pc(), 0xc736);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc735), 0xa7);
        // A7 0242
        gbc.setState(0x301, 0x3aab, 0xac00, 0xbdf9, 0xc6cc, 0x3984, 0x0, 0x0);
        gbc.writeMem(0x301, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x3aab);
        EXPECT(gbc.pc(), 0x302);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0243
        gbc.setState(0x3b1, 0x4b11, 0x2810, 0xd86d, 0x9d71, 0x2113, 0x1, 0x1);
        gbc.writeMem(0x3b1, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x4b11);
        EXPECT(gbc.pc(), 0x3b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0244
        gbc.setState(0x7889, 0xf201, 0x9c0, 0x6fb3, 0x10c3, 0xd2fa, 0x0, 0x0);
        gbc.writeMem(0x7889, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xf201);
        EXPECT(gbc.pc(), 0x788a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0245
        gbc.setState(0xefcf, 0x2818, 0xf3b0, 0xee7b, 0xfc26, 0x6505, 0x1, 0x1);
        gbc.writeMem(0xefcf, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x2818);
        EXPECT(gbc.pc(), 0xefd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefcf), 0xa7);
        // A7 0247
        gbc.setState(0x22cb, 0x868c, 0x5f70, 0x9e95, 0x684b, 0x8c7c, 0x0, 0x1);
        gbc.writeMem(0x22cb, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x868c);
        EXPECT(gbc.pc(), 0x22cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0248
        gbc.setState(0xe869, 0x6f6d, 0xf10, 0x86ee, 0xb19, 0x6b6d, 0x0, 0x1);
        gbc.writeMem(0xe869, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x6f6d);
        EXPECT(gbc.pc(), 0xe86a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe869), 0xa7);
        // A7 0249
        gbc.setState(0xc032, 0x933e, 0x3b70, 0xd1f3, 0x95c9, 0x6b3d, 0x1, 0x0);
        gbc.writeMem(0xc032, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x933e);
        EXPECT(gbc.pc(), 0xc033);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc032), 0xa7);
        // A7 024A
        gbc.setState(0xcdfa, 0xd07e, 0xf3a0, 0xe61f, 0xa16b, 0x39d3, 0x1, 0x0);
        gbc.writeMem(0xcdfa, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xd07e);
        EXPECT(gbc.pc(), 0xcdfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdfa), 0xa7);
        // A7 024B
        gbc.setState(0x9c3, 0x3d08, 0xc7b0, 0x9059, 0x4806, 0x8374, 0x1, 0x0);
        gbc.writeMem(0x9c3, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x3d08);
        EXPECT(gbc.pc(), 0x9c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 024C
        gbc.setState(0xadca, 0x2961, 0x8660, 0x9ec, 0xa683, 0x793e, 0x1, 0x0);
        gbc.writeMem(0xadca, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x2961);
        EXPECT(gbc.pc(), 0xadcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadca), 0xa7);
        // A7 024D
        gbc.setState(0x1ddc, 0xf912, 0xc5c0, 0xef57, 0xeb9, 0xe892, 0x0, 0x1);
        gbc.writeMem(0x1ddc, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xf912);
        EXPECT(gbc.pc(), 0x1ddd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 024E
        gbc.setState(0x9eb2, 0x516a, 0x2b90, 0x1307, 0x2621, 0x805e, 0x1, 0x0);
        gbc.writeMem(0x9eb2, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x516a);
        EXPECT(gbc.pc(), 0x9eb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9eb2), 0xa7);
        // A7 024F
        gbc.setState(0xb6f, 0x7de3, 0x3320, 0xe4f5, 0xc50e, 0x404f, 0x1, 0x1);
        gbc.writeMem(0xb6f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x7de3);
        EXPECT(gbc.pc(), 0xb70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0250
        gbc.setState(0x280, 0x7000, 0xbcd0, 0x9b75, 0xd534, 0xd130, 0x0, 0x1);
        gbc.writeMem(0x280, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x7000);
        EXPECT(gbc.pc(), 0x281);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0251
        gbc.setState(0xad83, 0x3b5e, 0x7730, 0xd72, 0x695d, 0x1741, 0x1, 0x1);
        gbc.writeMem(0xad83, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x3b5e);
        EXPECT(gbc.pc(), 0xad84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad83), 0xa7);
        // A7 0252
        gbc.setState(0xb3ea, 0x9fd, 0xe50, 0xa63b, 0x3df3, 0x4fa8, 0x0, 0x0);
        gbc.writeMem(0xb3ea, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x9fd);
        EXPECT(gbc.pc(), 0xb3eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3ea), 0xa7);
        // A7 0253
        gbc.setState(0xaa3c, 0x4ff4, 0x2a00, 0xa701, 0x899f, 0xc619, 0x0, 0x1);
        gbc.writeMem(0xaa3c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x4ff4);
        EXPECT(gbc.pc(), 0xaa3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa3c), 0xa7);
        // A7 0254
        gbc.setState(0x9640, 0x6c3a, 0xf7e0, 0xfdca, 0x655e, 0x971f, 0x1, 0x1);
        gbc.writeMem(0x9640, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x6c3a);
        EXPECT(gbc.pc(), 0x9641);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9640), 0xa7);
        // A7 0255
        gbc.setState(0x7a74, 0x72c1, 0x53b0, 0xe1cc, 0xeb2, 0x54d9, 0x1, 0x0);
        gbc.writeMem(0x7a74, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x72c1);
        EXPECT(gbc.pc(), 0x7a75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0256
        gbc.setState(0x36fa, 0xa304, 0x4040, 0xd5f7, 0xe05, 0xad82, 0x0, 0x1);
        gbc.writeMem(0x36fa, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xa304);
        EXPECT(gbc.pc(), 0x36fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0257
        gbc.setState(0xc1df, 0x46c2, 0xad60, 0xf81a, 0xd65a, 0xf3b, 0x0, 0x1);
        gbc.writeMem(0xc1df, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x46c2);
        EXPECT(gbc.pc(), 0xc1e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1df), 0xa7);
        // A7 0258
        gbc.setState(0x291d, 0x20f1, 0x74d0, 0x1893, 0x8aed, 0xf75d, 0x0, 0x0);
        gbc.writeMem(0x291d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x20f1);
        EXPECT(gbc.pc(), 0x291e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0259
        gbc.setState(0xcb36, 0xe672, 0xe20, 0xd14d, 0xaa42, 0xdad7, 0x0, 0x0);
        gbc.writeMem(0xcb36, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xe672);
        EXPECT(gbc.pc(), 0xcb37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb36), 0xa7);
        // A7 025A
        gbc.setState(0xc5c7, 0x3caf, 0xfc90, 0x4d50, 0xa204, 0x742f, 0x0, 0x0);
        gbc.writeMem(0xc5c7, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x3caf);
        EXPECT(gbc.pc(), 0xc5c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5c7), 0xa7);
        // A7 025B
        gbc.setState(0x6d8e, 0x3e71, 0x62e0, 0xc1b7, 0x744, 0xa1f4, 0x1, 0x0);
        gbc.writeMem(0x6d8e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x3e71);
        EXPECT(gbc.pc(), 0x6d8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 025C
        gbc.setState(0xb4a, 0xa72a, 0xe830, 0x7cc2, 0xe298, 0xcfa9, 0x0, 0x0);
        gbc.writeMem(0xb4a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xa72a);
        EXPECT(gbc.pc(), 0xb4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 025D
        gbc.setState(0x6a2b, 0x405e, 0x6e0, 0xff80, 0xdeb5, 0xfa1b, 0x1, 0x0);
        gbc.writeMem(0x6a2b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x405e);
        EXPECT(gbc.pc(), 0x6a2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 025E
        gbc.setState(0x5787, 0x290, 0x1d90, 0xa1b5, 0xd70e, 0xe6a5, 0x0, 0x1);
        gbc.writeMem(0x5787, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x290);
        EXPECT(gbc.pc(), 0x5788);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 025F
        gbc.setState(0x9b1e, 0xbdc1, 0x7a60, 0x66a9, 0x2e20, 0xce00, 0x1, 0x0);
        gbc.writeMem(0x9b1e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xbdc1);
        EXPECT(gbc.pc(), 0x9b1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b1e), 0xa7);
        // A7 0260
        gbc.setState(0x6c40, 0xd2a5, 0x63e0, 0x2b59, 0xa9ef, 0xa48c, 0x1, 0x1);
        gbc.writeMem(0x6c40, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xd2a5);
        EXPECT(gbc.pc(), 0x6c41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0261
        gbc.setState(0xc6a9, 0xb766, 0xc9b0, 0x9e3e, 0x69d5, 0x2e5c, 0x0, 0x1);
        gbc.writeMem(0xc6a9, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xb766);
        EXPECT(gbc.pc(), 0xc6aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6a9), 0xa7);
        // A7 0262
        gbc.setState(0xe0d0, 0xa94a, 0x82c0, 0x7ad1, 0xae4e, 0xcb30, 0x0, 0x0);
        gbc.writeMem(0xe0d0, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xa94a);
        EXPECT(gbc.pc(), 0xe0d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0d0), 0xa7);
        // A7 0263
        gbc.setState(0xe43d, 0xe018, 0x8200, 0xb05f, 0x207c, 0x304e, 0x1, 0x1);
        gbc.writeMem(0xe43d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xe018);
        EXPECT(gbc.pc(), 0xe43e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe43d), 0xa7);
        // A7 0264
        gbc.setState(0x6f1, 0xa4a7, 0xd910, 0x5f20, 0xd70, 0x7827, 0x1, 0x0);
        gbc.writeMem(0x6f1, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xa4a7);
        EXPECT(gbc.pc(), 0x6f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0265
        gbc.setState(0xdfc7, 0x3f07, 0xe190, 0xac09, 0xe04d, 0x50c8, 0x0, 0x1);
        gbc.writeMem(0xdfc7, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x3f07);
        EXPECT(gbc.pc(), 0xdfc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfc7), 0xa7);
        // A7 0266
        gbc.setState(0xe7c2, 0x2aee, 0x8dc0, 0x2f8b, 0x62e, 0xb73a, 0x0, 0x1);
        gbc.writeMem(0xe7c2, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x2aee);
        EXPECT(gbc.pc(), 0xe7c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7c2), 0xa7);
        // A7 0267
        gbc.setState(0x48f4, 0xe07e, 0x7b80, 0xc93d, 0xf36d, 0x8753, 0x0, 0x1);
        gbc.writeMem(0x48f4, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xe07e);
        EXPECT(gbc.pc(), 0x48f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0268
        gbc.setState(0xd104, 0x2c07, 0xfdf0, 0xa7c7, 0x8b4b, 0xdf6b, 0x1, 0x1);
        gbc.writeMem(0xd104, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x2c07);
        EXPECT(gbc.pc(), 0xd105);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd104), 0xa7);
        // A7 0269
        gbc.setState(0x4be2, 0xd70a, 0xd840, 0xf826, 0x9ff4, 0x64c5, 0x1, 0x1);
        gbc.writeMem(0x4be2, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xd70a);
        EXPECT(gbc.pc(), 0x4be3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 026A
        gbc.setState(0xff1, 0x8426, 0x9430, 0x9913, 0xa85f, 0x9efe, 0x0, 0x0);
        gbc.writeMem(0xff1, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x8426);
        EXPECT(gbc.pc(), 0xff2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 026B
        gbc.setState(0x8ec4, 0x132c, 0x2270, 0x6675, 0xbd78, 0xcb17, 0x0, 0x1);
        gbc.writeMem(0x8ec4, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x132c);
        EXPECT(gbc.pc(), 0x8ec5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ec4), 0xa7);
        // A7 026C
        gbc.setState(0xb45a, 0x1478, 0x6c70, 0x6fff, 0x9837, 0x243b, 0x1, 0x1);
        gbc.writeMem(0xb45a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x1478);
        EXPECT(gbc.pc(), 0xb45b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb45a), 0xa7);
        // A7 026D
        gbc.setState(0xae56, 0x3ad4, 0x6d00, 0x3222, 0xbb27, 0xd5c9, 0x1, 0x0);
        gbc.writeMem(0xae56, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x3ad4);
        EXPECT(gbc.pc(), 0xae57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae56), 0xa7);
        // A7 026E
        gbc.setState(0x2a92, 0x207d, 0x1f50, 0xabf0, 0xaf, 0x123, 0x1, 0x0);
        gbc.writeMem(0x2a92, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x207d);
        EXPECT(gbc.pc(), 0x2a93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 026F
        gbc.setState(0x7c9d, 0x5421, 0x4500, 0x8aea, 0xe47c, 0xbe9e, 0x1, 0x0);
        gbc.writeMem(0x7c9d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x5421);
        EXPECT(gbc.pc(), 0x7c9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0270
        gbc.setState(0xde3f, 0x4080, 0x2ec0, 0x9115, 0x44a3, 0x45cc, 0x0, 0x0);
        gbc.writeMem(0xde3f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x4080);
        EXPECT(gbc.pc(), 0xde40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde3f), 0xa7);
        // A7 0271
        gbc.setState(0x13e1, 0x9bd9, 0xa60, 0xa899, 0x6718, 0x2bde, 0x0, 0x0);
        gbc.writeMem(0x13e1, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x9bd9);
        EXPECT(gbc.pc(), 0x13e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0272
        gbc.setState(0x4f64, 0x311f, 0x3770, 0xe1cd, 0xce16, 0x9244, 0x0, 0x1);
        gbc.writeMem(0x4f64, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x311f);
        EXPECT(gbc.pc(), 0x4f65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0273
        gbc.setState(0x2a02, 0xe59a, 0x82c0, 0xfa53, 0xb1c5, 0x2044, 0x0, 0x0);
        gbc.writeMem(0x2a02, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xe59a);
        EXPECT(gbc.pc(), 0x2a03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0274
        gbc.setState(0xaeab, 0xd6c0, 0xb640, 0x27f1, 0x3f04, 0x44a1, 0x1, 0x1);
        gbc.writeMem(0xaeab, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xd6c0);
        EXPECT(gbc.pc(), 0xaeac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaeab), 0xa7);
        // A7 0275
        gbc.setState(0xa5e7, 0x9677, 0xa4a0, 0xb9ca, 0x1351, 0x52e7, 0x0, 0x0);
        gbc.writeMem(0xa5e7, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x9677);
        EXPECT(gbc.pc(), 0xa5e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5e7), 0xa7);
        // A7 0276
        gbc.setState(0x4e6a, 0x692, 0x2a00, 0x1038, 0x1c22, 0x2637, 0x0, 0x0);
        gbc.writeMem(0x4e6a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x692);
        EXPECT(gbc.pc(), 0x4e6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0277
        gbc.setState(0x80f9, 0x6049, 0xcd70, 0x3c51, 0x4a1a, 0x6ac6, 0x1, 0x1);
        gbc.writeMem(0x80f9, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x6049);
        EXPECT(gbc.pc(), 0x80fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80f9), 0xa7);
        // A7 0278
        gbc.setState(0x4cdc, 0x6c9c, 0x8990, 0xead0, 0xa41d, 0x4bae, 0x0, 0x1);
        gbc.writeMem(0x4cdc, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x6c9c);
        EXPECT(gbc.pc(), 0x4cdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0279
        gbc.setState(0xb650, 0x63d5, 0x34f0, 0x10bc, 0x8157, 0xeb39, 0x1, 0x1);
        gbc.writeMem(0xb650, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x63d5);
        EXPECT(gbc.pc(), 0xb651);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb650), 0xa7);
        // A7 027B
        gbc.setState(0x89e0, 0x7e33, 0x3aa0, 0x3e79, 0x716, 0xcb3, 0x0, 0x0);
        gbc.writeMem(0x89e0, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x7e33);
        EXPECT(gbc.pc(), 0x89e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89e0), 0xa7);
        // A7 027C
        gbc.setState(0x3da, 0xaa74, 0x4000, 0x1998, 0x8d98, 0x30b5, 0x0, 0x1);
        gbc.writeMem(0x3da, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xaa74);
        EXPECT(gbc.pc(), 0x3db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 027E
        gbc.setState(0xdf43, 0x8dee, 0x1060, 0x8d66, 0x4914, 0xa3fd, 0x1, 0x1);
        gbc.writeMem(0xdf43, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x8dee);
        EXPECT(gbc.pc(), 0xdf44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf43), 0xa7);
        // A7 027F
        gbc.setState(0xe11c, 0xa64d, 0xaa70, 0x8535, 0xfc4e, 0xd7af, 0x0, 0x0);
        gbc.writeMem(0xe11c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xa64d);
        EXPECT(gbc.pc(), 0xe11d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe11c), 0xa7);
        // A7 0280
        gbc.setState(0xc50a, 0xd4ba, 0xa160, 0x6ecf, 0xa1a4, 0xa23a, 0x0, 0x1);
        gbc.writeMem(0xc50a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xd4ba);
        EXPECT(gbc.pc(), 0xc50b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc50a), 0xa7);
        // A7 0281
        gbc.setState(0xca80, 0x69de, 0xf320, 0xcea1, 0xcb0e, 0x98a0, 0x0, 0x0);
        gbc.writeMem(0xca80, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x69de);
        EXPECT(gbc.pc(), 0xca81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca80), 0xa7);
        // A7 0282
        gbc.setState(0x958e, 0xd95f, 0x8930, 0xee2a, 0xb1e8, 0xec5c, 0x0, 0x1);
        gbc.writeMem(0x958e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xd95f);
        EXPECT(gbc.pc(), 0x958f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x958e), 0xa7);
        // A7 0283
        gbc.setState(0x2397, 0x2d0f, 0x55c0, 0x5b29, 0x1358, 0xb90, 0x1, 0x0);
        gbc.writeMem(0x2397, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x2d0f);
        EXPECT(gbc.pc(), 0x2398);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0284
        gbc.setState(0x7b53, 0x866, 0x17a0, 0x64a9, 0x6ad0, 0x9ffd, 0x0, 0x0);
        gbc.writeMem(0x7b53, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x866);
        EXPECT(gbc.pc(), 0x7b54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0285
        gbc.setState(0x78f8, 0xe78f, 0xfd10, 0xe0cf, 0x48a1, 0x78b3, 0x0, 0x1);
        gbc.writeMem(0x78f8, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xe78f);
        EXPECT(gbc.pc(), 0x78f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0286
        gbc.setState(0x2f5b, 0x843b, 0x680, 0xc0fa, 0xdac6, 0x2ae9, 0x1, 0x1);
        gbc.writeMem(0x2f5b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x843b);
        EXPECT(gbc.pc(), 0x2f5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0287
        gbc.setState(0xda59, 0xb01c, 0x4c90, 0xc16f, 0x3e69, 0xfe49, 0x1, 0x0);
        gbc.writeMem(0xda59, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xb01c);
        EXPECT(gbc.pc(), 0xda5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda59), 0xa7);
        // A7 0288
        gbc.setState(0x5da6, 0x8d31, 0x5c60, 0xc7a3, 0x5a7d, 0xe019, 0x0, 0x0);
        gbc.writeMem(0x5da6, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x8d31);
        EXPECT(gbc.pc(), 0x5da7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0289
        gbc.setState(0x82d1, 0x33c8, 0xff0, 0xe020, 0xffc1, 0x9bbe, 0x0, 0x0);
        gbc.writeMem(0x82d1, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x33c8);
        EXPECT(gbc.pc(), 0x82d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82d1), 0xa7);
        // A7 028A
        gbc.setState(0x643c, 0x7f49, 0x2140, 0xece5, 0x27de, 0xf9ea, 0x1, 0x1);
        gbc.writeMem(0x643c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x7f49);
        EXPECT(gbc.pc(), 0x643d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 028B
        gbc.setState(0x8a0, 0x5de5, 0x42d0, 0xab94, 0x4941, 0x7616, 0x0, 0x0);
        gbc.writeMem(0x8a0, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x5de5);
        EXPECT(gbc.pc(), 0x8a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 028C
        gbc.setState(0x301d, 0x3c9f, 0x8cc0, 0xe5c1, 0x8683, 0x60c8, 0x0, 0x1);
        gbc.writeMem(0x301d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x3c9f);
        EXPECT(gbc.pc(), 0x301e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 028D
        gbc.setState(0x7376, 0x4ad7, 0xc40, 0xc756, 0xe540, 0x343d, 0x0, 0x0);
        gbc.writeMem(0x7376, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x4ad7);
        EXPECT(gbc.pc(), 0x7377);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 028E
        gbc.setState(0x5de6, 0xe2d7, 0x5400, 0x22bd, 0x4953, 0x8eff, 0x1, 0x1);
        gbc.writeMem(0x5de6, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xe2d7);
        EXPECT(gbc.pc(), 0x5de7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 028F
        gbc.setState(0x226d, 0x3906, 0xe740, 0x5b63, 0x8dcc, 0xb2fe, 0x0, 0x0);
        gbc.writeMem(0x226d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x3906);
        EXPECT(gbc.pc(), 0x226e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0290
        gbc.setState(0xd287, 0xccc7, 0x38c0, 0x8c1e, 0x6454, 0x45c3, 0x0, 0x0);
        gbc.writeMem(0xd287, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xccc7);
        EXPECT(gbc.pc(), 0xd288);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd287), 0xa7);
        // A7 0291
        gbc.setState(0x6fd9, 0x5148, 0xdd0, 0x7578, 0xd6f3, 0xe4ae, 0x0, 0x0);
        gbc.writeMem(0x6fd9, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x5148);
        EXPECT(gbc.pc(), 0x6fda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0293
        gbc.setState(0xc914, 0x5d35, 0x69d0, 0x6078, 0xc42, 0x70d7, 0x1, 0x1);
        gbc.writeMem(0xc914, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x5d35);
        EXPECT(gbc.pc(), 0xc915);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc914), 0xa7);
        // A7 0294
        gbc.setState(0x8709, 0x4e7b, 0x7fb0, 0x5fda, 0xf850, 0x7cf0, 0x1, 0x0);
        gbc.writeMem(0x8709, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x4e7b);
        EXPECT(gbc.pc(), 0x870a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8709), 0xa7);
        // A7 0295
        gbc.setState(0xd4c2, 0x52a, 0xad0, 0x61cc, 0x6450, 0x410e, 0x0, 0x1);
        gbc.writeMem(0xd4c2, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x52a);
        EXPECT(gbc.pc(), 0xd4c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4c2), 0xa7);
        // A7 0296
        gbc.setState(0x3c56, 0xee6a, 0xa720, 0x21b1, 0xfbe, 0x85a7, 0x0, 0x1);
        gbc.writeMem(0x3c56, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xee6a);
        EXPECT(gbc.pc(), 0x3c57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0297
        gbc.setState(0x3579, 0x86fe, 0x29f0, 0xfabc, 0x30a4, 0xccdd, 0x1, 0x0);
        gbc.writeMem(0x3579, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x86fe);
        EXPECT(gbc.pc(), 0x357a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0299
        gbc.setState(0x3d8c, 0xc46, 0xf580, 0x178b, 0x25de, 0x6e91, 0x0, 0x0);
        gbc.writeMem(0x3d8c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xc46);
        EXPECT(gbc.pc(), 0x3d8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 029A
        gbc.setState(0xe9b1, 0x8dd8, 0xdd0, 0xf713, 0x3820, 0xcaf5, 0x0, 0x1);
        gbc.writeMem(0xe9b1, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x8dd8);
        EXPECT(gbc.pc(), 0xe9b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9b1), 0xa7);
        // A7 029B
        gbc.setState(0xc5b1, 0xd68c, 0x1b0, 0x8221, 0xde28, 0x3ca6, 0x1, 0x0);
        gbc.writeMem(0xc5b1, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xd68c);
        EXPECT(gbc.pc(), 0xc5b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5b1), 0xa7);
        // A7 029C
        gbc.setState(0x348f, 0x575f, 0xc190, 0x9a83, 0x2741, 0x3cad, 0x1, 0x1);
        gbc.writeMem(0x348f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x575f);
        EXPECT(gbc.pc(), 0x3490);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 029D
        gbc.setState(0x7b97, 0x21cd, 0x91b0, 0x4772, 0x990, 0xb089, 0x0, 0x1);
        gbc.writeMem(0x7b97, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x21cd);
        EXPECT(gbc.pc(), 0x7b98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 029E
        gbc.setState(0x232d, 0xaa4e, 0x4010, 0xadba, 0xe7a3, 0x76b0, 0x1, 0x1);
        gbc.writeMem(0x232d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xaa4e);
        EXPECT(gbc.pc(), 0x232e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02A0
        gbc.setState(0xc2cc, 0x3d43, 0x3fa0, 0xfb98, 0xdf17, 0x2637, 0x0, 0x1);
        gbc.writeMem(0xc2cc, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x3d43);
        EXPECT(gbc.pc(), 0xc2cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2cc), 0xa7);
        // A7 02A1
        gbc.setState(0x9f7f, 0xcc39, 0x8a00, 0x5ce7, 0xe378, 0x33eb, 0x0, 0x0);
        gbc.writeMem(0x9f7f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xcc39);
        EXPECT(gbc.pc(), 0x9f80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f7f), 0xa7);
        // A7 02A2
        gbc.setState(0x35a3, 0xe2bc, 0x190, 0xcea3, 0x4633, 0x970f, 0x1, 0x1);
        gbc.writeMem(0x35a3, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xe2bc);
        EXPECT(gbc.pc(), 0x35a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02A3
        gbc.setState(0x60fd, 0xe948, 0xc640, 0xd890, 0xcc8b, 0x6daf, 0x0, 0x1);
        gbc.writeMem(0x60fd, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xe948);
        EXPECT(gbc.pc(), 0x60fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02A4
        gbc.setState(0xe3cb, 0xf570, 0xc790, 0x40c6, 0xf2c0, 0x9115, 0x0, 0x0);
        gbc.writeMem(0xe3cb, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xf570);
        EXPECT(gbc.pc(), 0xe3cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3cb), 0xa7);
        // A7 02A5
        gbc.setState(0x992c, 0x15d3, 0x6a0, 0x95f6, 0x8e5d, 0x6aeb, 0x1, 0x1);
        gbc.writeMem(0x992c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x15d3);
        EXPECT(gbc.pc(), 0x992d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x992c), 0xa7);
        // A7 02A6
        gbc.setState(0xc06d, 0x93de, 0xe860, 0xbd92, 0x94a5, 0x37ef, 0x0, 0x0);
        gbc.writeMem(0xc06d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x93de);
        EXPECT(gbc.pc(), 0xc06e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc06d), 0xa7);
        // A7 02A7
        gbc.setState(0x3c36, 0xe2bc, 0x30e0, 0xc4f, 0xa0cf, 0x3d38, 0x1, 0x0);
        gbc.writeMem(0x3c36, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xe2bc);
        EXPECT(gbc.pc(), 0x3c37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02A8
        gbc.setState(0xe38f, 0x185d, 0x8eb0, 0xa3b8, 0xdaa2, 0x452, 0x0, 0x1);
        gbc.writeMem(0xe38f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x185d);
        EXPECT(gbc.pc(), 0xe390);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe38f), 0xa7);
        // A7 02A9
        gbc.setState(0x7a97, 0x9172, 0x7360, 0x8980, 0xa035, 0x7e53, 0x0, 0x0);
        gbc.writeMem(0x7a97, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x9172);
        EXPECT(gbc.pc(), 0x7a98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02AA
        gbc.setState(0xe244, 0xcc76, 0x1e40, 0x6c8, 0x9f6f, 0x9b3d, 0x1, 0x1);
        gbc.writeMem(0xe244, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xcc76);
        EXPECT(gbc.pc(), 0xe245);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe244), 0xa7);
        // A7 02AB
        gbc.setState(0x3dc7, 0x2b82, 0xe170, 0x6f72, 0x1851, 0x63b6, 0x0, 0x0);
        gbc.writeMem(0x3dc7, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x2b82);
        EXPECT(gbc.pc(), 0x3dc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02AC
        gbc.setState(0xba07, 0xc340, 0xfa30, 0xb787, 0xefe7, 0x9ba8, 0x0, 0x0);
        gbc.writeMem(0xba07, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xc340);
        EXPECT(gbc.pc(), 0xba08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba07), 0xa7);
        // A7 02AD
        gbc.setState(0x1cf8, 0x73df, 0xa8f0, 0xcc37, 0x7900, 0x812c, 0x1, 0x1);
        gbc.writeMem(0x1cf8, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x73df);
        EXPECT(gbc.pc(), 0x1cf9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02AF
        gbc.setState(0x33b8, 0x287f, 0x5f00, 0x6305, 0x5c21, 0x1fe2, 0x1, 0x1);
        gbc.writeMem(0x33b8, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x287f);
        EXPECT(gbc.pc(), 0x33b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02B0
        gbc.setState(0xc871, 0x1b8f, 0xdbb0, 0xbe, 0x6fcb, 0x71aa, 0x0, 0x1);
        gbc.writeMem(0xc871, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x1b8f);
        EXPECT(gbc.pc(), 0xc872);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc871), 0xa7);
        // A7 02B1
        gbc.setState(0x4f6f, 0x4613, 0x7520, 0xfb56, 0x23e5, 0x43ca, 0x0, 0x0);
        gbc.writeMem(0x4f6f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x4613);
        EXPECT(gbc.pc(), 0x4f70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02B2
        gbc.setState(0xefac, 0x6999, 0x89f0, 0xec6f, 0x6d4e, 0x1ae7, 0x0, 0x1);
        gbc.writeMem(0xefac, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x6999);
        EXPECT(gbc.pc(), 0xefad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefac), 0xa7);
        // A7 02B3
        gbc.setState(0x2a63, 0x2211, 0xd390, 0xd277, 0xdb33, 0xeca8, 0x0, 0x1);
        gbc.writeMem(0x2a63, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x2211);
        EXPECT(gbc.pc(), 0x2a64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02B4
        gbc.setState(0x850a, 0xb84, 0x7870, 0x7223, 0x4a95, 0xa00b, 0x1, 0x1);
        gbc.writeMem(0x850a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xb84);
        EXPECT(gbc.pc(), 0x850b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x850a), 0xa7);
        // A7 02B5
        gbc.setState(0x5136, 0xa68e, 0xda60, 0x1182, 0x87a7, 0x48a6, 0x0, 0x1);
        gbc.writeMem(0x5136, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xa68e);
        EXPECT(gbc.pc(), 0x5137);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02B6
        gbc.setState(0xd419, 0x5c16, 0xa820, 0x48c9, 0xccec, 0x7d83, 0x0, 0x1);
        gbc.writeMem(0xd419, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x5c16);
        EXPECT(gbc.pc(), 0xd41a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd419), 0xa7);
        // A7 02B7
        gbc.setState(0x5ed7, 0xfee4, 0x3be0, 0xe0e6, 0xed75, 0x97d4, 0x0, 0x1);
        gbc.writeMem(0x5ed7, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xfee4);
        EXPECT(gbc.pc(), 0x5ed8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02B8
        gbc.setState(0x439, 0x2f64, 0x50f0, 0x4d97, 0x8bf7, 0x317e, 0x0, 0x1);
        gbc.writeMem(0x439, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x2f64);
        EXPECT(gbc.pc(), 0x43a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02B9
        gbc.setState(0xa509, 0xc993, 0xd3f0, 0x9d05, 0xcad7, 0xb7c3, 0x0, 0x0);
        gbc.writeMem(0xa509, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xc993);
        EXPECT(gbc.pc(), 0xa50a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa509), 0xa7);
        // A7 02BA
        gbc.setState(0x6b3b, 0x2c35, 0x9b80, 0xe5a8, 0x55ac, 0xd697, 0x1, 0x1);
        gbc.writeMem(0x6b3b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x2c35);
        EXPECT(gbc.pc(), 0x6b3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02BB
        gbc.setState(0x5d29, 0xddf6, 0xe4a0, 0x3081, 0x98f4, 0xfa94, 0x0, 0x1);
        gbc.writeMem(0x5d29, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xddf6);
        EXPECT(gbc.pc(), 0x5d2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02BC
        gbc.setState(0xe468, 0x113d, 0x7ba0, 0xc70d, 0x7349, 0xb755, 0x1, 0x1);
        gbc.writeMem(0xe468, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x113d);
        EXPECT(gbc.pc(), 0xe469);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe468), 0xa7);
        // A7 02BD
        gbc.setState(0x138, 0xea67, 0x42a0, 0xf952, 0xaf89, 0x1324, 0x0, 0x1);
        gbc.writeMem(0x138, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xea67);
        EXPECT(gbc.pc(), 0x139);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02BE
        gbc.setState(0x7e30, 0xb4b7, 0x9700, 0x9942, 0x40be, 0x545e, 0x0, 0x0);
        gbc.writeMem(0x7e30, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xb4b7);
        EXPECT(gbc.pc(), 0x7e31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02BF
        gbc.setState(0xd8e7, 0xf8c6, 0x9a40, 0x5095, 0x6012, 0xdac4, 0x0, 0x1);
        gbc.writeMem(0xd8e7, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xf8c6);
        EXPECT(gbc.pc(), 0xd8e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8e7), 0xa7);
        // A7 02C0
        gbc.setState(0x3bec, 0xd5ac, 0x6e80, 0x49cf, 0xfdb1, 0x5494, 0x0, 0x1);
        gbc.writeMem(0x3bec, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xd5ac);
        EXPECT(gbc.pc(), 0x3bed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02C1
        gbc.setState(0x3c72, 0x270a, 0x7310, 0x295a, 0x896, 0x9d98, 0x1, 0x0);
        gbc.writeMem(0x3c72, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x270a);
        EXPECT(gbc.pc(), 0x3c73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02C2
        gbc.setState(0xbabc, 0x653a, 0xed30, 0x626a, 0x4e21, 0xcad5, 0x1, 0x0);
        gbc.writeMem(0xbabc, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x653a);
        EXPECT(gbc.pc(), 0xbabd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbabc), 0xa7);
        // A7 02C3
        gbc.setState(0xe7ae, 0x8ac7, 0x1d90, 0xdde3, 0x6c0b, 0x54cf, 0x1, 0x0);
        gbc.writeMem(0xe7ae, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x8ac7);
        EXPECT(gbc.pc(), 0xe7af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7ae), 0xa7);
        // A7 02C4
        gbc.setState(0xce1e, 0x20a9, 0x3620, 0xded6, 0x1fb0, 0xdeea, 0x0, 0x0);
        gbc.writeMem(0xce1e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x20a9);
        EXPECT(gbc.pc(), 0xce1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce1e), 0xa7);
        // A7 02C5
        gbc.setState(0x6ca7, 0x6dc4, 0x7be0, 0xfd01, 0x8480, 0x7ffd, 0x1, 0x1);
        gbc.writeMem(0x6ca7, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x6dc4);
        EXPECT(gbc.pc(), 0x6ca8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02C6
        gbc.setState(0xedfe, 0xb941, 0x7940, 0x1238, 0x5f2d, 0x9b11, 0x1, 0x0);
        gbc.writeMem(0xedfe, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xb941);
        EXPECT(gbc.pc(), 0xedff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedfe), 0xa7);
        // A7 02C7
        gbc.setState(0xa9b3, 0xb54, 0xa170, 0xf1f2, 0xc20b, 0x7cfc, 0x1, 0x1);
        gbc.writeMem(0xa9b3, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xb54);
        EXPECT(gbc.pc(), 0xa9b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9b3), 0xa7);
        // A7 02C8
        gbc.setState(0xe54e, 0x94be, 0x2510, 0x6835, 0x5da7, 0x9e8e, 0x1, 0x1);
        gbc.writeMem(0xe54e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x94be);
        EXPECT(gbc.pc(), 0xe54f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe54e), 0xa7);
        // A7 02C9
        gbc.setState(0x3dce, 0xd656, 0x3680, 0x6c61, 0x342e, 0xfdcc, 0x1, 0x1);
        gbc.writeMem(0x3dce, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xd656);
        EXPECT(gbc.pc(), 0x3dcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02CA
        gbc.setState(0x87f, 0x8584, 0xe350, 0xf6e4, 0x70fc, 0x7422, 0x0, 0x1);
        gbc.writeMem(0x87f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x8584);
        EXPECT(gbc.pc(), 0x880);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02CB
        gbc.setState(0x99fe, 0xc10b, 0x8430, 0xd792, 0xb411, 0x7aad, 0x0, 0x1);
        gbc.writeMem(0x99fe, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xc10b);
        EXPECT(gbc.pc(), 0x99ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99fe), 0xa7);
        // A7 02CC
        gbc.setState(0xc71f, 0x37cf, 0x4a80, 0x16b, 0x4dab, 0xc7b0, 0x1, 0x1);
        gbc.writeMem(0xc71f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x37cf);
        EXPECT(gbc.pc(), 0xc720);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc71f), 0xa7);
        // A7 02CD
        gbc.setState(0xefe7, 0x9692, 0x71a0, 0x3270, 0x2e93, 0x7908, 0x0, 0x0);
        gbc.writeMem(0xefe7, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x9692);
        EXPECT(gbc.pc(), 0xefe8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefe7), 0xa7);
        // A7 02CE
        gbc.setState(0x3d71, 0x67da, 0xd3a0, 0x737, 0x3f4e, 0xf7fe, 0x1, 0x1);
        gbc.writeMem(0x3d71, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x67da);
        EXPECT(gbc.pc(), 0x3d72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02CF
        gbc.setState(0x3764, 0x5648, 0xc700, 0x1208, 0x1780, 0x6561, 0x0, 0x1);
        gbc.writeMem(0x3764, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x5648);
        EXPECT(gbc.pc(), 0x3765);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02D0
        gbc.setState(0x34e0, 0x8160, 0x2ba0, 0xd443, 0x4323, 0x11fa, 0x0, 0x0);
        gbc.writeMem(0x34e0, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x8160);
        EXPECT(gbc.pc(), 0x34e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02D1
        gbc.setState(0xbefb, 0x59ea, 0x9d70, 0x83c6, 0x9fa0, 0xe936, 0x1, 0x1);
        gbc.writeMem(0xbefb, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x59ea);
        EXPECT(gbc.pc(), 0xbefc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbefb), 0xa7);
        // A7 02D2
        gbc.setState(0x7945, 0x3519, 0x5140, 0x8e7a, 0x4603, 0xad1e, 0x1, 0x0);
        gbc.writeMem(0x7945, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x3519);
        EXPECT(gbc.pc(), 0x7946);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02D3
        gbc.setState(0x1867, 0x66e3, 0xfb70, 0x867c, 0x3663, 0x3696, 0x1, 0x1);
        gbc.writeMem(0x1867, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x66e3);
        EXPECT(gbc.pc(), 0x1868);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02D4
        gbc.setState(0x98f4, 0xef84, 0x6140, 0x2e9a, 0x5cf4, 0xb92e, 0x1, 0x0);
        gbc.writeMem(0x98f4, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xef84);
        EXPECT(gbc.pc(), 0x98f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98f4), 0xa7);
        // A7 02D5
        gbc.setState(0x36fd, 0x1196, 0x8140, 0x8437, 0x2ae0, 0xa274, 0x0, 0x1);
        gbc.writeMem(0x36fd, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x1196);
        EXPECT(gbc.pc(), 0x36fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02D6
        gbc.setState(0x6644, 0x366d, 0x23a0, 0x247, 0xdfd6, 0xffd1, 0x0, 0x0);
        gbc.writeMem(0x6644, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x366d);
        EXPECT(gbc.pc(), 0x6645);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02D7
        gbc.setState(0xc411, 0x28fb, 0x8f90, 0xb328, 0xc74b, 0x9447, 0x0, 0x0);
        gbc.writeMem(0xc411, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x28fb);
        EXPECT(gbc.pc(), 0xc412);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc411), 0xa7);
        // A7 02D8
        gbc.setState(0x798f, 0x8951, 0x9b70, 0x4c5c, 0x168d, 0x4e70, 0x1, 0x0);
        gbc.writeMem(0x798f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x8951);
        EXPECT(gbc.pc(), 0x7990);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02D9
        gbc.setState(0x3a41, 0x5e71, 0x1160, 0xc594, 0xb196, 0xaa21, 0x0, 0x0);
        gbc.writeMem(0x3a41, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x5e71);
        EXPECT(gbc.pc(), 0x3a42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02DA
        gbc.setState(0x22ae, 0xad12, 0xf950, 0xee7e, 0xfb87, 0xb6f3, 0x1, 0x0);
        gbc.writeMem(0x22ae, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xad12);
        EXPECT(gbc.pc(), 0x22af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02DB
        gbc.setState(0x5cc2, 0x4fd7, 0x870, 0x5feb, 0x7255, 0x9035, 0x0, 0x0);
        gbc.writeMem(0x5cc2, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x4fd7);
        EXPECT(gbc.pc(), 0x5cc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02DC
        gbc.setState(0x6ba6, 0xd14e, 0x9870, 0xe4d8, 0x7655, 0xf688, 0x0, 0x0);
        gbc.writeMem(0x6ba6, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xd14e);
        EXPECT(gbc.pc(), 0x6ba7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02DD
        gbc.setState(0x665a, 0xcd81, 0xb610, 0x1eb9, 0xd0c5, 0xefe5, 0x0, 0x0);
        gbc.writeMem(0x665a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xcd81);
        EXPECT(gbc.pc(), 0x665b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02DE
        gbc.setState(0x80f8, 0x1208, 0x3d10, 0xca90, 0x5c6f, 0x7b67, 0x1, 0x1);
        gbc.writeMem(0x80f8, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x1208);
        EXPECT(gbc.pc(), 0x80f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80f8), 0xa7);
        // A7 02DF
        gbc.setState(0xa2c4, 0x665b, 0xa5e0, 0xc63c, 0x94ae, 0xb11b, 0x1, 0x0);
        gbc.writeMem(0xa2c4, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x665b);
        EXPECT(gbc.pc(), 0xa2c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2c4), 0xa7);
        // A7 02E0
        gbc.setState(0x49ff, 0x2184, 0x4d50, 0x154a, 0x887f, 0x7ed8, 0x1, 0x0);
        gbc.writeMem(0x49ff, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x2184);
        EXPECT(gbc.pc(), 0x4a00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02E1
        gbc.setState(0xd458, 0x79f8, 0xd020, 0x12c3, 0x1916, 0x5196, 0x1, 0x1);
        gbc.writeMem(0xd458, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x79f8);
        EXPECT(gbc.pc(), 0xd459);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd458), 0xa7);
        // A7 02E2
        gbc.setState(0xac79, 0x3bab, 0x29b0, 0xe363, 0x1402, 0xac64, 0x0, 0x1);
        gbc.writeMem(0xac79, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x3bab);
        EXPECT(gbc.pc(), 0xac7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac79), 0xa7);
        // A7 02E3
        gbc.setState(0xa566, 0x9bc2, 0xf5f0, 0x978b, 0xb6b1, 0x52a3, 0x0, 0x1);
        gbc.writeMem(0xa566, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x9bc2);
        EXPECT(gbc.pc(), 0xa567);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa566), 0xa7);
        // A7 02E4
        gbc.setState(0xd24b, 0x8ea1, 0x5e0, 0x2fe1, 0x81dd, 0x3a50, 0x1, 0x1);
        gbc.writeMem(0xd24b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x8ea1);
        EXPECT(gbc.pc(), 0xd24c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd24b), 0xa7);
        // A7 02E5
        gbc.setState(0x8097, 0x1d8d, 0x55a0, 0x4930, 0x118b, 0xb8ab, 0x0, 0x0);
        gbc.writeMem(0x8097, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x1d8d);
        EXPECT(gbc.pc(), 0x8098);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8097), 0xa7);
        // A7 02E6
        gbc.setState(0xecf9, 0x41f9, 0x9d00, 0x6bc9, 0x6c7e, 0x475f, 0x0, 0x1);
        gbc.writeMem(0xecf9, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x41f9);
        EXPECT(gbc.pc(), 0xecfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecf9), 0xa7);
        // A7 02E7
        gbc.setState(0x3853, 0x3f86, 0x4060, 0xa1e1, 0x134e, 0xdbac, 0x0, 0x0);
        gbc.writeMem(0x3853, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x3f86);
        EXPECT(gbc.pc(), 0x3854);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02E8
        gbc.setState(0x5926, 0xfa5d, 0x5ee0, 0xb261, 0x7929, 0x2983, 0x0, 0x1);
        gbc.writeMem(0x5926, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xfa5d);
        EXPECT(gbc.pc(), 0x5927);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02E9
        gbc.setState(0x1a19, 0xf78f, 0xa0a0, 0x2bd7, 0x1fd8, 0x8f8f, 0x1, 0x1);
        gbc.writeMem(0x1a19, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xf78f);
        EXPECT(gbc.pc(), 0x1a1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02EA
        gbc.setState(0xd5fd, 0x992e, 0x9460, 0x191e, 0x1f67, 0x6ed1, 0x1, 0x0);
        gbc.writeMem(0xd5fd, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x992e);
        EXPECT(gbc.pc(), 0xd5fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5fd), 0xa7);
        // A7 02EC
        gbc.setState(0x4d9b, 0x23c6, 0xd540, 0xaed6, 0x3dc5, 0x49ad, 0x0, 0x0);
        gbc.writeMem(0x4d9b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x23c6);
        EXPECT(gbc.pc(), 0x4d9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02ED
        gbc.setState(0xe60d, 0xee1b, 0x78e0, 0x9ba3, 0x3046, 0x15ad, 0x0, 0x0);
        gbc.writeMem(0xe60d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xee1b);
        EXPECT(gbc.pc(), 0xe60e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe60d), 0xa7);
        // A7 02EE
        gbc.setState(0x5773, 0x65b9, 0x7190, 0x973c, 0x326c, 0x3312, 0x0, 0x1);
        gbc.writeMem(0x5773, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x65b9);
        EXPECT(gbc.pc(), 0x5774);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02EF
        gbc.setState(0x9995, 0x7ed5, 0xfca0, 0xda1a, 0xa353, 0xd641, 0x0, 0x0);
        gbc.writeMem(0x9995, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x7ed5);
        EXPECT(gbc.pc(), 0x9996);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9995), 0xa7);
        // A7 02F0
        gbc.setState(0xbdf2, 0xce09, 0x3250, 0xffe1, 0x810d, 0x67cf, 0x0, 0x0);
        gbc.writeMem(0xbdf2, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xce09);
        EXPECT(gbc.pc(), 0xbdf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdf2), 0xa7);
        // A7 02F1
        gbc.setState(0xa615, 0x8ef1, 0xb900, 0xfcf8, 0x1d44, 0x42ad, 0x1, 0x1);
        gbc.writeMem(0xa615, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x8ef1);
        EXPECT(gbc.pc(), 0xa616);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa615), 0xa7);
        // A7 02F2
        gbc.setState(0xac3e, 0x511f, 0x3680, 0x99a0, 0xc3e8, 0xf284, 0x0, 0x0);
        gbc.writeMem(0xac3e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x511f);
        EXPECT(gbc.pc(), 0xac3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac3e), 0xa7);
        // A7 02F3
        gbc.setState(0x879f, 0xa22f, 0x9da0, 0x30fe, 0xe9a0, 0xb1ed, 0x0, 0x1);
        gbc.writeMem(0x879f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xa22f);
        EXPECT(gbc.pc(), 0x87a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x879f), 0xa7);
        // A7 02F4
        gbc.setState(0x107e, 0x3637, 0x1220, 0x2c76, 0x5b08, 0xc6a4, 0x0, 0x1);
        gbc.writeMem(0x107e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x3637);
        EXPECT(gbc.pc(), 0x107f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02F5
        gbc.setState(0x8532, 0x96b2, 0x6d70, 0xebf6, 0x88c, 0x5b19, 0x0, 0x1);
        gbc.writeMem(0x8532, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x96b2);
        EXPECT(gbc.pc(), 0x8533);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8532), 0xa7);
        // A7 02F6
        gbc.setState(0xa413, 0xee93, 0x5e00, 0x57b9, 0xce80, 0xb099, 0x1, 0x0);
        gbc.writeMem(0xa413, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xee93);
        EXPECT(gbc.pc(), 0xa414);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa413), 0xa7);
        // A7 02F7
        gbc.setState(0xa60a, 0x7c3e, 0x7600, 0xe67c, 0x299b, 0x8e6, 0x0, 0x0);
        gbc.writeMem(0xa60a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x7c3e);
        EXPECT(gbc.pc(), 0xa60b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa60a), 0xa7);
        // A7 02F8
        gbc.setState(0x8f56, 0xd4be, 0x6950, 0x9599, 0x6318, 0x31aa, 0x0, 0x0);
        gbc.writeMem(0x8f56, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xd4be);
        EXPECT(gbc.pc(), 0x8f57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f56), 0xa7);
        // A7 02F9
        gbc.setState(0x2573, 0x55ea, 0xca90, 0xf6d7, 0x6035, 0x6ab9, 0x0, 0x1);
        gbc.writeMem(0x2573, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x55ea);
        EXPECT(gbc.pc(), 0x2574);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02FA
        gbc.setState(0x9779, 0x63c8, 0xb9b0, 0xe8ea, 0x4e9d, 0x605d, 0x0, 0x0);
        gbc.writeMem(0x9779, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x63c8);
        EXPECT(gbc.pc(), 0x977a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9779), 0xa7);
        // A7 02FB
        gbc.setState(0x5b2e, 0xf546, 0x13b0, 0x8625, 0x7f1f, 0x6c80, 0x1, 0x1);
        gbc.writeMem(0x5b2e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xf546);
        EXPECT(gbc.pc(), 0x5b2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02FC
        gbc.setState(0xc21e, 0xdcb1, 0x8e0, 0x8746, 0x3444, 0xfc12, 0x1, 0x1);
        gbc.writeMem(0xc21e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xdcb1);
        EXPECT(gbc.pc(), 0xc21f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc21e), 0xa7);
        // A7 02FD
        gbc.setState(0x606e, 0xa1b2, 0xa780, 0x3571, 0xe7b9, 0x67d7, 0x0, 0x0);
        gbc.writeMem(0x606e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xa1b2);
        EXPECT(gbc.pc(), 0x606f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 02FE
        gbc.setState(0x768e, 0xeebe, 0x93a0, 0x5c81, 0xc6e9, 0x385, 0x1, 0x1);
        gbc.writeMem(0x768e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xeebe);
        EXPECT(gbc.pc(), 0x768f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0300
        gbc.setState(0x2356, 0x84ad, 0x9310, 0x855e, 0x7a70, 0xd649, 0x0, 0x0);
        gbc.writeMem(0x2356, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x84ad);
        EXPECT(gbc.pc(), 0x2357);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0301
        gbc.setState(0xd919, 0x21d8, 0xfce0, 0xae72, 0xa651, 0x5e06, 0x1, 0x0);
        gbc.writeMem(0xd919, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x21d8);
        EXPECT(gbc.pc(), 0xd91a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd919), 0xa7);
        // A7 0302
        gbc.setState(0xb057, 0xcc2a, 0xd2f0, 0x76fc, 0x4cbe, 0x6bb1, 0x1, 0x0);
        gbc.writeMem(0xb057, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xcc2a);
        EXPECT(gbc.pc(), 0xb058);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb057), 0xa7);
        // A7 0303
        gbc.setState(0x56d4, 0xf87d, 0x7c00, 0x9023, 0xbc9e, 0x6d8e, 0x0, 0x0);
        gbc.writeMem(0x56d4, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xf87d);
        EXPECT(gbc.pc(), 0x56d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0304
        gbc.setState(0x8aa2, 0x4386, 0x1400, 0x8437, 0xdfa0, 0x8304, 0x0, 0x0);
        gbc.writeMem(0x8aa2, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x4386);
        EXPECT(gbc.pc(), 0x8aa3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8aa2), 0xa7);
        // A7 0305
        gbc.setState(0x340c, 0xdf59, 0x88a0, 0x799, 0x76f5, 0x3ca9, 0x0, 0x1);
        gbc.writeMem(0x340c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xdf59);
        EXPECT(gbc.pc(), 0x340d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0306
        gbc.setState(0xd56a, 0xca8a, 0x4b30, 0x3d45, 0xa4f1, 0x6710, 0x0, 0x0);
        gbc.writeMem(0xd56a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xca8a);
        EXPECT(gbc.pc(), 0xd56b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd56a), 0xa7);
        // A7 0307
        gbc.setState(0x86e9, 0xf321, 0xb270, 0xb572, 0xc774, 0xf924, 0x0, 0x1);
        gbc.writeMem(0x86e9, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xf321);
        EXPECT(gbc.pc(), 0x86ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86e9), 0xa7);
        // A7 0308
        gbc.setState(0x1424, 0x9a0a, 0xf40, 0x7dbb, 0x47af, 0xc467, 0x1, 0x0);
        gbc.writeMem(0x1424, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x9a0a);
        EXPECT(gbc.pc(), 0x1425);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0309
        gbc.setState(0x1ac6, 0x712c, 0x21f0, 0x70cf, 0x52ac, 0x68a5, 0x0, 0x1);
        gbc.writeMem(0x1ac6, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x712c);
        EXPECT(gbc.pc(), 0x1ac7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 030A
        gbc.setState(0xd362, 0x2a13, 0xf060, 0x6cbd, 0xcc66, 0xc231, 0x0, 0x0);
        gbc.writeMem(0xd362, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x2a13);
        EXPECT(gbc.pc(), 0xd363);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd362), 0xa7);
        // A7 030B
        gbc.setState(0x194b, 0xa1da, 0x9f40, 0x6a7b, 0xff77, 0x2e9a, 0x0, 0x0);
        gbc.writeMem(0x194b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xa1da);
        EXPECT(gbc.pc(), 0x194c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 030C
        gbc.setState(0xc80d, 0x8d0e, 0xed50, 0x53c2, 0xce23, 0xe17e, 0x1, 0x0);
        gbc.writeMem(0xc80d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x8d0e);
        EXPECT(gbc.pc(), 0xc80e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc80d), 0xa7);
        // A7 030D
        gbc.setState(0x1aa0, 0x6699, 0x8d0, 0xe533, 0xa406, 0x61d8, 0x1, 0x1);
        gbc.writeMem(0x1aa0, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x6699);
        EXPECT(gbc.pc(), 0x1aa1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 030E
        gbc.setState(0x4500, 0xcc86, 0x80f0, 0x63c4, 0x9764, 0xf301, 0x0, 0x0);
        gbc.writeMem(0x4500, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xcc86);
        EXPECT(gbc.pc(), 0x4501);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 030F
        gbc.setState(0x39fb, 0x4d1f, 0x6fa0, 0x51f2, 0x532e, 0xc5ed, 0x0, 0x1);
        gbc.writeMem(0x39fb, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x4d1f);
        EXPECT(gbc.pc(), 0x39fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0310
        gbc.setState(0x68cf, 0x8ffe, 0x58c0, 0x193c, 0x113d, 0xc3c7, 0x1, 0x1);
        gbc.writeMem(0x68cf, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x8ffe);
        EXPECT(gbc.pc(), 0x68d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0311
        gbc.setState(0x3b1b, 0x8d5f, 0x87c0, 0x23ad, 0x54b0, 0xc394, 0x1, 0x1);
        gbc.writeMem(0x3b1b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x8d5f);
        EXPECT(gbc.pc(), 0x3b1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0312
        gbc.setState(0xac4d, 0x4a70, 0xcb30, 0x9cb1, 0x4aa2, 0x7faa, 0x0, 0x0);
        gbc.writeMem(0xac4d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x4a70);
        EXPECT(gbc.pc(), 0xac4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac4d), 0xa7);
        // A7 0313
        gbc.setState(0x848, 0xe3f5, 0x22e0, 0x36d1, 0x7d08, 0x4b9a, 0x1, 0x1);
        gbc.writeMem(0x848, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xe3f5);
        EXPECT(gbc.pc(), 0x849);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0314
        gbc.setState(0xde76, 0xfa2b, 0x2ac0, 0x1822, 0x3074, 0x62a3, 0x1, 0x0);
        gbc.writeMem(0xde76, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xfa2b);
        EXPECT(gbc.pc(), 0xde77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde76), 0xa7);
        // A7 0315
        gbc.setState(0xc45d, 0x6b2d, 0x1a10, 0xe2cd, 0x93ac, 0x2fb8, 0x1, 0x1);
        gbc.writeMem(0xc45d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x6b2d);
        EXPECT(gbc.pc(), 0xc45e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc45d), 0xa7);
        // A7 0316
        gbc.setState(0x7eb1, 0x3227, 0x8760, 0x21d4, 0x2778, 0x19b0, 0x1, 0x0);
        gbc.writeMem(0x7eb1, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x3227);
        EXPECT(gbc.pc(), 0x7eb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0317
        gbc.setState(0x6370, 0xebee, 0xc890, 0x85ea, 0x2f4, 0x897b, 0x0, 0x1);
        gbc.writeMem(0x6370, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xebee);
        EXPECT(gbc.pc(), 0x6371);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0318
        gbc.setState(0xe176, 0x52d4, 0xcf40, 0x698d, 0x6b16, 0x975f, 0x0, 0x0);
        gbc.writeMem(0xe176, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x52d4);
        EXPECT(gbc.pc(), 0xe177);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe176), 0xa7);
        // A7 0319
        gbc.setState(0x812e, 0xfff6, 0x1ff0, 0x3d10, 0xc564, 0xa492, 0x1, 0x1);
        gbc.writeMem(0x812e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xfff6);
        EXPECT(gbc.pc(), 0x812f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x812e), 0xa7);
        // A7 031A
        gbc.setState(0x5002, 0xcf17, 0x8830, 0x9ee9, 0x7691, 0x1e58, 0x1, 0x1);
        gbc.writeMem(0x5002, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xcf17);
        EXPECT(gbc.pc(), 0x5003);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 031B
        gbc.setState(0x1ec0, 0x78ee, 0x4c80, 0xb790, 0xfe58, 0xb8e4, 0x0, 0x1);
        gbc.writeMem(0x1ec0, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x78ee);
        EXPECT(gbc.pc(), 0x1ec1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 031C
        gbc.setState(0x8fe7, 0x80f6, 0x5cf0, 0x1136, 0xea00, 0x1274, 0x1, 0x1);
        gbc.writeMem(0x8fe7, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x80f6);
        EXPECT(gbc.pc(), 0x8fe8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fe7), 0xa7);
        // A7 031D
        gbc.setState(0x1fb3, 0x6e42, 0xa240, 0x859b, 0xb762, 0xfce2, 0x1, 0x0);
        gbc.writeMem(0x1fb3, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x6e42);
        EXPECT(gbc.pc(), 0x1fb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 031E
        gbc.setState(0xbf95, 0x854, 0xb640, 0xb798, 0xf4c2, 0x2f22, 0x0, 0x1);
        gbc.writeMem(0xbf95, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x854);
        EXPECT(gbc.pc(), 0xbf96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf95), 0xa7);
        // A7 031F
        gbc.setState(0x2b9f, 0xed05, 0xc760, 0x1596, 0x59bb, 0xce9, 0x0, 0x1);
        gbc.writeMem(0x2b9f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xed05);
        EXPECT(gbc.pc(), 0x2ba0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0320
        gbc.setState(0x1b2b, 0x948f, 0xd220, 0x1ca0, 0x9207, 0x70b6, 0x1, 0x0);
        gbc.writeMem(0x1b2b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x948f);
        EXPECT(gbc.pc(), 0x1b2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0321
        gbc.setState(0x3462, 0xa7d9, 0x7450, 0x6863, 0xed65, 0x665c, 0x0, 0x1);
        gbc.writeMem(0x3462, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xa7d9);
        EXPECT(gbc.pc(), 0x3463);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0322
        gbc.setState(0x2cee, 0x7ad5, 0xd710, 0x5e5b, 0xaecc, 0x1f04, 0x0, 0x0);
        gbc.writeMem(0x2cee, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x7ad5);
        EXPECT(gbc.pc(), 0x2cef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0323
        gbc.setState(0x4542, 0x72ea, 0xb310, 0xa7a8, 0xaca8, 0xaeb7, 0x1, 0x1);
        gbc.writeMem(0x4542, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x72ea);
        EXPECT(gbc.pc(), 0x4543);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0324
        gbc.setState(0x9621, 0xee85, 0x470, 0x147a, 0x6aad, 0xf5f, 0x1, 0x1);
        gbc.writeMem(0x9621, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xee85);
        EXPECT(gbc.pc(), 0x9622);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9621), 0xa7);
        // A7 0325
        gbc.setState(0x7fb3, 0xdcb7, 0x77b0, 0x964d, 0x3067, 0x77c6, 0x0, 0x1);
        gbc.writeMem(0x7fb3, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xdcb7);
        EXPECT(gbc.pc(), 0x7fb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0326
        gbc.setState(0x8f91, 0xd949, 0x80e0, 0x5e04, 0x7588, 0x4228, 0x1, 0x0);
        gbc.writeMem(0x8f91, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xd949);
        EXPECT(gbc.pc(), 0x8f92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f91), 0xa7);
        // A7 0327
        gbc.setState(0x8975, 0xa53b, 0x2910, 0x2a40, 0x1160, 0x156a, 0x1, 0x1);
        gbc.writeMem(0x8975, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xa53b);
        EXPECT(gbc.pc(), 0x8976);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8975), 0xa7);
        // A7 0328
        gbc.setState(0xe2e9, 0x1e45, 0xc5c0, 0x7c84, 0x3d9f, 0x19b9, 0x0, 0x0);
        gbc.writeMem(0xe2e9, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x1e45);
        EXPECT(gbc.pc(), 0xe2ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2e9), 0xa7);
        // A7 0329
        gbc.setState(0x41e9, 0x1c30, 0xe1d0, 0x409c, 0x96b7, 0x653a, 0x0, 0x0);
        gbc.writeMem(0x41e9, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x1c30);
        EXPECT(gbc.pc(), 0x41ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 032A
        gbc.setState(0x506f, 0xc166, 0x30c0, 0x78e1, 0xb179, 0x5a52, 0x1, 0x1);
        gbc.writeMem(0x506f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xc166);
        EXPECT(gbc.pc(), 0x5070);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 032B
        gbc.setState(0x1942, 0xd6dd, 0xd210, 0xc22b, 0xb052, 0x9a27, 0x0, 0x1);
        gbc.writeMem(0x1942, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xd6dd);
        EXPECT(gbc.pc(), 0x1943);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 032C
        gbc.setState(0x9148, 0x4c22, 0xf990, 0xfa89, 0xef19, 0x392c, 0x0, 0x0);
        gbc.writeMem(0x9148, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x4c22);
        EXPECT(gbc.pc(), 0x9149);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9148), 0xa7);
        // A7 032D
        gbc.setState(0x1301, 0x4603, 0x83c0, 0xef13, 0x2bde, 0x161f, 0x1, 0x1);
        gbc.writeMem(0x1301, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x4603);
        EXPECT(gbc.pc(), 0x1302);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 032E
        gbc.setState(0x8295, 0x5b4, 0xa890, 0xd728, 0xee63, 0x66bb, 0x1, 0x1);
        gbc.writeMem(0x8295, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x5b4);
        EXPECT(gbc.pc(), 0x8296);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8295), 0xa7);
        // A7 032F
        gbc.setState(0xa2c4, 0xea2b, 0x9370, 0x2271, 0x4766, 0xb8c5, 0x1, 0x0);
        gbc.writeMem(0xa2c4, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xea2b);
        EXPECT(gbc.pc(), 0xa2c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2c4), 0xa7);
        // A7 0330
        gbc.setState(0xd276, 0x27af, 0xd830, 0xcd28, 0x3e91, 0x3b7b, 0x0, 0x1);
        gbc.writeMem(0xd276, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x27af);
        EXPECT(gbc.pc(), 0xd277);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd276), 0xa7);
        // A7 0331
        gbc.setState(0xecdc, 0x6cfc, 0x5a40, 0x7d84, 0x1f43, 0x5f8d, 0x1, 0x0);
        gbc.writeMem(0xecdc, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x6cfc);
        EXPECT(gbc.pc(), 0xecdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecdc), 0xa7);
        // A7 0332
        gbc.setState(0xc36e, 0xa9e8, 0x8d00, 0xc3ef, 0x2300, 0x6325, 0x1, 0x0);
        gbc.writeMem(0xc36e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xa9e8);
        EXPECT(gbc.pc(), 0xc36f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc36e), 0xa7);
        // A7 0333
        gbc.setState(0x18c8, 0x4010, 0x3ea0, 0xb0a9, 0xc645, 0xe3fb, 0x0, 0x0);
        gbc.writeMem(0x18c8, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x4010);
        EXPECT(gbc.pc(), 0x18c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0334
        gbc.setState(0xc9c2, 0x8637, 0x3110, 0xa7c8, 0xe853, 0xeb6, 0x0, 0x1);
        gbc.writeMem(0xc9c2, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x8637);
        EXPECT(gbc.pc(), 0xc9c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9c2), 0xa7);
        // A7 0335
        gbc.setState(0x6fe3, 0x8987, 0x7cc0, 0x4972, 0x4634, 0xd20e, 0x1, 0x1);
        gbc.writeMem(0x6fe3, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x8987);
        EXPECT(gbc.pc(), 0x6fe4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0336
        gbc.setState(0x419c, 0x59d9, 0x3e50, 0x4aa4, 0x20dc, 0x98ac, 0x0, 0x1);
        gbc.writeMem(0x419c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x59d9);
        EXPECT(gbc.pc(), 0x419d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0338
        gbc.setState(0xc4b6, 0x2bbe, 0x1e10, 0x7207, 0x5d1c, 0xf375, 0x0, 0x1);
        gbc.writeMem(0xc4b6, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x2bbe);
        EXPECT(gbc.pc(), 0xc4b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4b6), 0xa7);
        // A7 0339
        gbc.setState(0x1c06, 0xbfcd, 0x5e80, 0x1f41, 0x95b2, 0xfb27, 0x0, 0x0);
        gbc.writeMem(0x1c06, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xbfcd);
        EXPECT(gbc.pc(), 0x1c07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 033A
        gbc.setState(0x3468, 0x8764, 0xcd60, 0xe6e5, 0x95fb, 0x604d, 0x0, 0x1);
        gbc.writeMem(0x3468, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x8764);
        EXPECT(gbc.pc(), 0x3469);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 033B
        gbc.setState(0xd4d8, 0x814c, 0x1240, 0x323, 0xd985, 0x2e4e, 0x1, 0x1);
        gbc.writeMem(0xd4d8, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x814c);
        EXPECT(gbc.pc(), 0xd4d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4d8), 0xa7);
        // A7 033C
        gbc.setState(0x96c7, 0x1f42, 0x8910, 0x42d2, 0x81ef, 0xa9f9, 0x1, 0x0);
        gbc.writeMem(0x96c7, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x1f42);
        EXPECT(gbc.pc(), 0x96c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96c7), 0xa7);
        // A7 033D
        gbc.setState(0x2a8c, 0xa1d5, 0x6e90, 0x7ca8, 0x48c3, 0xe38b, 0x0, 0x0);
        gbc.writeMem(0x2a8c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xa1d5);
        EXPECT(gbc.pc(), 0x2a8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 033E
        gbc.setState(0xd653, 0xe55d, 0x7fe0, 0x3e52, 0xf6b1, 0xb412, 0x0, 0x1);
        gbc.writeMem(0xd653, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xe55d);
        EXPECT(gbc.pc(), 0xd654);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd653), 0xa7);
        // A7 033F
        gbc.setState(0xdc3b, 0xad6, 0xc8d0, 0xa06, 0x72b5, 0xebc5, 0x1, 0x0);
        gbc.writeMem(0xdc3b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xad6);
        EXPECT(gbc.pc(), 0xdc3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc3b), 0xa7);
        // A7 0340
        gbc.setState(0xb941, 0x1d32, 0x6c0, 0x9075, 0xc906, 0x2d01, 0x1, 0x0);
        gbc.writeMem(0xb941, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x1d32);
        EXPECT(gbc.pc(), 0xb942);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb941), 0xa7);
        // A7 0341
        gbc.setState(0x1c87, 0xff02, 0xc9b0, 0x1932, 0x95a8, 0xdc5b, 0x0, 0x1);
        gbc.writeMem(0x1c87, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xff02);
        EXPECT(gbc.pc(), 0x1c88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0342
        gbc.setState(0x3f53, 0x6394, 0xe150, 0x94a5, 0x4ec9, 0x55c4, 0x0, 0x0);
        gbc.writeMem(0x3f53, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x6394);
        EXPECT(gbc.pc(), 0x3f54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0343
        gbc.setState(0xeb1f, 0x5f63, 0xc900, 0x4030, 0x10e3, 0xc749, 0x0, 0x1);
        gbc.writeMem(0xeb1f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x5f63);
        EXPECT(gbc.pc(), 0xeb20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb1f), 0xa7);
        // A7 0345
        gbc.setState(0xe481, 0x5fa8, 0x2260, 0xc295, 0xcf72, 0xf166, 0x0, 0x1);
        gbc.writeMem(0xe481, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x5fa8);
        EXPECT(gbc.pc(), 0xe482);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe481), 0xa7);
        // A7 0346
        gbc.setState(0xa8e7, 0xa40e, 0xf450, 0x3ed2, 0xfad2, 0x28d1, 0x0, 0x0);
        gbc.writeMem(0xa8e7, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xa40e);
        EXPECT(gbc.pc(), 0xa8e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8e7), 0xa7);
        // A7 0347
        gbc.setState(0x7069, 0xa705, 0x7310, 0x64fd, 0x5021, 0xadd4, 0x1, 0x0);
        gbc.writeMem(0x7069, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xa705);
        EXPECT(gbc.pc(), 0x706a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0348
        gbc.setState(0xd127, 0xb442, 0x90b0, 0xd9d8, 0x645b, 0x8a8a, 0x1, 0x1);
        gbc.writeMem(0xd127, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xb442);
        EXPECT(gbc.pc(), 0xd128);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd127), 0xa7);
        // A7 0349
        gbc.setState(0xb3c, 0x7096, 0xa970, 0xc71a, 0xdaf3, 0x2bfd, 0x0, 0x0);
        gbc.writeMem(0xb3c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x7096);
        EXPECT(gbc.pc(), 0xb3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 034A
        gbc.setState(0x8139, 0x2613, 0x6480, 0x1fce, 0x6142, 0x98f9, 0x0, 0x0);
        gbc.writeMem(0x8139, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x2613);
        EXPECT(gbc.pc(), 0x813a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8139), 0xa7);
        // A7 034B
        gbc.setState(0x3dab, 0x854f, 0xe880, 0xe669, 0x84c0, 0xeb4, 0x1, 0x0);
        gbc.writeMem(0x3dab, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x854f);
        EXPECT(gbc.pc(), 0x3dac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 034C
        gbc.setState(0x2b63, 0x62e1, 0x46c0, 0x194b, 0x885f, 0x6d9d, 0x1, 0x1);
        gbc.writeMem(0x2b63, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x62e1);
        EXPECT(gbc.pc(), 0x2b64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 034D
        gbc.setState(0x12e5, 0xc9b, 0xfe30, 0xdaf7, 0xac63, 0x9d54, 0x1, 0x0);
        gbc.writeMem(0x12e5, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xc9b);
        EXPECT(gbc.pc(), 0x12e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 034E
        gbc.setState(0x2e9d, 0x5d11, 0xbf90, 0x4418, 0x2784, 0x3639, 0x1, 0x1);
        gbc.writeMem(0x2e9d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x5d11);
        EXPECT(gbc.pc(), 0x2e9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 034F
        gbc.setState(0x43d3, 0xbd6, 0xd650, 0xe778, 0x2e52, 0xde2d, 0x0, 0x1);
        gbc.writeMem(0x43d3, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xbd6);
        EXPECT(gbc.pc(), 0x43d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0350
        gbc.setState(0x9267, 0x328d, 0x39c0, 0xfc2e, 0xc3e0, 0xef10, 0x0, 0x1);
        gbc.writeMem(0x9267, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x328d);
        EXPECT(gbc.pc(), 0x9268);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9267), 0xa7);
        // A7 0351
        gbc.setState(0x8807, 0x544a, 0xa8b0, 0x70d3, 0x6448, 0x248d, 0x0, 0x1);
        gbc.writeMem(0x8807, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x544a);
        EXPECT(gbc.pc(), 0x8808);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8807), 0xa7);
        // A7 0352
        gbc.setState(0x47a4, 0x3355, 0xe0c0, 0x2be0, 0xb402, 0xa746, 0x0, 0x1);
        gbc.writeMem(0x47a4, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x3355);
        EXPECT(gbc.pc(), 0x47a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0353
        gbc.setState(0xa627, 0x380f, 0x9560, 0xc6c1, 0x6493, 0xaa43, 0x1, 0x1);
        gbc.writeMem(0xa627, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x380f);
        EXPECT(gbc.pc(), 0xa628);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa627), 0xa7);
        // A7 0354
        gbc.setState(0x5f9c, 0x1126, 0x3900, 0x5a77, 0x1564, 0x47f7, 0x0, 0x0);
        gbc.writeMem(0x5f9c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x1126);
        EXPECT(gbc.pc(), 0x5f9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0355
        gbc.setState(0x4558, 0x6cd1, 0x5490, 0x5cbc, 0xc692, 0x4675, 0x0, 0x1);
        gbc.writeMem(0x4558, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x6cd1);
        EXPECT(gbc.pc(), 0x4559);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0356
        gbc.setState(0xb0b0, 0x163, 0xc390, 0xca39, 0xcd53, 0xa2f2, 0x1, 0x0);
        gbc.writeMem(0xb0b0, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x163);
        EXPECT(gbc.pc(), 0xb0b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0b0), 0xa7);
        // A7 0357
        gbc.setState(0xd05c, 0x6e4e, 0x3c80, 0x9b7d, 0x18b8, 0xb429, 0x0, 0x1);
        gbc.writeMem(0xd05c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x6e4e);
        EXPECT(gbc.pc(), 0xd05d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd05c), 0xa7);
        // A7 0358
        gbc.setState(0x4abc, 0x2427, 0x3230, 0xc769, 0xb59b, 0xc05f, 0x0, 0x1);
        gbc.writeMem(0x4abc, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x2427);
        EXPECT(gbc.pc(), 0x4abd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0359
        gbc.setState(0x5029, 0x2552, 0xe60, 0xd20e, 0x1f48, 0x99ea, 0x0, 0x1);
        gbc.writeMem(0x5029, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x2552);
        EXPECT(gbc.pc(), 0x502a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 035A
        gbc.setState(0x5ae3, 0xe393, 0x16c0, 0x7897, 0x8f09, 0x1cb2, 0x1, 0x1);
        gbc.writeMem(0x5ae3, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xe393);
        EXPECT(gbc.pc(), 0x5ae4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 035B
        gbc.setState(0x4ba2, 0x58fc, 0xf2c0, 0x26c9, 0x621d, 0x5110, 0x0, 0x1);
        gbc.writeMem(0x4ba2, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x58fc);
        EXPECT(gbc.pc(), 0x4ba3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 035C
        gbc.setState(0x5548, 0x67bc, 0x7b90, 0x1bb1, 0x4e92, 0x1bb1, 0x1, 0x0);
        gbc.writeMem(0x5548, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x67bc);
        EXPECT(gbc.pc(), 0x5549);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 035D
        gbc.setState(0x4cd4, 0x381, 0xbd40, 0x7ec4, 0xa8f5, 0x809d, 0x1, 0x1);
        gbc.writeMem(0x4cd4, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x381);
        EXPECT(gbc.pc(), 0x4cd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 035E
        gbc.setState(0x4aa8, 0x10d0, 0xa3d0, 0xb2a7, 0xf0d7, 0xf93b, 0x0, 0x1);
        gbc.writeMem(0x4aa8, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x10d0);
        EXPECT(gbc.pc(), 0x4aa9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 035F
        gbc.setState(0x8aa0, 0x6498, 0x21f0, 0x1a1a, 0x1e4d, 0xf893, 0x0, 0x1);
        gbc.writeMem(0x8aa0, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x6498);
        EXPECT(gbc.pc(), 0x8aa1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8aa0), 0xa7);
        // A7 0360
        gbc.setState(0x5b4f, 0xe058, 0xdf60, 0xcd10, 0xbaf, 0x123, 0x0, 0x0);
        gbc.writeMem(0x5b4f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xe058);
        EXPECT(gbc.pc(), 0x5b50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0361
        gbc.setState(0x84ae, 0x2fb8, 0xae20, 0xe239, 0x32dc, 0x3dca, 0x1, 0x1);
        gbc.writeMem(0x84ae, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x2fb8);
        EXPECT(gbc.pc(), 0x84af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84ae), 0xa7);
        // A7 0362
        gbc.setState(0x893, 0xeea8, 0xac70, 0x95e8, 0x8174, 0xd674, 0x1, 0x0);
        gbc.writeMem(0x893, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xeea8);
        EXPECT(gbc.pc(), 0x894);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0363
        gbc.setState(0xbbb4, 0x3ba2, 0x1740, 0x7b51, 0x1c02, 0x56ed, 0x1, 0x0);
        gbc.writeMem(0xbbb4, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x3ba2);
        EXPECT(gbc.pc(), 0xbbb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbb4), 0xa7);
        // A7 0364
        gbc.setState(0xaf1e, 0x42d8, 0x54f0, 0xa7a8, 0xa72f, 0xff60, 0x0, 0x0);
        gbc.writeMem(0xaf1e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x42d8);
        EXPECT(gbc.pc(), 0xaf1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf1e), 0xa7);
        // A7 0365
        gbc.setState(0x7fa5, 0xbe08, 0x50, 0xc455, 0x88da, 0xb772, 0x0, 0x0);
        gbc.writeMem(0x7fa5, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xbe08);
        EXPECT(gbc.pc(), 0x7fa6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0367
        gbc.setState(0x8e4b, 0xbe61, 0x40c0, 0x27f7, 0x83aa, 0xabcc, 0x1, 0x0);
        gbc.writeMem(0x8e4b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xbe61);
        EXPECT(gbc.pc(), 0x8e4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e4b), 0xa7);
        // A7 0368
        gbc.setState(0x7528, 0xf863, 0x8f00, 0xbac3, 0xbe9a, 0x2b56, 0x1, 0x0);
        gbc.writeMem(0x7528, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xf863);
        EXPECT(gbc.pc(), 0x7529);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0369
        gbc.setState(0x28e8, 0xc56d, 0xaef0, 0x7568, 0x89e, 0x35e8, 0x1, 0x0);
        gbc.writeMem(0x28e8, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xc56d);
        EXPECT(gbc.pc(), 0x28e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 036A
        gbc.setState(0x1b2d, 0x8539, 0x9820, 0x599e, 0xec10, 0xcb45, 0x0, 0x0);
        gbc.writeMem(0x1b2d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x8539);
        EXPECT(gbc.pc(), 0x1b2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 036B
        gbc.setState(0x85a, 0x69bc, 0xe200, 0x1a1e, 0x8e17, 0xe975, 0x1, 0x0);
        gbc.writeMem(0x85a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x69bc);
        EXPECT(gbc.pc(), 0x85b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 036C
        gbc.setState(0xc91, 0x7f14, 0x8cd0, 0xa046, 0x5b2a, 0x377, 0x0, 0x0);
        gbc.writeMem(0xc91, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x7f14);
        EXPECT(gbc.pc(), 0xc92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 036D
        gbc.setState(0xdc21, 0x4c73, 0xc0e0, 0x5cfb, 0x3a34, 0x6ece, 0x0, 0x0);
        gbc.writeMem(0xdc21, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x4c73);
        EXPECT(gbc.pc(), 0xdc22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc21), 0xa7);
        // A7 036E
        gbc.setState(0x8371, 0x3421, 0x8b50, 0xfd2, 0x9107, 0xf939, 0x1, 0x0);
        gbc.writeMem(0x8371, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x3421);
        EXPECT(gbc.pc(), 0x8372);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8371), 0xa7);
        // A7 036F
        gbc.setState(0xa429, 0x680a, 0x2470, 0x610b, 0xe526, 0x63bc, 0x0, 0x0);
        gbc.writeMem(0xa429, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x680a);
        EXPECT(gbc.pc(), 0xa42a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa429), 0xa7);
        // A7 0370
        gbc.setState(0x25c0, 0xfddf, 0xe500, 0xd0d, 0xbd4, 0x5b52, 0x0, 0x1);
        gbc.writeMem(0x25c0, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xfddf);
        EXPECT(gbc.pc(), 0x25c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0371
        gbc.setState(0xed70, 0x45da, 0x1880, 0x1c53, 0xf111, 0x3ee1, 0x1, 0x1);
        gbc.writeMem(0xed70, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x45da);
        EXPECT(gbc.pc(), 0xed71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed70), 0xa7);
        // A7 0372
        gbc.setState(0x7c14, 0x3950, 0x2ca0, 0xb4cb, 0x261a, 0xb76d, 0x0, 0x1);
        gbc.writeMem(0x7c14, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x3950);
        EXPECT(gbc.pc(), 0x7c15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0373
        gbc.setState(0xbc6e, 0x4b4, 0x4ec0, 0x261a, 0xf25a, 0x4088, 0x1, 0x1);
        gbc.writeMem(0xbc6e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x4b4);
        EXPECT(gbc.pc(), 0xbc6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc6e), 0xa7);
        // A7 0374
        gbc.setState(0xc46, 0x3259, 0x3230, 0x67, 0xd112, 0x87ac, 0x0, 0x1);
        gbc.writeMem(0xc46, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x3259);
        EXPECT(gbc.pc(), 0xc47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0376
        gbc.setState(0x7e49, 0x2d1e, 0x4ba0, 0x14e3, 0x37d, 0x83c6, 0x0, 0x0);
        gbc.writeMem(0x7e49, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x2d1e);
        EXPECT(gbc.pc(), 0x7e4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0377
        gbc.setState(0x8463, 0x8e80, 0x7320, 0xb788, 0xf11d, 0xc0b3, 0x1, 0x1);
        gbc.writeMem(0x8463, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x8e80);
        EXPECT(gbc.pc(), 0x8464);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8463), 0xa7);
        // A7 0378
        gbc.setState(0x9a21, 0xbe92, 0x88e0, 0x33d4, 0xafd3, 0x4c2b, 0x1, 0x1);
        gbc.writeMem(0x9a21, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xbe92);
        EXPECT(gbc.pc(), 0x9a22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a21), 0xa7);
        // A7 0379
        gbc.setState(0xbe7c, 0xa45, 0x3160, 0xf1f0, 0xb140, 0xd4c0, 0x0, 0x1);
        gbc.writeMem(0xbe7c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xa45);
        EXPECT(gbc.pc(), 0xbe7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe7c), 0xa7);
        // A7 037A
        gbc.setState(0x571e, 0xc128, 0xe370, 0x85a0, 0xe0b, 0x6f94, 0x1, 0x0);
        gbc.writeMem(0x571e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xc128);
        EXPECT(gbc.pc(), 0x571f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 037B
        gbc.setState(0xc14c, 0x26f, 0xaa20, 0xb4d2, 0x1002, 0x4fb0, 0x0, 0x0);
        gbc.writeMem(0xc14c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x26f);
        EXPECT(gbc.pc(), 0xc14d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc14c), 0xa7);
        // A7 037C
        gbc.setState(0xe7e8, 0x410e, 0x8680, 0x2532, 0x21c3, 0x34de, 0x0, 0x1);
        gbc.writeMem(0xe7e8, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x410e);
        EXPECT(gbc.pc(), 0xe7e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7e8), 0xa7);
        // A7 037D
        gbc.setState(0xd6b4, 0x1cbf, 0x8c00, 0x53d, 0xbf5c, 0x33fc, 0x1, 0x1);
        gbc.writeMem(0xd6b4, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x1cbf);
        EXPECT(gbc.pc(), 0xd6b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6b4), 0xa7);
        // A7 037E
        gbc.setState(0xba6c, 0x430f, 0x130, 0xa088, 0xc9ab, 0xed3c, 0x1, 0x0);
        gbc.writeMem(0xba6c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x430f);
        EXPECT(gbc.pc(), 0xba6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba6c), 0xa7);
        // A7 0380
        gbc.setState(0x4bba, 0x40b4, 0xca90, 0x4274, 0x599b, 0x1e29, 0x1, 0x0);
        gbc.writeMem(0x4bba, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x40b4);
        EXPECT(gbc.pc(), 0x4bbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0381
        gbc.setState(0x31cd, 0xd27e, 0xc8b0, 0x503a, 0x6f2c, 0x2d45, 0x0, 0x0);
        gbc.writeMem(0x31cd, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xd27e);
        EXPECT(gbc.pc(), 0x31ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0382
        gbc.setState(0x1631, 0x681, 0x9f20, 0xbbe5, 0x9a0, 0x9794, 0x1, 0x0);
        gbc.writeMem(0x1631, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x681);
        EXPECT(gbc.pc(), 0x1632);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0383
        gbc.setState(0x99dc, 0x9b6c, 0xa430, 0xfed6, 0x5c9b, 0x3b3a, 0x0, 0x1);
        gbc.writeMem(0x99dc, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x9b6c);
        EXPECT(gbc.pc(), 0x99dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99dc), 0xa7);
        // A7 0384
        gbc.setState(0xc1ce, 0x55ea, 0xbd00, 0xf335, 0xa8e3, 0x77ec, 0x1, 0x1);
        gbc.writeMem(0xc1ce, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x55ea);
        EXPECT(gbc.pc(), 0xc1cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1ce), 0xa7);
        // A7 0385
        gbc.setState(0xee33, 0x7d2c, 0xa9e0, 0xbd42, 0xf18d, 0x39c6, 0x0, 0x1);
        gbc.writeMem(0xee33, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x7d2c);
        EXPECT(gbc.pc(), 0xee34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee33), 0xa7);
        // A7 0386
        gbc.setState(0x379e, 0x9aa4, 0x1ef0, 0x8286, 0xb1aa, 0x7a80, 0x1, 0x0);
        gbc.writeMem(0x379e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x9aa4);
        EXPECT(gbc.pc(), 0x379f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0387
        gbc.setState(0xeb7c, 0xb089, 0xfab0, 0x4e09, 0xdb84, 0xe9bc, 0x1, 0x0);
        gbc.writeMem(0xeb7c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xb089);
        EXPECT(gbc.pc(), 0xeb7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb7c), 0xa7);
        // A7 0388
        gbc.setState(0xb1c1, 0x9e2e, 0x84a0, 0xbbc0, 0x9e53, 0xba7c, 0x0, 0x0);
        gbc.writeMem(0xb1c1, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x9e2e);
        EXPECT(gbc.pc(), 0xb1c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1c1), 0xa7);
        // A7 0389
        gbc.setState(0x66f, 0xd9d3, 0xc5a0, 0xf366, 0xd2be, 0xc21d, 0x0, 0x0);
        gbc.writeMem(0x66f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xd9d3);
        EXPECT(gbc.pc(), 0x670);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 038A
        gbc.setState(0x3941, 0x69d2, 0xfb00, 0xc84e, 0x35f6, 0xc3fb, 0x1, 0x1);
        gbc.writeMem(0x3941, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x69d2);
        EXPECT(gbc.pc(), 0x3942);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 038B
        gbc.setState(0xb58, 0x7759, 0xe080, 0xae60, 0x513e, 0xa5f2, 0x1, 0x0);
        gbc.writeMem(0xb58, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x7759);
        EXPECT(gbc.pc(), 0xb59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 038C
        gbc.setState(0x568d, 0x24aa, 0x3dd0, 0x75c8, 0xcac0, 0x1903, 0x0, 0x1);
        gbc.writeMem(0x568d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x24aa);
        EXPECT(gbc.pc(), 0x568e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 038D
        gbc.setState(0x5573, 0xade8, 0xf5d0, 0x5dc7, 0xdc3, 0xf47d, 0x0, 0x1);
        gbc.writeMem(0x5573, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xade8);
        EXPECT(gbc.pc(), 0x5574);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 038E
        gbc.setState(0x71a4, 0xc1e, 0x5fd0, 0x4623, 0x1836, 0xbece, 0x1, 0x1);
        gbc.writeMem(0x71a4, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xc1e);
        EXPECT(gbc.pc(), 0x71a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 038F
        gbc.setState(0xb210, 0xa06c, 0x5d0, 0xc92d, 0xe082, 0xf02a, 0x1, 0x0);
        gbc.writeMem(0xb210, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xa06c);
        EXPECT(gbc.pc(), 0xb211);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb210), 0xa7);
        // A7 0390
        gbc.setState(0xbb85, 0x5982, 0xdac0, 0x26b2, 0xae89, 0x5fdc, 0x0, 0x1);
        gbc.writeMem(0xbb85, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x5982);
        EXPECT(gbc.pc(), 0xbb86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb85), 0xa7);
        // A7 0391
        gbc.setState(0x8165, 0xba84, 0x1b50, 0x4fd8, 0x6635, 0x607c, 0x1, 0x1);
        gbc.writeMem(0x8165, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xba84);
        EXPECT(gbc.pc(), 0x8166);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8165), 0xa7);
        // A7 0392
        gbc.setState(0xc74, 0xfb2b, 0xf30, 0x6820, 0x929f, 0x2da0, 0x0, 0x0);
        gbc.writeMem(0xc74, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xfb2b);
        EXPECT(gbc.pc(), 0xc75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0393
        gbc.setState(0xc42e, 0x7cd2, 0xb400, 0xdd11, 0x4d5c, 0xca25, 0x0, 0x1);
        gbc.writeMem(0xc42e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x7cd2);
        EXPECT(gbc.pc(), 0xc42f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc42e), 0xa7);
        // A7 0394
        gbc.setState(0x4376, 0x8915, 0x2180, 0xca18, 0x591, 0x3ce2, 0x0, 0x0);
        gbc.writeMem(0x4376, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x8915);
        EXPECT(gbc.pc(), 0x4377);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0395
        gbc.setState(0x8675, 0x9589, 0xb890, 0x3d4a, 0xf5cf, 0x1f2e, 0x1, 0x0);
        gbc.writeMem(0x8675, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x9589);
        EXPECT(gbc.pc(), 0x8676);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8675), 0xa7);
        // A7 0396
        gbc.setState(0xa597, 0xc3a3, 0x2b60, 0x11ef, 0xc672, 0x57f4, 0x0, 0x0);
        gbc.writeMem(0xa597, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xc3a3);
        EXPECT(gbc.pc(), 0xa598);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa597), 0xa7);
        // A7 0397
        gbc.setState(0x49c5, 0x2c09, 0x14d0, 0x2bf9, 0xc6ec, 0xbca0, 0x0, 0x0);
        gbc.writeMem(0x49c5, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x2c09);
        EXPECT(gbc.pc(), 0x49c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 0398
        gbc.setState(0xc3df, 0x10cc, 0x3420, 0x3cc5, 0x6117, 0xd06, 0x0, 0x1);
        gbc.writeMem(0xc3df, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x10cc);
        EXPECT(gbc.pc(), 0xc3e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3df), 0xa7);
        // A7 0399
        gbc.setState(0xb177, 0x6b75, 0x5540, 0x9489, 0xbb72, 0xc054, 0x1, 0x1);
        gbc.writeMem(0xb177, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x6b75);
        EXPECT(gbc.pc(), 0xb178);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb177), 0xa7);
        // A7 039A
        gbc.setState(0xd389, 0xf01e, 0x11d0, 0xf9d1, 0x9eb7, 0x4dea, 0x0, 0x0);
        gbc.writeMem(0xd389, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xf01e);
        EXPECT(gbc.pc(), 0xd38a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd389), 0xa7);
        // A7 039B
        gbc.setState(0x2d2a, 0x4fd6, 0x9680, 0x93c3, 0xc95f, 0xb3fb, 0x0, 0x1);
        gbc.writeMem(0x2d2a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x4fd6);
        EXPECT(gbc.pc(), 0x2d2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 039C
        gbc.setState(0xcfd8, 0x1146, 0xa5b0, 0xa495, 0x274a, 0xd8ca, 0x0, 0x1);
        gbc.writeMem(0xcfd8, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x1146);
        EXPECT(gbc.pc(), 0xcfd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfd8), 0xa7);
        // A7 039D
        gbc.setState(0x9021, 0x145f, 0x81b0, 0x2899, 0x11fe, 0xa2c9, 0x0, 0x0);
        gbc.writeMem(0x9021, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x145f);
        EXPECT(gbc.pc(), 0x9022);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9021), 0xa7);
        // A7 039E
        gbc.setState(0xb583, 0x837c, 0xa130, 0x6fd3, 0xf26a, 0xe2f9, 0x0, 0x1);
        gbc.writeMem(0xb583, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x837c);
        EXPECT(gbc.pc(), 0xb584);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb583), 0xa7);
        // A7 039F
        gbc.setState(0x33df, 0xe06a, 0x9850, 0xec04, 0x3fc, 0xb334, 0x1, 0x1);
        gbc.writeMem(0x33df, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xe06a);
        EXPECT(gbc.pc(), 0x33e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03A0
        gbc.setState(0x79af, 0xbb5b, 0x3f0, 0x90e2, 0xc722, 0xe676, 0x0, 0x0);
        gbc.writeMem(0x79af, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xbb5b);
        EXPECT(gbc.pc(), 0x79b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03A2
        gbc.setState(0x6b37, 0xfba1, 0xbc20, 0xd701, 0x340b, 0x3763, 0x1, 0x1);
        gbc.writeMem(0x6b37, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xfba1);
        EXPECT(gbc.pc(), 0x6b38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03A4
        gbc.setState(0xbe40, 0x9ee9, 0xb310, 0x5d9b, 0xe8ac, 0xdaa5, 0x1, 0x1);
        gbc.writeMem(0xbe40, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x9ee9);
        EXPECT(gbc.pc(), 0xbe41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe40), 0xa7);
        // A7 03A5
        gbc.setState(0xcb50, 0x4c9d, 0xd290, 0x70a, 0x8014, 0x618a, 0x0, 0x1);
        gbc.writeMem(0xcb50, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x4c9d);
        EXPECT(gbc.pc(), 0xcb51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb50), 0xa7);
        // A7 03A6
        gbc.setState(0xb94d, 0x9c83, 0xa420, 0xce10, 0x9587, 0xae0, 0x1, 0x1);
        gbc.writeMem(0xb94d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x9c83);
        EXPECT(gbc.pc(), 0xb94e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb94d), 0xa7);
        // A7 03A7
        gbc.setState(0xcd73, 0xe52a, 0x9200, 0x4d0d, 0x3904, 0x9306, 0x1, 0x1);
        gbc.writeMem(0xcd73, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xe52a);
        EXPECT(gbc.pc(), 0xcd74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd73), 0xa7);
        // A7 03A8
        gbc.setState(0x6c8, 0x2832, 0x19b0, 0xb9c9, 0x264c, 0xc1a9, 0x0, 0x1);
        gbc.writeMem(0x6c8, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x2832);
        EXPECT(gbc.pc(), 0x6c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03A9
        gbc.setState(0x23b6, 0x502, 0xd50, 0x63c0, 0x72ba, 0x82, 0x0, 0x0);
        gbc.writeMem(0x23b6, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x502);
        EXPECT(gbc.pc(), 0x23b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03AA
        gbc.setState(0x870c, 0xbb2a, 0xd3a0, 0x3587, 0x89ca, 0x5971, 0x0, 0x1);
        gbc.writeMem(0x870c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xbb2a);
        EXPECT(gbc.pc(), 0x870d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x870c), 0xa7);
        // A7 03AB
        gbc.setState(0x98fb, 0x3f3b, 0xfe40, 0x172a, 0xe2d6, 0xd353, 0x1, 0x1);
        gbc.writeMem(0x98fb, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x3f3b);
        EXPECT(gbc.pc(), 0x98fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98fb), 0xa7);
        // A7 03AC
        gbc.setState(0x212b, 0xa465, 0xdbb0, 0x5790, 0xdacc, 0xd7ff, 0x0, 0x0);
        gbc.writeMem(0x212b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xa465);
        EXPECT(gbc.pc(), 0x212c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03AD
        gbc.setState(0xecc2, 0x9279, 0x5ee0, 0x5c8a, 0xd6de, 0xa773, 0x0, 0x0);
        gbc.writeMem(0xecc2, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x9279);
        EXPECT(gbc.pc(), 0xecc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecc2), 0xa7);
        // A7 03AE
        gbc.setState(0xcf2b, 0x3e0d, 0xb170, 0x375, 0x47b6, 0x1e57, 0x1, 0x0);
        gbc.writeMem(0xcf2b, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x3e0d);
        EXPECT(gbc.pc(), 0xcf2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf2b), 0xa7);
        // A7 03AF
        gbc.setState(0x9c86, 0x952a, 0x68a0, 0x24ea, 0x3756, 0x25e8, 0x0, 0x0);
        gbc.writeMem(0x9c86, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x952a);
        EXPECT(gbc.pc(), 0x9c87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c86), 0xa7);
        // A7 03B0
        gbc.setState(0x9448, 0xabbc, 0x53b0, 0x38c7, 0x9b7d, 0x43b4, 0x1, 0x1);
        gbc.writeMem(0x9448, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xabbc);
        EXPECT(gbc.pc(), 0x9449);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9448), 0xa7);
        // A7 03B1
        gbc.setState(0x3e87, 0xb827, 0x4f90, 0xe65f, 0xeb87, 0x24da, 0x1, 0x1);
        gbc.writeMem(0x3e87, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xb827);
        EXPECT(gbc.pc(), 0x3e88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03B2
        gbc.setState(0x3d58, 0x7ff0, 0x90f0, 0xb189, 0x30f8, 0x7aa3, 0x0, 0x1);
        gbc.writeMem(0x3d58, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x7ff0);
        EXPECT(gbc.pc(), 0x3d59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03B3
        gbc.setState(0x4525, 0xa500, 0xd340, 0x4663, 0x5ee3, 0x648e, 0x1, 0x1);
        gbc.writeMem(0x4525, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xa500);
        EXPECT(gbc.pc(), 0x4526);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03B4
        gbc.setState(0x2310, 0x40d6, 0x52f0, 0x3f06, 0xfb9e, 0xfe25, 0x1, 0x1);
        gbc.writeMem(0x2310, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x40d6);
        EXPECT(gbc.pc(), 0x2311);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03B5
        gbc.setState(0x1169, 0x5c8, 0x8ef0, 0x7292, 0x6a24, 0x512e, 0x0, 0x0);
        gbc.writeMem(0x1169, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x5c8);
        EXPECT(gbc.pc(), 0x116a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03B6
        gbc.setState(0xce08, 0x9cdd, 0x8e00, 0x960e, 0x8857, 0xe13f, 0x1, 0x0);
        gbc.writeMem(0xce08, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x9cdd);
        EXPECT(gbc.pc(), 0xce09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce08), 0xa7);
        // A7 03B7
        gbc.setState(0x9553, 0x93a2, 0xaea0, 0x1f16, 0x5e1e, 0xceb7, 0x0, 0x0);
        gbc.writeMem(0x9553, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x93a2);
        EXPECT(gbc.pc(), 0x9554);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9553), 0xa7);
        // A7 03B8
        gbc.setState(0x5345, 0xeeba, 0x9b10, 0xe843, 0xa514, 0x16bf, 0x0, 0x0);
        gbc.writeMem(0x5345, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xeeba);
        EXPECT(gbc.pc(), 0x5346);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03B9
        gbc.setState(0xed6c, 0xd72c, 0x2570, 0x7f00, 0x4079, 0x52f4, 0x0, 0x1);
        gbc.writeMem(0xed6c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xd72c);
        EXPECT(gbc.pc(), 0xed6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed6c), 0xa7);
        // A7 03BA
        gbc.setState(0xa256, 0xfff, 0xe480, 0x8822, 0xcf2d, 0x992e, 0x0, 0x0);
        gbc.writeMem(0xa256, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xfff);
        EXPECT(gbc.pc(), 0xa257);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa256), 0xa7);
        // A7 03BB
        gbc.setState(0x9075, 0xd0ef, 0xd520, 0x60a, 0x4f64, 0x38ca, 0x1, 0x0);
        gbc.writeMem(0x9075, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xd0ef);
        EXPECT(gbc.pc(), 0x9076);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9075), 0xa7);
        // A7 03BC
        gbc.setState(0x88ed, 0x7cec, 0xd570, 0x7772, 0xba62, 0x9549, 0x0, 0x1);
        gbc.writeMem(0x88ed, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x7cec);
        EXPECT(gbc.pc(), 0x88ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88ed), 0xa7);
        // A7 03BD
        gbc.setState(0xd9fd, 0xd149, 0xc9f0, 0xf310, 0xfc2b, 0xd145, 0x1, 0x1);
        gbc.writeMem(0xd9fd, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xd149);
        EXPECT(gbc.pc(), 0xd9fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9fd), 0xa7);
        // A7 03BE
        gbc.setState(0xbbae, 0xb35e, 0x3dd0, 0xbd0f, 0x3092, 0xeadb, 0x1, 0x1);
        gbc.writeMem(0xbbae, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xb35e);
        EXPECT(gbc.pc(), 0xbbaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbae), 0xa7);
        // A7 03BF
        gbc.setState(0xdb88, 0x8ae8, 0xef80, 0x466f, 0x8fef, 0x6c74, 0x0, 0x1);
        gbc.writeMem(0xdb88, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x8ae8);
        EXPECT(gbc.pc(), 0xdb89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb88), 0xa7);
        // A7 03C0
        gbc.setState(0x5bf2, 0xe7f4, 0x5ee0, 0x7836, 0x535f, 0xa40a, 0x1, 0x0);
        gbc.writeMem(0x5bf2, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xe7f4);
        EXPECT(gbc.pc(), 0x5bf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03C1
        gbc.setState(0x6063, 0x4c86, 0xd560, 0xc058, 0xd285, 0xf3be, 0x0, 0x0);
        gbc.writeMem(0x6063, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x4c86);
        EXPECT(gbc.pc(), 0x6064);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03C2
        gbc.setState(0x796f, 0x18fb, 0x1e90, 0x4930, 0xcf0f, 0xd15a, 0x0, 0x0);
        gbc.writeMem(0x796f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x18fb);
        EXPECT(gbc.pc(), 0x7970);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03C4
        gbc.setState(0xfbe, 0xd6aa, 0xe070, 0x51bc, 0x77a5, 0xdc94, 0x0, 0x0);
        gbc.writeMem(0xfbe, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xd6aa);
        EXPECT(gbc.pc(), 0xfbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03C5
        gbc.setState(0x9015, 0x3edd, 0x9670, 0xde44, 0x7020, 0x40b4, 0x1, 0x0);
        gbc.writeMem(0x9015, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x3edd);
        EXPECT(gbc.pc(), 0x9016);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9015), 0xa7);
        // A7 03C6
        gbc.setState(0x9019, 0xe29a, 0x6ce0, 0xc287, 0x7ae1, 0x49c2, 0x1, 0x1);
        gbc.writeMem(0x9019, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xe29a);
        EXPECT(gbc.pc(), 0x901a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9019), 0xa7);
        // A7 03C7
        gbc.setState(0xcda8, 0x6e17, 0x65e0, 0xbc42, 0xcb6c, 0x2d24, 0x0, 0x1);
        gbc.writeMem(0xcda8, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x6e17);
        EXPECT(gbc.pc(), 0xcda9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcda8), 0xa7);
        // A7 03C8
        gbc.setState(0xe92, 0x7ec2, 0xa7b0, 0xc6ca, 0x4a2c, 0xc0f0, 0x0, 0x1);
        gbc.writeMem(0xe92, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x7ec2);
        EXPECT(gbc.pc(), 0xe93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03C9
        gbc.setState(0x5900, 0x6249, 0x5f90, 0xdc7d, 0x1460, 0xa882, 0x1, 0x1);
        gbc.writeMem(0x5900, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x6249);
        EXPECT(gbc.pc(), 0x5901);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03CA
        gbc.setState(0x2eea, 0xee80, 0x8b10, 0xcae9, 0xdc5d, 0xbfb1, 0x1, 0x1);
        gbc.writeMem(0x2eea, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xee80);
        EXPECT(gbc.pc(), 0x2eeb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03CB
        gbc.setState(0x3782, 0x8c33, 0x6780, 0x87f0, 0x290f, 0x759a, 0x1, 0x0);
        gbc.writeMem(0x3782, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x8c33);
        EXPECT(gbc.pc(), 0x3783);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03CC
        gbc.setState(0xa794, 0x2528, 0xe600, 0xb90b, 0x72c2, 0xbe3d, 0x0, 0x0);
        gbc.writeMem(0xa794, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x2528);
        EXPECT(gbc.pc(), 0xa795);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa794), 0xa7);
        // A7 03CD
        gbc.setState(0x8fd5, 0x64fa, 0xf750, 0xb940, 0x57ca, 0xe203, 0x0, 0x1);
        gbc.writeMem(0x8fd5, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x64fa);
        EXPECT(gbc.pc(), 0x8fd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fd5), 0xa7);
        // A7 03CE
        gbc.setState(0x8c1a, 0x82f7, 0xda70, 0x4eda, 0x6dd7, 0x781a, 0x1, 0x0);
        gbc.writeMem(0x8c1a, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x82f7);
        EXPECT(gbc.pc(), 0x8c1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c1a), 0xa7);
        // A7 03CF
        gbc.setState(0x2d39, 0x1151, 0x6980, 0xad29, 0x4015, 0x3ec5, 0x1, 0x1);
        gbc.writeMem(0x2d39, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x1151);
        EXPECT(gbc.pc(), 0x2d3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03D0
        gbc.setState(0x7878, 0x53e2, 0x91d0, 0x8043, 0x6ea5, 0xccd, 0x1, 0x0);
        gbc.writeMem(0x7878, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x53e2);
        EXPECT(gbc.pc(), 0x7879);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03D2
        gbc.setState(0x568, 0x5feb, 0x7e90, 0xc368, 0x6590, 0x41ef, 0x1, 0x0);
        gbc.writeMem(0x568, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x5feb);
        EXPECT(gbc.pc(), 0x569);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03D3
        gbc.setState(0x4b62, 0xd170, 0x1c80, 0x7836, 0xc6f7, 0x66d6, 0x0, 0x1);
        gbc.writeMem(0x4b62, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xd170);
        EXPECT(gbc.pc(), 0x4b63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03D4
        gbc.setState(0xbe59, 0xf5f1, 0x1630, 0x2085, 0xbf9b, 0xe27b, 0x0, 0x0);
        gbc.writeMem(0xbe59, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xf5f1);
        EXPECT(gbc.pc(), 0xbe5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe59), 0xa7);
        // A7 03D5
        gbc.setState(0x5f73, 0xcabf, 0xa800, 0x8029, 0xfc04, 0x7b2c, 0x1, 0x1);
        gbc.writeMem(0x5f73, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xcabf);
        EXPECT(gbc.pc(), 0x5f74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03D6
        gbc.setState(0x43d6, 0xde80, 0x9120, 0x47b, 0xb803, 0xa429, 0x1, 0x0);
        gbc.writeMem(0x43d6, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xde80);
        EXPECT(gbc.pc(), 0x43d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03D7
        gbc.setState(0x6855, 0x793b, 0x19b0, 0xaa82, 0x188, 0xddf8, 0x1, 0x1);
        gbc.writeMem(0x6855, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x793b);
        EXPECT(gbc.pc(), 0x6856);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03D8
        gbc.setState(0x2f81, 0x161, 0x53b0, 0xa48c, 0x3fb7, 0xdf7d, 0x1, 0x0);
        gbc.writeMem(0x2f81, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x161);
        EXPECT(gbc.pc(), 0x2f82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03D9
        gbc.setState(0x6c4d, 0x29d4, 0x5b00, 0xc9a7, 0x32e7, 0x16b1, 0x0, 0x1);
        gbc.writeMem(0x6c4d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x29d4);
        EXPECT(gbc.pc(), 0x6c4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03DA
        gbc.setState(0x3905, 0xdfc9, 0x72e0, 0x3a75, 0x99ab, 0xc877, 0x0, 0x1);
        gbc.writeMem(0x3905, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xdfc9);
        EXPECT(gbc.pc(), 0x3906);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03DB
        gbc.setState(0x41f8, 0x149, 0x2ad0, 0x36ed, 0xc454, 0x9024, 0x0, 0x1);
        gbc.writeMem(0x41f8, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x149);
        EXPECT(gbc.pc(), 0x41f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03DC
        gbc.setState(0x559e, 0x231, 0x5600, 0xdecd, 0x56b9, 0xa2c1, 0x1, 0x0);
        gbc.writeMem(0x559e, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x231);
        EXPECT(gbc.pc(), 0x559f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03DD
        gbc.setState(0xe1be, 0x2229, 0x8f20, 0xb2dc, 0x5d18, 0x368d, 0x1, 0x1);
        gbc.writeMem(0xe1be, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x2229);
        EXPECT(gbc.pc(), 0xe1bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1be), 0xa7);
        // A7 03DE
        gbc.setState(0xa635, 0x4a21, 0x98e0, 0x22a3, 0x2464, 0x979b, 0x1, 0x1);
        gbc.writeMem(0xa635, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x4a21);
        EXPECT(gbc.pc(), 0xa636);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa635), 0xa7);
        // A7 03DF
        gbc.setState(0x2fec, 0x68e6, 0xf3c0, 0x4668, 0x3aeb, 0x31d9, 0x1, 0x1);
        gbc.writeMem(0x2fec, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x68e6);
        EXPECT(gbc.pc(), 0x2fed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03E0
        gbc.setState(0x12e4, 0x2823, 0xba70, 0x6c1d, 0xcb43, 0x796e, 0x0, 0x0);
        gbc.writeMem(0x12e4, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x2823);
        EXPECT(gbc.pc(), 0x12e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03E2
        gbc.setState(0xc86c, 0x8336, 0xa7c0, 0x124e, 0x96c2, 0xd5c1, 0x0, 0x1);
        gbc.writeMem(0xc86c, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x8336);
        EXPECT(gbc.pc(), 0xc86d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc86c), 0xa7);
        // A7 03E3
        gbc.setState(0xa3d0, 0xfd42, 0xe1f0, 0x9a67, 0xf1bc, 0xfae7, 0x0, 0x1);
        gbc.writeMem(0xa3d0, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xfd42);
        EXPECT(gbc.pc(), 0xa3d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3d0), 0xa7);
        // A7 03E4
        gbc.setState(0x38ee, 0x33fb, 0xb7a0, 0xec9f, 0xdfa0, 0x94a7, 0x1, 0x0);
        gbc.writeMem(0x38ee, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x33fb);
        EXPECT(gbc.pc(), 0x38ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03E5
        gbc.setState(0xfcb, 0x84de, 0xdc80, 0xae0d, 0x22a1, 0x141f, 0x0, 0x0);
        gbc.writeMem(0xfcb, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x84de);
        EXPECT(gbc.pc(), 0xfcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A7 03E6
        gbc.setState(0x206d, 0x99d7, 0x84e0, 0x16c2, 0x6276, 0xf376, 0x1, 0x1);
        gbc.writeMem(0x206d, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x99d7);
        EXPECT(gbc.pc(), 0x206e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
    }
